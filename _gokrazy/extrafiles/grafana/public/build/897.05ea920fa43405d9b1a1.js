"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[897],{77293:(O,P,t)=>{t.d(P,{Yb:()=>m,d5:()=>b});var E=t(93003);const m=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function g(){const h=E.v.licenseInfo?.trialExpiry;return!!(h&&h>0)}const b=()=>g()&&E.v.featureToggles.featureHighlights},40897:(O,P,t)=>{t.d(P,{J_:()=>q,F5:()=>ta,M9:()=>Y,gv:()=>Z,Kj:()=>aa,bZ:()=>G,kY:()=>X,oe:()=>ea});var E=t(83383),m=t(93003),g=t(9800),b=t(47214),h=t(57388),M=t(659),I=t(77582),f=t(29930),s=t(91162),i=t(13011),u=t(92885),v=t(3363),o=t(95156);const D=async()=>await(0,f.i)().get("/api/datasources"),x=async a=>{const n=await(0,v.n)((0,f.i)().fetch({method:"GET",url:`/api/datasources/${a}`,params:(0,o.y)(),showErrorAlert:!1}));if(n.ok)return n.data;throw Error(`Could not find data source by ID: "${a}"`)},A=async a=>{const n=await(0,v.n)((0,f.i)().fetch({method:"GET",url:`/api/datasources/uid/${a}`,params:(0,o.y)(),showErrorAlert:!1}));if(n.ok)return n.data;throw Error(`Could not find data source by UID: "${a}"`)},S=async a=>{try{return await A(a)}catch{console.log(`Failed to lookup data source using UID "${a}"`)}try{return await x(a)}catch{console.log(`Failed to lookup data source using ID "${a}"`)}throw Error("Could not find data source")},C=a=>(0,f.i)().post("/api/datasources",a),R=()=>(0,f.i)().get("/api/plugins",{enabled:1,type:"datasource"}),L=a=>(0,f.i)().put(`/api/datasources/uid/${a.uid}`,a),N=a=>(0,f.i)().delete(`/api/datasources/uid/${a}`);var T=t(3597),B=t(77274);const $=a=>{(0,B.ff)("grafana_ds_add_datasource_clicked",a)},w=a=>{(0,B.ff)("grafana_ds_test_datasource_clicked",a)};var V=t(85597),z=t(24699),K=t(14876);function F(a){const n=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(e=>e),r={},p={},c=j();for(const e of n)r[e.id]=e;for(const e of a){const l=c.find(k=>k.id===e.id);if((e.enterprise||l)&&(e.category="enterprise",e.unlicensed=!(0,K.v)("enterprise.plugins"),e.info.links=l?.info?.links||e.info.links),e.info.links)for(const k of e.info.links)k.name="Learn more";(n.find(k=>k.id===e.category)||r.other).plugins.push(e),p[e.id]=e}for(const e of n){if(e.id==="cloud"&&e.plugins.push(Q()),e.id==="enterprise")for(const l of c)p[l.id]||e.plugins.push(l);H(e.plugins)}return n.filter(e=>e.plugins.length>0)}function H(a){const n={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};a.sort((r,p)=>{const c=n[r.id]||0,e=n[p.id]||0;return c>e?-1:c<e||r.name>p.name?1:-1})}function j(){return[d({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),d({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),d({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),d({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),d({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),d({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),d({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),d({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),d({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),d({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),d({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),d({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),d({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),d({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),d({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),d({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),d({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"})]}function Q(){return{id:"gcloud",name:"Grafana Cloud",type:z.zV.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function d(a){return{id:a.id,name:a.name,type:z.zV.datasource,module:"phantom",baseUrl:"",info:{description:a.description,logos:{small:a.imgUrl,large:a.imgUrl},author:{name:"Grafana Labs"},links:[{url:m.v.pluginCatalogURL+a.id,name:"Install now"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var J=t(79508),y=t(71128),W=t(93769);const Y=(a,n={loadDataSource:Z,loadDataSourceMeta:_,getDataSource:W.f6,getDataSourceMeta:W.G4,importDataSourcePlugin:u.nL})=>async(r,p)=>{if(!a){r((0,y.CT)(new Error("Invalid UID")));return}try{const c=await r(n.loadDataSource(a));await r(n.loadDataSourceMeta(c));const e=n.getDataSource(p().dataSources,a),l=n.getDataSourceMeta(p().dataSources,e.type),U=await n.importDataSourcePlugin(l);r((0,y.iZ)(U))}catch(c){c instanceof Error&&r((0,y.CT)(c))}},X=(a,n={getDatasourceSrv:s.ak,getBackendSrv:f.i})=>async(r,p)=>{const c=await n.getDatasourceSrv().get(a);c.testDatasource&&(r((0,y.j_)()),n.getBackendSrv().withNoBackendCache(async()=>{try{const e=await c.testDatasource();r((0,y.ng)(e)),w({grafana_version:m.v.buildInfo.version,plugin_id:c.type,datasource_uid:c.uid,success:!0})}catch(e){let l,U;e instanceof g.ZA?(l=e.message,U=e.details):(0,b.kW)(e)?l=e.data.message??`HTTP error ${e.statusText}`:e instanceof Error&&(l=e.message),r((0,y.Aq)({message:l,details:U})),w({grafana_version:m.v.buildInfo.version,plugin_id:c.type,datasource_uid:c.uid,success:!1})}}))};function G(){return async a=>{const n=await D();a((0,y.be)(n))}}function Z(a){return async n=>{let r=await S(a);return a!==r.uid&&(window.location.href=E.u.assureBaseUrl(`/datasources/edit/${r.uid}`),r={}),n((0,y.rl)(r)),r}}function _(a){return async n=>{const r=await(0,i.a)(a.type),p=await(0,u.nL)(r),c=p.DataSourceClass.prototype instanceof g.CK,e={...r,isBackend:r.backend||c};n((0,y.jS)(e)),p.meta=e,n((0,M.RL)((0,J.B1)(a,p)))}}function q(a,n=T.n.Edit){return async(r,p)=>{await r(G());const c=p().dataSources.dataSources,e=c.length===0,l={name:a.name,type:a.id,access:"proxy",isDefault:e};(0,V.NV)(c,l.name)&&(l.name=(0,V.eM)(c,l.name));const U=await C(l);await(0,s.ak)().reload(),await I.Vt.fetchUserPermissions(),$({grafana_version:m.v.buildInfo.version,plugin_id:a.id,datasource_uid:U.datasource.uid,plugin_version:U.meta?.info?.version}),h.E1.push(n.replace(/:uid/gi,U.datasource.uid))}}function aa(){return async a=>{a((0,y.Ww)());const n=await R(),r=F(n);a((0,y.wZ)({plugins:n,categories:r}))}}function ea(a){return async n=>(await L(a),await(0,s.ak)().reload(),n(Z(a.uid)))}function ta(){return async(a,n)=>{const{uid:r}=n().dataSources.dataSource;await N(r),await(0,s.ak)().reload(),h.E1.push("/datasources")}}},79508:(O,P,t)=>{t.d(P,{B1:()=>s,nI:()=>i,xG:()=>u});var E=t(24699),m=t(14876),g=t(73194),b=t(47694),h=t(77582),M=t(77293),I=t(81168);const f="Loading";function s(o,D){const x=D.meta,A=b.ZP.featureToggles.featureHighlights,S={img:x.info.logos.large,id:"datasource-"+o.uid,subTitle:`Type: ${x.name}`,url:"",text:o.name,breadcrumbs:[{title:"Data Sources",url:"datasources"}],children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${o.uid}`,text:"Settings",url:`datasources/edit/${o.uid}/`}]};if(D.configPages)for(const w of D.configPages)S.children.push({active:!1,text:w.title,icon:w.icon,url:`datasources/edit/${o.uid}/?page=${w.id}`,id:`datasource-page-${w.id}`});x.includes&&v(x.includes)&&h.Vt.hasRole("Admin")&&S.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${o.uid}`,text:"Dashboards",url:`datasources/edit/${o.uid}/dashboards`});const C=o.type===f,R="feature-highlights-data-source-permissions-badge",L={active:!1,icon:"lock",id:`datasource-permissions-${o.uid}`,text:"Permissions",url:`datasources/edit/${o.uid}/permissions`};(0,M.d5)()&&!C&&(L.tabSuffix=()=>(0,g.Z)({experimentId:R,eventVariant:"trial"})),(0,m.v)("dspermissions.enforcement")?h.Vt.hasPermission(I.AccessControlAction.DataSourcesPermissionsRead)&&S.children.push(L):A&&!C&&S.children.push({...L,url:L.url+"/upgrade",tabSuffix:()=>(0,g.Z)({experimentId:R})});const N="feature-highlights-data-source-insights-badge",T={active:!1,icon:"info-circle",id:`datasource-insights-${o.uid}`,text:"Insights",url:`datasources/edit/${o.uid}/insights`};(0,M.d5)()&&!C&&(T.tabSuffix=()=>(0,g.Z)({experimentId:N,eventVariant:"trial"})),(0,m.v)("analytics")?h.Vt.hasPermission(I.AccessControlAction.DataSourcesInsightsRead)&&S.children.push(T):A&&!C&&S.children.push({...T,url:T.url+"/upgrade",tabSuffix:()=>(0,g.Z)({experimentId:N})});const B="feature-highlights-query-caching-badge",$={active:!1,icon:"database",id:`datasource-cache-${o.uid}`,text:"Cache",url:`datasources/edit/${o.uid}/cache`,hideFromTabs:!x.isBackend||!b.ZP.caching.enabled};return(0,M.d5)()&&!C&&($.tabSuffix=()=>(0,g.Z)({experimentId:B,eventVariant:"trial"})),(0,m.v)("caching")?h.Vt.hasPermissionInMetadata(I.AccessControlAction.DataSourcesCachingRead,o)&&S.children.push($):A&&!C&&S.children.push({...$,url:$.url+"/upgrade",tabSuffix:()=>(0,g.Z)({experimentId:B})}),S}function i(o,D){let x={text:""};for(const A of o.children)if(A.id.indexOf(D)>0){A.active=!0,x=A;break}return{main:o,node:x}}function u(o){const D=s({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:f,typeName:f,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:E.zV.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return i(D,o)}function v(o){return o.find(D=>D.type==="dashboard")!==void 0}},93769:(O,P,t)=>{t.d(P,{G4:()=>b,I5:()=>m,IA:()=>f,IO:()=>h,f6:()=>g,mt:()=>E,r7:()=>I});const E=s=>{const i=new RegExp(s.searchQuery,"i");return s.dataSources.filter(v=>i.test(v.name)||i.test(v.database)||i.test(v.type)).sort((v,o)=>s.isSortAscending?v.name.localeCompare(o.name):o.name.localeCompare(v.name))},m=s=>{const i=new RegExp(s.dataSourceTypeSearchQuery,"i");return s.plugins.filter(u=>i.test(u.name))},g=(s,i)=>s.dataSource.uid===i?s.dataSource:{},b=(s,i)=>s.dataSourceMeta.id===i?s.dataSourceMeta:{},h=s=>s.searchQuery,M=s=>s.layoutMode,I=s=>s.dataSourcesCount,f=s=>s.isSortAscending},85597:(O,P,t)=>{t.d(P,{NV:()=>g,eM:()=>b,iU:()=>s});var E=t(27677),m=t(83383);function g(i,u){return i.filter(v=>v.name.toLowerCase()===u.toLowerCase()).length>0}function b(i,u){for(;g(i,u);)h(u)?u=`${f(u)}${I(M(u))}`:u=`${u}-1`;return u}function h(i){return i.endsWith("-",i.length-1)}function M(i){return parseInt(i.slice(-1),10)}function I(i){return isNaN(i)?1:i+1}function f(i){return i.slice(0,i.length-1)}const s=i=>{const u=JSON.stringify({datasource:i.name,context:"explore"});return E.Cj.renderUrl(m.u.assureBaseUrl("/explore"),{left:u})}}}]);

//# sourceMappingURL=897.05ea920fa43405d9b1a1.js.map