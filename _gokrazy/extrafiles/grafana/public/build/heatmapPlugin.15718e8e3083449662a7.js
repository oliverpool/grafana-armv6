"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9101],{"./public/app/angular/panel/query_ctrl.ts":(t,e,i)=>{i.d(e,{G:()=>r});var a=i("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class r{constructor(t,e){var i,r,o,n,l;s(this,"target",void 0),s(this,"datasource",void 0),s(this,"panelCtrl",void 0),s(this,"panel",void 0),s(this,"hasRawMode",void 0),s(this,"error",void 0),s(this,"isLastQuery",void 0),this.$scope=t,this.$injector=e,this.$scope=t,this.$injector=e,this.panelCtrl=null!==(i=this.panelCtrl)&&void 0!==i?i:t.ctrl.panelCtrl,this.target=null!==(r=this.target)&&void 0!==r?r:t.ctrl.target,this.datasource=null!==(o=this.datasource)&&void 0!==o?o:t.ctrl.datasource,this.panel=null!==(n=null===(l=this.panelCtrl)||void 0===l?void 0:l.panel)&&void 0!==n?n:t.ctrl.panelCtrl.panel,this.isLastQuery=(0,a.indexOf)(this.panel.targets,this.target)===this.panel.targets.length-1}refresh(){this.panelCtrl.refresh()}}},"./public/app/plugins/panel/heatmap/module.ts":(t,e,i)=>{i.r(e),i.d(e,{PanelCtrl:()=>et});var a=i("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),s=i("../../opt/drone/yarncache/jquery-npm-3.6.0-ca7872bdbb-8fd5fef4aa.zip/node_modules/jquery/dist/jquery-exposed.js"),r=i.n(s),o=i("../../opt/drone/yarncache/d3-npm-5.15.0-0c7696026f-7342d82e55.zip/node_modules/d3/index.js"),n=i("./public/app/core/core.ts"),l=i("./public/app/core/utils/ticks.ts"),h=i("../../opt/drone/yarncache/d3-scale-chromatic-npm-1.5.0-4dfce2812a-3bff7717f6.zip/node_modules/d3-scale-chromatic/src/index.js");function c(t,e,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=h[t.value],r="always"===t.invert||t.invert===(e?"light":"dark"),n=r?i:a,l=r?a:i;return o.scaleSequential(s).domain([n,l])}function d(t,e){let i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"linear"===t.colorScale?i=o.scaleLinear().domain([a,e]).range([0,1]):"sqrt"===t.colorScale&&(i=o.scalePow().exponent(t.exponent).domain([a,e]).range([0,1])),i}var p=i("./public/app/angular/core_module.ts"),u=i("./packages/grafana-data/src/index.ts"),m=i("./public/app/core/config.ts");function g(t,e,i,s,n,h,c){const d=r()(t).find("svg"),p=d.get(0);if(p){const t=o.select(p);if(h<=0||0===p.childNodes.length)return;const r=o.scaleLinear().domain([e,i]).range([0,h]),c=function(t,e,i,s){const r=e-t,o=(0,l.tickStep)(t,e,3),n=Math.ceil(r/o),h=function(t,e){if(t<0)return Math.floor(t/e)*e;return 0}(t,o);let c=[];for(let t=0;t<n;t++){const e=h+o*t;x(s,e,o)?c.push(s):(s<e&&c.push(s),x(i,e,o)?c.push(i):(i<e&&c.push(i),c.push(e)))}x(i,e,o)||c.push(i);return c.push(e),c=(0,a.sortBy)((0,a.uniq)(c)),c}(e,i,s,n),u=o.axisBottom(r).tickValues(c).tickSize(0),m=d.find(":first-child"),g=function(t){const e=t.get(0);return e&&e.height&&e.height.baseVal?e.height.baseVal.value:0}(d)+0,v=function(t){const e=t.get(0);return e&&e.x&&e.x.baseVal?e.x.baseVal.value:0}(m)+10;o.select(p).append("g").attr("class","axis").attr("transform","translate("+v+","+g+")").call(u),t.select(".axis").select(".domain").remove()}}function v(t){r()(t).find("svg").empty()}function x(t,e,i){return Math.abs(t-e)<.3*i}p.ZP.directive("colorLegend",(()=>({restrict:"E",template:'<div class="heatmap-color-legend"><svg width="16.5rem" height="24px"></svg></div>',link:(t,e,i)=>{const s=t.ctrl,l=t.ctrl.panel;function h(){var t;const i=r()(e).find("svg"),h=Math.floor(null!==(t=i.outerWidth())&&void 0!==t?t:10);if("spectrum"===l.color.mode){const t=c((0,a.find)(s.colorSchemes,{value:l.color.colorScheme}),n.Vt.user.lightTheme,h);!function(t,e){var i;const a=r()(t).find("svg");v(t);const s=Math.floor(null!==(i=a.outerWidth())&&void 0!==i?i:30),n=a.attr("height");if(s){const t=Math.floor(s/2),i=Math.floor(s/t),r=o.range(0,s,i),l=a.get(0);if(l){o.select(l).selectAll(".heatmap-color-legend-rect").data(r).enter().append("rect").attr("x",(t=>t)).attr("y",0).attr("width",i+1).attr("height",n).attr("stroke-width",0).attr("fill",(t=>e(t)))}}}(e,t)}else if("opacity"===l.color.mode){const t=l.color;!function(t,e){const i=r()(t).find("svg"),a=i.get(0);if(a){var s;v(t);const r=o.select(a),n=Math.floor(null!==(s=i.outerWidth())&&void 0!==s?s:30),l=i.attr("height");if(n){let t;"linear"===e.colorScale?t=o.scaleLinear().domain([0,n]).range([0,1]):"sqrt"===e.colorScale&&(t=o.scalePow().exponent(e.exponent).domain([0,n]).range([0,1]));const i=10,a=o.range(0,n,i);r.selectAll(".heatmap-opacity-legend-rect").data(a).enter().append("rect").attr("x",(t=>t)).attr("y",0).attr("width",i).attr("height",l).attr("stroke-width",0).attr("fill",(0,u.getColorForTheme)(e.cardColor,m.vc.theme)).style("opacity",(e=>t(e)))}}}(e,t)}}h(),s.events.on(u.PanelEvents.render,(()=>{h()}))}}))),p.ZP.directive("heatmapLegend",(()=>({restrict:"E",template:'<div class="heatmap-color-legend"><svg width="100px" height="6px"></svg></div>',link:(t,e,i)=>{const s=t.ctrl,l=t.ctrl.panel;function h(){if(v(e),!(0,a.isEmpty)(s.data)&&!(0,a.isEmpty)(s.data.cards)){const t=s.data.cardStats,i=(0,a.isNil)(l.color.min)?Math.max(t.min,0):l.color.min,h=(0,a.isNil)(l.color.max)?t.max:l.color.max,p=t.max,u=t.min;if("spectrum"===l.color.mode){const t=(0,a.find)(s.colorSchemes,{value:l.color.colorScheme});!function(t,e,i,a,s,l){const h=r()(t).find("svg"),d=h.get(0);if(d){var p;const r=o.select(d);v(t);const u=Math.floor(null!==(p=h.outerWidth())&&void 0!==p?p:10)-30,m=h.attr("height"),x=(a-i)/u*10,f=u/(a-i),y=o.range(i,a,x),b=c(e,n.Vt.user.lightTheme,a,i);r.append("g").attr("class","legend-color-bar").attr("transform","translate(10,0)").selectAll(".heatmap-color-legend-rect").data(y).enter().append("rect").attr("x",(t=>Math.round((t-i)*f))).attr("y",0).attr("width",Math.round(x*f+1)).attr("height",m).attr("stroke-width",0).attr("fill",(t=>b(t))),g(t,i,a,s,l,u,y)}}(e,t,i,h,p,u)}else if("opacity"===l.color.mode){const t=l.color;!function(t,e,i,a,s,n){const l=r()(t).find("svg"),h=l.get(0);if(h){var c;const r=o.select(h);v(t);const p=Math.floor(null!==(c=l.outerWidth())&&void 0!==c?c:30)-30,u=l.attr("height"),m=(a-i)/p*10,x=p/(a-i),f=o.range(i,a,m),y=d(e,a,i);r.append("g").attr("class","legend-color-bar").attr("transform","translate(10,0)").selectAll(".heatmap-opacity-legend-rect").data(f).enter().append("rect").attr("x",(t=>Math.round((t-i)*x))).attr("y",0).attr("width",Math.round(m*x)).attr("height",u).attr("stroke-width",0).attr("fill",e.cardColor).style("opacity",(t=>y(t))),g(t,i,a,s,n,p,f)}}(e,t,i,h,p,u)}}}h(),s.events.on(u.PanelEvents.render,(()=>{h()}))}})));var f=i("./public/app/plugins/sdk.ts"),y=i("./public/app/core/utils/kbn.ts");function b(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class k{constructor(t,e){b(this,"panel",void 0),b(this,"panelCtrl",void 0),b(this,"logScales",void 0),b(this,"dataFormats",void 0),b(this,"yBucketBoundModes",void 0),b(this,"setUnitFormat",(t=>{this.panel.yAxis.format=t,this.panelCtrl.render()})),t.editor=this,this.panelCtrl=t.ctrl,this.panel=this.panelCtrl.panel,this.logScales={linear:1,"log (base 2)":2,"log (base 10)":10,"log (base 32)":32,"log (base 1024)":1024},this.dataFormats={"Time series":"timeseries","Time series buckets":"tsbuckets"},this.yBucketBoundModes={Auto:"auto",Upper:"upper",Lower:"lower",Middle:"middle"}}}function S(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/heatmap/partials/axes_editor.html",controller:k}}function M(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}k.$inject=["$scope","uiSegmentSrv"];class B{constructor(t){M(this,"panel",void 0),M(this,"panelCtrl",void 0),t.editor=this,this.panelCtrl=t.ctrl,this.panel=this.panelCtrl.panel}}function C(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/heatmap/partials/display_editor.html",controller:B}}B.$inject=["$scope"];function A(t,e){let i,a;try{i=w(t.label),a=w(e.label)}catch(t){return console.error(t.message||t),0}return i>a?1:i<a?-1:0}function w(t){if("+Inf"===t||"inf"===t)return 1/0;const e=Number(t);if(isNaN(e))throw new Error(`Error parsing histogram label: ${t} is not a number`);return e}function P(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=0,s=0;const r=[];(0,a.forEach)(t,(t=>{(0,a.forEach)(t.buckets,(a=>{const o={x:t.x,y:a.y,yBounds:a.bounds,values:a.values,count:a.count};e&&0===o.count||r.push(o),1===r.length&&(i=a.count,s=a.count),i=a.count<i?a.count:i,s=a.count>s?a.count:s}))}));const o={min:i,max:s};return{cards:r,cardStats:o}}function H(t,e,i,s){const r=e[0];if(null==r||isNaN(r))return;const o=(0,a.concat)(e,s);t[i]&&t[i].values?(t[i].values.push(r),t[i].points.push(o)):t[i]={x:i,values:[r],points:[o]}}function W(t,e,i,a,s){let r=1;var o;(a.length>3&&(r=parseInt(a[2],10)),t[e])?(t[e].values.push(i),null===(o=t[e].points)||void 0===o||o.push(a),t[e].count+=r):t[e]={y:e,bounds:s,values:[i],points:[a],count:r}}function F(t,e,i){return 1===i?R(t,e):function(t,e,i){return T(t,e,i).bottom}(t,e,i)}function E(t,e){let i,a;return i=Math.floor(t/e)*e,a=(Math.floor(t/e)+1)*e,{bottom:i,top:a}}function R(t,e){return E(t,e).bottom}function Y(t,e){const i=t.values,s=t.points,r={};return(0,a.forEach)(i,((t,i)=>{const a=E(t,e),o=a.bottom;W(r,o,t,s[i],a)})),r}function T(t,e,i){let a,s;if(0===t)return{bottom:0,top:0};const r=z(t,i);let o,n;if(1!==e&&e){const t=1/e;let i=r-Math.floor(r);i=Math.floor(i/t)*t,o=Math.floor(r)+i,n=o+t}else o=Math.floor(r),n=o+1;return s=Math.pow(i,o),a=Math.pow(i,n),{bottom:s,top:a}}function L(t,e,i){const s=t.values,r=t.points,o={};return(0,a.forEach)(s,((t,a)=>{const s=T(t,e,i),n=s.bottom;W(o,n,t,r[a],s)})),o}function z(t,e){return Math.log(t)/Math.log(e)}function O(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(1===i)return Math.abs(e-t);return z(Math.max(t,e)/Math.min(t,e),i)}function $(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const N=160;class V{constructor(t,e){$(this,"tooltip",void 0),$(this,"scope",void 0),$(this,"dashboard",void 0),$(this,"panelCtrl",void 0),$(this,"panel",void 0),$(this,"heatmapPanel",void 0),$(this,"mouseOverBucket",void 0),$(this,"originalFillColor",void 0),this.scope=e,this.dashboard=e.ctrl.dashboard,this.panelCtrl=e.ctrl,this.panel=e.ctrl.panel,this.heatmapPanel=t,this.mouseOverBucket=!1,this.originalFillColor=null,t.on("mouseleave",this.onMouseLeave.bind(this))}onMouseLeave(){this.destroy()}onMouseMove(t){this.panel.tooltip.show&&this.move(t)}add(){this.tooltip=o.select("body").append("div").attr("class","heatmap-tooltip graph-tooltip grafana-tooltip")}destroy(){this.tooltip&&this.tooltip.remove(),this.tooltip=null}show(t,e){if(!this.panel.tooltip.show||!e)return;if(t.panelRelY)return;const{xBucketIndex:i,yBucketIndex:s}=this.getBucketIndexes(t,e);if(!e.buckets[i])return void this.destroy();let r,o,n;this.tooltip||this.add();const l=e.buckets[i],h=(0,a.find)(l.buckets,((t,e)=>t.bounds.bottom===s||e===s.toString())),c=this.dashboard.formatDate(l.x,"YYYY-MM-DD HH:mm:ss");let d,p;if((0,a.isNumber)(this.panel.tooltipDecimals))d=this.countValueFormatter(this.panel.tooltipDecimals,null),p=this.panelCtrl.tickValueFormatter(this.panelCtrl.decimals,null);else{const t=(this.panelCtrl.decimals||-1)+1;d=this.countValueFormatter(t,this.panelCtrl.scaledDecimals+2),p=this.panelCtrl.tickValueFormatter(t,this.panelCtrl.scaledDecimals+2)}let u=`<div class="graph-tooltip-time">${c}</div>\n      <div class="heatmap-histogram"></div>`;if(h)if(h.bounds){if(e.tsBuckets){const t=t=>e.tsBucketsFormatted?e.tsBucketsFormatted[t]:e.tsBuckets[t];r=t(s),"middle"!==this.panel.yBucketBound&&(o=s<e.tsBuckets.length-1?t(s+1):"")}else{r=p(h.y?h.bounds.bottom:0),o=p(h.bounds.top)}n=d(h.count);u+=`<div>\n          bucket: <b>${o&&r?`${r} - ${o}`:r||o}</b> <br>\n          count: <b>${n}</b> <br>\n        </div>`}else u+=`<div>count: <b>${h.count}</b><br></div>`;else{if(!this.panel.tooltip.showHistogram)return void this.destroy();r=s,o="",n=0}this.tooltip.html(u),this.panel.tooltip.showHistogram&&this.addHistogram(l),this.move(t)}getBucketIndexes(t,e){return{xBucketIndex:this.getXBucketIndex(t.x,e),yBucketIndex:this.getYBucketIndex(t.y,e)}}getXBucketIndex(t,e){const i=(0,a.find)(e.buckets,(i=>t>i.x&&t-i.x<=e.xBucketSize));return i?i.x:F(t,e.xBucketSize,1)}getYBucketIndex(t,e){if(e.tsBuckets)return Math.floor(t);return F(t,e.yBucketSize,this.panel.yAxis.logBase)}getSharedTooltipPos(t){return t.pageX=this.heatmapPanel.offset().left+this.scope.xScale(t.x),t.pageY=this.heatmapPanel.offset().top+this.scope.chartHeight*t.panelRelY,t}addHistogram(t){const e=this.scope.ctrl.data.buckets[t.x],i=this.scope.ctrl.data.yBucketSize;let s,r,n;this.scope.ctrl.data.tsBuckets?(s=0,r=this.scope.ctrl.data.tsBuckets.length-1,n=this.scope.ctrl.data.tsBuckets.length):(s=this.scope.ctrl.data.yAxis.min,r=this.scope.ctrl.data.yAxis.max,n=this.scope.ctrl.data.yAxis.ticks);let l=(0,a.map)(e.buckets,(t=>{const e=void 0!==t.count?t.count:t.values.length;return[t.bounds.bottom,e]}));l=(0,a.filter)(l,(t=>t[0]>=s&&t[0]<=r));const h=this.scope.yScale.copy().domain([s,r]).range([0,N]);let c;if(1===this.panel.yAxis.logBase)c=Math.floor(N/(r-s)*i*.9);else{const t=i||1;c=Math.floor(N/n/t*.9)}c=Math.max(c,1);const d=(0,a.reduce)((0,a.map)(l,(t=>t[1])),((t,e)=>t+e),0),p=o.scaleLinear().domain([0,d]).range([0,40]);this.tooltip.select(".heatmap-histogram").append("svg").attr("width",N).attr("height",40).selectAll(".bar").data(l).enter().append("rect").attr("x",(t=>h(t[0]))).attr("width",c).attr("y",(t=>40-p(t[1]))).attr("height",(t=>p(t[1])))}move(t){if(!this.tooltip)return;const e=r()(this.tooltip.node())[0],i=e.clientWidth,a=e.clientHeight;let s=t.pageX+30,o=t.pageY+5;return t.pageX+i+40>window.innerWidth&&(s=t.pageX-i-30),t.pageY-window.pageYOffset+a+20>window.innerHeight&&(o=t.pageY-a-5),this.tooltip.style("left",s+"px").style("top",o+"px")}countValueFormatter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=(0,u.getValueFormat)("short");return a=>(0,u.formattedValueToString)(i(a,t,e))}}var D=i("./packages/grafana-ui/src/index.ts");function j(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class G{constructor(t,e,i,a){j(this,"width",200),j(this,"height",200),j(this,"yScale",void 0),j(this,"xScale",void 0),j(this,"chartWidth",0),j(this,"chartHeight",0),j(this,"chartTop",0),j(this,"chartBottom",0),j(this,"yAxisWidth",0),j(this,"xAxisHeight",0),j(this,"cardPadding",0),j(this,"cardRound",0),j(this,"cardWidth",0),j(this,"cardHeight",0),j(this,"colorScale",void 0),j(this,"opacityScale",void 0),j(this,"mouseUpHandler",void 0),j(this,"data",void 0),j(this,"panel",void 0),j(this,"$heatmap",void 0),j(this,"tooltip",void 0),j(this,"heatmap",void 0),j(this,"timeRange",void 0),j(this,"selection",void 0),j(this,"padding",void 0),j(this,"margin",void 0),j(this,"dataRangeWidingFactor",void 0),j(this,"hoverEvent",void 0),this.scope=t,this.elem=e,this.ctrl=a,this.scope=t,this.elem=e,this.ctrl=a,this.$heatmap=this.elem.find(".heatmap-panel"),this.tooltip=new V(this.$heatmap,this.scope),this.selection={active:!1,x1:-1,x2:-1},this.padding={left:0,right:0,top:0,bottom:0},this.margin={left:25,right:15,top:10,bottom:20},this.dataRangeWidingFactor=1.2,this.ctrl.events.on(u.PanelEvents.render,this.onRender.bind(this)),this.ctrl.tickValueFormatter=this.tickValueFormatter.bind(this),this.ctrl.dashboard.events.on(u.LegacyGraphHoverEvent.type,this.onGraphHover.bind(this),this.scope),this.ctrl.dashboard.events.on(u.LegacyGraphHoverClearEvent.type,this.onGraphHoverClear.bind(this),this.scope),this.$heatmap.on("mousedown",this.onMouseDown.bind(this)),this.$heatmap.on("mousemove",this.onMouseMove.bind(this)),this.$heatmap.on("mouseleave",this.onMouseLeave.bind(this)),this.hoverEvent=new u.LegacyGraphHoverEvent({pos:{},point:{},panel:this.panel})}onGraphHoverClear(){this.clearCrosshair()}onGraphHover(t){this.drawSharedCrosshair(t.pos)}onRender(){this.render(),this.ctrl.renderingCompleted()}setElementHeight(){try{let t=this.ctrl.height||this.panel.height||this.ctrl.row.height;return(0,a.isString)(t)&&(t=parseInt(t.replace("px",""),10)),t-=this.panel.legend.show?28:11,this.$heatmap.css("height",t+"px"),!0}catch(t){return!1}}getYAxisWidth(t){const e=this.getPanelYAxisWidth();if(null!==e)return e+5;const i=t.selectAll(".axis-y text").nodes();return(0,a.max)((0,a.map)(i,(t=>t.getBBox().width)))}getXAxisHeight(t){if(t.select(".axis-x line").empty())return 30;{const e=parseFloat(t.select(".axis-x line").attr("y2"));return parseFloat(t.attr("height"))-e}}addXAxis(){this.scope.xScale=this.xScale=o.scaleTime().domain([this.timeRange.from,this.timeRange.to]).range([0,this.chartWidth]);const t=this.chartWidth/100,e=(0,D.graphTimeFormat)(t,this.timeRange.from.valueOf(),this.timeRange.to.valueOf()),i=this.ctrl.dashboard.getTimezone(),a=o.axisBottom(this.xScale).ticks(t).tickFormat((t=>(0,u.dateTimeFormat)(t.valueOf(),{format:e,timeZone:i}))).tickPadding(10).tickSize(this.chartHeight),s=this.margin.top,r=this.yAxisWidth;this.heatmap.append("g").attr("class","axis axis-x").attr("transform","translate("+r+","+s+")").call(a),this.heatmap.select(".axis-x").select(".domain").remove()}addYAxis(){let t=Math.ceil(this.chartHeight/22.5),e=l.tickStep(this.data.heatmapStats.min,this.data.heatmapStats.max,t),{yMin:i,yMax:s}=this.wideYAxisRange(this.data.heatmapStats.min,this.data.heatmapStats.max,e);i=null!==this.panel.yAxis.min?this.panel.yAxis.min:i,s=null!==this.panel.yAxis.max?this.panel.yAxis.max:s,e=l.tickStep(i,s,t),t=Math.ceil((s-i)/e);const r=l.getPrecision(e);let n=null===this.panel.yAxis.decimals?r:this.panel.yAxis.decimals;const h=l.getFlotTickSize(i,s,t,r),c=l.getScaledDecimals(n,h);this.ctrl.decimals=n,this.ctrl.scaledDecimals=c,(0,a.isEmpty)(this.data.buckets)&&(s=1,i=-1,t=3,n=1),this.data.yAxis={min:i,max:s,ticks:t},this.scope.yScale=this.yScale=o.scaleLinear().domain([i,s]).range([this.chartHeight,0]);const d=o.axisLeft(this.yScale).ticks(t).tickFormat(this.tickValueFormatter(n,c)).tickSizeInner(0-this.width).tickSizeOuter(0).tickPadding(5);this.heatmap.append("g").attr("class","axis axis-y").call(d);const p=this.margin.top,u=this.getYAxisWidth(this.heatmap)+5;this.heatmap.select(".axis-y").attr("transform","translate("+u+","+p+")"),this.heatmap.select(".axis-y").select(".domain").remove()}wideYAxisRange(t,e,i){const a=(e*(this.dataRangeWidingFactor-1)-t*(this.dataRangeWidingFactor-1))/2;let s,r;return 0===i?(r=e*this.dataRangeWidingFactor,s=t-t*(this.dataRangeWidingFactor-1)):(r=Math.ceil((e+a)/i)*i,s=Math.floor((t-a)/i)*i),t>=0&&s<0&&(s=0),{yMin:s,yMax:r}}addLogYAxis(){const t=this.panel.yAxis.logBase;let{yMin:e,yMax:i}=this.adjustLogRange(this.data.heatmapStats.minLog,this.data.heatmapStats.max,t);e=this.panel.yAxis.min&&"0"!==this.panel.yAxis.min?this.adjustLogMin(this.panel.yAxis.min,t):e,i=null!==this.panel.yAxis.max?this.adjustLogMax(this.panel.yAxis.max,t):i,(0,a.isEmpty)(this.data.buckets)&&(i=Math.pow(t,2),e=1),this.scope.yScale=this.yScale=o.scaleLog().base(this.panel.yAxis.logBase).domain([e,i]).range([this.chartHeight,0]);const s=this.yScale.domain(),r=this.logScaleTickValues(s,t),n=l.getPrecision(e),h=this.panel.yAxis.decimals||n,c=l.getFlotTickSize(e,i,r.length,n),d=l.getScaledDecimals(h,c);this.ctrl.decimals=h,this.ctrl.scaledDecimals=d,this.data.yAxis={min:e,max:i,ticks:r.length};const p=o.axisLeft(this.yScale).tickValues(r).tickFormat(this.tickValueFormatter(h,d)).tickSizeInner(0-this.width).tickSizeOuter(0).tickPadding(5);this.heatmap.append("g").attr("class","axis axis-y").call(p);const u=this.margin.top,m=this.getYAxisWidth(this.heatmap)+5;this.heatmap.select(".axis-y").attr("transform","translate("+m+","+u+")"),e<1&&this.heatmap.select(".axis-y").select(".tick text").text("0"),this.heatmap.select(".axis-y").select(".domain").remove()}addYAxisFromBuckets(){const t=this.data.tsBuckets;let e=Math.ceil(this.chartHeight/22.5);this.scope.yScale=this.yScale=o.scaleLinear().domain([0,t.length-1]).range([this.chartHeight,0]);const i=(0,a.map)(t,((t,e)=>e)),s=(0,a.max)((0,a.map)(t,l.getStringPrecision)),r=null===this.panel.yAxis.decimals?s:this.panel.yAxis.decimals;this.ctrl.decimals=r;const n=this.tickValueFormatter.bind(this);function h(e){return function(i){let s=t[i.valueOf()];if((0,a.isNaN)((0,a.toNumber)(s))||""===s){if(s&&"string"==typeof s&&""!==s&&e){const t=.15,i=s.substring(0,Math.floor(e*t));s=`${i}${i.length<s.length?"...":""}`}}else s=n(r)((0,a.toNumber)(s));return s}}const c=(0,a.map)(t,((t,e)=>h(null)(e)));this.data.tsBucketsFormatted=c;const d=o.axisLeft(this.yScale).tickFormat(h(this.getPanelYAxisWidth())).tickSizeInner(0-this.width).tickSizeOuter(0).tickPadding(5);i&&i.length<=e?d.tickValues(i):d.ticks(e),this.heatmap.append("g").attr("class","axis axis-y").call(d);const p=this.margin.top,u=this.getYAxisWidth(this.heatmap)+5;if(this.heatmap.select(".axis-y").attr("transform","translate("+u+","+p+")"),"middle"===this.panel.yBucketBound&&i&&i.length){const t=0-this.chartHeight/(i.length-1)/2;this.heatmap.selectAll(".axis-y text").attr("transform","translate(0,"+t+")")}this.heatmap.select(".axis-y").select(".domain").remove()}adjustLogRange(t,e,i){let a=this.data.heatmapStats.minLog;a=this.data.heatmapStats.minLog>1||!this.data.heatmapStats.minLog?1:this.adjustLogMin(this.data.heatmapStats.minLog,i);return{yMin:a,yMax:this.adjustLogMax(this.data.heatmapStats.max,i)}}adjustLogMax(t,e){return Math.pow(e,Math.ceil(l.logp(t,e)))}adjustLogMin(t,e){return Math.pow(e,Math.floor(l.logp(t,e)))}logScaleTickValues(t,e){const i=t[0],a=t[1],s=[];if(i<1){for(let t=Math.floor(l.logp(i,e));t<0;t++){const i=Math.pow(e,t);s.push(i)}}const r=Math.ceil(l.logp(a,e));for(let t=0;t<=r;t++){const i=Math.pow(e,t);s.push(i)}return s}tickValueFormatter(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.panel.yAxis.format;return a=>{try{if("none"!==i){const s=(0,u.getValueFormat)(i)(a,t,e);return(0,u.formattedValueToString)(s)}}catch(t){console.error(t.message||t)}return a}}fixYAxisTickSize(){this.heatmap.select(".axis-y").selectAll(".tick line").attr("x2",this.chartWidth)}addAxes(){this.chartHeight=this.height-this.margin.top-this.margin.bottom,this.chartTop=this.margin.top,this.chartBottom=this.chartTop+this.chartHeight,"tsbuckets"===this.panel.dataFormat?this.addYAxisFromBuckets():1===this.panel.yAxis.logBase?this.addYAxis():this.addLogYAxis(),this.yAxisWidth=this.getYAxisWidth(this.heatmap)+5,this.chartWidth=this.width-this.yAxisWidth-this.margin.right,this.fixYAxisTickSize(),this.addXAxis(),this.xAxisHeight=this.getXAxisHeight(this.heatmap),this.panel.yAxis.show||this.heatmap.select(".axis-y").selectAll("line").style("opacity",0),this.panel.xAxis.show||this.heatmap.select(".axis-x").selectAll("line").style("opacity",0)}addHeatmapCanvas(){const t=this.$heatmap[0];this.width=Math.floor(this.$heatmap.width())-this.padding.right,this.height=Math.floor(this.$heatmap.height())-this.padding.bottom,this.cardPadding=null!==this.panel.cards.cardPadding?this.panel.cards.cardPadding:1,this.cardRound=null!==this.panel.cards.cardRound?this.panel.cards.cardRound:0,this.heatmap&&this.heatmap.remove(),this.heatmap=o.select(t).append("svg").attr("width",this.width).attr("height",this.height)}addHeatmap(){if(this.addHeatmapCanvas(),this.addAxes(),1!==this.panel.yAxis.logBase&&"tsbuckets"!==this.panel.dataFormat){const t=this.panel.yAxis.logBase,e=this.yScale.domain(),i=this.logScaleTickValues(e,t);this.data.buckets=function(t,e){return(0,a.forEach)(t,(t=>{const i=t.buckets,a={bounds:{bottom:0,top:0},values:[],points:[],count:0},s=i[0]||a,r=i[e]||a,o={y:0,bounds:{bottom:e,top:r.bounds.top||e},values:[],points:[],count:0};o.points=s.points.concat(r.points),o.values=s.values.concat(r.values),o.count=o.values.length,0!==o.count&&(delete i[e],i[0]=o)})),t}(this.data.buckets,(0,a.min)(i))}const t=this.data.cards,e=this.data.cardStats,i=e.max,s=Math.max(e.min,0),r=(0,a.isNil)(this.panel.color.max)?i:this.panel.color.max,o=(0,a.isNil)(this.panel.color.min)?s:this.panel.color.min,l=(0,a.find)(this.ctrl.colorSchemes,{value:this.panel.color.colorScheme});this.colorScale=c(l,n.Vt.user.lightTheme,r,o),this.opacityScale=d(this.panel.color,r,o),this.setCardSize();let h=this.heatmap.selectAll(".heatmap-card").data(t);h.append("title"),h=h.enter().append("rect").attr("x",this.getCardX.bind(this)).attr("width",this.getCardWidth.bind(this)).attr("y",this.getCardY.bind(this)).attr("height",this.getCardHeight.bind(this)).attr("rx",this.cardRound).attr("ry",this.cardRound).attr("class","bordered heatmap-card").style("fill",this.getCardColor.bind(this)).style("stroke",this.getCardColor.bind(this)).style("stroke-width",0).style("opacity",this.getCardOpacity.bind(this));this.$heatmap.find(".heatmap-card").on("mouseenter",(t=>{this.tooltip.mouseOverBucket=!0,this.highlightCard(t)})).on("mouseleave",(t=>{this.tooltip.mouseOverBucket=!1,this.resetCardHighLight(t)}))}highlightCard(t){const e=o.select(t.target).style("fill"),i=o.color(e).darker(2),a=o.color(e).brighter(4),s=o.select(t.target);this.tooltip.originalFillColor=e,s.style("fill",i.toString()).style("stroke",a.toString()).style("stroke-width",1)}resetCardHighLight(t){o.select(t.target).style("fill",this.tooltip.originalFillColor).style("stroke",this.tooltip.originalFillColor).style("stroke-width",0)}setCardSize(){const t=Math.floor(this.xScale(this.data.xBucketSize)-this.xScale(0));let e=Math.floor(this.yScale(this.yScale.invert(0)-this.data.yBucketSize));if(1!==this.panel.yAxis.logBase){const t=this.panel.yAxis.logBase,i=this.data.yBucketSize||1;e=Math.floor((this.yScale(1)-this.yScale(t))/i)}const i=t-2*this.cardPadding;this.cardWidth=Math.max(i,1),this.cardHeight=e?e-2*this.cardPadding:0}getCardX(t){let e;return e=this.xScale(t.x)<0?this.yAxisWidth+this.cardPadding:this.xScale(t.x)+this.yAxisWidth+this.cardPadding,e}getCardWidth(t){let e=this.cardWidth;return this.xScale(t.x)<0?e=this.xScale(t.x)+this.cardWidth:this.xScale(t.x)+this.cardWidth>this.chartWidth&&(e=this.chartWidth-this.xScale(t.x)-this.cardPadding),e=e>0?Math.max(e,1):0,e}getCardY(t){let e=this.yScale(t.y)+this.chartTop-this.cardHeight-this.cardPadding;return 1!==this.panel.yAxis.logBase&&0===t.y?e=this.chartBottom-this.cardHeight-this.cardPadding:e<this.chartTop&&(e=this.chartTop),e}getCardHeight(t){const e=this.yScale(t.y)+this.chartTop-this.cardHeight-this.cardPadding;let i=this.cardHeight;return 1!==this.panel.yAxis.logBase&&0===t.y?this.cardHeight:(e<this.chartTop?i=this.yScale(t.y)-this.cardPadding:(this.yScale(t.y)>this.chartBottom||e+this.cardHeight>this.chartBottom)&&(i=this.chartBottom-e),i=Math.min(i,this.chartHeight),i=Math.max(i,1),i)}getCardColor(t){return"opacity"===this.panel.color.mode?(0,u.getColorForTheme)(this.panel.color.cardColor,m.vc.theme):this.colorScale(t.count)}getCardOpacity(t){return"opacity"===this.panel.color.mode?this.opacityScale(t.count):1}getEventOffset(t){const e=this.$heatmap.offset();return{x:Math.floor(t.clientX-e.left),y:Math.floor(t.clientY-e.top)}}onMouseDown(t){const e=this.getEventOffset(t);this.selection.active=!0,this.selection.x1=e.x,this.mouseUpHandler=()=>{this.onMouseUp()},r()(document).one("mouseup",this.mouseUpHandler.bind(this))}onMouseUp(){r()(document).unbind("mouseup",this.mouseUpHandler.bind(this)),this.mouseUpHandler=null,this.selection.active=!1;const t=Math.abs(this.selection.x2-this.selection.x1);if(this.selection.x2>=0&&t>2){const t=this.xScale.invert(Math.min(this.selection.x1,this.selection.x2)-this.yAxisWidth),e=this.xScale.invert(Math.max(this.selection.x1,this.selection.x2)-this.yAxisWidth);this.ctrl.timeSrv.setTime({from:(0,u.toUtc)(t),to:(0,u.toUtc)(e)})}this.clearSelection()}onMouseLeave(){this.ctrl.dashboard.events.publish(new u.LegacyGraphHoverClearEvent),this.clearCrosshair()}onMouseMove(t){if(!this.heatmap)return;const e=this.getEventOffset(t);if(this.selection.active)this.clearCrosshair(),this.tooltip.destroy(),this.selection.x2=this.limitSelection(e.x),this.drawSelection(this.selection.x1,this.selection.x2);else{const i=this.getEventPos(t,e);this.drawCrosshair(e.x),this.tooltip.show(i,this.data),this.emitGraphHoverEvent(i)}}getEventPos(t,e){const i=this.xScale.invert(e.x-this.yAxisWidth).valueOf(),a=this.yScale.invert(e.y-this.chartTop);return{pageX:t.pageX,pageY:t.pageY,x:i,x1:i,y:a,y1:a,panelRelY:null,offset:e}}emitGraphHoverEvent(t){t.panelRelY=Math.max(t.offset.y/this.height,.001),this.hoverEvent.payload.pos=t,this.hoverEvent.payload.panel=this.panel,this.hoverEvent.payload.point.time=t.x,this.ctrl.dashboard.events.publish(this.hoverEvent)}limitSelection(t){return t=Math.max(t,this.yAxisWidth),t=Math.min(t,this.chartWidth+this.yAxisWidth)}drawSelection(t,e){if(this.heatmap){this.heatmap.selectAll(".heatmap-selection").remove();const i=Math.min(t,e),a=Math.abs(t-e);a>2&&this.heatmap.append("rect").attr("class","heatmap-selection").attr("x",i).attr("width",a).attr("y",this.chartTop).attr("height",this.chartHeight)}}clearSelection(){this.selection.x1=-1,this.selection.x2=-1,this.heatmap&&this.heatmap.selectAll(".heatmap-selection").remove()}drawCrosshair(t){if(this.heatmap){this.heatmap.selectAll(".heatmap-crosshair").remove();let e=t;e=Math.max(e,this.yAxisWidth),e=Math.min(e,this.chartWidth+this.yAxisWidth),this.heatmap.append("g").attr("class","heatmap-crosshair").attr("transform","translate("+e+",0)").append("line").attr("x1",1).attr("y1",this.chartTop).attr("x2",1).attr("y2",this.chartBottom).attr("stroke-width",1)}}drawSharedCrosshair(t){if(this.heatmap&&0!==this.ctrl.dashboard.graphTooltip){const e=this.xScale(t.x)+this.yAxisWidth;this.drawCrosshair(e)}}clearCrosshair(){this.heatmap&&this.heatmap.selectAll(".heatmap-crosshair").remove()}render(){if(this.data=this.ctrl.data,this.panel=this.ctrl.panel,this.timeRange=this.ctrl.range,this.setElementHeight()&&this.data){if((0,a.isEmpty)(this.data.buckets))return this.addHeatmapCanvas(),void this.addAxes();this.addHeatmap(),this.scope.yAxisWidth=this.yAxisWidth,this.scope.xAxisHeight=this.xAxisHeight,this.scope.chartHeight=this.chartHeight,this.scope.chartWidth=this.chartWidth,this.scope.chartTop=this.chartTop}}getPanelYAxisWidth(){return this.panel.yAxis.width?(0,a.isNaN)(this.panel.yAxis.width)?null:parseInt(this.panel.yAxis.width,10):null}}var I=i("./public/app/features/query/state/runRequest.ts"),q=i("./public/app/plugins/panel/graph/data_processor.ts"),U=i("./public/app/core/app_events.ts"),X=i("./public/app/types/events.ts");function _(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const Z={heatmap:{},cards:{cardPadding:null,cardRound:null},color:{mode:"spectrum",cardColor:"#b4ff00",colorScale:"sqrt",exponent:.5,colorScheme:"interpolateOranges"},legend:{show:!1},dataFormat:"timeseries",yBucketBound:"auto",reverseYBuckets:!1,xAxis:{show:!0},yAxis:{show:!0,format:"short",decimals:null,logBase:1,splitFactor:null,min:null,max:null},xBucketSize:null,xBucketNumber:null,yBucketSize:null,yBucketNumber:null,tooltip:{show:!0,showHistogram:!1},highlightCards:!0,hideZeroBuckets:!1},Q=["opacity","spectrum"],J=["linear","sqrt"],K=[{name:"Spectral",value:"interpolateSpectral",invert:"always"},{name:"RdYlGn",value:"interpolateRdYlGn",invert:"always"},{name:"Blues",value:"interpolateBlues",invert:"dark"},{name:"Greens",value:"interpolateGreens",invert:"dark"},{name:"Greys",value:"interpolateGreys",invert:"dark"},{name:"Oranges",value:"interpolateOranges",invert:"dark"},{name:"Purples",value:"interpolatePurples",invert:"dark"},{name:"Reds",value:"interpolateReds",invert:"dark"},{name:"Turbo",value:"interpolateTurbo",invert:"light"},{name:"Cividis",value:"interpolateCividis",invert:"light"},{name:"Viridis",value:"interpolateViridis",invert:"light"},{name:"Magma",value:"interpolateMagma",invert:"light"},{name:"Inferno",value:"interpolateInferno",invert:"light"},{name:"Plasma",value:"interpolatePlasma",invert:"light"},{name:"Warm",value:"interpolateWarm",invert:"light"},{name:"Cool",value:"interpolateCool",invert:"light"},{name:"Cubehelix",value:"interpolateCubehelixDefault",invert:"light"},{name:"BuGn",value:"interpolateBuGn",invert:"dark"},{name:"BuPu",value:"interpolateBuPu",invert:"dark"},{name:"GnBu",value:"interpolateGnBu",invert:"dark"},{name:"OrRd",value:"interpolateOrRd",invert:"dark"},{name:"PuBuGn",value:"interpolatePuBuGn",invert:"dark"},{name:"PuBu",value:"interpolatePuBu",invert:"dark"},{name:"PuRd",value:"interpolatePuRd",invert:"dark"},{name:"RdPu",value:"interpolateRdPu",invert:"dark"},{name:"YlGnBu",value:"interpolateYlGnBu",invert:"dark"},{name:"YlGn",value:"interpolateYlGn",invert:"dark"},{name:"YlOrBr",value:"interpolateYlOrBr",invert:"dark"},{name:"YlOrRd",value:"interpolateYlOrRd",invert:"dark"}],tt=["elasticsearch"];class et extends f.MetricsPanelCtrl{constructor(t,e,i,s){super(t,e),_(this,"opacityScales",[]),_(this,"colorModes",[]),_(this,"colorSchemes",[]),_(this,"selectionActivated",void 0),_(this,"unitFormats",void 0),_(this,"data",void 0),_(this,"series",[]),_(this,"dataWarning",void 0),_(this,"decimals",0),_(this,"scaledDecimals",0),_(this,"processor",void 0),this.selectionActivated=!1,(0,a.defaultsDeep)(this.panel,Z),this.opacityScales=J,this.colorModes=Q,this.colorSchemes=K,this.useDataFrames=!0,this.processor=new q.$({xaxis:{mode:"custom"},aliasColors:{}}),this.events.on(u.PanelEvents.render,this.onRender.bind(this)),this.events.on(u.PanelEvents.dataFramesReceived,this.onDataFramesReceived.bind(this)),this.events.on(u.PanelEvents.dataSnapshotLoad,this.onSnapshotLoad.bind(this)),this.events.on(u.PanelEvents.editModeInitialized,this.onInitEditMode.bind(this)),this.onCardColorChange=this.onCardColorChange.bind(this)}onInitEditMode(){this.addEditorTab("Axes",S,2),this.addEditorTab("Display",C,3),this.unitFormats=y.Z.getUnitFormats()}zoomOut(t){U.Z.publish(new X.p8({scale:2}))}onRender(){"tsbuckets"===this.panel.dataFormat?this.convertHistogramToHeatmapData():this.convertTimeSeriesToHeatmapData()}convertTimeSeriesToHeatmapData(){if(!this.range||!this.series)return;let t,e,i,s;const r=this.panel.yAxis.logBase,o=this.panel.xBucketNumber||30,n=Math.floor((this.range.to.valueOf()-this.range.from.valueOf())/o);t=y.Z.intervalRegex.test(this.panel.xBucketSize)?u.rangeUtil.intervalToMs(this.panel.xBucketSize):isNaN(Number(this.panel.xBucketSize))||""===this.panel.xBucketSize||null===this.panel.xBucketSize?n:Number(this.panel.xBucketSize),s=this.parseSeries(this.series);const l=this.panel.yBucketNumber||10;1!==r?e=this.panel.yAxis.splitFactor:(e=s.max===s.min?s.max?s.max/10:1:(s.max-s.min)/l,e=this.panel.yBucketSize||e),i=function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const r={};for(const e of t){const t=e.datapoints,s=e.label;(0,a.forEach)(t,(t=>{const e=R(t[1],i);H(r,t,e,s)}))}return(0,a.forEach)(r,(t=>{t.buckets=1!==s?L(t,e,s):Y(t,e)})),r}(this.series,e,t,r),s.min||s.max||(s={min:-1,max:1,minLog:1},e=1);const{cards:h,cardStats:c}=P(i,this.panel.hideZeroBuckets);this.data={buckets:i,heatmapStats:s,xBucketSize:t,yBucketSize:e,cards:h,cardStats:c}}convertHistogramToHeatmapData(){if(!this.range||!this.series)return;const t=this.getPanelDataSourceType();let e,i,s,r;(0,a.includes)(tt,t)||this.series.sort(A),this.panel.reverseYBuckets&&this.series.reverse(),s=function(t){const e={};for(let i=0;i<t.length;i++){const s=t[i],r=i;if(isNaN(r))return e;for(const t of s.datapoints){const i=t[0],s=t[1];if(!(0,a.isNumber)(i))continue;let o=e[s];o||(o=e[s]={x:s,buckets:{}}),o.buckets[r]={y:r,count:i,bounds:{top:null,bottom:r},values:[],points:[]}}}return e}(this.series),r=(0,a.map)(this.series,"label");const o=this.panel.yBucketBound;"prometheus"===t&&"lower"!==o&&"middle"!==o||"upper"===o?r=[""].concat(r):r.push("");e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=1/0;if(0===t.length)return 0;if(1===t.length)return t[0];t=(0,a.sortBy)(t);for(let a=1;a<t.length;a++){const s=O(t[a],t[a-1],e);i=s<i?s:i}return i}((0,a.map)((0,a.keys)(s),(t=>Number(t)))),i=1;const{cards:n,cardStats:l}=P(s,this.panel.hideZeroBuckets);this.data={buckets:s,xBucketSize:e,yBucketSize:1,tsBuckets:r,cards:n,cardStats:l}}getPanelDataSourceType(){return this.datasource&&this.datasource.meta&&this.datasource.meta.id?this.datasource.meta.id:"unknown"}onSnapshotLoad(t){this.onDataFramesReceived((0,I.F9)(t))}onDataFramesReceived(t){this.series=this.processor.getSeriesList({dataList:t,range:this.range}).map((t=>(t.color=void 0,t.flotpairs=t.getFlotPairs(this.panel.nullPointMode),t))),this.dataWarning=null;if(0===(0,a.reduce)(this.series,((t,e)=>t+e.datapoints.length),0))this.dataWarning={title:"No data points",tip:"No datapoints returned from data query"};else for(const t of this.series)if(t.isOutsideRange){this.dataWarning={title:"Data points outside time range",tip:"Can be caused by timezone mismatch or missing time filter in query"};break}this.render()}onDataError(){this.series=[],this.render()}onCardColorChange(t){this.panel.color.cardColor=t,this.render()}parseSeries(t){const e=(0,a.min)((0,a.map)(t,(t=>t.stats.min))),i=(0,a.min)((0,a.map)(t,(t=>t.stats.logmin)));return{max:(0,a.max)((0,a.map)(t,(t=>t.stats.max))),min:e,minLog:i}}parseHistogramSeries(t){const e=(0,a.map)(t,(t=>Number(t.alias))),i=(0,a.min)(e),s=(0,a.min)(e);return{max:(0,a.max)(e),min:i,minLog:s}}link(t,e,i,a){!function(t,e,i,a){new G(t,e,i,a)}(t,e,i,a)}}et.$inject=["$scope","$injector","templateSrv","timeSrv"],_(et,"templateUrl","module.html")},"./public/app/plugins/sdk.ts":(t,e,i)=>{i.r(e),i.d(e,{MetricsPanelCtrl:()=>h,PanelCtrl:()=>l,QueryCtrl:()=>c,loadPluginCss:()=>s.loadPluginCss});var a=i("./packages/grafana-data/src/index.ts"),s=i("./packages/grafana-runtime/src/index.ts"),r=i("./public/app/angular/panel/panel_ctrl.ts"),o=i("./public/app/angular/panel/metrics_panel_ctrl.ts"),n=i("./public/app/angular/panel/query_ctrl.ts");const l=(0,a.makeClassES5Compatible)(r.q),h=(0,a.makeClassES5Compatible)(o.k),c=(0,a.makeClassES5Compatible)(n.G)}}]);
//# sourceMappingURL=heatmapPlugin.15718e8e3083449662a7.js.map