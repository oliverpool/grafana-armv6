(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2773],{39846:(G,f,t)=>{"use strict";t.d(f,{P:()=>c});var l=t(68404),e=t(26418),r=t(46739),i=t(36967);const c=s=>{const a=A(s),T=o(a,s);return l.createElement(e.EditorField,{label:"Group by function","data-testid":"cloud-monitoring-aggregation"},l.createElement(r.Ph,{width:"auto",onChange:({value:h})=>s.onChange(h),value:T,options:[{label:"Template Variables",options:s.templateVariableOptions},{label:"Aggregations",expanded:!0,options:a}],placeholder:"Select Reducer",inputId:`${s.refId}-group-by-function`,menuPlacement:"top"}))},A=({metricDescriptor:s})=>{const a=s?.valueType,T=s?.metricKind;return(0,l.useMemo)(()=>!a||!T?[]:(0,i.A_)(a,T).map(h=>({...h,label:h.text})),[a,T])},o=(s,a)=>(0,l.useMemo)(()=>[...s,...a.templateVariableOptions].find(h=>h.value===a.crossSeriesReducer),[s,a.crossSeriesReducer,a.templateVariableOptions])},61939:(G,f,t)=>{"use strict";t.d(f,{B:()=>A});var l=t(82897),e=t.n(l),r=t(68404),i=t(26418),c=t(25474);const A=({refId:o,value:s="",onChange:a})=>{const[T,h]=(0,r.useState)(s??""),D=(0,l.debounce)(a,1e3);return a=O=>{h(O.target.value),D(O.target.value)},r.createElement(i.EditorField,{label:"Alias by"},r.createElement(c.I,{id:`${o}-alias-by`,value:T,onChange:a}))}},70019:(G,f,t)=>{"use strict";t.d(f,{v:()=>o});var l=t(68404),e=t(26418),r=t(40467),i=t(36967),c=t(32566),A=t(33468);const o=({refId:s,templateVariableOptions:a,onChange:T,query:h,customMetaData:D,datasource:O,metricDescriptor:U,preprocessor:g})=>{const u=(0,l.useMemo)(()=>(0,i.kU)(D,O),[D,O]);return l.createElement(e.EditorFieldGroup,null,l.createElement(e.EditorField,{label:"Alignment function",tooltip:"The process of alignment consists of collecting all data points received in a fixed length of time, applying a function to combine those data points, and assigning a timestamp to the result."},l.createElement(c.X,{inputId:`${s}-alignment-function`,templateVariableOptions:a,query:h,onChange:E=>T({...h,...E}),metricDescriptor:U,preprocessor:g})),l.createElement(e.EditorField,{label:"Alignment period",tooltip:u},l.createElement(A.$,{inputId:`${s}-alignment-period`,templateVariableOptions:a,current:h.alignmentPeriod,onChange:E=>T({...h,alignmentPeriod:E}),aligmentPeriods:r.dD})))}},32566:(G,f,t)=>{"use strict";t.d(f,{X:()=>i});var l=t(68404),e=t(46739),r=t(36967);const i=({inputId:c,query:A,templateVariableOptions:o,onChange:s,metricDescriptor:a,preprocessor:T})=>{const{perSeriesAligner:h}=A;let{valueType:D,metricKind:O}=a||{};const{perSeriesAligner:U,alignOptions:g}=(0,l.useMemo)(()=>(0,r.ID)(D,O,h,T),[D,O,h,T]);return l.createElement(e.Ph,{onChange:({value:u})=>s({...A,perSeriesAligner:u}),value:[...g,...o].find(u=>u.value===U),options:[{label:"Template Variables",options:o},{label:"Alignment options",expanded:!0,options:g}],placeholder:"Select Alignment",inputId:c,menuPlacement:"top"})}},29062:(G,f,t)=>{"use strict";t.d(f,{X:()=>o});var l=t(68404),e=t(26418),r=t(46739),i=t(40467),c=t(36967),A=t(39846);const o=({refId:s,labels:a=[],query:T,onChange:h,variableOptionGroup:D,metricDescriptor:O})=>{const U=(0,l.useMemo)(()=>[D,...(0,c.gY)([...a,...i.$e])],[a,D]);return l.createElement(e.EditorFieldGroup,null,l.createElement(e.EditorField,{label:"Group by",tooltip:"You can reduce the amount of data returned for a metric by combining different time series. To combine multiple time series, you can specify a grouping and a function. Grouping is done on the basis of labels. The grouping function is used to combine the time series in the group into a single time series."},l.createElement(r.NU,{inputId:`${s}-group-by`,width:"auto",placeholder:"Choose label",options:U,value:T.groupBys??[],onChange:g=>{h({...T,groupBys:g.map(u=>u.value)})},menuPlacement:"top"})),l.createElement(A.P,{metricDescriptor:O,templateVariableOptions:D.options,crossSeriesReducer:T.crossSeriesReducer,groupBys:T.groupBys??[],onChange:g=>h({...T,crossSeriesReducer:g}),refId:s}))}},80202:(G,f,t)=>{"use strict";t.d(f,{p:()=>D});var l=t(68404),e=t(63134),r=t(26418),i=t(90701),c=t(46739),A=t(36967);const o="=",s="AND",a=O=>O.flatMap(({key:U,operator:g,value:u,condition:E})=>[U,g,u,E]).slice(0,-1),T=["=","!=","=~","!=~"].map(e.E),h=["metric.type"],D=({labels:O={},filters:U,onChange:g,variableOptionGroup:u})=>{const E=(0,A.mi)(U),N=E.filter(({key:n})=>!h.includes(n)),v=E.filter(({key:n})=>h.includes(n)),I=(0,l.useMemo)(()=>[u,...(0,A.gY)(Object.keys(O))],[O,u]),d=({key:n="",value:m=""})=>{I.some(S=>S.options?I.some(B=>B.label===n):S.label===n)||I.push({label:n,value:n});const _=O.hasOwnProperty(n)?[u,...O[n].map(e.E)]:[u];return _.some(S=>S.label===m)||_.push({label:m,value:m}),{options:I,valueOptions:_}},p=n=>{const m=n.concat(v).map(({key:P,operator:_,value:M,condition:S})=>({key:P||"",operator:_||o,value:M||"",condition:S||s}));g(a(m))},L=(n,m,P)=>{const{key:_="",operator:M=o,value:S="",condition:B=s}=n,{options:K,valueOptions:$}=d(n);return l.createElement(i.Lh,{spacing:"xs",width:"auto"},l.createElement(c.Ph,{"aria-label":"Filter label key",formatCreateLabel:x=>`Use label key: ${x}`,allowCustomValue:!0,value:_,options:K,onChange:({value:x=""})=>m({key:x,operator:M,value:S,condition:B})}),l.createElement(c.Ph,{value:M,options:T,onChange:({value:x=o})=>m({key:_,operator:x,value:S,condition:B})}),l.createElement(c.Ph,{"aria-label":"Filter label value",placeholder:"add filter value",formatCreateLabel:x=>`Use label value: ${x}`,allowCustomValue:!0,value:S,options:$,onChange:({value:x=""})=>m({key:_,operator:M,value:x,condition:B})}),l.createElement(r.AccessoryButton,{"aria-label":"Remove",icon:"times",variant:"secondary",onClick:P,type:"button"}))};return l.createElement(r.EditorRow,null,l.createElement(r.EditorField,{label:"Filter",tooltip:"To reduce the amount of data charted, apply a filter. A filter has three components: a label, a comparison, and a value. The comparison can be an equality, inequality, or regular expression."},l.createElement(r.EditorList,{items:N,renderItem:L,onChange:p})))}},91797:(G,f,t)=>{"use strict";t.d(f,{a:()=>r});var l=t(68404),e=t(79090);function r({query:i,onChange:c,onRunQuery:A}){const o=s=>{s.key==="Enter"&&(s.shiftKey||s.ctrlKey)&&(s.preventDefault(),A())};return l.createElement(l.Fragment,null,l.createElement(e.K,{name:"Query",className:"slate-query-field",value:i,rows:10,placeholder:"Enter a Cloud Monitoring MQL query (Run with Shift+Enter)",onBlur:A,onChange:s=>c(s.currentTarget.value),onKeyDown:o}))}},32060:(G,f,t)=>{"use strict";t.d(f,{a1:()=>U,mO:()=>h});var l=t(68404),e=t(26418),r=t(12767),i=t(90701),c=t(44727),A=t(40467),o=t(98626);const s=({refId:g,onChange:u,graphPeriod:E,variableOptionGroup:N})=>l.createElement(e.EditorRow,null,l.createElement(e.EditorField,{label:"Graph period",htmlFor:`${g}-graph-period`,tooltip:l.createElement(l.Fragment,null,"Set ",l.createElement("code",null,"graph_period")," which forces a preferred period between points. Automatically set to the current interval if left blank.")},l.createElement(i.Lh,null,l.createElement(c.r,{"data-testid":`${g}-switch-graph-period`,value:E!=="disabled",onChange:v=>u(v.currentTarget.checked?"":"disabled")}),l.createElement(o.$d,{inputId:`${g}-graph-period`,templateVariableOptions:N.options,current:E,onChange:u,disabled:E==="disabled",aligmentPeriods:A.Ry}))));var a=t(91797),T=t(31697);const h=g=>({projectName:g.getDefaultProject(),crossSeriesReducer:"REDUCE_NONE",alignmentPeriod:"cloud-monitoring-auto",perSeriesAligner:r.CS.ALIGN_MEAN,groupBys:[],filters:[]}),D=g=>({projectName:g.getDefaultProject(),query:""});function O({refId:g,query:u,datasource:E,onChange:N,onRunQuery:v,customMetaData:I,variableOptionGroup:d}){const p=(0,l.useCallback)(n=>{N({...u,timeSeriesList:n}),v()},[N,v,u]),L=(0,l.useCallback)(n=>{N({...u,timeSeriesQuery:n}),v()},[N,v,u]);return(0,l.useEffect)(()=>{u.queryType===r.xL.TIME_SERIES_LIST&&!u.timeSeriesList&&p(h(E)),u.queryType===r.xL.TIME_SERIES_QUERY&&!u.timeSeriesQuery&&L(D(E))},[p,L,u.queryType,u.timeSeriesList,u.timeSeriesQuery,E]),l.createElement(e.EditorRows,null,[r.xL.TIME_SERIES_LIST,r.xL.ANNOTATION].includes(u.queryType)&&u.timeSeriesList&&l.createElement(T.s,{refId:g,variableOptionGroup:d,customMetaData:I,onChange:p,datasource:E,query:u.timeSeriesList,aliasBy:u.aliasBy,onChangeAliasBy:n=>N({...u,aliasBy:n})}),u.queryType===r.xL.TIME_SERIES_QUERY&&u.timeSeriesQuery&&l.createElement(l.Fragment,null,l.createElement(a.a,{onChange:n=>L({...u.timeSeriesQuery,query:n}),onRunQuery:v,query:u.timeSeriesQuery.query}),l.createElement(s,{onChange:n=>L({...u.timeSeriesQuery,graphPeriod:n}),graphPeriod:u.timeSeriesQuery.graphPeriod,refId:g,variableOptionGroup:d})))}const U=l.memo(O)},33468:(G,f,t)=>{"use strict";t.d(f,{$:()=>r});var l=t(68404),e=t(46739);function r({inputId:i,templateVariableOptions:c,onChange:A,current:o,disabled:s,aligmentPeriods:a}){const T=(0,l.useMemo)(()=>a.map(D=>({...D,label:D.text})),[a]),h=(0,l.useMemo)(()=>T.filter(D=>!D.hidden),[T]);return l.createElement(e.Ph,{width:"auto",onChange:({value:D})=>A(D),value:[...T,...c].find(D=>D.value===o),options:[{label:"Template Variables",options:c},{label:"Aggregations",expanded:!0,options:h}],placeholder:"Select Period",inputId:i,disabled:s,allowCustomValue:!0,menuPlacement:"top"})}},75740:(G,f,t)=>{"use strict";t.d(f,{A:()=>o});var l=t(68404),e=t(26418),r=t(318),i=t(36967),c=t(12767);const A={label:"None",value:c.mG.None},o=({query:a,metricDescriptor:T,onChange:h})=>{const D=s(T);return l.createElement(e.EditorField,{label:"Pre-processing",tooltip:"Preprocessing options are displayed when the selected metric has a metric kind of delta or cumulative. The specific options available are determined by the metric's value type. If you select 'Rate', data points are aligned and converted to a rate per time series. If you select 'Delta', data points are aligned by their delta (difference) per time series"},l.createElement(r.S,{onChange:O=>{const{perSeriesAligner:U}=a,{valueType:g,metricKind:u}=T??{},{perSeriesAligner:E}=(0,i.ID)(g,u,U,O);h({...a,preprocessor:O,perSeriesAligner:E})},value:a.preprocessor??c.mG.None,options:D}))},s=a=>{const T=a?.metricKind,h=a?.valueType;return(0,l.useMemo)(()=>{if(!T||T===c.lH.GAUGE||h===c.$h.DISTRIBUTION)return[A];const D=[A,{label:"Rate",value:c.mG.Rate,description:"Data points are aligned and converted to a rate per time series"}];return T===c.lH.CUMULATIVE?[...D,{label:"Delta",value:c.mG.Delta,description:"Data points are aligned by their delta (difference) per time series"}]:D},[T,h])}},66377:(G,f,t)=>{"use strict";t.d(f,{I:()=>i});var l=t(68404),e=t(26418),r=t(46739);function i({refId:c,projectName:A,datasource:o,onChange:s,templateVariableOptions:a}){const[T,h]=(0,l.useState)([]);(0,l.useEffect)(()=>{o.getProjects().then(O=>h(O))},[o]);const D=(0,l.useMemo)(()=>[T,{label:"Template Variables",options:a},...T],[T,a]);return l.createElement(e.EditorField,{label:"Project"},l.createElement(r.Ph,{width:"auto",allowCustomValue:!0,formatCreateLabel:O=>`Use project: ${O}`,onChange:({value:O})=>s(O),options:D,value:{value:A,label:A},placeholder:"Select Project",inputId:`${c}-project`}))}},92773:(G,f,t)=>{"use strict";t.d(f,{W:()=>a});var l=t(68404),e=t(63134),r=t(26418),i=t(12767),c=t(40467);const A=T=>{const{query:h,onChange:D,onRunQuery:O}=T,{queryType:U}=h;return l.createElement(r.EditorHeader,null,l.createElement(r.InlineSelect,{label:"Query type",options:c.XI,value:U,onChange:({value:g})=>{D({...h,queryType:g}),O()}}),l.createElement(r.FlexItem,{grow:1}))};var o=t(58424),s=t(98626);const a=T=>{const{datasource:h,query:D,onRunQuery:O,onChange:U}=T,[g,u]=(0,l.useState)(!1),E=(0,l.useMemo)(()=>g?D:(u(!0),h.migrateQuery(D)),[D,h,g]),N={...(0,o.w)(h),...E.sloQuery},v=n=>{U({...E,sloQuery:n}),O()},d=(T.data?.series.length?T.data?.series[0].meta:{})?.custom??{},p={label:"Template Variables",expanded:!1,options:h.getVariables().map(e.E)};(0,l.useEffect)(()=>{Object.values(i.xL).includes(E.queryType)||U({...E,queryType:i.xL.TIME_SERIES_LIST})});const L=E.queryType;return l.createElement(r.EditorRows,null,l.createElement(A,{query:E,onChange:U,onRunQuery:O}),L!==i.xL.SLO&&l.createElement(s.a1,{refId:E.refId,variableOptionGroup:p,customMetaData:d,onChange:U,onRunQuery:O,datasource:h,query:E}),L===i.xL.SLO&&l.createElement(s.D6,{refId:E.refId,variableOptionGroup:p,customMetaData:d,onChange:v,onRunQuery:O,datasource:h,query:N,aliasBy:E.aliasBy,onChangeAliasBy:n=>U({...E,aliasBy:n})}))}},58424:(G,f,t)=>{"use strict";t.d(f,{D:()=>g,w:()=>U});var l=t(68404),e=t(26418),r=t(40467),i=t(36967),c=t(12767),A=t(61939),o=t(46739);const s=({refId:u,current:E,templateVariableOptions:N,onChange:v})=>{const I=r.yy.map(p=>({...p,label:p.text}));E&&!I.find(p=>p.value===E)&&I.push({label:E,text:E,value:E,hidden:!1});const d=I.filter(p=>!p.hidden);return l.createElement(e.EditorField,{label:"Lookback period",htmlFor:`${u}-lookback-period`},l.createElement(o.Ph,{inputId:`${u}-lookback-period`,width:"auto",allowCustomValue:!0,value:[...I,...N].find(p=>p.value===E),options:[{label:"Template Variables",options:N},{label:"Predefined periods",expanded:!0,options:d}],onChange:({value:p})=>v(p)}))};var a=t(33468),T=t(66377);const h=({refId:u,query:E,templateVariableOptions:N,onChange:v,datasource:I})=>{const[d,p]=(0,l.useState)([]),{projectName:L,serviceId:n}=E;return(0,l.useEffect)(()=>{!L||!n||I.getServiceLevelObjectives(L,n).then(m=>{p([{label:"Template Variables",options:N},...m])})},[I,L,n,N]),l.createElement(e.EditorField,{label:"SLO"},l.createElement(o.Ph,{inputId:`${u}-slo`,width:"auto",allowCustomValue:!0,value:E?.sloId&&{value:E?.sloId,label:E?.sloName||E?.sloId},placeholder:"Select SLO",options:d,onChange:async({value:m="",label:P=""})=>{const M=(await I.getServiceLevelObjectives(L,n)).find(({value:S})=>S===I.templateSrv.replace(m));v({...E,sloId:m,sloName:P,goal:M?.goal})}}))},D=({refId:u,query:E,templateVariableOptions:N,onChange:v,datasource:I})=>l.createElement(e.EditorField,{label:"Selector",htmlFor:`${u}-slo-selector`},l.createElement(o.Ph,{inputId:`${u}-slo-selector`,width:"auto",allowCustomValue:!0,value:[...r.IR,...N].find(d=>d.value===E?.selectorName),options:[{label:"Template Variables",options:N},...r.IR],onChange:({value:d})=>v({...E,selectorName:d??""})})),O=({refId:u,query:E,templateVariableOptions:N,onChange:v,datasource:I})=>{const[d,p]=(0,l.useState)([]),{projectName:L}=E;return(0,l.useEffect)(()=>{L&&I.getSLOServices(L).then(n=>{p([{label:"Template Variables",options:N},...n])})},[I,L,N]),l.createElement(e.EditorField,{label:"Service"},l.createElement(o.Ph,{inputId:`${u}-slo-service`,width:"auto",allowCustomValue:!0,value:E?.serviceId&&{value:E?.serviceId,label:E?.serviceName||E?.serviceId},placeholder:"Select service",options:d,onChange:({value:n="",label:m=""})=>v({...E,serviceId:n,serviceName:m,sloId:""})}))},U=u=>({projectName:u.getDefaultProject(),alignmentPeriod:"cloud-monitoring-auto",perSeriesAligner:c.CS.ALIGN_MEAN,aliasBy:"",selectorName:"select_slo_health",serviceId:"",serviceName:"",sloId:"",sloName:"",lookbackPeriod:""});function g({refId:u,query:E,datasource:N,onChange:v,variableOptionGroup:I,customMetaData:d,aliasBy:p,onChangeAliasBy:L}){const n=(0,l.useMemo)(()=>(0,i.kU)(d,N),[d,N]);return l.createElement(l.Fragment,null,l.createElement(e.EditorRow,null,l.createElement(T.I,{refId:u,templateVariableOptions:I.options,projectName:E.projectName,datasource:N,onChange:m=>v({...E,projectName:m})}),l.createElement(O,{refId:u,datasource:N,templateVariableOptions:I.options,query:E,onChange:v}),l.createElement(h,{refId:u,datasource:N,templateVariableOptions:I.options,query:E,onChange:v}),l.createElement(D,{refId:u,datasource:N,templateVariableOptions:I.options,query:E,onChange:v}),E.selectorName===r.Fh&&l.createElement(s,{refId:u,onChange:m=>v({...E,lookbackPeriod:m}),current:E.lookbackPeriod,templateVariableOptions:I.options}),l.createElement(e.EditorFieldGroup,null,l.createElement(e.EditorField,{label:"Alignment period",tooltip:n},l.createElement(a.$,{inputId:`${u}-alignment-period`,templateVariableOptions:I.options,current:E.alignmentPeriod,onChange:m=>v({...E,alignmentPeriod:m}),aligmentPeriods:r.dD}))),l.createElement(A.B,{refId:u,value:p,onChange:L})))}},31697:(G,f,t)=>{"use strict";t.d(f,{s:()=>I});var l=t(52423),e=t(82897),r=t.n(e),i=t(68404),c=t(26418),A=t(29516),o=t(76686),s=t(46739),a=t(36967),T=t(12767),h=t(61939),D=t(70019),O=t(29062),U=t(80202),g=t(32060),u=t(75740),E=t(66377);function N({refId:d,onChange:p,datasource:L,query:n,variableOptionGroup:m,customMetaData:P,aliasBy:_,onChangeAliasBy:M}){const[S,B]=(0,i.useState)({}),[K,$]=(0,i.useState)([]),[x,W]=(0,i.useState)(),[Y,b]=(0,i.useState)([]),[H,X]=(0,i.useState)([]),[le,q]=(0,i.useState)(""),[J,se]=(0,i.useState)({...L.timeSrv.timeRange()});(C=>{J!==null&&(J.raw.from!==C.raw.from||J.raw.to!==C.raw.to)&&se({...C})})(L.timeSrv.timeRange());const re=(0,A.l4)(),ee=(0,o.D)(re),te=(0,A.wW)(v),{projectName:j,groupBys:ae,crossSeriesReducer:ne}=n,F=(0,a.WH)(n),{templateSrv:z}=L,Z=(0,i.useCallback)((C,y)=>C.find(R=>R.type===z.replace(y)),[z]);(0,i.useEffect)(()=>{j&&F&&L.getLabels(F,d,j,{groupBys:ae,crossSeriesReducer:ne},J).then(C=>B(C))},[L,ae,F,j,d,ne,J]),(0,i.useEffect)(()=>{(async()=>{if(j){const y=await L.getMetricTypes(j),R=ce(y);$(y),X(R)}})()},[L,j,te,ee.optionDescription]),(0,i.useEffect)(()=>{const y=(Q=>{const w=Z(Q,F);return w?Q.filter(V=>V.service===w.service).map(V=>({service:V.service,value:V.type,label:V.displayName,component:function(){return i.createElement("div",null,i.createElement("div",{className:te},V.type),i.createElement("div",{className:ee.optionDescription},V.description))}})):[]})(K),R=y.length>0?y[0].service:"",k=Z(K,F);W(k),b(y),q(R)},[K,Z,F,te,ee.optionDescription]);const ie=({value:C})=>{const y=K.filter(R=>R.service===z.replace(C)).map(R=>({service:R.service,value:R.type,label:R.displayName,description:R.description}));n.filters=[],y.length>0&&!y.some(R=>R.value===z.replace(F))?(oe(y[0]),q(C),b(y)):(q(C),b(y))},ce=C=>{const y=C.map(R=>({value:R.service,label:(0,e.startCase)(R.serviceShortName)}));return y.length>0?(0,e.uniqBy)(y,R=>R.value):[]},oe=({value:C})=>{const y=Z(K,C);W(y);const{metricKind:R,valueType:k}=y,Q=R===T.lH.GAUGE||k===T.$h.DISTRIBUTION?T.mG.None:T.mG.Rate,{perSeriesAligner:w}=(0,a.ID)(k,R,n.perSeriesAligner,Q);Object.assign(n,{...(0,g.mO)(L),projectName:n.projectName,filters:n.filters}),p({...(0,a.Av)({...n,perSeriesAligner:w},C),preprocessor:Q})};return i.createElement(i.Fragment,null,i.createElement(c.EditorRow,null,i.createElement(c.EditorFieldGroup,null,i.createElement(E.I,{refId:d,templateVariableOptions:m.options,projectName:j,datasource:L,onChange:C=>{p({...n,projectName:C})}}),i.createElement(c.EditorField,{label:"Service",width:"auto"},i.createElement(s.Ph,{width:"auto",onChange:ie,value:[...H,...m.options].find(C=>C.value===le),options:[{label:"Template Variables",options:m.options},...H],placeholder:"Select Services",inputId:`${d}-service`})),i.createElement(c.EditorField,{label:"Metric name",width:"auto"},i.createElement(s.Ph,{width:"auto",onChange:oe,value:[...Y,...m.options].find(C=>C.value===F),options:[{label:"Template Variables",options:m.options},...Y],placeholder:"Select Metric",inputId:`${d}-select-metric`})))),i.createElement(i.Fragment,null,i.createElement(U.p,{labels:S,filters:n.filters,onChange:C=>p({...n,filters:C}),variableOptionGroup:m}),i.createElement(c.EditorRow,null,i.createElement(u.A,{metricDescriptor:x,query:n,onChange:p}),i.createElement(O.X,{refId:d,labels:Object.keys(S),query:n,onChange:p,variableOptionGroup:m,metricDescriptor:x}),i.createElement(D.v,{refId:d,datasource:L,templateVariableOptions:m.options,query:n,customMetaData:P,onChange:p,metricDescriptor:x,preprocessor:n.preprocessor}),i.createElement(h.B,{refId:d,value:_,onChange:M}))))}const v=d=>l.css`
  label: grafana-select-option-description;
  font-weight: normal;
  font-style: italic;
  color: ${d.colors.text.secondary};
`,I=i.memo(N)},98626:(G,f,t)=>{"use strict";t.d(f,{zI:()=>A,a1:()=>T.a1,$d:()=>E.$,D6:()=>h.D,Th:()=>g});var l=t(66377),e=t(29062),r=t(70019),i=t(80202),c=t(68404);const A=()=>c.createElement("div",{className:"gf-form grafana-info-box alert-info"},c.createElement("div",null,c.createElement("h5",null,"Annotation Query Format"),c.createElement("p",null,"An annotation is an event that is overlaid on top of graphs. Annotation rendering is expensive so it is important to limit the number of rows returned."," "),c.createElement("p",null,"The Title and Text fields support templating and can use data returned from the query. For example, the Title field could have the following text:"),c.createElement("code",null,"{{metric.type}}"," has value: ","{{metric.value}}"),c.createElement("p",null,"Example Result: ",c.createElement("code",null,"monitoring.googleapis.com/uptime_check/http_status has this value: 502")),c.createElement("span",null,"Patterns:"),c.createElement("p",null,c.createElement("code",null,"{{metric.value}}")," = value of the metric/point"),c.createElement("p",null,c.createElement("code",null,"{{metric.type}}")," = metric type e.g. compute.googleapis.com/instance/cpu/usage_time"),c.createElement("p",null,c.createElement("code",null,"{{metric.name}}")," = name part of metric e.g. instance/cpu/usage_time"),c.createElement("p",null,c.createElement("code",null,"{{metric.service}}")," = service part of metric e.g. compute"),c.createElement("p",null,c.createElement("code",null,"{{metric.label.label_name}}")," = Metric label metadata e.g. metric.label.instance_name"),c.createElement("p",null,c.createElement("code",null,"{{resource.label.label_name}}")," = Resource label metadata e.g. resource.label.zone")));var o=t(32566),s=t(61939),a=t(39846),T=t(32060),h=t(58424),D=t(91797),O=t(71210),U=t(46739);const g=({label:v,onChange:I,value:d,options:p,allowCustomValue:L=!1})=>c.createElement(O._,{label:v,labelWidth:20},c.createElement(U.Ph,{width:25,allowCustomValue:L,value:d,onChange:({value:n})=>I(n),options:p}));var u=t(31697),E=t(33468),N=t(75740)},40467:(G,f,t)=>{"use strict";t.d(f,{$e:()=>O,Eu:()=>s,Fh:()=>U,IR:()=>g,Ry:()=>h,XI:()=>u,dD:()=>T,lx:()=>a,yy:()=>D});var l=t(83341),e=t(12767);const r=71,i=19,c=14,A=28,o=[{value:"Google JWT File",key:l.GoogleAuthType.JWT},{value:"GCE Default Service Account",key:l.GoogleAuthType.GCE}],s=[{text:"none",value:"ALIGN_NONE",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION,e.$h.STRING,e.$h.VALUE_TYPE_UNSPECIFIED,e.$h.BOOL],metricKinds:[e.lH.GAUGE]},{text:"delta",value:"ALIGN_DELTA",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION],metricKinds:[e.lH.CUMULATIVE,e.lH.DELTA]},{text:"rate",value:"ALIGN_RATE",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY],metricKinds:[e.lH.CUMULATIVE,e.lH.DELTA]},{text:"interpolate",value:"ALIGN_INTERPOLATE",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY],metricKinds:[e.lH.GAUGE]},{text:"next older",value:"ALIGN_NEXT_OLDER",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION,e.$h.STRING,e.$h.VALUE_TYPE_UNSPECIFIED,e.$h.BOOL],metricKinds:[e.lH.GAUGE]},{text:"min",value:"ALIGN_MIN",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY],metricKinds:[e.lH.GAUGE,e.lH.DELTA]},{text:"max",value:"ALIGN_MAX",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY],metricKinds:[e.lH.GAUGE,e.lH.DELTA]},{text:"mean",value:"ALIGN_MEAN",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY],metricKinds:[e.lH.GAUGE,e.lH.DELTA]},{text:"count",value:"ALIGN_COUNT",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.BOOL],metricKinds:[e.lH.GAUGE,e.lH.DELTA]},{text:"sum",value:"ALIGN_SUM",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION],metricKinds:[e.lH.GAUGE,e.lH.DELTA]},{text:"stddev",value:"ALIGN_STDDEV",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY],metricKinds:[e.lH.GAUGE,e.lH.DELTA]},{text:"count true",value:"ALIGN_COUNT_TRUE",valueTypes:[e.$h.BOOL],metricKinds:[e.lH.GAUGE]},{text:"count false",value:"ALIGN_COUNT_FALSE",valueTypes:[e.$h.BOOL],metricKinds:[e.lH.GAUGE]},{text:"fraction true",value:"ALIGN_FRACTION_TRUE",valueTypes:[e.$h.BOOL],metricKinds:[e.lH.GAUGE]},{text:"percentile 99",value:"ALIGN_PERCENTILE_99",valueTypes:[e.$h.DISTRIBUTION],metricKinds:[e.lH.GAUGE,e.lH.DELTA]},{text:"percentile 95",value:"ALIGN_PERCENTILE_95",valueTypes:[e.$h.DISTRIBUTION],metricKinds:[e.lH.GAUGE,e.lH.DELTA]},{text:"percentile 50",value:"ALIGN_PERCENTILE_50",valueTypes:[e.$h.DISTRIBUTION],metricKinds:[e.lH.GAUGE,e.lH.DELTA]},{text:"percentile 05",value:"ALIGN_PERCENTILE_05",valueTypes:[e.$h.DISTRIBUTION],metricKinds:[e.lH.GAUGE,e.lH.DELTA]},{text:"percent change",value:"ALIGN_PERCENT_CHANGE",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY],metricKinds:[e.lH.GAUGE,e.lH.DELTA]}],a=[{text:"none",value:"REDUCE_NONE",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION,e.$h.BOOL,e.$h.STRING],metricKinds:[e.lH.GAUGE,e.lH.DELTA,e.lH.CUMULATIVE,e.lH.METRIC_KIND_UNSPECIFIED]},{text:"mean",value:"REDUCE_MEAN",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION],metricKinds:[e.lH.GAUGE,e.lH.DELTA,e.lH.CUMULATIVE]},{text:"min",value:"REDUCE_MIN",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY],metricKinds:[e.lH.GAUGE,e.lH.DELTA,e.lH.CUMULATIVE,e.lH.METRIC_KIND_UNSPECIFIED]},{text:"max",value:"REDUCE_MAX",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY],metricKinds:[e.lH.GAUGE,e.lH.DELTA,e.lH.CUMULATIVE,e.lH.METRIC_KIND_UNSPECIFIED]},{text:"sum",value:"REDUCE_SUM",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION],metricKinds:[e.lH.GAUGE,e.lH.DELTA,e.lH.CUMULATIVE,e.lH.METRIC_KIND_UNSPECIFIED]},{text:"std. dev.",value:"REDUCE_STDDEV",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION],metricKinds:[e.lH.GAUGE,e.lH.DELTA,e.lH.CUMULATIVE,e.lH.METRIC_KIND_UNSPECIFIED]},{text:"count",value:"REDUCE_COUNT",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION,e.$h.BOOL,e.$h.STRING],metricKinds:[e.lH.GAUGE,e.lH.DELTA,e.lH.CUMULATIVE]},{text:"count true",value:"REDUCE_COUNT_TRUE",valueTypes:[e.$h.BOOL],metricKinds:[e.lH.GAUGE,e.lH.DELTA]},{text:"count false",value:"REDUCE_COUNT_FALSE",valueTypes:[e.$h.BOOL],metricKinds:[e.lH.GAUGE,e.lH.DELTA]},{text:"99th percentile",value:"REDUCE_PERCENTILE_99",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION],metricKinds:[e.lH.GAUGE,e.lH.DELTA,e.lH.CUMULATIVE]},{text:"95th percentile",value:"REDUCE_PERCENTILE_95",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION],metricKinds:[e.lH.GAUGE,e.lH.DELTA,e.lH.CUMULATIVE]},{text:"50th percentile",value:"REDUCE_PERCENTILE_50",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION],metricKinds:[e.lH.GAUGE,e.lH.DELTA,e.lH.CUMULATIVE]},{text:"5th percentile",value:"REDUCE_PERCENTILE_05",valueTypes:[e.$h.INT64,e.$h.DOUBLE,e.$h.MONEY,e.$h.DISTRIBUTION],metricKinds:[e.lH.GAUGE,e.lH.DELTA,e.lH.CUMULATIVE]}],T=[{text:"grafana auto",value:"grafana-auto"},{text:"stackdriver auto",value:"stackdriver-auto",hidden:!0},{text:"cloud monitoring auto",value:"cloud-monitoring-auto"},{text:"1m",value:"+60s"},{text:"2m",value:"+120s"},{text:"5m",value:"+300s"},{text:"10m",value:"+600s"},{text:"30m",value:"+1800s"},{text:"1h",value:"+3600s"},{text:"3h",value:"+7200s"},{text:"6h",value:"+21600s"},{text:"1d",value:"+86400s"},{text:"3d",value:"+259200s"},{text:"1w",value:"+604800s"}],h=[{text:"auto",value:"auto"},{text:"1m",value:"1m"},{text:"2m",value:"2m"},{text:"5m",value:"5m"},{text:"10m",value:"10m"},{text:"30m",value:"30m"},{text:"1h",value:"1h"},{text:"3h",value:"3h"},{text:"6h",value:"6h"},{text:"1d",value:"1d"},{text:"3d",value:"3d"},{text:"1w",value:"1w"}],D=[{text:"1m",value:"1m"},{text:"2m",value:"2m"},{text:"5m",value:"5m"},{text:"10m",value:"10m"},{text:"30m",value:"30m"},{text:"1h",value:"1h"},{text:"3h",value:"3h"},{text:"6h",value:"6h"},{text:"24h",value:"24h"},{text:"72h",value:"72h"}],O=["metadata.system_labels.cloud_account","metadata.system_labels.name","metadata.system_labels.region","metadata.system_labels.state","metadata.system_labels.instance_group","metadata.system_labels.node_name","metadata.system_labels.service_name","metadata.system_labels.top_level_controller_type","metadata.system_labels.top_level_controller_name","metadata.system_labels.container_image"],U="select_slo_burn_rate",g=[{label:"SLI Value",value:"select_slo_health"},{label:"SLO Compliance",value:"select_slo_compliance"},{label:"SLO Error Budget Remaining",value:"select_slo_budget_fraction"},{label:"SLO Burn Rate",value:U}],u=[{label:"Builder",value:e.xL.TIME_SERIES_LIST},{label:"MQL",value:e.xL.TIME_SERIES_QUERY},{label:"Service Level Objectives (SLO)",value:e.xL.SLO}]},36967:(G,f,t)=>{"use strict";t.d(f,{A_:()=>h,Av:()=>N,FL:()=>a,ID:()=>O,Qd:()=>D,Qf:()=>s,WH:()=>E,gY:()=>U,kU:()=>u,mi:()=>g,oU:()=>T,qA:()=>o});var l=t(82897),e=t.n(l),r=t(33180),i=t(69934),c=t(40467),A=t(12767);const o=v=>(0,l.uniqBy)(v,"service"),s=(v,I)=>v.filter(d=>d.service===I),a=(v,I,d,p)=>{const L=s(v,p).map(_=>({value:_.type,name:_.displayName})),n=L.some(_=>_.value===d),m=L.length?L[0].value:"";return{metricTypes:L,selectedMetricType:n?I:m}},T=(v,I,d)=>(d&&d===A.mG.Rate&&(I=A.lH.GAUGE),v?c.Eu.filter(p=>p.valueTypes.indexOf(v)!==-1&&p.metricKinds.indexOf(I)!==-1):[]),h=(v,I)=>I?c.lx.filter(d=>d.valueTypes.indexOf(v)!==-1&&d.metricKinds.indexOf(I)!==-1):[],D=async(v,I,d)=>{const p="handleLabelKeysQuery",L=await v.getLabels(I,p,d);return[...Object.keys(L),...c.$e]},O=(v=A.$h.DOUBLE,I=A.lH.GAUGE,d=A.CS.ALIGN_MEAN,p)=>{const L=(0,i.J)(),n=T(v,I,p).map(m=>({...m,label:m.text}));return n.some(m=>m.value===L.replace(d))||(d=n.length>0?n[0].value:A.CS.ALIGN_MEAN),{alignOptions:n,perSeriesAligner:d}},U=v=>{const I=v.reduce((d,p)=>{const L=p.split(".").map(l.startCase),n=(L.length===2?L:(0,l.initial)(L)).join(" "),m={value:p,label:p};return d[n]?d[n]=[...d[n],m]:d[n]=[m],d},{});return Object.entries(I).map(([d,p])=>({label:d,options:p,expanded:!0}),[])},g=v=>(0,l.chunk)(v,4).map(([I,d,p,L="AND"])=>({key:I,operator:d,value:p,condition:L})),u=(v,I)=>{const{perSeriesAligner:d,alignmentPeriod:p}=v;if(!p||!d)return"";const L=c.Eu.find(P=>P.value===I.templateSrv.replace(d)),n=parseInt(p,10);return`${r.secondsToHms(n)} interval (${L?.text??""})`},E=v=>{const I=v?.filters?.findIndex(p=>p==="metric.type");return v?.filters?.[I+2]||""},N=(v,I)=>{if(!v.filters)return v.filters=["metric.type","=",I],v;const d=v?.filters?.findIndex(p=>p==="metric.type");return d===-1?v.filters.push("metric.type","=",I):v.filters[d+2]=I,v}},12767:(G,f,t)=>{"use strict";t.d(f,{$h:()=>o,Bp:()=>r,CS:()=>s,lH:()=>A,mG:()=>c,xL:()=>i});var l=t(83341);const e=[{label:"Google JWT File",value:l.GoogleAuthType.JWT},{label:"GCE Default Service Account",value:l.GoogleAuthType.GCE}];var r=(a=>(a.Projects="projects",a.Services="services",a.DefaultProject="defaultProject",a.MetricTypes="metricTypes",a.LabelKeys="labelKeys",a.LabelValues="labelValues",a.ResourceTypes="resourceTypes",a.Aggregations="aggregations",a.Aligners="aligners",a.AlignmentPeriods="alignmentPeriods",a.Selectors="selectors",a.SLOServices="sloServices",a.SLO="slo",a))(r||{}),i=(a=>(a.TIME_SERIES_LIST="timeSeriesList",a.TIME_SERIES_QUERY="timeSeriesQuery",a.SLO="slo",a.ANNOTATION="annotation",a))(i||{}),c=(a=>(a.None="none",a.Rate="rate",a.Delta="delta",a))(c||{}),A=(a=>(a.METRIC_KIND_UNSPECIFIED="METRIC_KIND_UNSPECIFIED",a.GAUGE="GAUGE",a.DELTA="DELTA",a.CUMULATIVE="CUMULATIVE",a))(A||{}),o=(a=>(a.VALUE_TYPE_UNSPECIFIED="VALUE_TYPE_UNSPECIFIED",a.BOOL="BOOL",a.INT64="INT64",a.DOUBLE="DOUBLE",a.STRING="STRING",a.DISTRIBUTION="DISTRIBUTION",a.MONEY="MONEY",a))(o||{}),s=(a=>(a.ALIGN_DELTA="ALIGN_DELTA",a.ALIGN_RATE="ALIGN_RATE",a.ALIGN_INTERPOLATE="ALIGN_INTERPOLATE",a.ALIGN_NEXT_OLDER="ALIGN_NEXT_OLDER",a.ALIGN_MIN="ALIGN_MIN",a.ALIGN_MAX="ALIGN_MAX",a.ALIGN_MEAN="ALIGN_MEAN",a.ALIGN_COUNT="ALIGN_COUNT",a.ALIGN_SUM="ALIGN_SUM",a.ALIGN_STDDEV="ALIGN_STDDEV",a.ALIGN_COUNT_TRUE="ALIGN_COUNT_TRUE",a.ALIGN_COUNT_FALSE="ALIGN_COUNT_FALSE",a.ALIGN_FRACTION_TRUE="ALIGN_FRACTION_TRUE",a.ALIGN_PERCENTILE_99="ALIGN_PERCENTILE_99",a.ALIGN_PERCENTILE_95="ALIGN_PERCENTILE_95",a.ALIGN_PERCENTILE_50="ALIGN_PERCENTILE_50",a.ALIGN_PERCENTILE_05="ALIGN_PERCENTILE_05",a.ALIGN_PERCENT_CHANGE="ALIGN_PERCENT_CHANGE",a.ALIGN_NONE="ALIGN_NONE",a))(s||{})},25347:(G,f,t)=>{var l;l={value:!0};var e=t(24034),r=t(84666),i=t(68404),c=t(82897);function A(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var o=A(i),s=function(){return s=Object.assign||function(n){for(var m,P=1,_=arguments.length;P<_;P++)for(var M in m=arguments[P])Object.prototype.hasOwnProperty.call(m,M)&&(n[M]=m[M]);return n},s.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function a(n,m){var P=typeof Symbol=="function"&&n[Symbol.iterator];if(!P)return n;var _,M,S=P.call(n),B=[];try{for(;(m===void 0||m-- >0)&&!(_=S.next()).done;)B.push(_.value)}catch(K){M={error:K}}finally{try{_&&!_.done&&(P=S.return)&&P.call(S)}finally{if(M)throw M.error}}return B}var T,h="Configuration help box",D="Configuration drop zone",O="Configuration text area",U="Paste JWT button",g="Reset JWT button",u="JWT form",E="JWT button",N="GCE button",v=["private_key","token_uri","client_email","project_id"],I=function(n){var m=n.onChange,P=a(i.useState(),2),_=P[0],M=P[1],S=a(i.useState(null),2),B=S[0],K=S[1],$=r.useTheme2(),x=i.useCallback(function(b){M(null),K(!0)},[K]),W=i.useCallback(function(b){K(null),M(null)},[K]),Y=i.useCallback(function(b){if(b.trim()!==""){var H=void 0;try{H=JSON.parse(b)}catch{M("Invalid JWT token")}var X=d(H);X.isValid?m({privateKey:H.private_key,tokenUri:H.token_uri,clientEmail:H.client_email,projectId:H.project_id}):M(X.error)}},[M,m]);return o.default.createElement(o.default.Fragment,null,o.default.createElement(r.Field,{label:"JWT token",invalid:Boolean(_),description:B?"Paste JWT token below":"Upload or paste Google JWT token",error:_},o.default.createElement(o.default.Fragment,null,B!==!0&&o.default.createElement("div",{"data-testid":D},o.default.createElement(r.FileDropzone,{options:{multiple:!1,accept:"application/json"},readAs:"readAsText",onLoad:function(b){Y(b),K(!1)}},o.default.createElement("p",{style:{margin:0,fontSize:""+$.typography.h4.fontSize,textAlign:"center"}},"Drop the Google JWT file here",o.default.createElement("br",null),o.default.createElement("br",null),o.default.createElement(r.Button,{fill:"outline"},"Click to browse files")))),B&&o.default.createElement(r.TextArea,{"data-testid":O,autoFocus:!0,invalid:Boolean(_),placeholder:"Paste Google JWT token here",onBlur:function(b){return Y(b.currentTarget.value)},rows:12}))),!B&&o.default.createElement(r.Field,null,o.default.createElement(r.Button,{"data-testid":U,type:"button",fill:"outline",style:{color:""+$.colors.primary.text},onClick:x},"Paste JWT Token")),B&&_&&o.default.createElement(r.Field,null,o.default.createElement(r.Button,{type:"button",fill:"outline",style:{color:""+$.colors.primary.text},onClick:W},"Upload JWT Token")))},d=function(n){if(!c.isObject(n))return{isValid:!1,error:"Invalid JWT token"};var m=v.filter(function(P){return!n[P]});return m.length>0?{isValid:!1,error:"Missing keys: "+m.join(", ")}:{isValid:!0}},p=function(n){var m=n.options,P=n.onReset,_=n.onChange;return o.default.createElement("div",{"data-testid":u},o.default.createElement(r.Field,{label:"Project ID"},o.default.createElement(r.Input,{id:"defaultProject",width:60,value:m.defaultProject||"",onChange:_("defaultProject")})),o.default.createElement(r.Field,{label:"Client email"},o.default.createElement(r.Input,{width:60,id:"clientEmail",value:m.clientEmail||"",onChange:_("clientEmail")})),o.default.createElement(r.Field,{label:"Token URI"},o.default.createElement(r.Input,{width:60,id:"tokenUri",value:m.tokenUri||"",onChange:_("tokenUri")})),o.default.createElement(r.Field,{label:"Private key",disabled:!0},o.default.createElement(r.Input,{width:60,id:"privateKey",readOnly:!0,placeholder:"Private key configured",addonAfter:o.default.createElement(r.Tooltip,{content:"Click to clear the uploaded JWT token and upload a new one"},o.default.createElement(r.Button,{"data-testid":g,icon:"sync",size:"xs",onClick:function(){return P(null)},fill:"outline"},"Reset token"))})))};f.GoogleAuthType=void 0,(T=f.GoogleAuthType||(f.GoogleAuthType={})).JWT="jwt",T.GCE="gce";var L=[{label:"Google JWT File",value:f.GoogleAuthType.JWT,ariaLabel:E},{label:"GCE Default Service Account",value:f.GoogleAuthType.GCE,ariaLabel:N}];f.ConnectionConfig=function(n){var m=n.options,P=n.onOptionsChange,_=m.jsonData,M=m.secureJsonFields,S=m.secureJsonData;_.authenticationType||(_.authenticationType=f.GoogleAuthType.JWT);var B=_.authenticationType===f.GoogleAuthType.JWT||_.authenticationType===void 0,K=Boolean(M&&M.privateKey&&_.clientEmail&&_.defaultProject&&_.tokenUri);return o.default.createElement(o.default.Fragment,null,o.default.createElement(r.FieldSet,{label:"Authentication"},o.default.createElement(r.Field,{label:"Authentication type"},o.default.createElement(r.RadioButtonGroup,{options:L,value:_.authenticationType||f.GoogleAuthType.JWT,onChange:function($){P(s(s({},m),{jsonData:s(s({},m.jsonData),{authenticationType:$})}))}}))),B&&o.default.createElement(r.FieldSet,{label:"JWT Key Details"},K?o.default.createElement(p,{options:m.jsonData,onReset:function($){var x=s({},S),W=$?s(s({},m.jsonData),$):s({},m.jsonData);delete W.clientEmail,delete W.defaultProject,delete W.tokenUri,delete x.privateKey,P(s(s({},m),{secureJsonData:x,jsonData:W}))},onChange:function($){return e.onUpdateDatasourceJsonDataOption(n,$)}}):o.default.createElement(I,{onChange:function($){P(s(s({},m),{secureJsonFields:s(s({},M),{privateKey:!0}),secureJsonData:s(s({},S),{privateKey:$.privateKey}),jsonData:s(s({},_),{clientEmail:$.clientEmail,defaultProject:$.projectId,tokenUri:$.tokenUri})}))}})," "),o.default.createElement("div",{className:"grafana-info-box",style:{marginTop:"16px"},"data-testid":h},o.default.createElement("p",null,"Don\u2019t know how to get a service account key file or create a service account? Read more"," ",o.default.createElement("a",{className:"external-link",target:"_blank",rel:"noopener noreferrer",href:"https://grafana.com/docs/grafana/latest/datasources/google-cloud-monitoring/google-authentication/"},"in the documentation."))),!B&&o.default.createElement(r.Alert,{title:"",severity:"info"},"Verify GCE default service account by clicking Save & Test"))}},83341:(G,f,t)=>{"use strict";G.exports=t(25347)}}]);

//# sourceMappingURL=2773.66f9453a17b8acfa11c2.js.map