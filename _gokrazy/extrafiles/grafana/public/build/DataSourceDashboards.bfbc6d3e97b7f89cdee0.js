"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2929],{27786:(v,u,t)=>{t.d(u,{Z:()=>r});var a=t(68404),D=t(81697),s=t(90723);function d({dashboards:o,onImport:P,onRemove:M}){function _(c){return c.revision!==c.importedRevision?"Update":"Re-import"}return a.createElement("table",{className:"filter-table"},a.createElement("tbody",null,o.map((c,l)=>a.createElement("tr",{key:`${c.dashboardId}-${l}`},a.createElement("td",{className:"width-1"},a.createElement(D.J,{name:"apps"})),a.createElement("td",null,c.imported?a.createElement("a",{href:c.importedUrl},c.title):a.createElement("span",null,c.title)),a.createElement("td",{style:{textAlign:"right"}},c.imported?a.createElement(s.zx,{variant:"secondary",size:"sm",onClick:()=>P(c,!0)},_(c)):a.createElement(s.zx,{variant:"secondary",size:"sm",onClick:()=>P(c,!1)},"Import"),c.imported&&a.createElement(s.zx,{"aria-label":"Delete dashboard",icon:"trash-alt",variant:"destructive",size:"sm",onClick:()=>M(c)}))))))}const r=d},81960:(v,u,t)=>{t.d(u,{Z:()=>M});var a=t(68404),D=t(2555),s=t(86977),d=t(85805),r=t(81168),o=t(27786),P=t(25e3);function M({uid:c}){(0,P.wi)(c);const l=(0,r.useDispatch)(),i=(0,r.useSelector)(E=>E.dataSources.dataSource),I=(0,r.useSelector)(E=>E.plugins.dashboards),T=(0,r.useSelector)(E=>E.plugins.isLoadingPluginDashboards);(0,a.useEffect)(()=>{i.id>0&&l((0,d.m3)())},[l,i]);const h=(E,S)=>{l((0,s.$j)({pluginId:E.pluginId,path:E.path,overwrite:S,inputs:[{name:"*",type:"datasource",pluginId:i.type,value:i.name}]},E.title))},R=({uid:E})=>{l((0,s.fG)(E))};return a.createElement(_,{dashboards:I,isLoading:T,onImportDashboard:h,onRemoveDashboard:R})}const _=({isLoading:c,dashboards:l,onImportDashboard:i,onRemoveDashboard:I})=>c?a.createElement(D.Z,null):a.createElement(o.Z,{dashboards:l,onImport:i,onRemove:I})},46144:(v,u,t)=>{t.r(u),t.d(u,{DataSourceDashboardsPage:()=>r,default:()=>o});var a=t(68404),D=t(79396),s=t(81960),d=t(25e3);function r(P){const M=P.match.params.uid,_=(0,d.MF)(M,"dashboards");return a.createElement(D.T,{navId:"datasources",pageNav:_.main},a.createElement(D.T.Contents,null,a.createElement(s.Z,{uid:M})))}const o=r},59332:(v,u,t)=>{t.d(u,{V:()=>s});var a=t(68404),D=t(3597);const s=(0,a.createContext)(D.n)},24231:(v,u,t)=>{t.d(u,{E:()=>I,IA:()=>f,MF:()=>y,OU:()=>E,Qs:()=>x,YY:()=>z,_l:()=>U,d7:()=>L,hw:()=>T,nH:()=>S,q6:()=>g,qj:()=>K,wi:()=>R,wl:()=>p,zJ:()=>h});var a=t(68404),D=t(70431),s=t(97063),d=t(77582),r=t(86245),o=t(81168),P=t(45984),M=t(85597),_=t(40897),c=t(59332),l=t(79508),i=t(93769);const I=e=>{const n=(0,o.useDispatch)();(0,a.useEffect)(()=>(n((0,_.M9)(e)),function(){n((0,D.e)({cleanupAction:m=>m.dataSourceSettings}))}),[e,n])},T=e=>{const n=(0,o.useDispatch)();return()=>n((0,_.kY)(e))},h=()=>{const e=(0,o.useDispatch)();(0,a.useEffect)(()=>{e((0,_.bZ)())},[e])},R=e=>{const n=(0,o.useDispatch)();(0,a.useEffect)(()=>{n((0,_.gv)(e))},[n,e])},E=()=>{const e=(0,o.useDispatch)();(0,a.useEffect)(()=>{e((0,_.Kj)())},[e])},S=()=>{const e=(0,o.useDispatch)(),n=L();return O=>{e((0,_.J_)(O,n.Edit))}},K=()=>{const e=(0,o.useDispatch)();return async n=>e((0,_.oe)(n))},g=()=>{const e=(0,o.useDispatch)(),{name:n}=(0,o.useSelector)(O=>O.dataSources.dataSource);return()=>{s.Z.publish(new P.VJ({title:"Delete",text:`Are you sure you want to delete the "${n}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>e((0,_.F5)())}))}},p=e=>(0,o.useSelector)(n=>(0,i.f6)(n.dataSources,e)),f=e=>{const n=p(e);return(0,M.iU)(n)},x=e=>(0,o.useSelector)(n=>(0,i.G4)(n.dataSources,e)),U=()=>(0,o.useSelector)(e=>e.dataSourceSettings),y=(e,n)=>{const O=p(e),{plugin:m,loadError:A,loading:Z}=U(),B=(0,o.useSelector)(C=>C.navIndex),W=n?`datasource-${n}-${e}`:`datasource-settings-${e}`;if(A){const C={text:A,subTitle:"Data Source Error",icon:"exclamation-triangle"};return{node:C,main:C}}return Z||!m?(0,r.ht)(B,W,(0,l.xG)("settings")):(0,r.ht)(B,W,(0,l.nI)((0,l.B1)(O,m),n||"settings"))},z=e=>{const n=p(e),O=n.readOnly===!0,m=d.Vt.hasPermissionInMetadata(o.AccessControlAction.DataSourcesWrite,n),A=d.Vt.hasPermissionInMetadata(o.AccessControlAction.DataSourcesDelete,n);return{readOnly:O,hasWriteRights:m,hasDeleteRights:A}},L=()=>(0,a.useContext)(c.V)},25e3:(v,u,t)=>{t.d(u,{BX:()=>r.BX,E:()=>s.E,Ht:()=>r.Ht,I5:()=>o.I5,IA:()=>o.IA,IO:()=>o.IO,MF:()=>s.MF,Nu:()=>r.Nu,OU:()=>s.OU,Qs:()=>s.Qs,Rz:()=>s.IA,Vj:()=>D.V,YY:()=>s.YY,_l:()=>s._l,bZ:()=>a.bZ,d7:()=>s.d7,hw:()=>s.hw,mt:()=>o.mt,nH:()=>s.nH,q6:()=>s.q6,qj:()=>s.qj,r7:()=>o.r7,rl:()=>r.rl,wi:()=>s.wi,wl:()=>s.wl,yr:()=>r.yr,zJ:()=>s.zJ,zT:()=>r.zT});var a=t(40897),D=t(59332),s=t(24231),d=t(79508),r=t(71128),o=t(93769)}}]);

//# sourceMappingURL=DataSourceDashboards.bfbc6d3e97b7f89cdee0.js.map