"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[743],{"./public/app/features/notifications/NotificationsPage.tsx":(e,a,n)=>{n.r(a),n.d(a,{NotificationsPage:()=>z,default:()=>S});var t=n("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),s=n("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),r=n("./packages/grafana-runtime/src/index.ts"),o=n("./public/app/core/selectors/navModel.ts"),i=n("./public/app/core/components/Page/Page.tsx"),c=n("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useEffectOnce.js"),d=n("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),l=n("./packages/grafana-ui/src/index.ts"),p=n("./public/app/types/index.ts"),f=n("./public/app/core/reducers/appNotification.ts"),m=n("../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/formatDistance/index.js"),u=n("../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/_lib/requiredArgs/index.js");function x(e,a){return(0,u.Z)(1,arguments),(0,m.Z)(e,Date.now(),a)}var g=n("./packages/grafana-ui/src/components/Alert/Alert.tsx"),h=n("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const b=e=>{let{title:a,severity:n="error",traceId:t,timestamp:s,children:r,onRemove:o}=e;const i=(0,l.useTheme2)(),c=y(i,n);return(0,h.jsxs)("div",{className:c.wrapper,children:[(0,h.jsx)("div",{className:c.icon,children:(0,h.jsx)(l.Icon,{size:"xl",name:(0,g.j)(n)})}),(0,h.jsx)("div",{className:c.title,children:a}),(0,h.jsx)("div",{className:c.body,children:r}),(0,h.jsx)("span",{className:c.trace,children:t&&`Trace ID: ${t}`}),(0,h.jsx)("div",{className:c.close,children:(0,h.jsx)(l.IconButton,{"aria-label":"Close alert",name:"times",onClick:o,size:"lg",type:"button"})}),s&&(0,h.jsx)("span",{className:c.timestamp,children:x(s,{addSuffix:!0})})]})},y=(e,a)=>{const n=e.colors[a],t=e.shape.borderRadius();return{wrapper:(0,d.css)({display:"grid",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"auto 1fr auto",gridTemplateAreas:"\n        'icon title close'\n        'icon body body'\n        'icon trace timestamp'",gap:`0 ${e.spacing(2)}`,background:e.colors.background.secondary,borderRadius:t}),icon:(0,d.css)({gridArea:"icon",display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(2,3),background:n.main,color:n.contrastText,borderRadius:`${t} 0 0 ${t}`}),title:(0,d.css)({gridArea:"title",alignSelf:"center",fontWeight:e.typography.fontWeightMedium,color:e.colors.text.primary}),body:(0,d.css)({gridArea:"body",maxHeight:"50vh",marginRight:e.spacing(1),overflowY:"auto",overflowWrap:"break-word",wordBreak:"break-word",color:e.colors.text.secondary}),trace:(0,d.css)({gridArea:"trace",justifySelf:"start",alignSelf:"end",paddingBottom:e.spacing(1),fontSize:e.typography.pxToRem(10),color:e.colors.text.secondary}),close:(0,d.css)({gridArea:"close",display:"flex",justifySelf:"end",padding:e.spacing(1,.5),background:"none"}),timestamp:(0,d.css)({gridArea:"timestamp",alignSelf:"end",padding:e.spacing(1),fontSize:e.typography.pxToRem(10),color:e.colors.text.secondary})}};var v,j,D;function _(){const e=(0,p.I0)(),a=(0,p.v9)((e=>(0,f.mE)(e.appNotifications))),n=(0,t.useRef)((0,p.v9)((e=>(0,f.Av)(e.appNotifications)))),s=(0,l.useStyles2)(w);(0,c.Z)((()=>{e((0,f.Jk)(Date.now()))}));return 0===a.length?(0,h.jsxs)("div",{className:s.noNotifsWrapper,children:[v||(v=(0,h.jsx)(l.Icon,{name:"bell",size:"xxl"})),j||(j=(0,h.jsx)("span",{children:"Notifications you have received will appear here."}))]}):(0,h.jsxs)("div",{className:s.wrapper,children:[(0,h.jsx)(l.Button,{variant:"destructive",onClick:()=>{e((0,f.F6)())},className:s.clearAll,children:"Clear all notifications"}),(0,h.jsx)("ul",{className:s.list,children:a.map((a=>(0,h.jsx)("li",{className:(0,d.cx)(s.listItem,{[s.newItem]:a.timestamp>n.current}),children:(0,h.jsx)(b,{severity:a.severity,title:a.title,onRemove:()=>{return n=a.id,void e((0,f.hS)(n));var n},timestamp:a.timestamp,traceId:a.traceId,children:(0,h.jsx)("span",{children:a.text})})},a.id)))})]})}function w(e){return{smallText:(0,d.css)({fontSize:e.typography.pxToRem(10),color:e.colors.text.secondary}),side:(0,d.css)({display:"flex",flexDirection:"column",padding:"3px 6px",paddingTop:e.spacing(1),alignItems:"flex-end",justifyContent:"space-between",flexShrink:0}),list:(0,d.css)({display:"flex",flexDirection:"column",gap:e.spacing(1)}),listItem:(0,d.css)({listStyle:"none",gap:e.spacing(1),alignItems:"center",position:"relative"}),newItem:(0,d.css)({"&::before":{content:'""',height:"100%",position:"absolute",left:"-7px",top:0,background:e.colors.gradients.brandVertical,width:e.spacing(.5),borderRadius:e.shape.borderRadius(1)}}),noNotifsWrapper:(0,d.css)({display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(1)}),wrapper:(0,d.css)({display:"flex",flexDirection:"column",gap:e.spacing(2)}),clearAll:(0,d.css)({alignSelf:"flex-end"})}}const N=e=>({navModel:(0,o.h)(e.navIndex,"notifications")}),z=((0,s.connect)(N,void 0),e=>{let{navModel:a}=e;return r.config.featureToggles.persistNotifications?(0,h.jsx)(i.Z,{navModel:a,children:D||(D=(0,h.jsx)(i.Z.Contents,{children:(0,h.jsx)(_,{})}))}):null}),S=(0,s.connect)(N)(z)},"../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/formatDistance/index.js":(e,a,n)=>{n.d(a,{Z:()=>m});var t=n("../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/compareAsc/index.js"),s=n("../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/differenceInMonths/index.js"),r=n("../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/differenceInSeconds/index.js"),o=n("../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/locale/en-US/index.js"),i=n("../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/toDate/index.js");function c(e){return function(e,a){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in a=a||{})Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);return e}({},e)}var d=n("../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),l=n("../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/_lib/requiredArgs/index.js"),p=1440,f=43200;function m(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,l.Z)(2,arguments);var m=n.locale||o.Z;if(!m.formatDistance)throw new RangeError("locale must contain formatDistance property");var u=(0,t.Z)(e,a);if(isNaN(u))throw new RangeError("Invalid time value");var x,g,h=c(n);h.addSuffix=Boolean(n.addSuffix),h.comparison=u,u>0?(x=(0,i.Z)(a),g=(0,i.Z)(e)):(x=(0,i.Z)(e),g=(0,i.Z)(a));var b,y=(0,r.Z)(g,x),v=((0,d.Z)(g)-(0,d.Z)(x))/1e3,j=Math.round((y-v)/60);if(j<2)return n.includeSeconds?y<5?m.formatDistance("lessThanXSeconds",5,h):y<10?m.formatDistance("lessThanXSeconds",10,h):y<20?m.formatDistance("lessThanXSeconds",20,h):y<40?m.formatDistance("halfAMinute",null,h):y<60?m.formatDistance("lessThanXMinutes",1,h):m.formatDistance("xMinutes",1,h):0===j?m.formatDistance("lessThanXMinutes",1,h):m.formatDistance("xMinutes",j,h);if(j<45)return m.formatDistance("xMinutes",j,h);if(j<90)return m.formatDistance("aboutXHours",1,h);if(j<p){var D=Math.round(j/60);return m.formatDistance("aboutXHours",D,h)}if(j<2520)return m.formatDistance("xDays",1,h);if(j<f){var _=Math.round(j/p);return m.formatDistance("xDays",_,h)}if(j<86400)return b=Math.round(j/f),m.formatDistance("aboutXMonths",b,h);if((b=(0,s.Z)(g,x))<12){var w=Math.round(j/f);return m.formatDistance("xMonths",w,h)}var N=b%12,z=Math.floor(b/12);return N<3?m.formatDistance("aboutXYears",z,h):N<9?m.formatDistance("overXYears",z,h):m.formatDistance("almostXYears",z+1,h)}}}]);
//# sourceMappingURL=NotificationsPage.15718e8e3083449662a7.js.map