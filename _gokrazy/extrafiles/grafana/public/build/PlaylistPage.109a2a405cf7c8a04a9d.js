"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9218],{"./public/app/core/components/PageActionBar/PageActionBar.tsx":(e,t,a)=>{a.d(t,{Z:()=>i});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");class i extends s.PureComponent{render(){const{searchQuery:e,linkButton:t,setSearchQuery:a,target:s,placeholder:i="Search by name or type"}=this.props,r={href:null==t?void 0:t.href,disabled:null==t?void 0:t.disabled};return s&&(r.target=s),(0,l.jsxs)("div",{className:"page-action-bar",children:[(0,l.jsx)("div",{className:"gf-form gf-form--grow",children:(0,l.jsx)(n.FilterInput,{value:e,onChange:a,placeholder:i})}),t&&(0,l.jsx)(n.LinkButton,Object.assign({},r,{children:t.title}))]})}}},"./public/app/features/playlist/PlaylistPage.tsx":(e,t,a)=>{a.r(t),a.d(t,{PlaylistPage:()=>w,default:()=>D});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),l=a("./public/app/core/components/Page/Page.tsx"),i=a("./public/app/core/selectors/navModel.ts"),r=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useDebounce.js"),o=a("./packages/grafana-ui/src/index.ts"),c=a("./public/app/core/components/PageActionBar/PageActionBar.tsx"),d=a("./public/app/core/components/EmptyListCTA/EmptyListCTA.tsx"),p=a("./public/app/features/playlist/api.ts"),u=a("./packages/grafana-data/src/index.ts"),y=a("./packages/grafana-runtime/src/index.ts"),h=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const m=e=>{let{playlist:t,onDismiss:a}=e;const[n,l]=(0,s.useState)(!1),[i,r]=(0,s.useState)(!1);return(0,h.jsxs)(o.Modal,{isOpen:!0,icon:"play",title:"Start playlist",onDismiss:a,children:[(0,h.jsxs)(o.FieldSet,{children:[(0,h.jsx)(o.Field,{label:"Mode",children:(0,h.jsx)(o.RadioButtonGroup,{value:n,options:[{label:"Normal",value:!1},{label:"TV",value:"tv"},{label:"Kiosk",value:!0}],onChange:l})}),(0,h.jsx)(o.Checkbox,{label:"Autofit",description:"Panel heights will be adjusted to fit screen size",name:"autofix",value:i,onChange:e=>r(e.currentTarget.checked)})]}),(0,h.jsx)(o.Modal.ButtonRow,{children:(0,h.jsxs)(o.Button,{variant:"primary",onClick:()=>{const e={};n&&(e.kiosk=n),i&&(e.autofitpanels=!0),y.locationService.push(u.urlUtil.renderUrl(`/playlists/play/${t.id}`,e))},children:["Start ",t.name]})})]})};var x,b=a("./public/app/core/services/context_srv.ts"),g=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),v=a("./public/app/features/dashboard/components/DashNav/DashNavButton.tsx"),f=a("./public/app/core/app_events.ts"),j=a("./public/app/features/dashboard/components/ShareModal/utils.ts");const k=e=>{let{playlistId:t,onDismiss:a}=e;const[n,l]=(0,s.useState)(!1),[i,r]=(0,s.useState)(!1),c={};n&&(c.kiosk=n),i&&(c.autofitpanels=!0);const d=u.urlUtil.renderUrl(`${(0,j.OS)()}/play/${t}`,c);return(0,h.jsx)(o.Modal,{isOpen:!0,title:"Share playlist",onDismiss:a,children:(0,h.jsxs)(o.FieldSet,{children:[(0,h.jsx)(o.Field,{label:"Mode",children:(0,h.jsx)(o.RadioButtonGroup,{value:n,options:[{label:"Normal",value:!1},{label:"TV",value:"tv"},{label:"Kiosk",value:!0}],onChange:l})}),(0,h.jsx)(o.Field,{children:(0,h.jsx)(o.Checkbox,{label:"Autofit",description:"Panel heights will be adjusted to fit screen size",name:"autofix",value:i,onChange:e=>r(e.currentTarget.checked)})}),(0,h.jsx)(o.Field,{label:"Link URL",children:(0,h.jsx)(o.Input,{id:"link-url-input",value:d,readOnly:!0,addonAfter:(0,h.jsxs)(o.ClipboardButton,{variant:"primary",getText:()=>d,onClipboardCopy:()=>{f.Z.emit(u.AppEvents.alertSuccess,["Content copied to clipboard"])},children:[x||(x=(0,h.jsx)(o.Icon,{name:"copy"}))," Copy"]})})})]})})},S=e=>{let{playlists:t,setStartPlaylist:a,setPlaylistToDelete:s}=e;const n=(0,o.useStyles2)(C);return(0,h.jsx)("ul",{className:n.list,children:t.map((e=>(0,h.jsx)("li",{className:n.listItem,children:(0,h.jsxs)(o.Card,{children:[(0,h.jsxs)(o.Card.Heading,{children:[e.name,(0,h.jsx)(o.ModalsController,{children:t=>{let{showModal:a,hideModal:s}=t;return(0,h.jsx)(v.u,{tooltip:"Share playlist",icon:"share-alt",iconSize:"lg",onClick:()=>{a(k,{playlistId:e.id,onDismiss:s})}})}},"button-share")]}),(0,h.jsxs)(o.Card.Actions,{children:[(0,h.jsx)(o.Button,{variant:"secondary",icon:"play",onClick:()=>a(e),children:"Start playlist"}),b.Vt.isEditor&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.LinkButton,{variant:"secondary",href:`/playlists/edit/${e.id}`,icon:"cog",children:"Edit playlist"},"edit"),(0,h.jsx)(o.Button,{disabled:!1,onClick:()=>s({id:e.id,name:e.name}),icon:"trash-alt",variant:"destructive",children:"Delete playlist"})]})]})]})},e.id.toString())))})};function C(e){return{list:(0,g.css)({display:"grid"}),listItem:(0,g.css)({listStyle:"none"})}}const _=()=>{const e=(0,o.useStyles2)(B);return(0,h.jsx)("div",{className:e.noResult,children:"No playlist found!"})},B=e=>({noResult:g.css`
      padding: ${e.spacing(2)};
      background: ${e.colors.secondary.main};
      font-style: italic;
      margin-top: ${e.spacing(2)};
    `});var P,T;const w=e=>{let{navModel:t}=e;const[a,n]=(0,s.useState)(""),[i,u]=(0,s.useState)(a),[y,x]=(0,s.useState)(!1),[b,g]=(0,s.useState)(),[v,f]=(0,s.useState)(),[j,k]=(0,s.useState)(0),[C,B]=(0,s.useState)([]);(0,r.Z)((async()=>{const e=await(0,p.Dv)(a);y||x(!0),B(e),u(a)}),350,[j,a]);const w=C&&C.length>0,D=P||(P=(0,h.jsx)(d.Z,{title:"There are no playlists created yet",buttonIcon:"plus",buttonLink:"playlists/new",buttonTitle:"Create Playlist",proTip:"You can use playlists to cycle dashboards on TVs without user control",proTipLink:"http://docs.grafana.org/reference/playlist/",proTipLinkTitle:"Learn more",proTipTarget:"_blank"})),A=C.length>0||a.length>0||i.length>0;return(0,h.jsx)(l.Z,{navModel:t,children:(0,h.jsxs)(l.Z.Contents,{isLoading:!y,children:[A&&(0,h.jsx)(c.Z,{searchQuery:a,linkButton:{title:"New playlist",href:"/playlists/new"},setSearchQuery:n}),!w&&a?T||(T=(0,h.jsx)(_,{})):(0,h.jsx)(S,{playlists:C,setStartPlaylist:g,setPlaylistToDelete:f}),!A&&D,v&&(0,h.jsx)(o.ConfirmModal,{title:v.name,confirmText:"Delete",body:`Are you sure you want to delete '${v.name}' playlist?`,onConfirm:()=>{v&&(0,p.l8)(v.id).finally((()=>{k(j+1),f(void 0)}))},isOpen:Boolean(v),onDismiss:()=>f(void 0)}),b&&(0,h.jsx)(m,{playlist:b,onDismiss:()=>g(void 0)})]})})},D=(0,n.connect)((e=>({navModel:(0,i.h)(e.navIndex,"playlists")})))(w)},"./public/app/features/playlist/api.ts":(e,t,a)=>{a.d(t,{cg:()=>r,CE:()=>o,l8:()=>c,A5:()=>d,Dv:()=>p});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("./public/app/store/store.ts"),l=a("./public/app/core/actions/index.ts"),i=a("./public/app/core/copy/appNotification.ts");async function r(e){await u((()=>(0,s.getBackendSrv)().post("/api/playlists",e)))}async function o(e,t){await u((()=>(0,s.getBackendSrv)().put(`/api/playlists/${e}`,t)))}async function c(e){await u((()=>(0,s.getBackendSrv)().delete(`/api/playlists/${e}`)),"Playlist deleted")}async function d(e){return await(0,s.getBackendSrv)().get(`/api/playlists/${e}`)}async function p(e){return await(0,s.getBackendSrv)().get("/api/playlists/",{query:e})}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Playlist saved";try{await e(),(0,n.WI)((0,l.$l)((0,i.AT)(t)))}catch(e){(0,n.WI)((0,l.$l)((0,i.t_)("Unable to save playlist",e)))}}}}]);
//# sourceMappingURL=PlaylistPage.109a2a405cf7c8a04a9d.js.map