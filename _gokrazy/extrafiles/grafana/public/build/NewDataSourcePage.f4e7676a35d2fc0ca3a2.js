"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4253],{86218:(F,f,e)=>{e.d(f,{x:()=>H});var s=e(68404),c=e(79230),i=e(90723),g=e(2555),u=e(52423),o=e(24699),O=e(68183),T=e(29516),p=e(68698),B=e(15031),L=e(90701),M=e(80914),R=e(74509);function K(){const l=(0,R.UQ)(),{isLoading:d}=(0,R.ZV)(),t=(0,T.wW)(Q);return d||l.length===0?null:s.createElement(p.v,{"aria-label":O.wl.pages.PluginsList.signatureErrorNotice,severity:"warning",urlTitle:"Read more about plugin signing",url:"https://grafana.com/docs/grafana/latest/plugins/plugin-signatures/"},s.createElement("div",null,s.createElement("p",null,"Unsigned plugins were found during plugin initialization. Grafana Labs cannot guarantee the integrity of these plugins. We recommend only using signed plugins."),"The following plugins are disabled and not shown in the list below:",s.createElement(B.a,{items:l,className:t.list,renderItem:r=>s.createElement("div",{className:t.wrapper},s.createElement(L.Lh,{spacing:"sm",justify:"flex-start",align:"center"},s.createElement("strong",null,r.pluginId),s.createElement(M.o,{status:z(r.errorCode),className:t.badge})))})))}function z(l){switch(l){case o.w2.invalidSignature:return o.Xy.invalid;case o.w2.missingSignature:return o.Xy.missing;case o.w2.modifiedSignature:return o.Xy.modified;default:return o.Xy.missing}}function Q(l){return{list:(0,u.css)({listStyleType:"circle"}),wrapper:(0,u.css)({marginTop:l.spacing(1)}),badge:(0,u.css)({marginTop:0})}}var I=e(81168),y=e(66208);function x({onClick:l,dataSourcePlugin:d}){const t=d.module==="phantom",r=!t&&!d.unlicensed,E=d.info?.links?.length>0?d.info.links[0]:null,m=(0,T.wW)(A);return s.createElement(y.Z,{className:(0,u.cx)(m.card,"card-parent"),onClick:r?l:()=>{}},s.createElement(y.Z.Heading,{className:m.heading,"aria-label":O.wl.pages.AddDataSource.dataSourcePluginsV2(d.name)},d.name),s.createElement(y.Z.Figure,{align:"center",className:m.figure},s.createElement("img",{className:m.logo,src:d.info.logos.small,alt:""})),s.createElement(y.Z.Description,{className:m.description},d.info.description),!t&&s.createElement(y.Z.Meta,{className:m.meta},s.createElement(M.o,{status:d.signature})),s.createElement(y.Z.Actions,{className:m.actions},E&&s.createElement(i.Qj,{"aria-label":`${d.name}, learn more.`,href:`${E.url}?utm_source=grafana_add_ds`,icon:"external-link-alt",onClick:v=>v.stopPropagation(),rel:"noopener",target:"_blank",variant:"secondary"},E.name)))}function A(l){return{heading:(0,u.css)({fontSize:l.v1.typography.heading.h5,fontWeight:"inherit"}),figure:(0,u.css)({width:"inherit",marginRight:"0px","> img":{width:l.spacing(7)}}),meta:(0,u.css)({marginTop:"6px",position:"relative"}),description:(0,u.css)({margin:"0px",fontSize:l.typography.size.sm}),actions:(0,u.css)({position:"relative",alignSelf:"center",marginTop:"0px",opacity:0,".card-parent:hover &, .card-parent:focus-within &":{opacity:1}}),card:(0,u.css)({gridTemplateAreas:`
        "Figure   Heading   Actions"
        "Figure Description Actions"
        "Figure    Meta     Actions"
        "Figure     -       Actions"`}),logo:(0,u.css)({marginRight:l.v1.spacing.lg,marginLeft:l.v1.spacing.sm,width:l.spacing(7),maxHeight:l.spacing(7)})}}function h({dataSourcePlugins:l,onClickDataSourceType:d}){return!l||!l.length?null:s.createElement(B.a,{items:l,getItemKey:t=>t.id.toString(),renderItem:t=>s.createElement(x,{dataSourcePlugin:t,onClick:()=>d(t)}),className:u.css`
        > li {
          margin-bottom: 2px;
        }
      `})}function Z({categories:l,onClickDataSourceType:d}){return s.createElement(s.Fragment,null,l.map(({id:t,title:r,plugins:E})=>s.createElement("div",{className:"add-data-source-category",key:t},s.createElement("div",{className:"add-data-source-category__header",id:t},r),s.createElement(h,{dataSourcePlugins:E,onClickDataSourceType:d}))),s.createElement("div",{className:"add-data-source-more"},s.createElement(i.Qj,{variant:"secondary",href:"https://grafana.com/plugins?type=datasource&utm_source=grafana_add_ds",target:"_blank",rel:"noopener"},"Find more data source plugins on grafana.com")))}var C=e(25e3);function H(){(0,C.OU)();const l=(0,I.useDispatch)(),d=(0,I.useSelector)(S=>(0,C.I5)(S.dataSources)),t=(0,I.useSelector)(S=>S.dataSources.dataSourceTypeSearchQuery),r=(0,I.useSelector)(S=>S.dataSources.isLoadingDataSources),E=(0,I.useSelector)(S=>S.dataSources.categories),m=(0,C.nH)(),v=S=>l((0,C.Ht)(S));return s.createElement(V,{dataSources:d,dataSourceCategories:E,searchQuery:t,isLoading:r,onAddDataSource:m,onSetSearchQuery:v})}function V({dataSources:l,dataSourceCategories:d,searchQuery:t,isLoading:r,onAddDataSource:E,onSetSearchQuery:m}){const v=(0,C.d7)();return r?s.createElement(g.Z,null):s.createElement(s.Fragment,null,s.createElement("div",{className:"page-action-bar"},s.createElement(c.H,{value:t,onChange:m,placeholder:"Filter by name or type"}),s.createElement("div",{className:"page-action-bar__spacer"}),s.createElement(i.Qj,{href:v.List,fill:"outline",variant:"secondary",icon:"arrow-left"},"Cancel")),!t&&s.createElement(K,null),s.createElement("div",null,t&&s.createElement(h,{dataSourcePlugins:l,onClickDataSourceType:E}),!t&&s.createElement(Z,{categories:d,onClickDataSourceType:E})))}},70594:(F,f,e)=>{e.r(f),e.d(f,{NewDataSourcePage:()=>u,default:()=>o});var s=e(68404),c=e(79396),i=e(86218),g=e(3597);function u(){const O={icon:"database",id:"datasource-new",text:"Add data source",url:g.n.New,subTitle:"Choose a data source type"};return s.createElement(c.T,{navId:"datasources",pageNav:O},s.createElement(c.T.Contents,null,s.createElement(i.x,null)))}const o=u},59332:(F,f,e)=>{e.d(f,{V:()=>i});var s=e(68404),c=e(3597);const i=(0,s.createContext)(c.n)},24231:(F,f,e)=>{e.d(f,{E:()=>R,IA:()=>Z,MF:()=>V,OU:()=>I,Qs:()=>C,YY:()=>l,_l:()=>H,d7:()=>d,hw:()=>K,nH:()=>y,q6:()=>A,qj:()=>x,wi:()=>Q,wl:()=>h,zJ:()=>z});var s=e(68404),c=e(70431),i=e(97063),g=e(77582),u=e(86245),o=e(81168),O=e(45984),T=e(85597),p=e(40897),B=e(59332),L=e(79508),M=e(93769);const R=t=>{const r=(0,o.useDispatch)();(0,s.useEffect)(()=>(r((0,p.M9)(t)),function(){r((0,c.e)({cleanupAction:m=>m.dataSourceSettings}))}),[t,r])},K=t=>{const r=(0,o.useDispatch)();return()=>r((0,p.kY)(t))},z=()=>{const t=(0,o.useDispatch)();(0,s.useEffect)(()=>{t((0,p.bZ)())},[t])},Q=t=>{const r=(0,o.useDispatch)();(0,s.useEffect)(()=>{r((0,p.gv)(t))},[r,t])},I=()=>{const t=(0,o.useDispatch)();(0,s.useEffect)(()=>{t((0,p.Kj)())},[t])},y=()=>{const t=(0,o.useDispatch)(),r=d();return E=>{t((0,p.J_)(E,r.Edit))}},x=()=>{const t=(0,o.useDispatch)();return async r=>t((0,p.oe)(r))},A=()=>{const t=(0,o.useDispatch)(),{name:r}=(0,o.useSelector)(E=>E.dataSources.dataSource);return()=>{i.Z.publish(new O.VJ({title:"Delete",text:`Are you sure you want to delete the "${r}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>t((0,p.F5)())}))}},h=t=>(0,o.useSelector)(r=>(0,M.f6)(r.dataSources,t)),Z=t=>{const r=h(t);return(0,T.iU)(r)},C=t=>(0,o.useSelector)(r=>(0,M.G4)(r.dataSources,t)),H=()=>(0,o.useSelector)(t=>t.dataSourceSettings),V=(t,r)=>{const E=h(t),{plugin:m,loadError:v,loading:S}=H(),j=(0,o.useSelector)(W=>W.navIndex),U=r?`datasource-${r}-${t}`:`datasource-settings-${t}`;if(v){const W={text:v,subTitle:"Data Source Error",icon:"exclamation-triangle"};return{node:W,main:W}}return S||!m?(0,u.ht)(j,U,(0,L.xG)("settings")):(0,u.ht)(j,U,(0,L.nI)((0,L.B1)(E,m),r||"settings"))},l=t=>{const r=h(t),E=r.readOnly===!0,m=g.Vt.hasPermissionInMetadata(o.AccessControlAction.DataSourcesWrite,r),v=g.Vt.hasPermissionInMetadata(o.AccessControlAction.DataSourcesDelete,r);return{readOnly:E,hasWriteRights:m,hasDeleteRights:v}},d=()=>(0,s.useContext)(B.V)},25e3:(F,f,e)=>{e.d(f,{BX:()=>u.BX,E:()=>i.E,Ht:()=>u.Ht,I5:()=>o.I5,IA:()=>o.IA,IO:()=>o.IO,MF:()=>i.MF,Nu:()=>u.Nu,OU:()=>i.OU,Qs:()=>i.Qs,Rz:()=>i.IA,Vj:()=>c.V,YY:()=>i.YY,_l:()=>i._l,bZ:()=>s.bZ,d7:()=>i.d7,hw:()=>i.hw,mt:()=>o.mt,nH:()=>i.nH,q6:()=>i.q6,qj:()=>i.qj,r7:()=>o.r7,rl:()=>u.rl,wi:()=>i.wi,wl:()=>i.wl,yr:()=>u.yr,zJ:()=>i.zJ,zT:()=>u.zT});var s=e(40897),c=e(59332),i=e(24231),g=e(79508),u=e(71128),o=e(93769)},74509:(F,f,e)=>{e.d(f,{iY:()=>X,bt:()=>v,ZV:()=>m,GE:()=>C,UQ:()=>d,bJ:()=>V,x3:()=>t,IS:()=>S,y9:()=>E,S1:()=>r,wq:()=>j});var s=e(68404),c=e(81168),i=e(59210),g=e(85805),u=e(66552),o=e(90158),O=e(29076),T=e(48996);const p=n=>n.plugins,B=(0,o.P1)(p,({items:n})=>n),L=(0,o.P1)(p,({settings:n})=>n.displayMode),{selectAll:M,selectById:R}=u.CD.getSelectors(B),K=n=>(0,o.P1)(M,a=>a.filter(D=>n==="installed"?D.isInstalled:!D.isCore)),z=(n,a)=>(0,o.P1)(K(n),D=>D.filter(P=>a==="all"||P.type===a)),Q=n=>(0,o.P1)(M,a=>n===""?[]:a.filter(D=>{const P=[];return D.name&&P.push(D.name.toLowerCase()),D.orgName&&P.push(D.orgName.toLowerCase()),P.some(N=>N.includes((0,O.x6)(n).toLowerCase()))})),I=(n,a,D)=>(0,o.P1)(z(a,D),Q(n),(P,N)=>n===""?P:N),y=(0,o.P1)(M,n=>n?n.filter(a=>Boolean(a.error)).map(a=>({pluginId:a.id,errorCode:a.error})):[]),x=n=>(0,o.P1)(p,({requests:a={}})=>a[n]),A=n=>(0,o.P1)(x(n),a=>a?.status===T.eE.Pending),h=n=>(0,o.P1)(x(n),a=>a?.status===T.eE.Rejected?a?.error:null),Z=n=>(0,o.P1)(x(n),a=>a===void 0),C=({query:n="",filterBy:a="installed",filterByType:D="all",sortBy:P=i.Nh.nameAsc})=>{U();const N=(0,c.useSelector)(I(n,a,D)),{isLoading:G,error:J}=m(),$=(0,i.AA)(N,P);return{isLoading:G,error:J,plugins:$}},H=()=>(U(),useSelector(selectAll)),V=n=>(U(),Y(n),(0,c.useSelector)(a=>R(a,n))),l=n=>(W(),useSelector(a=>selectById(a,n))),d=()=>(U(),(0,c.useSelector)(y)),t=()=>{const n=(0,c.useDispatch)();return(a,D,P)=>n((0,g.N9)({id:a,version:D,isUpdating:P}))},r=()=>{const n=(0,c.useDispatch)();return a=>n((0,g.Tz)(a))},E=()=>(0,c.useSelector)(h(g.tQ.typePrefix))===null,m=()=>{const n=(0,c.useSelector)(A(g.Qd.typePrefix)),a=(0,c.useSelector)(h(g.Qd.typePrefix));return{isLoading:n,error:a}},v=()=>{const n=(0,c.useSelector)(A(g.DD.typePrefix)),a=(0,c.useSelector)(h(g.DD.typePrefix));return{isLoading:n,error:a}},S=()=>{const n=(0,c.useSelector)(A(g.N9.typePrefix)),a=(0,c.useSelector)(h(g.N9.typePrefix));return{isInstalling:n,error:a}},j=()=>{const n=(0,c.useSelector)(A(g.Tz.typePrefix)),a=(0,c.useSelector)(h(g.Tz.typePrefix));return{isUninstalling:n,error:a}},U=()=>{const n=(0,c.useDispatch)(),a=(0,c.useSelector)(Z(g.Qd.typePrefix));(0,s.useEffect)(()=>{a&&n((0,g.Qd)())},[])},W=()=>{const n=useDispatch(),a=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{a&&n(fetchAllLocal())},[])},Y=n=>{const a=(0,c.useDispatch)(),D=(0,c.useSelector)(G=>R(G,n)),N=!(0,c.useSelector)(A(g.DD.typePrefix))&&D&&!D.details;(0,s.useEffect)(()=>{N&&a((0,g.DD)(n))},[D])},X=()=>{const n=(0,c.useDispatch)();return{displayMode:(0,c.useSelector)(L),setDisplayMode:D=>n((0,u.UC)(D))}}}}]);

//# sourceMappingURL=NewDataSourcePage.f4e7676a35d2fc0ca3a2.js.map