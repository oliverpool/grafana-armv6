"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8595],{84457:(S,v,t)=>{t.d(v,{l:()=>R});var n=t(68404),y=t(19677),m=t(77274),h=t(77213),M=t(36584);class R extends n.PureComponent{constructor(){super(...arguments),this.onRemoveQuery=e=>{this.props.onQueriesChange(this.props.queries.filter(r=>r!==e))},this.onDragStart=e=>{const{queries:r,dsSettings:o}=this.props;(0,m.ff)("query_row_reorder_started",{startIndex:e.source.index,numberOfQueries:r.length,datasourceType:o.type})},this.onDragEnd=e=>{const{queries:r,onQueriesChange:o,dsSettings:u}=this.props;if(!e||!e.destination)return;const a=e.source.index,s=e.destination.index;if(a===s){(0,m.ff)("query_row_reorder_canceled",{startIndex:a,endIndex:s,numberOfQueries:r.length,datasourceType:u.type});return}const i=Array.from(r),[g]=i.splice(a,1);i.splice(s,0,g),o(i),(0,m.ff)("query_row_reorder_ended",{startIndex:a,endIndex:s,numberOfQueries:r.length,datasourceType:u.type})}}onChangeQuery(e,r){const{queries:o,onQueriesChange:u}=this.props;u(o.map((a,s)=>s===r?e:a))}onDataSourceChange(e,r){const{queries:o,onQueriesChange:u}=this.props;this.props.onDatasourceChange&&this.props.onDatasourceChange(e,o[r]),u(o.map((a,s)=>{if(s!==r)return a;const i={type:e.type,uid:e.uid};return a.datasource&&(0,h.F)().getInstanceSettings(a.datasource)?.type===e.type?{...a,datasource:i}:{refId:a.refId,hide:a.hide,datasource:i}}))}render(){const{dsSettings:e,data:r,queries:o,app:u,history:a,eventBus:s,onAddQuery:i,onRunQueries:g,onQueryCopied:l,onQueryRemoved:P,onQueryToggled:d}=this.props;return n.createElement(y.Z5,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},n.createElement(y.bK,{droppableId:"transformations-list",direction:"vertical"},c=>n.createElement("div",{ref:c.innerRef,...c.droppableProps},o.map((f,O)=>{const T=D(f,e),C=e.meta.mixed?p=>this.onDataSourceChange(p,O):void 0;return n.createElement(M.x,{id:f.refId,index:O,key:f.refId,data:r,query:f,dataSource:T,onChangeDataSource:C,onChange:p=>this.onChangeQuery(p,O),onRemoveQuery:this.onRemoveQuery,onAddQuery:i,onRunQuery:g,onQueryCopied:l,onQueryRemoved:P,onQueryToggled:d,queries:o,app:u,history:a,eventBus:s})}),c.placeholder)))}}const D=(E,e)=>E.datasource&&(0,h.F)().getInstanceSettings(E.datasource)||e},42594:(S,v,t)=>{t.r(v),t.d(v,{TestStuffPage:()=>s,default:()=>g,getDefaultState:()=>i});var n=t(68404),y=t(3499),m=t(89050),h=t(21053),M=t(66926),R=t(93163),D=t(90723),E=t(79396),e=t(47694),r=t(60499),o=t(98141),u=t(98016),a=t(78800);const s=()=>{const[l,P]=(0,n.useState)(i()),{queryOptions:d,queryRunner:c}=l,f=()=>{const _={from:"now-1h",to:"now"};c.run({queries:d.queries,datasource:d.dataSource,timezone:"browser",timeRange:{from:h.parse(_.from),to:h.parse(_.to),raw:_},maxDataPoints:d.maxDataPoints??100,minInterval:d.minInterval})},O=_=>{P({...l,queryOptions:_})},T=(0,n.useMemo)(()=>c.getData({withFieldConfig:!0,withTransforms:!0}),[c]),C=(0,y.Z)(T),p={id:"test-page",text:"Test page",icon:"dashboard",subTitle:"FOR TESTING!",url:"sandbox/test"},I=(0,r.iG)();return n.createElement(E.T,{navModel:{node:p,main:p}},n.createElement(E.T.Contents,null,C&&n.createElement(m.Z,{style:{width:"100%",height:"600px"}},({width:_})=>n.createElement("div",null,n.createElement(o.$,{title:"Hello",pluginId:"timeseries",width:_,height:300,data:C,options:{},fieldConfig:{defaults:{},overrides:[]},timeZone:"browser"}),n.createElement(R.i,{data:C.series[0],width:_,height:300}))),n.createElement("div",{style:{marginTop:"16px",height:"45%"}},n.createElement(u.D,{options:d,queryRunner:c,onRunQueries:f,onOptionsChange:O})),n.createElement("div",{style:{display:"flex",gap:"1em"}},n.createElement(D.zx,{onClick:()=>I.success("Success toast","some more text goes here"),variant:"primary"},"Success"),n.createElement(D.zx,{onClick:()=>I.warning("Warning toast","some more text goes here","bogus-trace-99999"),variant:"secondary"},"Warning"),n.createElement(D.zx,{onClick:()=>I.error("Error toast","some more text goes here","bogus-trace-fdsfdfsfds"),variant:"destructive"},"Error"))))};function i(){const l={fieldConfig:{defaults:{color:{mode:M.S.PaletteClassic}},overrides:[]},replaceVariables:d=>d,theme:e.vc.theme2},P={getTransformations:()=>[],getFieldOverrideOptions:()=>l,getDataSupport:()=>({annotations:!1,alertStates:!1})};return{queryRunner:new a.o(P),queryOptions:{queries:[],dataSource:{name:"gdev-testdata"},maxDataPoints:100,savedQueryUid:null}}}const g=s}}]);

//# sourceMappingURL=TestStuffPage.1dbb0602dcba6c063dbb.js.map