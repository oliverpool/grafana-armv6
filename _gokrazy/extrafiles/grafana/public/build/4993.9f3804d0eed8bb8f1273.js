(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4993],{21315:(ee,i,e)=>{"use strict";e.d(i,{M:()=>mt});var r=e(68404),O=e(22350),g=e(26418),M=e(67090),C=e(12936),E=e(3823),L=e(71210),T=e(46739),P=e(44727),N=e(90723),S=e(48756),D=e(318),b=e(94025),A=e(6694),U=e(81697);function I({isOpen:ve,onCancel:ce,onDiscard:Pe,onCopy:Me}){const xe=(0,r.useRef)(null);return(0,r.useEffect)(()=>{ve&&xe.current?.focus()},[ve]),r.createElement(A.u,{title:r.createElement("div",{className:"modal-header-title"},r.createElement(U.J,{name:"exclamation-triangle",size:"lg"}),r.createElement("span",{className:"p-l-1"},"Warning")),onDismiss:ce,isOpen:ve},r.createElement("p",null,"Builder mode does not display changes made in code. The query builder will display the last changes you made in builder mode."),r.createElement("p",null,"Do you want to copy your code to the clipboard?"),r.createElement(A.u.ButtonRow,null,r.createElement(N.zx,{type:"button",variant:"secondary",onClick:ce,fill:"outline"},"Cancel"),r.createElement(N.zx,{variant:"destructive",type:"button",onClick:Pe,ref:xe},"Discard code and switch"),r.createElement(N.zx,{variant:"primary",onClick:Me},"Copy code and switch")))}const $=({db:ve,value:ce,onChange:Pe,disabled:Me,className:xe,applyDefault:Ke})=>{const Ie=(0,O.Z)(async()=>(await ve.datasets()).map(b.Er),[]);return(0,r.useEffect)(()=>{Ke&&(ce?Ie.value&&Ie.value.find(Ye=>Ye.value===ce)===void 0&&Ie.value.length>0&&Pe(Ie.value[0]):Ie.value&&Ie.value[0]&&Pe(Ie.value[0]))},[Ie.value,ce,Ke,Pe]),r.createElement(T.Ph,{className:xe,"aria-label":"Dataset selector",value:ce,options:Ie.value,onChange:Pe,disabled:Me,isLoading:Ie.loading,menuShouldPortal:!0})};class w extends r.Component{constructor(ce){super(ce),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?this.props.fallBackComponent||r.createElement("div",null,"Error"):this.props.children}}var V=e(63134);const G=({db:ve,query:ce,value:Pe,className:Me,onChange:xe,forceFetch:Ke})=>{const Ie=(0,O.Z)(async()=>!ce.dataset&&!Ke?[]:(await ve.tables(ce.dataset)).map(V.E),[ce.dataset]);return r.createElement(T.Ph,{className:Me,disabled:Ie.loading,"aria-label":"Table selector",value:Pe,options:Ie.value,onChange:xe,isLoading:Ie.loading,menuShouldPortal:!0,placeholder:Ie.loading?"Loading tables":"Select table"})},K=[{label:"Builder",value:g.EditorMode.Builder},{label:"Code",value:g.EditorMode.Code}];function H({db:ve,query:ce,queryRowFilter:Pe,onChange:Me,onRunQuery:xe,onQueryRowChange:Ke,isQueryRunnable:Ie,isDatasetSelectorHidden:Ye}){const{editorMode:nt}=ce,[tt,ft]=(0,E.Z)(),[Ze,Be]=(0,r.useState)(!1),Ge=ve.toRawSql||C.C5,et=(0,r.useCallback)(lt=>{if(nt===g.EditorMode.Code){Be(!0);return}Me({...ce,editorMode:lt})},[nt,Me,ce]),je=lt=>{const pt={...ce,format:lt.value!==void 0?lt.value:b.ws.Table};Me(pt)},vt=lt=>{if(lt.value===ce.dataset)return;const pt={...ce,dataset:lt.value,table:void 0,sql:void 0,rawSql:""};Me(pt)},gt=lt=>{if(lt.value===ce.table)return;const pt={...ce,table:lt.value,sql:void 0,rawSql:""};Me(pt)};return r.createElement(r.Fragment,null,r.createElement(g.EditorHeader,null,r.createElement(w,{fallBackComponent:r.createElement(L._,{label:"Format",labelWidth:15},r.createElement(T.Ph,{placeholder:"Select format",value:ce.format,onChange:je,options:b.x7}))},r.createElement(g.InlineSelect,{label:"Format",value:ce.format,placeholder:"Select format",menuShouldPortal:!0,onChange:je,options:b.x7})),nt===g.EditorMode.Builder&&r.createElement(r.Fragment,null,r.createElement(P.x,{id:"sql-filter",label:"Filter",transparent:!0,showLabel:!0,value:Pe.filter,onChange:lt=>lt.target instanceof HTMLInputElement&&Ke({...Pe,filter:lt.target.checked})}),r.createElement(P.x,{id:"sql-group",label:"Group",transparent:!0,showLabel:!0,value:Pe.group,onChange:lt=>lt.target instanceof HTMLInputElement&&Ke({...Pe,group:lt.target.checked})}),r.createElement(P.x,{id:"sql-order",label:"Order",transparent:!0,showLabel:!0,value:Pe.order,onChange:lt=>lt.target instanceof HTMLInputElement&&Ke({...Pe,order:lt.target.checked})}),r.createElement(P.x,{id:"sql-preview",label:"Preview",transparent:!0,showLabel:!0,value:Pe.preview,onChange:lt=>lt.target instanceof HTMLInputElement&&Ke({...Pe,preview:lt.target.checked})})),r.createElement(g.FlexItem,{grow:1}),Ie?r.createElement(N.zx,{icon:"play",variant:"primary",size:"sm",onClick:()=>xe()},"Run query"):r.createElement(S.u,{theme:"error",content:r.createElement(r.Fragment,null,"Your query is invalid. Check below for details. ",r.createElement("br",null),"However, you can still run this query."),placement:"top"},r.createElement(N.zx,{icon:"exclamation-triangle",variant:"secondary",size:"sm",onClick:()=>xe()},"Run query")),r.createElement(D.S,{options:K,size:"sm",value:nt,onChange:et}),r.createElement(I,{isOpen:Ze,onCopy:()=>{Be(!1),ft(ce.rawSql),Me({...ce,rawSql:Ge(ce),editorMode:g.EditorMode.Builder})},onDiscard:()=>{Be(!1),Me({...ce,rawSql:Ge(ce),editorMode:g.EditorMode.Builder})},onCancel:()=>Be(!1)})),nt===g.EditorMode.Builder&&r.createElement(r.Fragment,null,r.createElement(g.Space,{v:.5}),r.createElement(g.EditorRow,null,Ye?null:r.createElement(g.EditorField,{label:"Dataset",width:25},r.createElement($,{db:ve,value:ce.dataset===void 0?null:ce.dataset,onChange:vt})),r.createElement(g.EditorField,{label:"Table",width:25},r.createElement(G,{db:ve,query:ce,value:ce.table===void 0?null:ce.table,onChange:gt,forceFetch:Ye,applyDefault:!0})))))}var _=e(52423),te=e(11041),J=e(89050),k=e(29516);function R({children:ve,onChange:ce,query:Pe,width:Me,height:xe,editorLanguageDefinition:Ke}){const Ie=(0,r.useRef)(Pe);(0,r.useEffect)(()=>{Ie.current=Pe},[Pe]);const Ye=(0,r.useCallback)((nt,tt)=>{const ft={...Ie.current,rawQuery:!0,rawSql:nt};ce(ft,tt)},[ce]);return r.createElement(g.SQLEditor,{width:Me,height:xe,query:Pe.rawSql,onChange:Ye,language:Ke},ve)}var m=e(90701),s=e(20017),c=e(671),o=e(63615),u=e(20112),l=e(40008);function f({db:ve,query:ce,onValidate:Pe,range:Me}){const[xe,Ke]=(0,r.useState)(),Ie=(0,k.l4)(),Ye=(0,r.useMemo)(()=>(0,u.Cf)("bytes"),[]),nt=(0,r.useMemo)(()=>({error:_.css`
        color: ${Ie.colors.error.text};
        font-size: ${Ie.typography.bodySmall.fontSize};
        font-family: ${Ie.typography.fontFamilyMonospace};
      `,valid:_.css`
        color: ${Ie.colors.success.text};
      `,info:_.css`
        color: ${Ie.colors.text.secondary};
      `}),[Ie]),[tt,ft]=(0,c.Z)(async Be=>Be.rawSql?.trim()===""?null:await ve.validateQuery(Be,Me),[ve]),[,]=(0,o.Z)(async()=>{const Be=await ft(ce);return Be&&Ke(Be),null},1e3,[ce,ft]);if((0,r.useEffect)(()=>{xe?.isError&&Pe(!1),xe?.isValid&&Pe(!0)},[xe,Pe]),!tt.value&&!tt.loading)return null;const Ze=tt.value?.error?v(tt.value.error):"";return r.createElement(r.Fragment,null,tt.loading&&r.createElement("div",{className:nt.info},r.createElement(l.$,{inline:!0,size:12})," Validating query..."),!tt.loading&&tt.value&&r.createElement(r.Fragment,null,r.createElement(r.Fragment,null,tt.value.isValid&&tt.value.statistics&&r.createElement("div",{className:nt.valid},r.createElement(U.J,{name:"check"})," This query will process"," ",r.createElement("strong",null,(0,u.zc)(Ye(tt.value.statistics.TotalBytesProcessed)))," ","when run.")),r.createElement(r.Fragment,null,tt.value.isError&&r.createElement("div",{className:nt.error},Ze))))}function v(ve){const ce=ve.split(":");return ce.length>2?ce.slice(2).join(":"):ve}function h({showTools:ve,onFormatCode:ce,onExpand:Pe,isExpanded:Me,...xe}){const Ke=(0,k.l4)(),[Ie,Ye]=(0,r.useState)(),nt=(0,r.useMemo)(()=>({container:_.css`
        border: 1px solid ${Ke.colors.border.medium};
        border-top: none;
        padding: ${Ke.spacing(.5,.5,.5,.5)};
        display: flex;
        flex-grow: 1;
        justify-content: space-between;
        font-size: ${Ke.typography.bodySmall.fontSize};
      `,error:_.css`
        color: ${Ke.colors.error.text};
        font-size: ${Ke.typography.bodySmall.fontSize};
        font-family: ${Ke.typography.fontFamilyMonospace};
      `,valid:_.css`
        color: ${Ke.colors.success.text};
      `,info:_.css`
        color: ${Ke.colors.text.secondary};
      `,hint:_.css`
        color: ${Ke.colors.text.disabled};
        white-space: nowrap;
        cursor: help;
      `}),[Ke]);let tt={};return!ve&&Ie===void 0&&(tt={height:0,padding:0,visibility:"hidden"}),r.createElement("div",{className:nt.container,style:tt},r.createElement("div",null,xe.onValidate&&r.createElement(f,{...xe,onValidate:ft=>{Ye(ft),xe.onValidate(ft)}})),ve&&r.createElement("div",null,r.createElement(m.Lh,{spacing:"sm"},ce&&r.createElement(s.h,{onClick:ce,name:"brackets-curly",size:"xs",tooltip:"Format query"}),Pe&&r.createElement(s.h,{onClick:()=>Pe(!Me),name:Me?"angle-up":"angle-down",size:"xs",tooltip:Me?"Collapse editor":"Expand editor"}),r.createElement(S.u,{content:"Hit CTRL/CMD+Return to run query"},r.createElement(U.J,{className:nt.hint,name:"keyboard"})))))}function a({db:ve,query:ce,onChange:Pe,onRunQuery:Me,onValidate:xe,queryToValidate:Ke,range:Ie}){const Ye=(0,k.l4)(),nt=(0,k.wW)(n),[tt,ft]=(0,r.useState)(!1),[Ze,Be]=(0,te.Z)(),[Ge,et]=(0,te.Z)(),je=(0,r.useMemo)(()=>ve.getEditorLanguageDefinition(),[ve]),vt=(pt,_e)=>r.createElement(R,{editorLanguageDefinition:je,query:ce,width:pt,height:_e?_e-Be.height:void 0,onChange:Pe},({formatQuery:St})=>r.createElement("div",{ref:Ze},r.createElement(h,{db:ve,query:Ke,onValidate:xe,onFormatCode:St,showTools:!0,range:Ie,onExpand:ft,isExpanded:tt}))),gt=(pt=!1)=>pt?r.createElement(J.Z,null,({width:_e,height:St})=>vt(_e,St)):r.createElement("div",{ref:Ge},vt()),lt=()=>r.createElement("div",{style:{width:et.width,height:et.height,background:Ye.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"center"}},"Editing in expanded code editor");return r.createElement(r.Fragment,null,tt?lt():gt(),tt&&r.createElement(A.u,{title:`Query ${ce.refId}`,closeOnBackdropClick:!1,closeOnEscape:!1,className:nt.modal,contentClassName:nt.modalContent,isOpen:tt,onDismiss:()=>{ft(!1)}},gt(!0)))}function n(ve){return{modal:_.css`
      width: 95vw;
      height: 95vh;
    `,modalContent:_.css`
      height: 100%;
      padding-top: 0;
    `}}var y=e(74955),p=e(57172),F=e(13930);function B({rawSql:ve}){const[ce,Pe]=(0,E.Z)(),Me=(0,k.wW)(Z),xe=r.createElement("div",{className:Me.labelWrapper},r.createElement("span",{className:Me.label},"Preview"),r.createElement(s.h,{tooltip:"Copy to clipboard",onClick:()=>Pe(ve),name:"copy"}));return r.createElement(y.g,{label:xe,className:Me.grow},r.createElement(p.p,{language:"sql",height:80,value:(0,F._)(ve),monacoOptions:{scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1},readOnly:!0,showMiniMap:!1}))}function Z(ve){return{grow:(0,_.css)({flexGrow:1}),label:(0,_.css)({fontSize:12,fontWeight:ve.typography.fontWeightMedium}),labelWrapper:(0,_.css)({display:"flex",justifyContent:"space-between",paddingBottom:ve.spacing(.5)})}}function X({query:ve,onQueryChange:ce,db:Pe}){return{onSqlChange:(0,r.useCallback)(xe=>{const Ie=(Pe.toRawSql||C.C5)({sql:xe,dataset:ve.dataset,table:ve.table,refId:ve.refId}),Ye={...ve,sql:xe,rawSql:Ie};ce(Ye)},[Pe,ce,ve])}}function j({sql:ve,columns:ce,onSqlChange:Pe}){const Me=(0,r.useCallback)(xe=>{const Ke=xe.map(Ye=>(0,C.U2)(Ye.property?.name)),Ie={...ve,groupBy:Ke};Pe(Ie)},[Pe,ve]);return r.createElement(g.EditorList,{items:ve.groupBy,onChange:Me,renderItem:z({options:ce})})}function z({options:ve}){return function(Pe,Me,xe){return r.createElement(g.InputGroup,null,r.createElement(T.Ph,{value:Pe.property?.name?(0,V.E)(Pe.property.name):null,"aria-label":"Group by",options:ve,menuShouldPortal:!0,onChange:({value:Ke})=>Ke&&Me((0,C.U2)(Ke))}),r.createElement(g.AccessoryButton,{"aria-label":"Remove group by column",icon:"times",variant:"secondary",onClick:xe}))}}function x({fields:ve,query:ce,onQueryChange:Pe,db:Me}){const{onSqlChange:xe}=X({query:ce,onQueryChange:Pe,db:Me});return r.createElement(j,{columns:ve,sql:ce.sql,onSqlChange:xe})}var Y=e(82897),re=e(25474);const ne=[{description:"Sort by ascending",value:"ASC",icon:"sort-amount-up"},{description:"Sort by descending",value:"DESC",icon:"sort-amount-down"}];function ae({sql:ve,onSqlChange:ce,columns:Pe,showOffset:Me}){const xe=(0,r.useCallback)(nt=>{const tt={...ve,orderByDirection:nt};ce(tt)},[ce,ve]),Ke=(0,r.useCallback)(nt=>{const tt={...ve,limit:Number.parseInt(nt.currentTarget.value,10)};ce(tt)},[ce,ve]),Ie=(0,r.useCallback)(nt=>{const tt={...ve,offset:Number.parseInt(nt.currentTarget.value,10)};ce(tt)},[ce,ve]),Ye=(0,r.useCallback)(nt=>{const tt={...ve,orderBy:(0,C.ax)(nt?.value)};nt===null&&(tt.orderByDirection=void 0),ce(tt)},[ce,ve]);return r.createElement(r.Fragment,null,r.createElement(g.EditorField,{label:"Order by",width:25},r.createElement(g.InputGroup,null,r.createElement(T.Ph,{"aria-label":"Order by",options:Pe,value:ve.orderBy?.property.name?(0,V.E)(ve.orderBy.property.name):null,isClearable:!0,menuShouldPortal:!0,onChange:Ye}),r.createElement(g.Space,{h:1.5}),r.createElement(D.S,{options:ne,disabled:!ve?.orderBy?.property.name,value:ve.orderByDirection,onChange:xe}))),r.createElement(g.EditorField,{label:"Limit",optional:!0,width:25},r.createElement(re.I,{type:"number",min:0,id:(0,Y.uniqueId)("limit-"),value:ve.limit||"",onChange:Ke})),Me&&r.createElement(g.EditorField,{label:"Offset",optional:!0,width:25},r.createElement(re.I,{type:"number",id:(0,Y.uniqueId)("offset-"),value:ve.offset||"",onChange:Ie})))}function ie({fields:ve,query:ce,onQueryChange:Pe,db:Me}){const{onSqlChange:xe}=X({query:ce,onQueryChange:Pe,db:Me});let Ke=[];return ve&&(Ke=[{value:"",label:"Selected columns",options:ce.sql?.columns?.map((Ye,nt)=>{const tt=Ye.name?`${Ye.name}(${Ye.parameters?.map(ft=>ft.name)})`:Ye.parameters?.map(ft=>ft.name);return{value:tt,label:`${nt+1} - ${tt}`}}),expanded:!0},...ve]),r.createElement(ae,{sql:ce.sql,onSqlChange:xe,columns:Ke})}var de=e(47366),se=e(80287);const ge={label:"*",value:"*"};function ye({sql:ve,format:ce,columns:Pe,onSqlChange:Me,functions:xe}){const Ke=(0,k.wW)(Ee),Ie=[ge,...Pe||[]],Ye=[];ce===b.ws.Timeseries&&(Ye.push({label:"time",value:"time"}),Ye.push({label:"value",value:"value"}));const nt=(0,r.useCallback)((Ge,et)=>je=>{let vt={...Ge};Ge.parameters?.length?vt.parameters=Ge.parameters.map(lt=>lt.type===se.a.FunctionParameter?{...lt,name:je.value}:lt):vt.parameters=[{type:se.a.FunctionParameter,name:je.value}];const gt={...ve,columns:ve.columns?.map((lt,pt)=>pt===et?vt:lt)};Me(gt)},[Me,ve]),tt=(0,r.useCallback)((Ge,et)=>je=>{const vt={...Ge,name:je?.value},gt={...ve,columns:ve.columns?.map((lt,pt)=>pt===et?vt:lt)};Me(gt)},[Me,ve]),ft=(0,r.useCallback)((Ge,et)=>je=>{let vt={...Ge};je!==null?vt={...Ge,alias:`"${je?.value?.trim()}"`}:delete vt.alias;const gt={...ve,columns:ve.columns?.map((lt,pt)=>pt===et?vt:lt)};Me(gt)},[Me,ve]),Ze=(0,r.useCallback)(Ge=>()=>{const et=[...ve.columns];et.splice(Ge,1);const je={...ve,columns:et};Me(je)},[Me,ve]),Be=(0,r.useCallback)(()=>{const Ge={...ve,columns:[...ve.columns,(0,C.Wf)()]};Me(Ge)},[Me,ve]);return r.createElement(g.Stack,{gap:2,wrap:!0,direction:"column"},ve.columns?.map((Ge,et)=>r.createElement("div",{key:et},r.createElement(g.Stack,{gap:2,alignItems:"end"},r.createElement(g.EditorField,{label:"Column",width:25},r.createElement(T.Ph,{value:Te(Ge),options:Ie,inputId:`select-column-${et}-${(0,Y.uniqueId)()}`,menuShouldPortal:!0,allowCustomValue:!0,onChange:nt(Ge,et)})),r.createElement(g.EditorField,{label:"Aggregation",optional:!0,width:25},r.createElement(T.Ph,{value:Ge.name?(0,V.E)(Ge.name):null,inputId:`select-aggregation-${et}-${(0,Y.uniqueId)()}`,isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0,options:xe,onChange:tt(Ge,et)})),r.createElement(g.EditorField,{label:"Alias",optional:!0,width:15},r.createElement(T.Ph,{value:Ge.alias?(0,V.E)(Ge.alias):null,options:Ye,onChange:ft(Ge,et),isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0})),r.createElement(N.zx,{"aria-label":"Remove",type:"button",icon:"trash-alt",variant:"secondary",size:"md",onClick:Ze(et)})))),r.createElement(N.zx,{type:"button",onClick:Be,variant:"secondary",size:"md",icon:"plus","aria-label":"Add",className:Ke.addButton}))}const Ee=()=>({addButton:(0,_.css)({alignSelf:"flex-start"})});function Te({parameters:ve}){const ce=ve?.find(Pe=>Pe.type===se.a.FunctionParameter);return ce?.name?(0,V.E)(ce.name):null}function he({fields:ve,query:ce,onQueryChange:Pe,db:Me}){const{onSqlChange:xe}=X({query:ce,onQueryChange:Pe,db:Me}),Ke=[...de.W,...Me.functions?.()||[]].map(V.E);return r.createElement(ye,{columns:ve,sql:ce.sql,format:ce.format,functions:Ke,onSqlChange:xe})}var Le=e(50700),Fe=e(89196),We=e(46519),Ue=e(2974);const He={add:"Add",remove:"Remove"},ke={id:Fe.cQ.uuid(),type:"group",children1:{[Fe.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},qe={id:Fe.cQ.uuid(),type:"group",children1:{[Fe.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}},ze={...Fe.I4.widgets,text:{...Fe.I4.widgets.text,factory:function(ce){return r.createElement(re.I,{value:ce?.value||"",placeholder:ce?.placeholder,onChange:Pe=>ce?.setValue(Pe.currentTarget.value)})}},number:{...Fe.I4.widgets.number,factory:function(ce){return r.createElement(re.I,{value:ce?.value,placeholder:ce?.placeholder,type:"number",onChange:Pe=>ce?.setValue(Number.parseInt(Pe.currentTarget.value,10))})}},datetime:{...Fe.I4.widgets.datetime,factory:function(ce){return r.createElement(Ue.x,{onChange:Pe=>{ce?.setValue(Pe.format(Fe.I4.widgets.datetime.valueFormat))},date:(0,We.CQ)(ce?.value).utc()})}}},fe={...Fe.I4.settings,canRegroup:!1,maxNesting:1,canReorder:!1,showNot:!1,addRuleLabel:He.add,deleteLabel:He.remove,renderConjs:function(ce){return r.createElement(T.Ph,{id:ce?.id,"aria-label":"Conjunction",menuShouldPortal:!0,options:ce?.conjunctionOptions?Object.keys(ce?.conjunctionOptions).map(V.E):void 0,value:ce?.selectedConjunction,onChange:Pe=>ce?.setConjunction(Pe.value)})},renderField:function(ce){const Pe=ce?.config?.fields||{};return r.createElement(T.Ph,{id:ce?.id,width:25,"aria-label":"Field",menuShouldPortal:!0,options:ce?.items.map(Me=>{const xe=Pe[Me.key].mainWidgetProps?.customProps?.icon;return{label:Me.label,value:Me.key,icon:xe}}),value:ce?.selectedKey,onChange:Me=>{ce?.setField(Me.label)}})},renderButton:function(ce){return r.createElement(N.zx,{type:"button",title:`${ce?.label} filter`,onClick:ce?.onClick,variant:"secondary",size:"md",icon:ce?.label===He.add?"plus":"times"})},renderOperator:function(ce){return r.createElement(T.Ph,{options:ce?.items.map(Pe=>({label:Pe.label,value:Pe.key})),"aria-label":"Operator",menuShouldPortal:!0,value:ce?.selectedKey,onChange:Pe=>{ce?.setField(Pe.value||"")}})}};var Oe=(ve=>(ve.IN="select_any_in",ve.NOT_IN="select_not_any_in",ve))(Oe||{});const Re=at(Fe.I4),Ae=Fe.I4.types.text.widgets.text,be=[...Ae.operators||[],"select_any_in","select_not_any_in"],Ve={...Ae,operators:be},De={...Fe.I4.types,text:{...Fe.I4.types.text,widgets:{...Fe.I4.types.text.widgets,text:Ve}}},$e={...Fe.I4,widgets:ze,settings:fe,operators:Re,types:De};function at(ve){const{...ce}=ve.operators,Pe=()=>"",Me=ce.select_any_in.sqlFormatOp||Pe,xe=(nt,tt,ft,Ze,Be,Ge,et,je)=>Me(nt,tt,ut(ft),Ze,Be,Ge,et,je),Ke=ce.select_not_any_in.sqlFormatOp||Pe,Ie=(nt,tt,ft,Ze,Be,Ge,et,je)=>Ke(nt,tt,ut(ft),Ze,Be,Ge,et,je);return{...ce,select_any_in:{...ce.select_any_in,sqlFormatOp:xe},select_not_any_in:{...ce.select_not_any_in,sqlFormatOp:Ie}}}function ut(ve){return(0,Y.isString)(ve)?ve.split(","):ve}function Qe({sql:ve,config:ce,onSqlChange:Pe}){const[Me,xe]=(0,r.useState)(),Ke=(0,r.useMemo)(()=>({...$e,...ce}),[ce]);(0,r.useEffect)(()=>{if(!Me){const Ye=Fe.cQ.checkTree(Fe.cQ.loadTree(ve.whereJsonTree??qe),Ke);xe(Ye)}},[Ke,ve.whereJsonTree,Me]),(0,r.useEffect)(()=>{ve.whereJsonTree||xe(Fe.cQ.checkTree(Fe.cQ.loadTree(qe),Ke))},[Ke,ve.whereJsonTree]);const Ie=(0,r.useCallback)((Ye,nt)=>{xe(Ye);const tt={...ve,whereJsonTree:Fe.cQ.getTree(Ye),whereString:Fe.cQ.sqlFormat(Ye,nt)};Pe(tt)},[Pe,ve]);return Me?r.createElement(Fe.AE,{...Ke,value:Me,onChange:Ie,renderBuilder:Ye=>r.createElement(Fe.Ib,{...Ye})}):null}function ot(ve){return`
    display: flex;
    gap: 8px;
    flex-direction: ${ve};`}_.injectGlobal`
  .group--header {
    ${ot("row")}
  }

  .group-or-rule {
    ${ot("column")}
    .rule {
      flex-direction: row;
    }
  }

  .rule--body {
    ${ot("row")}
  }

  .group--children {
    ${ot("column")}
  }

  .group--conjunctions:empty {
    display: none;
  }
`;function st({query:ve,fields:ce,onQueryChange:Pe,db:Me}){const xe=(0,Le.Z)(async()=>Je(ce),[ce]),{onSqlChange:Ke}=X({query:ve,onQueryChange:Pe,db:Me});return r.createElement(Qe,{key:JSON.stringify(xe.value),config:{fields:xe.value||{}},sql:ve.sql,onSqlChange:Ie=>{Ke(Ie)}})}function Je(ve){const ce={};for(const Pe of ve)ce[Pe.value]={type:Pe.raqbFieldType||"text",valueSources:["value"],mainWidgetProps:{customProps:{icon:Pe.icon}}};return ce}const dt=({query:ve,db:ce,queryRowFilter:Pe,onChange:Me,onValidate:xe,range:Ke})=>{const Ie=(0,O.Z)(async()=>await ce.fields(ve),[ce,ve.dataset,ve.table]);return r.createElement(r.Fragment,null,r.createElement(g.EditorRows,null,r.createElement(g.EditorRow,null,r.createElement(he,{fields:Ie.value||[],query:ve,onQueryChange:Me,db:ce})),Pe.filter&&r.createElement(g.EditorRow,null,r.createElement(g.EditorField,{label:"Filter by column value",optional:!0},r.createElement(st,{fields:Ie.value||[],query:ve,onQueryChange:Me,db:ce}))),Pe.group&&r.createElement(g.EditorRow,null,r.createElement(g.EditorField,{label:"Group by column"},r.createElement(x,{fields:Ie.value||[],query:ve,onQueryChange:Me,db:ce}))),Pe.order&&r.createElement(g.EditorRow,null,r.createElement(ie,{fields:Ie.value||[],query:ve,onQueryChange:Me,db:ce})),Pe.preview&&ve.rawSql&&r.createElement(g.EditorRow,null,r.createElement(B,{rawSql:ve.rawSql}))),r.createElement(h,{db:ce,query:ve,onValidate:xe,range:Ke}))};function mt({datasource:ve,query:ce,onChange:Pe,onRunQuery:Me,range:xe,queryHeaderProps:Ke}){const[Ie,Ye]=(0,r.useState)(!0),nt=ve.getDB(),{loading:tt,error:ft}=(0,O.Z)(async()=>()=>{ve.getDB(ve.id).init!==void 0&&ve.getDB(ve.id).init()},[ve]),Ze=(0,M.Y)(ce),[Be,Ge]=(0,r.useState)({filter:!!Ze.sql?.whereString,group:!!Ze.sql?.groupBy?.[0]?.property.name,order:!!Ze.sql?.orderBy?.property.name,preview:!0}),[et,je]=(0,r.useState)(Ze);(0,r.useEffect)(()=>()=>{ve.getDB(ve.id).dispose!==void 0&&ve.getDB(ve.id).dispose()},[ve]);const vt=(0,r.useCallback)(pt=>{yt(pt)&&Me&&Me()},[Me]),gt=(pt,_e=!0)=>{je(pt),Pe(pt),(0,C.IC)(pt.sql?.columns)&&pt.sql?.columns.some(St=>St.name)&&!Be.group&&Ge({...Be,group:!0}),_e&&vt(pt)},lt=pt=>{je(pt),Pe(pt)};return tt||ft?null:r.createElement(r.Fragment,null,r.createElement(H,{db:nt,onChange:lt,onRunQuery:Me,onQueryRowChange:Ge,queryRowFilter:Be,query:Ze,isQueryRunnable:Ie,...Ke}),r.createElement(g.Space,{v:.5}),Ze.editorMode!==g.EditorMode.Code&&r.createElement(dt,{db:nt,query:Ze,onChange:pt=>gt(pt,!1),queryRowFilter:Be,onValidate:Ye,range:xe}),Ze.editorMode===g.EditorMode.Code&&r.createElement(a,{db:nt,query:Ze,queryToValidate:et,onChange:gt,onRunQuery:Me,onValidate:Ye,range:xe}))}const yt=ve=>Boolean(ve.rawSql)},16705:(ee,i,e)=>{"use strict";e.d(i,{K:()=>C});var r=e(68404),O=e(65587),g=e(71210),M=e(45458);const C=E=>{const{onPropertyChanged:L,labelWidth:T,jsonData:P}=E,N=S=>D=>{L&&L(S,D)};return r.createElement(O.C,{label:"Connection limits"},r.createElement(g._,{tooltip:r.createElement("span",null,"The maximum number of open connections to the database.If ",r.createElement("i",null,"Max idle connections")," is greater than 0 and the ",r.createElement("i",null,"Max open connections")," is less than ",r.createElement("i",null,"Max idle connections"),", then",r.createElement("i",null,"Max idle connections")," will be reduced to match the ",r.createElement("i",null,"Max open connections")," limit. If set to 0, there is no limit on the number of open connections."),labelWidth:T,label:"Max open"},r.createElement(M.Y,{placeholder:"unlimited",value:P.maxOpenConns,onChange:N("maxOpenConns")})),r.createElement(g._,{tooltip:r.createElement("span",null,"The maximum number of connections in the idle connection pool.If ",r.createElement("i",null,"Max open connections")," is greater than 0 but less than the ",r.createElement("i",null,"Max idle connections"),", then the ",r.createElement("i",null,"Max idle connections")," will be reduced to match the ",r.createElement("i",null,"Max open connections")," limit. If set to 0, no idle connections are retained."),labelWidth:T,label:"Max idle"},r.createElement(M.Y,{placeholder:"2",value:P.maxIdleConns,onChange:N("maxIdleConns")})),r.createElement(g._,{tooltip:"The maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.",labelWidth:T,label:"Max lifetime"},r.createElement(M.Y,{placeholder:"14400",value:P.connMaxLifetime,onChange:N("connMaxLifetime")})))}},59024:(ee,i,e)=>{"use strict";e.d(i,{Q:()=>g});var r=e(68404),O=e(184);function g({onOptionsChange:M,options:C}){(0,r.useEffect)(()=>{C.database&&((0,O.o7)(`Migrating from options.database with value ${C.database} for ${C.name}`),M({...C,database:"",jsonData:{...C.jsonData,database:C.database}}))},[M,C])}},47366:(ee,i,e)=>{"use strict";e.d(i,{W:()=>r,n:()=>O});const r=["AVG","COUNT","MAX","MIN","SUM"],O=["$__time","$__timeEpoch","$__timeFilter","$__timeFrom","$__timeTo","$__timeGroup","$__timeGroupAlias","$__unixEpochFilter","$__unixEpochNanoFilter","$__unixEpochNanoFrom","$__unixEpochNanoTo","$__unixEpochGroup","$__unixEpochGroupAlias"]},25748:(ee,i,e)=>{"use strict";e.d(i,{D:()=>$});var r=e(3363),O=e(2101),g=e(50235),M=e(9800),C=e(69934),E=e(47214),L=e(88635),T=e(19349),P=e(92624),N=e(82897);class S{transformMetricFindResponse(V){const G=[],K=V.fields.find(_=>_.name==="__text"),H=V.fields.find(_=>_.name==="__value");if(K&&H)for(let _=0;_<K.values.length;_++)G.push({text:""+K.values.get(_),value:""+H.values.get(_)});else G.push(...V.fields.flatMap(_=>_.values.toArray()).map(_=>({text:_})));return(0,N.uniqBy)(G,"text")}}var D=e(21315),b=e(47366),A=e(94025),U=e(67090);function I(w){const V=typeof w.rawQuery=="string"?w.rawQuery:null;if(!V)return w;const G=(0,U.Y)({refId:"Annotation",...w.target??{},rawSql:V});return{...w,rawQuery:void 0,workspace:void 0,subscription:void 0,queryType:void 0,target:G}}class $ extends M.CK{constructor(V,G=(0,C.J)()){super(V),this.templateSrv=G,this.interpolateVariable=(H,_)=>typeof H=="string"?_.multi||_.includeAll?this.getQueryModel().quoteLiteral(H):String(H).replace(/'/g,"''"):typeof H=="number"?H:Array.isArray(H)?H.map(J=>this.getQueryModel().quoteLiteral(J)).join(","):H,this.name=V.name,this.responseParser=new S,this.id=V.id;const K=V.jsonData||{};this.interval=K.timeInterval||"1m",this.db=this.getDB(),this.annotations={prepareAnnotation:I,QueryEditor:D.M}}getResponseParser(){return this.responseParser}interpolateVariablesInQueries(V,G){let K=V;return V&&V.length>0&&(K=V.map(H=>({...H,datasource:this.getRef(),rawSql:this.templateSrv.replace(H.rawSql,G,this.interpolateVariable),rawQuery:!0}))),K}filterQuery(V){return!V.hide}applyTemplateVariables(V,G){return{refId:V.refId,datasource:this.getRef(),rawSql:this.templateSrv.replace(V.rawSql,G,this.interpolateVariable),format:V.format}}async metricFindQuery(V,G){let K="tempvar";G&&G.variable&&G.variable.name&&(K=G.variable.name);const H=this.templateSrv.replace(V,(0,P._6)({query:V,wildcardChar:"%",options:G}),this.interpolateVariable),_={refId:K,datasource:this.getRef(),rawSql:H,format:A.ws.Table},te=await this.runMetaQuery(_,G);return this.getResponseParser().transformMetricFindResponse(te)}async runSql(V,G){const K=await this.runMetaQuery({rawSql:V,format:A.ws.Table,refId:G?.refId},G);return new g.U(K)}runMetaQuery(V,G){const K=(0,T.$t)().timeRange(),H=V.refId||"meta",_=[{...V,datasource:V.datasource||this.getRef(),refId:H}];return(0,r.n)((0,E.i)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:G?.range?.from.valueOf().toString()||K.from.valueOf().toString(),to:G?.range?.to.valueOf().toString()||K.to.valueOf().toString(),queries:_},requestId:H}).pipe((0,O.U)(te=>(0,L.z1)(te,_).data[0])))}targetContainsTemplate(V){let G=V.rawSql;return b.n.forEach(K=>{G=G?.replace(K,"")||""}),this.templateSrv.containsTemplate(G)}}},67090:(ee,i,e)=>{"use strict";e.d(i,{Y:()=>M});var r=e(26418),O=e(94025),g=e(12936);function M(C){let E=C?.editorMode||r.EditorMode.Builder;return C?.editorMode===void 0&&C?.rawSql!==void 0&&(E=r.EditorMode.Code),{...C,refId:C?.refId||"A",format:C?.format!==void 0?C.format:O.ws.Table,rawSql:C?.rawSql||"",editorMode:E,sql:C?.sql||{columns:[(0,g.Wf)()],groupBy:[(0,g.U2)()],limit:50}}}},80287:(ee,i,e)=>{"use strict";e.d(i,{R:()=>r,a:()=>O});var r=(g=>(g.String="string",g))(r||{}),O=(g=>(g.Property="property",g.Operator="operator",g.Or="or",g.And="and",g.GroupBy="groupBy",g.Function="function",g.FunctionParameter="functionParameter",g))(O||{})},94025:(ee,i,e)=>{"use strict";e.d(i,{Er:()=>C,ws:()=>O,x7:()=>g});var r=e(63134),O=(E=>(E.Timeseries="time_series",E.Table="table",E))(O||{});const g=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],M=E=>({label:E,value:E}),C=r.E??M},13930:(ee,i,e)=>{"use strict";e.d(i,{_:()=>O});var r=e(17249);function O(g){return r.ZP.format(g).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,M=>M.replace(/\s/g,""))}},12936:(ee,i,e)=>{"use strict";e.d(i,{C5:()=>M,IC:()=>E,U2:()=>L,Wf:()=>P,ax:()=>T});var r=e(82897),O=e.n(r),g=e(80287);function M({sql:N,dataset:S,table:D}){let b="";if(!N||!E(N.columns))return b;if(b+=C(N.columns),S&&D&&(b+=`FROM ${S}.${D} `),N.whereString&&(b+=`WHERE ${N.whereString} `),N.groupBy?.[0]?.property.name){const A=N.groupBy.map(U=>U.property.name).filter(U=>!(0,r.isEmpty)(U));b+=`GROUP BY ${A.join(", ")} `}return N.orderBy?.property.name&&(b+=`ORDER BY ${N.orderBy.property.name} `),N.orderBy?.property.name&&N.orderByDirection&&(b+=`${N.orderByDirection} `),N.limit!==void 0&&N.limit>=0&&(b+=`LIMIT ${N.limit} `),b}function C(N){return`SELECT ${N.map(D=>{let b="";return D.name&&D.alias?b+=`${D.name}(${D.parameters?.map(A=>`${A.name}`)}) AS ${D.alias}`:D.name?b+=`${D.name}(${D.parameters?.map(A=>`${A.name}`)})`:D.alias?b+=`${D.parameters?.map(A=>`${A.name}`)} AS ${D.alias}`:b+=`${D.parameters?.map(A=>`${A.name}`)}`,b}).join(", ")} `}const E=N=>{if(!N)return!1;const S=N.some(b=>b.parameters?.length||b.parameters?.some(A=>A.name)),D=N.some(b=>b.name);return S||D};function L(N){return{type:g.a.GroupBy,property:{type:g.R.String,name:N}}}function T(N){return{type:g.a.Property,property:{type:g.R.String,name:N}}}function P(N){return{type:g.a.Function,name:N,parameters:[]}}},27485:(ee,i,e)=>{"use strict";var r=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.setDragStart=i.setDragProgress=i.setDragEnd=void 0;var O=M(e(95421));function g(T){if(typeof WeakMap!="function")return null;var P=new WeakMap,N=new WeakMap;return(g=function(D){return D?N:P})(T)}function M(T,P){if(!P&&T&&T.__esModule)return T;if(T===null||r(T)!=="object"&&typeof T!="function")return{default:T};var N=g(P);if(N&&N.has(T))return N.get(T);var S={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in T)if(b!=="default"&&Object.prototype.hasOwnProperty.call(T,b)){var A=D?Object.getOwnPropertyDescriptor(T,b):null;A&&(A.get||A.set)?Object.defineProperty(S,b,A):S[b]=T[b]}return S.default=T,N&&N.set(T,S),S}var C=function(P,N){return{type:O.SET_DRAG_PROGRESS,mousePos:P,dragging:N}};i.setDragProgress=C;var E=function(P,N,S){return{type:O.SET_DRAG_START,dragStart:P,dragging:N,mousePos:S}};i.setDragStart=E;var L=function(){return{type:O.SET_DRAG_END}};i.setDragEnd=L},57807:(ee,i,e)=>{"use strict";var r=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.setNot=i.setLock=i.setConjunction=void 0;var O=C(e(95421)),g=e(1218);function M(P){if(typeof WeakMap!="function")return null;var N=new WeakMap,S=new WeakMap;return(M=function(b){return b?S:N})(P)}function C(P,N){if(!N&&P&&P.__esModule)return P;if(P===null||r(P)!=="object"&&typeof P!="function")return{default:P};var S=M(N);if(S&&S.has(P))return S.get(P);var D={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in P)if(A!=="default"&&Object.prototype.hasOwnProperty.call(P,A)){var U=b?Object.getOwnPropertyDescriptor(P,A):null;U&&(U.get||U.set)?Object.defineProperty(D,A,U):D[A]=P[A]}return D.default=P,S&&S.set(P,D),D}var E=function(N,S,D){return{type:O.SET_CONJUNCTION,path:(0,g.toImmutableList)(S),conjunction:D}};i.setConjunction=E;var L=function(N,S,D){return{type:O.SET_NOT,path:(0,g.toImmutableList)(S),not:D}};i.setNot=L;var T=function(N,S,D){return{type:O.SET_LOCK,path:(0,g.toImmutableList)(S),lock:D}};i.setLock=T},23182:(ee,i,e)=>{"use strict";var r=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.tree=i.rule=i.group=i.drag=void 0;var O=L(e(68417));i.tree=O;var g=L(e(57807));i.group=g;var M=L(e(59e3));i.rule=M;var C=L(e(27485));i.drag=C;function E(T){if(typeof WeakMap!="function")return null;var P=new WeakMap,N=new WeakMap;return(E=function(D){return D?N:P})(T)}function L(T,P){if(!P&&T&&T.__esModule)return T;if(T===null||r(T)!=="object"&&typeof T!="function")return{default:T};var N=E(P);if(N&&N.has(T))return N.get(T);var S={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in T)if(b!=="default"&&Object.prototype.hasOwnProperty.call(T,b)){var A=D?Object.getOwnPropertyDescriptor(T,b):null;A&&(A.get||A.set)?Object.defineProperty(S,b,A):S[b]=T[b]}return S.default=T,N&&N.set(T,S),S}},59e3:(ee,i,e)=>{"use strict";var r=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.setValueSrc=i.setValue=i.setOperatorOption=i.setOperator=i.setField=void 0;var O=C(e(95421)),g=e(1218);function M(S){if(typeof WeakMap!="function")return null;var D=new WeakMap,b=new WeakMap;return(M=function(U){return U?b:D})(S)}function C(S,D){if(!D&&S&&S.__esModule)return S;if(S===null||r(S)!=="object"&&typeof S!="function")return{default:S};var b=M(D);if(b&&b.has(S))return b.get(S);var A={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in S)if(I!=="default"&&Object.prototype.hasOwnProperty.call(S,I)){var $=U?Object.getOwnPropertyDescriptor(S,I):null;$&&($.get||$.set)?Object.defineProperty(A,I,$):A[I]=S[I]}return A.default=S,b&&b.set(S,A),A}var E=function(D,b,A){return{type:O.SET_FIELD,path:(0,g.toImmutableList)(b),field:A,config:D}};i.setField=E;var L=function(D,b,A){return{type:O.SET_OPERATOR,path:(0,g.toImmutableList)(b),operator:A,config:D}};i.setOperator=L;var T=function(D,b,A,U,I,$,w){return{type:O.SET_VALUE,path:(0,g.toImmutableList)(b),delta:A,value:U,valueType:I,asyncListValues:$,config:D,__isInternal:w}};i.setValue=T;var P=function(D,b,A,U){return{type:O.SET_VALUE_SRC,path:(0,g.toImmutableList)(b),delta:A,srcKey:U,config:D}};i.setValueSrc=P;var N=function(D,b,A,U){return{type:O.SET_OPERATOR_OPTION,path:(0,g.toImmutableList)(b),name:A,value:U,config:D}};i.setOperatorOption=N},68417:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.setTree=i.removeRule=i.removeGroup=i.moveItem=i.addRule=i.addGroup=i.addDefaultCaseGroup=i.addCaseGroup=void 0;var g=r(e(39075)),M=e(1218),C=e(55805),E=P(e(95421)),L=r(e(40745));function T(w){if(typeof WeakMap!="function")return null;var V=new WeakMap,G=new WeakMap;return(T=function(H){return H?G:V})(w)}function P(w,V){if(!V&&w&&w.__esModule)return w;if(w===null||O(w)!=="object"&&typeof w!="function")return{default:w};var G=T(V);if(G&&G.has(w))return G.get(w);var K={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in w)if(_!=="default"&&Object.prototype.hasOwnProperty.call(w,_)){var te=H?Object.getOwnPropertyDescriptor(w,_):null;te&&(te.get||te.set)?Object.defineProperty(K,_,te):K[_]=w[_]}return K.default=w,G&&G.set(w,K),K}var N=function(V,G){return{type:E.SET_TREE,tree:G,config:V}};i.setTree=N;var S=function(V,G,K){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"rule",_=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;return{type:E.ADD_RULE,ruleType:H,children:_,path:(0,M.toImmutableList)(G),id:(0,g.default)(),properties:(0,C.defaultRuleProperties)(V).merge(K||{}),config:V}};i.addRule=S;var D=function(V,G){return{type:E.REMOVE_RULE,path:(0,M.toImmutableList)(G),config:V}};i.removeRule=D;var b=function(V,G,K){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:E.ADD_CASE_GROUP,path:(0,M.toImmutableList)(G),children:H,id:(0,g.default)(),properties:(0,C.defaultGroupProperties)(V).merge(K||{}),config:V,meta:{isDefaultCase:!0}}};i.addDefaultCaseGroup=b;var A=function(V,G,K){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:E.ADD_CASE_GROUP,path:(0,M.toImmutableList)(G),children:H,id:(0,g.default)(),properties:(0,C.defaultGroupProperties)(V).merge(K||{}),config:V}};i.addCaseGroup=A;var U=function(V,G,K){var H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{type:E.ADD_GROUP,path:(0,M.toImmutableList)(G),children:H,id:(0,g.default)(),properties:(0,C.defaultGroupProperties)(V).merge(K||{}),config:V}};i.addGroup=U;var I=function(V,G){return{type:E.REMOVE_GROUP,path:(0,M.toImmutableList)(G),config:V}};i.removeGroup=I;var $=function(V,G,K,H){return{type:E.MOVE_ITEM,fromPath:(0,M.toImmutableList)(G),toPath:(0,M.toImmutableList)(K),placement:H,config:V}};i.moveItem=$},51031:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(86067)),M=r(e(85091)),C=r(e(72366)),E=r(e(64920)),L=r(e(39005)),T=V(e(68404)),P=r(e(59160)),N=V(e(40745)),S=e(96591),D=r(e(80127)),b=e(75403),A=r(e(39075)),U=e(31506),I,$;function w(_){if(typeof WeakMap!="function")return null;var te=new WeakMap,J=new WeakMap;return(w=function(R){return R?J:te})(_)}function V(_,te){if(!te&&_&&_.__esModule)return _;if(_===null||O(_)!=="object"&&typeof _!="function")return{default:_};var J=w(te);if(J&&J.has(_))return J.get(_);var k={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in _)if(m!=="default"&&Object.prototype.hasOwnProperty.call(_,m)){var s=R?Object.getOwnPropertyDescriptor(_,m):null;s&&(s.get||s.set)?Object.defineProperty(k,m,s):k[m]=_[m]}return k.default=_,J&&J.set(_,k),k}function G(_){var te=K();return function(){var k=(0,L.default)(_),R;if(te){var m=(0,L.default)(this).constructor;R=Reflect.construct(k,arguments,m)}else R=k.apply(this,arguments);return(0,E.default)(this,R)}}function K(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var H=(0,D.default)(I=($=function(_){(0,C.default)(J,_);var te=G(J);function J(k){var R;return(0,g.default)(this,J),R=te.call(this,k),R._updPath(k),R}return(0,M.default)(J,[{key:"shouldComponentUpdate",value:function(R,m){var s=this.props,c=(0,U.pureShouldComponentUpdate)(this)(R,m);if(c){var o=[];for(var u in R){var l=R[u]!==s[u];l&&u!="__isInternalValueChange"&&o.push(u)}o.length||(c=!1),o.length==1&&o[0]=="tree"&&R.__isInternalValueChange&&(c=!1)}return c}},{key:"_updPath",value:function(R){var m=R.tree.get("id");this.path=N.default.List.of(m)}},{key:"render",value:function(){var R=this.props.tree,m=R.get("type"),s=m=="switch_group",c=s?null:(0,b.getTotalReordableNodesCountInTree)(R),o=s?null:(0,b.getTotalRulesCountInTree)(R),u=R.get("id");return T.default.createElement(S.Item,{key:u,id:u,path:this.path,type:m,properties:R.get("properties")||new N.Map,config:this.props.config,actions:this.props.actions,children1:R.get("children1")||new N.Map,reordableNodesCnt:c,totalRulesCnt:o,parentReordableNodesCnt:0,onDragStart:this.props.onDragStart})}}]),J}(T.Component),$.propTypes={tree:P.default.any.isRequired,config:P.default.object.isRequired,actions:P.default.object.isRequired,onDragStart:P.default.func},$))||I;i.default=H},54987:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(92476)),M=r(e(86067)),C=r(e(85091)),E=r(e(80467)),L=r(e(72366)),T=r(e(64920)),P=r(e(39005)),N=w(e(68404)),S=e(63121),D=r(e(9988)),b=r(e(59160)),A=w(e(23182)),U=e(1218),I=e(31506);function $(k){if(typeof WeakMap!="function")return null;var R=new WeakMap,m=new WeakMap;return($=function(c){return c?m:R})(k)}function w(k,R){if(!R&&k&&k.__esModule)return k;if(k===null||O(k)!=="object"&&typeof k!="function")return{default:k};var m=$(R);if(m&&m.has(k))return m.get(k);var s={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in k)if(o!=="default"&&Object.prototype.hasOwnProperty.call(k,o)){var u=c?Object.getOwnPropertyDescriptor(k,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=k[o]}return s.default=k,m&&m.set(k,s),s}function V(k,R){var m=Object.keys(k);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(k);R&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(k,c).enumerable})),m.push.apply(m,s)}return m}function G(k){for(var R=1;R<arguments.length;R++){var m=arguments[R]!=null?arguments[R]:{};R%2?V(Object(m),!0).forEach(function(s){(0,g.default)(k,s,m[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(m)):V(Object(m)).forEach(function(s){Object.defineProperty(k,s,Object.getOwnPropertyDescriptor(m,s))})}return k}function K(k){var R=H();return function(){var s=(0,P.default)(k),c;if(R){var o=(0,P.default)(this).constructor;c=Reflect.construct(s,arguments,o)}else c=s.apply(this,arguments);return(0,T.default)(this,c)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _=function(k){(0,L.default)(m,k);var R=K(m);function m(s){var c;return(0,M.default)(this,m),c=R.call(this,s),c.shouldComponentUpdate=(0,I.liteShouldComponentUpdate)((0,E.default)(c),{tree:function(u){return!(u===c.oldValidatedTree&&c.oldValidatedTree===c.validatedTree)}}),(0,I.useOnPropsChanged)((0,E.default)(c)),c._updateActions(s),c.validatedTree=s.getMemoizedTree(s.config,s.tree),c.oldValidatedTree=c.validatedTree,c}return(0,C.default)(m,[{key:"_updateActions",value:function(c){var o=c.config,u=c.dispatch;this.actions=(0,I.bindActionCreators)(G(G(G({},A.tree),A.group),A.rule),o,u)}},{key:"onPropsChanged",value:function(c){var o=c.onChange,u=this.props.config,l=c.tree,f=this.props.tree,v=c.config;this.oldValidatedTree=this.validatedTree,this.validatedTree=l,u!==v&&(this._updateActions(c),this.validatedTree=c.getMemoizedTree(v,l,u));var h=!(0,U.immutableEqual)(this.validatedTree,this.oldValidatedTree);h&&o&&o(this.validatedTree,v,c.__lastAction)}},{key:"render",value:function(){var c=this.props,o=c.config,u=c.renderBuilder,l=c.dispatch,f=c.__isInternalValueChange,v={tree:this.validatedTree,actions:this.actions,config:o,dispatch:l,__isInternalValueChange:f};return u(v)}}]),m}(N.Component);_.propTypes={config:b.default.object.isRequired,onChange:b.default.func,renderBuilder:b.default.func,tree:b.default.any};var te=(0,S.connect)(function(k){return{tree:k.tree,__isInternalValueChange:k.__isInternalValueChange,__lastAction:k.__lastAction}},null,null,{context:D.default})(_);te.displayName="ConnectedQuery";var J=te;i.default=J},60381:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(86067)),M=r(e(85091)),C=r(e(80467)),E=r(e(72366)),L=r(e(64920)),T=r(e(39005)),P=_(e(68404)),N=r(e(59160)),S=r(e(596)),D=r(e(9988)),b=e(31259),A=e(63121),U=_(e(23182)),I=e(24256),$=e(1218),w=e(55805),V=e(72769),G=e(31506),K=r(e(54987));function H(R){if(typeof WeakMap!="function")return null;var m=new WeakMap,s=new WeakMap;return(H=function(o){return o?s:m})(R)}function _(R,m){if(!m&&R&&R.__esModule)return R;if(R===null||O(R)!=="object"&&typeof R!="function")return{default:R};var s=H(m);if(s&&s.has(R))return s.get(R);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in R)if(u!=="default"&&Object.prototype.hasOwnProperty.call(R,u)){var l=o?Object.getOwnPropertyDescriptor(R,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=R[u]}return c.default=R,s&&s.set(R,c),c}function te(R){var m=J();return function(){var c=(0,T.default)(R),o;if(m){var u=(0,T.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,L.default)(this,o)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=function(R){(0,E.default)(s,R);var m=te(s);function s(c,o){var u;(0,g.default)(this,s),u=m.call(this,c,o),u.shouldComponentUpdate=(0,G.liteShouldComponentUpdate)((0,C.default)(u),{value:function(y,p,F){return!1}}),(0,G.useOnPropsChanged)((0,C.default)(u)),u.getMemoizedConfig=(0,I.createConfigMemo)(),u.getMemoizedTree=(0,V.createValidationMemo)();var l=u.getMemoizedConfig(c),f=c.value,v=u.getMemoizedTree(l,f),h=(0,S.default)(l,v,u.getMemoizedTree),a=(0,b.createStore)(h);return u.state={store:a,config:l},u}return(0,M.default)(s,[{key:"onPropsChanged",value:function(o){var u=this,l=this.state.config,f=this.getMemoizedConfig(o),v=l!==f,h=this.state.store.getState().tree,a=!(0,$.immutableEqual)(o.value,this.props.value)&&!(0,$.immutableEqual)(o.value,h),n=a?o.value||(0,w.defaultRoot)(o):h;if(v&&this.setState({config:f}),a||v){var y=this.getMemoizedTree(f,n,l);return Promise.resolve().then(function(){u.state.store.dispatch(U.tree.setTree(f,y))})}}},{key:"render",value:function(){var o=this.props,u=o.renderBuilder,l=o.get_children,f=o.onChange,v=o.settings,h=this.state,a=h.config,n=h.store,y=v.renderProvider;return P.default.createElement(y,{config:a},P.default.createElement(A.Provider,{store:n,context:D.default},P.default.createElement(K.default,{config:a,getMemoizedTree:this.getMemoizedTree,onChange:f,renderBuilder:u||l})))}}]),s}(P.Component);i.default=k,k.propTypes={conjunctions:N.default.object.isRequired,fields:N.default.object.isRequired,types:N.default.object.isRequired,operators:N.default.object.isRequired,widgets:N.default.object.isRequired,settings:N.default.object.isRequired,onChange:N.default.func,renderBuilder:N.default.func,value:N.default.any}},39066:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(68307)),M=r(e(19934)),C=r(e(86067)),E=r(e(85091)),L=r(e(72366)),T=r(e(64920)),P=r(e(39005)),N=A(e(68404)),S=r(e(59160)),D=["isDraggingTempo","isDraggingMe","dragging"];function b(V){if(typeof WeakMap!="function")return null;var G=new WeakMap,K=new WeakMap;return(b=function(_){return _?K:G})(V)}function A(V,G){if(!G&&V&&V.__esModule)return V;if(V===null||O(V)!=="object"&&typeof V!="function")return{default:V};var K=b(G);if(K&&K.has(V))return K.get(V);var H={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in V)if(te!=="default"&&Object.prototype.hasOwnProperty.call(V,te)){var J=_?Object.getOwnPropertyDescriptor(V,te):null;J&&(J.get||J.set)?Object.defineProperty(H,te,J):H[te]=V[te]}return H.default=V,K&&K.set(V,H),H}function U(V){var G=I();return function(){var H=(0,P.default)(V),_;if(G){var te=(0,P.default)(this).constructor;_=Reflect.construct(H,arguments,te)}else _=H.apply(this,arguments);return(0,T.default)(this,_)}}function I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $=e(23019),w=function(G){return function(K){var H;return H=function(_){(0,L.default)(J,_);var te=U(J);function J(k){var R;return(0,C.default)(this,J),R=te.call(this,k),R.handleDraggerMouseDown=function(m){var s=R.props.id,c=R.wrapper.current;R.props.onDragStart&&R.props.onDragStart(s,c,m)},R.wrapper=N.default.createRef(),R}return(0,E.default)(J,[{key:"render",value:function(){var R=this.props,m=R.isDraggingTempo,s=R.isDraggingMe,c=R.dragging,o=(0,M.default)(R,D),u=o.isTrueLocked,l={};s&&m&&(l={top:c.y,left:c.x,width:c.w});var f=$(G,"group-or-rule",s&&m?"qb-draggable":null,s&&!m?"qb-placeholder":null,u?"locked":null);return N.default.createElement("div",{className:f,style:l,ref:this.wrapper,"data-id":this.props.id},N.default.createElement(K,(0,g.default)({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:s,isDraggingTempo:m},o)))}}]),J}(N.PureComponent),H.propTypes={isDraggingTempo:S.default.bool,isDraggingMe:S.default.bool,onDragStart:S.default.func,dragging:S.default.object,isLocked:S.default.bool,isTrueLocked:S.default.bool},H}};i.default=w},65169:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(86067)),M=r(e(85091)),C=r(e(80467)),E=r(e(72366)),L=r(e(64920)),T=r(e(39005)),P=$(e(68404)),N=r(e(59160)),S=r(e(74937)),D=r(e(9988)),b=e(31506),A=e(63121),U=e(55805);function I(H){if(typeof WeakMap!="function")return null;var _=new WeakMap,te=new WeakMap;return(I=function(k){return k?te:_})(H)}function $(H,_){if(!_&&H&&H.__esModule)return H;if(H===null||O(H)!=="object"&&typeof H!="function")return{default:H};var te=I(_);if(te&&te.has(H))return te.get(H);var J={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in H)if(R!=="default"&&Object.prototype.hasOwnProperty.call(H,R)){var m=k?Object.getOwnPropertyDescriptor(H,R):null;m&&(m.get||m.set)?Object.defineProperty(J,R,m):J[R]=H[R]}return J.default=H,te&&te.set(H,J),J}function w(H){var _=V();return function(){var J=(0,T.default)(H),k;if(_){var R=(0,T.default)(this).constructor;k=Reflect.construct(J,arguments,R)}else k=J.apply(this,arguments);return(0,L.default)(this,k)}}function V(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var G=function(_){var te;return te=function(J){(0,E.default)(R,J);var k=w(R);function R(m){var s;return(0,g.default)(this,R),s=k.call(this,m),s._selectedConjunction=function(c){return c=c||s.props,c.conjunction||(0,U.defaultGroupConjunction)(c.config,c.field)},s.setConjunction=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setConjunction(s.props.path,c)},s.setNot=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setNot(s.props.path,c)},s.setLock=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;s.props.actions.setLock(s.props.path,c)},s.dummyFn=function(){},s.removeSelf=function(){s.props.actions.removeGroup(s.props.path)},s.addGroup=function(){s.props.actions.addGroup(s.props.path)},s.addCaseGroup=function(){s.props.actions.addCaseGroup(s.props.path)},s.addDefaultCaseGroup=function(){s.props.actions.addDefaultCaseGroup(s.props.path)},s.addRule=function(){s.props.actions.addRule(s.props.path)},s.setField=function(c){s.props.actions.setField(s.props.path,c)},s.setOperator=function(c){s.props.actions.setOperator(s.props.path,c)},s.setValue=function(c,o,u){s.props.actions.setValue(s.props.path,c,o,u)},(0,b.useOnPropsChanged)((0,C.default)(s)),s.selectedConjunction=s._selectedConjunction(m),s.conjunctionOptions=s._getConjunctionOptions(m),s.dummyFn.isDummyFn=!0,s}return(0,M.default)(R,[{key:"shouldComponentUpdate",value:function(s,c){var o=this.props,u=this.state,l=(0,b.pureShouldComponentUpdate)(this)(s,c);if(l&&u==c&&o!=s){var f=s.dragging.id||o.dragging.id,v=f==s.id,h=[];for(var a in s){var n=s[a]!=o[a];a=="dragging"&&!v&&(n=!1),n&&h.push(a)}h.length||(l=!1)}return l}},{key:"onPropsChanged",value:function(s){var c=s.config,o=s.id,u=s.conjunction,l=this.props.config,f=this.props.conjunction;(l!=c||f!=u)&&(this.selectedConjunction=this._selectedConjunction(s),this.conjunctionOptions=this._getConjunctionOptions(s))}},{key:"_getConjunctionOptions",value:function(s){var c=this;return(0,S.default)(s.config.conjunctions,function(o,u){return{id:"conjunction-".concat(s.id,"-").concat(u),name:"conjunction[".concat(s.id,"]"),key:u,label:o.label,checked:u===c._selectedConjunction(s)}})}},{key:"render",value:function(){var s=this.props.dragging.id==this.props.id,c=this.props.path.size,o=this.props.config.settings.maxNesting,u=!s&&this.props.isDraggingTempo,l=typeof o>"u"||c<o,f=c==1;return P.default.createElement("div",{className:"group-or-rule-container group-container","data-id":this.props.id},[s?P.default.createElement(_,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:f,allowFurtherNesting:l,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,P.default.createElement(_,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:s,isDraggingTempo:u,onDragStart:this.props.onDragStart,isRoot:f,allowFurtherNesting:l,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:u?this.dummyFn:this.setConjunction,setNot:u?this.dummyFn:this.setNot,setLock:u?this.dummyFn:this.setLock,removeSelf:u?this.dummyFn:this.removeSelf,addGroup:u?this.dummyFn:this.addGroup,addCaseGroup:u?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:u?this.dummyFn:this.addDefaultCaseGroup,addRule:u?this.dummyFn:this.addRule,setField:u?this.dummyFn:this.setField,setOperator:u?this.dummyFn:this.setOperator,setValue:u?this.dummyFn:this.setValue,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),R}(P.Component),te.propTypes={config:N.default.object.isRequired,actions:N.default.object.isRequired,path:N.default.any.isRequired,id:N.default.string.isRequired,groupId:N.default.string,not:N.default.bool,conjunction:N.default.string,children1:N.default.any,onDragStart:N.default.func,reordableNodesCnt:N.default.number,field:N.default.string,parentField:N.default.string,isLocked:N.default.bool,isTrueLocked:N.default.bool,dragging:N.default.object,isDraggingTempo:N.default.bool},te},K=function(_){var te=(0,A.connect)(function(J){return{dragging:J.dragging}},null,null,{context:D.default})(G(_));return te.displayName="ConnectedGroupContainer",te};i.default=K},36633:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(86067)),M=r(e(85091)),C=r(e(72366)),E=r(e(64920)),L=r(e(39005)),T=U(e(68404)),P=r(e(59160)),N=r(e(9988)),S=e(24256),D=e(31506),b=e(63121);function A(K){if(typeof WeakMap!="function")return null;var H=new WeakMap,_=new WeakMap;return(A=function(J){return J?_:H})(K)}function U(K,H){if(!H&&K&&K.__esModule)return K;if(K===null||O(K)!=="object"&&typeof K!="function")return{default:K};var _=A(H);if(_&&_.has(K))return _.get(K);var te={},J=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in K)if(k!=="default"&&Object.prototype.hasOwnProperty.call(K,k)){var R=J?Object.getOwnPropertyDescriptor(K,k):null;R&&(R.get||R.set)?Object.defineProperty(te,k,R):te[k]=K[k]}return te.default=K,_&&_.set(K,te),te}function I(K){var H=$();return function(){var te=(0,L.default)(K),J;if(H){var k=(0,L.default)(this).constructor;J=Reflect.construct(te,arguments,k)}else J=te.apply(this,arguments);return(0,E.default)(this,J)}}function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=e(23019),V=function(H){var _;return _=function(te){(0,C.default)(k,te);var J=I(k);function k(R){var m;return(0,g.default)(this,k),m=J.call(this,R),m.dummyFn=function(){},m.removeSelf=function(){m.props.actions.removeRule(m.props.path)},m.setLock=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;m.props.actions.setLock(m.props.path,s)},m.setField=function(s){m.props.actions.setField(m.props.path,s)},m.setOperator=function(s){m.props.actions.setOperator(m.props.path,s)},m.setOperatorOption=function(s,c){m.props.actions.setOperatorOption(m.props.path,s,c)},m.setValue=function(s,c,o,u,l){m.props.actions.setValue(m.props.path,s,c,o,u,l)},m.setValueSrc=function(s,c){m.props.actions.setValueSrc(m.props.path,s,c)},m.dummyFn.isDummyFn=!0,m}return(0,M.default)(k,[{key:"shouldComponentUpdate",value:function(m,s){var c=this.props,o=this.state,u=(0,D.pureShouldComponentUpdate)(this)(m,s);if(u&&o==s&&c!=m){var l=m.dragging.id||c.dragging.id,f=l==m.id,v=[];for(var h in m){var a=m[h]!=c[h];h=="dragging"&&!f&&(a=!1),a&&v.push(h)}v.length||(u=!1)}return u}},{key:"render",value:function(){var m=this.props.dragging.id==this.props.id,s=(0,S.getFieldConfig)(this.props.config,this.props.field),c=this.props.config.settings.showErrorMessage,o=s&&s.type=="!struct",u=!m&&this.props.isDraggingTempo,l=this.props.valueError,f=l&&l.toArray().filter(function(h){return!!h}).shift()||null,v=f!=null&&c;return T.default.createElement("div",{className:w("group-or-rule-container","rule-container",v?"rule-with-error":null),"data-id":this.props.id},[m?T.default.createElement(H,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,T.default.createElement(H,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:m,isDraggingTempo:u,onDragStart:this.props.onDragStart,setLock:u?this.dummyFn:this.setLock,removeSelf:u?this.dummyFn:this.removeSelf,setField:u?this.dummyFn:this.setField,setOperator:u?this.dummyFn:this.setOperator,setOperatorOption:u?this.dummyFn:this.setOperatorOption,setValue:u?this.dummyFn:this.setValue,setValueSrc:u?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),k}(T.Component),_.propTypes={id:P.default.string.isRequired,groupId:P.default.string,config:P.default.object.isRequired,path:P.default.any.isRequired,operator:P.default.string,field:P.default.string,actions:P.default.object.isRequired,onDragStart:P.default.func,value:P.default.any,valueSrc:P.default.any,asyncListValues:P.default.array,valueError:P.default.any,operatorOptions:P.default.object,reordableNodesCnt:P.default.number,parentField:P.default.string,isLocked:P.default.bool,isTrueLocked:P.default.bool,dragging:P.default.object,isDraggingTempo:P.default.bool},_},G=function(H){var _=(0,b.connect)(function(te){return{dragging:te.dragging}},null,null,{context:N.default})(V(H));return _.displayName="ConnectedRuleContainer",_};i.default=G},80127:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(68307)),M=r(e(90890)),C=r(e(86067)),E=r(e(85091)),L=r(e(80467)),T=r(e(72366)),P=r(e(64920)),N=r(e(39005)),S=H(e(68404)),D=e(63121),b=e(75403),A=e(1218),U=r(e(9988)),I=H(e(95421)),$=r(e(29521)),w=r(e(59160)),V=H(e(23182)),G=e(31506);function K(R){if(typeof WeakMap!="function")return null;var m=new WeakMap,s=new WeakMap;return(K=function(o){return o?s:m})(R)}function H(R,m){if(!m&&R&&R.__esModule)return R;if(R===null||O(R)!=="object"&&typeof R!="function")return{default:R};var s=K(m);if(s&&s.has(R))return s.get(R);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in R)if(u!=="default"&&Object.prototype.hasOwnProperty.call(R,u)){var l=o?Object.getOwnPropertyDescriptor(R,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=R[u]}return c.default=R,s&&s.set(R,c),c}function _(R){var m=te();return function(){var c=(0,N.default)(R),o;if(m){var u=(0,N.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,P.default)(this,o)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=function(m){var s,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return s=function(o){(0,T.default)(l,o);var u=_(l);function l(f){var v;return(0,C.default)(this,l),v=u.call(this,f),v._getEventTarget=function(h,a){return h&&h.__mocked_window||document.body||window},v.onDragStart=function(h,a,n){var y=a.closest(".query-builder");document.body.classList.add("qb-dragging"),y.classList.add("qb-dragging");var p=y.closest(".query-builder-container")||y;p=v._getScrollParent(p)||document.body;var F=p.scrollTop,B=v._getDraggableNodeEl(y),Z=v._getPlaceholderNodeEl(y),X=y.querySelectorAll(".group--children"),j=X.length?X[0]:null,z;j&&(z=window.getComputedStyle(j,null).getPropertyValue("padding-left"),z=parseInt(z));var x={id:h,x:a.offsetLeft,y:a.offsetTop,w:a.offsetWidth,h:a.offsetHeight,itemInfo:v.tree.items[h],paddingLeft:z},Y={id:h,x:a.offsetLeft,y:a.offsetTop,scrollTop:F,clientX:n.clientX,clientY:n.clientY,itemInfo:(0,$.default)(v.tree.items[h]),treeEl:y,treeElContainer:p},re={clientX:n.clientX,clientY:n.clientY},ne=v._getEventTarget(n,Y);v.eventTarget=ne,ne.addEventListener("mousemove",v.onDrag),ne.addEventListener("mouseup",v.onDragEnd),v.props.setDragStart(Y,x,re)},v.onDrag=function(h){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=Object.assign({},v.props.dragging),y=v.props.dragStart,p=n.paddingLeft,F=y.treeElContainer,B=F.scrollTop;if(n.itemInfo=v.tree.items[n.id],!!n.itemInfo){var Z={clientX:h.clientX,clientY:h.clientY},X={clientX:y.clientX,clientY:y.clientY};if(h.__mock_dom){var j=y.treeEl,z=v._getDraggableNodeEl(j),x=v._getPlaceholderNodeEl(j);h.__mock_dom({treeEl:j,dragEl:z,plhEl:x})}if(!y.plX){var Y=y.treeEl,re=v._getPlaceholderNodeEl(Y);re&&(y.plX=re.getBoundingClientRect().left+window.scrollX,y.plY=re.getBoundingClientRect().top+window.scrollY)}var ne=y.x,ae=y.y,ie=y.clientX,de=y.clientY,se=y.scrollTop,ge={x:ne+(h.clientX-ie),y:ae+(h.clientY-de)+(B-se)};n.x=ge.x,n.y=ge.y,n.paddingLeft=p,n.mousePos=Z,n.startMousePos=X,v.props.setDragProgress(Z,n);var ye=a?v.handleDrag(n,h,c):!1;ye||h.preventDefault&&h.preventDefault()}},v.onDragEnd=function(){var h=v.props.dragStart.treeEl;v.props.setDragEnd(),h.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),v._cacheEls={};var a=v.eventTarget||v._getEventTarget();a.removeEventListener("mousemove",v.onDrag),a.removeEventListener("mouseup",v.onDragEnd)},(0,G.useOnPropsChanged)((0,L.default)(v)),v.onPropsChanged(f),v}return(0,E.default)(l,[{key:"onPropsChanged",value:function(v){this.tree=(0,b.getFlatTree)(v.tree)}},{key:"shouldComponentUpdate",value:function(v,h){var a=this.props,n=this.state,y=(0,G.pureShouldComponentUpdate)(this)(v,h);if(y&&n==h&&a!=v){var p=[];for(var F in v){var B=v[F]!=a[F];B&&F!="dragging"&&F!="mousePos"&&p.push(F)}p.length||(y=!1)}return y}},{key:"componentDidUpdate",value:function(v,h){var a=this.props.dragging,n=this.props.dragStart;if(n&&n.id&&(a.itemInfo=this.tree.items[a.id],a.itemInfo&&(a.itemInfo.index!=n.itemInfo.index||a.itemInfo.parent!=n.itemInfo.parent))){var y=n.treeEl,p=n.treeElContainer,F=this._getPlaceholderNodeEl(y,!0);if(F){var B=F.getBoundingClientRect().left+window.scrollX,Z=F.getBoundingClientRect().top+window.scrollY,X=n.plX,j=n.plY,z=p.scrollTop;n.plX=B,n.plY=Z,n.itemInfo=(0,$.default)(a.itemInfo),n.y=F.offsetTop,n.x=F.offsetLeft,n.clientY+=Z-j,n.clientX+=B-X,p!=document.body&&(n.scrollTop=z),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(v,h){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(h==null)return null;this._cacheEls||(this._cacheEls={});var n=this._cacheEls[h];return n&&document.contains(n)&&!a||(n=v.querySelector('.group-or-rule-container[data-id="'+h+'"]'),this._cacheEls[h]=n),n}},{key:"_getDraggableNodeEl",value:function(v){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var a=this._cacheEls.draggable;if(a&&document.contains(a)&&!h)return a;var n=v.getElementsByClassName("qb-draggable");return a=n.length?n[0]:null,this._cacheEls.draggable=a,a}},{key:"_getPlaceholderNodeEl",value:function(v){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this._cacheEls||(this._cacheEls={});var a=this._cacheEls.placeholder;if(a&&document.contains(a)&&!h)return a;var n=v.getElementsByClassName("qb-placeholder");return a=n.length?n[0]:null,this._cacheEls.placeholder=a,a}},{key:"_isScrollable",value:function(v){var h=window.getComputedStyle(v)["overflow-y"];return(h==="scroll"||h==="auto")&&v.scrollHeight>v.offsetHeight}},{key:"_getScrollParent",value:function(v){return v==null?null:v===document.body||this._isScrollable(v)?v:this._getScrollParent(v.parentNode)}},{key:"handleDrag",value:function(v,h,a){var n=this,y=!0,p=v.itemInfo,F=v.paddingLeft,B=null,Z=this.props.dragStart.treeEl,X=v.id,j=this._getDraggableNodeEl(Z),z=this._getPlaceholderNodeEl(Z),x,Y,re,ne;if(j&&z){if(x=j.getBoundingClientRect(),Y=z.getBoundingClientRect(),!Y.width)return;var ae={hrz:0,vrt:0};x.top<Y.top?ae.vrt=-1:x.bottom>Y.bottom&&(ae.vrt=1),x.left>Y.left?ae.hrz=1:x.left<Y.left&&(ae.hrz=-1),ne=Z.getBoundingClientRect();var ie={x:ne.left+(ne.right-ne.left)/2,y:ae.vrt>=0?x.bottom:x.top},de;if(h.__mocked_hov_container)de=h.__mocked_hov_container;else{var se=document.elementFromPoint(ie.x,ie.y-1);if(de=se?se.closest(".group-or-rule-container"):null,!de&&se&&se.classList.contains("query-builder-container")){var ge,ye=se==null||(ge=se.firstChild)===null||ge===void 0?void 0:ge.firstChild;ye&&ye.classList.contains("group-or-rule-container")&&(de=ye)}}if(!de)A.logger.log("out of tree bounds!");else{var Ee=de.classList.contains("group-container"),Te=de.getAttribute("data-id"),he=de,Le=!1,Fe=!1;if(he){re=he.getBoundingClientRect();var We=re.bottom-re.top,Ue=this.tree.items[Te],He=null,ke=null,qe=null,ze=null;if(ae.vrt==0)qe=p,ke=z,ke&&(He=ke.getBoundingClientRect());else if(Ee){if(ae.vrt>0){var fe=de.getElementsByClassName("group--header"),Oe=fe.length?fe[0]:null;if(Oe){var Re=Oe.getBoundingClientRect(),Ae=Re.bottom-Re.top,be=x.bottom-Re.top>Ae*3/4;be&&Ue.top>v.itemInfo.top&&(qe=Ue,He=Re,ke=Oe,Fe=!0)}}else if(ae.vrt<0&&Ue.lev>=p.lev){var Ve=re.bottom-x.top>=2;Ve&&Ue.top<v.itemInfo.top&&(qe=Ue,He=re,ke=he,Le=!0)}if(!Fe&&!Le||y){var De=ae.vrt<0?re.bottom-x.top>We-5:x.bottom-re.top>We-5;De&&(!Fe&&!Le&&(qe=Ue,He=re,ke=he),y&&(ze=Ue))}}else{var $e=ae.vrt<0?re.bottom-x.top>We/2:x.bottom-re.top>We/2;$e&&(qe=Ue,He=re,ke=he)}var at=qe&&qe.id==X;if(He){var ut=x.left-ne.left,Qe=He.left-ne.left,ot=Qe/F,st=Math.max(0,Math.round(ut/F)),Je=[],dt=[];if(!at){if(Ee&&(Le?Je.push([I.PLACEMENT_APPEND,qe,qe.lev+1]):Fe&&Je.push([I.PLACEMENT_PREPEND,qe,qe.lev+1]),y&&ze)){var mt=ze.lev==0,yt=ze.type=="case_group"&&p.type!="case_group",ve=ze.prev&&this.tree.items[ze.prev].caseId,ce=ze.next&&this.tree.items[ze.next].caseId;p.caseId==ve&&(ve=null),p.caseId==ce&&(ce=null);var Pe=ve&&this.tree.items[ve],Me=ce&&this.tree.items[ce];ae.vrt>0?mt?dt.push([I.PLACEMENT_APPEND,ze,ze.lev+1]):yt&&Me?dt.push([I.PLACEMENT_PREPEND,Me,Me.lev+1]):dt.push([I.PLACEMENT_AFTER,ze,ze.lev]):ae.vrt<0&&(mt?dt.push([I.PLACEMENT_PREPEND,ze,ze.lev+1]):yt&&Pe?dt.push([I.PLACEMENT_APPEND,Pe,Pe.lev+1]):dt.push([I.PLACEMENT_BEFORE,ze,ze.lev]))}!Le&&!Fe&&(ae.vrt<0?Je.push([I.PLACEMENT_BEFORE,qe,qe.lev]):ae.vrt>0&&Je.push([I.PLACEMENT_AFTER,qe,qe.lev]))}var xe=function(Be){var Ge=Be[1],et=p.caseId?n.tree.items[p.caseId]:null,je=Ge.caseId?n.tree.items[Ge.caseId]:null;return[].concat((0,M.default)(Be),[et,je])};Je=Je.map(xe),dt=dt.map(xe),Je=Je.filter(function(Ze){var Be=Ze[0],Ge=Ze[1];if((Be==I.PLACEMENT_BEFORE||Be==I.PLACEMENT_AFTER)&&Ge.parent==null||Ge.collapsed&&(Be==I.PLACEMENT_APPEND||Be==I.PLACEMENT_PREPEND))return!1;var et=Ge.id==p.id;if(!et){for(var je=Ge;je.parent;)if(je=n.tree.items[je.parent],je.id==p.id){et=!0;break}}return!et}).map(function(Ze){var Be=Ze[0],Ge=Ze[1],et=Ze[2],je=Ze[3],vt=Ze[4],gt=null;return Be==I.PLACEMENT_APPEND||Be==I.PLACEMENT_PREPEND?gt=Ge:gt=n.tree.items[Ge.parent],gt&&gt.parent==null&&(gt=null),Ze[5]=gt,Ze});var Ke=null,Ie=Je.filter(function(Ze){return n.canMove(p,Ze[1],Ze[0],Ze[3],Ze[4],Ze[5],a)});y&&Ie.length==0&&dt.length>0&&(Ie=dt.filter(function(Ze){return n.canMove(p,Ze[1],Ze[0],Ze[3],Ze[4],Ze[5],a)}));var Ye=Ie.map(function(Ze){return Ze[2]}),nt=p.lev,tt=Ye.concat(nt),ft=null;tt.indexOf(st)!=-1?ft=st:st>Math.max.apply(Math,(0,M.default)(tt))?ft=Math.max.apply(Math,(0,M.default)(tt)):st<Math.min.apply(Math,(0,M.default)(tt))&&(ft=Math.min.apply(Math,(0,M.default)(tt))),Ke=Ie.find(function(Ze){return Ze[2]==ft}),!at&&!Ke&&Ie.length&&(Ke=Ie[0]),B=Ke}}}}return B?(this.move(p,B[1],B[0],B[3]),!0):!1}},{key:"canMove",value:function(v,h,a,n,y,p,F){if(!v||!h||v.id===h.id)return!1;var B=this.props.config.settings,Z=B.canRegroup,X=B.canRegroupCases,j=B.maxNesting,z=B.maxNumberOfRules,x=B.canLeaveEmptyCase,Y=p?p.lev+1:h.lev,re=a==I.PLACEMENT_BEFORE||a==I.PLACEMENT_AFTER,ne=a==I.PLACEMENT_PREPEND||a==I.PLACEMENT_APPEND,ae=re&&h.lev==1||ne&&h.lev==0,ie=v.parent!=h.parent,de=ne||ie,se=v.type=="case_group"&&!ae||v.parentType=="rule_group"||h.type=="rule_group"||h.parentType=="rule_group"||v.type!="case_group"&&h.type=="case_group"&&re||v.type!="case_group"&&h.type=="switch_group"||!X&&v.caseId!=h.caseId,ge=h.isLocked||v.isLocked||p&&p.isLocked;if(j&&Y>j||de&&(!Z||se||ge))return!1;if(v.type!="case_group"&&v.caseId!=h.caseId){var ye=n?n._height==2:!1,Ee=y?y.leafsCount+1:0;if(z&&Ee>z||ye&&!x)return!1}if(v.type=="case_group"&&(v.isDefaultCase||h.isDefaultCase||h.type=="switch_group"&&a==I.PLACEMENT_APPEND))return!1;var Te=!0;return F&&(Te=F(v.node.toJS(),h.node.toJS(),a,p?p.node.toJS():null)),Te}},{key:"move",value:function(v,h,a,n){this.props.actions.moveItem(v.path,h.path,a)}},{key:"render",value:function(){return S.default.createElement(m,(0,g.default)({},this.props,{onDragStart:this.onDragStart}))}}]),l}(S.Component),s.propTypes={tree:w.default.any.isRequired,actions:w.default.object.isRequired},s},k=function(m){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=(0,D.connect)(function(o){return{dragging:o.dragging,dragStart:o.dragStart,mousePos:o.mousePos}},{setDragStart:V.drag.setDragStart,setDragProgress:V.drag.setDragProgress,setDragEnd:V.drag.setDragEnd},null,{context:U.default})(J(m,s));return c.displayName="ConnectedSortableContainer",c};i.default=k},57760:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(92476)),g=r(e(86067)),M=r(e(85091)),C=r(e(80467)),E=r(e(36610)),L=r(e(72366)),T=r(e(64920)),P=r(e(39005)),N=r(e(68404)),S=r(e(59160)),D=r(e(65169)),b=r(e(39066)),A=e(31569),U=e(93849),I=e(31506),$=e(45798),w=r(e(63659)),V,G,K;function H(s,c){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);c&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),o.push.apply(o,u)}return o}function _(s){for(var c=1;c<arguments.length;c++){var o=arguments[c]!=null?arguments[c]:{};c%2?H(Object(o),!0).forEach(function(u){(0,O.default)(s,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):H(Object(o)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(o,u))})}return s}function te(s){var c=J();return function(){var u=(0,P.default)(s),l;if(c){var f=(0,P.default)(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return(0,T.default)(this,l)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=e(23019),R=(V=(0,b.default)("group case_group"),(0,D.default)(G=V(G=(0,$.ConfirmFn)(G=(K=function(s){(0,L.default)(o,s);var c=te(o);function o(u){var l;return(0,g.default)(this,o),l=c.call(this,u),l.childrenClassName=function(){return"case_group--children"},l.renderFooterWrapper=function(){return null},(0,I.useOnPropsChanged)((0,C.default)(l)),l.onPropsChanged(u),l}return(0,M.default)(o,[{key:"onPropsChanged",value:function(l){}},{key:"isDefaultCase",value:function(){return this.props.children1==null}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(l){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(l){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return this.isDefaultCase()?!1:(0,E.default)((0,P.default)(o.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return N.default.createElement("div",{key:"group-header",className:k("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:N.default.createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderValue())}},{key:"renderHeaderLeft",value:function(){if(this.isDefaultCase()){var l=this.props.config.settings.defaultCaseLabel;return l||""}return N.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:(0,E.default)((0,P.default)(o.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?this.renderValue():null}},{key:"canAddGroup",value:function(){return this.isDefaultCase()?!1:(0,E.default)((0,P.default)(o.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return this.isDefaultCase()?!1:(0,E.default)((0,P.default)(o.prototype),"canAddRule",this).call(this)}},{key:"renderValue",value:function(){var l=this.props,f=l.config,v=l.isLocked,h=l.value,a=l.setValue,n=l.id,y=f.settings.immutableValuesMode,p=N.default.createElement(w.default,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:h,valueSrc:"value",valueError:null,config:f,setValue:y?$.dummyFn:a,setValueSrc:$.dummyFn,readonly:y||v,id:n,groupId:null});return N.default.createElement($.Col,{className:"case_group--value"},p)}},{key:"renderActions",value:function(){var l=this.props,f=l.config,v=l.addGroup,h=l.addRule,a=l.isLocked,n=l.isTrueLocked,y=l.id;return N.default.createElement(U.GroupActions,{config:f,addGroup:v,addRule:h,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:a,isTrueLocked:n,id:y})}},{key:"isEmptyCurrentGroup",value:function(){var l=this.props.value,f=l&&l.size?l.get(0):null,v=f!=null&&(Array.isArray(f)?f.length>0:!0);return(0,E.default)((0,P.default)(o.prototype),"isEmptyCurrentGroup",this).call(this)&&!v}}]),o}(A.BasicGroup),K.propTypes=_(_({},A.BasicGroup.propTypes),{},{parentReordableNodesCnt:S.default.number,value:S.default.any,setValue:S.default.func}),K))||G)||G)||G),m=R;i.default=m},31569:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.BasicGroup=void 0;var g=r(e(68307)),M=r(e(92476)),C=r(e(86067)),E=r(e(85091)),L=r(e(80467)),T=r(e(72366)),P=r(e(64920)),N=r(e(39005)),S=G(e(68404)),D=r(e(59160)),b=r(e(94738)),A=r(e(65169)),U=r(e(39066)),I=e(96591),$=e(93849),w=e(45798);function V(s){if(typeof WeakMap!="function")return null;var c=new WeakMap,o=new WeakMap;return(V=function(l){return l?o:c})(s)}function G(s,c){if(!c&&s&&s.__esModule)return s;if(s===null||O(s)!=="object"&&typeof s!="function")return{default:s};var o=V(c);if(o&&o.has(s))return o.get(s);var u={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in s)if(f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)){var v=l?Object.getOwnPropertyDescriptor(s,f):null;v&&(v.get||v.set)?Object.defineProperty(u,f,v):u[f]=s[f]}return u.default=s,o&&o.set(s,u),u}function K(s,c){var o=Object.keys(s);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);c&&(u=u.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),o.push.apply(o,u)}return o}function H(s){for(var c=1;c<arguments.length;c++){var o=arguments[c]!=null?arguments[c]:{};c%2?K(Object(o),!0).forEach(function(u){(0,M.default)(s,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):K(Object(o)).forEach(function(u){Object.defineProperty(s,u,Object.getOwnPropertyDescriptor(o,u))})}return s}function _(s){var c=te();return function(){var u=(0,N.default)(s),l;if(c){var f=(0,N.default)(this).constructor;l=Reflect.construct(u,arguments,f)}else l=u.apply(this,arguments);return(0,P.default)(this,l)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=e(23019),k="topRight",R=function(s){(0,T.default)(o,s);var c=_(o);function o(u){var l;return(0,C.default)(this,o),l=c.call(this,u),l.childrenClassName=function(){return""},l.renderBeforeActions=function(){var f=l.props.config.settings.renderBeforeActions;return f==null?null:typeof f=="function"?S.default.createElement(f,l.props):f},l.renderAfterActions=function(){var f=l.props.config.settings.renderAfterActions;return f==null?null:typeof f=="function"?S.default.createElement(f,l.props):f},l.removeSelf=l.removeSelf.bind((0,L.default)(l)),l.setLock=l.setLock.bind((0,L.default)(l)),l.renderItem=l.renderItem.bind((0,L.default)(l)),l}return(0,E.default)(o,[{key:"isGroupTopPosition",value:function(){return(0,b.default)(this.props.config.settings.groupActionsPosition||k,"top")}},{key:"setLock",value:function(l){this.props.setLock(l)}},{key:"removeSelf",value:function(){var l=this,f=this.props.confirmFn,v=this.props.config.settings,h=v.renderConfirm,a=v.removeGroupConfirmOptions,n=function(){l.props.removeSelf()};a&&!this.isEmptyCurrentGroup()?h(H(H({},a),{},{onOk:n,onCancel:null,confirmFn:f})):n()}},{key:"isEmptyCurrentGroup",value:function(){var l=this.props.children1;return!l||l.size==0||l.size==1&&this.isEmpty(l.first())}},{key:"isEmpty",value:function(l){var f=l.get("type")=="group"||l.get("type")=="rule_group";return f?this.isEmptyGroup(l):this.isEmptyRule(l)}},{key:"isEmptyGroup",value:function(l){var f=l.get("children1");return!f||f.size==0||f.size==1&&this.isEmpty(f.first())}},{key:"isEmptyRule",value:function(l){var f=l.get("properties");return!(f.get("field")!==null&&f.get("operator")!==null&&f.get("value").filter(function(v){return v!==void 0}).size>0)}},{key:"render",value:function(){return S.default.createElement(S.default.Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}},{key:"showNot",value:function(){var l=this.props.config;return l.settings.showNot}},{key:"showConjs",value:function(){var l=this.props,f=l.conjunctionOptions,v=l.children1,h=l.config,a=Object.keys(f).length;return a>1||this.showNot()}},{key:"isOneChild",value:function(){var l=this.props.children1;return l?l.size<2:!0}},{key:"renderChildrenWrapper",value:function(){var l=this.props.children1;return l&&S.default.createElement("div",{key:"group-children",className:J("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var l=this.isGroupTopPosition();return S.default.createElement("div",{key:"group-header",className:J("group--header",this.isOneChild()?"one--child":"")},this.renderHeader(),l&&this.renderBeforeActions(),l&&this.renderActions(),l&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){var l=this.isGroupTopPosition();return!l&&S.default.createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var l=this.props,f=l.config,v=l.addRule,h=l.addGroup,a=l.isLocked,n=l.isTrueLocked,y=l.id;return S.default.createElement($.GroupActions,{config:f,addRule:v,addGroup:h,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:a,isTrueLocked:n,id:y})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var l=this.props.config.settings.maxNumberOfRules,f=this.props.totalRulesCnt;return l?f<l:!0}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var l=this.props.children1;return l?l.map(this.renderItem).toList():null}},{key:"renderItem",value:function(l){var f=this.props,v=f.config,h=f.actions,a=f.onDragStart,n=f.isLocked,y=l.get("type")=="group"&&l.getIn(["properties","field"])!=null,p=y?"rule_group":l.get("type");return S.default.createElement(I.Item,(0,g.default)({},this.extraPropsForItem(l),{key:l.get("id"),id:l.get("id"),groupId:f.id,path:l.get("path"),type:p,properties:l.get("properties"),config:v,actions:h,children1:l.get("children1"),reordableNodesCnt:this.reordableNodesCntForItem(l),totalRulesCnt:this.totalRulesCntForItem(l),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:a,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:n}))}},{key:"extraPropsForItem",value:function(l){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(l){return this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(l){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var l=this.props,f=l.config,v=l.isRoot,h=l.isLocked,a=this.reordableNodesCnt();return f.settings.canReorder&&!v&&a>1&&!h}},{key:"renderDrag",value:function(){var l=this.props.handleDraggerMouseDown,f=this.showDragIcon()&&S.default.createElement("span",{key:"group-drag-icon",className:"qb-drag-handler group--drag-handler",onMouseDown:l},S.default.createElement(w.DragIcon,null)," ");return f}},{key:"conjunctionOptions",value:function(){var l=this.props.conjunctionOptions;return l}},{key:"renderConjs",value:function(){var l=this.props,f=l.config,v=l.children1,h=l.id,a=l.selectedConjunction,n=l.setConjunction,y=l.not,p=l.setNot,F=l.isLocked,B=f.settings,Z=B.immutableGroupsMode,X=B.renderConjs,j=B.showNot,z=B.notLabel,x=this.conjunctionOptions();if(!this.showConjs()||!v||!v.size)return null;var Y={disabled:this.isOneChild(),readonly:Z||F,selectedConjunction:a,setConjunction:Z?w.dummyFn:n,conjunctionOptions:x,config:f,not:y||!1,id:h,setNot:Z?w.dummyFn:p,notLabel:z,showNot:this.showNot(),isLocked:F};return S.default.createElement(X,Y)}},{key:"renderHeader",value:function(){return S.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}}]),o}(S.PureComponent);i.BasicGroup=R,R.propTypes={reordableNodesCnt:D.default.number,conjunctionOptions:D.default.object.isRequired,allowFurtherNesting:D.default.bool.isRequired,isRoot:D.default.bool.isRequired,not:D.default.bool,selectedConjunction:D.default.string,config:D.default.object.isRequired,id:D.default.string.isRequired,groupId:D.default.string,path:D.default.any,children1:D.default.any,isDraggingMe:D.default.bool,isDraggingTempo:D.default.bool,isLocked:D.default.bool,isTrueLocked:D.default.bool,handleDraggerMouseDown:D.default.func,onDragStart:D.default.func,addRule:D.default.func.isRequired,addGroup:D.default.func.isRequired,removeSelf:D.default.func.isRequired,setConjunction:D.default.func.isRequired,setNot:D.default.func.isRequired,setLock:D.default.func.isRequired,actions:D.default.object.isRequired};var m=(0,A.default)((0,U.default)("group")((0,w.ConfirmFn)(R)));i.default=m},93849:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.GroupActions=void 0;var g=r(e(86067)),M=r(e(85091)),C=r(e(72366)),E=r(e(64920)),L=r(e(39005)),T=N(e(68404));function P(I){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(P=function(G){return G?w:$})(I)}function N(I,$){if(!$&&I&&I.__esModule)return I;if(I===null||O(I)!=="object"&&typeof I!="function")return{default:I};var w=P($);if(w&&w.has(I))return w.get(I);var V={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in I)if(K!=="default"&&Object.prototype.hasOwnProperty.call(I,K)){var H=G?Object.getOwnPropertyDescriptor(I,K):null;H&&(H.get||H.set)?Object.defineProperty(V,K,H):V[K]=I[K]}return V.default=I,w&&w.set(I,V),V}function S(I){var $=D();return function(){var V=(0,L.default)(I),G;if($){var K=(0,L.default)(this).constructor;G=Reflect.construct(V,arguments,K)}else G=V.apply(this,arguments);return(0,E.default)(this,G)}}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},A="topRight",U=function(I){(0,C.default)(w,I);var $=S(w);function w(){return(0,g.default)(this,w),$.apply(this,arguments)}return(0,M.default)(w,[{key:"render",value:function(){var G=this.props,K=G.config,H=G.addRule,_=G.addGroup,te=G.removeSelf,J=G.setLock,k=G.isLocked,R=G.isTrueLocked,m=G.id,s=G.canAddGroup,c=G.canAddRule,o=G.canDeleteGroup,u=K.settings,l=u.immutableGroupsMode,f=u.addRuleLabel,v=u.addGroupLabel,h=u.delGroupLabel,a=u.groupActionsPosition,n=u.renderButton,y=u.renderSwitch,p=u.renderButtonGroup,F=u.lockLabel,B=u.lockedLabel,Z=u.showLock,X=u.canDeleteLocked,j=b[a||A],z=Z&&!(k&&!R)&&T.default.createElement(y,{type:"lock",id:m,value:k,setValue:J,label:F,checkedLabel:B,config:K}),x=!l&&c&&!k&&T.default.createElement(n,{type:"addRule",onClick:H,label:f,readonly:k,config:K}),Y=!l&&s&&!k&&T.default.createElement(n,{type:"addGroup",onClick:_,label:v,readonly:k,config:K}),re=!l&&o&&(!k||k&&X)&&T.default.createElement(n,{type:"delGroup",onClick:te,label:h,config:K});return T.default.createElement("div",{className:"group--actions ".concat(j)},T.default.createElement(p,{config:K},z,x,Y,re))}}]),w}(T.PureComponent);i.GroupActions=U},96591:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.Item=void 0;var g=r(e(19934)),M=r(e(86067)),C=r(e(85091)),E=r(e(72366)),L=r(e(64920)),T=r(e(39005)),P=r(e(68307)),N=r(e(92476)),S=K(e(68404)),D=r(e(59160)),b=r(e(75836)),A=r(e(31569)),U=r(e(6195)),I=r(e(76993)),$=r(e(8362)),w=r(e(57760)),V=["type"];function G(c){if(typeof WeakMap!="function")return null;var o=new WeakMap,u=new WeakMap;return(G=function(f){return f?u:o})(c)}function K(c,o){if(!o&&c&&c.__esModule)return c;if(c===null||O(c)!=="object"&&typeof c!="function")return{default:c};var u=G(o);if(u&&u.has(c))return u.get(c);var l={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in c)if(v!=="default"&&Object.prototype.hasOwnProperty.call(c,v)){var h=f?Object.getOwnPropertyDescriptor(c,v):null;h&&(h.get||h.set)?Object.defineProperty(l,v,h):l[v]=c[v]}return l.default=c,u&&u.set(c,l),l}function H(c){var o=_();return function(){var l=(0,T.default)(c),f;if(o){var v=(0,T.default)(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return(0,L.default)(this,f)}}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function te(c,o){var u=Object.keys(c);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(c);o&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(c,f).enumerable})),u.push.apply(u,l)}return u}function J(c){for(var o=1;o<arguments.length;o++){var u=arguments[o]!=null?arguments[o]:{};o%2?te(Object(u),!0).forEach(function(l){(0,N.default)(c,l,u[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(u)):te(Object(u)).forEach(function(l){Object.defineProperty(c,l,Object.getOwnPropertyDescriptor(u,l))})}return c}var k=["rule","group","rule_group","switch_group","case_group"],R=function(o){var u=o.properties.toObject(),l=J({},u);return o.isParentLocked&&(l.isLocked=!0),u.isLocked&&(l.isTrueLocked=!0),l},m={rule:function(o){return S.default.createElement(b.default,(0,P.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,config:o.config,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},group:function(o){return S.default.createElement(A.default,(0,P.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))},rule_group:function(o){return S.default.createElement(U.default,(0,P.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},rule_group_ext:function(o){return S.default.createElement(I.default,(0,P.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:o.parentField,parentReordableNodesCnt:o.parentReordableNodesCnt}))},switch_group:function(o){return S.default.createElement($.default,(0,P.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))},case_group:function(o){return S.default.createElement(w.default,(0,P.default)({},R(o),{id:o.id,groupId:o.groupId,path:o.path,actions:o.actions,config:o.config,reordableNodesCnt:o.reordableNodesCnt,totalRulesCnt:o.totalRulesCnt,onDragStart:o.onDragStart,isDraggingTempo:o.isDraggingTempo,children1:o.children1,parentField:null,parentReordableNodesCnt:o.parentReordableNodesCnt}))}},s=function(c){(0,E.default)(u,c);var o=H(u);function u(){return(0,M.default)(this,u),o.apply(this,arguments)}return(0,C.default)(u,[{key:"render",value:function(){var f=this.props,v=f.type,h=(0,g.default)(f,V),a=h.properties.get("mode"),n=a=="array"?"_ext":"",y=h.config.settings.renderItem,p=m[v+n];return y?y(J(J({},h),{},{type:v,itemComponent:p})):p?p(h):null}}]),u}(S.PureComponent);i.Item=s,s.propTypes={config:D.default.object.isRequired,id:D.default.string.isRequired,groupId:D.default.string,type:D.default.oneOf(k).isRequired,path:D.default.any.isRequired,properties:D.default.any.isRequired,children1:D.default.any,actions:D.default.object.isRequired,reordableNodesCnt:D.default.number,onDragStart:D.default.func,parentField:D.default.string,isDraggingTempo:D.default.bool,isParentLocked:D.default.bool}},75836:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(92476)),M=r(e(86067)),C=r(e(85091)),E=r(e(80467)),L=r(e(72366)),T=r(e(64920)),P=r(e(39005)),N=k(e(68404)),S=r(e(59160)),D=r(e(36633)),b=r(e(39066)),A=r(e(97258)),U=r(e(47332)),I=r(e(63659)),$=r(e(69002)),w=e(24256),V=e(41895),G=e(31506),K=e(45798),H,_,te;function J(f){if(typeof WeakMap!="function")return null;var v=new WeakMap,h=new WeakMap;return(J=function(n){return n?h:v})(f)}function k(f,v){if(!v&&f&&f.__esModule)return f;if(f===null||O(f)!=="object"&&typeof f!="function")return{default:f};var h=J(v);if(h&&h.has(f))return h.get(f);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in f)if(y!=="default"&&Object.prototype.hasOwnProperty.call(f,y)){var p=n?Object.getOwnPropertyDescriptor(f,y):null;p&&(p.get||p.set)?Object.defineProperty(a,y,p):a[y]=f[y]}return a.default=f,h&&h.set(f,a),a}function R(f,v){var h=Object.keys(f);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(f);v&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(f,n).enumerable})),h.push.apply(h,a)}return h}function m(f){for(var v=1;v<arguments.length;v++){var h=arguments[v]!=null?arguments[v]:{};v%2?R(Object(h),!0).forEach(function(a){(0,g.default)(f,a,h[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(h)):R(Object(h)).forEach(function(a){Object.defineProperty(f,a,Object.getOwnPropertyDescriptor(h,a))})}return f}function s(f){var v=c();return function(){var a=(0,P.default)(f),n;if(v){var y=(0,P.default)(this).constructor;n=Reflect.construct(a,arguments,y)}else n=a.apply(this,arguments);return(0,T.default)(this,n)}}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var o=e(23019),u=(H=(0,b.default)("rule"),(0,D.default)(_=H(_=(0,K.ConfirmFn)(_=(te=function(f){(0,L.default)(h,f);var v=s(h);function h(a){var n;return(0,M.default)(this,h),n=v.call(this,a),(0,G.useOnPropsChanged)((0,E.default)(n)),n.removeSelf=n.removeSelf.bind((0,E.default)(n)),n.setLock=n.setLock.bind((0,E.default)(n)),n.onPropsChanged(a),n}return(0,C.default)(h,[{key:"onPropsChanged",value:function(n){var y=this.props,p=["selectedField","selectedOperator","config","reordableNodesCnt","isLocked"],F=!this.meta||p.map(function(B){return n[B]!==y[B]}).filter(function(B){return B}).length>0;F&&(this.meta=this.getMeta(n))}},{key:"getMeta",value:function(n){var y=n.selectedField,p=n.selectedOperator,F=n.config,B=n.reordableNodesCnt,Z=n.isLocked,X=(0,V.getFieldPathLabels)(y,F),j=(0,w.getFieldConfig)(F,y),z=j&&j.type=="!struct",x=y&&p&&!z,Y=(0,w.getOperatorConfig)(F,p,y),re=Y&&Y.options!=null,ne=(0,w.getFieldWidgetConfig)(F,y,p)||{},ae=ne.hideOperator,ie=F.settings.canReorder&&B>1&&!Z,de=y&&!ae,se=y&&ae&&ne.operatorInlineLabel,ge=x,ye=x&&re;return{selectedFieldPartsLabels:X,selectedFieldWidgetConfig:ne,showDragIcon:ie,showOperator:de,showOperatorLabel:se,showWidget:ge,showOperatorOptions:ye}}},{key:"setLock",value:function(n){this.props.setLock(n)}},{key:"removeSelf",value:function(){var n=this,y=this.props.confirmFn,p=this.props.config.settings,F=p.renderConfirm,B=p.removeRuleConfirmOptions,Z=function(){n.props.removeSelf()};B&&!this.isEmptyCurrentRule()?F(m(m({},B),{},{onOk:Z,onCancel:null,confirmFn:y})):Z()}},{key:"isEmptyCurrentRule",value:function(){return!(this.props.selectedField!==null&&this.props.selectedOperator!==null&&this.props.value.filter(function(n){return n!==void 0}).size>0)}},{key:"renderField",value:function(){var n=this.props,y=n.config,p=n.isLocked,F=y.settings.immutableFieldsMode;return N.default.createElement(U.default,{key:"field",classname:"rule--field",config:y,selectedField:this.props.selectedField,setField:F?K.dummyFn:this.props.setField,parentField:this.props.parentField,readonly:F||p,id:this.props.id,groupId:this.props.groupId})}},{key:"renderOperator",value:function(){var n=this.props,y=n.config,p=n.isLocked,F=this.meta,B=F.selectedFieldPartsLabels,Z=F.selectedFieldWidgetConfig,X=F.showOperator,j=F.showOperatorLabel,z=y.settings.immutableOpsMode;return N.default.createElement(A.default,{key:"operator",config:y,selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,setOperator:z?K.dummyFn:this.props.setOperator,selectedFieldPartsLabels:B,showOperator:X,showOperatorLabel:j,selectedFieldWidgetConfig:Z,readonly:z||p,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var n=this.props,y=n.config,p=n.valueError,F=n.isLocked,B=this.meta.showWidget,Z=y.settings.immutableValuesMode;if(!B)return null;var X=N.default.createElement(I.default,{key:"values",field:this.props.selectedField,parentField:this.props.parentField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:this.props.valueSrc,asyncListValues:this.props.asyncListValues,valueError:p,config:y,setValue:Z?K.dummyFn:this.props.setValue,setValueSrc:Z?K.dummyFn:this.props.setValueSrc,readonly:Z||F,id:this.props.id,groupId:this.props.groupId});return N.default.createElement(K.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},X)}},{key:"renderOperatorOptions",value:function(){var n=this.props.config,y=this.meta.showOperatorOptions,p=n.settings,F=p.immutableOpsMode,B=p.immutableValuesMode;if(!y)return null;var Z=N.default.createElement($.default,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:F?K.dummyFn:this.props.setOperatorOption,config:n,readonly:B});return N.default.createElement(K.Col,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},Z)}},{key:"renderBeforeWidget",value:function(){var n=this.props.config,y=n.settings.renderBeforeWidget;return y&&N.default.createElement(K.Col,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},typeof y=="function"?y(this.props):y)}},{key:"renderAfterWidget",value:function(){var n=this.props.config,y=n.settings.renderAfterWidget;return y&&N.default.createElement(K.Col,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},typeof y=="function"?y(this.props):y)}},{key:"renderError",value:function(){var n=this.props,y=n.config,p=n.valueError,F=y.settings,B=F.renderRuleError,Z=F.showErrorMessage,X=p&&p.toArray().filter(function(j){return!!j}).shift()||null;return Z&&X&&N.default.createElement("div",{className:"rule--error"},B?B({error:X}):X)}},{key:"renderDrag",value:function(){var n=this.meta.showDragIcon;return n&&N.default.createElement("span",{key:"rule-drag-icon",className:"qb-drag-handler rule--drag-handler",onMouseDown:this.props.handleDraggerMouseDown},N.default.createElement(K.DragIcon,null)," ")}},{key:"renderDel",value:function(){var n=this.props,y=n.config,p=n.isLocked,F=y.settings,B=F.deleteLabel,Z=F.immutableGroupsMode,X=F.renderButton,j=F.canDeleteLocked;return!Z&&(!p||p&&j)&&N.default.createElement(X,{type:"delRule",onClick:this.removeSelf,label:B,config:y})}},{key:"renderLock",value:function(){var n=this.props,y=n.config,p=n.isLocked,F=n.isTrueLocked,B=n.id,Z=y.settings,X=Z.lockLabel,j=Z.lockedLabel,z=Z.showLock,x=Z.renderSwitch;return z&&!(p&&!F)&&N.default.createElement(x,{type:"lock",id:B,value:p,setValue:this.setLock,label:X,checkedLabel:j,hideLabel:!0,config:y})}},{key:"render",value:function(){var n=this.meta,y=n.showOperatorOptions,p=n.selectedFieldWidgetConfig,F=this.props,B=F.valueSrc,Z=F.value,X=F.config,j=B.first()=="value"&&!y&&Z.size==1&&p.fullWidth,z=X.settings.renderButtonGroup,x=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],Y=N.default.createElement("div",{key:"rule-body",className:o("rule--body",j&&"can--shrink--value")},x),re=this.renderError(),ne=this.renderDrag(),ae=this.renderLock(),ie=this.renderDel();return N.default.createElement(N.default.Fragment,null,ne,N.default.createElement("div",{className:"rule--body--wrapper"},Y,re),N.default.createElement("div",{className:"rule--header"},N.default.createElement(z,{config:X},ae,ie)))}}]),h}(N.PureComponent),te.propTypes={id:S.default.string.isRequired,groupId:S.default.string,selectedField:S.default.string,selectedOperator:S.default.string,operatorOptions:S.default.object,config:S.default.object.isRequired,value:S.default.any,valueSrc:S.default.any,asyncListValues:S.default.array,isDraggingMe:S.default.bool,isDraggingTempo:S.default.bool,parentField:S.default.string,valueError:S.default.any,isLocked:S.default.bool,isTrueLocked:S.default.bool,handleDraggerMouseDown:S.default.func,setField:S.default.func,setOperator:S.default.func,setOperatorOption:S.default.func,setLock:S.default.func,removeSelf:S.default.func,setValue:S.default.func,setValueSrc:S.default.func,reordableNodesCnt:S.default.number},te))||_)||_)||_),l=u;i.default=l},6195:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(92476)),g=r(e(86067)),M=r(e(85091)),C=r(e(80467)),E=r(e(36610)),L=r(e(72366)),T=r(e(64920)),P=r(e(39005)),N=r(e(68404)),S=r(e(59160)),D=r(e(65169)),b=r(e(39066)),A=e(31569),U=e(30024),I=r(e(47332)),$=e(31506),w=e(45798),V,G,K;function H(m,s){var c=Object.keys(m);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(m);s&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(m,u).enumerable})),c.push.apply(c,o)}return c}function _(m){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?H(Object(c),!0).forEach(function(o){(0,O.default)(m,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(c)):H(Object(c)).forEach(function(o){Object.defineProperty(m,o,Object.getOwnPropertyDescriptor(c,o))})}return m}function te(m){var s=J();return function(){var o=(0,P.default)(m),u;if(s){var l=(0,P.default)(this).constructor;u=Reflect.construct(o,arguments,l)}else u=o.apply(this,arguments);return(0,T.default)(this,u)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=(V=(0,b.default)("group rule_group"),(0,D.default)(G=V(G=(0,w.ConfirmFn)(G=(K=function(m){(0,L.default)(c,m);var s=te(c);function c(o){var u;return(0,g.default)(this,c),u=s.call(this,o),u.childrenClassName=function(){return"rule_group--children"},u.renderHeaderWrapper=function(){return null},u.renderFooterWrapper=function(){return null},u.renderConjs=function(){return null},u.canAddGroup=function(){return!1},u.canAddRule=function(){return!0},u.canDeleteGroup=function(){return!1},(0,$.useOnPropsChanged)((0,C.default)(u)),u.onPropsChanged(o),u}return(0,M.default)(c,[{key:"onPropsChanged",value:function(u){}},{key:"reordableNodesCntForItem",value:function(u){if(this.props.isLocked)return 0;var l=this.props.children1;return l.size}},{key:"renderChildrenWrapper",value:function(){return N.default.createElement(N.default.Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),(0,E.default)((0,P.default)(c.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var u=this.props,l=u.config,f=u.selectedField,v=u.setField,h=u.parentField,a=u.id,n=u.groupId,y=u.isLocked,p=l.settings.immutableFieldsMode;return N.default.createElement(I.default,{key:"field",classname:"group--field",config:l,selectedField:f,setField:v,parentField:h,readonly:p||y,id:a,groupId:n})}},{key:"renderActions",value:function(){var u=this.props,l=u.config,f=u.addRule,v=u.isLocked,h=u.isTrueLocked,a=u.id;return N.default.createElement(U.RuleGroupActions,{config:l,addRule:f,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:v,isTrueLocked:h,id:a})}},{key:"extraPropsForItem",value:function(u){return{parentField:this.props.selectedField}}}]),c}(A.BasicGroup),K.propTypes=_(_({},A.BasicGroup.propTypes),{},{selectedField:S.default.string,parentField:S.default.string,setField:S.default.func}),K))||G)||G)||G),R=k;i.default=R},30024:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.RuleGroupActions=void 0;var g=r(e(86067)),M=r(e(85091)),C=r(e(72366)),E=r(e(64920)),L=r(e(39005)),T=N(e(68404));function P(A){if(typeof WeakMap!="function")return null;var U=new WeakMap,I=new WeakMap;return(P=function(w){return w?I:U})(A)}function N(A,U){if(!U&&A&&A.__esModule)return A;if(A===null||O(A)!=="object"&&typeof A!="function")return{default:A};var I=P(U);if(I&&I.has(A))return I.get(A);var $={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in A)if(V!=="default"&&Object.prototype.hasOwnProperty.call(A,V)){var G=w?Object.getOwnPropertyDescriptor(A,V):null;G&&(G.get||G.set)?Object.defineProperty($,V,G):$[V]=A[V]}return $.default=A,I&&I.set(A,$),$}function S(A){var U=D();return function(){var $=(0,L.default)(A),w;if(U){var V=(0,L.default)(this).constructor;w=Reflect.construct($,arguments,V)}else w=$.apply(this,arguments);return(0,E.default)(this,w)}}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b=function(A){(0,C.default)(I,A);var U=S(I);function I(){return(0,g.default)(this,I),U.apply(this,arguments)}return(0,M.default)(I,[{key:"render",value:function(){var w=this.props,V=w.config,G=w.addRule,K=w.canAddRule,H=w.canDeleteGroup,_=w.removeSelf,te=w.setLock,J=w.isLocked,k=w.isTrueLocked,R=w.id,m=V.settings,s=m.immutableGroupsMode,c=m.addRuleLabel,o=m.delGroupLabel,u=m.renderButton,l=m.renderSwitch,f=m.renderButtonGroup,v=m.lockLabel,h=m.lockedLabel,a=m.showLock,n=m.canDeleteLocked,y=a&&!(J&&!k)&&T.default.createElement(l,{type:"lock",id:R,value:J,setValue:te,label:v,checkedLabel:h,hideLabel:!0,config:V}),p=!s&&K&&!J&&T.default.createElement(u,{type:"addRuleGroup",onClick:G,label:c,readonly:J,config:V}),F=!s&&H&&(!J||J&&n)&&T.default.createElement(u,{type:"delRuleGroup",onClick:_,label:o,config:V});return T.default.createElement("div",{className:"group--actions"},T.default.createElement(f,{config:V},y,p,F))}}]),I}(T.PureComponent);i.RuleGroupActions=b},76993:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(92476)),g=r(e(86067)),M=r(e(85091)),C=r(e(80467)),E=r(e(36610)),L=r(e(72366)),T=r(e(64920)),P=r(e(39005)),N=r(e(68404)),S=r(e(59160)),D=r(e(65169)),b=r(e(39066)),A=e(31569),U=e(54590),I=r(e(47332)),$=r(e(97258)),w=e(31506),V=e(45798),G=e(24256),K=r(e(63659)),H,_,te;function J(v,h){var a=Object.keys(v);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(v);h&&(n=n.filter(function(y){return Object.getOwnPropertyDescriptor(v,y).enumerable})),a.push.apply(a,n)}return a}function k(v){for(var h=1;h<arguments.length;h++){var a=arguments[h]!=null?arguments[h]:{};h%2?J(Object(a),!0).forEach(function(n){(0,O.default)(v,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach(function(n){Object.defineProperty(v,n,Object.getOwnPropertyDescriptor(a,n))})}return v}function R(v,h){var a=typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(!a){if(Array.isArray(v)||(a=m(v))||h&&v&&typeof v.length=="number"){a&&(v=a);var n=0,y=function(){};return{s:y,n:function(){return n>=v.length?{done:!0}:{done:!1,value:v[n++]}},e:function(X){throw X},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=!0,F=!1,B;return{s:function(){a=a.call(v)},n:function(){var X=a.next();return p=X.done,X},e:function(X){F=!0,B=X},f:function(){try{!p&&a.return!=null&&a.return()}finally{if(F)throw B}}}}function m(v,h){if(v){if(typeof v=="string")return s(v,h);var a=Object.prototype.toString.call(v).slice(8,-1);if(a==="Object"&&v.constructor&&(a=v.constructor.name),a==="Map"||a==="Set")return Array.from(v);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(v,h)}}function s(v,h){(h==null||h>v.length)&&(h=v.length);for(var a=0,n=new Array(h);a<h;a++)n[a]=v[a];return n}function c(v){var h=o();return function(){var n=(0,P.default)(v),y;if(h){var p=(0,P.default)(this).constructor;y=Reflect.construct(n,arguments,p)}else y=n.apply(this,arguments);return(0,T.default)(this,y)}}function o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var u=e(23019),l=(H=(0,b.default)("group rule_group_ext"),(0,D.default)(_=H(_=(0,V.ConfirmFn)(_=(te=function(v){(0,L.default)(a,v);var h=c(a);function a(n){var y;return(0,g.default)(this,a),y=h.call(this,n),y.childrenClassName=function(){return"rule_group_ext--children"},y.renderFooterWrapper=function(){return null},y.canAddGroup=function(){return!1},y.canAddRule=function(){return!0},y.canDeleteGroup=function(){return!0},(0,w.useOnPropsChanged)((0,C.default)(y)),y.onPropsChanged(n),y}return(0,M.default)(a,[{key:"onPropsChanged",value:function(y){}},{key:"renderHeaderWrapper",value:function(){return N.default.createElement("div",{key:"group-header",className:u("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return N.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return N.default.createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget())}},{key:"showNot",value:function(){var y=this.props,p=y.config,F=y.selectedField,B=y.selectedOperator,Z=(0,G.getFieldConfig)(p,F)||{};return Z.showNot!=null?Z.showNot:p.settings.showNot}},{key:"conjunctionOptions",value:function(){var y=this.props,p=y.config,F=y.selectedField,B=y.selectedOperator,Z=(0,G.getFieldConfig)(p,F)||{},X=(0,E.default)((0,P.default)(a.prototype),"conjunctionOptions",this).call(this);if(Z.conjunctions){var j={},z=R(Z.conjunctions),x;try{for(z.s();!(x=z.n()).done;){var Y=x.value;j[Y]=X[Y]}}catch(re){z.e(re)}finally{z.f()}X=j}return X}},{key:"renderField",value:function(){var y=this.props,p=y.config,F=y.selectedField,B=y.setField,Z=y.parentField,X=y.id,j=y.groupId,z=y.isLocked,x=p.settings.immutableFieldsMode;return N.default.createElement(I.default,{key:"field",classname:"rule--field",config:p,selectedField:F,setField:B,parentField:Z,readonly:x||z,id:X,groupId:j})}},{key:"renderOperator",value:function(){var y=this.props,p=y.config,F=y.selectedField,B=y.selectedOperator,Z=y.setField,X=y.setOperator,j=y.isLocked,z=p.settings.immutableFieldsMode,x=(0,G.getFieldWidgetConfig)(p,F,B)||{},Y=x.hideOperator,re=F&&Y&&x.operatorInlineLabel,ne=F&&!Y;return N.default.createElement($.default,{key:"operator",classname:"group--operator",config:p,selectedField:F,selectedOperator:B,setField:Z,setOperator:X,selectedFieldPartsLabels:["group"],showOperator:ne,showOperatorLabel:re,selectedFieldWidgetConfig:x,readonly:z||j,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var y=this.props,p=y.config,F=y.selectedField,B=y.selectedOperator,Z=y.isLocked,X=p.settings.immutableValuesMode,j=F&&B,z=j;if(!z)return null;var x=N.default.createElement(K.default,{key:"values",isForRuleGruop:!0,field:this.props.selectedField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:"value",valueError:null,config:p,setValue:X?V.dummyFn:this.props.setValue,setValueSrc:V.dummyFn,readonly:X||Z,id:this.props.id,groupId:this.props.groupId});return N.default.createElement(V.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},x)}},{key:"renderActions",value:function(){var y=this.props,p=y.config,F=y.addRule,B=y.isLocked,Z=y.isTrueLocked,X=y.id;return N.default.createElement(U.RuleGroupExtActions,{config:p,addRule:F,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:B,isTrueLocked:Z,id:X})}},{key:"reordableNodesCntForItem",value:function(y){if(this.props.isLocked)return 0;var p=this.props.children1;return p.size}},{key:"extraPropsForItem",value:function(y){return{parentField:this.props.selectedField}}}]),a}(A.BasicGroup),te.propTypes=k(k({},A.BasicGroup.propTypes),{},{selectedField:S.default.string,selectedOperator:S.default.string,value:S.default.any,parentField:S.default.string,setField:S.default.func,setOperator:S.default.func,setValue:S.default.func}),te))||_)||_)||_),f=l;i.default=f},54590:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.RuleGroupExtActions=void 0;var g=r(e(86067)),M=r(e(85091)),C=r(e(72366)),E=r(e(64920)),L=r(e(39005)),T=N(e(68404));function P(A){if(typeof WeakMap!="function")return null;var U=new WeakMap,I=new WeakMap;return(P=function(w){return w?I:U})(A)}function N(A,U){if(!U&&A&&A.__esModule)return A;if(A===null||O(A)!=="object"&&typeof A!="function")return{default:A};var I=P(U);if(I&&I.has(A))return I.get(A);var $={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in A)if(V!=="default"&&Object.prototype.hasOwnProperty.call(A,V)){var G=w?Object.getOwnPropertyDescriptor(A,V):null;G&&(G.get||G.set)?Object.defineProperty($,V,G):$[V]=A[V]}return $.default=A,I&&I.set(A,$),$}function S(A){var U=D();return function(){var $=(0,L.default)(A),w;if(U){var V=(0,L.default)(this).constructor;w=Reflect.construct($,arguments,V)}else w=$.apply(this,arguments);return(0,E.default)(this,w)}}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b=function(A){(0,C.default)(I,A);var U=S(I);function I(){return(0,g.default)(this,I),U.apply(this,arguments)}return(0,M.default)(I,[{key:"render",value:function(){var w=this.props,V=w.config,G=w.addRule,K=w.canAddRule,H=w.canDeleteGroup,_=w.removeSelf,te=w.setLock,J=w.isLocked,k=w.isTrueLocked,R=w.id,m=V.settings,s=m.immutableGroupsMode,c=m.addSubRuleLabel,o=m.delGroupLabel,u=m.renderButton,l=m.renderSwitch,f=m.renderButtonGroup,v=m.lockLabel,h=m.lockedLabel,a=m.showLock,n=m.canDeleteLocked,y=a&&!(J&&!k)&&T.default.createElement(l,{type:"lock",id:R,value:J,setValue:te,label:v,checkedLabel:h,config:V}),p=!s&&K&&!J&&T.default.createElement(u,{type:"addRuleGroupExt",onClick:G,label:c,readonly:J,config:V}),F=!s&&H&&(!J||J&&n)&&T.default.createElement(u,{type:"delRuleGroup",onClick:_,label:o,config:V});return T.default.createElement("div",{className:"group--actions group--actions--tr"},T.default.createElement(f,{config:V},y,p,F))}}]),I}(T.PureComponent);i.RuleGroupExtActions=b},8362:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(92476)),g=r(e(86067)),M=r(e(85091)),C=r(e(80467)),E=r(e(72366)),L=r(e(64920)),T=r(e(39005)),P=r(e(68404)),N=r(e(59160)),S=r(e(65169)),D=r(e(39066)),b=e(31569),A=e(89110),U=e(31506),I=e(45798),$=e(75403),w,V,G;function K(m,s){var c=Object.keys(m);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(m);s&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(m,u).enumerable})),c.push.apply(c,o)}return c}function H(m){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?K(Object(c),!0).forEach(function(o){(0,O.default)(m,o,c[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(c)):K(Object(c)).forEach(function(o){Object.defineProperty(m,o,Object.getOwnPropertyDescriptor(c,o))})}return m}function _(m){var s=te();return function(){var o=(0,T.default)(m),u;if(s){var l=(0,T.default)(this).constructor;u=Reflect.construct(o,arguments,l)}else u=o.apply(this,arguments);return(0,L.default)(this,u)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=e(23019),k=(w=(0,D.default)("group switch_group"),(0,S.default)(V=w(V=(0,I.ConfirmFn)(V=(G=function(m){(0,E.default)(c,m);var s=_(c);function c(o){var u;return(0,g.default)(this,c),u=s.call(this,o),u.childrenClassName=function(){return"switch_group--children"},u.renderFooterWrapper=function(){return null},u.hasDefaultCase=function(){return u.props.children1.size&&u.props.children1.filter(function(l){return l.get("children1")==null}).size>0},(0,U.useOnPropsChanged)((0,C.default)(u)),u.onPropsChanged(o),u}return(0,M.default)(c,[{key:"onPropsChanged",value:function(u){}},{key:"canAddGroup",value:function(){var u=this.props.config.settings.maxNumberOfCases,l=this.props.children1.size;return u?l<u:!0}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var u=this.props.children1.size,l=u;return this.hasDefaultCase()&&l--,l}},{key:"totalRulesCntForItem",value:function(u){return(0,$.getTotalRulesCountInTree)(u)}},{key:"reordableNodesCntForItem",value:function(u){if(this.props.isLocked)return 0;var l=this.props.config.settings,f=l.canLeaveEmptyCase,v=l.canRegroupCases,h=this.props.children1.size,a=h;this.hasDefaultCase()&&a--;var n=(0,$.getTotalReordableNodesCountInTree)(u),y=n;return y==1&&v&&f&&a>1&&(y=111),y}},{key:"renderHeaderWrapper",value:function(){return P.default.createElement("div",{key:"group-header",className:J("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",this.showConjs()&&(!this.isOneChild()||this.showNot())?"with--conjs":"hide--conjs")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return P.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){var u=this.props.config.settings.renderSwitchPrefix;return u?u():null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var u=this.props,l=u.config,f=u.addCaseGroup,v=u.addDefaultCaseGroup,h=u.isLocked,a=u.isTrueLocked,n=u.id;return P.default.createElement(A.SwitchGroupActions,{config:l,addCaseGroup:f,addDefaultCaseGroup:v,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:h,isTrueLocked:a,id:n})}}]),c}(b.BasicGroup),G.propTypes=H({},b.BasicGroup.propTypes),G))||V)||V)||V),R=k;i.default=R},89110:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.SwitchGroupActions=void 0;var g=r(e(86067)),M=r(e(85091)),C=r(e(72366)),E=r(e(64920)),L=r(e(39005)),T=N(e(68404));function P(I){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(P=function(G){return G?w:$})(I)}function N(I,$){if(!$&&I&&I.__esModule)return I;if(I===null||O(I)!=="object"&&typeof I!="function")return{default:I};var w=P($);if(w&&w.has(I))return w.get(I);var V={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in I)if(K!=="default"&&Object.prototype.hasOwnProperty.call(I,K)){var H=G?Object.getOwnPropertyDescriptor(I,K):null;H&&(H.get||H.set)?Object.defineProperty(V,K,H):V[K]=I[K]}return V.default=I,w&&w.set(I,V),V}function S(I){var $=D();return function(){var V=(0,L.default)(I),G;if($){var K=(0,L.default)(this).constructor;G=Reflect.construct(V,arguments,K)}else G=V.apply(this,arguments);return(0,E.default)(this,G)}}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},A="topRight",U=function(I){(0,C.default)(w,I);var $=S(w);function w(){return(0,g.default)(this,w),$.apply(this,arguments)}return(0,M.default)(w,[{key:"render",value:function(){var G=this.props,K=G.config,H=G.addCaseGroup,_=G.addDefaultCaseGroup,te=G.setLock,J=G.isLocked,k=G.isTrueLocked,R=G.id,m=G.canAddGroup,s=G.canAddDefault,c=K.settings,o=c.immutableGroupsMode,u=c.addCaseLabel,l=c.addDefaultCaseLabel,f=c.groupActionsPosition,v=c.renderButton,h=c.renderSwitch,a=c.renderButtonGroup,n=c.lockLabel,y=c.lockedLabel,p=c.showLock,F=b[f||A],B=p&&!(J&&!k)&&T.default.createElement(h,{type:"lock",id:R,value:J,setValue:te,label:n,checkedLabel:y,config:K}),Z=!o&&m&&!J&&T.default.createElement(v,{type:"addCaseGroup",onClick:H,label:u,readonly:J,config:K}),X=!o&&s&&!J&&T.default.createElement(v,{type:"addDefaultCaseGroup",onClick:_,label:l,readonly:J,config:K});return T.default.createElement("div",{className:"group--actions ".concat(F)},T.default.createElement(a,{config:K},B,Z,X))}}]),w}(T.PureComponent);i.SwitchGroupActions=U},20784:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(68307)),M=r(e(86067)),C=r(e(85091)),E=r(e(72366)),L=r(e(64920)),T=r(e(39005)),P=b(e(68404)),N=r(e(59160)),S=r(e(31536));function D($){if(typeof WeakMap!="function")return null;var w=new WeakMap,V=new WeakMap;return(D=function(K){return K?V:w})($)}function b($,w){if(!w&&$&&$.__esModule)return $;if($===null||O($)!=="object"&&typeof $!="function")return{default:$};var V=D(w);if(V&&V.has($))return V.get($);var G={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in $)if(H!=="default"&&Object.prototype.hasOwnProperty.call($,H)){var _=K?Object.getOwnPropertyDescriptor($,H):null;_&&(_.get||_.set)?Object.defineProperty(G,H,_):G[H]=$[H]}return G.default=$,V&&V.set($,G),G}function A($){var w=U();return function(){var G=(0,T.default)($),K;if(w){var H=(0,T.default)(this).constructor;K=Reflect.construct(G,arguments,H)}else K=G.apply(this,arguments);return(0,L.default)(this,K)}}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var I=function($){(0,E.default)(V,$);var w=A(V);function V(){var G;(0,M.default)(this,V);for(var K=arguments.length,H=new Array(K),_=0;_<K;_++)H[_]=arguments[_];return G=w.call.apply(w,[this].concat(H)),G.handleChange=function(te){G.props.setOption("proximity",parseInt(te))},G}return(0,C.default)(V,[{key:"render",value:function(){var K=this.props,H=K.defaults,_=K.options,te=K.config,J=K.optionLabel,k=K.optionPlaceholder,R=K.customProps,m=K.minProximity,s=K.maxProximity,c=K.optionTextBefore,o=K.readonly,u=te.settings,l=te.widgets,f=H?H.proximity:void 0,v=u.showLabels,h=_.get("proximity",f),a=(0,S.default)(m,s+1).map(function(y){return{title:y,value:y}}),n=l.select.factory;return P.default.createElement("div",{className:"operator--PROXIMITY"},P.default.createElement("div",{className:"operator--options"},v&&P.default.createElement("label",{className:"rule--label"},J),!v&&c&&P.default.createElement("div",{className:"operator--options--sep"},P.default.createElement("span",null,c)),P.default.createElement(n,(0,g.default)({config:te,value:h,listValues:a,setValue:this.handleChange,readonly:o,placeholder:k},R))),P.default.createElement("div",{className:"operator--widgets"},this.props.children))}}]),V}(P.PureComponent);i.default=I,I.propTypes={config:N.default.object.isRequired,setOption:N.default.func.isRequired,options:N.default.any.isRequired,minProximity:N.default.number,maxProximity:N.default.number,optionPlaceholder:N.default.string,optionTextBefore:N.default.string,optionLabel:N.default.string,customProps:N.default.object,readonly:N.default.bool},I.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null}},84711:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"ProximityOperator",{enumerable:!0,get:function(){return O.default}});var O=r(e(20784))},40706:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(92476)),M=r(e(86067)),C=r(e(85091)),E=r(e(80467)),L=r(e(72366)),T=r(e(64920)),P=r(e(39005)),N=V(e(68404)),S=r(e(59160)),D=e(24256),b=e(41895),A=e(1218),U=e(31506),I=r(e(4161)),$=r(e(65555));function w(J){if(typeof WeakMap!="function")return null;var k=new WeakMap,R=new WeakMap;return(w=function(s){return s?R:k})(J)}function V(J,k){if(!k&&J&&J.__esModule)return J;if(J===null||O(J)!=="object"&&typeof J!="function")return{default:J};var R=w(k);if(R&&R.has(J))return R.get(J);var m={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in J)if(c!=="default"&&Object.prototype.hasOwnProperty.call(J,c)){var o=s?Object.getOwnPropertyDescriptor(J,c):null;o&&(o.get||o.set)?Object.defineProperty(m,c,o):m[c]=J[c]}return m.default=J,R&&R.set(J,m),m}function G(J,k){var R=Object.keys(J);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(J);k&&(m=m.filter(function(s){return Object.getOwnPropertyDescriptor(J,s).enumerable})),R.push.apply(R,m)}return R}function K(J){for(var k=1;k<arguments.length;k++){var R=arguments[k]!=null?arguments[k]:{};k%2?G(Object(R),!0).forEach(function(m){(0,g.default)(J,m,R[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(R)):G(Object(R)).forEach(function(m){Object.defineProperty(J,m,Object.getOwnPropertyDescriptor(R,m))})}return J}function H(J){var k=_();return function(){var m=(0,P.default)(J),s;if(k){var c=(0,P.default)(this).constructor;s=Reflect.construct(m,arguments,c)}else s=m.apply(this,arguments);return(0,T.default)(this,s)}}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var te=function(J){(0,L.default)(R,J);var k=H(R);function R(m){var s;return(0,M.default)(this,R),s=k.call(this,m),(0,U.useOnPropsChanged)((0,E.default)(s)),s.onPropsChanged(m),s}return(0,C.default)(R,[{key:"onPropsChanged",value:function(s){var c=this.props,o=["selectedField","config","parentField"],u=!this.meta||o.map(function(l){return s[l]!==c[l]}).filter(function(l){return l}).length>0;u&&(this.meta=this.getMeta(s))}},{key:"getMeta",value:function(s){var c=s.selectedField,o=s.config,u=s.parentField,l=c,f=o.settings,v=f.maxLabelsLength,h=f.fieldSeparatorDisplay,a=f.fieldPlaceholder,n=f.fieldSeparator,y=!!c,p=y?null:(0,A.truncateString)(a,v),F=y?(0,D.getFieldConfig)(o,l):null,B=F||{},Z=(0,b.getFieldPath)(l,o),X=(0,b.getFieldPath)(l,o,!0),j=this.getFieldLabel(F,l,o),z=(0,b.getFieldPathLabels)(l,o),x=z?z.join(h):null;(x==j||u)&&(x=null);var Y=B.label2,re=typeof u=="string"?u.split(n):u,ne=u?(0,D.getFieldConfig)(o,u):null,ae=u?ne&&ne.subfields:o.fields,ie=this.buildOptions(re,o,ae,re);return{placeholder:p,items:ie,parentField:u,selectedKey:l,selectedKeys:Z,selectedPath:X,selectedLabel:j,selectedOpts:B,selectedAltLabel:Y,selectedFullLabel:x}}},{key:"getFieldLabel",value:function(s,c,o){if(!c)return null;var u=o.settings.fieldSeparator,l=o.settings.maxLabelsLength,f=Array.isArray(c)?c:c.split(u),v=s&&s.label||(0,I.default)(f);return v=(0,A.truncateString)(v,l),v}},{key:"buildOptions",value:function(s,c,o){var u=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!o)return null;var v=c.settings,h=v.fieldSeparator,a=v.fieldSeparatorDisplay,n=l?l.join(h)+h:"";return(0,$.default)(o).map(function(y){var p=o[y],F=u.getFieldLabel(p,y,c),B=(0,b.getFieldPathLabels)(n+y,c),Z=B.join(a);(Z==F||s)&&(Z=null);var X=p.label2,j=p.tooltip,z=(l||[]).concat(y),x=p.disabled;if(!p.hideForSelect)return p.type=="!struct"?{disabled:x,key:y,path:n+y,label:F,fullLabel:Z,altLabel:X,tooltip:j,items:u.buildOptions(s,c,p.subfields,z,F)}:{disabled:x,key:y,path:n+y,label:F,fullLabel:Z,altLabel:X,tooltip:j,grouplabel:f}}).filter(function(y){return!!y})}},{key:"render",value:function(){var s=this.props,c=s.config,o=s.customProps,u=s.setField,l=s.readonly,f=s.id,v=s.groupId,h=c.settings.renderField,a=K({id:f,groupId:v,config:c,customProps:o,readonly:l,setField:u},this.meta);return h(a)}}]),R}(N.PureComponent);i.default=te,te.propTypes={id:S.default.string,groupId:S.default.string,config:S.default.object.isRequired,selectedField:S.default.string,parentField:S.default.string,customProps:S.default.object,readonly:S.default.bool,setField:S.default.func.isRequired}},47332:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(86067)),M=r(e(85091)),C=r(e(72366)),E=r(e(64920)),L=r(e(39005)),T=D(e(68404)),P=r(e(40706)),N=e(45798);function S(I){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(S=function(G){return G?w:$})(I)}function D(I,$){if(!$&&I&&I.__esModule)return I;if(I===null||O(I)!=="object"&&typeof I!="function")return{default:I};var w=S($);if(w&&w.has(I))return w.get(I);var V={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in I)if(K!=="default"&&Object.prototype.hasOwnProperty.call(I,K)){var H=G?Object.getOwnPropertyDescriptor(I,K):null;H&&(H.get||H.set)?Object.defineProperty(V,K,H):V[K]=I[K]}return V.default=I,w&&w.set(I,V),V}function b(I){var $=A();return function(){var V=(0,L.default)(I),G;if($){var K=(0,L.default)(this).constructor;G=Reflect.construct(V,arguments,K)}else G=V.apply(this,arguments);return(0,E.default)(this,G)}}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=function(I){(0,C.default)(w,I);var $=b(w);function w(){return(0,g.default)(this,w),$.apply(this,arguments)}return(0,M.default)(w,[{key:"render",value:function(){var G=this.props,K=G.config,H=G.selectedField,_=G.setField,te=G.parentField,J=G.classname,k=G.readonly,R=G.id,m=G.groupId;return T.default.createElement(N.Col,{className:J},K.settings.showLabels&&T.default.createElement("label",{className:"rule--label"},K.settings.fieldLabel),T.default.createElement(P.default,{config:K,selectedField:H,parentField:te,setField:_,customProps:K.settings.customFieldSelectProps,readonly:k,id:R,groupId:m}))}}]),w}(T.PureComponent);i.default=U},3212:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(92476)),M=r(e(47452)),C=r(e(86067)),E=r(e(85091)),L=r(e(80467)),T=r(e(72366)),P=r(e(64920)),N=r(e(39005)),S=K(e(68404)),D=r(e(59160)),b=e(24256),A=e(41895),U=e(1218),I=e(31506),$=r(e(4161)),w=r(e(65555)),V=r(e(29521));function G(R){if(typeof WeakMap!="function")return null;var m=new WeakMap,s=new WeakMap;return(G=function(o){return o?s:m})(R)}function K(R,m){if(!m&&R&&R.__esModule)return R;if(R===null||O(R)!=="object"&&typeof R!="function")return{default:R};var s=G(m);if(s&&s.has(R))return s.get(R);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in R)if(u!=="default"&&Object.prototype.hasOwnProperty.call(R,u)){var l=o?Object.getOwnPropertyDescriptor(R,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=R[u]}return c.default=R,s&&s.set(R,c),c}function H(R,m){var s=Object.keys(R);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(R);m&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(R,o).enumerable})),s.push.apply(s,c)}return s}function _(R){for(var m=1;m<arguments.length;m++){var s=arguments[m]!=null?arguments[m]:{};m%2?H(Object(s),!0).forEach(function(c){(0,g.default)(R,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach(function(c){Object.defineProperty(R,c,Object.getOwnPropertyDescriptor(s,c))})}return R}function te(R){var m=J();return function(){var c=(0,N.default)(R),o;if(m){var u=(0,N.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,P.default)(this,o)}}function J(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var k=function(R){(0,T.default)(s,R);var m=te(s);function s(c){var o;return(0,C.default)(this,s),o=m.call(this,c),(0,I.useOnPropsChanged)((0,L.default)(o)),o.onPropsChanged(c),o}return(0,E.default)(s,[{key:"onPropsChanged",value:function(o){var u=this.props,l=["config","field","operator","isFuncArg"],f=["config","field","value"],v=!this.items||l.map(function(a){return o[a]!==u[a]}).filter(function(a){return a}).length>0,h=!this.meta||f.map(function(a){return o[a]!==u[a]}).filter(function(a){return a}).length>0;h&&(this.meta=this.getMeta(o)),v&&(this.items=this.getItems(o))}},{key:"getItems",value:function(o){var u=o.config,l=o.field,f=o.operator,v=o.parentFuncs,h=o.fieldDefinition,a=o.isFuncArg,n=u.settings.canUseFuncForField,y=this.filterFuncs(u,u.funcs,l,f,n,v,a,h),p=this.buildOptions(u,y);return p}},{key:"getMeta",value:function(o){var u=o.config,l=o.field,f=o.value,v=u.settings,h=v.funcPlaceholder,a=v.fieldSeparatorDisplay,n=f,y=!!f,p=(0,b.getFieldConfig)(u,l),F=p.widgets.field,B=F&&F.widgetProps||{},Z=y?null:h,X=y?(0,b.getFuncConfig)(u,n):null,j=X||{},z=(0,A.getFieldPath)(n,u),x=(0,A.getFieldPath)(n,u,!0),Y=this.getFuncLabel(X,n,u),re=(0,A.getFuncPathLabels)(n,u),ne=re?re.join(a):null;return ne==Y&&(ne=null),{placeholder:Z,selectedKey:n,selectedKeys:z,selectedPath:x,selectedLabel:Y,selectedOpts:j,selectedFullLabel:ne}}},{key:"filterFuncs",value:function(o,u,l,f,v,h,a,n){u=(0,V.default)(u);var y=o.settings.fieldSeparator,p=(0,b.getFieldConfig)(o,l),F,B=p,Z=(0,A.getWidgetForFieldOp)(o,l,f,"value");if(a&&n)B=n,F=n.type;else if(Z){var X=o.widgets[Z],j=X.type;F=j}else F=p.type;function z(x,Y){for(var re in x){var ne=x[re].subfields,ae=(Y||[]).concat(re),ie=ae.join(y),de=(0,b.getFuncConfig)(o,ie);if(de.type=="!struct")z(ne,ae)==0&&delete x[re];else{var se=de.returnType==F;B.funcs&&(se=se&&B.funcs.includes(ie)),v&&(se=se&&v(l,p,ie,de,f)),!de.allowSelfNesting&&h&&h.map(function(ge){var ye=(0,M.default)(ge,2),Ee=ye[0],Te=ye[1];return Ee}).includes(ie)&&(se=!1),se||delete x[re]}}return(0,w.default)(x).length}return z(u,[]),u}},{key:"buildOptions",value:function(o,u){var l=this,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(!u)return null;var h=o.settings,a=h.fieldSeparator,n=h.fieldSeparatorDisplay,y=f?f.join(a)+a:"";return(0,w.default)(u).map(function(p){var F=u[p],B=l.getFuncLabel(F,p,o),Z=(0,A.getFuncPathLabels)(p,o),X=Z.join(n);X==B&&(X=null);var j=F.tooltip,z=(f||[]).concat(p);return F.type=="!struct"?{key:p,path:y+p,label:B,fullLabel:X,tooltip:j,items:l.buildOptions(o,F.subfields,z,B)}:{key:p,path:y+p,label:B,fullLabel:X,tooltip:j,grouplabel:v}})}},{key:"getFuncLabel",value:function(o,u,l){if(!u)return null;var f=l.settings.fieldSeparator,v=l.settings.maxLabelsLength,h=Array.isArray(u)?u:u.split(f),a=o.label||(0,$.default)(h);return a=(0,U.truncateString)(a,v),a}},{key:"render",value:function(){var o=this.props,u=o.config,l=o.customProps,f=o.setValue,v=o.readonly,h=o.id,a=o.groupId,n=u.settings.renderFunc,y=_({config:u,customProps:l,readonly:v,setField:f,items:this.items,id:h,groupId:a},this.meta);return n(y)}}]),s}(S.PureComponent);i.default=k,k.propTypes={id:D.default.string,groupId:D.default.string,config:D.default.object.isRequired,field:D.default.string.isRequired,operator:D.default.string,customProps:D.default.object,value:D.default.string,setValue:D.default.func.isRequired,readonly:D.default.bool,parentFuncs:D.default.array,fieldDefinition:D.default.object,isFuncArg:D.default.bool}},17393:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(68307)),M=r(e(90890)),C=r(e(86067)),E=r(e(85091)),L=r(e(80467)),T=r(e(72366)),P=r(e(64920)),N=r(e(39005)),S=G(e(68404)),D=r(e(59160)),b=r(e(3212)),A=e(24256),U=r(e(63659)),I=e(45798),$=e(91152),w=e(31506);function V(J){if(typeof WeakMap!="function")return null;var k=new WeakMap,R=new WeakMap;return(V=function(s){return s?R:k})(J)}function G(J,k){if(!k&&J&&J.__esModule)return J;if(J===null||O(J)!=="object"&&typeof J!="function")return{default:J};var R=V(k);if(R&&R.has(J))return R.get(J);var m={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in J)if(c!=="default"&&Object.prototype.hasOwnProperty.call(J,c)){var o=s?Object.getOwnPropertyDescriptor(J,c):null;o&&(o.get||o.set)?Object.defineProperty(m,c,o):m[c]=J[c]}return m.default=J,R&&R.set(J,m),m}function K(J){var k=H();return function(){var m=(0,N.default)(J),s;if(k){var c=(0,N.default)(this).constructor;s=Reflect.construct(m,arguments,c)}else s=m.apply(this,arguments);return(0,P.default)(this,s)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _=function(J){(0,T.default)(R,J);var k=K(R);function R(m){var s;return(0,C.default)(this,R),s=k.call(this,m),s.setFunc=function(c){s.props.setValue((0,$.setFunc)(s.props.value,c,s.props.config))},s.setArgValue=function(c,o){var u=s.props.config,l=s.meta.funcDefinition,f=l.args,v=f[c];s.props.setValue((0,$.setArgValue)(s.props.value,c,o,v,u))},s.setArgValueSrc=function(c,o){var u=s.props.config,l=s.meta.funcDefinition,f=l.args,v=f[c];s.props.setValue((0,$.setArgValueSrc)(s.props.value,c,o,v,u))},s.renderFuncSelect=function(){var c=s.props,o=c.config,u=c.field,l=c.operator,f=c.customProps,v=c.value,h=c.readonly,a=c.parentFuncs,n=c.id,y=c.groupId,p=c.isFuncArg,F=c.fieldDefinition,B=v?v.get("func"):null,Z={value:B,setValue:s.setFunc,config:o,field:u,operator:l,customProps:f,readonly:h,parentFuncs:a,isFuncArg:p,fieldDefinition:F,id:n,groupId:y},X=o.settings,j=X.showLabels,z=X.funcLabel,x=j?S.default.createElement("label",{className:"rule--label"},z):null;return S.default.createElement(I.Col,{key:"func",className:"rule--func"},x,S.default.createElement(b.default,Z))},s.renderArgLabel=function(c,o){var u=o.valueSources,l=o.type,f=o.showPrefix,v=o.label,h=s.props.config,a=u&&u.length==1&&u[0]=="const",n=!h.settings.showLabels&&(l=="boolean"||a)&&f;return n?S.default.createElement(I.Col,{className:"rule--func--arg-label"},v||c):null},s.renderArgLabelSep=function(c,o){var u=o.valueSources,l=o.type,f=o.showPrefix,v=s.props.config,h=u&&u.length==1&&u[0]=="const",a=!v.settings.showLabels&&(l=="boolean"||h)&&f;return a?S.default.createElement(I.Col,{className:"rule--func--arg-label-sep"},":"):null},s.renderArgVal=function(c,o,u){var l=s.props,f=l.config,v=l.field,h=l.operator,a=l.value,n=l.readonly,y=l.parentFuncs,p=l.id,F=l.groupId,B=a?a.getIn(["args",o]):null,Z=B?B.get("value"):void 0,X=u.valueSources.length==1?u.valueSources[0]:void 0,j=B?B.get("valueSrc")||X||"value":X,z={config:f,fieldFunc:c,fieldArg:o,leftField:v,operator:null,value:Z,valueSrc:j,setValue:s.setArgValue,setValueSrc:s.setArgValueSrc,funcKey:c,argKey:o,argDefinition:u,readonly:n,parentFuncs:y,id:p,groupId:F};return S.default.createElement(I.Col,{className:"rule--func--arg-value"},S.default.createElement(te,z))},s.renderArgSep=function(c,o,u,l){var f=l.renderSeps;return u?S.default.createElement(I.Col,{className:"rule--func--arg-sep"},f?f[u-1]:", "):null},s.renderBracketBefore=function(c){var o=c.renderBrackets;return S.default.createElement(I.Col,{key:"before_args",className:"rule--func--bracket-before"},o?o[0]:"(")},s.renderBracketAfter=function(c){var o=c.renderBrackets;return S.default.createElement(I.Col,{key:"after_args",className:"rule--func--bracket-after"},o?o[1]:")")},s.renderFuncArgs=function(){var c=s.meta,o=c.funcDefinition,u=c.funcKey;if(!u)return null;var l=o.args;return l?S.default.createElement(S.default.Fragment,null,s.renderBracketBefore(o),S.default.createElement(I.Col,{key:"args",className:"rule--func--args"},Object.keys(l).map(function(f,v){return S.default.createElement(I.Col,{key:"arg-".concat(f,"-").concat(v),className:"rule--func--arg"},s.renderArgSep(f,l[f],v,o),s.renderArgLabel(f,l[f]),s.renderArgLabelSep(f,l[f]),s.renderArgVal(u,f,l[f]))})),s.renderBracketAfter(o)):null},(0,w.useOnPropsChanged)((0,L.default)(s)),s.onPropsChanged(m),s}return(0,E.default)(R,[{key:"onPropsChanged",value:function(s){var c=this.props,o=["config","field","operator","value"],u=!this.meta||o.map(function(l){return s[l]!==c[l]}).filter(function(l){return l}).length>0;u&&(this.meta=this.getMeta(s))}},{key:"getMeta",value:function(s){var c=s.config,o=s.field,u=s.operator,l=s.value,f=l?l.get("func"):null,v=f?(0,A.getFuncConfig)(c,f):null;return{funcDefinition:v,funcKey:f}}},{key:"render",value:function(){return S.default.createElement(I.Col,{className:"rule--func--wrapper"},this.renderFuncSelect(),this.renderFuncArgs())}}]),R}(S.PureComponent);i.default=_,_.propTypes={id:D.default.string,groupId:D.default.string,config:D.default.object.isRequired,field:D.default.string.isRequired,operator:D.default.string,customProps:D.default.object,value:D.default.object,setValue:D.default.func.isRequired,readonly:D.default.bool,parentFuncs:D.default.array,fieldDefinition:D.default.object,isFuncArg:D.default.bool};var te=function(J){(0,T.default)(R,J);var k=K(R);function R(){var m;(0,C.default)(this,R);for(var s=arguments.length,c=new Array(s),o=0;o<s;o++)c[o]=arguments[o];return m=k.call.apply(k,[this].concat(c)),m.setValue=function(u,l,f){var v=m.props,h=v.setValue,a=v.argKey;h(a,l)},m.setValueSrc=function(u,l,f){var v=m.props,h=v.setValueSrc,a=v.argKey;h(a,l)},m}return(0,E.default)(R,[{key:"render",value:function(){var s=this.props,c=s.funcKey,o=s.argKey,u=s.parentFuncs;return S.default.createElement(U.default,(0,g.default)({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:[].concat((0,M.default)(u||[]),[[c,o]])}))}}]),R}(S.PureComponent);te.propTypes={funcKey:D.default.string.isRequired,argKey:D.default.string.isRequired,setValue:D.default.func.isRequired,setValueSrc:D.default.func.isRequired,readonly:D.default.bool,parentFuncs:D.default.array,id:D.default.string,groupId:D.default.string}},66753:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(92476)),M=r(e(86067)),C=r(e(85091)),E=r(e(80467)),L=r(e(72366)),T=r(e(64920)),P=r(e(39005)),N=w(e(68404)),S=r(e(59160)),D=e(24256),b=r(e(65555)),A=r(e(76175)),U=r(e(74937)),I=e(31506);function $(te){if(typeof WeakMap!="function")return null;var J=new WeakMap,k=new WeakMap;return($=function(m){return m?k:J})(te)}function w(te,J){if(!J&&te&&te.__esModule)return te;if(te===null||O(te)!=="object"&&typeof te!="function")return{default:te};var k=$(J);if(k&&k.has(te))return k.get(te);var R={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in te)if(s!=="default"&&Object.prototype.hasOwnProperty.call(te,s)){var c=m?Object.getOwnPropertyDescriptor(te,s):null;c&&(c.get||c.set)?Object.defineProperty(R,s,c):R[s]=te[s]}return R.default=te,k&&k.set(te,R),R}function V(te,J){var k=Object.keys(te);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(te);J&&(R=R.filter(function(m){return Object.getOwnPropertyDescriptor(te,m).enumerable})),k.push.apply(k,R)}return k}function G(te){for(var J=1;J<arguments.length;J++){var k=arguments[J]!=null?arguments[J]:{};J%2?V(Object(k),!0).forEach(function(R){(0,g.default)(te,R,k[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(k)):V(Object(k)).forEach(function(R){Object.defineProperty(te,R,Object.getOwnPropertyDescriptor(k,R))})}return te}function K(te){var J=H();return function(){var R=(0,P.default)(te),m;if(J){var s=(0,P.default)(this).constructor;m=Reflect.construct(R,arguments,s)}else m=R.apply(this,arguments);return(0,T.default)(this,m)}}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _=function(te){(0,L.default)(k,te);var J=K(k);function k(R){var m;return(0,M.default)(this,k),m=J.call(this,R),(0,I.useOnPropsChanged)((0,E.default)(m)),m.onPropsChanged(R),m}return(0,C.default)(k,[{key:"onPropsChanged",value:function(m){var s=this.props,c=["config","selectedField","selectedOperator"],o=!this.meta||c.map(function(u){return m[u]!==s[u]}).filter(function(u){return u}).length>0;o&&(this.meta=this.getMeta(m))}},{key:"getMeta",value:function(m){var s=m.config,c=m.selectedField,o=m.selectedOperator,u=(0,D.getFieldConfig)(s,c),l=u?.operators,f=(0,U.default)((0,A.default)(s.operators,function(X,j){return l?.indexOf(j)!==-1}),function(X,j){return(0,D.getOperatorConfig)(s,j,c)}),v=this.buildOptions(s,f,l),h=!!o,a=h?f[o]:null,n=a||{},y=this.props.config.settings.operatorPlaceholder,p=o,F=h?[p]:null,B=F,Z=n.label;return{placeholder:y,items:v,selectedKey:p,selectedKeys:F,selectedPath:B,selectedLabel:Z,selectedOpts:n,fieldConfig:u}}},{key:"buildOptions",value:function(m,s,c){return!s||!c?null:(0,b.default)(s).sort(function(o,u){return c.indexOf(o)-c.indexOf(u)}).map(function(o){var u=s[o],l=u.label;return{key:o,path:o,label:l}})}},{key:"render",value:function(){var m=this.props,s=m.config,c=m.customProps,o=m.setOperator,u=m.readonly,l=m.id,f=m.groupId,v=s.settings.renderOperator,h=G({id:l,groupId:f,config:s,customProps:c,readonly:u,setField:o},this.meta);return h.items?v(h):null}}]),k}(N.PureComponent);i.default=_,_.propTypes={id:S.default.string,groupId:S.default.string,config:S.default.object.isRequired,selectedField:S.default.string,selectedOperator:S.default.string,readonly:S.default.bool,setOperator:S.default.func.isRequired}},69002:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(19934)),M=r(e(86067)),C=r(e(85091)),E=r(e(72366)),L=r(e(64920)),T=r(e(39005)),P=A(e(68404)),N=r(e(59160)),S=e(24256),D=["factory"];function b(w){if(typeof WeakMap!="function")return null;var V=new WeakMap,G=new WeakMap;return(b=function(H){return H?G:V})(w)}function A(w,V){if(!V&&w&&w.__esModule)return w;if(w===null||O(w)!=="object"&&typeof w!="function")return{default:w};var G=b(V);if(G&&G.has(w))return G.get(w);var K={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in w)if(_!=="default"&&Object.prototype.hasOwnProperty.call(w,_)){var te=H?Object.getOwnPropertyDescriptor(w,_):null;te&&(te.get||te.set)?Object.defineProperty(K,_,te):K[_]=w[_]}return K.default=w,G&&G.set(w,K),K}function U(w){var V=I();return function(){var K=(0,T.default)(w),H;if(V){var _=(0,T.default)(this).constructor;H=Reflect.construct(K,arguments,_)}else H=K.apply(this,arguments);return(0,L.default)(this,H)}}function I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $=function(w){(0,E.default)(G,w);var V=U(G);function G(){return(0,M.default)(this,G),V.apply(this,arguments)}return(0,C.default)(G,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var H=(0,S.getOperatorConfig)(this.props.config,this.props.selectedOperator,this.props.selectedField);if(typeof H.options>"u")return null;var _=H.options,te=_.factory,J=(0,g.default)(_,D),k=Object.assign({},J,{config:this.props.config,field:this.props.selectedField,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly}),R=te(k),m=this.props.selectedOperator;return P.default.createElement("div",{className:"rule--operator rule--operator--".concat(m.toUpperCase())},R)}}]),G}(P.PureComponent);i.default=$,$.propTypes={config:N.default.object.isRequired,operatorOptions:N.default.any.isRequired,selectedField:N.default.string.isRequired,selectedOperator:N.default.string.isRequired,readonly:N.default.bool,setOperatorOption:N.default.func.isRequired}},97258:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(86067)),M=r(e(85091)),C=r(e(72366)),E=r(e(64920)),L=r(e(39005)),T=D(e(68404)),P=r(e(66753)),N=e(45798);function S(I){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(S=function(G){return G?w:$})(I)}function D(I,$){if(!$&&I&&I.__esModule)return I;if(I===null||O(I)!=="object"&&typeof I!="function")return{default:I};var w=S($);if(w&&w.has(I))return w.get(I);var V={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in I)if(K!=="default"&&Object.prototype.hasOwnProperty.call(I,K)){var H=G?Object.getOwnPropertyDescriptor(I,K):null;H&&(H.get||H.set)?Object.defineProperty(V,K,H):V[K]=I[K]}return V.default=I,w&&w.set(I,V),V}function b(I){var $=A();return function(){var V=(0,L.default)(I),G;if($){var K=(0,L.default)(this).constructor;G=Reflect.construct(V,arguments,K)}else G=V.apply(this,arguments);return(0,E.default)(this,G)}}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U=function(I){(0,C.default)(w,I);var $=b(w);function w(){return(0,g.default)(this,w),$.apply(this,arguments)}return(0,M.default)(w,[{key:"render",value:function(){var G=this.props,K=G.config,H=G.selectedField,_=G.selectedOperator,te=G.setOperator,J=G.selectedFieldPartsLabels,k=G.showOperator,R=G.showOperatorLabel,m=G.selectedFieldWidgetConfig,s=G.readonly,c=G.id,o=G.groupId,u=k&&T.default.createElement(N.Col,{key:"operators-for-"+(J||[]).join("_"),className:"rule--operator"},K.settings.showLabels&&T.default.createElement("label",{className:"rule--label"},K.settings.operatorLabel),T.default.createElement(P.default,{key:"operator",config:K,selectedField:H,selectedOperator:_,setOperator:te,readonly:s,id:c,groupId:o})),l=R&&T.default.createElement(N.Col,{key:"operators-for-"+(J||[]).join("_"),className:"rule--operator"},T.default.createElement("div",{className:"rule--operator"},K.settings.showLabels?T.default.createElement("label",{className:"rule--label"},"\xA0"):null,T.default.createElement("span",null,m.operatorInlineLabel)));return[u,l]}}]),w}(T.PureComponent);i.default=U},34521:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(92476)),M=r(e(86067)),C=r(e(85091)),E=r(e(80467)),L=r(e(72366)),T=r(e(64920)),P=r(e(39005)),N=G(e(68404)),S=r(e(59160)),D=e(24256),b=e(41895),A=e(1218),U=e(31506),I=r(e(4161)),$=r(e(65555)),w=r(e(29521));function V(k){if(typeof WeakMap!="function")return null;var R=new WeakMap,m=new WeakMap;return(V=function(c){return c?m:R})(k)}function G(k,R){if(!R&&k&&k.__esModule)return k;if(k===null||O(k)!=="object"&&typeof k!="function")return{default:k};var m=V(R);if(m&&m.has(k))return m.get(k);var s={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in k)if(o!=="default"&&Object.prototype.hasOwnProperty.call(k,o)){var u=c?Object.getOwnPropertyDescriptor(k,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=k[o]}return s.default=k,m&&m.set(k,s),s}function K(k,R){var m=Object.keys(k);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(k);R&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(k,c).enumerable})),m.push.apply(m,s)}return m}function H(k){for(var R=1;R<arguments.length;R++){var m=arguments[R]!=null?arguments[R]:{};R%2?K(Object(m),!0).forEach(function(s){(0,g.default)(k,s,m[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(m)):K(Object(m)).forEach(function(s){Object.defineProperty(k,s,Object.getOwnPropertyDescriptor(m,s))})}return k}function _(k){var R=te();return function(){var s=(0,P.default)(k),c;if(R){var o=(0,P.default)(this).constructor;c=Reflect.construct(s,arguments,o)}else c=s.apply(this,arguments);return(0,T.default)(this,c)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J=function(k){(0,L.default)(m,k);var R=_(m);function m(s){var c;return(0,M.default)(this,m),c=R.call(this,s),(0,U.useOnPropsChanged)((0,E.default)(c)),c.onPropsChanged(s),c}return(0,C.default)(m,[{key:"onPropsChanged",value:function(c){var o=this.props,u=["config","field","operator","isFuncArg","parentField"],l=["config","field","operator","value","placeholder","isFuncArg","parentField"],f=!this.items||u.map(function(h){return c[h]!==o[h]}).filter(function(h){return h}).length>0,v=!this.meta||l.map(function(h){return c[h]!==o[h]}).filter(function(h){return h}).length>0;f&&(this.items=this.getItems(c)),v&&(this.meta=this.getMeta(c))}},{key:"getItems",value:function(c){var o=c.config,u=c.field,l=c.operator,f=c.parentField,v=c.isFuncArg,h=c.fieldDefinition,a=o.settings.canCompareFieldWithField,n=o.settings.fieldSeparator,y=typeof f=="string"?f.split(n):f,p=f?(0,D.getFieldConfig)(o,f):null,F=f?p&&p.subfields:o.fields,B=this.filterFields(o,F,u,f,y,l,a,v,h),Z=this.buildOptions(y,o,B,y);return Z}},{key:"getMeta",value:function(c){var o=c.config,u=c.field,l=c.operator,f=c.value,v=c.placeholder,h=c.isFuncArg,a=c.parentField,n=o.settings,y=n.fieldPlaceholder,p=n.fieldSeparatorDisplay,F=f,B=!!f,Z=(0,D.getFieldConfig)(o,u),X=Z.widgets.field,j=X&&X.widgetProps||{},z=B?null:h&&v||j.valuePlaceholder||y,x=B?(0,D.getFieldConfig)(o,F):null,Y=x||{},re=(0,b.getFieldPath)(F,o),ne=(0,b.getFieldPath)(F,o,!0),ae=this.getFieldLabel(x,F,o),ie=(0,b.getFieldPathLabels)(F,o),de=ie?ie.join(p):null;(de==ae||a)&&(de=null);var se=Y.label2;return{placeholder:z,selectedKey:F,selectedKeys:re,selectedPath:ne,selectedLabel:ae,selectedOpts:Y,selectedAltLabel:se,selectedFullLabel:de}}},{key:"filterFields",value:function(c,o,u,l,f,v,h,a,n){o=(0,w.default)(o);var y=c.settings.fieldSeparator,p=(0,D.getFieldConfig)(c,u),F,B=(0,b.getWidgetForFieldOp)(c,u,v,"value");if(a&&n)F=n.type;else if(B){var Z=c.widgets[B],X=Z.type;F=X}else F=p.type;function j(z,x){for(var Y in z){var re=z[Y].subfields,ne=(x||[]).concat(Y),ae=ne.join(y),ie=(0,D.getFieldConfig)(c,ae);if(!ie)delete z[Y];else if(ie.type=="!struct"||ie.type=="!group")j(re,ne)==0&&delete z[Y];else{var de=ie.type==F&&(a?!0:ae!=u),se=h||c.settings.canCompareFieldWithField;se&&(de=de&&se(u,p,ae,ie,v)),de||delete z[Y]}}return(0,$.default)(z).length}return j(o,f||[]),o}},{key:"buildOptions",value:function(c,o,u){var l=this,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!u)return null;var h=o.settings,a=h.fieldSeparator,n=h.fieldSeparatorDisplay,y=f?f.join(a)+a:"";return(0,$.default)(u).map(function(p){var F=u[p],B=l.getFieldLabel(F,p,o),Z=(0,b.getFieldPathLabels)(p,o),X=Z.join(n);(X==B||c)&&(X=null);var j=F.label2,z=F.tooltip,x=(f||[]).concat(p);if(!F.hideForCompare)return F.type=="!struct"||F.type=="!group"?{key:p,path:y+p,label:B,fullLabel:X,altLabel:j,tooltip:z,items:l.buildOptions(c,o,F.subfields,x,B)}:{key:p,path:y+p,label:B,fullLabel:X,altLabel:j,tooltip:z,grouplabel:v}}).filter(function(p){return!!p})}},{key:"getFieldLabel",value:function(c,o,u){if(!o)return null;var l=u.settings.fieldSeparator,f=u.settings.maxLabelsLength,v=Array.isArray(o)?o:o.split(l),h=c.label||(0,I.default)(v);return h=(0,A.truncateString)(h,f),h}},{key:"render",value:function(){var c=this.props,o=c.config,u=c.customProps,l=c.setValue,f=c.readonly,v=c.id,h=c.groupId,a=o.settings.renderField,n=H({config:o,customProps:u,setField:l,readonly:f,items:this.items,id:v,groupId:h},this.meta);return a(n)}}]),m}(N.PureComponent);i.default=J,J.propTypes={id:S.default.string,groupId:S.default.string,setValue:S.default.func.isRequired,config:S.default.object.isRequired,field:S.default.string.isRequired,value:S.default.string,operator:S.default.string,customProps:S.default.object,readonly:S.default.bool,parentField:S.default.string,fieldDefinition:S.default.object,isFuncArg:S.default.bool}},63659:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(68307)),M=r(e(86067)),C=r(e(85091)),E=r(e(80467)),L=r(e(72366)),T=r(e(64920)),P=r(e(39005)),N=H(e(68404)),S=r(e(59160)),D=r(e(31536)),b=e(24256),A=e(41895),U=e(1218),I=e(31506),$=r(e(7275)),w=r(e(40745)),V=r(e(79340)),G=e(45798);function K(R){if(typeof WeakMap!="function")return null;var m=new WeakMap,s=new WeakMap;return(K=function(o){return o?s:m})(R)}function H(R,m){if(!m&&R&&R.__esModule)return R;if(R===null||O(R)!=="object"&&typeof R!="function")return{default:R};var s=K(m);if(s&&s.has(R))return s.get(R);var c={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in R)if(u!=="default"&&Object.prototype.hasOwnProperty.call(R,u)){var l=o?Object.getOwnPropertyDescriptor(R,u):null;l&&(l.get||l.set)?Object.defineProperty(c,u,l):c[u]=R[u]}return c.default=R,s&&s.set(R,c),c}function _(R){var m=te();return function(){var c=(0,P.default)(R),o;if(m){var u=(0,P.default)(this).constructor;o=Reflect.construct(c,arguments,u)}else o=c.apply(this,arguments);return(0,T.default)(this,o)}}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J={cardinality:1},k=function(R){(0,L.default)(s,R);var m=_(s);function s(c){var o;return(0,M.default)(this,s),o=m.call(this,c),o._setValue=function(u,l,f,v,h,a){if(u&&Array.isArray(v)){var n=[o.props.value.get(0),o.props.value.get(1)];n[0]!=v[0]&&o.props.setValue(0,v[0],f,h,a),n[1]!=v[1]&&o.props.setValue(1,v[1],f,h,a)}else o.props.setValue(l,v,f,h,a)},o._onChangeValueSrc=function(u,l){o.props.setValueSrc(u,l)},o.renderWidget=function(u,l,f){var v=f.config,h=f.isFuncArg,a=f.leftField,n=f.operator,y=f.value,p=f.valueError,F=f.readonly,B=f.parentField,Z=f.parentFuncs,X=f.id,j=f.groupId,z=v.settings,x=l.widgets,Y=l.iValues,re=l.aField,ne=h?Y:y,ae=h?a:re,ie=x[u],de=ie.valueSrc,se=ie.valueLabel,ge=z.showLabels?N.default.createElement("label",{className:"rule--label"},se.label):null;return N.default.createElement("div",{key:"widget-"+ae+"-"+u,className:"widget--widget"},de=="func"?null:ge,N.default.createElement(V.default,(0,g.default)({id:X,groupId:j,valueSrc:de,delta:u,value:ne,valueError:p,isFuncArg:h},(0,$.default)(l,["isSpecialRange","fieldDefinition","asyncListValues"]),(0,$.default)(x[u],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValueHandler"]),{config:v,field:ae,parentField:B,parentFuncs:Z,operator:n,readonly:F})))},o.renderValueSources=function(u,l,f){var v=f.config,h=f.isFuncArg,a=f.leftField,n=f.operator,y=f.readonly,p=v.settings,F=l.valueSources,B=l.widgets,Z=l.aField,X=h?a:Z,j=B[u],z=j.valueSrc,x=j.setValueSrcHandler,Y=p.valueSourcesInfo,re=p.renderValueSources,ne=F.map(function(ie){return[ie,{label:Y[ie].label}]}),ae=p.showLabels?N.default.createElement("label",{className:"rule--label"},"\xA0"):null;return F.length>1&&!y&&N.default.createElement("div",{key:"valuesrc-"+X+"-"+u,className:"widget--valuesrc"},ae,N.default.createElement(re,{key:"valuesrc-"+u,delta:u,valueSources:ne,valueSrc:z,config:v,field:X,operator:n,setValueSrc:x,readonly:y,title:p.valueSourcesPopupTitle}))},o.renderSep=function(u,l,f){var v=f.config,h=l.widgets,a=v.settings,n=h[u].sepText,y=a.showLabels?N.default.createElement("label",{className:"rule--label"},"\xA0"):null;return n&&N.default.createElement("div",{key:"widget-separators-"+u,className:"widget--sep"},y,N.default.createElement("span",null,n))},o.renderWidgetDelta=function(u){var l=o.renderSep(u,o.meta,o.props),f=o.renderValueSources(u,o.meta,o.props),v=o.renderWidget(u,o.meta,o.props);return[l,f,v]},(0,I.useOnPropsChanged)((0,E.default)(o)),o.onPropsChanged(c),o}return(0,C.default)(s,[{key:"onPropsChanged",value:function(o){var u=this.props,l=["config","field","fieldFunc","fieldArg","leftField","operator","valueSrc","isFuncArg","asyncListValues"],f=!this.meta||l.map(function(v){return o[v]!==u[v]||v=="isFuncArg"&&o.isFuncArg&&o.value!==u.value}).filter(function(v){return v}).length>0;f&&(this.meta=this.getMeta(o))}},{key:"getMeta",value:function(o){var u=this,l=o.config,f=o.field,v=o.fieldFunc,h=o.fieldArg,a=o.operator,n=o.valueSrc,y=o.value,p=o.isForRuleGruop,F=o.isCaseValue,B=o.isFuncArg,Z=o.leftField,X=o.asyncListValues,j=B?{func:v,arg:h}:f,z=n,x=y;(B||p||F)&&(z=w.default.List([n]),x=w.default.List([y]));var Y=(0,b.getFieldConfig)(l,j),re=(0,A.getWidgetForFieldOp)(l,j,a),ne=(0,A.getWidgetsForFieldOp)(l,j,a),ae=B?J:(0,b.getOperatorConfig)(l,a,j);if((Y==null||ae==null)&&!F)return null;var ie=ae?.isSpecialRange,de=ie&&(z.get(0)=="field"||z.get(1)=="field"),se=ie&&!de,ge=se?1:(0,U.defaultValue)(ae?.cardinality,1);if(ge===0)return null;var ye=(0,A.getValueSourcesForFieldOp)(l,j,a,Y,B?Z:null),Ee=(0,D.default)(0,ge).map(function(Te){var he,Le=z.get(Te)||null,Fe=(0,A.getWidgetForFieldOp)(l,j,a,Le),We=(0,b.getFieldWidgetConfig)(l,j,a,Fe,Le);de&&(Fe=We.singleWidget,We=(0,b.getFieldWidgetConfig)(l,j,a,Fe,Le));var Ue=(he=We)===null||he===void 0?void 0:he.type,He=(0,A.getValueLabel)(l,j,a,Te,Le,se),ke=(0,A.getValueLabel)(l,j,a,Te,null,se),qe=ae!=null&&ae.textSeparators?ae?.textSeparators[Te]:null,ze=u._onChangeValueSrc.bind(u,Te),fe=null,Oe=null;ie&&(fe=[(0,A.getValueLabel)(l,j,a,0),(0,A.getValueLabel)(l,j,a,1)],fe={placeholder:[fe[0].placeholder,fe[1].placeholder],label:[fe[0].label,fe[1].label]},Oe=ae?.textSeparators);var Re=u._setValue.bind(u,ie,Te,Ue);return{valueSrc:Le,valueLabel:He,widget:Fe,sepText:qe,setValueSrcHandler:ze,widgetDefinition:We,widgetValueLabel:ke,valueLabels:fe,textSeparators:Oe,setValueHandler:Re}});return{defaultWidget:re,fieldDefinition:Y,operatorDefinition:ae,isSpecialRange:se,cardinality:ge,valueSources:ye,widgets:Ee,iValues:x,aField:j,asyncListValues:X}}},{key:"render",value:function(){if(!this.meta)return null;var o=this.meta,u=o.defaultWidget,l=o.cardinality;if(!u)return null;var f=u;return N.default.createElement(G.Col,{className:"rule--widget rule--widget--".concat(f.toUpperCase()),key:"widget-col-"+f},(0,D.default)(0,l).map(this.renderWidgetDelta))}}]),s}(N.PureComponent);i.default=k,k.propTypes={config:S.default.object.isRequired,value:S.default.any,valueSrc:S.default.any,valueError:S.default.any,field:S.default.string,operator:S.default.string,readonly:S.default.bool,asyncListValues:S.default.array,id:S.default.string,groupId:S.default.string,setValue:S.default.func,setValueSrc:S.default.func,isFuncArg:S.default.bool,fieldFunc:S.default.string,fieldArg:S.default.string,leftField:S.default.string,isForRuleGruop:S.default.bool,parentField:S.default.string,parentFuncs:S.default.array,isCaseValue:S.default.bool}},79340:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(19934)),g=r(e(68404)),M=e(1218),C=["factory"],E=function(T){var P=T.delta,N=T.isFuncArg,S=T.valueSrc,D=T.value,b=T.valueError,A=T.asyncListValues,U=T.isSpecialRange,I=T.fieldDefinition,$=T.widget,w=T.widgetDefinition,V=T.widgetValueLabel,G=T.valueLabels,K=T.textSeparators,H=T.setValueHandler,_=T.config,te=T.field,J=T.operator,k=T.readonly,R=T.parentField,m=T.parentFuncs,s=T.id,c=T.groupId,o=w.factory,u=(0,O.default)(w,C),l=N&&I.valueSources&&I.valueSources.length==1&&I.valueSources[0]=="const",f=I.defaultValue;if(!o)return"?";var v=U?[D.get(0),D.get(1)]:D?D.get(P):void 0,h=b&&(U?[b.get(0),b.get(1)]:b.get(P))||null;U&&v[0]===void 0&&v[1]===void 0&&(v=void 0);var a=I||{},n=a.fieldSettings,y=Object.assign({},u,n,{config:_,field:te,parentField:R,parentFuncs:m,fieldDefinition:I,operator:J,delta:P,isSpecialRange:U,isFuncArg:N,value:v,valueError:h,label:V.label,placeholder:V.placeholder,placeholders:G?G.placeholder:null,textSeparators:K,setValue:H,readonly:k,asyncListValues:A,id:s,groupId:c});return $=="field",l&&f?typeof f=="boolean"?f?y.labelYes||"YES":y.labelNo||"NO":n.listValues?Array.isArray(f)?f.map(function(p){return(0,M.getTitleInListValues)(n.listValues,p)||p}).join(", "):(0,M.getTitleInListValues)(n.listValues,f)||f:""+f:o(y)};i.default=E},45798:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.dummyFn=i.DragIcon=i.ConfirmFn=i.Col=void 0;var O=r(e(68307)),g=r(e(19934)),M=r(e(68404)),C=["children"],E=function(S){var D=S.children,b=(0,g.default)(S,C);return M.default.createElement("div",b,D)};i.Col=E;var L=function(){};i.dummyFn=L;var T=function(){return M.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},M.default.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),M.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))};i.DragIcon=T;var P=function(S){return function(D){var b=D.config.settings.useConfirm,A=b?b():null;return M.default.createElement(S,(0,O.default)({},D,{confirmFn:A}))}};i.ConfirmFn=P},66085:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0});var O={ValueFieldWidget:!0,FuncWidget:!0};Object.defineProperty(i,"FuncWidget",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(i,"ValueFieldWidget",{enumerable:!0,get:function(){return g.default}});var g=r(e(34521)),M=r(e(17393)),C=e(7723);Object.keys(C).forEach(function(E){E==="default"||E==="__esModule"||Object.prototype.hasOwnProperty.call(O,E)||E in i&&i[E]===C[E]||Object.defineProperty(i,E,{enumerable:!0,get:function(){return C[E]}})})},39278:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68404)),g=function(C){var E=C.type,L=C.label,T=C.onClick,P=C.readonly,N=C.config,S={addRuleGroup:"+",addRuleGroupExt:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"},D=L||S[E];return O.default.createElement("button",{onClick:T,type:"button",disabled:P},D)};i.default=g},49177:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68404)),g=function(C){var E=C.children,L=C.config;return O.default.createElement(O.default.Fragment,null,E)};i.default=g},38939:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68404)),g=function(C){var E=C.id,L=C.not,T=C.setNot,P=C.conjunctionOptions,N=C.setConjunction,S=C.disabled,D=C.readonly,b=C.config,A=C.showNot,U=C.notLabel,I=Object.keys(P).length,$=S,w=b.settings.forceShowConj,V=w||I>1&&!$,G=function(){return Object.keys(P).map(function(J){var k=P[J],R=k.id,m=k.name,s=k.label,c=k.checked,o=N.isDummyFn?"__dummy":"";return(D||S)&&!c?null:[O.default.createElement("input",{key:R+o,type:"radio",id:R+o,name:m+o,checked:c,disabled:D||S,value:J,onChange:H}),O.default.createElement("label",{key:R+o+"label",htmlFor:R+o},s)]})},K=function(){var J="not";return[O.default.createElement("input",{key:E+J,type:"checkbox",id:E+J,checked:L,disabled:D,onChange:_}),O.default.createElement("label",{key:E+J+"label",htmlFor:E+J},U||"NOT")]},H=function(J){return N(J.target.value)},_=function(J){return T(J.target.checked)};return[A&&K(),V&&G()]};i.default=g},89657:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68404)),g=function(C){var E=C.items,L=C.setField,T=C.selectedKey,P=C.readonly,N=function b(A){return A.map(function(U){var I=U.items,$=U.path,w=U.label,V=U.disabled;return I?O.default.createElement("optgroup",{disabled:V,key:$,label:w},b(I)):O.default.createElement("option",{disabled:V,key:$,value:$},w)})},S=function(A){return L(A.target.value)},D=T!=null;return O.default.createElement("select",{onChange:S,value:D?T:"",disabled:P},!D&&O.default.createElement("option",{disabled:!0,value:""}),N(E))};i.default=g},27070:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68404)),g=function(C){var E=C.value,L=C.setValue,T=C.label,P=C.id,N=C.config,S=C.type,D=function(U){return L(U.target.checked)},b=S;return[O.default.createElement("input",{key:P+b,type:"checkbox",id:P+b,checked:!!E,onChange:D}),O.default.createElement("label",{key:P+b+"label",htmlFor:P+b},T)]};i.default=g},10912:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(47452)),g=r(e(68404)),M=function(E){var L=E.config,T=E.valueSources,P=E.valueSrc,N=E.title,S=E.setValueSrc,D=E.readonly,b=function(I){return I.map(function($){var w=(0,O.default)($,2),V=w[0],G=w[1];return g.default.createElement("option",{key:V,value:V},G.label)})},A=function(I){return S(I.target.value)};return g.default.createElement("select",{onChange:A,value:P,disabled:D},b(T))};i.default=M},7246:(ee,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=function(O){var g=O.onOk,M=O.okText,C=O.cancelText,E=O.title;confirm(E)&&g()};i.default=e},7723:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"VanillaBooleanWidget",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(i,"VanillaButton",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(i,"VanillaButtonGroup",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(i,"VanillaConjs",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(i,"VanillaDateTimeWidget",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(i,"VanillaDateWidget",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(i,"VanillaFieldSelect",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(i,"VanillaMultiSelectWidget",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(i,"VanillaNumberWidget",{enumerable:!0,get:function(){return S.default}}),i.VanillaProvider=void 0,Object.defineProperty(i,"VanillaSelectWidget",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(i,"VanillaSliderWidget",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(i,"VanillaSwitch",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(i,"VanillaTextAreaWidget",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(i,"VanillaTextWidget",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(i,"VanillaTimeWidget",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(i,"VanillaValueSources",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(i,"vanillaConfirm",{enumerable:!0,get:function(){return V.default}});var O=r(e(68404)),g=r(e(10345)),M=r(e(66286)),C=r(e(85108)),E=r(e(17962)),L=r(e(68407)),T=r(e(16206)),P=r(e(55540)),N=r(e(31755)),S=r(e(11249)),D=r(e(49494)),b=r(e(89657)),A=r(e(38939)),U=r(e(39278)),I=r(e(49177)),$=r(e(10912)),w=r(e(27070)),V=r(e(7246)),G=function(H){var _=H.config,te=H.children;return te};i.VanillaProvider=G},10345:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),M=r(e(39075)),C=function(L){var T=L.value,P=L.setValue,N=L.config,S=L.labelYes,D=L.labelNo,b=L.readonly,A=L.customProps,U=A===void 0?{}:A,I=U.radioYes||{},$=U.radioNo||{},w=function(_){return P(_.target.checked)},V=function(_){return P(_.target.value=="true")},G=(0,M.default)(),K=(0,M.default)();return g.default.createElement(g.default.Fragment,null,g.default.createElement("input",(0,O.default)({key:G,type:"radio",id:G,value:!0,checked:!!T,disabled:b,onChange:V},I)),g.default.createElement("label",{style:{display:"inline"},key:G+"label",htmlFor:G},S),g.default.createElement("input",(0,O.default)({key:K,type:"radio",id:K,value:!1,checked:!T,disabled:b,onChange:V},$)),g.default.createElement("label",{style:{display:"inline"},key:K+"label",htmlFor:K},D))};i.default=C},17962:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),M=r(e(36365)),C=function(L){var T=L.value,P=L.setValue,N=L.config,S=L.valueFormat,D=L.readonly,b=L.customProps,A=function(I){var $=I.target.value;$==""&&($=void 0),P($)};return g.default.createElement("input",(0,O.default)({type:"date",value:T||"",disabled:D,onChange:A},b))};i.default=C},16206:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),M=r(e(36365)),C=function(L){var T=L.value,P=L.setValue,N=L.config,S=L.valueFormat,D=L.use12Hours,b=L.readonly,A=L.customProps,U=function(w){var V=w.target.value;V==""?V=void 0:V=(0,M.default)(new Date(V)).format(S),P(V)},I=T;return T?I=(0,M.default)(T).format("YYYY-MM-DDTHH:mm"):I="",g.default.createElement("input",(0,O.default)({type:"datetime-local",value:I,disabled:b,onChange:U},A))};i.default=C},55540:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),M=e(1218),C=r(e(50234)),E=function(T){var P=T.listValues,N=T.value,S=T.setValue,D=T.allowCustomValues,b=T.readonly,A=T.customProps,U=function(){return(0,M.mapListValues)(P,function(V){var G=V.title,K=V.value;return g.default.createElement("option",{key:K,value:K},G)})},I=function(V){for(var G=[],K=V.options,H=0;H<K.length;H++){var _=K[H];_.selected&&G.push(_.value)}return G.length||(G=void 0),G},$=function(V){return S(I(V.target))};return g.default.createElement("select",(0,O.default)({multiple:!0,onChange:$,value:N,disabled:b},(0,C.default)(A,["showSearch","input","showCheckboxes"])),U())};i.default=E},11249:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),M=function(E){var L=E.value,T=E.setValue,P=E.config,N=E.readonly,S=E.min,D=E.max,b=E.step,A=E.placeholder,U=E.customProps,I=function(V){var G=V.target.value;G===""||G===null?G=void 0:G=Number(G),T(G)},$=L??"";return g.default.createElement("input",(0,O.default)({type:"number",value:$,placeholder:A,disabled:N,min:S,max:D,step:b,onChange:I},U))};i.default=M},31755:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),M=e(1218),C=r(e(50234)),E=function(T){var P=T.listValues,N=T.value,S=T.setValue,D=T.allowCustomValues,b=T.readonly,A=T.customProps,U=function(){return(0,M.mapListValues)(P,function(V){var G=V.title,K=V.value;return g.default.createElement("option",{key:K,value:K},G)})},I=function(V){return S(V.target.value)},$=N!=null;return g.default.createElement("select",(0,O.default)({onChange:I,value:$?N:"",disabled:b},(0,C.default)(A,["showSearch","input"])),!$&&g.default.createElement("option",{disabled:!0,value:""}),U())};i.default=E},49494:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),M=function(E){var L=E.value,T=E.setValue,P=E.config,N=E.readonly,S=E.min,D=E.max,b=E.step,A=E.placeholder,U=E.customProps,I=U===void 0?{}:U,$=I.input||{},w=I.slider||I,V=function(H){var _=H.target.value;_===""||_===null?_=void 0:_=Number(_),T(_)},G=L??"";return[g.default.createElement("input",(0,O.default)({key:"number",type:"number",value:G,placeholder:A,disabled:N,min:S,max:D,step:b,onChange:V},$)),g.default.createElement("input",(0,O.default)({key:"range",type:"range",value:G,disabled:N,min:S,max:D,step:b,onChange:V},w))]};i.default=M},66286:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),M=function(E){var L=E.value,T=E.setValue,P=E.config,N=E.readonly,S=E.placeholder,D=E.maxLength,b=E.customProps,A=function($){var w=$.target.value;w===""&&(w=void 0),T(w)},U=L||"";return g.default.createElement("input",(0,O.default)({type:"text",value:U,placeholder:S,disabled:N,onChange:A,maxLength:D},b))};i.default=M},85108:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),M=function(E){var L=E.value,T=E.setValue,P=E.config,N=E.readonly,S=E.placeholder,D=E.maxLength,b=E.maxRows,A=E.fullWidth,U=E.customProps,I=function(V){var G=V.target.value;G===""&&(G=void 0),T(G)},$=L||"";return g.default.createElement("textarea",(0,O.default)({value:$,placeholder:S,disabled:N,onChange:I,maxLength:D,style:{width:A?"100%":void 0}},U))};i.default=M},68407:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68307)),g=r(e(68404)),M=function(E){var L=E.value,T=E.setValue,P=E.config,N=E.valueFormat,S=E.use12Hours,D=E.readonly,b=E.customProps,A=function(I){var $=I.target.value;$==""&&($=void 0),T($)};return g.default.createElement("input",(0,O.default)({type:"time",value:L||"",disabled:D,onChange:A},b))};i.default=M},94724:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.stringifyForDisplay=i.mongoFormatOp2=i.mongoFormatOp1=i.default=void 0;var g=r(e(92476)),M=r(e(68404)),C=D(e(66085)),E=D(e(84711)),L=e(69664),T=e(1218),P=r(e(36365)),N=e(93876);function S(a){if(typeof WeakMap!="function")return null;var n=new WeakMap,y=new WeakMap;return(S=function(F){return F?y:n})(a)}function D(a,n){if(!n&&a&&a.__esModule)return a;if(a===null||O(a)!=="object"&&typeof a!="function")return{default:a};var y=S(n);if(y&&y.has(a))return y.get(a);var p={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in a)if(B!=="default"&&Object.prototype.hasOwnProperty.call(a,B)){var Z=F?Object.getOwnPropertyDescriptor(a,B):null;Z&&(Z.get||Z.set)?Object.defineProperty(p,B,Z):p[B]=a[B]}return p.default=a,y&&y.set(a,p),p}function b(a,n){var y=Object.keys(a);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(a);n&&(p=p.filter(function(F){return Object.getOwnPropertyDescriptor(a,F).enumerable})),y.push.apply(y,p)}return y}function A(a){for(var n=1;n<arguments.length;n++){var y=arguments[n]!=null?arguments[n]:{};n%2?b(Object(y),!0).forEach(function(p){(0,g.default)(a,p,y[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(y)):b(Object(y)).forEach(function(p){Object.defineProperty(a,p,Object.getOwnPropertyDescriptor(y,p))})}return a}var U=C.VanillaBooleanWidget,I=C.VanillaTextWidget,$=C.VanillaTextAreaWidget,w=C.VanillaDateWidget,V=C.VanillaTimeWidget,G=C.VanillaDateTimeWidget,K=C.VanillaMultiSelectWidget,H=C.VanillaSelectWidget,_=C.VanillaNumberWidget,te=C.VanillaSliderWidget,J=C.ValueFieldWidget,k=C.FuncWidget,R=E.ProximityOperator,m={AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(n,y,p,F){return n.size>1?(p?"NOT ":"")+"("+n.join(" "+(F?"AND":"&&")+" ")+")":(p?"NOT (":"")+n.first()+(p?")":"")},sqlFormatConj:function(n,y,p){return n.size>1?(p?"NOT ":"")+"("+n.join(" AND ")+")":(p?"NOT (":"")+n.first()+(p?")":"")},spelFormatConj:function(n,y,p,F){return p&&(F=!1),n.size>1?(p?"!":"")+(F?"":"(")+n.join(" && ")+(F?"":")"):(p?"!(":"")+n.first()+(p?")":"")}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(n,y,p,F){return n.size>1?(p?"NOT ":"")+"("+n.join(" "+(F?"OR":"||")+" ")+")":(p?"NOT (":"")+n.first()+(p?")":"")},sqlFormatConj:function(n,y,p){return n.size>1?(p?"NOT ":"")+"("+n.join(" OR ")+")":(p?"NOT (":"")+n.first()+(p?")":"")},spelFormatConj:function(n,y,p,F){return p&&(F=!1),n.size>1?(p?"!":"")+(F?"":"(")+n.join(" || ")+(F?"":")"):(p?"!(":"")+n.first()+(p?")":"")}}},s=function(n,y,p,F,B,Z,X,j,z,x,Y,re){var ne=typeof F=="string"&&!F.startsWith("$")?"$"+F:F,ae=y(Z,re);if(ae!==void 0)return p?!X&&(!n||n=="$eq")?(0,g.default)({},F,{$ne:ae}):X?{$not:(0,g.default)({},n,[ne,ae])}:(0,g.default)({},F,{$not:(0,g.default)({},n,ae)}):!X&&(!n||n=="$eq")?(0,g.default)({},F,ae):X?(0,g.default)({},n,[ne,ae]):(0,g.default)({},F,(0,g.default)({},n,ae))};i.mongoFormatOp1=s;var c=function(n,y,p,F,B,Z,X,j,z,x,Y){var re=typeof p=="string"&&!p.startsWith("$")?"$"+p:p;if(y){var ne;return Z?{$not:{$and:[(0,g.default)({},n[0],[re,B[0]]),(0,g.default)({},n[1],[re,B[1]])]}}:(0,g.default)({},p,{$not:(ne={},(0,g.default)(ne,n[0],B[0]),(0,g.default)(ne,n[1],B[1]),ne)})}else{var ae;return Z?{$and:[(0,g.default)({},n[0],[re,B[0]]),(0,g.default)({},n[1],[re,B[1]])]}:(0,g.default)({},p,(ae={},(0,g.default)(ae,n[0],B[0]),(0,g.default)(ae,n[1],B[1]),ae))}};i.mongoFormatOp2=c;var o={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(n,y,p,F,B,Z,X,j,z){var x=j?"=":Z.label;return B=="boolean"&&j?p=="No"?"NOT ".concat(n):"".concat(n):"".concat(n," ").concat(x," ").concat(p)},mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1),jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(n,y,p,F,B,Z,X,j,z){return B=="boolean"&&j?p=="No"?"".concat(n):"NOT ".concat(n):"".concat(n," ").concat(Z.label," ").concat(p)},mongoFormatOp:s.bind(null,"$ne",function(a){return a},!1),jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:s.bind(null,"$lt",function(a){return a},!1),jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:s.bind(null,"$lte",function(a){return a},!1),jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:s.bind(null,"$gt",function(a){return a},!1),jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:s.bind(null,"$gte",function(a){return a},!1),jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:".contains",spelOps:["matches",".contains"],mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?(0,T.escapeRegExp)(a):void 0},!1),jsonLogic:"in",_jsonLogicIsRevArgs:!0,valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?(0,T.escapeRegExp)(a):void 0},!0),valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:".startsWith",spelOps:["matches",".startsWith"],mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?"^"+(0,T.escapeRegExp)(a):void 0},!1),jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:".endsWith",spelOps:["matches",".endsWith"],mongoFormatOp:s.bind(null,"$regex",function(a){return typeof a=="string"?(0,T.escapeRegExp)(a)+"$":void 0},!1),jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(n,y,p,F,B,Z,X,j){var z=p.first(),x=p.get(1);return j?"".concat(n," BETWEEN ").concat(z," AND ").concat(x):"".concat(n," >= ").concat(z," && ").concat(n," <= ").concat(x)},spelFormatOp:function(n,y,p,F,B,Z,X,j){var z=p[0],x=p[1];return"".concat(n," >= ").concat(z," && ").concat(n," <= ").concat(x)},mongoFormatOp:c.bind(null,["$gte","$lte"],!1),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(n){return n[0]!=null&&n[1]!=null?n[0]<=n[1]?null:"Invalid range":null},elasticSearchQueryType:function(n){return n==="time"?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(n,y,p,F,B,Z,X,j){var z=p.first(),x=p.get(1);return j?"".concat(n," NOT BETWEEN ").concat(z," AND ").concat(x):"(".concat(n," < ").concat(z," || ").concat(n," > ").concat(x,")")},spelFormatOp:function(n,y,p,F,B,Z,X,j){var z=p[0],x=p[1];return"(".concat(n," < ").concat(z," || ").concat(n," > ").concat(x,")")},mongoFormatOp:c.bind(null,["$gte","$lte"],!0),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",validateValues:function(n){return n[0]!=null&&n[1]!=null?n[0]<=n[1]?null:"Invalid range":null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(n,y,p,F,B,Z,X,j){return j?"".concat(n," IS EMPTY"):"!".concat(n)},sqlFormatOp:function(n,y,p,F,B,Z,X,j){var z=(0,L.sqlEmptyValue)(j);return"COALESCE(".concat(n,", ").concat(z,") = ").concat(z)},spelFormatOp:function(n,y,p,F,B,Z,X,j){return"".concat(n," <= ''")},mongoFormatOp:s.bind(null,"$in",function(a,n){return[(0,L.mongoEmptyValue)(n),null]},!1),jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(n,y,p,F,B,Z,X,j){return j?"".concat(n," IS NOT EMPTY"):"!!".concat(n)},sqlFormatOp:function(n,y,p,F,B,Z,X,j){var z=(0,L.sqlEmptyValue)(j);return"COALESCE(".concat(n,", ").concat(z,") <> ").concat(z)},spelFormatOp:function(n,y,p,F,B,Z,X,j){return"".concat(n," > ''")},mongoFormatOp:s.bind(null,"$nin",function(a,n){return[(0,L.mongoEmptyValue)(n),null]},!1),jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(n,y,p,F,B,Z,X,j){return j?"".concat(n," IS NULL"):"!".concat(n)},spelFormatOp:function(n,y,p,F,B,Z,X,j){return"".concat(n," == null")},mongoFormatOp:s.bind(null,"$eq",function(a){return null},!1),jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(n,y,p,F,B,Z,X,j){return j?"".concat(n," IS NOT NULL"):"!!".concat(n)},spelFormatOp:function(n,y,p,F,B,Z,X,j){return"".concat(n," != null")},mongoFormatOp:s.bind(null,"$ne",function(a){return null},!1),jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(n,y,p,F,B,Z,X,j){var z=j?"=":"==";return"".concat(n," ").concat(z," ").concat(p)},spelOp:"==",spelOps:["==","eq"],mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1),reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(n,y,p,F,B,Z,X,j){return"".concat(n," != ").concat(p)},spelOp:"!=",spelOps:["!=","ne"],mongoFormatOp:s.bind(null,"$ne",function(a){return a},!1),reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(n,y,p,F,B,Z,X,j){return F=="value"?"".concat(n," IN (").concat(p.join(", "),")"):"".concat(n," IN (").concat(p,")")},sqlFormatOp:function(n,y,p,F,B,Z,X,j){if(F=="value")return"".concat(n," IN (").concat(p.join(", "),")")},spelOp:"$contains",mongoFormatOp:s.bind(null,"$in",function(a){return a},!1),reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(n,y,p,F,B,Z,X,j){return F=="value"?"".concat(n," NOT IN (").concat(p.join(", "),")"):"".concat(n," NOT IN (").concat(p,")")},sqlFormatOp:function(n,y,p,F,B,Z,X,j){if(F=="value")return"".concat(n," NOT IN (").concat(p.join(", "),")")},mongoFormatOp:s.bind(null,"$nin",function(a){return a},!1),reversedOp:"select_any_in"},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(n,y,p,F,B,Z,X,j){var z=j?"=":"==";return F=="value"?"".concat(n," ").concat(z," [").concat(p.join(", "),"]"):"".concat(n," ").concat(z," ").concat(p)},sqlFormatOp:function(n,y,p,F,B,Z,X,j){if(F=="value")return"".concat(n," = '").concat(p.map(function(z){return L.SqlString.trim(z)}).join(","),"'")},spelOp:".equals",mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1),reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(n,y,p){return{all:[n,{in:[{var:""},p]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(n,y,p,F,B,Z,X,j){return F=="value"?"".concat(n," != [").concat(p.join(", "),"]"):"".concat(n," != ").concat(p)},sqlFormatOp:function(n,y,p,F,B,Z,X,j){if(F=="value")return"".concat(n," != '").concat(p.map(function(z){return L.SqlString.trim(z)}).join(","),"'")},mongoFormatOp:s.bind(null,"$ne",function(a){return a},!1),reversedOp:"multiselect_equals"},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(n,y,p,F,B,Z,X,j){var z=p.first(),x=p.get(1),Y=X.get("proximity");return"".concat(n," ").concat(z," NEAR/").concat(Y," ").concat(x)},sqlFormatOp:function(n,y,p,F,B,Z,X,j){var z=p.first(),x=p.get(1),Y=L.SqlString.trim(z),re=L.SqlString.trim(x),ne=X.get("proximity");return"CONTAINS(".concat(n,", 'NEAR((").concat(Y,", ").concat(re,"), ").concat(ne,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",factory:function(n){return M.default.createElement(R,n)},minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(n){return"".concat(n," > 0")},mongoFormatOp:s.bind(null,"$gt",function(a){return 0},!1)},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(n,y,p){return"".concat(n," == ").concat(p)},mongoFormatOp:s.bind(null,"$eq",function(a){return a},!1)},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(n){return"".concat(n," == 0")},mongoFormatOp:s.bind(null,"$eq",function(a){return 0},!1)}},u=function(n){return n==null?"NULL":n.toString()};i.stringifyForDisplay=u;var l={text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",factory:function(n){return M.default.createElement(I,n)},formatValue:function(n,y,p,F){return F?u(n):JSON.stringify(n)},spelFormatValue:function(n,y,p,F,B){if(B.spelOp=="matches"&&F!="regex"){var Z;return F=="starts_with"?Z="(?s)^".concat((0,T.escapeRegExp)(n),".*"):F=="ends_with"?Z="(?s).*".concat((0,T.escapeRegExp)(n),"$"):Z="(?s).*".concat((0,T.escapeRegExp)(n),".*"),(0,L.spelEscape)(Z)}else return(0,L.spelEscape)(n)},sqlFormatValue:function(n,y,p,F,B){return B.sqlOp=="LIKE"||B.sqlOp=="NOT LIKE"?L.SqlString.escapeLike(n,F!="starts_with",F!="ends_with"):L.SqlString.escape(n)},toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",factory:function(n){return M.default.createElement($,n)},formatValue:function(n,y,p,F){return F?u(n):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,B){return B.sqlOp=="LIKE"||B.sqlOp=="NOT LIKE"?L.SqlString.escapeLike(n,F!="starts_with",F!="ends_with"):L.SqlString.escape(n)},spelFormatValue:function(n){return(0,L.spelEscape)(n)},toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",factory:function(n){return M.default.createElement(_,n)},valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(n,y,p,F){return F?u(n):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,B){return L.SqlString.escape(n)},spelFormatValue:function(n,y,p){var F=p.step&&!Number.isInteger(p.step);return(0,L.spelEscape)(n,F)},toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n}},slider:{type:"number",jsType:"number",valueSrc:"value",factory:function(n){return M.default.createElement(te,n)},valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(n,y,p,F){return F?u(n):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,B){return L.SqlString.escape(n)},spelFormatValue:function(n){return(0,L.spelEscape)(n)},toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n}},select:{type:"select",jsType:"string",valueSrc:"value",factory:function(n){return M.default.createElement(H,n)},valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(n,y,p,F){var B=(0,T.getTitleInListValues)(y.fieldSettings.listValues||y.asyncListValues,n);return F?u(B):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,B){return L.SqlString.escape(n)},spelFormatValue:function(n){return(0,L.spelEscape)(n)},toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",factory:function(n){return M.default.createElement(K,n)},valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(n,y,p,F){var B=n.map(function(Z){return(0,T.getTitleInListValues)(y.fieldSettings.listValues||y.asyncListValues,Z)});return F?B.map(u):n.map(JSON.stringify)},sqlFormatValue:function(n,y,p,F,B){return n.map(function(Z){return L.SqlString.escape(Z)})},spelFormatValue:function(n,y,p,F,B){var Z=B.spelOp&&B.spelOp[0]=="$",X=(0,L.spelEscape)(n);return Z&&(X=(0,L.spelFixList)(X)),X},toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n}},date:{type:"date",jsType:"string",valueSrc:"value",factory:function(n){return M.default.createElement(w,n)},dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",useKeyboard:!0,valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(n,y,p,F){var B=(0,P.default)(n,p.valueFormat);return F?B.format(p.dateFormat):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,B){var Z=(0,P.default)(n,p.valueFormat);return L.SqlString.escape(Z.format("YYYY-MM-DD"))},spelFormatValue:function(n,y,p,F,B){var Z=(0,P.default)(n,p.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd').parse('".concat(Z.format("YYYY-MM-DD"),"')")},jsonLogic:function(n,y,p){return(0,P.default)(n,p.valueFormat).toDate()},toJS:function(n,y){var p=(0,P.default)(n,y.valueFormat);return p.isValid()?p.toDate():void 0},mongoFormatValue:function(n,y,p){var F=(0,P.default)(n,p.valueFormat);return F.isValid()?F.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",factory:function(n){return M.default.createElement(V,n)},timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(n,y,p,F){var B=(0,P.default)(n,p.valueFormat);return F?B.format(p.timeFormat):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,B){var Z=(0,P.default)(n,p.valueFormat);return L.SqlString.escape(Z.format("HH:mm:ss"))},spelFormatValue:function(n,y,p,F,B){var Z=(0,P.default)(n,p.valueFormat);return"T(java.time.LocalTime).parse('".concat(Z.format("HH:mm:ss"),"')")},jsonLogic:function(n,y,p){var F=(0,P.default)(n,p.valueFormat);return F.get("hour")*60*60+F.get("minute")*60+F.get("second")},toJS:function(n,y){var p=(0,P.default)(n,y.valueFormat);return p.isValid()?p.get("hour")*60*60+p.get("minute")*60+p.get("second"):void 0},mongoFormatValue:function(n,y,p){var F=(0,P.default)(n,p.valueFormat);return F.get("hour")*60*60+F.get("minute")*60+F.get("second")},elasticSearchFormatValue:function(n,y,p,F){return{script:{script:{source:"doc[".concat(F,"][0].getHour() >== params.min && doc[").concat(F,"][0].getHour() <== params.max"),params:{min:y[0],max:y[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",factory:function(n){return M.default.createElement(G,n)},timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(n,y,p,F){var B=(0,P.default)(n,p.valueFormat);return F?B.format(p.dateFormat+" "+p.timeFormat):JSON.stringify(n)},sqlFormatValue:function(n,y,p,F,B){var Z=(0,P.default)(n,p.valueFormat);return L.SqlString.escape(Z.toDate())},spelFormatValue:function(n,y,p,F,B){var Z=(0,P.default)(n,p.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd HH:mm:ss').parse('".concat(Z.format("YYYY-MM-DD HH:mm:ss"),"')")},jsonLogic:function(n,y,p){return(0,P.default)(n,p.valueFormat).toDate()},toJS:function(n,y){var p=(0,P.default)(n,y.valueFormat);return p.isValid()?p.toDate():void 0},mongoFormatValue:function(n,y,p){var F=(0,P.default)(n,p.valueFormat);return F.isValid()?F.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",factory:function(n){return M.default.createElement(U,n)},labelYes:"Yes",labelNo:"No",formatValue:function(n,y,p,F){return F?n?"Yes":"No":JSON.stringify(!!n)},sqlFormatValue:function(n,y,p,F,B){return L.SqlString.escape(n)},spelFormatValue:function(n,y,p,F,B){return(0,L.spelEscape)(n)},defaultValue:!1,toJS:function(n,y){return n},mongoFormatValue:function(n,y,p){return n}},field:{valueSrc:"field",factory:function(n){return M.default.createElement(J,n)},formatValue:function(n,y,p,F,B,Z,X){return F&&X.label||n},sqlFormatValue:function(n,y,p,F,B,Z){return n},spelFormatValue:function(n,y,p,F,B){return n},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare",customProps:{showSearch:!0}},func:{valueSrc:"func",factory:function(n){return M.default.createElement(k,n)},valueLabel:"Function",valuePlaceholder:"Select function",customProps:{}},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(n){return(0,L.spelEscape)(n===""?null:n)},spelImportValue:function(n){return[n.value,[]]},factory:function(n){var y=n.value,p=n.setValue;return M.default.createElement("input",{type:"text",value:y||"",onChange:function(B){return p(B.target.value)}})}}},f={text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"],widgetProps:{customProps:{showSearch:!0}}},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{}}}},v=A(A({},N.settings),{},{formatField:function(n,y,p,F,B,Z){return Z?p:n},formatSpelField:function(n,y,p,F,B,Z){var X=F.map(function(j,z){var x=j.key,Y=j.parent;return z==0?Y=="[map]"?"#this[".concat((0,L.spelEscape)(x),"]"):(Y=="[class]",x):Y=="map"||Y=="[map]"?"[".concat((0,L.spelEscape)(x),"]"):(Y=="class"||Y=="[class]",".".concat(x))}).join("");return B.isSpelVariable&&(X="#"+X),X},sqlFormatReverse:function(n){if(n!=null)return"NOT("+n+")"},spelFormatReverse:function(n){if(n!=null)return"!("+n+")"},formatReverse:function(n,y,p,F,B,Z){if(n!=null)return Z?"NOT ("+n+")":"!("+n+")"},formatAggr:function(n,y,p,F,B,Z,X,j,z,x){var Y=X.labelForFormat,re=X.cardinality;if(re==0){var ne=n?" HAVE ".concat(n):"";return"".concat(Y," OF ").concat(y).concat(ne)}else if(re==null||re==1){var ae=n?" WHERE ".concat(n):"";return"COUNT OF ".concat(y).concat(ae," ").concat(Y," ").concat(F)}else if(re==2){var ie=n?" WHERE ".concat(n):"",de=F.first(),se=F.get(1);return"COUNT OF ".concat(y).concat(ie," ").concat(Y," ").concat(de," AND ").concat(se)}},canCompareFieldWithField:function(n,y,p,F){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}},customFieldSelectProps:{showSearch:!0},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5}),h={conjunctions:m,operators:o,widgets:l,types:f,settings:v};i.default=h},93876:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.settings=void 0;var g=E(e(66085)),M=r(e(68404));function C(I){if(typeof WeakMap!="function")return null;var $=new WeakMap,w=new WeakMap;return(C=function(G){return G?w:$})(I)}function E(I,$){if(!$&&I&&I.__esModule)return I;if(I===null||O(I)!=="object"&&typeof I!="function")return{default:I};var w=C($);if(w&&w.has(I))return w.get(I);var V={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in I)if(K!=="default"&&Object.prototype.hasOwnProperty.call(I,K)){var H=G?Object.getOwnPropertyDescriptor(I,K):null;H&&(H.get||H.set)?Object.defineProperty(V,K,H):V[K]=I[K]}return V.default=I,w&&w.set(I,V),V}var L=g.VanillaFieldSelect,T=g.VanillaConjs,P=g.VanillaButton,N=g.VanillaButtonGroup,S=g.VanillaProvider,D=g.VanillaValueSources,b=g.vanillaConfirm,A=g.VanillaSwitch,U={formatField:function($,w,V,G,K,H){return H?V:$},renderField:function($){return M.default.createElement(L,$)},renderOperator:function($){return M.default.createElement(L,$)},renderFunc:function($){return M.default.createElement(L,$)},renderConjs:function($){return M.default.createElement(T,$)},renderSwitch:function($){return M.default.createElement(A,$)},renderButton:function($){return M.default.createElement(P,$)},renderButtonGroup:function($){return M.default.createElement(N,$)},renderProvider:function($){return M.default.createElement(S,$)},renderValueSources:function($){return M.default.createElement(D,$)},renderConfirm:b,renderSwitchPrefix:function(){return M.default.createElement(M.default.Fragment,null,"Conditions")},valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",renderSize:"small",maxLabelsLength:100,canReorder:!0,canRegroup:!0,showLock:!1,canDeleteLocked:!1,showNot:!0,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,forceShowConj:!1,canShortMongoQuery:!0,removeEmptyGroupsOnLoad:!0,removeIncompleteRulesOnLoad:!0,removeInvalidMultiSelectValuesOnLoad:!0,groupActionsPosition:"topRight",setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:null,addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",delGroupLabel:"",notLabel:"Not",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null,defaultGroupConjunction:"AND",jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"}};i.settings=U},96685:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.UPPER=i.RELATIVE_DATETIME=i.NOW=i.LOWER=i.LINEAR_REGRESSION=void 0;var O=r(e(36365)),g={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:function(){return new Date}},spelFunc:"new java.util.Date()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}};i.NOW=g;var M={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],jsonLogic:function(P){var N=P.date,S=P.op,D=P.val,b=P.dim;return{date_add:[N,D*(S=="minus"?-1:1),b]}},jsonLogicImport:function(P){var N=P.date_add[0],S=Math.abs(P.date_add[1]),D=P.date_add[1]>=0?"plus":"minus",b=P.date_add[2];return[N,D,S,b]},jsonLogicCustomOps:{date_add:function(P,N,S){return(0,O.default)(P).add(N,S).toDate()}},sqlFormatFunc:function(P){var N=P.date,S=P.op,D=P.val,b=P.dim;return"DATE_ADD(".concat(N,", INTERVAL ").concat(parseInt(D)*(S=="minus"?-1:1)," ").concat(b.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(P){var N=P.date,S=P.op,D=P.val,b=P.dim;return D?"".concat(N," ").concat(S=="minus"?"-":"+"," ").concat(D," ").concat(b):N},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field"]},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}}},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"]},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}}}}};i.RELATIVE_DATETIME=M;var C={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:".toLowerCase",jsonLogicCustomOps:{toLowerCase:function(P){return P.toLowerCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};i.LOWER=C;var E={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:".toUpperCase",jsonLogicCustomOps:{toUpperCase:function(P){return P.toUpperCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};i.UPPER=E;var L={label:"Linear regression",returnType:"number",formatFunc:function(P,N){var S=P.coef,D=P.bias,b=P.val;return"(".concat(S," * ").concat(b," + ").concat(D,")")},sqlFormatFunc:function(P){var N=P.coef,S=P.bias,D=P.val;return"(".concat(N," * ").concat(D," + ").concat(S,")")},spelFormatFunc:function(P){var N=P.coef,S=P.bias,D=P.val;return"(".concat(N," * ").concat(D," + ").concat(S,")")},mongoFormatFunc:function(P){var N=P.coef,S=P.bias,D=P.val;return{$sum:[{$multiply:[N,D]},S]}},jsonLogic:function(P){var N=P.coef,S=P.bias,D=P.val;return{"+":[{"*":[N,D]},S]}},jsonLogicImport:function(P){var N=P["+"][0]["*"][0],S=P["+"][0]["*"][1],D=P["+"][1];return[N,S,D]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}};i.LINEAR_REGRESSION=L},95421:(ee,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SET_VALUE_SRC=i.SET_VALUE=i.SET_TREE=i.SET_OPERATOR_OPTION=i.SET_OPERATOR=i.SET_NOT=i.SET_LOCK=i.SET_FIELD=i.SET_DRAG_START=i.SET_DRAG_PROGRESS=i.SET_DRAG_END=i.SET_CONJUNCTION=i.REMOVE_RULE=i.REMOVE_GROUP=i.PLACEMENT_PREPEND=i.PLACEMENT_BEFORE=i.PLACEMENT_APPEND=i.PLACEMENT_AFTER=i.MOVE_ITEM=i.ADD_RULE=i.ADD_GROUP=i.ADD_CASE_GROUP=void 0;var e="ADD_GROUP";i.ADD_GROUP=e;var r="ADD_CASE_GROUP";i.ADD_CASE_GROUP=r;var O="REMOVE_GROUP";i.REMOVE_GROUP=O;var g="SET_CONJUNCTION";i.SET_CONJUNCTION=g;var M="SET_NOT";i.SET_NOT=M;var C="ADD_RULE";i.ADD_RULE=C;var E="REMOVE_RULE";i.REMOVE_RULE=E;var L="SET_FIELD";i.SET_FIELD=L;var T="SET_OPERATOR";i.SET_OPERATOR=T;var P="SET_VALUE";i.SET_VALUE=P;var N="SET_VALUE_SRC";i.SET_VALUE_SRC=N;var S="SET_OPERATOR_OPTION";i.SET_OPERATOR_OPTION=S;var D="SET_LOCK";i.SET_LOCK=D;var b="SET_TREE";i.SET_TREE=b;var A="MOVE_ITEM";i.MOVE_ITEM=A;var U="after";i.PLACEMENT_AFTER=U;var I="before";i.PLACEMENT_BEFORE=I;var $="append";i.PLACEMENT_APPEND=$;var w="prepend";i.PLACEMENT_PREPEND=w;var V="SET_DRAG_PROGRESS";i.SET_DRAG_PROGRESS=V;var G="SET_DRAG_START";i.SET_DRAG_START=G;var K="SET_DRAG_END";i.SET_DRAG_END=K},2616:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.elasticSearchFormat=$;var O=r(e(92476)),g=e(41895),M=e(55805);function C(w,V){var G=Object.keys(w);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(w);V&&(K=K.filter(function(H){return Object.getOwnPropertyDescriptor(w,H).enumerable})),G.push.apply(G,K)}return G}function E(w){for(var V=1;V<arguments.length;V++){var G=arguments[V]!=null?arguments[V]:{};V%2?C(Object(G),!0).forEach(function(K){(0,O.default)(w,K,G[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(G)):C(Object(G)).forEach(function(K){Object.defineProperty(w,K,Object.getOwnPropertyDescriptor(G,K))})}return w}function L(w){if(w==null)return null;var V=w.split(",").map(Number);return{top_left:{lat:V[0],lon:V[1]},bottom_right:{lat:V[2],lon:V[3]}}}function T(w,V){if(w.length>1)return{gte:"".concat(w[0]),lte:"".concat(w[1])};var G=w[0];switch(V){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(G,"||/d"),lte:"".concat(G,"||+1d")};case"less_or_equal":return{lte:"".concat(G)};case"greater_or_equal":return{gte:"".concat(G)};case"less":return{lt:"".concat(G)};case"greater":return{gt:"".concat(G)};default:return}}function P(w){return{value:"*"+w+"*"}}function N(w,V){switch(w){case"AND":return V?"must_not":"must";case"OR":return V?"should_not":"should";case"NOT":return V?"must":"must_not";default:return}}function S(w,V,G){if(w==="boolean")return V;switch(G){case"term":case"wildcard":return"".concat(V,".keyword");case"geo_bounding_box":case"range":case"match":return V;default:return console.error("Can't determine query field for query type ".concat(G)),null}}function D(w){return{value:w}}function b(w,V){return w}function A(w,V,G,K,H){var _=b(K,H);switch(w){case"filter":return{script:H.operators[G].elasticSearchScript(K,V)};case"exists":return{field:K};case"match":return(0,O.default)({},_,V[0]);case"term":return(0,O.default)({},K,V[0]);case"geo_bounding_box":return(0,O.default)({},K,L(V[0]));case"range":return(0,O.default)({},K,T(V,G));case"wildcard":return(0,O.default)({},K,P(V[0]));case"regexp":return(0,O.default)({},K,D(V[0]));default:return}}function U(w,V,G,K,H){if(!(!w||!G||V==null)){var _=G,te=K.operators[_];if(te){var J=te,k=J.elasticSearchQueryType,R=!1;if(!k&&te.reversedOp){R=!0,_=te.reversedOp,te=K.operators[_];var m=te;k=m.elasticSearchQueryType}var s=(0,g.getWidgetForFieldOp)(K,w,_,H),c=K.widgets[s];if(c){var o=c.elasticSearchFormatValue,u;if(typeof k=="function"?u=k(s):u=k,!!u){var l;return typeof o=="function"?l=o(u,V,_,w,K):l=A(u,V,_,w,K),R?{bool:{must_not:(0,O.default)({},u,E({},l))}}:(0,O.default)({},u,E({},l))}}}}}function I(w,V,G,K,H){if(!(!w||!w.size)){var _=w.valueSeq().toArray(),te=N(V,G),J=_.map(function(R){return K(R,H)}).filter(function(R){return R!==void 0});if(J.length){var k=J.flat(1/0);return{bool:(0,O.default)({},te,k)}}}}function $(w,V){if(w){var G=w.get("type"),K=w.get("properties")||new Map;if(G==="rule"&&K.get("field")){var H,_,te=K.get("operator"),J=K.get("field"),k=K.get("value").toJS(),R=(H=K.get("valueType"))===null||H===void 0?void 0:H.get(0),m=(_=K.get("valueSrc"))===null||_===void 0?void 0:_.get(0);return m==="func"?void 0:k&&Array.isArray(k[0])?k[0].map(function(u){return U(J,[u],te,V,m)}):U(J,k,te,V,m)}if(G==="group"||G==="rule_group"){var s=K.get("not"),c=K.get("conjunction");c||(c=(0,M.defaultConjunction)(V));var o=w.get("children1");return I(o,c,s,$,V)}}}},92211:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e(27613);Object.keys(r).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===r[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return r[T]}})});var O=e(83183);Object.keys(O).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===O[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return O[T]}})});var g=e(64987);Object.keys(g).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===g[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return g[T]}})});var M=e(39016);Object.keys(M).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===M[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return M[T]}})});var C=e(17031);Object.keys(C).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===C[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return C[T]}})});var E=e(35192);Object.keys(E).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===E[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return E[T]}})});var L=e(2616);Object.keys(L).forEach(function(T){T==="default"||T==="__esModule"||T in i&&i[T]===L[T]||Object.defineProperty(i,T,{enumerable:!0,get:function(){return L[T]}})})},83183:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.jsonLogicFormat=void 0;var O=r(e(90890)),g=r(e(92476)),M=e(1218),C=e(24256),E=e(41895),L=e(55805),T=e(91152),P=e(40745),N=r(e(50234)),S=r(e(7275));function D(R,m){var s=Object.keys(R);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(R);m&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(R,o).enumerable})),s.push.apply(s,c)}return s}function b(R){for(var m=1;m<arguments.length;m++){var s=arguments[m]!=null?arguments[m]:{};m%2?D(Object(s),!0).forEach(function(c){(0,g.default)(R,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(s)):D(Object(s)).forEach(function(c){Object.defineProperty(R,c,Object.getOwnPropertyDescriptor(s,c))})}return R}function A(R,m){var s=typeof Symbol<"u"&&R[Symbol.iterator]||R["@@iterator"];if(!s){if(Array.isArray(R)||(s=U(R))||m&&R&&typeof R.length=="number"){s&&(R=s);var c=0,o=function(){};return{s:o,n:function(){return c>=R.length?{done:!0}:{done:!1,value:R[c++]}},e:function(h){throw h},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,l=!1,f;return{s:function(){s=s.call(R)},n:function(){var h=s.next();return u=h.done,h},e:function(h){l=!0,f=h},f:function(){try{!u&&s.return!=null&&s.return()}finally{if(l)throw f}}}}function U(R,m){if(R){if(typeof R=="string")return I(R,m);var s=Object.prototype.toString.call(R).slice(8,-1);if(s==="Object"&&R.constructor&&(s=R.constructor.name),s==="Map"||s==="Set")return Array.from(R);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return I(R,m)}}function I(R,m){(m==null||m>R.length)&&(m=R.length);for(var s=0,c=new Array(m);s<m;s++)c[s]=R[s];return c}var $=function(m,s){var c={usedFields:[],errors:[]},o=w(m,s,c,!0),u=c.errors,l=c.usedFields,f=s.settings.fieldSeparator,v={},h=A(l),a;try{for(h.s();!(a=h.n()).done;)for(var n=a.value,y=(0,C.getFieldConfig)(s,n)||{},p=n.split(f),F=v,B=0;B<p.length;B++){var Z=p[B],X=(0,C.getFieldConfig)(s,p.slice(0,B+1))||{};B!=p.length-1?X.type=="!group"&&X.mode!="struct"?(F[Z]||(F[Z]=[{}]),F=F[Z][0]):(F[Z]||(F[Z]={}),F=F[Z]):F[Z]||(F[Z]=null)}}catch(j){h.e(j)}finally{h.f()}return{errors:u,logic:o,data:v}};i.jsonLogicFormat=$;var w=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(m){var l=m.get("type"),f=m.get("properties")||new P.Map,v=f.get("isLocked"),h=s.settings.jsonLogic.lockedOp,a;return l==="group"||l==="rule_group"?a=V(m,s,c,o,u):l==="rule"&&(a=G(m,s,c,u)),v&&a&&h&&(a=(0,g.default)({},h,a)),a}},V=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,l=m.get("type"),f=m.get("properties")||new P.Map,v=f.get("mode"),h=m.get("children1"),a=f.get("field");if(h){var n=f.get("conjunction");n||(n=(0,L.defaultConjunction)(s));var y=s.conjunctions[n],p=y.jsonLogicConj||n.toLowerCase(),F=f.get("not");if(p!="and"&&p!="or"){c.errors.push("Conjunction ".concat(p," is not supported"));return}var B=l==="rule_group"&&!o,Z=B&&v!="struct"?a:u,X=f.get("operator"),j=X&&(0,C.getOperatorConfig)(s,X,a)||null,z=K(s,f,c,X,u),x=B&&(!X||j.cardinality==0),Y=h.map(function(se){return w(se,s,c,!1,Z)}).filter(function(se){return typeof se<"u"});if(B&&v!="struct"&&!x){if(z==null)return}else if(!Y.size)return;var re={};if(Y.size==1&&!o?re=Y.first():re[p]=Y.toList().toJS(),F&&(re={"!":re}),B&&v!="struct"){var ne=te(c,s,a,u);if(x){var ae=X||"some";re=(0,g.default)({},ae,[ne,re])}else{var ie=Y.size?{filter:[ne,re]}:ne,de={reduce:[ie,{"+":[1,{var:"accumulator"}]},0]};re=k(s,f,de,z,X)}}return re}},G=function(m,s,c){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=m.get("properties")||new P.Map,l=u.get("field"),f=u.get("operator"),v=u.get("operatorOptions");if(v=v?v.toJS():null,v&&!Object.keys(v).length&&(v=null),!(l==null||f==null)){var h=(0,C.getFieldConfig)(s,l)||{},a=(0,C.getOperatorConfig)(s,f,l)||{},n=a.reversedOp,y=(0,C.getOperatorConfig)(s,n,l)||{},p=!1;if(!a.jsonLogic&&!y.jsonLogic){c.errors.push("Operator ".concat(f," is not supported"));return}if(!a.jsonLogic&&y.jsonLogic){p=!0;var F=[n,f];f=F[0],n=F[1];var B=[y,a];a=B[0],y=B[1]}var Z=K(s,u,c,f,o);if(Z!==void 0){var X=te(c,s,l,o);return k(s,u,X,Z,f,v,h,p)}}},K=function(m,s,c,o,u){var l=s.get("field"),f=s.get("valueSrc"),v=s.get("valueType"),h=(0,C.getFieldConfig)(m,l)||{},a=(0,C.getOperatorConfig)(m,o,l)||{},n=(0,M.defaultValue)(a.cardinality,1),y=s.get("value"),p=s.get("asyncListValues");if(y!=null){var F=[],B=[],Z=c.usedFields,X=y.map(function(z,x){var Y=f?f.get(x):null,re=v?v.get(x):null,ne=(0,T.completeValue)(z,Y,m),ae=(0,E.getWidgetForFieldOp)(m,l,o,Y),ie=(0,N.default)((0,C.getFieldWidgetConfig)(m,l,o,ae,Y),["factory"]),de=H(c,m,ne,Y,re,ie,h,o,a,u,p);return de!==void 0&&(F.push(Y),B.push(re)),de}),j=X.filter(function(z){return z===void 0}).size>0;if(X.size<n||j){c.usedFields=Z;return}return n>1?X.toArray():n==1?X.first():null}},H=function(m,s,c,o,u,l,f,v,h){var a=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,n=arguments.length>10?arguments[10]:void 0;if(c!==void 0){var y;if(o=="field")y=te(m,s,c,a);else if(o=="func")y=_(m,s,c,a);else if(typeof l.jsonLogic=="function"){var p=l.jsonLogic,F=[c,b(b({},(0,S.default)(f,["fieldSettings","listValues"])),{},{asyncListValues:n}),(0,N.default)(l,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];v&&(F.push(v),F.push(h)),y=p.apply(void 0,F)}else y=c;return y}},_=function(m,s,c){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=c.get("func"),l=c.get("args"),f=(0,C.getFuncConfig)(s,u);if(!f.jsonLogic){m.errors.push("Func ".concat(u," is not supported"));return}var v={};for(var h in f.args){var a=f.args[h],n=(0,C.getFieldConfig)(s,a),y=l?l.get(h):void 0,p=y?y.get("value"):void 0,F=y?y.get("valueSrc"):void 0,B=H(m,s,p,F,a.type,n,a,null,null,o);if(p!=null&&B===void 0){m.errors.push("Can't format value of arg ".concat(h," for func ").concat(u));return}B!==void 0&&(v[h]=B)}var Z=Object.values(v),X;if(typeof f.jsonLogic=="function"){var j=f.jsonLogic,z=[v];X=j.apply(void 0,z)}else{var x=f.jsonLogic||u,Y=!!f.jsonLogicIsMethod;if(Y){var re=Z[0],ne=Z.slice(1);ne.length?X={method:[re,x,ne]}:X={method:[re,x]}}else X=(0,g.default)({},x,Z)}return X},te=function(m,s,c){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=s.settings,l=u.fieldSeparator,f=u.jsonLogic,v;if(c){Array.isArray(c)&&(c=c.join(l));var h=(0,C.getFieldConfig)(s,c)||{},a=c;if(h.fieldName&&(a=h.fieldName),o){var n=(0,C.getFieldConfig)(s,o)||{},y=o;n.fieldName&&(y=n.fieldName),a.indexOf(y+l)==0?a=a.slice((y+l).length):m.errors.push("Can't cut group ".concat(y," from field ").concat(a))}var p=h.jsonLogicVar||(h.type=="!group"?f.groupVarKey:"var");v=(0,g.default)({},p,a),m.usedFields.indexOf(c)==-1&&m.usedFields.push(c)}return v},J=function(m,s,c,o){var u=m,l=(0,M.defaultValue)(s.cardinality,1),f=(0,M.defaultValue)(s._jsonLogicIsRevArgs,!1);typeof s.jsonLogic=="string"&&(u=s.jsonLogic);var v=["<","<=",">",">="],h=["==","!="],a=function(y,p,F,B,Z){return l==0&&h.includes(u)?(0,g.default)({},u,[c,null]):l==0?(0,g.default)({},u,c):l==1&&f?(0,g.default)({},u,[o,c]):l==1?(0,g.default)({},u,[c,o]):l==2&&v.includes(u)?(0,g.default)({},u,[o[0],c,o[1]]):(0,g.default)({},u,[c].concat((0,O.default)(o)))};return a},k=function(m,s,c,o,u){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,v=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,h=s.get("field"),a=(0,C.getOperatorConfig)(m,u,h)||{},n=typeof a.jsonLogic=="function"?a.jsonLogic:J(u,a,c,o),y=[c,u,o,(0,N.default)(a,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),l,f],p=n.apply(void 0,y);return v&&(p={"!":p}),p}},64987:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.mongodbFormat=i._mongodbFormat=void 0;var O=r(e(47452)),g=r(e(92476)),M=r(e(90890)),C=r(e(33805)),E=e(1218),L=e(24256),T=e(41895),P=e(55805),N=e(91152),S=r(e(50234)),D=r(e(7275)),b=e(40745),A=e(93876);function U(R,m){var s=Object.keys(R);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(R);m&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(R,o).enumerable})),s.push.apply(s,c)}return s}function I(R){for(var m=1;m<arguments.length;m++){var s=arguments[m]!=null?arguments[m]:{};m%2?U(Object(s),!0).forEach(function(c){(0,g.default)(R,c,s[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(s)):U(Object(s)).forEach(function(c){Object.defineProperty(R,c,Object.getOwnPropertyDescriptor(s,c))})}return R}var $=function(m){return(0,C.default)(m)=="object"&&m!==null&&!Array.isArray(m)},w=function(m,s){return V(m,s,!1)};i.mongodbFormat=w;var V=function(m,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o={errors:[]},u=G([],m,s,o);return c?[u,o.errors]:(o.errors.length&&console.warn("Errors while exporting to MongoDb:",o.errors),u)};i._mongodbFormat=V;var G=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,v=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0;if(s){var h=s.get("type");if(h==="group"||h==="rule_group")return K(m,s,c,o,u,l,f,v);if(h==="rule")return H(m,s,c,o,u,l,f,v)}},K=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,v=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,h=s.get("type"),a=s.get("properties")||new b.Map,n=s.get("children1"),y=c.settings.canShortMongoQuery;if(n){var p=m.filter(function(he){return he.get("type")=="rule_group"}).length>0,F=m.filter(function(he){return he.get("type")=="rule_group"}).map(function(he){return he.get("properties").get("field")}).slice(-1).pop(),B=p&&F,Z=h==="rule_group"?a.get("field"):null,X=te(Z,c,o,B),j=(0,L.getFieldConfig)(c,Z)||{},z=j.mode,x=Z&&z=="array",Y=u?!a.get("not"):a.get("not"),re=n.map(function(he){return G([].concat((0,M.default)(m),[s]),he,c,o,Y,!0,z=="array"?function(Le){return"$$el.".concat(Le)}:void 0)}).filter(function(he){return typeof he<"u"});if(!(!x&&!re.size)){var ne=a.get("conjunction");ne||(ne=(0,P.defaultConjunction)(c));var ae=c.conjunctions[ne],ie=ae.reversedConj;Y&&ie&&(ne=ie,ae=c.conjunctions[ne]);var de=ae.mongoConj,se;if(re.size==1)se=re.first();else if(re.size>1){var ge=re.toList().toJS(),ye=y&&de=="$and";ye&&(se=ge.reduce(function(he,Le){if(he){for(var Fe in Le){if(Fe[0]=="$"){he=void 0;break}if(he[Fe]==null)he[Fe]=Le[Fe];else{var We=he[Fe],Ue=Le[Fe];$(We)||(We={$eq:We}),$(Ue)||(Ue={$eq:Ue});var He=Object.keys(We)[0],ke=Object.keys(Ue)[0];if(He==ke){he=void 0;break}he[Fe]=Object.assign({},We,Ue)}}return he}},{})),se||(se=(0,g.default)({},de,ge))}if(Z)if(z=="array"){var Ee={$size:X},Te=se?{$size:{$filter:{input:"$"+X,as:"el",cond:se}}}:Ee;se=G(m,s.set("type","rule"),c,o,!1,!1,function(he){return Te},Ee),se={$expr:se}}else se=(0,g.default)({},X,{$elemMatch:se});return se}}},H=function(m,s,c,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:void 0,v=arguments.length>7&&arguments[7]!==void 0?arguments[7]:void 0,h=s.get("properties")||new b.Map,a=m.filter(function(qe){return qe.get("type")=="rule_group"}).length>0,n=m.filter(function(qe){return qe.get("type")=="rule_group"}).map(function(qe){return qe.get("properties").get("field")}).slice(-1).pop(),y=a&&n,p=h.get("operator"),F=h.get("operatorOptions"),B=h.get("field"),Z=h.get("value"),X=h.get("valueSrc"),j=h.get("valueType"),z=h.get("asyncListValues");if(!(B==null||p==null||Z===void 0)){var x=(0,L.getFieldConfig)(c,B)||{},Y=(0,L.getOperatorConfig)(c,p,B)||{},re=Y.reversedOp,ne=(0,L.getOperatorConfig)(c,re,B)||{},ae=(0,E.defaultValue)(Y.cardinality,1),ie=u;if(ie&&re){var de=[re,p];p=de[0],re=de[1];var se=[ne,Y];Y=se[0],ne=se[1],ie=!1}var ge=te(B,c,o,y),ye=[],Ee=[],Te=!1,he=Z.map(function(qe,ze){var fe=X?X.get(ze):null,Oe=j?j.get(ze):null,Re=(0,N.completeValue)(qe,fe,c),Ae=(0,T.getWidgetForFieldOp)(c,B,p,fe),be=(0,S.default)((0,L.getFieldWidgetConfig)(c,B,p,Ae,fe),["factory"]),Ve=_(o,c,Re,fe,Oe,be,x,y,p,Y,z),De=(0,O.default)(Ve,2),$e=De[0],at=De[1];return $e!==void 0&&(Te=Te||at,ye.push(fe),Ee.push(Oe)),$e});f&&(Te=!0);var Le=Te&&l,Fe=he.filter(function(qe){return qe===void 0}).size>0;if(!(he.size<ae||Fe)){var We=ae>1?he.toArray():ae==1?he.first():null,Ue=Y.mongoFormatOp;if(!Ue){o.errors.push("Operator ".concat(p," is not supported"));return}var He=[f?f(ge):ge,p,v!==void 0&&We==null?v:We,Te,ye.length>1?ye:ye[0],Ee.length>1?Ee:Ee[0],(0,S.default)(Y,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),F,x],ke=Ue.apply(void 0,He);return Le&&(ke={$expr:ke}),ie&&(ke={$not:ke}),ke}}},_=function(m,s,c,o,u,l,f,v,h,a,n){if(c===void 0)return[void 0,!1];var y,p=!1;if(o=="field"){var F=J(m,s,c,v),B=(0,O.default)(F,2);y=B[0],p=B[1]}else if(o=="func"){var Z=k(m,s,c,v),X=(0,O.default)(Z,2);y=X[0],p=X[1]}else if(typeof l.mongoFormatValue=="function"){var j=l.mongoFormatValue,z=[c,I(I({},(0,D.default)(f,["fieldSettings","listValues"])),{},{asyncListValues:n}),(0,S.default)(l,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];h&&(z.push(h),z.push(a)),y=j.apply(void 0,z)}else y=c;return[y,p]},te=function(m,s,c,o){if(m){var u=(0,L.getFieldConfig)(s,m)||{},l=s.settings.fieldSeparator,f=Array.isArray(m)?m:m.split(l),v=Array.isArray(m)?m.join(l):m;if(u.fieldName&&(v=u.fieldName),o){var h=(0,L.getFieldConfig)(s,o)||{},a=o;h.fieldName&&(a=h.fieldName),v.indexOf(a+".")==0?v=v.slice((a+".").length):c.errors.push("Can't cut group ".concat(a," from field ").concat(v))}return v}},J=function(m,s,c,o){var u=s.settings.fieldSeparator,l,f=!0;if(c){var v=(0,L.getFieldConfig)(s,c)||{},h=Array.isArray(c)?c:c.split(u),a=(0,T.getFieldPath)(c,s),n=(0,T.getFieldPathLabels)(c,s),y=n?n.join(u):null,p=s.settings.formatField||A.settings.formatField,F=te(c,s,m,o),B=p(F,h,y,v,s,!1);l="$"+B}return[l,f]},k=function(m,s,c,o){var u=!0,l,f=c.get("func"),v=c.get("args"),h=(0,L.getFuncConfig)(s,f),a=h.mongoFunc||f,n=h.mongoArgsAsObject,y={},p=0,F=void 0;for(var B in h.args){var Z=h.args[B],X=(0,L.getFieldConfig)(s,Z),j=v?v.get(B):void 0,z=j?j.get("value"):void 0,x=j?j.get("valueSrc"):void 0,Y=j?j.get("asyncListValues"):void 0,re=(0,T.getWidgetForFieldOp)(s,X,null,x),ne=(0,S.default)((0,L.getFieldWidgetConfig)(s,X,null,re,x),["factory"]),ae=_(m,s,z,x,Z.type,ne,X,o,null,null,Y),ie=(0,O.default)(ae,2),de=ie[0],se=ie[1];if(z!=null&&de===void 0)return m.errors.push("Can't format value of arg ".concat(B," for func ").concat(f)),[void 0,!1];p++,de!==void 0&&(y[B]=de,F=de)}if(typeof h.mongoFormatFunc=="function"){var ge=h.mongoFormatFunc,ye=[y];l=ge.apply(void 0,ye)}else{if(h.mongoFormatFunc===null)return m.errors.push("Functon ".concat(a," is not supported")),[void 0,!1];n?l=(0,g.default)({},a,y):p==1&&F!==void 0?l=(0,g.default)({},a,F):l=(0,g.default)({},a,Object.values(y))}return[l,u]}},27613:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.queryBuilderFormat=void 0;var O=r(e(92476)),g=e(1218),M=e(24256),C=e(55805),E=e(41895),L=e(91152),T=e(40745);function P(U,I){var $=Object.keys(U);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(U);I&&(w=w.filter(function(V){return Object.getOwnPropertyDescriptor(U,V).enumerable})),$.push.apply($,w)}return $}function N(U){for(var I=1;I<arguments.length;I++){var $=arguments[I]!=null?arguments[I]:{};I%2?P(Object($),!0).forEach(function(w){(0,O.default)(U,w,$[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors($)):P(Object($)).forEach(function(w){Object.defineProperty(U,w,Object.getOwnPropertyDescriptor($,w))})}return U}var S=function(I,$){var w={usedFields:[]},V=D(I,$,w);if(V)return N(N({},V),w)};i.queryBuilderFormat=S;var D=function(I,$,w){if(I){var V=I.get("type"),G=I.get("children1");if((V==="group"||V==="rule_group")&&G&&G.size)return b(I,$,w);if(V==="rule")return A(I,$,w)}},b=function(I,$,w){var V=I.get("properties")||new T.Map,G=I.get("children1"),K=I.get("id"),H=G.map(function(k){return D(k,$,w)}).filter(function(k){return typeof k<"u"});if(H.size){var _=V.get("conjunction");_||(_=(0,C.defaultConjunction)($));var te=V.get("not"),J={id:K,rules:H.toList(),condition:_.toUpperCase(),not:te};return J}},A=function(I,$,w){var V=I.get("properties")||new T.Map,G=I.get("id"),K=V.get("operator"),H=V.get("operatorOptions"),_=V.get("field"),te=V.get("value"),J=V.get("valueSrc"),k=V.get("valueType"),R=te.filter(function(p){return p===void 0}).size>0;if(!(_==null||K==null||R)){var m=(0,M.getFieldConfig)($,_)||{},s=(0,M.getOperatorConfig)($,K,_)||{},c=m.type||"undefined",o=(0,g.defaultValue)(s.cardinality,1),u=$.types[m.type]||{},l=(0,E.formatFieldName)(_,$,w);if(!(te.size<o)){w.usedFields.indexOf(_)==-1&&w.usedFields.push(_),te=te.toArray(),J=J.toArray(),k=k.toArray();for(var f=[],v=0;v<te.length;v++){var h={type:k[v],value:te[v]};if(f.push(h),J[v]=="field"){var a=te[v];w.usedFields.indexOf(a)==-1&&w.usedFields.push(a)}}var n=H?H.toJS():null;n&&!Object.keys(n).length&&(n=null);var y={id:G,fieldName:l,type:c,input:u.mainWidget,operator:K};return n&&(y.operatorOptions=n),y.values=f,y}}}},35192:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.queryString=void 0;var O=r(e(92476)),g=r(e(47452)),M=r(e(90890)),C=e(24256),E=e(41895),L=r(e(50234)),T=r(e(7275)),P=e(1218),N=e(55805),S=e(93876),D=e(91152),b=e(40745);function A(J,k){var R=Object.keys(J);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(J);k&&(m=m.filter(function(s){return Object.getOwnPropertyDescriptor(J,s).enumerable})),R.push.apply(R,m)}return R}function U(J){for(var k=1;k<arguments.length;k++){var R=arguments[k]!=null?arguments[k]:{};k%2?A(Object(R),!0).forEach(function(m){(0,O.default)(J,m,R[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(R)):A(Object(R)).forEach(function(m){Object.defineProperty(J,m,Object.getOwnPropertyDescriptor(R,m))})}return J}var I=function(k,R){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s={errors:[]},c=$(k,R,s,m,null);return s.errors.length&&console.warn("Errors while exporting to string:",s.errors),c};i.queryString=I;var $=function(k,R,m){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(k){var o=k.get("type"),u=k.get("children1");if(o==="group"||o==="rule_group")return w(k,R,m,s,c);if(o==="rule")return K(k,R,m,s,c)}},w=function(k,R,m){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=k.get("type"),u=k.get("properties")||new b.Map,l=u.get("mode"),f=k.get("children1");if(f){var v=o==="rule_group",h=v&&l=="array"?u.get("field"):null,a=v&&l=="array",n=u.get("not"),y=f.map(function(Y){return $(Y,R,m,s,h)}).filter(function(Y){return typeof Y<"u"});if(!(!a&&!y.size)){var p=u.get("conjunction");p||(p=(0,N.defaultConjunction)(R));var F=R.conjunctions[p],B=y.size?F.formatConj(y,p,n,s):null,Z;if(h){var X=K(k,R,m,s,c,!0);if(X){var j,z=X.pop(),x=[B].concat((0,M.default)(X));Z=(j=R.settings).formatAggr.apply(j,(0,M.default)(x)),z&&(Z=R.settings.formatReverse(Z,null,null,null,null,s))}}else Z=B;return Z}}},V=function(k,R,m,s,c,o){var u=R.get("field"),l=R.get("valueSrc"),f=R.get("valueType"),v=(0,C.getFieldConfig)(k,u)||{},h=s||R.get("operator"),a=(0,C.getOperatorConfig)(k,h,u)||{},n=(0,P.defaultValue)(a.cardinality,1),y=R.get("value"),p=R.get("asyncListValues"),F=[],B=[],Z;if(y!=null){var X=y.map(function(z,x){var Y=l?l.get(x):null,re=f?f.get(x):null,ne=(0,D.completeValue)(z,Y,k),ae=(0,E.getWidgetForFieldOp)(k,u,h,Y),ie=(0,L.default)((0,C.getFieldWidgetConfig)(k,u,h,ae,Y),["factory"]),de=H(k,m,ne,Y,re,ie,v,h,a,c,o,p);return de!==void 0&&(F.push(Y),B.push(re)),de}),j=X.filter(function(z){return z===void 0}).size>0;j||X.size<n||(Z=n==1?X.first():X)}return[Z,F.length>1?F:F[0],B.length>1?B:B[0]]},G=function(k,R){var m=R.labelForFormat||k,s=(0,P.defaultValue)(R.cardinality,1),c;return s==0?c=function(u,l,f,v,h,a,n,y){return"".concat(u," ").concat(m)}:s==1?c=function(u,l,f,v,h,a,n,y){return"".concat(u," ").concat(m," ").concat(f)}:s==2&&(c=function(u,l,f,v,h,a,n,y){var p=f.first(),F=f.get(1);return"".concat(u," ").concat(m," ").concat(p," AND ").concat(F)}),c},K=function(k,R,m){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,u=k.get("properties")||new b.Map,l=u.get("field"),f=u.get("operator"),v=u.get("operatorOptions");if(!(l==null||f==null)){var h=(0,C.getFieldConfig)(R,l)||{},a=(0,C.getOperatorConfig)(R,f,l)||{},n=a.reversedOp,y=(0,C.getOperatorConfig)(R,n,l)||{},p=!1,F=a.formatOp;if(!F&&n&&(F=y.formatOp,F)){p=!0;var B=[n,f];f=B[0],n=B[1];var Z=[y,a];a=Z[0],y=Z[1]}if(F||(F=G(f,a)),!!F){var X=_(R,m,l,s,c),j=V(R,u,m,f,s,c),z=(0,g.default)(j,3),x=z[0],Y=z[1],re=z[2];if(x!==void 0){var ne=[X,f,x,Y,re,(0,L.default)(a,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),v,s,h,p];if(o)return ne;var ae=F.apply(void 0,ne);return p&&(ae=R.settings.formatReverse(ae,f,n,a,y,s)),ae}}}},H=function(k,R,m,s,c,o,u,l,f,v){var h=arguments.length>10&&arguments[10]!==void 0?arguments[10]:null,a=arguments.length>11?arguments[11]:void 0;if(m!==void 0){var n;if(s=="field")n=_(k,R,m,v,h);else if(s=="func")n=te(k,R,m,v,h);else if(typeof o.formatValue=="function"){var y=o.formatValue,p=[m,U(U({},(0,T.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:a}),(0,L.default)(o,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"]),v];if(l&&(p.push(l),p.push(f)),s=="field"){var F=(0,C.getFieldConfig)(k,m)||{};p.push(F)}n=y.apply(void 0,p)}else n=m;return n}},_=function(k,R,m,s){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,u=k.settings,l=u.fieldSeparator,f=u.fieldSeparatorDisplay,v=null;if(m){var h=(0,C.getFieldConfig)(k,m)||{},a=Array.isArray(m)?m:m.split(l),n=(0,E.getFieldPath)(m,k),y=(0,E.getFieldPathLabels)(m,k,o?c:null),p=y?y.join(f):null,F=h.label2||p,B=k.settings.formatField||S.settings.formatField,Z=(0,E.formatFieldName)(m,k,R,o?c:null);v=B(Z,a,F,h,k,s)}return v},te=function(k,R,m,s){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,o=m.get("func"),u=m.get("args"),l=(0,C.getFuncConfig)(k,o),f=s&&l.label||o,v={},h={};for(var a in l.args){var n=l.args[a],y=(0,C.getFieldConfig)(k,n),p=u?u.get(a):void 0,F=p?p.get("value"):void 0,B=p?p.get("valueSrc"):void 0,Z=p?p.get("asyncListValues"):void 0,X=H(k,R,F,B,n.type,y,n,null,null,s,c,Z),j=s&&n.label||a;X!==void 0&&(v[a]=X,h[j]=X)}var z=null;if(typeof l.formatFunc=="function"){var x=l.formatFunc,Y=[v,s];z=x.apply(void 0,Y)}else{var re=Object.entries(h).map(function(ne){var ae=(0,g.default)(ne,2),ie=ae[0],de=ae[1];return s?"".concat(ie,": ").concat(de):"".concat(de)}).join(", ");z="".concat(f,"(").concat(re,")")}return z}},17031:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.spelFormat=i._spelFormat=void 0;var O=r(e(33138)),g=r(e(92476)),M=r(e(47452)),C=e(24256),E=e(41895),L=r(e(50234)),T=r(e(7275)),P=e(1218),N=e(55805),S=e(93876),D=e(91152),b=e(40745),A=e(69664);function U(o,u){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);u&&(f=f.filter(function(v){return Object.getOwnPropertyDescriptor(o,v).enumerable})),l.push.apply(l,f)}return l}function I(o){for(var u=1;u<arguments.length;u++){var l=arguments[u]!=null?arguments[u]:{};u%2?U(Object(l),!0).forEach(function(f){(0,g.default)(o,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):U(Object(l)).forEach(function(f){Object.defineProperty(o,f,Object.getOwnPropertyDescriptor(l,f))})}return o}var $=function(u,l){return w(u,l,!1)};i.spelFormat=$;var w=function(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,v={errors:[]},h=V(u,l,v,null);return f?[h,v.errors]:(v.errors.length&&console.warn("Errors while exporting to SpEL:",v.errors),h)};i._spelFormat=w;var V=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(u){var h=u.get("type");if(h==="group"||h==="rule_group")return H(u,l,f,v);if(h==="rule")return k(u,l,f,v);if(h=="switch_group")return K(u,l,f,v);if(h=="case_group")return G(u,l,f,v)}},G=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=u.get("type");if(h!="case_group"){f.errors.push("Unexpected child of type ".concat(h," inside switch"));return}var a=u.get("properties")||new b.Map,n=R(l,a,f,null,v,"!case_value"),y=(0,M.default)(n,3),p=y[0],F=y[1],B=y[2],Z=H(u,l,f,v);return[Z,p]},K=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=u.get("properties")||new b.Map,a=u.get("children1");if(a){var n=a.map(function(x){return G(x,l,f,null)}).filter(function(x){return typeof x<"u"}).toArray();if(n.length){if(n.length==1&&!n[0][0])return n[0][1];for(var y=[],p=0;p<n.length;p++)p!=n.length-1&&!n[p][0]?f.errors.push("No condition for case ".concat(p)):(y.push(n[p]),p==n.length-1&&n[p][0]&&y.push([void 0,null]));for(var F="",B="",Z=0;Z<y.length;Z++){var X=(0,M.default)(y[Z],2),j=X[0],z=X[1];z==null&&(z="null"),j==null&&(j="true"),Z!=y.length-1?(F+="(".concat(j," ? ").concat(z," : "),B+=")"):F+="".concat(z)}return F+B}}},H=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=u.get("type"),a=u.get("properties")||new b.Map,n=a.get("mode"),y=u.get("children1"),p=a.get("field");if(y){var F=a.get("conjunction");F||(F=(0,N.defaultConjunction)(l));var B=l.conjunctions[F],Z=a.get("not"),X=h==="rule_group",j=X&&n!="struct",z=j?p:v,x=(0,C.getFieldConfig)(l,z)||{},Y=x.isSpelArray,re=a.get("operator");!re&&(!n||n=="some")&&(re="some");var ne=J(l,re,p),ae=ne!=re,ie=re&&(0,C.getOperatorConfig)(l,ne,p)||null,de=X&&(!ne||ie.cardinality==0),se=R(l,a,f,ne,v,null),ge=(0,M.default)(se,3),ye=ge[0],Ee=ge[1],Te=ge[2],he=y.map(function(fe){return V(fe,l,f,z)}).filter(function(fe){return typeof fe<"u"});if(j&&!de){if(ye==null)return}else if(!he.size)return;var Le=X,Fe=he.size?B.spelFormatConj(he,F,Z,Le):null,We;if(j){var Ue=s(f,l,p,v),He=Y?".length":".size()",ke="".concat(Ue).concat(He),qe=Fe?"".concat(Ue,".?[").concat(Fe,"]").concat(He):ke,ze=de?ke:ye;We=te(f,l,a,qe,ze,ne,Ee,Te,ae)}else We=Fe;return We}},_=function(u,l){var f=l.spelOp;if(f){var v=f[0]=="$",h=f[0]=="."||v,a=h?f.slice(1):f,n,y=(0,P.defaultValue)(l.cardinality,1);return y==0?n=function(F,B,Z,X,j,z,x,Y){return h?"".concat(F,".").concat(a,"()"):"".concat(F," ").concat(a)}:y==1&&(n=function(F,B,Z,X,j,z,x,Y){return v?"".concat(Z,".").concat(a,"(").concat(F,")"):h?"".concat(F,".").concat(a,"(").concat(Z,")"):"".concat(F," ").concat(a," ").concat(Z)}),n}},te=function(u,l,f,v,h,a,n,y){var p=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,F=f.get("field"),B=(0,C.getOperatorConfig)(l,a,F)||{},Z=(0,C.getFieldConfig)(l,F)||{},X=f.get("operatorOptions"),j=B.spelFormatOp||_(a,B);if(!j){u.errors.push("Operator ".concat(a," is not supported"));return}var z=[v,a,h,n,y,(0,L.default)(B,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),X,Z],x;return x=j.apply(void 0,z),p&&(x=l.settings.spelFormatReverse(x)),x===void 0&&u.errors.push("Operator ".concat(a," is not supported for value source ").concat(n)),x},J=function(u,l,f){if(l){var v=(0,C.getOperatorConfig)(u,l,f)||{},h=v.reversedOp,a=(0,C.getOperatorConfig)(u,h,f)||{},n=!1,y=v.spelOp||v.spelFormatOp,p=a.spelOp||a.spelFormatOp;if(!(!y&&!p)){if(!y&&p){n=!0;var F=[h,l];l=F[0],h=F[1];var B=[a,v];v=B[0],a=B[1]}return l}}},k=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=u.get("properties")||new b.Map,a=h.get("field"),n=h.get("operator");if(!(a==null||n==null)){var y=J(l,n,a);if(!y){f.errors.push("Operator ".concat(n," is not supported"));return}var p=y!=n,F=R(l,h,f,y,v,null),B=(0,M.default)(F,3),Z=B[0],X=B[1],j=B[2];if(Z!==void 0){var z=s(f,l,a,v),x=te(f,l,h,z,Z,y,X,j,p);return x}}},R=function(u,l,f,v,h){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,n=l.get("field"),y=l.get("valueSrc"),p=l.get("valueType");(a=="!case_value"||p&&p.get(0)=="case_value")&&(n="!case_value");var F=(0,C.getFieldConfig)(u,n)||{},B=(0,C.getOperatorConfig)(u,v,n)||{},Z=(0,P.defaultValue)(B.cardinality,1),X=l.get("value"),j=l.get("asyncListValues"),z=[],x=[],Y;if(X!=null){var re=X.map(function(ae,ie){var de=y?y.get(ie):null,se=p?p.get(ie):null,ge=(0,D.completeValue)(ae,de,u),ye=(0,E.getWidgetForFieldOp)(u,n,v,de),Ee=(0,L.default)((0,C.getFieldWidgetConfig)(u,n,v,ye,de),["factory"]),Te=m(f,u,ge,de,se,Ee,F,v,B,h,j);return Te!==void 0&&(z.push(de),x.push(se)),Te}),ne=re.filter(function(ae){return ae===void 0}).size>0;re.size<Z||ne||(Y=Z>1?re.toArray():Z==1?re.first():null)}return[Y,z.length>1?z:z[0],x.length>1?x:x[0]]},m=function(u,l,f,v,h,a,n,y,p){var F=arguments.length>9&&arguments[9]!==void 0?arguments[9]:null,B=arguments.length>10?arguments[10]:void 0;if(f!==void 0){var Z;if(v=="field")Z=s(u,l,f,F);else if(v=="func")Z=c(u,l,f,F);else if(typeof a.spelFormatValue=="function"){var X=a.spelFormatValue,j=[f,I(I({},(0,T.default)(n,["fieldSettings","listValues"])),{},{asyncListValues:B}),(0,L.default)(a,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(y&&(j.push(y),j.push(p)),v=="field"){var z=(0,C.getFieldConfig)(l,f)||{};j.push(z)}Z=X.apply(void 0,j)}else Z=(0,A.spelEscape)(f);return Z}},s=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(f){var h=l.settings.fieldSeparator,a=(0,C.getFieldConfig)(l,f)||{},n=Array.isArray(f)?f:f.split(h),y=(0,E.getFieldPath)(f,l,v),p=(0,E.getFieldPartsConfigs)(f,l,v),F=l.settings.formatSpelField,B=(0,E.formatFieldName)(f,l,u);if(v){var Z=(0,C.getFieldConfig)(l,v)||{},X=v;Z.fieldName&&(X=Z.fieldName),B.indexOf(X+h)==0?B=B.slice((X+h).length):u.errors.push("Can't cut group ".concat(X," from field ").concat(B))}var j=p.map(function(x){var Y=(0,M.default)(x,3),re=Y[0],ne=Y[1],ae=Y[2],ie;ae&&(ae.type=="!struct"||ae.type=="!group"&&ae.mode=="struct"?ie=ne.isSpelMap?"map":"class":ae.type=="!group"?ie=ne.isSpelItemMap?"[map]":"[class]":ie="class");var de=ne?.isSpelVariable;return{key:re,parent:ie,isSpelVariable:de}}),z=F(B,v,n,j,a,l);return z}},c=function(u,l,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=f.get("func"),a=f.get("args"),n=(0,C.getFuncConfig)(l,h),y=n.spelFunc||h,p={};for(var F in n.args){var B=n.args[F],Z=(0,C.getFieldConfig)(l,B),X=a?a.get(F):void 0,j=X?X.get("value"):void 0,z=X?X.get("valueSrc"):void 0,x=X?X.get("asyncListValues"):void 0,Y=m(u,l,j,z,B.type,Z,B,null,null,v,x);if(j!=null&&Y===void 0){u.errors.push("Can't format value of arg ".concat(F," for func ").concat(h));return}Y!==void 0&&(p[F]=Y)}var re;if(typeof n.spelFormatFunc=="function"){var ne=n.spelFormatFunc,ae=[p];re=ne.apply(void 0,ae)}else{var ie=Object.entries(p).map(function(ye){var Ee=(0,M.default)(ye,2),Te=Ee[0],he=Ee[1];return he});if(y[0]=="."&&ie.length){var de=(0,O.default)(ie),se=de[0],ge=de.slice(1);re="".concat(se).concat(y,"(").concat(ge.join(", "),")")}else re="".concat(y,"(").concat(ie.join(", "),")")}return re}},39016:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.sqlFormat=i._sqlFormat=void 0;var O=r(e(47452)),g=r(e(92476)),M=e(24256),C=e(41895),E=r(e(50234)),L=r(e(7275)),T=e(1218),P=e(55805),N=e(93876),S=e(91152),D=e(40745),b=e(69664);function A(J,k){var R=Object.keys(J);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(J);k&&(m=m.filter(function(s){return Object.getOwnPropertyDescriptor(J,s).enumerable})),R.push.apply(R,m)}return R}function U(J){for(var k=1;k<arguments.length;k++){var R=arguments[k]!=null?arguments[k]:{};k%2?A(Object(R),!0).forEach(function(m){(0,g.default)(J,m,R[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(R)):A(Object(R)).forEach(function(m){Object.defineProperty(J,m,Object.getOwnPropertyDescriptor(R,m))})}return J}var I=function(k,R){return $(k,R,!1)};i.sqlFormat=I;var $=function(k,R){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s={errors:[]},c=w(k,R,s);return m?[c,s.errors]:(s.errors.length&&console.warn("Errors while exporting to SQL:",s.errors),c)};i._sqlFormat=$;var w=function(k,R,m){if(k){var s=k.get("type"),c=k.get("children1");if((s==="group"||s==="rule_group")&&c&&c.size)return V(k,R,m);if(s==="rule")return K(k,R,m)}},V=function(k,R,m){var s=k.get("type"),c=k.get("properties")||new D.Map,o=k.get("children1"),u=s==="rule_group"?c.get("field"):null,l=(0,M.getFieldConfig)(R,u)||{};l.mode=="array"&&m.errors.push("Aggregation is not supported for ".concat(u));var f=c.get("not"),v=o.map(function(n){return w(n,R,m)}).filter(function(n){return typeof n<"u"});if(v.size){var h=c.get("conjunction");h||(h=(0,P.defaultConjunction)(R));var a=R.conjunctions[h];return a.sqlFormatConj(v,h,f)}},G=function(k,R){var m=R.sqlOp||k,s=(0,T.defaultValue)(R.cardinality,1),c;return s==0?c=function(u,l,f,v,h,a,n,y){return"".concat(u," ").concat(m)}:s==1?c=function(u,l,f,v,h,a,n,y){return"".concat(u," ").concat(m," ").concat(f)}:s==2&&(c=function(u,l,f,v,h,a,n,y){var p=f.first(),F=f.get(1);return"".concat(u," ").concat(m," ").concat(p," AND ").concat(F)}),c},K=function(k,R,m){var s=k.get("properties")||new D.Map,c=s.get("field"),o=s.get("operator"),u=s.get("operatorOptions"),l=s.get("valueSrc"),f=s.get("valueType"),v=s.get("value"),h=s.get("asyncListValues");if(!(c==null||o==null)){var a=(0,M.getFieldConfig)(R,c)||{},n=(0,M.getOperatorConfig)(R,o,c)||{},y=n.reversedOp,p=(0,M.getOperatorConfig)(R,y,c)||{},F=(0,T.defaultValue)(n.cardinality,1),B=!1,Z=n.sqlOp||n.sqlFormatOp,X=p.sqlOp||p.sqlFormatOp;if(!Z&&!X){m.errors.push("Operator ".concat(o," is not supported"));return}if(!X&&X){B=!0;var j=[y,o];o=j[0],y=j[1];var z=[p,n];n=z[0],p=z[1]}var x=[],Y=[],re=v.map(function(ye,Ee){var Te=l?l.get(Ee):null,he=f?f.get(Ee):null,Le=(0,S.completeValue)(ye,Te,R),Fe=(0,C.getWidgetForFieldOp)(R,c,o,Te),We=(0,E.default)((0,M.getFieldWidgetConfig)(R,c,o,Fe,Te),["factory"]),Ue=H(m,R,Le,Te,he,We,a,o,n,h);return Ue!==void 0&&(x.push(Te),Y.push(he)),Ue}),ne=re.filter(function(ye){return ye===void 0}).size>0;if(!(ne||re.size<F)){var ae=F==1?re.first():re,ie=n.sqlFormatOp||G(o,n);if(!ie){m.errors.push("Operator ".concat(o," is not supported"));return}var de=_(m,R,c),se=[de,o,ae,x.length>1?x:x[0],Y.length>1?Y:Y[0],(0,E.default)(n,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),u,a],ge;if(ge=ie.apply(void 0,se),B&&(ge=R.settings.sqlFormatReverse(ge)),ge===void 0){m.errors.push("Operator ".concat(o," is not supported for value source ").concat(x.join(", ")));return}return ge}}},H=function(k,R,m,s,c,o,u,l,f,v){if(m!==void 0){var h;if(s=="field")h=_(k,R,m);else if(s=="func")h=te(k,R,m);else if(typeof o.sqlFormatValue=="function"){var a=o.sqlFormatValue,n=[m,U(U({},(0,L.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:v}),(0,E.default)(o,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(l&&(n.push(l),n.push(f)),s=="field"){var y=(0,M.getFieldConfig)(R,m)||{};n.push(y)}h=a.apply(void 0,n)}else Array.isArray(m)?h=m.map(function(p){return b.SqlString.escape(p)}):h=b.SqlString.escape(m);return h}},_=function(k,R,m){if(m){var s=R.settings.fieldSeparator,c=(0,M.getFieldConfig)(R,m)||{},o=Array.isArray(m)?m:m.split(s),u=(0,C.getFieldPath)(m,R),l=(0,C.getFieldPathLabels)(m,R),f=l?l.join(s):null,v=R.settings.formatField||N.settings.formatField,h=(0,C.formatFieldName)(m,R,k),a=v(h,o,f,c,R);return a}},te=function(k,R,m){var s=m.get("func"),c=m.get("args"),o=(0,M.getFuncConfig)(R,s),u=o.sqlFunc||s,l={};for(var f in o.args){var v=o.args[f],h=(0,M.getFieldConfig)(R,v),a=c?c.get(f):void 0,n=a?a.get("value"):void 0,y=a?a.get("valueSrc"):void 0,p=a?a.get("asyncListValues"):void 0,F=H(k,R,n,y,v.type,h,v,null,null,p);if(n!=null&&F===void 0){k.errors.push("Can't format value of arg ".concat(f," for func ").concat(s));return}F!==void 0&&(l[f]=F)}var B;if(typeof o.sqlFormatFunc=="function"){var Z=o.sqlFormatFunc,X=[l];B=Z.apply(void 0,X)}else{var j=Object.entries(l).map(function(z){var x=(0,O.default)(z,2),Y=x[0],re=x[1];return re}).join(", ");B="".concat(u,"(").concat(j,")")}return B}},75266:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e(41575);Object.keys(r).forEach(function(M){M==="default"||M==="__esModule"||M in i&&i[M]===r[M]||Object.defineProperty(i,M,{enumerable:!0,get:function(){return r[M]}})});var O=e(64120);Object.keys(O).forEach(function(M){M==="default"||M==="__esModule"||M in i&&i[M]===O[M]||Object.defineProperty(i,M,{enumerable:!0,get:function(){return O[M]}})});var g=e(90318);Object.keys(g).forEach(function(M){M==="default"||M==="__esModule"||M in i&&i[M]===g[M]||Object.defineProperty(i,M,{enumerable:!0,get:function(){return g[M]}})})},64120:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.loadFromJsonLogic=i._loadFromJsonLogic=void 0;var O=r(e(90890)),g=r(e(33138)),M=r(e(92476)),C=r(e(47452)),E=r(e(39075)),L=e(1218),T=e(24256),P=e(41895),N=e(41575),S=e(55805),D=r(e(36365));function b(o,u){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);u&&(f=f.filter(function(v){return Object.getOwnPropertyDescriptor(o,v).enumerable})),l.push.apply(l,f)}return l}function A(o){for(var u=1;u<arguments.length;u++){var l=arguments[u]!=null?arguments[u]:{};u%2?b(Object(l),!0).forEach(function(f){(0,M.default)(o,f,l[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):b(Object(l)).forEach(function(f){Object.defineProperty(o,f,Object.getOwnPropertyDescriptor(l,f))})}return o}var U=function(u){return Array.from(new Set(u))},I=function(u){return u.reduce(function(l,f){var v=(0,C.default)(f,2),h=v[0],a=v[1];return A(A({},l),{},(0,M.default)({},h,a))},{})},$=function(u,l){return w(u,l,!1)};i.loadFromJsonLogic=$;var w=function(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,v={errors:[]},h=(0,T.extendConfig)(l),a=V(h),n=u?G(u,a,h,"rule",v):void 0;n&&n.type!="group"&&(n=R(n,h));var y=n?(0,N.loadTree)(n):void 0;return f?[y,v.errors]:(v.errors.length&&console.warn("Errors while importing from JsonLogic:",v.errors),y)};i._loadFromJsonLogic=w;var V=function(u){var l={};for(var f in u.operators){var v=u.operators[f];if(typeof v.jsonLogic=="string"){var h=(v._jsonLogicIsRevArgs?"#":"")+v.jsonLogic+"/"+(0,L.defaultValue)(v.cardinality,1);l[h]||(l[h]=[]),l[h].push(f)}else if(typeof v.jsonLogic2=="string"){var a=v.jsonLogic2+"/"+(0,L.defaultValue)(v.cardinality,1);l[a]||(l[a]=[]),l[a].push(f)}}var n={};for(var y in u.conjunctions){var p=u.conjunctions[y],F=p.jsonLogicConj||y.toLowerCase();n[F]=y}var B={};for(var Z in u.funcs){var X=u.funcs[Z],j=void 0;X.jsonLogicIsMethod?j="#"+X.jsonLogic:typeof X.jsonLogic=="string"&&(j=X.jsonLogic),j&&(B[j]||(B[j]=[]),B[j].push(Z))}var z=u.settings.jsonLogic,x=z.groupVarKey,Y=z.altVarKey;return{operators:l,conjunctions:n,funcs:B,varKeys:["var",x,Y]}},G=function o(u,l,f,v,h){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,n=arguments.length>6?arguments[6]:void 0,y=arguments.length>7?arguments[7]:void 0,p=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,F=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,B,Z;(0,L.isJsonLogic)(u)&&(B=Object.keys(u)[0],Z=u[B],Array.isArray(Z)||(Z=[Z]));var X,j=h.errors.length,z=f.settings.jsonLogic.lockedOp,x=B=="!"&&Z.length==1&&Z[0]&&(0,L.isJsonLogic)(Z[0])&&l.varKeys.includes(Object.keys(Z[0])[0]),Y=B=="!"&&!x,re=z&&B==z;re?X=o(Z[0],l,f,v,h,a,n,y,p,!0):Y?X=o(Z[0],l,f,v,h,!a,n,y,p):v=="val"?X=H(B,Z,l,f,a,h,p)||_(B,Z,l,f,a,n,h,p)||K(u,n,y,f,h):v=="rule"&&(X=te(B,Z,l,f,a,h,p,!1)||c(B,Z,l,f,a,h,p));var ne=h.errors.length;return B!="!"&&X===void 0&&ne==j&&h.errors.push("Can't parse logic ".concat(JSON.stringify(u))),re&&(X.properties.isLocked=!0),X},K=function(u,l,f,v,h){if(u!==void 0){var a=v.widgets[f||l.mainWidget];if(!a){h.errors.push("No widget for type ".concat(l.type));return}if((0,L.isJsonLogic)(u)){h.errors.push("Unexpected logic in value: ".concat(JSON.stringify(u)));return}if(l&&l.type=="time"&&typeof u=="number"){var n=Math.floor(u/60/60)%24,y=Math.floor(u/60)%60,p=u%60,F=a.valueFormat;if(F){var B=new Date(u);B.setMilliseconds(0),B.setHours(n),B.setMinutes(y),B.setSeconds(p),u=(0,D.default)(B).format(F)}else u="".concat(n,":").concat(y,":").concat(p)}if(l&&["date","datetime"].includes(l.type)&&u&&!(u instanceof Date))try{var Z=new Date(u);Z instanceof Date&&Z.toISOString()===u&&(u=Z)}catch{h.errors.push("Can't convert value ".concat(u," as Date")),u=void 0}if(u instanceof Date&&l){var X=a.valueFormat;X&&(u=(0,D.default)(u).format(X))}var j;if(u&&l.fieldSettings&&l.fieldSettings.asyncFetch){var z=Array.isArray(u)?u:[u];j=z}return{valueSrc:"value",value:u,valueType:a.type,asyncListValues:j}}},H=function(u,l,f,v,h,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,y=v.settings.fieldSeparator;if(f.varKeys.includes(u)&&typeof l[0]=="string"){var p=l[0];n&&(p=[n,p].join(y)),p=(0,T.normalizeField)(v,p);var F=(0,T.getFieldConfig)(v,p);if(!F){a.errors.push("No config for field ".concat(p));return}return{valueSrc:"field",value:p,valueType:F.type}}},_=function(u,l,f,v,h,a,n){var y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;if(u){var p,F,B,Z=u=="method";if(Z){var X,j,z=(0,g.default)(l);X=z[0],p=z[1],j=z.slice(2),F=[X].concat((0,O.default)(j))}else p=u,F=l;var x=(Z?"#":"")+p,Y=(f.funcs[x]||[]).filter(function(he){return a?v.funcs[he].returnType==a.type:!0});if(Y.length)B=Y[0];else for(var re=(0,M.default)({},u,l),ne=0,ae=Object.entries(v.funcs||{});ne<ae.length;ne++){var ie=(0,C.default)(ae[ne],2),de=ie[0],se=ie[1];if(se.jsonLogicImport&&se.returnType==a.type){var ge=void 0;try{ge=se.jsonLogicImport(re)}catch{}ge&&(B=de,F=ge)}}if(B&&B){var ye=v.funcs[B],Ee=Object.keys(ye.args||{}),Te=F.reduce(function(he,Le,Fe){var We=Ee[Fe],Ue=ye.args[We],He=G(Le,f,v,"val",n,!1,Ue,null,y);if(He===void 0&&(He=Ue.defaultValue,He===void 0)){n.errors.push("No value for arg ".concat(We," of func ").concat(B));return}return A(A({},he),{},(0,M.default)({},We,He))},{});return{valueSrc:"func",value:{func:B,args:Te},valueType:ye.returnType}}}},te=function(u,l,f,v,h,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,p=f.conjunctions[u],F=v.settings.fieldSeparator,B=n?(0,T.getFieldConfig)(v,n):null,Z=B?.type=="!group";if(p){var X="group",j=l.map(function(ge){return G(ge,f,v,"rule",a,!1,null,null,n)}).filter(function(ge){return ge!==void 0}).reduce(function(ge,ye){return A(A({},ge),{},(0,M.default)({},ye.id,ye))},{}),z=Object.values(j).map(function(ge){var ye;return ge==null||(ye=ge.properties)===null||ye===void 0?void 0:ye.field}).filter(function(ge){return ge&&ge.includes(F)}),x=Object.fromEntries(U(z).map(function(ge){var ye=ge.split(F),Ee=Object.fromEntries(ye.slice(0,-1).map(function(Te,he,Le){return[].concat((0,O.default)(Le.slice(0,he)),[Te])}).map(function(Te){return[Te.join(F),(0,T.getFieldConfig)(v,Te)]}).filter(function(Te){var he=(0,C.default)(Te,2),Le=he[0],Fe=he[1];return Fe.type=="!group"}));return[ge,Object.keys(Ee)]})),Y=Object.values(j).map(function(ge){var ye;return ge==null||(ye=ge.properties)===null||ye===void 0?void 0:ye.field}).map(function(ge){return x[ge]}).filter(function(ge){return ge&&ge.length}),re=U(Object.values(x).flat()),ne=J(re),ae={conjunction:p,not:h},ie=(0,E.default)(),de={},se={};return Object.entries(j).map(function(ge){var ye=(0,C.default)(ge,2),Ee=ye[0],Te=ye[1];if(Te.type=="group"||Te.type=="rule_group")de[Ee]=Te;else{var he,Le=Te==null||(he=Te.properties)===null||he===void 0?void 0:he.field,Fe=x[Le],We=Fe?.at(-1);if(!We)de[Ee]=Te;else{var Ue=de,He=n?n.split(F):[],ke=(0,L.shallowEqual)(He,We.split(F).slice(0,He.length));ke||(He=[]);var qe=We.split(F).slice(He.length).map(function(ze,fe,Oe){return[].concat((0,O.default)(He),(0,O.default)(Oe.slice(0,fe)),[ze]).join(F)}).map(function(ze){return(0,T.normalizeField)(v,ze)}).map(function(ze){return{f:ze,fc:(0,T.getFieldConfig)(v,ze)||{}}}).filter(function(ze){var fe=ze.fc;return fe.type!="!struct"});qe.map(function(ze,fe){var Oe=ze.f,Re=ze.fc,Ae=se[Oe];Ae||(Ae=(0,E.default)(),se[Oe]=Ae,Ue[Ae]={type:"rule_group",id:Ae,children1:{},properties:{conjunction:p,not:!1,field:Oe,mode:Re.mode}}),Ue=Ue[Ae].children1}),Ue[Ee]=Te}}}),{type:X,id:ie,children1:de,properties:ae}}},J=function(u){for(var l=(0,O.default)(u).sort(function(h,a){return h.length-a.length}),f=0;f<l.length;f++)for(var v=f+1;v<l.length;v++)l[v].indexOf(l[f])==0&&(l.splice(v,1),v--);return l},k=function(u,l,f,v,h){if(u)return{type:"rule_group",id:(0,E.default)(),children1:(0,M.default)({},u.id,u),properties:{conjunction:h||(0,S.defaultGroupConjunction)(v,f),not:!1,field:l}}},R=function(u,l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:(0,E.default)(),children1:(0,M.default)({},u.id,u),properties:{conjunction:(0,S.defaultConjunction)(l),not:f}}},m=function(u,l,f,v,h,a,n){var y=[],p=s(u,l,f,v,h,a,y,!1)||s(u,l,f,v,h,a,y,!0);if(!p){n.errors.push(y.join("; ")||"Unknown op ".concat(u,"/").concat(l));return}return p},s=function(u,l,f,v,h,a,n,y){var p=u=="all"&&(0,L.isJsonLogic)(f[1])&&Object.keys(f[1])[0]=="in",F=!p&&a.settings.groupOperators.includes(u),B=["==","!="],Z=F?0:l-1;(F||B.includes(u)&&Z==1&&f[1]===null)&&(Z=0);var X=u+"/"+Z,j=a.settings.fieldSeparator,z=h.operators[(y?"#":"")+X];if(z){var x,Y=[],re=["<","<=",">",">="];if(re.includes(u)&&l==3)x=f[1],Y=[f[0],f[2]];else if(y)x=f[1],Y=[f[0]];else{var ne=(0,g.default)(f);x=ne[0],Y=ne.slice(1)}if(!(0,L.isJsonLogic)(x)){n.push("Incorrect operands for ".concat(u,": ").concat(JSON.stringify(f)));return}var ae=Object.keys(x)[0],ie=Object.values(x)[0],de,se,ge;if(h.varKeys.includes(ae)&&typeof ie=="string"&&(de=ie),F&&(ge=!0,se=Y[0],Y=[]),ae=="reduce"&&Array.isArray(ie)&&ie.length==3){var ye=ie,Ee=(0,C.default)(ye,3),Te=Ee[0],he=Ee[1],Le=Ee[2];if((0,L.isJsonLogic)(Te)&&Le==0&&(0,L.isJsonLogic)(he)&&Array.isArray(he["+"])&&he["+"][0]==1&&(0,L.isJsonLogic)(he["+"][1])&&he["+"][1].var=="accumulator")if(ae=Object.keys(Te)[0],ie=Object.values(Te)[0],ae=="filter"){var Fe=ie,We=(0,C.default)(Fe,2),Ue=We[0],He=We[1];(0,L.isJsonLogic)(Ue)&&(ae=Object.keys(Ue)[0],ie=Object.values(Ue)[0],h.varKeys.includes(ae)&&typeof ie=="string"&&(de=ie,se=He,ge=!0))}else h.varKeys.includes(ae)&&typeof ie=="string"&&(de=ie,ge=!0)}if(!de){n.push("Unknown field ".concat(JSON.stringify(x)));return}v&&(de=[v,de].join(j)),de=(0,T.normalizeField)(a,de);var ke=(0,T.getFieldConfig)(a,de);if(!ke){n.push("No config for field ".concat(de));return}var qe=z[0];if(z.length>1&&ke&&ke.operators){if(z=z.filter(function(ze){return ke.operators.includes(ze)}),z.length==0){n.push("No corresponding ops for field ".concat(de));return}qe=z[0]}return{field:de,fieldConfig:ke,opKey:qe,args:Y,having:se}}},c=function o(u,l,f,v,h,a){var n=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(u){var y=l.length;if(u=="all"&&(0,L.isJsonLogic)(l[1])){var p=Object.keys(l[1])[0];p=="in"&&(l=[l[0],l[1][p][1]],u=u+"-"+p)}var F=m(u,y,l,n,f,v,a);if(F){var B=F.field,Z=F.fieldConfig,X=F.opKey,j=F.args,z=F.having,x=v.operators[X],Y=Z.showNot!==void 0?Z.showNot:v.settings.showNot,re=!0,ne,ae;if(Z.type=="!group"&&z){ne=Object.keys(z)[0],ae=z[ne],Array.isArray(ae)||(ae=[ae]);var ie=ne=="!"&&ae.length==1&&ae[0]&&(0,L.isJsonLogic)(ae[0])&&f.varKeys.includes(Object.keys(ae[0])[0]);ne=="!"&&!ie&&(h=!h,z=z["!"],ne=Object.keys(z)[0],ae=z[ne],Array.isArray(ae)||(ae=[ae]))}h&&re&&x.reversedOp&&(h=!1,X=x.reversedOp,x=v.operators[X]);var de=(0,P.getWidgetForFieldOp)(v,B,X),se=j.map(function(Le){return G(Le,f,v,"val",a,!1,Z,de,n)});if(!se.filter(function(Le){return Le===void 0}).length){var ge;if(Z.type=="!group"&&z){if(f.conjunctions[ne]!==void 0)ge=te(ne,ae,f,v,h,a,B,!0),h=!1;else{var ye,Ee=o(ne,ae,f,v,h&&re,a,B);h&&re&&!(Ee!=null&&(ye=Ee.properties)!==null&&ye!==void 0&&ye.not)&&(h=!1),ge=k(Ee,B,Z,v,f.conjunctions.and)}if(!ge)return;ge.type="rule_group",h&&Object.assign(ge.properties,{not:h}),Object.assign(ge.properties,{field:B,mode:Z.mode,operator:X}),Z.mode=="array"&&Object.assign(ge.properties,{value:se.map(function(Le){return Le.value}),valueSrc:se.map(function(Le){return Le.valueSrc}),valueType:se.map(function(Le){return Le.valueType})})}else if(Z.type=="!group"&&!z)ge={type:"rule_group",id:(0,E.default)(),children1:{},properties:{conjunction:(0,S.defaultGroupConjunction)(v,Z),not:h,mode:Z.mode,field:B,operator:X}},Z.mode=="array"&&Object.assign(ge.properties,{value:se.map(function(Le){return Le.value}),valueSrc:se.map(function(Le){return Le.valueSrc}),valueType:se.map(function(Le){return Le.valueType})});else{var Te=se.map(function(Le){return Le.asyncListValues}).filter(function(Le){return Le!=null}),he=Te.length?Te[0]:void 0;ge={type:"rule",id:(0,E.default)(),properties:{field:B,operator:X,value:se.map(function(Le){return Le.value}),valueSrc:se.map(function(Le){return Le.valueSrc}),valueType:se.map(function(Le){return Le.valueType}),asyncListValues:he}},h&&(ge=R(ge,v,h))}return ge}}}}},90318:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.loadFromSpel=i._loadFromSpel=void 0;var O=r(e(47452)),g=r(e(33805)),M=r(e(92476)),C=r(e(90890)),E=e(58750),L=r(e(39075)),T=e(24256),P=e(41895),N=e(41575),S=e(55805),D=e(1218),b=r(e(36365));function A(l,f){var v=Object.keys(l);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(l);f&&(h=h.filter(function(a){return Object.getOwnPropertyDescriptor(l,a).enumerable})),v.push.apply(v,h)}return v}function U(l){for(var f=1;f<arguments.length;f++){var v=arguments[f]!=null?arguments[f]:{};f%2?A(Object(v),!0).forEach(function(h){(0,M.default)(l,h,v[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(v)):A(Object(v)).forEach(function(h){Object.defineProperty(l,h,Object.getOwnPropertyDescriptor(v,h))})}return l}var I=function(f,v){return $(f,v,!0)};i.loadFromSpel=I;var $=function(f,v){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a={errors:[]},n=(0,T.extendConfig)(v),y=G(n),p,F,B=void 0;try{var Z=E.SpelExpressionEvaluator.compile(f);p=Z._compiledExpression}catch(j){a.errors.push(j)}p&&(D.logger.debug("compiledExpression:",p),F=w(p,a),D.logger.debug("convertedObj:",F,a),B=k(F,y,n,a),B&&B.type!="group"&&B.type!="switch_group"&&(B=u(B,n)),D.logger.debug("jsTree:",B));var X=B?(0,N.loadTree)(B):void 0;return h?[X,a.errors]:(a.errors.length&&console.warn("Errors while importing from SpEL:",a.errors),X)};i._loadFromSpel=$;var w=function l(f,v){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=f.getType(),n=f.getChildren().map(function(he){return l(he,v,f)});if((a=="op-or"||a=="op-and")&&(n=n.reduce(function(he,Le){var Fe=Le.type==a&&!Le.not,We=Fe?Le.children:[Le];return[].concat((0,C.default)(he),(0,C.default)(We))},[])),a=="op-not")return n.length!=1&&v.errors.push("Operator NOT should have 1 child, but got ".concat(n.length,"}")),U(U({},n[0]),{},{not:!n[0].not});if(a=="compound"){n=n.filter(function(he){var Le=he.type=="selection"&&he.children.length==1&&he.children[0].type=="boolean"&&he.children[0].val==!0;return!Le});var y=n.find(function(he){return he.type=="selection"});y&&y.children.length!=1&&v.errors.push("Selection should have 1 child, but got ".concat(y.children.length));var p=y?y.children[0]:null,F=n[n.length-1],B=F.type=="method"&&F.val.methodName=="size"||F.type=="!func"&&F.methodName=="size",Z=F.type=="property"&&F.val=="length",X=n.filter(function(he){return he!==y&&he!==F}),j={type:"compound",children:X};if(B||Z)return{type:"!aggr",filter:p,source:j};if(n=n.filter(function(he){var Le=he.type=="variable"&&he.val=="this",Fe=he.type=="variable"&&he.val=="root";return!(Le||Fe)}),n=n.map(function(he){return he.type=="indexer"&&he.children.length==1?{type:"indexer",val:he.children[0].val,itype:he.children[0].type}:he}),F.type=="method"){var z=n.filter(function(he){return he!==F});return{type:"!func",obj:z,methodName:F.val.methodName,args:F.val.args}}if(F.type=="!func"){var x=n.filter(function(he){return he!==F});return U(U({},F),{},{obj:x})}}var Y;try{f.getRaw?Y=f.getRaw():f.getValue.length==0&&(Y=f.getValue())}catch(he){D.logger.error("[spel2js] Error in getValue()",he)}if(a=="ternary"&&(Y=V(n)),(0,g.default)(Y)==="object"&&Y!==null&&(Y.methodName||Y.functionName)&&(Y.args=Y.args.map(function(he){return l(he,v,f)})),a=="list"&&(Y=Y.map(function(he){return l(he,v,f)}),!h&&Y.length==1))return Y[0];if(a=="constructorref"){var re=n.find(function(he){return he.type=="qualifiedidentifier"}),ne=re?.val;if(!ne){v.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(n)));return}var ae=n.filter(function(he){return he.type!="qualifiedidentifier"});return{type:"!new",cls:ne,args:ae}}if(a=="typeref"){var ie=n.find(function(he){return he.type=="qualifiedidentifier"}),de=ie?.val;if(!de){v.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(n)));return}var se=n.filter(function(he){return he.type!="qualifiedidentifier"});return{type:"!type",cls:de}}if(a=="function"||a=="method"){var ge=Y,ye=ge.functionName,Ee=ge.methodName,Te=ge.args;return{type:"!func",methodName:ye||Ee,isVar:a=="function",args:Te}}return{type:a,children:n,val:Y}},V=function(f){var v=[];function h(a){var n=(0,O.default)(a,3),y=n[0],p=n[1],F=n[2];v.push([y,p]),F?.type=="ternary"?h(F.children):v.push([void 0,F])}return h(f),v},G=function(f){var v={},h=function(x){var Y=f.operators[x];if(Y.spelOps)Y.spelOps.forEach(function(ne){var ae=ne;v[ae]||(v[ae]=[]),v[ae].push(x)});else if(Y.spelOp){var re=Y.spelOp;v[re]||(v[re]=[]),v[re].push(x)}else D.logger.log("[spel] No spelOp for operator ".concat(x))};for(var a in f.operators)h(a);var n={};for(var y in f.conjunctions){var p=f.conjunctions[y],F=p.spelConj||y.toLowerCase();n[F]=y}var B={};for(var Z in f.funcs){var X=f.funcs[Z],j=void 0;typeof X.spelFunc=="string"&&(j=X.spelFunc),j&&(B[j]||(B[j]=[]),B[j].push(Z))}return{operators:v,conjunctions:n,funcs:B}},K=function(f,v){var h=!1,a=f.map(function(n){if(n.type=="variable"||n.type=="property"||n.type=="indexer"&&n.itype=="string")return n.val;h=!0,v.errors.push("Unexpected item in compound: ".concat(JSON.stringify(n)))});return h?void 0:a},H=function l(f,v,h,a,n){if(f!=null){var y=h.settings.fieldSeparator,p={number:"number",string:"text",boolean:"boolean",null:"null"},F=n!=null&&n._groupField?[n?._groupField]:[];if(f.type=="compound"){var B,Z,X=K(f.children,a);if(!X)return;var j=[].concat(F,(0,C.default)(X)),z=((B=f.children)===null||B===void 0||(Z=B[0])===null||Z===void 0?void 0:Z.type)=="variable";return{valueSrc:"field",isVariable:z,value:j.join(y)}}else if(f.type=="variable"||f.type=="property"){var x=[].concat(F,[f.val]),Y=f.type=="variable";return{valueSrc:"field",isVariable:Y,value:x.join(y)}}else if(p[f.type]){var re=f.val,ne=p[f.type];return n!=null&&n.isUnary&&(re=-re),{valueSrc:"value",valueType:ne,value:re}}else if(f.type=="list"){var ae,ie=f.val.map(function(Ie){return l(Ie,v,h,a,f)}),de=ie.length?(ae=ie[0])===null||ae===void 0?void 0:ae.valueType:null,se=ie.map(function(Ie){return Ie?.value}),ge="multiselect";return{valueSrc:"value",valueType:ge,value:se}}else if(f.type=="!func"){var ye,Ee=f.obj,Te=f.methodName,he=f.args,Le=f.isVar,Fe=(ye={},(0,M.default)(ye,".contains","like"),(0,M.default)(ye,".startsWith","starts_with"),(0,M.default)(ye,".endsWith","ends_with"),(0,M.default)(ye,"$contains","select_any_in"),ye),We=he.map(function(Ie){return l(Ie,v,h,a,U(U({},f),{},{_groupField:n?._groupField}))});if(Te=="contains"&&Ee&&Ee[0].type=="list"){var Ue=Ee.map(function(Ie){return l(Ie,v,h,a,f)});if(!(We.length==1&&We[0].valueSrc=="field")){a.errors.push("Expected arg to method ".concat(Te," to be field but got: ").concat(JSON.stringify(We)));return}var He=We[0].value;if(!(Ue.length==1&&Ue[0].valueType=="multiselect")){a.errors.push("Expected object of method ".concat(Te," to be inline list but got: ").concat(JSON.stringify(Ue)));return}var ke=Fe["$"+Te],qe=Ue[0];return _(h,a,He,ke,[qe])}else if(Fe["."+Te]){var ze=Fe["."+Te],fe=K(Ee,a);if(fe&&We.length==1){var Oe=[].concat(F,(0,C.default)(fe)),Re=Oe.join(y);return _(h,a,Re,ze,We)}}else if(Te=="parse"&&Ee&&Ee[0].type=="!new"&&Ee[0].cls.at(-1)=="SimpleDateFormat"){var Ae=Ee[0].args.map(function(Ie){return l(Ie,v,h,a,U(U({},f),{},{_groupField:n?._groupField}))});if(!(Ae.length==1&&Ae[0].valueType=="text")){a.errors.push("Expected args of ".concat(Ee[0].cls.join("."),".").concat(Te," to be 1 string but got: ").concat(JSON.stringify(Ae)));return}if(!(We.length==1&&We[0].valueType=="text")){a.errors.push("Expected args of ".concat(Ee[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(We)));return}var be=Ae[0].value,Ve=We[0].value,De=be.includes(" ")?"datetime":"date",$e=null,at=De,ut=(0,T.getFieldConfig)(h,$e),Qe=h.widgets[at||ut?.mainWidget],ot=Qe.valueFormat,st=(0,b.default)(Ve,b.default.ISO_8601),Je=st.isValid()?st.format(ot):void 0;return{valueSrc:"value",valueType:De,value:Je}}else if(Te=="parse"&&Ee&&Ee[0].type=="!type"&&Ee[0].cls.at(-1)=="LocalTime"){if(!(We.length==1&&We[0].valueType=="text")){a.errors.push("Expected args of ".concat(Ee[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(We)));return}var dt=We[0].value,mt="time",yt=null,ve=mt,ce=(0,T.getFieldConfig)(h,yt),Pe=h.widgets[ve||ce?.mainWidget],Me=Pe.valueFormat,xe=(0,b.default)(dt,"HH:mm:ss"),Ke=xe.isValid()?xe.format(Me):void 0;return{valueSrc:"value",valueType:mt,value:Ke}}else a.errors.push("Unsupported method ".concat(Te))}else{if(f.type=="op-plus"&&n?.type=="ternary")return s(f,v,h,a);a.errors.push("Can't convert arg of type ".concat(f.type))}}},_=function(f,v,h,a,n){if(!n.filter(function(j){return j===void 0}).length){var y=(0,T.getFieldConfig)(f,h);if(!y){v.errors.push("No config for field ".concat(h));return}var p=(0,P.getWidgetForFieldOp)(f,h,a),F=f.widgets[p||y.mainWidget],B=n.map(function(j){return j.asyncListValues}).filter(function(j){return j!=null}),Z=B.length?B[0]:void 0,X={type:"rule",id:(0,L.default)(),properties:{field:h,operator:a,value:n.map(function(j){return j.value}),valueSrc:n.map(function(j){return j.valueSrc}),valueType:n.map(function(j){return j.valueSrc=="value"&&(F?.type||y?.type)||j.valueType}),asyncListValues:Z}};return X}},te=function(f,v,h,a,n){var y=f.groupFilter,p=f.groupFieldValue;if(p.valueSrc!="field")throw"Bad groupFieldValue: ".concat(JSON.stringify(p));var F=p.value,B=_(a,n,F,v,h);if(B){var Z=(0,T.getFieldConfig)(a,F),X=Z?.mode,j=U(U({},y||{}),{},{type:"rule_group",properties:U(U(U({},B.properties),y?.properties||{}),{},{mode:X})});return j.id||(j.id=(0,L.default)()),j}},J=function(f,v,h,a,n,y){var p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(f.type==v.type)if(f.type=="!aggr"){var F=[f.source,v.source].map(function(re){return H(re,a,n,y,U(U({},h),{},{_groupField:p?._groupField}))}),B=(0,O.default)(F,2),Z=B[0],X=B[1];return Z.value==X.value}else{var j=[f,v].map(function(re){return H(re,a,n,y,U(U({},h),{},{_groupField:p?._groupField}))}),z=(0,O.default)(j,2),x=z[0],Y=z[1];return x.value==Y.value}return!1},k=function l(f,v,h,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(f){var y;if(f.type.indexOf("op-")==0){var p=f.type.slice(3),F=(p=="minus"||p=="plus")&&f.children.length==1;if(F)return f.isUnary=!0,l(f.children[0],v,h,a,f);var B=p=="and"&&f.children.length==2&&f.children[0].type=="op-ge"&&f.children[1].type=="op-le",Z=p=="or"&&f.children.length==2&&f.children[0].type=="op-lt"&&f.children[1].type=="op-gt",X=B||Z;if(X){var j=(0,O.default)(f.children[0].children,2),z=j[0],x=j[1],Y=(0,O.default)(f.children[1].children,2),re=Y[0],ne=Y[1],ae=x.type=="number"&&ne.type=="number",ie=J(z,re,f,v,h,a,n);if(ae&&ie){var de=x.val,se=ne.val,ge={type:"op-between",children:[z,x,ne]};return l(ge,v,h,a,n)}}var ye=v.operators[p],Ee;p=="eq"&&f.children[1].type=="null"?Ee="is_null":p=="ne"&&f.children[1].type=="null"?Ee="is_not_null":p=="le"&&f.children[1].type=="string"&&f.children[1].val==""?(Ee="is_empty",ye=["is_empty"]):p=="gt"&&f.children[1].type=="string"&&f.children[1].val==""?(Ee="is_not_empty",ye=["is_not_empty"]):p=="between"&&(Ee="between",ye=["between"]);var Te=function(){return f.children.map(function($e){return l($e,v,h,a,U(U({},f),{},{_groupField:n?._groupField}))})};if(p=="and"||p=="or"){var he={},Le=Te();Le.forEach(function(De){if(De){var $e=(0,L.default)();De.id=$e,De.type!=null?he[$e]=De:a.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(De)))}}),y={type:"group",id:(0,L.default)(),children1:he,properties:{conjunction:v.conjunctions[p],not:f.not}}}else if(ye){var Fe=Te(),We=Fe[0],Ue=Fe.slice(1);if(Ee=ye[0],We)if(We.groupFieldValue){We.groupFieldValue.valueSrc!="field"&&a.errors.push("Expected group field ".concat(JSON.stringify(We)));var He=We.groupFieldValue.value,ke=Ue[0];ke&&ke.groupFieldValue&&ke.groupFieldValue.valueSrc=="field"&&ke.groupFieldValue.value==He?(Ee="all",Ue=[]):Ee=="equal"&&ke.valueSrc=="value"&&ke.valueType=="number"&&ke.value==0?(Ee="none",Ue=[]):Ee=="greater"&&ke.valueSrc=="value"&&ke.valueType=="number"&&ke.value==0&&(Ee="some",Ue=[]),y=te(We,Ee,Ue,h,a)}else{We.valueSrc!="field"&&a.errors.push("Expected field ".concat(JSON.stringify(We)));var qe=We.value;if(ye.length>1){D.logger.warn("[spel] Spel operator ".concat(p," can be mapped to ").concat(ye));var ze=ye.map(function(De){return{op:De,widget:(0,P.getWidgetForFieldOp)(h,qe,De)}});if(p=="eq"||p=="ne"){var fe=ze.find(function(De){var $e=De.op,at=De.widget;return at&&at!="field"});Ee=fe.op}}y=_(h,a,qe,Ee,Ue)}}else n||(y=R(f,v,h,a)),y||a.errors.push("Can't convert op ".concat(p))}else if(f.type=="!aggr"){var Oe,Re=l(f.source,v,h,a,U(U({},f),{},{_groupField:n?._groupField})),Ae=l(f.filter,v,h,a,U(U({},f),{},{_groupField:Re?.value}));((Oe=Ae)===null||Oe===void 0?void 0:Oe.type)=="rule"&&(Ae=u(Ae,h)),y={groupFilter:Ae,groupFieldValue:Re},n||(y=void 0,a.errors.push("Unexpected !aggr in root"))}else if(f.type=="ternary"){var be={};f.val.forEach(function(De){var $e=(0,O.default)(De,2),at=$e[0],ut=$e[1],Qe=m(at,ut,v,h,a,f);Qe&&(be[Qe.id]=Qe)}),y={type:"switch_group",id:(0,L.default)(),children1:be,properties:{}}}else if(y=H(f,v,h,a,n),y&&!y.type&&!n){var Ve=R(f,v,h,a);Ve?y=Ve:(y=void 0,a.errors.push("Can't convert rule of type ".concat(f.type,", it looks like var/literal")))}return y}},R=function(f,v,h,a){var n={},y=null,p=m(y,f,v,h,a);p&&(n[p.id]=p);var F={type:"switch_group",id:(0,L.default)(),children1:n,properties:{}};return F},m=function(f,v,h,a,n){var y=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,p=c(a,n,h,v,y),F;return f?(F=k(f,h,a,n,y),F&&F.type?(F.type!="group"&&(F=u(F,a)),F.type="case_group"):(n.errors.push("Unexpected case: ".concat(JSON.stringify(F))),F=void 0)):F={id:(0,L.default)(),type:"case_group",properties:{}},F&&(F.properties=U(U({},F.properties),p)),F},s=function(f,v,h,a){var n=[];function y(p){p.map(function(F){if(F.type=="op-plus")y(F.children);else{var B=H(F,v,h,a,f);B?n.push(B):a.errors.push("Can't convert ".concat(F.type," in concatenation"))}})}return y(f.children),{valueSrc:"value",valueType:"case_value",value:n}},c=function(f,v,h,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,y={},p;a?.type=="op-plus"?p=s(a,h,f,v):p=H(a,h,f,v,n);var F=f.widgets.case_value,B=F?.spelImportValue;if(B){var Z=B(p),X=(0,O.default)(Z,2),j=X[0],z=X[1];z.map(function(x){return v.errors.push(x)}),j&&(y={value:[j],valueSrc:["value"],valueType:["case_value"]})}else v.errors.push("No fucntion to import case value");return y},o=function(f,v,h,a,n){if(f)return{type:"rule_group",id:(0,L.default)(),children1:(0,M.default)({},f.id,f),properties:{conjunction:n||(0,S.defaultGroupConjunction)(a,h),not:!1,field:v}}},u=function(f,v){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return{type:"group",id:(0,L.default)(),children1:(0,M.default)({},f.id,f),properties:{conjunction:(0,S.defaultConjunction)(v),not:h}}}},41575:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.isImmutableTree=i.getTree=i.checkTree=void 0,Object.defineProperty(i,"isJsonLogic",{enumerable:!0,get:function(){return T.isJsonLogic}}),i.loadTree=i.isValidTree=i.isTree=void 0;var g=r(e(33805)),M=N(e(40745)),C=e(72769),E=e(24256),L=e(75403),T=e(1218);function P(w){if(typeof WeakMap!="function")return null;var V=new WeakMap,G=new WeakMap;return(P=function(H){return H?G:V})(w)}function N(w,V){if(!V&&w&&w.__esModule)return w;if(w===null||O(w)!=="object"&&typeof w!="function")return{default:w};var G=P(V);if(G&&G.has(w))return G.get(w);var K={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in w)if(_!=="default"&&Object.prototype.hasOwnProperty.call(w,_)){var te=H?Object.getOwnPropertyDescriptor(w,_):null;te&&(te.get||te.set)?Object.defineProperty(K,_,te):K[_]=w[_]}return K.default=w,G&&G.set(w,K),K}var S=function(V){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(V){var H=V;return H=H.toJS(),G&&(H=(0,L.getLightTree)(H,K)),H}};i.getTree=S;var D=function(V){if(U(V))return V;if(I(V))return $(V);if(typeof V=="string"&&V.startsWith('["~#iM"'))throw"You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17";if(typeof V=="string")return $(JSON.parse(V));throw"Can't load tree!"};i.loadTree=D;var b=function(V,G){if(V){var K=(0,E.extendConfig)(G);return(0,C.validateTree)(V,null,K,K)}};i.checkTree=b;var A=function(V){return(0,L.getTreeBadFields)(V).length==0};i.isValidTree=A;var U=function(V){return M.Map.isMap(V)};i.isImmutableTree=U;var I=function(V){return(0,g.default)(V)=="object"&&(V.type=="group"||V.type=="switch_group")};i.isTree=I;function $(w){return(0,M.fromJS)(w,function(V,G){var K;if(V=="properties"){K=G.toOrderedMap();for(var H=0;H<2;H++){var _;((_=K.get("value"))===null||_===void 0?void 0:_.get(H))===null&&(K=K.setIn(["value",H],void 0))}}else if(V=="value"&&G.get(0)&&G.get(0).toJS!==void 0){var te=G.get(0).toJS();te.func?K=G.toOrderedMap():K=M.default.List.of(te)}else V=="asyncListValues"?K=G.toJS():V=="children1"&&M.default.Iterable.isIndexed(G)?K=new M.default.OrderedMap(G.map(function(J){return[J.get("id"),J]})):K=M.default.Iterable.isIndexed(G)?G.toList():G.toOrderedMap();return K})}},89196:(ee,i,e)=>{"use strict";var r,O=e(59018),g=e(33805);r={value:!0},Object.defineProperty(i,"I4",{enumerable:!0,get:function(){return b.default}}),r=void 0,Object.defineProperty(i,"Ib",{enumerable:!0,get:function(){return E.default}}),r=r=r=void 0,Object.defineProperty(i,"AE",{enumerable:!0,get:function(){return C.default}}),r=i.cQ=void 0;var M=O(e(92476)),C=O(e(60381)),E=O(e(51031)),L=U(e(92211));r=L;var T=U(e(75266));r=T;var P=U(e(66085));r=P;var N=U(e(84711));r=N;var S=U(e(45881)),D=U(e(96685));r=D;var b=O(e(94724));function A(V){if(typeof WeakMap!="function")return null;var G=new WeakMap,K=new WeakMap;return(A=function(_){return _?K:G})(V)}function U(V,G){if(!G&&V&&V.__esModule)return V;if(V===null||g(V)!=="object"&&typeof V!="function")return{default:V};var K=A(G);if(K&&K.has(V))return K.get(V);var H={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in V)if(te!=="default"&&Object.prototype.hasOwnProperty.call(V,te)){var J=_?Object.getOwnPropertyDescriptor(V,te):null;J&&(J.get||J.set)?Object.defineProperty(H,te,J):H[te]=V[te]}return H.default=V,K&&K.set(V,H),H}function I(V,G){var K=Object.keys(V);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(V);G&&(H=H.filter(function(_){return Object.getOwnPropertyDescriptor(V,_).enumerable})),K.push.apply(K,H)}return K}function $(V){for(var G=1;G<arguments.length;G++){var K=arguments[G]!=null?arguments[G]:{};G%2?I(Object(K),!0).forEach(function(H){(0,M.default)(V,H,K[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(K)):I(Object(K)).forEach(function(H){Object.defineProperty(V,H,Object.getOwnPropertyDescriptor(K,H))})}return V}var w=$($($({},S),L),T);i.cQ=w},9988:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var O=r(e(68404)),g=O.default.createContext();i.default=g},596:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var g=r(e(47452)),M=r(e(92476)),C=r(e(40745)),E=e(75403),L=e(55805),T=$(e(95421)),P=r(e(39075)),N=e(24256),S=e(41895),D=e(1218),b=e(72769),A=r(e(50234)),U=r(e(74937));function I(X){if(typeof WeakMap!="function")return null;var j=new WeakMap,z=new WeakMap;return(I=function(Y){return Y?z:j})(X)}function $(X,j){if(!j&&X&&X.__esModule)return X;if(X===null||O(X)!=="object"&&typeof X!="function")return{default:X};var z=I(j);if(z&&z.has(X))return z.get(X);var x={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var re in X)if(re!=="default"&&Object.prototype.hasOwnProperty.call(X,re)){var ne=Y?Object.getOwnPropertyDescriptor(X,re):null;ne&&(ne.get||ne.set)?Object.defineProperty(x,re,ne):x[re]=X[re]}return x.default=X,z&&z.set(X,x),x}function w(X,j){var z=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(!z){if(Array.isArray(X)||(z=V(X))||j&&X&&typeof X.length=="number"){z&&(X=z);var x=0,Y=function(){};return{s:Y,n:function(){return x>=X.length?{done:!0}:{done:!1,value:X[x++]}},e:function(de){throw de},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re=!0,ne=!1,ae;return{s:function(){z=z.call(X)},n:function(){var de=z.next();return re=de.done,de},e:function(de){ne=!0,ae=de},f:function(){try{!re&&z.return!=null&&z.return()}finally{if(ne)throw ae}}}}function V(X,j){if(X){if(typeof X=="string")return G(X,j);var z=Object.prototype.toString.call(X).slice(8,-1);if(z==="Object"&&X.constructor&&(z=X.constructor.name),z==="Map"||z==="Set")return Array.from(X);if(z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return G(X,j)}}function G(X,j){(j==null||j>X.length)&&(j=X.length);for(var z=0,x=new Array(j);z<j;z++)x[z]=X[z];return x}function K(X,j){var z=Object.keys(X);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(X);j&&(x=x.filter(function(Y){return Object.getOwnPropertyDescriptor(X,Y).enumerable})),z.push.apply(z,x)}return z}function H(X){for(var j=1;j<arguments.length;j++){var z=arguments[j]!=null?arguments[j]:{};j%2?K(Object(z),!0).forEach(function(x){(0,M.default)(X,x,z[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(z)):K(Object(z)).forEach(function(x){Object.defineProperty(X,x,Object.getOwnPropertyDescriptor(z,x))})}return X}var _=function(j,z,x,Y,re,ne){var ae=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,ie=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},de=ne.settings.shouldCreateEmptyGroup,se=z.push(Y),ge=!de,ye=!!(ie!=null&&ie.isDefaultCase),Ee=j;return j=c(j,z,x,Y,(0,L.defaultGroupProperties)(ne).merge(re||{}),ne,ae),j!==Ee&&(!ae&&!ye&&(j=j.setIn((0,E.expandTreePath)(se,"children1"),new C.default.OrderedMap),ge&&(j=c(j,se,"rule",(0,P.default)(),(0,L.defaultRuleProperties)(ne),ne))),j=(0,E.fixPathsInTree)(j)),j},te=function(j,z,x){j=o(j,z);var Y=x.settings.canLeaveEmptyGroup,re=z.slice(0,-1),ne=!(0,E.hasChildren)(j,re);return ne&&!Y&&(j=(0,E.fixEmptyGroupsInTree)(j),(0,E.isEmptyTree)(j)&&!Y&&(j=c(j,new C.default.List,"rule",(0,P.default)(),(0,L.defaultRuleProperties)(x),x))),j=(0,E.fixPathsInTree)(j),j},J=function(j,z,x){j=o(j,z);var Y=x.settings.canLeaveEmptyGroup,re=z.pop(),ne=j.getIn((0,E.expandTreePath)(re)),ae=ne.getIn(["properties","field"]),ie=ne.getIn(["properties","operator"]),de=ne.getIn(["properties","value",0]),se=ae?(0,N.getFieldConfig)(x,ae):null,ge=ie?(0,N.getOperatorConfig)(x,ie,ae):null,ye=ae&&ie&&ge.cardinality!=0,Ee=ne.get("type")=="rule_group",Te=!(0,E.hasChildren)(j,re),he=Ee?ye&&se.initialEmptyWhere:Y;return Te&&!he&&(Ee&&(j=j.deleteIn((0,E.expandTreePath)(re))),j=(0,E.fixEmptyGroupsInTree)(j),(0,E.isEmptyTree)(j)&&!Y&&(j=c(j,new C.default.List,"rule",(0,P.default)(),(0,L.defaultRuleProperties)(x),x))),j=(0,E.fixPathsInTree)(j),j},k=function(j,z,x){return j.setIn((0,E.expandTreePath)(z,"properties","not"),x)},R=function(j,z,x){return(0,E.removeIsLockedInTree)(j.setIn((0,E.expandTreePath)(z,"properties","isLocked"),x))},m=function(j,z,x){return j.setIn((0,E.expandTreePath)(z,"properties","conjunction"),x)},s=function X(j,z,x){x&&Array.isArray(x)&&(z.children1=new C.default.OrderedMap(x.reduce(function(Y,re){var ne=(0,P.default)(),ae=H(H({},re),{},{properties:(0,L.defaultItemProperties)(j,re).merge(re.properties||{}),id:ne});return X(j,ae,ae.children1),H(H({},Y),{},(0,M.default)({},ne,new C.default.Map(ae)))},{})))},c=function(j,z,x,Y,re,ne){var ae=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null;if(x=="switch_group")throw new Error("Can't add switch_group programmatically");var ie=ne.settings,de=ie.maxNumberOfCases,se=ie.maxNumberOfRules,ge=ie.maxNesting,ye=j.get("type"),Ee=ye=="switch_group",Te=j.getIn((0,E.expandTreePath)(z)),he=Ee?j.getIn((0,E.expandTreePath)(z.take(2))):null,Le=(0,E.expandTreePath)(z,"children1"),Fe=j.getIn(Le),We=!!Fe&&Fe.size,Ue=We?Fe.size:null,He,ke;x=="case_group"?(He=Ue,ke=de):x=="group"?(He=z.size,ke=ge):Te?.get("type")=="rule_group"||(He=Ee?(0,E.getTotalRulesCountInTree)(he):(0,E.getTotalRulesCountInTree)(j),ke=se);var qe=ke&&He?He<ke:!0,ze={type:x,id:Y,properties:re};s(ne,ze,ae);var fe=x=="case_group"&&We&&Fe.last().get("children1")==null;if(qe){var Oe=new C.default.OrderedMap((0,M.default)({},Y,new C.default.Map(ze)));if(!We)j=j.setIn(Le,Oe);else if(fe){var Re,Ae=Fe.last(),be=new C.default.OrderedMap((Re={},(0,M.default)(Re,Y,new C.default.Map(ze)),(0,M.default)(Re,Ae.get("id"),Ae),Re));j=j.deleteIn((0,E.expandTreePath)(Le,"children1",Ae.get("id"))),j=j.mergeIn(Le,be)}else j=j.mergeIn(Le,Oe);j=(0,E.fixPathsInTree)(j)}return j},o=function(j,z){return j=j.deleteIn((0,E.expandTreePath)(z)),j=(0,E.fixPathsInTree)(j),j},u=function(j,z,x,Y,re){var ne=(0,E.getItemByPath)(j,z),ae=z.pop(),ie=z.size>1?(0,E.getItemByPath)(j,ae):null,de=ie?ie.get("children1"):null,se=(0,E.getItemByPath)(j,x),ge=Y==T.PLACEMENT_APPEND||Y==T.PLACEMENT_PREPEND?x:x.pop(),ye=Y==T.PLACEMENT_APPEND||Y==T.PLACEMENT_PREPEND?se:x.size>1?(0,E.getItemByPath)(j,ge):null,Ee=ye?ye.get("children1"):null;if(!ie||!ye)return j;var Te=ie.get("id")==ye.get("id"),he=ge.size<ae.size&&(0,D.deepEqual)(ge.toArray(),ae.toArray().slice(0,ge.size)),Le=ge.size>ae.size&&(0,D.deepEqual)(ae.toArray(),ge.toArray().slice(0,ae.size)),Fe=null,We=null;he?Fe=C.default.List(ae.toArray().slice(ge.size)):Le&&(We=C.default.List(ge.toArray().slice(ae.size)));var Ue=Ee,He=de;return Le||(He=He.delete(ne.get("id"))),Te?Ue=He:he&&(Ue=Ue.updateIn((0,E.expandTreeSubpath)(Fe,"children1"),function(ke){return He})),Y==T.PLACEMENT_BEFORE||Y==T.PLACEMENT_AFTER?Ue=C.default.OrderedMap().withMutations(function(ke){var qe=w(Ue.entries()),ze;try{for(qe.s();!(ze=qe.n()).done;){var fe=(0,g.default)(ze.value,2),Oe=fe[0],Re=fe[1];Oe==se.get("id")&&Y==T.PLACEMENT_BEFORE&&ke.set(ne.get("id"),ne),ke.set(Oe,Re),Oe==se.get("id")&&Y==T.PLACEMENT_AFTER&&ke.set(ne.get("id"),ne)}}catch(Ae){qe.e(Ae)}finally{qe.f()}}):Y==T.PLACEMENT_APPEND?Ue=Ue.merge((0,M.default)({},ne.get("id"),ne)):Y==T.PLACEMENT_PREPEND&&(Ue=C.default.OrderedMap((0,M.default)({},ne.get("id"),ne)).merge(Ue)),Le&&(He=He.updateIn((0,E.expandTreeSubpath)(We,"children1"),function(ke){return Ue}),He=He.delete(ne.get("id"))),!Te&&!he&&(j=j.updateIn((0,E.expandTreePath)(ae,"children1"),function(ke){return He})),Le||(j=j.updateIn((0,E.expandTreePath)(ge,"children1"),function(ke){return Ue})),j=(0,E.fixPathsInTree)(j),j},l=function(j,z,x,Y){if(!x)return o(j,z);var re=Y.settings,ne=re.fieldSeparator,ae=re.setOpOnChangeField,ie=re.showErrorMessage;Array.isArray(x)&&(x=x.join(ne));var de=j.getIn((0,E.expandTreePath)(z,"type")),se=j.getIn((0,E.expandTreePath)(z,"properties")),ge=de=="rule_group",ye=(0,N.getFieldConfig)(Y,x),Ee=ye.type=="!group",Te=Ee&&ye.mode=="array",he=ge!=Ee,Le=se.get("operator"),Fe=se.get("operatorOptions"),We=se.get("field"),Ue=se.get("value"),He=se.get("valueSrc",new C.default.List),ke=se.get("valueType",new C.default.List),qe=ye&&ye.operators.indexOf(Le)!==-1?Le:null,ze=null,fe=(0,S.getOperatorsForField)(Y,x);if(fe&&fe.length==1)ze=fe[0];else if(fe&&fe.length>1){var Oe=w(ae||[]),Re;try{for(Oe.s();!(Re=Oe.n()).done;){var Ae=Re.value;if(Ae=="keep"&&!he?ze=qe:Ae=="default"?ze=(0,L.defaultOperator)(Y,x,!1):Ae=="first"&&(ze=(0,S.getFirstOperator)(Y,x)),ze)break}}catch(ot){Oe.e(ot)}finally{Oe.f()}}if(!Ee&&!ye.operators)return console.warn("Type ".concat(ye.type," is not supported")),j;if(ge&&!Ee&&(j=j.setIn((0,E.expandTreePath)(z,"type"),"rule"),j=j.deleteIn((0,E.expandTreePath)(z,"children1")),j=j.setIn((0,E.expandTreePath)(z,"properties"),new C.default.OrderedMap)),Ee){j=j.setIn((0,E.expandTreePath)(z,"type"),"rule_group");var be=(0,S.getNewValueForFieldOp)(Y,Y,se,x,ze,"field",!0),Ve=be.canReuseValue,De=be.newValue,$e=be.newValueSrc,at=be.newValueType,ut=be.operatorCardinality,Qe=(0,L.defaultGroupProperties)(Y,ye).merge({field:x,mode:ye.mode});return Te&&(Qe=Qe.merge({operator:ze,value:De,valueSrc:$e,valueType:at})),j=j.setIn((0,E.expandTreePath)(z,"children1"),new C.default.OrderedMap),j=j.setIn((0,E.expandTreePath)(z,"properties"),Qe),ye.initialEmptyWhere&&ut==1||(j=c(j,z,"rule",(0,P.default)(),(0,L.defaultRuleProperties)(Y,x),Y)),j=(0,E.fixPathsInTree)(j),j}return j.updateIn((0,E.expandTreePath)(z,"properties"),function(ot){return ot.withMutations(function(st){var Je=(0,S.getNewValueForFieldOp)(Y,Y,st,x,ze,"field",!0),dt=Je.canReuseValue,mt=Je.newValue,yt=Je.newValueSrc,ve=Je.newValueType,ce=Je.newValueError;ie&&(st=st.set("valueError",ce));var Pe=dt?Fe:(0,L.defaultOperatorOptions)(Y,ze,x);return st.set("field",x).set("operator",ze).set("operatorOptions",Pe).set("value",mt).set("valueSrc",yt).set("valueType",ve).delete("asyncListValues")})})},f=function(j,z,x,Y){var re=Y.settings.showErrorMessage,ne=j.getIn((0,E.expandTreePath)(z,"properties")),ae=j.getIn((0,E.expandTreePath)(z,"children1")),ie=ne.get("field"),de=(0,N.getFieldConfig)(Y,ie),se=de.type=="!group",ge=(0,N.getOperatorConfig)(Y,x,ie),ye=ge?(0,D.defaultValue)(ge.cardinality,1):null;return j=j.updateIn((0,E.expandTreePath)(z,"properties"),function(Ee){return Ee.withMutations(function(Te){var he=Te.get("field"),Le=Te.get("operatorOptions"),Fe=Te.get("value",new C.default.List),We=Te.get("valueSrc",new C.default.List),Ue=Te.get("operator"),He=(0,S.getNewValueForFieldOp)(Y,Y,Te,he,x,"operator",!0),ke=He.canReuseValue,qe=He.newValue,ze=He.newValueSrc,fe=He.newValueType,Oe=He.newValueError;re&&(Te=Te.set("valueError",Oe));var Re=ke?Le:(0,L.defaultOperatorOptions)(Y,x,he);return ke||(Te=Te.delete("asyncListValues")),Te.set("operator",x).set("operatorOptions",Re).set("value",qe).set("valueSrc",ze).set("valueType",fe)})}),se&&ye==0&&ae.size==0&&(j=c(j,z,"rule",(0,P.default)(),(0,L.defaultRuleProperties)(Y,ie),Y)),j},v=function(j,z,x,Y,re,ne,ae,ie){var de=ne.settings,se=de.fieldSeparator,ge=de.showErrorMessage,ye,Ee=j.getIn((0,E.expandTreePath)(z,"properties","valueSrc",x+""))||null;Ee==="field"&&Array.isArray(Y)&&(Y=Y.join(se));var Te=j.getIn((0,E.expandTreePath)(z,"properties","field"))||null,he=j.getIn((0,E.expandTreePath)(z,"properties","operator"))||null,Le=(0,N.getOperatorConfig)(ne,he,Te),Fe=he?(0,D.defaultValue)(Le.cardinality,1):null,We=!1,Ue=re||y(Y,Ee,ne),He=!1,ke=(0,b.validateValue)(ne,Te,Te,he,Y,Ue,Ee,ae,He,We),qe=(0,g.default)(ke,2),ze=qe[0],fe=qe[1],Oe=!ze;if(fe!==Y&&(Y=fe),ge){var Re=(0,S.getWidgetForFieldOp)(ne,Te,he,Ee),Ae=(0,N.getFieldWidgetConfig)(ne,Te,he,Re,Ee),be=Array.from({length:Fe},function(Je,dt){return j.getIn((0,E.expandTreePath)(z,"properties","valueSrc",dt+""))||null});if(Le&&Le.validateValues&&be.filter(function(Je){return Je=="value"||Je==null}).length==Fe){var Ve=Array.from({length:Fe},function(Je,dt){return dt==x?Y:j.getIn((0,E.expandTreePath)(z,"properties","value",dt+""))||null}),De=Ae&&Ae.toJS?Ve.map(function(Je){return Ae.toJS(Je,Ae)}):Ve,$e=Le.validateValues(De);j=j.setIn((0,E.expandTreePath)(z,"properties","valueError",Fe),$e)}}var at=j.getIn((0,E.expandTreePath)(z,"properties","value"));at||(j=j.setIn((0,E.expandTreePath)(z,"properties","value"),new C.default.List(new Array(Fe))).setIn((0,E.expandTreePath)(z,"properties","valueType"),new C.default.List(new Array(Fe))).setIn((0,E.expandTreePath)(z,"properties","valueError"),new C.default.List(new Array(Fe))));var ut=j.getIn((0,E.expandTreePath)(z,"properties","value",x+"")),Qe=j.getIn((0,E.expandTreePath)(z,"properties","valueError",x)),ot=ut==null,st=!!Qe;return(Oe||ge)&&(j=j.deleteIn((0,E.expandTreePath)(z,"properties","asyncListValues")),typeof Y>"u"?(j=j.setIn((0,E.expandTreePath)(z,"properties","value",x+""),void 0),j=j.setIn((0,E.expandTreePath)(z,"properties","valueType",x+""),null)):(ae&&(j=j.setIn((0,E.expandTreePath)(z,"properties","asyncListValues"),ae)),j=j.setIn((0,E.expandTreePath)(z,"properties","value",x+""),Y),j=j.setIn((0,E.expandTreePath)(z,"properties","valueType",x+""),Ue),ye=ie&&!ot&&!st)),ge&&(j=j.setIn((0,E.expandTreePath)(z,"properties","valueError",x),ze)),ie&&(Oe&&st||!Oe&&!st)&&(j=j.setIn((0,E.expandTreePath)(z,"properties","valueError",x),ze),ye=!1),{tree:j,isInternalValueChange:ye}},h=function(j,z,x,Y,re){var ne=re.settings.showErrorMessage,ae=j.getIn((0,E.expandTreePath)(z,"properties","field"))||null,ie=j.getIn((0,E.expandTreePath)(z,"properties","operator"))||null;if(j=j.setIn((0,E.expandTreePath)(z,"properties","value",x+""),void 0),j=j.setIn((0,E.expandTreePath)(z,"properties","valueType",x+""),null),j=j.deleteIn((0,E.expandTreePath)(z,"properties","asyncListValues")),ne){j=j.setIn((0,E.expandTreePath)(z,"properties","valueError",x),null);var de=(0,N.getOperatorConfig)(re,ie,ae),se=ie?(0,D.defaultValue)(de.cardinality,1):null;de.validateValues&&(j=j.setIn((0,E.expandTreePath)(z,"properties","valueError",se),null))}if(typeof Y>"u"?j=j.setIn((0,E.expandTreePath)(z,"properties","valueSrc",x+""),null):j=j.setIn((0,E.expandTreePath)(z,"properties","valueSrc",x+""),Y),Y){var ge=j.getIn((0,E.expandTreePath)(z,"properties")),ye=(0,S.getNewValueForFieldOp)(re,re,ge,ae,ie,"valueSrc",!0),Ee=ye.canReuseValue,Te=ye.newValue,he=ye.newValueSrc,Le=ye.newValueType,Fe=ye.newValueError;!Ee&&he.get(x)==Y&&(j=j.setIn((0,E.expandTreePath)(z,"properties","value",x+""),Te.get(x)),j=j.setIn((0,E.expandTreePath)(z,"properties","valueType",x+""),Le.get(x)))}return j},a=function(j,z,x,Y){return j.setIn((0,E.expandTreePath)(z,"properties","operatorOptions",x),Y)},n=function(j,z){var x=z.settings.canLeaveEmptyGroup;return x||(j=(0,E.fixEmptyGroupsInTree)(j)),j},y=function(j,z,x){var Y=null;if(j){if(z==="field"){var re=(0,N.getFieldConfig)(x,j);re&&(Y=re.type)}else if(z==="func"){var ne=j.get("func");if(ne){var ae=(0,N.getFuncConfig)(x,ne);ae&&(Y=ae.returnType)}}}return Y},p=function(j,z){var x=j.getIn((0,E.expandTreePath)(z,"properties","field"))||null;return x},F={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}},B=function(j,z){var x=["config","asyncListValues","__isInternal"],Y=[T.SET_TREE,T.SET_DRAG_START,T.SET_DRAG_PROGRESS,T.SET_DRAG_END],re=(0,U.default)((0,A.default)(j,x),D.applyToJS),ne=j.path&&p(z.tree,j.path)||j.field;return ne&&(re.affectedField=ne),(Y.includes(j.type)||j.type.indexOf("@@redux")==0)&&(re=null),re},Z=function(j,z,x){var Y=(0,L.defaultRoot)(j),re=z||Y,ne=H({tree:re},F);return function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ne,ie=arguments.length>1?arguments[1]:void 0,de={__isInternalValueChange:void 0,__lastAction:void 0},se={},ge=B(ie,ae);switch(ie.type){case T.SET_TREE:{var ye=x(ie.config,ie.tree);se.tree=ye;break}case T.ADD_CASE_GROUP:{se.tree=_(ae.tree,ie.path,"case_group",ie.id,ie.properties,ie.config,ie.children,ie.meta);break}case T.ADD_GROUP:{se.tree=_(ae.tree,ie.path,"group",ie.id,ie.properties,ie.config,ie.children,ie.meta);break}case T.REMOVE_GROUP:{se.tree=te(ae.tree,ie.path,ie.config);break}case T.ADD_RULE:{se.tree=c(ae.tree,ie.path,ie.ruleType,ie.id,ie.properties,ie.config,ie.children);break}case T.REMOVE_RULE:{se.tree=J(ae.tree,ie.path,ie.config);break}case T.SET_CONJUNCTION:{se.tree=m(ae.tree,ie.path,ie.conjunction);break}case T.SET_NOT:{se.tree=k(ae.tree,ie.path,ie.not);break}case T.SET_FIELD:{se.tree=l(ae.tree,ie.path,ie.field,ie.config);break}case T.SET_LOCK:{se.tree=R(ae.tree,ie.path,ie.lock);break}case T.SET_OPERATOR:{se.tree=f(ae.tree,ie.path,ie.operator,ie.config);break}case T.SET_VALUE:{var Ee=v(ae.tree,ie.path,ie.delta,ie.value,ie.valueType,ie.config,ie.asyncListValues,ie.__isInternal),Te=Ee.tree,he=Ee.isInternalValueChange;se.__isInternalValueChange=he,se.tree=Te;break}case T.SET_VALUE_SRC:{se.tree=h(ae.tree,ie.path,ie.delta,ie.srcKey,ie.config);break}case T.SET_OPERATOR_OPTION:{se.tree=a(ae.tree,ie.path,ie.name,ie.value);break}case T.MOVE_ITEM:{se.tree=u(ae.tree,ie.fromPath,ie.toPath,ie.placement,ie.config);break}case T.SET_DRAG_START:{se.dragStart=ie.dragStart,se.dragging=ie.dragging,se.mousePos=ie.mousePos;break}case T.SET_DRAG_PROGRESS:{se.mousePos=ie.mousePos,se.dragging=ie.dragging;break}case T.SET_DRAG_END:{se.tree=n(ae.tree,j),se=H(H({},se),F);break}default:break}return ge&&(se.__lastAction=ge),H(H(H({},ae),de),se)}};i.default=Z},94518:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.simulateAsyncFetch=i.mergeListValues=i.listValueToOption=i.getListValue=void 0;var O=r(e(79788)),g=r(e(90890)),M=r(e(62052)),C=e(1218),E=function(S){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;return function(){var A=(0,M.default)(O.default.mark(function U(I,$,w){var V,G,K,H,_,te,J,k;return O.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return V=w.pageSize!=null?w.pageSize:D,G=(0,C.listValuesToArray)(S).filter(function(s){var c=s.title;return I==null?!0:c.toUpperCase().indexOf(I.toUpperCase())!=-1}),K=V?Math.ceil(G.length/V):0,H=$||0,_=V?Math.ceil(H/V):null,te=V?G.slice(H,H+V):G,J=V?H+te.length:null,k=V?J<G.length:!1,console.debug("simulateAsyncFetch",{search:I,offset:$,values:te,hasMore:k,filtered:G}),m.next=11,(0,C.sleep)(b);case 11:return m.abrupt("return",{values:te,hasMore:k});case 12:case"end":return m.stop()}},U)}));return function(U,I,$){return A.apply(this,arguments)}}()};i.simulateAsyncFetch=E;var L=function(S,D){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!D)return S;var A=S||[],U=D.filter(function($){return A.find(function(w){return w.value==$.value})==null}),I=b?[].concat((0,g.default)(U),(0,g.default)(A)):[].concat((0,g.default)(A),(0,g.default)(U));return I};i.mergeListValues=L;var T=function(S){if(S==null)return null;var D=S.title,b=S.value,A=S.disabled,U=S.groupTitle,I=S.renderTitle,$={title:D,value:b};return A&&($.disabled=A),U&&($.groupTitle=U),I&&($.renderTitle=I),$};i.listValueToOption=T;var P=function(S,D){return(0,C.mapListValues)(D,function(b){return b.value===S?b:null}).filter(function(b){return b!==null}).shift()};i.getListValue=P},24256:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.normalizeField=i.getOperatorConfig=i.getFuncConfig=i.getFuncArgConfig=i.getFieldWidgetConfig=i.getFieldRawConfig=i.getFieldConfig=i.extendConfig=i.createConfigMemo=void 0;var O=r(e(90890)),g=r(e(92476)),M=r(e(33805)),C=r(e(63955)),E=r(e(39075)),L=r(e(9094)),T=e(93876),P=r(e(36365)),N=e(1218),S=e(41895),D=r(e(29521)),b=r(e(7275));function A(h,a){var n=Object.keys(h);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(h);a&&(y=y.filter(function(p){return Object.getOwnPropertyDescriptor(h,p).enumerable})),n.push.apply(n,y)}return n}function U(h){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?A(Object(n),!0).forEach(function(y){(0,g.default)(h,y,n[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(y){Object.defineProperty(h,y,Object.getOwnPropertyDescriptor(n,y))})}return h}function I(h,a){var n=typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(!n){if(Array.isArray(h)||(n=$(h))||a&&h&&typeof h.length=="number"){n&&(h=n);var y=0,p=function(){};return{s:p,n:function(){return y>=h.length?{done:!0}:{done:!1,value:h[y++]}},e:function(j){throw j},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var F=!0,B=!1,Z;return{s:function(){n=n.call(h)},n:function(){var j=n.next();return F=j.done,j},e:function(j){B=!0,Z=j},f:function(){try{!F&&n.return!=null&&n.return()}finally{if(B)throw Z}}}}function $(h,a){if(h){if(typeof h=="string")return w(h,a);var n=Object.prototype.toString.call(h).slice(8,-1);if(n==="Object"&&h.constructor&&(n=h.constructor.name),n==="Map"||n==="Set")return Array.from(h);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(h,a)}}function w(h,a){(a==null||a>h.length)&&(a=h.length);for(var n=0,y=new Array(a);n<a;n++)y[n]=h[n];return y}var V=["conjunctions","fields","types","operators","widgets","settings","funcs"],G=function(a){return(0,b.default)(a,V)},K=function(){var a=new Map,n=2,y=0,p=function(X){var j=H(X,++y);return a.size+1>n&&a.delete(a.keys()[0]),a.set(X,j),j},F=function(X){var j=I(a.keys()),z;try{var x=function(){var se=z.value,ge=V.map(function(ye){return se[ye]===X[ye]}).filter(function(ye){return!ye}).length===0;if(ge)return{v:a.get(se)}};for(j.s();!(z=j.n()).done;){var Y=x();if((0,M.default)(Y)==="object")return Y.v}}catch(de){j.e(de)}finally{j.f()}var re=I(a.values()),ne;try{var ae=function(){var se=ne.value,ge=V.map(function(ye){return se[ye]===X[ye]}).filter(function(ye){return!ye}).length===0;if(ge)return{v:se}};for(re.s();!(ne=re.n()).done;){var ie=ae();if((0,M.default)(ie)==="object")return ie.v}}catch(de){re.e(de)}finally{re.f()}return null},B=function(X){return F(X)||p(X)};return function(Z){return B(G(Z))}};i.createConfigMemo=K;var H=function(a,n){return a.__configId||(a=U({},a),a.settings=(0,C.default)({},T.settings,a.settings),a._fieldsCntByType={},a._funcsCntByType={},a.types=(0,D.default)(a.types),_(a.types,a),a.fields=(0,D.default)(a.fields),a.__fieldNames={},J(a.fields,a),a.funcs=(0,D.default)(a.funcs),k(a.funcs,a),P.default.locale(a.settings.locale.moment),Object.defineProperty(a,"__configId",{enumerable:!1,writable:!1,value:n||(0,E.default)()})),a};i.extendConfig=H;function _(h,a){for(var n in h){var y=h[n];te(n,y,a)}}function te(h,a,n){var y=null,p=null;a.mainWidget=a.mainWidget||Object.keys(a.widgets).filter(function(x){return x!="field"&&x!="func"})[0];for(var F in a.widgets){var B=a.widgets[F];if(B.operators){var Z=B.operators;a.excludeOperators&&(Z=Z.filter(function(x){return!a.excludeOperators.includes(x)})),y=(0,N.mergeArraysSmart)(y,Z)}B.defaultOperator&&(p=B.defaultOperator),F==a.mainWidget&&(B=(0,C.default)({},{widgetProps:a.mainWidgetProps||{}},B)),a.widgets[F]=B}a.valueSources||(a.valueSources=Object.keys(n.settings.valueSourcesInfo));var X=I(a.valueSources),j;try{for(X.s();!(j=X.n()).done;){var z=j.value;z!="value"&&!a.widgets[z]&&(a.widgets[z]={})}}catch(x){X.e(x)}finally{X.f()}!a.operators&&y&&(a.operators=Array.from(new Set(y))),!a.defaultOperator&&p&&(a.defaultOperator=p)}function J(h,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];for(var y in h)R(h[y],a,[].concat((0,O.default)(n),[y])),h[y].subfields&&J(h[y].subfields,a,[].concat((0,O.default)(n),[y]))}function k(h,a){if(h)for(var n in h){var y=h[n];y.returnType&&(a._funcsCntByType[y.returnType]||(a._funcsCntByType[y.returnType]=0),a._funcsCntByType[y.returnType]++);for(var p in y.args)R(y.args[p],a,null,!0);if(y.args){var F=Object.keys(y.args),B=!0,Z=I(F.reverse()),X;try{for(Z.s();!(X=Z.n()).done;){var j=X.value,z=y.args[j];!B&&z.isOptional&&delete z.isOptional,z.isOptional||(B=!1)}}catch(x){Z.e(x)}finally{Z.f()}}y.subfields&&k(y.subfields,a)}}function R(h,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,p=null,F=null,B=a.types[h.type],Z=h.excludeOperators||[];if(h.type!="!struct"&&h.type!="!group"){var X=["listValues","allowCustomValues","validateValue"];h.fieldSettings||(h.fieldSettings={});for(var j=0,z=X;j<z.length;j++){var x=z[j];h[x]&&(h.fieldSettings[x]=h[x],delete h[x])}if(h.fieldSettings.listValues&&(h.fieldSettings.listValues=(0,N.normalizeListValues)(h.fieldSettings.listValues,h.type,h.fieldSettings)),!B){h.disabled=!0;return}y||(a._fieldsCntByType[h.type]||(a._fieldsCntByType[h.type]=0),a._fieldsCntByType[h.type]++),h.widgets||(h.widgets={}),y&&(h._isFuncArg=!0),h.mainWidget=h.mainWidget||B.mainWidget,h.valueSources=h.valueSources||B.valueSources;var Y=B.excludeOperators||[];for(var re in B.widgets){var ne=h.widgets[re]||{},ae=B.widgets[re]||{};y||function(){var de=[].concat((0,O.default)(Z),(0,O.default)(Y)),se=h.preferWidgets&&(re=="field"||h.preferWidgets.includes(re))||de.length>0;if(ne.operators){var ge=ne.operators.filter(function(Ee){return!de.includes(Ee)});p=[].concat((0,O.default)(p||[]),(0,O.default)(ge))}else if(se&&ae.operators){var ye=ae.operators.filter(function(Ee){return!de.includes(Ee)});p=[].concat((0,O.default)(p||[]),(0,O.default)(ye))}ne.defaultOperator&&(F=ne.defaultOperator)}(),re==h.mainWidget&&(ne=(0,C.default)({},{widgetProps:h.mainWidgetProps||{}},ne)),h.widgets[re]=ne}y||(!h.operators&&p&&(h.operators=Array.from(new Set(p))),!h.defaultOperator&&F&&(h.defaultOperator=F))}var ie=s(a,n);ie&&(h.fieldName=ie),n&&h.fieldName&&(a.__fieldNames[h.fieldName]=n)}var m=function(a,n){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"fields",p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"subfields";if(!n)return null;if(n=="!case_value")return{type:"case_value",mainWidget:"case_value",widgets:{case_value:a.widgets.case_value}};var F=a.settings.fieldSeparator,B=Array.isArray(n)?n:n.split(F),Z=a[y];if(!Z)return null;for(var X=Z,j=null,z=[],x=0;x<B.length;x++){var Y=B[x];z.push(Y);var re=z.join(F);j=X[re],x<B.length-1&&(j&&j[p]?(X=j[p],z=[]):j=null)}return j};i.getFieldRawConfig=m;var s=function(a,n){if(!n)return null;for(var y=a.settings.fieldSeparator,p=(0,O.default)(n),F=[],B,Z;(B=p.pop())!==void 0&&p.length>0;)if(F.unshift(B),Z=m(a,p),Z.fieldName)return[Z.fieldName].concat(F).join(y);return null},c=function(a,n){var y=a.settings.fieldSeparator,p=Array.isArray(n)?n.join(y):n;return a.__fieldNames[p]?a.__fieldNames[p].join(y):p};i.normalizeField=c;var o=function(a,n){if(!n)return null;var y=m(a,n,"funcs","subfields");return y||null};i.getFuncConfig=o;var u=function(a,n,y){var p=o(a,n);if(!p)return null;var F=p.args&&p.args[y]||null;if(!F)return null;var B=a.types[F.type]||{},Z=(0,L.default)({},B,F||{},function(X,j,z,x,Y,re){if(Array.isArray(X))return j});return Z};i.getFuncArgConfig=u;var l=function(a,n){if(!n)return null;if((0,M.default)(n)=="object"&&!n.func&&n.type)return n;if((0,M.default)(n)=="object"&&n.func&&n.arg)return u(a,n.func,n.arg);var y=m(a,n);if(!y)return null;var p=a.types[y.type]||{},F=(0,L.default)({},p,y||{},function(B,Z,X,j,z,x){if(Array.isArray(B))return Z});return F};i.getFieldConfig=l;var f=function(a,n){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!n)return null;var p=a.operators[n];if(y){var F=l(a,y),B=(0,S.getWidgetForFieldOp)(a,y,n),Z=a.widgets[B]||{},X=(F&&F.widgets?F.widgets[B]:{})||{},j=(Z.opProps||{})[n],z=(X.opProps||{})[n],x=(0,C.default)({},p,j,z);return x}else return p};i.getOperatorConfig=f;var v=function(a,n,y){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,F=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n||!(y||p)&&F!="const"&&n!="!case_value")return null;var B=l(a,n);p||(p=(0,S.getWidgetForFieldOp)(a,n,y,F));var Z=a.widgets[p]||{},X=(B&&B.widgets?B.widgets[p]:{})||{},j=X.widgetProps||{},z=(F=="value"||!F)&&B&&B.fieldSettings||{},x=(0,C.default)({},Z,j,z);return x};i.getFieldWidgetConfig=v},55805:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.defaultRuleProperties=i.defaultRule=i.defaultRoot=i.defaultOperatorOptions=i.defaultOperator=i.defaultItemProperties=i.defaultGroupProperties=i.defaultGroupConjunction=i.defaultField=i.defaultConjunction=void 0;var O=r(e(92476)),g=r(e(40745)),M=r(e(39075)),C=e(24256),E=e(41895);function L(V,G){var K=Object.keys(V);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(V);G&&(H=H.filter(function(_){return Object.getOwnPropertyDescriptor(V,_).enumerable})),K.push.apply(K,H)}return K}function T(V){for(var G=1;G<arguments.length;G++){var K=arguments[G]!=null?arguments[G]:{};G%2?L(Object(K),!0).forEach(function(H){(0,O.default)(V,H,K[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(K)):L(Object(K)).forEach(function(H){Object.defineProperty(V,H,Object.getOwnPropertyDescriptor(K,H))})}return V}var P=function(G){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return typeof G.settings.defaultField=="function"?G.settings.defaultField(H):G.settings.defaultField||(K?(0,E.getFirstField)(G,H):null)};i.defaultField=P;var N=function(G,K){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,_=(0,C.getFieldConfig)(G,K),te=_&&_.operators||[],J=_&&_.defaultOperator;te.includes(J)||(J=null),!J&&H&&(J=(0,E.getFirstOperator)(G,K));var k=typeof G.settings.defaultOperator=="function"?G.settings.defaultOperator(K,_):J;return k};i.defaultOperator=N;var S=function(G,K,H){var _=K?(0,C.getOperatorConfig)(G,K,H):null;return _&&_.options?new g.default.Map(_.options&&_.options.defaults||{}):null};i.defaultOperatorOptions=S;var D=function(G){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,_=null,te=null,J=G.settings,k=J.setDefaultFieldAndOp,R=J.showErrorMessage;if(H){var m,s;_=H==null||(m=H.properties)===null||m===void 0?void 0:m.field,te=H==null||(s=H.properties)===null||s===void 0?void 0:s.operator}else k&&(_=P(G,!0,K),te=N(G,_));var c=new g.default.Map({field:_,operator:te,value:new g.default.List,valueSrc:new g.default.List,operatorOptions:S(G,te,_)});if(R&&(c=c.set("valueError",new g.default.List)),_&&te){var o=(0,E.getNewValueForFieldOp)(G,G,c,_,te,"operator",!1),u=o.newValue,l=o.newValueSrc,f=o.newValueType,v=o.newValueError;c=c.set("value",u).set("valueSrc",l).set("valueType",f),R&&(c=c.set("valueError",v))}return c};i.defaultRuleProperties=D;var b=function(G){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;K=(0,C.getFieldConfig)(G,K);var H=K&&K.conjunctions||Object.keys(G.conjunctions);return H.length==1?H[0]:G.settings.defaultGroupConjunction||G.settings.defaultConjunction||H[0]};i.defaultGroupConjunction=b;var A=function(G){return G.settings.defaultConjunction||Object.keys(G.conjunctions)[0]};i.defaultConjunction=A;var U=function(G){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new g.default.Map({conjunction:b(G,K),not:!1})};i.defaultGroupProperties=U;var I=function(G,K){var H;return K&&K.type=="group"?U(G,K==null||(H=K.properties)===null||H===void 0?void 0:H.field):D(G,null,K)};i.defaultItemProperties=I;var $=function(G,K){return(0,O.default)({},G,new g.default.Map({type:"rule",id:G,properties:D(K)}))};i.defaultRule=$;var w=function(G){return new g.default.Map({type:"group",id:(0,M.default)(),children1:new g.default.OrderedMap(T({},$((0,M.default)(),G))),properties:U(G)})};i.defaultRoot=w},69664:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.sqlEmptyValue=i.spelImportConcat=i.spelFormatConcat=i.spelFixList=i.spelEscape=i.mongoEmptyValue=i.SqlString=void 0;var O=r(e(33805)),g=e(62211);i.SqlString=g,g.trim=function(D){return D.charAt(0)=="'"?D.substring(1,D.length-1):D},g.escapeLike=function(D){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,U=g.escape(D);return U=g.trim(U),U=U.replace(/[%_]/g,"\\$&"),U=(b?"%":"")+U+(A?"%":""),U="'"+U+"'",U};var M=function(b){var A="''",U=b?.type;return U=="date"?A="'0000-00-00'":U=="datetime"?A="'0000-00-00 00:00'":U=="time"?A="'00:00'":U=="number"&&(A="0"),A};i.sqlEmptyValue=M;var C=function(b){var A="",U=b?.type;return U=="number"&&(A=0),A};i.mongoEmptyValue=C;var E=function(b){return"'"+b.replace(/'/g,"''")+"'"},L=function(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U,I,$=["int","float"];b.map(function(G){if(G!=null){if(typeof G=="string")I="String";else if(typeof G=="number")I=Number.isInteger(G)?"int":"float";else throw new Error("spelEscape: Can't use value ".concat(G," in array"));if(!U)U=I;else if(U!=I)if($.includes(U)&&$.includes(I))U="float";else throw new Error("spelEscape: Can't use different types in array: found ".concat(U," and ").concat(I))}}),U||(U="String");var w;U=="float"?w=b.map(function(G){return P(G,!0)}):w=b.map(function(G){return P(G)});var V;return A?V="new ".concat(U,"[]{").concat(w.join(", "),"}"):V="{".concat(w.join(", "),"}"),V},T=function(b){return"".concat(b,".?[true]")};i.spelFixList=T;var P=function(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(b==null)return"null";switch((0,O.default)(b)){case"boolean":return b?"true":"false";case"number":return!Number.isFinite(b)||isNaN(b)?void 0:b+(!Number.isInteger(b)||A?"f":"");case"object":if(Array.isArray(b))return L(b,U);throw new Error("spelEscape: Object is not supported");default:return E(b)}};i.spelEscape=P;var N=function(b){return b&&Array.isArray(b)&&b.length?b.map(function(A){if(A.type=="const")return P(A.value);if(A.type=="property")return""+A.value;if(A.type=="variable")return"#"+A.value}).filter(function(A){return A!=null}).join(" + "):"null"};i.spelFormatConcat=N;var S=function(b){if(b==null)return[void 0,[]];var A=[],U=b.valueType=="case_value"?b.value:[b],I=U.map(function($){if($.valueSrc=="value")return $.value===null?void 0:{type:"const",value:$.value};if($.valueSrc=="field")return{type:$.isVariable?"variable":"property",value:$.value};A.push("Unsupported valueSrc ".concat($.valueSrc," in concatenation"))}).filter(function($){return $!=null});return[I,A]};i.spelImportConcat=S},91152:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.setFunc=i.setArgValueSrc=i.setArgValue=i.completeValue=i.completeFuncValue=void 0;var O=r(e(33805)),g=e(24256),M=e(41895),C=r(e(40745));function E($,w){var V=typeof Symbol<"u"&&$[Symbol.iterator]||$["@@iterator"];if(!V){if(Array.isArray($)||(V=L($))||w&&$&&typeof $.length=="number"){V&&($=V);var G=0,K=function(){};return{s:K,n:function(){return G>=$.length?{done:!0}:{done:!1,value:$[G++]}},e:function(k){throw k},f:K}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H=!0,_=!1,te;return{s:function(){V=V.call($)},n:function(){var k=V.next();return H=k.done,k},e:function(k){_=!0,te=k},f:function(){try{!H&&V.return!=null&&V.return()}finally{if(_)throw te}}}}function L($,w){if($){if(typeof $=="string")return T($,w);var V=Object.prototype.toString.call($).slice(8,-1);if(V==="Object"&&$.constructor&&(V=$.constructor.name),V==="Map"||V==="Set")return Array.from($);if(V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return T($,w)}}function T($,w){(w==null||w>$.length)&&(w=$.length);for(var V=0,G=new Array(w);V<w;V++)G[V]=$[V];return G}var P=function(w){return(0,O.default)(w)=="object"&&w!==null&&!Array.isArray(w)},N=function(w,V,G){return V=="func"?S(w,G):w};i.completeValue=N;var S=function(w,V){var G=function(H){if(H){var _=H.get("func"),te=_&&(0,g.getFuncConfig)(V,_);if(te){var J=H,k=!1;for(var R in te.args){var m=te.args[R],s=m.valueSources,c=m.isOptional,o=m.defaultValue,u=(0,M.filterValueSourcesForField)(V,s,m),l=J.get("args"),f=u.length==1?u[0]:void 0,v=l?l.get(R):void 0,h=v?v.get("value"):void 0,a=(v?v.get("valueSrc"):void 0)||f;if(h!==void 0){var n=N(h,a,V);if(n===void 0||(n!==h&&(J=J.setIn(["args",R,"value"],n)),k))return}else if(o!==void 0&&!P(o))J=J.setIn(["args",R,"value"],A(m)),J=J.setIn(["args",R,"valueSrc"],"value");else if(c)k=!0;else return}return J}}};return G(w)};i.completeFuncValue=S;var D=function(w,V){var G=[],K=[],H=function _(te){var J=te&&te.get("args");if(J){var k=E(J.values()),R;try{for(k.s();!(R=k.n()).done;){var m=R.value;if(m.get("valueSrc")=="field"){var s=m.get("value");if(s){var c=V?(0,g.getFieldConfig)(V,s):void 0;V&&!c?K.push(s):G.push(s)}}else m.get("valueSrc")=="func"&&_(m.get("value"))}}catch(o){k.e(o)}finally{k.f()}}};return H(w),[G,K]},b=function(w,V,G){var K=G.settings.fieldSeparator;w=w||new C.default.Map,Array.isArray(V)&&(V=V.join(K)),w=w.set("func",V),w=w.set("args",new C.default.Map);var H=V&&(0,g.getFuncConfig)(G,V);if(H)for(var _ in H.args){var te=H.args[_],J=te.valueSources,k=te.defaultValue,R=(0,M.filterValueSourcesForField)(G,J,te),m=R.length?R[0]:void 0,s=k?P(k)&&k.func?"func":"value":void 0,c=s||m;k!==void 0&&(w=w.setIn(["args",_,"value"],A(te))),c&&(w=w.setIn(["args",_,"valueSrc"],c))}return w};i.setFunc=b;var A=function(w){var V=w.defaultValue;return P(V)&&!C.default.Map.isMap(V)&&V.func?C.default.fromJS(V,function(G,K){return C.default.Iterable.isIndexed(K)?K.toList():K.toOrderedMap()}):V},U=function(w,V,G,K,H){if(w&&w.get("func")){w=w.setIn(["args",V,"value"],G);var _=K.valueSources,te=(0,M.filterValueSourcesForField)(H,_,K),J=te.length==1?te[0]:void 0;J&&(w=w.setIn(["args",V,"valueSrc"],J))}return w};i.setArgValue=U;var I=function(w,V,G,K,H){return w&&w.get("func")&&(w=w.setIn(["args",V],new C.default.Map({valueSrc:G}))),w};i.setArgValueSrc=I},45881:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.TreeUtils=i.ExportUtils=i.DefaultUtils=i.ConfigUtils=void 0,Object.defineProperty(i,"getSwitchValues",{enumerable:!0,get:function(){return T.getSwitchValues}}),Object.defineProperty(i,"simulateAsyncFetch",{enumerable:!0,get:function(){return M.simulateAsyncFetch}}),Object.defineProperty(i,"uuid",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(i,"validateTree",{enumerable:!0,get:function(){return g.validateTree}});var g=e(72769),M=e(94518),C=r(e(39075)),E=S(e(24256));i.ConfigUtils=E;var L=S(e(55805));i.DefaultUtils=L;var T=S(e(75403));i.TreeUtils=T;var P=S(e(69664));i.ExportUtils=P;function N(D){if(typeof WeakMap!="function")return null;var b=new WeakMap,A=new WeakMap;return(N=function(I){return I?A:b})(D)}function S(D,b){if(!b&&D&&D.__esModule)return D;if(D===null||O(D)!=="object"&&typeof D!="function")return{default:D};var A=N(b);if(A&&A.has(D))return A.get(D);var U={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in D)if($!=="default"&&Object.prototype.hasOwnProperty.call(D,$)){var w=I?Object.getOwnPropertyDescriptor(D,$):null;w&&(w.get||w.set)?Object.defineProperty(U,$,w):U[$]=D[$]}return U.default=D,A&&A.set(D,U),U}},31506:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.useOnPropsChanged=i.pureShouldComponentUpdate=i.liteShouldComponentUpdate=i.bindActionCreators=void 0;var O=r(e(68404)),g=r(e(74937)),M=e(1218),C=function(S,D){return function(b,A){var U=S.props,I=S.state,$=b!=U||A!=I;if($&&I==A&&U!=b){var w=[];for(var V in b){var G=b[V]!=U[V];G&&(D[V]=="ignore"?G=!1:D[V]=="shallow_deep"?G=!(0,M.shallowEqual)(b[V],U[V],!0):D[V]=="shallow"?G=!(0,M.shallowEqual)(b[V],U[V]):typeof D[V]=="function"&&(G=D[V](b[V],U[V],A))),G&&w.push(V)}w.length||($=!1)}return $}};i.liteShouldComponentUpdate=C;var E=function(S){return function(D,b){return!(0,M.shallowEqual)(S.props,D)||!(0,M.shallowEqual)(S.state,b)}};i.pureShouldComponentUpdate=E;var L=function(){var S=O.default.version.split(".").map(parseInt.bind(null,10));return S[0]==16&&S[1]>=3||S[0]>16},T=function(S){L?S.UNSAFE_componentWillReceiveProps=function(D){S.onPropsChanged(D)}:S.componentWillReceiveProps=function(D){S.onPropsChanged(D)}};i.useOnPropsChanged=T;var P=function(S,D,b){return(0,g.default)(S,function(A){return function(){for(var U=arguments.length,I=new Array(U),$=0;$<U;$++)I[$]=arguments[$];return b(A.apply(void 0,[D].concat(I)))}})};i.bindActionCreators=P},41895:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.getWidgetsForFieldOp=i.getWidgetForFieldOp=i.getValueSourcesForFieldOp=i.getValueLabel=i.getOperatorsForField=i.getNewValueForFieldOp=i.getFuncPathLabels=i.getFirstOperator=i.getFirstField=i.getFieldPathLabels=i.getFieldPath=i.getFieldPartsConfigs=i.formatFieldName=i.filterValueSourcesForField=void 0;var O=r(e(33805)),g=r(e(90890)),M=r(e(47452)),C=e(24256),E=e(1218),L=r(e(40745)),T=e(72769),P=r(e(4161)),N=["select","multiselect","treeselect","treemultiselect"],S=function(R){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0,f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;m||(m=R);var v=s.get("field"),h=s.get("operator"),a=s.get("value"),n=s.get("valueSrc",new L.default.List),y=s.get("valueType",new L.default.List),p=s.get("asyncListValues"),F=R.settings,B=F.convertableWidgets,Z=F.clearValueOnChangeField,X=F.clearValueOnChangeOp,j=F.showErrorMessage,z=(0,C.getOperatorConfig)(R,o,c),x=o?(0,E.defaultValue)(z.cardinality,1):null,Y=(0,C.getFieldConfig)(m,v),re=(0,C.getFieldConfig)(R,c),ne=v&&h&&o&&a!=null&&(!u||u=="field"&&!Z||u=="operator"&&!X)&&Y&&re&&Y.type==re.type;ne&&N.includes(Y.type)&&u=="field"&&(ne=!1);for(var ae=0;ae<x;ae++){var ie=n.get(ae)||null,de=te(m,v,h,ie),se=te(R,c,o,ie),ge=ie=="value"?de:te(m,v,h,"value"),ye=ie=="value"?se:te(R,c,o,"value"),Ee=ye==ge||(B[ge]||[]).includes(ye);Ee||(ne=!1)}h!=o&&[h,o].includes("proximity")&&(ne=!1);var Te=(0,C.getFieldWidgetConfig)(R,c,o,null,n.first()),he=_(R,c,o),Le={},Fe=Array.from({length:x},function(){return null});if(ne)for(var We=function(be){var Ve=a.get(be),De=y.get(be)||null,$e=n.get(be)||null,at=he.find(function(ce){return ce==$e})!=null;!at&&be>0&&$e==null&&(at=!0);var ut=p,Qe=(0,T.validateValue)(R,c,c,o,Ve,De,$e,ut,l,f),ot=(0,M.default)(Qe,2),st=ot[0],Je=ot[1],dt=!st,mt=Je!==Ve,yt=!at||!dt&&(u=="field"||!j&&!mt),ve=!!st&&j&&!yt&&!mt;if(ve&&(Fe[be]=st),mt&&(Le[be]=Je),yt)return ne=!1,"break"},Ue=0;Ue<x;Ue++){var He=We(Ue);if(He==="break")break}var ke=null,qe=null,ze=null,fe=null;if(ke=new L.default.List(Array.from({length:x},function(Ae,be){var Ve=void 0;if(ne)be<a.size&&(Ve=a.get(be),Le[be]!==void 0&&(Ve=Le[be]));else if(x==1){var De;Ve=(0,E.getFirstDefined)([re?.defaultValue,re==null||(De=re.fieldSettings)===null||De===void 0?void 0:De.defaultValue,Te?.defaultValue])}return Ve})),qe=new L.default.List(Array.from({length:x},function(Ae,be){var Ve=null;return ne?be<n.size&&(Ve=n.get(be)):(he.length==1||he.length>1)&&(Ve=he[0]),Ve})),j){if(z&&z.validateValues&&qe.toJS().filter(function(Ae){return Ae=="value"||Ae==null}).length==x){var Oe=Te&&Te.toJS?ke.toJS().map(function(Ae){return Te.toJS(Ae,Te)}):ke.toJS(),Re=z.validateValues(Oe);j&&Fe.push(Re)}fe=new L.default.List(Fe)}return ze=new L.default.List(Array.from({length:x},function(Ae,be){var Ve=null;return ne?be<y.size&&(Ve=y.get(be)):x==1&&Te&&Te.type!==void 0?Ve=Te.type:x==1&&re&&re.type!==void 0&&(Ve=re.type=="!group"?"number":re.type),Ve})),{canReuseValue:ne,newValue:ke,newValueSrc:qe,newValueType:ze,newValueError:fe,operatorCardinality:x}};i.getNewValueForFieldOp=S;var D=function(R){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=R.settings.fieldSeparator,c=typeof m=="string"?m.split(s):m,o=m?(0,C.getFieldRawConfig)(R,m):R,u=o,l=null,f=[];do{var v=u===R?R.fields:u.subfields;if(!v||!Object.keys(v).length){u=l=null;break}l=Object.keys(v)[0],f.push(l),u=v[l]}while(u.type=="!struct"||u.type=="!group");return(c||[]).concat(f).join(s)};i.getFirstField=D;var b=function(R,m){var s=(0,C.getFieldConfig)(R,m),c=s?s.operators:[];return c};i.getOperatorsForField=b;var A=function(R,m){var s=b(R,m);return s?s[0]:null};i.getFirstOperator=A;var U=function(R,m){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!R)return null;var c=m.settings.fieldSeparator,o=Array.isArray(R)?R:R.split(c);return s?o:o.map(function(u,l,f){return f.slice(0,l+1)}).map(function(u){return u.join(c)})};i.getFieldPath=U;var I=function(R,m){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return $(R,m,s,"funcs","subfields")};i.getFuncPathLabels=I;var $=function(R,m){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"fields",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"subfields";if(!R)return null;var u=m.settings.fieldSeparator,l=Array.isArray(R)?R:R.split(u),f=s?Array.isArray(s)?s:s.split(u):[];return l.slice(f.length).map(function(v,h,a){return a.slice(0,h+1)}).map(function(v){return[].concat((0,g.default)(f),(0,g.default)(v)).join(u)}).map(function(v){var h=(0,C.getFieldRawConfig)(m,v,c,o);return h&&h.label||h&&(0,P.default)(v.split(u))}).filter(function(v){return v!=null})};i.getFieldPathLabels=$;var w=function(R,m){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!R)return null;var c=s&&(0,C.getFieldRawConfig)(m,s)||null,o=m.settings.fieldSeparator,u=Array.isArray(R)?R:R.split(o),l=s?Array.isArray(s)?s:s.split(o):[];return u.slice(l.length).map(function(f,v,h){return h.slice(0,v+1)}).map(function(f){return{part:[].concat((0,g.default)(l),(0,g.default)(f)).join(o),key:f[f.length-1]}}).map(function(f){var v=f.part,h=f.key,a=(0,C.getFieldRawConfig)(m,v);return{key:h,cnf:a}}).map(function(f,v,h){var a=f.key,n=f.cnf,y=v>0?h[v-1].cnf:c;return[a,n,y]})};i.getFieldPartsConfigs=w;var V=function(R,m,s,c){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,l=m&&(0,O.default)(m)=="object"&&!!m.func&&!!m.arg,f=R.settings.showLabels,v=(0,C.getFieldConfig)(R,m),h=(0,C.getFieldWidgetConfig)(R,m,s,null,o)||{},a=(0,C.getOperatorConfig)(R,s,m)||{},n=u?1:a.cardinality,y=null;if(n>1){var p=h.valueLabels||a.valueLabels;p&&(y=p[c]),y&&(0,O.default)(y)!="object"&&(y={label:y,placeholder:y}),y||(y={label:R.settings.valueLabel+" "+(c+1),placeholder:R.settings.valuePlaceholder+" "+(c+1)})}else{var F=h.valueLabel,B=h.valuePlaceholder;l&&(F||(F=v.label||m.arg),!B&&!f&&(B=v.label||m.arg)),y={label:F||R.settings.valueLabel,placeholder:B||R.settings.valuePlaceholder}}return y};i.getValueLabel=V;function G(k,R){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=[],o=[];if(!R)return{widgets:c,valueSrcs:o};var u=(0,O.default)(R)=="object"&&(!!R.func&&!!R.arg||R._isFuncArg),l=(0,C.getFieldConfig)(k,R),f=m?k.operators[m]:null;if(l&&l.widgets){var v=function(y){var p=l.widgets[y],F=k.widgets[y].valueSrc||"value",B=!0;if(y=="field"&&(B=B&&H(k,["field"],l).length>0),y=="func"&&(B=B&&H(k,["func"],l).length>0),s=="value"&&!p.operators&&!u&&R!="!case_value"&&(B=!1),p.operators&&m&&(B=B&&p.operators.indexOf(m)!=-1),s&&s!=F&&s!="const"&&(B=!1),f&&f.cardinality==0&&F!="value"&&(B=!1),B){c.push(y);var Z=l.valueSources&&l.valueSources.indexOf(F)!=-1;f&&f.valueSources&&f.valueSources.indexOf(F)==-1&&(Z=!1),Z&&!o.find(function(X){return X==F})&&o.push(F)}};for(var h in l.widgets)v(h)}var a=function(y){var p=0;return l.preferWidgets?l.preferWidgets.includes(y)&&(p+=10-l.preferWidgets.indexOf(y)):y==l.mainWidget&&(p+=100),y=="field"&&(p-=1),y=="func"&&(p-=2),p};return c.sort(function(n,y){return a(y)-a(n)}),{widgets:c,valueSrcs:o}}var K=function(R,m,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=G(R,m,s,c),u=o.widgets;return u};i.getWidgetsForFieldOp=K;var H=function(R,m,s){return s?m.filter(function(c){var o=!0;if(c=="field"&&R._fieldsCntByType){var u=s._isFuncArg?0:1;o=o&&R._fieldsCntByType[s.type]>u}return c=="func"&&(R._funcsCntByType&&(o=o&&!!R._funcsCntByType[s.type]),s.funcs&&(o=o&&s.funcs.length>0)),o}):m};i.filterValueSourcesForField=H;var _=function(R,m,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=G(R,m,s,null),l=u.valueSrcs,f=H(R,l,c);return f};i.getValueSourcesForFieldOp=_;var te=function(R,m,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=G(R,m,s,c),u=o.widgets,l=null;return u.length&&(l=u[0]),l};i.getWidgetForFieldOp=te;var J=function(R,m,s){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(R){var o=(0,C.getFieldConfig)(m,R)||{},u=m.settings.fieldSeparator,l=Array.isArray(R)?R:R.split(u),f=Array.isArray(R)?R.join(u):R;if(o.tableName){var v=(0,g.default)(l);v[0]=o.tableName,f=v.join(u)}if(o.fieldName&&(f=o.fieldName),c){var h=(0,C.getFieldConfig)(m,c)||{},a=c;h.fieldName&&(a=h.fieldName),f.indexOf(a+u)==0?f=f.slice((a+u).length):s.errors.push("Can't cut group ".concat(a," from field ").concat(f))}return f}};i.formatFieldName=J},1218:(ee,i,e)=>{"use strict";var r=e(59018),O=e(33805);Object.defineProperty(i,"__esModule",{value:!0}),i.applyToJS=y,i.mapListValues=i.logger=i.listValuesToArray=i.isJsonLogic=i.isImmutable=i.immutableEqual=i.getValueInListValues=i.getTitleInListValues=i.getLogger=i.getItemInListValues=i.getFirstDefined=i.flatizeTreeData=i.escapeRegExp=i.eqSet=i.eqArrSet=i.defaultValue=i.defaultTreeDataMap=i.deepEqual=void 0,i.mergeArraysSmart=F,i.shallowEqual=i.removePrefixPath=i.normalizeListValues=void 0,i.sleep=a,i.toImmutableList=p,i.truncateString=void 0;var g=r(e(47452)),M=r(e(90890)),C=r(e(33805)),E=T(e(40745));function L(z){if(typeof WeakMap!="function")return null;var x=new WeakMap,Y=new WeakMap;return(L=function(ne){return ne?Y:x})(z)}function T(z,x){if(!x&&z&&z.__esModule)return z;if(z===null||O(z)!=="object"&&typeof z!="function")return{default:z};var Y=L(x);if(Y&&Y.has(z))return Y.get(z);var re={},ne=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in z)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(z,ae)){var ie=ne?Object.getOwnPropertyDescriptor(z,ae):null;ie&&(ie.get||ie.set)?Object.defineProperty(re,ae,ie):re[ae]=z[ae]}return re.default=z,Y&&Y.set(z,re),re}function P(z,x){var Y=typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(!Y){if(Array.isArray(z)||(Y=N(z))||x&&z&&typeof z.length=="number"){Y&&(z=Y);var re=0,ne=function(){};return{s:ne,n:function(){return re>=z.length?{done:!0}:{done:!1,value:z[re++]}},e:function(ge){throw ge},f:ne}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ae=!0,ie=!1,de;return{s:function(){Y=Y.call(z)},n:function(){var ge=Y.next();return ae=ge.done,ge},e:function(ge){ie=!0,de=ge},f:function(){try{!ae&&Y.return!=null&&Y.return()}finally{if(ie)throw de}}}}function N(z,x){if(z){if(typeof z=="string")return S(z,x);var Y=Object.prototype.toString.call(z).slice(8,-1);if(Y==="Object"&&z.constructor&&(Y=z.constructor.name),Y==="Map"||Y==="Set")return Array.from(z);if(Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y))return S(z,x)}}function S(z,x){(x==null||x>z.length)&&(x=z.length);for(var Y=0,re=new Array(x);Y<x;Y++)re[Y]=z[Y];return re}var D=function(x,Y){return typeof x>"u"?Y:x};i.defaultValue=D;var b=function(x,Y,re){if(!Y||x.length<=Y)return x;var ne=x.substr(0,Y-1);return(re?ne.substr(0,ne.lastIndexOf(" ")):ne)+"..."};i.truncateString=b;var A=function(x,Y){return x===Y?!0:x.equals(Y)};i.immutableEqual=A;var U=function(x,Y){return x===Y?!0:E.Map.isMap(x)?x.equals(Y):JSON.stringify(x)==JSON.stringify(Y)};i.deepEqual=U;var I=function(x,Y){if(x.size!==Y.size)return!1;var re=P(x),ne;try{for(re.s();!(ne=re.n()).done;){var ae=ne.value;if(!Y.has(ae))return!1}}catch(ie){re.e(ie)}finally{re.f()}return!0};i.eqSet=I;var $=function(x,Y){return I(new Set(x),new Set(Y))};i.eqArrSet=$;var w=function(x,Y){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return x===Y?!0:Array.isArray(x)?V(x,Y,re):E.Map.isMap(x)?x.equals(Y):(0,C.default)(x)=="object"?G(x,Y,re):x===Y};i.shallowEqual=w;function V(z,x){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(z===x)return!0;if(!z||!x)return!1;var re=z.length;if(x.length!==re)return!1;for(var ne=0;ne<re;ne++){var ae=Y?w(z[ne],x[ne],Y):z[ne]===x[ne];if(!ae)return!1}return!0}function G(z,x){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(z===x)return!0;if(!z||!x)return!1;var re=Object.keys(z),ne=Object.keys(x),ae=re.length;if(ne.length!==ae)return!1;for(var ie=0;ie<ae;ie++){var de=re[ie],se=Y?w(z[de],x[de],Y):z[de]===x[de];if(!se)return!1}return!0}var K=function(x){return x.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")};i.escapeRegExp=K;var H=function(x){return(0,C.default)(x)=="object"&&x!==null},_=function(x,Y){return H(x)?x:{value:x,title:Y!==void 0?Y:x}},te=function(x){if(!H(x))return x;if(Array.isArray(x))return x.map(function(ae){return _(ae)});var Y=[];for(var re in x){var ne=x[re];Y.push(_(re,ne))}return Y};i.listValuesToArray=te;var J=function(x,Y){if(Array.isArray(x)){var re=x.map(function(ne){return _(ne)});return re.find(function(ne){return ne.value===Y})||re.find(function(ne){return"".concat(ne.value)===Y})}else return x[Y]!==void 0?_(Y,x[Y]):void 0};i.getItemInListValues=J;var k=function(x,Y){if(x==null)return Y;var re=J(x,Y);return re!==void 0?re.title:Y};i.getTitleInListValues=k;var R=function(x,Y){if(x==null)return Y;var re=J(x,Y);return re!==void 0?re.value:Y};i.getValueInListValues=R;var m=function(x,Y){var re=[];if(Array.isArray(x)){var ne=P(x),ae;try{for(ne.s();!(ae=ne.n()).done;){var ie=ae.value,de=Y(_(ie));de!=null&&re.push(de)}}catch(ye){ne.e(ye)}finally{ne.f()}}else for(var se in x){var ge=Y(_(se,x[se]));ge!=null&&re.push(ge)}return re};i.mapListValues=m;var s={id:"value",pId:"parent",rootPId:void 0};i.defaultTreeDataMap=s;var c=function(x){var Y=s,re,ne,ae=function de(se,ge,ye){if(se.children){ye==1&&(se[Y.pId]=Y.rootPId);var Ee=se.children.length,Te=P(se.children),he;try{for(Te.s();!(he=Te.n()).done;){var Le=he.value;Le[Y.pId]=se[Y.id],re++,ge.splice(re,0,Le),ne++,de(Le,ge,ye+1)}}catch(Fe){Te.e(Fe)}finally{Te.f()}delete se.children,Ee==0&&(ge.splice(re,1),re--,ne--)}};if(Array.isArray(x))for(ne=x.length,re=0;re<ne;re++){var ie=x[re];H(ie)&&(ie[Y.pId]!==void 0&&ie[Y.pId]!=Y.rootPId||ae(ie,x,1))}return x};i.flatizeTreeData=c;var o=function z(x,Y){var re=s,ne=J(x,Y),ae=ne?ne[re.pId]:void 0,ie=ae?x.find(function(de){return de[re.id]===ae}):void 0;return ie?[ie.value].concat((0,M.default)(z(x,ie.value))):[]},u=function(x,Y){var re=s,ne=J(x,Y);return ne?x.filter(function(ae){return ae[re.pId]===ne[re.id]}).map(function(ae){return ae.value}):[]},l=function(x,Y,re){var ne=P(x),ae;try{for(ne.s();!(ae=ne.n()).done;){var ie=ae.value;if(ie.path=o(x,ie.value),Y.treeSelectOnlyLeafs!=!1){var de=u(x,ie.value);re||(ie.selectable=de.length==0)}}}catch(se){ne.e(se)}finally{ne.f()}return x},f=function(x,Y,re){var ne=["treeselect","treemultiselect"].includes(Y),ae=["multiselect","treemultiselect"].includes(Y);return ne&&(x=te(x),x=c(x),x=l(x,re,ae)),x};i.normalizeListValues=f;var v=function(x,Y){if(!x)return x;for(var re=!0,ne=0;ne<Y.length;ne++){var ae=Y[ne];if(!(x[ne]!==void 0&&ae==x[ne])){re=!1;break}}return re?x.slice(Y.length):x};i.removePrefixPath=v;var h=function(x){return(0,C.default)(x)==="object"&&x!==null&&!Array.isArray(x)&&Object.keys(x).length===1};i.isJsonLogic=h;function a(z){return new Promise(function(x){setTimeout(x,z)})}var n=function(x){return(0,C.default)(x)==="object"&&x!==null&&typeof x.toJS=="function"};i.isImmutable=n;function y(z){return n(z)?z.toJS():z}function p(z){return n(z)?z:new E.default.List(z)}function F(z,x){return z||(z=[]),x||(x=[]),x.map(function(Y){return[Y,z.indexOf(Y)]}).map(function(Y,re,ne){var ae=(0,g.default)(Y,2),ie=ae[0],de=ae[1];if(de==-1){var se=ne.slice(re+1),ge=ne.slice(0,re),ye=ge.reverse().find(function(Te){var he=(0,g.default)(Te,2),Le=he[0],Fe=he[1];return Fe!=-1}),Ee=se.find(function(Te){var he=(0,g.default)(Te,2),Le=he[0],Fe=he[1];return Fe!=-1});return Ee?[ie,"before",Ee[0]]:ye?[ie,"after",ye[0]]:[ie,"append",null]}else return null}).filter(function(Y){return Y!==null}).reduce(function(Y,re){var ne=(0,g.default)(re,3),ae=ne[0],ie=ne[1],de=ne[2],se=Y.indexOf(de);return Y.indexOf(ae)==-1&&(se>-1?Y.splice(se+(ie=="after"?1:0),0,ae):Y.splice(ie=="append"?1/0:0,0,ae)),Y},z.slice())}var B=function(){return typeof process<"u"&&process.env&&!1},Z=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Y=x??B();return Y?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}};i.getLogger=Z;var X=function(){for(var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Y,re=0;re<x.length;re++){var ne=x[re];if(ne!==void 0){Y=ne;break}}return Y};i.getFirstDefined=X;var j=Z();i.logger=j},75403:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.removePathsInTree=i.removeIsLockedInTree=i.isEmptyTree=i.hasChildren=i.getTreeBadFields=i.getTotalRulesCountInTree=i.getTotalReordableNodesCountInTree=i.getSwitchValues=i.getLightTree=i.getItemByPath=i.getFlatTree=i.fixPathsInTree=i.fixEmptyGroupsInTree=i.expandTreeSubpath=i.expandTreePath=void 0;var O=r(e(90890)),g=r(e(92476)),M=r(e(40745)),C=function(K){for(var H=arguments.length,_=new Array(H>1?H-1:0),te=1;te<H;te++)_[te-1]=arguments[te];return K.interpose("children1").withMutations(function(J){return J.skip(1),J.push.apply(J,_),J})};i.expandTreePath=C;var E=function(K){for(var H=arguments.length,_=new Array(H>1?H-1:0),te=1;te<H;te++)_[te-1]=arguments[te];return K.interpose("children1").withMutations(function(J){return J.push.apply(J,_),J})};i.expandTreeSubpath=E;var L=function(K,H){var _=new M.default.OrderedMap((0,g.default)({},K.get("id"),K)),te=K;return H.forEach(function(J){te=_.get(J),_=te.get("children1")}),te};i.getItemByPath=L;var T=function(K){var H=K;function _(te,J){var k=J.push(te.get("id"));te.get("path")&&(H=H.removeIn(C(k,"path")));var R=te.get("children1");R&&R.map(function(m,s){_(m,k)})}return _(K,new M.default.List),H};i.removePathsInTree=T;var P=function(K){var H=K;function _(te,J){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,R=J.push(te.get("id")),m=te.getIn(["properties","isLocked"]);k&&m&&(H=H.deleteIn(C(R,"properties","isLocked")));var s=te.get("children1");s&&s.map(function(c,o){_(c,R,m||k)})}return _(K,new M.default.List),H};i.removeIsLockedInTree=P;var N=function(K){var H=K;function _(te,J,k,R){if(te){var m=te.get("path"),s=te.get("id"),c=s||R,o=J.push(c);(!m||!m.equals(o))&&(H=H.setIn(C(o,"path"),o)),s||(H=H.setIn(C(o,"id"),c));var u=te.get("children1");u&&(u.constructor.name=="Map"&&(H=H.setIn(C(o,"children1"),new M.default.OrderedMap(u))),u.map(function(l,f){_(l,o,k+1,f)}))}}return _(K,new M.default.List,0),H};i.fixPathsInTree=N;var S=function(K){var H=K;function _(te,J,k,R){if(!te)return!1;var m=te.get("id")||R,s=J.push(m),c=te.get("children1");if(c){var o=c.map(function(u,l){return _(u,s,k+1,l)}).reduce(function(u,l){return u&&l},!0);if((c.size==0||o)&&k>0)return H=H.deleteIn(C(s)),!0}return!1}return _(K,new M.default.List,0),H};i.fixEmptyGroupsInTree=S;var D=function(K){var H=[],_={},te=0;function J(c,o,u,l,f,v,h,a,n){var y=c.get("type"),p=c.get("collapsed"),F=c.get("id"),B=c.get("children1"),Z=c.getIn(["properties","isLocked"]),X=B?B.map(function(de,se){return se}):null,j=y=="rule_group",z=!f&&(!B||j),x=H.length,Y=te;if(H.push(F),u||(te+=1),h.height=(h.height||0)+1,_[F]={type:y,parent:o.length?o[o.length-1]:null,parentType:a,caseId:y=="case_group"?F:n,isDefaultCase:y=="case_group"&&!B,path:o.concat(F),lev:v,leaf:!B,index:x,id:F,children:X,leafsCount:0,_top:x,_height:ne-x,top:u?null:Y,height:ie,bottom:(u?null:Y)+ie,collapsed:p,node:c,isLocked:Z||l},B){var re={};B.map(function(de,se){J(de,o.concat(F),u||p,l||Z,f||j,v+1,re,y,y=="case_group"?F:n)}),p||(h.height=(h.height||0)+(re.height||0))}n&&z&&_[n].leafsCount++;var ne=H.length,ae=te,ie=h.height;Object.assign(_[F],{_height:ne-x,height:ie,bottom:(u?null:Y)+ie})}J(K,[],!1,!1,!1,0,{},null,null);for(var k=0;k<H.length;k++){var R=k>0?H[k-1]:null,m=k<H.length-1?H[k+1]:null,s=_[H[k]];s.prev=R,s.next=m}return{flat:H,items:_}};i.getFlatTree=D;var b=function(K){if(!K)return-1;var H=0;function _(te,J,k){var R,m,s;typeof te.get=="function"?(R=te.get("id"),m=te.get("children1"),s=te.get("type")):(R=te.id,m=te.children1,s=te.type);var c=s=="rule_group";H++,m&&!c&&m.map(function(o,u){_(o,J.concat(R),k+1)})}return _(K,[],0),H-1};i.getTotalReordableNodesCountInTree=b;var A=function(K){if(!K)return-1;var H=0;function _(te,J,k){var R,m,s;typeof te.get=="function"?(R=te.get("id"),m=te.get("children1"),s=te.get("type")):(R=te.id,m=te.children1,s=te.type),s=="rule"||s=="rule_group"?H++:m&&m.map(function(c,o){_(c,J.concat(R),k+1)})}return _(K,[],0),H};i.getTotalRulesCountInTree=A;var U=function(K){var H=[];function _(te,J,k){var R=te.get("id"),m=te.get("children1"),s=te.getIn(["properties","valueError"]),c=te.getIn(["properties","field"]);s&&s.size>0&&s.filter(function(o){return o!=null}).size>0&&H.push(c),m&&m.map(function(o,u){_(o,J.concat(R),k+1)})}return K&&_(K,[],0),Array.from(new Set(H))};i.getTreeBadFields=U;var I=function(K){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=K;function te(J,k){J.path&&delete J.path,!H&&k&&delete J.id;var R=J.properties;R&&R.operatorOptions==null&&delete R.operatorOptions;var m=J.children1;if(m){for(var s in m)te(m[s],s);H&&(J.children1=Object.values(m))}}return te(K,null),_};i.getLightTree=I;var $=function(K){var H=[],_=K.get("children1");return _&&_.map(function(te){var J=te.getIn(["properties","value"]),k;J&&J.size==1?(k=J.get(0),Array.isArray(k)&&k.length==0&&(k=null)):k=null,H=[].concat((0,O.default)(H),[k])}),H};i.getSwitchValues=$;var w=function(K){return!K.get("children1")||K.get("children1").size==0};i.isEmptyTree=w;var V=function(K,H){return K.getIn(C(H,"children1")).size>0};i.hasChildren=V},39075:(ee,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=0,r=function(){var g=(new Date().getTime().toString(16)+"FF").substr(0,11),M="ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,function(C){var E=C==="s"?Math.floor(Math.random()*16):e++&15,L=C==="x"?E:E&3|8;return L.toString(16)});return M+g};i.default=r},72769:(ee,i,e)=>{"use strict";var r=e(59018);Object.defineProperty(i,"__esModule",{value:!0}),i.validateValue=i.validateTree=i.validateAndFixTree=i.createValidationMemo=void 0;var O=r(e(90890)),g=r(e(47452)),M=r(e(33805)),C=e(24256),E=e(41895),L=e(1218),T=e(55805),P=e(75403),N=r(e(50234)),S=e(40745),D=function(k){return(0,M.default)(k)=="object"&&k!==null&&Array.isArray(k)?"array":(0,M.default)(k)},b=function(k,R){return D(k)==R||R=="number"&&!isNaN(k)},A=function(){var k,R,m;return function(s,c,o){return c?(s.__configId===m&&((0,L.immutableEqual)(c,k)||(0,L.immutableEqual)(c,R))||(m=s.__configId,k=c,R=U(c,null,s,o||s)),R):null}};i.createValidationMemo=A;var U=function(k,R,m,s){var c=I(k,R,m,s);return c=(0,P.fixPathsInTree)(c),c};i.validateAndFixTree=U;var I=function(k,R,m,s,c,o){c===void 0&&(c=m.settings.removeEmptyGroupsOnLoad),o===void 0&&(o=m.settings.removeIncompleteRulesOnLoad);var u={config:m,oldConfig:s,removeEmptyGroups:c,removeIncompleteRules:o};return $(k,[],null,{},u)};i.validateTree=I;function $(J,k,R,m,s){var c=J.get("type"),o=J.get("children1");return(c==="group"||c==="rule_group"||c=="case_group"||c=="switch_group")&&o&&o.size?w(J,k,R,m,s):c==="rule"?V(J,k,R,m,s):J}function w(J,k,R,m,s){var c=s.removeEmptyGroups,o=J.get("id"),u=J.get("children1"),l=u;!o&&R&&(o=R,J=J.set("id",o),m.sanitized=!0);var f={};u=u.map(function(h,a){return $(h,k.concat(o),a,f,s)}),c&&(u=u.filter(function(h){return h!=null}));var v=f.sanitized||l.size!=u.size;return!u.size&&c&&k.length&&(v=!0,J=void 0),v&&(m.sanitized=!0),v&&J&&(J=J.set("children1",u)),J}function V(J,k,R,m,s){var c=s.removeIncompleteRules,o=s.config,u=s.oldConfig,l=o.settings.showErrorMessage,f=J.get("id"),v=J.get("properties"),h=v.get("field")||null,a=v.get("operator")||null,n=v.get("operatorOptions"),y=v.get("valueSrc"),p=v.get("value"),F=v.get("valueError"),B={field:h,operator:a,operatorOptions:n?n.toJS():{},valueSrc:y?y.toJS():null,value:p?p.toJS():null,valueError:F?F.toJS():null},Z=h&&a&&p&&!p.includes(void 0);!f&&R&&(f=R,J=J.set("id",f),m.sanitized=!0);var X=h?(0,C.getFieldConfig)(o,h):null;h&&!X&&(L.logger.warn("No config for field ".concat(h)),h=null),h==null&&(v=["operator","operatorOptions","valueSrc","value"].reduce(function(Ee,Te){return Ee.delete(Te)},v),a=null),(a=="range_between"||a=="range_not_between")&&(a=a=="range_between"?"between":"not_between",console.info("Fixed operator ".concat(v.get("operator")," to ").concat(a)),v=v.set("operator",a));var j=a?(0,C.getOperatorConfig)(o,a,h):null;a&&!j&&(console.warn("No config for operator ".concat(a)),a=null);var z=h?(0,E.getOperatorsForField)(o,h):[];z?a&&z.indexOf(a)==-1&&(a=="is_empty"||a=="is_not_empty"?(a=a=="is_empty"?"is_null":"is_not_null",console.info("Fixed operator ".concat(v.get("operator")," to ").concat(a," for ").concat(h)),v=v.set("operator",a)):(console.warn("Operator ".concat(a," is not supported for field ").concat(h)),a=null)):(console.warn("Type of field ".concat(h," is not supported")),a=null),a==null&&(v=v.delete("operatorOptions"),v=v.delete("valueSrc"),v=v.delete("value")),n=v.get("operatorOptions");var x=a?(0,L.defaultValue)(j.cardinality,1):null;!a||n&&!j.options?(n=null,v=v.delete("operatorOptions")):a&&!n&&j.options&&(n=(0,T.defaultOperatorOptions)(o,a,h),v=v.set("operatorOptions",n)),y=v.get("valueSrc"),p=v.get("value");var Y=!l,re=!0,ne=(0,E.getNewValueForFieldOp)(o,u,v,h,a,null,Y,re),ae=ne.newValue,ie=ne.newValueSrc,de=ne.newValueError;p=ae,y=ie,F=de,v=v.set("value",p),v=v.set("valueSrc",y),l&&(v=v.set("valueError",F));var se={field:h,operator:a,operatorOptions:n?n.toJS():{},valueSrc:y?y.toJS():null,value:p?p.toJS():null,valueError:F?F.toJS():null},ge=!(0,L.deepEqual)(B,se),ye=h&&a&&p&&!p.includes(void 0);return ge&&(m.sanitized=!0),!ye&&c?J=void 0:ge&&(J=J.set("properties",v)),J}var G=function(k,R,m,s,c,o,u,l){var f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,v=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,h=arguments.length>10&&arguments[10]!==void 0?arguments[10]:!0,a=null,n=c;if(c!=null){if(u=="field"){var y=_(R,m,c,u,o,l,k,s,v,f),p=(0,g.default)(y,2);a=p[0],n=p[1]}else if(u=="func"){var F=te(R,m,c,u,o,l,k,s,v,f),B=(0,g.default)(F,2);a=B[0],n=B[1]}else if(u=="value"||!u){var Z=H(R,m,c,u,o,l,k,s,v,f),X=(0,g.default)(Z,2);a=X[0],n=X[1]}if(!a){var j=(0,C.getFieldConfig)(k,m),z=(0,E.getWidgetForFieldOp)(k,m,s,u),x=s?(0,C.getOperatorConfig)(k,s,m):null,Y=(0,N.default)((0,C.getFieldWidgetConfig)(k,m,s,z,u),["factory"]),re=u=="field"?(0,C.getFieldConfig)(k,c):null,ne=Y,ae=Y.validateValue;if(typeof ae=="function"){var ie=[n,ne,s,x];u=="field"&&ie.push(re);var de=ae.apply(void 0,ie);typeof de=="boolean"?de==!1&&(a="Invalid value"):a=de}}}return h&&a&&console.warn("[RAQB validate]","Field ".concat(m,": ").concat(a)),[a,n]};i.validateValue=G;var K=function(k,R,m,s,c){var o=S.List.isList(k)?k.toJS():k instanceof Array?(0,O.default)(k):void 0;if(o){var u=o.reduce(function(y,p){var F=(0,g.default)(y,2),B=F[0],Z=F[1],X=(0,L.getItemInListValues)(R,p);return X==null?[B,[].concat((0,O.default)(Z),[p])]:[[].concat((0,O.default)(B),[X.value]),Z]},[[],[]]),l=(0,g.default)(u,2),f=l[0],v=l[1],h=v.length>1,a=v.length?"".concat(h?"Values":"Value"," ").concat(v.join(", ")," ").concat(h?"are":"is"," not in list of values"):null;return c!==void 0?m=c:m=m||s,[a,m?f:k]}else{var n=(0,L.getItemInListValues)(R,k);return n==null?["Value ".concat(k," is not in list of values"),k]:(k=n.value,[null,k])}},H=function(k,R,m,s,c,o,u){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,v=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1;if(R){var h=(0,C.getFieldConfig)(u,R),a=(0,E.getWidgetForFieldOp)(u,R,l,s),n=u.widgets[a],y=n.type,p=n.jsType,F=h.fieldSettings;if(c!=y)return["Value should have type ".concat(y,", but got value of type ").concat(c),m];if(p&&!b(m,p)&&!F.listValues)return["Value should have JS type ".concat(p,", but got value of type ").concat((0,M.default)(m)),m];if(F){var B=o||F.listValues;if(B&&!F.allowCustomValues)return K(m,B,v,f,u.settings.removeInvalidMultiSelectValuesOnLoad);if(F.min!=null&&m<F.min)return["Value ".concat(m," < min ").concat(F.min),v?F.min:m];if(F.max!=null&&m>F.max)return["Value ".concat(m," > max ").concat(F.max),v?F.max:m]}}return[null,m]},_=function(k,R,m,s,c,o,u){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,v=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,h=u.settings.fieldSeparator,a=(0,M.default)(R)=="object"&&R?._isFuncArg,n=Array.isArray(k)?k.join(h):k,y=Array.isArray(m)?m.join(h):m,p=(0,C.getFieldConfig)(u,m);return p?y==n&&!a?["Can't compare field ".concat(k," with itself"),m]:c&&c!=p.type?["Field ".concat(m," is of type ").concat(p.type,", but expected ").concat(c),m]:[null,m]:["Unknown field ".concat(m),m]},te=function(k,R,m,s,c,o,u){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1,v=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1,h=m;if(m){var a=m.get("func");if(a){var n=(0,C.getFuncConfig)(u,a);if(n){if(c&&n.returnType!=c)return["Function ".concat(a," should return value of type ").concat(n.returnType,", but got ").concat(c),m];for(var y in n.args){var p=n.args[y],F=h.get("args"),B=F?F.get(y):void 0,Z=(0,C.getFieldConfig)(u,p),X=B?B.get("value"):void 0,j=B?B.get("valueSrc"):void 0;if(X!==void 0){var z=G(u,k,Z,l,X,p.type,j,o,v,f,!1),x=(0,g.default)(z,2),Y=x[0],re=x[1];if(Y!==null)if(v)h=h.deleteIn(["args",y]),p.defaultValue!==void 0&&(h=h.setIn(["args",y,"value"],p.defaultValue),h=h.setIn(["args",y,"valueSrc"],"value"));else return["Invalid value of arg ".concat(y," for func ").concat(a,": ").concat(Y),m];else re!==X&&(h=h.setIn(["args",y,"value"],re))}else if(f&&p.defaultValue===void 0&&!v)return["Value of arg ".concat(y," for func ").concat(a," is required"),m]}}else return["Unknown function ".concat(a),m]}}return[null,h]}},63121:(ee,i,e)=>{"use strict";e.r(i),e.d(i,{Provider:()=>A,ReactReduxContext:()=>g,batch:()=>ze.unstable_batchedUpdates,connect:()=>Ee,connectAdvanced:()=>c,createDispatchHook:()=>Fe,createSelectorHook:()=>ke,createStoreHook:()=>he,shallowEqual:()=>u,useDispatch:()=>We,useSelector:()=>qe,useStore:()=>Le});var r=e(68404),O=e(59160),g=r.createContext(null);const M=null;function C(fe){fe()}var E=C,L=function(Oe){return E=Oe},T=function(){return E};function P(){var fe=T(),Oe=null,Re=null;return{clear:function(){Oe=null,Re=null},notify:function(){fe(function(){for(var be=Oe;be;)be.callback(),be=be.next})},get:function(){for(var be=[],Ve=Oe;Ve;)be.push(Ve),Ve=Ve.next;return be},subscribe:function(be){var Ve=!0,De=Re={callback:be,next:null,prev:Re};return De.prev?De.prev.next=De:Oe=De,function(){!Ve||Oe===null||(Ve=!1,De.next?De.next.prev=De.prev:Re=De.prev,De.prev?De.prev.next=De.next:Oe=De.next)}}}}var N={notify:function(){},get:function(){return[]}};function S(fe,Oe){var Re,Ae=N;function be(ot){return at(),Ae.subscribe(ot)}function Ve(){Ae.notify()}function De(){Qe.onStateChange&&Qe.onStateChange()}function $e(){return Boolean(Re)}function at(){Re||(Re=Oe?Oe.addNestedSub(De):fe.subscribe(De),Ae=P())}function ut(){Re&&(Re(),Re=void 0,Ae.clear(),Ae=N)}var Qe={addNestedSub:be,notifyNestedSubs:Ve,handleChangeWrapper:De,isSubscribed:$e,trySubscribe:at,tryUnsubscribe:ut,getListeners:function(){return Ae}};return Qe}var D=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?r.useLayoutEffect:r.useEffect;function b(fe){var Oe=fe.store,Re=fe.context,Ae=fe.children,be=(0,r.useMemo)(function(){var $e=S(Oe);return{store:Oe,subscription:$e}},[Oe]),Ve=(0,r.useMemo)(function(){return Oe.getState()},[Oe]);D(function(){var $e=be.subscription;return $e.onStateChange=$e.notifyNestedSubs,$e.trySubscribe(),Ve!==Oe.getState()&&$e.notifyNestedSubs(),function(){$e.tryUnsubscribe(),$e.onStateChange=null}},[be,Ve]);var De=Re||g;return r.createElement(De.Provider,{value:be},Ae)}const A=b;var U=e(39803),I=e(36558),$=e(24420),w=e.n($),V=e(2459),G=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],K=["reactReduxForwardedRef"],H=[],_=[null,null],te=function(Oe){try{return JSON.stringify(Oe)}catch{return String(Oe)}};function J(fe,Oe){var Re=fe[1];return[Oe.payload,Re+1]}function k(fe,Oe,Re){D(function(){return fe.apply(void 0,Oe)},Re)}function R(fe,Oe,Re,Ae,be,Ve,De){fe.current=Ae,Oe.current=be,Re.current=!1,Ve.current&&(Ve.current=null,De())}function m(fe,Oe,Re,Ae,be,Ve,De,$e,at,ut){if(fe){var Qe=!1,ot=null,st=function(){if(!Qe){var mt=Oe.getState(),yt,ve;try{yt=Ae(mt,be.current)}catch(ce){ve=ce,ot=ce}ve||(ot=null),yt===Ve.current?De.current||at():(Ve.current=yt,$e.current=yt,De.current=!0,ut({type:"STORE_UPDATED",payload:{error:ve}}))}};Re.onStateChange=st,Re.trySubscribe(),st();var Je=function(){if(Qe=!0,Re.tryUnsubscribe(),Re.onStateChange=null,ot)throw ot};return Je}}var s=function(){return[null,0]};function c(fe,Oe){Oe===void 0&&(Oe={});var Re=Oe,Ae=Re.getDisplayName,be=Ae===void 0?function(Ke){return"ConnectAdvanced("+Ke+")"}:Ae,Ve=Re.methodName,De=Ve===void 0?"connectAdvanced":Ve,$e=Re.renderCountProp,at=$e===void 0?void 0:$e,ut=Re.shouldHandleStateChanges,Qe=ut===void 0?!0:ut,ot=Re.storeKey,st=ot===void 0?"store":ot,Je=Re.withRef,dt=Je===void 0?!1:Je,mt=Re.forwardRef,yt=mt===void 0?!1:mt,ve=Re.context,ce=ve===void 0?g:ve,Pe=(0,I.Z)(Re,G);if(!1)var Me;var xe=ce;return function(Ie){var Ye=Ie.displayName||Ie.name||"Component",nt=be(Ye),tt=(0,U.Z)({},Pe,{getDisplayName:be,methodName:De,renderCountProp:at,shouldHandleStateChanges:Qe,storeKey:st,displayName:nt,wrappedComponentName:Ye,WrappedComponent:Ie}),ft=Pe.pure;function Ze(vt){return fe(vt.dispatch,tt)}var Be=ft?r.useMemo:function(vt){return vt()};function Ge(vt){var gt=(0,r.useMemo)(function(){var Kt=vt.reactReduxForwardedRef,ur=(0,I.Z)(vt,K);return[vt.context,Kt,ur]},[vt]),lt=gt[0],pt=gt[1],_e=gt[2],St=(0,r.useMemo)(function(){return lt&&lt.Consumer&&(0,V.isContextConsumer)(r.createElement(lt.Consumer,null))?lt:xe},[lt,xe]),le=(0,r.useContext)(St),me=Boolean(vt.store)&&Boolean(vt.store.getState)&&Boolean(vt.store.dispatch),we=Boolean(le)&&Boolean(le.store),it=me?vt.store:le.store,Ot=(0,r.useMemo)(function(){return Ze(it)},[it]),Lt=(0,r.useMemo)(function(){if(!Qe)return _;var Kt=S(it,me?null:le.subscription),ur=Kt.notifyNestedSubs.bind(Kt);return[Kt,ur]},[it,me,le]),Gt=Lt[0],rr=Lt[1],kt=(0,r.useMemo)(function(){return me?le:(0,U.Z)({},le,{subscription:Gt})},[me,le,Gt]),fr=(0,r.useReducer)(J,H,s),Or=fr[0],Ht=Or[0],$t=fr[1];if(Ht&&Ht.error)throw Ht.error;var nr=(0,r.useRef)(),Yt=(0,r.useRef)(_e),zt=(0,r.useRef)(),ar=(0,r.useRef)(!1),Qt=Be(function(){return zt.current&&_e===Yt.current?zt.current:Ot(it.getState(),_e)},[it,Ht,_e]);k(R,[Yt,nr,ar,_e,Qt,zt,rr]),k(m,[Qe,it,Gt,Ot,Yt,nr,ar,zt,rr,$t],[it,Gt,Ot]);var Jt=(0,r.useMemo)(function(){return r.createElement(Ie,(0,U.Z)({},Qt,{ref:pt}))},[pt,Ie,Qt]),Er=(0,r.useMemo)(function(){return Qe?r.createElement(St.Provider,{value:kt},Jt):Jt},[St,Jt,kt]);return Er}var et=ft?r.memo(Ge):Ge;if(et.WrappedComponent=Ie,et.displayName=Ge.displayName=nt,yt){var je=r.forwardRef(function(gt,lt){return r.createElement(et,(0,U.Z)({},gt,{reactReduxForwardedRef:lt}))});return je.displayName=nt,je.WrappedComponent=Ie,w()(je,Ie)}return w()(et,Ie)}}function o(fe,Oe){return fe===Oe?fe!==0||Oe!==0||1/fe===1/Oe:fe!==fe&&Oe!==Oe}function u(fe,Oe){if(o(fe,Oe))return!0;if(typeof fe!="object"||fe===null||typeof Oe!="object"||Oe===null)return!1;var Re=Object.keys(fe),Ae=Object.keys(Oe);if(Re.length!==Ae.length)return!1;for(var be=0;be<Re.length;be++)if(!Object.prototype.hasOwnProperty.call(Oe,Re[be])||!o(fe[Re[be]],Oe[Re[be]]))return!1;return!0}function l(fe,Oe){var Re={},Ae=function(De){var $e=fe[De];typeof $e=="function"&&(Re[De]=function(){return Oe($e.apply(void 0,arguments))})};for(var be in fe)Ae(be);return Re}function f(fe){return function(Re,Ae){var be=fe(Re,Ae);function Ve(){return be}return Ve.dependsOnOwnProps=!1,Ve}}function v(fe){return fe.dependsOnOwnProps!==null&&fe.dependsOnOwnProps!==void 0?Boolean(fe.dependsOnOwnProps):fe.length!==1}function h(fe,Oe){return function(Ae,be){var Ve=be.displayName,De=function(at,ut){return De.dependsOnOwnProps?De.mapToProps(at,ut):De.mapToProps(at)};return De.dependsOnOwnProps=!0,De.mapToProps=function(at,ut){De.mapToProps=fe,De.dependsOnOwnProps=v(fe);var Qe=De(at,ut);return typeof Qe=="function"&&(De.mapToProps=Qe,De.dependsOnOwnProps=v(Qe),Qe=De(at,ut)),Qe},De}}function a(fe){return typeof fe=="function"?h(fe,"mapDispatchToProps"):void 0}function n(fe){return fe?void 0:f(function(Oe){return{dispatch:Oe}})}function y(fe){return fe&&typeof fe=="object"?f(function(Oe){return l(fe,Oe)}):void 0}const p=[a,n,y];function F(fe){return typeof fe=="function"?h(fe,"mapStateToProps"):void 0}function B(fe){return fe?void 0:f(function(){return{}})}const Z=[F,B];function X(fe,Oe,Re){return(0,U.Z)({},Re,fe,Oe)}function j(fe){return function(Re,Ae){var be=Ae.displayName,Ve=Ae.pure,De=Ae.areMergedPropsEqual,$e=!1,at;return function(Qe,ot,st){var Je=fe(Qe,ot,st);return $e?(!Ve||!De(Je,at))&&(at=Je):($e=!0,at=Je),at}}}function z(fe){return typeof fe=="function"?j(fe):void 0}function x(fe){return fe?void 0:function(){return X}}const Y=[z,x];var re=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function ne(fe,Oe,Re,Ae){return function(Ve,De){return Re(fe(Ve,De),Oe(Ae,De),De)}}function ae(fe,Oe,Re,Ae,be){var Ve=be.areStatesEqual,De=be.areOwnPropsEqual,$e=be.areStatePropsEqual,at=!1,ut,Qe,ot,st,Je;function dt(Pe,Me){return ut=Pe,Qe=Me,ot=fe(ut,Qe),st=Oe(Ae,Qe),Je=Re(ot,st,Qe),at=!0,Je}function mt(){return ot=fe(ut,Qe),Oe.dependsOnOwnProps&&(st=Oe(Ae,Qe)),Je=Re(ot,st,Qe),Je}function yt(){return fe.dependsOnOwnProps&&(ot=fe(ut,Qe)),Oe.dependsOnOwnProps&&(st=Oe(Ae,Qe)),Je=Re(ot,st,Qe),Je}function ve(){var Pe=fe(ut,Qe),Me=!$e(Pe,ot);return ot=Pe,Me&&(Je=Re(ot,st,Qe)),Je}function ce(Pe,Me){var xe=!De(Me,Qe),Ke=!Ve(Pe,ut);return ut=Pe,Qe=Me,xe&&Ke?mt():xe?yt():Ke?ve():Je}return function(Me,xe){return at?ce(Me,xe):dt(Me,xe)}}function ie(fe,Oe){var Re=Oe.initMapStateToProps,Ae=Oe.initMapDispatchToProps,be=Oe.initMergeProps,Ve=(0,I.Z)(Oe,re),De=Re(fe,Ve),$e=Ae(fe,Ve),at=be(fe,Ve),ut=Ve.pure?ae:ne;return ut(De,$e,at,fe,Ve)}var de=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function se(fe,Oe,Re){for(var Ae=Oe.length-1;Ae>=0;Ae--){var be=Oe[Ae](fe);if(be)return be}return function(Ve,De){throw new Error("Invalid value of type "+typeof fe+" for "+Re+" argument when connecting component "+De.wrappedComponentName+".")}}function ge(fe,Oe){return fe===Oe}function ye(fe){var Oe=fe===void 0?{}:fe,Re=Oe.connectHOC,Ae=Re===void 0?c:Re,be=Oe.mapStateToPropsFactories,Ve=be===void 0?Z:be,De=Oe.mapDispatchToPropsFactories,$e=De===void 0?p:De,at=Oe.mergePropsFactories,ut=at===void 0?Y:at,Qe=Oe.selectorFactory,ot=Qe===void 0?ie:Qe;return function(Je,dt,mt,yt){yt===void 0&&(yt={});var ve=yt,ce=ve.pure,Pe=ce===void 0?!0:ce,Me=ve.areStatesEqual,xe=Me===void 0?ge:Me,Ke=ve.areOwnPropsEqual,Ie=Ke===void 0?u:Ke,Ye=ve.areStatePropsEqual,nt=Ye===void 0?u:Ye,tt=ve.areMergedPropsEqual,ft=tt===void 0?u:tt,Ze=(0,I.Z)(ve,de),Be=se(Je,Ve,"mapStateToProps"),Ge=se(dt,$e,"mapDispatchToProps"),et=se(mt,ut,"mergeProps");return Ae(ot,(0,U.Z)({methodName:"connect",getDisplayName:function(vt){return"Connect("+vt+")"},shouldHandleStateChanges:Boolean(Je),initMapStateToProps:Be,initMapDispatchToProps:Ge,initMergeProps:et,pure:Pe,areStatesEqual:xe,areOwnPropsEqual:Ie,areStatePropsEqual:nt,areMergedPropsEqual:ft},Ze))}}const Ee=ye();function Te(){var fe=(0,r.useContext)(g);return fe}function he(fe){fe===void 0&&(fe=g);var Oe=fe===g?Te:function(){return(0,r.useContext)(fe)};return function(){var Ae=Oe(),be=Ae.store;return be}}var Le=he();function Fe(fe){fe===void 0&&(fe=g);var Oe=fe===g?Le:he(fe);return function(){var Ae=Oe();return Ae.dispatch}}var We=Fe(),Ue=function(Oe,Re){return Oe===Re};function He(fe,Oe,Re,Ae){var be=(0,r.useReducer)(function(dt){return dt+1},0),Ve=be[1],De=(0,r.useMemo)(function(){return S(Re,Ae)},[Re,Ae]),$e=(0,r.useRef)(),at=(0,r.useRef)(),ut=(0,r.useRef)(),Qe=(0,r.useRef)(),ot=Re.getState(),st;try{if(fe!==at.current||ot!==ut.current||$e.current){var Je=fe(ot);Qe.current===void 0||!Oe(Je,Qe.current)?st=Je:st=Qe.current}else st=Qe.current}catch(dt){throw $e.current&&(dt.message+=`
The error may be correlated with this previous error:
`+$e.current.stack+`

`),dt}return D(function(){at.current=fe,ut.current=ot,Qe.current=st,$e.current=void 0}),D(function(){function dt(){try{var mt=Re.getState();if(mt===ut.current)return;var yt=at.current(mt);if(Oe(yt,Qe.current))return;Qe.current=yt,ut.current=mt}catch(ve){$e.current=ve}Ve()}return De.onStateChange=dt,De.trySubscribe(),dt(),function(){return De.tryUnsubscribe()}},[Re,De]),st}function ke(fe){fe===void 0&&(fe=g);var Oe=fe===g?Te:function(){return(0,r.useContext)(fe)};return function(Ae,be){be===void 0&&(be=Ue);var Ve=Oe(),De=Ve.store,$e=Ve.subscription,at=He(Ae,be,De,$e);return(0,r.useDebugValue)(at),at}}var qe=ke(),ze=e(97394);L(ze.unstable_batchedUpdates)},3823:(ee,i,e)=>{"use strict";e.d(i,{Z:()=>T});var r=e(81582),O=e.n(r),g=e(68404),M=e(24015),C=function(P){P===void 0&&(P={});var N=(0,g.useState)(P),S=N[0],D=N[1],b=(0,g.useCallback)(function(A){D(function(U){return Object.assign({},U,A instanceof Function?A(U):A)})},[]);return[S,b]};const E=C;var L=function(){var P=(0,M.Z)(),N=E({value:void 0,error:void 0,noUserInteraction:!0}),S=N[0],D=N[1],b=(0,g.useCallback)(function(A){if(P()){var U,I;try{if(typeof A!="string"&&typeof A!="number"){var $=new Error("Cannot copy typeof "+typeof A+" to clipboard, must be a string");D({value:A,error:$,noUserInteraction:!0});return}else if(A===""){var $=new Error("Cannot copy empty string to clipboard.");D({value:A,error:$,noUserInteraction:!0});return}I=A.toString(),U=O()(I),D({value:I,error:void 0,noUserInteraction:U})}catch(w){D({value:I,error:w,noUserInteraction:U})}}},[]);return[S,b]};const T=L},63615:(ee,i,e)=>{"use strict";var r;r={value:!0};var O=e(9683),g=e(68404),M=O.__importDefault(e(59692));function C(E,L,T){L===void 0&&(L=0),T===void 0&&(T=[]);var P=M.default(E,L),N=P[0],S=P[1],D=P[2];return g.useEffect(D,T),[N,S]}i.Z=C},59692:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=e(68404);function O(g,M){M===void 0&&(M=0);var C=r.useRef(!1),E=r.useRef(),L=r.useRef(g),T=r.useCallback(function(){return C.current},[]),P=r.useCallback(function(){C.current=!1,E.current&&clearTimeout(E.current),E.current=setTimeout(function(){C.current=!0,L.current()},M)},[M]),N=r.useCallback(function(){C.current=null,E.current&&clearTimeout(E.current)},[]);return r.useEffect(function(){L.current=g},[g]),r.useEffect(function(){return P(),N},[M]),[T,N,P]}i.default=O},29521:(ee,i,e)=>{var r=e(76345).Buffer,O=function(){"use strict";function g(b,A){return A!=null&&b instanceof A}var M;try{M=Map}catch{M=function(){}}var C;try{C=Set}catch{C=function(){}}var E;try{E=Promise}catch{E=function(){}}function L(b,A,U,I,$){typeof A=="object"&&(U=A.depth,I=A.prototype,$=A.includeNonEnumerable,A=A.circular);var w=[],V=[],G=typeof r<"u";typeof A>"u"&&(A=!0),typeof U>"u"&&(U=1/0);function K(H,_){if(H===null)return null;if(_===0)return H;var te,J;if(typeof H!="object")return H;if(g(H,M))te=new M;else if(g(H,C))te=new C;else if(g(H,E))te=new E(function(f,v){H.then(function(h){f(K(h,_-1))},function(h){v(K(h,_-1))})});else if(L.__isArray(H))te=[];else if(L.__isRegExp(H))te=new RegExp(H.source,D(H)),H.lastIndex&&(te.lastIndex=H.lastIndex);else if(L.__isDate(H))te=new Date(H.getTime());else{if(G&&r.isBuffer(H))return r.allocUnsafe?te=r.allocUnsafe(H.length):te=new r(H.length),H.copy(te),te;g(H,Error)?te=Object.create(H):typeof I>"u"?(J=Object.getPrototypeOf(H),te=Object.create(J)):(te=Object.create(I),J=I)}if(A){var k=w.indexOf(H);if(k!=-1)return V[k];w.push(H),V.push(te)}g(H,M)&&H.forEach(function(f,v){var h=K(v,_-1),a=K(f,_-1);te.set(h,a)}),g(H,C)&&H.forEach(function(f){var v=K(f,_-1);te.add(v)});for(var R in H){var m;J&&(m=Object.getOwnPropertyDescriptor(J,R)),!(m&&m.set==null)&&(te[R]=K(H[R],_-1))}if(Object.getOwnPropertySymbols)for(var s=Object.getOwnPropertySymbols(H),R=0;R<s.length;R++){var c=s[R],o=Object.getOwnPropertyDescriptor(H,c);o&&!o.enumerable&&!$||(te[c]=K(H[c],_-1),o.enumerable||Object.defineProperty(te,c,{enumerable:!1}))}if($)for(var u=Object.getOwnPropertyNames(H),R=0;R<u.length;R++){var l=u[R],o=Object.getOwnPropertyDescriptor(H,l);o&&o.enumerable||(te[l]=K(H[l],_-1),Object.defineProperty(te,l,{enumerable:!1}))}return te}return K(b,U)}L.clonePrototype=function(A){if(A===null)return null;var U=function(){};return U.prototype=A,new U};function T(b){return Object.prototype.toString.call(b)}L.__objToStr=T;function P(b){return typeof b=="object"&&T(b)==="[object Date]"}L.__isDate=P;function N(b){return typeof b=="object"&&T(b)==="[object Array]"}L.__isArray=N;function S(b){return typeof b=="object"&&T(b)==="[object RegExp]"}L.__isRegExp=S;function D(b){var A="";return b.global&&(A+="g"),b.ignoreCase&&(A+="i"),b.multiline&&(A+="m"),A}return L.__getRegExpFlags=D,L}();ee.exports&&(ee.exports=O)},40745:function(ee){(function(i,e){ee.exports=e()})(this,function(){"use strict";var i=Array.prototype.slice;function e(t,d){d&&(t.prototype=Object.create(d.prototype)),t.prototype.constructor=t}function r(t){return C(t)?t:z(t)}e(O,r);function O(t){return E(t)?t:x(t)}e(g,r);function g(t){return L(t)?t:Y(t)}e(M,r);function M(t){return C(t)&&!T(t)?t:re(t)}function C(t){return!!(t&&t[N])}function E(t){return!!(t&&t[S])}function L(t){return!!(t&&t[D])}function T(t){return E(t)||L(t)}function P(t){return!!(t&&t[b])}r.isIterable=C,r.isKeyed=E,r.isIndexed=L,r.isAssociative=T,r.isOrdered=P,r.Keyed=O,r.Indexed=g,r.Set=M;var N="@@__IMMUTABLE_ITERABLE__@@",S="@@__IMMUTABLE_KEYED__@@",D="@@__IMMUTABLE_INDEXED__@@",b="@@__IMMUTABLE_ORDERED__@@",A="delete",U=5,I=1<<U,$=I-1,w={},V={value:!1},G={value:!1};function K(t){return t.value=!1,t}function H(t){t&&(t.value=!0)}function _(){}function te(t,d){d=d||0;for(var W=Math.max(0,t.length-d),Q=new Array(W),q=0;q<W;q++)Q[q]=t[q+d];return Q}function J(t){return t.size===void 0&&(t.size=t.__iterate(R)),t.size}function k(t,d){if(typeof d!="number"){var W=d>>>0;if(""+W!==d||W===4294967295)return NaN;d=W}return d<0?J(t)+d:d}function R(){return!0}function m(t,d,W){return(t===0||W!==void 0&&t<=-W)&&(d===void 0||W!==void 0&&d>=W)}function s(t,d){return o(t,d,0)}function c(t,d){return o(t,d,d)}function o(t,d,W){return t===void 0?W:t<0?Math.max(0,d+t):d===void 0?t:Math.min(d,t)}var u=0,l=1,f=2,v=typeof Symbol=="function"&&Symbol.iterator,h="@@iterator",a=v||h;function n(t){this.next=t}n.prototype.toString=function(){return"[Iterator]"},n.KEYS=u,n.VALUES=l,n.ENTRIES=f,n.prototype.inspect=n.prototype.toSource=function(){return this.toString()},n.prototype[a]=function(){return this};function y(t,d,W,Q){var q=t===0?d:t===1?W:[d,W];return Q?Q.value=q:Q={value:q,done:!1},Q}function p(){return{value:void 0,done:!0}}function F(t){return!!X(t)}function B(t){return t&&typeof t.next=="function"}function Z(t){var d=X(t);return d&&d.call(t)}function X(t){var d=t&&(v&&t[v]||t[h]);if(typeof d=="function")return d}function j(t){return t&&typeof t.length=="number"}e(z,r);function z(t){return t==null?Ee():C(t)?t.toSeq():Le(t)}z.of=function(){return z(arguments)},z.prototype.toSeq=function(){return this},z.prototype.toString=function(){return this.__toString("Seq {","}")},z.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},z.prototype.__iterate=function(t,d){return We(this,t,d,!0)},z.prototype.__iterator=function(t,d){return Ue(this,t,d,!0)},e(x,z);function x(t){return t==null?Ee().toKeyedSeq():C(t)?E(t)?t.toSeq():t.fromEntrySeq():Te(t)}x.prototype.toKeyedSeq=function(){return this},e(Y,z);function Y(t){return t==null?Ee():C(t)?E(t)?t.entrySeq():t.toIndexedSeq():he(t)}Y.of=function(){return Y(arguments)},Y.prototype.toIndexedSeq=function(){return this},Y.prototype.toString=function(){return this.__toString("Seq [","]")},Y.prototype.__iterate=function(t,d){return We(this,t,d,!1)},Y.prototype.__iterator=function(t,d){return Ue(this,t,d,!1)},e(re,z);function re(t){return(t==null?Ee():C(t)?E(t)?t.entrySeq():t:he(t)).toSetSeq()}re.of=function(){return re(arguments)},re.prototype.toSetSeq=function(){return this},z.isSeq=ge,z.Keyed=x,z.Set=re,z.Indexed=Y;var ne="@@__IMMUTABLE_SEQ__@@";z.prototype[ne]=!0,e(ae,Y);function ae(t){this._array=t,this.size=t.length}ae.prototype.get=function(t,d){return this.has(t)?this._array[k(this,t)]:d},ae.prototype.__iterate=function(t,d){for(var W=this._array,Q=W.length-1,q=0;q<=Q;q++)if(t(W[d?Q-q:q],q,this)===!1)return q+1;return q},ae.prototype.__iterator=function(t,d){var W=this._array,Q=W.length-1,q=0;return new n(function(){return q>Q?p():y(t,q,W[d?Q-q++:q++])})},e(ie,x);function ie(t){var d=Object.keys(t);this._object=t,this._keys=d,this.size=d.length}ie.prototype.get=function(t,d){return d!==void 0&&!this.has(t)?d:this._object[t]},ie.prototype.has=function(t){return this._object.hasOwnProperty(t)},ie.prototype.__iterate=function(t,d){for(var W=this._object,Q=this._keys,q=Q.length-1,ue=0;ue<=q;ue++){var oe=Q[d?q-ue:ue];if(t(W[oe],oe,this)===!1)return ue+1}return ue},ie.prototype.__iterator=function(t,d){var W=this._object,Q=this._keys,q=Q.length-1,ue=0;return new n(function(){var oe=Q[d?q-ue:ue];return ue++>q?p():y(t,oe,W[oe])})},ie.prototype[b]=!0,e(de,Y);function de(t){this._iterable=t,this.size=t.length||t.size}de.prototype.__iterateUncached=function(t,d){if(d)return this.cacheResult().__iterate(t,d);var W=this._iterable,Q=Z(W),q=0;if(B(Q))for(var ue;!(ue=Q.next()).done&&t(ue.value,q++,this)!==!1;);return q},de.prototype.__iteratorUncached=function(t,d){if(d)return this.cacheResult().__iterator(t,d);var W=this._iterable,Q=Z(W);if(!B(Q))return new n(p);var q=0;return new n(function(){var ue=Q.next();return ue.done?ue:y(t,q++,ue.value)})},e(se,Y);function se(t){this._iterator=t,this._iteratorCache=[]}se.prototype.__iterateUncached=function(t,d){if(d)return this.cacheResult().__iterate(t,d);for(var W=this._iterator,Q=this._iteratorCache,q=0;q<Q.length;)if(t(Q[q],q++,this)===!1)return q;for(var ue;!(ue=W.next()).done;){var oe=ue.value;if(Q[q]=oe,t(oe,q++,this)===!1)break}return q},se.prototype.__iteratorUncached=function(t,d){if(d)return this.cacheResult().__iterator(t,d);var W=this._iterator,Q=this._iteratorCache,q=0;return new n(function(){if(q>=Q.length){var ue=W.next();if(ue.done)return ue;Q[q]=ue.value}return y(t,q,Q[q++])})};function ge(t){return!!(t&&t[ne])}var ye;function Ee(){return ye||(ye=new ae([]))}function Te(t){var d=Array.isArray(t)?new ae(t).fromEntrySeq():B(t)?new se(t).fromEntrySeq():F(t)?new de(t).fromEntrySeq():typeof t=="object"?new ie(t):void 0;if(!d)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return d}function he(t){var d=Fe(t);if(!d)throw new TypeError("Expected Array or iterable object of values: "+t);return d}function Le(t){var d=Fe(t)||typeof t=="object"&&new ie(t);if(!d)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return d}function Fe(t){return j(t)?new ae(t):B(t)?new se(t):F(t)?new de(t):void 0}function We(t,d,W,Q){var q=t._cache;if(q){for(var ue=q.length-1,oe=0;oe<=ue;oe++){var pe=q[W?ue-oe:oe];if(d(pe[1],Q?pe[0]:oe,t)===!1)return oe+1}return oe}return t.__iterateUncached(d,W)}function Ue(t,d,W,Q){var q=t._cache;if(q){var ue=q.length-1,oe=0;return new n(function(){var pe=q[W?ue-oe:oe];return oe++>ue?p():y(d,Q?pe[0]:oe-1,pe[1])})}return t.__iteratorUncached(d,W)}function He(t,d){return d?ke(d,t,"",{"":t}):qe(t)}function ke(t,d,W,Q){return Array.isArray(d)?t.call(Q,W,Y(d).map(function(q,ue){return ke(t,q,ue,d)})):ze(d)?t.call(Q,W,x(d).map(function(q,ue){return ke(t,q,ue,d)})):d}function qe(t){return Array.isArray(t)?Y(t).map(qe).toList():ze(t)?x(t).map(qe).toMap():t}function ze(t){return t&&(t.constructor===Object||t.constructor===void 0)}function fe(t,d){if(t===d||t!==t&&d!==d)return!0;if(!t||!d)return!1;if(typeof t.valueOf=="function"&&typeof d.valueOf=="function"){if(t=t.valueOf(),d=d.valueOf(),t===d||t!==t&&d!==d)return!0;if(!t||!d)return!1}return!!(typeof t.equals=="function"&&typeof d.equals=="function"&&t.equals(d))}function Oe(t,d){if(t===d)return!0;if(!C(d)||t.size!==void 0&&d.size!==void 0&&t.size!==d.size||t.__hash!==void 0&&d.__hash!==void 0&&t.__hash!==d.__hash||E(t)!==E(d)||L(t)!==L(d)||P(t)!==P(d))return!1;if(t.size===0&&d.size===0)return!0;var W=!T(t);if(P(t)){var Q=t.entries();return d.every(function(Se,Ce){var Ne=Q.next().value;return Ne&&fe(Ne[1],Se)&&(W||fe(Ne[0],Ce))})&&Q.next().done}var q=!1;if(t.size===void 0)if(d.size===void 0)typeof t.cacheResult=="function"&&t.cacheResult();else{q=!0;var ue=t;t=d,d=ue}var oe=!0,pe=d.__iterate(function(Se,Ce){if(W?!t.has(Se):q?!fe(Se,t.get(Ce,w)):!fe(t.get(Ce,w),Se))return oe=!1,!1});return oe&&t.size===pe}e(Re,Y);function Re(t,d){if(!(this instanceof Re))return new Re(t,d);if(this._value=t,this.size=d===void 0?1/0:Math.max(0,d),this.size===0){if(Ae)return Ae;Ae=this}}Re.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Re.prototype.get=function(t,d){return this.has(t)?this._value:d},Re.prototype.includes=function(t){return fe(this._value,t)},Re.prototype.slice=function(t,d){var W=this.size;return m(t,d,W)?this:new Re(this._value,c(d,W)-s(t,W))},Re.prototype.reverse=function(){return this},Re.prototype.indexOf=function(t){return fe(this._value,t)?0:-1},Re.prototype.lastIndexOf=function(t){return fe(this._value,t)?this.size:-1},Re.prototype.__iterate=function(t,d){for(var W=0;W<this.size;W++)if(t(this._value,W,this)===!1)return W+1;return W},Re.prototype.__iterator=function(t,d){var W=this,Q=0;return new n(function(){return Q<W.size?y(t,Q++,W._value):p()})},Re.prototype.equals=function(t){return t instanceof Re?fe(this._value,t._value):Oe(t)};var Ae;function be(t,d){if(!t)throw new Error(d)}e(Ve,Y);function Ve(t,d,W){if(!(this instanceof Ve))return new Ve(t,d,W);if(be(W!==0,"Cannot step a Range by 0"),t=t||0,d===void 0&&(d=1/0),W=W===void 0?1:Math.abs(W),d<t&&(W=-W),this._start=t,this._end=d,this._step=W,this.size=Math.max(0,Math.ceil((d-t)/W-1)+1),this.size===0){if(De)return De;De=this}}Ve.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},Ve.prototype.get=function(t,d){return this.has(t)?this._start+k(this,t)*this._step:d},Ve.prototype.includes=function(t){var d=(t-this._start)/this._step;return d>=0&&d<this.size&&d===Math.floor(d)},Ve.prototype.slice=function(t,d){return m(t,d,this.size)?this:(t=s(t,this.size),d=c(d,this.size),d<=t?new Ve(0,0):new Ve(this.get(t,this._end),this.get(d,this._end),this._step))},Ve.prototype.indexOf=function(t){var d=t-this._start;if(d%this._step===0){var W=d/this._step;if(W>=0&&W<this.size)return W}return-1},Ve.prototype.lastIndexOf=function(t){return this.indexOf(t)},Ve.prototype.__iterate=function(t,d){for(var W=this.size-1,Q=this._step,q=d?this._start+W*Q:this._start,ue=0;ue<=W;ue++){if(t(q,ue,this)===!1)return ue+1;q+=d?-Q:Q}return ue},Ve.prototype.__iterator=function(t,d){var W=this.size-1,Q=this._step,q=d?this._start+W*Q:this._start,ue=0;return new n(function(){var oe=q;return q+=d?-Q:Q,ue>W?p():y(t,ue++,oe)})},Ve.prototype.equals=function(t){return t instanceof Ve?this._start===t._start&&this._end===t._end&&this._step===t._step:Oe(this,t)};var De;e($e,r);function $e(){throw TypeError("Abstract")}e(at,$e);function at(){}e(ut,$e);function ut(){}e(Qe,$e);function Qe(){}$e.Keyed=at,$e.Indexed=ut,$e.Set=Qe;var ot=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(d,W){d=d|0,W=W|0;var Q=d&65535,q=W&65535;return Q*q+((d>>>16)*q+Q*(W>>>16)<<16>>>0)|0};function st(t){return t>>>1&1073741824|t&3221225471}function Je(t){if(t===!1||t===null||t===void 0||typeof t.valueOf=="function"&&(t=t.valueOf(),t===!1||t===null||t===void 0))return 0;if(t===!0)return 1;var d=typeof t;if(d==="number"){if(t!==t||t===1/0)return 0;var W=t|0;for(W!==t&&(W^=t*4294967295);t>4294967295;)t/=4294967295,W^=t;return st(W)}if(d==="string")return t.length>Ye?dt(t):mt(t);if(typeof t.hashCode=="function")return t.hashCode();if(d==="object")return yt(t);if(typeof t.toString=="function")return mt(t.toString());throw new Error("Value type "+d+" cannot be hashed.")}function dt(t){var d=ft[t];return d===void 0&&(d=mt(t),tt===nt&&(tt=0,ft={}),tt++,ft[t]=d),d}function mt(t){for(var d=0,W=0;W<t.length;W++)d=31*d+t.charCodeAt(W)|0;return st(d)}function yt(t){var d;if(Me&&(d=xe.get(t),d!==void 0)||(d=t[Ie],d!==void 0)||!ce&&(d=t.propertyIsEnumerable&&t.propertyIsEnumerable[Ie],d!==void 0||(d=Pe(t),d!==void 0)))return d;if(d=++Ke,Ke&1073741824&&(Ke=0),Me)xe.set(t,d);else{if(ve!==void 0&&ve(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(ce)Object.defineProperty(t,Ie,{enumerable:!1,configurable:!1,writable:!1,value:d});else if(t.propertyIsEnumerable!==void 0&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Ie]=d;else if(t.nodeType!==void 0)t[Ie]=d;else throw new Error("Unable to set a non-enumerable property on object.")}return d}var ve=Object.isExtensible,ce=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Pe(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}var Me=typeof WeakMap=="function",xe;Me&&(xe=new WeakMap);var Ke=0,Ie="__immutablehash__";typeof Symbol=="function"&&(Ie=Symbol(Ie));var Ye=16,nt=255,tt=0,ft={};function Ze(t){be(t!==1/0,"Cannot perform this action with an infinite size.")}e(Be,at);function Be(t){return t==null?Ot():Ge(t)&&!P(t)?t:Ot().withMutations(function(d){var W=O(t);Ze(W.size),W.forEach(function(Q,q){return d.set(q,Q)})})}Be.of=function(){var t=i.call(arguments,0);return Ot().withMutations(function(d){for(var W=0;W<t.length;W+=2){if(W+1>=t.length)throw new Error("Missing value for key: "+t[W]);d.set(t[W],t[W+1])}})},Be.prototype.toString=function(){return this.__toString("Map {","}")},Be.prototype.get=function(t,d){return this._root?this._root.get(0,void 0,t,d):d},Be.prototype.set=function(t,d){return Lt(this,t,d)},Be.prototype.setIn=function(t,d){return this.updateIn(t,w,function(){return d})},Be.prototype.remove=function(t){return Lt(this,t,w)},Be.prototype.deleteIn=function(t){return this.updateIn(t,function(){return w})},Be.prototype.update=function(t,d,W){return arguments.length===1?t(this):this.updateIn([t],d,W)},Be.prototype.updateIn=function(t,d,W){W||(W=d,d=void 0);var Q=ar(this,Zr(t),d,W);return Q===w?void 0:Q},Be.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ot()},Be.prototype.merge=function(){return $t(this,void 0,arguments)},Be.prototype.mergeWith=function(t){var d=i.call(arguments,1);return $t(this,t,d)},Be.prototype.mergeIn=function(t){var d=i.call(arguments,1);return this.updateIn(t,Ot(),function(W){return typeof W.merge=="function"?W.merge.apply(W,d):d[d.length-1]})},Be.prototype.mergeDeep=function(){return $t(this,nr,arguments)},Be.prototype.mergeDeepWith=function(t){var d=i.call(arguments,1);return $t(this,Yt(t),d)},Be.prototype.mergeDeepIn=function(t){var d=i.call(arguments,1);return this.updateIn(t,Ot(),function(W){return typeof W.mergeDeep=="function"?W.mergeDeep.apply(W,d):d[d.length-1]})},Be.prototype.sort=function(t){return Pt(er(this,t))},Be.prototype.sortBy=function(t,d){return Pt(er(this,d,t))},Be.prototype.withMutations=function(t){var d=this.asMutable();return t(d),d.wasAltered()?d.__ensureOwner(this.__ownerID):this},Be.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new _)},Be.prototype.asImmutable=function(){return this.__ensureOwner()},Be.prototype.wasAltered=function(){return this.__altered},Be.prototype.__iterator=function(t,d){return new St(this,t,d)},Be.prototype.__iterate=function(t,d){var W=this,Q=0;return this._root&&this._root.iterate(function(q){return Q++,t(q[1],q[0],W)},d),Q},Be.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?we(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)};function Ge(t){return!!(t&&t[et])}Be.isMap=Ge;var et="@@__IMMUTABLE_MAP__@@",je=Be.prototype;je[et]=!0,je[A]=je.remove,je.removeIn=je.deleteIn;function vt(t,d){this.ownerID=t,this.entries=d}vt.prototype.get=function(t,d,W,Q){for(var q=this.entries,ue=0,oe=q.length;ue<oe;ue++)if(fe(W,q[ue][0]))return q[ue][1];return Q},vt.prototype.update=function(t,d,W,Q,q,ue,oe){for(var pe=q===w,Se=this.entries,Ce=0,Ne=Se.length;Ce<Ne&&!fe(Q,Se[Ce][0]);Ce++);var Xe=Ce<Ne;if(Xe?Se[Ce][1]===q:pe)return this;if(H(oe),(pe||!Xe)&&H(ue),!(pe&&Se.length===1)){if(!Xe&&!pe&&Se.length>=ur)return fr(t,Se,Q,q);var rt=t&&t===this.ownerID,ct=rt?Se:te(Se);return Xe?pe?Ce===Ne-1?ct.pop():ct[Ce]=ct.pop():ct[Ce]=[Q,q]:ct.push([Q,q]),rt?(this.entries=ct,this):new vt(t,ct)}};function gt(t,d,W){this.ownerID=t,this.bitmap=d,this.nodes=W}gt.prototype.get=function(t,d,W,Q){d===void 0&&(d=Je(W));var q=1<<((t===0?d:d>>>t)&$),ue=this.bitmap;return ue&q?this.nodes[Qt(ue&q-1)].get(t+U,d,W,Q):Q},gt.prototype.update=function(t,d,W,Q,q,ue,oe){W===void 0&&(W=Je(Q));var pe=(d===0?W:W>>>d)&$,Se=1<<pe,Ce=this.bitmap,Ne=(Ce&Se)!==0;if(!Ne&&q===w)return this;var Xe=Qt(Ce&Se-1),rt=this.nodes,ct=Ne?rt[Xe]:void 0,ht=Gt(ct,t,d+U,W,Q,q,ue,oe);if(ht===ct)return this;if(!Ne&&ht&&rt.length>=pn)return Ht(t,rt,Ce,pe,ht);if(Ne&&!ht&&rt.length===2&&rr(rt[Xe^1]))return rt[Xe^1];if(Ne&&ht&&rt.length===1&&rr(ht))return ht;var Ct=t&&t===this.ownerID,Vt=Ne?ht?Ce:Ce^Se:Ce|Se,Ut=Ne?ht?Jt(rt,Xe,ht,Ct):Kt(rt,Xe,Ct):Er(rt,Xe,ht,Ct);return Ct?(this.bitmap=Vt,this.nodes=Ut,this):new gt(t,Vt,Ut)};function lt(t,d,W){this.ownerID=t,this.count=d,this.nodes=W}lt.prototype.get=function(t,d,W,Q){d===void 0&&(d=Je(W));var q=(t===0?d:d>>>t)&$,ue=this.nodes[q];return ue?ue.get(t+U,d,W,Q):Q},lt.prototype.update=function(t,d,W,Q,q,ue,oe){W===void 0&&(W=Je(Q));var pe=(d===0?W:W>>>d)&$,Se=q===w,Ce=this.nodes,Ne=Ce[pe];if(Se&&!Ne)return this;var Xe=Gt(Ne,t,d+U,W,Q,q,ue,oe);if(Xe===Ne)return this;var rt=this.count;if(!Ne)rt++;else if(!Xe&&(rt--,rt<vn))return Or(t,Ce,rt,pe);var ct=t&&t===this.ownerID,ht=Jt(Ce,pe,Xe,ct);return ct?(this.count=rt,this.nodes=ht,this):new lt(t,rt,ht)};function pt(t,d,W){this.ownerID=t,this.keyHash=d,this.entries=W}pt.prototype.get=function(t,d,W,Q){for(var q=this.entries,ue=0,oe=q.length;ue<oe;ue++)if(fe(W,q[ue][0]))return q[ue][1];return Q},pt.prototype.update=function(t,d,W,Q,q,ue,oe){W===void 0&&(W=Je(Q));var pe=q===w;if(W!==this.keyHash)return pe?this:(H(oe),H(ue),kt(this,t,d,W,[Q,q]));for(var Se=this.entries,Ce=0,Ne=Se.length;Ce<Ne&&!fe(Q,Se[Ce][0]);Ce++);var Xe=Ce<Ne;if(Xe?Se[Ce][1]===q:pe)return this;if(H(oe),(pe||!Xe)&&H(ue),pe&&Ne===2)return new _e(t,this.keyHash,Se[Ce^1]);var rt=t&&t===this.ownerID,ct=rt?Se:te(Se);return Xe?pe?Ce===Ne-1?ct.pop():ct[Ce]=ct.pop():ct[Ce]=[Q,q]:ct.push([Q,q]),rt?(this.entries=ct,this):new pt(t,this.keyHash,ct)};function _e(t,d,W){this.ownerID=t,this.keyHash=d,this.entry=W}_e.prototype.get=function(t,d,W,Q){return fe(W,this.entry[0])?this.entry[1]:Q},_e.prototype.update=function(t,d,W,Q,q,ue,oe){var pe=q===w,Se=fe(Q,this.entry[0]);if(Se?q===this.entry[1]:pe)return this;if(H(oe),pe){H(ue);return}return Se?t&&t===this.ownerID?(this.entry[1]=q,this):new _e(t,this.keyHash,[Q,q]):(H(ue),kt(this,t,d,Je(Q),[Q,q]))},vt.prototype.iterate=pt.prototype.iterate=function(t,d){for(var W=this.entries,Q=0,q=W.length-1;Q<=q;Q++)if(t(W[d?q-Q:Q])===!1)return!1},gt.prototype.iterate=lt.prototype.iterate=function(t,d){for(var W=this.nodes,Q=0,q=W.length-1;Q<=q;Q++){var ue=W[d?q-Q:Q];if(ue&&ue.iterate(t,d)===!1)return!1}},_e.prototype.iterate=function(t,d){return t(this.entry)},e(St,n);function St(t,d,W){this._type=d,this._reverse=W,this._stack=t._root&&me(t._root)}St.prototype.next=function(){for(var t=this._type,d=this._stack;d;){var W=d.node,Q=d.index++,q;if(W.entry){if(Q===0)return le(t,W.entry)}else if(W.entries){if(q=W.entries.length-1,Q<=q)return le(t,W.entries[this._reverse?q-Q:Q])}else if(q=W.nodes.length-1,Q<=q){var ue=W.nodes[this._reverse?q-Q:Q];if(ue){if(ue.entry)return le(t,ue.entry);d=this._stack=me(ue,d)}continue}d=this._stack=this._stack.__prev}return p()};function le(t,d){return y(t,d[0],d[1])}function me(t,d){return{node:t,index:0,__prev:d}}function we(t,d,W,Q){var q=Object.create(je);return q.size=t,q._root=d,q.__ownerID=W,q.__hash=Q,q.__altered=!1,q}var it;function Ot(){return it||(it=we(0))}function Lt(t,d,W){var Q,q;if(t._root){var ue=K(V),oe=K(G);if(Q=Gt(t._root,t.__ownerID,0,void 0,d,W,ue,oe),!oe.value)return t;q=t.size+(ue.value?W===w?-1:1:0)}else{if(W===w)return t;q=1,Q=new vt(t.__ownerID,[[d,W]])}return t.__ownerID?(t.size=q,t._root=Q,t.__hash=void 0,t.__altered=!0,t):Q?we(q,Q):Ot()}function Gt(t,d,W,Q,q,ue,oe,pe){return t?t.update(d,W,Q,q,ue,oe,pe):ue===w?t:(H(pe),H(oe),new _e(d,Q,[q,ue]))}function rr(t){return t.constructor===_e||t.constructor===pt}function kt(t,d,W,Q,q){if(t.keyHash===Q)return new pt(d,Q,[t.entry,q]);var ue=(W===0?t.keyHash:t.keyHash>>>W)&$,oe=(W===0?Q:Q>>>W)&$,pe,Se=ue===oe?[kt(t,d,W+U,Q,q)]:(pe=new _e(d,Q,q),ue<oe?[t,pe]:[pe,t]);return new gt(d,1<<ue|1<<oe,Se)}function fr(t,d,W,Q){t||(t=new _);for(var q=new _e(t,Je(W),[W,Q]),ue=0;ue<d.length;ue++){var oe=d[ue];q=q.update(t,0,void 0,oe[0],oe[1])}return q}function Or(t,d,W,Q){for(var q=0,ue=0,oe=new Array(W),pe=0,Se=1,Ce=d.length;pe<Ce;pe++,Se<<=1){var Ne=d[pe];Ne!==void 0&&pe!==Q&&(q|=Se,oe[ue++]=Ne)}return new gt(t,q,oe)}function Ht(t,d,W,Q,q){for(var ue=0,oe=new Array(I),pe=0;W!==0;pe++,W>>>=1)oe[pe]=W&1?d[ue++]:void 0;return oe[Q]=q,new lt(t,ue+1,oe)}function $t(t,d,W){for(var Q=[],q=0;q<W.length;q++){var ue=W[q],oe=O(ue);C(ue)||(oe=oe.map(function(pe){return He(pe)})),Q.push(oe)}return zt(t,d,Q)}function nr(t,d,W){return t&&t.mergeDeep&&C(d)?t.mergeDeep(d):fe(t,d)?t:d}function Yt(t){return function(d,W,Q){if(d&&d.mergeDeepWith&&C(W))return d.mergeDeepWith(t,W);var q=t(d,W,Q);return fe(d,q)?d:q}}function zt(t,d,W){return W=W.filter(function(Q){return Q.size!==0}),W.length===0?t:t.size===0&&!t.__ownerID&&W.length===1?t.constructor(W[0]):t.withMutations(function(Q){for(var q=d?function(oe,pe){Q.update(pe,w,function(Se){return Se===w?oe:d(Se,oe,pe)})}:function(oe,pe){Q.set(pe,oe)},ue=0;ue<W.length;ue++)W[ue].forEach(q)})}function ar(t,d,W,Q){var q=t===w,ue=d.next();if(ue.done){var oe=q?W:t,pe=Q(oe);return pe===oe?t:pe}be(q||t&&t.set,"invalid keyPath");var Se=ue.value,Ce=q?w:t.get(Se,w),Ne=ar(Ce,d,W,Q);return Ne===Ce?t:Ne===w?t.remove(Se):(q?Ot():t).set(Se,Ne)}function Qt(t){return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t=t+(t>>8),t=t+(t>>16),t&127}function Jt(t,d,W,Q){var q=Q?t:te(t);return q[d]=W,q}function Er(t,d,W,Q){var q=t.length+1;if(Q&&d+1===q)return t[d]=W,t;for(var ue=new Array(q),oe=0,pe=0;pe<q;pe++)pe===d?(ue[pe]=W,oe=-1):ue[pe]=t[pe+oe];return ue}function Kt(t,d,W){var Q=t.length-1;if(W&&d===Q)return t.pop(),t;for(var q=new Array(Q),ue=0,oe=0;oe<Q;oe++)oe===d&&(ue=1),q[oe]=t[oe+ue];return q}var ur=I/4,pn=I/2,vn=I/4;e(Tt,ut);function Tt(t){var d=Sr();if(t==null)return d;if(Mr(t))return t;var W=g(t),Q=W.size;return Q===0?d:(Ze(Q),Q>0&&Q<I?or(0,Q,U,null,new Bt(W.toArray())):d.withMutations(function(q){q.setSize(Q),W.forEach(function(ue,oe){return q.set(oe,ue)})}))}Tt.of=function(){return this(arguments)},Tt.prototype.toString=function(){return this.__toString("List [","]")},Tt.prototype.get=function(t,d){if(t=k(this,t),t>=0&&t<this.size){t+=this._origin;var W=Wr(this,t);return W&&W.array[t&$]}return d},Tt.prototype.set=function(t,d){return gn(this,t,d)},Tt.prototype.remove=function(t){return this.has(t)?t===0?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Tt.prototype.insert=function(t,d){return this.splice(t,0,d)},Tt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=U,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Sr()},Tt.prototype.push=function(){var t=arguments,d=this.size;return this.withMutations(function(W){xt(W,0,d+t.length);for(var Q=0;Q<t.length;Q++)W.set(d+Q,t[Q])})},Tt.prototype.pop=function(){return xt(this,0,-1)},Tt.prototype.unshift=function(){var t=arguments;return this.withMutations(function(d){xt(d,-t.length);for(var W=0;W<t.length;W++)d.set(W,t[W])})},Tt.prototype.shift=function(){return xt(this,1)},Tt.prototype.merge=function(){return cr(this,void 0,arguments)},Tt.prototype.mergeWith=function(t){var d=i.call(arguments,1);return cr(this,t,d)},Tt.prototype.mergeDeep=function(){return cr(this,nr,arguments)},Tt.prototype.mergeDeepWith=function(t){var d=i.call(arguments,1);return cr(this,Yt(t),d)},Tt.prototype.setSize=function(t){return xt(this,0,t)},Tt.prototype.slice=function(t,d){var W=this.size;return m(t,d,W)?this:xt(this,s(t,W),c(d,W))},Tt.prototype.__iterator=function(t,d){var W=0,Q=wr(this,d);return new n(function(){var q=Q();return q===ir?p():y(t,W++,q)})},Tt.prototype.__iterate=function(t,d){for(var W=0,Q=wr(this,d),q;(q=Q())!==ir&&t(q,W++,this)!==!1;);return W},Tt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?or(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)};function Mr(t){return!!(t&&t[Vr])}Tt.isList=Mr;var Vr="@@__IMMUTABLE_LIST__@@",It=Tt.prototype;It[Vr]=!0,It[A]=It.remove,It.setIn=je.setIn,It.deleteIn=It.removeIn=je.removeIn,It.update=je.update,It.updateIn=je.updateIn,It.mergeIn=je.mergeIn,It.mergeDeepIn=je.mergeDeepIn,It.withMutations=je.withMutations,It.asMutable=je.asMutable,It.asImmutable=je.asImmutable,It.wasAltered=je.wasAltered;function Bt(t,d){this.array=t,this.ownerID=d}Bt.prototype.removeBefore=function(t,d,W){if(W===d?1<<d:this.array.length===0)return this;var Q=W>>>d&$;if(Q>=this.array.length)return new Bt([],t);var q=Q===0,ue;if(d>0){var oe=this.array[Q];if(ue=oe&&oe.removeBefore(t,d-U,W),ue===oe&&q)return this}if(q&&!ue)return this;var pe=Xt(this,t);if(!q)for(var Se=0;Se<Q;Se++)pe.array[Se]=void 0;return ue&&(pe.array[Q]=ue),pe},Bt.prototype.removeAfter=function(t,d,W){if(W===(d?1<<d:0)||this.array.length===0)return this;var Q=W-1>>>d&$;if(Q>=this.array.length)return this;var q;if(d>0){var ue=this.array[Q];if(q=ue&&ue.removeAfter(t,d-U,W),q===ue&&Q===this.array.length-1)return this}var oe=Xt(this,t);return oe.array.splice(Q+1),q&&(oe.array[Q]=q),oe};var ir={};function wr(t,d){var W=t._origin,Q=t._capacity,q=lr(Q),ue=t._tail;return oe(t._root,t._level,0);function oe(Ce,Ne,Xe){return Ne===0?pe(Ce,Xe):Se(Ce,Ne,Xe)}function pe(Ce,Ne){var Xe=Ne===q?ue&&ue.array:Ce&&Ce.array,rt=Ne>W?0:W-Ne,ct=Q-Ne;return ct>I&&(ct=I),function(){if(rt===ct)return ir;var ht=d?--ct:rt++;return Xe&&Xe[ht]}}function Se(Ce,Ne,Xe){var rt,ct=Ce&&Ce.array,ht=Xe>W?0:W-Xe>>Ne,Ct=(Q-Xe>>Ne)+1;return Ct>I&&(Ct=I),function(){do{if(rt){var Vt=rt();if(Vt!==ir)return Vt;rt=null}if(ht===Ct)return ir;var Ut=d?--Ct:ht++;rt=oe(ct&&ct[Ut],Ne-U,Xe+(Ut<<Ne))}while(!0)}}}function or(t,d,W,Q,q,ue,oe){var pe=Object.create(It);return pe.size=d-t,pe._origin=t,pe._capacity=d,pe._level=W,pe._root=Q,pe._tail=q,pe.__ownerID=ue,pe.__hash=oe,pe.__altered=!1,pe}var jr;function Sr(){return jr||(jr=or(0,0,U))}function gn(t,d,W){if(d=k(t,d),d!==d)return t;if(d>=t.size||d<0)return t.withMutations(function(oe){d<0?xt(oe,d).set(0,W):xt(oe,0,d+1).set(d,W)});d+=t._origin;var Q=t._tail,q=t._root,ue=K(G);return d>=lr(t._capacity)?Q=Tr(Q,t.__ownerID,0,d,W,ue):q=Tr(q,t.__ownerID,t._level,d,W,ue),ue.value?t.__ownerID?(t._root=q,t._tail=Q,t.__hash=void 0,t.__altered=!0,t):or(t._origin,t._capacity,t._level,q,Q):t}function Tr(t,d,W,Q,q,ue){var oe=Q>>>W&$,pe=t&&oe<t.array.length;if(!pe&&q===void 0)return t;var Se;if(W>0){var Ce=t&&t.array[oe],Ne=Tr(Ce,d,W-U,Q,q,ue);return Ne===Ce?t:(Se=Xt(t,d),Se.array[oe]=Ne,Se)}return pe&&t.array[oe]===q?t:(H(ue),Se=Xt(t,d),q===void 0&&oe===Se.array.length-1?Se.array.pop():Se.array[oe]=q,Se)}function Xt(t,d){return d&&t&&d===t.ownerID?t:new Bt(t?t.array.slice():[],d)}function Wr(t,d){if(d>=lr(t._capacity))return t._tail;if(d<1<<t._level+U){for(var W=t._root,Q=t._level;W&&Q>0;)W=W.array[d>>>Q&$],Q-=U;return W}}function xt(t,d,W){d!==void 0&&(d=d|0),W!==void 0&&(W=W|0);var Q=t.__ownerID||new _,q=t._origin,ue=t._capacity,oe=q+d,pe=W===void 0?ue:W<0?ue+W:q+W;if(oe===q&&pe===ue)return t;if(oe>=pe)return t.clear();for(var Se=t._level,Ce=t._root,Ne=0;oe+Ne<0;)Ce=new Bt(Ce&&Ce.array.length?[void 0,Ce]:[],Q),Se+=U,Ne+=1<<Se;Ne&&(oe+=Ne,q+=Ne,pe+=Ne,ue+=Ne);for(var Xe=lr(ue),rt=lr(pe);rt>=1<<Se+U;)Ce=new Bt(Ce&&Ce.array.length?[Ce]:[],Q),Se+=U;var ct=t._tail,ht=rt<Xe?Wr(t,pe-1):rt>Xe?new Bt([],Q):ct;if(ct&&rt>Xe&&oe<ue&&ct.array.length){Ce=Xt(Ce,Q);for(var Ct=Ce,Vt=Se;Vt>U;Vt-=U){var Ut=Xe>>>Vt&$;Ct=Ct.array[Ut]=Xt(Ct.array[Ut],Q)}Ct.array[Xe>>>U&$]=ct}if(pe<ue&&(ht=ht&&ht.removeAfter(Q,0,pe)),oe>=rt)oe-=rt,pe-=rt,Se=U,Ce=null,ht=ht&&ht.removeBefore(Q,0,oe);else if(oe>q||rt<Xe){for(Ne=0;Ce;){var yr=oe>>>Se&$;if(yr!==rt>>>Se&$)break;yr&&(Ne+=(1<<Se)*yr),Se-=U,Ce=Ce.array[yr]}Ce&&oe>q&&(Ce=Ce.removeBefore(Q,Se,oe-Ne)),Ce&&rt<Xe&&(Ce=Ce.removeAfter(Q,Se,rt-Ne)),Ne&&(oe-=Ne,pe-=Ne)}return t.__ownerID?(t.size=pe-oe,t._origin=oe,t._capacity=pe,t._level=Se,t._root=Ce,t._tail=ht,t.__hash=void 0,t.__altered=!0,t):or(oe,pe,Se,Ce,ht)}function cr(t,d,W){for(var Q=[],q=0,ue=0;ue<W.length;ue++){var oe=W[ue],pe=g(oe);pe.size>q&&(q=pe.size),C(oe)||(pe=pe.map(function(Se){return He(Se)})),Q.push(pe)}return q>t.size&&(t=t.setSize(q)),zt(t,d,Q)}function lr(t){return t<I?0:t-1>>>U<<U}e(Pt,Be);function Pt(t){return t==null?dr():Ur(t)?t:dr().withMutations(function(d){var W=O(t);Ze(W.size),W.forEach(function(Q,q){return d.set(q,Q)})})}Pt.of=function(){return this(arguments)},Pt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Pt.prototype.get=function(t,d){var W=this._map.get(t);return W!==void 0?this._list.get(W)[1]:d},Pt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):dr()},Pt.prototype.set=function(t,d){return Br(this,t,d)},Pt.prototype.remove=function(t){return Br(this,t,w)},Pt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Pt.prototype.__iterate=function(t,d){var W=this;return this._list.__iterate(function(Q){return Q&&t(Q[1],Q[0],W)},d)},Pt.prototype.__iterator=function(t,d){return this._list.fromEntrySeq().__iterator(t,d)},Pt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var d=this._map.__ensureOwner(t),W=this._list.__ensureOwner(t);return t?Rr(d,W,t,this.__hash):(this.__ownerID=t,this._map=d,this._list=W,this)};function Ur(t){return Ge(t)&&P(t)}Pt.isOrderedMap=Ur,Pt.prototype[b]=!0,Pt.prototype[A]=Pt.prototype.remove;function Rr(t,d,W,Q){var q=Object.create(Pt.prototype);return q.size=t?t.size:0,q._map=t,q._list=d,q.__ownerID=W,q.__hash=Q,q}var Gr;function dr(){return Gr||(Gr=Rr(Ot(),Sr()))}function Br(t,d,W){var Q=t._map,q=t._list,ue=Q.get(d),oe=ue!==void 0,pe,Se;if(W===w){if(!oe)return t;q.size>=I&&q.size>=Q.size*2?(Se=q.filter(function(Ce,Ne){return Ce!==void 0&&ue!==Ne}),pe=Se.toKeyedSeq().map(function(Ce){return Ce[0]}).flip().toMap(),t.__ownerID&&(pe.__ownerID=Se.__ownerID=t.__ownerID)):(pe=Q.remove(d),Se=ue===q.size-1?q.pop():q.set(ue,void 0))}else if(oe){if(W===q.get(ue)[1])return t;pe=Q,Se=q.set(ue,[d,W])}else pe=Q.set(d,q.size),Se=q.set(q.size,[d,W]);return t.__ownerID?(t.size=pe.size,t._map=pe,t._list=Se,t.__hash=void 0,t):Rr(pe,Se)}e(Mt,x);function Mt(t,d){this._iter=t,this._useKeys=d,this.size=t.size}Mt.prototype.get=function(t,d){return this._iter.get(t,d)},Mt.prototype.has=function(t){return this._iter.has(t)},Mt.prototype.valueSeq=function(){return this._iter.valueSeq()},Mt.prototype.reverse=function(){var t=this,d=Cr(this,!0);return this._useKeys||(d.valueSeq=function(){return t._iter.toSeq().reverse()}),d},Mt.prototype.map=function(t,d){var W=this,Q=zr(this,t,d);return this._useKeys||(Q.valueSeq=function(){return W._iter.toSeq().map(t,d)}),Q},Mt.prototype.__iterate=function(t,d){var W=this,Q;return this._iter.__iterate(this._useKeys?function(q,ue){return t(q,ue,W)}:(Q=d?Qr(this):0,function(q){return t(q,d?--Q:Q++,W)}),d)},Mt.prototype.__iterator=function(t,d){if(this._useKeys)return this._iter.__iterator(t,d);var W=this._iter.__iterator(l,d),Q=d?Qr(this):0;return new n(function(){var q=W.next();return q.done?q:y(t,d?--Q:Q++,q.value,q)})},Mt.prototype[b]=!0,e(Zt,Y);function Zt(t){this._iter=t,this.size=t.size}Zt.prototype.includes=function(t){return this._iter.includes(t)},Zt.prototype.__iterate=function(t,d){var W=this,Q=0;return this._iter.__iterate(function(q){return t(q,Q++,W)},d)},Zt.prototype.__iterator=function(t,d){var W=this._iter.__iterator(l,d),Q=0;return new n(function(){var q=W.next();return q.done?q:y(t,Q++,q.value,q)})},e(_t,re);function _t(t){this._iter=t,this.size=t.size}_t.prototype.has=function(t){return this._iter.includes(t)},_t.prototype.__iterate=function(t,d){var W=this;return this._iter.__iterate(function(Q){return t(Q,Q,W)},d)},_t.prototype.__iterator=function(t,d){var W=this._iter.__iterator(l,d);return new n(function(){var Q=W.next();return Q.done?Q:y(t,Q.value,Q.value,Q)})},e(qt,x);function qt(t){this._iter=t,this.size=t.size}qt.prototype.entrySeq=function(){return this._iter.toSeq()},qt.prototype.__iterate=function(t,d){var W=this;return this._iter.__iterate(function(Q){if(Q){Yr(Q);var q=C(Q);return t(q?Q.get(1):Q[1],q?Q.get(0):Q[0],W)}},d)},qt.prototype.__iterator=function(t,d){var W=this._iter.__iterator(l,d);return new n(function(){for(;;){var Q=W.next();if(Q.done)return Q;var q=Q.value;if(q){Yr(q);var ue=C(q);return y(t,ue?q.get(0):q[0],ue?q.get(1):q[1],Q)}}})},Zt.prototype.cacheResult=Mt.prototype.cacheResult=_t.prototype.cacheResult=qt.prototype.cacheResult=Nr;function xr(t){var d=wt(t);return d._iter=t,d.size=t.size,d.flip=function(){return t},d.reverse=function(){var W=t.reverse.apply(this);return W.flip=function(){return t.reverse()},W},d.has=function(W){return t.includes(W)},d.includes=function(W){return t.has(W)},d.cacheResult=Nr,d.__iterateUncached=function(W,Q){var q=this;return t.__iterate(function(ue,oe){return W(oe,ue,q)!==!1},Q)},d.__iteratorUncached=function(W,Q){if(W===f){var q=t.__iterator(W,Q);return new n(function(){var ue=q.next();if(!ue.done){var oe=ue.value[0];ue.value[0]=ue.value[1],ue.value[1]=oe}return ue})}return t.__iterator(W===l?u:l,Q)},d}function zr(t,d,W){var Q=wt(t);return Q.size=t.size,Q.has=function(q){return t.has(q)},Q.get=function(q,ue){var oe=t.get(q,w);return oe===w?ue:d.call(W,oe,q,t)},Q.__iterateUncached=function(q,ue){var oe=this;return t.__iterate(function(pe,Se,Ce){return q(d.call(W,pe,Se,Ce),Se,oe)!==!1},ue)},Q.__iteratorUncached=function(q,ue){var oe=t.__iterator(f,ue);return new n(function(){var pe=oe.next();if(pe.done)return pe;var Se=pe.value,Ce=Se[0];return y(q,Ce,d.call(W,Se[1],Ce,t),pe)})},Q}function Cr(t,d){var W=wt(t);return W._iter=t,W.size=t.size,W.reverse=function(){return t},t.flip&&(W.flip=function(){var Q=xr(t);return Q.reverse=function(){return t.flip()},Q}),W.get=function(Q,q){return t.get(d?Q:-1-Q,q)},W.has=function(Q){return t.has(d?Q:-1-Q)},W.includes=function(Q){return t.includes(Q)},W.cacheResult=Nr,W.__iterate=function(Q,q){var ue=this;return t.__iterate(function(oe,pe){return Q(oe,pe,ue)},!q)},W.__iterator=function(Q,q){return t.__iterator(Q,!q)},W}function Kr(t,d,W,Q){var q=wt(t);return Q&&(q.has=function(ue){var oe=t.get(ue,w);return oe!==w&&!!d.call(W,oe,ue,t)},q.get=function(ue,oe){var pe=t.get(ue,w);return pe!==w&&d.call(W,pe,ue,t)?pe:oe}),q.__iterateUncached=function(ue,oe){var pe=this,Se=0;return t.__iterate(function(Ce,Ne,Xe){if(d.call(W,Ce,Ne,Xe))return Se++,ue(Ce,Q?Ne:Se-1,pe)},oe),Se},q.__iteratorUncached=function(ue,oe){var pe=t.__iterator(f,oe),Se=0;return new n(function(){for(;;){var Ce=pe.next();if(Ce.done)return Ce;var Ne=Ce.value,Xe=Ne[0],rt=Ne[1];if(d.call(W,rt,Xe,t))return y(ue,Q?Xe:Se++,rt,Ce)}})},q}function hn(t,d,W){var Q=Be().asMutable();return t.__iterate(function(q,ue){Q.update(d.call(W,q,ue,t),0,function(oe){return oe+1})}),Q.asImmutable()}function mn(t,d,W){var Q=E(t),q=(P(t)?Pt():Be()).asMutable();t.__iterate(function(oe,pe){q.update(d.call(W,oe,pe,t),function(Se){return Se=Se||[],Se.push(Q?[pe,oe]:oe),Se})});var ue=Jr(t);return q.map(function(oe){return Et(t,ue(oe))})}function Pr(t,d,W,Q){var q=t.size;if(d!==void 0&&(d=d|0),W!==void 0&&(W===1/0?W=q:W=W|0),m(d,W,q))return t;var ue=s(d,q),oe=c(W,q);if(ue!==ue||oe!==oe)return Pr(t.toSeq().cacheResult(),d,W,Q);var pe=oe-ue,Se;pe===pe&&(Se=pe<0?0:pe);var Ce=wt(t);return Ce.size=Se===0?Se:t.size&&Se||void 0,!Q&&ge(t)&&Se>=0&&(Ce.get=function(Ne,Xe){return Ne=k(this,Ne),Ne>=0&&Ne<Se?t.get(Ne+ue,Xe):Xe}),Ce.__iterateUncached=function(Ne,Xe){var rt=this;if(Se===0)return 0;if(Xe)return this.cacheResult().__iterate(Ne,Xe);var ct=0,ht=!0,Ct=0;return t.__iterate(function(Vt,Ut){if(!(ht&&(ht=ct++<ue)))return Ct++,Ne(Vt,Q?Ut:Ct-1,rt)!==!1&&Ct!==Se}),Ct},Ce.__iteratorUncached=function(Ne,Xe){if(Se!==0&&Xe)return this.cacheResult().__iterator(Ne,Xe);var rt=Se!==0&&t.__iterator(Ne,Xe),ct=0,ht=0;return new n(function(){for(;ct++<ue;)rt.next();if(++ht>Se)return p();var Ct=rt.next();return Q||Ne===l?Ct:Ne===u?y(Ne,ht-1,void 0,Ct):y(Ne,ht-1,Ct.value[1],Ct)})},Ce}function yn(t,d,W){var Q=wt(t);return Q.__iterateUncached=function(q,ue){var oe=this;if(ue)return this.cacheResult().__iterate(q,ue);var pe=0;return t.__iterate(function(Se,Ce,Ne){return d.call(W,Se,Ce,Ne)&&++pe&&q(Se,Ce,oe)}),pe},Q.__iteratorUncached=function(q,ue){var oe=this;if(ue)return this.cacheResult().__iterator(q,ue);var pe=t.__iterator(f,ue),Se=!0;return new n(function(){if(!Se)return p();var Ce=pe.next();if(Ce.done)return Ce;var Ne=Ce.value,Xe=Ne[0],rt=Ne[1];return d.call(W,rt,Xe,oe)?q===f?Ce:y(q,Xe,rt,Ce):(Se=!1,p())})},Q}function kr(t,d,W,Q){var q=wt(t);return q.__iterateUncached=function(ue,oe){var pe=this;if(oe)return this.cacheResult().__iterate(ue,oe);var Se=!0,Ce=0;return t.__iterate(function(Ne,Xe,rt){if(!(Se&&(Se=d.call(W,Ne,Xe,rt))))return Ce++,ue(Ne,Q?Xe:Ce-1,pe)}),Ce},q.__iteratorUncached=function(ue,oe){var pe=this;if(oe)return this.cacheResult().__iterator(ue,oe);var Se=t.__iterator(f,oe),Ce=!0,Ne=0;return new n(function(){var Xe,rt,ct;do{if(Xe=Se.next(),Xe.done)return Q||ue===l?Xe:ue===u?y(ue,Ne++,void 0,Xe):y(ue,Ne++,Xe.value[1],Xe);var ht=Xe.value;rt=ht[0],ct=ht[1],Ce&&(Ce=d.call(W,ct,rt,pe))}while(Ce);return ue===f?Xe:y(ue,rt,ct,Xe)})},q}function On(t,d){var W=E(t),Q=[t].concat(d).map(function(oe){return C(oe)?W&&(oe=O(oe)):oe=W?Te(oe):he(Array.isArray(oe)?oe:[oe]),oe}).filter(function(oe){return oe.size!==0});if(Q.length===0)return t;if(Q.length===1){var q=Q[0];if(q===t||W&&E(q)||L(t)&&L(q))return q}var ue=new ae(Q);return W?ue=ue.toKeyedSeq():L(t)||(ue=ue.toSetSeq()),ue=ue.flatten(!0),ue.size=Q.reduce(function(oe,pe){if(oe!==void 0){var Se=pe.size;if(Se!==void 0)return oe+Se}},0),ue}function Hr(t,d,W){var Q=wt(t);return Q.__iterateUncached=function(q,ue){var oe=0,pe=!1;function Se(Ce,Ne){var Xe=this;Ce.__iterate(function(rt,ct){return(!d||Ne<d)&&C(rt)?Se(rt,Ne+1):q(rt,W?ct:oe++,Xe)===!1&&(pe=!0),!pe},ue)}return Se(t,0),oe},Q.__iteratorUncached=function(q,ue){var oe=t.__iterator(q,ue),pe=[],Se=0;return new n(function(){for(;oe;){var Ce=oe.next();if(Ce.done!==!1){oe=pe.pop();continue}var Ne=Ce.value;if(q===f&&(Ne=Ne[1]),(!d||pe.length<d)&&C(Ne))pe.push(oe),oe=Ne.__iterator(q,ue);else return W?Ce:y(q,Se++,Ne,Ce)}return p()})},Q}function En(t,d,W){var Q=Jr(t);return t.toSeq().map(function(q,ue){return Q(d.call(W,q,ue,t))}).flatten(!0)}function Sn(t,d){var W=wt(t);return W.size=t.size&&t.size*2-1,W.__iterateUncached=function(Q,q){var ue=this,oe=0;return t.__iterate(function(pe,Se){return(!oe||Q(d,oe++,ue)!==!1)&&Q(pe,oe++,ue)!==!1},q),oe},W.__iteratorUncached=function(Q,q){var ue=t.__iterator(l,q),oe=0,pe;return new n(function(){return(!pe||oe%2)&&(pe=ue.next(),pe.done)?pe:oe%2?y(Q,oe++,d):y(Q,oe++,pe.value,pe)})},W}function er(t,d,W){d||(d=Xr);var Q=E(t),q=0,ue=t.toSeq().map(function(oe,pe){return[pe,oe,q++,W?W(oe,pe,t):oe]}).toArray();return ue.sort(function(oe,pe){return d(oe[3],pe[3])||oe[2]-pe[2]}).forEach(Q?function(oe,pe){ue[pe].length=2}:function(oe,pe){ue[pe]=oe[1]}),Q?x(ue):L(t)?Y(ue):re(ue)}function pr(t,d,W){if(d||(d=Xr),W){var Q=t.toSeq().map(function(q,ue){return[q,W(q,ue,t)]}).reduce(function(q,ue){return $r(d,q[1],ue[1])?ue:q});return Q&&Q[0]}else return t.reduce(function(q,ue){return $r(d,q,ue)?ue:q})}function $r(t,d,W){var Q=t(W,d);return Q===0&&W!==d&&(W==null||W!==W)||Q>0}function Lr(t,d,W){var Q=wt(t);return Q.size=new ae(W).map(function(q){return q.size}).min(),Q.__iterate=function(q,ue){for(var oe=this.__iterator(l,ue),pe,Se=0;!(pe=oe.next()).done&&q(pe.value,Se++,this)!==!1;);return Se},Q.__iteratorUncached=function(q,ue){var oe=W.map(function(Ce){return Ce=r(Ce),Z(ue?Ce.reverse():Ce)}),pe=0,Se=!1;return new n(function(){var Ce;return Se||(Ce=oe.map(function(Ne){return Ne.next()}),Se=Ce.some(function(Ne){return Ne.done})),Se?p():y(q,pe++,d.apply(null,Ce.map(function(Ne){return Ne.value})))})},Q}function Et(t,d){return ge(t)?d:t.constructor(d)}function Yr(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Qr(t){return Ze(t.size),J(t)}function Jr(t){return E(t)?O:L(t)?g:M}function wt(t){return Object.create((E(t)?x:L(t)?Y:re).prototype)}function Nr(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):z.prototype.cacheResult.call(this)}function Xr(t,d){return t>d?1:t<d?-1:0}function Zr(t){var d=Z(t);if(!d){if(!j(t))throw new TypeError("Expected iterable or array-like: "+t);d=Z(r(t))}return d}e(Dt,at);function Dt(t,d){var W,Q=function(oe){if(oe instanceof Q)return oe;if(!(this instanceof Q))return new Q(oe);if(!W){W=!0;var pe=Object.keys(t);Tn(q,pe),q.size=pe.length,q._name=d,q._keys=pe,q._defaultValues=t}this._map=Be(oe)},q=Q.prototype=Object.create(Ft);return q.constructor=Q,Q}Dt.prototype.toString=function(){return this.__toString(_r(this)+" {","}")},Dt.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Dt.prototype.get=function(t,d){if(!this.has(t))return d;var W=this._defaultValues[t];return this._map?this._map.get(t,W):W},Dt.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=vr(this,Ot()))},Dt.prototype.set=function(t,d){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+_r(this));if(this._map&&!this._map.has(t)){var W=this._defaultValues[t];if(d===W)return this}var Q=this._map&&this._map.set(t,d);return this.__ownerID||Q===this._map?this:vr(this,Q)},Dt.prototype.remove=function(t){if(!this.has(t))return this;var d=this._map&&this._map.remove(t);return this.__ownerID||d===this._map?this:vr(this,d)},Dt.prototype.wasAltered=function(){return this._map.wasAltered()},Dt.prototype.__iterator=function(t,d){var W=this;return O(this._defaultValues).map(function(Q,q){return W.get(q)}).__iterator(t,d)},Dt.prototype.__iterate=function(t,d){var W=this;return O(this._defaultValues).map(function(Q,q){return W.get(q)}).__iterate(t,d)},Dt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var d=this._map&&this._map.__ensureOwner(t);return t?vr(this,d,t):(this.__ownerID=t,this._map=d,this)};var Ft=Dt.prototype;Ft[A]=Ft.remove,Ft.deleteIn=Ft.removeIn=je.removeIn,Ft.merge=je.merge,Ft.mergeWith=je.mergeWith,Ft.mergeIn=je.mergeIn,Ft.mergeDeep=je.mergeDeep,Ft.mergeDeepWith=je.mergeDeepWith,Ft.mergeDeepIn=je.mergeDeepIn,Ft.setIn=je.setIn,Ft.update=je.update,Ft.updateIn=je.updateIn,Ft.withMutations=je.withMutations,Ft.asMutable=je.asMutable,Ft.asImmutable=je.asImmutable;function vr(t,d,W){var Q=Object.create(Object.getPrototypeOf(t));return Q._map=d,Q.__ownerID=W,Q}function _r(t){return t._name||t.constructor.name||"Record"}function Tn(t,d){try{d.forEach(Rn.bind(void 0,t))}catch{}}function Rn(t,d){Object.defineProperty(t,d,{get:function(){return this.get(d)},set:function(W){be(this.__ownerID,"Cannot set on an immutable record."),this.set(d,W)}})}e(Rt,Qe);function Rt(t){return t==null?Ar():Fr(t)&&!P(t)?t:Ar().withMutations(function(d){var W=M(t);Ze(W.size),W.forEach(function(Q){return d.add(Q)})})}Rt.of=function(){return this(arguments)},Rt.fromKeys=function(t){return this(O(t).keySeq())},Rt.prototype.toString=function(){return this.__toString("Set {","}")},Rt.prototype.has=function(t){return this._map.has(t)},Rt.prototype.add=function(t){return Ir(this,this._map.set(t,!0))},Rt.prototype.remove=function(t){return Ir(this,this._map.remove(t))},Rt.prototype.clear=function(){return Ir(this,this._map.clear())},Rt.prototype.union=function(){var t=i.call(arguments,0);return t=t.filter(function(d){return d.size!==0}),t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(d){for(var W=0;W<t.length;W++)M(t[W]).forEach(function(Q){return d.add(Q)})})},Rt.prototype.intersect=function(){var t=i.call(arguments,0);if(t.length===0)return this;t=t.map(function(W){return M(W)});var d=this;return this.withMutations(function(W){d.forEach(function(Q){t.every(function(q){return q.includes(Q)})||W.remove(Q)})})},Rt.prototype.subtract=function(){var t=i.call(arguments,0);if(t.length===0)return this;t=t.map(function(W){return M(W)});var d=this;return this.withMutations(function(W){d.forEach(function(Q){t.some(function(q){return q.includes(Q)})&&W.remove(Q)})})},Rt.prototype.merge=function(){return this.union.apply(this,arguments)},Rt.prototype.mergeWith=function(t){var d=i.call(arguments,1);return this.union.apply(this,d)},Rt.prototype.sort=function(t){return jt(er(this,t))},Rt.prototype.sortBy=function(t,d){return jt(er(this,d,t))},Rt.prototype.wasAltered=function(){return this._map.wasAltered()},Rt.prototype.__iterate=function(t,d){var W=this;return this._map.__iterate(function(Q,q){return t(q,q,W)},d)},Rt.prototype.__iterator=function(t,d){return this._map.map(function(W,Q){return Q}).__iterator(t,d)},Rt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var d=this._map.__ensureOwner(t);return t?this.__make(d,t):(this.__ownerID=t,this._map=d,this)};function Fr(t){return!!(t&&t[qr])}Rt.isSet=Fr;var qr="@@__IMMUTABLE_SET__@@",bt=Rt.prototype;bt[qr]=!0,bt[A]=bt.remove,bt.mergeDeep=bt.merge,bt.mergeDeepWith=bt.mergeWith,bt.withMutations=je.withMutations,bt.asMutable=je.asMutable,bt.asImmutable=je.asImmutable,bt.__empty=Ar,bt.__make=en;function Ir(t,d){return t.__ownerID?(t.size=d.size,t._map=d,t):d===t._map?t:d.size===0?t.__empty():t.__make(d)}function en(t,d){var W=Object.create(bt);return W.size=t?t.size:0,W._map=t,W.__ownerID=d,W}var tn;function Ar(){return tn||(tn=en(Ot()))}e(jt,Rt);function jt(t){return t==null?Dr():rn(t)?t:Dr().withMutations(function(d){var W=M(t);Ze(W.size),W.forEach(function(Q){return d.add(Q)})})}jt.of=function(){return this(arguments)},jt.fromKeys=function(t){return this(O(t).keySeq())},jt.prototype.toString=function(){return this.__toString("OrderedSet {","}")};function rn(t){return Fr(t)&&P(t)}jt.isOrderedSet=rn;var gr=jt.prototype;gr[b]=!0,gr.__empty=Dr,gr.__make=nn;function nn(t,d){var W=Object.create(gr);return W.size=t?t.size:0,W._map=t,W.__ownerID=d,W}var an;function Dr(){return an||(an=nn(dr()))}e(Nt,ut);function Nt(t){return t==null?br():un(t)?t:br().unshiftAll(t)}Nt.of=function(){return this(arguments)},Nt.prototype.toString=function(){return this.__toString("Stack [","]")},Nt.prototype.get=function(t,d){var W=this._head;for(t=k(this,t);W&&t--;)W=W.next;return W?W.value:d},Nt.prototype.peek=function(){return this._head&&this._head.value},Nt.prototype.push=function(){if(arguments.length===0)return this;for(var t=this.size+arguments.length,d=this._head,W=arguments.length-1;W>=0;W--)d={value:arguments[W],next:d};return this.__ownerID?(this.size=t,this._head=d,this.__hash=void 0,this.__altered=!0,this):sr(t,d)},Nt.prototype.pushAll=function(t){if(t=g(t),t.size===0)return this;Ze(t.size);var d=this.size,W=this._head;return t.reverse().forEach(function(Q){d++,W={value:Q,next:W}}),this.__ownerID?(this.size=d,this._head=W,this.__hash=void 0,this.__altered=!0,this):sr(d,W)},Nt.prototype.pop=function(){return this.slice(1)},Nt.prototype.unshift=function(){return this.push.apply(this,arguments)},Nt.prototype.unshiftAll=function(t){return this.pushAll(t)},Nt.prototype.shift=function(){return this.pop.apply(this,arguments)},Nt.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):br()},Nt.prototype.slice=function(t,d){if(m(t,d,this.size))return this;var W=s(t,this.size),Q=c(d,this.size);if(Q!==this.size)return ut.prototype.slice.call(this,t,d);for(var q=this.size-W,ue=this._head;W--;)ue=ue.next;return this.__ownerID?(this.size=q,this._head=ue,this.__hash=void 0,this.__altered=!0,this):sr(q,ue)},Nt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?sr(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Nt.prototype.__iterate=function(t,d){if(d)return this.reverse().__iterate(t);for(var W=0,Q=this._head;Q&&t(Q.value,W++,this)!==!1;)Q=Q.next;return W},Nt.prototype.__iterator=function(t,d){if(d)return this.reverse().__iterator(t);var W=0,Q=this._head;return new n(function(){if(Q){var q=Q.value;return Q=Q.next,y(t,W++,q)}return p()})};function un(t){return!!(t&&t[on])}Nt.isStack=un;var on="@@__IMMUTABLE_STACK__@@",tr=Nt.prototype;tr[on]=!0,tr.withMutations=je.withMutations,tr.asMutable=je.asMutable,tr.asImmutable=je.asImmutable,tr.wasAltered=je.wasAltered;function sr(t,d,W,Q){var q=Object.create(tr);return q.size=t,q._head=d,q.__ownerID=W,q.__hash=Q,q.__altered=!1,q}var ln;function br(){return ln||(ln=sr(0))}function Wt(t,d){var W=function(Q){t.prototype[Q]=d[Q]};return Object.keys(d).forEach(W),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(d).forEach(W),t}r.Iterator=n,Wt(r,{toArray:function(){Ze(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(d,W){t[W]=d}),t},toIndexedSeq:function(){return new Zt(this)},toJS:function(){return this.toSeq().map(function(t){return t&&typeof t.toJS=="function"?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&typeof t.toJSON=="function"?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new Mt(this,!0)},toMap:function(){return Be(this.toKeyedSeq())},toObject:function(){Ze(this.size);var t={};return this.__iterate(function(d,W){t[W]=d}),t},toOrderedMap:function(){return Pt(this.toKeyedSeq())},toOrderedSet:function(){return jt(E(this)?this.valueSeq():this)},toSet:function(){return Rt(E(this)?this.valueSeq():this)},toSetSeq:function(){return new _t(this)},toSeq:function(){return L(this)?this.toIndexedSeq():E(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Nt(E(this)?this.valueSeq():this)},toList:function(){return Tt(E(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,d){return this.size===0?t+d:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+d},concat:function(){var t=i.call(arguments,0);return Et(this,On(this,t))},includes:function(t){return this.some(function(d){return fe(d,t)})},entries:function(){return this.__iterator(f)},every:function(t,d){Ze(this.size);var W=!0;return this.__iterate(function(Q,q,ue){if(!t.call(d,Q,q,ue))return W=!1,!1}),W},filter:function(t,d){return Et(this,Kr(this,t,d,!0))},find:function(t,d,W){var Q=this.findEntry(t,d);return Q?Q[1]:W},forEach:function(t,d){return Ze(this.size),this.__iterate(d?t.bind(d):t)},join:function(t){Ze(this.size),t=t!==void 0?""+t:",";var d="",W=!0;return this.__iterate(function(Q){W?W=!1:d+=t,d+=Q!=null?Q.toString():""}),d},keys:function(){return this.__iterator(u)},map:function(t,d){return Et(this,zr(this,t,d))},reduce:function(t,d,W){Ze(this.size);var Q,q;return arguments.length<2?q=!0:Q=d,this.__iterate(function(ue,oe,pe){q?(q=!1,Q=ue):Q=t.call(W,Q,ue,oe,pe)}),Q},reduceRight:function(t,d,W){var Q=this.toKeyedSeq().reverse();return Q.reduce.apply(Q,arguments)},reverse:function(){return Et(this,Cr(this,!0))},slice:function(t,d){return Et(this,Pr(this,t,d,!0))},some:function(t,d){return!this.every(mr(t),d)},sort:function(t){return Et(this,er(this,t))},values:function(){return this.__iterator(l)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,d){return J(t?this.toSeq().filter(t,d):this)},countBy:function(t,d){return hn(this,t,d)},equals:function(t){return Oe(this,t)},entrySeq:function(){var t=this;if(t._cache)return new ae(t._cache);var d=t.toSeq().map(Pn).toIndexedSeq();return d.fromEntrySeq=function(){return t.toSeq()},d},filterNot:function(t,d){return this.filter(mr(t),d)},findEntry:function(t,d,W){var Q=W;return this.__iterate(function(q,ue,oe){if(t.call(d,q,ue,oe))return Q=[ue,q],!1}),Q},findKey:function(t,d){var W=this.findEntry(t,d);return W&&W[0]},findLast:function(t,d,W){return this.toKeyedSeq().reverse().find(t,d,W)},findLastEntry:function(t,d,W){return this.toKeyedSeq().reverse().findEntry(t,d,W)},findLastKey:function(t,d){return this.toKeyedSeq().reverse().findKey(t,d)},first:function(){return this.find(R)},flatMap:function(t,d){return Et(this,En(this,t,d))},flatten:function(t){return Et(this,Hr(this,t,!0))},fromEntrySeq:function(){return new qt(this)},get:function(t,d){return this.find(function(W,Q){return fe(Q,t)},void 0,d)},getIn:function(t,d){for(var W=this,Q=Zr(t),q;!(q=Q.next()).done;){var ue=q.value;if(W=W&&W.get?W.get(ue,w):w,W===w)return d}return W},groupBy:function(t,d){return mn(this,t,d)},has:function(t){return this.get(t,w)!==w},hasIn:function(t){return this.getIn(t,w)!==w},isSubset:function(t){return t=typeof t.includes=="function"?t:r(t),this.every(function(d){return t.includes(d)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:r(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(d){return fe(d,t)})},keySeq:function(){return this.toSeq().map(Cn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return pr(this,t)},maxBy:function(t,d){return pr(this,d,t)},min:function(t){return pr(this,t?sn(t):cn)},minBy:function(t,d){return pr(this,d?sn(d):cn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Et(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,d){return Et(this,kr(this,t,d,!0))},skipUntil:function(t,d){return this.skipWhile(mr(t),d)},sortBy:function(t,d){return Et(this,er(this,d,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Et(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,d){return Et(this,yn(this,t,d))},takeUntil:function(t,d){return this.takeWhile(mr(t),d)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Nn(this))}});var At=r.prototype;At[N]=!0,At[a]=At.values,At.__toJS=At.toArray,At.__toStringMapper=fn,At.inspect=At.toSource=function(){return this.toString()},At.chain=At.flatMap,At.contains=At.includes,Wt(O,{flip:function(){return Et(this,xr(this))},mapEntries:function(t,d){var W=this,Q=0;return Et(this,this.toSeq().map(function(q,ue){return t.call(d,[ue,q],Q++,W)}).fromEntrySeq())},mapKeys:function(t,d){var W=this;return Et(this,this.toSeq().flip().map(function(Q,q){return t.call(d,Q,q,W)}).flip())}});var hr=O.prototype;hr[S]=!0,hr[a]=At.entries,hr.__toJS=At.toObject,hr.__toStringMapper=function(t,d){return JSON.stringify(d)+": "+fn(t)},Wt(g,{toKeyedSeq:function(){return new Mt(this,!1)},filter:function(t,d){return Et(this,Kr(this,t,d,!1))},findIndex:function(t,d){var W=this.findEntry(t,d);return W?W[0]:-1},indexOf:function(t){var d=this.keyOf(t);return d===void 0?-1:d},lastIndexOf:function(t){var d=this.lastKeyOf(t);return d===void 0?-1:d},reverse:function(){return Et(this,Cr(this,!1))},slice:function(t,d){return Et(this,Pr(this,t,d,!1))},splice:function(t,d){var W=arguments.length;if(d=Math.max(d|0,0),W===0||W===2&&!d)return this;t=s(t,t<0?this.count():this.size);var Q=this.slice(0,t);return Et(this,W===1?Q:Q.concat(te(arguments,2),this.slice(t+d)))},findLastIndex:function(t,d){var W=this.findLastEntry(t,d);return W?W[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Et(this,Hr(this,t,!1))},get:function(t,d){return t=k(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?d:this.find(function(W,Q){return Q===t},void 0,d)},has:function(t){return t=k(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return Et(this,Sn(this,t))},interleave:function(){var t=[this].concat(te(arguments)),d=Lr(this.toSeq(),Y.of,t),W=d.flatten(!0);return d.size&&(W.size=d.size*t.length),Et(this,W)},keySeq:function(){return Ve(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,d){return Et(this,kr(this,t,d,!1))},zip:function(){var t=[this].concat(te(arguments));return Et(this,Lr(this,Ln,t))},zipWith:function(t){var d=te(arguments);return d[0]=this,Et(this,Lr(this,t,d))}}),g.prototype[D]=!0,g.prototype[b]=!0,Wt(M,{get:function(t,d){return this.has(t)?t:d},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),M.prototype.has=At.includes,M.prototype.contains=M.prototype.includes,Wt(x,O.prototype),Wt(Y,g.prototype),Wt(re,M.prototype),Wt(at,O.prototype),Wt(ut,g.prototype),Wt(Qe,M.prototype);function Cn(t,d){return d}function Pn(t,d){return[d,t]}function mr(t){return function(){return!t.apply(this,arguments)}}function sn(t){return function(){return-t.apply(this,arguments)}}function fn(t){return typeof t=="string"?JSON.stringify(t):String(t)}function Ln(){return te(arguments)}function cn(t,d){return t<d?1:t>d?-1:0}function Nn(t){if(t.size===1/0)return 0;var d=P(t),W=E(t),Q=d?1:0,q=t.__iterate(W?d?function(ue,oe){Q=31*Q+dn(Je(ue),Je(oe))|0}:function(ue,oe){Q=Q+dn(Je(ue),Je(oe))|0}:d?function(ue){Q=31*Q+Je(ue)|0}:function(ue){Q=Q+Je(ue)|0});return Fn(q,Q)}function Fn(t,d){return d=ot(d,3432918353),d=ot(d<<15|d>>>-15,461845907),d=ot(d<<13|d>>>-13,5),d=(d+3864292196|0)^t,d=ot(d^d>>>16,2246822507),d=ot(d^d>>>13,3266489909),d=st(d^d>>>16),d}function dn(t,d){return t^d+2654435769+(t<<6)+(t>>2)|0}var In={Iterable:r,Seq:z,Collection:$e,Map:Be,OrderedMap:Pt,List:Tt,Stack:Nt,Set:Rt,OrderedSet:jt,Record:Dt,Range:Ve,Repeat:Re,is:fe,fromJS:He};return In})},46916:(ee,i,e)=>{var r=e(9087),O=e(2174);function g(M,C,E){(E!==void 0&&!O(M[C],E)||E===void 0&&!(C in M))&&r(M,C,E)}ee.exports=g},9906:ee=>{function i(e,r,O){return e===e&&(O!==void 0&&(e=e<=O?e:O),r!==void 0&&(e=e>=r?e:r)),e}ee.exports=i},12797:ee=>{function i(e,r,O,g){for(var M=e.length,C=O+(g?1:-1);g?C--:++C<M;)if(r(e[C],C,e))return C;return-1}ee.exports=i},86752:(ee,i,e)=>{var r=e(79557),O=r();ee.exports=O},43346:(ee,i,e)=>{var r=e(86752),O=e(65555);function g(M,C){return M&&r(M,C,O)}ee.exports=g},43436:(ee,i,e)=>{var r=e(12797),O=e(28086),g=e(63234);function M(C,E,L){return E===E?g(C,E,L):r(C,O,L)}ee.exports=M},14198:(ee,i,e)=>{var r=e(64792),O=e(31871),g=1,M=2;function C(E,L,T,P){var N=T.length,S=N,D=!P;if(E==null)return!S;for(E=Object(E);N--;){var b=T[N];if(D&&b[2]?b[1]!==E[b[0]]:!(b[0]in E))return!1}for(;++N<S;){b=T[N];var A=b[0],U=E[A],I=b[1];if(D&&b[2]){if(U===void 0&&!(A in E))return!1}else{var $=new r;if(P)var w=P(U,I,A,E,L,$);if(!(w===void 0?O(I,U,g|M,P,$):w))return!1}}return!0}ee.exports=C},28086:ee=>{function i(e){return e!==e}ee.exports=i},57279:(ee,i,e)=>{var r=e(42978),O=e(20339),g=e(88199),M=e(42298),C=e(39189);function E(L){return typeof L=="function"?L:L==null?g:typeof L=="object"?M(L)?O(L[0],L[1]):r(L):C(L)}ee.exports=E},42978:(ee,i,e)=>{var r=e(14198),O=e(25961),g=e(26091);function M(C){var E=O(C);return E.length==1&&E[0][2]?g(E[0][0],E[0][1]):function(L){return L===C||r(L,C,E)}}ee.exports=M},20339:(ee,i,e)=>{var r=e(31871),O=e(71540),g=e(7965),M=e(34060),C=e(14039),E=e(26091),L=e(6208),T=1,P=2;function N(S,D){return M(S)&&C(D)?E(L(S),D):function(b){var A=O(b,S);return A===void 0&&A===D?g(b,S):r(D,A,T|P)}}ee.exports=N},25125:(ee,i,e)=>{var r=e(64792),O=e(46916),g=e(86752),M=e(82356),C=e(44166),E=e(56941),L=e(45766);function T(P,N,S,D,b){P!==N&&g(N,function(A,U){if(b||(b=new r),C(A))M(P,N,U,S,T,D,b);else{var I=D?D(L(P,U),A,U+"",P,N,b):void 0;I===void 0&&(I=A),O(P,U,I)}},E)}ee.exports=T},82356:(ee,i,e)=>{var r=e(46916),O=e(77925),g=e(23369),M=e(59660),C=e(11416),E=e(60424),L=e(42298),T=e(49193),P=e(39275),N=e(70712),S=e(44166),D=e(48565),b=e(77711),A=e(45766),U=e(95549);function I($,w,V,G,K,H,_){var te=A($,V),J=A(w,V),k=_.get(J);if(k){r($,V,k);return}var R=H?H(te,J,V+"",$,w,_):void 0,m=R===void 0;if(m){var s=L(J),c=!s&&P(J),o=!s&&!c&&b(J);R=J,s||c||o?L(te)?R=te:T(te)?R=M(te):c?(m=!1,R=O(J,!0)):o?(m=!1,R=g(J,!0)):R=[]:D(J)||E(J)?(R=te,E(te)?R=U(te):(!S(te)||N(te))&&(R=C(J))):m=!1}m&&(_.set(J,R),K(R,J,G,H,_),_.delete(J)),r($,V,R)}ee.exports=I},28498:ee=>{function i(e){return function(r){return r?.[e]}}ee.exports=i},45840:(ee,i,e)=>{var r=e(44057);function O(g){return function(M){return r(M,g)}}ee.exports=O},77654:ee=>{var i=Math.ceil,e=Math.max;function r(O,g,M,C){for(var E=-1,L=e(i((g-O)/(M||1)),0),T=Array(L);L--;)T[C?L:++E]=O,O+=M;return T}ee.exports=r},92901:ee=>{var i=9007199254740991,e=Math.floor;function r(O,g){var M="";if(!O||g<1||g>i)return M;do g%2&&(M+=O),g=e(g/2),g&&(O+=O);while(g);return M}ee.exports=r},84915:(ee,i,e)=>{var r=e(88199),O=e(96138),g=e(6140);function M(C,E){return g(O(C,E,r),C+"")}ee.exports=M},95163:(ee,i,e)=>{var r=e(65602);function O(g,M){return r(M,function(C){return g[C]})}ee.exports=O},65962:(ee,i,e)=>{var r=e(84915),O=e(99382);function g(M){return r(function(C,E){var L=-1,T=E.length,P=T>1?E[T-1]:void 0,N=T>2?E[2]:void 0;for(P=M.length>3&&typeof P=="function"?(T--,P):void 0,N&&O(E[0],E[1],N)&&(P=T<3?void 0:P,T=1),C=Object(C);++L<T;){var S=E[L];S&&M(C,S,L,P)}return C})}ee.exports=g},79557:ee=>{function i(e){return function(r,O,g){for(var M=-1,C=Object(r),E=g(r),L=E.length;L--;){var T=E[e?L:++M];if(O(C[T],T,C)===!1)break}return r}}ee.exports=i},79524:(ee,i,e)=>{var r=e(77654),O=e(99382),g=e(3351);function M(C){return function(E,L,T){return T&&typeof T!="number"&&O(E,L,T)&&(L=T=void 0),E=g(E),L===void 0?(L=E,E=0):L=g(L),T=T===void 0?E<L?1:-1:g(T),r(E,L,T,C)}}ee.exports=M},25961:(ee,i,e)=>{var r=e(14039),O=e(65555);function g(M){for(var C=O(M),E=C.length;E--;){var L=C[E],T=M[L];C[E]=[L,T,r(T)]}return C}ee.exports=g},99382:(ee,i,e)=>{var r=e(2174),O=e(5448),g=e(8267),M=e(44166);function C(E,L,T){if(!M(T))return!1;var P=typeof L;return(P=="number"?O(T)&&g(L,T.length):P=="string"&&L in T)?r(T[L],E):!1}ee.exports=C},14039:(ee,i,e)=>{var r=e(44166);function O(g){return g===g&&!r(g)}ee.exports=O},26091:ee=>{function i(e,r){return function(O){return O==null?!1:O[e]===r&&(r!==void 0||e in Object(O))}}ee.exports=i},45766:ee=>{function i(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}ee.exports=i},63234:ee=>{function i(e,r,O){for(var g=O-1,M=e.length;++g<M;)if(e[g]===r)return g;return-1}ee.exports=i},44889:(ee,i,e)=>{var r=e(66408),O=/[\\^$.*+?()[\]{}|]/g,g=RegExp(O.source);function M(C){return C=r(C),C&&g.test(C)?C.replace(O,"\\$&"):C}ee.exports=M},71540:(ee,i,e)=>{var r=e(44057);function O(g,M,C){var E=g==null?void 0:r(g,M);return E===void 0?C:E}ee.exports=O},1660:(ee,i,e)=>{var r=e(43436),O=e(5448),g=e(93748),M=e(77118),C=e(74114),E=Math.max;function L(T,P,N,S){T=O(T)?T:C(T),N=N&&!S?M(N):0;var D=T.length;return N<0&&(N=E(D+N,0)),g(T)?N<=D&&T.indexOf(P,N)>-1:!!D&&r(T,P,N)>-1}ee.exports=L},49193:(ee,i,e)=>{var r=e(5448),O=e(81962);function g(M){return O(M)&&r(M)}ee.exports=g},8727:(ee,i,e)=>{var r=e(88003),O=e(51261),g=e(60424),M=e(42298),C=e(5448),E=e(39275),L=e(49154),T=e(77711),P="[object Map]",N="[object Set]",S=Object.prototype,D=S.hasOwnProperty;function b(A){if(A==null)return!0;if(C(A)&&(M(A)||typeof A=="string"||typeof A.splice=="function"||E(A)||T(A)||g(A)))return!A.length;var U=O(A);if(U==P||U==N)return!A.size;if(L(A))return!r(A).length;for(var I in A)if(D.call(A,I))return!1;return!0}ee.exports=b},93748:(ee,i,e)=>{var r=e(94451),O=e(42298),g=e(81962),M="[object String]";function C(E){return typeof E=="string"||!O(E)&&g(E)&&r(E)==M}ee.exports=C},74937:(ee,i,e)=>{var r=e(9087),O=e(43346),g=e(57279);function M(C,E){var L={};return E=g(E,3),O(C,function(T,P,N){r(L,P,E(T,P,N))}),L}ee.exports=M},63955:(ee,i,e)=>{var r=e(25125),O=e(65962),g=O(function(M,C,E){r(M,C,E)});ee.exports=g},9094:(ee,i,e)=>{var r=e(25125),O=e(65962),g=O(function(M,C,E,L){r(M,C,E,L)});ee.exports=g},76175:(ee,i,e)=>{var r=e(65602),O=e(57279),g=e(88582),M=e(72979);function C(E,L){if(E==null)return{};var T=r(M(E),function(P){return[P]});return L=O(L),g(E,T,function(P,N){return L(P,N[0])})}ee.exports=C},39189:(ee,i,e)=>{var r=e(28498),O=e(45840),g=e(34060),M=e(6208);function C(E){return g(E)?r(M(E)):O(E)}ee.exports=C},31536:(ee,i,e)=>{var r=e(79524),O=r();ee.exports=O},59788:(ee,i,e)=>{var r=e(92901),O=e(99382),g=e(77118),M=e(66408);function C(E,L,T){return(T?O(E,L,T):L===void 0)?L=1:L=g(L),r(M(E),L)}ee.exports=C},94738:(ee,i,e)=>{var r=e(9906),O=e(44855),g=e(77118),M=e(66408);function C(E,L,T){return E=M(E),T=T==null?0:r(g(T),0,E.length),L=O(L),E.slice(T,T+L.length)==L}ee.exports=C},3351:(ee,i,e)=>{var r=e(17806),O=1/0,g=17976931348623157e292;function M(C){if(!C)return C===0?C:0;if(C=r(C),C===O||C===-O){var E=C<0?-1:1;return E*g}return C===C?C:0}ee.exports=M},77118:(ee,i,e)=>{var r=e(3351);function O(g){var M=r(g),C=M%1;return M===M?C?M-C:M:0}ee.exports=O},95549:(ee,i,e)=>{var r=e(2701),O=e(56941);function g(M){return r(M,O(M))}ee.exports=g},74114:(ee,i,e)=>{var r=e(95163),O=e(65555);function g(M){return M==null?[]:r(M,O(M))}ee.exports=g},58750:function(ee){(function(e,r){ee.exports=r()})(this,function(){return function(i){var e={};function r(O){if(e[O])return e[O].exports;var g=e[O]={i:O,l:!1,exports:{}};return i[O].call(g.exports,g,g.exports,r),g.l=!0,g.exports}return r.m=i,r.c=e,r.d=function(O,g,M){r.o(O,g)||Object.defineProperty(O,g,{configurable:!1,enumerable:!0,get:M})},r.n=function(O){var g=O&&O.__esModule?function(){return O.default}:function(){return O};return r.d(g,"a",g),g},r.o=function(O,g){return Object.prototype.hasOwnProperty.call(O,g)},r.p="",r(r.s=3)}([function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function O(M,C){var E={},L=M||"Abstract",T=[],P=null,N;if(E._type=L,E.getType=function(){return L},E.setType=function(A){L=A},E.getChildren=function(){return T},E.addChild=function(A){if(A){if(!A.setParent)throw{name:"Error",message:"Trying to add a child which is not a node: "+JSON.stringify(A)};A.setParent(E),T.push(A)}},E.getParent=function(){return P},E.setParent=function(A){P=A},E.getContext=function(A){return N||A.activeContext.peek()},E.setContext=function(A){N=A},E.getStartPosition=function(){return C>>16},E.getEndPosition=function(){return C&65535},E.getValue=function(){throw{name:"MethodNotImplementedException",message:"SpelNode#getValue() must be overridden."}},E.toString=function(){var A="Kind: "+E.getType();A+=", Children: [";for(var U=0,I=E.getChildren().length;U<I;U+=1)A+="{"+E.getChildren()[U]+"}, ";return A+="]",A},C===0)throw{name:"Error",message:"Position cannot be 0"};for(var S=arguments.length,D=Array(S>2?S-2:0),b=2;b<S;b++)D[b-2]=arguments[b];return D&&D.forEach(function(A){E.addChild(A)}),E}var g=e.SpelNode={create:O}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stack=O;function O(g){this.elements=g||[]}O.prototype.push=function(g){return this.elements.push(g),g},O.prototype.pop=function(){return this.elements.pop()},O.prototype.peek=function(){return this.elements[this.elements.length-1]},O.prototype.empty=function(){return this.elements.length>0},O.prototype.search=function(g){return this.elements.length-this.elements.indexOf(g)}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var O={LITERAL_INT:1,LITERAL_LONG:2,LITERAL_HEXINT:3,LITERAL_HEXLONG:4,LITERAL_STRING:5,LITERAL_REAL:6,LITERAL_REAL_FLOAT:7,LPAREN:"(",RPAREN:")",COMMA:",",IDENTIFIER:0,COLON:":",HASH:"#",RSQUARE:"]",LSQUARE:"[",LCURLY:"{",RCURLY:"}",DOT:".",PLUS:"+",STAR:"*",MINUS:"-",SELECT_FIRST:"^[",SELECT_LAST:"$[",QMARK:"?",PROJECT:"![",DIV:"/",GE:">=",GT:">",LE:"<=",LT:"<",EQ:"==",NE:"!=",MOD:"%",NOT:"!",ASSIGN:"=",INSTANCEOF:"instanceof",MATCHES:"matches",BETWEEN:"between",SELECT:"?[",POWER:"^",ELVIS:"?:",SAFE_NAVI:"?.",BEAN_REF:"@",SYMBOLIC_OR:"||",SYMBOLIC_AND:"&&",INC:"++",DEC:"--"};function g(C){this.type=C,this.tokenChars=O[C],this._hasPayload=typeof O[C]!="string",typeof O[C]=="number"&&(this._ordinal=O[C])}for(var M in O)O.hasOwnProperty(M)&&(g[M]=new g(M));g.prototype.toString=function(){return this.type+(this.tokenChars.length!==0?"("+this.tokenChars+")":"")},g.prototype.getLength=function(){return this.tokenChars.length},g.prototype.hasPayload=function(){return this._hasPayload},g.prototype.valueOf=function(C){for(var E in O)if(O.hasOwnProperty(E)&&O[E]===C)return g[E]},g.prototype.ordinal=function(){return this._ordinal},e.TokenKind=g},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandardContext=e.SpelExpressionEvaluator=void 0;var O=r(4),g=r(50);e.SpelExpressionEvaluator=O.SpelExpressionEvaluator,e.StandardContext=g.StandardContext},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpelExpressionEvaluator=void 0;var O=r(5),g=r(1),M={};function C(E,L,T){var P=new g.Stack,N;return L||(L={}),P.push(L),N={rootContext:L,activeContext:P,locals:T},E.getValue(N)}M.compile=function(E){var L=(0,O.SpelExpressionParser)().parse(E);return{eval:function(P,N){return C(L,P,N)},_compiledExpression:L}},M.eval=function(E,L,T){return M.compile(E).eval(L,T)},e.SpelExpressionEvaluator=M},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpelExpressionParser=void 0;var O=r(2),g=r(6),M=r(8),C=r(9),E=r(10),L=r(11),T=r(12),P=r(13),N=r(14),S=r(15),D=r(16),b=r(17),A=r(18),U=r(19),I=r(20),$=r(21),w=r(22),V=r(23),G=r(24),K=r(25),H=r(26),_=r(27),te=r(28),J=r(29),k=r(30),R=r(31),m=r(32),s=r(33),c=r(34),o=r(35),u=r(36),l=r(37),f=r(38),v=r(39),h=r(40),a=r(41),n=r(42),y=r(43),p=r(44),F=r(45),B=r(46),Z=r(47),X=r(48),j=r(49),z=e.SpelExpressionParser=function(){var Y=new RegExp("[\\p{L}\\p{N}_$]+"),re,ne=[],ae,ie,de,se;function ge(le){re=le}function ye(le,me){try{ae=le,ie=g.Tokenizer.tokenize(le),de=ie.length,se=0,ne=[];var we=Ee();return Be()&&je(et().startPos,"MORE_INPUT",Ge().toString()),we}catch(it){throw it.message}}function Ee(){var le=Te();if(Be()){var me=et();if(me.getKind()===O.TokenKind.ASSIGN){le===null&&(le=L.NullLiteral.create(St(me.startPos-1,me.endPos-1))),Ge();var we=Te();return A.Assign.create(_e(me),le,we)}if(me.getKind()===O.TokenKind.ELVIS){le===null&&(le=L.NullLiteral.create(St(me.startPos-1,me.endPos-2))),Ge();var it=Ee();return it===null&&(it=L.NullLiteral.create(St(me.startPos+1,me.endPos+1))),f.Elvis.create(_e(me),le,it)}if(me.getKind()===O.TokenKind.QMARK){le===null&&(le=L.NullLiteral.create(St(me.startPos-1,me.endPos-1))),Ge();var Ot=Ee();Ie(O.TokenKind.COLON);var Lt=Ee();return l.Ternary.create(_e(me),le,Ot,Lt)}}return le}function Te(){for(var le=he();ft("or")||Ye(O.TokenKind.SYMBOLIC_OR);){var me=Ge(),we=he();gt(me,le,we),le=o.OpOr.create(_e(me),le,we)}return le}function he(){for(var le=Le();ft("and")||Ye(O.TokenKind.SYMBOLIC_AND);){var me=Ge(),we=Le();gt(me,le,we),le=c.OpAnd.create(_e(me),le,we)}return le}function Le(){var le=Fe(),me=Ke();if(me!==null){var we=Ge(),it=Fe();gt(we,le,it);var Ot=me.kind;if(me.isNumericRelationalOperator()){var Lt=_e(we);return Ot===O.TokenKind.GT?w.OpGT.create(Lt,le,it):Ot===O.TokenKind.LT?G.OpLT.create(Lt,le,it):Ot===O.TokenKind.LE?V.OpLE.create(Lt,le,it):Ot===O.TokenKind.GE?$.OpGE.create(Lt,le,it):Ot===O.TokenKind.EQ?U.OpEQ.create(Lt,le,it):I.OpNE.create(Lt,le,it)}return Ot===O.TokenKind.INSTANCEOF?y.OpInstanceof.create(_e(we),le,it):Ot===O.TokenKind.MATCHES?u.OpMatches.create(_e(we),le,it):p.OpBetween.create(_e(we),le,it)}return le}function Fe(){for(var le=We();tt(O.TokenKind.PLUS,O.TokenKind.MINUS,O.TokenKind.INC);){var me=Ge(),we=We();pt(me,we),me.getKind()===O.TokenKind.PLUS?le=K.OpPlus.create(_e(me),le,we):me.getKind()===O.TokenKind.MINUS&&(le=H.OpMinus.create(_e(me),le,we))}return le}function We(){for(var le=Ue();tt(O.TokenKind.STAR,O.TokenKind.DIV,O.TokenKind.MOD);){var me=Ge(),we=Ue();gt(me,le,we),me.getKind()===O.TokenKind.STAR?le=_.OpMultiply.create(_e(me),le,we):me.getKind()===O.TokenKind.DIV?le=te.OpDivide.create(_e(me),le,we):le=J.OpModulus.create(_e(me),le,we)}return le}function Ue(){var le=He(),me;if(Ye(O.TokenKind.POWER)){me=Ge();var we=He();return pt(me,we),k.OpPower.create(_e(me),le,we)}return le!==null&&tt(O.TokenKind.INC,O.TokenKind.DEC)?(me=Ge(),me.getKind()===O.TokenKind.INC?R.OpInc.create(_e(me),!0,le):m.OpDec.create(_e(me),!0,le)):le}function He(){var le,me;return tt(O.TokenKind.PLUS,O.TokenKind.MINUS,O.TokenKind.NOT)?(le=Ge(),me=He(),le.getKind()===O.TokenKind.NOT?s.OpNot.create(_e(le),me):le.getKind()===O.TokenKind.PLUS?K.OpPlus.create(_e(le),me):H.OpMinus.create(_e(le),me)):tt(O.TokenKind.INC,O.TokenKind.DEC)?(le=Ge(),me=He(),le.getKind()===O.TokenKind.INC?R.OpInc.create(_e(le),!1,me):m.OpDec.create(_e(le),!1,me)):ke()}function ke(){var le=[],me=De();for(le.push(me);qe();)le.push(Pe());return le.length===1?le[0]:D.CompoundExpression.create(St(me.getStartPosition(),le[le.length-1].getEndPosition()),le)}function qe(){var le=null;return tt(O.TokenKind.DOT,O.TokenKind.SAFE_NAVI)?le=fe():le=ze(),le===null?!1:(ce(le),!0)}function ze(){return Ye(O.TokenKind.LSQUARE)&&st()?Pe():null}function fe(){var le=Ge(),me=le.getKind()===O.TokenKind.SAFE_NAVI;return yt(me)||Oe()||Qe(me)||Je(me)?Pe():(et()===null?je(le.startPos,"OOD"):je(le.startPos,"UNEXPECTED_DATA_AFTER_DOT",vt(et())),null)}function Oe(){if(!Ye(O.TokenKind.HASH))return!1;var le=Ge(),me=Ie(O.TokenKind.IDENTIFIER),we=Re();return we===null?(ce(S.VariableReference.create(me.data,St(le.startPos,me.endPos))),!0):(ce(T.FunctionReference.create(me.data,St(le.startPos,me.endPos),we)),!0)}function Re(){if(!Ye(O.TokenKind.LPAREN))return null;var le=[];return be(le),Ie(O.TokenKind.RPAREN),le}function Ae(le){Ye(O.TokenKind.LPAREN)||je(_e(et()),"MISSING_CONSTRUCTOR_ARGS"),be(le),Ie(O.TokenKind.RPAREN)}function be(le){var me=et().startPos,we;do{Ge();var it=et();it===null&&je(me,"RUN_OUT_OF_ARGUMENTS"),it.getKind()!==O.TokenKind.RPAREN&&le.push(Ee()),we=et()}while(we!==null&&we.kind===O.TokenKind.COMMA);we===null&&je(me,"RUN_OUT_OF_ARGUMENTS")}function Ve(le){return le===null?ae.length:le.startPos}function De(){return Me()||xe()||at()||ut()||ve()||yt(!1)||Oe()||$e()||Qe(!1)||Je(!1)||st()||ot()?Pe():null}function $e(){if(Ye(O.TokenKind.BEAN_REF)){var le=Ge(),me=null,we=null;Ye(O.TokenKind.IDENTIFIER)?(me=Ie(O.TokenKind.IDENTIFIER),we=me.data):Ye(O.TokenKind.LITERAL_STRING)?(me=Ie(O.TokenKind.LITERAL_STRING),we=me.stringValue(),we=we.substring(1,we.length()-1)):je(le.startPos,"INVALID_BEAN_REFERENCE");var it=B.BeanReference.create(_e(me),we);return ce(it),!0}return!1}function at(){if(Ye(O.TokenKind.IDENTIFIER)){var le=et();if(le.stringValue()!=="T")return!1;var me=Ge();if(Ye(O.TokenKind.RSQUARE))return ce(N.PropertyReference.create(me.stringValue(),_e(me))),!0;Ie(O.TokenKind.LPAREN);for(var we=dt(),it=0;nt(O.TokenKind.LSQUARE,!0);)Ie(O.TokenKind.RSQUARE),it++;return Ie(O.TokenKind.RPAREN),ce(F.TypeReference.create(_e(le),we,it)),!0}return!1}function ut(){if(Ye(O.TokenKind.IDENTIFIER)){var le=et();return le.stringValue().toLowerCase()!=="null"?!1:(Ge(),ce(L.NullLiteral.create(_e(le))),!0)}return!1}function Qe(le){var me=et();if(!nt(O.TokenKind.PROJECT,!0))return!1;var we=Ee();return Ie(O.TokenKind.RSQUARE),ce(n.Projection.create(le,_e(me),we)),!0}function ot(){var le=et(),me=[];if(!nt(O.TokenKind.LCURLY,!0))return!1;var we=null,it=et();if(nt(O.TokenKind.RCURLY,!0))we=v.InlineList.create(St(le.startPos,it.endPos));else if(nt(O.TokenKind.COLON,!0))it=Ie(O.TokenKind.RCURLY),we=h.InlineMap.create(St(le.startPos,it.endPos));else{var Ot=Ee();if(Ye(O.TokenKind.RCURLY))me.push(Ot),it=Ie(O.TokenKind.RCURLY),we=v.InlineList.create(St(le.startPos,it.endPos),me);else if(nt(O.TokenKind.COMMA,!0)){me.push(Ot);do me.push(Ee());while(nt(O.TokenKind.COMMA,!0));it=Ie(O.TokenKind.RCURLY),we=v.InlineList.create(_e(le.startPos,it.endPos),me)}else if(nt(O.TokenKind.COLON,!0)){var Lt=[];for(Lt.push(Ot),Lt.push(Ee());nt(O.TokenKind.COMMA,!0);)Lt.push(Ee()),Ie(O.TokenKind.COLON),Lt.push(Ee());it=Ie(O.TokenKind.RCURLY),we=h.InlineMap.create(St(le.startPos,it.endPos),Lt)}else je(le.startPos,"OOD")}return ce(we),!0}function st(){var le=et();if(!nt(O.TokenKind.LSQUARE,!0))return!1;var me=Ee();return Ie(O.TokenKind.RSQUARE),ce(b.Indexer.create(_e(le),me)),!0}function Je(le){var me=et();if(!Ze())return!1;Ge();var we=Ee();return we===null&&je(_e(me),"MISSING_SELECTION_EXPRESSION"),Ie(O.TokenKind.RSQUARE),me.getKind()===O.TokenKind.SELECT_FIRST?ce(a.Selection.create(le,a.Selection.FIRST,_e(me),we)):me.getKind()===O.TokenKind.SELECT_LAST?ce(a.Selection.create(le,a.Selection.LAST,_e(me),we)):ce(a.Selection.create(le,a.Selection.ALL,_e(me),we)),!0}function dt(){for(var le=[],me=et();mt(me);)Ge(),me.kind!==O.TokenKind.DOT&&le.push(Z.Identifier.create(me.stringValue(),_e(me))),me=et();le.length||(me===null&&je(ae.length(),"OOD"),je(me.startPos,"NOT_EXPECTED_TOKEN","qualified ID",me.getKind().toString().toLowerCase()));var we=St(le[0].getStartPosition(),le[le.length-1].getEndPosition());return X.QualifiedIdentifier.create(we,le)}function mt(le){if(le===null||le.kind===O.TokenKind.LITERAL_STRING)return!1;if(le.kind===O.TokenKind.DOT||le.kind===O.TokenKind.IDENTIFIER)return!0;var me=le.stringValue();return me&&me.length&&Y.test(me)}function yt(le){if(Ye(O.TokenKind.IDENTIFIER)){var me=Ge(),we=Re();return we===null?(ce(N.PropertyReference.create(le,me.stringValue(),_e(me))),!0):(ce(P.MethodReference.create(le,me.stringValue(),_e(me),we)),!0)}return!1}function ve(){if(ft("new")){var le=Ge();if(Ye(O.TokenKind.RSQUARE))return ce(N.PropertyReference.create(le.stringValue(),_e(le))),!0;var me=dt(),we=[];if(we.push(me),Ye(O.TokenKind.LSQUARE)){for(var it=[];nt(O.TokenKind.LSQUARE,!0);)Ye(O.TokenKind.RSQUARE)?it.push(null):it.push(Ee()),Ie(O.TokenKind.RSQUARE);ot()&&we.push(Pe()),ce(j.ConstructorReference.create(_e(le),it,we))}else Ae(we),ce(j.ConstructorReference.create(_e(le),we));return!0}return!1}function ce(le){ne.push(le)}function Pe(){return ne.pop()}function Me(){var le=et();if(le===null)return!1;if(le.getKind()===O.TokenKind.LITERAL_INT||le.getKind()===O.TokenKind.LITERAL_LONG)ce(C.NumberLiteral.create(parseInt(le.stringValue(),10),_e(le)));else if(le.getKind()===O.TokenKind.LITERAL_REAL||le.getKind()===O.TokenKind.LITERAL_REAL_FLOAT)ce(C.NumberLiteral.create(parseFloat(le.stringValue()),_e(le)));else if(le.getKind()===O.TokenKind.LITERAL_HEXINT||le.getKind()===O.TokenKind.LITERAL_HEXLONG)ce(C.NumberLiteral.create(parseInt(le.stringValue(),16),_e(le)));else if(ft("true"))ce(M.BooleanLiteral.create(!0,_e(le)));else if(ft("false"))ce(M.BooleanLiteral.create(!1,_e(le)));else if(le.getKind()===O.TokenKind.LITERAL_STRING)ce(E.StringLiteral.create(le.stringValue(),_e(le)));else return!1;return Ge(),!0}function xe(){if(Ye(O.TokenKind.LPAREN)){Ge();var le=Ee();return Ie(O.TokenKind.RPAREN),ce(le),!0}else return!1}function Ke(){var le=et();if(le===null)return null;if(le.isNumericRelationalOperator())return le;if(le.isIdentifier()){var me=le.stringValue();if(me.toLowerCase()==="instanceof")return le.asInstanceOfToken();if(me.toLowerCase()==="matches")return le.asMatchesToken();if(me.toLowerCase()==="between")return le.asBetweenToken()}return null}function Ie(le){var me=Ge();return me===null&&je(ae.length,"OOD"),me.getKind()!==le&&je(me.startPos,"NOT_EXPECTED_TOKEN",le.toString().toLowerCase(),me.getKind().toString().toLowerCase()),me}function Ye(le){return nt(le,!1)}function nt(le,me){if(!Be())return!1;var we=et();return we.getKind()===le?(me&&se++,!0):le===O.TokenKind.IDENTIFIER&&we.getKind().ordinal()>=O.TokenKind.DIV.ordinal()&&we.getKind().ordinal()<=O.TokenKind.NOT.ordinal()&&we.data!==null}function tt(){if(!Be())return!1;for(var le=et(),me=Array.prototype.slice.call(arguments),we=0,it=me.length;we<it;we+=1)if(le.getKind()===me[we])return!0;return!1}function ft(le){if(!Be())return!1;var me=et();return me.getKind()===O.TokenKind.IDENTIFIER&&me.stringValue().toLowerCase()===le.toLowerCase()}function Ze(){if(!Be())return!1;var le=et();return le.getKind()===O.TokenKind.SELECT||le.getKind()===O.TokenKind.SELECT_FIRST||le.getKind()===O.TokenKind.SELECT_LAST}function Be(){return se<ie.length}function Ge(){return se>=de?null:ie[se++]}function et(){return se>=de?null:ie[se]}function je(le,me,we,it){throw we&&(me+=`
Expected: `+we),it&&(me+=`
Actual: `+it),{name:"InternalParseException",message:"Error occurred while attempting to parse expression '"+ae+"' at position "+le+". Message: "+me}}function vt(le){return le.getKind().hasPayload()?le.stringValue():le.getKind().toString().toLowerCase()}function gt(le,me,we){lt(le,me),pt(le,we)}function lt(le,me){me===null&&je(le.startPos,"LEFT_OPERAND_PROBLEM")}function pt(le,me){me===null&&je(le.startPos,"RIGHT_OPERAND_PROBLEM")}function _e(le){return(le.startPos<<16)+le.endPos}function St(le,me){return(le<<16)+me}return{setConfiguration:ge,parse:ye}}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tokenizer=void 0;var O=r(7),g=r(2),M=["DIV","EQ","GE","GT","LE","LT","MOD","NE","NOT"],C=[],E=1,L=2,T=4;function P(){var D;for(D="0".charCodeAt(0);D<="9".charCodeAt(0);D+=1)C[D]|=E|L;for(D="A".charCodeAt(0);D<="F".charCodeAt(0);D+=1)C[D]|=L;for(D="a".charCodeAt(0);D<="f".charCodeAt(0);D+=1)C[D]|=L;for(D="A".charCodeAt(0);D<="Z".charCodeAt(0);D+=1)C[D]|=T;for(D="a".charCodeAt(0);D<="z".charCodeAt(0);D+=1)C[D]|=T}P();function N(D){var b=D,A=D+"\0",U=A.length,I=0,$=[];function w(){for(var p;I<U;)if(p=A[I],n(p))H();else switch(p){case"+":R(g.TokenKind.INC)?s(g.TokenKind.INC):m(g.TokenKind.PLUS);break;case"_":H();break;case"-":R(g.TokenKind.DEC)?s(g.TokenKind.DEC):m(g.TokenKind.MINUS);break;case":":m(g.TokenKind.COLON);break;case".":m(g.TokenKind.DOT);break;case",":m(g.TokenKind.COMMA);break;case"*":m(g.TokenKind.STAR);break;case"/":m(g.TokenKind.DIV);break;case"%":m(g.TokenKind.MOD);break;case"(":m(g.TokenKind.LPAREN);break;case")":m(g.TokenKind.RPAREN);break;case"[":m(g.TokenKind.LSQUARE);break;case"#":m(g.TokenKind.HASH);break;case"]":m(g.TokenKind.RSQUARE);break;case"{":m(g.TokenKind.LCURLY);break;case"}":m(g.TokenKind.RCURLY);break;case"@":m(g.TokenKind.BEAN_REF);break;case"^":R(g.TokenKind.SELECT_FIRST)?s(g.TokenKind.SELECT_FIRST):m(g.TokenKind.POWER);break;case"!":R(g.TokenKind.NE)?s(g.TokenKind.NE):R(g.TokenKind.PROJECT)?s(g.TokenKind.PROJECT):m(g.TokenKind.NOT);break;case"=":R(g.TokenKind.EQ)?s(g.TokenKind.EQ):m(g.TokenKind.ASSIGN);break;case"&":if(!R(g.TokenKind.SYMBOLIC_AND))throw{name:"SpelParseException",message:"Missing character '&' in expression ("+b+") at position "+I};s(g.TokenKind.SYMBOLIC_AND);break;case"|":if(!R(g.TokenKind.SYMBOLIC_OR))throw{name:"SpelParseException",message:"Missing character '|' in expression ("+b+") at position "+I};s(g.TokenKind.SYMBOLIC_OR);break;case"?":R(g.TokenKind.SELECT)?s(g.TokenKind.SELECT):R(g.TokenKind.ELVIS)?s(g.TokenKind.ELVIS):R(g.TokenKind.SAFE_NAVI)?s(g.TokenKind.SAFE_NAVI):m(g.TokenKind.QMARK);break;case"$":R(g.TokenKind.SELECT_LAST)?s(g.TokenKind.SELECT_LAST):H();break;case">":R(g.TokenKind.GE)?s(g.TokenKind.GE):m(g.TokenKind.GT);break;case"<":R(g.TokenKind.LE)?s(g.TokenKind.LE):m(g.TokenKind.LT);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":K(p==="0");break;case" ":case"	":case"\r":case`
`:I+=1;break;case"'":V();break;case'"':G();break;case"\0":I+=1;break;case"\\":throw{name:"SpelParseException",message:"Unexpected escape character in expression ("+b+") at position "+I};default:throw{name:"SpelParseException",message:"Cannot handle character '"+p+"' in expression ("+b+") at position "+I}}}function V(){for(var p=I,F=!1,B;!F;)if(I+=1,B=A[I],B==="'"&&(A[I+1]==="'"?I+=1:F=!0),B.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating quoted string in expression ("+b+") at position "+I};I+=1,$.push(new O.Token(g.TokenKind.LITERAL_STRING,k(p,I),p,I))}function G(){for(var p=I,F=!1,B;!F;)if(I+=1,B=A[I],B==='"'&&(A[I+1]==='"'?I+=1:F=!0),B.charCodeAt(0)===0)throw{name:"SpelParseException",message:"Non-terminating double-quoted string in expression ("+b+") at position "+I};I+=1,$.push(new O.Token(g.TokenKind.LITERAL_STRING,k(p,I),p,I))}function K(p){var F=!1,B=I,Z=A[I+1],X=Z==="x"||Z==="X",j,z,x,Y;if(p&&X){I=I+1;do I+=1;while(y(A[I]));u("L","l")?(te(k(B+2,I),!0,B,I),I+=1):te(k(B+2,I),!1,B,I);return}do I+=1;while(a(A[I]));if(Z=A[I],Z==="."){F=!0,j=I;do I+=1;while(a(A[I]));if(I===j+1){I=j,_(k(B,I),!1,B,I);return}}if(z=I,u("L","l")){if(F)throw{name:"SpelParseException",message:"Real cannot be long in expression ("+b+") at position "+I};_(k(B,z),!0,B,z),I+=1}else if(l(A[I])){F=!0,I+=1,x=A[I],h(x)&&(I+=1);do I+=1;while(a(A[I]));Y=!1,f(A[I])?(Y=!0,I+=1,z=I):v(A[I])&&(I+=1,z=I),J(k(B,I),Y,B,I)}else Z=A[I],Y=!1,f(Z)?(F=!0,Y=!0,I+=1,z=I):v(Z)&&(F=!0,I+=1,z=I),F?J(k(B,z),Y,B,z):_(k(B,z),!1,B,z)}function H(){var p=I,F,B,Z;do I+=1;while(o(A[I]));if(F=k(p,I),(I-p===2||I-p===3)&&(B=F.toUpperCase(),Z=M.indexOf(B),Z>=0)){c(g.TokenKind.valueOf(B),p,F);return}$.push(new O.Token(g.TokenKind.IDENTIFIER,F.replace("\0",""),p,I))}function _(p,F,B,Z){F?$.push(new O.Token(g.TokenKind.LITERAL_LONG,p,B,Z)):$.push(new O.Token(g.TokenKind.LITERAL_INT,p,B,Z))}function te(p,F,B,Z){if(p.length===0)throw F?{name:"SpelParseException",message:"Not a long in expression ("+b+") at position "+I}:{name:"SpelParseException",message:"Not an int in expression ("+b+") at position "+I};F?$.push(new O.Token(g.TokenKind.LITERAL_HEXLONG,p,B,Z)):$.push(new O.Token(g.TokenKind.LITERAL_HEXINT,p,B,Z))}function J(p,F,B,Z){F?$.push(new O.Token(g.TokenKind.LITERAL_REAL_FLOAT,p,B,Z)):$.push(new O.Token(g.TokenKind.LITERAL_REAL,p,B,Z))}function k(p,F){return A.substring(p,F)}function R(p){return p.tokenChars.length===2&&A[I]===p.tokenChars[0]?A[I+1]===p.tokenChars[1]:!1}function m(p){$.push(new O.Token(p,null,I,I+1)),I+=1}function s(p){$.push(new O.Token(p,null,I,I+2)),I+=2}function c(p,F,B){$.push(new O.Token(p,B,F,F+p.getLength()))}function o(p){return n(p)||a(p)||p==="_"||p==="$"}function u(p,F){var B=A[I];return B===p||B===F}function l(p){return p==="e"||p==="E"}function f(p){return p==="f"||p==="F"}function v(p){return p==="d"||p==="D"}function h(p){return p==="+"||p==="-"}function a(p){return p.charCodeAt(0)>255?!1:(C[p.charCodeAt(0)]&E)!==0}function n(p){return p.charCodeAt(0)>255?!1:(C[p.charCodeAt(0)]&T)!==0}function y(p){return p.charCodeAt(0)>255?!1:(C[p.charCodeAt(0)]&L)!==0}return w(),$}var S=e.Tokenizer={tokenize:N}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Token=void 0;var O=r(2);function g(M,C,E,L){this.kind=M,this.startPos=E,this.endPos=L,C&&(this.data=C)}g.prototype.getKind=function(){return this.kind},g.prototype.toString=function(){var M="[";return M+=this.kind.toString(),this.kind.hasPayload()&&(M+=":"+this.data),M+="]",M+="("+this.startPos+","+this.endPos+")",M},g.prototype.isIdentifier=function(){return this.kind===O.TokenKind.IDENTIFIER},g.prototype.isNumericRelationalOperator=function(){return this.kind===O.TokenKind.GT||this.kind===O.TokenKind.GE||this.kind===O.TokenKind.LT||this.kind===O.TokenKind.LE||this.kind===O.TokenKind.EQ||this.kind===O.TokenKind.NE},g.prototype.stringValue=function(){return this.data},g.prototype.asInstanceOfToken=function(){return new g(O.TokenKind.INSTANCEOF,this.startPos,this.endPos)},g.prototype.asMatchesToken=function(){return new g(O.TokenKind.MATCHES,this.startPos,this.endPos)},g.prototype.asBetweenToken=function(){return new g(O.TokenKind.BETWEEN,this.startPos,this.endPos)},g.prototype.getStartPosition=function(){return this.startPos},g.prototype.getEndPosition=function(){return this.endPos},e.Token=g},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanLiteral=void 0;var O=r(0);function g(C,E){var L=O.SpelNode.create("boolean",E);return L.getValue=function(){return C},L.setValue=function(T){return C=T},L}var M=e.BooleanLiteral={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumberLiteral=void 0;var O=r(0);function g(C,E){var L=O.SpelNode.create("number",E);return L.getValue=function(){return C},L.setValue=function(T){return C=T},L}var M=e.NumberLiteral={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringLiteral=void 0;var O=r(0);function g(C,E){var L=O.SpelNode.create("string",E);function T(P){return(P[0]==="'"&&P[P.length-1]==="'"||P[0]==='"'&&P[P.length-1]==='"')&&(P=P.substring(1,P.length-1)),P.replace(/''/g,"'").replace(/""/g,'"')}return C=T(C),L.getValue=function(){return C},L.setValue=function(P){return C=P},L}var M=e.StringLiteral={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NullLiteral=void 0;var O=r(0);function g(C,E){var L=O.SpelNode.create("null",E);return L.getValue=function(){return null},L}var M=e.NullLiteral={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionReference=void 0;var O=r(0),g=r(1);function M(E,L,T){var P=O.SpelNode.create("function",L);return P.getRaw=function(){return{functionName:E,args:T}},P.getValue=function(N){var S=N.locals||{},D=N.rootContext,b=[];if(T.forEach(function(A){var U=N.activeContext;N.activeContext=new g.Stack,N.activeContext.push(N.rootContext),b.push(A.getValue(N)),N.activeContext=U}),S[E])return S[E].apply(D,b);throw{name:"FunctionDoesNotExistException",message:"Function '"+E+"' does not exist."}},P}var C=e.FunctionReference={create:M}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MethodReference=void 0;var O=r(0),g=r(1);function M(E,L,T,P){var N=O.SpelNode.create("method",T);return N.getRaw=function(){return{methodName:L,args:P}},N.getValue=function(S){var D=S.activeContext.peek(),b=[],A;if(!D)throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+L+"' for an undefined context."};function U(I){if(I==null){if(E)return null;throw{name:"NullPointerException",message:"Method "+L+" does not exist."}}return I}if(P.forEach(function(I){var $=S.activeContext;S.activeContext=new g.Stack,S.activeContext.push(S.rootContext),b.push(I.getValue(S)),S.activeContext=$}),L.substr(0,3)==="get"&&!D[L])return U(D[L.charAt(3).toLowerCase()+L.substring(4)]);if(L.substr(0,3)==="set"&&!D[L])return D[L.charAt(3).toLowerCase()+L.substring(4)]=b[0];if(Array.isArray(D)){if(L==="size")return D.length;if(L==="contains")return D.includes(b[0])}return A=U(D[L]),A?A.apply(D,b):null},N}var C=e.MethodReference={create:M}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyReference=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("property",L);return T.getRaw=function(){return E},T.getValue=function(P){var N=P.activeContext.peek();if(!N){if(C)return null;throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+E+"' for an undefined context."}}if(N[E]===void 0||N[E]===null){if(C)return null;if(E==="size"&&Array.isArray(N))return N.length;throw{name:"NullPointerException",message:"Property '"+E+"' does not exist."}}return N[E]},T.setValue=function(P,N){var S=N.activeContext.peek();if(!S)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+E+"' for an undefined context."};return S[E]=P},T.getName=function(){return E},T}var M=e.PropertyReference={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VariableReference=void 0;var O=r(0);function g(C,E){var L=O.SpelNode.create("variable",E);return L.getRaw=function(){return C},L.getValue=function(T){var P=T.activeContext.peek(),N=T.locals;if(!P)throw{name:"ContextDoesNotExistException",message:"Attempting to look up variable '"+C+"' for an undefined context."};return C==="this"?P:C==="root"?T.rootContext:N[C]},L.setValue=function(T,P){var N=P.locals;return N[C]=T},L}var M=e.VariableReference={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompoundExpression=void 0;var O=r(0);function g(C,E){var L=O.SpelNode.create.apply(null,["compound",C].concat(E));function T(P){var N=L.getChildren().length,S;for(S=0;S<N;S+=1)L.getChildren()[S].getType()==="indexer"?P.activeContext.push(P.activeContext.peek()[L.getChildren()[S].getValue(P)]):P.activeContext.push(L.getChildren()[S].getValue(P));return function(){for(S=0;S<N;S+=1)P.activeContext.pop()}}return L.getValue=function(P){var N=P.activeContext.peek(),S;if(!N)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};var D=T(P);return S=P.activeContext.peek(),D(),S},L.setValue=function(P,N){var S=T(N),D=L.getChildren().length;return N.activeContext.pop(),P=L.getChildren()[D-1].setValue(P,N),N.activeContext.push(null),S(),P},L}var M=e.CompoundExpression={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Indexer=void 0;var O=r(0),g=r(1);function M(E,L){var T=O.SpelNode.create.apply(null,["indexer",E].concat(L));return T.getValue=function(P){var N=P.activeContext,S,D=T.getChildren().length,b,A;if(P.activeContext=new g.Stack,P.activeContext.push(P.rootContext),S=P.activeContext.peek(),!S)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};for(b=0;b<D;b+=1)P.activeContext.push(T.getChildren()[b].getValue(P));for(A=P.activeContext.peek(),b=0;b<D;b+=1)P.activeContext.pop();return P.activeContext=N,A},T}var C=e.Indexer={create:M}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Assign=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("assign",C,E,L);return T.getValue=function(P){var N=P.activeContext.peek();if(!N)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+E.getValue(P)+"' for an undefined context."};return E.setValue(L.getValue(P),P)},T}var M=e.Assign={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpEQ=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-eq",C,E,L);return T.getValue=function(P){return E.getValue(P)===L.getValue(P)},T}var M=e.OpEQ={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpNE=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-ne",C,E,L);return T.getValue=function(P){return E.getValue(P)!==L.getValue(P)},T}var M=e.OpNE={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpGE=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-ge",C,E,L);return T.getValue=function(P){return E.getValue(P)>=L.getValue(P)},T}var M=e.OpGE={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpGT=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-gt",C,E,L);return T.getValue=function(P){return E.getValue(P)>L.getValue(P)},T}var M=e.OpGT={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpLE=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-le",C,E,L);return T.getValue=function(P){return E.getValue(P)<=L.getValue(P)},T}var M=e.OpLE={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpLT=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-lt",C,E,L);return T.getValue=function(P){return E.getValue(P)<L.getValue(P)},T}var M=e.OpLT={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpPlus=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-plus",C,E,L);return T.getValue=function(P){return L?E.getValue(P)+L.getValue(P):+E.getValue(P)},T}var M=e.OpPlus={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMinus=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-minus",C,E,L);return T.getValue=function(P){return L?E.getValue(P)-L.getValue(P):-E.getValue(P)},T}var M=e.OpMinus={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMultiply=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-multiply",C,E,L);return T.getValue=function(P){var N=E.getValue(P),S=L.getValue(P);if(typeof N=="number"&&typeof S=="number")return N*S;if(typeof N=="string"&&typeof S=="number"){for(var D="",b=0;b<S;b+=1)D+=N;return D}return null},T}var M=e.OpMultiply={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpDivide=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-divide",C,E,L);return T.getValue=function(P){return E.getValue(P)/L.getValue(P)},T}var M=e.OpDivide={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpModulus=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-modulus",C,E,L);return T.getValue=function(P){return E.getValue(P)%L.getValue(P)},T}var M=e.OpModulus={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpPower=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-power",C,E,L);return T.getValue=function(P){return Math.pow(E.getValue(P),L.getValue(P))},T}var M=e.OpPower={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpInc=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-inc",C,L);return T.getValue=function(P){var N=L.getValue(P);return L.setValue(N+1,P),E?N:N+1},T}var M=e.OpInc={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpDec=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-dec",C,L);return T.getValue=function(P){var N=L.getValue(P);return L.setValue(N-1,P),E?N:N-1},T}var M=e.OpDec={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpNot=void 0;var O=r(0);function g(C,E){var L=O.SpelNode.create("op-not",C,E);return L.getValue=function(T){return!E.getValue(T)},L}var M=e.OpNot={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpAnd=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-and",C,E,L);return T.getValue=function(P){return!!E.getValue(P)&&!!L.getValue(P)},T}var M=e.OpAnd={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpOr=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("op-or",C,E,L);return T.getValue=function(P){return!!E.getValue(P)||!!L.getValue(P)},T}var M=e.OpOr={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpMatches=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("matches",C,E,L);return T.getValue=function(P){var N=E.getValue(P),S=L.getValue(P);try{var D=new RegExp(S);return!!D.exec(N)}catch(b){throw{name:"EvaluationException",message:b.toString()}}},T}var M=e.OpMatches={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ternary=void 0;var O=r(0);function g(C,E,L,T){var P=O.SpelNode.create("ternary",C,E,L,T);return P.getValue=function(N){return E.getValue(N)?L.getValue(N):T.getValue(N)},P}var M=e.Ternary={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Elvis=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("elvis",C,E,L);return T.getValue=function(P){return E.getValue(P)!==null?E.getValue(P):L.getValue(P)},T}var M=e.Elvis={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineList=void 0;var O=r(0);function g(C,E){var L=O.SpelNode.create("list",C),T=[].concat(E||[]);return L.getRaw=function(){return T},L.getValue=function(P){return T.map(function(N){return N.getValue(P)})},L}var M=e.InlineList={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineMap=void 0;var O=r(0);function g(C,E){var L=O.SpelNode.create("map",C),T=[].concat(E||[]);return L.getValue=function(P){var N=!0,S=null,D={};return T.forEach(function(b){N?b.getType()==="property"?S=b.getName():S=b.getValue(P):D[S]=b.getValue(P),N=!N}),D},L}var M=e.InlineMap={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Selection=void 0;var O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},g=r(0);function M(P,N,S){var D=!1;return S.activeContext.push(P),D=N.getValue(S),S.activeContext.pop(),D}function C(P,N,S,D){var b=P.filter(function(A){return M(A,S,D)});switch(N){case"ALL":return b;case"FIRST":return b[0]||null;case"LAST":return b.length?b[b.length-1]:null}}function E(P,N,S,D){var b={},A,U,I=[],$={};for(U in P)P.hasOwnProperty(U)&&(A={key:U,value:P[U]},M(A,S,D)&&I.push(A));switch(N){case"ALL":return I.forEach(function(w){b[w.key]=w.value}),b;case"FIRST":return I.length?($[I[0].key]=I[0].value,$):null;case"LAST":return I.length?($[I[I.length-1].key]=I[I.length-1].value,$):null}I.forEach(function(w){b[w.key]=w.value})}function L(P,N,S,D){var b=g.SpelNode.create("selection",S,D);return b.getValue=function(A){var U=A.activeContext.peek();if(U){if(Array.isArray(U))return C(U,N,D,A);if((typeof U>"u"?"undefined":O(U))==="object")return E(U,N,D,A)}return null},b}var T=e.Selection={create:L,FIRST:"FIRST",LAST:"LAST",ALL:"ALL"}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Projection=void 0;var O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},g=r(0);function M(L,T,P){return L.map(function(N){var S;return P.activeContext.push(N),S=T.getValue(P),P.activeContext.pop(),S})}function C(L,T,P){var N=g.SpelNode.create("projection",T,P);return N.getValue=function(S){var D=S.activeContext.peek(),b=[],A;if(Array.isArray(D))return M(D,P,S);if((typeof D>"u"?"undefined":O(D))==="object"){for(A in D)D.hasOwnProperty(A)&&b.push(D[A]);return M(b,P,S)}return null},N}var E=e.Projection={create:C}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpInstanceof=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("instanceof",C,E,L);return T.getValue=function(P){throw{name:"MethodNotImplementedException",message:"OpInstanceOf: Not implemented"}},T}var M=e.OpInstanceof={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpBetween=void 0;var O=r(0);function g(C,E,L){var T=O.SpelNode.create("between",C,E,L);return T.getValue=function(P){throw{name:"MethodNotImplementedException",message:"OpBetween: Not implemented"}},T}var M=e.OpBetween={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypeReference=void 0;var O=r(0);function g(C,T,L){var T=O.SpelNode.create("typeref",C,T);return T.getValue=function(P){throw{name:"MethodNotImplementedException",message:"TypeReference: Not implemented"}},T}var M=e.TypeReference={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BeanReference=void 0;var O=r(0);function g(C,E){var L=O.SpelNode.create("beanref",C);return L.getValue=function(T){throw{name:"MethodNotImplementedException",message:"BeanReference: Not implemented"}},L}var M=e.BeanReference={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Identifier=void 0;var O=r(0);function g(C,E){var L=O.SpelNode.create("identifier",E);return L.getRaw=function(){return C},L.getValue=function(T){throw{name:"MethodNotImplementedException",message:"Identifier: Not implemented"}},L}var M=e.Identifier={create:g}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QualifiedIdentifier=void 0;var O=r(0);function g(E){if(Array.isArray(E)){for(var L=0,T=Array(E.length);L<E.length;L++)T[L]=E[L];return T}else return Array.from(E)}function M(E,L){var T=O.SpelNode.create.apply(O.SpelNode,["qualifiedidentifier",E].concat(g(L)));return T.getRaw=function(){return L.map(function(P){return P.getRaw()})},T.getValue=function(P){throw{name:"MethodNotImplementedException",message:"QualifiedIdentifier: Not implemented"}},T}var C=e.QualifiedIdentifier={create:M}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConstructorReference=void 0;var O=r(0),g=r(1);function M(T){if(Array.isArray(T)){for(var P=0,N=Array(T.length);P<T.length;P++)N[P]=T[P];return N}else return Array.from(T)}function C(T){return Array.isArray(T)?T:Array.from(T)}function E(T,P,N){var S=N!==void 0,D;S?D=P.length&&P[0]&&P[0].getType()==="number"?P[0].getValue():null:(N=P,P=void 0);var b=N,A=C(b),U=A[0],I=A.slice(1),$=O.SpelNode.create.apply(O.SpelNode,["constructorref",T].concat(M(N)));return $.getRaw=function(){return D},$.getValue=function(w){if(S&&I.length<=1){var V=[];return I.forEach(function(G){var K=w.activeContext;w.activeContext=new g.Stack,w.activeContext.push(w.rootContext),V.push(G.getValue(w)),w.activeContext=K}),I.length===1?V[0]:D?new Array(D):[]}throw{name:"MethodNotImplementedException",message:"ConstructorReference: Not implemented"}},$}var L=e.ConstructorReference={create:E}},function(i,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function O(M,C){var E={};return E.authentication=M||{},E.principal=C||{},E.hasRole=function(L){var T=!1;return!L||!E.authentication&&!Array.isArray(E.authentication.authorities)?!1:(E.authentication.authorities.forEach(function(P){P.authority.toLowerCase()===L.toLowerCase()&&(T=!0)}),T)},E.hasPermission=function(){var L=Array.prototype.slice.call(arguments);if(L.length===1)return E.hasRole(L[0])},E}var g=e.StandardContext={create:O}}])})},61581:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=E(e(1660)),O=E(e(87957)),g=E(e(2018)),M=E(e(26025)),C=E(e(7334));function E(D){return D&&D.__esModule?D:{default:D}}function L(D,b){if(!(D instanceof b))throw new TypeError("Cannot call a class as a function")}function T(D,b){for(var A=0;A<b.length;A++){var U=b[A];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(D,U.key,U)}}function P(D,b,A){return b&&T(D.prototype,b),A&&T(D,A),D}var N=function(b){return b.replace(/[\t ]+$/,"")},S=function(){function D(b,A,U){L(this,D),this.cfg=b||{},this.indentation=new g.default(this.cfg.indent),this.inlineBlock=new M.default,this.params=new C.default(this.cfg.params),this.tokenizer=A,this.tokenOverride=U,this.previousReservedWord={},this.tokens=[],this.index=0}return P(D,[{key:"format",value:function(A){this.tokens=this.tokenizer.tokenize(A);var U=this.getFormattedQueryFromTokens();return U.trim()}},{key:"getFormattedQueryFromTokens",value:function(){var A=this,U="";return this.tokens.forEach(function(I,$){A.index=$,A.tokenOverride&&(I=A.tokenOverride(I,A.previousReservedWord)||I),I.type===O.default.WHITESPACE||(I.type===O.default.LINE_COMMENT?U=A.formatLineComment(I,U):I.type===O.default.BLOCK_COMMENT?U=A.formatBlockComment(I,U):I.type===O.default.RESERVED_TOP_LEVEL?(U=A.formatTopLevelReservedWord(I,U),A.previousReservedWord=I):I.type===O.default.RESERVED_TOP_LEVEL_NO_INDENT?(U=A.formatTopLevelReservedWordNoIndent(I,U),A.previousReservedWord=I):I.type===O.default.RESERVED_NEWLINE?(U=A.formatNewlineReservedWord(I,U),A.previousReservedWord=I):I.type===O.default.RESERVED?(U=A.formatWithSpaces(I,U),A.previousReservedWord=I):I.type===O.default.OPEN_PAREN?U=A.formatOpeningParentheses(I,U):I.type===O.default.CLOSE_PAREN?U=A.formatClosingParentheses(I,U):I.type===O.default.PLACEHOLDER?U=A.formatPlaceholder(I,U):I.value===","?U=A.formatComma(I,U):I.value===":"?U=A.formatWithSpaceAfter(I,U):I.value==="."?U=A.formatWithoutSpaces(I,U):I.value===";"?U=A.formatQuerySeparator(I,U):U=A.formatWithSpaces(I,U))}),U}},{key:"formatLineComment",value:function(A,U){return this.addNewline(U+A.value)}},{key:"formatBlockComment",value:function(A,U){return this.addNewline(this.addNewline(U)+this.indentComment(A.value))}},{key:"indentComment",value:function(A){return A.replace(/\n[\t ]*/g,`
`+this.indentation.getIndent()+" ")}},{key:"formatTopLevelReservedWordNoIndent",value:function(A,U){return this.indentation.decreaseTopLevel(),U=this.addNewline(U)+this.equalizeWhitespace(this.formatReservedWord(A.value)),this.addNewline(U)}},{key:"formatTopLevelReservedWord",value:function(A,U){return this.indentation.decreaseTopLevel(),U=this.addNewline(U),this.indentation.increaseTopLevel(),U+=this.equalizeWhitespace(this.formatReservedWord(A.value)),this.addNewline(U)}},{key:"formatNewlineReservedWord",value:function(A,U){return this.addNewline(U)+this.equalizeWhitespace(this.formatReservedWord(A.value))+" "}},{key:"equalizeWhitespace",value:function(A){return A.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/g," ")}},{key:"formatOpeningParentheses",value:function(A,U){var I=[O.default.WHITESPACE,O.default.OPEN_PAREN,O.default.LINE_COMMENT];return(0,r.default)(I,this.previousToken().type)||(U=N(U)),U+=this.cfg.uppercase?A.value.toUpperCase():A.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),U=this.addNewline(U)),U}},{key:"formatClosingParentheses",value:function(A,U){return A.value=this.cfg.uppercase?A.value.toUpperCase():A.value,this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(A,U)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(A,this.addNewline(U)))}},{key:"formatPlaceholder",value:function(A,U){return U+this.params.get(A)+" "}},{key:"formatComma",value:function(A,U){return U=N(U)+A.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?U:this.addNewline(U)}},{key:"formatWithSpaceAfter",value:function(A,U){return N(U)+A.value+" "}},{key:"formatWithoutSpaces",value:function(A,U){return N(U)+A.value}},{key:"formatWithSpaces",value:function(A,U){var I=A.type==="reserved"?this.formatReservedWord(A.value):A.value;return U+I+" "}},{key:"formatReservedWord",value:function(A){return this.cfg.uppercase?A.toUpperCase():A}},{key:"formatQuerySeparator",value:function(A,U){return this.indentation.resetIndentation(),N(U)+A.value+`
`.repeat(this.cfg.linesBetweenQueries||1)}},{key:"addNewline",value:function(A){return A=N(A),A.endsWith(`
`)||(A+=`
`),A+this.indentation.getIndent()}},{key:"previousToken",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.tokens[this.index-A]||{}}}]),D}();i.default=S,ee.exports=i.default},2018:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=g(e(59788)),O=g(e(4161));function g(N){return N&&N.__esModule?N:{default:N}}function M(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function C(N,S){for(var D=0;D<S.length;D++){var b=S[D];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(N,b.key,b)}}function E(N,S,D){return S&&C(N.prototype,S),D&&C(N,D),N}var L="top-level",T="block-level",P=function(){function N(S){M(this,N),this.indent=S||"  ",this.indentTypes=[]}return E(N,[{key:"getIndent",value:function(){return(0,r.default)(this.indent,this.indentTypes.length)}},{key:"increaseTopLevel",value:function(){this.indentTypes.push(L)}},{key:"increaseBlockLevel",value:function(){this.indentTypes.push(T)}},{key:"decreaseTopLevel",value:function(){(0,O.default)(this.indentTypes)===L&&this.indentTypes.pop()}},{key:"decreaseBlockLevel",value:function(){for(;this.indentTypes.length>0;){var D=this.indentTypes.pop();if(D!==L)break}}},{key:"resetIndentation",value:function(){this.indentTypes=[]}}]),N}();i.default=P,ee.exports=i.default},26025:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=O(e(87957));function O(T){return T&&T.__esModule?T:{default:T}}function g(T,P){if(!(T instanceof P))throw new TypeError("Cannot call a class as a function")}function M(T,P){for(var N=0;N<P.length;N++){var S=P[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(T,S.key,S)}}function C(T,P,N){return P&&M(T.prototype,P),N&&M(T,N),T}var E=50,L=function(){function T(){g(this,T),this.level=0}return C(T,[{key:"beginIfPossible",value:function(N,S){this.level===0&&this.isInlineBlock(N,S)?this.level=1:this.level>0?this.level++:this.level=0}},{key:"end",value:function(){this.level--}},{key:"isActive",value:function(){return this.level>0}},{key:"isInlineBlock",value:function(N,S){for(var D=0,b=0,A=S;A<N.length;A++){var U=N[A];if(D+=U.value.length,D>E)return!1;if(U.type===r.default.OPEN_PAREN)b++;else if(U.type===r.default.CLOSE_PAREN&&(b--,b===0))return!0;if(this.isForbiddenToken(U))return!1}return!1}},{key:"isForbiddenToken",value:function(N){var S=N.type,D=N.value;return S===r.default.RESERVED_TOP_LEVEL||S===r.default.RESERVED_NEWLINE||S===r.default.COMMENT||S===r.default.BLOCK_COMMENT||D===";"}}]),T}();i.default=L,ee.exports=i.default},7334:(ee,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;function e(M,C){if(!(M instanceof C))throw new TypeError("Cannot call a class as a function")}function r(M,C){for(var E=0;E<C.length;E++){var L=C[E];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(M,L.key,L)}}function O(M,C,E){return C&&r(M.prototype,C),E&&r(M,E),M}var g=function(){function M(C){e(this,M),this.params=C,this.index=0}return O(M,[{key:"get",value:function(E){var L=E.key,T=E.value;return this.params?L?this.params[L]:this.params[this.index++]:T}}]),M}();i.default=g,ee.exports=i.default},87345:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=M(e(8727)),O=M(e(44889)),g=M(e(87957));function M(P){return P&&P.__esModule?P:{default:P}}function C(P,N){if(!(P instanceof N))throw new TypeError("Cannot call a class as a function")}function E(P,N){for(var S=0;S<N.length;S++){var D=N[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(P,D.key,D)}}function L(P,N,S){return N&&E(P.prototype,N),S&&E(P,S),P}var T=function(){function P(N){C(this,P),this.WHITESPACE_REGEX=/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)/,this.NUMBER_REGEX=/^((\x2D[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?[0-9]+(\.[0-9]+)?|0x[0-9A-Fa-f]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|\x2D>>|\x2D>|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|:=|(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/,this.BLOCK_COMMENT_REGEX=/^(\/\*(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(N.lineCommentTypes),this.RESERVED_TOP_LEVEL_REGEX=this.createReservedWordRegex(N.reservedTopLevelWords),this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX=this.createReservedWordRegex(N.reservedTopLevelWordsNoIndent),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(N.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(N.reservedWords),this.WORD_REGEX=this.createWordRegex(N.specialWordChars),this.STRING_REGEX=this.createStringRegex(N.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(N.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(N.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(N.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(N.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(N.namedPlaceholderTypes,this.createStringPattern(N.stringTypes))}return L(P,[{key:"createLineCommentRegex",value:function(S){return new RegExp("^((?:".concat(S.map(function(D){return(0,O.default)(D)}).join("|"),`).*?(?:\r
|\r|
|$))`),"u")}},{key:"createReservedWordRegex",value:function(S){var D=S.join("|").replace(/ /g,"\\s+");return new RegExp("^(".concat(D,")\\b"),"iu")}},{key:"createWordRegex",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return new RegExp("^([\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}".concat(S.join(""),"]+)"),"u")}},{key:"createStringRegex",value:function(S){return new RegExp("^("+this.createStringPattern(S)+")","u")}},{key:"createStringPattern",value:function(S){var D={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return S.map(function(b){return D[b]}).join("|")}},{key:"createParenRegex",value:function(S){var D=this;return new RegExp("^("+S.map(function(b){return D.escapeParen(b)}).join("|")+")","iu")}},{key:"escapeParen",value:function(S){return S.length===1?(0,O.default)(S):"\\b"+S+"\\b"}},{key:"createPlaceholderRegex",value:function(S,D){if((0,r.default)(S))return!1;var b=S.map(O.default).join("|");return new RegExp("^((?:".concat(b,")(?:").concat(D,"))"),"u")}},{key:"tokenize",value:function(S){if(!S)return[];for(var D=[],b;S.length;)b=this.getNextToken(S,b),S=S.substring(b.value.length),D.push(b);return D}},{key:"getNextToken",value:function(S,D){return this.getWhitespaceToken(S)||this.getCommentToken(S)||this.getStringToken(S)||this.getOpenParenToken(S)||this.getCloseParenToken(S)||this.getPlaceholderToken(S)||this.getNumberToken(S)||this.getReservedWordToken(S,D)||this.getWordToken(S)||this.getOperatorToken(S)}},{key:"getWhitespaceToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.WHITESPACE,regex:this.WHITESPACE_REGEX})}},{key:"getCommentToken",value:function(S){return this.getLineCommentToken(S)||this.getBlockCommentToken(S)}},{key:"getLineCommentToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}},{key:"getBlockCommentToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}},{key:"getStringToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.STRING,regex:this.STRING_REGEX})}},{key:"getOpenParenToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}},{key:"getCloseParenToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}},{key:"getPlaceholderToken",value:function(S){return this.getIdentNamedPlaceholderToken(S)||this.getStringNamedPlaceholderToken(S)||this.getIndexedPlaceholderToken(S)}},{key:"getIdentNamedPlaceholderToken",value:function(S){return this.getPlaceholderTokenWithKey({input:S,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(b){return b.slice(1)}})}},{key:"getStringNamedPlaceholderToken",value:function(S){var D=this;return this.getPlaceholderTokenWithKey({input:S,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(A){return D.getEscapedPlaceholderKey({key:A.slice(2,-1),quoteChar:A.slice(-1)})}})}},{key:"getIndexedPlaceholderToken",value:function(S){return this.getPlaceholderTokenWithKey({input:S,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(b){return b.slice(1)}})}},{key:"getPlaceholderTokenWithKey",value:function(S){var D=S.input,b=S.regex,A=S.parseKey,U=this.getTokenOnFirstMatch({input:D,regex:b,type:g.default.PLACEHOLDER});return U&&(U.key=A(U.value)),U}},{key:"getEscapedPlaceholderKey",value:function(S){var D=S.key,b=S.quoteChar;return D.replace(new RegExp((0,O.default)("\\"+b),"gu"),b)}},{key:"getNumberToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.NUMBER,regex:this.NUMBER_REGEX})}},{key:"getOperatorToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.OPERATOR,regex:this.OPERATOR_REGEX})}},{key:"getReservedWordToken",value:function(S,D){if(!(D&&D.value&&D.value==="."))return this.getTopLevelReservedToken(S)||this.getNewlineReservedToken(S)||this.getTopLevelReservedTokenNoIndent(S)||this.getPlainReservedToken(S)}},{key:"getTopLevelReservedToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.RESERVED_TOP_LEVEL,regex:this.RESERVED_TOP_LEVEL_REGEX})}},{key:"getNewlineReservedToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}},{key:"getTopLevelReservedTokenNoIndent",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.RESERVED_TOP_LEVEL_NO_INDENT,regex:this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX})}},{key:"getPlainReservedToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}},{key:"getWordToken",value:function(S){return this.getTokenOnFirstMatch({input:S,type:g.default.WORD,regex:this.WORD_REGEX})}},{key:"getTokenOnFirstMatch",value:function(S){var D=S.input,b=S.type,A=S.regex,U=D.match(A);if(U)return{type:b,value:U[1]}}}]),P}();i.default=T,ee.exports=i.default},87957:(ee,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOP_LEVEL:"reserved-top-level",RESERVED_TOP_LEVEL_NO_INDENT:"reserved-top-level-no-indent",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"};i.default=e,ee.exports=i.default},66168:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=g(e(61581)),O=g(e(87345));function g(b){return b&&b.__esModule?b:{default:b}}function M(b,A){if(!(b instanceof A))throw new TypeError("Cannot call a class as a function")}function C(b,A){for(var U=0;U<A.length;U++){var I=A[U];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(b,I.key,I)}}function E(b,A,U){return A&&C(b.prototype,A),U&&C(b,U),b}var L=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],T=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],P=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],N=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],S,D=function(){function b(A){M(this,b),this.cfg=A}return E(b,[{key:"format",value:function(U){return S||(S=new O.default({reservedWords:L,reservedTopLevelWords:T,reservedNewlineWords:N,reservedTopLevelWordsNoIndent:P,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new r.default(this.cfg,S).format(U)}}]),b}();i.default=D,ee.exports=i.default},23582:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=g(e(61581)),O=g(e(87345));function g(b){return b&&b.__esModule?b:{default:b}}function M(b,A){if(!(b instanceof A))throw new TypeError("Cannot call a class as a function")}function C(b,A){for(var U=0;U<A.length;U++){var I=A[U];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(b,I.key,I)}}function E(b,A,U){return A&&C(b.prototype,A),U&&C(b,U),b}var L=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],T=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],P=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],N=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],S,D=function(){function b(A){M(this,b),this.cfg=A}return E(b,[{key:"format",value:function(U){return S||(S=new O.default({reservedWords:L,reservedTopLevelWords:T,reservedNewlineWords:N,reservedTopLevelWordsNoIndent:P,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new r.default(this.cfg,S).format(U)}}]),b}();i.default=D,ee.exports=i.default},9924:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=M(e(61581)),O=M(e(87345)),g=M(e(87957));function M(U){return U&&U.__esModule?U:{default:U}}function C(U,I){if(!(U instanceof I))throw new TypeError("Cannot call a class as a function")}function E(U,I){for(var $=0;$<I.length;$++){var w=I[$];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(U,w.key,w)}}function L(U,I,$){return I&&E(U.prototype,I),$&&E(U,$),U}var T=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BREADTH","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DEPTH","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","END","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SEARCH","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],P=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UPDATE","VALUES","WHERE"],N=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],S=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],D=function(I,$){if(I.type===g.default.RESERVED_TOP_LEVEL&&I.value==="SET"&&$.value==="BY")return I.type=g.default.RESERVED,I},b,A=function(){function U(I){C(this,U),this.cfg=I}return L(U,[{key:"format",value:function($){return b||(b=new O.default({reservedWords:T,reservedTopLevelWords:P,reservedNewlineWords:S,reservedTopLevelWordsNoIndent:N,stringTypes:['""',"N''","''","``"],openParens:["(","CASE","BEGIN"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new r.default(this.cfg,b,D).format($)}}]),U}();i.default=A,ee.exports=i.default},68034:(ee,i,e)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=g(e(61581)),O=g(e(87345));function g(b){return b&&b.__esModule?b:{default:b}}function M(b,A){if(!(b instanceof A))throw new TypeError("Cannot call a class as a function")}function C(b,A){for(var U=0;U<A.length;U++){var I=A[U];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(b,I.key,I)}}function E(b,A,U){return A&&C(b.prototype,A),U&&C(b,U),b}var L=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],T=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],P=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],N=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],S,D=function(){function b(A){M(this,b),this.cfg=A}return E(b,[{key:"format",value:function(U){return S||(S=new O.default({reservedWords:L,reservedTopLevelWords:T,reservedNewlineWords:N,reservedTopLevelWordsNoIndent:P,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new r.default(this.cfg,S).format(U)}}]),b}();i.default=D,ee.exports=i.default},17249:(ee,i,e)=>{"use strict";var r;r={value:!0},i.ZP=r=void 0;var O=E(e(66168)),g=E(e(23582)),M=E(e(9924)),C=E(e(68034));function E(P){return P&&P.__esModule?P:{default:P}}var L=function(N){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(S.language){case"db2":return new O.default(S).format(N);case"n1ql":return new g.default(S).format(N);case"pl/sql":return new M.default(S).format(N);case"sql":case void 0:return new C.default(S).format(N);default:throw Error("Unsupported SQL dialect: ".concat(S.language))}};r=L;var T={format:L};i.ZP=T},62211:(ee,i,e)=>{ee.exports=e(76062)},76062:(ee,i,e)=>{var r=e(56834).Buffer,O=i,g=/`/g,M=/\./g,C=/[\0\b\t\n\r\x1a\"\'\\]/g,E={"\0":"\\0","\b":"\\b","	":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};O.escapeId=function(S,D){if(Array.isArray(S)){for(var b="",A=0;A<S.length;A++)b+=(A===0?"":", ")+O.escapeId(S[A],D);return b}else return D?"`"+String(S).replace(g,"``")+"`":"`"+String(S).replace(g,"``").replace(M,"`.`")+"`"},O.escape=function(S,D,b){if(S==null)return"NULL";switch(typeof S){case"boolean":return S?"true":"false";case"number":return S+"";case"object":return Object.prototype.toString.call(S)==="[object Date]"?O.dateToString(S,b||"local"):Array.isArray(S)?O.arrayToList(S,b):r.isBuffer(S)?O.bufferToString(S):typeof S.toSqlString=="function"?String(S.toSqlString()):D?L(S.toString()):O.objectToValues(S,b);default:return L(S)}},O.arrayToList=function(S,D){for(var b="",A=0;A<S.length;A++){var U=S[A];Array.isArray(U)?b+=(A===0?"":", ")+"("+O.arrayToList(U,D)+")":b+=(A===0?"":", ")+O.escape(U,!0,D)}return b},O.format=function(S,D,b,A){if(D==null)return S;Array.isArray(D)||(D=[D]);for(var U=0,I=/\?+/g,$="",w=0,V;w<D.length&&(V=I.exec(S));){var G=V[0].length;if(!(G>2)){var K=G===2?O.escapeId(D[w]):O.escape(D[w],b,A);$+=S.slice(U,V.index)+K,U=I.lastIndex,w++}}return U===0?S:U<S.length?$+S.slice(U):$},O.dateToString=function(S,D){var b=new Date(S);if(isNaN(b.getTime()))return"NULL";var A,U,I,$,w,V,G;if(D==="local")A=b.getFullYear(),U=b.getMonth()+1,I=b.getDate(),$=b.getHours(),w=b.getMinutes(),V=b.getSeconds(),G=b.getMilliseconds();else{var K=P(D);K!==!1&&K!==0&&b.setTime(b.getTime()+K*6e4),A=b.getUTCFullYear(),U=b.getUTCMonth()+1,I=b.getUTCDate(),$=b.getUTCHours(),w=b.getUTCMinutes(),V=b.getUTCSeconds(),G=b.getUTCMilliseconds()}var H=T(A,4)+"-"+T(U,2)+"-"+T(I,2)+" "+T($,2)+":"+T(w,2)+":"+T(V,2)+"."+T(G,3);return L(H)},O.bufferToString=function(S){return"X"+L(S.toString("hex"))},O.objectToValues=function(S,D){var b="";for(var A in S){var U=S[A];typeof U!="function"&&(b+=(b.length===0?"":", ")+O.escapeId(A)+" = "+O.escape(U,!0,D))}return b},O.raw=function(S){if(typeof S!="string")throw new TypeError("argument sql must be a string");return{toSqlString:function(){return S}}};function L(N){for(var S=C.lastIndex=0,D="",b;b=C.exec(N);)D+=N.slice(S,b.index)+E[b[0]],S=C.lastIndex;return S===0?"'"+N+"'":S<N.length?"'"+D+N.slice(S)+"'":"'"+D+"'"}function T(N,S){for(N=N.toString();N.length<S;)N="0"+N;return N}function P(N){if(N==="Z")return 0;var S=N.match(/([\+\-\s])(\d\d):?(\d\d)?/);return S?(S[1]==="-"?-1:1)*(parseInt(S[2],10)+(S[3]?parseInt(S[3],10):0)/60)*60:!1}},49017:ee=>{function i(e,r){(r==null||r>e.length)&&(r=e.length);for(var O=0,g=new Array(r);O<r;O++)g[O]=e[O];return g}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},42134:ee=>{function i(e){if(Array.isArray(e))return e}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},33299:(ee,i,e)=>{var r=e(49017);function O(g){if(Array.isArray(g))return r(g)}ee.exports=O,ee.exports.__esModule=!0,ee.exports.default=ee.exports},80467:ee=>{function i(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},62052:ee=>{function i(r,O,g,M,C,E,L){try{var T=r[E](L),P=T.value}catch(N){g(N);return}T.done?O(P):Promise.resolve(P).then(M,C)}function e(r){return function(){var O=this,g=arguments;return new Promise(function(M,C){var E=r.apply(O,g);function L(P){i(E,M,C,L,T,"next",P)}function T(P){i(E,M,C,L,T,"throw",P)}L(void 0)})}}ee.exports=e,ee.exports.__esModule=!0,ee.exports.default=ee.exports},86067:ee=>{function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},85091:ee=>{function i(r,O){for(var g=0;g<O.length;g++){var M=O[g];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(r,M.key,M)}}function e(r,O,g){return O&&i(r.prototype,O),g&&i(r,g),Object.defineProperty(r,"prototype",{writable:!1}),r}ee.exports=e,ee.exports.__esModule=!0,ee.exports.default=ee.exports},92476:ee=>{function i(e,r,O){return r in e?Object.defineProperty(e,r,{value:O,enumerable:!0,configurable:!0,writable:!0}):e[r]=O,e}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},68307:ee=>{function i(){return ee.exports=i=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var O=arguments[r];for(var g in O)Object.prototype.hasOwnProperty.call(O,g)&&(e[g]=O[g])}return e},ee.exports.__esModule=!0,ee.exports.default=ee.exports,i.apply(this,arguments)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},36610:(ee,i,e)=>{var r=e(38197);function O(){return typeof Reflect<"u"&&Reflect.get?(ee.exports=O=Reflect.get.bind(),ee.exports.__esModule=!0,ee.exports.default=ee.exports):(ee.exports=O=function(M,C,E){var L=r(M,C);if(L){var T=Object.getOwnPropertyDescriptor(L,C);return T.get?T.get.call(arguments.length<3?M:E):T.value}},ee.exports.__esModule=!0,ee.exports.default=ee.exports),O.apply(this,arguments)}ee.exports=O,ee.exports.__esModule=!0,ee.exports.default=ee.exports},39005:ee=>{function i(e){return ee.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},ee.exports.__esModule=!0,ee.exports.default=ee.exports,i(e)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},72366:(ee,i,e)=>{var r=e(89822);function O(g,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(M&&M.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),M&&r(g,M)}ee.exports=O,ee.exports.__esModule=!0,ee.exports.default=ee.exports},59018:ee=>{function i(e){return e&&e.__esModule?e:{default:e}}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},75963:ee=>{function i(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},25400:ee=>{function i(e,r){var O=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(O!=null){var g=[],M=!0,C=!1,E,L;try{for(O=O.call(e);!(M=(E=O.next()).done)&&(g.push(E.value),!(r&&g.length===r));M=!0);}catch(T){C=!0,L=T}finally{try{!M&&O.return!=null&&O.return()}finally{if(C)throw L}}return g}}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},8343:ee=>{function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},16306:ee=>{function i(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},19934:(ee,i,e)=>{var r=e(96498);function O(g,M){if(g==null)return{};var C=r(g,M),E,L;if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(g);for(L=0;L<T.length;L++)E=T[L],!(M.indexOf(E)>=0)&&Object.prototype.propertyIsEnumerable.call(g,E)&&(C[E]=g[E])}return C}ee.exports=O,ee.exports.__esModule=!0,ee.exports.default=ee.exports},96498:ee=>{function i(e,r){if(e==null)return{};var O={},g=Object.keys(e),M,C;for(C=0;C<g.length;C++)M=g[C],!(r.indexOf(M)>=0)&&(O[M]=e[M]);return O}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},64920:(ee,i,e)=>{var r=e(33805).default,O=e(80467);function g(M,C){if(C&&(r(C)==="object"||typeof C=="function"))return C;if(C!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(M)}ee.exports=g,ee.exports.__esModule=!0,ee.exports.default=ee.exports},277:(ee,i,e)=>{var r=e(33805).default;function O(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ee.exports=O=function(){return g},ee.exports.__esModule=!0,ee.exports.default=ee.exports;var g={},M=Object.prototype,C=M.hasOwnProperty,E=Object.defineProperty||function(o,u,l){o[u]=l.value},L=typeof Symbol=="function"?Symbol:{},T=L.iterator||"@@iterator",P=L.asyncIterator||"@@asyncIterator",N=L.toStringTag||"@@toStringTag";function S(o,u,l){return Object.defineProperty(o,u,{value:l,enumerable:!0,configurable:!0,writable:!0}),o[u]}try{S({},"")}catch{S=function(l,f,v){return l[f]=v}}function D(o,u,l,f){var v=u&&u.prototype instanceof U?u:U,h=Object.create(v.prototype),a=new m(f||[]);return E(h,"_invoke",{value:te(o,l,a)}),h}function b(o,u,l){try{return{type:"normal",arg:o.call(u,l)}}catch(f){return{type:"throw",arg:f}}}g.wrap=D;var A={};function U(){}function I(){}function $(){}var w={};S(w,T,function(){return this});var V=Object.getPrototypeOf,G=V&&V(V(s([])));G&&G!==M&&C.call(G,T)&&(w=G);var K=$.prototype=U.prototype=Object.create(w);function H(o){["next","throw","return"].forEach(function(u){S(o,u,function(l){return this._invoke(u,l)})})}function _(o,u){function l(v,h,a,n){var y=b(o[v],o,h);if(y.type!=="throw"){var p=y.arg,F=p.value;return F&&r(F)=="object"&&C.call(F,"__await")?u.resolve(F.__await).then(function(B){l("next",B,a,n)},function(B){l("throw",B,a,n)}):u.resolve(F).then(function(B){p.value=B,a(p)},function(B){return l("throw",B,a,n)})}n(y.arg)}var f;E(this,"_invoke",{value:function(h,a){function n(){return new u(function(y,p){l(h,a,y,p)})}return f=f?f.then(n,n):n()}})}function te(o,u,l){var f="suspendedStart";return function(v,h){if(f==="executing")throw new Error("Generator is already running");if(f==="completed"){if(v==="throw")throw h;return c()}for(l.method=v,l.arg=h;;){var a=l.delegate;if(a){var n=J(a,l);if(n){if(n===A)continue;return n}}if(l.method==="next")l.sent=l._sent=l.arg;else if(l.method==="throw"){if(f==="suspendedStart")throw f="completed",l.arg;l.dispatchException(l.arg)}else l.method==="return"&&l.abrupt("return",l.arg);f="executing";var y=b(o,u,l);if(y.type==="normal"){if(f=l.done?"completed":"suspendedYield",y.arg===A)continue;return{value:y.arg,done:l.done}}y.type==="throw"&&(f="completed",l.method="throw",l.arg=y.arg)}}}function J(o,u){var l=o.iterator[u.method];if(l===void 0){if(u.delegate=null,u.method==="throw"){if(o.iterator.return&&(u.method="return",u.arg=void 0,J(o,u),u.method==="throw"))return A;u.method="throw",u.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var f=b(l,o.iterator,u.arg);if(f.type==="throw")return u.method="throw",u.arg=f.arg,u.delegate=null,A;var v=f.arg;return v?v.done?(u[o.resultName]=v.value,u.next=o.nextLoc,u.method!=="return"&&(u.method="next",u.arg=void 0),u.delegate=null,A):v:(u.method="throw",u.arg=new TypeError("iterator result is not an object"),u.delegate=null,A)}function k(o){var u={tryLoc:o[0]};1 in o&&(u.catchLoc=o[1]),2 in o&&(u.finallyLoc=o[2],u.afterLoc=o[3]),this.tryEntries.push(u)}function R(o){var u=o.completion||{};u.type="normal",delete u.arg,o.completion=u}function m(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(k,this),this.reset(!0)}function s(o){if(o){var u=o[T];if(u)return u.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length)){var l=-1,f=function v(){for(;++l<o.length;)if(C.call(o,l))return v.value=o[l],v.done=!1,v;return v.value=void 0,v.done=!0,v};return f.next=f}}return{next:c}}function c(){return{value:void 0,done:!0}}return I.prototype=$,E(K,"constructor",{value:$,configurable:!0}),E($,"constructor",{value:I,configurable:!0}),I.displayName=S($,N,"GeneratorFunction"),g.isGeneratorFunction=function(o){var u=typeof o=="function"&&o.constructor;return!!u&&(u===I||(u.displayName||u.name)==="GeneratorFunction")},g.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,$):(o.__proto__=$,S(o,N,"GeneratorFunction")),o.prototype=Object.create(K),o},g.awrap=function(o){return{__await:o}},H(_.prototype),S(_.prototype,P,function(){return this}),g.AsyncIterator=_,g.async=function(o,u,l,f,v){v===void 0&&(v=Promise);var h=new _(D(o,u,l,f),v);return g.isGeneratorFunction(u)?h:h.next().then(function(a){return a.done?a.value:h.next()})},H(K),S(K,N,"Generator"),S(K,T,function(){return this}),S(K,"toString",function(){return"[object Generator]"}),g.keys=function(o){var u=Object(o),l=[];for(var f in u)l.push(f);return l.reverse(),function v(){for(;l.length;){var h=l.pop();if(h in u)return v.value=h,v.done=!1,v}return v.done=!0,v}},g.values=s,m.prototype={constructor:m,reset:function(u){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!u)for(var l in this)l.charAt(0)==="t"&&C.call(this,l)&&!isNaN(+l.slice(1))&&(this[l]=void 0)},stop:function(){this.done=!0;var u=this.tryEntries[0].completion;if(u.type==="throw")throw u.arg;return this.rval},dispatchException:function(u){if(this.done)throw u;var l=this;function f(p,F){return a.type="throw",a.arg=u,l.next=p,F&&(l.method="next",l.arg=void 0),!!F}for(var v=this.tryEntries.length-1;v>=0;--v){var h=this.tryEntries[v],a=h.completion;if(h.tryLoc==="root")return f("end");if(h.tryLoc<=this.prev){var n=C.call(h,"catchLoc"),y=C.call(h,"finallyLoc");if(n&&y){if(this.prev<h.catchLoc)return f(h.catchLoc,!0);if(this.prev<h.finallyLoc)return f(h.finallyLoc)}else if(n){if(this.prev<h.catchLoc)return f(h.catchLoc,!0)}else{if(!y)throw new Error("try statement without catch or finally");if(this.prev<h.finallyLoc)return f(h.finallyLoc)}}}},abrupt:function(u,l){for(var f=this.tryEntries.length-1;f>=0;--f){var v=this.tryEntries[f];if(v.tryLoc<=this.prev&&C.call(v,"finallyLoc")&&this.prev<v.finallyLoc){var h=v;break}}h&&(u==="break"||u==="continue")&&h.tryLoc<=l&&l<=h.finallyLoc&&(h=null);var a=h?h.completion:{};return a.type=u,a.arg=l,h?(this.method="next",this.next=h.finallyLoc,A):this.complete(a)},complete:function(u,l){if(u.type==="throw")throw u.arg;return u.type==="break"||u.type==="continue"?this.next=u.arg:u.type==="return"?(this.rval=this.arg=u.arg,this.method="return",this.next="end"):u.type==="normal"&&l&&(this.next=l),A},finish:function(u){for(var l=this.tryEntries.length-1;l>=0;--l){var f=this.tryEntries[l];if(f.finallyLoc===u)return this.complete(f.completion,f.afterLoc),R(f),A}},catch:function(u){for(var l=this.tryEntries.length-1;l>=0;--l){var f=this.tryEntries[l];if(f.tryLoc===u){var v=f.completion;if(v.type==="throw"){var h=v.arg;R(f)}return h}}throw new Error("illegal catch attempt")},delegateYield:function(u,l,f){return this.delegate={iterator:s(u),resultName:l,nextLoc:f},this.method==="next"&&(this.arg=void 0),A}},g}ee.exports=O,ee.exports.__esModule=!0,ee.exports.default=ee.exports},89822:ee=>{function i(e,r){return ee.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,M){return g.__proto__=M,g},ee.exports.__esModule=!0,ee.exports.default=ee.exports,i(e,r)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},47452:(ee,i,e)=>{var r=e(42134),O=e(25400),g=e(85665),M=e(8343);function C(E,L){return r(E)||O(E,L)||g(E,L)||M()}ee.exports=C,ee.exports.__esModule=!0,ee.exports.default=ee.exports},38197:(ee,i,e)=>{var r=e(39005);function O(g,M){for(;!Object.prototype.hasOwnProperty.call(g,M)&&(g=r(g),g!==null););return g}ee.exports=O,ee.exports.__esModule=!0,ee.exports.default=ee.exports},33138:(ee,i,e)=>{var r=e(42134),O=e(75963),g=e(85665),M=e(8343);function C(E){return r(E)||O(E)||g(E)||M()}ee.exports=C,ee.exports.__esModule=!0,ee.exports.default=ee.exports},90890:(ee,i,e)=>{var r=e(33299),O=e(75963),g=e(85665),M=e(16306);function C(E){return r(E)||O(E)||g(E)||M()}ee.exports=C,ee.exports.__esModule=!0,ee.exports.default=ee.exports},33805:ee=>{function i(e){return ee.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ee.exports.__esModule=!0,ee.exports.default=ee.exports,i(e)}ee.exports=i,ee.exports.__esModule=!0,ee.exports.default=ee.exports},85665:(ee,i,e)=>{var r=e(49017);function O(g,M){if(g){if(typeof g=="string")return r(g,M);var C=Object.prototype.toString.call(g).slice(8,-1);if(C==="Object"&&g.constructor&&(C=g.constructor.name),C==="Map"||C==="Set")return Array.from(g);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return r(g,M)}}ee.exports=O,ee.exports.__esModule=!0,ee.exports.default=ee.exports},79788:(ee,i,e)=>{var r=e(277)();ee.exports=r;try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}}]);

//# sourceMappingURL=4993.9f3804d0eed8bb8f1273.js.map