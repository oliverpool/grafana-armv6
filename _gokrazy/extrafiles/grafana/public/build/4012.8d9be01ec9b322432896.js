(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4012],{94929:(G,O,e)=>{"use strict";e.d(O,{n:()=>u});var t=e(68404),n=e(29002);function u(s){const{children:i,instanceSettings:m}=s,f=(0,t.useMemo)(()=>({instanceSettings:m,meta:m.meta}),[m]);return t.createElement(n._.Provider,{value:f},i)}},29002:(G,O,e)=>{"use strict";e.d(O,{_:()=>n});var t=e(68404);const n=(0,t.createContext)(void 0)},20231:(G,O,e)=>{"use strict";e.d(O,{b:()=>u});var t=e(68404),n=e(29002);function u(s){const{children:i,...m}=s;return t.createElement(n._.Provider,{value:m},i)}},61345:(G,O,e)=>{"use strict";e.d(O,{v:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},59417:(G,O,e)=>{"use strict";e.d(O,{g:()=>u});var t=e(68404),n=e(29002);function u(){const s=(0,t.useContext)(n._);if(!s)throw new Error("usePluginContext must be used within a PluginContextProvider");return s}},71398:(G,O,e)=>{"use strict";e.d(O,{i:()=>m});var t=e(20411),n=e(49319),u=e(16911);const s=f=>f;class i{constructor(o,l){this.source=o,this.prop=l,this.converter=s}get length(){return this.source.length}get(o){return this.converter(this.source[o][this.prop])}toArray(){return(0,n.n)(this)}toJSON(){return(0,n.n)(this)}}class m extends t.G{constructor(o,l){super(),this.source=o,this.fields=[],this.length=0,this.length=o.length;const r=o.length?o[0]:{};l?this.fields=l.map(d=>({name:d,type:(0,u._m)(d,r[d]),config:{},values:new i(o,d)})):this.setFieldsFromObject(r)}setFieldsFromObject(o){this.fields=Object.keys(o).map(l=>({name:l,type:(0,u._m)(l,o[l]),config:{},values:new i(this.source,l)}))}setFieldType(o,l,r){let d=this.fields.find(c=>c.name===o);return d?d.type=l:(d={name:o,type:l,config:{},values:new i(this.source,o)},this.fields.push(d)),d.values.converter=r??s,d}get(o){return this.source[o]}toJSON(){return(0,u.og)(this)}}},25091:(G,O,e)=>{"use strict";e.d(O,{a:()=>u});var t=e(98212),n=e(38685);class u extends n.v{constructor(i){super(void 0,m=>new t.d({...i,buffer:m}))}}},70006:(G,O,e)=>{"use strict";e.d(O,{Ib:()=>m,Jy:()=>i,Y:()=>l,vP:()=>o});var t=e(14582),n=e(19695),u=e(16911);const s={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function i(r,d){for(const c in r){const g=s[c];for(const p of r[c])p<d.length&&(d[p]=g)}}function m(r,d){for(let c=0;c<d.length;c++)d[c]=r[d[c]]}function f(r,d){for(const c of d)if(c!=null)return(0,u._m)(r,c);return t.fS.other}function o(r){const{schema:d,data:c}=r;if(!d||!d.fields)throw new Error("JSON needs a fields definition");const g=c?c.values.reduce((y,h)=>Math.max(y,h.length),0):0,p=d.fields.map((y,h)=>{let a=c?c.values[h]:[],v=a.length,C=y.type;v!==g&&(a.length=g,a.fill(void 0,v));let E=c?.entities?.[h];E&&i(E,a);let P=c?.enums?.[h];return P&&(m(P,a),C=t.fS.string),{...y,type:C??f(y.name,a),config:y.config??{},values:new n.G(a),entities:E??{}}});return{...d,fields:p,length:g}}function l(r){const d={values:[]};return{schema:{refId:r.refId,meta:r.meta,name:r.name,fields:r.fields.map(g=>{const{values:p,state:y,display:h,...a}=g;return delete a.entities,d.values.push(p.toArray()),a})},data:d}}},50235:(G,O,e)=>{"use strict";e.d(O,{U:()=>n});var t=e(20411);class n extends t.G{constructor(s){super(),this.data=s,this.index=0;const i={},m={};for(let f=0;f<s.fields.length;f++){const o=s.fields[f];if(!o.name)continue;m[o.name]=o;const l=()=>o.values.get(this.index);i.hasOwnProperty(o.name)||Object.defineProperty(i,o.name,{enumerable:!0,get:l}),i.hasOwnProperty(f.toString())||Object.defineProperty(i,f,{enumerable:!1,get:l})}this.obj=i,this.fields=m}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(s){if(!this.dataFrame||!this.dataFrame.fields)return;const i=this.dataFrame.fields[s];if(!(!i||!i.display))return i.display}get(s){return this.index=s,this.obj}toArray(){return new Array(this.data.length).fill(0).map((s,i)=>({...this.get(i)}))}}},71895:(G,O,e)=>{"use strict";e.d(O,{N:()=>u});var t=e(14582),n=e(16911);class u{constructor(i){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=i.fields.map((m,f)=>({...m,index:f}));for(let m=0;m<i.fields.length;m++){const f=i.fields[m];if(f.type===t.fS.other){const o=(0,n.fu)(f);o&&(f.type=o)}this.fieldByType[f.type]||(this.fieldByType[f.type]=[]),this.fieldByType[f.type].push({...f,index:m}),this.fieldByName[f.name]?console.warn("Duplicate field names in DataFrame: ",f.name):this.fieldByName[f.name]={...f,index:m}}}getFields(i){if(!i)return[...this.fields];const m=this.fieldByType[i];return m?[...m]:[]}hasFieldOfType(i){const m=this.fieldByType[i];return m&&m.length>0}getFirstFieldOfType(i,m=!1){return this.fieldByType[i].find(l=>m||!l.config.custom?.hidden)}hasFieldNamed(i){return!!this.fieldByName[i]}hasFieldWithNameAndType(i,m){return!!this.fieldByName[i]&&this.fieldByType[m].filter(f=>f.name===i).length>0}getFieldByName(i){return this.fieldByName[i]}getFieldsByLabel(i,m){return Object.values(this.fieldByName).filter(f=>f.labels&&f.labels[i]===m)}}},38685:(G,O,e)=>{"use strict";e.d(O,{Y:()=>f,v:()=>o});var t=e(82897),n=e(14582),u=e(16911);function s(l,r){return r.type||(r.name==="time"||r.name==="Time"?r.type=n.fS.time:r.type=(0,u.LI)(l)),r.type===n.fS.number?d=>parseFloat(d):r.type===n.fS.boolean?d=>!(d[0]==="F"||d[0]==="f"||d[0]==="0"):d=>d}var i=e(19695),m=e(20411);const f=void 0;class o extends m.G{constructor(r,d){if(super(),this.fields=[],this.first=new i.G,this.parsers=void 0,this.creator=d||(c=>new i.G(c)),r){const{name:c,refId:g,meta:p,fields:y}=r;if(c&&(this.name=c),g&&(this.refId=g),p&&(this.meta=p),y)for(const h of y)this.addField(h)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(r,d){return this.addField({name:d||"",type:(0,u.LI)(r)})}addField(r,d){let c;r.values&&(Array.isArray(r.values)?c=r.values:c=r.values.toArray());let g=r.type;!g&&(r.name==="time"||r.name==="Time")?g=n.fS.time:(!g&&c&&c.length&&(g=(0,u.LI)(c[0])),g||(g=n.fS.other));let p=r.name;p||(p=`Field ${this.fields.length+1}`);const y={...r,name:p,type:g,config:r.config||{},values:this.creator(c)};if(g===n.fS.other&&(g=(0,u.fu)(y),g&&(y.type=g)),this.fields.push(y),this.first=this.fields[0].values,d)for(;y.values.length<d;)y.values.add(f);else this.validate();return y}validate(){const r=this.fields.reduce((d,c)=>Math.max(d,c.values.length),0);for(const d of this.fields)for(;d.values.length!==r;)d.values.add(f)}reverse(){for(const r of this.fields)r.values.reverse()}setParser(r,d){return this.parsers||(this.parsers=new Map),this.parsers.set(r,d),d}parseValue(r,d){let c=this.parsers?.get(r);return c||(c=this.setParser(r,s(d,r))),c(d)}appendRow(r){for(let d=this.fields.length;d<r.length;d++)this.addField({name:`Field ${d+1}`,type:(0,u.LI)(r[d])});if(this.length<1)for(let d=0;d<this.fields.length;d++){const c=this.fields[d];(!c.type||c.type===n.fS.other)&&(c.type=(0,u.LI)(r[d]))}for(let d=0;d<this.fields.length;d++){const c=this.fields[d];let g=r[d];c.type!==n.fS.string&&(0,t.isString)(g)&&(g=this.parseValue(c,g)),c.values.add(g)}}add(r){const d=r;for(const c of this.fields){let g=d[c.name];c.type!==n.fS.string&&(0,t.isString)(g)&&(g=this.parseValue(c,g)),g===void 0&&(g=f),c.values.add(g)}}set(r,d){if(r>this.length)throw new Error("Unable to set value beyond current length");const c=d||{};for(const g of this.fields)g.values.set(r,c[g.name])}get(r){const d={};for(const c of this.fields)d[c.name]=c.values.get(r);return d}toJSON(){return(0,u.og)(this)}}},68219:(G,O,e)=>{"use strict";e.d(O,{$q:()=>u,GV:()=>n,YP:()=>m,jC:()=>s,q2:()=>t,r7:()=>i});const t=(f,o)=>({name:f,columns:o}),n=f=>f.columns,u=(f,o)=>f.columns[o],s=(f,o,l)=>f.columns[o].values.get(l),i=(f,o,l)=>f.columns.map(r=>r.values.get(l)),m=(f,o)=>f[o]},38067:(G,O,e)=>{"use strict";e.d(O,{Ch:()=>u,Vv:()=>m,nl:()=>s});var t=e(82897),n=e.n(t);function u(f,o,l){if(f===o)return!0;if(f?.fields?.length!==o?.fields?.length||f.name!==o.name)return!1;for(let r=0;r<f.fields.length;r++){const d=f.fields[r],c=o.fields[r];if(d.type!==c.type||d.name!==c.name)return!1;if(l)continue;if(d.labels&&c.labels&&!m(d.labels,c.labels))return!1;const g=d.config,p=c.config;let y=Object.keys(g),h=Object.keys(p);if(y.length!==h.length)return!1;for(const a of y){if(!(a in p))return!1;if(a!=="interval"&&!(0,t.isEqual)(g[a],p[a]))return!1}}return!0}function s(f,o,l){if(f===o)return!0;if(f?.length!==o?.length)return!1;for(let r=0;r<f.length;r++)if(!l(f[r],o[r]))return!1;return!0}const i=(f,o)=>f===o;function m(f,o,l=i){if(f===o)return!0;const r=Object.keys(f),d=Object.keys(o);if(r.length!==d.length)return!1;for(let c of r)if(!l(f[c],o[c]))return!1;return!0}},31815:(G,O,e)=>{"use strict";e.d(O,{$q:()=>m.$q,Aw:()=>i.Aw,Ch:()=>l.Ch,DP:()=>i.DP,F9:()=>i.F9,GV:()=>m.GV,Ib:()=>o.Ib,Ji:()=>i.Ji,Jy:()=>o.Jy,LI:()=>i.LI,N:()=>n.N,SX:()=>i.SX,US:()=>t.U,Vv:()=>l.Vv,Y:()=>o.Y,Y6:()=>i.Y6,YP:()=>m.YP,Yi:()=>s.Y,Zr:()=>i.Zr,_m:()=>i._m,a2:()=>u.a,aK:()=>i.aK,aY:()=>i.aY,fh:()=>i.fh,fu:()=>i.fu,g0:()=>i.g0,iB:()=>f.i,jC:()=>m.jC,m$:()=>r.m$,nl:()=>l.nl,og:()=>i.og,q2:()=>m.q2,r7:()=>m.r7,sV:()=>i.sV,vA:()=>s.v,vP:()=>o.vP});var t=e(50235),n=e(71895),u=e(25091),s=e(38685),i=e(16911),m=e(68219),f=e(71398),o=e(70006),l=e(38067),r=e(34472)},16911:(G,O,e)=>{"use strict";e.d(O,{Aw:()=>N,DP:()=>C,F9:()=>F,Ji:()=>M,LI:()=>E,SX:()=>x,Y6:()=>L,Zr:()=>T,_m:()=>v,aK:()=>R,aY:()=>S,fh:()=>w,fu:()=>P,g0:()=>D,og:()=>A,sV:()=>W});var t=e(82897),n=e.n(t),u=e(46519),s=e(62724),i=e(89890),m=e(14582),f=e(19695),o=e(12022),l=e(49319),r=e(71398),d=e(70006),c=e(38685);function g(V){const b=V.columns.map(X=>{const{text:k,type:H,...Y}=X;return{name:k?.length?k:X,config:Y||{},values:new f.G,type:H&&Object.values(m.fS).includes(H)?H:m.fS.other}});if(!(0,t.isArray)(V.rows))throw new Error(`Expected table rows to be array, got ${typeof V.rows}.`);for(const X of V.rows)for(let k=0;k<b.length;k++)b[k].values.buffer.push(X[k]);for(const X of b)if(X.type===m.fS.other){const k=P(X);k&&(X.type=k)}return{fields:b,refId:V.refId,meta:V.meta,name:V.name,length:V.rows.length}}function p(V){const b=[],X=[],k=V.datapoints||V.points;for(const Y of k)X.push(Y[0]),b.push(Y[1]);const H=[{name:m.Ls,type:m.fS.time,config:{},values:new f.G(b)},{name:m.M5,type:m.fS.number,config:{unit:V.unit},values:new f.G(X),labels:V.tags}];return V.title&&(H[1].config.displayNameFromDS=V.title),{name:V.target||V.name,refId:V.refId,meta:V.meta,fields:H,length:X.length}}function y(V){const b=new f.G,X=new f.G;for(let k=0;k<V.data.length;k++){const H=V.data[k];b.buffer.push(H[1]),X.buffer.push(H[0])}return{name:V.label,fields:[{name:V.label||m.M5,type:m.fS.number,config:{},values:b},{name:m.Ls,type:m.fS.time,config:{unit:"dateTimeAsIso"},values:X}],length:b.buffer.length}}function h(V){const b=[{name:V.target,type:m.fS.other,labels:V.tags,config:{unit:V.unit,filterable:V.filterable},values:new f.G}];for(const X of V.datapoints)b[0].values.buffer.push(X);return{name:V.target,refId:V.target,meta:{json:!0},fields:b,length:V.datapoints.length}}const a=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function v(V,b){return V&&(V=V.toLowerCase(),V==="date"||V==="time")?m.fS.time:E(b)}function C(V){return V instanceof Date||(0,u.v9)(V)?m.fS.time:(0,t.isNumber)(V)?m.fS.number:(0,t.isString)(V)?m.fS.string:(0,t.isBoolean)(V)?m.fS.boolean:m.fS.other}function E(V){return V instanceof Date||(0,u.v9)(V)?m.fS.time:(0,t.isNumber)(V)?m.fS.number:(0,t.isString)(V)?a.test(V)?m.fS.number:V==="true"||V==="TRUE"||V==="True"||V==="false"||V==="FALSE"||V==="False"?m.fS.boolean:m.fS.string:(0,t.isBoolean)(V)?m.fS.boolean:m.fS.other}function P(V){if(V.name){const b=V.name.toLowerCase();if(b==="date"||b==="time")return m.fS.time}for(let b=0;b<V.values.length;b++){const X=V.values.get(b);if(X!=null)return E(X)}}const x=(V,b=!1)=>{for(const X of V.fields)if(!X.type||X.type===m.fS.other||b)return{...V,fields:V.fields.map(k=>k.type&&k.type!==m.fS.other&&!b?k:{...k,type:P(k)||m.fS.other})};return V},M=V=>Boolean(V&&V.hasOwnProperty("columns")),S=V=>Boolean(V&&V.hasOwnProperty("fields"));function D(V){if("fields"in V)return"length"in V&&V.fields[0]?.values?.get?V:new c.v(V);if(V.hasOwnProperty("type")&&V.type==="docs")return h(V);if(V.hasOwnProperty("datapoints")||V.hasOwnProperty("points"))return p(V);if(V.hasOwnProperty("data"))return V.hasOwnProperty("schema")?(0,d.vP)(V):y(V);if(V.hasOwnProperty("columns"))return g(V);if(Array.isArray(V))return new r.i(V);throw console.warn("Can not convert",V),new Error("Unsupported data format")}const T=V=>{const{fields:b}=V,X=V.length,k=[];if(b.length===2){const{timeField:H,timeIndex:Y}=W(V);if(H){const ue=b[Y===0?1:0],q=b[Y];for(let ge=0;ge<X;ge++)k.push([ue.values.get(ge),q.values.get(ge)]);return{alias:V.name,target:(0,i.C)(ue,V),datapoints:k,unit:b[0].config?b[0].config.unit:void 0,refId:V.refId,meta:V.meta}}}for(let H=0;H<X;H++){const Y=[];for(let ee=0;ee<b.length;ee++)Y.push(b[ee].values.get(H));k.push(Y)}return V.meta&&V.meta.json?{alias:b[0].name||V.name,target:b[0].name||V.name,datapoints:b[0].values.toArray(),filterable:b[0].config?b[0].config.filterable:void 0,type:"docs"}:{columns:b.map(H=>{const{name:Y,config:ee}=H;if(ee){const{...ue}=ee;return ue.text=Y,ue}return{text:Y}}),type:"table",refId:V.refId,meta:V.meta,rows:k}};function R(V,b,X=!1){const k=V.fields[b];if(!k)return V;const H=[];for(let ee=0;ee<V.length;ee++)H.push(ee);const Y=(0,s.Mo)(k,X);return H.sort(Y),{...V,fields:V.fields.map(ee=>({...ee,values:new o.o(ee.values,H)}))}}function L(V){return{...V,fields:V.fields.map(b=>{const X=[...b.values.toArray()];return X.reverse(),{...b,values:new f.G(X)}})}}function w(V,b){const X=[];for(const k of V.fields)X.push(k.values.get(b));return X}function A(V){return N(V)}function N(V,b){return{fields:(b?V.fields.filter(b):V.fields).map(H=>{let Y=H.values.toArray();return Y instanceof Float64Array&&(Y=(0,l.n)(H.values)),{name:H.name,type:H.type,config:H.config,values:Y,labels:H.labels}}),refId:V.refId,meta:V.meta,name:V.name}}const W=V=>{for(let b=0;b<V.fields.length;b++)if(V.fields[b].type===m.fS.time)return{timeField:V.fields[b],timeIndex:b};return{}};function I(V){const b=x(D(V));if(b.fields&&b.fields.length)for(const X of b.fields)X.state=null;return b}function F(V){return!V||!(0,t.isArray)(V)?[]:V.map(b=>I(b))}},34472:(G,O,e)=>{"use strict";e.d(O,{hZ:()=>s,m$:()=>i});var t=e(14582),n=e(16911);function u(m){return m.fields.length>2?!1:Boolean(m.fields.find(f=>f.type===t.fS.time))}function s(m){return!m.find(f=>!u(f))}function i(m){for(let f=0;f<m.length;f++){const o=(0,n.sV)(m[f]);if(o.timeField!==void 0&&o.timeIndex!==void 0)return!0}return!1}},99919:(G,O,e)=>{"use strict";e.d(O,{K:()=>u,Z:()=>s});var t=e(69311);let n=()=>t.Ys;const u=i=>{n=i??n},s=i=>i?.timeZone??n()??t.Ys},21053:(G,O,e)=>{"use strict";e.r(O),e.d(O,{isMathString:()=>i,isValid:()=>f,parse:()=>m,parseDateMath:()=>o,roundToFiscal:()=>l});var t=e(82897),n=e.n(t),u=e(46519);const s=["y","M","w","d","h","m","s","Q"];function i(r){return r?!!(typeof r=="string"&&(r.substring(0,3)==="now"||r.includes("||"))):!1}function m(r,d,c,g){if(r){if(typeof r!="string")return(0,u.v9)(r)?r:(0,t.isDate)(r)?(0,u.CQ)(r):void 0;{let p,y="",h,a;return r.substring(0,3)==="now"?(p=(0,u.GY)(c),y=r.substring(3)):(h=r.indexOf("||"),h===-1?(a=r,y=""):(a=r.substring(0,h),y=r.substring(h+2)),p=(0,u.CQ)(a,u.VJ)),y.length?o(y,p,d,g):p}}}function f(r){const d=m(r);return d&&(0,u.v9)(d)?d.isValid():!1}function o(r,d,c,g=0){const p=r.replace(/\s/g,""),y=d;let h=0;const a=p.length;for(;h<a;){const v=p.charAt(h++);let C,E,P,x=!1;if(v==="/")C=0;else if(v==="+")C=1;else if(v==="-")C=2;else return;if(isNaN(parseInt(p.charAt(h),10)))E=1;else if(p.length===2)E=parseInt(p.charAt(h),10);else{const M=h;for(;!isNaN(parseInt(p.charAt(h),10));)if(h++,h>10)return;E=parseInt(p.substring(M,h),10)}if(C===0&&E!==1)return;if(P=p.charAt(h++),P==="f"&&(P=p.charAt(h++),x=!0),(0,t.includes)(s,P))C===0?c?x?l(g,y,P,c):y.endOf(P):x?l(g,y,P,c):y.startOf(P):C===1?y.add(E,P):C===2&&y.subtract(E,P);else return}return y}function l(r,d,c,g){switch(c){case"y":return g?l(r,d,c,!1).add(11,"M").endOf("M"):d.subtract((d.month()-r+12)%12,"M").startOf("M"),d;case"Q":return g?l(r,d,c,!1).add(2,"M").endOf("M"):d.subtract((d.month()-r+3)%3,"M").startOf("M"),d;default:return}}},37556:(G,O,e)=>{"use strict";e.d(O,{IA:()=>r,Ks:()=>m,RA:()=>i,iX:()=>f,jO:()=>l,qb:()=>o,vT:()=>s});var t=e(81396),n=e(17454);const u={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function s(d,c=!0){const g=(0,n.Z)(d);return Object.entries(g).reduce((p,[y,h])=>h&&h!==0&&!(y==="seconds"&&!c&&p)?p+`${p!==""?" ":""}${h}${u[y][0]}`:p,"")}function i(d){return d.split(" ").reduce((c,g)=>{const p=g.match(/(\d+)(.+)/),y=p?.[1],h=p?.[2];if(!(y&&h))return c;const a=Object.entries(u).find(([C,E])=>E?.includes(p[2])),v=parseInt(y,10);return a?{...c,[a[0]]:v}:c},{})}function m(d,c){return(0,t.Z)(d,c)}function f(d){const c=new Date;return m(c,d).getTime()-c.getTime()}function o(d){return!isNaN(Date.parse(d))}function l(d){for(const c of d.trim().split(" ")){const g=c.match(/(\d+)(.+)/);if(g===null||g.length!==3||!Object.entries(u).find(([y,h])=>h?.includes(g[2]))?.[0])return!1}return!0}function r(d){const c=["h","m","s","ms","us","\xB5s","ns"];for(const g of d.trim().split(" ")){const p=g.match(/([0-9]*[.]?[0-9]+)(.+)/);if(p===null||p.length!==3||!c.includes(p[2]))return!1}return!0}},47513:(G,O,e)=>{"use strict";e.d(O,{Ji:()=>s,U6:()=>i,zf:()=>u});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class u{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(o){this.fullDate=o.fullDate,this.interval=o.interval,o.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=s({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=s({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=s({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=s({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=s({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(o){return`time:${o?this.fullDateMS:this.fullDate}`}}function s(f,o,l){if(m())return l??t;!o&&navigator&&(o=[...navigator.languages]);const r=new Intl.DateTimeFormat(o||void 0,f),d=r.formatToParts(new Date),g={year:"YYYY",month:"MM",day:"DD",hour:r.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return d.map(p=>g[p.type]||p.value).join("")}const i=new u,m=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},38849:(G,O,e)=>{"use strict";e.d(O,{E8:()=>f,Fm:()=>o,Hk:()=>l,dq:()=>i,lf:()=>m});var t=e(92467),n=e.n(t),u=e(99919),s=e(47513);const i=(c,g)=>d(c,(0,u.Z)(g)).format(r(g)),m=(c,g)=>d(c,(0,u.Z)(g)).format(),f=(c,g)=>d(c,(0,u.Z)(g)).fromNow(),o=(c,g)=>d(c,(0,u.Z)(g)).format(`${s.U6.fullDate} z`),l=(c,g)=>d(c,(0,u.Z)(g)).format("z"),r=c=>c?.defaultWithMS?c?.format??s.U6.fullDateMS:c?.format??s.U6.fullDate,d=(c,g)=>{const p=c,y=n().tz.zone(g);if(y&&y.name)return n().utc(p).tz(y.name);switch(g){case"utc":return n().utc(p);default:return n().utc(p).local()}}},46034:(G,O,e)=>{"use strict";e.d(O,{$8:()=>s.$8,CQ:()=>u.CQ,C_:()=>u.C_,E8:()=>m.E8,Fm:()=>m.Fm,GY:()=>u.GY,Hk:()=>m.Hk,IA:()=>o.IA,J:()=>f.J,Ji:()=>i.Ji,K7:()=>l.K,Kd:()=>u.Kd,Ks:()=>o.Ks,Ls:()=>u.Ls,Pr:()=>s.Pr,RA:()=>o.RA,RQ:()=>s.RQ,Rn:()=>t,U6:()=>i.U6,VJ:()=>u.VJ,Vs:()=>s.Vs,ZV:()=>s.ZV,Ze:()=>l.Z,cT:()=>n,dq:()=>m.dq,iX:()=>o.iX,i_:()=>u.i_,ig:()=>u.ig,jN:()=>u.jN,jO:()=>o.jO,k4:()=>u.k4,lf:()=>m.lf,np:()=>u.Ks,qb:()=>o.qb,v9:()=>u.v9,vT:()=>o.vT,zf:()=>i.zf,zh:()=>u.zh});var t=e(21053),n=e(33180),u=e(46519),s=e(38306),i=e(47513),m=e(38849),f=e(85052),o=e(37556),l=e(99919)},46519:(G,O,e)=>{"use strict";e.d(O,{CQ:()=>r,C_:()=>d,GY:()=>c,Kd:()=>i,Ks:()=>l,Ls:()=>y,VJ:()=>u,i_:()=>s,ig:()=>g,jN:()=>p,k4:()=>m,v9:()=>f,zh:()=>o});var t=e(36365),n=e.n(t);const u=n().ISO_8601,s=h=>{n().locale(h)},i=()=>n().locale(),m=()=>n().localeData(),f=h=>n().isMoment(h),o=(h,a)=>n().utc(h,a),l=(h,a)=>n().duration(h,a),r=(h,a)=>n()(h,a),d=h=>r(h),c=(h,a,v)=>h==="utc"?o(a,v):r(a,v),g=h=>n().weekdays().findIndex(a=>a.toLowerCase()===h.toLowerCase()),p=h=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(a=>a.toLowerCase()===h.toLowerCase()),y=h=>{const a="-weekStart",v=i().replace(a,""),C=h?p(h):-1;C!==-1?n().locale(v+a,{parentLocale:v,week:{dow:C}}):s(v)}},85052:(G,O,e)=>{"use strict";e.d(O,{J:()=>l});var t=e(82897),n=e.n(t),u=e(92467),s=e.n(u),i=e(99919),m=e(21053),f=e(47513),o=e(46519);const l=(c,g)=>(0,o.v9)(c)?c:typeof c=="string"?r(c,g):d(c,g),r=(c,g)=>{if(c.indexOf("now")!==-1)return(0,m.isValid)(c)&&(0,m.parse)(c,g?.roundUp,g?.timeZone,g?.fiscalYearStartMonth)||s()();const p=(0,i.Z)(g),y=s().tz.zone(p),h=g?.format??f.U6.fullDate;if(y&&y.name)return s().tz(c,h,y.name);switch((0,t.lowerCase)(p)){case"utc":return s().utc(c,h);default:return s()(c,h)}},d=(c,g)=>{const p=c,y=(0,i.Z)(g),h=s().tz.zone(y);if(h&&h.name)return s().tz(p,h.name);switch((0,t.lowerCase)(y)){case"utc":return s().utc(p);default:return s()(p)}}},33180:(G,O,e)=>{"use strict";e.r(O),e.d(O,{calculateInterval:()=>P,convertRawToRange:()=>y,describeInterval:()=>S,describeTextRange:()=>d,describeTimeRange:()=>c,describeTimeRangeAbbreviation:()=>p,intervalToMs:()=>T,intervalToSeconds:()=>D,isFiscal:()=>a,isRelativeTimeRange:()=>v,isValidTimeSpan:()=>g,msRangeToTimeString:()=>E,relativeToTimeRange:()=>w,roundInterval:()=>R,secondsToHms:()=>C,timeRangeToRelative:()=>L});var t=e(82897),n=e.n(t),u=e(21053),s=e(38849),i=e(46519),m=e(85052);const f={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},o=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],l=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],r={};(0,t.each)(o,A=>{r[A.from+" to "+A.to]=A}),(0,t.each)(l,A=>{r[A.from+" to "+A.to]=A});function d(A){const N=A.indexOf("+")!==0;A.indexOf("now")===-1&&(A=(N?"now-":"now")+A);let W=r[A+" to now"];if(W)return W;N?W={from:A,to:"now"}:W={from:"now",to:A};const I=/^now([-+])(\d+)(\w)/.exec(A);if(I){const F=I[3],V=parseInt(I[2],10),b=f[F];b&&(W.display=N?"Last ":"Next ",W.display+=V+" "+b.display,W.section=b.section,V>1&&(W.display+="s"))}else W.display=W.from+" to "+W.to,W.invalid=!0;return W}function c(A,N){const W=r[A.from.toString()+" to "+A.to.toString()];if(W)return W.display;const I={timeZone:N};if((0,i.v9)(A.from)&&(0,i.v9)(A.to))return(0,s.dq)(A.from,I)+" to "+(0,s.dq)(A.to,I);if((0,i.v9)(A.from)){const F=u.parse(A.to,!0,"utc");return F?(0,s.dq)(A.from,I)+" to "+(0,s.E8)(F,I):""}if((0,i.v9)(A.to)){const F=u.parse(A.from,!1,"utc");return F?(0,s.E8)(F,I)+" to "+(0,s.dq)(A.to,I):""}return A.to.toString()==="now"?d(A.from).display:A.from.toString()+" to "+A.to.toString()}const g=A=>A.indexOf("$")===0||A.indexOf("+$")===0?!0:d(A).invalid!==!0,p=(A,N)=>{if((0,i.v9)(A.from))return(0,s.Hk)(A.from,{timeZone:N});const W=u.parse(A.from,!0);return W?(0,s.Hk)(W,{timeZone:N}):""},y=(A,N,W)=>{const I=(0,m.J)(A.from,{roundUp:!1,timeZone:N,fiscalYearStartMonth:W}),F=(0,m.J)(A.to,{roundUp:!0,timeZone:N,fiscalYearStartMonth:W});return u.isMathString(A.from)||u.isMathString(A.to)?{from:I,to:F,raw:A}:{from:I,to:F,raw:{from:I,to:F}}};function h(A){return typeof A=="string"?A.indexOf("now")>=0:!1}function a(A){return typeof A.raw.from=="string"&&A.raw.from.indexOf("f")>0?!0:typeof A.raw.to=="string"&&A.raw.to.indexOf("f")>0}function v(A){return h(A.from)||h(A.to)}function C(A){const N=Math.floor(A/31536e3);if(N)return N+"y";const W=Math.floor(A%31536e3/86400);if(W)return W+"d";const I=Math.floor(A%31536e3%86400/3600);if(I)return I+"h";const F=Math.floor(A%31536e3%86400%3600/60);if(F)return F+"m";const V=Math.floor(A%31536e3%86400%3600%60);if(V)return V+"s";const b=Math.floor(A*1e3);return b?b+"ms":"less than a millisecond"}function E(A){const N=Number((A/1e3).toFixed()),W=Math.floor(N/60/60),I=Math.floor(N/60)-W*60,F=Number((N%60).toFixed());let V=W?W+"h":"",b=I?I+"min":"",X=F?F+"sec":"";return V&&b?V=V+" ":V=V,(b||V)&&X?b=b+" ":b=b,V+b+X||"less than 1sec"}function P(A,N,W){let I=1;W&&(I=T(W));let F=R((A.to.valueOf()-A.from.valueOf())/N);return I>F&&(F=I),{intervalMs:F,interval:C(F/1e3)}}const x=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,M={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function S(A){if(Number(A))return{sec:M.s,type:"s",count:parseInt(A,10)};const N=A.match(x);if(!N||!(0,t.has)(M,N[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(M).join(", ")}"`);return{sec:M[N[2]],type:N[2],count:parseInt(N[1],10)}}function D(A){const N=S(A);return N.sec*N.count}function T(A){const N=S(A);return N.sec*1e3*N.count}function R(A){switch(!0){case A<10:return 1;case A<15:return 10;case A<35:return 20;case A<75:return 50;case A<150:return 100;case A<350:return 200;case A<750:return 500;case A<1500:return 1e3;case A<3500:return 2e3;case A<7500:return 5e3;case A<12500:return 1e4;case A<17500:return 15e3;case A<25e3:return 2e4;case A<45e3:return 3e4;case A<9e4:return 6e4;case A<21e4:return 12e4;case A<45e4:return 3e5;case A<75e4:return 6e5;case A<105e4:return 9e5;case A<15e5:return 12e5;case A<27e5:return 18e5;case A<54e5:return 36e5;case A<9e6:return 72e5;case A<162e5:return 108e5;case A<324e5:return 216e5;case A<864e5:return 432e5;case A<6048e5:return 864e5;case A<18144e5:return 6048e5;case A<36288e5:return 2592e6;default:return 31536e6}}function L(A,N=(0,i.CQ)()){const W=N.unix()-A.from.unix(),I=N.unix()-A.to.unix();return{from:W,to:I}}function w(A,N=(0,i.CQ)()){const W=(0,i.CQ)(N).subtract(A.from,"s"),I=A.to===0?(0,i.CQ)(N):(0,i.CQ)(N).subtract(A.to,"s");return{from:W,to:I,raw:{from:W,to:I}}}},38306:(G,O,e)=>{"use strict";e.d(O,{$8:()=>r,Pr:()=>o,RQ:()=>m,Vs:()=>f,ZV:()=>l});var t=e(82897),n=e.n(t),u=e(92467),s=e.n(u),i=e(99919),m=(h=>(h.default="",h.localBrowserTime="browser",h.utc="utc",h))(m||{});const f=h=>{switch((0,i.Z)({timeZone:h})){case"browser":return"Local browser time";case"utc":return"UTC";default:return h}},o=(h,a)=>{const v=d(h,a);return v||g(h,a)},l=(0,t.memoize)((h=!1)=>{const a=[];return h===!0?a.push("","browser","utc"):h&&a.push(...h),s().tz.names().reduce((v,C)=>{const E=y[C];return!Array.isArray(E)||E.length===0||v.push(C),v},a)}),r=(0,t.memoize)((h=!1)=>{const v=l(h).reduce((C,E)=>{const P=E.indexOf("/");if(P===-1){const M="";return C[M]=C[M]??[],C[M].push(E),C}const x=E.slice(0,P);return C[x]=C[x]??[],C[x].push(E),C},{});return Object.keys(v).map(C=>({name:C,zones:v[C]}))}),d=(h,a)=>{switch(h){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:h,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const v=(0,i.Z)(),E=(v==="browser"||v==="utc"?d(v,a):g(v,a))??{};return{countries:y[v]??[],abbreviation:"",offsetInMins:0,...E,ianaName:E.ianaName,name:"Default",zone:h}}case"browser":{const v=s().tz.guess(!0),C=g(v,a)??{};return{countries:y[v]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...C,name:"Browser Time",ianaName:C.ianaName,zone:h}}default:return}},c=h=>/^(\+|\-).+/.test(h)?"":h,g=(h,a)=>{const v=s().tz.zone(h);if(v)return{name:h,ianaName:v.name,zone:h,countries:y[h]??[],abbreviation:c(v.abbr(a)),offsetInMins:v.utcOffset(a)}},p={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},y=(()=>s().tz.countries().reduce((h,a)=>s().tz.zonesForCountry(a).reduce((C,E)=>{C[E]||(C[E]=[]);const P=p[a];return P&&C[E].push({code:a,name:P}),C},h),{}))()},85081:(G,O,e)=>{"use strict";e.d(O,{F:()=>i});var t=e(51125),n=e.n(t),u=e(46060),s=e(14542);class i{constructor(){this.subscribers=new Map,this.emitter=new(n())}publish(o){this.emitter.emit(o.type,o)}subscribe(o,l){return this.getStream(o).subscribe({next:l})}getStream(o){return new u.y(l=>{const r=d=>{l.next(d)};return this.emitter.on(o.type,r),this.subscribers.set(r,l),()=>{this.emitter.off(o.type,r),this.subscribers.delete(r)}})}newScopedBus(o,l){return new m([o],this,l)}emit(o,l){typeof o=="string"?this.emitter.emit(o,{type:o,payload:l}):this.emitter.emit(o.name,{type:o.name,payload:l})}on(o,l,r){if(l.wrapper=d=>{l(d.payload)},typeof o=="string"?this.emitter.on(o,l.wrapper):this.emitter.on(o.name,l.wrapper),r){const d=r.$on("$destroy",()=>{this.off(o,l),d()})}}off(o,l){if(typeof o=="string"){this.emitter.off(o,l.wrapper);return}this.emitter.off(o.name,l.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[o,l]of this.subscribers)l.complete(),this.subscribers.delete(o)}}class m{constructor(o,l,r){this.path=o,this.eventBus=l,this.filter=d=>this.filterConfig.onlyLocal?d.origin===this:!0,this.filterConfig=r??{onlyLocal:!1}}publish(o){o.origin||(o.origin=this),this.eventBus.publish(o)}getStream(o){return this.eventBus.getStream(o).pipe((0,s.h)(this.filter))}subscribe(o,l){return this.getStream(o).subscribe({next:l})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(o,l){return new m([...this.path,o],this,l)}}},55294:(G,O,e)=>{"use strict";e.d(O,{Pl:()=>m,es:()=>n,n1:()=>i,v9:()=>s,xH:()=>u});var t=e(62316);class n extends t.R{}n.type="data-hover";class u extends t.m{}u.type="data-hover-clear";class s extends t.R{}s.type="data-select";class i extends t.R{}i.type="annotation-event";class m extends t.R{}m.type="dashboard-loaded"},39253:(G,O,e)=>{"use strict";e.d(O,{X:()=>n});const t=new Set;function n(u){if(t.has(u))throw new Error(`There is already an event defined with type '${u}'`);return t.add(u),{name:u}}},60626:(G,O,e)=>{"use strict";e.d(O,{Fb:()=>u.F,Pl:()=>s.Pl,R_:()=>n.R,Xw:()=>t.X,es:()=>s.es,mA:()=>n.m,n1:()=>s.n1,v9:()=>s.v9,xH:()=>s.xH});var t=e(39253),n=e(62316),u=e(85081),s=e(55294)},62316:(G,O,e)=>{"use strict";e.d(O,{R:()=>n,m:()=>t});class t{constructor(){this.type=this.__proto__.constructor.type}}class n extends t{constructor(s){super(),this.payload=s}}},18359:(G,O,e)=>{"use strict";e.d(O,{Z:()=>n});var t=e(64140);class n extends t.B{}},36512:(G,O,e)=>{"use strict";e.d(O,{U:()=>c,g:()=>p});var t=e(82897),n=e.n(t),u=e(16911),s=e(85052),i=e(46519),m=e(14582),f=e(63279),o=e(67008),l=e(20112),r=e(59309);const d={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function c(h){if(!h||(0,t.isEmpty)(h)||!h.field)return g;const a=h.field,v=a.config??{};let C=v.unit,E=C&&(d[C]||C.startsWith("time:")),P=!1;if(a.type===m.fS.time&&!E){if(C="dateTimeAsSystem",E=!0,a.values&&a.values.length>1){let w=a.values.get(0),A=a.values.get(a.values.length-1);typeof w=="string"?(w=(0,s.J)(w).unix(),A=(0,s.J)(A).unix()):(w/=1e3,A/=1e3),P=Math.abs(A-w)<60}}else a.type===m.fS.boolean?(0,l.br)(C)||(C="bool"):!C&&a.type===m.fS.string&&(C="string");const x=C?.startsWith("currency"),M=(0,l.br)(C),S=a.type===m.fS.number,T=!E&&!x&&!M&&!(C==="locale")&&S&&v.decimals==null,R=(0,l.Cf)(C||"none"),L=(0,r.NI)(a,h.theme);return(w,A)=>{const{mappings:N}=v,W=C==="string";E&&typeof w=="string"&&(w=(0,i.zh)(w).valueOf());let I=W?NaN:(0,f.I)(w),F,V,b,X,k,H;if(N&&N.length>0){const ee=(0,o.vh)(N,w);ee&&(ee.text!=null&&(F=ee.text),ee.color!=null&&(X=h.theme.visualization.getColorByName(ee.color)),ee.icon!=null&&(k=ee.icon))}if(!Number.isNaN(I)){if(F==null&&!(0,t.isBoolean)(w)){let ee;T&&A!=null?(ee=R(I,A,null,h.timeZone,P),ee.text=+ee.text+""):ee=R(I,v.decimals,null,h.timeZone,P),F=ee.text,b=ee.suffix,V=ee.prefix}if(X==null){const ee=L(I);X=ee.color,H=ee.percent}}if(F==null&&(0,t.isArray)(w)&&(F=(0,t.join)(w,", ")),F==null&&(F=(0,t.toString)(w),F||(v.noValue?F=v.noValue:F="")),!X){const ee=L(-1/0);X=ee.color,H=ee.percent}const Y={text:F,numeric:I,prefix:V,suffix:b,color:X};return k!=null&&(Y.icon=k),H!=null&&(Y.percent=H),Y}}function g(h){return{text:(0,t.toString)(h),numeric:(0,f.I)(h)}}function p(){return h=>({text:(0,u.DP)(h)==="other"?`${JSON.stringify(h,y())}`:`${h}`,numeric:null})}const y=()=>{const h=new WeakSet;return(a,v)=>{if(typeof v=="object"&&v!==null){if(h.has(v))return;h.add(v)}return v}}},425:(G,O,e)=>{"use strict";e.d(O,{QY:()=>r,WO:()=>f,YO:()=>d,fD:()=>l});var t=e(32701),n=e(21760),u=e(66926),s=e(64140),i=e(59309),m=e(58230);const f=new s.B(()=>[{id:u.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:c},{id:u.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(g,p)=>(y,h,a)=>{const v=a??m.yM;return p.visualization.getColorByName(v.color)}},new o({id:u.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:g=>g.visualization.palette}),new o({id:"continuous-GrYlRd",name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:g=>["green","yellow","red"]}),new o({id:"continuous-RdYlGr",name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:g=>["red","yellow","green"]}),new o({id:"continuous-BlYlRd",name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:g=>["dark-blue","super-light-yellow","dark-red"]}),new o({id:"continuous-YlRd",name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:g=>["super-light-yellow","dark-red"]}),new o({id:"continuous-BlPu",name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:g=>["blue","purple"]}),new o({id:"continuous-YlBl",name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:g=>["super-light-yellow","dark-blue"]}),new o({id:"continuous-blues",name:"Blues",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-blue"]}),new o({id:"continuous-reds",name:"Reds",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-red"]}),new o({id:"continuous-greens",name:"Greens",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-green"]}),new o({id:"continuous-purples",name:"Purples",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-purple"]})]);class o{constructor(p){this.id=p.id,this.name=p.name,this.description=p.description,this.getNamedColors=p.getColors,this.isContinuous=p.isContinuous,this.isByValue=p.isByValue}getColors(p){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===p?this.colorCache:(this.colorCache=this.getNamedColors(p).map(p.visualization.getColorByName),this.colorCacheTheme=p,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.hD)(this.colorCache)),this.interpolator}getCalculator(p,y){const h=this.getColors(y);return this.isByValue?this.isContinuous?(a,v,C)=>this.getInterpolator()(v):(a,v,C)=>h[v*(h.length-1)]:(a,v,C)=>{const E=p.state?.seriesIndex??0;return h[E%h.length]}}}function l(g){return f.get(g.config.color?.mode??u.S.Thresholds)}function r(g){return f.get(g??u.S.Thresholds)}function d(g,p){const y=l(g);if(!y.isByValue)return{color:y.getCalculator(g,p)(0,0),threshold:m.yM,percent:1};const h=(0,i.NI)(g,p),a=g.config.color?.seriesBy??"last",C=(0,n.Kx)({field:g,reducers:[a]})[a]??0;return h(C)}function c(g,p){return()=>p.visualization.getColorByName(g.config.color?.fixedColor??u.R)}},17128:(G,O,e)=>{"use strict";e.d(O,{E1:()=>g,HU:()=>d,cB:()=>h,dE:()=>y,gG:()=>P,nG:()=>a,n_:()=>c,pZ:()=>p,sg:()=>x});var t=e(82897),n=e.n(t),u=e(50235),s=e(16911),i=e(3249),m=e(21760),f=e(85854),o=e(14582),l=e(36512),r=e(89890);const d="__series.name",c="__field.displayName",g="__field.labels",p="__calc",y="__cell_",h=25,a=D=>{const{replaceVariables:T,reduceOptions:R,timeZone:L,theme:w}=D,A=R.calcs.length?R.calcs:[m.gz.last],N=[],W=(0,i.sq)(R.fields?{id:f.mi.byRegexp,options:R.fields}:{id:f.mi.numeric}),I=D.data??[],F=R.limit?R.limit:h,V={};let b=!1;for(let X=0;X<I.length&&!b;X++){const k=I[X],{timeField:H}=(0,s.sV)(k),Y=new u.U(k);for(let ee=0;ee<k.fields.length&&!b;ee++){const ue=k.fields[ee],q=ue.getLinks;if(!W(ue,k,I))continue;let ge=ue.config;ue.state?.range&&(ge={...ge,...ue.state?.range});const De=ue.config.displayName??"",fe=ue.display??(0,l.U)({field:ue,theme:D.theme,timeZone:L});if(R.values){const me=De.indexOf(y)>=0;for(let ce=0;ce<ue.values.length;ce++){if(me)for(let J=0;J<k.fields.length;J++){const ne=k.fields[J].values.get(ce);V[y+J]={value:ne,text:(0,t.toString)(ne)}}ue.state=C(ue,N.length);const ie=fe(ue.values.get(ce)),re=v(k,ue,ce,T,V),Ee=E(re,D.fieldConfig,w);if(N.push({name:"",field:ge,display:{...ie,title:re,color:Ee??ie.color},view:Y,colIndex:ee,rowIndex:ce,getLinks:q?()=>q({valueRowIndex:ce}):()=>[],hasLinks:P(ue)}),N.length>=F){b=!0;break}}}else{const me=(0,m.Kx)({field:ue,reducers:A});for(const ce of A){V[p]={value:ce,text:ce};const ie=fe(me[ce]);De!==""?ie.title=T(De,{...ue.state?.scopedVars,...V}):ie.title=(0,r.C)(ue,k,I);let re;D.sparkline&&(re={y:k.fields[ee],x:H},ce===m.gz.last?re.highlightIndex=re.y.values.length-1:ce===m.gz.first&&(re.highlightIndex=0)),N.push({name:ce,field:ge,display:ie,sparkline:re,view:Y,colIndex:ee,getLinks:q?()=>q({calculatedValue:ie}):()=>[],hasLinks:P(ue)})}}}}return N.length===0&&N.push(M(D)),N};function v(D,T,R,L,w){let A=[],N=0;if(T.config.displayName)return L(T.config.displayName,{...T.state?.scopedVars,...w});for(const W of D.fields)if(W!==T)if(W.type===o.fS.string){const I=W.values.get(R)??"",F=W.display?W.display(I).text:I;F.length>0&&A.push(F)}else W.type===o.fS.number&&N++;return(N||A.length===0)&&A.push((0,r.C)(T,D)),A.join(" ")}function C(D,T){return{...D.state,seriesIndex:T}}function E(D,T,R){for(const L of T.overrides)if(L.matcher.id==="byName"&&L.matcher.options===D){for(const w of L.properties)if(w.id==="color"&&w.value)return R.visualization.getColorByName(w.value.fixedColor)}return null}function P(D){return D.config?.links?.length?D.config.links.length>0:!1}function x(D){const T={title:"",text:""};let R=0,L=0;for(let w=0;w<D.length;w++){const A=D[w].display;A.text&&A.text.length>T.text.length&&(T.text=A.text),A.title&&A.title.length>T.title.length&&(T.title=A.title),A.prefix&&A.prefix.length>R&&(T.prefix=A.prefix,R=A.prefix.length),A.suffix&&A.suffix.length>L&&(T.suffix=A.suffix,L=A.suffix.length)}return T}function M(D){const T="No data",{fieldConfig:R,timeZone:L}=D,{defaults:w}=R,N=(0,l.U)({field:{type:o.fS.other,config:w},theme:D.theme,timeZone:L})(null),W=S(N,T);return{name:T,field:{...w,max:w.max??0,min:w.min??0},display:{text:W,numeric:0,color:N.color},hasLinks:!1}}function S(D,T){return!D||(0,t.isEmpty)(D.text)?T:D.text}},36998:(G,O,e)=>{"use strict";e.d(O,{SM:()=>P,Of:()=>L,Xu:()=>E,oB:()=>R,Cc:()=>w,gb:()=>T});var t=e(82897),n=e(68404),u=e(64076),s=e(16911),i=e(38067),m=e(64724),f=e(21760),o=e(3249),l=e(14582),r=e(66926),d=e(83383),c=e(89029),g=e(20112),p=e(36512),y=e(89890),h=e(94847),a=e(35363),v=e(15355);function C(A,N,W){return new Proxy({},{get:(I,F)=>{if(F==="name")return A.name;if(F==="displayName")return(0,y.C)(A,N,W);if(F==="labels"||F==="formattedLabels")return A.labels?{...A.labels,__values:Object.values(A.labels).sort().join(", "),toString:()=>(0,v.aA)(A.labels,"",!0)}:""}})}function E(A){let N=null,W=null;const I=[f.gz.min,f.gz.max];for(const F of A)for(const V of F.fields)if(V.type===l.fS.number){const b=(0,f.Kx)({field:V,reducers:I}),X=b[f.gz.min],k=b[f.gz.max];(N===null||X<N)&&(N=X),(W===null||k>W)&&(W=k)}return{min:N,max:W,delta:(W??0)-(N??0)}}function P(A){if(!A.data)return[];const N=A.fieldConfig;if(!N)return A.data;const W=A.fieldConfigRegistry??a.N;let I=0,F;const V=[];if(N.overrides)for(const b of N.overrides){const X=o.Ls.get(b.matcher.id);X&&V.push({match:X.get(b.matcher.options),properties:b.properties})}return A.data.map((b,X)=>{const k={...b};k.fields=k.fields.map(Y=>({...Y,config:(0,t.cloneDeep)(Y.config),state:{...Y.state}}));const H={__series:{text:"Series",value:{name:(0,y.n)(k,X)}}};for(const Y of k.fields){const ee=Y.config;Y.state.scopedVars={...H,__field:{text:"Field",value:C(Y,k,A.data)}};const ue={field:Y,data:A.data,dataFrameIndex:X,replaceVariables:A.replaceVariables,fieldConfigRegistry:W};S(ee,N.defaults,ue);for(const De of V)if(De.match(Y,k,A.data))for(const fe of De.properties)M(ee,fe,ue);let q=Y.type;if(!q||q===l.fS.other){const De=(0,s.fu)(Y);De&&(q=De)}let ge;if(Y.type===l.fS.number){!F&&(!(0,t.isNumber)(ee.min)||!(0,t.isNumber)(ee.max))&&(F=E(A.data));const De=ee.min??F.min,fe=ee.max??F.max;ge={min:De,max:fe,delta:fe-De}}Y.state.seriesIndex=I,Y.state.range=ge,Y.type=q,Y.type!==l.fS.time&&I++,Y.display=(0,p.U)({field:Y,theme:A.theme,timeZone:A.timeZone}),Y.config.unit!=="dateTimeFromNow"&&(Y.display=x(Y.display,2500)),Y.getLinks=R(k,Y,Y.state.scopedVars,ue.replaceVariables,A.timeZone)}return k})}function x(A,N=2500){const W=new Map;for(let I=-1;I<=15;I++)W.set(I,new Map);return(I,F)=>{let V=W.get(F??-1),b=V.get(I);return b||(V.size===N&&V.clear(),b=A(I,F),b.color&&(b.color=(0,m.asHexString)(b.color)),V.set(I,b)),b}}function M(A,N,W){const F=W.fieldConfigRegistry.getIfExists(N.id);if(!F)return;const V=F.process(N.value,W,F.settings);V==null?F.isCustom&&A.custom?(0,t.unset)(A.custom,F.path):(0,t.unset)(A,F.path):F.isCustom?(A.custom||(A.custom={}),(0,t.set)(A.custom,F.path,V)):(0,t.set)(A,F.path,V)}function S(A,N,W){for(const I of W.fieldConfigRegistry.list())I.isCustom&&!A.custom&&(A.custom={}),D(I.isCustom?A.custom:A,I.isCustom?N.custom:N,I,W);T(A)}function D(A,N,W,I){const F=(0,t.get)(A,W.path);if(F==null){const V=I.fieldConfigRegistry.getIfExists(W.id);if(!V)return;if(V&&V.shouldApply(I.field)){const b=V.process((0,t.get)(N,V.path),I,V.settings);b!=null&&(0,t.set)(A,V.path,b)}}}function T(A){const{thresholds:N}=A;if(A.color?A.color.mode||delete A.color:N&&(A.color={mode:r.S.Thresholds}),A.hasOwnProperty("min")&&A.hasOwnProperty("max")&&A.min>A.max){const W=A.max;A.max=A.min,A.min=W}}const R=(A,N,W,I,F)=>V=>{if(!N.config.links||N.config.links.length===0)return[];const b=d.u.getTimeRangeUrlParams(),{timeField:X}=(0,s.sV)(A);return N.config.links.map(k=>{const H=d.u.getVariablesUrlParams();let Y={},ee={};if(V.valueRowIndex!==void 0&&!isNaN(V.valueRowIndex)){const De=(0,h.z)({frame:A,rowIndex:V.valueRowIndex,timeZone:F});ee={raw:N.values.get(V.valueRowIndex),numeric:De[N.name].numeric,text:De[N.name].text,time:X?X.values.get(V.valueRowIndex):void 0},Y={__data:{value:{name:A.name,refId:A.refId,fields:De},text:"Data"}}}else V.calculatedValue&&(ee={raw:V.calculatedValue.numeric,numeric:V.calculatedValue.numeric,text:(0,g.zc)(V.calculatedValue)});const ue={...W,__value:{text:"Value",value:ee},...Y,[c.W.keepTime]:{text:b,value:b},[c.W.includeVars]:{text:H,value:H}};if(k.onClick)return{href:k.url,title:I(k.title||"",ue),target:k.targetBlank?"_blank":void 0,onClick:(De,fe)=>{k.onClick({origin:fe??N,e:De,replaceVariables:me=>I(me,ue)})},origin:N};if(k.internal)return(0,c._)({link:k,internalLink:k.internal,scopedVars:ue,field:N,range:{},replaceVariables:I});let q=k.onBuildUrl?k.onBuildUrl({origin:N,replaceVariables:I}):k.url;return q&&(d.u.assureBaseUrl(q.replace(/\n/g,"")),q=I(q,ue),q=d.u.processUrl(q)),{href:q,title:I(k.title||"",ue),target:k.targetBlank?"_blank":void 0,origin:N}})};function L(A){if(!A||A.length===0)return[];const N=[...A],W=(0,p.g)();for(let I=0;I<N.length;I++){const F={...N[I]},V=[...F.fields];for(let b=0;b<V.length;b++)V[b]={...V[b],display:W};N[I]={...F,fields:V}}return N}function w(A,N,W,I,F,V){const b=A?.fieldConfigRegistry,X=(0,n.useRef)(0),k=(0,u.Z)(W?.series);return(0,n.useMemo)(()=>{if(!b||!N||!W)return;const H=W?.series;return W.structureRev==null&&H&&k&&!(0,i.nl)(H,k,i.Ch)&&X.current++,{structureRev:X.current,...W,series:P({data:H,fieldConfig:N,fieldConfigRegistry:b,replaceVariables:V,theme:F,timeZone:I})}},[b,N,W,k,I,F,V])}},89890:(G,O,e)=>{"use strict";e.d(O,{C:()=>s,n:()=>u});var t=e(14582),n=e(15355);function u(o,l){if(o.name)return o.name;const r=[];for(const d of o.fields)d.labels&&Object.keys(d.labels).length>0&&r.push(d);return r.length===1?(0,n.aA)(r[0].labels):l===void 0?o.fields.filter(d=>d.type!==t.fS.time).map(d=>s(d,o)).join(", "):o.refId?`Series (${o.refId})`:`Series (${l})`}function s(o,l,r){const d=o.state?.displayName,c=Boolean(r&&r.length>1);if(d&&c===o.state?.multipleFrames)return d;const g=i(o,l,r);return o.state=o.state||{},o.state.displayName=g,o.state.multipleFrames=c,g}function i(o,l,r){const d=o.config?.displayName&&o.config?.displayName.length;let c=d?o.config.displayName:o.name;if(d)return c;if(l&&o.config?.displayNameFromDS)return o.config.displayNameFromDS;if(o.type===t.fS.time&&!o.labels)return c??t.Ls;let g=[],p=!1;if(r&&r.length>1){for(let a=1;a<r.length;a++)if(r[a].name!==r[a-1].name){p=!0;break}}let y=!1,h=!1;if(p&&l?.name&&(g.push(l.name),y=!0),o.name&&o.name!==t.M5&&g.push(o.name),o.labels&&l){let a=f(r??[l]);if(a)o.labels[a]&&(g.push(o.labels[a]),h=!0);else{let v=(0,n.aA)(o.labels);v&&(g.push(v),h=!0)}}return l&&!y&&!h&&o.name===t.M5&&l.name&&l.name.length>0&&(g.push(l.name),y=!0),g.length?c=g.join(" "):o.name?c=o.name:c=t.M5,c===o.name&&(c=m(o,l)),c}function m(o,l){let r=0,d=!1;if(l)for(let c=0;c<l.fields.length;c++){const g=l.fields[c];if(o===g){if(d=!0,r>0){r++;break}}else if(o.name===g.name&&(r++,d))break}return r?`${o.name} ${r}`:o.name}function f(o){let l=null;for(let r=0;r<o.length;r++){const d=o[r];for(const c of d.fields)if(c.labels){for(const g in c.labels)if(l===null)l=g;else if(g!==l)return null}}return l}},94847:(G,O,e)=>{"use strict";e.d(O,{z:()=>i});var t=e(82897),n=e.n(t),u=e(20112),s=e(36512);function i(m){return new Proxy({},{get:(f,o)=>{let l=m.frame.fields.find(g=>o===g.name);if(!l){const g=(0,t.toNumber)(o);l=m.frame.fields[g]}if(l||(l=m.frame.fields.find(g=>o===g.config.displayName)),l||(l=m.frame.fields.find(g=>g.labels?o===g.labels.name:!1)),!l)return;const r=l.display??(0,s.U)(),d=l.values.get(m.rowIndex),c=r(d);return c.toString=()=>(0,u.zc)(c),c}})}},37741:(G,O,e)=>{"use strict";e.d(O,{AE:()=>s.AE,CZ:()=>r.C,Cc:()=>o.Cc,E1:()=>t.E1,HU:()=>t.HU,N6:()=>u.N,NI:()=>d.NI,NN:()=>s.NN,Of:()=>o.Of,Oh:()=>s.Oh,QY:()=>i.QY,SM:()=>o.SM,SO:()=>u.S,U_:()=>n.U,VB:()=>s.VB,W0:()=>s.W0,W4:()=>s.W4,WO:()=>i.WO,YO:()=>i.YO,ZD:()=>m.Z,ZN:()=>s.ZN,bP:()=>f.bP,cB:()=>t.cB,dE:()=>t.dE,fD:()=>i.fD,gE:()=>n.g,gG:()=>t.gG,gb:()=>o.gb,kG:()=>s.kG,m1:()=>f.m1,nG:()=>t.nG,n_:()=>t.n_,nf:()=>r.n,op:()=>s.op,pZ:()=>t.pZ,sg:()=>t.sg,uj:()=>s.uj,xD:()=>d.xD,zv:()=>l.z});var t=e(17128),n=e(36512),u=e(35363),s=e(78798),i=e(425),m=e(18359),f=e(58230),o=e(36998),l=e(94847),r=e(89890),d=e(59309)},78798:(G,O,e)=>{"use strict";e.d(O,{AE:()=>m,NN:()=>s,Oh:()=>n,VB:()=>l,W0:()=>u,W4:()=>r,ZN:()=>o,kG:()=>t,op:()=>f,uj:()=>i});const t=(d,c,g)=>d,n=(d,c,g)=>{if(d!=null)return parseFloat(d)},u=(d,c,g)=>(delete c.field?.state?.displayName,f(d,c,g)),s=(d,c,g)=>d,i=(d,c,g)=>d,m=(d,c,g)=>d,f=(d,c,g)=>d==null?d:g&&g.expandTemplateVars&&c.replaceVariables?c.replaceVariables(d,c.field.state.scopedVars):`${d}`,o=(d,c,g)=>d,l=(d,c,g)=>d,r=(d,c,g)=>d},59309:(G,O,e)=>{"use strict";e.d(O,{NI:()=>f,dz:()=>l,xD:()=>r});var t=e(82897),n=e.n(t),u=e(21760),s=e(14582),i=e(425),m=e(58230);function f(d,c){if(d.type===s.fS.boolean)return o(d,c);const p=(0,i.fD)(d).getCalculator(d,c),y=d.state?.range??l(d);return h=>{let a=0;h!==-1/0&&(a=(h-y.min)/y.delta,Number.isNaN(a)&&(a=0));const v=(0,m.pD)(d,h,a);return{percent:a,threshold:v,color:p(h,a,v)}}}function o(d,c){const g={color:c.visualization.getColorByName("green"),percent:1,threshold:void 0},p={color:c.visualization.getColorByName("red"),percent:0,threshold:void 0},y=(0,i.fD)(d);if(y.isContinuous&&y.getColors){const h=y.getColors(c);g.color=h[h.length-1],p.color=h[0]}return h=>Boolean(h)?g:p}function l(d){if(d.type!==s.fS.number)return{min:0,max:100,delta:100};let c=d.config.min,g=d.config.max;if(!(0,t.isNumber)(c)||!(0,t.isNumber)(g))if(d.values&&d.values.length){const p=(0,u.Kx)({field:d,reducers:[u.gz.min,u.gz.max]});(0,t.isNumber)(c)||(c=p[u.gz.min]),(0,t.isNumber)(g)||(g=p[u.gz.max])}else c=0,g=100;return{min:c,max:g,delta:g-c}}function r(d,c){const{config:g}=d;let{min:p,max:y}=g;return(0,t.isNumber)(p)&&(0,t.isNumber)(y)?g:c||!d.state?.range?{...g,...l(d)}:{...g,...d.state.range}}},35363:(G,O,e)=>{"use strict";e.d(O,{N:()=>u,S:()=>s});var t=e(64140),n=e(18359);const u=new n.Z,s=new t.B},58230:(G,O,e)=>{"use strict";e.d(O,{bP:()=>m,m1:()=>s,pD:()=>i,yM:()=>u});var t=e(66926),n=e(24177);const u={value:0,color:t.R};function s(f,o){if(!o||o.length===0)return u;let l=o[0];for(const r of o)if(f>=r.value)l=r;else break;return l}function i(f,o,l){const{thresholds:r}=f.config;return r?.mode===n.H.Percentage?s(l*100,r?.steps):s(o,r?.steps)}function m(f){return f.sort((o,l)=>o.value-l.value)}},87456:(G,O,e)=>{"use strict";e.d(O,{q:()=>t.q1});var t=e(40538)},24034:(G,O,e)=>{"use strict";e.r(O),e.d(O,{AnnotationChangeEvent:()=>d.n1,AppendedVectors:()=>s.l$,ArrayDataFrame:()=>i.iB,ArrayVector:()=>s.Gt,AsNumberVector:()=>s.sq,BinaryOperationID:()=>t.LH,BinaryOperationVector:()=>s.rM,BusEventBase:()=>d.mA,BusEventWithPayload:()=>d.R_,ByNamesMatcherMode:()=>m.Ys,CSVHeaderStyle:()=>t.x5,CSVReader:()=>t.QM,CircularDataFrame:()=>i.a2,CircularVector:()=>s.dV,ConstantVector:()=>s.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>r.cB,DashboardLoadedEvent:()=>d.Pl,DataFrameView:()=>i.US,DataHoverClearEvent:()=>d.xH,DataHoverEvent:()=>d.es,DataLinkBuiltInVars:()=>t.WC,DataSelectEvent:()=>d.v9,DataSourcePluginContextProvider:()=>E.n,DataTransformerID:()=>m.Wk,DocsId:()=>t.xV,EventBusSrv:()=>d.Fb,FieldCache:()=>i.N,FieldConfigEditorBuilder:()=>t.vo,FieldConfigOptionsRegistry:()=>r.ZD,FieldMatcherID:()=>m.mi,FormattedVector:()=>s.$Y,FrameGeometrySourceMode:()=>p.q,FrameMatcherID:()=>m.E4,ISO_8601:()=>f.VJ,IndexVector:()=>s.rm,InternalTimeZones:()=>f.RQ,LayoutModes:()=>y.l,LegacyMappingType:()=>t.HU,LogsParsers:()=>t.bA,MISSING_VALUE:()=>i.Yi,MatcherID:()=>m.Ff,MutableDataFrame:()=>i.vA,NodeGraphDataFrameFieldNames:()=>t.zG,PanelOptionsEditorBuilder:()=>t.rt,PanelPlugin:()=>h.c,PluginContextProvider:()=>C.b,ReducerID:()=>m.gz,Registry:()=>t.Bz,SortedVector:()=>s.oH,SystemDateFormatsState:()=>f.zf,VAR_CALC:()=>r.pZ,VAR_CELL_PREFIX:()=>r.dE,VAR_FIELD_LABELS:()=>r.E1,VAR_FIELD_NAME:()=>r.n_,VAR_SERIES_NAME:()=>r.HU,ValueMatcherID:()=>m.mE,addDurationToDate:()=>f.Ks,addLogLevelToSeries:()=>t.Ar,anySeriesWithTimeField:()=>i.m$,anyToNumber:()=>t.IX,applyFieldOverrides:()=>r.SM,applyRawFieldOverrides:()=>r.Of,arrayUtils:()=>t.sq,binaryOperators:()=>t.nk,booleanOverrideProcessor:()=>r.W4,booleanValueFormatter:()=>l.IR,buildHistogram:()=>m.gY,calculateFieldStats:()=>t.zd,calculateLogsLabelStats:()=>t.lL,calculateStats:()=>t.i6,checkLogsError:()=>t.Mi,classicColors:()=>t.ZC,colorManipulator:()=>c.r,compareArrayValues:()=>i.nl,compareDataFrameStructures:()=>i.Ch,convertOldAngularValueMappings:()=>t.Jb,createDimension:()=>i.q2,createFieldConfigRegistry:()=>v.j,createTheme:()=>c.j,dataFrameFromJSON:()=>i.vP,dataFrameToJSON:()=>i.Y,dataLinksOverrideProcessor:()=>r.NN,dateMath:()=>f.Rn,dateTime:()=>f.CQ,dateTimeAsMoment:()=>f.C_,dateTimeForTimeZone:()=>f.GY,dateTimeFormat:()=>f.dq,dateTimeFormatISO:()=>f.lf,dateTimeFormatTimeAgo:()=>f.E8,dateTimeFormatWithAbbrevation:()=>f.Fm,dateTimeParse:()=>f.J,decodeFieldValueEntities:()=>i.Jy,decodeFieldValueEnums:()=>i.Ib,deprecationWarning:()=>t.d9,displayNameOverrideProcessor:()=>r.W0,doStandardCalcs:()=>m.uP,durationToMilliseconds:()=>f.iX,ensureTimeField:()=>m.J_,escapeRegex:()=>o.yI,escapeStringForRegex:()=>o.GE,escapeUnescapedString:()=>t.l3,eventFactory:()=>d.Xw,fieldColorModeRegistry:()=>r.WO,fieldMatchers:()=>m.Ls,fieldReducers:()=>m.TB,filterFieldConfigOverrides:()=>a.aS,findCommonLabels:()=>t.FT,findHighlightChunksInText:()=>o.Xt,findMatchesInText:()=>o.lu,findUniqueLabels:()=>t.IU,formatLabels:()=>t.aA,formattedValueToString:()=>l.zc,frameMatchers:()=>m.Ac,getActiveThreshold:()=>r.m1,getAllValuesFromDimension:()=>i.r7,getColumnFromDimension:()=>i.$q,getColumnsFromDimension:()=>i.GV,getDataFrameRow:()=>i.fh,getDataSourceRef:()=>t.iU,getDataSourceUID:()=>t.BT,getDimensionByName:()=>i.YP,getDisplayProcessor:()=>r.U_,getDisplayValueAlignmentFactors:()=>r.sg,getFieldColorMode:()=>r.QY,getFieldColorModeForField:()=>r.fD,getFieldConfigWithMinMax:()=>r.xD,getFieldDisplayName:()=>r.CZ,getFieldDisplayValues:()=>r.nG,getFieldDisplayValuesProxy:()=>r.zv,getFieldMatcher:()=>m.sq,getFieldSeriesColor:()=>r.YO,getFieldTypeFromValue:()=>i.DP,getFlotPairs:()=>t.k8,getFlotPairsConstant:()=>t.HE,getFrameDisplayName:()=>r.nf,getFrameMatchers:()=>m.b9,getHistogramFields:()=>m.qr,getLinksSupplier:()=>M.oB,getLocale:()=>f.Kd,getLocaleData:()=>f.k4,getLogLevel:()=>t.ZO,getLogLevelFromKey:()=>t.jx,getPanelOptionsWithDefaults:()=>a.d4,getParser:()=>t.MT,getProcessedDataFrames:()=>i.F9,getRawDisplayProcessor:()=>r.gE,getScaleCalculator:()=>r.NI,getSeriesTimeStep:()=>t.e4,getTimeField:()=>i.sV,getTimeZone:()=>f.Ze,getTimeZoneGroups:()=>f.$8,getTimeZoneInfo:()=>f.Pr,getTimeZones:()=>f.ZV,getValueFormat:()=>l.Cf,getValueFormats:()=>l.QW,getValueFormatterIndex:()=>l.Td,getValueFromDimension:()=>i.jC,getValueMatcher:()=>m.IG,getWeekdayIndex:()=>f.ig,getWeekdayIndexByEnglishName:()=>f.jN,guessDecimals:()=>t.dP,guessFieldTypeForField:()=>i.fu,guessFieldTypeFromNameAndValue:()=>i._m,guessFieldTypeFromValue:()=>i.LI,guessFieldTypes:()=>i.SX,hasLinks:()=>r.gG,hasMsResolution:()=>t.fp,histogramBucketSizes:()=>m.Zi,histogramFieldInfo:()=>m.py,histogramFieldsToFrame:()=>m.zM,histogramFrameBucketMaxFieldName:()=>m.cO,histogramFrameBucketMinFieldName:()=>m.wL,histogramTransformer:()=>m.Op,identityOverrideProcessor:()=>r.kG,incrRound:()=>m.Jz,incrRoundDn:()=>m.mB,incrRoundUp:()=>m.UO,intervalToAbbreviatedDurationString:()=>f.vT,isBooleanUnit:()=>l.br,isCustomFieldProp:()=>a.Lc,isDataFrame:()=>i.aY,isDataSourcePluginContext:()=>x.v,isDataSourceRef:()=>t.cv,isDateTime:()=>f.v9,isHistogramFrameBucketMaxFieldName:()=>m.kl,isHistogramFrameBucketMinFieldName:()=>m.Ok,isStandardFieldProp:()=>a._k,isTableData:()=>i.Ji,isValidDate:()=>f.qb,isValidDuration:()=>f.jO,isValidGoDuration:()=>f.IA,localTimeFormat:()=>f.Ji,locale:()=>l.SP,locationUtil:()=>t.uT,makeClassES5Compatible:()=>t.s2,mapInternalLinkToExplore:()=>t._N,matchAllLabels:()=>t.VS,monacoLanguageRegistry:()=>g.F,numberOverrideProcessor:()=>r.Oh,objRemoveUndefined:()=>t.Hh,onUpdateDatasourceJsonDataOption:()=>t._R,onUpdateDatasourceJsonDataOptionChecked:()=>t.hz,onUpdateDatasourceJsonDataOptionSelect:()=>t.nx,onUpdateDatasourceOption:()=>t.z_,onUpdateDatasourceResetOption:()=>t.HD,onUpdateDatasourceSecureJsonDataOption:()=>t.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.TX,outerJoinDataFrames:()=>m.JP,parseDuration:()=>f.RA,parseFlags:()=>o.TL,parseLabels:()=>t.J8,rangeUtil:()=>f.cT,readCSV:()=>t.uP,reduceField:()=>m.Kx,renderMarkdown:()=>o.ap,renderTextPanelMarkdown:()=>o.xH,restoreCustomOverrideRules:()=>a.__,reverseDataFrame:()=>i.Y6,roundDecimals:()=>t.O9,scaledUnits:()=>l.Qj,selectOverrideProcessor:()=>r.AE,serializeStateToUrlParam:()=>t.S,setLocale:()=>f.i_,setTimeZoneResolver:()=>f.K7,setWeekStart:()=>f.Ls,shallowCompare:()=>i.Vv,simpleCountUnit:()=>l.SR,sortDataFrame:()=>i.aK,sortInAscendingOrder:()=>t.DA,sortInDescendingOrder:()=>t.$8,sortLogRows:()=>t.$u,sortLogsResult:()=>t.j0,sortThresholds:()=>r.bP,standardEditorsRegistry:()=>r.SO,standardFieldConfigEditorRegistry:()=>r.N6,standardTransformers:()=>m.YR,standardTransformersRegistry:()=>m.Ze,stringFormater:()=>l.vb,stringOverrideProcessor:()=>r.op,stringStartsAsRegEx:()=>o.oH,stringToJsRegex:()=>o.jO,stringToMs:()=>o.e0,systemDateFormats:()=>f.U6,textUtil:()=>o.QX,thresholdsOverrideProcessor:()=>r.ZN,timeZoneAbbrevation:()=>f.Hk,timeZoneFormatUserFriendly:()=>f.Vs,toCSV:()=>t.MJ,toDataFrame:()=>i.g0,toDataFrameDTO:()=>i.og,toDuration:()=>f.np,toFilteredDataFrameDTO:()=>i.Aw,toFixed:()=>l.FH,toFixedScaled:()=>l.bn,toFixedUnit:()=>l.q2,toFloatOrUndefined:()=>o.dz,toIntegerOrUndefined:()=>o.By,toLegacyResponseData:()=>i.Zr,toNumberString:()=>o.PF,toOption:()=>t.Er,toPascalCase:()=>o.Mh,toUtc:()=>f.zh,transformDataFrame:()=>m.Hz,unEscapeStringFromRegex:()=>o.x6,unitOverrideProcessor:()=>r.VB,updateDatasourcePluginJsonDataOption:()=>t.tp,updateDatasourcePluginOption:()=>t.fd,updateDatasourcePluginResetOption:()=>t.Mf,updateDatasourcePluginSecureJsonDataOption:()=>t.uw,urlUtil:()=>t.Cj,useFieldOverrides:()=>r.Cc,usePluginContext:()=>P.g,validateFieldConfig:()=>r.gb,valueMappingsOverrideProcessor:()=>r.uj,valueMatchers:()=>m.U8,vectorator:()=>s.sD,withLoadingIndicator:()=>t.xc});var t=e(81102),n=e(19108),u={};for(const S in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","LogsParsers","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","addLogLevelToSeries","anyToNumber","arrayUtils","binaryOperators","calculateFieldStats","calculateLogsLabelStats","calculateStats","checkLogsError","classicColors","convertOldAngularValueMappings","deprecationWarning","escapeUnescapedString","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getLogLevel","getLogLevelFromKey","getParser","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","roundDecimals","serializeStateToUrlParam","sortInAscendingOrder","sortInDescendingOrder","sortLogRows","sortLogsResult","toCSV","toOption","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(S)<0&&(u[S]=()=>n[S]);e.d(O,u);var s=e(78330),i=e(31815),m=e(42960),f=e(46034),o=e(8928),l=e(41024),r=e(37741),d=e(60626),c=e(4765),g=e(82513),p=e(87456),y=e(1762),h=e(48513),a=e(2118),v=e(39778),C=e(20231),E=e(94929),P=e(59417),x=e(61345),M=e(36998)},82513:(G,O,e)=>{"use strict";e.d(O,{F:()=>t.F});var t=e(87442)},87442:(G,O,e)=>{"use strict";e.d(O,{F:()=>n});var t=e(64140);const n=new t.B},48513:(G,O,e)=>{"use strict";e.d(O,{c:()=>o});var t=e(82897),n=e.n(t),u=e(18359),s=e(24699),i=e(99227),m=e(91171),f=e(39778);class o extends s.Sg{constructor(r){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new u.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=r}get defaults(){let r=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const d=new m.rt;this.optionsSupplier(d,{data:[]});for(const c of d.getItems())c.defaultValue!=null&&(0,t.set)(r,c.path,c.defaultValue)}return r}get fieldConfigDefaults(){const r=this._fieldConfigDefaults.defaults;r.custom={};for(const d of this.fieldConfigRegistry.list())d.defaultValue!==void 0&&(0,t.set)(r,d.id,d.defaultValue);return{defaults:{...r},overrides:this._fieldConfigDefaults.overrides}}setDefaults(r){return(0,i.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=r,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(r){return(0,i.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=r,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(r){return this.onPanelMigration=r,this}setPanelChangeHandler(r){return this.onPanelTypeChanged=r,this}setPanelOptions(r){return this.optionsSupplier=r,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(r){return this.dataSupport={...this.dataSupport,...r},this}useFieldConfig(r={}){return this._initConfigRegistry=()=>(0,f.j)(r,this.meta.name),this}setSuggestionsSupplier(r){return this.suggestionsSupplier=r,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(r){return this.meta.id===r}}},2118:(G,O,e)=>{"use strict";e.d(O,{Lc:()=>p,__:()=>g,_k:()=>y,aS:()=>l,d4:()=>f});var t=e(82897),n=e.n(t),u=e(425),s=e(66926),i=e(68061),m=e(24177);function f({plugin:h,currentOptions:a,currentFieldConfig:v,isAfterPluginChange:C}){const E=(0,t.mergeWith)({},h.defaults,a||{},(M,S)=>{if((0,t.isArray)(S))return S}),P=o(v,h),x=d(h,P,C);return{options:E,fieldConfig:x}}function o(h,a){const v=a.fieldConfigDefaults,C={defaults:(0,t.mergeWith)({},v.defaults,h?h.defaults:{},(E,P)=>{if((0,t.isArray)(P))return P}),overrides:h?.overrides??[]};r(C.defaults,"",a.fieldConfigRegistry),C.defaults.thresholds&&c(C.defaults.thresholds),C.overrides=l(C.overrides,E=>a.fieldConfigRegistry.getIfExists(E.id)!==void 0);for(const E of C.overrides)for(const P of E.properties)P.id==="thresholds"&&c(P.value);return C}function l(h,a){return h.map(v=>{const C=v.properties.filter(a);return{...v,properties:C}}).filter(v=>v.properties.length>0)}function r(h,a,v){let C=!1;for(const E of Object.keys(h)){const P=h[E],x=`${a}${E}`,M=!!v.getIfExists(x);if(M){C=!0;continue}(0,t.isArray)(P)||!(0,t.isObject)(P)?M||(0,t.unset)(h,E):r(P,`${x}.`,v)||(0,t.unset)(h,E)}return C}function d(h,a,v){if(!v)return a;const C=h.fieldConfigRegistry.getIfExists(i.qb.Color);if(C&&C.settings){const E=C.settings,P=u.WO.getIfExists(a.defaults.color?.mode);if(!E.byValueSupport&&(!P||P.isByValue))return a.defaults.color={mode:s.S.PaletteClassic},a;if(E.byValueSupport&&E.preferThresholdsMode&&P?.id!==s.S.Fixed&&(!P||!P.isByValue))return a.defaults.color={mode:s.S.Thresholds},a;if(E.bySeriesSupport&&P?.isByValue)return a.defaults.color={mode:s.S.PaletteClassic},a}return a}function c(h){h.mode||(h.mode=m.H.Absolute),h.steps?h.steps.length&&(h.steps[0].value=-1/0):h.steps=[]}function g(h,a){const v={defaults:{...h.defaults,custom:a.defaults.custom},overrides:[...h.overrides]};for(const C of a.overrides)for(const E of C.properties)if(p(E)){const P=v.overrides.find(x=>(0,t.isEqual)(x.matcher,C.matcher));P?P!==C&&P.properties.push(E):v.overrides.push(C)}return v}function p(h){return h.id.startsWith("custom.")}function y(h){return!p(h)}},39778:(G,O,e)=>{"use strict";e.d(O,{j:()=>s});var t=e(18359),n=e(35363),u=e(91171);function s(m={},f){const o=new t.Z,l=n.N.list(),r={};if(m.useCustomConfig){const d=new u.vo;m.useCustomConfig(d);for(const c of d.getRegistry().list())if(c.isCustom=!0,c.id="custom."+c.id,i(c,l)){const g=r[c.category[0]]??[];g.push(c),r[c.category[0]]=g}else o.register(c)}for(let d of l)if(!(m.disableStandardOptions&&m.disableStandardOptions.indexOf(d.id)>-1)){if(m.standardOptions){const c=m.standardOptions[d.id]?.defaultValue,g=m.standardOptions[d.id]?.settings;c&&(d={...d,defaultValue:c}),g&&(d={...d,settings:d.settings?{...d.settings,...g}:g})}if(o.register(d),d.category&&r[d.category[0]])for(let c of r[d.category[0]])o.register(c)}for(const d of o.list())if(d.path.indexOf("[")>0)throw new Error(`[${f}] Field config paths do not support arrays: ${d.id}`);return o}function i(m,f){return Boolean(f.find(o=>m.category&&o.category&&m.category[0]===o.category[0]))}},8928:(G,O,e)=>{"use strict";e.d(O,{By:()=>t.By,GE:()=>t.GE,Mh:()=>t.Mh,PF:()=>t.PF,QX:()=>i,TL:()=>u.TL,Xt:()=>u.Xt,ap:()=>n.a,dz:()=>t.dz,e0:()=>t.e0,jO:()=>t.jO,lu:()=>u.lu,oH:()=>t.oH,x6:()=>t.x6,xH:()=>n.x,yI:()=>t.yI});var t=e(29076),n=e(41959),u=e(33399),s=e(68004);const i={escapeHtml:s.Xv,hasAnsiCodes:s.oT,sanitize:s.Nw,sanitizeTextPanelContent:s.he,sanitizeUrl:s.Nm}},41959:(G,O,e)=>{"use strict";e.d(O,{a:()=>i,x:()=>m});var t=e(99675),n=e(68004);let u=!1;const s={pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function i(f,o){u||(t.TU.setOptions({...s}),u=!0);let l;o?.breaks&&(l={...s,breaks:!0});const r=(0,t.TU)(f||"",l);return o?.noSanitize?r:(0,n.Nw)(r)}function m(f,o){u||(t.TU.setOptions({...s}),u=!0);const l=(0,t.TU)(f||"");return o?.noSanitize?l:(0,n.he)(l)}},68004:(G,O,e)=>{"use strict";e.d(O,{Nm:()=>l,Nw:()=>f,Xv:()=>d,he:()=>o,oT:()=>r});var t=e(13624),n=e(99731),u=e.n(n);const s=Object.keys(n.whiteList).reduce((c,g)=>(c[g]=n.whiteList[g]?.concat(["class","style"]),c),{}),i=new n.FilterXSS({whiteList:s}),m=new n.FilterXSS({whiteList:s,css:{whiteList:{...n.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function f(c){try{return i.process(c)}catch{return console.error("String could not be sanitized",c),c}}function o(c){try{return m.process(c)}catch{return console.error("String could not be sanitized",c),"Text string could not be sanitized"}}function l(c){return(0,t.N)(c)}function r(c){return/\u001b\[\d{1,2}m/.test(c)}function d(c){return String(c).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},29076:(G,O,e)=>{"use strict";e.d(O,{By:()=>g,GE:()=>f,Mh:()=>y,PF:()=>c,dz:()=>p,e0:()=>d,jO:()=>r,oH:()=>l,x6:()=>o,yI:()=>h});var t=e(82897),n=e.n(t);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",i=new RegExp(s,"g"),m=new RegExp("(\\\\)"+s,"g");function f(a){return a&&a.replace(i,"\\$1")}function o(a){return a&&a.replace(m,"$2")}function l(a){return a?a[0]==="/":!1}function r(a){if(!l(a))return new RegExp(`^${a}$`);const v=a.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!v)throw new Error(`'${a}' is not a valid regular expression.`);return new RegExp(v[1],v[2])}function d(a){if(!a)return 0;const v=parseInt(a,10),C=a.slice(String(v).length),E=1e3,P=E*60,x=P*60,M=x*24;switch(C){case"s":return v*E;case"m":return v*P;case"h":return v*x;case"d":return v*M;default:if(!C)return isNaN(v)?0:v;throw new Error("Not supported unit: "+C)}}function c(a){return a!=null&&Number.isFinite(a)?a.toString():""}function g(a){if(!a)return;const v=parseInt(a,10);return isNaN(v)?void 0:v}function p(a){if(!a)return;const v=parseFloat(a);return isNaN(v)?void 0:v}function y(a){const v=(0,t.camelCase)(a);return v.charAt(0).toUpperCase()+v.substring(1)}function h(a){return a.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},33399:(G,O,e)=>{"use strict";e.d(O,{TL:()=>m,Xt:()=>t,lu:()=>u});function t({searchWords:f,textToHighlight:o}){const l=[];for(const r of f)l.push(...u(o,r));return l}const n=f=>f.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function u(f,o){if(!f||!o)return[];const l=[],{cleaned:r,flags:d}=m(n(o));let c;try{c=new RegExp(`(?:${r})`,d)}catch{return l}return f.replace(c,(g,...p)=>{if(g){const y=p[p.length-2];l.push({text:g,start:y,length:g.length,end:y+g.length})}return""}),l}const s="-",i=/\(\?([ims-]+)\)/g;function m(f){const o=new Set(["g"]);return{cleaned:f.replace(i,(r,d)=>{const c=d.startsWith(s);for(let g=0;g<d.length;++g){const p=d.charAt(g);c||d.charAt(g-1)===s?o.delete(p):p!==s&&o.add(p)}return""}),flags:Array.from(o).join("")}}},64724:(G,O,e)=>{"use strict";e.r(O),e.d(O,{alpha:()=>y,asHexString:()=>f,asRgbString:()=>o,darken:()=>h,decomposeColor:()=>r,emphasize:()=>p,getContrastRatio:()=>c,getLuminance:()=>g,hexToRgb:()=>s,hslToRgb:()=>l,lighten:()=>a,recomposeColor:()=>d,rgbToHex:()=>m});var t=e(35008),n=e.n(t);function u(v,C=0,E=1){return Math.min(Math.max(C,v),E)}function s(v){v=v.slice(1);const C=new RegExp(`.{1,${v.length>=6?2:1}}`,"g");let E=v.match(C);return E&&E[0].length===1&&(E=E.map(P=>P+P)),E?`rgb${E.length===4?"a":""}(${E.map((P,x)=>x<3?parseInt(P,16):Math.round(parseInt(P,16)/255*1e3)/1e3).join(", ")})`:""}function i(v){const C=v.toString(16);return C.length===1?`0${C}`:C}function m(v){if(v.indexOf("#")===0)return v;const{values:C}=r(v);return`#${C.map(E=>i(E)).join("")}`}function f(v){if(v[0]==="#")return v;const C=n()(v);return C.getAlpha()===1?C.toHexString():C.toHex8String()}function o(v){return v.startsWith("rgb")?v:n()(v).toRgbString()}function l(v){const C=r(v),{values:E}=C,P=E[0],x=E[1]/100,M=E[2]/100,S=x*Math.min(M,1-M),D=(L,w=(L+P/30)%12)=>M-S*Math.max(Math.min(w-3,9-w,1),-1);let T="rgb";const R=[Math.round(D(0)*255),Math.round(D(8)*255),Math.round(D(4)*255)];return C.type==="hsla"&&(T+="a",R.push(E[3])),d({type:T,values:R})}function r(v){if(typeof v!="string")return v;if(v.charAt(0)==="#")return r(s(v));const C=v.indexOf("("),E=v.substring(0,C);if(["rgb","rgba","hsl","hsla","color"].indexOf(E)===-1)throw new Error(`Unsupported '${v}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let P=v.substring(C+1,v.length-1),x;if(E==="color"){if(P=P.split(" "),x=P.shift(),P.length===4&&P[3].charAt(0)==="/"&&(P[3]=P[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(x)===-1)throw new Error(`Unsupported ${x} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else P=P.split(",");return P=P.map(M=>parseFloat(M)),{type:E,values:P,colorSpace:x}}function d(v){const{type:C,colorSpace:E}=v;let P=v.values;return C.indexOf("rgb")!==-1?P=P.map((x,M)=>M<3?parseInt(x,10):x):C.indexOf("hsl")!==-1&&(P[1]=`${P[1]}%`,P[2]=`${P[2]}%`),C.indexOf("color")!==-1?P=`${E} ${P.join(" ")}`:P=`${P.join(", ")}`,`${C}(${P})`}function c(v,C,E){const P=g(v),x=g(C,E);return(Math.max(P,x)+.05)/(Math.min(P,x)+.05)}function g(v,C){const E=r(v);let P=E.type==="hsl"?r(l(v)).values:E.values;if(C&&E.type==="rgba"){const M=r(C),S=P[3];P[0]=P[0]*S+M.values[0]*(1-S),P[1]=P[1]*S+M.values[1]*(1-S),P[2]=P[2]*S+M.values[2]*(1-S)}const x=P.map(M=>(E.type!=="color"&&(M/=255),M<=.03928?M/12.92:((M+.055)/1.055)**2.4));return Number((.2126*x[0]+.7152*x[1]+.0722*x[2]).toFixed(3))}function p(v,C=.15){return g(v)>.5?h(v,C):a(v,C)}function y(v,C){if(v==="")return"#000000";if(C=u(C),v[0]==="#"){if(v.length===9)v=v.substring(0,7);else if(v.length<=5){let P="#";for(let x=1;x<4;x++)P+=v[x]+v[x];v=P}return v+Math.round(C*255).toString(16).padStart(2,"0")}else{if(v[3]==="(")return v.replace(")",`, ${C})`);if(v[4]==="(")return v.substring(0,v.lastIndexOf(","))+`, ${C})`}const E=r(v);return E.type==="color"?E.values[3]=`/${C}`:E.values[3]=C,d(E)}function h(v,C){const E=r(v);if(C=u(C),E.type.indexOf("hsl")!==-1)E.values[2]*=1-C;else if(E.type.indexOf("rgb")!==-1||E.type.indexOf("color")!==-1)for(let P=0;P<3;P+=1)E.values[P]*=1-C;return d(E)}function a(v,C){const E=r(v);if(C=u(C),E.type.indexOf("hsl")!==-1)E.values[2]+=(100-E.values[2])*C;else if(E.type.indexOf("rgb")!==-1)for(let P=0;P<3;P+=1)E.values[P]+=(255-E.values[P])*C;else if(E.type.indexOf("color")!==-1)for(let P=0;P<3;P+=1)E.values[P]+=(1-E.values[P])*C;return d(E)}},36328:(G,O,e)=>{"use strict";e.d(O,{j:()=>W});function t(){const F=["xs","sm","md","lg","xl","xxl"],V="px",b={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function X(H){return`@media (min-width:${typeof H=="number"?H:b[H]}${V})`}function k(H){return`@media (max-width:${(typeof H=="number"?H:b[H])-5/100}${V})`}return{values:b,up:X,down:k,keys:F,unit:V}}var n=e(82897),u=e(64724);const s={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#F5B73D",orangeDarkText:"#F8D06B",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FAD34A",orangeLightText:"#8A6C00"};class i{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.07)`,medium:`rgba(${this.whiteBase}, 0.15)`,strong:`rgba(${this.whiteBase}, 0.25)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:s.blueDarkText,maxContrast:s.white},this.primary={main:s.blueDarkMain,text:s.blueDarkText,border:s.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.16)`,shade:`rgba(${this.whiteBase}, 0.20)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:this.border.strong},this.info=this.primary,this.error={main:s.redDarkMain,text:s.redDarkText},this.success={main:s.greenDarkMain,text:s.greenDarkText},this.warning={main:s.orangeDarkMain,text:s.orangeDarkText},this.background={canvas:s.gray05,primary:s.gray10,secondary:s.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class m{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:s.blueLightMain,border:s.blueLightText,text:s.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:s.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.16)`,shade:`rgba(${this.blackBase}, 0.20)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.strong},this.info={main:s.blueLightMain,text:s.blueLightText},this.error={main:s.redLightMain,text:s.redLightText,border:s.redLightText},this.success={main:s.greenLightMain,text:s.greenLightText},this.warning={main:s.orangeLightMain,text:s.orangeLightText},this.background={canvas:s.gray90,primary:s.white,secondary:s.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function f(I){const F=new i,V=new m,b=(I.mode??"dark")==="dark"?F:V,{primary:X=b.primary,secondary:k=b.secondary,info:H=b.info,warning:Y=b.warning,success:ee=b.success,error:ue=b.error,tonalOffset:q=b.tonalOffset,hoverFactor:ge=b.hoverFactor,contrastThreshold:De=b.contrastThreshold,...fe}=I;function me(ie,re=De){return(0,u.getContrastRatio)(F.text.maxContrast,ie,b.background.primary)>=re?F.text.maxContrast:V.text.maxContrast}const ce=({color:ie,name:re})=>{if(ie={...ie,name:re},!ie.main)throw new Error(`Missing main color for ${re}`);return ie.text||(ie.text=ie.main),ie.border||(ie.border=ie.text),ie.shade||(ie.shade=b.mode==="light"?(0,u.darken)(ie.main,q):(0,u.lighten)(ie.main,q)),ie.transparent||(ie.transparent=b.mode==="light"?(0,u.alpha)(ie.main,.08):(0,u.alpha)(ie.main,.15)),ie.contrastText||(ie.contrastText=me(ie.main)),ie};return(0,n.merge)({...b,primary:ce({color:X,name:"primary"}),secondary:ce({color:k,name:"secondary"}),info:ce({color:H,name:"info"}),error:ce({color:ue,name:"error"}),success:ce({color:ee,name:"success"}),warning:ce({color:Y,name:"warning"}),getContrastText:me,emphasize:(ie,re)=>(0,u.emphasize)(ie,re??ge)},fe)}function o(I,F){const V={padding:1,headerHeight:4,background:I.background.primary,borderColor:I.border.weak,boxShadow:"none"},b={borderColor:I.border.medium,borderHover:I.border.strong,text:I.text.primary,background:I.mode==="dark"?I.background.canvas:I.background.primary};return{height:{sm:3,md:4,lg:6},input:b,panel:V,dropdown:{background:b.background},tooltip:{background:I.background.secondary,text:I.text.primary},dashboard:{background:I.background.canvas,padding:1},overlay:{background:I.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:41},textHighlight:{text:I.warning.contrastText,background:I.warning.main},horizontalDrawer:{defaultHeight:400}}}function l(I){return I.mode==="dark"?{z1:"0px 1px 2px rgba(24, 26, 27, 0.75)",z2:"0px 4px 8px rgba(24, 26, 27, 0.75)",z3:"0px 8px 24px rgb(1,4,9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function r(I){const F=I.borderRadius??2;return{borderRadius:b=>`${(b??1)*F}px`}}function d(I={}){const{gridSize:F=8}=I,V=X=>typeof X=="string"?X:X*F,b=(...X)=>(X.length===0&&(X[0]=1),X.map(k=>{const H=V(k);return typeof H=="number"?`${H}px`:H}).join(" "));return b.gridSize=F,b}const c={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},g={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function p(I=["all"],F={}){const{duration:V=g.standard,easing:b=c.easeInOut,delay:X=0}=F;return(Array.isArray(I)?I:[I]).map(k=>`${k} ${typeof V=="string"?V:h(V)} ${b} ${typeof X=="string"?X:h(X)}`).join(",")}function y(I){if(!I)return 0;const F=I/36;return Math.round((4+15*F**.25+F/5)*10)}function h(I){return`${Math.round(I)}ms`}function a(){return{create:p,duration:g,easing:c,getAutoHeightDuration:y}}const v='"Inter", "Helvetica", "Arial", sans-serif',C="'Roboto Mono', monospace";function E(I,F={}){const{fontFamily:V=v,fontFamilyMonospace:b=C,fontSize:X=14,fontWeightLight:k=300,fontWeightRegular:H=400,fontWeightMedium:Y=500,fontWeightBold:ee=500,htmlFontSize:ue=14}=F,q=X/14,ge=ce=>`${ce/ue*q}rem`,De=(ce,ie,re,Ee,J)=>{if(re%2!==0||ie%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:V,fontWeight:ce,fontSize:ge(ie),lineHeight:re/ie,...V===v?{letterSpacing:`${P(Ee/ie)}em`}:{},...J}},fe={h1:De(H,28,32,-.25),h2:De(H,24,28,0),h3:De(H,22,24,0),h4:De(H,18,22,.25),h5:De(H,16,22,0),h6:De(Y,14,22,.15),body:De(H,X,22,.15),bodySmall:De(H,12,18,.15)};return{htmlFontSize:ue,pxToRem:ge,fontFamily:V,fontFamilyMonospace:b,fontSize:X,fontWeightLight:k,fontWeightRegular:H,fontWeightMedium:Y,fontWeightBold:ee,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...fe}}function P(I){return Math.round(I*1e5)/1e5}var x=e(55422);function M(I){const F={name:"Grafana Default",typography:{fontFamily:{sansSerif:I.typography.fontFamily,monospace:I.typography.fontFamilyMonospace},size:{base:`${I.typography.fontSize}px`,xs:I.typography.size.xs,sm:I.typography.size.sm,md:I.typography.size.md,lg:I.typography.size.lg},heading:{h1:I.typography.h1.fontSize,h2:I.typography.h2.fontSize,h3:I.typography.h3.fontSize,h4:I.typography.h4.fontSize,h5:I.typography.h5.fontSize,h6:I.typography.h6.fontSize},weight:{light:I.typography.fontWeightLight,regular:I.typography.fontWeightRegular,semibold:I.typography.fontWeightMedium,bold:I.typography.fontWeightBold},lineHeight:{xs:I.typography.bodySmall.lineHeight,sm:I.typography.bodySmall.lineHeight,md:I.typography.body.lineHeight,lg:I.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${I.breakpoints.values.xs}px`,sm:`${I.breakpoints.values.sm}px`,md:`${I.breakpoints.values.md}px`,lg:`${I.breakpoints.values.lg}px`,xl:`${I.breakpoints.values.xl}px`,xxl:`${I.breakpoints.values.xxl}px`},spacing:{base:I.spacing.gridSize,insetSquishMd:I.spacing(.5,1),d:I.spacing(2),xxs:I.spacing(.25),xs:I.spacing(.5),sm:I.spacing(1),md:I.spacing(2),lg:I.spacing(3),xl:I.spacing(4),gutter:I.spacing(4),formSpacingBase:I.spacing.gridSize,formMargin:`${I.spacing.gridSize*4}px`,formFieldsetMargin:`${I.spacing.gridSize*2}px`,formInputHeight:I.spacing.gridSize*4,formButtonHeight:I.spacing.gridSize*4,formInputPaddingHorizontal:`${I.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${I.spacing.gridSize/2}px`,formInputMargin:`${I.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${I.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:I.shape.borderRadius(1),md:I.shape.borderRadius(2),lg:I.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:I.spacing.gridSize*I.components.height.sm,md:I.spacing.gridSize*I.components.height.md,lg:I.spacing.gridSize*I.components.height.lg},panelPadding:I.components.panel.padding*I.spacing.gridSize,panelHeaderHeight:I.spacing.gridSize*I.components.panel.headerHeight,zIndex:I.zIndex},V={...S,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},b={bg1:I.colors.background.primary,bg2:I.colors.background.secondary,bg3:I.colors.action.hover,dashboardBg:I.colors.background.canvas,bgBlue1:I.colors.primary.main,bgBlue2:I.colors.primary.shade},X={border1:I.colors.border.weak,border2:I.colors.border.medium,border3:I.colors.border.strong},k={textStrong:I.colors.text.maxContrast,textHeading:I.colors.text.primary,text:I.colors.text.primary,textSemiWeak:I.colors.text.secondary,textWeak:I.colors.text.secondary,textFaint:I.colors.text.disabled,textBlue:I.colors.primary.text},H={formLabel:I.colors.text.primary,formDescription:I.colors.text.secondary,formInputBg:I.components.input.background,formInputBgDisabled:I.colors.action.disabledBackground,formInputBorder:I.components.input.borderColor,formInputBorderHover:I.components.input.borderHover,formInputBorderActive:I.colors.primary.border,formInputBorderInvalid:I.colors.error.border,formInputPlaceholderText:I.colors.text.disabled,formInputText:I.components.input.text,formInputDisabledText:I.colors.action.disabledText,formFocusOutline:I.colors.primary.main,formValidationMessageText:I.colors.error.contrastText,formValidationMessageBg:I.colors.error.main};return{...F,type:I.colors.mode==="dark"?x.Q.Dark:x.Q.Light,isDark:I.isDark,isLight:I.isLight,name:I.name,palette:{...V,brandPrimary:V.orange,brandSuccess:I.colors.success.main,brandWarning:I.colors.warning.main,brandDanger:I.colors.error.main,queryRed:I.colors.error.text,queryGreen:I.colors.success.text,queryPurple:"#fe85fc",queryOrange:V.orange,online:I.colors.success.main,warn:I.colors.success.main,critical:I.colors.success.main},colors:{...b,...X,...H,...k,bodyBg:I.colors.background.canvas,panelBg:I.components.panel.background,panelBorder:I.components.panel.borderColor,pageHeaderBg:I.colors.background.canvas,pageHeaderBorder:I.colors.background.canvas,dropdownBg:H.formInputBg,dropdownShadow:V.black,dropdownOptionHoverBg:b.bg2,link:I.colors.text.primary,linkDisabled:I.colors.text.disabled,linkHover:I.colors.text.maxContrast,linkExternal:I.colors.text.link},shadows:{listItem:"none"},visualization:I.visualization}}const S={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var D=e(66926);function T(I){const F=I.mode==="light"?L():R(),V={};for(const k of F)for(const H of k.shades)if(V[H.name]=H.color,H.aliases)for(const Y of H.aliases)V[Y]=H.color;V.transparent="rgba(0,0,0,0)",V["panel-bg"]=I.background.primary,V.text=I.text.primary;const b=k=>{if(!k)return D.R;const H=V[k];if(H)return H;if(k[0]==="#"||k.indexOf("rgb")>-1)return k;const Y=A[k.toLowerCase()];return Y?(V[k]=Y,Y):k},X=w();return{hues:F,palette:X,getColorByName:b}}function R(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function L(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function w(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const A={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},N={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function W(I={}){const{colors:F={},spacing:V={},shape:b={},typography:X={}}=I,k=f(F),H=t(),Y=d(V),ee=r(b),ue=E(k,X),q=l(k),ge=a(),De=o(k,q),fe=T(k),me={name:k.mode==="dark"?"Dark":"Light",isDark:k.mode==="dark",isLight:k.mode==="light",colors:k,breakpoints:H,spacing:Y,shape:ee,components:De,typography:ue,shadows:q,transitions:ge,visualization:fe,zIndex:{...N},flags:{}};return{...me,v1:M(me)}}},4765:(G,O,e)=>{"use strict";e.d(O,{j:()=>t.j,r:()=>n});var t=e(36328),n=e(64724)},21760:(G,O,e)=>{"use strict";e.d(O,{Kx:()=>f,TB:()=>o,gz:()=>m,uP:()=>l});var t=e(82897),n=e.n(t),u=e(49922),s=e(14582),i=e(64140),m=(a=>(a.sum="sum",a.max="max",a.min="min",a.logmin="logmin",a.mean="mean",a.variance="variance",a.stdDev="stdDev",a.last="last",a.first="first",a.count="count",a.range="range",a.diff="diff",a.diffperc="diffperc",a.delta="delta",a.step="step",a.firstNotNull="firstNotNull",a.lastNotNull="lastNotNull",a.changeCount="changeCount",a.distinctCount="distinctCount",a.allIsZero="allIsZero",a.allIsNull="allIsNull",a.allValues="allValues",a.uniqueValues="uniqueValues",a))(m||{});function f(a){const{field:v,reducers:C}=a;if(!v||!C||C.length<1)return{};if(v.state?.calcs){const T=[];for(const R of C)v.state.calcs.hasOwnProperty(R)||T.push(R);if(T.length<1)return{...v.state.calcs}}v.state||(v.state={});const E=o.list(C);if(v.values.length<1){const T={...v.state.calcs};for(const R of E)T[R.id]=R.emptyInputResult!==null?R.emptyInputResult:null;return v.state.calcs=T}const{nullValueMode:x}=v.config,M=x===u.Gl.Ignore,S=x===u.Gl.AsZero;if(E.length===1&&E[0].reduce){const T=E[0].reduce(v,M,S);return v.state.calcs={...v.state.calcs,...T},T}let D=l(v,M,S);for(const T of E)!D.hasOwnProperty(T.id)&&T.reduce&&(D={...D,...T.reduce(v,M,S)});return v.state.calcs={...v.state.calcs,...D},D}const o=new i.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:g},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:c},{id:"firstNotNull",name:"First *",description:"First non-null value",standard:!0,reduce:d},{id:"first",name:"First",description:"First Value",standard:!0,reduce:r},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:p},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:p},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:y},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:h},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:a=>({allValues:a.values.toArray()})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:a=>({uniqueValues:[...new Set(a.values.toArray())]})}]);function l(a,v,C){const E={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},P=a.values;E.count=v?P.length:P.toArray().filter(M=>M!=null).length;const x=a.type===s.fS.number||s.fS.time;for(let M=0;M<P.length;M++){let S=P.get(M);if(M===0&&(E.first=S),E.last=S,S===null){if(v)continue;C&&(S=0)}if(S!=null){const D=E.firstNotNull===null;if(D&&(E.firstNotNull=S),x){if(E.sum+=S,E.allIsNull=!1,E.nonNullCount++,!D){const T=S-E.lastNotNull;E.step>T&&(E.step=T),E.lastNotNull>S?(E.previousDeltaUp=!1,M===P.length-1&&(E.delta+=S)):(E.previousDeltaUp?E.delta+=T:E.delta+=S,E.previousDeltaUp=!0)}S>E.max&&(E.max=S),S<E.min&&(E.min=S),S<E.logmin&&S>0&&(E.logmin=S)}S!==0&&(E.allIsZero=!1),E.lastNotNull=S}}return E.max===-Number.MAX_VALUE&&(E.max=null),E.min===Number.MAX_VALUE&&(E.min=null),E.step===Number.MAX_VALUE&&(E.step=null),E.nonNullCount>0&&(E.mean=E.sum/E.nonNullCount),E.allIsNull&&(E.allIsZero=!1),E.max!==null&&E.min!==null&&(E.range=E.max-E.min),(0,t.isNumber)(E.firstNotNull)&&(0,t.isNumber)(E.lastNotNull)&&(E.diff=E.lastNotNull-E.firstNotNull),(0,t.isNumber)(E.firstNotNull)&&(0,t.isNumber)(E.diff)&&(E.diffperc=E.diff/E.firstNotNull),E}function r(a,v,C){return{first:a.values.get(0)}}function d(a,v,C){const E=a.values;for(let P=0;P<E.length;P++){const x=E.get(P);if(x!=null&&x!==void 0)return{firstNotNull:x}}return{firstNotNull:null}}function c(a,v,C){const E=a.values;return{last:E.get(E.length-1)}}function g(a,v,C){const E=a.values;let P=E.length-1;for(;P>=0;){const x=E.get(P--);if(x!=null&&x!==void 0)return{lastNotNull:x}}return{lastNotNull:null}}function p(a,v,C){if(!(a.type===s.fS.number||a.type===s.fS.time))return{variance:0,stdDev:0};let E=0,P=0,x=0;const M=a.values;for(let S=0;S<M.length;S++){const D=M.get(S);if(D!=null){x++;let T=P;P+=(D-T)/x,E+=(D-T)*(D-P)}}if(x>0){const S=E/x;return{variance:S,stdDev:Math.sqrt(S)}}return{variance:0,stdDev:0}}function y(a,v,C){const E=a.values;let P=0,x=!0,M=null;for(let S=0;S<E.length;S++){let D=E.get(S);if(D===null){if(v)continue;C&&(D=0)}!x&&M!==D&&P++,x=!1,M=D}return{changeCount:P}}function h(a,v,C){const E=a.values,P=new Set;for(let x=0;x<E.length;x++){let M=E.get(x);if(M===null){if(v)continue;C&&(M=0)}P.add(M)}return{distinctCount:P.size}}},42960:(G,O,e)=>{"use strict";e.d(O,{Ac:()=>u.Ac,E4:()=>t.E4,Ff:()=>t.Ff,Hz:()=>m.H,IG:()=>u.IG,JP:()=>l._9,J_:()=>d.J_,Jz:()=>r.Jz,Kx:()=>i.Kx,Ls:()=>u.Ls,Ok:()=>r.Ok,Op:()=>r.Op,TB:()=>i.TB,U8:()=>u.U8,UO:()=>r.UO,Wk:()=>n.W,YR:()=>s.Y,Ys:()=>o.Ys,Ze:()=>f.Z,Zi:()=>r.Zi,b9:()=>u.b9,cO:()=>r.cO,gY:()=>r.gY,gz:()=>i.gz,kl:()=>r.kl,mB:()=>r.mB,mE:()=>t.mE,mi:()=>t.mi,py:()=>r.py,qr:()=>r.qr,sq:()=>u.sq,uP:()=>i.uP,wL:()=>r.wL,zM:()=>r.zM});var t=e(85854),n=e(17130),u=e(3249),s=e(74940),i=e(21760),m=e(79720),f=e(20256),o=e(74188),l=e(98234),r=e(15128),d=e(2932)},3249:(G,O,e)=>{"use strict";e.d(O,{Ac:()=>g,IG:()=>a,Ls:()=>c,U8:()=>p,b9:()=>h,sq:()=>y});var t=e(64140),n=e(82346),u=e(74188),s=e(89771),i=e(95108),m=e(98876),f=e(29106),o=e(1521),l=e(95827),r=e(4728),d=e(85402);const c=new t.B(()=>[...(0,s.Ty)(),...(0,n.N)(),...(0,u.Lk)(),...(0,m.z)()]),g=new t.B(()=>[...(0,s.fX)(),...(0,u.cC)(),...(0,i.n)()]),p=new t.B(()=>[...(0,o.a)(),...(0,l.H)(),...(0,f.T)(),...(0,r.G)(),...(0,d.G)()]);function y(v){const C=c.get(v.id);if(!C)throw new Error("Unknown field matcher: "+v.id);return C.get(v.options)}function h(v){const C=g.get(v.id);if(!C)throw new Error("Unknown frame matcher: "+v.id);return C.get(v.options)}function a(v){const C=p.get(v.id);if(!C)throw new Error("Unknown value matcher: "+v.id);return C.get(v.options)}},74188:(G,O,e)=>{"use strict";e.d(O,{Lk:()=>c,Ys:()=>s,cC:()=>g});var t=e(89890),n=e(29076),u=e(85854),s=(p=>(p.exclude="exclude",p.include="include",p))(s||{});const i={id:u.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:p=>(y,h,a)=>p===y.name||(0,t.C)(y,h,a)===p,getOptionsDisplayText:p=>`Field name: ${p}`},m={id:u.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:p=>{const{names:y,mode:h="include"}=p,a=new Set(y??[]),v=(C,E,P)=>a.has(C.name)||a.has((0,t.C)(C,E,P));return h==="exclude"?(C,E,P)=>!v(C,E,P):v},getOptionsDisplayText:p=>{const{names:y,mode:h}=p,a=(y??[]).join(", ");return h==="exclude"?`All except: ${a}`:`All of: ${a}`}},f={id:u.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:p=>{const y=r(p);return(h,a,v)=>{const C=(0,t.C)(h,a,v);return!!y&&y.test(C)}},getOptionsDisplayText:p=>`Field name by pattern: ${p}`},o={id:u.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:p=>(y,h,a)=>h.refId===p,getOptionsDisplayText:p=>`Math all fields returned by query with reference ID: ${p}`},l={id:u.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:p=>{const y=f.get(p?.pattern||""),h=m.get({mode:"include",names:p?.names??[]});return(a,v,C)=>h(a,v,C)||y(a,v,C)},getOptionsDisplayText:p=>{const y=p?.pattern??"",h=p?.names?.join(",")??"";return`Field name by pattern: ${y} or names: ${h}`}},r=p=>{if(p)try{return(0,n.jO)(p)}catch(y){console.error(y);return}},d={id:u.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:p=>{const y=(0,n.jO)(p);return h=>y.test(h.name||"")},getOptionsDisplayText:p=>`Frame name: ${p}`};function c(){return[i,f,m,l,o]}function g(){return[d]}},89771:(G,O,e)=>{"use strict";e.d(O,{Qw:()=>g,Ty:()=>C,fX:()=>E,m3:()=>r});var t=e(14582),n=e(3249),u=e(85854);const s={id:u.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const x=P.map(M=>(0,n.sq)(M));return(M,S,D)=>{for(const T of x)if(T(M,S,D))return!0;return!1}},getOptionsDisplayText:P=>{let x="";for(const M of P){x.length>0&&(x+=" OR ");const S=n.Ls.get(M.id);x+=S.getOptionsDisplayText?S.getOptionsDisplayText(M):S.name}return x}},i={id:u.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const x=P.map(M=>(0,n.b9)(M));return M=>{for(const S of x)if(S(M))return!0;return!1}},getOptionsDisplayText:P=>{let x="";for(const M of P){x.length>0&&(x+=" OR ");const S=n.Ac.get(M.id);x+=S.getOptionsDisplayText?S.getOptionsDisplayText(M):S.name}return x}},m={id:u.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const x=P.map(M=>(0,n.sq)(M));return(M,S,D)=>{for(const T of x)if(!T(M,S,D))return!1;return!0}},getOptionsDisplayText:P=>{let x="";for(const M of P){x.length>0&&(x+=" AND ");const S=n.Ls.get(M.id);x+=S.getOptionsDisplayText?S.getOptionsDisplayText(M):S.name}return x}},f={id:u.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:P=>{const x=P.map(M=>(0,n.b9)(M));return M=>{for(const S of x)if(!S(M))return!1;return!0}},getOptionsDisplayText:P=>{let x="";for(const M of P){x.length>0&&(x+=" AND ");const S=n.Ac.get(M.id);x+=S.getOptionsDisplayText?S.getOptionsDisplayText(M):S.name}return x}},o={id:u.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:P=>{const x=(0,n.sq)(P);return(M,S,D)=>!x(M,S,D)},getOptionsDisplayText:P=>{const x=n.Ls.get(P.id);return"NOT "+(x.getOptionsDisplayText?x.getOptionsDisplayText(P.options):x.name)}},l={id:u.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:P=>{const x=(0,n.b9)(P);return M=>!x(M)},getOptionsDisplayText:P=>{const x=n.Ac.get(P.id);return"NOT "+(x.getOptionsDisplayText?x.getOptionsDisplayText(P.options):x.name)}},r=P=>!0,d=P=>!0,c=P=>!1,g=P=>P.type!==t.fS.time,p=P=>!1,y={id:u.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:P=>r,getOptionsDisplayText:P=>"Always"},h={id:u.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:P=>d,getOptionsDisplayText:P=>"Always"},a={id:u.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:P=>c,getOptionsDisplayText:P=>"Never"},v={id:u.Ff.neverMatch,name:"No Frames",description:"Never Match",get:P=>p,getOptionsDisplayText:P=>"Never"};function C(){return[s,m,o,y,a]}function E(){return[i,f,l,h,v]}},20256:(G,O,e)=>{"use strict";e.d(O,{Z:()=>n});var t=e(64140);const n=new t.B},79720:(G,O,e)=>{"use strict";e.d(O,{H:()=>f});var t=e(53786),n=e(98356),u=e(2101),s=e(20256);const i=(o,l)=>r=>{const d=s.Z.get(o.id);if(!d)return r;const g={...d.transformation.defaultOptions??{},...o.options};return r.pipe((0,n.z)(p=>(0,t.of)(p).pipe(d.transformation.operator(g,l),m(p,d))))},m=(o,l)=>r=>r.pipe((0,u.U)(d=>{if(d===o)return d;for(const c of d)c.meta||(c.meta={}),c.meta.transformations?c.meta.transformations=[...c.meta.transformations,l.id]:c.meta.transformations=[l.id];return d}));function f(o,l,r){const d=(0,t.of)(l);if(!o.length)return d;const c=[],g=r??{interpolate:p=>p};for(let p=0;p<o.length;p++){const y=o[p];y.disabled||c.push(i(y,g))}return d.pipe.apply(d,c)}},74940:(G,O,e)=>{"use strict";e.d(O,{Y:()=>re});var t=e(89984),n=e(42074),u=e(2932),s=e(78313),i=e(33723),m=e(84931),f=e(85854),o=e(17130);const l={id:o.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(Ee,J)=>te=>{const ne={};return Ee.include&&(ne.include={id:f.E4.byRefId,options:Ee.include}),Ee.exclude&&(ne.exclude={id:f.E4.byRefId,options:Ee.exclude}),te.pipe(i.u.operator(ne,J))}};var r=e(86789),d=e(88861),c=e(2101),g=e(38685),p=e(89890),y=e(16217),h=e(14582);const a="Time",v="Time",C="Value",E=y.U.Empty,P={id:o.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:a,rowField:v,valueField:C},operator:Ee=>J=>J.pipe((0,c.U)(te=>{const ne=Ee.columnField||a,j=Ee.rowField||v,be=Ee.valueField||C,Le=Ee.emptyValue||E;if(te.length!==1)return te;const Qe=te[0],Ye=M(Qe,ne),de=M(Qe,j),Be=M(Qe,be),Ve=`${j}\\${ne}`;if(!Ye||!de||!Be)return te;const $e=x(Ye.values),We=x(de.values),Ke={};for(let Xe=0;Xe<Be.values.length;Xe++){const at=Ye.values.get(Xe),Ze=de.values.get(Xe),lt=Be.values.get(Xe);Ke[at]||(Ke[at]={}),Ke[at][Ze]=lt}const qe=new g.v;qe.addField({name:Ve,values:We,type:h.fS.string});for(const Xe of $e){let at=[];for(const Ze of We){const lt=Ke[Xe][Ze]??S(Le);at.push(lt)}qe.addField({name:Xe.toString(),values:at,config:Be.config,type:Be.type})}return[qe]}))};function x(Ee){const J=new Set;for(let te=0;te<Ee.length;te++)J.add(Ee.get(te));return Array.from(J)}function M(Ee,J){for(let te=0;te<Ee.fields.length;te++){const ne=Ee.fields[te];if(J===(0,p.C)(ne))return ne}return null}function S(Ee){switch(Ee){case y.U.False:return!1;case y.U.True:return!0;case y.U.Null:return null;case y.U.Empty:default:return""}}var D=e(15128),T=e(75176),R=e(1052),L=e(19695);const w=10,A={id:o.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:w},operator:Ee=>J=>J.pipe((0,c.U)(te=>{const ne=Ee.limitField||w;return te.map(j=>j.length>ne?{...j,fields:j.fields.map(be=>{const Le=be.values.toArray();return{...be,values:new L.G(Le.slice(0,ne))}}),length:ne}:j)}))};var N=e(10158),W=e(21398),I=e(7582);const F={id:o.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:Ee=>J=>J.pipe((0,c.U)(te=>{const ne=V(Ee.renameByName);return!Array.isArray(te)||te.length===0?te:te.map(j=>({...j,fields:ne(j)}))}))},V=Ee=>J=>!Ee||Object.keys(Ee).length===0?J.fields:J.fields.map(te=>{const ne=(0,p.C)(te,J),j=Ee[ne];return typeof j!="string"||j.length===0?te:{...te,config:{...te.config,displayName:j},state:{...te.state,displayName:j}}}),b={id:o.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},operator:(Ee,J)=>te=>te.pipe(m.w.operator({exclude:{names:X(Ee.excludeByName)}},J),I.t.operator(Ee,J),F.operator(Ee,J))},X=Ee=>Ee?Object.keys(Ee).filter(J=>Ee[J]):[];var k=e(4157),H=e(29076);const Y={id:o.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:Ee=>J=>J.pipe((0,c.U)(te=>!Array.isArray(te)||te.length===0?te:te.map(ee(Ee))))},ee=Ee=>J=>{const te=(0,H.jO)(Ee.regex),ne=J.fields.map(j=>{const be=(0,p.C)(j,J);if(!te.test(be))return j;const Le=be.replace(te,Ee.renamePattern);return{...j,config:{...j.config,displayName:Le},state:{...j.state,displayName:Le}}});return{...J,fields:ne}};var ue=e(82897),q=e(16911),ge=e(34472);const De={id:o.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:Ee=>J=>J.pipe((0,c.U)(te=>{if(!Array.isArray(te)||te.length<=1||!(0,ge.hZ)(te))return te;const ne={},j=new Set,be=new g.v,Le={name:h.rN,values:new L.G,config:{},type:h.fS.string};for(let Qe=0;Qe<te.length;Qe++){const Ye=te[Qe];for(let de=0;de<Ye.fields.length;de++){const Be=Ye.fields[de];if(Be.type===h.fS.time){ne[Qe]=de,j.has(h.Ls)||(be.addField(fe(Be,h.Ls)),be.addField(Le),j.add(h.Ls));continue}j.has(h.M5)||(be.addField(fe(Be,h.M5)),j.add(h.M5))}}for(let Qe=0;Qe<te.length;Qe++){const Ye=te[Qe];for(let de=0;de<Ye.length;de++){const Be=ne[Qe],Ve=Be===0?1:0;be.add({[h.Ls]:Ye.fields[Be].values.get(de),[h.rN]:(0,p.n)(Ye),[h.M5]:Ye.fields[Ve].values.get(de)})}}return[(0,q.aK)(be,0,!0)]}))},fe=(Ee,J)=>({...(0,ue.omit)(Ee,["values","state","labels","config","name"]),name:J,values:new L.G,config:{...(0,ue.omit)(Ee.config,["displayName","displayNameFromDS"])}}),me={id:o.W.sortBy,name:"Sort by",description:"Sort fields in a frame",defaultOptions:{fields:{}},operator:Ee=>J=>J.pipe((0,c.U)(te=>!Array.isArray(te)||te.length===0||!Ee?.sort?.length?te:ce(te,Ee.sort)))};function ce(Ee,J){return Ee.map(te=>{const ne=ie(te,J);return ne.length&&ne[0].index!=null?(0,q.aK)(te,ne[0].index,ne[0].desc):te})}function ie(Ee,J){return J.map(te=>te.index!=null?te:{...te,index:Ee.fields.findIndex(ne=>te.field===(0,p.C)(ne,Ee))})}const re={noopTransformer:W.d,filterFieldsTransformer:i.P,filterFieldsByNameTransformer:m.w,filterFramesTransformer:i.u,filterFramesByRefIdTransformer:l,filterByValueTransformer:r.JA,orderFieldsTransformer:I.t,organizeFieldsTransformer:b,reduceTransformer:k.mf,concatenateTransformer:n.aE,calculateFieldTransformer:t.U,joinByFieldTransformer:T.M,seriesToColumnsTransformer:T.M,seriesToRowsTransformer:De,renameFieldsTransformer:F,labelsToFieldsTransformer:R.r,ensureColumnsTransformer:s.W,groupByTransformer:d.i,sortByTransformer:me,mergeTransformer:N.R,renameByRegexTransformer:Y,histogramTransformer:D.Op,convertFieldTypeTransformer:u.mg,groupingToMatrixTransformer:P,limitTransformer:A}},89984:(G,O,e)=>{"use strict";e.d(O,{ie:()=>E,U:()=>M,h:()=>R});var t=e(82897),n=e(2101),u=e(16911),s=e(89890),i=e(14582),m=e(49922),f=e(98082),o=e(19695),l=e(1473),r=e(30664),d=e(52674),c=e(49319);class g{constructor(w){this.columns=w,this.rowIndex=0}get length(){return this.columns.length}get(w){return this.columns[w].get(this.rowIndex)}toArray(){return(0,c.n)(this)}toJSON(){return(0,c.n)(this)}}var p=e(21760),y=e(3249),h=e(85854),a=e(78313),v=e(17130),C=e(21398),E=(L=>(L.ReduceRow="reduceRow",L.BinaryOperation="binary",L))(E||{});const P={reducer:p.gz.sum},x={left:"",operator:f.L.Add,right:""},M={id:v.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:p.gz.sum}},operator:(L,w)=>A=>{const N=L&&L.timeSeries!==!1?a.W.operator(null,w):C.d.operator({},w);return L.alias!=null&&(L.alias=w.interpolate(L.alias)),A.pipe(N,(0,n.U)(W=>{const I=L.mode??"reduceRow";let F;if(I==="reduceRow")F=S((0,t.defaults)(L.reduce,P),W);else if(I==="binary"){const V={...L.binary,left:w.interpolate(L.binary?.left),right:w.interpolate(L.binary?.right)};F=T((0,t.defaults)(V,x),W)}return F?W.map(V=>{const b=F(V);if(!b)return V;const X={name:R(L),type:i.fS.number,config:{},values:b};let k=[];if(L.replaceFields){const{timeField:H}=(0,u.sV)(V);H&&L.timeSeries!==!1?k=[H,X]:k=[X]}else k=[...V.fields,X];return{...V,fields:k}}):W}))}};function S(L,w){let A=(0,y.sq)({id:h.mi.numeric});L.include&&L.include.length&&(A=(0,y.sq)({id:h.mi.byNames,options:{names:L.include}}));const N=p.TB.get(L.reducer);if(!N)throw new Error(`Unknown reducer: ${L.reducer}`);const W=N.reduce??p.uP,I=L.nullValueMode===m.Gl.Ignore,F=L.nullValueMode===m.Gl.AsZero;return V=>{const b=[];for(const Y of V.fields)A(Y,V,w)&&b.push(Y.values);const X=new g(b),k={name:"temp",values:X,type:i.fS.number,config:{}},H=[];for(let Y=0;Y<V.length;Y++){X.rowIndex=Y;const ee=W(k,I,F)[L.reducer];H.push(ee)}return new o.G(H)}}function D(L,w,A){if(!w)return;for(const W of L.fields)if(w===(0,s.C)(W,L,A))return W.type===i.fS.boolean?new d.s(W.values):W.values;const N=parseFloat(w);if(!isNaN(N))return new l.u(N,L.length)}function T(L,w){const A=f.n.getIfExists(L.operator);return N=>{const W=D(N,L.left,w),I=D(N,L.right,w);if(!(!W||!I||!A))return new r.r(W,I,A.operation)}}function R(L){if(L.alias?.length)return L.alias;if(L.mode==="binary"){const{binary:w}=L;return`${w?.left??""} ${w?.operator??""} ${w?.right??""}`}if(L.mode==="reduceRow"){const w=p.TB.getIfExists(L.reduce?.reducer);if(w)return w.name}return"math"}},42074:(G,O,e)=>{"use strict";e.d(O,{HO:()=>i,aE:()=>m});var t=e(2101),n=e(14582),u=e(19695),s=e(17130),i=(o=>(o.Drop="drop",o.FieldName="field",o.Label="label",o))(i||{});const m={id:s.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:o=>l=>l.pipe((0,t.U)(r=>!Array.isArray(r)||r.length<2?r:[f(r,o)]))};function f(o,l){let r=!0,d=o[0].length;const c=l.frameNameLabel??"frame";let g=[];for(const p of o){d!==p.length&&(r=!1,d=Math.max(d,p.length));for(const y of p.fields){const h={...y};h.state=void 0,p.name&&(l.frameNameMode==="drop"||(l.frameNameMode==="label"?(h.labels={...y.labels},h.labels[c]=p.name):!h.name||h.name===n.M5?h.name=p.name:h.name=`${p.name} \xB7 ${y.name}`)),g.push(h)}}return r||(g=g.map(p=>{if(p.values.length===d)return p;const y=p.values.toArray();return y.length=d,{...p,values:new u.G(y)}})),{fields:g,length:d}}},2932:(G,O,e)=>{"use strict";e.d(O,{J_:()=>a,mg:()=>o});var t=e(2101),n=e(85052),u=e(14582),s=e(19695),i=e(3249),m=e(85854),f=e(17130);const o={id:f.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:(v,C)=>E=>E.pipe((0,t.U)(P=>o.transformer(v,C)(P))),transformer:v=>C=>{if(!Array.isArray(C)||C.length===0)return C;const E=l(v,C);return E||[]}};function l(v,C){if(!v.conversions.length)return C;const E=C.map(P=>({...P}));for(const P of v.conversions){if(!P.targetField)continue;const x=i.Ls.get(m.mi.byName).get(P.targetField);for(const M of E)M.fields=M.fields.map(S=>x(S,M,E)?r(S,P):S)}return E}function r(v,C){switch(C.destinationType){case u.fS.time:return a(v,C.dateFormat);case u.fS.number:return g(v);case u.fS.string:return y(v);case u.fS.boolean:return p(v);case u.fS.other:return h(v);default:return v}}const d=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3})?Z$/;function c(v,C){let E=C?{format:C}:void 0;const P=v.values.toArray().slice();let x=P.find(S=>S!=null),M=typeof x=="string"&&d.test(x);for(let S=0;S<P.length;S++)if(P[S]){let D=M?Date.parse(P[S]):(0,n.J)(P[S],E).valueOf();P[S]=Number.isFinite(D)?D:null}else P[S]=null;return{...v,type:u.fS.time,values:new s.G(P)}}function g(v){const C=v.values.toArray().slice(),E=C.some(P=>typeof P=="string");for(let P=0;P<C.length;P++){let x=C[P];E&&(x=x.replace(/,/g,""));const M=+x;C[P]=Number.isFinite(M)?M:null}return{...v,type:u.fS.number,values:new s.G(C)}}function p(v){const C=v.values.toArray().slice();for(let E=0;E<C.length;E++)C[E]=Boolean(!!C[E]);return{...v,type:u.fS.boolean,values:new s.G(C)}}function y(v){const C=v.values.toArray().slice();for(let E=0;E<C.length;E++)C[E]=`${C[E]}`;return{...v,type:u.fS.string,values:new s.G(C)}}function h(v){const C=v.values.toArray().slice();for(let E=0;E<C.length;E++)try{C[E]=JSON.parse(C[E])}catch{C[E]=null}return{...v,type:u.fS.other,values:new s.G(C)}}function a(v,C){const E=typeof v.values.get(0)=="number";return v.type===u.fS.time&&E?v:E?{...v,type:u.fS.time}:c(v,C)}},78313:(G,O,e)=>{"use strict";e.d(O,{W:()=>i});var t=e(2101),n=e(16911),u=e(17130),s=e(75176);const i={id:u.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(f,o)=>l=>l.pipe((0,t.U)(r=>i.transformer(f,o)(r))),transformer:(f,o)=>l=>{const r=m(l);if(l.length>1&&r){const d={};for(const c of l)c.refId&&(d[c.refId]=r);return s.M.transformer({fields:d},o)(l)}return l}};function m(f){let o;for(const l of f){const{timeField:r}=(0,n.sV)(l);if(!r)return;if(!o)o=r.name;else if(o!==r.name)return}return o}},33723:(G,O,e)=>{"use strict";e.d(O,{P:()=>i,u:()=>m});var t=e(2101),n=e(3249),u=e(17130),s=e(21398);const i={id:u.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(f,o)=>l=>!f.include&&!f.exclude?l.pipe(s.d.operator({},o)):(typeof f.include?.options=="string"?f.include.options=o.interpolate(f.include?.options):typeof f.include?.options?.pattern=="string"&&(f.include.options.pattern=o.interpolate(f.include?.options.pattern)),typeof f.exclude?.options=="string"?f.exclude.options=o.interpolate(f.exclude?.options):typeof f.exclude?.options?.pattern=="string"&&(f.exclude.options.pattern=o.interpolate(f.exclude?.options.pattern)),l.pipe((0,t.U)(r=>{const d=f.include?(0,n.sq)(f.include):null,c=f.exclude?(0,n.sq)(f.exclude):null,g=[];for(const p of r){const y=[];for(let a=0;a<p.fields.length;a++){const v=p.fields[a];if(c){if(c(v,p,r))continue;d||y.push(v)}d&&d(v,p,r)&&y.push(v)}if(!y.length)continue;const h={...p,fields:y};g.push(h)}return g})))},m={id:u.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(f,o)=>l=>!f.include&&!f.exclude?l.pipe(s.d.operator({},o)):l.pipe((0,t.U)(r=>{const d=f.include?(0,n.b9)(f.include):null,c=f.exclude?(0,n.b9)(f.exclude):null,g=[];for(const p of r){if(c){if(c(p))continue;d||g.push(p)}d&&d(p)&&g.push(p)}return g}))}},84931:(G,O,e)=>{"use strict";e.d(O,{f:()=>i,w:()=>s});var t=e(85854),n=e(33723),u=e(17130);const s={id:u.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(m,f)=>o=>o.pipe(n.P.operator({include:i(m.include),exclude:i(m.exclude)},f))},i=m=>{if(!m)return;const{names:f,pattern:o}=m;if(!((!Array.isArray(f)||f.length===0)&&!o))return o?!Array.isArray(f)||f.length===0?{id:t.mi.byRegexp,options:o}:{id:t.mi.byRegexpOrNames,options:m}:{id:t.mi.byNames,options:{names:f}}}},86789:(G,O,e)=>{"use strict";e.d(O,{ER:()=>o,JA:()=>l,PQ:()=>f});var t=e(2101),n=e(89890),u=e(19695),s=e(3249),i=e(17130),m=e(21398),f=(c=>(c.exclude="exclude",c.include="include",c))(f||{}),o=(c=>(c.all="all",c.any="any",c))(o||{});const l={id:i.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(c,g)=>p=>{const y=c.filters,h=c.match==="all",a=c.type==="include";return!Array.isArray(y)||y.length===0?p.pipe(m.d.operator({},g)):p.pipe((0,t.U)(v=>{if(!Array.isArray(v)||v.length===0)return v;const C=new Set;for(const x of v){const M=d(x,v),S=r(y,M);for(let D=0;D<x.length;D++){if(C.has(D))continue;let T=!0;for(const R of S){const L=R(D,x,v);if(!h&&L){T=!0;break}if(h&&!L){T=!1;break}T=L}T&&C.add(D)}}const E=[],P=a?C.size:v[0].length-C.size;for(const x of v){const M=[];for(const S of x.fields){const D=[];for(let T=0;T<x.length;T++){if(a&&C.has(T)){D.push(S.values.get(T));continue}if(!a&&!C.has(T)){D.push(S.values.get(T));continue}}M.push({...S,values:new u.G(D),state:{}})}E.push({...x,fields:M,length:P})}return E}))}},r=(c,g)=>{const p=()=>!1;return c.map(y=>{const h=g[y.fieldName]??-1;if(h<0)return console.warn(`[FilterByValue] Could not find index for field name: ${y.fieldName}`),p;const a=(0,s.IG)(y.config);return(v,C,E)=>a(v,C.fields[h],C,E)})},d=(c,g)=>c.fields.reduce((p,y,h)=>{const a=(0,n.C)(y,c,g);return p[a]=h,p},{})},88861:(G,O,e)=>{"use strict";e.d(O,{i:()=>l,x:()=>o});var t=e(2101),n=e(16911),u=e(89890),s=e(14582),i=e(19695),m=e(21760),f=e(17130),o=(g=>(g.aggregate="aggregate",g.groupBy="groupby",g))(o||{});const l={id:f.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group",defaultOptions:{fields:{}},operator:g=>p=>p.pipe((0,t.U)(y=>{if(!Object.keys(g.fields).find(v=>g.fields[v].operation==="groupby"))return y;const a=[];for(const v of y){const C=[];for(const x of v.fields)r(x,g)&&C.push(x);if(C.length===0)continue;const E=new Map;for(let x=0;x<v.length;x++){const M=String(C.map(D=>D.values.get(x))),S=E.get(M)??{};E.has(M)||E.set(M,S);for(let D of v.fields){const T=(0,u.C)(D);S[T]||(S[T]={name:T,type:D.type,config:{...D.config},values:new i.G}),S[T].values.add(D.values.get(x))}}const P=[];for(const x of C){const M=new i.G,S=(0,u.C)(x);E.forEach(D=>{M.add(D[S].values.get(0))}),P.push({name:x.name,type:x.type,config:{...x.config},values:M})}for(const x of v.fields){if(!d(x,g))continue;const M=(0,u.C)(x),S=g.fields[M].aggregations,D={};E.forEach(T=>{const R=T[M],L=(0,m.Kx)({field:R,reducers:S});for(const w of S)Array.isArray(D[w])||(D[w]=[]),D[w].push(L[w])});for(const T of S){const R={name:`${M} (${T})`,values:new i.G(D[T]),type:s.fS.other,config:{}};R.type=c(T,x,R),P.push(R)}}a.push({fields:P,length:E.size})}return a}))},r=(g,p)=>{const y=(0,u.C)(g);return p?.fields[y]?.operation==="groupby"},d=(g,p)=>{const y=(0,u.C)(g);return p?.fields[y]?.operation==="aggregate"&&Array.isArray(p?.fields[y].aggregations)&&p?.fields[y].aggregations.length>0},c=(g,p,y)=>{switch(g){case m.gz.allIsNull:return s.fS.boolean;case m.gz.last:case m.gz.lastNotNull:case m.gz.first:case m.gz.firstNotNull:return p.type;default:return(0,n.fu)(y)??s.fS.string}}},15128:(G,O,e)=>{"use strict";e.d(O,{Jz:()=>x,Ok:()=>h,Op:()=>p,UO:()=>M,Zi:()=>r,cO:()=>a,gY:()=>P,kl:()=>v,mB:()=>S,py:()=>g,qr:()=>C,wL:()=>y,zM:()=>T});var t=e(2101),n=e(36512),u=e(36328),s=e(88432),i=e(14582),m=e(43211),f=e(19695),o=e(17130),l=e(98234);const r=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],d=[null],c=(R,L)=>R-L,g={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},p={id:o.W.histogram,name:"Histogram",description:"Calculate a histogram from input data",defaultOptions:{fields:{}},operator:(R,L)=>w=>w.pipe((0,t.U)(A=>p.transformer(R,L)(A))),transformer:R=>L=>{if(!Array.isArray(L)||L.length===0)return L;const w=P(L,R);return w==null?[]:[T(w)]}},y="xMin";function h(R){return R===y||R==="BucketMin"}const a="xMax";function v(R){return R===a||R==="BucketMax"}function C(R){let L,w;const A=[];for(const N of R.fields)h(N.name)?L=N:v(N.name)?w=N:N.type===i.fS.number&&A.push(N);if(!w&&L&&L.values.length>1){let N=L.values.toArray(),W=(0,m.O)(N[1]-N[0],6);w={...L,name:a,values:new f.G(N.map(I=>I+W))}}if(!L&&w&&w?.values.length>1){let N=w.values.toArray(),W=(0,m.O)(N[1]-N[0],6);L={...w,name:y,values:new f.G(N.map(I=>I-W))}}if(L&&w&&A.length)return{xMin:L,xMax:w,counts:A}}const E=20;function P(R,L){let w=L?.bucketSize,A=L?.bucketOffset??0;if(!w||w<0){let H=[];for(const De of R)for(const fe of De.fields)fe.type===i.fS.number&&(H=H.concat(fe.values.toArray()));H=H.filter(De=>De!=null),H.sort((De,fe)=>De-fe);let Y=1/0;if(H.length===1)Y=1;else for(let De=1;De<H.length;De++){let fe=H[De]-H[De-1];fe!==0&&(Y=Math.min(Y,fe))}let ee=H[0];const ge=(H[H.length-1]-ee)/E;for(let De=0;De<r.length;De++){let fe=r[De];if(ge<fe&&fe>=Y){w=fe;break}}}const N=H=>S(H-A,w)+A;let W=((""+w).match(/\.\d+$/)??["."])[0].length-1,I=[],F=[],V;for(const H of R)for(const Y of H.fields)if(Y.type===i.fS.number){let ee=D(Y.values.toArray(),N,d,c);I.push(ee),F.push({...Y,config:{...Y.config,unit:Y.config.unit==="short"?"short":void 0}}),!V&&Y.config.unit&&(V=Y.config)}if(!F.length)return null;let b=(0,l.v_)(I);for(let H=1;H<b.length;H++){let Y=b[H];for(let ee=0;ee<Y.length;ee++)Y[ee]==null&&(Y[ee]=0)}const X={name:y,values:new f.G(b[0]),type:i.fS.number,state:void 0,config:W===0?V??{}:{...V,decimals:W}},k={...X,name:a,values:new f.G(b[0].map(H=>H+w))};if(L?.combine){const H=new Array(b[0].length).fill(0);for(let Y=1;Y<b.length;Y++)for(let ee=0;ee<H.length;ee++)H[ee]+=b[Y][ee];F=[{...F[0],name:"count",values:new f.G(H),type:i.fS.number,state:void 0}]}else F.forEach((H,Y)=>{H.values=new f.G(b[Y+1])});return{xMin:X,xMax:k,counts:F}}function x(R,L){return Math.round(R/L)*L}function M(R,L){return Math.ceil(R/L)*L}function S(R,L){return Math.floor(R/L)*L}function D(R,L,w,A){let N=new Map;for(let V=0;V<R.length;V++){let b=R[V];b!=null&&(b=L(b));let X=N.get(b);X?X.count++:N.set(b,{value:b,count:1})}w&&w.forEach(V=>N.delete(V));let W=[...N.values()];A&&W.sort((V,b)=>A(V.value,b.value));let I=Array(W.length),F=Array(W.length);for(let V=0;V<W.length;V++)I[V]=W[V].value,F[V]=W[V].count;return[I,F]}function T(R,L){if(!R.xMin.display){const w=(0,n.U)({field:R.xMin,theme:L??(0,u.j)()});R.xMin.display=w,R.xMax.display=w}return R.counts[0].display=(0,n.U)({field:R.counts[0],theme:L??(0,u.j)()}),{length:R.xMin.values.length,meta:{type:s.P.Histogram},fields:[R.xMin,R.xMax,...R.counts]}}},75176:(G,O,e)=>{"use strict";e.d(O,{M:()=>i,c:()=>s});var t=e(2101),n=e(17130),u=e(98234),s=(m=>(m.outer="outer",m.inner="inner",m))(s||{});const i={id:n.W.joinByField,aliasIds:[n.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{fields:{},mode:"outer"},operator:(m,f)=>o=>o.pipe((0,t.U)(l=>i.transformer(m,f)(l))),transformer:m=>f=>{if(f.length>1){const o=(0,u._9)({frames:f,mode:m.mode,fields:m.fields});if(o)return[o]}return f}}},98234:(G,O,e)=>{"use strict";e.d(O,{Y3:()=>r,_9:()=>d,v_:()=>h});var t=e(39963),n=e(16911),u=e(14582),s=e(19695),i=e(3249),m=e(85854),f=e(75176);function o(v){const{timeField:C}=(0,n.sV)(v[0]);if(C)return i.Ls.get(m.mi.firstTimeField).get({});let E=[];for(const P of v[0].fields)P.type===u.fS.number&&E.push(P.name);for(let P=1;P<v.length;P++){const x=[];for(const M of v[0].fields)M.type===u.fS.number&&x.push(M.name);E=E.filter(M=>!x.includes(M))}return i.Ls.get(m.mi.byName).get(E[0])}function l(v,C){return v.joinBy?v.joinBy:!v.fields||!C?o(v.frames):i.Ls.get(m.mi.byName).get(v.fields[C])}function r(v,C){if(C>=0){let E=v.fields[C];E.type!==u.fS.string&&!a(E.values)&&(v=(0,n.aK)(v,C))}return v}function d(v){if(!v.frames?.length)return;if(v.frames.length===1){let M=v.frames[0],S=M;const D=l(v,M.refId);let T=S.fields.findIndex(R=>D(R,S,v.frames));if(v.keepOriginIndices&&(S={...M,fields:M.fields.map((R,L)=>{const w={...R},A={frameIndex:0,fieldIndex:L};return w.state?w.state.origin=A:w.state={origin:A},w})},T>0)){const R=S.fields[T],L=S.fields.filter((w,A)=>A!==T);L.unshift(R),S.fields=L,T=0}if(T>=0&&(S=r(S,T)),v.keep){let R=S.fields.filter((L,w)=>w===T||v.keep(L,S,v.frames));M!==S?S.fields=R:S={...M,fields:R}}return S}const C=[],E=[],P=[];for(let M=0;M<v.frames.length;M++){const S=v.frames[M],D=l(v,S.refId);if(!S||!S.fields?.length)continue;const T=[c];let R,L=[];for(let A=0;A<S.fields.length;A++){const N=S.fields[A];if(N.state=N.state||{},!R&&D(N,S,v.frames))R=N;else{if(v.keep&&!v.keep(N,S,v.frames))continue;let W=N.config.custom?.spanNulls;T.push(W===!0?c:W===-1?g:p);let I=N.labels??{};S.name&&(I={...I,name:S.name}),L.push({...N,labels:I})}v.keepOriginIndices&&(N.state.origin={frameIndex:M,fieldIndex:A})}if(!R)continue;P.length===0&&P.push(R),C.push(T);const w=[R.values.toArray()];for(const A of L)w.push(A.values.toArray()),P.push(A),delete A.state?.displayName;E.push(w)}const x=h(E,C,v.mode);return{length:x[0].length,fields:P.map((M,S)=>({...M,values:new s.G(x[S])}))}}const c=0,g=1,p=2;function y(v,C,E){for(let P=0,x,M=-1;P<C.length;P++){let S=C[P];if(S>M){for(x=S-1;x>=0&&v[x]==null;)v[x--]=null;for(x=S+1;x<E&&v[x]==null;)v[M=x++]=null}}}function h(v,C,E=f.c.outer){let P;if(E===f.c.inner)P=new Set((0,t.Z)(v.map(D=>D[0])));else{P=new Set;for(let D=0;D<v.length;D++){let R=v[D][0],L=R.length;for(let w=0;w<L;w++)P.add(R[w])}}let x=[Array.from(P).sort((D,T)=>D-T)],M=x[0].length,S=new Map;for(let D=0;D<M;D++)S.set(x[0][D],D);for(let D=0;D<v.length;D++){let T=v[D],R=T[0];for(let L=1;L<T.length;L++){let w=T[L],A=Array(M).fill(void 0),N=C?C[D][L]:g,W=[];for(let I=0;I<w.length;I++){let F=w[I],V=S.get(R[I]);F===null?N!==c&&(A[V]=F,N===p&&W.push(V)):A[V]=F}y(A,W,M),x.push(A)}}return x}function a(v,C=50){const E=v.length;if(E<=1)return!0;let P=0,x=E-1;for(;P<=x&&v.get(P)==null;)P++;for(;x>=P&&v.get(x)==null;)x--;if(x<=P)return!0;const M=Math.max(1,Math.floor((x-P+1)/C));for(let S=v.get(P),D=P+M;D<=x;D+=M){const T=v.get(D);if(T!=null){if(T<=S)return!1;S=T}}return!0}},1052:(G,O,e)=>{"use strict";e.d(O,{k:()=>m,r:()=>f});var t=e(2101),n=e(89890),u=e(14582),s=e(19695),i=e(17130),m=(l=>(l.Columns="columns",l.Rows="rows",l))(m||{});const f={id:i.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(l,r)=>d=>d.pipe((0,t.U)(c=>f.transformer(l,r)(c))),transformer:l=>r=>{if(l.mode==="rows")return o(r,l.keepLabels);const d=[],c=l.keepLabels?.length?new Set(l.keepLabels):void 0;for(const g of r){const p=[],y={};for(const h of g.fields){if(!h.labels){p.push(h);continue}const a={...h,config:{...h.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};p.push(a);for(const v of Object.keys(h.labels)){if(c&&!c.has(v))continue;if(l.valueLabel===v){a.name=h.labels[v];continue}(y[v]??(y[v]=new Set)).add(h.labels[v])}}for(const h in y)for(const a of y[h]){const v=new Array(g.length).fill(a);p.push({name:h,type:u.fS.string,values:new s.G(v),config:{}})}d.push({...g,fields:p,length:g.length})}return d}};function o(l,r){const d=[];for(const c of l)for(const g of c.fields)if(g.labels){const p=[],y=[];if(r)for(const h of r)p.push(h),y.push(g.labels[h]);else for(const[h,a]of Object.entries(g.labels))p.push(h),y.push(a);y.length&&d.push({...c,name:(0,n.C)(g,c,l),fields:[{name:"label",type:u.fS.string,config:{},values:new s.G(p)},{name:"value",type:u.fS.string,config:{},values:new s.G(y)}],length:y.length})}return d}},10158:(G,O,e)=>{"use strict";e.d(O,{R:()=>f});var t=e(82897),n=e.n(t),u=e(2101),s=e(38685),i=e(19695),m=e(17130);const f={id:m.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},operator:p=>y=>y.pipe((0,u.U)(h=>{if(!Array.isArray(h)||h.length<=1)return h;const a=h.filter(T=>T.fields.length>0);if(a.length===0)return[h[0]];const v=new Set,C={},E=[],P=new s.v;for(let T=0;T<a.length;T++){const R=a[T];for(let L=0;L<R.fields.length;L++){const w=R.fields[L];v.has(w.name)||(P.addField(o(w)),v.add(w.name)),C[w.name]=C[w.name]||{},C[w.name][T]=L,a.length-1===T&&c(C,w,a)&&E.push(w.name)}}if(E.length===0)return h;const x={},M=[],S=l(a,C,E),D=r(a,v,C);for(let T=0;T<a.length;T++){const R=a[T];for(let L=0;L<R.length;L++){const w=S(T,L),A=D(T,L);if(!Array.isArray(x[w])){x[w]=[A],M.push(g(w,x));continue}let N=!1;x[w]=x[w].map(W=>d(W,A)?(N=!0,{...W,...A}):W),N||(x[w].push(A),M.push(g(w,x)))}}for(const T of M){const R=x[T.key][T.index];R&&P.add(R)}return[P]}))},o=p=>({...(0,t.omit)(p,["values","state","labels","config"]),values:new i.G,config:{...(0,t.omit)(p.config,"displayName")}}),l=(p,y,h)=>{const a=h.reduce((v,C)=>Object.keys(y[C]).reduce((E,P)=>(E[P]=E[P]||[],E[P].push(y[C][P]),E),v),{});return(v,C)=>a[v].reduce((E,P)=>E+p[v].fields[P].values.get(C),"")},r=(p,y,h)=>(a,v)=>{const C={},E=Array.from(y);for(const P of E){const x=h[P];if(!x)continue;const M=x[a];if(typeof M!="number")continue;const S=p[a];if(!S||!S.fields)continue;const D=S.fields[M];!D||!D.values||(C[P]=D.values.get(v))}return C},d=(p,y)=>{let h=!0;for(const a in y)if(!(typeof p[a]>"u")&&p[a]!==null&&p[a]!==y[a]){h=!1;break}return h},c=(p,y,h)=>Object.keys(p[y.name]).length===h.length,g=(p,y)=>({key:p,index:y[p].length-1})},21398:(G,O,e)=>{"use strict";e.d(O,{d:()=>n});var t=e(17130);const n={id:t.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:u=>s=>s,transformer:u=>s=>s}},7582:(G,O,e)=>{"use strict";e.d(O,{$:()=>f,t:()=>m});var t=e(82897),n=e.n(t),u=e(2101),s=e(89890),i=e(17130);const m={id:i.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:r=>d=>d.pipe((0,u.U)(c=>{const g=o(r.indexByName);return!Array.isArray(c)||c.length===0?c:c.map(p=>({...p,fields:g(p.fields,c,p)}))}))},f=r=>(d,c)=>l(d,r)-l(c,r),o=r=>(d,c,g)=>{if(!Array.isArray(d)||d.length===0||!r||Object.keys(r).length===0)return d;const p=f(r);return(0,t.clone)(d).sort((y,h)=>p((0,s.C)(y,g,c),(0,s.C)(h,g,c)))},l=(r,d)=>Number.isInteger(d[r])?d[r]:Number.MAX_SAFE_INTEGER},4157:(G,O,e)=>{"use strict";e.d(O,{AL:()=>r,mf:()=>d});var t=e(2101),n=e(16911),u=e(89890),s=e(14582),i=e(19695),m=e(21760),f=e(3249),o=e(89771),l=e(17130),r=(h=>(h.SeriesToRows="seriesToRows",h.ReduceFields="reduceFields",h))(r||{});const d={id:l.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last",defaultOptions:{reducers:[m.gz.max]},operator:h=>a=>a.pipe((0,t.U)(v=>{if(!h?.reducers?.length)return v;const C=h.fields?(0,f.sq)(h.fields):h.includeTimeField&&h.mode==="reduceFields"?o.m3:o.Qw;if(h.mode==="reduceFields")return y(v,C,h.reducers);const E=c(v,C,h.reducers,h.labelsToFields);return E?[E]:[]}))};function c(h,a,v,C){const E=m.TB.list(v),P=E.map(S=>S.id),x=[],M=C?g(h):[];for(const S of h){const D=S.fields.filter(N=>a(N,S,h)),T=D.length,R=[],L=new i.G(new Array(T));R.push({name:"Field",type:s.fS.string,values:L,config:{}});const w={};if(C)for(const N of M)w[N]=new i.G(new Array(T)),R.push({name:N,type:s.fS.string,values:w[N],config:{}});const A={};for(const N of E)A[N.id]=new i.G(new Array(T)),R.push({name:N.name,type:s.fS.other,values:A[N.id],config:{}});for(let N=0;N<D.length;N++){const W=D[N],I=(0,m.Kx)({field:W,reducers:P});if(C){if(L.buffer[N]=W.name,W.labels)for(const F of Object.keys(W.labels))w[F].set(N,W.labels[F])}else L.buffer[N]=(0,u.C)(W,S,h);for(const F of E){const V=I[F.id];A[F.id].buffer[N]=V}}for(const N of R)if(N.type===s.fS.other){const W=(0,n.fu)(N);W&&(N.type=W)}x.push({...S,fields:R,length:T})}return p(x)}function g(h){const a=new Set;for(const v of h)for(const C of v.fields)if(C.labels)for(const E of Object.keys(C.labels))a.add(E);return[...a]}function p(h){if(!h?.length)return;const a=h[0];for(let v=1;v<h.length;v++){const C=h[v];for(let E=0;E<a.fields.length;E++){const P=a.fields[E];for(let x=0;x<C.fields.length;x++){const M=C.fields[x],S=E===0&&x===0,D=P.type===M.type&&P.name===M.name;if(S||D){const T=P.values.toArray(),R=M.values.toArray();P.values.buffer=T.concat(R)}}}}return a.name=void 0,a.length=a.fields[0].values.length,a}function y(h,a,v){const E=m.TB.list(v).map(x=>x.id),P=[];for(const x of h){const M=[];for(const S of x.fields)if(a(S,x,h)){const D=(0,m.Kx)({field:S,reducers:E});for(const T of E){const R=D[T],L={...S,values:new i.G([R])};L.state=void 0,E.length>1&&(L.labels||(L.labels={}),L.labels.reducer=m.TB.get(T).name),M.push(L)}}M.length&&P.push({...x,fields:M,length:1})}return P}},17179:()=>{"use strict"},14633:()=>{"use strict"},23309:(G,O,e)=>{"use strict";e.d(O,{Z:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},20442:(G,O,e)=>{"use strict";e.d(O,{L:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},40400:(G,O,e)=>{"use strict";e.d(O,{CQ:()=>s,k8:()=>u,zj:()=>n});var t=e(24699),n=(i=>(i.CloudAlerting="cloud-alerting",i.UnifiedAlerting="unified-alerting",i.Dashboard="dashboard",i.Explore="explore",i.Correlations="correlations",i.Unknown="unknown",i.PanelEditor="panel-editor",i.PanelViewer="panel-viewer",i))(n||{});class u extends t.Sg{init(m){}setRootPage(m,f){return this.root=m,this.rootNav=f,this}setComponentsFromLegacyExports(m){if(m.ConfigCtrl&&(this.angularConfigCtrl=m.ConfigCtrl),this.meta&&this.meta.includes){for(const f of this.meta.includes)if(f.type===t.$_.page&&f.component&&!m[f.component]){console.warn("App Page uses unknown component: ",f.component,this.meta);continue}}}}var s=(i=>(i.alpha="alpha",i.beta="beta",i))(s||{})},66847:(G,O,e)=>{"use strict";e.d(O,{Hx:()=>t,Z3:()=>n,bm:()=>u});const t=0,n=100,u="SAML"},29431:(G,O,e)=>{"use strict";e.d(O,{m:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},49922:(G,O,e)=>{"use strict";e.d(O,{Gl:()=>u,Gu:()=>t,dC:()=>n,fQ:()=>s});var t=(i=>(i.NotStarted="NotStarted",i.Loading="Loading",i.Streaming="Streaming",i.Done="Done",i.Error="Error",i))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var u=(i=>(i.Null="null",i.Ignore="connected",i.AsZero="null as zero",i))(u||{});const s=i=>Boolean(i)},14582:(G,O,e)=>{"use strict";e.d(O,{Ls:()=>u,M5:()=>n,fS:()=>t,rN:()=>s});var t=(i=>(i.time="time",i.number="number",i.string="string",i.boolean="boolean",i.trace="trace",i.geo="geo",i.other="other",i))(t||{});const n="Value",u="Time",s="Metric"},88432:(G,O,e)=>{"use strict";e.d(O,{P:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},28151:(G,O,e)=>{"use strict";e.d(O,{L:()=>t,o:()=>n});var t=(u=>(u.Series="series",u.Field="field",u.Fields="fields",u.Value="value",u.BuiltIn="built-in",u.Template="template",u))(t||{}),n=(u=>(u.Values="values",u))(n||{})},7238:(G,O,e)=>{"use strict";e.d(O,{MF:()=>s,Ru:()=>i,eA:()=>m,hf:()=>u,iL:()=>f});var t=e(77345),n=e(24699);class u extends n.Sg{constructor(l){super(),this.DataSourceClass=l,this.components={}}setConfigEditor(l){return this.components.ConfigEditor=l,this}setConfigCtrl(l){return this.angularConfigCtrl=l,this}setQueryCtrl(l){return this.components.QueryCtrl=l,this}setAnnotationQueryCtrl(l){return this.components.AnnotationsQueryCtrl=l,this}setQueryEditor(l){return this.components.QueryEditor=l,this}setExploreQueryField(l){return this.components.ExploreQueryField=l,this}setExploreMetricsQueryField(l){return this.components.ExploreMetricsQueryField=l,this}setExploreLogsQueryField(l){return this.components.ExploreLogsQueryField=l,this}setQueryEditorHelp(l){return this.components.QueryEditorHelp=l,this}setExploreStartPage(l){return this.setQueryEditorHelp(l)}setVariableQueryEditor(l){return this.components.VariableQueryEditor=l,this}setMetadataInspector(l){return this.components.MetadataInspector=l,this}setComponentsFromLegacyExports(l){this.angularConfigCtrl=l.ConfigCtrl,this.components.QueryCtrl=l.QueryCtrl,this.components.AnnotationsQueryCtrl=l.AnnotationsQueryCtrl,this.components.ExploreQueryField=l.ExploreQueryField,this.components.QueryEditor=l.QueryEditor,this.components.QueryEditorHelp=l.QueryEditorHelp,this.components.VariableQueryEditor=l.VariableQueryEditor}}class s{constructor(l){this.name=l.name,this.id=l.id,this.type=l.type,this.meta=l.meta,this.uid=l.uid}getRef(){return{type:this.type,uid:this.uid}}}var i=(o=>(o.Logs="Logs",o.Metrics="Metrics",o.Tracing="Tracing",o))(i||{}),m=(o=>(o.Cancelled="cancelled",o.Timeout="timeout",o.Unknown="unknown",o))(m||{});class f{}f=(0,t.s)(f),s=(0,t.s)(s)},93893:()=>{"use strict"},21921:()=>{"use strict"},66926:(G,O,e)=>{"use strict";e.d(O,{R:()=>n,S:()=>t});var t=(u=>(u.Thresholds="thresholds",u.PaletteClassic="palette-classic",u.PaletteSaturated="palette-saturated",u.ContinuousGrYlRd="continuous-GrYlRd",u.Fixed="fixed",u))(t||{});const n="gray"},68061:(G,O,e)=>{"use strict";e.d(O,{Y4:()=>t,qb:()=>u,v3:()=>n});function t(s){return i=>i.__systemRef===s}const n=s=>typeof s?.__systemRef=="string";var u=(s=>(s.Unit="unit",s.Min="min",s.Max="max",s.Decimals="decimals",s.DisplayName="displayName",s.NoValue="noValue",s.Thresholds="thresholds",s.Mappings="mappings",s.Links="links",s.Color="color",s))(u||{})},88723:()=>{"use strict"},45072:()=>{"use strict"},9785:()=>{"use strict"},43565:(G,O,e)=>{"use strict";e.d(O,{Mo:()=>n,_S:()=>t,iJ:()=>u});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,grafana:!0,"graph-bar":!0,"grafana-ml":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,lock:!0,"map-marker":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,"stopwatch-slash":!0,sync:!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"wrap-text":!0,rss:!0,x:!0};function n(s){return!s||typeof s!="string"?!1:s in t}function u(s){if(n(s))return s}},19108:(G,O,e)=>{"use strict";e.r(O),e.d(O,{AbstractLabelOperator:()=>f.K2,AlertState:()=>me.Z,AnnotationEventFieldSource:()=>o.L,AppEvents:()=>ee.SI,AppPlugin:()=>R.k8,CoreApp:()=>R.zj,CustomVariableSupport:()=>q.Mg,DEFAULT_SAML_NAME:()=>t.bm,DashboardCursorSync:()=>m.m,DataFrameType:()=>s.P,DataQueryErrorType:()=>L.eA,DataSourceApi:()=>L.MF,DataSourcePlugin:()=>L.hf,DataSourceVariableSupport:()=>q.gv,DataTopic:()=>f.w5,DefaultTimeZone:()=>p.Ys,ExploreMode:()=>L.Ru,FALLBACK_COLOR:()=>W.R,FeatureState:()=>R.CQ,FieldColorModeId:()=>W.S,FieldConfigProperty:()=>S.qb,FieldType:()=>u.fS,GAUGE_DEFAULT_MAXIMUM:()=>t.Z3,GAUGE_DEFAULT_MINIMUM:()=>t.Hx,GrafanaPlugin:()=>A.Sg,GrafanaThemeType:()=>I.Q,LanguageProvider:()=>L.iL,LegacyGraphHoverClearEvent:()=>ee.oi,LegacyGraphHoverEvent:()=>ee.IA,LiveChannelConnectionState:()=>ue.yS,LiveChannelEventType:()=>ue.FU,LiveChannelScope:()=>ue.z,LiveChannelType:()=>ue.SK,LoadingState:()=>n.Gu,LogLevel:()=>l.in,LogsDedupDescription:()=>l.Uv,LogsDedupStrategy:()=>l.Y4,LogsMetaKind:()=>l.Ku,LogsSortOrder:()=>l.UV,MappingType:()=>h.H,NavMenuItemType:()=>d.VO,NavSection:()=>d.yV,NullValueMode:()=>n.Gl,OrgRole:()=>F.B,PageLayoutType:()=>d.Qz,PanelEvents:()=>ee.Kh,PluginErrorCode:()=>A.w2,PluginIncludeType:()=>A.$_,PluginSignatureStatus:()=>A.Xy,PluginSignatureType:()=>A._Z,PluginState:()=>A.BV,PluginType:()=>A.zV,SpecialValue:()=>M.U,SpecialValueMatch:()=>h.e,StandardVariableSupport:()=>q.v6,SupplementaryQueryType:()=>l.v8,TIME_FORMAT:()=>p.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>u.rN,TIME_SERIES_TIME_FIELD_NAME:()=>u.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>u.M5,ThresholdsMode:()=>y.H,VariableHide:()=>N.bU,VariableOrigin:()=>i.L,VariableRefresh:()=>N.Bd,VariableSort:()=>N.$U,VariableSuggestionsScope:()=>i.o,VariableSupportBase:()=>q.Tq,VariableSupportType:()=>q.j2,VisualizationSuggestionScore:()=>w._,VisualizationSuggestionsBuilder:()=>w.mi,VisualizationSuggestionsListAppender:()=>w.sf,VizOrientation:()=>w.wm,availableIconsIndex:()=>te._S,getDefaultRelativeTimeRange:()=>p.Rr,getDefaultTimeRange:()=>p.JK,hasLogsContextSupport:()=>l.Q4,hasLogsVolumeSupport:()=>r.O,hasQueryExportSupport:()=>f.p,hasQueryImportSupport:()=>f.CZ,hasSupplementaryQuerySupport:()=>l.mN,isIconName:()=>te.Mo,isLiveChannelJoinEvent:()=>ue.mx,isLiveChannelLeaveEvent:()=>ue.gH,isLiveChannelMessageEvent:()=>ue.RL,isLiveChannelStatusEvent:()=>ue.se,isSystemOverride:()=>S.v3,isSystemOverrideWithRef:()=>S.Y4,isTruthy:()=>n.fQ,isUnsignedPluginSignature:()=>fe.x,isValidLiveChannelAddress:()=>ue.nU,parseLiveChannelAddress:()=>ue.H7,preferredVisualizationTypes:()=>n.dC,toIconName:()=>te.iJ,toLiveChannelId:()=>ue.Aj});var t=e(66847),n=e(49922),u=e(14582),s=e(88432),i=e(28151),m=e(29431),f=e(62163),o=e(20442),l=e(90595),r=e(16642),d=e(24844),c=e(45671),g=e.n(c),J={};for(const ne in c)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType"].indexOf(ne)<0&&(J[ne]=()=>c[ne]);e.d(O,J);var p=e(69311),y=e(24177),h=e(26031),a=e(93893),v=e.n(a),J={};for(const ne in a)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ne)<0&&(J[ne]=()=>a[ne]);e.d(O,J);var C=e(9785),E=e.n(C),J={};for(const ne in C)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ne)<0&&(J[ne]=()=>C[ne]);e.d(O,J);var P=e(17179),x=e.n(P),J={};for(const ne in P)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(ne)<0&&(J[ne]=()=>P[ne]);e.d(O,J);var M=e(16217),S=e(68061),D=e(72901),T=e.n(D),J={};for(const ne in D)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef"].indexOf(ne)<0&&(J[ne]=()=>D[ne]);e.d(O,J);var R=e(40400),L=e(7238),w=e(20251),A=e(24699),N=e(22107),W=e(66926),I=e(55422),F=e(74020),V=e(88723),b=e.n(V),J={};for(const ne in V)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ne)<0&&(J[ne]=()=>V[ne]);e.d(O,J);var X=e(68368),k=e.n(X),J={};for(const ne in X)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ne)<0&&(J[ne]=()=>X[ne]);e.d(O,J);var H=e(21921),Y=e.n(H),J={};for(const ne in H)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(ne)<0&&(J[ne]=()=>H[ne]);e.d(O,J);var ee=e(25318),ue=e(62626),q=e(59670),ge=e(45072),De=e.n(ge),J={};for(const ne in ge)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(ne)<0&&(J[ne]=()=>ge[ne]);e.d(O,J);var fe=e(81850),me=e(23309),ce=e(33559),ie=e.n(ce),J={};for(const ne in ce)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(ne)<0&&(J[ne]=()=>ce[ne]);e.d(O,J);var re=e(14633),Ee=e.n(re),J={};for(const ne in re)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(ne)<0&&(J[ne]=()=>re[ne]);e.d(O,J);var te=e(43565)},1762:(G,O,e)=>{"use strict";e.d(O,{l:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},25318:(G,O,e)=>{"use strict";e.d(O,{IA:()=>i,Kh:()=>s,SI:()=>u,oi:()=>m});var t=e(39253),n=e(62316);const u={alertSuccess:(0,t.X)("alert-success"),alertWarning:(0,t.X)("alert-warning"),alertError:(0,t.X)("alert-error")},s={refresh:(0,t.X)("refresh"),componentDidMount:(0,t.X)("component-did-mount"),dataReceived:(0,t.X)("data-received"),dataError:(0,t.X)("data-error"),dataFramesReceived:(0,t.X)("data-frames-received"),dataSnapshotLoad:(0,t.X)("data-snapshot-load"),editModeInitialized:(0,t.X)("init-edit-mode"),initPanelActions:(0,t.X)("init-panel-actions"),initialized:(0,t.X)("panel-initialized"),panelTeardown:(0,t.X)("panel-teardown"),render:(0,t.X)("render")};class i extends n.R{}i.type="graph-hover";class m extends n.m{constructor(){super(...arguments),this.payload={point:{}}}}m.type="graph-hover-clear"},62626:(G,O,e)=>{"use strict";e.d(O,{Aj:()=>d,FU:()=>s,H7:()=>l,RL:()=>o,SK:()=>n,gH:()=>f,mx:()=>m,nU:()=>r,se:()=>i,yS:()=>u,z:()=>t});var t=(c=>(c.DataSource="ds",c.Plugin="plugin",c.Grafana="grafana",c.Stream="stream",c))(t||{}),n=(c=>(c.DataStream="stream",c.DataFrame="frame",c.JSON="json",c))(n||{}),u=(c=>(c.Pending="pending",c.Connected="connected",c.Connecting="connecting",c.Disconnected="disconnected",c.Shutdown="shutdown",c.Invalid="invalid",c))(u||{}),s=(c=>(c.Status="status",c.Join="join",c.Leave="leave",c.Message="message",c))(s||{});function i(c){return c.type==="status"}function m(c){return c.type==="join"}function f(c){return c.type==="leave"}function o(c){return c.type==="message"}function l(c){if(c?.length){let g=c.trim().split("/");if(g.length>=3)return{scope:g[0],namespace:g[1],path:g.slice(2).join("/")}}}function r(c){return!!(c?.path&&c.namespace&&c.scope)}function d(c){if(!c.scope)return"";let g=c.scope;return!c.namespace||(g+="/"+c.namespace,!c.path)?g:g+"/"+c.path}},90595:(G,O,e)=>{"use strict";e.d(O,{Ku:()=>n,Q4:()=>m,UV:()=>u,Uv:()=>i,Y4:()=>s,in:()=>t,mN:()=>o,v8:()=>f});var t=(l=>(l.emerg="critical",l.fatal="critical",l.alert="critical",l.crit="critical",l.critical="critical",l.warn="warning",l.warning="warning",l.err="error",l.eror="error",l.error="error",l.info="info",l.information="info",l.informational="info",l.notice="info",l.dbug="debug",l.debug="debug",l.trace="trace",l.unknown="unknown",l))(t||{}),n=(l=>(l[l.Number=0]="Number",l[l.String=1]="String",l[l.LabelsMap=2]="LabelsMap",l[l.Error=3]="Error",l))(n||{}),u=(l=>(l.Descending="Descending",l.Ascending="Ascending",l))(u||{}),s=(l=>(l.none="none",l.exact="exact",l.numbers="numbers",l.signature="signature",l))(s||{}),i=(l=>(l.none="No de-duplication",l.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",l.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",l.signature="De-duplication of successive lines that have identical punctuation and whitespace.",l))(i||{});const m=l=>{if(!l)return!1;const r=l;return r.getLogRowContext!==void 0&&r.showContextToggle!==void 0};var f=(l=>(l.LogsVolume="LogsVolume",l.LogsSample="LogsSample",l))(f||{});const o=(l,r)=>{if(!l)return!1;const d=l;return d.getDataProvider!==void 0&&d.getSupplementaryQuery!==void 0&&d.getSupportedSupplementaryQueryTypes().includes(r)}},16642:(G,O,e)=>{"use strict";e.d(O,{O:()=>t});const t=n=>n.getLogsVolumeDataProvider!==void 0},24844:(G,O,e)=>{"use strict";e.d(O,{Qz:()=>u,VO:()=>n,yV:()=>t});var t=(s=>(s.Core="core",s.Plugin="plugin",s.Config="config",s))(t||{}),n=(s=>(s.Section="section",s.Item="item",s))(n||{}),u=(s=>(s[s.Standard=0]="Standard",s[s.Canvas=1]="Canvas",s[s.Custom=2]="Custom",s))(u||{})},74020:(G,O,e)=>{"use strict";e.d(O,{B:()=>t});var t=(n=>(n.Admin="Admin",n.Editor="Editor",n.Viewer="Viewer",n))(t||{})},20251:(G,O,e)=>{"use strict";e.d(O,{_:()=>i,mi:()=>m,sf:()=>f,wm:()=>s});var t=e(82897),n=e.n(t),u=e(14582),s=(o=>(o.Auto="auto",o.Vertical="vertical",o.Horizontal="horizontal",o))(s||{}),i=(o=>(o[o.Best=100]="Best",o[o.Good=70]="Good",o[o.OK=50]="OK",o))(i||{});class m{constructor(l,r){this.list=[],this.data=l,this.panel=r,this.dataSummary=this.computeDataSummary()}getListAppender(l){return new f(this.list,l)}computeDataSummary(){const l=this.data?.series||[];let r=0,d=0,c=0,g=0,p=0,y=0,h;for(const a of l){g+=a.length,a.meta?.preferredVisualisationType&&(h=a.meta.preferredVisualisationType);for(const v of a.fields)switch(y++,v.type){case u.fS.number:r+=1;break;case u.fS.time:d+=1;break;case u.fS.string:c+=1;break}a.length>p&&(p=a.length)}return{numberFieldCount:r,timeFieldCount:d,stringFieldCount:c,rowCountTotal:g,rowCountMax:p,fieldCount:y,preferredVisualisationType:h,frameCount:l.length,hasData:g>0,hasTimeField:d>0,hasNumberField:r>0,hasStringField:c>0}}getList(){return this.list}}class f{constructor(l,r){this.list=l,this.defaults=r}append(l){this.list.push((0,t.defaultsDeep)(l,this.defaults))}}},24699:(G,O,e)=>{"use strict";e.d(O,{$_:()=>m,BV:()=>t,Sg:()=>f,Xy:()=>u,_Z:()=>s,w2:()=>i,zV:()=>n});var t=(o=>(o.alpha="alpha",o.beta="beta",o.stable="stable",o.deprecated="deprecated",o))(t||{}),n=(o=>(o.panel="panel",o.datasource="datasource",o.app="app",o.renderer="renderer",o.secretsmanager="secretsmanager",o))(n||{}),u=(o=>(o.internal="internal",o.valid="valid",o.invalid="invalid",o.modified="modified",o.missing="missing",o))(u||{}),s=(o=>(o.grafana="grafana",o.commercial="commercial",o.community="community",o.private="private",o.core="core",o))(s||{}),i=(o=>(o.missingSignature="signatureMissing",o.invalidSignature="signatureInvalid",o.modifiedSignature="signatureModified",o))(i||{}),m=(o=>(o.dashboard="dashboard",o.page="page",o.panel="panel",o.datasource="datasource",o))(m||{});class f{addConfigPage(l){return this.configPages||(this.configPages=[]),this.configPages.push(l),this}setChannelSupport(l){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},81850:(G,O,e)=>{"use strict";e.d(O,{x:()=>n});var t=e(24699);function n(u){return u&&u!==t.Xy.valid&&u!==t.Xy.internal}},62163:(G,O,e)=>{"use strict";e.d(O,{CZ:()=>u,K2:()=>n,p:()=>s,w5:()=>t});var t=(i=>(i.Annotations="annotations",i))(t||{}),n=(i=>(i.Equal="Equal",i.NotEqual="NotEqual",i.EqualRegEx="EqualRegEx",i.NotEqualRegEx="NotEqualRegEx",i))(n||{});const u=i=>i.importFromAbstractQueries!==void 0,s=i=>i.exportToAbstractQueries!==void 0},45671:()=>{"use strict"},33559:()=>{"use strict"},22107:(G,O,e)=>{"use strict";e.d(O,{$U:()=>n,Bd:()=>t,bU:()=>u});var t=(s=>(s[s.never=0]="never",s[s.onDashboardLoad=1]="onDashboardLoad",s[s.onTimeRangeChanged=2]="onTimeRangeChanged",s))(t||{}),n=(s=>(s[s.disabled=0]="disabled",s[s.alphabeticalAsc=1]="alphabeticalAsc",s[s.alphabeticalDesc=2]="alphabeticalDesc",s[s.numericalAsc=3]="numericalAsc",s[s.numericalDesc=4]="numericalDesc",s[s.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",s[s.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",s))(n||{}),u=(s=>(s[s.dontHide=0]="dontHide",s[s.hideLabel=1]="hideLabel",s[s.hideVariable=2]="hideVariable",s))(u||{})},55422:(G,O,e)=>{"use strict";e.d(O,{Q:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},24177:(G,O,e)=>{"use strict";e.d(O,{H:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},69311:(G,O,e)=>{"use strict";e.d(O,{JK:()=>i,Rr:()=>m,T_:()=>s,Ys:()=>u});var t=e(40538),n=e(46519);const u=t.iT,s="YYYY-MM-DD HH:mm:ss";function i(){const f=(0,n.CQ)();return{from:(0,n.CQ)(f).subtract(6,"hour"),to:f,raw:{from:"now-6h",to:"now"}}}function m(){return{from:600,to:0}}},68368:()=>{"use strict"},16217:(G,O,e)=>{"use strict";e.d(O,{U:()=>t});var t=(n=>(n.True="true",n.False="false",n.Null="null",n.Empty="empty",n))(t||{})},26031:(G,O,e)=>{"use strict";e.d(O,{H:()=>t,e:()=>n});var t=(u=>(u.ValueToText="value",u.RangeToText="range",u.RegexToText="regex",u.SpecialValue="special",u))(t||{}),n=(u=>(u.True="true",u.False="false",u.Null="null",u.NaN="nan",u.NullAndNaN="null+nan",u.Empty="empty",u))(n||{})},59670:(G,O,e)=>{"use strict";e.d(O,{Mg:()=>s,Tq:()=>n,gv:()=>i,j2:()=>t,v6:()=>u});var t=(m=>(m.Legacy="legacy",m.Standard="standard",m.Custom="custom",m.Datasource="datasource",m))(t||{});class n{}class u extends n{getType(){return"standard"}}class s extends n{getType(){return"custom"}}class i extends n{getType(){return"datasource"}}},72901:()=>{"use strict"},91171:(G,O,e)=>{"use strict";e.d(O,{vo:()=>i,rt:()=>o,j:()=>f});var t=e(35363),n=e(78798),u=e(64140);class s{constructor(){this.properties=[]}addCustomEditor(r){return this.properties.push(r),this}getRegistry(){return new u.B(()=>this.properties)}getItems(){return this.properties}}class i extends s{addNumberInput(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("number").editor,editor:t.S.get("number").editor,process:n.Oh,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addSliderInput(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("slider").editor,editor:t.S.get("slider").editor,process:n.Oh,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addTextInput(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("text").editor,editor:t.S.get("text").editor,process:n.op,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addSelect(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("select").editor,editor:t.S.get("select").editor,process:n.AE,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{options:[]}})}addRadio(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("radio").editor,editor:t.S.get("radio").editor,process:n.AE,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{options:[]}})}addBooleanSwitch(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("boolean").editor,override:t.S.get("boolean").editor,process:n.W4,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addColorPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("color").editor,override:t.S.get("color").editor,process:n.kG,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addUnitPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("unit").editor,override:t.S.get("unit").editor,process:n.VB,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addFieldNamePicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("field-name").editor,override:t.S.get("field-name").editor,process:n.kG,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}}class m{constructor(r){this.cfg=r,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=d=>{const c=this.cfg.values;return c?c(d):{getValue:g=>d.getValue(`${this.path}.${g}`),onChange:(g,p)=>d.onChange(`${this.path}.${g}`,p)}},this.path=r.path,this.category=r.category,this.defaultValue=r.defaultValue}}function f(l){return l.id==="nested-panel-options"}class o extends s{addNestedOptions(r){const d=new m(r);return this.addCustomEditor(d)}addNumberInput(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("number").editor})}addSliderInput(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("slider").editor})}addTextInput(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("text").editor})}addStringArray(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("strings").editor})}addSelect(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("select").editor})}addMultiSelect(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("multi-select").editor})}addRadio(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("radio").editor})}addBooleanSwitch(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("boolean").editor})}addColorPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("color").editor,settings:r.settings||{}})}addTimeZonePicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("timezone").editor,settings:r.settings||{}})}addUnitPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("unit").editor})}addFieldNamePicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("field-name").editor})}addDashboardPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("dashboard-uid").editor})}}},63279:(G,O,e)=>{"use strict";e.d(O,{I:()=>u});var t=e(82897),n=e.n(t);function u(s){return typeof s=="number"?s:s===""||s===null||s===void 0||Array.isArray(s)?NaN:typeof s=="boolean"?s?1:0:(0,t.toNumber)(s)}},76553:(G,O,e)=>{"use strict";e.r(O),e.d(O,{moveItemImmutably:()=>n,sortValues:()=>i});var t=e(40538);function n(m,f,o){const l=[...m];return Array.prototype.splice.call(l,o,0,Array.prototype.splice.call(l,f,1)[0]),l}const u=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),s=(m,f)=>m-f;function i(m){return(f,o)=>{if(f===o)return 0;if(o==null||typeof o=="string"&&o.trim()==="")return-1;if(f==null||typeof f=="string"&&f?.trim()==="")return 1;let l=u.compare;return typeof f=="number"&&typeof o=="number"&&(l=s),m===t.As.Descending?l(o,f):l(f,o)}}},98082:(G,O,e)=>{"use strict";e.d(O,{L:()=>n,n:()=>u});var t=e(64140),n=(s=>(s.Add="+",s.Subtract="-",s.Divide="/",s.Multiply="*",s))(n||{});const u=new t.B(()=>[{id:"+",name:"Add",operation:(s,i)=>s+i},{id:"-",name:"Subtract",operation:(s,i)=>s-i},{id:"*",name:"Multiply",operation:(s,i)=>s*i},{id:"/",name:"Divide",operation:(s,i)=>s/i}])},89230:(G,O,e)=>{"use strict";e.d(O,{MJ:()=>v,QM:()=>g,uP:()=>d,x5:()=>r});var t=e(82897),n=e.n(t),u=e(26389),s=e.n(u),i=e(38685),m=e(16911),f=e(89890),o=e(14582),l=e(20112),r=(C=>(C[C.full=0]="full",C[C.name=1]="name",C[C.none=2]="none",C))(r||{});function d(C,E){return new g(E).readCSV(C)}var c=(C=>(C[C.Starting=0]="Starting",C[C.InHeader=1]="InHeader",C[C.ReadingRows=2]="ReadingRows",C))(c||{});class g{constructor(E){this.chunk=(P,x)=>{for(let M=0;M<P.data.length;M++){const S=P.data[M];if(S.length<1)continue;const D=S[0];if(D){if(D.startsWith("#")){const T=D.indexOf("#",2);if(T>0){const R=D.slice(1,T),L=R==="name";if(L||{unit:"#"}.hasOwnProperty(R)){this.state===2&&(this.current=new i.v({fields:[]}),this.data.push(this.current));const A=D.slice(T+1);if(L){this.current.addFieldFor(void 0,A);for(let N=1;N<S.length;N++)this.current.addFieldFor(void 0,S[N])}else{const{fields:N}=this.current;for(let W=0;W<N.length;W++){N[W].config||(N[W].config={});const I=N[W].config;I[R]=W===0?A:S[W]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,m.LI)(D)===o.fS.string){for(const R of S)this.current.addFieldFor(void 0,R);this.state=1;continue}this.state=1}}if(this.state,this.state=2,S.length>this.current.fields.length){const{fields:T}=this.current;for(let R=T.length;R<S.length;R++)this.current.addFieldFor(S[R]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(S),this.callback&&this.callback.onRow(S)}},E||(E={}),this.config=E.config||{},this.callback=E.callback,this.current=new i.v({fields:[]}),this.state=0,this.data=[]}readCSV(E){this.current=new i.v({fields:[]}),this.data=[this.current];const P={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return s().parse(E,P),this.data}}function p(C,E){const P=C.toString();return P.includes('"')?E.quoteChar+P.replace(/"/gi,'""')+E.quoteChar:P.includes(`
`)||P.includes(E.delimiter)?E.quoteChar+P+E.quoteChar:P}function y(C,E){return C.display?P=>{const x=C.display(P);return p((0,l.zc)(x),E)}:P=>p(P,E)}function h(C,E,P){const x=C==="name",M=C==="type";for(const S of E){const D=S.config;if(x||M||D&&D.hasOwnProperty(C)){let T="#"+C+"#";for(let R=0;R<E.length;R++){R>0&&(T=T+P.delimiter);let L=E[R].name;M?L=E[R].type:x||(L=E[R].config[C]),L&&(T=T+p(L,P))}return T+P.newline}}return""}function a(){const C=["x","y"];return C.toLocaleString?C.toLocaleString().charAt(1):","}function v(C,E){if(!C)return"";E=(0,t.defaults)(E,{delimiter:a(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let P=E.useExcelHeader?`sep=${E.delimiter}${E.newline}`:"";for(const x of C){const{fields:M}=x;if(M.length===0)continue;if(E.headerStyle===0)P=P+h("name",M,E)+h("type",M,E)+h("unit",M,E)+h("dateFormat",M,E);else if(E.headerStyle===1){for(let D=0;D<M.length;D++)D>0&&(P+=E.delimiter),P+=`"${(0,f.C)(M[D],x).replace(/"/g,'""')}"`;P+=E.newline}const S=M[0].values.length;if(S>0){const D=M.map(T=>y(T,E));for(let T=0;T<S;T++){for(let R=0;R<M.length;R++){R>0&&(P=P+E.delimiter);const L=M[R].values.get(T);L!==null&&(P=P+D[R](L))}P=P+E.newline}}P=P+E.newline}return P}},89029:(G,O,e)=>{"use strict";e.d(O,{W:()=>u,_:()=>s});var t=e(83383),n=e(27677);const u={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function s(o){const{onClickFn:l,replaceVariables:r,link:d,scopedVars:c,range:g,field:p,internalLink:y}=o,h=m(d.internal?.query,c,r),a=m(d.internal?.panelsState,c,r),v=d.title?d.title:y.datasourceName;return{title:r(v,c),href:i(y.datasourceUid,h,g,a),onClick:l?()=>{l({datasourceUid:y.datasourceUid,query:h,panelsState:a,range:g})}:void 0,target:d?.targetBlank?"_blank":"_self",origin:p}}function i(o,l,r,d){return t.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.S)({range:r.raw,datasource:o,queries:[l],panelsState:d}))}`)}function m(o,l,r){if(!o)return o;if(typeof o=="string")return r(o,l);const d=JSON.parse(JSON.stringify(o));return f(d,l,r)}function f(o,l,r){for(const d of Object.keys(o))typeof o[d]=="string"?o[d]=r(o[d],l):typeof o[d]=="object"&&o[d]!==null&&(o[d]=f(o[d],l,r));return o}},5916:(G,O,e)=>{"use strict";e.d(O,{BT:()=>i,HD:()=>c,Mf:()=>h,TX:()=>d,_R:()=>f,cv:()=>s,fd:()=>g,fi:()=>o,hz:()=>r,iU:()=>u,nx:()=>l,tp:()=>p,uw:()=>y,z_:()=>m});var t=e(82897),n=e.n(t);function u(a){return{uid:a.uid,type:a.type}}function s(a){return typeof a=="object"&&typeof a?.uid=="string"}function i(a){if(s(a))return a.uid;if((0,t.isString)(a))return a}const m=(a,v)=>C=>{g(a,v,C.currentTarget.value)},f=(a,v)=>C=>{p(a,v,C.currentTarget.value)},o=(a,v)=>C=>{y(a,v,C.currentTarget.value)},l=(a,v)=>C=>{p(a,v,C.value)},r=(a,v)=>C=>{p(a,v,C.currentTarget.checked)},d=(a,v)=>C=>{y(a,v,C.value)},c=(a,v)=>C=>{h(a,v)};function g(a,v,C){const E=a.options;a.onOptionsChange({...E,[v]:C})}const p=(a,v,C)=>{const E=a.options;a.onOptionsChange({...E,jsonData:{...E.jsonData,[v]:C}})},y=(a,v,C)=>{const E=a.options;a.onOptionsChange({...E,secureJsonData:{...E.secureJsonData?E.secureJsonData:{},[v]:C}})},h=(a,v)=>{const C=a.options;a.onOptionsChange({...C,secureJsonData:{...C.secureJsonData?C.secureJsonData:{},[v]:""},secureJsonFields:{...C.secureJsonFields,[v]:!1}})}},99227:(G,O,e)=>{"use strict";e.d(O,{d:()=>n});const t={},n=(u,s,i)=>{let m=`[Deprecation warning] ${u}: ${s} is deprecated`;i&&(m+=`. Use ${i} instead`);const f=Date.now(),o=t[m];(!o||f-o>1e4)&&(console.warn(m),t[m]=f)}},80548:(G,O,e)=>{"use strict";e.d(O,{x:()=>t});var t=(n=>(n[n.Transformations=0]="Transformations",n[n.FieldConfig=1]="FieldConfig",n[n.FieldConfigOverrides=2]="FieldConfigOverrides",n))(t||{})},72788:(G,O,e)=>{"use strict";e.d(O,{H:()=>u,k:()=>n});var t=e(49922);function n({xField:s,yField:i,nullValueMode:m}){const f=s.values,o=i.values,l=f.length;if(o.length!==l)throw new Error("Unexpected field length");const r=m===t.Gl.Ignore,d=m===t.Gl.AsZero,c=[];for(let g=0;g<l;g++){const p=f.get(g);let y=o.get(g);if(y===null){if(r)continue;d&&(y=0)}p!==null&&c.push([p,y])}return c}function u(s,i){if(!i.from||!i.to||!s||s.length===0)return[];const m=i.from.valueOf(),f=i.to.valueOf(),o=s[0][1];return[[m,o],[f,o]]}},81102:(G,O,e)=>{"use strict";e.d(O,{LH:()=>g.L,x5:()=>i.x5,QM:()=>i.QM,WC:()=>E.W,xV:()=>P.x,vo:()=>h.vo,HU:()=>D.HU,bA:()=>m.bA,zG:()=>p.z,rt:()=>h.rt,Bz:()=>n.B,Ar:()=>m.Ar,IX:()=>M.I,sq:()=>t,nk:()=>g.n,zd:()=>m.zd,lL:()=>m.lL,i6:()=>m.i6,Mi:()=>m.Mi,ZC:()=>r,Jb:()=>D.Jb,d9:()=>s.d,l3:()=>m.l3,FT:()=>f.FT,IU:()=>f.IU,aA:()=>f.aA,iU:()=>u.iU,BT:()=>u.BT,k8:()=>a.k,HE:()=>a.H,ZO:()=>m.ZO,jx:()=>m.jx,MT:()=>m.MT,e4:()=>d,dP:()=>o.d,fp:()=>c,cv:()=>u.cv,uT:()=>v.u,s2:()=>x.s,_N:()=>E._,VS:()=>f.VS,Hh:()=>l,_R:()=>u._R,hz:()=>u.hz,nx:()=>u.nx,z_:()=>u.z_,HD:()=>u.HD,fi:()=>u.fi,TX:()=>u.TX,J8:()=>f.J8,uP:()=>i.uP,O9:()=>o.O,S:()=>C.S,DA:()=>m.DA,$8:()=>m.$8,$u:()=>m.$u,j0:()=>m.j0,MJ:()=>i.MJ,Er:()=>y.E,tp:()=>u.tp,fd:()=>u.fd,Mf:()=>u.Mf,uw:()=>u.uw,Cj:()=>C.Cj,xc:()=>S.x});var t=e(76553),n=e(64140),u=e(5916),s=e(99227),i=e(89230),m=e(35864),f=e(15355),o=e(43211);const l=T=>Object.keys(T).reduce((R,L)=>(T[L]!==void 0&&(R[L]=T[L]),R),{}),r=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],d=T=>{let R,L,w=Number.MAX_VALUE;for(let A=0;A<T.values.length;A++){const N=T.values.get(A);if(R!==void 0){const W=N-R;L===void 0&&(w=W),W<w&&(w=W)}R=N}return w},c=T=>{for(let R=0;R<T.values.length;R++){const L=T.values.get(R);if(L!=null){const w=L.toString();if(w.length===13&&w%1e3!==0)return!0}}return!1};var g=e(98082),p=e(5367),y=e(63134),h=e(91171),a=e(72788),v=e(83383),C=e(27677),E=e(89029),P=e(80548),x=e(77345),M=e(63279),S=e(83849),D=e(67008)},15355:(G,O,e)=>{"use strict";e.d(O,{FT:()=>u,IU:()=>s,J8:()=>n,VS:()=>i,aA:()=>m});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(f){const o={};return f.replace(t,(l,r,d,c)=>(o[r]=c,"")),o}function u(f){return f.reduce((o,l)=>{if(!l)throw new Error("Need parsed labels to find common labels.");return o?(Object.keys(l).forEach(r=>{(o[r]===void 0||o[r]!==l[r])&&delete o[r]}),Object.keys(o).forEach(r=>{l[r]===void 0&&delete o[r]})):o={...l},o},void 0)}function s(f,o){const l={...f};return Object.keys(o).forEach(r=>{delete l[r]}),l}function i(f,o){if(!f)return!0;for(const[l,r]of Object.entries(f))if(!o||o[l]!==r)return!1;return!0}function m(f,o="",l){if(!f||Object.keys(f).length===0)return o;const d=Object.keys(f).sort().map(c=>`${c}="${f[c]}"`).join(", ");return l?d:["{",d,"}"].join("")}},83383:(G,O,e)=>{"use strict";e.d(O,{u:()=>d});var t=e(8928),n=e(27677);let u={appSubUrl:""},s,i;const m=c=>{try{return new URL(c)}catch{return}},f=c=>{const g=m(c);if(g&&g.origin!==window.location.origin)return c;const p=u.appSubUrl??"",y=p.endsWith("/")?1:0,h=c.startsWith("http");let a=p;return(!c.startsWith("/")||h)&&(a=`${window.location.origin}${p}`),c.length>0&&c.indexOf(a)===0?c.slice(a.length-y):c},d={initialize:c=>{u=c.config,s=c.getTimeRangeForUrl,i=c.getVariablesUrlParams},stripBaseFromUrl:f,assureBaseUrl:c=>c.startsWith("/")?`${u.appSubUrl}${f(c)}`:c,updateSearchParams:(c,g)=>{const p=new URLSearchParams(g);try{const y=new URL(c);return p.forEach((h,a)=>y.searchParams.set(a,h)),y.href}catch{const y=new URLSearchParams(c);return p.forEach((h,a)=>{y.set(a,h)}),"?"+y.toString()}},getTimeRangeUrlParams:()=>s?n.Cj.toUrlParams(s()):null,getVariablesUrlParams:c=>{if(!i)return null;const g=i(c);return n.Cj.toUrlParams(g)},getUrlForPartial:(c,g)=>{const p=n.Cj.parseKeyValue(c.search.startsWith("?")?c.search.substring(1):c.search);for(const y of Object.keys(g))g[y]===null||g[y]===void 0?delete p[y]:p[y]=g[y];return n.Cj.renderUrl(c.pathname,p)},processUrl:c=>u.disableSanitizeHtml?c:t.QX.sanitizeUrl(c)}},35864:(G,O,e)=>{"use strict";e.d(O,{$8:()=>a,$u:()=>C,Ar:()=>l,DA:()=>h,MT:()=>y,Mi:()=>E,ZO:()=>f,bA:()=>r,i6:()=>g,j0:()=>v,jx:()=>o,l3:()=>P,lL:()=>c,zd:()=>d});var t=e(82897),n=e.n(t),u=e(14582),s=e(90595),i=e(19695);const m=/(?:^|\s)([\w\(\)\[\]\{\}]+)=(""|(?:".*?[^\\]"|[^"\s]\S*))/;function f(x){if(!x)return s.in.unknown;let M=s.in.unknown,S;for(const D of Object.keys(s.in)){const R=new RegExp(`\\b${D}\\b`,"i").exec(x);R&&(S===void 0||R.index<S)&&(M=s.in[D],S=R.index)}return M}function o(x){const M=s.in[x.toString().toLowerCase()];return M||s.in.unknown}function l(x,M){const S=new i.G,D=x.fields[M];for(let T=0;T<D.values.length;T++){const R=D.values.get(M);S.buffer.push(f(R))}return{...x,fields:[...x.fields,{name:"LogLevel",type:u.fS.string,values:S,config:{}}]}}const r={JSON:{buildMatcher:x=>new RegExp(`(?:{|,)\\s*"${x}"\\s*:\\s*"?([\\d\\.]+|[^"]*)"?`),getFields:x=>{try{const M=JSON.parse(x);return Object.keys(M).map(S=>`"${S}":${JSON.stringify(M[S])}`)}catch{}return[]},getLabelFromField:x=>(x.match(/^"([^"]+)"\s*:/)||[])[1],getValueFromField:x=>(x.match(/:\s*(.*)$/)||[])[1],test:x=>{let M;try{M=JSON.parse(x)}catch{}return typeof M=="object"}},logfmt:{buildMatcher:x=>new RegExp(`(?:^|\\s)${(0,t.escapeRegExp)(x)}=("[^"]*"|\\S+)`),getFields:x=>{const M=[];return x.replace(new RegExp(m,"g"),S=>(M.push(S.trim()),"")),M},getLabelFromField:x=>(x.match(m)||[])[1],getValueFromField:x=>(x.match(m)||[])[2],test:x=>m.test(x)}};function d(x,M){const S=x.filter(R=>M.test(R.entry)),D=S.length,T=(0,t.countBy)(S,R=>{const w=R.entry.match(M);return w?w[1]:null});return p(T,D)}function c(x,M){const S=x.filter(R=>R.labels[M]!==void 0),D=S.length,T=(0,t.countBy)(S,R=>R.labels[M]);return p(T,D)}function g(x){const M=x.filter(D=>D!=null),S=(0,t.countBy)(M);return p(S,M.length)}const p=(x,M)=>(0,t.chain)(x).map((S,D)=>({count:S,value:D,proportion:S/M})).sortBy("count").reverse().value();function y(x){let M;try{r.JSON.test(x)&&(M=r.JSON)}catch{}return!M&&r.logfmt.test(x)&&(M=r.logfmt),M}const h=(x,M)=>x.timeEpochMs<M.timeEpochMs?-1:x.timeEpochMs>M.timeEpochMs?1:x.timeEpochNs<M.timeEpochNs?-1:x.timeEpochNs>M.timeEpochNs?1:0,a=(x,M)=>x.timeEpochMs>M.timeEpochMs?-1:x.timeEpochMs<M.timeEpochMs?1:x.timeEpochNs>M.timeEpochNs?-1:x.timeEpochNs<M.timeEpochNs?1:0,v=(x,M)=>{const S=x?C(x.rows,M):[];return x?{...x,rows:S}:{hasUniqueLabels:!1,rows:S}},C=(x,M)=>M===s.UV.Ascending?x.sort(h):x.sort(a),E=x=>x.labels.__error__?{hasError:!0,errorMessage:x.labels.__error__}:{hasError:!1},P=x=>x.replace(/\\r\\n|\\n|\\t|\\r/g,M=>M.slice(1)==="t"?"	":`
`)},77345:(G,O,e)=>{"use strict";e.d(O,{s:()=>t});function t(n){return new Proxy(n,{apply(u,s,i){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(u,i,s.constructor)}})}},5367:(G,O,e)=>{"use strict";e.d(O,{z:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.source="source",n.target="target",n.detail="detail__",n.arc="arc__",n.color="color",n))(t||{})},43211:(G,O,e)=>{"use strict";e.d(O,{O:()=>t,d:()=>n});function t(u,s=0){if(Number.isInteger(u))return u;let i=10**s,m=u*i*(1+Number.EPSILON);return Math.round(m)/i}function n(u){return((""+u).split(".")[1]||"").length}},63134:(G,O,e)=>{"use strict";e.d(O,{E:()=>t});const t=n=>({label:n,value:n})},27677:(G,O,e)=>{"use strict";e.d(O,{Cj:()=>o,S:()=>l});/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function t(r,d){return d&&Object.keys(d).length>0&&(r+="?"+u(d)),r}function n(r,d){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,d?"%20":"+").replace(/[!'()*]/g,function(c){return"%"+c.charCodeAt(0).toString(16).toUpperCase()})}function u(r){const d=[],c=/\[\]$/,g=h=>Object.prototype.toString.call(h)==="[object Array]",p=(h,a)=>{if(a=typeof a=="function"?a():a===null||a===void 0?"":a,typeof a!="boolean")d[d.length]=n(h,!0)+"="+n(a,!0);else{const v=a?"":"="+n("false",!0);d[d.length]=n(h,!0)+v}},y=(h,a)=>{let v,C,E;if(h)if(g(a))for(v=0,C=a.length;v<C;v++)c.test(h)?p(h,a[v]):y(h,a[v]);else if(a&&String(a)==="[object Object]")for(E in a)y(h+"["+E+"]",a[E]);else p(h,a);else if(g(a))for(v=0,C=a.length;v<C;v++)p(a[v].name,a[v].value);else for(E in a)y(E,a[E]);return d};return y("",r).join("&")}function s(r,d){if(d!=null&&d!==""){const c=r.indexOf("?");c!==-1?r.length-c>1&&(r+="&"):r+="?",r+=d}return r}function i(){const d=window.location.search.substring(1).split("&"),c={};for(const g of d){const p=g.split("=");if(p.length>1){const y=decodeURIComponent(p[0]),h=decodeURIComponent(p[1]);y in c?c[y]=[...c[y],h]:c[y]=[h]}else if(p.length===1){const y=decodeURIComponent(p[0]);c[y]=!0}}return c}function m(r){const d={},c=(r||"").split("&");for(let g of c){let p,y,h;if(g&&(y=g=g.replace(/\+/g,"%20"),p=g.indexOf("="),p!==-1&&(y=g.substring(0,p),h=g.substring(p+1)),y=f(y),y!==void 0)){h=h!==void 0?f(h):!0;let a;typeof h=="string"&&h!==""?a=h==="true"||h==="false"?h==="true":h:a=h,d.hasOwnProperty(y)?Array.isArray(d[y])?d[y].push(h):d[y]=[d[y],isNaN(a)?h:a]:d[y]=isNaN(a)?h:a}}return d}function f(r){try{return decodeURIComponent(r)}catch{return}}const o={renderUrl:t,toUrlParams:u,appendQueryToUrl:s,getUrlSearchParams:i,parseKeyValue:m};function l(r,d){return d!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(r)}},67008:(G,O,e)=>{"use strict";e.d(O,{HU:()=>m,Jb:()=>f,vh:()=>s});var t=e(58230),n=e(29076),u=e(26031);function s(l,r){for(const d of l)switch(d.type){case u.H.ValueToText:if(r==null)continue;const c=d.options[r];if(c)return c;break;case u.H.RangeToText:if(r==null)continue;const g=parseFloat(r);if(isNaN(g)||!isNaN(d.options.from)&&g<d.options.from||!isNaN(d.options.to)&&g>d.options.to)continue;return d.options.result;case u.H.RegexToText:if(r==null||typeof r!="string")continue;const h=(0,n.jO)(d.options.pattern);if(r.match(h)){const a={...d.options.result};return a.text!=null&&(a.text=r.replace(h,d.options.result.text||"")),a}case u.H.SpecialValue:switch(d.options.match){case u.e.Null:{if(r==null)return d.options.result;break}case u.e[NaN]:{if(isNaN(r))return d.options.result;break}case u.e.NullAndNaN:{if(isNaN(r)||r==null)return d.options.result;break}case u.e.True:{if(r===!0||r==="true")return d.options.result;break}case u.e.False:{if(r===!1||r==="false")return d.options.result;break}case u.e.Empty:{if(r==="")return d.options.result;break}}}return null}function i(l){return(typeof l=="number"||typeof l=="string"&&l.trim()!=="")&&!isNaN(l)}var m=(l=>(l[l.ValueToText=1]="ValueToText",l[l.RangeToText=2]="RangeToText",l))(m||{});function f(l,r){const d=[];let c=l.mappingType;if(l.mappingType||(l.valueMaps&&l.valueMaps.length?c=1:l.rangeMaps&&l.rangeMaps.length&&(c=2)),c===1)for(let g=0;g<l.valueMaps.length;g++){const p=l.valueMaps[g];d.push(o({...p,id:g,type:u.H.ValueToText},l.fieldConfig?.defaults?.thresholds||r))}else if(c===2)for(let g=0;g<l.rangeMaps.length;g++){const p=l.rangeMaps[g];d.push(o({...p,id:g,type:u.H.RangeToText},l.fieldConfig?.defaults?.thresholds||r))}return d}function o(l,r){const d={type:u.H.ValueToText,options:{}},c=[];let g;const p=parseFloat(l.text);if(r&&!isNaN(p)){const y=(0,t.m1)(p,r.steps);y&&y.color&&(g=y.color)}switch(l.type){case 1:case u.H.ValueToText:l.value!=null&&(l.value==="null"?c.push({type:u.H.SpecialValue,options:{match:u.e.Null,result:{text:l.text,color:g}}}):d.options[String(l.value)]={text:l.text,color:g});break;case 2:case u.H.RangeToText:l.from==="null"||l.to==="null"?c.push({type:u.H.SpecialValue,options:{match:u.e.Null,result:{text:l.text,color:g}}}):c.push({type:u.H.RangeToText,options:{from:+l.from,to:+l.to,result:{text:l.text,color:g}}});break}return Object.keys(d.options).length>0&&c.unshift(d),c[0]}},83849:(G,O,e)=>{"use strict";e.d(O,{x:()=>i});var t=e(16313),n=e(4561),u=e(7356),s=e(67305);function i({whileLoading:m,source:f}){return(0,t.T)((0,n.H)(200).pipe((0,u.h)(m),(0,s.R)(f)),f)}},41024:(G,O,e)=>{"use strict";e.d(O,{Cf:()=>t.Cf,FH:()=>t.FH,IR:()=>t.IR,QW:()=>t.QW,Qj:()=>t.Qj,SP:()=>t.SP,SR:()=>t.SR,Td:()=>t.Td,bn:()=>t.bn,br:()=>t.br,q2:()=>t.q2,vb:()=>t.vb,zc:()=>t.zc});var t=e(20112)},8428:(G,O,e)=>{"use strict";e.d(O,{Aq:()=>n,Yh:()=>f,dT:()=>i,i7:()=>o});var t=e(20112);function n(l,r){const d=["","K","M","B","T"],c=(0,t.Qj)(1e3,d);return(g,p,y)=>{if(g===null)return{text:""};const h=c(g,p,y);return r?h.suffix=h.suffix!==void 0?`${h.suffix}${l}`:void 0:h.prefix=l,h}}const u=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],s=u.indexOf("");function i(l){const r=u.findIndex(d=>d.normalize("NFKD")===l.normalize("NFKD"));return r<0?0:r-s}const m=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function f(l,r=0){const d=m.map(c=>" "+c+l);return(0,t.Qj)(1024,d,r)}function o(l,r=0){const d=u.map(c=>" "+c+l);return(0,t.Qj)(1e3,d,s+r)}},20112:(G,O,e)=>{"use strict";e.d(O,{IR:()=>re,zc:()=>ee,Cf:()=>Le,QW:()=>Ye,Td:()=>Qe,br:()=>ie,SP:()=>te,Qj:()=>J,SR:()=>ne,vb:()=>j,FH:()=>De,bn:()=>me,q2:()=>ce});var t=e(82897);function n(de,Be){return de===null?{text:""}:{text:De(de,Be),suffix:"%"}}function u(de,Be){return de===null?{text:""}:{text:De(100*de,Be),suffix:"%"}}function s(de,Be){if(de==null)return{text:""};const Ve=i(de,Be);return Ve.text.substring(0,1)==="-"?Ve.text="-0x"+Ve.text.substring(1):Ve.text="0x"+Ve.text,Ve}function i(de,Be){return de==null?{text:""}:{text:parseFloat(De(de,Be)).toString(16).toUpperCase()}}function m(de,Be){return de==null?{text:""}:{text:de.toExponential(Be)}}var f=e(38849),o=e(47513),l=e(46519),r=(de=>(de.Year="year",de.Month="month",de.Week="week",de.Day="day",de.Hour="hour",de.Minute="minute",de.Second="second",de.Millisecond="millisecond",de))(r||{});const d=["year","month","week","day","hour","minute","second","millisecond"],c={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function g(de,Be){return de===null?{text:""}:Math.abs(de)<1e3?{text:De(de,Be),suffix:" ns"}:Math.abs(de)<1e6?me(de/1e3,Be," \xB5s"):Math.abs(de)<1e9?me(de/1e6,Be," ms"):Math.abs(de)<6e10?me(de/1e9,Be," s"):Math.abs(de)<36e11?me(de/6e10,Be," min"):Math.abs(de)<864e11?me(de/36e11,Be," hour"):me(de/864e11,Be," day")}function p(de,Be){return de===null?{text:""}:Math.abs(de)<1e3?{text:De(de,Be),suffix:" \xB5s"}:Math.abs(de)<1e6?me(de/1e3,Be," ms"):me(de/1e6,Be," s")}function y(de,Be,Ve){return de===null?{text:""}:Math.abs(de)<1e3?{text:De(de,Be),suffix:" ms"}:Math.abs(de)<6e4?me(de/1e3,Be," s"):Math.abs(de)<36e5?me(de/6e4,Be," min"):Math.abs(de)<864e5?me(de/36e5,Be," hour"):Math.abs(de)<31536e6?me(de/864e5,Be," day"):me(de/31536e6,Be," year")}function h(de,Be){if(de!=null&&Be!==null&&Be!==void 0)return de-Be}function a(de,Be){return de===null?{text:""}:de===0?{text:"0",suffix:" s"}:Math.abs(de)<1e-6?me(de*1e9,Be," ns"):Math.abs(de)<.001?me(de*1e6,Be," \xB5s"):Math.abs(de)<1?me(de*1e3,Be," ms"):Math.abs(de)<60?{text:De(de,Be),suffix:" s"}:Math.abs(de)<3600?me(de/60,Be," min"):Math.abs(de)<86400?me(de/3600,Be," hour"):Math.abs(de)<604800?me(de/86400,Be," day"):Math.abs(de)<31536e3?me(de/604800,Be," week"):me(de/31556900,Be," year")}function v(de,Be){return de===null?{text:""}:Math.abs(de)<60?{text:De(de,Be),suffix:" min"}:Math.abs(de)<1440?me(de/60,Be," hour"):Math.abs(de)<10080?me(de/1440,Be," day"):Math.abs(de)<604800?me(de/10080,Be," week"):me(de/525948,Be," year")}function C(de,Be){return de===null?{text:""}:Math.abs(de)<24?{text:De(de,Be),suffix:" hour"}:Math.abs(de)<168?me(de/24,Be," day"):Math.abs(de)<8760?me(de/168,Be," week"):me(de/8760,Be," year")}function E(de,Be){return de===null?{text:""}:Math.abs(de)<7?{text:De(de,Be),suffix:" day"}:Math.abs(de)<365?me(de/7,Be," week"):me(de/365,Be," year")}function P(de,Be,Ve){if(de===null)return{text:""};if(de===0)return{text:"0",suffix:" "+Ve+"s"};if(de<0){const qe=P(-de,Be,Ve);return qe.suffix||(qe.suffix=""),qe.suffix+=" ago",qe}de*=c[Ve]*1e3;const $e=[];let We=!1,Ke=0;Be!=null&&(Ke=Be);for(let qe=0;qe<d.length&&Ke>=0;qe++){const Xe=c[d[qe]]*1e3,at=de/Xe;if(at>=1||We){We=!0;const Ze=Math.floor(at),lt=d[qe]+(Ze!==1?"s":"");$e.push(Ze+" "+lt),de=de%Xe,Ke--}}return{text:$e.join(", ")}}function x(de,Be){if(de===null)return{text:""};if(de<1e3)return{text:(0,l.zh)(de).format("SSS\\m\\s")};if(de<6e4){let Ke="ss\\s:SSS\\m\\s";return Be===0&&(Ke="ss\\s"),{text:(0,l.zh)(de).format(Ke)}}if(de<36e5){let Ke="mm\\m:ss\\s:SSS\\m\\s";return Be===0?Ke="mm\\m":Be===1&&(Ke="mm\\m:ss\\s"),{text:(0,l.zh)(de).format(Ke)}}let Ve="mm\\m:ss\\s:SSS\\m\\s";const $e=`${("0"+Math.floor((0,l.Ks)(de,"milliseconds").asHours())).slice(-2)}h`;return Be===0?Ve="":Be===1?Ve="mm\\m":Be===2&&(Ve="mm\\m:ss\\s"),{text:Ve?`${$e}:${(0,l.zh)(de).format(Ve)}`:$e}}function M(de,Be){return P(de,Be,"millisecond")}function S(de,Be){return P(de,Be,"second")}function D(de){if(de<0){const Ke=D(-de);return Ke.suffix||(Ke.suffix=""),Ke.suffix+=" ago",Ke}const Be=[],Ve=Math.floor(de/3600),$e=Math.floor(de%3600/60),We=Math.floor(de%3600%60);return Ve>9?Be.push(""+Ve):Be.push("0"+Ve),$e>9?Be.push(""+$e):Be.push("0"+$e),We>9?Be.push(""+We):Be.push("0"+We),{text:Be.join(":")}}function T(de){if(de<0){const We=T(-de);return We.suffix||(We.suffix=""),We.suffix+=" ago",We}let Be="";const Ve=Math.floor(de/(24*3600));Ve>0&&(Be=Ve+" d ");const $e=D(de-Ve*24*3600);return{text:Be+$e.text}}function R(de,Be){return a(de/100,Be)}function L(de,Be){return x(de,Be)}function w(de,Be){return x(de*1e3,Be)}function A(de,Be){return(Ve,$e,We,Ke)=>Be&&(0,l.CQ)().isSame(Ve,"day")?{text:(0,f.dq)(Ve,{format:Be,timeZone:Ke})}:{text:(0,f.dq)(Ve,{format:de,timeZone:Ke})}}const N=A("YYYY-MM-DD HH:mm:ss"),W=A("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),I=A("MM/DD/YYYY h:mm:ss a"),F=A("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function V(){return A((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function b(){return A((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,o.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function X(de,Be,Ve,$e,We){return{text:(0,f.dq)(de,{format:We?o.U6.fullDateMS:o.U6.fullDate,timeZone:$e})}}function k(de,Be,Ve,$e){return{text:(0,f.E8)(de,{timeZone:$e})}}var H=e(8428);const Y=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:ce("")},{name:"String",id:"string",fn:j},{name:"short",id:"short",fn:J(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:u},{name:"Humidity (%H)",id:"humidity",fn:ce("%H")},{name:"Decibel",id:"dB",fn:ce("dB")},{name:"Hexadecimal (0x)",id:"hex0x",fn:s},{name:"Hexadecimal",id:"hex",fn:i},{name:"Scientific notation",id:"sci",fn:m},{name:"Locale format",id:"locale",fn:te},{name:"Pixels",id:"pixel",fn:ce("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:ce("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:ce("f/sec\xB2")},{name:"G unit",id:"accG",fn:ce("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:ce("\xB0")},{name:"Radians",id:"radian",fn:ce("rad")},{name:"Gradian",id:"grad",fn:ce("grad")},{name:"Arc Minutes",id:"arcmin",fn:ce("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:ce("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:ce("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:ce("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:ce("mi\xB2")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,H.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,H.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,H.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,H.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,H.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,H.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,H.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,H.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:ce("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:ce("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:ce("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:ce("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:ce("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:ce("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:ce("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:ce("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:ce("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:ce("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:ce("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:ce("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,H.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,H.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,H.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,H.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,H.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,H.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,H.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,H.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,H.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,H.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,H.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,H.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,H.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,H.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,H.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,H.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,H.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,H.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,H.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,H.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,H.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,H.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,H.Aq)("\u0111",!0)}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,H.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,H.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,H.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,H.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,H.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,H.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,H.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,H.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,H.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,H.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,H.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,H.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,H.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,H.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,H.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,H.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,H.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,H.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,H.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,H.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,H.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,H.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,H.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,H.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,H.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,H.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,H.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,H.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,H.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,H.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,H.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,H.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,H.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,H.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,H.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,H.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,H.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,H.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,H.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:N},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:W},{name:"Datetime US",id:"dateTimeAsUS",fn:I},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:F},{name:"Datetime local",id:"dateTimeAsLocal",fn:V()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:b()},{name:"Datetime default",id:"dateTimeAsSystem",fn:X},{name:"From Now",id:"dateTimeFromNow",fn:k}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,H.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,H.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,H.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,H.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,H.i7)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:ce("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,H.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,H.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,H.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,H.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,H.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,H.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,H.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,H.i7)("W-Min",1)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,H.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,H.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,H.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,H.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,H.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,H.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,H.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,H.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,H.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,H.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,H.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,H.i7)("dBm")},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,H.i7)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,H.i7)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,H.i7)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,H.i7)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,H.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,H.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,H.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,H.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,H.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,H.i7)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,H.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,H.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:ce("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:ce("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:ce("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:ce("cfm")},{name:"Litre/hour",id:"litreh",fn:ce("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:ce("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:ce("mL/min")},{name:"Lux (lx)",id:"lux",fn:ce("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,H.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,H.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,H.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,H.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,H.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,H.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,H.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,H.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,H.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,H.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,H.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,H.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,H.i7)("g")},{name:"pound (lb)",id:"masslb",fn:ce("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,H.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:ce("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,H.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:ce("in")},{name:"feet (ft)",id:"lengthft",fn:ce("ft")},{name:"meter (m)",id:"lengthm",fn:(0,H.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,H.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:ce("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,H.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,H.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,H.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,H.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:ce("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:ce("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:ce('"Hg')},{name:"PSI",id:"pressurepsi",fn:J(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,H.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,H.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,H.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,H.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,H.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,H.i7)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,H.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,H.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,H.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,H.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,H.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,H.i7)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,H.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:ce("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,H.i7)("Hz")},{name:"Radians per second (rad/s)",id:"rotrads",fn:ce("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:ce("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:ce("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:ce("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:ce("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,H.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:g},{name:"microseconds (\xB5s)",id:"\xB5s",fn:p},{name:"milliseconds (ms)",id:"ms",fn:y},{name:"seconds (s)",id:"s",fn:a},{name:"minutes (m)",id:"m",fn:v},{name:"hours (h)",id:"h",fn:C},{name:"days (d)",id:"d",fn:E},{name:"duration (ms)",id:"dtdurationms",fn:M},{name:"duration (s)",id:"dtdurations",fn:S},{name:"duration (hh:mm:ss)",id:"dthms",fn:D},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:T},{name:"Timeticks (s/100)",id:"timeticks",fn:R},{name:"clock (ms)",id:"clockms",fn:L},{name:"clock (s)",id:"clocks",fn:w}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:ne("c/s")},{name:"ops/sec (ops)",id:"ops",fn:ne("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:ne("req/s")},{name:"reads/sec (rps)",id:"rps",fn:ne("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:ne("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:ne("io/s")},{name:"counts/min (cpm)",id:"cpm",fn:ne("c/m")},{name:"ops/min (opm)",id:"opm",fn:ne("ops/m")},{name:"reads/min (rpm)",id:"rpm",fn:ne("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:ne("wr/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:ce("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:ce("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:ce("mph")},{name:"knot (kn)",id:"velocityknot",fn:ce("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,H.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,H.i7)("L")},{name:"cubic meter",id:"m3",fn:ce("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:ce("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:ce("dm\xB3")},{name:"gallons",id:"gallons",fn:ce("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:re("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:re("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:re("On","Off")}]}];function ee(de){return`${de.prefix??""}${de.text}${de.suffix??""}`}let ue=[];const q={};let ge=!1;function De(de,Be){if(de===null)return"";if(de===Number.NEGATIVE_INFINITY||de===Number.POSITIVE_INFINITY)return de.toLocaleString();if(Be==null&&(Be=fe(de)),de===0)return de.toFixed(Be);const Ve=Be?Math.pow(10,Math.max(0,Be)):1,$e=String(Math.round(de*Ve)/Ve);if($e.indexOf("e")!==-1||de===0)return $e;const We=$e.indexOf("."),Ke=We===-1?0:$e.length-We-1;return Ke<Be?(Ke?$e:$e+".")+String(Ve).slice(1,Be-Ke+1):$e}function fe(de){const Be=Math.abs(de);let $e=-Math.floor(Math.log(Be)/Math.LN10)+1;const We=Math.pow(10,-$e);return Be/We>2.25&&++$e,de%1===0&&($e=0),Math.max(0,$e)}function me(de,Be,Ve){return{text:De(de,Be),suffix:Ve}}function ce(de,Be){return(Ve,$e)=>{if(Ve===null)return{text:""};const We=De(Ve,$e);return de?Be?{text:We,prefix:de}:{text:We,suffix:" "+de}:{text:We}}}function ie(de){return de&&de.startsWith("bool")}function re(de,Be){return Ve=>({text:Ve?de:Be})}const Ee=(de,Be)=>Math.log10(Be)/Math.log10(de);function J(de,Be,Ve=0){return($e,We)=>{if($e===null)return{text:""};if($e===Number.NEGATIVE_INFINITY||$e===Number.POSITIVE_INFINITY||isNaN($e))return{text:$e.toLocaleString()};const Ke=$e===0?0:Math.floor(Ee(de,Math.abs($e))),qe=Be[(0,t.clamp)(Ve+Ke,0,Be.length-1)];return{text:De($e/de**(0,t.clamp)(Ke,-Ve,Be.length-Ve-1),We),suffix:qe}}}function te(de,Be){return de==null?{text:""}:{text:de.toLocaleString(void 0,{maximumFractionDigits:Be})}}function ne(de){const Ve=J(1e3,["","K","M","B","T"]);return($e,We,Ke)=>{if($e===null)return{text:""};const qe=Ve($e,We,Ke);return qe.suffix+=" "+de,qe}}function j(de){return{text:`${de}`}}function be(){ue=Y();for(const de of ue)for(const Be of de.formats)q[Be.id]=Be.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(de=>{const Be=q[de.to];Be&&(q[de.from]=Be)}),ge=!0}function Le(de){if(!de)return ce("");ge||be();const Be=q[de];if(!Be&&de){let Ve=de.indexOf(":");if(Ve>0){const $e=de.substring(0,Ve),We=de.substring(Ve+1);if($e==="prefix")return ce(We,!0);if($e==="suffix")return ce(We,!1);if($e==="time")return A(We);if($e==="si"){const Ke=(0,H.dT)(We.charAt(0)),qe=Ke===0?We:We.substring(1);return(0,H.i7)(qe,Ke)}if($e==="count")return ne(We);if($e==="currency")return(0,H.Aq)(We);if($e==="bool"){if(Ve=We.indexOf("/"),Ve>=0){const Ke=We.substring(0,Ve),qe=We.substring(Ve+1);return re(Ke,qe)}return re(We,"-")}}return ce(de)}return Be}function Qe(){return ge||be(),q}function Ye(){return ge||be(),ue.map(de=>({text:de.name,submenu:de.formats.map(Be=>({text:Be.name,value:Be.id}))}))}},52674:(G,O,e)=>{"use strict";e.d(O,{s:()=>n});var t=e(20411);class n extends t.G{constructor(s){super(),this.field=s}get length(){return this.field.length}get(s){return+this.field.get(s)}}},30664:(G,O,e)=>{"use strict";e.d(O,{r:()=>n});var t=e(49319);class n{constructor(s,i,m){this.left=s,this.right=i,this.operation=m}get length(){return this.left.length}get(s){return this.operation(this.left.get(s),this.right.get(s))}toArray(){return(0,t.n)(this)}toJSON(){return(0,t.n)(this)}}},98212:(G,O,e)=>{"use strict";e.d(O,{d:()=>u});var t=e(20411),n=e(49319);class u extends t.G{constructor(i){super(),this.buffer=i.buffer||[],this.capacity=this.buffer.length,this.tail=i.append!=="head",this.index=0,this.add=this.getAddFunction(),i.capacity&&this.setCapacity(i.capacity)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?i=>{this.buffer.push(i),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:i=>{this.buffer.unshift(i),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?i=>{this.buffer[this.index]=i,this.index=(this.index+1)%this.buffer.length}:i=>{let m=this.index-1;m<0&&(m=this.buffer.length-1),this.buffer[m]=i,this.index=m}}setCapacity(i){if(this.capacity===i)return;const m=this.toArray();if(i>this.length)this.buffer=m;else if(i<this.capacity){const f=this.length-i;this.tail?this.buffer=m.slice(f,m.length):this.buffer=m.slice(0,m.length-f)}this.capacity=i,this.index=0,this.add=this.getAddFunction()}setAppendMode(i){const m=i!=="head";m!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=m,this.add=this.getAddFunction())}reverse(){this.buffer.reverse()}get(i){return this.buffer[(i+this.index)%this.buffer.length]}set(i,m){this.buffer[(i+this.index)%this.buffer.length]=m}get length(){return this.buffer.length}toArray(){return(0,n.n)(this)}toJSON(){return(0,n.n)(this)}}},1473:(G,O,e)=>{"use strict";e.d(O,{u:()=>t});class t{constructor(u,s){this.value=u,this.len=s}get length(){return this.len}get(u){return this.value}toArray(){return new Array(this.length).fill(this.value)}toJSON(){return this.toArray()}}},20411:(G,O,e)=>{"use strict";e.d(O,{G:()=>n,s:()=>u});var t=e(49319);class n{*iterator(){for(let i=0;i<this.length;i++)yield this.get(i)}[Symbol.iterator](){return this.iterator()}forEach(i){return u(this).forEach(i)}map(i){return u(this).map(i)}filter(i){return u(this).filter(i)}toArray(){return(0,t.n)(this)}toJSON(){return this.toArray()}}function u(s){return{*[Symbol.iterator](){for(let i=0;i<s.length;i++)yield s.get(i)},forEach(i){for(let m=0;m<s.length;m++)i(s.get(m))},map(i){const m=[];for(let f=0;f<s.length;f++)m.push(i(s.get(f),f));return m},filter(i){const m=[];for(const f of this)i(f)&&m.push(f);return m}}}},44405:(G,O,e)=>{"use strict";e.d(O,{r:()=>u});var t=e(14582),n=e(20411);class u extends n.G{constructor(i){super(),this.len=i}get length(){return this.len}get(i){return i}static newField(i){return{name:"",values:new u(i),type:t.fS.number,config:{min:0,max:i-1}}}}},78330:(G,O,e)=>{"use strict";e.d(O,{l$:()=>n,Gt:()=>u.G,sq:()=>c.s,rM:()=>m.r,dV:()=>s.d,uI:()=>i.u,$Y:()=>r,rm:()=>d.r,oH:()=>f.o,sD:()=>l.s});var t=e(49319);class n{constructor(p=0){this.length=0,this.source=[],this.length=p}setLength(p){if(p>this.length)this.length=p;else if(p<this.length){const y=[];for(const h of this.source)if(y.push(h),h.end>p){h.end=p;break}this.source=y,this.length=p}}append(p){const y={start:this.length,end:this.length+p.length,values:p};return this.length=y.end,this.source.push(y),y}get(p){for(let y=0;y<this.source.length;y++){const h=this.source[y];if(p>=h.start&&p<h.end)return h.values.get(p-h.start)}}toArray(){return(0,t.n)(this)}toJSON(){return(0,t.n)(this)}}var u=e(19695),s=e(98212),i=e(1473),m=e(30664),f=e(12022),o=e(20112),l=e(20411);class r extends l.G{constructor(p,y){super(),this.source=p,this.formatter=y}get length(){return this.source.length}get(p){const y=this.source.get(p);return(0,o.zc)(this.formatter(y))}}var d=e(44405),c=e(52674)},66799:(G,O,e)=>{"use strict";e.d(O,{Si:()=>n,ct:()=>t,fV:()=>u,mR:()=>s});var t=(i=>(i.DashboardView="dashboard-view",i.DataRequest="data-request",i))(t||{});const n=i=>Boolean(i.payload.page),u=i=>Boolean(i.payload.interactionName),s=i=>Boolean(i.payload.experimentId)},77274:(G,O,e)=>{"use strict";e.d(O,{SZ:()=>f,ff:()=>m,r_:()=>s,sm:()=>i});var t=e(93003),n=e(57388),u=e(96293);const s=o=>{(0,u.RP)().addEvent({type:u.ee.MetaAnalytics,payload:o})},i=()=>{const o=n.E1.getLocation(),l=`${t.v.appSubUrl??""}${o.pathname}${o.search}${o.hash}`;(0,u.RP)().addEvent({type:u.ee.Pageview,payload:{page:l}})},m=(o,l)=>{(0,u.RP)().addEvent({type:u.ee.Interaction,payload:{interactionName:o,properties:l}})},f=(o,l,r)=>{(0,u.RP)().addEvent({type:u.ee.ExperimentView,payload:{experimentId:o,experimentGroup:l,experimentVariant:r}})}},2248:(G,O,e)=>{"use strict";e.d(O,{q:()=>r});var t=e(68404),n=e(5916),u=e(81850),s=e(68183),i=e(46739),m=e(90701),f=e(80914),o=e(77213),l=e(9800);class r extends t.PureComponent{constructor(c){super(c),this.dataSourceSrv=(0,o.F)(),this.state={},this.onChange=(g,p)=>{if(p.action==="clear"&&this.props.onClear){this.props.onClear();return}const y=this.dataSourceSrv.getInstanceSettings(g.value);y&&(this.props.onChange(y),this.setState({error:void 0}))}}componentDidMount(){const{current:c}=this.props;this.dataSourceSrv.getInstanceSettings(c)||this.setState({error:"Could not find data source "+c})}getCurrentValue(){const{current:c,hideTextValue:g,noDefault:p}=this.props;if(!c&&p)return;const y=this.dataSourceSrv.getInstanceSettings(c);if(y)return{label:y.name.slice(0,37),value:y.uid,imgUrl:y.meta.info.logos.small,hideText:g,meta:y.meta};const h=(0,n.BT)(c);return h===l.hr.uid||h===l.hr.name?{label:h,value:h,hideText:g}:{label:(h??"no name")+" - not found",value:h??void 0,imgUrl:"",hideText:g}}getDataSourceOptions(){const{alerting:c,tracing:g,metrics:p,mixed:y,dashboard:h,variables:a,annotations:v,pluginId:C,type:E,filter:P,logs:x}=this.props;return this.dataSourceSrv.getList({alerting:c,tracing:g,metrics:p,logs:x,dashboard:h,mixed:y,variables:a,annotations:v,pluginId:C,filter:P,type:E}).map(S=>({value:S.name,label:`${S.name}${S.isDefault?" (default)":""}`,imgUrl:S.meta.info.logos.small,meta:S.meta}))}render(){const{autoFocus:c,onBlur:g,onClear:p,openMenuOnFocus:y,placeholder:h,width:a,inputId:v,disabled:C=!1,isLoading:E=!1}=this.props,{error:P}=this.state,x=this.getDataSourceOptions(),M=this.getCurrentValue(),S=typeof p=="function";return t.createElement("div",{"aria-label":s.wl.components.DataSourcePicker.container},t.createElement(i.Ph,{isLoading:E,disabled:C,"aria-label":s.wl.components.DataSourcePicker.inputV2,inputId:v||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:S,backspaceRemovesValue:!1,onChange:this.onChange,options:x,autoFocus:c,onBlur:g,width:a,openMenuOnFocus:y,maxMenuHeight:500,placeholder:h,noOptionsMessage:"No datasources found",value:M??null,invalid:Boolean(P)||Boolean(this.props.invalid),getOptionLabel:D=>D.meta&&(0,u.x)(D.meta.signature)&&D!==M?t.createElement(m.Lh,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,D.label)," ",t.createElement(f.o,{status:D.meta.signature})):D.label||""}))}}r.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},68711:(G,O,e)=>{"use strict";e.d(O,{$:()=>u,Z:()=>n});var t=e(68404);let n=({message:s})=>t.createElement("div",null,"Unable to render data: ",s,".");function u(s){n=s}},73274:(G,O,e)=>{"use strict";e.d(O,{$:()=>n,L:()=>u});var t=e(68404);let n=()=>t.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function u(s){n=s}},65212:(G,O,e)=>{"use strict";e.d(O,{T:()=>n,t:()=>u});var t=e(68404);let n=({children:s})=>t.createElement("div",null,s);function u(s){n=s}},93003:(G,O,e)=>{"use strict";e.d(O,{O:()=>i,v:()=>r});var t=e(82897),n=e.n(t),u=e(47513),s=e(36328);class i{constructor(c){this.snapshotEnabled=!0,this.datasources={},this.panels={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.liveEnabled=!0,this.pluginsToPreload=[],this.featureToggles={},this.licenseInfo={},this.rendererAvailable=!1,this.dashboardPreviews={systemRequirements:{met:!1,requiredImageRendererPluginVersion:""},thumbnailsExist:!1},this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.sentry={enabled:!1,dsn:"",customEndpoint:"",sampleRate:1},this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:""},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.bootData=c.bootData,this.isPublicDashboardView=c.bootData.settings.isPublicDashboardView;const g={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,g,c),this.buildInfo=c.buildInfo||g.buildInfo,this.dateFormats&&u.U6.update(this.dateFormats),f(this),this.theme2=(0,s.j)(m(this)),this.theme=this.theme2.v1,this.theme2.flags.topnav=this.featureToggles.topnav}}function m(d){return{colors:{mode:d.bootData.user.lightTheme?"light":"dark"}}}function f(d){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((g,p)=>{if(p.startsWith("__feature.")){const y=p.substring(10),h=g==="true";h!==d.featureToggles[p]&&(d.featureToggles[y]=h,console.log(`Setting feature toggle ${y} = ${h}`))}})}const o=window.grafanaBootData||{settings:{},user:{},navTree:[]},l=o.settings;l.bootData=o;const r=new i(l)},51054:(G,O,e)=>{"use strict";e.r(O),e.d(O,{CopyPanelEvent:()=>r.EK,DataSourcePicker:()=>S.q,DataSourceWithBackend:()=>a.CK,EchoEventType:()=>i.ee,FakeEchoSrv:()=>i.rX,GrafanaBootConfig:()=>d.O,HealthCheckError:()=>a.ZA,HealthStatus:()=>a.QO,HistoryWrapper:()=>l._i,MetaAnalyticsEventName:()=>c.ct,PanelDataErrorView:()=>E.Z,PanelRenderer:()=>C.$,PluginPage:()=>M.T,RefreshEvent:()=>r.U5,StreamingFrameAction:()=>o.T0,SystemJS:()=>g.i3,ThemeChangedEvent:()=>r.hD,TimeRangeUpdatedEvent:()=>r.md,config:()=>d.v,createDataSourcePluginEventProperties:()=>T,createPluginEventProperties:()=>D,createQueryRunner:()=>x.AQ,featureEnabled:()=>y.v,frameToMetricFindValue:()=>v.S9,getAngularLoader:()=>n.w,getAppEvents:()=>r.N$,getBackendSrv:()=>t.i,getDataSourceSrv:()=>u.F,getEchoSrv:()=>i.RP,getGrafanaLiveSrv:()=>o.gj,getLegacyAngularInjector:()=>f.V,getLocationSrv:()=>s.w,getPluginImportUtils:()=>g.bP,getRunRequest:()=>x.Pl,getTemplateSrv:()=>m.J,isExperimentViewEvent:()=>c.mR,isFetchError:()=>t.kW,isInteractionEvent:()=>c.fV,isPageviewEvent:()=>c.Si,loadPluginCss:()=>g.iS,locationSearchToObject:()=>l.Ox,locationService:()=>l.E1,logDebug:()=>h.o7,logError:()=>h.H,logInfo:()=>h.PN,logWarning:()=>h.KE,navigationLogger:()=>l.GQ,registerEchoBackend:()=>i.e6,reportExperimentView:()=>p.SZ,reportInteraction:()=>p.ff,reportMetaAnalytics:()=>p.r_,reportPageview:()=>p.sm,setAngularLoader:()=>n.W,setAppEvents:()=>r.Xw,setBackendSrv:()=>t.jW,setDataSourceSrv:()=>u.w,setEchoSrv:()=>i.tz,setGrafanaLiveSrv:()=>o.cA,setLegacyAngularInjector:()=>f.t,setLocationService:()=>l.ZG,setLocationSrv:()=>s.x,setPluginImportUtils:()=>g.Qf,setQueryRunnerFactory:()=>x.pD,setRunRequest:()=>x.Iw,setTemplateSrv:()=>m.l,toDataQueryError:()=>P.P,toDataQueryResponse:()=>v.z1,usePluginInteractionReporter:()=>N});var t=e(47214),n=e(37210),u=e(77213),s=e(48078),i=e(96293),m=e(69934),f=e(60667),o=e(72274),l=e(57388),r=e(1821),d=e(93003),c=e(66799),g=e(69945),p=e(77274),y=e(14876),h=e(184),a=e(9800),v=e(88635),C=e(73274),E=e(68711),P=e(91896),x=e(40483),M=e(65212),S=e(2248);function D(I){return{grafana_version:d.v.buildInfo.version,plugin_type:String(I.type),plugin_version:I.info.version,plugin_id:I.id,plugin_name:I.name}}function T(I){return{...D(I.meta),datasource_uid:I.uid}}var R=e(68404),L=e(59417),w=e(61345);const A="grafana_plugin_";function N(){const I=(0,L.g)();return(0,R.useMemo)(()=>{const F=(0,w.v)(I)?T(I.instanceSettings):D(I.meta);return(V,b)=>{if(!W(V))throw new Error(`Interactions reported in plugins should start with: "${A}".`);return(0,p.ff)(V,{...b,...F})}},[I])}function W(I){return I.startsWith(A)&&I.length>A.length}},37210:(G,O,e)=>{"use strict";e.d(O,{W:()=>n,w:()=>u});let t;function n(s){t=s}function u(){return t}},96293:(G,O,e)=>{"use strict";e.d(O,{RP:()=>s,e6:()=>i,ee:()=>t,rX:()=>m,tz:()=>u});var t=(f=>(f.Performance="performance",f.MetaAnalytics="meta-analytics",f.Sentry="sentry",f.Pageview="pageview",f.Interaction="interaction",f.ExperimentView="experimentview",f.GrafanaJavascriptAgent="grafana-javascript-agent",f))(t||{});let n;function u(f){n=f}function s(){return n||(n=new m),n}const i=f=>{s().addBackend(f)};class m{constructor(){this.events=[]}flush(){this.events=[]}addBackend(o){}addEvent(o,l){this.events.push(o)}}},57388:(G,O,e)=>{"use strict";e.d(O,{E1:()=>l,GQ:()=>c,Ox:()=>o,ZG:()=>r,_i:()=>f});var t=e(97594),n=e(27677),u=e(99227),s=e(62009),i=e(76804),m=e(93003);class f{constructor(p){this.history=p||t.lX({basename:m.v.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(p,y){const h=this.history.location,a=this.getSearchObject();for(const C of Object.keys(p))p[C]===null||p[C]===void 0?delete a[C]:a[C]=p[C];const v=n.Cj.renderUrl(h.pathname,a);y?this.history.replace(v,this.history.location.state):this.history.push(v,this.history.location.state)}push(p){this.history.push(p)}replace(p){this.history.replace(p)}reload(){const p=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:p?p+1:1}})}getLocation(){return this.history.location}getSearchObject(){return o(this.history.location.search)}update(p){if((0,u.d)("LocationSrv","update","partial, push or replace"),p.partial&&p.query)this.partial(p.query,p.partial);else{const y={pathname:p.path};p.query&&(y.search=n.Cj.toUrlParams(p.query)),p.replace?this.replace(y):this.push(y)}}}function o(g){let p=typeof g=="number"?String(g):g;return p.length>0?p.startsWith("?")?n.Cj.parseKeyValue(p.substring(1)):n.Cj.parseKeyValue(p):{}}let l=new f;const r=g=>{throw new Error("locationService can be only overriden in test environment")},d=(0,s.h)("Router"),c=d.logger;(0,i.x)("location",l,d)},48078:(G,O,e)=>{"use strict";e.d(O,{w:()=>u,x:()=>n});let t;function n(s){t=s}function u(){return t}},40483:(G,O,e)=>{"use strict";e.d(O,{AQ:()=>u,Iw:()=>i,Pl:()=>m,pD:()=>n});let t;const n=f=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=f},u=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let s;function i(f){if(s)throw new Error("runRequest function should only be set once, when Grafana is starting.");s=f}function m(){if(!s)throw new Error("getRunRequest can only be used after Grafana instance has started.");return s}},1821:(G,O,e)=>{"use strict";e.d(O,{EK:()=>i,N$:()=>o,U5:()=>n,Xw:()=>f,hD:()=>u,md:()=>s});var t=e(62316);class n extends t.m{}n.type="refresh";class u extends t.R{}u.type="theme-changed";class s extends t.R{}s.type="time-range-updated";class i extends t.R{}i.type="copy-panel";let m;function f(l){m=l}function o(){return m}},47214:(G,O,e)=>{"use strict";e.d(O,{i:()=>s,jW:()=>u,kW:()=>t});function t(i){return typeof i=="object"&&i!==null&&"status"in i&&"data"in i}let n;const u=i=>{n=i},s=()=>n},77213:(G,O,e)=>{"use strict";e.d(O,{F:()=>u,w:()=>n});let t;function n(s){t=s}function u(){return t}},60667:(G,O,e)=>{"use strict";e.d(O,{V:()=>u,t:()=>n});let t;const n=s=>{t=s},u=()=>t},72274:(G,O,e)=>{"use strict";e.d(O,{T0:()=>t,cA:()=>u,gj:()=>s});var t=(i=>(i.Append="append",i.Replace="replace",i))(t||{});let n;const u=i=>{n=i},s=()=>n},69934:(G,O,e)=>{"use strict";e.d(O,{J:()=>u,l:()=>n});let t;const n=s=>{t=s},u=()=>t},9800:(G,O,e)=>{"use strict";e.d(O,{B9:()=>x,CK:()=>P,PI:()=>M,Pr:()=>a,QO:()=>C,ZA:()=>v,hr:()=>h});var t=e(53786),n=e(3363),u=e(16313),s=e(13016),i=e(94514),m=e(7238),f=e(5916),o=e(62626),l=e(70006),r=e(77345),d=e(93003),c=e(77213),g=e(72274),p=e(47214),y=e(88635);const h=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function a(S){if(!S)return!1;const D=typeof S=="string"?S:S.type;return D===h.type||D==="-100"}class v extends Error{constructor(D,T){super(D),this.details=T,this.name="HealthCheckError"}}var C=(S=>(S.Unknown="UNKNOWN",S.OK="OK",S.Error="ERROR",S))(C||{}),E=(S=>(S.PluginID="X-Plugin-Id",S.DatasourceUID="X-Datasource-Uid",S.DashboardUID="X-Dashboard-Uid",S.PanelID="X-Panel-Id",S))(E||{});class P extends m.MF{constructor(D){super(D),this.streamOptionsProvider=M}query(D){const{intervalMs:T,maxDataPoints:R,range:L,requestId:w,hideFromInspector:A=!1}=D;let N=D.targets;this.filterQuery&&(N=N.filter(H=>this.filterQuery(H)));let W=!1;const I=new Set,F=new Set,V=N.map(H=>{let Y=this.getRef(),ee=this.id,ue=!0;if(a(H.datasource))return W=!0,{...H,datasource:h};if(H.datasource){const q=(0,c.F)().getInstanceSettings(H.datasource,D.scopedVars);if(!q)throw new Error(`Unknown Datasource: ${JSON.stringify(H.datasource)}`);const ge=q.rawRef??(0,f.iU)(q),De=q.id;(ge.uid!==Y.uid||ee!==De)&&(Y=ge,ee=De,ue=!1)}return Y.type?.length&&I.add(Y.type),Y.uid?.length&&F.add(Y.uid),{...ue?this.applyTemplateVariables(H,D.scopedVars):H,datasource:Y,datasourceId:ee,intervalMs:T,maxDataPoints:R}});if(!V.length)return(0,t.of)({data:[]});const b={queries:V};if(L&&(b.range=L,b.from=L.from.valueOf().toString(),b.to=L.to.valueOf().toString()),d.v.featureToggles.queryOverLive)return(0,g.gj)().getQueryData({request:D,body:b});let X="/api/ds/query";W&&(X+="?expression=true");const k={};return k["X-Plugin-Id"]=Array.from(I).join(", "),k["X-Datasource-Uid"]=Array.from(F).join(", "),D.dashboardUID&&(k["X-Dashboard-Uid"]=D.dashboardUID),D.panelId&&(k["X-Panel-Id"]=`${D.panelId}`),(0,p.i)().fetch({url:X,method:"POST",data:b,requestId:w,hideFromInspector:A,headers:k}).pipe((0,s.w)(H=>{const Y=(0,y.z1)(H,V);return Y.data?.length&&Y.data.find(ee=>ee.meta?.channel)?x(Y,D,this.streamOptionsProvider):(0,t.of)(Y)}),(0,i.K)(H=>(0,t.of)((0,y.z1)(H))))}getRequestHeaders(){const D={};return D["X-Plugin-Id"]=this.type,D["X-Datasource-Uid"]=this.uid,D}interpolateVariablesInQueries(D,T){return D.map(R=>this.applyTemplateVariables(R,T))}applyTemplateVariables(D,T){return D}async getResource(D,T,R){const L=this.getRequestHeaders();return(await(0,n.n)((0,p.i)().fetch({...R,method:"GET",headers:R?.headers?{...R.headers,...L}:L,params:T??R?.params,url:`/api/datasources/${this.id}/resources/${D}`}))).data}async postResource(D,T,R){const L=this.getRequestHeaders();return(await(0,n.n)((0,p.i)().fetch({...R,method:"POST",headers:R?.headers?{...R.headers,...L}:L,data:T??{...T},url:`/api/datasources/${this.id}/resources/${D}`}))).data}async callHealthCheck(){return(0,n.n)((0,p.i)().fetch({method:"GET",url:`/api/datasources/${this.id}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(D=>D.data).catch(D=>D.data)}async testDatasource(){return this.callHealthCheck().then(D=>{if(D.status==="OK")return{status:"success",message:D.message};throw new v(D.message,D.details)})}}function x(S,D,T){const R=(0,g.gj)();if(!R)return(0,t.of)(S);const L=[],w=[];for(const A of S.data){const N=(0,o.H7)(A.meta?.channel);if(N){const W=A;w.push(R.getDataStream({addr:N,buffer:T(D,W),frame:(0,l.Y)(A)}))}else L.push(A)}return L.length&&w.push((0,t.of)({...S,data:L})),w.length===1?w[0]:(0,u.T)(...w)}const M=(S,D)=>{const T={maxLength:S.maxDataPoints??500,action:g.T0.Append};return S.rangeRaw?.to==="now"&&(T.maxDelta=S.range.to.valueOf()-S.range.from.valueOf()),T};P=(0,r.s)(P)},14876:(G,O,e)=>{"use strict";e.d(O,{v:()=>n});var t=e(93003);const n=u=>{const{enabledFeatures:s}=t.v.licenseInfo;return s&&s[u]}},184:(G,O,e)=>{"use strict";e.d(O,{H:()=>l,KE:()=>f,PN:()=>m,o7:()=>o});var t=e(37916),n=e(48606),u=e(2358),s=e(14327),i=e(93003);function m(r,d){i.v.grafanaJavascriptAgent.enabled&&u.s.api.pushLog([r],{level:s.in.INFO,context:d}),i.v.sentry.enabled&&(0,t.uT)(r,{level:n.z.Info,contexts:d})}function f(r,d){i.v.grafanaJavascriptAgent.enabled&&u.s.api.pushLog([r],{level:s.in.WARN,context:d}),i.v.sentry.enabled&&(0,t.uT)(r,{level:n.z.Warning,contexts:d})}function o(r,d){i.v.grafanaJavascriptAgent.enabled&&u.s.api.pushLog([r],{level:s.in.DEBUG,context:d}),i.v.sentry.enabled&&(0,t.uT)(r,{level:n.z.Debug,contexts:d})}function l(r,d){i.v.grafanaJavascriptAgent.enabled&&u.s.api.pushLog([r.message],{level:s.in.ERROR,context:d}),i.v.sentry.enabled&&(0,t.Tb)(r,{contexts:d})}},69945:(G,O,e)=>{"use strict";e.d(O,{Qf:()=>f,bP:()=>o,i3:()=>s,iS:()=>i});var t=e(59587),n=e.n(t),u=e(93003);const s=n();function i(l){const r=u.v.bootData.user.lightTheme?l.light:l.dark;return s.import(`${r}!css`)}let m;function f(l){if(m)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");m=l}function o(){if(!m)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return m}},88635:(G,O,e)=>{"use strict";e.d(O,{S9:()=>d,z1:()=>f});var t=e(49922),n=e(70006),u=e(16911),s=e(14582),i=e(91896);const m={severity:"info",text:"Cached response"};function f(c,g){const p={data:[],state:t.Gu.Done};if(c.data?.results){const y=c.data.results,h=g?.length?g.map(C=>C.refId):Object.keys(y),a=o(c),v=[];for(const C of h){const E=y[C];E&&(E.refId=C,v.push(E))}for(const C of v){if(C.error&&(p.error||(p.error={refId:C.refId,message:C.error},p.state=t.Gu.Error)),C.frames?.length){for(let E of C.frames){a&&(E=l(E));const P=(0,n.vP)(E);P.refId||(P.refId=C.refId),p.data.push(P)}continue}if(C.series?.length)for(const E of C.series)E.refId||(E.refId=C.refId),p.data.push((0,u.g0)(E));if(C.tables?.length)for(const E of C.tables)E.refId||(E.refId=C.refId),p.data.push((0,u.g0)(E))}}return c.status&&c.status!==200&&(p.state!==t.Gu.Error&&(p.state=t.Gu.Error),p.error||(p.error=(0,i.P)(c))),p}function o(c){const g=c?.headers;return!g||!g.get?!1:g.get("X-Cache")==="HIT"}function l(c){return{...c,schema:{...c.schema,fields:[...c.schema?.fields??[]],meta:{...c.schema?.meta,notices:[...c.schema?.meta?.notices??[],m],isCachedResponse:!0}}}}function r(c){const g=f(c);if(g.error?.data?.message)return{status:"error",message:g.error.data.message,details:g.error?.data?.error?{message:g.error.data.error}:void 0};if(g.error?.refId&&g.error?.message)return{status:"error",message:g.error.message};throw c}function d(c){if(!c||!c.length)return[];const g=[];let p=c.fields.find(y=>y.type===s.fS.string);if(p||(p=c.fields.find(y=>y.type!==s.fS.time)),p)for(let y=0;y<p.values.length;y++)g.push({text:""+p.values.get(y)});return g}},2323:(G,O,e)=>{"use strict";e.d(O,{b:()=>l});var t=e(52423),n=e(68404),u=e(68183),s=e(29516),i=e(90723),m=e(81697),f=e(20017);function o(d){switch(d){case"error":case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}}const l=n.forwardRef(({title:d,onRemove:c,children:g,buttonContent:p,elevated:y,bottomSpacing:h,topSpacing:a,className:v,severity:C="error",...E},P)=>{const x=(0,s.l4)(),M=Boolean(d),S=r(x,C,M,y,h,a),D={error:"alert",warning:"alert",info:"status",success:"status"},T=E.role||D[C],R=E["aria-label"]||d;return n.createElement("div",{ref:P,className:(0,t.cx)(S.alert,v),"data-testid":u.wl.components.Alert.alertV2(C),role:T,"aria-label":R,...E},n.createElement("div",{className:S.icon},n.createElement(m.J,{size:"xl",name:o(C)})),n.createElement("div",{className:S.body},n.createElement("div",{className:S.title},d),g&&n.createElement("div",{className:S.content},g)),c&&!p&&n.createElement("div",{className:S.close},n.createElement(f.h,{"aria-label":"Close alert",name:"times",onClick:c,size:"lg",type:"button"})),c&&p&&n.createElement("div",{className:S.buttonWrapper},n.createElement(i.zx,{"aria-label":"Close alert",variant:"secondary",onClick:c,type:"button"},p)))});l.displayName="Alert";const r=(d,c,g,p,y,h)=>{const a=d.colors[c],v=d.shape.borderRadius();return{alert:t.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${v};
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: ${d.colors.background.secondary};
      box-shadow: ${p?d.shadows.z3:d.shadows.z1};
      margin-bottom: ${d.spacing(y??2)};
      margin-top: ${d.spacing(h??0)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${d.colors.background.primary};
        z-index: -1;
      }
    `,icon:t.css`
      padding: ${d.spacing(2,3)};
      background: ${a.main};
      border-radius: ${v} 0 0 ${v};
      color: ${a.contrastText};
      display: flex;
      align-items: center;
      justify-content: center;
    `,title:t.css`
      font-weight: ${d.typography.fontWeightMedium};
      color: ${d.colors.text.primary};
    `,body:t.css`
      color: ${d.colors.text.secondary};
      padding: ${d.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:t.css`
      color: ${d.colors.text.secondary};
      padding-top: ${g?d.spacing(1):0};
      max-height: 50vh;
      overflow-y: auto;
    `,buttonWrapper:t.css`
      padding: ${d.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
    `,close:t.css`
      padding: ${d.spacing(2,1)};
      background: none;
      display: flex;
    `}}},68884:(G,O,e)=>{"use strict";e.d(O,{C:()=>l});var t=e(52423),n=e(68404),u=e(35008),s=e.n(u),i=e(29516),m=e(81697),f=e(90701),o=e(48756);const l=n.memo(({icon:d,color:c,text:g,tooltip:p,className:y,...h})=>{const a=(0,i.wW)((0,n.useCallback)(C=>r(C,c),[c])),v=n.createElement("div",{className:(0,t.cx)(a.wrapper,y),...h},n.createElement(f.Lh,{align:"center",spacing:"xs"},d&&n.createElement(m.J,{name:d,size:"sm"}),n.createElement("span",null,g)));return p?n.createElement(o.u,{content:p,placement:"auto"},v):v});l.displayName="Badge";const r=(d,c)=>{let g=d.visualization.getColorByName(c),p="",y="",h="";return d.isDark?(y=s()(g).setAlpha(.15).toString(),p=s()(g).darken(30).toString(),h=s()(g).lighten(15).toString()):(y=s()(g).setAlpha(.15).toString(),p=s()(g).lighten(20).toString(),h=s()(g).darken(20).toString()),{wrapper:t.css`
      font-size: ${d.typography.size.sm};
      display: inline-flex;
      padding: 1px 4px;
      border-radius: 3px;
      background: ${y};
      border: 1px solid ${p};
      color: ${h};
      font-weight: ${d.typography.fontWeightRegular};

      > span {
        position: relative;
        top: 1px;
        margin-left: 2px;
      }
    `}}},87462:(G,O,e)=>{"use strict";e.d(O,{xf:()=>x});var t=e(52423),n=e(68404),u=e(35008),s=e.n(u),i=e(66847),m=e(20251),f=e(24177),o=e(20112),l=e(66926),r=e(425),d=e(68183),c=e(40538),g=e(80369),p=e(90723),y=e(4395);const h=18,a=50,v=150,C=1.5,E=1,P=10;class x extends n.PureComponent{render(){const{onClick:F,className:V,theme:b}=this.props,{title:X}=this.props.value,k=D(this.props);return F?n.createElement("button",{type:"button",style:k.wrapper,onClick:F,className:(0,t.cx)((0,p.gN)(b),V)},n.createElement("div",{style:k.title},X),this.renderBarAndValue()):n.createElement("div",{style:k.wrapper,className:V},X&&n.createElement("div",{style:k.title},X),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:F,showUnfilled:V}=this.props,b=w(this.props);return n.createElement("div",{style:b.wrapper},n.createElement(y.W,{"data-testid":d.wl.components.Panels.Visualization.BarGauge.valueV2,value:F,style:b.value}),V&&n.createElement("div",{style:b.emptyBar}),n.createElement("div",{style:b.bar}))}renderRetroBars(){const{display:F,field:V,value:b,itemSpacing:X,alignmentFactors:k,orientation:H,lcdCellWidth:Y,text:ee}=this.props,{valueHeight:ue,valueWidth:q,maxBarHeight:ge,maxBarWidth:De,wrapperWidth:fe,wrapperHeight:me}=T(this.props),ce=V.min??i.Hx,ie=V.max??i.Z3,re=M(H),Ee=ie-ce,J=re?ge:De,te=X,ne=Math.floor(J/Y),j=Math.floor((J-te*ne)/ne),be=N(this.props),Qe=W(k||b,be,q,ue,H,ee),Ye={width:`${fe}px`,height:`${me}px`,display:"flex"};re?(Ye.flexDirection="column-reverse",Ye.alignItems="center"):(Ye.flexDirection="row",Ye.alignItems="center",Qe.justifyContent="flex-end");const de=[];for(let Be=0;Be<ne;Be++){const Ve=ce+Ee/ne*Be,$e=R(Ve,b,F),We={borderRadius:"2px"};$e.isLit?We.backgroundImage=`radial-gradient(${$e.background} 10%, ${$e.backgroundShade})`:We.backgroundColor=$e.background,re?(We.height=`${j}px`,We.width=`${De}px`,We.marginTop=`${te}px`):(We.width=`${j}px`,We.height=`${ge}px`,We.marginRight=`${te}px`),de.push(n.createElement("div",{key:Be.toString(),style:We}))}return n.createElement("div",{style:Ye},de,n.createElement(y.W,{"data-testid":d.wl.components.Panels.Visualization.BarGauge.valueV2,value:b,style:Qe}))}}x.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:c.QH.Gradient,orientation:m.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:f.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function M(I){return I===m.wm.Vertical}function S(I){const{height:F,width:V,alignmentFactors:b,orientation:X,text:k}=I,H=b?b.title:I.value.title;if(!H)return{fontSize:0,width:0,height:0,placement:"above"};if(M(X)){const De=k?.titleSize??14;return{fontSize:De,width:V,height:De*C,placement:"below"}}if(F>40){if(k?.titleSize)return{fontSize:k?.titleSize,width:0,height:k.titleSize*C,placement:"above"};const fe=Math.max(Math.min(F*.45,a),17);return{fontSize:fe/C,width:0,height:fe,placement:"above"}}const ue=Math.max(F*.6,h)/C,q=(0,g.X1)(H,ue),ge=Math.min(q.width+15,V*.4);return{fontSize:k?.titleSize??ue,height:0,width:ge,placement:"left"}}function D(I){const F={display:"flex",overflow:"hidden",width:"100%"},V=S(I),b={fontSize:`${V.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return M(I.orientation)?(F.flexDirection="column-reverse",b.textAlign="center"):V.placement==="above"?F.flexDirection="column":(F.flexDirection="row",b.width=`${V.width}px`,b.textAlign="right",b.paddingRight="10px"),{wrapper:F,title:b}}function T(I){const{height:F,width:V,orientation:b,text:X,alignmentFactors:k}=I,H=S(I),Y=k??I.value,ee=(0,o.zc)(Y);let ue=0,q=0,ge=0,De=0,fe=0,me=0;const ce=X?.valueSize??Math.max(H.fontSize,12),re=(0,g.X1)(ee,ce).width+P*2;return M(b)?(X?.valueSize?ge=X.valueSize*E:ge=Math.min(Math.max(F*.1,h),a),De=V,ue=F-(H.height+ge),q=V,fe=V,me=F-H.height):(ge=F-H.height,De=Math.max(Math.min(V*.2,v),re),ue=F-H.height,q=V-De-H.width,H.placement==="above"?(fe=V,me=F-H.height):(fe=V-H.width,me=F)),{valueWidth:De,valueHeight:ge,maxBarWidth:q,maxBarHeight:ue,wrapperHeight:me,wrapperWidth:fe}}function R(I,F,V){if(I===null)return{background:l.R,border:l.R};const b=V?V(I).color:null;return b?F===null||isNaN(F.numeric)||I!==null&&I>F.numeric?{background:s()(b).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:s()(b).setAlpha(.95).toRgbString(),backgroundShade:s()(b).setAlpha(.55).toRgbString(),border:s()(b).setAlpha(.9).toRgbString(),isLit:!0}:{background:l.R,border:l.R}}function L(I,F,V){const b=Math.min((I-F)/(V-F),1);return isNaN(b)?0:b}function w(I){const{displayMode:F,field:V,value:b,alignmentFactors:X,orientation:k,theme:H,text:Y}=I,{valueWidth:ee,valueHeight:ue,maxBarHeight:q,maxBarWidth:ge}=T(I),De=V.min??i.Hx,fe=V.max??i.Z3,me=L(b.numeric,De,fe),ce=N(I),re=W(X||b,ce,ee,ue,k,Y),Ee=F==="basic",J={display:"flex",flexGrow:1},te={borderRadius:"3px",position:"relative",zIndex:1},ne={background:H.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:"3px",position:"relative"};if(M(k)){const j=Math.max(me*q,1);J.flexDirection="column",J.justifyContent="flex-end",te.transition="height 1s",te.height=`${j}px`,te.width=`${ge}px`,ne.bottom="-3px",ne.width=`${ee}px`,Ee?(te.background=`${s()(ce).setAlpha(.35).toRgbString()}`,te.borderTop=`2px solid ${ce}`):te.background=A(I,q)}else{const j=Math.max(me*ge,1);J.flexDirection="row-reverse",J.justifyContent="flex-end",J.alignItems="stretch",te.transition="width 1s",te.height=`${q}px`,te.width=`${j}px`,ne.left="-3px",ne.height=`${ue}px`,Ee?(te.background=`${s()(ce).setAlpha(.35).toRgbString()}`,te.borderRight=`2px solid ${ce}`):te.background=A(I,ge)}return{wrapper:J,bar:te,value:re,emptyBar:ne}}function A(I,F){const{field:V,value:b,orientation:X,theme:k}=I,H=M(X)?"0deg":"90deg",Y=V.min,ee=V.max;let ue="",q=0,ge=(0,r.QY)(V.color?.mode);if(ge.id===l.S.Thresholds){const De=V.thresholds;for(let fe=0;fe<De.steps.length;fe++){const me=De.steps[fe],ce=I.theme.visualization.getColorByName(me.color),ie=De.mode===f.H.Percentage?me.value/100:L(me.value,Y,ee),re=ie*F,Ee=Math.round(re-(re-q)/2),J=De.mode===f.H.Percentage?Y+(ee-Y)*ie:me.value;if(ue==="")ue=`linear-gradient(${H}, ${ce}, ${ce}`;else{if(b.numeric<J)break;q=re,ue+=` ${Ee}px, ${ce}`}}return ue+")"}if(ge.isContinuous&&ge.getColors){const De=ge.getColors(k);for(let fe=0;fe<De.length;fe++){const me=De[fe];if(ue==="")ue=`linear-gradient(${H}, ${me} 0px`;else{const ie=fe/(De.length-1)*F;ue+=`, ${me} ${ie}px`}}return ue+")"}return b.color??l.R}function N(I){const{value:F}=I;return F.color?F.color:l.R}function W(I,F,V,b,X,k){const H={color:F,height:`${b}px`,width:`${V}px`,display:"flex",alignItems:"center",lineHeight:E};let Y=V;const ee=(0,o.zc)(I);return M(X)?(H.fontSize=k?.valueSize??(0,g.MX)(ee,Y,b,E),H.justifyContent="center"):(H.fontSize=k?.valueSize??(0,g.MX)(ee,Y-P*2,b,E),H.justifyContent="flex-end",H.paddingLeft=`${P}px`,H.paddingRight=`${P}px`,Y-=P),H}},11003:(G,O,e)=>{"use strict";e.d(O,{w6:()=>L,pc:()=>S,IG:()=>D,ap:()=>T,jG:()=>R});var t=e(52423),n=e(68404),u=e(90723),s=e(4395),i=e(35008),m=e.n(i),f=e(20251),o=e(14582),l=e(20112),r=e(40538),d=e(1301),c=e(80369),g=e(32056);const p=1.2,y=30;class h{constructor(A){this.props=A;const{width:N,height:W,value:I,text:F}=A;this.valueColor=I.color??"gray",this.panelPadding=W>100?12:8,this.textValues=M(A),this.justifyCenter=x(A.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=N-this.panelPadding*2,this.maxTextHeight=W-this.panelPadding*2,F&&(F.titleSize&&(this.titleFontSize=F.titleSize,this.titleToAlignTo=void 0),F.valueSize&&(this.valueFontSize=F.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const A={fontSize:`${this.titleFontSize}px`,lineHeight:p};return this.props.parentOrientation===f.wm.Horizontal&&this.justifyCenter&&(A.paddingRight="0.75ch"),this.props.colorMode===S.Background&&(A.color=(0,d.bM)(this.valueColor,this.props.theme.isDark)),A}getValueStyles(){const A={fontSize:this.valueFontSize,fontWeight:500,lineHeight:p,position:"relative",zIndex:1};switch(this.justifyCenter&&(A.textAlign="center"),this.props.colorMode){case S.Value:A.color=this.valueColor;break;case S.Background:A.color=(0,d.bM)(this.valueColor,this.props.theme.isDark);break;case S.None:A.color=this.props.theme.colors.text.primary;break}return A}getValueAndTitleContainerStyles(){const A={display:"flex"};return this.justifyCenter&&(A.alignItems="center",A.justifyContent="center",A.flexGrow=1),A}getPanelStyles(){const{width:A,height:N,theme:W,colorMode:I}=this.props,F={width:`${A}px`,height:`${N}px`,padding:`${this.panelPadding}px`,borderRadius:"3px",position:"relative",display:"flex"},V=W.isDark?1:-.7;switch(I){case S.Background:const b=m()(this.valueColor).darken(15*V).spin(8).toRgbString(),X=m()(this.valueColor).darken(5*V).spin(-8).toRgbString();F.background=`linear-gradient(120deg, ${b}, ${X})`;break;case S.Value:F.background="transparent";break}return this.justifyCenter&&(F.alignItems="center",F.flexDirection="row"),F}renderChart(){const{sparkline:A,colorMode:N}=this.props;if(!A||A.y?.type!==o.fS.number)return null;let W,I;switch(N){case S.Background:W="rgba(255,255,255,0.4)",I=m()(this.valueColor).brighten(40).toRgbString();break;case S.None:case S.Value:default:I=this.valueColor,W=m()(this.valueColor).setAlpha(.2).toRgbString();break}const F={custom:{drawStyle:r.l8.Line,lineWidth:1,fillColor:W,lineColor:I}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(g.b,{height:this.chartHeight,width:this.chartWidth,sparkline:A,config:F,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class a extends h{constructor(A){super(A);const N=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,c.MX)(this.valueToAlignTo,this.maxTextWidth*N,this.maxTextHeight,p)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,c.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,p,y),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const A=super.getValueAndTitleContainerStyles();return A.flexDirection="row",A.alignItems="center",A.flexGrow=1,this.justifyCenter||(A.justifyContent="space-between"),A}renderChart(){return null}getPanelStyles(){const A=super.getPanelStyles();return A.alignItems="center",A}}class v extends h{constructor(A){super(A);const{width:N,height:W}=A,I=.5,F=.6,V=1-F,b=.4;this.chartWidth=N,this.chartHeight=W*I,this.titleToAlignTo?.length&&(this.titleFontSize=(0,c.MX)(this.titleToAlignTo,this.maxTextWidth*F,this.maxTextHeight*b,p,y)),this.valueToAlignTo.length&&(this.valueFontSize=(0,c.MX)(this.valueToAlignTo,this.maxTextWidth*V,this.maxTextHeight*I,p))}getValueAndTitleContainerStyles(){const A=super.getValueAndTitleContainerStyles();return A.flexDirection="row",A.flexGrow=1,this.justifyCenter||(A.justifyContent="space-between"),A}getPanelStyles(){const A=super.getPanelStyles();return A.flexDirection="row",A.justifyContent="space-between",A}}class C extends h{constructor(A){super(A);const{width:N,height:W}=A,I=.15,F=.25;let V=0;this.chartHeight=W*F,this.chartWidth=N,this.titleToAlignTo?.length&&(this.titleFontSize=(0,c.MX)(this.titleToAlignTo,this.maxTextWidth,W*I,p,y),V=this.titleFontSize*p),this.valueToAlignTo.length&&(this.valueFontSize=(0,c.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-V,p)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=W-this.titleFontSize*p-this.valueFontSize*p}getValueAndTitleContainerStyles(){const A=super.getValueAndTitleContainerStyles();return A.flexDirection="column",A.justifyContent="center",A}getPanelStyles(){const A=super.getPanelStyles();return A.flexDirection="column",A}}class E extends h{constructor(A){super(A);const{height:N}=A,W=.15;let I=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,c.MX)(this.titleToAlignTo,this.maxTextWidth,N*W,p,y),I=this.titleFontSize*p),this.valueToAlignTo.length&&(this.valueFontSize=(0,c.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-I,p)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const A=super.getValueAndTitleContainerStyles();return A.flexDirection="column",A.flexGrow=1,A}getPanelStyles(){const A=super.getPanelStyles();return A.alignItems="center",A}}function P(w){const{width:A,height:N,sparkline:W}=w;return A/N>2.5?N>50&&W&&W.y.values.length>1?new v(w):new a(w):N>100&&W&&W.y.values.length>1?new C(w):new E(w)}function x(w,A){return w===T.Center?!0:(A??"").length===0}function M(w){const{value:A,alignmentFactors:N,count:W}=w;let{textMode:I}=w;const F=N?N.title:A.title,V=(0,l.zc)(N||A);switch(I===R.Auto&&(W??1)===1&&(I=R.Value),I){case R.Name:return{...A,title:void 0,prefix:void 0,suffix:void 0,text:A.title||"",titleToAlignTo:void 0,valueToAlignTo:F??"",tooltip:(0,l.zc)(A)};case R.Value:return{...A,title:void 0,titleToAlignTo:void 0,valueToAlignTo:V,tooltip:A.title};case R.None:return{numeric:A.numeric,color:A.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${A.title}
Value: ${(0,l.zc)(A)}`};case R.ValueAndName:default:return{...A,titleToAlignTo:F,valueToAlignTo:V}}}var S=(w=>(w.Value="value",w.Background="background",w.None="none",w))(S||{}),D=(w=>(w.None="none",w.Line="line",w.Area="area",w))(D||{}),T=(w=>(w.Auto="auto",w.Center="center",w))(T||{}),R=(w=>(w.Auto="auto",w.Value="value",w.ValueAndName="value_and_name",w.Name="name",w.None="none",w))(R||{});class L extends n.PureComponent{render(){const{onClick:A,className:N,hasLinks:W,theme:I}=this.props,F=P(this.props),V=F.getPanelStyles(),b=F.getValueAndTitleContainerStyles(),X=F.getValueStyles(),k=F.getTitleStyles(),H=F.textValues,Y=W?void 0:H.tooltip;return A?n.createElement("button",{type:"button",className:(0,t.cx)((0,u.gN)(I),N),style:V,onClick:A,title:Y},n.createElement("div",{style:b},H.title&&n.createElement("div",{style:k},H.title),n.createElement(s.W,{value:H,style:X})),F.renderChart()):n.createElement("div",{className:N,style:V,title:Y},n.createElement("div",{style:b},H.title&&n.createElement("div",{style:k},H.title),n.createElement(s.W,{value:H,style:X})),F.renderChart())}}L.defaultProps={justifyMode:"auto"}},83978:(G,O,e)=>{"use strict";e.d(O,{_:()=>f});var t=e(52423),n=e(68404),u=e(47846),s=e.n(u),i=e(29516),m=e(11265);const f=(0,n.forwardRef)(({name:l,value:r,hidden:d,facets:c,onClick:g,className:p,loading:y,searchTerm:h,active:a,style:v,title:C,highlightParts:E,...P},x)=>{const M=(0,i.l4)(),S=o(M),D=h?[h]:[],T=(0,n.useCallback)(L=>{g&&!d&&g(l,r,L)},[g,l,d,r]);let R=r||l;return c&&(R=`${R} (${c})`),n.createElement("button",{key:R,ref:x,onClick:T,style:v,title:C||R,type:"button",role:"option","aria-selected":!!a,className:(0,t.cx)(S.base,a&&S.active,y&&S.loading,d&&S.hidden,p,g&&!d&&S.hover),...P},E!==void 0?n.createElement(m.H,{text:R,highlightClassName:S.matchHighLight,highlightParts:E}):n.createElement(s(),{textToHighlight:R,searchWords:D,autoEscape:!0,highlightClassName:S.matchHighLight}))});f.displayName="Label";const o=l=>({base:t.css`
    display: inline-block;
    cursor: pointer;
    font-size: ${l.typography.size.sm};
    line-height: ${l.typography.bodySmall.lineHeight};
    background-color: ${l.colors.background.secondary};
    color: ${l.colors.text.primary};
    white-space: nowrap;
    text-shadow: none;
    padding: ${l.spacing(.5)};
    border-radius: ${l.shape.borderRadius()};
    border: none;
    margin-right: ${l.spacing(1)};
    margin-bottom: ${l.spacing(.5)};
  `,loading:t.css`
    font-weight: ${l.typography.fontWeightMedium};
    background-color: ${l.colors.primary.shade};
    color: ${l.colors.text.primary};
    animation: pulse 3s ease-out 0s infinite normal forwards;
    @keyframes pulse {
      0% {
        color: ${l.colors.text.primary};
      }
      50% {
        color: ${l.colors.text.secondary};
      }
      100% {
        color: ${l.colors.text.disabled};
      }
    }
  `,active:t.css`
    font-weight: ${l.typography.fontWeightMedium};
    background-color: ${l.colors.primary.main};
    color: ${l.colors.primary.contrastText};
  `,matchHighLight:t.css`
    background: inherit;
    color: ${l.components.textHighlight.text};
    background-color: ${l.components.textHighlight.background};
  `,hidden:t.css`
    opacity: 0.6;
    cursor: default;
    border: 1px solid transparent;
  `,hover:t.css`
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `})},90723:(G,O,e)=>{"use strict";e.d(O,{Qj:()=>c,_7:()=>v,c9:()=>h,fW:()=>g,gN:()=>a,zx:()=>d});var t=e(52423),n=e(68404),u=e(64724),s=e(29516),i=e(19253),m=e(51821),f=e(81697),o=e(48756);const l=null,r=null,d=n.forwardRef(({variant:C="primary",size:E="md",fill:P="solid",icon:x,fullWidth:M,children:S,className:D,type:T="button",...R},L)=>{const w=(0,s.l4)(),A=g({theme:w,size:E,variant:C,fill:P,fullWidth:M,iconOnly:!S});return n.createElement("button",{className:(0,t.cx)(A.button,D),type:T,...R,ref:L},x&&n.createElement(f.J,{name:x,size:E,className:A.icon}),S&&n.createElement("span",{className:A.content},S))});d.displayName="Button";const c=n.forwardRef(({variant:C="primary",size:E="md",fill:P="solid",icon:x,fullWidth:M,children:S,className:D,onBlur:T,onFocus:R,disabled:L,tooltip:w,tooltipPlacement:A,...N},W)=>{const I=(0,s.l4)(),F=g({theme:I,fullWidth:M,size:E,variant:C,fill:P,iconOnly:!S}),V=(0,t.cx)(F.button,{[(0,t.css)(F.disabled,{pointerEvents:"none"})]:L},D),b=n.createElement("a",{className:V,...N,tabIndex:L?-1:0,ref:W},x&&n.createElement(f.J,{name:x,size:E,className:F.icon}),S&&n.createElement("span",{className:F.content},S));return w?n.createElement(o.u,{content:w,placement:A},b):b});c.displayName="LinkButton";const g=C=>{const{theme:E,variant:P,fill:x="solid",size:M,iconOnly:S,fullWidth:D}=C,{height:T,padding:R,fontSize:L}=(0,m.iL)(M,E),w=h(E,P,x),A=y(E,P,x),N=(0,i.getFocusStyles)(E),W=E.spacing.gridSize*R-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:L,fontWeight:E.typography.fontWeightMedium,fontFamily:E.typography.fontFamily,padding:`0 ${W}px`,height:E.spacing(T),lineHeight:`${E.spacing.gridSize*T-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:E.shape.borderRadius(1),"&:focus":N,"&:focus-visible":N,"&:focus:not(:focus-visible)":(0,i.getMouseFocusStyles)(E),...D&&{flexGrow:1,justifyContent:"center"},...w,":disabled":A,"&[disabled]":A}),disabled:(0,t.css)(A),img:t.css`
      width: 16px;
      height: 16px;
      margin: ${E.spacing(0,1,0,.5)};
    `,icon:S?(0,t.css)({marginRight:E.spacing(-R/2),marginLeft:E.spacing(-R/2)}):(0,t.css)({marginRight:E.spacing(R/2)}),content:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      white-space: nowrap;
      height: 100%;
    `}};function p(C,E,P){return P==="outline"?{background:"transparent",color:E.text,border:`1px solid ${E.border}`,transition:C.transitions.create(["background-color","border-color","color"],{duration:C.transitions.duration.short}),"&:hover":{background:u.alpha(E.main,C.colors.action.hoverOpacity),borderColor:C.colors.emphasize(E.border,.25),color:E.text}}:P==="text"?{background:"transparent",color:E.text,border:"1px solid transparent",transition:C.transitions.create(["background-color","color"],{duration:C.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:u.alpha(E.shade,C.colors.action.hoverOpacity),textDecoration:"none"}}:{background:E.main,color:E.contrastText,border:"1px solid transparent",transition:C.transitions.create(["background-color","box-shadow","border-color","color"],{duration:C.transitions.duration.short}),"&:hover":{background:E.shade,color:E.contrastText,boxShadow:C.shadows.z1}}}function y(C,E,P){const x={cursor:"not-allowed",boxShadow:"none",color:C.colors.text.disabled,transition:"none"};return P==="text"?{...x,background:"transparent",border:"1px solid transparent"}:P==="outline"?{...x,background:"transparent",border:`1px solid ${C.colors.action.disabledText}`}:{...x,background:C.colors.action.disabledBackground,border:"1px solid transparent"}}function h(C,E,P){switch(E){case"secondary":return p(C,C.colors.secondary,P);case"destructive":return p(C,C.colors.error,P);case"success":return p(C,C.colors.success,P);case"primary":default:return p(C,C.colors.primary,P)}}const a=C=>t.css`
    background: transparent;
    color: ${C.colors.text.primary};
    border: none;
    padding: 0;
  `,v=C=>t.css`
    background: transparent;
    border: none;
    padding: 0;
    font-family: inherit;
    color: inherit;
    height: 100%;
    &:hover {
      background: transparent;
      color: inherit;
    }
  `},75952:(G,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(52423),n=e(68404),u=e(29516);const s=(0,n.forwardRef)(({className:m,children:f,...o},l)=>{const r=(0,u.wW)(i);return n.createElement("div",{ref:l,className:(0,t.cx)("button-group",r.wrapper,m),...o},f)});s.displayName="ButtonGroup";const i=m=>({wrapper:t.css`
    display: flex;

    > .button-group:not(:first-child) > button,
    > button:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    > .button-group:not(:last-child) > button,
    > button:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right-width: 0;
    }
  `})},67089:(G,O,e)=>{"use strict";e.d(O,{f:()=>s});var t=e(52423),n=e(68404),u=e(82385);const s=({className:m,children:f})=>{const o=i();return n.createElement("div",{className:(0,t.cx)(o,m)},f)},i=(0,u.B)(()=>t.css`
    display: flex;

    button {
      flex-grow: 1;
      justify-content: center;
    }

    > * {
      flex-grow: 1;
    }

    label {
      flex-grow: 1;
      text-align: center;
    }
  `)},37751:(G,O,e)=>{"use strict";e.d(O,{O:()=>r});var t=e(52423),n=e(17416),u=e(68404),s=e(82385),i=e(29516),m=e(90723),f=e(65527),o=e(81697);const l=(0,s.B)(d=>({popup:t.css`
      label: popup;
      z-index: ${d.zIndex.dropdown};
    `,icons:{right:t.css`
        margin: 1px 0 0 4px;
      `,left:t.css`
        margin: -1px 4px 0 0;
      `}})),r=d=>{const{onChange:c,className:g,loadData:p,icon:y,buttonProps:h,hideDownIcon:a,variant:v,disabled:C,...E}=d,P=(0,i.l4)(),x=l(P);let M=d.children;return a||(M=[d.children,u.createElement(o.J,{key:"down-icon",name:"angle-down",className:x.icons.right})]),u.createElement(n.Z,{onChange:(0,f.K)(c),loadData:(0,f.p)(p),dropdownClassName:x.popup,...E,expandIcon:null},u.createElement(m.zx,{icon:y,disabled:C,variant:v,...h??{}},M))};r.displayName="ButtonCascader"},86373:(G,O,e)=>{"use strict";e.d(O,{_:()=>s});var t=e(52423),n=e(68404),u=e(29516);const s=({message:m,callToActionElement:f,footer:o,className:l})=>{const r=(0,u.wW)(i);return n.createElement("div",{className:(0,t.cx)([r.wrapper,l])},m&&n.createElement("div",{className:r.message},m),f,o&&n.createElement("div",{className:r.footer},o))},i=m=>({wrapper:t.css`
    label: call-to-action-card;
    padding: ${m.spacing(3)};
    background: ${m.colors.background.secondary};
    border-radius: ${m.shape.borderRadius(2)};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
  `,message:t.css`
    margin-bottom: ${m.spacing(3)};
    font-style: italic;
  `,footer:t.css`
    margin-top: ${m.spacing(3)}};
  `})},66208:(G,O,e)=>{"use strict";e.d(O,{L:()=>x,Z:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=e(19253),i=e(38603);const m=n.createContext(null),f=({disabled:M,href:S,onClick:D,children:T,isSelected:R,className:L,...w})=>{const A=(0,n.useMemo)(()=>n.Children.toArray(T).some(V=>n.isValidElement(V)&&V.type.displayName===o.displayName),[T]),N=M||!D&&!S,W=D&&!M?D:void 0,I=(0,u.l4)(),F=(0,i.$)(I,M,N,R);return n.createElement(i._,{disableEvents:M,disableHover:N,isSelected:R,className:(0,t.cx)(F.container,L),...w},n.createElement(m.Provider,{value:{href:S,onClick:W,disabled:M,isSelected:R}},!A&&n.createElement(o,null),T))},o=({children:M,className:S,"aria-label":D})=>{const T=(0,n.useContext)(m),R=(0,u.wW)(l),{href:L,onClick:w,isSelected:A}=T??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(R.heading,S)},L?n.createElement("a",{href:L,className:R.linkHack,"aria-label":D,onClick:w},M):w?n.createElement("button",{onClick:w,className:R.linkHack,"aria-label":D,type:"button"},M):n.createElement(n.Fragment,null,M),A!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:A}))};o.displayName="Heading";const l=M=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:M.typography.size.md,letterSpacing:"inherit",lineHeight:M.typography.body.lineHeight,color:M.colors.text.primary,fontWeight:M.typography.fontWeightMedium}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:M.shape.borderRadius(1)},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,s.getFocusStyles)(M),zIndex:1}}})}),r=({children:M,className:S})=>{const D=(0,u.wW)(d);return n.createElement("div",{className:(0,t.cx)(D.tagList,S)},M)};r.displayName="Tags";const d=M=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),c=({children:M,className:S})=>{const D=(0,u.wW)(g);return n.createElement("p",{className:(0,t.cx)(D.description,S)},M)};c.displayName="Description";const g=M=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:M.spacing(1,0,0),color:M.colors.text.secondary,lineHeight:M.typography.body.lineHeight})}),p=({children:M,align:S="start",className:D})=>{const T=(0,u.wW)(y);return n.createElement("div",{className:(0,t.cx)(T.media,D,t.css`
          align-self: ${S};
        `)},M)};p.displayName="Figure";const y=M=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:M.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),h=(0,n.memo)(({children:M,className:S,separator:D="|"})=>{const T=(0,u.wW)(a);let R=M;const L=n.Children.toArray(M).filter(Boolean);return L.length?(R=L.map((w,A)=>n.createElement("div",{key:`element_${A}`,className:T.metadataItem},w)),L.length>1&&D&&(R=L.reduce((w,A,N)=>[w,n.createElement("span",{key:`separator_${N}`,className:T.separator},D),A])),n.createElement("div",{className:(0,t.cx)(T.metadata,S)},R)):null});h.displayName="Meta";const a=M=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:M.typography.size.sm,color:M.colors.text.secondary,margin:M.spacing(.5,0,0),lineHeight:M.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${M.spacing(1)}`})}),v=({children:M,disabled:S,variant:D,className:T})=>{const R=(0,u.wW)(C),w=(0,n.useContext)(m)?.disabled||S,A=D==="primary"?R.actions:R.secondaryActions;return n.createElement("div",{className:(0,t.cx)(A,T)},n.Children.map(M,N=>n.isValidElement(N)?(0,n.cloneElement)(N,{disabled:w,...N.props}):null))},C=M=>({actions:(0,t.css)({gridArea:"Actions",marginTop:M.spacing(2),"& > *":{marginRight:M.spacing(1)}}),secondaryActions:(0,t.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:M.colors.text.secondary,marginTtop:M.spacing(2),"& > *":{marginRight:`${M.spacing(1)} !important`}})}),E=({children:M,disabled:S,className:D})=>n.createElement(v,{variant:"primary",disabled:S,className:D},M);E.displayName="Actions";const P=({children:M,disabled:S,className:D})=>n.createElement(v,{variant:"secondary",disabled:S,className:D},M);P.displayName="SecondaryActions";const x=M=>({inner:t.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      flex-wrap: wrap;
    `,...l(M),...a(M),...g(M),...y(M),...C(M),...d(M)});f.Heading=o,f.Tags=r,f.Figure=p,f.Meta=h,f.Actions=E,f.SecondaryActions=P,f.Description=c},38603:(G,O,e)=>{"use strict";e.d(O,{$:()=>l,_:()=>o});var t=e(52423),n=e(68404),u=e(29516),s=e(82385),i=e(19253);const m=({children:r,href:d})=>{const{inner:c}=(0,u.wW)(f);return d?n.createElement("a",{className:c,href:d},r):n.createElement(n.Fragment,null,r)},f=r=>({inner:(0,t.css)({display:"flex",width:"100%",padding:r.spacing(2)})}),o=({children:r,disableEvents:d,disableHover:c,isSelected:g,className:p,href:y,...h})=>{const a=(0,u.l4)(),{oldContainer:v}=l(a,d,c,g);return n.createElement("div",{...h,className:(0,t.cx)(v,p)},n.createElement(m,{href:y},r))},l=(0,s.B)((r,d=!1,c=!1,g)=>{const p=g!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:r.spacing(2),background:r.colors.background.secondary,borderRadius:r.shape.borderRadius(),marginBottom:"8px",pointerEvents:d?"none":"auto",transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),...!c&&{"&:hover":{background:r.colors.emphasize(r.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":i.getFocusStyles(r)},...p&&{cursor:"pointer"},...g&&{outline:`solid 2px ${r.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:r.colors.background.secondary,borderRadius:r.shape.borderRadius(),position:"relative",pointerEvents:d?"none":"auto",marginBottom:r.spacing(1),transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),...!c&&{"&:hover":{background:r.colors.emphasize(r.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":i.getFocusStyles(r)}})}})},76100:(G,O,e)=>{"use strict";e.d(O,{v:()=>d});var t=e(52423),n=e(58635),u=e(17416),s=e(68404),i=e(81697),m=e(25474),f=e(46739),o=e(65527);const l=(0,t.css)(`
&:focus{
  outline: none;
}
`),r="/";class d extends s.PureComponent{constructor(g){super(g),this.flattenOptions=(a,v=[])=>{let C=[];for(const E of a){const P=[...v];P.push(E),E.items?C=[...C,...this.flattenOptions(E.items,P)]:C.push({singleLabel:P[P.length-1].label,label:P.map(x=>x.label).join(this.props.separator||` ${r} `),value:P.map(x=>x.value)})}return C},this.getSearchableOptions=(0,n.Z)(a=>this.flattenOptions(a)),this.onChange=(a,v)=>{const C=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?v.map(E=>E.label).join(this.props.separator||r):v[v.length-1].label;this.setState({rcValue:a,focusCascade:!0,activeLabel:C}),this.props.onSelect(v[v.length-1].value)},this.onSelect=a=>{const v=a.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?a.label:a.singleLabel||"",rcValue:v,isSearching:!1}),this.props.onSelect(v[v.length-1])},this.onCreateOption=a=>{this.setState({activeLabel:a,rcValue:[],isSearching:!1}),this.props.onSelect(a)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=a=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(a.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=a=>{a===""&&this.setState({isSearching:!1})};const p=this.getSearchableOptions(g.options),{rcValue:y,activeLabel:h}=this.setInitialValue(p,g.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:y,activeLabel:h}}setInitialValue(g,p){if(!p)return{rcValue:[],activeLabel:""};for(const y of g){const h=y.value||[];if(h.indexOf(p)===h.length-1)return{rcValue:h,activeLabel:this.props.displayAllSelectedLevels?y.label:y.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:p}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:g,formatCreateLabel:p,placeholder:y,width:h,changeOnSelect:a,options:v}=this.props,{focusCascade:C,isSearching:E,rcValue:P,activeLabel:x}=this.state,M=this.getSearchableOptions(v);return s.createElement("div",null,E?s.createElement(f.Ph,{allowCustomValue:g,placeholder:y,autoFocus:!C,onChange:this.onSelect,onBlur:this.onBlur,options:M,onCreateOption:this.onCreateOption,formatCreateLabel:p,width:h,onInputChange:this.onSelectInputChange}):s.createElement(u.Z,{onChange:(0,o.K)(this.onChange),options:v,changeOnSelect:a,value:P.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},s.createElement("div",{className:l},s.createElement(m.I,{autoFocus:this.props.autoFocus,width:h,placeholder:y,onBlur:this.onBlurCascade,value:x,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:C?s.createElement(i.J,{name:"angle-up"}):s.createElement(i.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}d.defaultProps={changeOnSelect:!0}},65527:(G,O,e)=>{"use strict";e.d(O,{K:()=>t,p:()=>n});const t=i=>(m,f)=>{i&&i(m.map(o=>String(o)),u(f))},n=i=>m=>{i&&i(u(m))},u=i=>i.map(s),s=i=>({value:i.value??"",label:i.label})},57319:(G,O,e)=>{"use strict";e.d(O,{L:()=>n});var t=e(68404);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=s=>{const i=this.myRef.current;(!i||!i.contains(s.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}n.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:null,useCapture:!1}},38120:(G,O,e)=>{"use strict";e.d(O,{m:()=>l});var t=e(52423),n=e(68404),u=e(39451),s=e(29516),i=e(90723),m=e(81697),f=e(87152);const o=2*1e3;function l({onClipboardCopy:c,onClipboardError:g,children:p,getText:y,icon:h,variant:a,...v}){const C=(0,s.wW)(d),[E,P]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let S;return E&&(S=setTimeout(()=>{P(!1)},o)),()=>{window.clearTimeout(S)}},[E]);const x=(0,n.useRef)(null),M=(0,n.useCallback)(async()=>{const S=y();try{await r(S,x),P(!0),c?.(S)}catch(D){g?.(S,D)}},[y,c,g]);return n.createElement(n.Fragment,null,E&&n.createElement(f.K,{placement:"top",referenceElement:x.current},n.createElement(u.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(i.zx,{onClick:M,icon:h,variant:E?"success":a,"aria-label":E?"Copied":void 0,...v,className:(0,t.cx)(C.button,E&&C.successButton),ref:x},p,E&&n.createElement("div",{className:C.successOverlay},n.createElement(m.J,{name:"check"}))))}const r=async(c,g)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(c);{const p=document.createElement("textarea");g.current?.appendChild(p),p.value=c,p.focus(),p.select(),document.execCommand("copy"),p.remove()}},d=c=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},53535:(G,O,e)=>{"use strict";e.d(O,{s:()=>l});var t=e(52423),n=e(82897),u=e.n(n),s=e(68404),i=e(40008),m=e(81697),f=e(29516),o=e(19253);const l=({label:d,isOpen:c,onToggle:g,className:p,contentClassName:y,children:h,labelId:a,loading:v=!1,headerDataTestId:C,contentDataTestId:E})=>{const[P,x]=(0,s.useState)(c),M=(0,f.wW)(r),S=R=>{R.target instanceof HTMLElement&&R.target.tagName==="A"||(R.preventDefault(),R.stopPropagation(),g?.(!P),x(!P))},{current:D}=(0,s.useRef)((0,n.uniqueId)()),T=a??`collapse-label-${D}`;return s.createElement(s.Fragment,null,s.createElement("div",{onClick:S,className:(0,t.cx)(M.header,p)},s.createElement("button",{id:`collapse-button-${D}`,className:M.button,onClick:S,"aria-expanded":P&&!v,"aria-controls":`collapse-content-${D}`,"aria-labelledby":T},v?s.createElement(i.$,{className:M.spinner}):s.createElement(m.J,{name:P?"angle-up":"angle-down",className:M.icon})),s.createElement("div",{className:M.label,id:`collapse-label-${D}`,"data-testid":C},d)),P&&s.createElement("div",{id:`collapse-content-${D}`,className:(0,t.cx)(M.content,y),"data-testid":E},h))},r=d=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:d.typography.size.lg,padding:`${d.spacing(.5)} 0`,"&:focus-within":(0,o.getFocusStyles)(d)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:d.colors.text.secondary}),content:(0,t.css)({padding:`${d.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:d.spacing(2)}),label:(0,t.css)({display:"flex"})})},7917:(G,O,e)=>{"use strict";e.d(O,{U:()=>o,y:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=e(90723),i=e(81697);const m=l=>({collapse:t.css`
    label: collapse;
    margin-bottom: ${l.spacing(1)};
    background-color: ${l.colors.background.primary};
    border: 1px solid ${l.colors.border.medium};
    position: relative;
    border-radius: 3px;
    width: 100%;
    display: flex;
    flex-direction: column;
    flex: 1 1 0;
  `,collapseBody:t.css`
    label: collapse__body;
    padding: ${l.spacing(l.components.panel.padding)};
    padding-top: 0;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  `,bodyContentWrapper:t.css`
    label: bodyContentWrapper;
    flex: 1;
    overflow: hidden;
  `,loader:t.css`
    label: collapse__loader;
    height: 2px;
    position: relative;
    overflow: hidden;
    background: none;
    margin: ${l.spacing(.5)};
  `,loaderActive:t.css`
    label: collapse__loader_active;
    &:after {
      content: ' ';
      display: block;
      width: 25%;
      top: 0;
      top: -50%;
      height: 250%;
      position: absolute;
      animation: loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms;
      animation-iteration-count: 100;
      left: -25%;
      background: ${l.colors.primary.main};
    }
    @keyframes loader {
      from {
        left: -25%;
        opacity: 0.1;
      }
      to {
        left: 100%;
        opacity: 1;
      }
    }
  `,header:t.css`
    label: collapse__header;
    padding: ${l.spacing(1,2,1,2)};
    display: flex;
    transition: all 0.1s linear;
  `,headerCollapsed:t.css`
    label: collapse__header--collapsed;
    padding: ${l.spacing(1,2,1,2)};
  `,headerLabel:t.css`
    label: collapse__header-label;
    font-weight: ${l.typography.fontWeightMedium};
    margin-right: ${l.spacing(1)};
    font-size: ${l.typography.size.md};
  `,icon:t.css`
    label: collapse__icon;
    margin: ${l.spacing(.25,1,0,-1)};
  `}),f=({isOpen:l,onToggle:r,...d})=>{const[c,g]=(0,n.useState)(l);return n.createElement(o,{isOpen:c,collapsible:!0,...d,onToggle:()=>{g(!c),r&&r(!c)}})},o=({isOpen:l,label:r,loading:d,collapsible:c,onToggle:g,className:p,children:y})=>{const h=(0,u.wW)(s.gN),a=(0,u.wW)(m),v=()=>{g&&g(!l)},C=(0,t.cx)([a.collapse,p]),E=d?(0,t.cx)([a.loader,a.loaderActive]):(0,t.cx)([a.loader]),P=c?(0,t.cx)([a.header]):(0,t.cx)([a.headerCollapsed]);return n.createElement("div",{className:C},n.createElement("button",{type:"button",className:(0,t.cx)(h,P),onClick:v},c&&n.createElement(i.J,{className:a.icon,name:l?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([a.headerLabel])},r)),l&&n.createElement("div",{className:(0,t.cx)([a.collapseBody])},n.createElement("div",{className:E}),n.createElement("div",{className:a.bodyContentWrapper},y)))};o.displayName="Collapse"},89894:(G,O,e)=>{"use strict";e.d(O,{Z:()=>r});var t=e(52423),n=e(82897),u=e.n(n),s=e(68404),i=e(35008),m=e.n(i),f=e(29516),o=e(25474);const l=(0,s.forwardRef)(({color:g,onChange:p,isClearable:y=!1,onClick:h,onBlur:a,disabled:v,buttonAriaLabel:C,...E},P)=>{const[x,M]=(0,s.useState)(g),[S,D]=(0,s.useState)(g),T=(0,s.useMemo)(()=>(0,n.debounce)(p,100),[]);(0,s.useEffect)(()=>{const w=m()(g);w.isValid()&&g!==S&&(M(w.toString()),D(g))},[g,S]);const R=w=>{const{value:A}=w.currentTarget;if(M(A),A===""&&y){T(A);return}const N=m()(A);N.isValid()&&T(N.toString())},L=w=>{m()(x).isValid()||M(g),a?.(w)};return s.createElement(o.I,{...E,value:x,onChange:R,disabled:v,onClick:h,onBlur:L,addonBefore:s.createElement(d,{onClick:h,ariaLabel:C,disabled:v,color:g}),ref:P})});l.displayName="ColorInput";const r=l,d=({color:g,onClick:p,disabled:y,ariaLabel:h})=>{const a=(0,f.wW)(c);return s.createElement("button",{type:"button",onClick:p,"aria-label":h,disabled:y||!p,className:(0,t.cx)(a,t.css`
          background-color: ${g};
        `)})},c=g=>t.css`
  height: 100%;
  width: ${g.spacing.gridSize*4}px;
  border-radius: ${g.shape.borderRadius()} 0 0 ${g.shape.borderRadius()};
  border: 1px solid ${g.colors.border.medium};
`},45089:(G,O,e)=>{"use strict";e.d(O,{sp:()=>g,zH:()=>c});var t=e(52423),n=e(68404),u=e(29516),s=e(82385),i=e(76167),m=e(30995),f=e(26345),o=e(94469),l=e(16046),r=e(53505);const d=(y,h="ColorPicker")=>{var a;return a=class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}render(){const{theme:v,children:C,onChange:E}=this.props,P=p(v),x=n.createElement(y,{...this.props,children:null,onChange:E});return n.createElement(f.D,{content:x,hideAfter:300},(M,S,D)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(m.J,{...D,referenceElement:this.pickerTriggerRef.current,wrapperClassName:P.colorPicker,onMouseLeave:S,onMouseEnter:M,onKeyDown:T=>(0,i.i)(T,S)}),C?C({ref:this.pickerTriggerRef,showColorPicker:M,hideColorPicker:S}):n.createElement(l.b,{ref:this.pickerTriggerRef,onClick:M,onMouseLeave:S,color:v.visualization.getColorByName(this.props.color||"#000000")})))}},a.displayName=h,a},c=(0,u.HE)(d(o.h,"ColorPicker")),g=(0,u.HE)(d(r.j,"SeriesColorPicker")),p=(0,s.B)(y=>({colorPicker:t.css`
      position: absolute;
      z-index: ${y.zIndex.tooltip};
      color: ${y.colors.text.primary};
      max-width: 400px;
      font-size: ${y.typography.size.sm};
      // !important because these styles are also provided to popper via .popper classes from Tooltip component
      // hope to get rid of those soon
      padding: 15px !important;
      & [data-placement^='top'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='bottom'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='left'] {
        padding-top: 0 !important;
      }
      & [data-placement^='right'] {
        padding-top: 0 !important;
      }
    `}))},5025:(G,O,e)=>{"use strict";e.d(O,{T:()=>r});var t=e(52423),n=e(68404),u=e(35206),s=e(20053),i=e(64724),m=e(29516),f=e(57319),o=e(89894),l=e(36883);const r=(0,n.forwardRef)(({value:c="",onChange:g,returnColorAs:p="rgb",...y},h)=>{const[a,v]=(0,n.useState)(c),[C,E]=(0,n.useState)(!1),P=(0,m.l4)(),x=(0,m.wW)(d),M=(0,m.wW)(l.W);return(0,s.Z)(S=>{if(S===c)return;if(!S){g("");return}const D=P.visualization.getColorByName(S);g(p==="rgb"?i.asRgbString(D):i.asHexString(D))},500,[a]),n.createElement(f.L,{onClick:()=>E(!1)},n.createElement("div",{className:x.wrapper},C&&!y.disabled&&n.createElement(u.ef,{"data-testid":"color-popover",color:a,onChange:v,className:(0,t.cx)(M.root,x.picker)}),n.createElement(o.Z,{...y,theme:P,color:a,onChange:v,buttonAriaLabel:"Open color picker",onClick:()=>E(!0),onBlur:()=>E(!1),ref:h,isClearable:!0})))});r.displayName="ColorPickerInput";const d=c=>({wrapper:t.css`
      position: relative;
    `,picker:t.css`
      &.react-colorful {
        position: absolute;
        width: 100%;
        z-index: 11;
        bottom: 36px;
      }
    `,inner:t.css`
      position: absolute;
    `})},94469:(G,O,e)=>{"use strict";e.d(O,{h:()=>a});var t=e(52423),n=e(81699),u=e(68404),s=e(64724),i=e(29516),m=e(82385),f=e(16046),o=e(82897);function l(C,E){const P=new Array(C.length);for(let x=0;x<C.length;x++){const M=C.length-1-x;P[x]=E(C[M],M,C)}return P}const d=({hue:C,selectedColor:E,onColorSelect:P,...x})=>{const M=(0,o.upperFirst)(C.name),S=(0,i.wW)(c);return u.createElement("div",{className:S.colorRow},u.createElement("div",{className:S.colorLabel},M),u.createElement("div",{...x,className:S.swatchRow},l(C.shades,D=>u.createElement(f.b,{key:D.name,"aria-label":D.name,variant:D.primary?f.$.Large:f.$.Small,isSelected:D.name===E,color:D.color,onClick:()=>P(D.name)}))))},c=C=>({colorRow:t.css`
      display: grid;
      grid-template-columns: 25% 1fr;
      grid-column-gap: ${C.spacing(2)};
      padding: ${C.spacing(.5,0)};

      &:hover {
        background: ${C.colors.background.secondary};
      }
    `,colorLabel:t.css`
      padding-left: ${C.spacing(2)};
      display: flex;
      align-items: center;
    `,swatchRow:t.css`
      display: flex;
      gap: ${C.spacing(1)};
      align-items: center;
      justify-content: space-around;
      flex-direction: row;
    `}),g=({color:C,onChange:E})=>{const P=(0,i.l4)(),x=(0,i.wW)(p),M=[];for(const S of P.visualization.hues)M.push(u.createElement(d,{key:S.name,selectedColor:C,hue:S,onColorSelect:E}));return u.createElement(u.Fragment,null,u.createElement("div",{className:x.swatches},M),u.createElement("div",{className:x.extraColors},u.createElement(f.b,{isSelected:C==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>E("transparent")}),u.createElement(f.b,{isSelected:C==="text",color:P.colors.text.primary,label:"Text color",onClick:()=>E("text")})))},p=C=>({container:t.css`
      display: flex;
      flex-direction: column;
    `,extraColors:t.css`
      display: flex;
      align-items: center;
      justify-content: space-around;
      gap: ${C.spacing(1)};
      padding: ${C.spacing(1,0)};
    `,swatches:t.css`
      display: grid;
      flex-grow: 1;
    `});var y=e(36883);class h extends u.Component{constructor(E){super(E),this.getTabClassName=P=>{const{activePicker:x}=this.state;return`ColorPickerPopover__tab ${x===P&&"ColorPickerPopover__tab--active"}`},this.handleChange=P=>{const{onChange:x,enableNamedColors:M,theme:S}=this.props;if(M)return x(P);x(s.asHexString(S.visualization.getColorByName(P)))},this.onTabChange=P=>()=>this.setState({activePicker:P}),this.renderPicker=()=>{const{activePicker:P}=this.state,{color:x}=this.props;switch(P){case"spectrum":return u.createElement(y.Z,{color:x,onChange:this.handleChange});case"palette":return u.createElement(g,{color:x,onChange:this.handleChange});default:return this.renderCustomPicker(P)}},this.renderCustomPicker=P=>{const{customPickers:x,color:M,theme:S}=this.props;return x?u.createElement(x[P].tabComponent,{color:M,theme:S,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:P}=this.props;return P?u.createElement(u.Fragment,null,Object.keys(P).map(x=>u.createElement("button",{className:this.getTabClassName(x),onClick:this.onTabChange(x),key:x},P[x].name))):null},this.state={activePicker:"palette"}}render(){const{theme:E}=this.props,P=v(E);return u.createElement(n.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},u.createElement("div",{tabIndex:-1,className:P.colorPickerPopover},u.createElement("div",{className:P.colorPickerPopoverTabs},u.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette")},"Colors"),u.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum")},"Custom"),this.renderCustomPickerTabs()),u.createElement("div",{className:P.colorPickerPopoverContent},this.renderPicker())))}}const a=(0,i.HE)(h);a.displayName="ColorPickerPopover";const v=(0,m.B)(C=>({colorPickerPopover:t.css`
      border-radius: ${C.shape.borderRadius()};
      box-shadow: ${C.shadows.z3};
      background: ${C.colors.background.primary};
      border: 1px solid ${C.colors.border.medium};

      .ColorPickerPopover__tab {
        width: 50%;
        text-align: center;
        padding: ${C.spacing(1,0)};
        background: ${C.colors.background.secondary};
        color: ${C.colors.text.secondary};
        font-size: ${C.typography.bodySmall.fontSize};
        cursor: pointer;
        border: none;

        &:focus:not(:focus-visible) {
          outline: none;
          box-shadow: none;
        }

        :focus-visible {
          position: relative;
        }
      }

      .ColorPickerPopover__tab--active {
        color: ${C.colors.text.primary};
        font-weight: ${C.typography.fontWeightMedium};
        background: ${C.colors.background.primary};
      }
    `,colorPickerPopoverContent:t.css`
      width: 246px;
      font-size: ${C.typography.bodySmall.fontSize};
      min-height: 184px;
      padding: ${C.spacing(1)};
      display: flex;
      flex-direction: column;
    `,colorPickerPopoverTabs:t.css`
      display: flex;
      width: 100%;
      border-radius: ${C.shape.borderRadius()} ${C.shape.borderRadius()} 0 0;
    `}))},16046:(G,O,e)=>{"use strict";e.d(O,{$:()=>o,b:()=>l});var t=e(52423),n=e(81699),u=e(68404),s=e(35008),i=e.n(s),m=e(68183),f=e(29516),o=(d=>(d.Small="small",d.Large="large",d))(o||{});const l=u.forwardRef(({color:d,label:c,variant:g="small",isSelected:p,"aria-label":y,...h},a)=>{const v=(0,f.l4)(),{isFocusVisible:C,focusProps:E}=(0,n.Fx)(),P=r(v,g,d,C,p),x=!!c,M=`${y||c} color`;return u.createElement("div",{ref:a,className:P.wrapper,"data-testid":m.wl.components.ColorSwatch.name,...h},x&&u.createElement("span",{className:P.label},c),u.createElement("button",{className:P.swatch,...E,"aria-label":M}))}),r=(d,c,g,p,y)=>{const h=i()(g),v=c==="small"?"16px":"32px";let C="none";return h.getAlpha()<.1&&(C=`2px solid ${d.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:d.spacing(1)}),swatch:(0,t.css)({width:v,height:v,background:`${g}`,border:C,borderRadius:"50%",outlineOffset:"1px",outline:p?`2px solid  ${d.colors.primary.main}`:"none",boxShadow:y?`inset 0 0 0 2px ${g}, inset 0 0 0 4px ${d.colors.getContrastText(g)}`:"none",transition:d.transitions.create(["transform"],{duration:d.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"}})}};l.displayName="ColorSwatch"},53505:(G,O,e)=>{"use strict";e.d(O,{j:()=>m,q:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=e(88977),i=e(94469);const m=l=>{const r=(0,u.wW)(o),{yaxis:d,onToggleAxis:c,color:g,...p}=l,y=c?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(s.r,{key:"yaxisSwitch",label:"Use right y-axis",className:r.colorPickerAxisSwitch,labelClass:r.colorPickerAxisSwitchLabel,checked:d===2,onChange:()=>{c&&c()}})}}}:void 0;return n.createElement(i.h,{...p,color:g||"#000000",customPickers:y})},f=(0,u.HE)(m),o=()=>({colorPickerAxisSwitch:t.css`
      width: 100%;
    `,colorPickerAxisSwitchLabel:t.css`
      display: flex;
      flex-grow: 1;
    `})},36883:(G,O,e)=>{"use strict";e.d(O,{W:()=>d,Z:()=>c});var t=e(52423),n=e(68404),u=e(35206),s=e(20053),i=e(35008),m=e.n(i),f=e(64724),o=e(29516),l=e(89894);const r=({color:g,onChange:p})=>{const[y,h]=(0,n.useState)(g);(0,s.Z)(E=>{p(f.asHexString(a.visualization.getColorByName(E)))},500,[y]);const a=(0,o.l4)(),v=(0,o.wW)(d),C=(0,n.useMemo)(()=>y.startsWith("rgba")?y:m()(a.visualization.getColorByName(g)).toRgbString(),[y,a,g]);return n.createElement("div",{className:v.wrapper},n.createElement(u.ef,{className:v.root,color:C,onChange:h}),n.createElement(l.Z,{theme:a,color:C,onChange:h,className:v.colorInput}))},d=g=>({wrapper:t.css`
    flex-grow: 1;
  `,root:t.css`
    &.react-colorful {
      width: auto;
    }

    .react-colorful {
      &__saturation {
        border-radius: ${g.shape.borderRadius(1)} ${g.shape.borderRadius(1)} 0 0;
      }
      &__alpha {
        border-radius: 0 0 ${g.shape.borderRadius(1)} ${g.shape.borderRadius(1)};
      }
      &__alpha,
      &__hue {
        height: ${g.spacing(2)};
        position: relative;
      }
      &__pointer {
        height: ${g.spacing(2)};
        width: ${g.spacing(2)};
      }
    }
  `,colorInput:t.css`
    margin-top: ${g.spacing(2)};
  `}),c=r},91252:(G,O,e)=>{"use strict";e.d(O,{p:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=e(82385),i=e(90723);class m extends n.PureComponent{constructor(){super(...arguments),this.mainButtonRef=n.createRef(),this.confirmButtonRef=n.createRef(),this.state={showConfirm:!1},this.onClickButton=r=>{r&&r.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=r=>{r&&r.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=r=>{r&&r.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:r,className:d,size:c,disabled:g,confirmText:p,confirmVariant:y,children:h}=this.props,a=o(r),v=(0,t.cx)(d,this.state.showConfirm?a.buttonHide:a.buttonShow,g&&a.buttonDisabled),C=(0,t.cx)(a.confirmButton,this.state.showConfirm?a.confirmButtonShow:a.confirmButtonHide),E=g?()=>{}:this.onClickButton;return n.createElement("span",{className:a.buttonContainer},n.createElement("div",{className:(0,t.cx)(g&&a.disabled)},typeof h=="string"?n.createElement("span",{className:v},n.createElement(i.zx,{size:c,fill:"text",onClick:E,ref:this.mainButtonRef},h)):n.createElement("span",{className:v,onClick:E},h)),n.createElement("span",{className:C},n.createElement(i.zx,{size:c,variant:y,onClick:this.onConfirm,ref:this.confirmButtonRef},p),n.createElement(i.zx,{size:c,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const f=(0,u.HE)(m),o=(0,s.B)(l=>({buttonContainer:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
    `,buttonDisabled:t.css`
      text-decoration: none;
      color: ${l.colors.text.primary};
      opacity: 0.65;
      pointer-events: none;
    `,buttonShow:t.css`
      opacity: 1;
      transition: opacity 0.1s ease;
      z-index: 2;
    `,buttonHide:t.css`
      opacity: 0;
      transition: opacity 0.1s ease, visibility 0 0.1s;
      visibility: hidden;
      z-index: 0;
    `,confirmButton:t.css`
      align-items: flex-start;
      background: ${l.colors.background.primary};
      display: flex;
      position: absolute;
      pointer-events: none;
    `,confirmButtonShow:t.css`
      z-index: 1;
      opacity: 1;
      transition: opacity 0.08s ease-out, transform 0.1s ease-out;
      transform: translateX(0);
      pointer-events: all;
    `,confirmButtonHide:t.css`
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s;
      transform: translateX(100px);
    `,disabled:t.css`
      cursor: not-allowed;
    `}));f.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},f.displayName="ConfirmButton"},20428:(G,O,e)=>{"use strict";e.d(O,{m:()=>s});var t=e(68404),n=e(90723),u=e(91252);const s=({size:i,disabled:m,onConfirm:f,"aria-label":o,closeOnConfirm:l})=>t.createElement(u.p,{confirmText:"Delete",confirmVariant:"destructive",size:i||"md",disabled:m,onConfirm:f,closeOnConfirm:l},t.createElement(n.zx,{"aria-label":o,variant:"destructive",icon:"times",size:i||"sm"}))},81202:(G,O,e)=>{"use strict";e.d(O,{s:()=>l});var t=e(52423),n=e(68404),u=e(68183),s=e(90701),i=e(25474),m=e(29516),f=e(90723),o=e(6694);const l=({isOpen:d,title:c,body:g,description:p,confirmText:y,confirmVariant:h="destructive",confirmationText:a,dismissText:v="Cancel",dismissVariant:C="secondary",alternativeText:E,modalClass:P,icon:x="exclamation-triangle",onConfirm:M,onDismiss:S,onAlternative:D,confirmButtonVariant:T="destructive"})=>{const[R,L]=(0,n.useState)(Boolean(a)),w=(0,m.wW)(r),A=(0,n.useRef)(null),N=W=>{L(a?.localeCompare(W.currentTarget.value)!==0)};return(0,n.useEffect)(()=>{d&&A.current?.focus()},[d]),n.createElement(o.u,{className:(0,t.cx)(w.modal,P),title:c,icon:x,isOpen:d,onDismiss:S},n.createElement("div",{className:w.modalText},g,p?n.createElement("div",{className:w.modalDescription},p):null,a?n.createElement("div",{className:w.modalConfirmationInput},n.createElement(s.Lh,null,n.createElement(i.I,{placeholder:`Type ${a} to confirm`,onChange:N}))):null),n.createElement(o.u.ButtonRow,null,n.createElement(f.zx,{variant:C,onClick:S,fill:"outline"},v),n.createElement(f.zx,{variant:T,onClick:M,disabled:R,ref:A,"aria-label":u.wl.pages.ConfirmModal.delete},y),D?n.createElement(f.zx,{variant:"primary",onClick:D},E):null))},r=d=>({modal:t.css`
    width: 500px;
  `,modalText:(0,t.css)({fontSize:d.typography.h5.fontSize,color:d.colors.text.primary}),modalDescription:(0,t.css)({fontSize:d.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:d.spacing(1)})})},67303:(G,O,e)=>{"use strict";e.d(O,{x:()=>m});var t=e(68404),n=e(86889),u=e(68183),s=e(63346),i=e(97635);const m=t.memo(({x:f,y:o,onClose:l,focusOnOpen:r=!0,renderMenuItems:d,renderHeader:c})=>{const g=(0,t.useRef)(null),[p,y]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const E=g.current;if(E){const P=E.getBoundingClientRect(),x=5,M={right:window.innerWidth<f+P.width,bottom:window.innerHeight<P.bottom+P.height+x};y({position:"fixed",left:M.right?f-P.width-x:f-x,top:M.bottom?o-P.height-x:o+x})}},[f,o]),(0,n.Z)(g,()=>{l?.()});const h=c?.(),a=d?.(),v=E=>{r&&E(0)},C=E=>{E.key==="Escape"&&(E.preventDefault(),E.stopPropagation(),l?.())};return t.createElement(i.h_,null,t.createElement(s.v,{header:h,ref:g,style:p,ariaLabel:u.wl.components.Menu.MenuComponent("Context"),onOpen:v,onClick:l,onKeyDown:C},a))});m.displayName="ContextMenu"},40304:(G,O,e)=>{"use strict";e.d(O,{z:()=>u});var t=e(68404),n=e(67303);const u=({children:s,renderMenuItems:i,focusOnOpen:m=!0})=>{const[f,o]=(0,t.useState)(!1),[l,r]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,s({openMenu:d=>{o(!0),r({x:d.pageX,y:d.pageY})}}),f&&t.createElement(n.x,{onClose:()=>o(!1),x:l.x,y:l.y,renderMenuItems:i,focusOnOpen:m}))}},49938:(G,O,e)=>{"use strict";e.d(O,{$:()=>r,Z:()=>d});var t=e(52423),n=e(68404),u=e(20201),s=e(29516),i=e(9085),m=e.n(i),f=e(81697);const o=({children:g})=>{const[p,y]=(0,n.useState)(!1),[h,a]=(0,n.useState)(!1),v=(0,n.useRef)(null),C=(0,n.useRef)(null),E=(0,s.wW)(l);return(0,n.useEffect)(()=>{const P=new IntersectionObserver(x=>{x.forEach(M=>{M.target===v.current?y(!M.isIntersecting):M.target===C.current&&a(!M.isIntersecting)})});return[v,C].forEach(x=>{x.current&&P.observe(x.current)}),()=>P.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(E.scrollIndicator,E.scrollTopIndicator,{[E.scrollIndicatorVisible]:p})},n.createElement(f.J,{className:m()(E.scrollIcon,E.scrollTopIcon),name:"angle-up"})),n.createElement("div",{className:E.scrollContent},n.createElement("div",{ref:v}),g,n.createElement("div",{ref:C})),n.createElement("div",{className:(0,t.cx)(E.scrollIndicator,E.scrollBottomIndicator,{[E.scrollIndicatorVisible]:h})},n.createElement(f.J,{className:m()(E.scrollIcon,E.scrollBottomIcon),name:"angle-down"})))},l=g=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:g.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:g.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${g.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${g.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1}),scrollIcon:(0,t.css)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,t.css)({top:0}),scrollBottomIcon:(0,t.css)({bottom:0})}),r=({autoHide:g=!1,autoHideTimeout:p=200,setScrollTop:y,className:h,testId:a,autoHeightMin:v="0",autoHeightMax:C="100%",hideTracksWhenNotNeeded:E=!1,hideHorizontalTrack:P,hideVerticalTrack:x,scrollRefCallback:M,showScrollIndicators:S=!1,updateAfterMountMs:D,scrollTop:T,onScroll:R,children:L})=>{const w=(0,n.useRef)(null),A=(0,s.wW)(c);(0,n.useEffect)(()=>{w.current&&M&&M(w.current.view)},[w,M]),(0,n.useEffect)(()=>{w.current&&T!=null&&w.current.scrollTop(T)},[T]),(0,n.useEffect)(()=>{D&&setTimeout(()=>{const k=w.current;k?.update&&k.update()},D)},[D]);function N(k,H,Y){return Y.style&&H&&(Y.style.display="none"),n.createElement("div",{...Y,className:k})}const W=(0,n.useCallback)(k=>N("track-horizontal",P,k),[P]),I=(0,n.useCallback)(k=>N("track-vertical",x,k),[x]),F=(0,n.useCallback)(k=>n.createElement("div",{...k,className:"thumb-horizontal"}),[]),V=(0,n.useCallback)(k=>n.createElement("div",{...k,className:"thumb-vertical"}),[]),b=(0,n.useCallback)(k=>n.createElement("div",{...k,className:"scrollbar-view"}),[]),X=(0,n.useCallback)(()=>{w.current&&y&&y(w.current.getValues())},[y]);return n.createElement(u.ZP,{"data-testid":a,ref:w,className:(0,t.cx)(A.customScrollbar,h,{[A.scrollbarWithScrollIndicators]:S}),onScrollStop:X,autoHeight:!0,autoHide:g,autoHideTimeout:p,hideTracksWhenNotNeeded:E,autoHeightMax:C,autoHeightMin:v,renderTrackHorizontal:W,renderTrackVertical:I,renderThumbHorizontal:F,renderThumbVertical:V,renderView:b,onScroll:R},S?n.createElement(o,null,L):L)},d=r,c=g=>({customScrollbar:t.css`
      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to
      // make scroll working it should fit outer container size (scroll appears only when inner container size is
      // greater than outer one).
      display: flex;
      flex-grow: 1;
      .scrollbar-view {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .track-vertical {
        border-radius: ${g.shape.borderRadius(2)};
        width: ${g.spacing(1)} !important;
        right: 0px;
        bottom: ${g.spacing(.25)};
        top: ${g.spacing(.25)};
      }
      .track-horizontal {
        border-radius: ${g.shape.borderRadius(2)};
        height: ${g.spacing(1)} !important;
        right: ${g.spacing(.25)};
        bottom: ${g.spacing(.25)};
        left: ${g.spacing(.25)};
      }
      .thumb-vertical {
        background: ${g.colors.action.focus};
        border-radius: ${g.shape.borderRadius(2)};
        opacity: 0;
      }
      .thumb-horizontal {
        background: ${g.colors.action.focus};
        border-radius: ${g.shape.borderRadius(2)};
        opacity: 0;
      }
      &:hover {
        .thumb-vertical,
        .thumb-horizontal {
          opacity: 1;
          transition: opacity 0.3s ease-in-out;
        }
      }
    `,scrollbarWithScrollIndicators:t.css`
      .scrollbar-view {
        position: static !important;
      }
    `})},89205:(G,O,e)=>{"use strict";e.d(O,{k:()=>u});var t=e(68404),n=e(90723);function u({link:s,buttonProps:i}){return t.createElement("a",{href:s.href,target:s.target,rel:"noreferrer",onClick:s.onClick?m=>{!(m.ctrlKey||m.metaKey||m.shiftKey)&&s.onClick&&(m.preventDefault(),s.onClick(m))}:void 0},t.createElement(n.zx,{icon:"external-link-alt",variant:"primary",size:"sm",...i},s.title))}},64377:(G,O,e)=>{"use strict";e.d(O,{v:()=>L});var t=e(52423),n=e(57706),u=e.n(n),s=e(68404),i=e(73934),m=e(64076),f=e(40246),o=e(56747),l=e(28151),r=e(89029),d=e(5745),c=e(1357),g=e(29516),p=e(49938),y=e(25474),h=e(97635),a=e(82897),v=e(92787),C=e(15031);const E=A=>({list:t.css`
      border-bottom: 1px solid ${A.colors.border.weak};
      &:last-child {
        border: none;
      }
    `,wrapper:t.css`
      background: ${A.colors.background.primary};
      width: 250px;
    `,item:t.css`
      background: none;
      padding: 2px 8px;
      color: ${A.colors.text.primary};
      cursor: pointer;
      &:hover {
        background: ${A.colors.action.hover};
      }
    `,label:t.css`
      color: ${A.colors.text.secondary};
    `,activeItem:t.css`
      background: ${A.colors.background.secondary};
      &:hover {
        background: ${A.colors.background.secondary};
      }
    `,itemValue:t.css`
      font-family: ${A.typography.fontFamilyMonospace};
      font-size: ${A.typography.size.sm};
    `}),P=({suggestions:A,...N})=>{const W=(0,s.useRef)(null);(0,v.Z)(W,()=>{N.onClose&&N.onClose()});const I=(0,s.useMemo)(()=>(0,a.groupBy)(A,V=>V.origin),[A]),F=(0,g.wW)(E);return s.createElement("div",{role:"menu",ref:W,className:F.wrapper},Object.keys(I).map((V,b)=>{const X=b===0?0:Object.keys(I).reduce((k,H,Y)=>Y>=b?k:k+I[H].length,0);return s.createElement(x,{...N,suggestions:I[V],label:`${(0,a.capitalize)(V)}`,activeIndex:N.activeIndex,activeIndexOffset:X,key:V})}))};P.displayName="DataLinkSuggestions";const x=s.memo(({activeIndex:A,activeIndexOffset:N,label:W,onClose:I,onSuggestionSelect:F,suggestions:V,activeRef:b})=>{const X=(0,g.wW)(E);return s.createElement(s.Fragment,null,s.createElement(C.a,{className:X.list,items:V,renderItem:(k,H)=>{const Y=H+N===A;return s.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(X.item,Y&&X.activeItem),ref:Y?b:void 0,onClick:()=>{F(k)},title:k.documentation},s.createElement("span",{className:X.itemValue},s.createElement("span",{className:X.label},W)," ",k.label))}}))});x.displayName="DataLinkSuggestionsList";class M{getBoundingClientRect(){const N=window.getSelection(),W=N&&N.anchorNode;return W&&W.parentElement?W.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const S=(A,N)=>A-N*Math.floor(A/N),D={builtInVariable:{pattern:/(\${\S+?})/}},T=[(0,c.Z)({onlyIn:A=>A.type==="code_block",getSyntax:()=>"links"},{...u().languages,links:D})],R=A=>({input:(0,y.H)({theme:A,invalid:!1}).input,editor:t.css`
    .token.builtInVariable {
      color: ${A.colors.success.text};
    }
    .token.variable {
      color: ${A.colors.primary.text};
    }
  `,suggestionsWrapper:t.css`
    box-shadow: ${A.shadows.z2};
  `,wrapperOverrides:t.css`
    width: 100%;
    > .slate-query-field__wrapper {
      padding: 0;
      background-color: transparent;
      border: none;
    }
  `}),L=(0,s.memo)(({value:A,onChange:N,suggestions:W,placeholder:I="http://your-grafana.com/d/000000010/annotations"})=>{const F=(0,s.useRef)(null),V=(0,g.wW)(R),[b,X]=(0,s.useState)(!1),[k,H]=(0,s.useState)(0),[Y,ee]=(0,s.useState)((0,d.l1)(A)),ue=(0,m.Z)(Y),[q,ge]=(0,s.useState)(0),De=(0,s.useRef)({showingSuggestions:b,suggestions:W,suggestionsIndex:k,linkUrl:Y,onChange:N});De.current={showingSuggestions:b,suggestions:W,suggestionsIndex:k,linkUrl:Y,onChange:N};const fe=(0,s.useRef)(null);(0,s.useEffect)(()=>{ge(w(fe.current,k))},[k]);const me=(0,s.useMemo)(()=>new M,[]),ce=s.useCallback((J,te)=>{if(!De.current.showingSuggestions)return J.key==="="||J.key==="$"||J.keyCode===32&&J.ctrlKey?X(!0):te();switch(J.key){case"Backspace":case"Escape":return X(!1),H(0);case"Enter":return J.preventDefault(),re(De.current.suggestions[De.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":J.preventDefault();const ne=J.key==="ArrowDown"?1:-1;return H(j=>S(j+ne,De.current.suggestions.length));default:return te()}},[]);(0,s.useEffect)(()=>{ue&&ue.selection.isFocused&&!Y.selection.isFocused&&De.current.onChange(f.Z.serialize(Y))},[Y,ue]);const ie=s.useCallback(({value:J})=>{ee(J)},[]),re=(J,te=F.current)=>{const j=Ee()==="$";J.origin!==l.L.Template||J.value===r.W.includeVars?te.insertText(`${j?"":"$"}{${J.value}}`):te.insertText(`${j?"":"$"}{${J.value}:queryparam}`),ee(te.value),X(!1),H(0),De.current.onChange(f.Z.serialize(te.value))},Ee=()=>{const J=document.getElementById("data-link-input");let te="",ne,j;return window.getSelection&&(ne=window.getSelection(),ne&&ne.rangeCount>0&&(j=ne.getRangeAt(0).cloneRange(),j.collapse(!0),j.setStart(J,0),te=j.toString().slice(-1))),te};return s.createElement("div",{className:V.wrapperOverrides},s.createElement("div",{className:"slate-query-field__wrapper"},s.createElement("div",{id:"data-link-input",className:"slate-query-field"},b&&s.createElement(h.h_,null,s.createElement(i.r,{referenceElement:me,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:J,style:te,placement:ne})=>s.createElement("div",{ref:J,style:te,"data-placement":ne,className:V.suggestionsWrapper},s.createElement(p.Z,{scrollTop:q,autoHeightMax:"300px",setScrollTop:({scrollTop:j})=>ge(j)},s.createElement(P,{activeRef:fe,suggestions:De.current.suggestions,onSuggestionSelect:re,onClose:()=>X(!1),activeIndex:k}))))),s.createElement(o.ML,{schema:d.Yi,ref:F,placeholder:I,value:De.current.linkUrl,onChange:ie,onKeyDown:(J,te,ne)=>ce(J,ne),plugins:T,className:(0,t.cx)(V.editor,V.input,t.css`
                  padding: 3px 8px;
                `)}))))});L.displayName="DataLinkInput";function w(A,N){return(A?.clientHeight??0)*N}},67591:(G,O,e)=>{"use strict";e.d(O,{V:()=>o});var t=e(52423),n=e(68404),u=e(68183),s=e(26774),i=e(40304),m=e(75182),f=e(87302);const o=({children:l,links:r,style:d})=>{const c=[{items:(0,s.R)(r),label:"Data links"}],g=c[0].items.length,p=()=>c.map((h,a)=>n.createElement(m.k,{key:`${h.label}${a}`,label:h.label},(h.items||[]).map(v=>n.createElement(f.s,{key:v.label,url:v.url,label:v.label,target:v.target,icon:v.icon,active:v.active,onClick:v.onClick})))),y=t.css`
    cursor: context-menu;
  `;if(g>1)return n.createElement(i.z,{renderMenuItems:p},({openMenu:h})=>l({openMenu:h,targetClassName:y}));{const h=r()[0];return n.createElement("a",{href:h.href,onClick:h.onClick,target:h.target,title:h.title,style:{...d,overflow:"hidden",display:"flex"},"aria-label":u.wl.components.DataLinksContextMenu.singleLink},l({}))}}},27376:(G,O,e)=>{"use strict";e.d(O,{d:()=>E});var t=e(52423),n=e(82897),u=e(68404),s=e(29516),i=e(82385),m=e(90723),f=e(6694),o=e(26774),l=e(74955),r=e(25474),d=e(44727),c=e(64377);const g=x=>({listItem:t.css`
    margin-bottom: ${x.spacing()};
  `,infoText:t.css`
    padding-bottom: ${x.spacing(2)};
    margin-left: 66px;
    color: ${x.colors.text.secondary};
  `}),p=u.memo(({index:x,value:M,onChange:S,suggestions:D,isLast:T})=>{const R=(0,s.wW)(g),L=(N,W)=>{S(x,{...M,url:N},W)},w=N=>{S(x,{...M,title:N.target.value})},A=()=>{S(x,{...M,targetBlank:!M.targetBlank})};return u.createElement("div",{className:R.listItem},u.createElement(l.g,{label:"Title"},u.createElement(r.I,{value:M.title,onChange:w,placeholder:"Show details"})),u.createElement(l.g,{label:"URL",invalid:(0,o.g)(M.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},u.createElement(c.v,{value:M.url,onChange:L,suggestions:D})),u.createElement(l.g,{label:"Open in new tab"},u.createElement(d.r,{value:M.targetBlank||!1,onChange:A})),T&&u.createElement("div",{className:R.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});p.displayName="DataLinkEditor";const y=({link:x,index:M,getSuggestions:S,onSave:D,onCancel:T})=>{const[R,L]=(0,u.useState)(x);return u.createElement(u.Fragment,null,u.createElement(p,{value:R,index:M,isLast:!1,suggestions:S(),onChange:(w,A)=>{L(A)}}),u.createElement(f.u.ButtonRow,null,u.createElement(m.zx,{variant:"secondary",onClick:()=>T(M),fill:"outline"},"Cancel"),u.createElement(m.zx,{onClick:()=>{D(M,R)}},"Save")))};var h=e(69556),a=e(20017);const v=({link:x,onEdit:M,onRemove:S})=>{const D=(0,s.l4)(),T=C(D),{title:R="",url:L=""}=x,w=R.trim()!=="",A=L.trim()!=="",N=(0,o.g)(L);return u.createElement("div",{className:T.wrapper},u.createElement("div",{className:T.titleWrapper},u.createElement("div",{className:(0,t.cx)(T.url,!A&&T.notConfigured,N&&T.errored)},w?R:"Data link title not provided"),u.createElement("div",{className:T.actionButtons},u.createElement(a.h,{name:"pen",onClick:M}),u.createElement(a.h,{name:"times",onClick:S}))),u.createElement("div",{className:(0,t.cx)(T.url,!A&&T.notConfigured,N&&T.errored),title:L},A?L:"Data link url not provided"),N&&u.createElement(h.S,null,"Explore data link may not work in the future. Please edit."))},C=(0,i.B)(x=>({wrapper:t.css`
      margin-bottom: ${x.spacing(2)};
      width: 100%;
      &:last-child {
        margin-bottom: 0;
      }
      display: flex;
      flex-direction: column;
    `,titleWrapper:t.css`
      label: data-links-list-item-title;
      justify-content: space-between;
      display: flex;
      width: 100%;
      align-items: center;
    `,actionButtons:t.css`
      margin-left: ${x.spacing(1)};
      display: flex;
    `,errored:t.css`
      color: ${x.colors.error.text};
      font-style: italic;
    `,notConfigured:t.css`
      font-style: italic;
    `,title:t.css`
      color: ${x.colors.text.primary};
      font-size: ${x.typography.size.sm};
      font-weight: ${x.typography.fontWeightMedium};
    `,url:t.css`
      color: ${x.colors.text.secondary};
      font-size: ${x.typography.size.sm};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 90%;
    `})),E=({links:x,onChange:M,getSuggestions:S,data:D})=>{const T=(0,s.l4)(),[R,L]=(0,u.useState)(null),[w,A]=(0,u.useState)(!1),N=P(T),W=x??[],I=R!==null,F=(k,H)=>{if(w)if(H.title.trim()===""&&H.url.trim()===""){A(!1),L(null);return}else L(null),A(!1);const Y=(0,n.cloneDeep)(W);Y[k]=H,M(Y),L(null)},V=()=>{let k=(0,n.cloneDeep)(W);L(k.length),A(!0)},b=k=>{w&&A(!1),L(null)},X=k=>{const H=(0,n.cloneDeep)(W);H.splice(k,1),M(H)};return u.createElement(u.Fragment,null,W.length>0&&u.createElement("div",{className:N.wrapper},W.map((k,H)=>u.createElement(v,{key:`${k.title}/${H}`,index:H,link:k,onChange:F,onEdit:()=>L(H),onRemove:()=>X(H),data:D}))),I&&R!==null&&u.createElement(f.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{b(R)}},u.createElement(y,{index:R,link:w?{title:"",url:""}:W[R],data:D,onSave:F,onCancel:b,getSuggestions:S})),u.createElement(m.zx,{size:"sm",icon:"plus",onClick:V,variant:"secondary"},"Add link"))},P=(0,i.B)(x=>({wrapper:t.css`
      margin-bottom: ${x.spacing(2)};
    `}))},9651:(G,O,e)=>{"use strict";e.d(O,{Z:()=>m});var t=e(52423),n=e(68404),u=e(29516),s=e(81697),i=e(89205);function m({links:o}){const l=(0,u.wW)(f);if(o.length===1)return n.createElement(i.k,{link:o[0]});const r=o.filter(c=>c.target==="_blank"),d=o.filter(c=>c.target==="_self");return n.createElement(n.Fragment,null,d.map((c,g)=>n.createElement(i.k,{key:g,link:c})),n.createElement("div",{className:l.wrapper},n.createElement("p",{className:l.externalLinksHeading},"External links"),r.map((c,g)=>n.createElement("a",{key:g,href:c.href,target:c.target,className:l.externalLink},n.createElement(s.J,{name:"external-link-alt"}),c.title))))}const f=o=>({wrapper:t.css`
    flex-basis: 150px;
    width: 100px;
    margin-top: ${o.spacing(1)};
  `,externalLinksHeading:t.css`
    color: ${o.colors.text.secondary};
    font-weight: ${o.typography.fontWeightRegular};
    font-size: ${o.typography.size.sm};
    margin: 0;
  `,externalLink:t.css`
    color: ${o.colors.text.link};
    font-weight: ${o.typography.fontWeightRegular};
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover {
      text-decoration: underline;
    }

    div {
      margin-right: ${o.spacing(1)};
    }
  `})},36555:(G,O,e)=>{"use strict";e.d(O,{O:()=>s});var t=e(68404),n=e(44727),u=e(71210);function s({options:i,onOptionsChange:m}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(u._,{labelWidth:26,label:"Manage alerts via Alerting UI",disabled:i.readOnly},t.createElement(n.x,{value:i.jsonData.manageAlerts!==!1,onChange:f=>m({...i,jsonData:{...i.jsonData,manageAlerts:f.currentTarget.checked}})}))))))}},86352:(G,O,e)=>{"use strict";e.d(O,{W:()=>f});var t=e(68404),n=e(90723),u=e(71210),s=e(9274),i=e(25474),m=e(79090);const f=({hasCert:o,label:l,onChange:r,onClick:d,placeholder:c})=>t.createElement(s.Z,null,t.createElement(u._,{label:l,labelWidth:14,disabled:o},o?t.createElement(i.I,{type:"text",value:"configured",width:24}):t.createElement(m.K,{rows:7,onChange:r,placeholder:c,required:!0})),o&&t.createElement(n.zx,{variant:"secondary",onClick:d,style:{marginLeft:4}},"Reset"))},94390:(G,O,e)=>{"use strict";e.d(O,{H:()=>c});var t=e(52423),n=e(82897),u=e.n(n),s=e(68404),i=e(82385),m=e(90723),f=e(45586),o=e(81697),l=e(16486);const r=(0,i.B)(()=>({layout:t.css`
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      > * {
        margin-left: 4px;
        margin-bottom: 0;
        height: 100%;
        &:first-child,
        &:last-child {
          margin-left: 0;
        }
      }
    `})),d=({header:p,onBlur:y,onChange:h,onRemove:a,onReset:v})=>{const C=r();return s.createElement("div",{className:C.layout},s.createElement(f.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:p.name||"",onChange:E=>h({...p,name:E.target.value}),onBlur:y}),s.createElement(l.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:p.configured,value:p.value,labelWidth:5,inputWidth:p.configured?11:12,placeholder:"Header Value",onReset:()=>v(p.id),onChange:E=>h({...p,value:E.target.value}),onBlur:y}),s.createElement(m.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:E=>a(p.id)},s.createElement(o.J,{name:"trash-alt"})))};d.displayName="CustomHeaderRow";class c extends s.PureComponent{constructor(y){super(y),this.state={headers:[]},this.updateSettings=()=>{const{headers:C}=this.state,E=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([x,M])=>!x.startsWith("httpHeaderName"))),P=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([x,M])=>!x.startsWith("httpHeaderValue")));for(const[x,M]of C.entries())E[`httpHeaderName${x+1}`]=M.name,M.configured||(P[`httpHeaderValue${x+1}`]=M.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:E,secureJsonData:P})},this.onHeaderAdd=()=>{this.setState(C=>({headers:[...C.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(C,E)=>{this.setState(({headers:P})=>({headers:P.map((x,M)=>C!==M?x:{...E})}))},this.onHeaderReset=C=>{this.setState(({headers:E})=>({headers:E.map((P,x)=>P.id!==C?P:{...P,value:"",configured:!1})}))},this.onHeaderRemove=C=>{this.setState(({headers:E})=>({headers:E.filter(P=>P.id!==C)}),this.updateSettings)};const{jsonData:h,secureJsonData:a,secureJsonFields:v}=this.props.dataSourceConfig;this.state={headers:Object.keys(h).sort().filter(C=>C.startsWith("httpHeaderName")).map((C,E)=>({id:(0,n.uniqueId)(),name:h[C],value:a!==void 0?a[C]:"",configured:v&&v[`httpHeaderValue${E+1}`]||!1}))}}render(){const{headers:y}=this.state,{dataSourceConfig:h}=this.props;return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("h6",null,"Custom HTTP Headers")),s.createElement("div",null,y.map((a,v)=>s.createElement(d,{key:a.id,header:a,onChange:C=>{this.onHeaderChange(v,C)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!h.readOnly&&s.createElement("div",{className:"gf-form"},s.createElement(m.zx,{variant:"secondary",icon:"plus",type:"button",onClick:a=>{this.onHeaderAdd()}},"Add header")))}}var g=null},32695:(G,O,e)=>{"use strict";e.d(O,{E:()=>M});var t=e(52423),n=e(68404),u=e(68183),s=e(29516),i=e(45586),m=e(49371),f=e(71210),o=e(70640),l=e(81697),r=e(46739),d=e(44727),c=e(64407),g=e(16486);const p=({dataSourceConfig:S,onChange:D})=>{const T=S.secureJsonData?S.secureJsonData.basicAuthPassword:"",R=()=>{D({...S,secureJsonData:{...S.secureJsonData,basicAuthPassword:""},secureJsonFields:{...S.secureJsonFields,basicAuthPassword:!1}})},L=w=>{D({...S,secureJsonData:{...S.secureJsonData,basicAuthPassword:w.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(f._,{disabled:S.readOnly},n.createElement(i.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:S.basicAuthUser,onChange:w=>D({...S,basicAuthUser:w.currentTarget.value})})),n.createElement(f._,{disabled:S.readOnly},n.createElement(g.c,{isConfigured:!!(S.secureJsonFields&&S.secureJsonFields.basicAuthPassword),value:T||"",inputWidth:18,labelWidth:10,onReset:R,onChange:L})))};var y=e(94390);const h=26,a=({dataSourceConfig:S,onChange:D,showForwardOAuthIdentityOption:T=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"TLS Client Auth",labelWidth:h,disabled:S.readOnly},n.createElement(d.x,{id:"http-settings-tls-client-auth",value:S.jsonData.tlsAuth||!1,onChange:R=>D({...S.jsonData,tlsAuth:R.currentTarget.checked})})),n.createElement(f._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:h,disabled:S.readOnly},n.createElement(d.x,{id:"http-settings-ca-cert",value:S.jsonData.tlsAuthWithCACert||!1,onChange:R=>D({...S.jsonData,tlsAuthWithCACert:R.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"Skip TLS Verify",labelWidth:h,disabled:S.readOnly},n.createElement(d.x,{id:"http-settings-skip-tls-verify",value:S.jsonData.tlsSkipVerify||!1,onChange:R=>D({...S.jsonData,tlsSkipVerify:R.currentTarget.checked})}))),T&&n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:h,disabled:S.readOnly},n.createElement(d.x,{id:"http-settings-forward-oauth",value:S.jsonData.oauthPassThru||!1,onChange:R=>D({...S.jsonData,oauthPassThru:R.currentTarget.checked})}))));var v=e(11474);const C=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],E={label:"Server (default)",value:"proxy"},P=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),x=26,M=S=>{const{defaultUrl:D,dataSourceConfig:T,onChange:R,showAccessOptions:L,sigV4AuthToggleEnabled:w,showForwardOAuthIdentityOption:A,azureAuthSettings:N,renderSigV4Editor:W}=S;let I;const[F,V]=(0,n.useState)(!1),b=(0,s.l4)(),X=(0,n.useCallback)(ge=>{R({...T,...ge})},[T,R]);switch(T.access){case"direct":I=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.");break;case"proxy":I=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.");break;default:I="Specify a complete HTTP URL (for example http://your_server:8080)"}const k=n.createElement(r.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:C,value:C.filter(ge=>ge.value===T.access)[0]||E,onChange:ge=>X({access:ge.value}),disabled:T.readOnly}),H=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(T.url),Y=t.css`
    box-shadow: inset 0 0px 5px ${b.v1.palette.red};
  `,ee=(0,t.cx)({["width-20"]:!0,[Y]:!H}),ue=n.createElement(o.I,{className:ee,placeholder:D,value:T.url,"aria-label":u.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:ge=>X({url:ge.currentTarget.value}),disabled:T.readOnly}),q=N?.azureAuthSupported&&N.getAzureAuthEnabled(T)||!1;return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"URL",labelWidth:13,tooltip:I,inputEl:ue})),L&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:k})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>V(ge=>!ge)},"Help\xA0",n.createElement(l.J,{name:F?"angle-down":"angle-right",style:{marginBottom:0}})))),F&&n.createElement(P,null)),T.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(m.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(c.B,{tags:T.jsonData.keepCookies,width:40,onChange:ge=>X({jsonData:{...T.jsonData,keepCookies:ge}}),disabled:T.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:T.jsonData.timeout,onChange:ge=>{X({jsonData:{...T.jsonData,timeout:parseInt(ge.currentTarget.value,10)}})},disabled:T.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"Basic auth",labelWidth:x,disabled:T.readOnly},n.createElement(d.x,{id:"http-settings-basic-auth",value:T.basicAuth,onChange:ge=>{X({basicAuth:ge.currentTarget.checked})}})),n.createElement(f._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:x,disabled:T.readOnly},n.createElement(d.x,{id:"http-settings-with-credentials",value:T.withCredentials,onChange:ge=>{X({withCredentials:ge.currentTarget.checked})}}))),N?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:x,disabled:T.readOnly},n.createElement(d.x,{id:"http-settings-azure-auth",value:q,onChange:ge=>{X(N.setAzureAuthEnabled(T,ge.currentTarget.checked))}}))),w&&n.createElement("div",{className:"gf-form-inline"},n.createElement(f._,{label:"SigV4 auth",labelWidth:x,disabled:T.readOnly},n.createElement(d.x,{id:"http-settings-sigv4-auth",value:T.jsonData.sigV4Auth||!1,onChange:ge=>{X({jsonData:{...T.jsonData,sigV4Auth:ge.currentTarget.checked}})}}))),T.access==="proxy"&&n.createElement(a,{dataSourceConfig:T,onChange:ge=>X({jsonData:ge}),showForwardOAuthIdentityOption:A})),T.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(p,{...S}))),N?.azureAuthSupported&&q&&N.azureSettingsUI&&n.createElement(N.azureSettingsUI,{dataSourceConfig:T,onChange:R}),T.jsonData.sigV4Auth&&w&&W,(T.jsonData.tlsAuth||T.jsonData.tlsAuthWithCACert)&&n.createElement(v.s,{dataSourceConfig:T,onChange:R}),T.access==="proxy"&&n.createElement(y.H,{dataSourceConfig:T,onChange:R})))}},97064:(G,O,e)=>{"use strict";e.d(O,{i:()=>s});var t=e(68404),n=e(44727),u=e(71210);function s({options:i,onOptionsChange:m}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(u._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.x,{value:i.jsonData.enableSecureSocksProxy??!1,onChange:f=>m({...i,jsonData:{...i.jsonData,enableSecureSocksProxy:f.currentTarget.checked}})}))))))}},11474:(G,O,e)=>{"use strict";e.d(O,{s:()=>f});var t=e(52423),n=e(68404),u=e(45586),s=e(81697),i=e(48756),m=e(86352);const f=({dataSourceConfig:o,onChange:l})=>{const r=o.secureJsonFields&&o.secureJsonFields.tlsCACert,d=o.secureJsonFields&&o.secureJsonFields.tlsClientCert,c=o.secureJsonFields&&o.secureJsonFields.tlsClientKey,g=o.jsonData&&o.jsonData.serverName,p=a=>v=>{v.preventDefault();const C={...o.secureJsonFields};C[a]=!1,l({...o,secureJsonFields:C})},y=a=>v=>{const C={...o.secureJsonData};C[a]=v.currentTarget.value,l({...o,secureJsonData:C})},h=a=>{const v={...o.jsonData,serverName:a.currentTarget.value};l({...o,jsonData:v})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",t.css`
            align-items: baseline;
          `)},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(i.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},n.createElement(s.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})))),n.createElement("div",null,o.jsonData.tlsAuthWithCACert&&n.createElement(m.W,{hasCert:!!r,onChange:y("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:p("tlsCACert")}),o.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(u.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:g&&o.jsonData.serverName,onChange:h})),n.createElement(m.W,{hasCert:!!d,label:"Client Cert",onChange:y("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:p("tlsClientCert")}),n.createElement(m.W,{hasCert:!!c,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:y("tlsClientKey"),onClick:p("tlsClientKey")}))))}},98259:(G,O,e)=>{"use strict";e.d(O,{M:()=>o});var t=e(52423),n=e(68404),u=e(41644),s=e(29516),i=e(57319),m=e(81697),f=e(43594);const o=(0,n.memo)(d=>{const c=(0,s.wW)(r),{isOpen:g,onClose:p}=d;return g?n.createElement(i.L,{useCapture:!0,includeButtonPress:!1,onClick:p},n.createElement("div",{className:c.modal,"data-testid":"date-picker"},n.createElement(l,{...d}))):null});o.displayName="DatePicker";const l=(0,n.memo)(({value:d,minDate:c,maxDate:g,onChange:p})=>{const y=(0,s.wW)(f.mg);return n.createElement(u.ZP,{className:y.body,tileClassName:y.title,value:d||new Date,minDate:c,maxDate:g,nextLabel:n.createElement(m.J,{name:"angle-right"}),prevLabel:n.createElement(m.J,{name:"angle-left"}),onChange:h=>{Array.isArray(h)||p(h)},locale:"en"})});l.displayName="Body";const r=d=>({modal:t.css`
      z-index: ${d.zIndex.modal};
      position: absolute;
      box-shadow: ${d.shadows.z3};
      background-color: ${d.colors.background.primary};
      border: 1px solid ${d.colors.border.weak};
      border-radius: 2px 0 0 2px;

      button:disabled {
        color: ${d.colors.text.disabled};
      }
    `})},20223:(G,O,e)=>{"use strict";e.d(O,{d:()=>o});var t=e(52423),n=e(68404),u=e(46519),s=e(29516),i=e(25474),m=e(98259);const f=r=>(0,u.CQ)(r).format("L"),o=({value:r,minDate:d,maxDate:c,onChange:g,closeOnSelect:p,placeholder:y="Date",...h})=>{const[a,v]=n.useState(!1),C=(0,s.wW)(l);return n.createElement("div",{className:C.container},n.createElement(i.I,{type:"text",autoComplete:"off",placeholder:y,value:r&&f(r),onClick:()=>v(!0),onChange:E=>{E.target.value===""&&g("")},className:C.input,...h}),n.createElement(m.M,{isOpen:a,value:r&&typeof r!="string"?r:(0,u.CQ)().toDate(),minDate:d,maxDate:c,onChange:E=>{g(E),p&&v(!1)},onClose:()=>v(!1)}))},l=()=>({container:t.css`
      position: relative;
    `,input:t.css`
    /* hides the native Calendar picker icon given when using type=date */
    input[type='date']::-webkit-inner-spin-button,
    input[type='date']::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
    `})},2974:(G,O,e)=>{"use strict";e.d(O,{x:()=>S});var t=e(52423),n=e(99510),u=e(81699),s=e(6665),i=e(68404),m=e(41644),f=e(11979),o=e(47597),l=e(38849),r=e(46519),d=e(97635),c=e(90723),g=e(71210),p=e(25474),y=e(81697),h=e(90701),a=e(29516),v=e(34003),C=e(21836),E=e(43594),P=e(21053),x=e(85052);function M(L,w,A){return(0,r.v9)(L)?L.isValid():P.isMathString(L)?P.isValid(L):(0,x.J)(L,{roundUp:w,timeZone:A}).isValid()}const S=({date:L,maxDate:w,label:A,onChange:N})=>{const[W,I]=(0,i.useState)(!1),F=(0,i.useRef)(null),{overlayProps:V,underlayProps:b}=(0,s.Ir)({onClose:()=>I(!1),isDismissable:!0,isOpen:W},F),{dialogProps:X}=(0,n.R)({},F),k=(0,a.l4)(),{modalBackdrop:H}=(0,v.J)(k),Y=(0,o.Z)(`(min-width: ${k.breakpoints.values.lg}px)`),ee=(0,a.wW)(R),[ue,q]=(0,i.useState)(),[ge,De]=(0,i.useState)(),fe=(0,f.D)(ue,ge,{placement:"bottom-start"}),me=(0,i.useCallback)(ie=>{I(!1),N(ie)},[N]),ce=(0,i.useCallback)(ie=>{ie.preventDefault(),I(!0)},[I]);return i.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},i.createElement(D,{date:L,onChange:N,isFullscreen:Y,onOpen:ce,label:A,ref:q}),W?Y?i.createElement(d.h_,null,i.createElement(u.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:F,...V,...X},i.createElement(T,{date:L,onChange:me,isFullscreen:!0,onClose:()=>I(!1),maxDate:w,ref:De,style:fe.styles.popper})))):i.createElement(d.h_,null,i.createElement("div",{className:H,...b}),i.createElement(u.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:F,...V,...X},i.createElement("div",{className:ee.modal},i.createElement(T,{date:L,onChange:me,isFullscreen:!1,onClose:()=>I(!1)}))))):null)},D=i.forwardRef(({date:L,label:w,onChange:A,isFullscreen:N,onOpen:W},I)=>{const[F,V]=(0,i.useState)(()=>({value:L?(0,l.dq)(L):(0,l.dq)((0,r.CQ)()),invalid:!1}));(0,i.useEffect)(()=>{L&&V({invalid:!M((0,l.dq)(L)),value:(0,r.v9)(L)?(0,l.dq)(L):L})},[L]);const b=(0,i.useCallback)(H=>{const Y=!M(H.currentTarget.value);V({value:H.currentTarget.value,invalid:Y})},[]),X=(0,i.useCallback)(()=>{(0,r.v9)(F.value)&&A((0,r.CQ)(F.value))},[F.value,A]),k=i.createElement(c.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:W});return i.createElement(g._,{label:w,invalid:!!(F.value&&F.invalid),className:t.css`
          margin-bottom: 0;
        `},i.createElement(p.I,{onChange:b,addonAfter:k,value:F.value,onBlur:X,"data-testid":"date-time-input",placeholder:"Select date/time",ref:I}))});D.displayName="DateTimeInput";const T=i.forwardRef(({date:L,onClose:w,onChange:A,isFullscreen:N,maxDate:W,style:I},F)=>{const V=(0,a.wW)(E.mg),b=(0,a.wW)(R),[X,k]=(0,i.useState)(()=>L&&L.isValid()?L.toDate():new Date),H=(0,i.useCallback)(ee=>{Array.isArray(ee)||k(ue=>(ee.setHours(ue.getHours()),ee.setMinutes(ue.getMinutes()),ee.setSeconds(ue.getSeconds()),ee))},[]),Y=(0,i.useCallback)(ee=>{k(ee.toDate())},[]);return i.createElement("div",{className:(0,t.cx)(b.container,{[b.fullScreen]:N}),style:I,ref:F},i.createElement(m.ZP,{next2Label:null,prev2Label:null,value:X,nextLabel:i.createElement(y.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:i.createElement(y.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:H,locale:"en",className:V.body,tileClassName:V.title,maxDate:W}),i.createElement("div",{className:b.time},i.createElement(C.y,{showSeconds:!0,onChange:Y,value:(0,r.CQ)(X)})),i.createElement(h.Lh,null,i.createElement(c.zx,{type:"button",onClick:()=>A((0,r.CQ)(X))},"Apply"),i.createElement(c.zx,{variant:"secondary",type:"button",onClick:w},"Cancel")))});T.displayName="DateTimeCalendar";const R=L=>({container:t.css`
    padding: ${L.spacing(1)};
    border: 1px ${L.colors.border.weak} solid;
    border-radius: ${L.shape.borderRadius(1)};
    background-color: ${L.colors.background.primary};
    z-index: ${L.zIndex.modal};
  `,fullScreen:t.css`
    position: absolute;
  `,time:t.css`
    margin-bottom: ${L.spacing(2)};
  `,modal:t.css`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: ${L.zIndex.modal};
    max-width: 280px;
  `})},50330:(G,O,e)=>{"use strict";e.d(O,{x:()=>P});var t=e(52423),n=e(99510),u=e(81699),s=e(6665),i=e(68404),m=e(11979),f=e(29516),o=e(39451),l=e(90723),r=e(49938),d=e(74955),c=e(81697),g=e(25474),p=e(97635),y=e(48756),h=e(40056),a=e(69551),v=e(24892),C=e(13654);const E=v.r.filter(T=>(0,C.jD)(T.from));function P(T){const{timeRange:R,onChange:L}=T,[w,A]=(0,i.useState)(!1),N=(0,i.useCallback)(()=>A(!1),[]),W=(0,C.C_)(R),[I,F]=(0,i.useState)({value:W.from,validation:(0,C.x5)(W.from)}),[V,b]=(0,i.useState)({value:W.to,validation:(0,C.x5)(W.to)}),X=(0,i.useRef)(null),{overlayProps:k,underlayProps:H}=(0,s.Ir)({onClose:()=>A(!1),isDismissable:!0,isOpen:w},X),{dialogProps:Y}=(0,n.R)({},X),[ee,ue]=(0,i.useState)(null),[q,ge]=(0,i.useState)(null),De=(0,m.D)(ee,q,{placement:"auto-start"}),fe=(0,f.wW)(S(I.validation.errorMessage,V.validation.errorMessage)),me=re=>{const Ee=(0,C.aw)(re);Ee&&(N(),F({...I,value:re.from}),b({...V,value:re.to}),L(Ee))},ce=(0,i.useCallback)(re=>{re.stopPropagation(),re.preventDefault(),A(!w)},[w]),ie=re=>{if(re.preventDefault(),!V.validation.isValid||!I.validation.isValid)return;const Ee=(0,C.aw)({from:I.value,to:V.value,display:""});Ee&&(L(Ee),A(!1))};return i.createElement("div",{className:fe.container,ref:ue},i.createElement("button",{className:fe.pickerInput,type:"button",onClick:ce},i.createElement("span",{className:fe.clockIcon},i.createElement(c.J,{name:"clock-nine"})),i.createElement("span",null,W.from," to ",W.to),i.createElement("span",{className:fe.caretIcon},i.createElement(c.J,{name:w?"angle-up":"angle-down",size:"lg"}))),w&&i.createElement(p.h_,null,i.createElement("div",{role:"presentation",className:fe.backdrop,...H}),i.createElement(u.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:X,...k,...Y},i.createElement("div",{className:fe.content,ref:ge,style:De.styles.popper,...De.attributes},i.createElement("div",{className:fe.body},i.createElement(r.Z,{className:fe.leftSide,hideHorizontalTrack:!0},i.createElement(a.V,{title:(0,o.t)("time-picker.time-range.example-title","Example time ranges"),options:E,onChange:me,value:W})),i.createElement("div",{className:fe.rightSide},i.createElement("div",{className:fe.title},i.createElement(h.r,null,i.createElement(y.u,{content:i.createElement(x,null),placement:"bottom",theme:"info"},i.createElement("div",null,i.createElement(o.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",i.createElement(c.J,{name:"info-circle"})))))),i.createElement(d.g,{label:"From",invalid:!I.validation.isValid,error:I.validation.errorMessage},i.createElement(g.I,{onClick:re=>re.stopPropagation(),onBlur:()=>F({...I,validation:(0,C.x5)(I.value)}),onChange:re=>F({...I,value:re.currentTarget.value}),value:I.value})),i.createElement(d.g,{label:"To",invalid:!V.validation.isValid,error:V.validation.errorMessage},i.createElement(g.I,{onClick:re=>re.stopPropagation(),onBlur:()=>b({...V,validation:(0,C.x5)(V.value)}),onChange:re=>b({...V,value:re.currentTarget.value}),value:V.value})),i.createElement(l.zx,{"aria-label":"TimePicker submit button",onClick:ie},"Apply time range"))))))))}const x=()=>{const T=(0,f.wW)(M);return i.createElement(i.Fragment,null,i.createElement("div",{className:T.supported},"Supported formats: ",i.createElement("code",{className:T.tooltip},"now-[digit]s/m/h/d/w")),i.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),i.createElement("code",{className:T.tooltip},"From: now-10m To: now"),i.createElement("div",{className:T.link},"For more information see"," ",i.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",i.createElement(c.J,{name:"external-link-alt"})),"."))},M=T=>({supported:t.css`
    margin-bottom: ${T.spacing(1)};
  `,tooltip:t.css`
    margin: 0;
  `,link:t.css`
    margin-top: ${T.spacing(1)};
  `}),S=(T,R)=>L=>{const w=(0,g.H)({theme:L,invalid:!1}),N=250+D(L,T)+D(L,R);return{backdrop:t.css`
      position: fixed;
      z-index: ${L.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    `,container:t.css`
      display: flex;
      position: relative;
    `,pickerInput:(0,t.cx)(w.input,w.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        padding-left: 0;
        line-height: ${L.spacing.gridSize*L.components.height.md-2}px;
      `),caretIcon:(0,t.cx)(w.suffix,t.css`
        position: relative;
        margin-left: ${L.spacing(.5)};
      `),clockIcon:(0,t.cx)(w.prefix,t.css`
        position: relative;
        margin-right: ${L.spacing(.5)};
      `),content:t.css`
      background: ${L.colors.background.primary};
      box-shadow: ${L.shadows.z3};
      position: absolute;
      z-index: ${L.zIndex.modal};
      width: 500px;
      top: 100%;
      border-radius: 2px;
      border: 1px solid ${L.colors.border.weak};
      left: 0;
      white-space: normal;
    `,body:t.css`
      display: flex;
      height: ${N}px;
    `,description:t.css`
      color: ${L.colors.text.secondary};
      font-size: ${L.typography.size.sm};
    `,leftSide:t.css`
      width: 50% !important;
      border-right: 1px solid ${L.colors.border.medium};
    `,rightSide:t.css`
      width: 50%;
      padding: ${L.spacing(1)};
    `,title:t.css`
      margin-bottom: ${L.spacing(1)};
    `}};function D(T,R){return R?R.length>34?T.spacing.gridSize*6.5:T.spacing.gridSize*4:0}},13654:(G,O,e)=>{"use strict";e.d(O,{C_:()=>u,aw:()=>n,jD:()=>i,x5:()=>s});const t=/^now$|^now\-(\d{1,10})([wdhms])$/,n=l=>({from:m(l.from),to:m(l.to)}),u=l=>{const r=o(l.from),d=o(l.to);return{from:r,to:d,display:`${r} to ${d}`}},s=(l,r=Date.now())=>i(l)?m(l)>Math.ceil(r/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},i=l=>t.test(l),m=l=>{const r=t.exec(l);if(!r||r.length!==3)return 0;const[,d,c]=r,g=parseInt(d,10);return isNaN(g)?0:g*f[c]},f={w:604800,d:86400,h:3600,m:60,s:1},o=l=>l<=0?"now":l>=f.w&&l%f.w===0?`now-${l/f.w}w`:l>=f.d&&l%f.d===0?`now-${l/f.d}d`:l>=f.h&&l%f.h===0?`now-${l/f.h}h`:l>=f.m&&l%f.m===0?`now-${l/f.m}m`:`now-${l}s`},21836:(G,O,e)=>{"use strict";e.d(O,{y:()=>l});var t=e(52423),n=e(63960),u=e(68404),s=e(46519),i=e(29516),m=e(81697),f=e(19253),o=e(51821);const l=({minuteStep:c=1,showHour:g=!0,showSeconds:p=!1,onChange:y,value:h,size:a="auto",disabled:v})=>{const C=(0,i.wW)(d);return u.createElement(n.Z,{className:(0,t.cx)((0,o.ht)()[a],C.input),popupClassName:C.picker,defaultValue:(0,s.C_)(),onChange:E=>y((0,s.CQ)(E)),allowEmpty:!1,showSecond:p,value:(0,s.C_)(h),showHour:g,minuteStep:c,inputIcon:u.createElement(r,{wrapperStyle:C.caretWrapper}),disabled:v})},r=({wrapperStyle:c=""})=>u.createElement("div",{className:c},u.createElement(m.J,{name:"angle-down"})),d=c=>{const g=c.components.input.background,p=c.v1.palette.black,y=c.colors.background.secondary,h=c.shape.borderRadius(1),a=c.components.input.borderColor;return{caretWrapper:t.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${c.colors.text.secondary};
    `,picker:t.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${g};
        border-color: ${a};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${c.v1.palette.orange};
            border-radius: ${h};
          }

          &:hover {
            background: ${y};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${p};
        background-color: ${g};
        border-color: ${a};
        border-radius: ${h};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${g};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:t.css`
      .rc-time-picker-input {
        background-color: ${g};
        border-radius: ${h};
        border-color: ${a};
        height: ${c.spacing(4)};

        &:focus {
          ${(0,f.focusCss)(c)}
        }

        &:disabled {
          background-color: ${c.colors.action.disabledBackground};
          color: ${c.colors.action.disabledText};
          border: 1px solid ${c.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }
    `}}},77592:(G,O,e)=>{"use strict";e.d(O,{K:()=>a});var t=e(52423),n=e(68404),u=e(21053),s=e(46519),i=e(69311),m=e(68183),f=e(82385),o=e(29516),l=e(57319),r=e(81697),d=e(25474),c=e(85320),g=e(38569),p=e(24892);const y=C=>u.isValid(C.from)&&u.isValid(C.to),h=()=>{},a=({value:C,onChange:E,onChangeTimeZone:P=h,clearable:x,hideTimeZone:M=!0,timeZone:S="browser",placeholder:D="Select time range",isReversed:T=!0,hideQuickRanges:R=!1,disabled:L=!1})=>{const[w,A]=(0,n.useState)(!1),N=(0,o.l4)(),W=v(N,L),I=X=>{X.stopPropagation(),X.preventDefault(),!L&&A(!w)},F=()=>{A(!1)},V=X=>{F(),E(X)},b=X=>{X.stopPropagation();const k=(0,s.CQ)(null),H=(0,s.CQ)(null);E({from:k,to:H,raw:{from:k,to:H}})};return n.createElement("div",{className:W.container},n.createElement("button",{type:"button",className:W.pickerInput,"aria-label":m.wl.components.TimePicker.openButton,onClick:I},y(C)?n.createElement(c.sU,{value:C,timeZone:S}):n.createElement("span",{className:W.placeholder},D),!L&&n.createElement("span",{className:W.caretIcon},y(C)&&x&&n.createElement(r.J,{className:W.clearIcon,name:"times",size:"lg",onClick:b}),n.createElement(r.J,{name:w?"angle-up":"angle-down",size:"lg"}))),w&&n.createElement(l.L,{includeButtonPress:!1,onClick:F},n.createElement(g.x,{timeZone:S,value:y(C)?C:(0,i.JK)(),onChange:V,quickOptions:p.r,onChangeTimeZone:P,className:W.content,hideTimeZone:M,isReversed:T,hideQuickRanges:R})))},v=(0,f.B)((C,E=!1)=>{const P=(0,d.H)({theme:C,invalid:!1});return{container:t.css`
      display: flex;
      position: relative;
    `,content:t.css`
      margin-left: 0;
    `,pickerInput:(0,t.cx)(P.input,E&&P.inputDisabled,P.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        line-height: ${C.spacing.gridSize*4-2}px;
      `),caretIcon:(0,t.cx)(P.suffix,t.css`
        position: relative;
        top: -1px;
        margin-left: ${C.spacing(.5)};
      `),clearIcon:t.css`
      margin-right: ${C.spacing(.5)};
      &:hover {
        color: ${C.colors.text.maxContrast};
      }
    `,placeholder:t.css`
      color: ${C.colors.text.disabled};
      opacity: 1;
    `}})},85320:(G,O,e)=>{"use strict";e.d(O,{IF:()=>x,Xc:()=>E,sU:()=>M});var t=e(52423),n=e(99510),u=e(81699),s=e(6665),i=e(68404),m=e(46519),f=e(38849),o=e(38306),l=e(33180),r=e(21053),d=e(68183),c=e(29516),g=e(39451),p=e(75952),y=e(34003),h=e(26408),a=e(48756),v=e(38569),C=e(24892);function E(R){const[L,w]=(0,i.useState)(!1),{value:A,onMoveBackward:N,onMoveForward:W,onZoom:I,timeZone:F,fiscalYearStartMonth:V,timeSyncButton:b,isSynced:X,history:k,onChangeTimeZone:H,onChangeFiscalYearStartMonth:Y,hideQuickRanges:ee,widthOverride:ue,isOnCanvas:q}=R,ge=Le=>{R.onChange(Le),w(!1)},De=Le=>{Le.stopPropagation(),Le.preventDefault(),w(!L)},fe=()=>{w(!1)},me=(0,i.createRef)(),{overlayProps:ce,underlayProps:ie}=(0,s.Ir)({onClose:fe,isDismissable:!0,isOpen:L},me),{dialogProps:re}=(0,n.R)({},me),Ee=(0,c.l4)(),J=(0,c.wW)(D),{modalBackdrop:te}=(0,y.J)(Ee),ne=(0,m.v9)(A.raw.from)||(0,m.v9)(A.raw.to),j=X?"active":q?"canvas":"default",be=S(A,F);return i.createElement(p.h,{className:J.container},ne&&i.createElement(h.h,{"aria-label":(0,g.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:j,onClick:N,icon:"angle-left",narrow:!0}),i.createElement(a.u,{content:i.createElement(x,{timeRange:A,timeZone:F}),placement:"bottom",interactive:!0},i.createElement(h.h,{"data-testid":d.wl.components.TimePicker.openButton,"aria-label":(0,g.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:be}),"aria-controls":"TimePickerContent",onClick:De,icon:"clock-nine",isOpen:L,variant:j},i.createElement(M,{...R}))),L&&i.createElement("div",null,i.createElement("div",{role:"presentation",className:(0,t.cx)(te,J.backdrop),...ie}),i.createElement(u.MT,{contain:!0,autoFocus:!0},i.createElement("section",{className:J.content,ref:me,...ce,...re},i.createElement(v.x,{timeZone:F,fiscalYearStartMonth:V,value:A,onChange:ge,quickOptions:C.r,history:k,showHistory:!0,widthOverride:ue,onChangeTimeZone:H,onChangeFiscalYearStartMonth:Y,hideQuickRanges:ee})))),b,ne&&i.createElement(h.h,{"aria-label":(0,g.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:W,icon:"angle-right",narrow:!0,variant:j}),i.createElement(a.u,{content:P,placement:"bottom"},i.createElement(h.h,{"aria-label":(0,g.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:I,icon:"search-minus",variant:j})))}E.displayName="TimeRangePicker";const P=()=>i.createElement(i.Fragment,null,i.createElement(g.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",i.createElement("br",null)," CTRL+Z")),x=({timeRange:R,timeZone:L})=>{const w=(0,c.wW)(T);return i.createElement(i.Fragment,null,(0,f.dq)(R.from,{timeZone:L}),i.createElement("div",{className:"text-center"},i.createElement(g.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,f.dq)(R.to,{timeZone:L}),i.createElement("div",{className:"text-center"},i.createElement("span",{className:w.utc},(0,o.Vs)(L))))},M=(0,i.memo)(({hideText:R,value:L,timeZone:w})=>{const A=(0,c.wW)(T);return R?null:i.createElement("span",{className:A.container},i.createElement("span",null,S(L,w)),i.createElement("span",{className:A.utc},l.describeTimeRangeAbbreviation(L,w)))});M.displayName="TimePickerButtonLabel";const S=(R,L)=>{const w={to:r.isMathString(R.raw.to)?R.raw.to:R.to,from:r.isMathString(R.raw.from)?R.raw.from:R.from};return l.describeTimeRange(w,L)},D=R=>({container:t.css`
      position: relative;
      display: flex;
      vertical-align: middle;
    `,backdrop:(0,t.css)({display:"none",[R.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:R.zIndex.dropdown,[R.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:R.zIndex.modal}})}),T=R=>({container:t.css`
      display: flex;
      align-items: center;
      white-space: nowrap;
    `,utc:t.css`
      color: ${R.v1.palette.orange};
      font-size: ${R.typography.size.sm};
      padding-left: 6px;
      line-height: 28px;
      vertical-align: bottom;
      font-weight: ${R.typography.fontWeightMedium};
    `})},43594:(G,O,e)=>{"use strict";e.d(O,{mg:()=>c,uT:()=>o});var t=e(52423),n=e(68404),u=e(41644),s=e(46519),i=e(85052),m=e(29516),f=e(81697);function o({onChange:g,from:p,to:y,timeZone:h}){const a=l(p,y),v=r(g,h),C=(0,m.wW)(c);return n.createElement(u.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:C.body,tileClassName:C.title,value:a,nextLabel:n.createElement(f.J,{name:"angle-right"}),prevLabel:n.createElement(f.J,{name:"angle-left"}),onChange:v,locale:"en"})}o.displayName="Body";function l(g,p,y=new Date){const h=g.toDate(),a=p.toDate(),v=(0,s.CQ)(h).isValid()?h:y,C=(0,s.CQ)(a).isValid()?a:y;return v>C?[C,v]:[v,C]}function r(g,p){return(0,n.useCallback)(y=>{if(!Array.isArray(y))return console.error("onCalendarChange: should be run in selectRange={true}");const h=(0,i.J)(d(y[0]),{timeZone:p}),a=(0,i.J)(d(y[1]),{timeZone:p});g(h,a)},[g,p])}function d(g){return[g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds()]}const c=g=>{const p=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:t.css`
      color: ${g.colors.text.primary};
      background-color: ${g.colors.background.primary};
      font-size: ${g.typography.size.md};
      border: 1px solid transparent;

      &:hover {
        position: relative;
      }
    `,body:t.css`
      z-index: ${g.zIndex.modal};
      background-color: ${g.colors.background.primary};
      width: 268px;

      .react-calendar__navigation {
        display: flex;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation__arrow,
      .react-calendar__navigation {
        padding-top: 4px;
        background-color: inherit;
        color: ${g.colors.text.primary};
        border: 0;
        font-weight: ${g.typography.fontWeightMedium};
      }

      .react-calendar__month-view__weekdays {
        background-color: inherit;
        text-align: center;
        color: ${g.colors.primary.text};

        abbr {
          border: 0;
          text-decoration: none;
          cursor: default;
          display: block;
          padding: 4px 0 4px 0;
        }
      }

      .react-calendar__month-view__days {
        background-color: inherit;
      }

      .react-calendar__tile,
      .react-calendar__tile--now {
        margin-bottom: 4px;
        background-color: inherit;
        height: 26px;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation > button:focus,
      .time-picker-calendar-tile:focus {
        outline: 0;
      }

      ${p},
      .react-calendar__tile--active,
      .react-calendar__tile--active:hover {
        color: ${g.colors.primary.contrastText};
        font-weight: ${g.typography.fontWeightMedium};
        background: ${g.colors.primary.main};
        box-shadow: none;
        border: 0px;
      }

      .react-calendar__tile--rangeEnd,
      .react-calendar__tile--rangeStart {
        padding: 0;
        border: 0px;
        color: ${g.colors.primary.contrastText};
        font-weight: ${g.typography.fontWeightMedium};
        background: ${g.colors.primary.main};

        abbr {
          background-color: ${g.colors.primary.main};
          border-radius: 100px;
          display: block;
          padding-top: 2px;
          height: 26px;
        }
      }

      ${p},
      .react-calendar__tile--rangeStart {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      ${p},
      .react-calendar__tile--rangeEnd {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    `}}},38569:(G,O,e)=>{"use strict";e.d(O,{x:()=>j});var t=e(52423),n=e(68404),u=e(46519),s=e(33180),i=e(68183),m=e(79230),f=e(29516),o=e(82385),l=e(19253),r=e(39451),d=e(49938),c=e(81697),g=e(82897),p=e(38306),y=e(318),h=e(74955),a=e(46739),v=e(90723),C=e(68172),E=e(57470),P=e(87211),x=e(27044),M=e(24892);const S=Ke=>{const{timeZone:qe,fiscalYearStartMonth:Xe,timestamp:at=Date.now(),onChangeTimeZone:Ze,onChangeFiscalYearStartMonth:lt}=Ke,[nt,_e]=(0,n.useState)(!1),[ut,rt]=(0,n.useState)("tz"),je=(0,n.useCallback)(Re=>{Re&&Re.stopPropagation(),_e(!nt)},[nt,_e]),dt=(0,f.l4)(),oe=D(dt);if(!(0,g.isString)(qe))return null;const Se=(0,p.Pr)(qe,at);return Se?n.createElement("div",null,n.createElement("section",{"aria-label":(0,r.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:oe.container},n.createElement("div",{className:oe.timeZoneContainer},n.createElement("div",{className:oe.timeZone},n.createElement(x.d,{title:Se.name}),n.createElement("div",{className:oe.spacer}),n.createElement(E.K,{info:Se})),n.createElement(P.v,{timeZone:qe,timestamp:at})),n.createElement("div",{className:oe.spacer}),n.createElement(v.zx,{variant:"secondary",onClick:je,size:"sm"},n.createElement(r.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),nt?n.createElement("div",{className:oe.editContainer},n.createElement("div",null,n.createElement(y.S,{value:ut,options:[{label:(0,r.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,r.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:rt})),ut==="tz"?n.createElement("section",{"data-testid":i.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(oe.timeZoneContainer,oe.timeSettingContainer)},n.createElement(C.O,{includeInternal:!0,onChange:Re=>{je(),(0,g.isString)(Re)&&Ze(Re)},onBlur:je})):n.createElement("section",{"aria-label":i.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(oe.timeZoneContainer,oe.timeSettingContainer)},n.createElement(h.g,{className:oe.fiscalYearField,label:(0,r.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(a.Ph,{value:Xe,menuShouldPortal:!1,options:M.E,onChange:Re=>{lt&&lt(Re.value??0)}})))):null):null},D=(0,o.B)(Ke=>({container:t.css`
      border-top: 1px solid ${Ke.colors.border.weak};
      padding: 11px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,editContainer:t.css`
      border-top: 1px solid ${Ke.colors.border.weak};
      padding: 11px;
      justify-content: space-between;
      align-items: center;
      padding: 7px;
    `,spacer:t.css`
      margin-left: 7px;
    `,timeSettingContainer:t.css`
      padding-top: ${Ke.spacing(1)};
    `,fiscalYearField:t.css`
      margin-bottom: 0px;
    `,timeZoneContainer:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      flex-grow: 1;
    `,timeZone:t.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
      flex-grow: 1;
    `}));var T=e(40056),R=e(85052),L=e(38849),w=e(21053),A=e(48756),N=e(25474),W=e(99510),I=e(81699),F=e(6665),V=e(34003),b=e(43594);function X({onClose:Ke,onApply:qe}){const Xe=(0,f.wW)(k);return n.createElement("div",{className:Xe.container},n.createElement(v.zx,{className:Xe.apply,onClick:qe},n.createElement(r.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")),n.createElement(v.zx,{variant:"secondary",onClick:Ke},n.createElement(r.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")))}X.displayName="Footer";const k=Ke=>({container:t.css`
      background-color: ${Ke.colors.background.primary};
      display: flex;
      justify-content: center;
      padding: 10px;
      align-items: stretch;
    `,apply:t.css`
      margin-right: 4px;
      width: 100%;
      justify-content: center;
    `});function H({onClose:Ke}){const qe=(0,f.wW)(Y);return n.createElement("div",{className:qe.container},n.createElement(T.r,null,n.createElement(r.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(v.zx,{"aria-label":i.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:Ke}))}H.displayName="Header";const Y=Ke=>({container:t.css`
      background-color: ${Ke.colors.background.primary};
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px;
    `}),ee=(Ke,qe=!1)=>({container:t.css`
      top: 0px;
      position: absolute;
      ${qe?"left":"right"}: 544px;
      box-shadow: ${Ke.shadows.z3};
      background-color: ${Ke.colors.background.primary};
      z-index: -1;
      border: 1px solid ${Ke.colors.border.weak};
      border-radius: 2px 0 0 2px;

      &:after {
        display: block;
        background-color: ${Ke.colors.background.primary};
        width: 19px;
        height: 100%;
        content: ${qe?"":" "};
        position: absolute;
        top: 0;
        right: -19px;
        border-left: 1px solid ${Ke.colors.border.weak};
      }
    `,modal:t.css`
      box-shadow: ${Ke.shadows.z3};
      left: 50%;
      position: fixed;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: ${Ke.zIndex.modal};
    `,content:t.css`
      margin: 0 auto;
      width: 268px;
    `});function ue(Ke){const qe=(0,f.l4)(),{modalBackdrop:Xe}=(0,V.J)(qe),at=ee(qe,Ke.isReversed),{isOpen:Ze,isFullscreen:lt,onClose:nt}=Ke,_e=n.createRef(),{dialogProps:ut}=(0,W.R)({"aria-label":i.wl.components.TimePicker.calendar.label},_e),{overlayProps:rt}=(0,F.Ir)({isDismissable:!0,isOpen:Ze,onClose:nt},_e);return Ze?lt?n.createElement(I.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("section",{className:at.container,ref:_e,...rt,...ut},n.createElement(H,{...Ke}),n.createElement(b.uT,{...Ke}))):n.createElement(F.Xj,null,n.createElement("div",{className:Xe}),n.createElement(I.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("section",{className:at.modal,ref:_e,...rt,...ut},n.createElement("div",{className:at.content,"aria-label":i.wl.components.TimePicker.calendar.label},n.createElement(H,{...Ke}),n.createElement(b.uT,{...Ke}),n.createElement(X,{...Ke}))))):null}const q=(0,n.memo)(ue);ue.displayName="TimePickerCalendar";const ge={default:()=>(0,r.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,r.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},De=Ke=>{const{value:qe,isFullscreen:Xe=!1,timeZone:at,onApply:Ze,isReversed:lt,fiscalYearStartMonth:nt}=Ke,[_e,ut]=me(qe.raw.from,qe.raw.to,at),rt=(0,f.wW)(re),[je,dt]=(0,n.useState)(_e),[oe,Se]=(0,n.useState)(ut),[Re,ze]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const[Ae,we]=me(qe.raw.from,qe.raw.to,at);dt(Ae),Se(we)},[qe.raw.from,qe.raw.to,at]);const ve=(0,n.useCallback)(Ae=>{Ae.preventDefault(),ze(!0)},[ze]),Te=(0,n.useCallback)(()=>{if(oe.invalid||je.invalid)return;const Ae={from:je.value,to:oe.value},we=s.convertRawToRange(Ae,at,nt);Ze(we)},[je.invalid,je.value,Ze,at,oe.invalid,oe.value,nt]),he=(0,n.useCallback)((Ae,we)=>{const[ke,st]=me(Ae,we,at);dt(ke),Se(st)},[at]),pe=Ae=>{Ae.key==="Enter"&&Te()},ye=s.convertRawToRange({from:"now/fy",to:"now/fy"},at,nt),Oe=(0,r.t)("time-picker.range-content.fiscal-year","Fiscal year"),Ne=n.createElement("div",{className:rt.tooltip},s.isFiscal(qe)?n.createElement(A.u,{content:`${Oe}: ${ye.from.format("MMM-DD")} - ${ye.to.format("MMM-DD")}`},n.createElement(c.J,{name:"info-circle"})):null),Me=n.createElement(v.zx,{"aria-label":i.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:ve});return n.createElement("div",null,n.createElement("div",{className:rt.fieldContainer},n.createElement(h.g,{label:(0,r.t)("time-picker.range-content.from-input","From"),invalid:je.invalid,error:je.errorMessage},n.createElement(N.I,{onClick:Ae=>Ae.stopPropagation(),onChange:Ae=>he(Ae.currentTarget.value,oe.value),addonAfter:Me,onKeyDown:pe,"aria-label":i.wl.components.TimePicker.fromField,value:je.value})),Ne),n.createElement("div",{className:rt.fieldContainer},n.createElement(h.g,{label:(0,r.t)("time-picker.range-content.to-input","To"),invalid:oe.invalid,error:oe.errorMessage},n.createElement(N.I,{onClick:Ae=>Ae.stopPropagation(),onChange:Ae=>he(je.value,Ae.currentTarget.value),addonAfter:Me,onKeyDown:pe,"aria-label":i.wl.components.TimePicker.toField,value:oe.value})),Ne),n.createElement(v.zx,{"data-testid":i.wl.components.TimePicker.applyTimeRange,type:"button",onClick:Te},n.createElement(r.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),n.createElement(q,{isFullscreen:Xe,isOpen:Re,from:(0,R.J)(je.value),to:(0,R.J)(oe.value),onApply:Te,onClose:()=>ze(!1),onChange:he,timeZone:at,isReversed:lt}))};function fe(Ke,qe,Xe){const at={from:Ke,to:qe},Ze=s.convertRawToRange(at,Xe);return!(Ze.from.isSame(Ze.to)||Ze.from.isBefore(Ze.to))}function me(Ke,qe,Xe){const at=ce(Ke,Xe),Ze=ce(qe,Xe),lt=!ie(at,!1,Xe),nt=!ie(Ze,!0,Xe),_e=fe(at,Ze,Xe)&&!nt;return[{value:at,invalid:lt||_e,errorMessage:_e&&!lt?ge.range():ge.default()},{value:Ze,invalid:nt,errorMessage:ge.default()}]}function ce(Ke,qe){return(0,u.v9)(Ke)?(0,L.dq)(Ke,{timeZone:qe}):Ke}function ie(Ke,qe,Xe){return(0,u.v9)(Ke)?Ke.isValid():w.isMathString(Ke)?w.isValid(Ke):(0,R.J)(Ke,{roundUp:qe,timeZone:Xe}).isValid()}function re(Ke){return{fieldContainer:t.css`
      display: flex;
    `,tooltip:t.css`
      padding-left: ${Ke.spacing(1)};
      padding-top: ${Ke.spacing(3)};
    `}}var Ee=e(69551);const J=(Ke,qe)=>s.convertRawToRange({from:Ke.from,to:Ke.to},qe),te=(Ke,qe)=>{const Xe=(0,L.dq)(Ke.from,{timeZone:qe}),at=(0,L.dq)(Ke.to,{timeZone:qe});return{from:Xe,to:at,display:`${Xe} to ${at}`}},ne=Ke=>{const{quickOptions:qe=[],isReversed:Xe,isFullscreen:at,hideQuickRanges:Ze,timeZone:lt,fiscalYearStartMonth:nt,value:_e,onChange:ut,history:rt,showHistory:je,className:dt,hideTimeZone:oe,onChangeTimeZone:Se,onChangeFiscalYearStartMonth:Re}=Ke,ze=!rt?.length,ve=at&&je||!at&&(je&&!ze||!Ze),Te=(0,f.l4)(),he=Be(Te,Xe,Ze,ve,at),pe=Ye(rt,lt),ye=de(_e.raw,qe),[Oe,Ne]=(0,n.useState)(""),Me=qe.filter(we=>we.display.toLowerCase().includes(Oe.toLowerCase())),Ae=we=>ut(J(we));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(he.container,dt)},n.createElement("div",{className:he.body},(!at||!Ze)&&n.createElement("div",{className:he.rightSide},n.createElement("div",{className:he.timeRangeFilter},n.createElement(m.H,{width:0,autoFocus:!0,value:Oe,onChange:Ne,placeholder:(0,r.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(d.$,null,!at&&n.createElement(be,{...Ke,historyOptions:pe}),!Ze&&n.createElement(Ee.V,{options:Me,onChange:Ae,value:ye}))),at&&n.createElement("div",{className:he.leftSide},n.createElement(Le,{...Ke,historyOptions:pe}))),!oe&&at&&n.createElement(S,{timeZone:lt,fiscalYearStartMonth:nt,onChangeTimeZone:Se,onChangeFiscalYearStartMonth:Re}))},j=Ke=>{const{widthOverride:qe}=Ke,Xe=(0,f.l4)(),at=(qe||window.innerWidth)>=Xe.breakpoints.values.lg;return n.createElement(ne,{...Ke,isFullscreen:at})},be=Ke=>{const{value:qe,hideQuickRanges:Xe,onChange:at,timeZone:Ze,historyOptions:lt=[],showHistory:nt}=Ke,_e=(0,f.l4)(),ut=Ve(_e),rt=(0,u.v9)(qe.raw.from)||(0,u.v9)(qe.raw.to),[je,dt]=(0,n.useState)(!rt),oe=Xe?!1:je,Se=Re=>at(J(Re,Ze));return n.createElement("fieldset",null,n.createElement("div",{className:ut.header},n.createElement("button",{type:"button",className:ut.expandButton,onClick:()=>{Xe||dt(!oe)},"data-testid":i.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!oe,"aria-controls":"expanded-timerange"},n.createElement(T.r,null,n.createElement(r.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!Xe&&n.createElement(c.J,{name:oe?"angle-down":"angle-up"}))),!oe&&n.createElement("div",{className:ut.body,id:"expanded-timerange"},n.createElement("div",{className:ut.form},n.createElement(De,{value:qe,onApply:at,timeZone:Ze,isFullscreen:!1})),nt&&n.createElement(Ee.V,{title:(0,r.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:lt,onChange:Se,placeholderEmpty:null})))},Le=Ke=>{const{onChange:qe,value:Xe,timeZone:at,fiscalYearStartMonth:Ze,isReversed:lt,historyOptions:nt}=Ke,_e=(0,f.l4)(),ut=$e(_e,Ke.hideQuickRanges),rt=je=>qe(J(je,at));return n.createElement(n.Fragment,null,n.createElement("div",{className:ut.container},n.createElement("div",{className:ut.title,"data-testid":i.wl.components.TimePicker.absoluteTimeRangeTitle},n.createElement(T.r,null,n.createElement(r.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(De,{value:Xe,timeZone:at,fiscalYearStartMonth:Ze,onApply:qe,isFullscreen:!0,isReversed:lt})),Ke.showHistory&&n.createElement("div",{className:ut.recent},n.createElement(Ee.V,{title:(0,r.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:nt||[],onChange:rt,placeholderEmpty:n.createElement(Qe,null)})))},Qe=(0,n.memo)(()=>{const Ke=(0,f.l4)(),qe=We(Ke);return n.createElement("div",{className:qe.container},n.createElement(r.c,{i18nKey:"time-picker.content.empty-recent-list"},n.createElement("div",null,n.createElement("span",null,"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.")),n.createElement("div",null,n.createElement("a",{className:qe.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function Ye(Ke,qe){return!Array.isArray(Ke)||Ke.length===0?[]:Ke.map(Xe=>te(Xe,qe))}Qe.displayName="EmptyRecentList";const de=(Ke,qe)=>(0,n.useMemo)(()=>{if(s.isRelativeTimeRange(Ke))return qe.find(Xe=>Xe.from===Ke.from&&Xe.to===Ke.to)},[Ke,qe]),Be=(0,o.B)((Ke,qe,Xe,at,Ze)=>({container:t.css`
      background: ${Ke.colors.background.primary};
      box-shadow: ${Ke.shadows.z3};
      width: ${Ze?"546px":"262px"};
      border-radius: 2px;
      border: 1px solid ${Ke.colors.border.weak};
      ${qe?"left":"right"}: 0;
    `,body:t.css`
      display: flex;
      flex-direction: row-reverse;
      height: ${at?"381px":"217px"};
    `,leftSide:t.css`
      display: flex;
      flex-direction: column;
      border-right: ${qe?"none":`1px solid ${Ke.colors.border.weak}`};
      width: ${Xe?"100%":"60%"};
      overflow: hidden;
      order: ${qe?1:0};
    `,rightSide:t.css`
      width: ${Ze?"40%":"100%"}; !important;
      border-right: ${qe?`1px solid ${Ke.colors.border.weak}`:"none"};
      display: flex;
      flex-direction: column;
    `,timeRangeFilter:t.css`
      padding: ${Ke.spacing(1)};
    `,spacing:t.css`
      margin-top: 16px;
    `})),Ve=(0,o.B)(Ke=>({header:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid ${Ke.colors.border.weak};
      padding: 7px 9px 7px 9px;
    `,expandButton:t.css`
      background-color: transparent;
      border: none;
      display: flex;
      width: 100%;

      &:focus-visible {
        ${(0,l.getFocusStyles)(Ke)}
      }
    `,body:t.css`
      border-bottom: 1px solid ${Ke.colors.border.weak};
    `,form:t.css`
      padding: 7px 9px 7px 9px;
    `})),$e=(0,o.B)((Ke,qe)=>({container:t.css`
      padding-top: 9px;
      padding-left: 11px;
      padding-right: ${qe?"11px":"20%"};
    `,title:t.css`
      margin-bottom: 11px;
    `,recent:t.css`
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-top: ${Ke.spacing(1)};
    `})),We=(0,o.B)(Ke=>({container:t.css`
      padding: 12px;
      margin: 12px;

      a,
      span {
        font-size: 13px;
      }\
    `,link:t.css`
      color: ${Ke.colors.text.link};
    `}))},40056:(G,O,e)=>{"use strict";e.d(O,{r:()=>i});var t=e(52423),n=e(68404),u=e(29516);const s=m=>({text:t.css`
      font-size: ${m.typography.size.md};
      font-weight: ${m.typography.fontWeightMedium};
      color: ${m.colors.text.primary};
      margin: 0;
      display: flex;
    `}),i=(0,n.memo)(({children:m})=>{const f=(0,u.wW)(s);return n.createElement("h3",{className:f.text},m)});i.displayName="TimePickerTitle"},69551:(G,O,e)=>{"use strict";e.d(O,{V:()=>g});var t=e(52423),n=e(68404),u=e(82385),s=e(39451),i=e(40056),m=e(44288),f=e(29516),o=e(19253);const l=a=>({container:t.css`
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: space-between;
    `,selected:t.css`
      background: ${a.colors.action.selected};
      font-weight: ${a.typography.fontWeightMedium};
    `,radio:t.css`
      opacity: 0;
      width: 0 !important;

      &:focus-visible + label {
        ${(0,o.getFocusStyles)(a)};
      }
    `,label:t.css`
      cursor: pointer;
      flex: 1;
      padding: 7px 9px 7px 9px;

      &:hover {
        background: ${a.colors.action.hover};
        cursor: pointer;
      }
    `}),r=(0,n.memo)(({value:a,onSelect:v,selected:C=!1,name:E})=>{const P=(0,f.wW)(l),x=(0,m.Z)();return n.createElement("li",{className:(0,t.cx)(P.container,C&&P.selected)},n.createElement("input",{className:P.radio,checked:C,name:E,type:"checkbox",id:x,onChange:()=>v(a)}),n.createElement("label",{className:P.label,htmlFor:x},a.display))});r.displayName="TimeRangeOption";const d=(0,u.B)(()=>({title:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px 5px 9px;
    `})),c=(0,u.B)(()=>({grow:t.css`
      flex-grow: 1;
      align-items: flex-start;
    `})),g=a=>{const v=d(),{title:C,options:E,placeholderEmpty:P}=a;return typeof P<"u"&&E.length<=0?n.createElement(n.Fragment,null,P):C?n.createElement("section",{"aria-label":C},n.createElement("fieldset",null,n.createElement("div",{className:v.title},n.createElement(i.r,null,C)),n.createElement(p,{...a}))):n.createElement(p,{...a})},p=({options:a,value:v,onChange:C,title:E})=>{const P=c();return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,s.t)("time-picker.time-range.aria-role","Time range selection")},a.map((x,M)=>n.createElement(r,{key:y(x,M),value:x,selected:h(x,v),onSelect:C,name:E??(0,s.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:P.grow}))};function y(a,v){return`${a.from}-${a.to}-${v}`}function h(a,v){return!v||!a?!1:v.from===a.from&&v.to===a.to}},68172:(G,O,e)=>{"use strict";e.d(O,{O:()=>C});var t=e(82897),n=e(68404),u=e(38306),s=e(39451),i=e(46739),m=e(52423),f=e(29516);const o=D=>{const{children:T,label:R}=D,L=(0,f.wW)(l);return R?n.createElement("div",null,n.createElement("div",{className:L.header},n.createElement("span",{className:L.label},R)),T):n.createElement("div",null,T)},l=D=>({header:m.css`
      padding: 7px 10px;
      width: 100%;
      border-top: 1px solid ${D.colors.border.weak};
      text-transform: capitalize;
    `,label:m.css`
      font-size: ${D.typography.size.sm};
      color: ${D.colors.text.secondary};
      font-weight: ${D.typography.fontWeightMedium};
    `});var r=e(87211),d=e(82385),c=e(81697),g=e(57470),p=e(27044);const y="tz-utc-offset",h=(D,T)=>{const{children:R,innerProps:L,innerRef:w,data:A,isSelected:N,isFocused:W}=D,I=(0,f.l4)(),F=v(I),V=Date.now(),b=(0,m.cx)(F.container,W&&F.containerFocused);if(!(0,t.isString)(A.value))return null;const X=(0,u.Pr)(A.value,V);return n.createElement("div",{className:b,...L,ref:w,"aria-label":"Select option"},n.createElement("div",{className:(0,m.cx)(F.leftColumn,F.row)},n.createElement("div",{className:(0,m.cx)(F.leftColumn,F.wideRow)},n.createElement(p.d,{title:R}),n.createElement("div",{className:F.spacer}),n.createElement(g.K,{info:X})),n.createElement("div",{className:F.rightColumn},n.createElement(r.v,{timeZone:X?.ianaName||A.value,timestamp:V,className:y}),N&&n.createElement("span",null,n.createElement(c.J,{name:"check"})))))},a=(D,T)=>{const{children:R,innerProps:L,innerRef:w,data:A,isSelected:N,isFocused:W}=D,I=(0,f.l4)(),F=v(I),V=Date.now(),b=(0,m.cx)(F.container,W&&F.containerFocused);if(!(0,t.isString)(A.value))return null;const X=(0,u.Pr)(A.value,V);return n.createElement("div",{className:b,...L,ref:w,"aria-label":"Select option"},n.createElement("div",{className:F.body},n.createElement("div",{className:F.row},n.createElement("div",{className:F.leftColumn},n.createElement(p.d,{title:R})),n.createElement("div",{className:F.rightColumn},N&&n.createElement("span",null,n.createElement(c.J,{name:"check"})))),n.createElement("div",{className:F.row},n.createElement("div",{className:F.leftColumn},n.createElement(g.K,{info:X})),n.createElement("div",{className:F.rightColumn},n.createElement(r.v,{timestamp:V,timeZone:X?.ianaName||A.value,className:y})))))},v=(0,d.B)(D=>({container:m.css`
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      padding: 6px 8px 4px;

      &:hover {
        background: ${D.colors.action.hover};
      }
    `,containerFocused:m.css`
      background: ${D.colors.action.hover};
    `,body:m.css`
      display: flex;
      font-weight: ${D.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,row:m.css`
      display: flex;
      flex-direction: row;
    `,leftColumn:m.css`
      flex-grow: 1;
      text-overflow: ellipsis;
    `,rightColumn:m.css`
      justify-content: flex-end;
      align-items: center;
    `,wideRow:m.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
    `,spacer:m.css`
      margin-left: 6px;
    `})),C=D=>{const{onChange:T,width:R,autoFocus:L=!1,onBlur:w,value:A,includeInternal:N=!1,disabled:W=!1,inputId:I}=D,F=E(N),V=P(F,A),b=M(),X=R&&R<=45?a:h,k=(0,n.useCallback)(H=>{if(!H||!(0,t.isString)(H.value))return T(A);T(H.value)},[T,A]);return n.createElement(i.Ph,{inputId:I,value:V,placeholder:(0,s.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:L,menuShouldPortal:!1,openMenuOnFocus:!0,width:R,filterOption:b,options:F,onChange:k,onBlur:w,components:{Option:X,Group:o},disabled:W,"aria-label":(0,s.t)("time-picker.zone.select-aria-label","Time zone picker")})},E=D=>{const T=Date.now();return(0,u.$8)(D).map(L=>{const w=L.zones.reduce((A,N)=>{const W=(0,u.Pr)(N,T);return W&&A.push({label:W.name,value:W.zone,searchIndex:S(W,T)}),A},[]);return{label:L.name,options:w}})},P=(D,T)=>(0,n.useMemo)(()=>{if(T===void 0)return;const R=(0,t.toLower)(T);return D.find(w=>w.label?R.startsWith((0,t.toLower)(w.label)):x(R))?.options.find(w=>(0,t.isEmpty)(R)?w.value===u.RQ.default:(0,t.toLower)(w.value)===R)},[D,T]),x=D=>{switch(D){case u.RQ.default:case u.RQ.localBrowserTime:case u.RQ.utc:return!0;default:return!1}},M=()=>(0,n.useCallback)((D,T)=>!T||!D.data||!D.data.searchIndex?!0:D.data.searchIndex.indexOf((0,t.toLower)(T))>-1,[]),S=(D,T)=>{const R=[(0,t.toLower)(D.name),(0,t.toLower)(D.abbreviation),(0,t.toLower)((0,r.k)(T,D.zone))];for(const L of D.countries)R.push((0,t.toLower)(L.name)),R.push((0,t.toLower)(L.code));return R.join("|")}},57470:(G,O,e)=>{"use strict";e.d(O,{K:()=>s});var t=e(52423),n=e(68404),u=e(29516);const s=({info:f})=>{const o=(0,u.wW)(m),l=i(f);return f?n.createElement("div",{className:o.description},l):null},i=f=>(0,n.useMemo)(()=>{const o=[];if(!f)return"";if(f.countries.length>0){const l=f.countries[0];o.push(l.name)}return f.abbreviation&&o.push(f.abbreviation),o.join(", ")},[f]),m=f=>({description:t.css`
      font-weight: normal;
      font-size: ${f.typography.size.sm};
      color: ${f.colors.text.secondary};
      white-space: normal;
      text-overflow: ellipsis;
    `})},87211:(G,O,e)=>{"use strict";e.d(O,{k:()=>o,v:()=>f});var t=e(52423),n=e(82897),u=e.n(n),s=e(68404),i=e(38849),m=e(29516);const f=r=>{const{timestamp:d,timeZone:c,className:g}=r,p=(0,m.wW)(l);return(0,n.isString)(c)?s.createElement(s.Fragment,null,s.createElement("span",{className:(0,t.cx)(p.offset,g)},o(d,c))):null},o=(r,d)=>{const c=(0,i.dq)(r,{timeZone:d,format:"Z"});return c==="+00:00"?"UTC":`UTC${c}`},l=r=>{const d=t.css`
    font-weight: normal;
    font-size: ${r.typography.size.sm};
    color: ${r.colors.text.secondary};
    white-space: normal;
  `;return{offset:t.css`
      ${d};
      color: ${r.colors.text.primary};
      background: ${r.colors.background.secondary};
      padding: 2px 5px;
      border-radius: 2px;
      margin-left: 4px;
    `}}},27044:(G,O,e)=>{"use strict";e.d(O,{d:()=>s});var t=e(52423),n=e(68404),u=e(29516);const s=({title:m})=>{const f=(0,u.wW)(i);return m?n.createElement("span",{className:f.title},m):null},i=m=>({title:t.css`
      font-weight: ${m.typography.fontWeightRegular};
      text-overflow: ellipsis;
    `})},84498:(G,O,e)=>{"use strict";e.d(O,{z:()=>i});var t=e(68404),n=e(68183),u=e(46739);const s=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],i=m=>{const{onChange:f,width:o,autoFocus:l=!1,onBlur:r,value:d,disabled:c=!1,inputId:g}=m,p=(0,t.useCallback)(y=>{y.value!==void 0&&f(y.value)},[f]);return t.createElement(u.Ph,{inputId:g,value:s.find(y=>y.value===d)?.value,placeholder:n.wl.components.WeekStartPicker.placeholder,autoFocus:l,openMenuOnFocus:!0,width:o,options:s,onChange:p,onBlur:r,disabled:c})}},24892:(G,O,e)=>{"use strict";e.d(O,{E:()=>n,r:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},55461:(G,O,e)=>{"use strict";e.d(O,{d:()=>d});var t=e(52423),n=e(99510),u=e(81699),s=e(6665),i=e(12614),m=e(68404),f=e(68183),o=e(29516),l=e(49938),r=e(20017);function d({children:g,inline:p=!1,onClose:y,closeOnMaskClick:h=!0,scrollableContent:a=!1,title:v,subtitle:C,width:E="40%",expandable:P=!1,tabs:x}){const M=(0,o.wW)(c),[S,D]=(0,m.useState)(!1),[T,R]=(0,m.useState)(!1),L=S?"100%":E,w=m.useRef(null),{dialogProps:A,titleProps:N}=(0,n.R)({},w),{overlayProps:W}=(0,s.Ir)({isDismissable:!1,isOpen:T,onClose:y},w);(0,m.useEffect)(()=>{R(!0)},[]);const I=m.createElement("div",{className:M.content},g),F={};return p&&(F.position="absolute"),m.createElement(i.Z,{open:T,onClose:y,placement:"right",width:L,getContainer:p?void 0:"body",style:F,className:M.drawerContent,rootClassName:M.drawer,motion:{motionAppear:!0,motionName:M.drawerMotion},maskClassName:M.mask,maskClosable:h,maskMotion:{motionAppear:!0,motionName:M.maskMotion}},m.createElement(u.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},m.createElement("div",{"aria-label":typeof v=="string"?f.wl.components.Drawer.General.title(v):f.wl.components.Drawer.General.title("no title"),className:M.container,...W,...A,ref:w},typeof v=="string"&&m.createElement("div",{className:M.header},m.createElement("div",{className:M.actions},P&&!S&&m.createElement(r.h,{name:"angle-left",size:"xl",onClick:()=>D(!0),"aria-label":f.wl.components.Drawer.General.expand}),P&&S&&m.createElement(r.h,{name:"angle-right",size:"xl",onClick:()=>D(!1),"aria-label":f.wl.components.Drawer.General.contract}),m.createElement(r.h,{name:"times",size:"xl",onClick:y,"aria-label":f.wl.components.Drawer.General.close})),m.createElement("div",{className:M.titleWrapper},m.createElement("h3",{...N},v),typeof C=="string"&&m.createElement("div",{className:"muted"},C),typeof C!="string"&&C,x&&m.createElement("div",{className:M.tabsWrapper},x))),typeof v!="string"&&v,m.createElement("div",{className:M.contentScroll},a?m.createElement(l.$,{autoHeightMin:"100%"},I):I))))}const c=g=>({container:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      flex: 1 1 0;
    `,drawer:t.css`
      .rc-drawer-content-wrapper {
        box-shadow: ${g.shadows.z3};

        ${g.breakpoints.down("sm")} {
          width: 100% !important;
        }
      }
    `,drawerContent:t.css`
      background-color: ${g.colors.background.primary} !important;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: ${g.zIndex.dropdown};
    `,drawerMotion:t.css`
      &-appear {
        transform: translateX(100%);
        transition: none !important;

        &-active {
          transition: ${g.transitions.create("transform")} !important;
          transform: translateX(0);
        }
      }
    `,mask:t.css`
      background-color: ${g.components.overlay.background} !important;
      backdrop-filter: blur(1px);
    `,maskMotion:t.css`
      &-appear {
        opacity: 0;

        &-active {
          opacity: 1;
          transition: ${g.transitions.create("opacity")};
        }
      }
    `,header:t.css`
      background-color: ${g.colors.background.canvas};
      flex-grow: 0;
      padding-top: ${g.spacing(.5)};
    `,actions:t.css`
      display: flex;
      align-items: baseline;
      justify-content: flex-end;
    `,titleWrapper:t.css`
      margin-bottom: ${g.spacing(3)};
      padding: ${g.spacing(0,1,0,3)};
      overflow-wrap: break-word;
    `,content:(0,t.css)({padding:g.spacing(2),height:"100%",flexGrow:1}),contentScroll:(0,t.css)({minHeight:0,flex:1}),tabsWrapper:(0,t.css)({paddingLeft:g.spacing(2),margin:g.spacing(3,-1,-3,-3)})})},92470:(G,O,e)=>{"use strict";e.d(O,{d:()=>p});var t=e(52423),n=e(35210),u=e(81699),s=e(9815),i=e(91053),m=e(68404),f=e(29516),o=e(75952),l=e(57319),r=e(63346),d=e(87302),c=e(26408);const g=h=>{const{className:a,options:v,value:C,onChange:E,narrow:P,variant:x,...M}=h,S=(0,f.wW)(y),D=(0,i.W)({}),T=m.useRef(null),{menuTriggerProps:R,menuProps:L}=(0,s.u4)({},D,T),{buttonProps:w}=(0,n.U)(R,T),A=N=>{E(N),D.close()};return m.createElement(o.h,{className:S.wrapper},m.createElement(c.h,{className:a,isOpen:D.isOpen,narrow:P,variant:x,ref:T,...w,...M},C?.label||C?.value),D.isOpen&&m.createElement("div",{className:S.menuWrapper},m.createElement(l.L,{onClick:D.close,parent:document,includeButtonPress:!1},m.createElement(u.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},m.createElement(r.v,{tabIndex:-1,onClose:D.close,...L},v.map(N=>m.createElement(d.s,{key:`${N.value}`,label:N.label||N.value,onClick:()=>A(N),active:N.value===C?.value,ariaChecked:N.value===C?.value,ariaLabel:N.ariaLabel||N.label,role:"menuitemradio"})))))))};g.displayName="ButtonSelect";const p=m.memo(g),y=h=>({wrapper:t.css`
      position: relative;
      display: inline-flex;
    `,menuWrapper:t.css`
      position: absolute;
      z-index: ${h.zIndex.dropdown};
      top: ${h.spacing(4)};
      right: 0;
    `})},26639:(G,O,e)=>{"use strict";e.d(O,{L:()=>o});var t=e(52423),n=e(81699),u=e(68404),s=e(85361),i=e(22163),m=e(10027),f=e(97635);const o=u.memo(({children:r,overlay:d,placement:c})=>{const[g,p]=(0,u.useState)(!1),y=(0,u.useRef)(null),{getArrowProps:h,getTooltipProps:a,setTooltipRef:v,setTriggerRef:C,visible:E}=(0,s.O)({visible:g,placement:c,onVisibleChange:p,interactive:!0,delayHide:0,delayShow:0,offset:[0,8],trigger:["click"]}),P=150,x=l(P),M=()=>{p(!1)},S=D=>{(D.key==="Escape"||D.key==="Tab")&&p(!1)};return u.createElement(u.Fragment,null,u.cloneElement(typeof r=="function"?r(E):r,{ref:C}),E&&u.createElement(f.h_,null,u.createElement(n.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},u.createElement("div",{ref:v,...a(),onClick:M,onKeyDown:S},u.createElement("div",{...h({className:"tooltip-arrow"})}),u.createElement(i.Z,{nodeRef:y,appear:!0,in:!0,timeout:{appear:P,exit:0,enter:0},classNames:x},u.createElement("div",{ref:y},m.renderOrCallToRender(d)))))))});o.displayName="Dropdown";const l=r=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${r}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${r}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},42682:(G,O,e)=>{"use strict";e.d(O,{K:()=>s});var t=e(52423),n=e(68404),u=e(29516);const s=({children:m})=>{const f=(0,u.wW)(i);return n.createElement("div",{className:f.container},m)},i=m=>({container:t.css`
      border-left: 3px solid ${m.colors.info.main};
      background-color: ${m.colors.background.secondary};
      padding: ${m.spacing(2)};
      min-width: 350px;
      border-radius: ${m.shape.borderRadius(2)};
      margin-bottom: ${m.spacing(4)};
    `})},78758:(G,O,e)=>{"use strict";e.d(O,{Pf:()=>f,SV:()=>i,z4:()=>m});var t=e(37916),n=e(68404),u=e(2323),s=e(56065);class i extends n.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(l,r){(0,t.Tb)(l,{contexts:{react:{componentStack:r.componentStack}}}),this.setState({error:l,errorInfo:r}),this.props.onError&&this.props.onError(l)}componentDidUpdate(l){const{dependencies:r,onRecover:d}=this.props;if(this.state.error&&r&&l.dependencies){for(let c=0;c<r.length;c++)if(r[c]!==l.dependencies[c]){this.setState({error:null,errorInfo:null}),d&&d();break}}}render(){const{children:l}=this.props,{error:r,errorInfo:d}=this.state;return l({error:r,errorInfo:d})}}class m extends n.PureComponent{render(){const{title:l,children:r,style:d,dependencies:c}=this.props;return n.createElement(i,{dependencies:c},({error:g,errorInfo:p})=>p?d==="alertbox"?n.createElement(u.b,{title:l||""},n.createElement("details",{style:{whiteSpace:"pre-wrap"}},g&&g.toString(),n.createElement("br",null),p.componentStack)):n.createElement(s.X,{title:l||"",error:g,errorInfo:p}):r)}}m.defaultProps={title:"An unexpected error happened",style:"alertbox"};function f(o,l={}){const r=d=>n.createElement(m,{...l},n.createElement(o,{...d}));return r.displayName="WithErrorBoundary",r}},56065:(G,O,e)=>{"use strict";e.d(O,{X:()=>i});var t=e(52423),n=e(68404),u=e(82385);const s=(0,u.B)(()=>t.css`
    width: 500px;
    margin: 64px auto;
  `),i=({error:m,errorInfo:f,title:o})=>n.createElement("div",{className:s()},n.createElement("h2",null,o),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},m&&m.toString(),n.createElement("br",null),f&&f.componentStack));i.displayName="ErrorWithStack"},9257:(G,O,e)=>{"use strict";e.d(O,{A_:()=>g,Yo:()=>r});var t=e(52423),n=e(82897),u=e.n(n),s=e(68404),i=e(15020),m=e(29516),f=e(2323),o=e(81697),l=e(20379);function r({options:v,children:C,readAs:E,onLoad:P,fileListRenderer:x,onFileRemove:M}){const[S,D]=(0,s.useState)([]),[T,R]=(0,s.useState)([]),L=(0,s.useCallback)((Y,ee)=>{D(ue=>ue.map(q=>(q.id===Y.id&&ee(q),q)))},[]),w=(0,s.useCallback)((Y,ee,ue)=>{let q=Y.map(h);if(v?.multiple===!1?D(q):D(ge=>[...ge,...q]),X(ee),v?.onDrop)v.onDrop(Y,ee,ue);else for(const ge of q){const De=new FileReader,fe=()=>{E?De[E](ge.file):De.readAsText(ge.file)};L(ge,me=>{me.abortUpload=()=>{De.abort()},me.retryUpload=()=>{L(ge,ce=>{ce.error=null,ce.progress=void 0}),fe()}}),De.onabort=()=>{L(ge,me=>{me.error=new DOMException("Aborted")})},De.onprogress=me=>{L(ge,ce=>{ce.progress=me.loaded})},De.onload=()=>{P?.(De.result)},De.onerror=()=>{L(ge,me=>{me.error=De.error})},fe()}},[P,v,E,L]),A=Y=>{const ee=S.filter(ue=>Y.id!==ue.id);D(ee),M?.(Y)},{getRootProps:N,getInputProps:W,isDragActive:I}=(0,i.uI)({...v,useFsAccessApi:!1,onDrop:w,accept:c(v?.accept)}),F=(0,m.l4)(),V=a(F,I),b=S.map(Y=>x?x(Y,A):s.createElement(l.K,{key:Y.id,file:Y,removeFile:A})),X=Y=>{let ee=[];Y.map(ue=>{ue.errors.map(q=>{ee.indexOf(q.message)===-1&&ee.push(q.message)})}),R(ee)},k=()=>s.createElement("div",{className:V.errorAlert},s.createElement(f.b,{title:"Upload failed",severity:"error",onRemove:H},T.map(Y=>s.createElement("div",{key:Y},Y)))),H=()=>{R([])};return s.createElement("div",{className:V.container},s.createElement("div",{"data-testid":"dropzone",...N({className:V.dropzone})},s.createElement("input",{...W()}),C??s.createElement(g,{primaryText:p(S,v)})),T.length>0&&k(),v?.accept&&s.createElement("small",{className:(0,t.cx)(V.small,V.acceptMargin)},y(v.accept)),b)}function d(v){return["txt","json","csv","xls","yml"].some(C=>v.match(C))?"text/plain":"application/octet-stream"}function c(v){return(0,n.isString)(v)?{[d(v)]:[v]}:Array.isArray(v)?v.reduce((C,E)=>{const P=d(E);return C[P]=C[P]?[...C[P],E]:[E],C},{}):v}function g({primaryText:v="Upload file",secondaryText:C="Drag and drop here or browse"}){const E=(0,m.l4)(),P=a(E);return s.createElement("div",{className:P.iconWrapper},s.createElement(o.J,{name:"upload",size:"xxl"}),s.createElement("h3",null,v),s.createElement("small",{className:P.small},C))}function p(v,C){return C?.multiple===void 0||C?.multiple?"Upload file":v.length?"Replace file":"Upload file"}function y(v){return(0,n.isString)(v)?`Accepted file type: ${v}`:Array.isArray(v)?`Accepted file types: ${v.join(", ")}`:`Accepted file types: ${Object.values(v).flat().join(", ")}`}function h(v){return{id:(0,n.uniqueId)("file"),file:v,error:null}}function a(v,C){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${v.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${v.colors.border.medium};
      background-color: ${C?v.colors.background.secondary:v.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:t.css`
      margin: ${v.spacing(2,0,1)};
    `,small:t.css`
      color: ${v.colors.text.secondary};
    `,errorAlert:t.css`
      padding-top: 10px;
    `}}},20379:(G,O,e)=>{"use strict";e.d(O,{K:()=>r});var t=e(52423),n=e(68404),u=e(20112),s=e(29516),i=e(89542),m=e(90723),f=e(81697),o=e(20017);const l="Remove file";function r({file:c,removeFile:g}){const p=(0,s.wW)(d),{file:y,progress:h,error:a,abortUpload:v,retryUpload:C}=c,E=()=>a?n.createElement(n.Fragment,null,n.createElement("span",{className:p.error},a.message),C&&n.createElement(o.h,{type:"button","aria-label":"Retry",name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:C}),g&&n.createElement(o.h,{className:C?p.marginLeft:"",type:"button",name:"trash-alt",onClick:()=>g(c),tooltip:l,"aria-label":l})):h&&y.size>h?n.createElement(n.Fragment,null,n.createElement("progress",{className:p.progressBar,max:y.size,value:h}),n.createElement("span",{className:p.paddingLeft},Math.round(h/y.size*100),"%"),v&&n.createElement(m.zx,{variant:"secondary",type:"button",fill:"text",onClick:v},"Cancel upload")):g&&n.createElement(o.h,{name:"trash-alt",onClick:()=>g(c),tooltip:l,"aria-label":l,type:"button",tooltipPlacement:"top"}),P=(0,u.Cf)("decbytes")(y.size);return n.createElement("div",{className:p.fileListContainer},n.createElement("span",{className:p.fileNameWrapper},n.createElement(f.J,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:p.padding},(0,i.O)(y.name)),n.createElement("span",null,(0,u.zc)(P))),n.createElement("div",{className:p.fileNameWrapper},E()))}function d(c){return{fileListContainer:t.css`
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: ${c.spacing(2)};
      border: 1px dashed ${c.colors.border.medium};
      background-color: ${c.colors.background.secondary};
      margin-top: ${c.spacing(1)};
    `,fileNameWrapper:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
    `,padding:t.css`
      padding: ${c.spacing(0,1)};
    `,paddingLeft:t.css`
      padding-left: ${c.spacing(2)};
    `,marginLeft:t.css`
      margin-left: ${c.spacing(1)};
    `,error:t.css`
      padding-right: ${c.spacing(2)};
      color: ${c.colors.error.text};
    `,progressBar:t.css`
      border-radius: ${c.spacing(1)};
      height: 4px;
      ::-webkit-progress-bar {
        background-color: ${c.colors.border.weak};
        border-radius: ${c.spacing(1)};
      }
      ::-webkit-progress-value {
        background-color: ${c.colors.primary.main};
        border-radius: ${c.spacing(1)};
      }
    `}}},20181:(G,O,e)=>{"use strict";e.d(O,{A_:()=>t.A_,K$:()=>n.K,Yo:()=>t.Yo});var t=e(9257),n=e(20379)},81524:(G,O,e)=>{"use strict";e.d(O,{p:()=>r});var t=e(52423),n=e(68404),u=e(44288),s=e(68183),i=e(29516),m=e(19253),f=e(89542),o=e(90723),l=e(81697);const r=({onFileUpload:c,className:g,children:p="Upload file",accept:y="*",size:h="md"})=>{const a=(0,i.wW)(d(h)),[v,C]=(0,n.useState)(""),E=(0,u.Z)(),P=(0,n.useCallback)(x=>{const M=x.currentTarget?.files?.[0];M&&C(M.name??""),c(x)},[c]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:E,className:a.fileUpload,onChange:P,multiple:!1,accept:y,"data-testid":s.wl.components.FileUpload.inputField}),n.createElement("label",{htmlFor:E,className:(0,t.cx)(a.labelWrapper,g)},n.createElement(l.J,{name:"upload",className:a.icon}),p),v&&n.createElement("span",{"aria-label":"File name",className:a.fileName,"data-testid":s.wl.components.FileUpload.fileNameSpan},(0,f.O)(v)))},d=c=>g=>{const p=(0,o.fW)({theme:g,variant:"primary",size:c,iconOnly:!1}),y=(0,m.getFocusStyles)(g);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":y,"&:focus-visible + label":y}),labelWrapper:p.button,icon:p.icon,fileName:(0,t.css)({marginLeft:g.spacing(.5)})}}},79230:(G,O,e)=>{"use strict";e.d(O,{H:()=>f});var t=e(68404),n=e(29076);function u(...o){const l=t.useRef(null);return t.useEffect(()=>{o.forEach(r=>{r&&(typeof r=="function"?r(l.current):r.current=l.current)})},[o]),l}var s=e(90723),i=e(81697),m=e(25474);const f=t.forwardRef(({value:o,width:l,onChange:r,escapeRegex:d=!0,...c},g)=>{const p=t.useRef(null),y=u(g,p),h=o!==""?t.createElement(s.zx,{icon:"times",fill:"text",size:"sm",onClick:a=>{p.current?.focus(),r(""),a.stopPropagation()}},"Clear"):null;return t.createElement(m.I,{prefix:t.createElement(i.J,{name:"search"}),suffix:h,width:l,type:"text",value:d?(0,n.x6)(o??""):o,onChange:a=>r(d?(0,n.GE)(a.currentTarget.value):a.currentTarget.value),...c,ref:y})});f.displayName="FilterInput"},1140:(G,O,e)=>{"use strict";e.d(O,{B:()=>m});var t=e(52423),n=e(68404),u=e(29516),s=e(90723),i=e(81697);const m=({label:o,selected:l,onClick:r,icon:d="check"})=>{const c=(0,u.wW)(f),g=(0,u.wW)(s.gN);return n.createElement("button",{type:"button",className:(0,t.cx)(g,c.wrapper,l&&c.selected),onClick:r},n.createElement("span",null,o),l&&n.createElement(i.J,{name:d,className:c.icon}))},f=o=>({wrapper:t.css`
      background: ${o.colors.background.secondary};
      border-radius: ${o.shape.borderRadius(8)};
      padding: ${o.spacing(0,2)};
      font-size: ${o.typography.bodySmall.fontSize};
      font-weight: ${o.typography.fontWeightMedium};
      line-height: ${o.typography.bodySmall.lineHeight};
      color: ${o.colors.text.secondary};
      display: flex;
      align-items: center;
      height: 32px;

      &:hover {
        background: ${o.colors.action.hover};
        color: ${o.colors.text.primary};
      }
    `,selected:t.css`
      color: ${o.colors.text.primary};
      background: ${o.colors.action.selected};

      &:hover {
        background: ${o.colors.action.focus};
      }
    `,icon:t.css`
      margin-left: ${o.spacing(.5)};
    `})},45586:(G,O,e)=>{"use strict";e.d(O,{W:()=>i});var t=e(52423),n=e(68404),u=e(49371);const s={labelWidth:6,inputWidth:12},i=({label:f,tooltip:o,labelWidth:l,inputWidth:r,inputEl:d,className:c,interactive:g,...p})=>{const y=m();return n.createElement("div",{className:(0,t.cx)(y.formField,c)},n.createElement(u.c,{width:l,tooltip:o,interactive:g},f),d||n.createElement("input",{type:"text",className:`gf-form-input ${r?`width-${r}`:""}`,...p,disabled:p.disabled}))};i.displayName="FormField",i.defaultProps=s;const m=()=>({formField:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
    `})},49371:(G,O,e)=>{"use strict";e.d(O,{c:()=>f});var t=e(9085),n=e.n(t),u=e(68404),s=e(81697),i=e(48756);const f=({children:o,isFocused:l,isInvalid:r,className:d,htmlFor:c,tooltip:g,width:p,interactive:y,...h})=>{const a=n()(d,`gf-form-label width-${p||"10"}`,{"gf-form-label--is-focused":l,"gf-form-label--is-invalid":r});return u.createElement("label",{className:a,...h,htmlFor:c},o,g&&u.createElement(i.u,{placement:"top",content:g,theme:"info",interactive:y},u.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},4395:(G,O,e)=>{"use strict";e.d(O,{W:()=>u});var t=e(68404);function n(s){return s<20?.9:s<26?.8:.6}const u=({value:s,className:i,style:m,...f})=>{const o=(s.prefix??"").length>0,l=(s.suffix??"").length>0;let r;if(m&&m.fontSize&&typeof m.fontSize=="number"){const d=m.fontSize,c=n(d);r={fontSize:d*c}}return t.createElement("div",{className:i,style:m,...f},t.createElement("div",null,o&&t.createElement("span",null,s.prefix),t.createElement("span",null,s.text),l&&t.createElement("span",{style:r},s.suffix)))};u.displayName="FormattedDisplayValue"},94338:(G,O,e)=>{"use strict";e.d(O,{X:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=e(82385),i=e(19253),m=e(38835);const f=n.forwardRef(({label:l,description:r,value:d,htmlValue:c,onChange:g,disabled:p,className:y,...h},a)=>{const v=(0,n.useCallback)(E=>{g&&g(E)},[g]),C=(0,u.wW)(o);return n.createElement("label",{className:(0,t.cx)(C.wrapper,y)},n.createElement("div",null,n.createElement("input",{type:"checkbox",className:C.input,checked:d,disabled:p,onChange:v,value:c,...h,ref:a}),n.createElement("span",{className:C.checkmark})),n.createElement("div",null,l&&n.createElement("span",{className:C.label},l),r&&n.createElement("span",{className:C.description},r)))}),o=(0,s.B)(l=>{const r=(0,m.F)(l),d=2,c=1;return{wrapper:t.css`
      display: flex;
      gap: ${l.spacing(c)};
      align-items: baseline;
      position: relative;
      vertical-align: middle;
      font-size: 0;
    `,input:t.css`
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100% !important; // global styles unset this
      height: 100%;
      opacity: 0;

      &:focus + span,
      &:focus-visible + span {
        ${(0,i.getFocusStyles)(l)}
      }

      &:focus:not(:focus-visible) + span {
        ${(0,i.getMouseFocusStyles)(l)}
      }

      /**
       * Using adjacent sibling selector to style checked state.
       * Primarily to limit the classes necessary to use when these classes will be used
       * for angular components styling
       * */
      &:checked + span {
        background: blue;
        background: ${l.colors.primary.main};
        border: none;

        &:hover {
          background: ${l.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 5px;
          top: 1px;
          width: 6px;
          height: 12px;
          border: solid ${l.colors.primary.contrastText};
          border-width: 0 3px 3px 0;
          transform: rotate(45deg);
        }
      }

      &:disabled + span {
        background-color: ${l.colors.action.disabledBackground};
        cursor: not-allowed;

        &:hover {
          background-color: ${l.colors.action.disabledBackground};
        }

        &:after {
          border-color: ${l.colors.action.disabledText};
        }
      }
    `,checkmark:t.css`
      position: relative; /* Checkbox should be layered on top of the invisible input so it recieves :hover */
      z-index: 2;
      display: inline-block;
      width: ${l.spacing(d)};
      height: ${l.spacing(d)};
      border-radius: ${l.shape.borderRadius()};
      background: ${l.components.input.background};
      border: 1px solid ${l.components.input.borderColor};

      &:hover {
        cursor: pointer;
        border-color: ${l.components.input.borderHover};
      }
    `,label:(0,t.cx)(r.label,t.css`
        position: relative;
        z-index: 2;
        cursor: pointer;
        top: -3px;
        max-width: fit-content;
        line-height: ${l.typography.bodySmall.lineHeight};
        margin-bottom: 0;
      `),description:(0,t.cx)(r.description,t.css`
        line-height: ${l.typography.bodySmall.lineHeight};
        margin-top: 0; /* The margin effectively comes from the top: -2px on the label above it */
      `)}});f.displayName="Checkbox"},74955:(G,O,e)=>{"use strict";e.d(O,{g:()=>l});var t=e(52423),n=e(68404),u=e(82385),s=e(29516),i=e(10027),m=e(69556),f=e(38835);const o=(0,u.B)(d=>({field:t.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${d.spacing(2)};
    `,fieldHorizontal:t.css`
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;
    `,fieldValidationWrapper:t.css`
      margin-top: ${d.spacing(.5)};
    `,fieldValidationWrapperHorizontal:t.css`
      flex: 1 1 100%;
    `,validationMessageHorizontalOverflow:t.css`
      width: 0;
      overflow-x: visible;

      & > * {
        white-space: nowrap;
      }
    `})),l=({label:d,description:c,horizontal:g,invalid:p,loading:y,disabled:h,required:a,error:v,children:C,className:E,validationMessageHorizontalOverflow:P,htmlFor:x,...M})=>{const S=(0,s.l4)(),D=o(S),T=x??(0,i.getChildId)(C),R=typeof d=="string"?n.createElement(f._,{htmlFor:T,description:c},`${d}${a?" *":""}`):d,L=r({invalid:p,disabled:h,loading:y});return n.createElement("div",{className:(0,t.cx)(D.field,g&&D.fieldHorizontal,E),...M},R,n.createElement("div",null,n.cloneElement(C,L),p&&v&&!g&&n.createElement("div",{className:(0,t.cx)(D.fieldValidationWrapper,{[D.validationMessageHorizontalOverflow]:!!P})},n.createElement(m.S,null,v))),p&&v&&g&&n.createElement("div",{className:(0,t.cx)(D.fieldValidationWrapper,D.fieldValidationWrapperHorizontal,{[D.validationMessageHorizontalOverflow]:!!P})},n.createElement(m.S,null,v)))};function r(d){for(const c in d)d[c]===void 0&&delete d[c];return d}},14206:(G,O,e)=>{"use strict";e.d(O,{F:()=>n});var t=e(59052);const n=({name:u,control:s,children:i,...m})=>{const{fields:f,append:o,prepend:l,remove:r,swap:d,move:c,insert:g}=(0,t.Dq)({control:s,name:u,...m});return i({fields:f,append:o,prepend:l,remove:r,swap:d,move:c,insert:g})}},65587:(G,O,e)=>{"use strict";e.d(O,{C:()=>m});var t=e(52423),n=e(68404),u=e(29516),s=e(82385),i=e(78107);const m=({label:o,children:l,className:r,...d})=>{const c=(0,u.l4)(),g=f(c);return n.createElement("fieldset",{className:(0,t.cx)(g.wrapper,r),...d},o&&n.createElement(i.D,null,o),l)},f=(0,s.B)(o=>({wrapper:t.css`
      margin-bottom: ${o.spacing(4)};

      &:last-child {
        margin-bottom: 0;
      }
    `}))},69556:(G,O,e)=>{"use strict";e.d(O,{S:()=>f});var t=e(52423),n=e(68404),u=e(82385),s=e(29516),i=e(81697);const m=(0,u.B)(o=>{const l=`
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      padding: ${o.spacing(.5,1)};
      color: ${o.colors.error.contrastText};
      background: ${o.colors.error.main};
      border-radius: ${o.shape.borderRadius()};
      position: relative;
      display: inline-block;

      a {
        color: ${o.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:t.css`
      ${l}
      margin: ${o.spacing(.5,0,0,0)};

      &:before {
        content: '';
        position: absolute;
        left: 9px;
        top: -5px;
        width: 0;
        height: 0;
        border-width: 0 4px 5px 4px;
        border-color: transparent transparent ${o.colors.error.main} transparent;
        border-style: solid;
      }
    `,horizontal:t.css`
      ${l}
      margin-left: 10px;

      &:before {
        content: '';
        position: absolute;
        left: -5px;
        top: 9px;
        width: 0;
        height: 0;
        border-width: 4px 5px 4px 0;
        border-color: transparent #e02f44 transparent transparent;
        border-style: solid;
      }
    `,fieldValidationMessageIcon:t.css`
      margin-right: ${o.spacing()};
    `}}),f=({children:o,horizontal:l,className:r})=>{const d=(0,s.l4)(),c=m(d),g=(0,t.cx)(l?c.horizontal:c.vertical,r);return n.createElement("div",{role:"alert",className:g},n.createElement(i.J,{className:c.fieldValidationMessageIcon,name:"exclamation-triangle"}),o)}},4403:(G,O,e)=>{"use strict";e.d(O,{l:()=>s});var t=e(52423),n=e(68404),u=e(59052);function s({defaultValues:i,onSubmit:m,validateOnMount:f=!1,validateFieldsOnMount:o,children:l,validateOn:r="onSubmit",maxWidth:d=600,...c}){const{handleSubmit:g,trigger:p,formState:y,...h}=(0,u.cI)({mode:r,defaultValues:i});return(0,n.useEffect)(()=>{f&&p(o)},[p,o,f]),n.createElement("form",{className:t.css`
        max-width: ${d!=="none"?d+"px":d};
        width: 100%;
      `,onSubmit:g(m),...c},l({errors:y.errors,formState:y,...h}))}},71210:(G,O,e)=>{"use strict";e.d(O,{_:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=e(10027),i=e(69556),m=e(91605);const f=({children:l,label:r,tooltip:d,labelWidth:c="auto",invalid:g,loading:p,disabled:y,required:h,className:a,htmlFor:v,grow:C,shrink:E,error:P,transparent:x,interactive:M,...S})=>{const D=(0,u.l4)(),T=o(D,C,E),R=v??(0,s.getChildId)(l),L=typeof r=="string"?n.createElement(m.W,{interactive:M,width:c,tooltip:d,htmlFor:R,transparent:x},`${r}${h?" *":""}`):r;return n.createElement("div",{className:(0,t.cx)(T.container,a),...S},L,n.createElement("div",{className:T.childContainer},n.cloneElement(l,{invalid:g,disabled:y,loading:p}),g&&P&&n.createElement("div",{className:(0,t.cx)(T.fieldValidationWrapper)},n.createElement(i.S,null,P))))};f.displayName="InlineField";const o=(l,r,d)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${r?1:0} ${d?1:0} auto;
      margin: 0 ${l.spacing(.5)} ${l.spacing(.5)} 0;
    `,childContainer:t.css`
      flex: ${r?1:0} ${d?1:0} auto;
    `,fieldValidationWrapper:t.css`
      margin-top: ${l.spacing(.5)};
    `})},9274:(G,O,e)=>{"use strict";e.d(O,{Z:()=>s});var t=e(52423),n=e(68404),u=e(29516);const s=({children:m,className:f,...o})=>{const l=(0,u.wW)(i);return n.createElement("div",{className:(0,t.cx)(l.container,f),...o},m)},i=m=>({container:t.css`
      label: InlineFieldRow;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: flex-start;
      row-gap: ${m.spacing(.5)};
    `})},91605:(G,O,e)=>{"use strict";e.d(O,{W:()=>m});var t=e(52423),n=e(68404),u=e(29516),s=e(81697),i=e(48756);const m=({children:o,className:l,tooltip:r,width:d,transparent:c,interactive:g,as:p="label",...y})=>{const h=(0,u.wW)((0,n.useCallback)(a=>f(a,c,d),[c,d]));return n.createElement(p,{className:(0,t.cx)(h.label,l),...y},o,r&&n.createElement(i.u,{interactive:g,placement:"top",content:r,theme:"info"},n.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",className:h.icon})))},f=(o,l=!1,r)=>({label:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      padding: 0 ${o.spacing(1)};
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
      background-color: ${l?"transparent":o.colors.background.secondary};
      height: ${o.spacing(o.components.height.md)};
      line-height: ${o.spacing(o.components.height.md)};
      margin-right: ${o.spacing(.5)};
      border-radius: ${o.shape.borderRadius(2)};
      border: none;
      width: ${r?r!=="auto"?`${8*r}px`:r:"100%"};
      color: ${o.colors.text.primary};
    `,icon:t.css`
      color: ${o.colors.text.secondary};
      margin-left: 10px;

      :hover {
        color: ${o.colors.text.primary};
      }
    `})},24657:(G,O,e)=>{"use strict";e.d(O,{m:()=>s});var t=e(52423),n=e(68404),u=e(29516);const s=({children:m,className:f,grow:o,...l})=>{const r=(0,u.wW)(d=>i(d,o));return n.createElement("div",{className:(0,t.cx)(r.container,f),...l},m)};s.displayName="InlineSegmentGroup";const i=(m,f)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${f?1:0} 0 auto;
      margin-bottom: ${m.spacing(.5)};
    `})},38835:(G,O,e)=>{"use strict";e.d(O,{F:()=>m,_:()=>f});var t=e(52423),n=e(68404),u=e(82385),s=e(29516),i=e(81697);const m=(0,u.B)(o=>({label:t.css`
      label: Label;
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      line-height: 1.25;
      margin-bottom: ${o.spacing(.5)};
      color: ${o.colors.text.primary};
      max-width: 480px;
    `,labelContent:t.css`
      display: flex;
      align-items: center;
    `,description:t.css`
      label: Label-description;
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightRegular};
      margin-top: ${o.spacing(.25)};
      display: block;
    `,categories:t.css`
      label: Label-categories;
      display: inline-flex;
      align-items: center;
    `,chevron:t.css`
      margin: 0 ${o.spacing(.25)};
    `})),f=({children:o,description:l,className:r,category:d,...c})=>{const g=(0,s.l4)(),p=m(g),y=d?.map((h,a)=>n.createElement("span",{className:p.categories,key:`${h}/${a}`},n.createElement("span",null,h),n.createElement(i.J,{name:"angle-right",className:p.chevron})));return n.createElement("div",{className:(0,t.cx)(p.label,r)},n.createElement("label",{...c},n.createElement("div",{className:p.labelContent},y,o),l&&n.createElement("span",{className:p.description},l)))}},70640:(G,O,e)=>{"use strict";e.d(O,{G:()=>i,I:()=>m});var t=e(9085),n=e.n(t),u=e(68404),s=e(7505),i=(f=>(f.Invalid="invalid",f.Valid="valid",f))(i||{});class m extends u.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=o=>l=>{const r=(0,s.Gu)(l.target.value,o);this.setState(d=>({...d,error:r?r[0]:null}))},this.populateEventPropsWithStatus=(o,l)=>{const r={...o};return l&&Object.keys(s.JU).forEach(d=>{((0,s.z3)(d,l)||o[d])&&(r[d]=async c=>{c.persist(),(0,s.z3)(d,l)&&await this.validatorAsync(l[d]).apply(this,[c]),o[d]&&o[d].apply(null,[c,this.status])})}),r}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:o,className:l,hideErrorMessage:r,inputRef:d,...c}=this.props,{error:g}=this.state,p=n()("gf-form-input",{invalid:this.isInvalid},l),y=this.populateEventPropsWithStatus(c,o);return u.createElement("div",{style:{flexGrow:1}},u.createElement("input",{...y,ref:d,className:p}),g&&!r&&u.createElement("span",null,g))}}m.defaultProps={className:""}},89861:(G,O,e)=>{"use strict";e.d(O,{B:()=>s,Z:()=>i});var t=e(68404),n=e(8887),u=e(81697);const s=m=>{const f=m.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...m},t.createElement(u.J,{name:f?"angle-up":"angle-down",style:{marginTop:"7px"}}))},i=s},93250:(G,O,e)=>{"use strict";e.d(O,{P:()=>u,Z:()=>s});var t=e(68404),n=e(8887);const u=i=>{const{children:m}=i;return t.createElement(n.c.NoOptionsMessage,{...i},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},m)))},s=u},52756:(G,O,e)=>{"use strict";e.d(O,{qb:()=>x,Ph:()=>P});var t=e(9085),n=e.n(t),u=e(68404),s=e(8887),i=e(37826),m=e(30250),f=e(83238),o=e(29516),l=e(49938),r=e(28113),d=e(43046),c=e(91438),g=e(48756),p=e(89861),y=e(93250),h=e(81697);const a=D=>{const{children:T,isSelected:R,data:L}=D;return u.createElement(s.c.Option,{...D},u.createElement("div",{className:"gf-form-select-box__desc-option"},L.imgUrl&&u.createElement("img",{className:"gf-form-select-box__desc-option__img",src:L.imgUrl,alt:""}),u.createElement("div",{className:"gf-form-select-box__desc-option__body"},u.createElement("div",null,T),L.description&&u.createElement("div",{className:"gf-form-select-box__desc-option__desc"},L.description)),R&&u.createElement(h.J,{name:"check","aria-hidden":"true"})))},v=null,C=D=>u.createElement(s.c.MenuList,{...D},u.createElement(l.$,{autoHide:!1,autoHeightMax:"inherit"},D.children)),E=class extends u.PureComponent{render(){const{defaultValue:D,getOptionLabel:T,getOptionValue:R,onChange:L,options:w,placeholder:A,width:N,value:W,className:I,isDisabled:F,isLoading:V,isSearchable:b,isClearable:X,backspaceRemovesValue:k,isMulti:H,autoFocus:Y,openMenuOnFocus:ee,onBlur:ue,maxMenuHeight:q,noOptionsMessage:ge,isOpen:De,components:fe,tooltipContent:me,tabSelectsValue:ce,onCloseMenu:ie,onOpenMenu:re,allowCustomValue:Ee,formatCreateLabel:J,"aria-label":te}=this.props;let ne="";N&&(ne="width-"+N);let j=i.ZP;const be={};Ee&&(j=f.Z,be.formatCreateLabel=J??(Ye=>Ye));const Le=n()("gf-form-input","gf-form-input--form-dropdown",ne,I),Qe={...E.defaultProps.components,...fe};return u.createElement(M,{onCloseMenu:ie,onOpenMenu:re,tooltipContent:me,isOpen:De},(Ye,de)=>u.createElement(j,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Le,components:Qe,defaultValue:D,value:W,getOptionLabel:T,getOptionValue:R,menuShouldScrollIntoView:!1,isSearchable:b,onChange:L,options:w,placeholder:A||"Choose",styles:(0,c.Z)(this.context),isDisabled:F,isLoading:V,isClearable:X,autoFocus:Y,onBlur:ue,openMenuOnFocus:ee,maxMenuHeight:q,noOptionsMessage:ge,isMulti:H,backspaceRemovesValue:k,menuIsOpen:De,onMenuOpen:Ye,onMenuClose:de,tabSelectsValue:ce,"aria-label":te,...be}))}};let P=E;P.contextType=o.Ni,P.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:a,SingleValue:d.P,IndicatorsContainer:p.Z,MenuList:C,Group:r.n}};class x extends u.PureComponent{render(){const{defaultValue:T,getOptionLabel:R,getOptionValue:L,onChange:w,placeholder:A,width:N,value:W,className:I,loadOptions:F,defaultOptions:V,isLoading:b,loadingMessage:X,noOptionsMessage:k,isDisabled:H,isSearchable:Y,isClearable:ee,backspaceRemovesValue:ue,autoFocus:q,onBlur:ge,openMenuOnFocus:De,maxMenuHeight:fe,isMulti:me,tooltipContent:ce,onCloseMenu:ie,onOpenMenu:re,isOpen:Ee}=this.props;let J="";N&&(J="width-"+N);const te=n()("gf-form-input","gf-form-input--form-dropdown",J,I);return u.createElement(M,{onCloseMenu:ie,onOpenMenu:re,tooltipContent:ce,isOpen:Ee},(ne,j)=>u.createElement(m.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:te,components:{Option:a,SingleValue:d.P,IndicatorsContainer:p.Z,NoOptionsMessage:y.Z},defaultValue:T,value:W,getOptionLabel:R,getOptionValue:L,menuShouldScrollIntoView:!1,onChange:w,loadOptions:F,isLoading:b,defaultOptions:V,placeholder:A||"Choose",styles:(0,c.Z)(this.context),loadingMessage:X,noOptionsMessage:k,isDisabled:H,isSearchable:Y,isClearable:ee,autoFocus:q,onBlur:ge,openMenuOnFocus:De,maxMenuHeight:fe,isMulti:me,backspaceRemovesValue:ue}))}}x.contextType=o.Ni,x.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class M extends u.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:T}=this.props;T&&T(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:T}=this.props;T&&T(),this.setState({isOpenInternal:!1})}}render(){const{children:T,isOpen:R,tooltipContent:L}=this.props,{isOpenInternal:w}=this.state;let A;return(w||R)&&(A=!1),L?u.createElement(g.u,{show:A,content:L,placement:"bottom"},u.createElement("div",null,T(this.onOpenMenu,this.onCloseMenu))):u.createElement("div",null,T(this.onOpenMenu,this.onCloseMenu))}}const S=null},88977:(G,O,e)=>{"use strict";e.d(O,{r:()=>m});var t=e(82897),n=e.n(t),u=e(68404),s=e(81697),i=e(48756);class m extends u.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=o=>{o.stopPropagation(),this.props.onChange(o)}}render(){const{labelClass:o="",switchClass:l="",label:r,checked:d,transparent:c,className:g,tooltip:p,tooltipPlacement:y}=this.props,h=this.state.id,a=`gf-form-label ${o} ${c?"gf-form-label--transparent":""} pointer`,v=`gf-form-switch ${l} ${c?"gf-form-switch--transparent":""}`;return u.createElement("div",{className:"gf-form-switch-container-react"},u.createElement("label",{htmlFor:h,className:`gf-form gf-form-switch-container ${g||""}`},r&&u.createElement("div",{className:a},r,p&&u.createElement(i.u,{placement:y||"auto",content:p,theme:"info"},u.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},u.createElement(s.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))),u.createElement("div",{className:v},u.createElement("input",{id:h,type:"checkbox",checked:d,onChange:this.internalOnChange}),u.createElement("span",{className:"gf-form-switch__slider"}))))}}},78107:(G,O,e)=>{"use strict";e.d(O,{D:()=>i});var t=e(52423),n=e(68404),u=e(29516);const s=m=>({legend:t.css`
      font-size: ${m.typography.h3.fontSize};
      font-weight: ${m.typography.fontWeightRegular};
      margin: 0 0 ${m.spacing(2)} 0;
    `}),i=({children:m,className:f,...o})=>{const l=(0,u.wW)(s);return n.createElement("legend",{className:(0,t.cx)(l.legend,f),...o},m)}},318:(G,O,e)=>{"use strict";e.d(O,{S:()=>c});var t=e(52423),n=e(82897),u=e(68404),s=e(43565),i=e(29516),m=e(81697),f=e(82385),o=e(19253),l=e(51821);const r=u.forwardRef(({children:p,active:y=!1,disabled:h=!1,size:a="md",onChange:v,onClick:C,id:E,name:P=void 0,description:x,fullWidth:M,"aria-label":S},D)=>{const T=(0,i.l4)(),R=d(T,a,M);return u.createElement(u.Fragment,null,u.createElement("input",{type:"radio",className:R.radio,onChange:v,onClick:C,disabled:h,id:E,checked:y,name:P,"aria-label":S,ref:D}),u.createElement("label",{className:R.radioLabel,htmlFor:E,title:x},p))});r.displayName="RadioButton";const d=(0,f.B)((p,y,h)=>{const{fontSize:a,height:v,padding:C}=(0,l.iL)(y,p),E=p.colors.text.secondary,P=p.colors.text.primary,x=v*p.spacing.gridSize-4-2;return{radio:t.css`
      position: absolute;
      opacity: 0;
      z-index: -1000;

      &:checked + label {
        color: ${p.colors.text.primary};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.action.selected};
        z-index: 3;
      }

      &:focus + label,
      &:focus-visible + label {
        ${(0,o.getFocusStyles)(p)};
      }

      &:focus:not(:focus-visible) + label {
        ${(0,o.getMouseFocusStyles)(p)}
      }

      &:disabled + label {
        color: ${p.colors.text.disabled};
        cursor: not-allowed;
      }
    `,radioLabel:t.css`
      display: inline-block;
      position: relative;
      font-size: ${a};
      height: ${x}px;
      // Deduct border from line-height for perfect vertical centering on windows and linux
      line-height: ${x}px;
      color: ${E};
      padding: ${p.spacing(0,C)};
      border-radius: ${p.shape.borderRadius()};
      background: ${p.colors.background.primary};
      cursor: pointer;
      z-index: 1;
      flex: ${h?"1 0 0":"none"};
      text-align: center;
      user-select: none;
      white-space: nowrap;

      &:hover {
        color: ${P};
      }
    `}});function c({options:p,value:y,onChange:h,onClick:a,disabled:v,disabledOptions:C,size:E="md",id:P,className:x,fullWidth:M=!1,autoFocus:S=!1}){const D=(0,u.useCallback)(N=>()=>{h&&h(N.value)},[h]),T=(0,u.useCallback)(N=>()=>{a&&a(N.value)},[a]),R=P??(0,n.uniqueId)("radiogroup-"),L=(0,u.useRef)(R),w=(0,i.wW)(g),A=(0,u.useRef)(null);return(0,u.useEffect)(()=>{S&&A.current&&A.current.focus()},[S]),u.createElement("div",{className:(0,t.cx)(w.radioGroup,M&&w.fullWidth,x)},p.map((N,W)=>{const I=C&&N.value&&C.includes(N.value),F=N.icon?(0,s.iJ)(N.icon):void 0;return u.createElement(r,{size:E,disabled:I||v,active:y===N.value,key:`o.label-${W}`,"aria-label":N.ariaLabel,onChange:D(N),onClick:T(N),id:`option-${N.value}-${R}`,name:L.current,description:N.description,fullWidth:M,ref:y===N.value?A:void 0},F&&u.createElement(m.J,{name:F,className:w.icon}),N.imgUrl&&u.createElement("img",{src:N.imgUrl,alt:N.label,className:w.img}),N.label," ",N.component?u.createElement(N.component,null):null)}))}c.displayName="RadioButtonGroup";const g=p=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${p.components.input.borderColor}`,borderRadius:p.shape.borderRadius(),padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:t.css`
      margin-right: 6px;
    `,img:t.css`
      width: ${p.spacing(2)};
      height: ${p.spacing(2)};
      margin-right: ${p.spacing(1)};
    `})},32306:(G,O,e)=>{"use strict";e.d(O,{x:()=>f});var t=e(52423),n=e(82897),u=e(68404),s=e(29516);const i=({id:l,name:r,label:d,checked:c,disabled:g,description:p,onChange:y})=>{const h=(0,s.wW)(m);return u.createElement("label",{title:p,className:h.label},u.createElement("input",{id:l,name:r,type:"radio",checked:c,disabled:g,className:h.input,onChange:()=>y&&y(l)}),d)},m=l=>({input:t.css`
    position: relative;
    appearance: none;
    outline: none;
    background-color: ${l.colors.background.canvas};
    margin: 0;
    width: ${l.spacing(2)} !important; /* TODO How to overcome this? Checkbox does the same 🙁 */
    height: ${l.spacing(2)};
    border: 1px solid ${l.colors.border.medium};
    border-radius: 50%;
    margin: 3px 0; /* Space for box-shadow when focused */

    :checked {
      background-color: ${l.v1.palette.white};
      border: 5px solid ${l.colors.primary.main};
    }

    :disabled {
      background-color: ${l.colors.action.disabledBackground} !important;
      border-color: ${l.colors.border.weak};
    }

    :disabled:checked {
      border: 1px solid ${l.colors.border.weak};
    }

    :disabled:checked::after {
      content: '';
      width: 6px;
      height: 6px;
      background-color: ${l.colors.text.disabled};
      border-radius: 50%;
      display: inline-block;
      position: absolute;
      top: 4px;
      left: 4px;
    }

    :focus {
      outline: none !important;
      box-shadow: 0 0 0 1px ${l.colors.background.canvas}, 0 0 0 3px ${l.colors.primary.main};
    }
  `,label:t.css`
    font-size: ${l.typography.fontSize};
    line-height: 22px; /* 16px for the radio button and 6px for the focus shadow */
    display: grid;
    grid-template-columns: ${l.spacing(2)} auto;
    gap: ${l.spacing(1)};
  `});function f({name:l,id:r,options:d,value:c,onChange:g,className:p,disabled:y,disabledOptions:h=[]}){const a=(0,s.wW)(o),v=r??(0,n.uniqueId)("radiogroup-list-");return u.createElement("div",{id:r,className:(0,t.cx)(a.container,p),role:"radiogroup"},d.map((C,E)=>{const P=`${v}-${E}`,x=c&&c===C.value,M=y||h.some(D=>D===C.value),S=()=>g&&C.value&&g(C.value);return u.createElement(i,{key:P,id:P,name:l,label:C.label,description:C.description,checked:x,disabled:M,onChange:S})}))}const o=l=>({container:t.css`
    display: grid;
    gap: ${l.spacing(1)};
  `})},51821:(G,O,e)=>{"use strict";e.d(O,{GL:()=>u,RK:()=>s,ht:()=>m,iL:()=>o,nf:()=>i});var t=e(52423),n=e(19253);const u=l=>t.css`
  &:focus {
    ${(0,n.focusCss)(l)}
  }
`,s=(l,r=!1)=>{const d=r?l.colors.error.border:l.components.input.borderColor,c=r?l.colors.error.shade:l.components.input.borderHover,g=l.components.input.background,p=l.components.input.text,y=l.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(i(l),t.css`
      background: ${g};
      line-height: ${l.typography.body.lineHeight};
      font-size: ${l.typography.size.md};
      color: ${p};
      border: 1px solid ${d};

      &:-webkit-autofill,
      &:-webkit-autofill:hover {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${g}!important;
        -webkit-text-fill-color: ${p} !important;
        border-color: ${y};
      }

      &:-webkit-autofill:focus {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: 0 0 0 2px ${l.colors.background.primary}, 0 0 0px 4px ${l.colors.primary.main},
          inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${g}!important;
        -webkit-text-fill-color: ${p} !important;
      }

      &:hover {
        border-color: ${c};
      }

      &:focus {
        outline: none;
      }

      &:disabled {
        background-color: ${l.colors.action.disabledBackground};
        color: ${l.colors.action.disabledText};
        border: 1px solid ${l.colors.action.disabledBackground};

        &:hover {
          border-color: ${d};
        }
      }

      &::placeholder {
        color: ${l.colors.text.disabled};
        opacity: 1;
      }
    `)},i=l=>t.css`
    padding: ${l.spacing(0,1,0,1)};
  `,m=()=>({sm:t.css`
      width: ${f("sm")};
    `,md:t.css`
      width: ${f("md")};
    `,lg:t.css`
      width: ${f("lg")};
    `,auto:t.css`
      width: ${f("auto")};
    `}),f=l=>{switch(l){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function o(l,r){switch(l){case"sm":return{padding:1,fontSize:r.typography.size.sm,height:r.components.height.sm};case"lg":return{padding:3,fontSize:r.typography.size.lg,height:r.components.height.lg};case"md":default:return{padding:2,fontSize:r.typography.size.md,height:r.components.height.md}}}},51874:(G,O,e)=>{"use strict";e.d(O,{a:()=>p});var t=e(21256),n=e.n(t),u=e(68404),s=e(20112),i=e(66847),m=e(24177),f=e(80369),o=e(90723),l=e(66926),r=e(58230);const d={mode:m.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function c(y,h,a){const v=a!=null,C=Math.min(y*.15/1.5,20),E=C*1.5,P=v?h-E:h,x=Math.min(P,y);return{showLabel:v,gaugeHeight:x,titleFontSize:C}}function g(y,h,a,v){if(h.color?.mode!==l.S.Thresholds)return[{value:h.min??i.Hx,color:a.color??l.R}];const C=h.thresholds??d,E=C.mode===m.H.Percentage,P=C.steps;let x=h.min??i.Hx,M=h.max??i.Z3;E&&(x=0,M=100);const S=(0,r.m1)(x,P),D=(0,r.m1)(M,P),T=[{value:+x.toFixed(y),color:v.visualization.getColorByName(S.color)}];let R=!0;for(let L=0;L<P.length;L++){const w=P[L];if(R){S===w&&(R=!1);continue}const A=P[L-1];if(T.push({value:w.value,color:v.visualization.getColorByName(A.color)}),w===D)break}return T.push({value:+M.toFixed(y),color:v.visualization.getColorByName(D.color)}),T}class p extends u.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:h,value:a,height:v,onClick:C,text:E,theme:P}=this.props,x=c(h,v,a.title),M=u.createElement("div",{style:{height:`${x.gaugeHeight}px`,width:"100%"},ref:S=>this.canvasElement=S});return u.createElement(u.Fragment,null,C?u.createElement("button",{className:(0,o.gN)(P),type:"button",onClick:C},M):M,x.showLabel&&u.createElement("div",{style:{textAlign:"center",fontSize:E?.titleSize??x.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"}},a.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:h,showThresholdLabels:a,showThresholdMarkers:v,width:C,height:E,theme:P,value:x}=this.props,M=c(C,E,x.title),S=Math.min(C,M.gaugeHeight),D=P.colors.background.secondary,T=a?1.5:1,R=Math.min(S/5.5,40)/T,L=R/5,w=(0,s.zc)(x),N=Math.min(C,S*1.3)*.9-((R+(v?L:0)+(a?10:0))*2+10),W=this.props.text?.valueSize??(0,f.MX)(w,N,S,1,R*1.7),I=Math.max(W/2.5,12);let F=h.min??i.Hx,V=h.max??i.Z3,b=x.numeric;h.thresholds?.mode===m.H.Percentage&&(F=0,V=100,x.percent===void 0?b=(b-F)/(V-F)*100:b=x.percent*100);const X=h.decimals===void 0?2:h.decimals;v&&(F=+F.toFixed(X),V=+V.toFixed(X));const k={series:{gauges:{gauge:{min:F,max:V,neutralValue:h.custom?.neutral,background:{color:D},border:{color:null},shadow:{show:!1},width:R},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:g(X,h,x,P),label:{show:a,margin:L+1,font:{size:I}},show:v,width:L},value:{color:x.color,formatter:()=>w,font:{size:W,family:P.typography.fontFamily}},show:!0}}},H={data:[[0,b]],label:x.title};try{this.canvasElement&&n().plot(this.canvasElement,[H],k)}catch(Y){console.error("Gauge rendering error",Y,k,x)}}render(){return u.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}p.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:d}}},36562:(G,O,e)=>{"use strict";e.d(O,{k:()=>h});var t=e(21256),n=e.n(t),u=e(82897),s=e(68404),i=e(68219),m=e(40538),f=e(95193),o=e(77312),l=e(78873),r=e(62999);const d=({dimensions:v,activeDimensions:C,pos:E,timeZone:P})=>{let x=null;if(C.xAxis===null)return null;C.yAxis&&(x=C.yAxis[0]);const M=C.xAxis[1]?(0,i.jC)(v.xAxis,C.xAxis[0],C.xAxis[1]):E.x,S=(0,r.wu)(v.yAxis.columns,v.xAxis.columns,M,P),D=S.time,T=S.results.map((R,L)=>({color:R.color,label:R.label,value:R.value,isActive:x===L}));return s.createElement(l.c,{series:T,timestamp:D})};d.displayName="MultiModeGraphTooltip";var c=e(20112),g=e(89890);const p=({dimensions:v,activeDimensions:C,timeZone:E})=>{if(C.yAxis===null||C.yAxis[1]===void 0||C.xAxis===null||C.xAxis[1]===void 0)return null;const P=(0,i.jC)(v.xAxis,C.xAxis[0],C.xAxis[1]),x=(0,i.$q)(v.xAxis,C.xAxis[0]),M=x.display?(0,c.zc)(x.display(P)):P,S=(0,i.$q)(v.yAxis,C.yAxis[0]),D=(0,i.jC)(v.yAxis,C.yAxis[0],C.yAxis[1]),T=S.display,R=T(D);return s.createElement(l.c,{series:[{color:R.color,label:(0,g.C)(S),value:(0,c.zc)(R)}],timestamp:M})};p.displayName="SingleModeGraphTooltip";const y=({mode:v=m.f3.Single,dimensions:C,activeDimensions:E,pos:P,timeZone:x})=>!E||!E.xAxis?null:v==="single"?s.createElement(p,{dimensions:C,activeDimensions:E,timeZone:x}):s.createElement(d,{dimensions:C,activeDimensions:E,pos:P,timeZone:x});y.displayName="GraphTooltip";class h extends s.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.onPlotSelected=(C,E)=>{const{onHorizontalRegionSelected:P}=this.props;P&&P(E.xaxis.from,E.xaxis.to)},this.onPlotHover=(C,E,P)=>{this.setState({isTooltipVisible:!0,activeItem:P,pos:E})},this.onPlotClick=(C,E,P)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:P,contextPos:E})},this.renderTooltip=()=>{const{children:C,series:E,timeZone:P}=this.props,{pos:x,activeItem:M,isTooltipVisible:S}=this.state;let D=null;if(!S||!x||E.length===0||(s.Children.forEach(C,F=>{if(D)return;(F&&F.type&&(F.type.displayName||F.type.name))===f.I.displayName&&(D=F)}),!D))return null;const T=D.props,R=T.mode||"single";if(!M&&R==="single")return null;const L=T.tooltipComponent||y,w=M?M.series.seriesIndex:0,A=M?M.dataIndex:void 0,N={xAxis:[w,A],yAxis:M?[M.series.seriesIndex,M.dataIndex]:null},W={dimensions:{xAxis:(0,i.q2)("xAxis",E.map(F=>F.timeField)),yAxis:(0,i.q2)("yAxis",E.map(F=>F.valueField))},activeDimensions:N,pos:x,mode:T.mode||m.f3.Single,timeZone:P},I=s.createElement(L,{...W});return s.cloneElement(D,{content:I,position:{x:x.pageX,y:x.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:C}=this.props,{contextPos:E,contextItem:P,isContextVisible:x}=this.state;if(!x||!E||!P||C.length===0)return null;const M=P?P.series.seriesIndex:0,S=P?P.dataIndex:void 0,D={xAxis:[M,S],yAxis:P?[P.series.seriesIndex,P.dataIndex]:null},T={xAxis:(0,i.q2)("xAxis",C.map(A=>A.timeField)),yAxis:(0,i.q2)("yAxis",C.map(A=>A.valueField))},R=()=>this.setState({isContextVisible:!1}),L=()=>({datapoint:P.datapoint,dataIndex:P.dataIndex,series:P.series,seriesIndex:P.series.seriesIndex,pageX:E.pageX,pageY:E.pageY}),w={x:E.pageX,y:E.pageY,onClose:R,getContextMenuSource:L,timeZone:this.props.timeZone,dimensions:T,contextDimensions:D};return s.createElement(o.w,{...w})},this.getBarWidth=()=>{const{series:C}=this.props;return Math.min(...C.map(E=>E.timeStep))}}componentDidUpdate(C,E){C!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(C){return C.length===0?[{show:!0,min:-1,max:1}]:(0,u.uniqBy)(C.map(E=>{const P=E.yAxis?E.yAxis.index:1,x=E.yAxis&&E.yAxis.min&&!isNaN(E.yAxis.min)?E.yAxis.min:null,M=E.yAxis&&E.yAxis.tickDecimals&&!isNaN(E.yAxis.tickDecimals)?E.yAxis.tickDecimals:null;return{show:!0,index:P,position:P===1?"left":"right",min:x,tickDecimals:M}}),E=>E.index)}draw(){if(this.element===null)return;const{width:C,series:E,timeRange:P,showLines:x,showBars:M,showPoints:S,isStacked:D,lineWidth:T,timeZone:R,onHorizontalRegionSelected:L}=this.props;if(!C)return;const w=C/100,A=P.from.valueOf(),N=P.to.valueOf(),W=this.getYAxes(E),I={legend:{show:!1},series:{stack:D,lines:{show:x,lineWidth:T,zero:!1},points:{show:S,fill:1,fillColor:!1,radius:2},bars:{show:M,fill:1,barWidth:M?this.getBarWidth()/1.5:1,zero:!1,lineWidth:T},shadowSize:0},xaxis:{timezone:R,show:!0,mode:"time",min:A,max:N,label:"Datetime",ticks:w,timeformat:(0,r.mc)(w,A,N),tickFormatter:r.sV},yaxes:W,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:L?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,E.filter(F=>F.isVisible),I)}catch(F){throw console.error("Graph rendering error",F,I,E),new Error("Error rendering panel")}}render(){const{ariaLabel:C,height:E,width:P,series:x}=this.props,M=x.length===0,S=this.renderTooltip(),D=this.renderContextMenu();return s.createElement("div",{className:"graph-panel","aria-label":C},s.createElement("div",{className:"graph-panel__chart",ref:T=>this.element=T,style:{height:E,width:P},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),M&&s.createElement("div",{className:"datapoints-warning"},"No data"),S,D)}}h.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const a=null},77312:(G,O,e)=>{"use strict";e.d(O,{b:()=>g,w:()=>c});var t=e(52423),n=e(68404),u=e(68219),s=e(38849),i=e(29516),m=e(67303),f=e(4395),o=e(90701),l=e(75182),r=e(87302),d=e(86888);const c=({getContextMenuSource:y,timeZone:h,itemsGroup:a,dimensions:v,contextDimensions:C,...E})=>{const P=y(),x=a?a.map(D=>({...D,items:D.items?.filter(T=>T.label)})):[],M=()=>{if(!P)return null;let D;if(v?.yAxis&&C?.yAxis?.[1]){const R=(0,u.jC)(v.yAxis,C.yAxis[0],C.yAxis[1]),L=P.series.valueField.display;D=L(R)}const T=(0,s.dq)(P.datapoint[0],{defaultWithMS:P.series.hasMsResolution,timeZone:h});return n.createElement(g,{timestamp:T,seriesColor:P.series.color,displayName:P.series.alias||P.series.label,displayValue:D})},S=()=>x?.map((D,T)=>n.createElement(l.k,{key:`${D.label}${T}`,label:D.label},(D.items||[]).map(R=>n.createElement(r.s,{key:`${R.label}`,url:R.url,label:R.label,target:R.target,icon:R.icon,active:R.active,onClick:R.onClick}))));return n.createElement(m.x,{...E,renderMenuItems:S,renderHeader:M})},g=({timestamp:y,seriesColor:h,displayName:a,displayValue:v})=>{const C=(0,i.wW)(p);return n.createElement("div",{className:C.wrapper},n.createElement("strong",null,y),n.createElement(o.Lh,null,n.createElement("div",null,n.createElement(d.F,{color:h}),n.createElement("span",{className:C.displayName},a)),v&&n.createElement(f.W,{value:v})))};function p(y){return{wrapper:t.css`
      padding: ${y.spacing(.5)} ${y.spacing(1)};
      font-size: ${y.typography.size.sm};
      z-index: ${y.zIndex.tooltip};
    `,displayName:t.css`
      white-space: nowrap;
      padding-left: ${y.spacing(.5)};
    `}}},61937:(G,O,e)=>{"use strict";e.d(O,{U:()=>s});var t=e(82897),n=e.n(t),u=e(68404);class s extends u.Component{constructor(m){super(m),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:m.series}}componentDidUpdate(m){const{series:f}=this.props;(0,t.isEqual)(m.series,f)||this.setState({hiddenSeries:[],toggledSeries:f})}onSeriesToggle(m,f){const{series:o,onHiddenSeriesChanged:l}=this.props,{hiddenSeries:r}=this.state;if(f.ctrlKey||f.metaKey||f.shiftKey){const p=r.indexOf(m)>-1?r.filter(h=>h!==m):r.concat([m]),y=o.map(h=>({...h,isVisible:p.indexOf(h.label)===-1}));this.setState({hiddenSeries:p,toggledSeries:y},()=>l?l(p):void 0);return}const d=o.map(p=>p.label),c=r.length+1===d.length?[]:(0,t.difference)(d,[m]),g=o.map(p=>({...p,isVisible:c.indexOf(p.label)===-1}));this.setState({hiddenSeries:c,toggledSeries:g},()=>l?l(c):void 0)}render(){const{children:m}=this.props,{toggledSeries:f}=this.state;return m({onSeriesToggle:this.onSeriesToggle,toggledSeries:f})}}},63599:(G,O,e)=>{"use strict";e.d(O,{U:()=>l});var t=e(52423),n=e(68404),u=e(82385),s=e(49938),i=e(21987),m=e(36562);const f=(0,u.B)(({placement:r})=>({wrapper:t.css`
    display: flex;
    flex-direction: ${r==="bottom"?"column":"row"};
  `,graphContainer:t.css`
    min-height: 65%;
    flex-grow: 1;
  `,legendContainer:t.css`
    padding: 10px 0;
    max-height: ${r==="bottom"?"35%":"none"};
  `})),o=(r,d=!1,c=!1)=>{const g=r.reduce((y,h)=>y+(h[1]||0),0)===0,p=!r.reduce((y,h)=>y&&h[1]!==null,!0);return d&&p||c&&g},l=r=>{const{series:d,timeRange:c,width:g,height:p,showBars:y,showLines:h,showPoints:a,sortLegendBy:v,sortLegendDesc:C,legendDisplayMode:E,legendVisibility:P,placement:x,onSeriesToggle:M,onToggleSort:S,hideEmpty:D,hideZero:T,isStacked:R,lineWidth:L,onHorizontalRegionSelected:w,timeZone:A,children:N,ariaLabel:W}=r,{graphContainer:I,wrapper:F,legendContainer:V}=f(r),b=d.reduce((X,k)=>o(k.data,D,T)?X:X.concat([{label:k.label,color:k.color||"",disabled:!k.isVisible,yAxis:k.yAxis.index,getDisplayValues:()=>k.info||[]}]),[]);return n.createElement("div",{className:F,"aria-label":W},n.createElement("div",{className:I},n.createElement(m.k,{series:d,timeRange:c,timeZone:A,showLines:h,showPoints:a,showBars:y,width:g,height:p,isStacked:R,lineWidth:L,onHorizontalRegionSelected:w},N)),P&&n.createElement("div",{className:V},n.createElement(s.$,{hideHorizontalTrack:!0},n.createElement(i.l,{items:b,displayMode:E,placement:x,sortBy:v,sortDesc:C,onLabelClick:(X,k)=>{M&&M(X.label,k)},onToggleSort:S}))))}},62999:(G,O,e)=>{"use strict";e.d(O,{mc:()=>o,sV:()=>f,wu:()=>m});var t=e(20112),n=e(89890),u=e(38849),s=e(47513);const i=(l,r)=>{let d=0,c=l.values.length-1,g;for(;;){if(d>c)return Math.max(c,0);g=Math.floor((d+c)/2);const p=l.values.get(g);if(p===r)return g;p&&p<r?d=g+1:c=g-1}},m=(l,r,d,c)=>{let g,p,y,h,a;const v=[];let C,E;for(g=0;g<l.length;g++){p=l[g];const P=r[g];y=i(P,d),h=d-P.values.get(y),a=P.values.get(y),(C===void 0||h>=0&&(h<C||C<0)||h<0&&h>C)&&(C=h,E=P.display?(0,t.zc)(P.display(a)):a);const x=p.display(p.values.get(y));v.push({value:(0,t.zc)(x),datapointIndex:y,seriesIndex:g,color:x.color,label:(0,n.C)(p),time:P.display?(0,t.zc)(P.display(a)):a})}return{results:v,time:E}},f=(l,r)=>(0,u.dq)(l,{format:r?.options?.timeformat,timeZone:r?.options?.timezone}),o=(l,r,d)=>{if(r&&d&&l){const c=d-r,g=c/l/1e3,p=86400010,y=31536e6;return g<=10?s.U6.interval.millisecond:g<=45?s.U6.interval.second:c<=p?s.U6.interval.minute:g<=8e4?s.U6.interval.hour:c<=y?s.U6.interval.day:g<=31536e3?s.U6.interval.month:s.U6.interval.year}return s.U6.interval.minute}},67043:(G,O,e)=>{"use strict";e.d(O,{d:()=>y,j:()=>g});var t=e(68404),n=e(95484),u=e(95027),s=e(3249),i=e(85854),m=e(55294),f=e(25318),o=e(71235),l=e(85623),r=e(43921),d=e(31451),c=e(90941);const g="__fixed";function p(h,a,v=[]){for(const C of v)if(typeof C=="function"){if(!C(h,a))return!1}else if(a[C]!==h[C])return!1;return!0}class y extends t.Component{constructor(a){super(a),this.panelContext={},this.subscription=new n.w0,this.getTimeRange=()=>this.props.timeRange;let v=this.prepState(a);v.alignedData=v.config.prepData([v.alignedFrame]),this.state=v,this.plotInstance=t.createRef()}prepState(a,v=!0){let C=null;const{frames:E,fields:P,preparePlotFrame:x}=a,S=(x||c.R)(E,P||{x:s.Ls.get(i.mi.firstTimeField).get({}),y:s.Ls.get(i.mi.numeric).get({})},a.timeRange);if((0,d.Zp)("GraphNG",!1,"data aligned",S),S){let D=this.state?.config;v&&(D=a.prepConfig(S,this.props.frames,this.getTimeRange),(0,d.Zp)("GraphNG",!1,"config prepared",D)),C={alignedFrame:S,config:D},(0,d.Zp)("GraphNG",!1,"data prepared",C.alignedData)}return C}handleCursorUpdate(a){const v=a.payload?.point?.time,C=this.plotInstance.current;if(C&&v){const E=C.valToPos(v,"x");let P;if(E&&(P=(0,d.ah)(C,C.posToIdx(E))),!P||!E)return;C.setCursor({left:E,top:P})}}componentDidMount(){this.panelContext=this.context;const{eventBus:a}=this.panelContext;this.subscription.add(a.getStream(m.es).pipe((0,u.p)(50)).subscribe({next:v=>{a!==v.origin&&this.handleCursorUpdate(v)}})),this.subscription.add(a.getStream(f.IA).pipe((0,u.p)(50)).subscribe({next:v=>this.handleCursorUpdate(v)})),this.subscription.add(a.getStream(m.xH).pipe((0,u.p)(50)).subscribe({next:()=>{const v=this.plotInstance?.current;v&&v.setCursor({left:-10,top:-10})}}))}componentDidUpdate(a){const{frames:v,structureRev:C,timeZone:E,propsToDiff:P}=this.props,x=!p(a,this.props,P);if(v!==a.frames||x||E!==a.timeZone){let M=this.prepState(this.props,!1);M&&((this.state.config===void 0||E!==a.timeZone||C!==a.structureRev||!C||x)&&(M.config=this.props.prepConfig(M.alignedFrame,this.props.frames,this.getTimeRange),(0,d.Zp)("GraphNG",!1,"config recreated",M.config)),M.alignedData=M.config.prepData([M.alignedFrame]),this.setState(M))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:a,height:v,children:C,timeRange:E,renderLegend:P}=this.props,{config:x,alignedFrame:M,alignedData:S}=this.state;return x?t.createElement(l.AY,{width:a,height:v,legend:P(x)},(D,T)=>t.createElement(r.N,{config:x,data:S,width:D,height:T,timeRange:E,plotRef:R=>this.plotInstance.current=R},C?C(x,M):null)):null}}y.contextType=o.bb},79242:(G,O,e)=>{"use strict";e.d(O,{z:()=>u});var t=e(68404);const n=t.createContext({}),u=()=>{const{data:s,dimFields:i,mapSeriesIndexToDataFrameFieldIndex:m}=(0,t.useContext)(n),f=(0,t.useCallback)(()=>{const o=i.x;let l=null;for(let r=0;r<s.fields.length;r++)if(o(s.fields[r],s,[s])){l=s.fields[r];break}return l},[s,i]);return{dimFields:i,mapSeriesIndexToDataFrameFieldIndex:m,getXAxisField:f,alignedData:s}}},41917:(G,O,e)=>{"use strict";e.d(O,{w:()=>i});var t=e(14582),n=e(19695),u=e(15128);const s={threshold:(f,o,l)=>f+l,midpoint:(f,o,l)=>(f+o)/2,plusone:(f,o,l)=>f+1};function i(f){if(f.frame.length===0)return f.frame;let o=!0,{frame:l,refFieldName:r,refFieldPseudoMax:d,refFieldPseudoMin:c,insertMode:g}=f;g||(g=s.threshold);const p=l.fields.find(a=>r!=null?a.name===r:a.type===t.fS.time);if(p==null)return l;p.state={...p.state,nullThresholdApplied:!0};const y=l.fields.map(a=>a.config.custom?.insertNulls??p.config.interval??null),h=new Set(y);if(h.delete(null),h.size===0)return l;if(h.size===1){const a=h.values().next().value;if(a<=0)return l;const v=p.values.toArray(),C=l.fields.map(P=>P.values.toArray()),E=m(v,C,a,c,d,g,o);return E===C?l:{...l,length:E[0].length,fields:l.fields.map((P,x)=>({...P,values:new n.G(E[x])}))}}return l}function m(f,o,l,r=null,d=null,c,g){const p=f.length,y=[];if(r!=null&&r<f[0]){let C=(0,u.mB)(r,l);for(;C<f[0];)y.push(c(C-l,C,l)),C+=l}y.push(f[0]);let h=f[0];for(let C=1;C<p;C++){const E=f[C];for(;E-h>l&&(y.push(c(h,E,l)),h+=l,!!g););y.push(E),h=E}if(d!=null&&d>h)for(;h+l<d;)y.push(c(h,d,l)),h+=l;const a=y.length;if(a===p)return o;const v=[];for(let C of o){let E;if(C!==f){E=Array(a);for(let P=0,x=0;P<a;P++)E[P]=f[x]===y[P]?C[x++]:null}else E=y;v.push(E)}return v}},70994:(G,O,e)=>{"use strict";e.d(O,{I:()=>n});var t=e(19695);function n(u){return{...u,fields:u.fields.map(s=>{const i=+s.config?.noValue;if(Number.isNaN(i))return s;{const m=s.values.toArray().slice();for(let f=0;f<m.length;f++)m[f]===null&&(m[f]=i);return{...s,values:new t.G(m)}}})}}},90941:(G,O,e)=>{"use strict";e.d(O,{z:()=>d,R:()=>r});var t=e(14582),n=e(19695),u=e(98234),s=e(40538),i=e(67043),m=e(41917);function f(g,p,y){let h,a;for(let v=0;v<p.length;v++)if(p[v]==null)a==null&&h!=null&&(a=v);else{if(a!=null){if(g[v]-h<y)for(;a<v;)p[a++]=void 0;a=null}h=g[v]}return p}function o(g){return g.type===t.fS.number&&g.config.custom?.drawStyle===s.l8.Bars&&!g.config.custom?.hideFrom?.viz}function l(g){let p=g.fields.find(h=>h.type===t.fS.time),y=p?.values.toArray();for(let h=0;h<g.fields.length;h++){let a=g.fields[h];if(a===p||o(a))continue;let v=a.config.custom?.spanNulls;typeof v=="number"&&v!==-1&&(a.values=new n.G(f(y,a.values.toArray(),v)))}return g}function r(g,p,y){g=g.map(C=>C.fields[0].state?.nullThresholdApplied?C:(0,m.w)({frame:C,refFieldName:null,refFieldPseudoMin:y?.from.valueOf(),refFieldPseudoMax:y?.to.valueOf()}));let h=0;g.forEach(C=>{C.fields.forEach(E=>{o(E)&&(E.config.custom={...E.config.custom,spanNulls:-1},h++)})});let a=1/0;h>1&&g.forEach(C=>{if(!C.fields.some(o))return;const E=C.fields[0].values.toArray();for(let P=0;P<E.length;P++)P>0&&(a=Math.min(a,E[P]-E[P-1]))});let v=(0,u._9)({frames:g,joinBy:p.x,keep:p.y,keepOriginIndices:!0});return v?(v=l(v),a!==1/0&&(v.fields.forEach((C,E)=>{let P=C.values.toArray();if(E===0){let x=P[P.length-1];P.push(x+a,x+2*a)}else o(C)?P.push(null,null):P.push(void 0,void 0)}),v.length+=2),v):null}function d(g){const p="na",y=`${g.min!==void 0?g.min:p}-${g.max!==void 0?g.max:p}`,h=`${g.custom?.axisSoftMin!==void 0?g.custom.axisSoftMin:p}-${g.custom?.axisSoftMax!==void 0?g.custom.axisSoftMax:p}`,a=`${g.custom?.axisPlacement!==void 0?g.custom?.axisPlacement:s.LB.Auto}`,v=g.unit??i.j,C=g.custom?.scaleDistribution?c(g.custom.scaleDistribution):s.wf.Linear,E=Boolean(g.custom?.axisLabel)?g.custom.axisLabel:p;return`${v}/${y}/${h}/${a}/${C}/${E}`}function c(g){return g.type===s.wf.Log?`${g.type}${g.log}`:g.type}},81697:(G,O,e)=>{"use strict";e.d(O,{J:()=>sa});var t=e(52423),n=e(68404),u=e(95148),s=e(43565),i=e(29516),m=e(15424),f=e(13143),o=e(78996),l=e(77234),r=e(21209),d=e(29739),c=e(74081),g=e(62109),p=e(17868),y=e(58677),h=e(86174),a=e(85083),v=e(97690),C=e(47547),E=e(93314),P=e(88287),x=e(77441),M=e(85733),S=e(90055),D=e(42417),T=e(77406),R=e(82425),L=e(90942),w=e(55950),A=e(27825),N=e(4769),W=e(41556),I=e(9252),F=e(22770),V=e(85012),b=e(66822),X=e(60807),k=e(75420),H=e(59487),Y=e(52089),ee=e(11279),ue=e(27590),q=e(95155),ge=e(22904),De=e(77803),fe=e(17072),me=e(43228),ce=e(80718),ie=e(2825),re=e(6539),Ee=e(98719),J=e(91992),te=e(7551),ne=e(49743),j=e(29111),be=e(17231),Le=e(62757),Qe=e(84080),Ye=e(56225),de=e(40826),Be=e(36462),Ve=e(77889),$e=e(79422),We=e(65829),Ke=e(59174),qe=e(62540),Xe=e(45890),at=e(71400),Ze=e(93457),lt=e(61420),nt=e(73820),_e=e(35776),ut=e(29858),rt=e(4668),je=e(59070),dt=e(57402),oe=e(78199),Se=e(36524),Re=e(86393),ze=e(30682),ve=e(28087),Te=e(23340),he=e(28306),pe=e(70601),ye=e(93086),Oe=e(58604),Ne=e(77361),Me=e(22260),Ae=e(17018),we=e(56015),ke=e(86100),st=e(13337),Et=e(10211),Pt=e(52682),gt=e(80166),Ct=e(2172),Ot=e(71136),Ft=e(88039),jt=e(94619),En=e(24982),xn=e(24787),Cn=e(51525),bn=e(20832),Tn=e(85130),Zn=e(66374),Bn=e(82335),Sn=e(78794),wn=e(19760),$n=e(43878),Xn=e(96417),ba=e(60779),hn=e(70672),Kn=e(32283),ta=e(27767),La=e(23452),oa=e(27926),ha=e(34737),ia=e(84497),Rt=e(14565),Lt=e(32503),At=e(76444),kt=e(78017),Zt=e(77632),Qt=e(56568),Jt=e(93656),rn=e(35270),mn=e(30417),Xt=e(88494),fn=e(29636),In=e(44011),Yn=e(89679),Vn=e(71492),_n=e(60222),va=e(49856),Fa=e(55009),Ea=e(74523),Ma=e(70577),Za=e(83707),ca=e(38776),Ja=e(81334),qa=e(61081),Va=e(6015),Xa=e(37324),fs=e(5311),ls=e(90594),cs=e(8614),gs=e(46485),ya=e(49171),za=e(92912),Pa=e(46938),Jn=e(54613),ps=e(49905),Ha=e(86622),fa=e(40415),Bs=e(45088),Ca=e(87161),Sa=e(4034),is=e(76051),An=e(56202),ds=e(7045),ws=e(61844),ks=e(97746),Ns=e(85552),rr=e(92210);let or=!1,Gs="public/img/icons/";function Wt(ts,ns){u.V[Gs+ns]={content:ts,status:"loaded"}}function Zs(){or=!0;const ts=typeof window<"u"&&window.__grafana_public_path__;ts&&(Gs=ts+"img/icons/"),Wt(m,"unicons/adjust-circle.svg"),Wt(f,"unicons/angle-double-down.svg"),Wt(o,"unicons/angle-double-right.svg"),Wt(l,"unicons/angle-down.svg"),Wt(r,"unicons/angle-left.svg"),Wt(d,"unicons/angle-right.svg"),Wt(c,"unicons/angle-up.svg"),Wt(g,"unicons/apps.svg"),Wt(p,"unicons/arrow.svg"),Wt(y,"unicons/arrow-down.svg"),Wt(h,"unicons/arrow-from-right.svg"),Wt(a,"unicons/arrow-left.svg"),Wt(v,"unicons/arrow-random.svg"),Wt(C,"unicons/arrow-right.svg"),Wt(E,"unicons/arrow-up.svg"),Wt(P,"unicons/arrows-h.svg"),Wt(x,"unicons/backward.svg"),Wt(M,"unicons/bars.svg"),Wt(S,"unicons/bell.svg"),Wt(D,"unicons/bell-slash.svg"),Wt(T,"unicons/bolt.svg"),Wt(R,"unicons/book.svg"),Wt(L,"unicons/book-open.svg"),Wt(w,"unicons/brackets-curly.svg"),Wt(A,"unicons/bug.svg"),Wt(N,"unicons/building.svg"),Wt(W,"unicons/calculator-alt.svg"),Wt(I,"unicons/calendar-alt.svg"),Wt(F,"unicons/camera.svg"),Wt(V,"unicons/channel-add.svg"),Wt(b,"unicons/chart-line.svg"),Wt(X,"unicons/check.svg"),Wt(k,"unicons/check-circle.svg"),Wt(H,"unicons/circle.svg"),Wt(Y,"unicons/clipboard-alt.svg"),Wt(ee,"unicons/clock-nine.svg"),Wt(ue,"unicons/cloud.svg"),Wt(q,"unicons/cloud-download.svg"),Wt(ge,"unicons/code-branch.svg"),Wt(De,"unicons/cog.svg"),Wt(fe,"unicons/columns.svg"),Wt(me,"unicons/comment-alt.svg"),Wt(ce,"unicons/comment-alt-share.svg"),Wt(ie,"unicons/comments-alt.svg"),Wt(re,"unicons/compass.svg"),Wt(Ee,"unicons/copy.svg"),Wt(J,"unicons/cube.svg"),Wt(te,"unicons/dashboard.svg"),Wt(ne,"unicons/database.svg"),Wt(j,"unicons/document-info.svg"),Wt(be,"unicons/download-alt.svg"),Wt(Le,"unicons/draggabledots.svg"),Wt(Qe,"unicons/edit.svg"),Wt(Ye,"unicons/ellipsis-v.svg"),Wt(de,"unicons/envelope.svg"),Wt(Be,"unicons/exchange-alt.svg"),Wt(Ve,"unicons/exclamation-triangle.svg"),Wt($e,"unicons/external-link-alt.svg"),Wt(We,"unicons/eye.svg"),Wt(Ke,"unicons/eye-slash.svg"),Wt(qe,"unicons/file-alt.svg"),Wt(Xe,"unicons/file-blank.svg"),Wt(at,"unicons/filter.svg"),Wt(Ze,"unicons/folder.svg"),Wt(lt,"unicons/folder-open.svg"),Wt(nt,"unicons/folder-plus.svg"),Wt(_e,"unicons/folder-upload.svg"),Wt(ut,"unicons/forward.svg"),Wt(rt,"unicons/graph-bar.svg"),Wt(je,"unicons/history.svg"),Wt(dt,"unicons/home-alt.svg"),Wt(oe,"unicons/import.svg"),Wt(Se,"unicons/info.svg"),Wt(Re,"unicons/info-circle.svg"),Wt(ze,"unicons/k6.svg"),Wt(ve,"unicons/key-skeleton-alt.svg"),Wt(Te,"unicons/keyboard.svg"),Wt(he,"unicons/link.svg"),Wt(pe,"unicons/list-ul.svg"),Wt(ye,"unicons/lock.svg"),Wt(Oe,"unicons/minus.svg"),Wt(Ne,"unicons/minus-circle.svg"),Wt(Me,"unicons/mobile-android.svg"),Wt(Ae,"unicons/monitor.svg"),Wt(we,"unicons/pause.svg"),Wt(ke,"unicons/pen.svg"),Wt(st,"unicons/play.svg"),Wt(Et,"unicons/plug.svg"),Wt(Pt,"unicons/plus.svg"),Wt(gt,"unicons/plus-circle.svg"),Wt(Ct,"unicons/power.svg"),Wt(Ot,"unicons/presentation-play.svg"),Wt(Ft,"unicons/process.svg"),Wt(jt,"unicons/question-circle.svg"),Wt(En,"unicons/repeat.svg"),Wt(xn,"unicons/rocket.svg"),Wt(Cn,"unicons/save.svg"),Wt(bn,"unicons/search.svg"),Wt(Tn,"unicons/search-minus.svg"),Wt(Zn,"unicons/search-plus.svg"),Wt(Bn,"unicons/share-alt.svg"),Wt(Sn,"unicons/shield.svg"),Wt(wn,"unicons/signal.svg"),Wt($n,"unicons/signin.svg"),Wt(Xn,"unicons/signout.svg"),Wt(ba,"unicons/sitemap.svg"),Wt(hn,"unicons/slack.svg"),Wt(Kn,"unicons/sliders-v-alt.svg"),Wt(ta,"unicons/sort-amount-down.svg"),Wt(La,"unicons/sort-amount-up.svg"),Wt(oa,"unicons/square-shape.svg"),Wt(ha,"unicons/star.svg"),Wt(ia,"unicons/step-backward.svg"),Wt(Rt,"unicons/sync.svg"),Wt(Lt,"unicons/table.svg"),Wt(At,"unicons/tag-alt.svg"),Wt(kt,"unicons/times.svg"),Wt(Zt,"unicons/trash-alt.svg"),Wt(Qt,"unicons/unlock.svg"),Wt(Jt,"unicons/upload.svg"),Wt(rn,"unicons/user.svg"),Wt(mn,"unicons/users-alt.svg"),Wt(Xt,"unicons/wrap-text.svg"),Wt(fn,"unicons/cloud-upload.svg"),Wt(In,"unicons/credit-card.svg"),Wt(Yn,"unicons/file-copy-alt.svg"),Wt(Vn,"unicons/fire.svg"),Wt(_n,"unicons/hourglass.svg"),Wt(va,"unicons/layer-group.svg"),Wt(Fa,"unicons/line-alt.svg"),Wt(Ea,"unicons/list-ui-alt.svg"),Wt(Ma,"unicons/message.svg"),Wt(Za,"unicons/palette.svg"),Wt(ca,"unicons/percentage.svg"),Wt(Ja,"unicons/shield-exclamation.svg"),Wt(qa,"unicons/plus-square.svg"),Wt(Va,"unicons/x.svg"),Wt(Xa,"unicons/capture.svg"),Wt(fs,"custom/gf-grid.svg"),Wt(ls,"custom/gf-landscape.svg"),Wt(cs,"custom/gf-layout-simple.svg"),Wt(gs,"custom/gf-portrait.svg"),Wt(ya,"custom/gf-bar-alignment-after.svg"),Wt(za,"custom/gf-bar-alignment-before.svg"),Wt(Pa,"custom/gf-bar-alignment-center.svg"),Wt(Jn,"custom/gf-interpolation-linear.svg"),Wt(ps,"custom/gf-interpolation-smooth.svg"),Wt(Ha,"custom/gf-interpolation-step-after.svg"),Wt(fa,"custom/gf-interpolation-step-before.svg"),Wt(Bs,"custom/gf-logs.svg"),Wt(Ca,"custom/gf-movepane-left.svg"),Wt(Sa,"custom/gf-movepane-right.svg"),Wt(is,"mono/favorite.svg"),Wt(An,"mono/grafana.svg"),Wt(ds,"mono/heart.svg"),Wt(ws,"mono/heart-break.svg"),Wt(ks,"mono/panel-add.svg"),Wt(Ns,"mono/library-panel.svg"),Wt(rr,"unicons/record-audio.svg")}var Js=e(66914);const Xs=ts=>({container:t.css`
      label: Icon;
      display: inline-block;
      line-height: 0;
    `,icon:t.css`
      vertical-align: middle;
      display: inline-block;
      fill: currentColor;
    `,orange:t.css`
      fill: ${ts.v1.palette.orange};
    `}),sa=n.forwardRef(({size:ts="md",type:ns="default",name:qn,className:Ws,style:xa,title:ka="",...zn},Tt)=>{const Is=(0,i.wW)(Xs);if(qn?.startsWith("fa fa-"))return n.createElement("i",{className:es(qn,Ws),...zn,style:xa});if(qn==="panel-add"&&(ts="xl"),or||Zs(),(0,s.Mo)(qn)||console.warn("Icon component passed an invalid icon name",qn),!qn||qn.includes(".."))return n.createElement("div",{ref:Tt},"invalid icon name");const _s=(0,Js.B)(ts),qs=_s,Ys=qn.startsWith("gf-bar-align")?16:qn.startsWith("gf-interp")?30:_s,Ms=(0,Js.y)(qn,ns),ir=`${Gs}${Ms}/${qn}.svg`;return n.createElement("div",{className:Is.container,...zn,ref:Tt},n.createElement(u.Z,{src:ir,width:Ys,height:qs,title:ka,className:(0,t.cx)(Is.icon,Ws,ns==="mono"?{[Is.orange]:qn==="favorite"}:""),style:xa}))});sa.displayName="Icon";function es(ts,ns){return(0,t.cx)(ts,{"fa-spin":ts==="fa fa-spinner"},ns)}},66914:(G,O,e)=>{"use strict";e.d(O,{B:()=>u,y:()=>n});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(s,i){return s?.startsWith("gf-")?"custom":t.includes(s)?"mono":i==="default"?"unicons":i==="solid"?"solid":"mono"}function u(s){switch(s){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},20017:(G,O,e)=>{"use strict";e.d(O,{h:()=>r});var t=e(52423),n=e(68404),u=e(64724),s=e(29516),i=e(19253),m=e(82385),f=e(81697),o=e(66914),l=e(48756);const r=n.forwardRef(({name:c,size:g="md",iconType:p,tooltip:y,tooltipPlacement:h,ariaLabel:a,className:v,variant:C="secondary",...E},P)=>{const x=(0,s.l4)(),M=d(x,g,C),S=typeof y=="string"?y:"",D=n.createElement("button",{ref:P,"aria-label":a||S,...E,className:(0,t.cx)(M.button,v)},n.createElement(f.J,{name:c,size:g,className:M.icon,type:p}));return y?n.createElement(l.u,{content:y,placement:h},D):D});r.displayName="IconButton";const d=(0,m.B)((c,g,p)=>{const y=(0,o.B)(g),h=Math.max(y/3,8);let a=c.colors.text.primary;return p==="primary"?a=c.colors.primary.text:p==="destructive"&&(a=c.colors.error.text),{button:t.css`
      width: ${y}px;
      height: ${y}px;
      background: transparent;
      border: none;
      color: ${a};
      padding: 0;
      margin: 0;
      outline: none;
      box-shadow: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: ${c.shape.borderRadius()};
      z-index: 0;
      margin-right: ${c.spacing(.5)};

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        color: ${c.colors.action.disabledText};
        opacity: 0.65;
        box-shadow: none;
      }

      &:before {
        content: '';
        display: block;
        opacity: 1;
        position: absolute;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        bottom: -${h}px;
        left: -${h}px;
        right: -${h}px;
        top: -${h}px;
        background: none;
        border-radius: 50%;
        box-sizing: border-box;
        transform: scale(0);
        transition-property: transform, opacity;
      }

      &:focus,
      &:focus-visible {
        ${(0,i.getFocusStyles)(c)}
      }

      &:focus:not(:focus-visible) {
        ${(0,i.getMouseFocusStyles)(c)}
      }

      &:hover {
        color: ${a};

        &:before {
          background-color: ${p==="secondary"?c.colors.action.hover:u.alpha(a,.12)};
          border: none;
          box-shadow: none;
          opacity: 1;
          transform: scale(0.8);
        }
      }
    `,icon:t.css`
      vertical-align: baseline;
      display: flex;
    `}})},69369:(G,O,e)=>{"use strict";e.d(O,{Z:()=>f,a:()=>l});var t=e(52423),n=e(68404),u=e(40400),s=e(29516),i=e(68884),m=e(68698);const f=n.memo(n.forwardRef(({title:d,featureState:c,...g},p)=>{const y=(0,s.wW)(o),h=c?n.createElement(n.Fragment,null,n.createElement("div",{className:y.badge},n.createElement(l,{featureState:c})),n.createElement("h3",null,d)):n.createElement("h3",null,d);return n.createElement(m.v,{branded:!0,title:h,urlTitle:"Read documentation",ref:p,...g})}));f.displayName="FeatureInfoBox";const o=d=>({badge:t.css`
      margin-bottom: ${d.spacing(1)};
    `}),l=({featureState:d,tooltip:c})=>{const g=r(d);return n.createElement(i.C,{text:g.text,color:g.color,icon:g.icon,tooltip:c})};function r(d){switch(d){case u.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},68698:(G,O,e)=>{"use strict";e.d(O,{v:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=e(82385),i=e(2323),m=e(81697);const f=n.memo(n.forwardRef(({title:l,className:r,children:d,branded:c,url:g,urlTitle:p,onDismiss:y,severity:h="info",...a},v)=>{const C=(0,u.wW)(o);return n.createElement(i.b,{severity:h,className:r,...a,ref:v,title:l},n.createElement("div",null,d),g&&n.createElement("a",{href:g,className:(0,t.cx)("external-link",C.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(m.J,{name:"book"})," ",p||"Read more"))}));f.displayName="InfoBox";const o=(0,s.B)(l=>({docsLink:t.css`
      display: inline-block;
      margin-top: ${l.spacing(2)};
    `}))},87152:(G,O,e)=>{"use strict";e.d(O,{K:()=>f});var t=e(52423),n=e(68404),u=e(11979),s=e(29516),i=e(81697),m=e(97635);function f({referenceElement:d,children:c,suffixIcon:g,placement:p}){const[y,h]=(0,n.useState)(null),a=(0,u.D)(d,y,{placement:p}),v=(0,s.wW)(o),C=(0,s.wW)(r);return n.createElement(m.h_,null,n.createElement("div",{style:{display:"inline-block",...a.styles.popper},...a.attributes.popper,ref:h},n.createElement("span",{className:(0,t.cx)(v.root,C[p])},c&&n.createElement("span",null,c),g&&n.createElement(i.J,{name:g}))))}const o=d=>({root:(0,t.css)({...d.typography.bodySmall,willChange:"transform",background:d.components.tooltip.background,color:d.components.tooltip.text,padding:d.spacing(.5,1.5),borderRadius:100,display:"inline-flex",gap:d.spacing(.5),alignItems:"center"})}),l=(d,c)=>(0,t.keyframes)({from:{opacity:0,transform:`translate(${d}, ${c})`},to:{opacity:1,transform:"translate(0, 0px)"}}),r=d=>{const g=l(0,d.spacing(1)),p=l(0,d.spacing(1*-1)),y=l(d.spacing(1),0),h=l(d.spacing(1*-1),0);return{top:(0,t.css)({marginBottom:d.spacing(1),animation:`${g} ease-out 100ms`}),bottom:(0,t.css)({marginTop:d.spacing(1),animation:`${p} ease-out 100ms`}),left:(0,t.css)({marginRight:d.spacing(1),animation:`${y} ease-out 100ms`}),right:(0,t.css)({marginLeft:d.spacing(1),animation:`${h} ease-out 100ms`})}}},53799:(G,O,e)=>{"use strict";e.d(O,{H:()=>s});var t=e(68404),n=e(80369),u=e(25474);const s=t.forwardRef((m,f)=>{const{defaultValue:o="",minWidth:l=10,maxWidth:r,onCommitChange:d,onKeyDown:c,onBlur:g,...p}=m,[y,h]=t.useState(o),[a,v]=t.useState(l);return(0,t.useEffect)(()=>{v(i(y.toString(),l,r))},[y,r,l]),t.createElement(u.I,{...p,ref:f,value:y.toString(),onChange:C=>{h(C.currentTarget.value)},width:a,onBlur:C=>{g?g(C):d&&d(C)},onKeyDown:C=>{c?c(C):C.key==="Enter"&&d&&d(C)},"data-testid":"autosize-input"})});function i(m,f,o){if(!m)return f;const l=3,r=(0,n.X1)(m.toString(),14).width/8+l;return f&&r<f?f:o&&r>o?o:r}s.displayName="AutoSizeInput"},25474:(G,O,e)=>{"use strict";e.d(O,{H:()=>l,I:()=>o});var t=e(52423),n=e(68404),u=e(10025),s=e(29516),i=e(82385),m=e(51821),f=e(40008);const o=n.forwardRef((r,d)=>{const{className:c,addonAfter:g,addonBefore:p,prefix:y,suffix:h,invalid:a,loading:v,width:C=0,...E}=r,[P,x]=(0,u.Z)(),[M,S]=(0,u.Z)(),D=(0,s.l4)(),T=l({theme:D,invalid:!!a,width:C});return n.createElement("div",{className:(0,t.cx)(T.wrapper,c),"data-testid":"input-wrapper"},!!p&&n.createElement("div",{className:T.addon},p),n.createElement("div",{className:T.inputWrapper},y&&n.createElement("div",{className:T.prefix,ref:P},y),n.createElement("input",{ref:d,className:T.input,...E,style:{paddingLeft:y?x.width+12:void 0,paddingRight:h||v?S.width+12:void 0}}),(h||v)&&n.createElement("div",{className:T.suffix,ref:M},v&&n.createElement(f.$,{className:T.loadingIndicator,inline:!0}),h)),!!g&&n.createElement("div",{className:T.addon},g))});o.displayName="Input";const l=(0,i.B)(({theme:r,invalid:d=!1,width:c})=>{const g="28px",p=t.css`
    position: absolute;
    top: 0;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 0;
    flex-shrink: 0;
    font-size: ${r.typography.size.md};
    height: 100%;
    /* Min width specified for prefix/suffix classes used outside React component*/
    min-width: ${g};
    color: ${r.colors.text.secondary};
  `;return{wrapper:(0,t.cx)(t.css`
        label: input-wrapper;
        display: flex;
        width: ${c?`${r.spacing(c)}`:"100%"};
        height: ${r.spacing(r.components.height.md)};
        border-radius: ${r.shape.borderRadius()};
        &:hover {
          > .prefix,
          .suffix,
          .input {
            border-color: ${d?r.colors.error.border:r.colors.primary.border};
          }

          // only show number buttons on hover
          input[type='number'] {
            -moz-appearance: number-input;
            -webkit-appearance: number-input;
            appearance: textfield;
          }

          input[type='number']::-webkit-inner-spin-button,
          input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: inner-spin-button !important;
            opacity: 1;
          }
        }
      `),inputWrapper:t.css`
      label: input-inputWrapper;
      position: relative;
      flex-grow: 1;
      /* we want input to be above addons, especially for focused state */
      z-index: 1;

      /* when input rendered with addon before only*/
      &:not(:first-child):last-child {
        > input {
          border-left: none;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      /* when input rendered with addon after only*/
      &:first-child:not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      /* when rendered with addon before and after */
      &:not(:first-child):not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      input {
        /* paddings specified for classes used outside React component */
        &:not(:first-child) {
          padding-left: ${g};
        }
        &:not(:last-child) {
          padding-right: ${g};
        }
        &[readonly] {
          cursor: default;
        }
      }
    `,input:(0,t.cx)((0,m.GL)(r),(0,m.RK)(r,d),t.css`
        label: input-input;
        position: relative;
        z-index: 0;
        flex-grow: 1;
        border-radius: ${r.shape.borderRadius()};
        height: 100%;
        width: 100%;
      `),inputDisabled:t.css`
      background-color: ${r.colors.action.disabledBackground};
      color: ${r.colors.action.disabledText};
      border: 1px solid ${r.colors.action.disabledBackground};
      &:focus {
        box-shadow: none;
      }
    `,addon:t.css`
      label: input-addon;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-grow: 0;
      flex-shrink: 0;
      position: relative;

      &:first-child {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        > :last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      &:last-child {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        > :first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }
      > *:focus {
        /* we want anything that has focus and is an addon to be above input */
        z-index: 2;
      }
    `,prefix:(0,t.cx)(p,t.css`
        label: input-prefix;
        padding-left: ${r.spacing(1)};
        padding-right: ${r.spacing(.5)};
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      `),suffix:(0,t.cx)(p,t.css`
        label: input-suffix;
        padding-left: ${r.spacing(1)};
        padding-right: ${r.spacing(1)};
        margin-bottom: -2px;
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        right: 0;
      `),loadingIndicator:t.css`
      & + * {
        margin-left: ${r.spacing(.5)};
      }
    `}})},11017:(G,O,e)=>{"use strict";e.d(O,{g:()=>n});var t=e(59052);const n=t.Qr},92325:(G,O,e)=>{"use strict";e.d(O,{e:()=>p});var t=e(52423),n=e(82897),u=e(68404),s=e(91742),i=e(49922),m=e(29516),f=e(81697),o=e(20017);const l=t.css`
  display: flex;
  align-items: center;
  height: 100%;
`;function r({row:v,__rowID:C}){return u.createElement("div",{className:l},u.createElement(o.h,{tooltip:"toggle row expanded","aria-controls":C,name:v.isExpanded?"angle-down":"angle-right","aria-expanded":v.isExpanded,...v.getToggleRowExpandedProps()}))}const d="__expander";function c(v){return[{id:d,Cell:r,disableSortBy:!0,width:0},...v.map(C=>({id:C.id,accessor:C.id,Header:C.header||(()=>null),sortType:C.sortType||"alphanumeric",disableSortBy:!Boolean(C.sortType),width:C.disableGrow?0:void 0,visible:C.visible,...C.cell&&{Cell:C.cell}}))]}const g=v=>({table:t.css`
    border-radius: ${v.shape.borderRadius()};
    border: solid 1px ${v.colors.border.weak};
    background-color: ${v.colors.background.secondary};
    width: 100%;

    td {
      padding: ${v.spacing(1)};
    }

    td,
    th {
      min-width: ${v.spacing(3)};
    }
  `,evenRow:t.css`
    background: ${v.colors.background.primary};
  `,disableGrow:t.css`
    width: 0%;
  `,header:t.css`
    &,
    & > button {
      position: relative;
      white-space: nowrap;
      padding: ${v.spacing(1)};
    }
    & > button {
      &:after {
        content: '\\00a0';
      }
      width: 100%;
      height: 100%;
      background: none;
      border: none;
      padding-right: ${v.spacing(2.5)};
      text-align: left;
      &:hover {
        background-color: ${v.colors.emphasize(v.colors.background.secondary,.05)};
      }
    }
  `,sortableHeader:t.css`
    /* increases selector's specificity so that it always takes precedence over default styles  */
    && {
      padding: 0;
    }
  `});function p({data:v,className:C,columns:E,renderExpandedRow:P,getRowId:x}){const M=(0,m.wW)(g),S=(0,u.useMemo)(()=>c(E),[E]),D=y(),T=(0,u.useCallback)(W=>`${D}-${W.id}`.replace(/\s/g,""),[D]),{getTableProps:R,getTableBodyProps:L,headerGroups:w,rows:A,prepareRow:N}=(0,s.useTable)({columns:S,data:v,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,getRowId:x,initialState:{hiddenColumns:[!P&&d,...S.filter(W=>!(!W.visible||W.visible(v))).map(W=>W.id).filter(i.fQ)].filter(i.fQ)}},s.useSortBy,s.useExpanded);return A.forEach(N),u.createElement("table",{...R(),className:(0,t.cx)(M.table,C)},u.createElement("thead",null,w.map(W=>{const{key:I,...F}=W.getHeaderGroupProps();return u.createElement("tr",{key:I,...F},W.headers.map(V=>{const{key:b,...X}=V.getHeaderProps();return u.createElement("th",{key:b,className:(0,t.cx)(M.header,{[M.disableGrow]:V.width===0,[M.sortableHeader]:V.canSort}),...X,...V.isSorted&&{"aria-sort":V.isSortedDesc?"descending":"ascending"}},u.createElement(a,{column:V}))}))})),u.createElement("tbody",{...L()},A.map((W,I)=>{const F=(0,t.cx)(I%2===0&&M.evenRow),{key:V,...b}=W.getRowProps(),X=T(W);return u.createElement(u.Fragment,{key:V},u.createElement("tr",{className:F,...b},W.cells.map(k=>{const{key:H,...Y}=k.getCellProps();return u.createElement("td",{key:H,...Y},k.render("Cell",{__rowID:X}))})),W.isExpanded&&P&&u.createElement("tr",{className:F,...b,id:X},u.createElement("td",{colSpan:W.cells.length},P(W.original))))})))}const y=()=>(0,u.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),h=v=>({sortIcon:t.css`
    position: absolute;
    top: ${v.spacing(1)};
  `});function a({column:{canSort:v,render:C,isSorted:E,isSortedDesc:P,getSortByToggleProps:x}}){const M=(0,m.wW)(h),{onClick:S}=x(),D=u.createElement(u.Fragment,null,C("Header"),E&&u.createElement("span",{"aria-hidden":"true",className:M.sortIcon},u.createElement(f.J,{name:P?"angle-down":"angle-up"})));return v?u.createElement("button",{type:"button",onClick:S},D):D}},16558:(G,O,e)=>{"use strict";e.d(O,{g:()=>u});var t=e(68404),n=e(6503);class u extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:i,config:m,open:f,onDidRender:o}=this.props,l=this.wrapperRef.current,r=new n.u(i,f,m);l.hasChildNodes()?l.replaceChild(r.render(),l.lastChild):l.appendChild(r.render()),o&&o(r.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:i}=this.props;return t.createElement("div",{className:i,ref:this.wrapperRef})}}u.defaultProps={open:3,config:{animateOpen:!0}}},6503:(G,O,e)=>{"use strict";e.d(O,{u:()=>a});var t=e(82897);function n(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function u(v){return!!v&&typeof v==="object"}function s(v){if(v===void 0)return"";if(v===null||typeof v=="object"&&!v.constructor)return"Object";const E=/function ([^(]*)/.exec(v.constructor.toString());return E&&E.length>1?E[1]:""}function i(v){return v===null?"null":typeof v}function m(v,C){const E=i(v);return E==="null"||E==="undefined"?E:(E==="string"&&(C='"'+n(C)+'"'),E==="function"?v.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":C)}let f="";function o(v){return u(v)?(f=s(v),Array.isArray(v)&&(f+="["+v.length+"]")):f=m(v,v.toString()),f}function l(v){return`json-formatter-${v}`}function r(v,C,E){const P=document.createElement(v);return C&&P.classList.add(l(C)),E!==void 0&&(E instanceof Node?P.appendChild(E):P.appendChild(document.createTextNode(String(E)))),P}const d=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,c=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,g=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,p=10,y=typeof window<"u"&&window.requestAnimationFrame||(v=>(v(),0)),h={animateOpen:!0,animateClose:!0};class a{constructor(C,E=1,P=h,x){this.json=C,this.open=E,this.config=P,this.key=x,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(C){this._isOpen=C}get isDate(){return this.type==="string"&&(d.test(this.json)||g.test(this.json)||c.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return u(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return s(this.json)}get type(){return i(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(C=>C||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(l("open")))}openAtDepth(C=1){C<0||(this.open=C,this.isOpen=C!==0,this.element&&(this.removeChildren(!1),C===0?this.element.classList.remove(l("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(l("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const C=r("span");return C.appendChild(r("span","bracket","[")),this.isNumberArray()?(this.json.forEach((E,P)=>{P>0&&C.appendChild(r("span","array-comma",",")),C.appendChild(r("span","number",E))}),this.skipChildren=!0):C.appendChild(r("span","number",this.json.length)),C.appendChild(r("span","bracket","]")),C}render(C=!1){this.element=r("div","row");const E=r("a","toggler-link"),P=r("span","toggler");if(this.isObject&&E.appendChild(P),this.hasKey&&E.appendChild(r("span","key",`${this.key}:`)),this.isObject){const M=r("span","value"),S=r("span"),D=r("span","constructor-name",this.constructorName);if(S.appendChild(D),this.isArray){const T=this.renderArray();S.appendChild(T)}M.appendChild(S),E.appendChild(M)}else{const M=this.isUrl?r("a"):r("span");M.classList.add(l(this.type)),this.isDate&&M.classList.add(l("date")),this.isUrl&&(M.classList.add(l("url")),M.setAttribute("href",this.json));const S=m(this.json,this.json);M.appendChild(document.createTextNode(S)),E.appendChild(M)}const x=r("div","children");return this.isObject&&x.classList.add(l("object")),this.isArray&&x.classList.add(l("array")),this.isEmpty&&x.classList.add(l("empty")),this.config&&this.config.theme&&this.element.classList.add(l(this.config.theme)),this.isOpen&&this.element.classList.add(l("open")),C||this.element.appendChild(E),this.skipChildren?E.removeChild(P):this.element.appendChild(x),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&E.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(C=!1){const E=this.element&&this.element.querySelector(`div.${l("children")}`);if(!(!E||this.isEmpty))if(C){let P=0;const x=()=>{const M=this.keys[P],S=new a(this.json[M],this.open-1,this.config,M);E.appendChild(S.render()),P+=1,P<this.keys.length&&(P>p?x():y(x))};y(x)}else this.keys.forEach(P=>{const x=new a(this.json[P],this.open-1,this.config,P);E.appendChild(x.render())})}removeChildren(C=!1){const E=this.element&&this.element.querySelector(`div.${l("children")}`);if(C){let P=0;const x=()=>{E&&E.children.length&&(E.removeChild(E.children[0]),P+=1,P>p?x():y(x))};y(x)}else E&&(E.innerHTML="")}}},90701:(G,O,e)=>{"use strict";e.d(O,{Ar:()=>i,Lh:()=>m,W2:()=>o,wc:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=(c=>(c[c.Horizontal=0]="Horizontal",c[c.Vertical=1]="Vertical",c))(s||{});const i=({children:c,orientation:g=0,spacing:p="sm",justify:y="flex-start",align:h="normal",wrap:a=!1,width:v="100%",height:C="100%",...E})=>{const P=(0,u.wW)((0,n.useCallback)(x=>l(x,g,p,y,h,a),[h,y,g,p,a]));return n.createElement("div",{className:P.layout,style:{width:v,height:C},...E},n.Children.toArray(c).filter(Boolean).map((x,M)=>n.createElement("div",{className:P.childWrapper,key:M},x)))},m=({children:c,spacing:g,justify:p,align:y="center",wrap:h,width:a,height:v})=>n.createElement(i,{spacing:g,justify:p,orientation:0,align:y,width:a,height:v,wrap:h},c),f=({children:c,spacing:g,justify:p,align:y,width:h,height:a})=>n.createElement(i,{spacing:g,justify:p,orientation:1,align:y,width:h,height:a},c),o=({children:c,padding:g,margin:p,grow:y,shrink:h})=>{const a=(0,u.wW)((0,n.useCallback)(v=>d(v,g,p),[g,p]));return n.createElement("div",{className:(0,t.cx)(a.wrapper,y!==void 0&&t.css`
            flex-grow: ${y};
          `,h!==void 0&&t.css`
            flex-shrink: ${h};
          `)},c)},l=(c,g,p,y,h,a)=>{const v=p!=="none"?c.spacing(r[p]):0,C=g===0&&!a||g===1?0:`-${v}`,E=g===1?"vertical-group":"horizontal-group";return{layout:t.css`
      label: ${E};
      display: flex;
      flex-direction: ${g===1?"column":"row"};
      flex-wrap: ${a?"wrap":"nowrap"};
      justify-content: ${y};
      align-items: ${h};
      height: 100%;
      max-width: 100%;
      // compensate for last row margin when wrapped, horizontal layout
      margin-bottom: ${C};
    `,childWrapper:t.css`
      label: layoutChildrenWrapper;
      margin-bottom: ${g===0&&!a?0:v};
      margin-right: ${g===0?v:0};
      display: flex;
      align-items: ${h};

      &:last-child {
        margin-bottom: ${g===1&&0};
        margin-right: ${g===0&&0};
      }
    `}},r={none:0,xs:.5,sm:1,md:2,lg:3},d=(c,g,p)=>{const y=g&&g!=="none"&&c.spacing(r[g])||0,h=p&&p!=="none"&&c.spacing(r[p])||0;return{wrapper:t.css`
      label: container;
      margin: ${h};
      padding: ${y};
    `}}},90031:(G,O,e)=>{"use strict";e.d(O,{r:()=>i});var t=e(68404),n=e(16144),u=e(83383),s=e(8928);const i=(0,t.forwardRef)(({href:m,children:f,...o},l)=>{const r=u.u.stripBaseFromUrl(s.QX.sanitizeUrl(m??""));return t.createElement(n.Link,{ref:l,to:r,...o},f)});i.displayName="Link"},94108:(G,O,e)=>{"use strict";e.d(O,{L:()=>i});var t=e(52423),n=e(68404),u=e(82385);const s=(0,u.B)((m=!1)=>({list:t.css`
    list-style-type: none;
    margin: 0;
    padding: 0;
  `,item:t.css`
    display: ${m&&"inline-block"||"block"};
  `}));class i extends n.PureComponent{constructor(f){super(f)}render(){const{items:f,renderItem:o,getItemKey:l,className:r,inline:d}=this.props,c=s(d);return n.createElement("ul",{className:(0,t.cx)(c.list,r)},f.map((g,p)=>n.createElement("li",{className:c.item,key:l?l(g):p},o(g,p))))}}},62444:(G,O,e)=>{"use strict";e.d(O,{Y:()=>u});var t=e(68404),n=e(94108);class u extends t.PureComponent{render(){return t.createElement(n.L,{inline:!0,...this.props})}}},15031:(G,O,e)=>{"use strict";e.d(O,{a:()=>u});var t=e(68404),n=e(94108);class u extends t.PureComponent{render(){return t.createElement(n.L,{...this.props})}}},61458:(G,O,e)=>{"use strict";e.d(O,{F:()=>s});var t=e(52423),n=e(68404),u=e(29516);function s({width:m,height:f,ariaLabel:o="Loading bar"}){const l=(0,u.wW)(i(m,f));return n.createElement("div",{className:l.container},n.createElement("div",{"aria-label":o,className:l.bar}))}const i=(m,f)=>o=>{const l=m??"128px",r=f??"2px",d=(0,t.keyframes)({"0%":{transform:"translateX(0)"},"100%":{transform:"translateX(100%)"}});return{container:(0,t.css)({width:"100%",animation:`${d} 1s infinite linear`,willChange:"transform"}),bar:(0,t.css)({width:l,height:r,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)"})}}},90090:(G,O,e)=>{"use strict";e.d(O,{u:()=>i});var t=e(52423),n=e(68404),u=e(29516),s=e(40008);const i=({text:f,className:o,...l})=>{const r=(0,u.wW)(m);return n.createElement("div",{className:(0,t.cx)(r.container,o),...l},f," ",n.createElement(s.$,{inline:!0}))},m=f=>({container:t.css`
      margin-bottom: ${f.spacing(4)};
    `})},93746:(G,O,e)=>{"use strict";e.d(O,{j:()=>i});var t=e(52423),n=e(68404),u=e(29516);const s=["level","lvl","filename"],i=({labels:f})=>{const o=(0,u.wW)(m),l=Object.keys(f).filter(r=>!r.startsWith("_")&&!s.includes(r));return l.length===0?n.createElement("span",{className:(0,t.cx)([o.logsLabels])},n.createElement("span",{className:(0,t.cx)([o.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([o.logsLabels])},l.sort().map(r=>{const d=f[r];if(!d)return;const c=`${r}: ${d}`;return n.createElement("span",{key:r,className:(0,t.cx)([o.logsLabel])},n.createElement("span",{className:(0,t.cx)([o.logsLabelValue]),title:c},d))}))},m=f=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${f.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: 0 2px;
      background-color: ${f.colors.background.secondary};
      border-radius: ${f.shape.borderRadius(1)};
      margin: 1px 4px 0 0;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: 20em;
      text-overflow: ellipsis;
      overflow: hidden;
    `})},89333:(G,O,e)=>{"use strict";e.d(O,{Q:()=>l});var t=e(2525),n=e(68404),u=e(47846),s=e.n(u),i=e(33399),m=e(29516);function f(r,d){return d.split(/;\s*/).reduce((c,g)=>{if(g==="color:rgba(0,0,0,0.5)")return{color:r.colors.text.secondary};const p=g.match(/([^:\s]+)\s*:\s*(.+)/);if(p&&p[1]&&p[2]){const y=p[1].replace(/-([a-z])/g,(h,a)=>a.toUpperCase());c[y]=p[2]}return c},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(d,c){return d.value===c.prevValue?null:{chunks:t.ZP.parse(d.value).spans.map(p=>p.css?{style:f(d.theme,p.css),text:p.text}:{text:p.text}),prevValue:d.value}}render(){const{chunks:d}=this.state;return d.map((c,g)=>{const p=this.props.highlight?.searchWords?n.createElement(s(),{key:g,textToHighlight:c.text,searchWords:this.props.highlight.searchWords,findChunks:i.Xt,highlightClassName:this.props.highlight.highlightClassName}):c.text;return c.style?n.createElement("span",{key:g,style:c.style,"data-testid":"ansiLogLine"},p):p})}}const l=(0,m.HE)(o);l.displayName="LogMessageAnsi"},52697:(G,O,e)=>{"use strict";e.d(O,{w:()=>Ze});var t=e(58635),n=e(68404),u=e(35864),s=e(90595),i=e(29516),m=e(52423),f=e(38849),o=e(19253),l=e(81697),r=e(48756),d=e(38120),c=e(89205),g=e(20017),p=e(82385);const y=lt=>({logsStatsRow:m.css`
    label: logs-stats-row;
    margin: ${parseInt(lt.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:m.css`
    label: logs-stats-row--active;
    color: ${lt.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:m.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:m.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:m.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: 0.5em;
  `,logsStatsRowPercent:m.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: 0.5em;
    width: 3em;
  `,logsStatsRowBar:m.css`
    label: logs-stats-row__bar;
    height: 4px;
    overflow: hidden;
    background: ${lt.colors.text.disabled};
  `,logsStatsRowInnerBar:m.css`
    label: logs-stats-row__innerbar;
    height: 4px;
    overflow: hidden;
    background: ${lt.colors.primary.main};
  `}),h=({active:lt,count:nt,proportion:_e,value:ut})=>{const rt=(0,i.wW)(y),je=`${Math.round(_e*100)}%`,dt={width:je},oe=lt?(0,m.cx)([rt.logsStatsRow,rt.logsStatsRowActive]):(0,m.cx)([rt.logsStatsRow]);return n.createElement("div",{className:oe},n.createElement("div",{className:(0,m.cx)([rt.logsStatsRowLabel])},n.createElement("div",{className:(0,m.cx)([rt.logsStatsRowValue]),title:ut},ut),n.createElement("div",{className:(0,m.cx)([rt.logsStatsRowCount])},nt),n.createElement("div",{className:(0,m.cx)([rt.logsStatsRowPercent])},je)),n.createElement("div",{className:(0,m.cx)([rt.logsStatsRowBar])},n.createElement("div",{className:(0,m.cx)([rt.logsStatsRowInnerBar]),style:dt})))};h.displayName="LogLabelStatsRow";const a=5,v=(0,p.B)(lt=>({logsStats:m.css`
      label: logs-stats;
      background: inherit;
      color: ${lt.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:m.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${lt.colors.border.medium};
      display: flex;
    `,logsStatsTitle:m.css`
      label: logs-stats__title;
      font-weight: ${lt.typography.fontWeightMedium};
      padding-right: ${lt.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:m.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:m.css`
      label: logs-stats__body;
      padding: 5px 0;
    `}));class C extends n.PureComponent{render(){const{label:nt,rowCount:_e,stats:ut,value:rt,theme:je,isLabel:dt}=this.props,oe=v(je),Se=ut.slice(0,a);let Re=Se.find(Oe=>Oe.value===rt),ze=ut.slice(a);const ve=!Re;ve&&(Re=ze.find(Oe=>Oe.value===rt),ze=ze.filter(Oe=>Oe.value!==rt));const Te=ze.reduce((Oe,Ne)=>Oe+Ne.count,0),pe=Se.reduce((Oe,Ne)=>Oe+Ne.count,0)+Te,ye=Te/pe;return n.createElement("div",{className:oe.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:oe.logsStatsHeader},n.createElement("div",{className:oe.logsStatsTitle},nt,": ",pe," of ",_e," rows have that ",dt?"label":"field")),n.createElement("div",{className:oe.logsStatsBody},Se.map(Oe=>n.createElement(h,{key:Oe.value,...Oe,active:Oe.value===rt})),ve&&Re&&n.createElement(h,{key:Re.value,...Re,active:!0}),Te>0&&n.createElement(h,{key:"__OTHERS__",count:Te,value:"Other",proportion:ye})))}}const E=(0,i.HE)(C);E.displayName="LogLabelStats";var P=e(61694);const x=lt=>({noHoverBackground:m.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:m.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:m.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:m.css`
      color: ${lt.colors.primary.text};
    `,hoverValueCopy:m.css`
      margin: ${lt.spacing(0,0,0,1.2)};
      position: absolute;
      top: 0px;
      justify-content: center;
      border-radius: 20px;
      width: 26px;
      height: 26px;
    `,wrapLine:m.css`
      label: wrapLine;
      white-space: pre-wrap;
    `});class M extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null,mouseOver:!1},this.showField=()=>{const{onClickShowDetectedField:nt,parsedKey:_e}=this.props;nt&&nt(_e)},this.hideField=()=>{const{onClickHideDetectedField:nt,parsedKey:_e}=this.props;nt&&nt(_e)},this.filterLabel=()=>{const{onClickFilterLabel:nt,parsedKey:_e,parsedValue:ut}=this.props;nt&&nt(_e,ut)},this.filterOutLabel=()=>{const{onClickFilterOutLabel:nt,parsedKey:_e,parsedValue:ut}=this.props;nt&&nt(_e,ut)},this.showStats=()=>{const{showFieldsStats:nt}=this.state;if(!nt){const _e=this.props.getStats(),ut=_e?_e.reduce((rt,je)=>rt+je.count,0):0;this.setState({fieldStats:_e,fieldCount:ut})}this.toggleFieldsStats()}}toggleFieldsStats(){this.setState(nt=>({showFieldsStats:!nt.showFieldsStats}))}hoverValueCopy(){const nt=!this.state.mouseOver;this.setState({mouseOver:nt})}render(){const{theme:nt,parsedKey:_e,parsedValue:ut,isLabel:rt,links:je,showDetectedFields:dt,wrapLogMessage:oe,onClickShowDetectedField:Se,onClickHideDetectedField:Re,onClickFilterLabel:ze,onClickFilterOutLabel:ve}=this.props,{showFieldsStats:Te,fieldStats:he,fieldCount:pe,mouseOver:ye}=this.state,Oe=x(nt),Ne=(0,P.h)(nt),Me=Se&&Re,Ae=ze&&ve,we=!rt&&dt&&dt.includes(_e)?n.createElement(g.h,{name:"eye",className:Oe.showingField,title:"Hide this field",onClick:this.hideField}):n.createElement(g.h,{name:"eye",title:"Show this field instead of the message",onClick:this.showField});return n.createElement("tr",{className:(0,m.cx)(Ne.logDetailsValue,{[Oe.noHoverBackground]:Te})},n.createElement("td",{className:Ne.logsDetailsIcon},n.createElement(g.h,{name:"signal",title:"Ad-hoc statistics",onClick:this.showStats})),Ae&&rt&&n.createElement(n.Fragment,null,n.createElement("td",{className:Ne.logsDetailsIcon},n.createElement(g.h,{name:"search-plus",title:"Filter for value",onClick:this.filterLabel})),n.createElement("td",{className:Ne.logsDetailsIcon},n.createElement(g.h,{name:"search-minus",title:"Filter out value",onClick:this.filterOutLabel}))),Me&&!rt&&n.createElement("td",{className:Ne.logsDetailsIcon,colSpan:2},we),n.createElement("td",{className:Ne.logDetailsLabel},_e),n.createElement("td",{className:(0,m.cx)(Oe.wordBreakAll,oe&&Oe.wrapLine),onMouseEnter:this.hoverValueCopy.bind(this),onMouseLeave:this.hoverValueCopy.bind(this)},ut,ye&&n.createElement(d.m,{getText:()=>ut,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"sm",className:Oe.hoverValueCopy}),je?.map(ke=>n.createElement("span",{key:ke.title},"\xA0",n.createElement(c.k,{link:ke}))),Te&&n.createElement(E,{stats:he,label:_e,value:ut,rowCount:pe,isLabel:rt})))}}const S=(0,i.HE)(M);S.displayName="LogDetailsRow";var D=e(14582),T=e(47846),R=e.n(T),L=e(35008),w=e.n(L),A=e(33399),N=e(89333),W=e(8928),I=e(2323),F=e(57319),V=e(49938),b=e(15031);const X=(lt,nt)=>{const _e=nt?m.css`
        top: -250px;
      `:m.css`
        margin-top: -250px;
        width: 75%;
      `,ut=nt?m.css`
        top: 100%;
      `:m.css`
        margin-top: 40px;
        width: 75%;
      `;return{commonStyles:m.css`
      position: absolute;
      height: 250px;
      z-index: ${lt.zIndex.dropdown};
      overflow: hidden;
      background: ${lt.colors.background.primary};
      box-shadow: 0 0 10px ${lt.v1.palette.black};
      border: 1px solid ${lt.colors.background.secondary};
      border-radius: ${lt.shape.borderRadius(2)};
      width: 100%;
    `,header:m.css`
      height: 30px;
      padding: 0 10px;
      display: flex;
      align-items: center;
      background: ${lt.colors.background.secondary};
    `,logs:m.css`
      height: 220px;
      padding: 10px;
    `,afterContext:_e,beforeContext:ut}},k=({row:lt,rows:nt,onLoadMoreContext:_e,canLoadMoreRows:ut})=>{const{header:rt}=(0,i.wW)(X);return n.createElement("div",{className:rt},n.createElement("span",{className:m.css`
          opacity: 0.6;
        `},"Found ",nt.length," rows."),(nt.length>=10||nt.length>10&&nt.length%10!==0)&&ut&&n.createElement("span",{className:m.css`
            margin-left: 10px;
            &:hover {
              text-decoration: underline;
              cursor: pointer;
            }
          `,onClick:_e},"Load 10 more"))},H=({row:lt,rows:nt,error:_e,className:ut,shouldScrollToBottom:rt,canLoadMoreRows:je,onLoadMoreContext:dt})=>{const{commonStyles:oe,logs:Se}=(0,i.wW)(X),[Re,ze]=(0,n.useState)(0),ve=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{const he=nt.length>0&&nt.length<=10;rt&&he&&ve.current&&ze(ve.current.offsetHeight)},[rt,nt]);const Te={row:lt,rows:nt,onLoadMoreContext:dt,canLoadMoreRows:je};return n.createElement("div",{className:(0,m.cx)(oe,ut)},rt&&!_e&&n.createElement(k,{...Te}),n.createElement("div",{className:Se},n.createElement(V.$,{autoHide:!0,scrollTop:Re,autoHeightMin:"210px"},n.createElement("div",{ref:ve},!_e&&n.createElement(b.a,{items:nt,renderItem:he=>n.createElement("div",{className:m.css`
                        padding: 5px 0;
                      `},typeof he=="string"&&W.QX.hasAnsiCodes(he)?n.createElement(N.Q,{value:he}):he)}),_e&&n.createElement(I.b,{title:_e})))),!rt&&!_e&&n.createElement(k,{...Te}))},Y=({row:lt,context:nt,errors:_e,onOutsideClick:ut,onLoadMoreContext:rt,hasMoreContextRows:je,wrapLogMessage:dt})=>{(0,n.useEffect)(()=>{const Re=ze=>{ze.keyCode===27&&ut()};return document.addEventListener("keydown",Re,!1),()=>{document.removeEventListener("keydown",Re,!1)}},[ut]);const{afterContext:oe,beforeContext:Se}=(0,i.wW)(Re=>X(Re,dt));return n.createElement(F.L,{onClick:ut},n.createElement("div",{onClick:Re=>Re.stopPropagation()},nt.after&&n.createElement(H,{rows:nt.after,error:_e&&_e.after,row:lt,className:oe,shouldScrollToBottom:!0,canLoadMoreRows:je?je.after:!1,onLoadMoreContext:rt}),nt.before&&n.createElement(H,{onLoadMoreContext:rt,canLoadMoreRows:je?je.before:!1,row:lt,rows:nt.before,error:_e&&_e.before,className:Se})))},ee=1e5,ue=lt=>{const nt=w()(lt.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:m.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:m.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${nt};
    `,horizontalScroll:m.css`
      label: verticalScroll;
      white-space: pre;
    `,contextNewline:m.css`
      display: block;
      margin-left: 0px;
    `,contextButton:m.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      right: -8px;
      top: 0;
      bottom: auto;
      width: 80px;
      height: 36px;
      background: ${lt.colors.background.primary};
      box-shadow: ${lt.shadows.z3};
      padding: ${lt.spacing(0,0,0,.5)};
      z-index: 100;
    `}};function q(lt,nt,_e,ut){const rt=_e&&_e.length>0&&_e[0]&&_e[0].length>0&&nt.length<ee,je=_e??[];if(lt){const dt=rt?{searchWords:je,highlightClassName:ut}:void 0;return n.createElement(N.Q,{value:nt,highlight:dt})}else return rt?n.createElement(R(),{textToHighlight:nt,searchWords:je,findChunks:A.Xt,highlightClassName:ut}):nt}const ge=(0,t.Z)((lt,nt)=>{if(nt)try{return JSON.stringify(JSON.parse(lt),void 0,2)}catch{return lt}return lt});class De extends n.PureComponent{constructor(){super(...arguments),this.onContextToggle=nt=>{nt.stopPropagation(),this.props.onToggleContext()}}render(){const{row:nt,theme:_e,errors:ut,hasMoreContextRows:rt,updateLimit:je,context:dt,contextIsOpen:oe,showContextToggle:Se,wrapLogMessage:Re,prettifyLogMessage:ze,onToggleContext:ve}=this.props,Te=(0,P.h)(_e,nt.logLevel),{hasAnsi:he,raw:pe}=nt,ye=ge(pe,ze),Oe=ue(_e);return n.createElement("td",{style:oe?{position:"unset"}:void 0,className:Te.logsRowMessage},n.createElement("div",{className:(0,m.cx)({[Oe.positionRelative]:Re},{[Oe.horizontalScroll]:!Re})},oe&&dt&&n.createElement(Y,{row:nt,context:dt,errors:ut,wrapLogMessage:Re,hasMoreContextRows:rt,onOutsideClick:ve,onLoadMoreContext:()=>{je&&je()}}),n.createElement("span",{className:(0,m.cx)(Oe.positionRelative,{[Oe.rowWithContext]:oe})},q(he,ye,nt.searchWords,Te.logsRowMatchHighLight)),!oe&&Se?.(nt)&&n.createElement("span",{className:(0,m.cx)("log-row-context",Te.context,Oe.contextButton),onClick:Ne=>Ne.stopPropagation()},n.createElement(r.u,{placement:"top",content:"Show context"},n.createElement(g.h,{size:"md",name:"gf-show-context",onClick:this.onContextToggle})),n.createElement(r.u,{placement:"top",content:"Copy"},n.createElement(g.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(JSON.stringify(ye))})))))}}const fe=(0,i.HE)(De);fe.displayName="LogRowMessage";const me=(0,t.Z)(u.MT),ce=(0,t.Z)((lt,nt)=>{const _e=ie(lt.entry),rt=[...re(lt,nt),..._e].reduce((dt,oe)=>{const Se=oe.value.replace(/(^")|("$)/g,""),Re=`${oe.key}=${Se}`;return dt[Re]?dt[Re].links=[...dt[Re].links||[],...oe.links||[]]:dt[Re]=oe,dt},{}),je=Object.values(rt);return je.sort(Ee),je}),ie=(0,t.Z)(lt=>{if(lt.length>ee)return[];const nt=me(lt);return nt?nt.getFields(lt).map(rt=>{const je=nt.getLabelFromField(rt),dt=nt.getValueFromField(rt);return{key:je,value:dt}}):[]}),re=(0,t.Z)((lt,nt)=>lt.dataFrame.fields.map((_e,ut)=>({..._e,index:ut})).filter((_e,ut)=>!J(_e,ut,lt)).map(_e=>{const ut=nt?nt(_e,lt.rowIndex):[];return{key:_e.name,value:_e.values.get(lt.rowIndex).toString(),links:ut,fieldIndex:_e.index}}));function Ee(lt,nt){return lt.links?.length&&!nt.links?.length?-1:!lt.links?.length&&nt.links?.length||lt.key>nt.key?1:lt.key<nt.key?-1:0}function J(lt,nt,_e){return!!(lt.name==="labels"&&lt.type===D.fS.other||lt.name==="id"||_e.entryFieldIndex===nt||lt.config.custom?.hidden||lt.values.get(_e.rowIndex)==null)}const te=lt=>({logsRowLevelDetails:m.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:m.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${lt.colors.background.primary};
      }
    `});class ne extends n.PureComponent{constructor(){super(...arguments),this.getParser=(0,t.Z)(u.MT),this.getStatsForDetectedField=nt=>{const _e=this.getParser(this.props.row.entry).buildMatcher(nt);return(0,u.zd)(this.props.getRows(),_e)}}render(){const{row:nt,theme:_e,hasError:ut,onClickFilterOutLabel:rt,onClickFilterLabel:je,getRows:dt,showDuplicates:oe,className:Se,onClickShowDetectedField:Re,onClickHideDetectedField:ze,showDetectedFields:ve,getFieldLinks:Te,wrapLogMessage:he}=this.props,pe=(0,P.h)(_e,nt.logLevel),ye=te(_e),Oe=nt.labels?nt.labels:{},Ne=Object.keys(Oe).length>0,Me=ce(nt,Te),Ae=Me&&Me.length>0,we=(0,m.cx)(!ut&&[pe.logsRowLevel,ye.logsRowLevelDetails]);return n.createElement("tr",{className:(0,m.cx)(Se,ye.logDetails)},oe&&n.createElement("td",null),n.createElement("td",{className:we,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:pe.logDetailsContainer},n.createElement("table",{className:pe.logDetailsTable},n.createElement("tbody",null,Ne&&n.createElement("tr",null,n.createElement("td",{colSpan:5,className:pe.logDetailsHeading,"aria-label":"Log labels"},"Log labels")),Object.keys(Oe).sort().map(ke=>{const st=Oe[ke];return n.createElement(S,{key:`${ke}=${st}`,parsedKey:ke,parsedValue:st,isLabel:!0,getStats:()=>(0,u.lL)(dt(),ke),onClickFilterOutLabel:rt,onClickFilterLabel:je})}),Ae&&n.createElement("tr",null,n.createElement("td",{colSpan:5,className:pe.logDetailsHeading,"aria-label":"Detected fields"},"Detected fields",n.createElement(r.u,{content:"Fields that are parsed from log message and detected by Grafana."},n.createElement(l.J,{name:"question-circle",size:"xs",className:m.css`
                            margin-left: 4px;
                          `})))),Me.sort().map(ke=>{const{key:st,value:Et,links:Pt,fieldIndex:gt}=ke;return n.createElement(S,{key:`${st}=${Et}`,parsedKey:st,parsedValue:Et,links:Pt,onClickShowDetectedField:Re,onClickHideDetectedField:ze,getStats:()=>gt===void 0?this.getStatsForDetectedField(st):(0,u.i6)(nt.dataFrame.fields[gt].values.toArray()),showDetectedFields:ve,wrapLogMessage:he})}),!Ae&&!Ne&&n.createElement("tr",null,n.createElement("td",{colSpan:5,"aria-label":"No details"},"No details available")))))))}}const j=(0,i.HE)(ne);j.displayName="LogDetails";var be=e(93746),Le=e(50700),Qe=e(16911),Ye=e(71895);const de=async(lt,nt,_e,ut)=>{const rt=[lt(nt,{limit:_e}),lt(nt,{limit:_e+1,direction:"FORWARD"})],je=await Promise.all(rt.map(Se=>Se.catch(Re=>Re))),dt=je.map(Se=>{const Re=Se;if(!Re.data)return[];const ze=[];for(let ve=0;ve<Re.data.length;ve++){const Te=(0,Qe.g0)(Re.data[ve]),he=new Ye.N(Te),pe=he.getFieldByName("ts"),ye=he.getFieldByName("id");for(let Oe=0;Oe<pe.values.length;Oe++){if(ye){if(ye.values.get(Oe)===nt.uid)continue}else if(parseInt(pe.values.get(Oe),10)===nt.timeEpochMs)continue;const Me=Te.fields.filter(Ae=>Ae.name==="line")[0].values.get(Oe);ze.push(Me)}}return ut===s.UV.Ascending?ze.reverse():ze}),oe=je.map(Se=>{const Re=Se;return Re.message?Re.message:""});return{data:ut===s.UV.Ascending?dt.reverse():dt,errors:ut===s.UV.Ascending?oe.reverse():oe}},Be=({getRowContext:lt,row:nt,children:_e,logsSortOrder:ut})=>{const[rt,je]=(0,n.useState)(10),[dt,oe]=(0,n.useState)(null),[Se,Re]=(0,n.useState)({before:!0,after:!0}),{value:ze}=(0,Le.Z)(async()=>await de(lt,nt,rt,ut),[rt]);return(0,n.useEffect)(()=>{ze&&oe(ve=>{let Te=!0,he=!0;if(ve){const pe=ve.data[0],ye=ve.data[1],Oe=ze.data[0],Ne=ze.data[1];(!Oe||pe.length===Oe.length)&&(Te=!1),(!Ne||ye.length===Ne.length)&&(he=!1)}return Re({before:Te,after:he}),ze})},[ze]),_e({result:{before:dt?dt.data[0]:[],after:dt?dt.data[1]:[]},errors:{before:dt?dt.errors[0]:void 0,after:dt?dt.errors[1]:void 0},hasMoreContextRows:Se,updateLimit:()=>je(rt+10),limit:rt})};class Ve extends n.PureComponent{render(){const{row:nt,showDetectedFields:_e,getFieldLinks:ut,wrapLogMessage:rt}=this.props,je=ce(nt,ut),dt=rt?"":m.css`
          white-space: nowrap;
        `,oe=_e.map(Se=>{const Re=je.find(ze=>{const{key:ve}=ze;return ve===Se});return Re?`${Se}=${Re.value}`:null}).filter(Se=>Se!==null).join(" ");return n.createElement("td",{className:dt},oe)}}const $e=(0,i.HE)(Ve);$e.displayName="LogRowMessageDetectedFields";const We=lt=>({topVerticalAlign:m.css`
      label: topVerticalAlign;
      margin-top: -${lt.spacing(.9)};
      margin-left: -${lt.spacing(.25)};
    `,detailsOpen:m.css`
      &:hover {
        background-color: ${o.hoverColor(lt.colors.background.primary,lt)};
      }
    `,errorLogRow:m.css`
      label: erroredLogRow;
      color: ${lt.colors.text.secondary};
    `});class Ke extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.toggleContext=()=>{this.setState(nt=>({showContext:!nt.showContext}))},this.toggleDetails=()=>{this.props.enableLogDetails&&this.setState(nt=>({showDetails:!nt.showDetails}))}}renderTimeStamp(nt){return(0,f.dq)(nt,{timeZone:this.props.timeZone})}renderLogRow(nt,_e,ut,rt){const{getRows:je,onClickFilterLabel:dt,onClickFilterOutLabel:oe,onClickShowDetectedField:Se,onClickHideDetectedField:Re,enableLogDetails:ze,row:ve,showDuplicates:Te,showContextToggle:he,showLabels:pe,showTime:ye,showDetectedFields:Oe,wrapLogMessage:Ne,prettifyLogMessage:Me,theme:Ae,getFieldLinks:we,forceEscape:ke,onLogRowHover:st}=this.props,{showDetails:Et,showContext:Pt}=this.state,gt=(0,P.h)(Ae,ve.logLevel),Ct=We(Ae),{errorMessage:Ot,hasError:Ft}=(0,u.Mi)(ve),jt=(0,m.cx)(gt.logsRow,{[Ct.errorLogRow]:Ft}),En=ve.hasUnescapedContent&&ke?{...ve,entry:(0,u.l3)(ve.entry),raw:(0,u.l3)(ve.raw)}:ve;return n.createElement(n.Fragment,null,n.createElement("tr",{className:jt,onClick:this.toggleDetails,onMouseEnter:()=>{st&&st(ve)},onMouseLeave:()=>{st&&st(void 0)}},Te&&n.createElement("td",{className:gt.logsRowDuplicates},En.duplicates&&En.duplicates>0?`${En.duplicates+1}x`:null),n.createElement("td",{className:(0,m.cx)({[gt.logsRowLevel]:!Ft})},Ft&&n.createElement(r.u,{content:`Error: ${Ot}`,placement:"right",theme:"error"},n.createElement(l.J,{className:gt.logIconError,name:"exclamation-triangle",size:"xs"}))),ze&&n.createElement("td",{title:Et?"Hide log details":"See log details",className:gt.logsRowToggleDetails},n.createElement(l.J,{className:Ct.topVerticalAlign,name:Et?"angle-down":"angle-right"})),ye&&n.createElement("td",{className:gt.logsRowLocalTime},this.renderTimeStamp(ve.timeEpochMs)),pe&&En.uniqueLabels&&n.createElement("td",{className:gt.logsRowLabels},n.createElement(be.j,{labels:En.uniqueLabels})),Oe&&Oe.length>0?n.createElement($e,{row:En,showDetectedFields:Oe,getFieldLinks:we,wrapLogMessage:Ne}):n.createElement(fe,{row:En,getRows:je,errors:_e,hasMoreContextRows:ut,updateLimit:rt,context:nt,contextIsOpen:Pt,showContextToggle:he,wrapLogMessage:Ne,prettifyLogMessage:Me,onToggleContext:this.toggleContext})),this.state.showDetails&&n.createElement(j,{className:jt,showDuplicates:Te,getFieldLinks:we,onClickFilterLabel:dt,onClickFilterOutLabel:oe,onClickShowDetectedField:Se,onClickHideDetectedField:Re,getRows:je,row:En,wrapLogMessage:Ne,hasError:Ft,showDetectedFields:Oe}))}render(){const{showContext:nt}=this.state,{logsSortOrder:_e,row:ut,getRowContext:rt}=this.props;return nt?n.createElement(n.Fragment,null,n.createElement(Be,{row:ut,getRowContext:rt,logsSortOrder:_e},({result:je,errors:dt,hasMoreContextRows:oe,updateLimit:Se})=>n.createElement(n.Fragment,null,this.renderLogRow(je,dt,oe,Se)))):this.renderLogRow()}}const qe=(0,i.HE)(Ke);qe.displayName="LogRow";const Xe=100;class at extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1},this.makeGetRows=(0,t.Z)(nt=>()=>nt),this.sortLogs=(0,t.Z)((nt,_e)=>(0,u.$u)(nt,_e))}componentDidMount(){const{logRows:nt,previewLimit:_e}=this.props,rt=(nt?nt.length:0)<=_e*2;rt?this.setState({renderAll:rt}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:nt,showContextToggle:_e,showLabels:ut,showTime:rt,wrapLogMessage:je,prettifyLogMessage:dt,logRows:oe,deduplicatedRows:Se,timeZone:Re,onClickFilterLabel:ze,onClickFilterOutLabel:ve,theme:Te,enableLogDetails:he,previewLimit:pe,getFieldLinks:ye,logsSortOrder:Oe,showDetectedFields:Ne,onClickShowDetectedField:Me,onClickHideDetectedField:Ae,forceEscape:we,onLogRowHover:ke}=this.props,{renderAll:st}=this.state,{logsRowsTable:Et}=(0,P.h)(Te),Pt=Se||oe,gt=oe&&oe.length>0,Ct=Pt?Pt.reduce((Tn,Zn)=>Zn.duplicates?Tn+Zn.duplicates:Tn,0):0,Ot=nt!==s.Y4.none&&Ct>0,Ft=Pt||[],jt=Oe?this.sortLogs(Ft,Oe):Ft,En=jt.slice(0,pe),xn=jt.slice(pe,jt.length),Cn=this.makeGetRows(jt),bn=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return n.createElement("table",{className:Et},n.createElement("tbody",null,gt&&En.map((Tn,Zn)=>n.createElement(qe,{key:Tn.uid,getRows:Cn,getRowContext:bn,row:Tn,showContextToggle:_e,showDuplicates:Ot,showLabels:ut,showTime:rt,showDetectedFields:Ne,wrapLogMessage:je,prettifyLogMessage:dt,timeZone:Re,enableLogDetails:he,onClickFilterLabel:ze,onClickFilterOutLabel:ve,onClickShowDetectedField:Me,onClickHideDetectedField:Ae,getFieldLinks:ye,logsSortOrder:Oe,forceEscape:we,onLogRowHover:ke})),gt&&st&&xn.map((Tn,Zn)=>n.createElement(qe,{key:Tn.uid,getRows:Cn,getRowContext:bn,row:Tn,showContextToggle:_e,showDuplicates:Ot,showLabels:ut,showTime:rt,showDetectedFields:Ne,wrapLogMessage:je,prettifyLogMessage:dt,timeZone:Re,enableLogDetails:he,onClickFilterLabel:ze,onClickFilterOutLabel:ve,onClickShowDetectedField:Me,onClickHideDetectedField:Ae,getFieldLinks:ye,logsSortOrder:Oe,forceEscape:we,onLogRowHover:ke})),gt&&!st&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",jt.length-pe," rows..."))))}}at.defaultProps={previewLimit:Xe};const Ze=(0,i.HE)(at);Ze.displayName="LogsRows"},61694:(G,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(52423),n=e(90595),u=e(19253);const s=(i,m)=>{let f=i.isLight?i.v1.palette.gray5:i.v1.palette.gray2;const o=u.hoverColor(i.colors.background.secondary,i);switch(m){case n.in.crit:case n.in.critical:f="#705da0";break;case n.in.error:case n.in.err:f="#e24d42";break;case n.in.warning:case n.in.warn:f=i.colors.warning.main;break;case n.in.info:f="#7eb26d";break;case n.in.debug:f="#1f78c1";break;case n.in.trace:f="#6ed0e0";break}return{logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${i.components.textHighlight.text}
      background-color: ${i.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${i.typography.fontFamilyMonospace};
      font-size: ${i.typography.bodySmall.fontSize};
      width: 100%;
    `,context:t.css`
      label: context;
      visibility: hidden;
      white-space: nowrap;
      position: relative;
      margin-left: 10px;
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-context {
          visibility: visible;
          z-index: 1;
          text-decoration: underline;
          &:hover {
            color: ${i.colors.warning.main};
          }
        }
      }

      td:last-child {
        width: 100%;
      }

      > td {
        position: relative;
        padding-right: ${i.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }

      &:hover {
        background: ${o};
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:t.css`
      label: logs-row__level;
      max-width: 10px;
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: 4px;
        background-color: ${f};
      }
    `,logIconError:t.css`
      color: ${i.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${i.colors.border.medium};
      padding: 0 ${i.spacing(1)} ${i.spacing(1)};
      border-radius: 3px;
      margin: 20px 8px 20px 16px;
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${i.v1.palette.gray3};
      padding-top: 6px;
      padding-left: 6px;
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${i.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${i.typography.fontWeightBold};
      padding: ${i.spacing(1)} 0 ${i.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${o};
      }
    `}}},98206:(G,O,e)=>{"use strict";e.d(O,{b:()=>s});var t=e(68404),n=e(46739),u=e(74067);const s=({value:i,onChange:m,context:f,item:o})=>{const l=o.settings??{},r=(0,u.IX)(f.data,l?.filter),d=(0,u.nw)(r,i),c=(0,t.useCallback)(p=>{if(!(p&&!(0,u.w3)(p.value,r)))return m(p?.value)},[r,m]),g=d.find(p=>p.value===i);return t.createElement(t.Fragment,null,t.createElement(n.Ph,{value:g,placeholder:l.placeholderText??"Select field",options:d,onChange:c,noOptionsMessage:l.noFieldsMessage,width:l.width,isClearable:!0}))}},46090:(G,O,e)=>{"use strict";e.d(O,{i:()=>S});var t=e(64140),n=e(68404),u=e(85854),s=e(3249),i=e(25474);const m=(0,n.memo)(D=>{const{options:T,onChange:R}=D,L=(0,n.useCallback)(w=>R(w.target.value),[R]);return n.createElement(i.I,{placeholder:"Enter regular expression",defaultValue:T,onBlur:L})});m.displayName="FieldNameByRegexMatcherEditor";const f={id:u.mi.byRegexp,component:m,matcher:s.Ls.get(u.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:D=>D};var o=e(46739),l=e(74067);const r=(0,n.memo)(D=>{const{data:T,options:R,onChange:L,id:w}=D,A=(0,l.IX)(T),N=(0,l.nw)(A,R),W=(0,n.useCallback)(F=>{if((0,l.w3)(F.value,A))return L(F.value)},[A,L]),I=N.find(F=>F.value===R);return n.createElement(o.Ph,{value:I,options:N,onChange:W,inputId:w})});r.displayName="FieldNameMatcherEditor";const d={id:u.mi.byName,component:r,matcher:s.Ls.get(u.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:D=>D},c=(0,n.memo)(D=>{const{data:T,options:R,onChange:L}=D,{readOnly:w,prefix:A}=R,N=(0,l.IX)(T),W=(0,l.nw)(N,void 0),I=(0,n.useCallback)(F=>{if(Array.isArray(F))return L({...R,names:F.reduce((V,b)=>((0,l.w3)(b.value,N)&&V.push(b.value),V),[])})},[N,L,R]);if(w){const F=(R.names??[]).join(", ");return n.createElement(i.I,{value:F,readOnly:!0,disabled:!0,prefix:A})}return n.createElement(o.NU,{value:R.names,options:W,onChange:I})});c.displayName="FieldNameMatcherEditor";const g={id:u.mi.byNames,component:c,matcher:s.Ls.get(u.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:D=>(D.names??[]).join(", "),excludeFromPicker:!0};var p=e(14582);const y=(0,n.memo)(D=>{const{data:T,options:R,onChange:L,id:w}=D,A=a(T),N=v(A,R),W=(0,n.useCallback)(F=>L(F.value),[L]),I=N.find(F=>F.value===R);return n.createElement(o.Ph,{inputId:w,value:I,options:N,onChange:W})});y.displayName="FieldTypeMatcherEditor";const h=[{value:p.fS.number,label:"Numeric"},{value:p.fS.string,label:"String"},{value:p.fS.time,label:"Time"},{value:p.fS.boolean,label:"Boolean"},{value:p.fS.trace,label:"Traces"},{value:p.fS.other,label:"Other"}],a=D=>(0,n.useMemo)(()=>{const T=new Map;for(const R of h)T.set(R.value,0);for(const R of D)for(const L of R.fields){const w=L.type||p.fS.other;let A=T.get(w);A||(A=0),T.set(w,A+1)}return T},[D]),v=(D,T)=>(0,n.useMemo)(()=>{let R=!1;const L=[];for(const w of h){const A=D.get(w.value),N=T===w.value;(A||N)&&L.push({...w,label:`${w.label} (${D.get(w.value)})`}),N&&(R=!0)}return T&&!R&&L.push({value:T,label:`${T} (No matches)`}),L},[D,T]),C={id:u.mi.byType,component:y,matcher:s.Ls.get(u.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:D=>D},E=(0,n.memo)(D=>{const{data:T,options:R,onChange:L}=D,w=x(T),A=M(w),N=(0,n.useCallback)(I=>{if(!(!I.value||!w.has(I.value)))return L(I.value)},[w,L]),W=A.find(I=>I.value===R);return n.createElement(o.Ph,{value:W,options:A,onChange:N})});E.displayName="FieldsByFrameRefIdMatcher";const P={id:u.mi.byFrameRefID,component:E,matcher:s.Ls.get(u.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:D=>D},x=D=>(0,n.useMemo)(()=>{const T=new Set;for(const R of D)R.refId&&T.add(R.refId);return T},[D]),M=D=>(0,n.useMemo)(()=>Array.from(D).map(T=>({value:T,label:T})),[D]),S=new t.B(()=>[d,f,C,P,g])},74067:(G,O,e)=>{"use strict";e.d(O,{IX:()=>m,nw:()=>f,w3:()=>s});var t=e(68404),n=e(89890),u=e(91228);function s(o,l){return o?l.display.has(o)||l.raw.has(o):!1}function i(o,l){const r={display:new Set,raw:new Set,fields:new Map};for(const d of o)for(const c of d.fields){if(l&&!l(c))continue;const g=(0,n.C)(c,d,o);r.display.add(g),r.fields.set(g,c),c.name&&g!==c.name&&(r.raw.add(c.name),r.fields.set(c.name,c))}return r}function m(o,l){return(0,t.useMemo)(()=>i(o,l),[o,l])}function f(o,l,r,d){return(0,t.useMemo)(()=>{let c=!1;const g=[];r&&g.push(r);for(const p of o.display){!c&&p===l&&(c=!0);const y=o.fields.get(p);(!d||d===y?.type)&&g.push({value:p,label:p,icon:y?(0,u.e7)(y):void 0})}for(const p of o.raw)o.display.has(p)||(!c&&p===l&&(c=!0),g.push({value:p,label:`${p} (base field name)`}));return l&&!c&&g.push({value:l,label:`${l} (not found)`}),g},[o,l,r,d])}},63346:(G,O,e)=>{"use strict";e.d(O,{v:()=>r});var t=e(52423),n=e(68404),u=e(29516);function s(){const c=(0,u.wW)(i);return n.createElement("div",{className:c.divider})}const i=c=>({divider:(0,t.css)({height:1,backgroundColor:c.colors.border.weak,margin:c.spacing(.5,0)})});var m=e(75182),f=e(87302),o=e(52442);const l=n.forwardRef(({header:c,children:g,ariaLabel:p,onOpen:y,onClose:h,onKeyDown:a,...v},C)=>{const E=(0,u.wW)(d),P=(0,n.useRef)(null);(0,n.useImperativeHandle)(C,()=>P.current);const[x,M]=(0,o.d)({localRef:P,onOpen:y,onClose:h,onKeyDown:a});return n.createElement("div",{...v,tabIndex:-1,ref:P,className:E.wrapper,role:"menu","aria-label":p,onKeyDown:x,onFocus:M},c&&n.createElement("div",{className:E.header},c),g)});l.displayName="Menu";const r=Object.assign(l,{Item:f.s,Divider:s,Group:m.k}),d=c=>({header:(0,t.css)({padding:`${c.spacing(.5,.5,1,.5)}`,borderBottom:`1px solid ${c.colors.border.weak}`}),wrapper:(0,t.css)({background:`${c.colors.background.primary}`,boxShadow:`${c.shadows.z3}`,display:"inline-block",borderRadius:`${c.shape.borderRadius()}`,padding:`${c.spacing(.5,0)}`})})},75182:(G,O,e)=>{"use strict";e.d(O,{k:()=>m});var t=e(52423),n=e(82897),u=e.n(n),s=e(68404),i=e(29516);const m=({label:o,ariaLabel:l,children:r})=>{const d=(0,i.wW)(f),c=`group-label-${(0,n.uniqueId)()}`;return s.createElement("div",{role:"group","aria-labelledby":!l&&o?c:void 0,"aria-label":l},o&&s.createElement("label",{id:c,className:d.groupLabel,"aria-hidden":!0},o),r)};m.displayName="MenuGroup";const f=o=>({groupLabel:t.css`
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.size.sm};
      padding: ${o.spacing(.5,1)};
    `})},87302:(G,O,e)=>{"use strict";e.d(O,{s:()=>d});var t=e(52423),n=e(68404),u=e(29516),s=e(19253),i=e(81697),m=e(68183),f=e(52442);const o=g=>{if(!g)return"left";const p=g.parentElement.getBoundingClientRect(),y=g.getBoundingClientRect();return y.width===0?"left":p.right+y.width+10>window.innerWidth?"right":"left"},l=n.memo(({items:g,isOpen:p,openedWithArrow:y,setOpenedWithArrow:h,close:a,customStyle:v})=>{const C=(0,u.wW)(r),E=(0,n.useRef)(null),[P]=(0,f.d)({localRef:E,isMenuOpen:p,openedWithArrow:y,setOpenedWithArrow:h,close:a});return n.createElement(n.Fragment,null,n.createElement("div",{className:C.iconWrapper,"aria-label":m.wl.components.Menu.SubMenu.icon},n.createElement(i.J,{name:"angle-right",className:C.icon,"aria-hidden":!0})),p&&n.createElement("div",{ref:E,className:C.subMenu(E.current),"aria-label":m.wl.components.Menu.SubMenu.container,style:v},n.createElement("div",{tabIndex:-1,className:C.itemsWrapper,role:"menu",onKeyDown:P},g)))});l.displayName="SubMenu";const r=g=>({iconWrapper:t.css`
      display: flex;
      flex: 1;
      justify-content: end;
    `,icon:t.css`
      opacity: 0.7;
      margin-left: ${g.spacing(2)};
      color: ${g.colors.text.secondary};
    `,itemsWrapper:t.css`
      background: ${g.colors.background.primary};
      box-shadow: ${g.shadows.z3};
      display: inline-block;
      border-radius: ${g.shape.borderRadius()};
    `,subMenu:p=>t.css`
      position: absolute;
      top: 0;
      z-index: ${g.zIndex.dropdown};
      ${o(p)}: 100%;
    `}),d=n.memo(n.forwardRef((g,p)=>{const{url:y,icon:h,label:a,ariaLabel:v,ariaChecked:C,target:E,onClick:P,className:x,active:M,disabled:S,destructive:D,childItems:T,role:R="menuitem",tabIndex:L=-1,customSubMenuContainerStyles:w}=g,A=(0,u.wW)(c),[N,W]=(0,n.useState)(M),[I,F]=(0,n.useState)(!1),[V,b]=(0,n.useState)(!1),X=(0,n.useCallback)(()=>{S||(F(!0),W(!0))},[S]),k=(0,n.useCallback)(()=>{S||(F(!1),W(!1))},[S]),H=T&&T.length>0,Y=H?"div":y===void 0?"button":"a",ee=(0,t.cx)({[A.item]:!0,[A.active]:N,[A.disabled]:S,[A.destructive]:D&&!S},x),ue={[Y==="button"?"disabled":"aria-disabled"]:S,...Y==="a"&&S&&{href:void 0,onClick:void 0},...S&&{tabIndex:-1,["data-disabled"]:S}},q=(0,n.useRef)(null);(0,n.useImperativeHandle)(p,()=>q.current);const ge=fe=>{switch(fe.key){case"ArrowRight":fe.preventDefault(),fe.stopPropagation(),H&&(F(!0),b(!0),W(!0));break;default:break}},De=()=>{F(!1),W(!1),q?.current?.focus()};return n.createElement(Y,{target:E,className:ee,rel:E==="_blank"?"noopener noreferrer":void 0,href:y,onClick:P,onMouseEnter:X,onMouseLeave:k,onKeyDown:ge,role:y===void 0?R:void 0,"data-role":"menuitem",ref:q,"aria-label":v,"aria-checked":C,tabIndex:L,...ue},n.createElement(n.Fragment,null,h&&n.createElement(i.J,{name:h,className:A.icon,"aria-hidden":!0}),a),H&&n.createElement(l,{items:T,isOpen:I,openedWithArrow:V,setOpenedWithArrow:b,close:De,customStyle:w}))}));d.displayName="MenuItem";const c=g=>({item:t.css`
      background: none;
      cursor: pointer;
      white-space: nowrap;
      color: ${g.colors.text.primary};
      display: flex;
      align-items: center;
      padding: ${g.spacing(.5,2)};
      min-height: ${g.spacing(4)};
      margin: 0;
      border: none;
      width: 100%;
      position: relative;

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${g.colors.action.hover};
        color: ${g.colors.text.primary};
        text-decoration: none;
      }

      &:focus-visible {
        ${(0,s.getFocusStyles)(g)}
      }
    `,active:t.css`
      background: ${g.colors.action.hover};
    `,destructive:t.css`
      color: ${g.colors.error.text};

      svg {
        color: ${g.colors.error.text};
      }

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${g.colors.error.main};
        color: ${g.colors.error.contrastText};

        svg {
          color: ${g.colors.error.contrastText};
        }
      }
    `,disabled:t.css`
      color: ${g.colors.action.disabledText};

      &:hover,
      &:focus,
      &:focus-visible {
        cursor: not-allowed;
        background: none;
        color: ${g.colors.action.disabledText};
      }
    `,icon:t.css`
      opacity: 0.7;
      margin-right: 10px;
      margin-left: -4px;
      color: ${g.colors.text.secondary};
    `})},52442:(G,O,e)=>{"use strict";e.d(O,{d:()=>i});var t=e(68404),n=e(58252);const u=(m,f)=>(m%f+f)%f,s=-1,i=({localRef:m,isMenuOpen:f,openedWithArrow:o,setOpenedWithArrow:l,close:r,onOpen:d,onClose:c,onKeyDown:g})=>{const[p,y]=(0,t.useState)(s);return(0,t.useEffect)(()=>{f&&o&&(y(0),l?.(!1))},[f,o,l]),(0,t.useEffect)(()=>{const v=m?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');v?.[p]?.focus(),v?.forEach((C,E)=>{C.tabIndex=E===p?0:-1})},[m,p]),(0,n.Z)(()=>{const v=m?.current?.querySelector('[data-role="menuitem"]:not([data-disabled])');v&&(v.tabIndex=0),d?.(y)}),[v=>{const C=m?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),E=C?.length??0;switch(v.key){case"ArrowUp":v.preventDefault(),v.stopPropagation(),y(u(p-1,E));break;case"ArrowDown":v.preventDefault(),v.stopPropagation(),y(u(p+1,E));break;case"ArrowLeft":v.preventDefault(),v.stopPropagation(),y(s),r?.();break;case"Home":v.preventDefault(),v.stopPropagation(),y(0);break;case"End":v.preventDefault(),v.stopPropagation(),y(E-1);break;case"Enter":v.preventDefault(),v.stopPropagation(),C?.[p]?.click();break;case"Escape":c?.();break;case"Tab":v.preventDefault(),c?.();break;default:break}g?.(v)},()=>{p===s&&y(0)}]}},6694:(G,O,e)=>{"use strict";e.d(O,{u:()=>d});var t=e(52423),n=e(99510),u=e(81699),s=e(6665),i=e(68404),m=e(29516),f=e(20017),o=e(90701),l=e(5114),r=e(34003);function d(p){const{title:y,children:h,isOpen:a=!1,closeOnEscape:v=!0,closeOnBackdropClick:C=!0,className:E,contentClassName:P,onDismiss:x,onClickBackdrop:M,trapFocus:S=!0}=p,D=(0,m.l4)(),T=(0,r.J)(D),R=(0,i.useRef)(null),{overlayProps:L,underlayProps:w}=(0,s.Ir)({isKeyboardDismissDisabled:!v,isOpen:a,onClose:x},R),{dialogProps:A,titleProps:N}=(0,n.R)({},R);if(!a)return null;const W=(0,t.cx)(T.modalHeader,typeof y!="string"&&T.modalHeaderWithTabs);return i.createElement(s.Xj,null,i.createElement("div",{role:"presentation",className:T.modalBackdrop,onClick:M||(C?x:void 0),...w}),i.createElement(u.MT,{contain:S,autoFocus:!0,restoreFocus:!0},i.createElement("div",{className:(0,t.cx)(T.modal,E),ref:R,...L,...A},i.createElement("div",{className:W},typeof y=="string"&&i.createElement(g,{...p,title:y,id:N.id}),typeof y!="string"&&y,i.createElement("div",{className:T.modalHeaderClose},i.createElement(f.h,{"aria-label":"Close dialogue",name:"times",size:"xl",onClick:x}))),i.createElement("div",{className:(0,t.cx)(T.modalContent,P)},h))))}function c({leftItems:p,children:y}){const h=(0,m.l4)(),a=(0,r.J)(h);return p?i.createElement("div",{className:a.modalButtonRow},i.createElement(o.Lh,{justify:"space-between"},i.createElement(o.Lh,{justify:"flex-start",spacing:"md"},p),i.createElement(o.Lh,{justify:"flex-end",spacing:"md"},y))):i.createElement("div",{className:a.modalButtonRow},i.createElement(o.Lh,{justify:"flex-end",spacing:"md"},y))}d.ButtonRow=c;function g({icon:p,iconTooltip:y,title:h,id:a}){return i.createElement(l.x,{icon:p,iconTooltip:y,title:h,id:a})}},5114:(G,O,e)=>{"use strict";e.d(O,{x:()=>s});var t=e(68404),n=e(29516),u=e(34003);const s=({icon:i,iconTooltip:m,title:f,children:o,id:l})=>{const r=(0,n.wW)(u.J);return t.createElement(t.Fragment,null,t.createElement("h2",{className:r.modalHeaderTitle,id:l},f),o)}},60255:(G,O,e)=>{"use strict";e.d(O,{Q:()=>n});var t=e(68404);const n=({children:u})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},u)))},33716:(G,O,e)=>{"use strict";e.d(O,{H:()=>i});var t=e(68404),n=e(17353),u=e(26625),s=e(5114);const i=({icon:m,title:f,tabs:o,activeTab:l,onChangeTab:r})=>t.createElement(s.x,{icon:m,title:f},t.createElement(u.J,{hideBorder:!0},o.map((d,c)=>t.createElement(n.O,{key:`${d.value}-${c}`,label:d.label,icon:d.icon,suffix:d.tabSuffix,active:d.value===l,onChangeTab:()=>r(d)}))))},88561:(G,O,e)=>{"use strict";e.d(O,{$i:()=>u,JY:()=>i,Y0:()=>s,kr:()=>n});var t=e(68404);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class u extends t.Component{constructor(f){super(f),this.showModal=(o,l)=>{this.setState({component:o,props:l})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:f.component||null,props:f.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const s=()=>t.createElement(n.Consumer,null,({component:m,props:f})=>m?t.createElement(m,{...f}):null),i=n.Consumer},34003:(G,O,e)=>{"use strict";e.d(O,{J:()=>u});var t=e(52423),n=e(82385);const u=(0,n.B)(s=>{const i=s.shape.borderRadius(1);return{modal:t.css`
      position: fixed;
      z-index: ${s.zIndex.modal};
      background: ${s.colors.background.primary};
      box-shadow: ${s.shadows.z3};
      border-radius: ${i};
      border: 1px solid ${s.colors.border.weak};
      background-clip: padding-box;
      outline: none;
      width: 750px;
      max-width: 100%;
      left: 0;
      right: 0;
      margin-left: auto;
      margin-right: auto;
      top: 10%;
      max-height: 80%;
      display: flex;
      flex-direction: column;
    `,modalBackdrop:t.css`
      position: fixed;
      z-index: ${s.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: ${s.components.overlay.background};
      backdrop-filter: blur(1px);
    `,modalHeader:t.css`
      label: modalHeader;
      display: flex;
      align-items: center;
      min-height: 42px;
      margin: ${s.spacing(1,2,0,2)};
    `,modalHeaderWithTabs:t.css`
      border-bottom: 1px solid ${s.colors.border.weak};
    `,modalHeaderTitle:t.css`
      font-size: ${s.typography.size.lg};
      margin: ${s.spacing(0,4,0,1)};
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    `,modalHeaderIcon:t.css`
      margin-right: ${s.spacing(2)};
      font-size: inherit;
      &:before {
        vertical-align: baseline;
      }
    `,modalHeaderClose:t.css`
      height: 100%;
      display: flex;
      align-items: center;
      color: ${s.colors.text.secondary};
      flex-grow: 1;
      justify-content: flex-end;
    `,modalContent:t.css`
      overflow: auto;
      padding: ${s.spacing(3)};
      width: 100%;
    `,modalButtonRow:t.css`
      padding-top: ${s.spacing(3)};
    `}})},57172:(G,O,e)=>{"use strict";e.d(O,{p:()=>g});var t=e(52423),n=e(68404),u=e(87442),s=e(68183),i=e(29516),m=e(26501),f=e(61723);function o(y){for(let h=y.length-1;h>0;h--){const a=y.charAt(h);if(a==="$")return{index:h,prefix:y.substring(h)};if(a===" "||a==="	"||a==='"'||a==="'")return{index:h+1,prefix:y.substring(h+1)}}return{index:0,prefix:y}}function l(y,h,a,v){const C=[];for(const E of a)h&&!E.label.startsWith(h)||C.push({...E,kind:r(y,E.kind),range:v,insertText:E.insertText??E.label});return C}function r(y,h){switch(h){case f.k.Method:return y.languages.CompletionItemKind.Method;case f.k.Field:return y.languages.CompletionItemKind.Field;case f.k.Property:return y.languages.CompletionItemKind.Property;case f.k.Constant:return y.languages.CompletionItemKind.Constant;case f.k.Text:return y.languages.CompletionItemKind.Text}return y.languages.CompletionItemKind.Text}function d(y,h,a){if(!(!h||!a))return y.languages.registerCompletionItemProvider(h,{triggerCharacters:["$"],provideCompletionItems:(v,C,E)=>{const P={startLineNumber:C.lineNumber,endLineNumber:C.lineNumber,startColumn:C.column,endColumn:C.column};if(E.triggerCharacter==="$")return P.startColumn=C.column-1,{suggestions:l(y,"$",a(),P)};const x=v.getValueInRange({startLineNumber:C.lineNumber,startColumn:1,endLineNumber:C.lineNumber,endColumn:C.column}),{index:M,prefix:S}=o(x);P.startColumn=M+1;const D=l(y,S,a(),P);if(D.length)return{suggestions:D}}})}class c extends n.PureComponent{constructor(h){super(h),this.loadCustomLanguage=()=>{const{language:a}=this.props,v=u.F.getIfExists(a);return v?v.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:a}=this.props;a&&a(this.getEditorValue())},this.onSave=()=>{const{onSave:a}=this.props;a&&a(this.getEditorValue())},this.handleBeforeMount=a=>{this.monaco=a;const{language:v,getSuggestions:C,onBeforeEditorMount:E}=this.props;C&&(this.completionCancel=d(a,v,C)),E?.(a)},this.handleOnMount=(a,v)=>{const{onChange:C,onEditorDidMount:E}=this.props;this.getEditorValue=()=>a.getValue(),a.addCommand(v.KeyMod.CtrlCmd|v.KeyCode.KeyS,this.onSave);const P=this.loadCustomLanguage();E&&(P.then(()=>E(a,v)),a.getModel()?.onDidChangeContent(()=>C?.(a.getValue())))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(h){const{getSuggestions:a,language:v}=this.props,C=h.language!==v;if(h.getSuggestions!==a||C){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}a&&(this.completionCancel=d(this.monaco,v,a))}C&&this.loadCustomLanguage()}render(){const{theme:h,language:a,width:v,height:C,showMiniMap:E,showLineNumbers:P,readOnly:x,monacoOptions:M}=this.props,S=this.props.value??"",D=S.length>100,T=this.props.containerStyles??p(h).container,R={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:D&&E,renderCharacters:!1},readOnly:x,lineNumbersMinChars:4,lineDecorationsWidth:1*h.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*h.spacing.gridSize,bottom:.5*h.spacing.gridSize},fixedOverflowWidgets:!0};return P||(R.glyphMargin=!1,R.folding=!1,R.lineNumbers="off",R.lineNumbersMinChars=0),n.createElement("div",{className:T,onBlur:this.onBlur,"aria-label":s.wl.components.CodeEditor.container},n.createElement(m.o,{width:v,height:C,language:a,value:S,options:{...R,...M??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount}))}}const g=(0,i.HE)(c),p=y=>({container:t.css`
      border-radius: ${y.shape.borderRadius()};
      border: 1px solid ${y.components.input.borderColor};
    `})},26501:(G,O,e)=>{"use strict";e.d(O,{o:()=>m});var t=e(68404),n=e(90090),u=e(56065),s=e(22350);const i=f=>{const o=(0,s.Z)(async()=>await f);return{...o,dependency:o.value}},m=f=>{const{loading:o,error:l,dependency:r}=i(e.e(2462).then(e.bind(e,58753)));if(o)return t.createElement(n.u,{text:""});if(l)return t.createElement(u.X,{title:"React Monaco Editor failed to load",error:l,errorInfo:{componentStack:l?.stack||""}});const d=r.ReactMonacoEditor;return t.createElement(d,{...f})}},61723:(G,O,e)=>{"use strict";e.d(O,{k:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},82586:(G,O,e)=>{"use strict";e.d(O,{T:()=>n});var t=e(61723);function n(u){const s="${"+u.value+"}",i=u.value===u.label?u.origin:`${u.label} / ${u.origin}`;return{label:s,kind:t.k.Property,detail:i,documentation:u.documentation}}},10129:(G,O,e)=>{"use strict";e.d(O,{X:()=>r});var t=e(52423),n=e(68404),u=e(68183),s=e(90031),i=e(93880),m=e(29516),f=e(19253),o=e(81697),l=e(20017);const r=n.memo(({title:c,section:g,parent:p,pageIcon:y,onGoBack:h,children:a,titleHref:v,parentHref:C,leftItems:E,isFullscreen:P,className:x,"aria-label":M,buttonOverflowAlignment:S="right"})=>{const D=(0,m.wW)(d),T=(0,t.cx)("page-toolbar",D.toolbar,{["page-toolbar--fullscreen"]:P,[D.noPageIcon]:!y},x),R=n.createElement(n.Fragment,null,n.createElement("span",{className:D.truncateText},c),g&&n.createElement("span",{className:D.pre}," / ",g));return n.createElement("nav",{className:T,"aria-label":M},n.createElement("div",{className:D.leftWrapper},y&&!h&&n.createElement("div",{className:D.pageIcon},n.createElement(o.J,{name:y,size:"lg","aria-hidden":!0})),h&&n.createElement("div",{className:D.pageIcon},n.createElement(l.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":u.wl.components.BackButton.backArrow,onClick:h})),n.createElement("nav",{"aria-label":"Search links",className:D.navElement},p&&C&&n.createElement(n.Fragment,null,n.createElement(s.r,{"aria-label":`Search dashboard in the ${p} folder`,className:(0,t.cx)(D.titleText,D.parentLink,D.titleLink,D.truncateText),href:C},p," ",n.createElement("span",{className:D.parentIcon})),v&&n.createElement("span",{className:(0,t.cx)(D.titleText,D.titleDivider),"aria-hidden":!0},"/")),(c||Boolean(E?.length))&&n.createElement("div",{className:D.titleWrapper},c&&n.createElement("h1",{className:D.h1Styles},v?n.createElement(s.r,{"aria-label":"Search dashboard by name",className:(0,t.cx)(D.titleText,D.titleLink),href:v},R):n.createElement("div",{className:D.titleText},R)),E?.map((L,w)=>n.createElement("div",{className:D.leftActionItem,key:w},L))))),n.createElement(i.R,{alignment:S},n.Children.toArray(a).filter(Boolean)))});r.displayName="PageToolbar";const d=c=>{const{spacing:g,typography:p}=c,y=(0,f.getFocusStyles)(c);return{pre:t.css`
      white-space: pre;
    `,toolbar:t.css`
      align-items: center;
      background: ${c.colors.background.canvas};
      display: flex;
      gap: ${c.spacing(2)};
      justify-content: space-between;
      padding: ${c.spacing(1.5,2)};

      ${c.breakpoints.down("md")} {
        padding-left: 53px;
      }
    `,noPageIcon:t.css`
      ${c.breakpoints.down("md")} {
        padding-left: ${c.spacing(2)};
      }
    `,leftWrapper:t.css`
      display: flex;
      flex-wrap: nowrap;
      max-width: 70%;
    `,pageIcon:t.css`
      display: none;
      ${c.breakpoints.up("sm")} {
        display: flex;
        padding-right: ${c.spacing(1)};
        align-items: center;
      }
    `,truncateText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,titleWrapper:t.css`
      display: flex;
      margin: 0;
      min-width: 0;
    `,navElement:t.css`
      display: flex;
      align-items: center;
      min-width: 0;
    `,h1Styles:t.css`
      margin: ${g(0,1,0,0)};
      line-height: inherit;
      flex-grow: 1;
      min-width: 0;
    `,parentIcon:t.css`
      margin-left: ${c.spacing(.5)};
    `,titleText:t.css`
      display: flex;
      font-size: ${p.size.lg};
      margin: 0;
      max-width: 300px;
      border-radius: 2px;
    `,titleLink:t.css`
      &:focus-visible {
        ${y}
      }
    `,titleDivider:t.css`
      padding: ${g(0,.5,0,.5)};
      display: none;
      ${c.breakpoints.up("md")} {
        display: unset;
      }
    `,parentLink:t.css`
      display: none;
      ${c.breakpoints.up("md")} {
        display: unset;
        flex: 1;
      }
    `,leftActionItem:t.css`
      display: none;
      ${c.breakpoints.up("md")} {
        align-items: center;
        display: flex;
        padding-right: ${g(.5)};
      }
    `}}},89891:(G,O,e)=>{"use strict";e.d(O,{t:()=>m});var t=e(52423),n=e(68404),u=e(29516),s=e(90723),i=e(81697);const m=({currentPage:o,numberOfPages:l,onNavigate:r,hideWhenSinglePage:d,showSmallVersion:c,className:g})=>{const p=(0,u.wW)(f),y=c?1:8,h=(0,n.useMemo)(()=>{const a=[...new Array(l).keys()],v=l>y,C=(E,P)=>n.createElement("li",{key:E,className:p.item},n.createElement(s.zx,{size:"sm",variant:P,onClick:()=>r(E)},E));return a.reduce((E,P)=>{const x=P+1,M=x===o?"primary":"secondary",S=y,D=l-y+1,T=D-S,R=x===1||x===l,L=T>-1&&o>=S&&o<=D,w=c?1:3,A=c?0:2;return v?R||o<S&&x<S||T>=0&&o>D&&x>D||T<0&&o>=S&&x>D||L&&x>=o-A&&x<=o+A?E.push(C(x,M)):(x===S&&o<S||x===D&&o>D||L&&(x===o-w||x===o+w))&&E.push(n.createElement("li",{key:x,className:p.item},n.createElement(i.J,{className:p.ellipsis,name:"ellipsis-v"}))):E.push(C(x,M)),E},[])},[o,l,r,y,c,p.ellipsis,p.item]);return d&&l<=1?null:n.createElement("div",{className:(0,t.cx)(p.container,g)},n.createElement("ol",null,n.createElement("li",{className:p.item},n.createElement(s.zx,{"aria-label":"previous",size:"sm",variant:"secondary",onClick:()=>r(o-1),disabled:o===1},n.createElement(i.J,{name:"angle-left"}))),h,n.createElement("li",{className:p.item},n.createElement(s.zx,{"aria-label":"next",size:"sm",variant:"secondary",onClick:()=>r(o+1),disabled:o===l},n.createElement(i.J,{name:"angle-right"})))))},f=()=>({container:t.css`
      float: right;
    `,item:t.css`
      display: inline-block;
      padding-left: 10px;
      margin-bottom: 5px;
    `,ellipsis:t.css`
      transform: rotate(90deg);
    `})},15354:(G,O,e)=>{"use strict";e.d(O,{g:()=>r});var t=e(52423),n=e(68404),u=e(29516);const s={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"},i=8,m={name:"Grafana Default",typography:{fontFamily:{sansSerif:'"Inter", "Helvetica", "Arial", sans-serif',monospace:"'Roboto Mono', monospace"},size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},heading:{h1:"28px",h2:"24px",h3:"21px",h4:"18px",h5:"16px",h6:"14px"},weight:{light:300,regular:400,semibold:500,bold:500},lineHeight:{xs:1,sm:1.1,md:1.5,lg:2},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:"0",sm:"544px",md:"769px",lg:"992px",xl:"1200px",xxl:"1440px"},spacing:{base:i,insetSquishMd:"4px 8px",d:"16px",xxs:"2px",xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",gutter:"30px",formSpacingBase:i,formMargin:`${i*4}px`,formFieldsetMargin:`${i*2}px`,formInputHeight:i*4,formButtonHeight:i*4,formInputPaddingHorizontal:`${i}px`,formInputAffixPaddingHorizontal:`${i/2}px`,formInputMargin:`${i*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${i/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:"2px",md:"3px",lg:"5px"},width:{sm:"1px"}},height:{sm:24,md:32,lg:48},panelPadding:8,panelHeaderHeight:28,zIndex:{navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061}},f=null;var o=e(81697),l=e(48756);const r=({error:c,onClick:g})=>{const p=(0,u.wW)(d);return c?n.createElement(l.u,{theme:"error",content:c},n.createElement(o.J,{onClick:g,className:(0,t.cx)(p.icon,{[p.clickable]:!!g}),size:"sm",name:"exclamation-triangle"})):null},d=()=>({clickable:(0,t.css)({cursor:"pointer"}),icon:(0,t.css)({color:`${s.red88}`})})},48484:(G,O,e)=>{"use strict";e.d(O,{T:()=>f});var t=e(52423),n=e(68404),u=e(68183),s=e(29516),i=e(81697),m=e(48756);const f=({onCancel:l,loading:r})=>{const d=(0,s.wW)(o);return r?n.createElement(m.u,{content:"Cancel query"},n.createElement(i.J,{className:(0,t.cx)("spin-clockwise",{[d.clickable]:!!l}),name:"sync",size:"sm",onClick:l,"aria-label":u.wl.components.LoadingIndicator.icon})):null},o=()=>({clickable:(0,t.css)({cursor:"pointer"})})},71235:(G,O,e)=>{"use strict";e.d(O,{R9:()=>i,_w:()=>s,bb:()=>u});var t=e(68404),n=e(85081);const u=t.createContext({eventBus:new n.F}),s=u.Provider,i=()=>t.useContext(u)},86016:(G,O,e)=>{"use strict";e.d(O,{fm:()=>D});var t=e(15354),n=e(48484),u=e(52423),s=e(68404),i=e(49922),m=e(68183),f=e(29516),o=e(26639),l=e(81697),r=e(61458),d=e(26408),c=e(48756),g=e(19253);const p=(0,s.forwardRef)(({className:T,children:R,href:L,onClick:w,target:A,title:N,...W},I)=>{const F=(0,f.wW)(y);return L?s.createElement("a",{ref:I,href:L,onClick:w,target:A,title:N,className:(0,u.cx)(F.item,T),...W},R):s.createElement("span",{ref:I,className:(0,u.cx)(F.item,T),...W},R)});p.displayName="TitleItem";const y=T=>({item:(0,u.css)({color:`${T.colors.text.secondary}`,label:"panel-header-item",backgroundColor:`${T.colors.background.primary}`,cursor:"auto",border:"none",borderRadius:`${T.shape.borderRadius()}`,padding:`${T.spacing(0,1)}`,height:`${T.spacing(T.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,g.getFocusStyles)(T),zIndex:1},"&: focus:not(:focus-visible)":(0,g.getMouseFocusStyles)(T),"&:hover ":{boxShadow:`${T.shadows.z1}`,background:`${T.colors.background.secondary}`}})});function h({description:T,className:R}){const L=a(),w=()=>{const A=typeof T=="function"?T():T;return s.createElement("div",{className:"panel-info-content markdown-html"},s.createElement("div",{dangerouslySetInnerHTML:{__html:A}}))};return T!==""?s.createElement(c.u,{interactive:!0,content:w},s.createElement(p,{className:(0,u.cx)(R,L.description)},s.createElement(l.J,{name:"info-circle",size:"lg",title:"description"}))):null}const a=()=>({description:(0,u.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function v({className:T,message:R,onClick:L,ariaLabel:w="status"}){const A=(0,f.wW)(C);return s.createElement(d.h,{className:(0,u.cx)(T,A.buttonStyles),onClick:L,variant:"destructive",icon:"exclamation-triangle",tooltip:R||"","aria-label":w})}const C=T=>{const{headerHeight:R,padding:L}=T.components.panel;return{buttonStyles:(0,u.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:T.spacing(L),width:T.spacing(R),height:T.spacing(R),borderRadius:0})}};function E({width:T,height:R,children:L,padding:w="md",title:A="",description:N="",titleItems:W=[],menu:I,dragClass:F,dragClassCancel:V,hoverHeader:b=!1,loadingState:X,statusMessage:k,statusMessageOnClick:H,leftItems:Y}){const ee=(0,f.l4)(),ue=(0,f.wW)(S),q=b===!1&&(A.length>0||W.length>0||N!==""||X===i.Gu.Streaming||(Y?.length??0)>0),ge=x(ee,q),{contentStyle:De,innerWidth:fe,innerHeight:me}=M(w,ee,T,ge,R),ce={height:ge,cursor:F?"move":"auto"},ie={minHeight:ge,minWidth:ge},re={width:T,height:R},Ee=A?m.wl.components.Panels.Panel.containerByTitle(A):"Panel";return s.createElement("div",{className:ue.container,style:re,"aria-label":Ee},s.createElement("div",{className:ue.loadingBarContainer},X===i.Gu.Loading?s.createElement(r.F,{width:"28%",height:"2px",ariaLabel:"Panel loading bar"}):null),s.createElement("div",{className:(0,u.cx)(ue.headerContainer,F),style:ce,"data-testid":"header-container"},A&&s.createElement("h6",{title:A,className:ue.title},A),s.createElement(h,{description:N,className:V}),W.length>0&&s.createElement("div",{className:(0,u.cx)(ue.titleItems,V),"data-testid":"title-items-container"},W.map(J=>J)),X===i.Gu.Streaming&&s.createElement("div",{className:ue.item,style:ie,"data-testid":"panel-streaming"},s.createElement(c.u,{content:"Streaming"},s.createElement(l.J,{name:"circle-mono",size:"sm",className:ue.streaming}))),s.createElement("div",{className:ue.rightAligned},I&&s.createElement(o.L,{overlay:I,placement:"bottom"},s.createElement(d.h,{"aria-label":`Menu for panel with ${A?`title ${A}`:"no title"}`,title:"Menu",icon:"ellipsis-v",narrow:!0,"data-testid":"panel-menu-button",className:(0,u.cx)(ue.menuItem,V,"menu-icon")})),Y&&s.createElement("div",{className:ue.items},P(Y,J=>J))),k&&s.createElement(v,{className:(0,u.cx)(ue.errorContainer,V),message:k,onClick:H,ariaLabel:"Panel status"})),s.createElement("div",{className:ue.content,style:De},L(fe,me)))}const P=(T,R)=>{const L=s.Children.toArray(T).filter(Boolean);return L.length>0?R(L):null},x=(T,R)=>R?T.spacing.gridSize*T.components.panel.headerHeight:0,M=(T,R,L,w,A)=>{const N=(T==="md"?R.components.panel.padding:0)*R.spacing.gridSize,W=N*2,I=1*2,F=L-W-I,V=A-w-W-I;return{contentStyle:{padding:N},innerWidth:F,innerHeight:V}},S=T=>{const{background:R,borderColor:L}=T.components.panel;return{container:(0,u.css)({label:"panel-container",backgroundColor:R,border:`1px solid ${L}`,position:"relative",borderRadius:"3px",height:"100%",display:"flex",flexDirection:"column",flex:"1 1 0","&:focus-visible, &:hover":{".menu-icon":{visibility:"visible"}},"&:focus-visible":{outline:`1px solid ${T.colors.action.focus}`}}),loadingBarContainer:(0,u.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%",overflow:"hidden"}),content:(0,u.css)({label:"panel-content",flexGrow:1,contain:"strict"}),headerContainer:(0,u.css)({label:"panel-header",display:"flex",alignItems:"center",padding:T.spacing(0,0,0,1)}),streaming:(0,u.css)({label:"panel-streaming",marginRight:0,color:T.colors.success.text,"&:hover":{color:T.colors.success.text}}),title:(0,u.css)({label:"panel-title",marginBottom:0,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:T.typography.h6.fontSize,fontWeight:T.typography.h6.fontWeight}),items:(0,u.css)({display:"flex"}),item:(0,u.css)({display:"flex",justifyContent:"center",alignItems:"center"}),menuItem:(0,u.css)({label:"panel-menu",visibility:"hidden",border:"none"}),errorContainer:(0,u.css)({label:"error-container",position:"absolute",left:"50%",transform:"translateX(-50%)"}),rightAligned:(0,u.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,u.css)({display:"flex",alignItems:"center",overflow:"hidden",padding:T.spacing(1)})}},D=E;D.LoadingIndicator=n.T,D.ErrorIndicator=t.g,D.TitleItem=p},85675:(G,O,e)=>{"use strict";e.d(O,{R:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},48888:(G,O,e)=>{"use strict";e.d(O,{l:()=>s});var t=e(52423),n=e(68404),u=e(29516);const s=({children:m,className:f,...o})=>{const l=(0,u.wW)(i);return n.createElement("div",{className:(0,t.cx)(l,f),...o},m)},i=m=>t.css`
    background-color: ${m.components.panel.background};
    border: 1px solid ${m.components.panel.borderColor};
    border-radius: 3px;
  `},80914:(G,O,e)=>{"use strict";e.d(O,{o:()=>s});var t=e(68404),n=e(24699),u=e(68884);const s=({status:m,...f})=>{const o=i(m);return t.createElement(u.C,{text:o.text,color:o.color,icon:o.icon,tooltip:o.tooltip,...f})};s.displayName="PluginSignatureBadge";function i(m){switch(m||(m=n.Xy.invalid),m){case n.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},97635:(G,O,e)=>{"use strict";e.d(O,{RN:()=>i,h_:()=>s,lO:()=>m});var t=e(68404),n=e(97394),u=e(29516);function s(o){const{children:l,className:r,root:d,forwardedRef:c}=o,g=(0,u.l4)(),p=(0,t.useRef)(null),y=d??i();return p.current||(p.current=document.createElement("div"),r&&(p.current.className=r),p.current.style.position="relative",p.current.style.zIndex=`${g.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(p.current&&y.appendChild(p.current),()=>{p.current&&y.removeChild(p.current)}),[y]),n.createPortal(t.createElement("div",{ref:c},l),p.current)}function i(){return window.document.getElementById("grafana-portal-container")??document.body}function m(){return t.createElement("div",{id:"grafana-portal-container"})}const f=t.forwardRef((o,l)=>t.createElement(s,{...o,forwardedRef:l}));f.displayName="RefForwardingPortal"},18302:(G,O,e)=>{"use strict";e.d(O,{q:()=>P});var t=e(52423),n=e(9085),u=e.n(n),s=e(82897),i=e.n(s),m=e(68404),f=e(40246),o=e(56747),l=e(68183),r=e(5745),d=e(58090),c=e(26982),g=e(76756),p=e(59358),y=e(52001),h=e(87908),a=e(11993),v=e(29516),C=e(19253);class E extends m.PureComponent{constructor(S,D){super(S,D),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(A,N)=>{const W=A.document!==this.state.value.document,I=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(A),this.setState({value:A},()=>{if(W){const F=f.Z.serialize(I)!==f.Z.serialize(A);F&&N&&this.runOnChangeAndRunQuery(),F&&!N&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:A}=this.props,N=f.Z.serialize(this.state.value);A&&A(this.cleanText(N))},this.runOnRunQuery=()=>{const{onRunQuery:A}=this.props;A&&(A(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(A,N,W)=>{const{onBlur:I}=this.props;if(I)I();else{const F=this.lastExecutedValue?f.Z.serialize(this.lastExecutedValue):"",V=f.Z.serialize(N.value);F!==V&&this.runOnChangeAndRunQuery()}return W()},this.runOnChangeDebounced=(0,s.debounce)(this.runOnChange,500);const{onTypeahead:T,cleanText:R,portalOrigin:L,onWillApplySuggestion:w}=S;this.plugins=[(0,d.b)({onTypeahead:T,cleanText:R,portalOrigin:L,onWillApplySuggestion:w}),(0,c.d)({handler:this.runOnChangeAndRunQuery}),(0,g.z)(),(0,p.G)(),(0,y.$)(),(0,h.R)(),(0,a.w)(),...S.additionalPlugins||[]].filter(A=>A),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,r.l1)(S.query||"",S.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(S,D){const{query:T,syntax:R,syntaxLoaded:L}=this.props;if(!S.syntaxLoaded&&L&&this.editor){const A=this.editor.insertText(" ").deleteBackward(1);this.onChange(A.value,!0)}const{value:w}=this.state;T!==S.query&&T!==f.Z.serialize(w)&&this.setState({value:(0,r.l1)(T||"",R)})}cleanText(S){return S.replace(/[\r]/g,"")}render(){const{disabled:S,theme:D}=this.props,T=u()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":S}),R=x(D);return m.createElement("div",{className:(0,t.cx)(T,R.wrapper)},m.createElement("div",{className:"slate-query-field","aria-label":l.wl.components.QueryField.container},m.createElement(o.ML,{ref:L=>this.editor=L,schema:r.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:L=>{this.onChange(L.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const P=(0,v.HE)(E),x=M=>{const S=(0,C.getFocusStyles)(M);return{wrapper:t.css`
      &:focus-within {
        ${S}
      }
    `}}},45781:(G,O,e)=>{"use strict";e.d(O,{dP:()=>d,o5:()=>l});var t=e(14016),n=e(68404),u=e(37556),s=e(68183),i=e(39451),m=e(75952),f=e(92470),o=e(26408);const l=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],r=class extends n.PureComponent{constructor(p){super(p),this.onChangeSelect=y=>{const{onIntervalChanged:h}=this.props;h&&y.value!=null&&h(y.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:p,intervals:y,tooltip:h,value:a,text:v,isLoading:C,noIntervalPicker:E,width:P}=this.props,x=a||"",M=this.getVariant(),S=g({intervals:y}),D=S.find(({value:W})=>W===x),T=c(r.offOption.value);let R=D||T;R.label===T.label&&(R={value:""});const L=R.ariaLabel,w=(0,i.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:L}),A=(0,i.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),N=R.value===""?A:w;return n.createElement(m.h,{className:"refresh-picker"},n.createElement(o.h,{"aria-label":v,tooltip:h,onClick:p,variant:M,icon:C?"fa fa-spinner":"sync",style:P?{width:P}:void 0,"data-testid":s.wl.components.RefreshPicker.runButtonV2},v),!E&&n.createElement(f.d,{value:R,options:S,onChange:this.onChangeSelect,variant:M,title:(0,i.t)("refresh-picker.select-button.auto-refresh","Set auto refresh interval"),"data-testid":s.wl.components.RefreshPicker.intervalButtonV2,"aria-label":N}))}};let d=r;d.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},d.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},d.isLive=p=>p===r.liveOption.value;function c(p){return p===d.liveOption.value?{label:(0,i.t)("refresh-picker.live-option.label","Live"),value:"LIVE",ariaLabel:(0,i.t)("refresh-picker.live-option.aria-label","Turn on live streaming")}:{label:(0,i.t)("refresh-picker.off-option.label","Off"),value:"",ariaLabel:(0,i.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")}}function g({intervals:p=l}={}){const y=p.map(h=>{const a=(0,u.RA)(h),v=(0,t.Z)(a);return{label:h,value:h,ariaLabel:v}});return y.unshift(c(d.offOption.value)),y}},52438:(G,O,e)=>{"use strict";e.d(O,{D:()=>u});var t=e(68404),n=e(8928);function u({component:s,content:i,...m}){return t.createElement(s||"span",{dangerouslySetInnerHTML:{__html:n.QX.sanitize(i)},...m})}},16486:(G,O,e)=>{"use strict";e.d(O,{c:()=>o});var t=e(52423),n=e(82897),u=e.n(n),s=e(68404),i=e(90723),m=e(45586);const f=()=>({noRadiusInput:t.css`
      border-bottom-right-radius: 0 !important;
      border-top-right-radius: 0 !important;
    `,noRadiusButton:t.css`
      border-bottom-left-radius: 0 !important;
      border-top-left-radius: 0 !important;
    `}),o=({label:l="Password",labelWidth:r,inputWidth:d=12,onReset:c,isConfigured:g,tooltip:p,placeholder:y="Password",interactive:h,...a})=>{const v=f();return s.createElement(m.W,{label:l,tooltip:p,interactive:h,labelWidth:r,inputEl:g?s.createElement(s.Fragment,null,s.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${d}`,v.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(a,"value")}),s.createElement(i.zx,{onClick:c,variant:"secondary",type:"button"},"Reset")):s.createElement("input",{type:"password",className:`gf-form-input width-${d}`,placeholder:y,...a})})};o.displayName="SecretFormField"},92685:(G,O,e)=>{"use strict";e.d(O,{m4:()=>f});var t=e(68404),n=e(90723),u=e(25474),s=e(90701);const i="configured",m="Reset",f=({isConfigured:o,onReset:l,...r})=>t.createElement(s.Lh,null,!o&&t.createElement(u.I,{...r,type:"password"}),o&&t.createElement(u.I,{...r,type:"text",disabled:!0,value:i}),o&&t.createElement(n.zx,{onClick:l,variant:"secondary"},m))},88517:(G,O,e)=>{"use strict";e.d(O,{m:()=>t.m4});var t=e(92685)},37479:(G,O,e)=>{"use strict";e.d(O,{Zk:()=>r});var t=e(52423),n=e(68404),u=e(29516),s=e(90723),i=e(90701),m=e(79090);const f="configured",o="Reset",l=d=>({configuredStyle:t.css`
      min-height: ${d.spacing(d.components.height.md)};
      padding-top: ${d.spacing(.5)};
      resize: none;
    `}),r=({isConfigured:d,onReset:c,...g})=>{const p=(0,u.wW)(l);return n.createElement(i.Lh,null,!d&&n.createElement(m.K,{...g}),d&&n.createElement(m.K,{...g,rows:1,disabled:!0,value:f,className:(0,t.cx)(p.configuredStyle)}),d&&n.createElement(s.zx,{onClick:c,variant:"secondary"},o))}},16591:(G,O,e)=>{"use strict";e.d(O,{Z:()=>t.Zk});var t=e(37479)},75154:(G,O,e)=>{"use strict";e.d(O,{X:()=>r});var t=e(52423),n=e(82897),u=e.n(n),s=e(68404),i=e(29516),m=e(91605),f=e(7695),o=e(20713),l=e(80451);function r({options:d,value:c,onChange:g,Component:p,className:y,allowCustomValue:h,allowEmptyValue:a,placeholder:v,disabled:C,inputMinWidth:E,inputPlaceholder:P,onExpandedChange:x,autofocus:M=!1,...S}){const[D,T,R,L]=(0,o._)(M,x),w=E?Math.max(E,T):T,A=(0,i.wW)(f.N);if(!R){const N=(0,n.isObject)(c)?c.label:c;return s.createElement(D,{disabled:C,Component:p||s.createElement(m.W,{className:(0,t.cx)(A.segment,{[A.queryPlaceholder]:v!==void 0&&!c,[A.disabled]:C},y)},N||v)})}return s.createElement(l.V,{...S,value:c&&!(0,n.isObject)(c)?{value:c}:c,placeholder:P,options:d,width:w,onClickOutside:()=>L(!1),allowCustomValue:h,allowEmptyValue:a,onChange:N=>{L(!1),g(N)}})}},29822:(G,O,e)=>{"use strict";e.d(O,{V:()=>d});var t=e(52423),n=e(82897),u=e.n(n),s=e(68404),i=e(671),m=e(29516),f=e(91605),o=e(80451),l=e(7695),r=e(20713);function d({value:g,onChange:p,loadOptions:y,reloadOptionsOnChange:h=!1,Component:a,className:v,allowCustomValue:C,allowEmptyValue:E,disabled:P,placeholder:x,inputMinWidth:M,inputPlaceholder:S,autofocus:D=!1,onExpandedChange:T,noOptionMessageHandler:R=c,...L}){const[w,A]=(0,i.Z)(y,[y]),[N,W,I,F]=(0,r._)(D,T),V=M?Math.max(M,W):W,b=(0,m.wW)(l.N);if(!I){const X=(0,n.isObject)(g)?g.label:g;return s.createElement(N,{onClick:h?void 0:A,disabled:P,Component:a||s.createElement(f.W,{className:(0,t.cx)(b.segment,{[b.queryPlaceholder]:x!==void 0&&!g,[b.disabled]:P},v)},X||x)})}return s.createElement(o.V,{...L,value:g&&!(0,n.isObject)(g)?{value:g}:g,placeholder:S,options:w.value??[],loadOptions:h?A:void 0,width:V,noOptionsMessage:R(w),allowCustomValue:C,allowEmptyValue:E,onClickOutside:()=>{F(!1)},onChange:X=>{F(!1),p(X)}})}function c(g){return g.loading?"Loading options...":g.error?"Failed to load options":!Array.isArray(g.value)||g.value.length===0?"No options found":""}},74448:(G,O,e)=>{"use strict";e.d(O,{X:()=>r});var t=e(52423),n=e(68404),u=e(92787),s=e(29516),i=e(80369),m=e(91605),f=e(7695),o=e(20713);const l=14;function r({value:d,onChange:c,Component:g,className:p,placeholder:y,inputPlaceholder:h,disabled:a,autofocus:v=!1,onExpandedChange:C,...E}){const P=(0,n.useRef)(null),[x,M]=(0,n.useState)(d),[S,D]=(0,n.useState)((0,i.X1)((d||"").toString(),l).width),[T,,R,L]=(0,o._)(v,C),w=(0,s.wW)(f.N);if((0,u.Z)(P,()=>{L(!1),c(x)}),!R)return n.createElement(T,{disabled:a,Component:g||n.createElement(m.W,{className:(0,t.cx)(w.segment,{[w.queryPlaceholder]:y!==void 0&&!x,[w.disabled]:a},p)},d||y)});const A=t.css`
    width: ${Math.max(S+20,32)}px;
  `;return n.createElement("input",{...E,ref:P,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",A),value:x,placeholder:h,onChange:N=>{const{width:W}=(0,i.X1)(N.target.value,l);D(W),M(N.target.value)},onBlur:()=>{L(!1),c(x)},onKeyDown:N=>{[13,27].includes(N.keyCode)&&(L(!1),c(x))}})}},95539:(G,O,e)=>{"use strict";e.d(O,{f:()=>m});var t=e(52423),n=e(68404),u=e(29516),s=e(9274),i=e(91605);const m=({label:o,htmlFor:l,children:r,fill:d})=>{const c=(0,u.wW)(f);return n.createElement(n.Fragment,null,n.createElement(s.Z,null,n.createElement(i.W,{htmlFor:l,width:12,className:c.label},o),r,d&&n.createElement("div",{className:c.fill},n.createElement(i.W,null,""))))},f=o=>({label:t.css`
    color: ${o.colors.primary.text};
  `,fill:t.css`
    flex-grow: 1;
    margin-bottom: ${o.spacing(.5)};
  `})},80451:(G,O,e)=>{"use strict";e.d(O,{V:()=>s});var t=e(68404),n=e(29516),u=e(46739);function s({value:i,placeholder:m="",options:f=[],onChange:o,onClickOutside:l,loadOptions:r=void 0,width:d,noOptionsMessage:c="",allowCustomValue:g=!1,allowEmptyValue:p=!1,...y}){const h=(0,t.useRef)(null),a=(0,n.l4)();let v=d>0?d/a.spacing.gridSize:void 0,C,E={};return r?(C=u.qb,E={loadOptions:r,defaultOptions:!0}):C=u.Ph,t.createElement("div",{...y,ref:h},t.createElement(C,{width:v,noOptionsMessage:c,placeholder:m,autoFocus:!0,isOpen:!0,onChange:o,options:f,value:i,closeMenuOnSelect:!1,onCloseMenu:()=>{if(h&&h.current){const P=h.current.querySelector('input[id^="react-select-"]');P&&(P.value||p)?o({value:P.value,label:P.value}):l()}},allowCustomValue:g,...E}))}},7695:(G,O,e)=>{"use strict";e.d(O,{N:()=>n});var t=e(52423);const n=u=>{const s="v1"in u?u.v1.palette:u.palette;return{segment:t.css`
      cursor: pointer;
      width: auto;
    `,queryPlaceholder:t.css`
      color: ${s.gray2};
    `,disabled:t.css`
      cursor: not-allowed;
      opacity: 0.65;
      box-shadow: none;
    `}}},20713:(G,O,e)=>{"use strict";e.d(O,{_:()=>s});var t=e(68404),n=e(29516),u=e(90723);const s=(i,m)=>{const f=(0,t.useRef)(null),o=(0,n.wW)(u.gN),[l,r]=(0,t.useState)(i),[d,c]=(0,t.useState)(0),g=y=>{r(y),m&&m(y)};return[({Component:y,onClick:h,disabled:a})=>t.createElement("button",{type:"button",className:o,ref:f,disabled:a,onClick:()=>{g(!0),f&&f.current&&c(f.current.clientWidth*1.25),h?.()}},y),d,l,g]}},6749:(G,O,e)=>{"use strict";e.d(O,{m:()=>u});var t=e(68404),n=e(81697);const u=({isOpen:s})=>{const i=s?"search":"angle-down",m=s?"sm":"md";return t.createElement(n.J,{name:i,size:m})}},46739:(G,O,e)=>{"use strict";e.d(O,{M8:()=>Ee,qb:()=>ce,gY:()=>re,NU:()=>me,Ph:()=>fe,eI:()=>M,LT:()=>ie});var t=e(68404),n=e(37826),u=e(30250),s=e(5105),i=e(83238),m=e(29516),f=e(81697),o=e(40008),l=e(6749),r=e(52423),d=e(25474);const c=t.forwardRef((J,te)=>{const{children:ne}=J,j=(0,m.l4)(),be=(0,d.H)({theme:j,invalid:!1});return t.createElement("div",{className:(0,r.cx)(be.suffix,r.css`
          position: relative;
        `),ref:te},ne)});c.displayName="IndicatorsContainer";var g=e(82385),p=e(51821);const y=(0,g.B)((J,te,ne)=>{const j=(0,d.H)({theme:J,invalid:te});return{input:(0,r.cx)((0,p.nf)(J),r.css`
        width: 100%;
        max-width: 100%;
        display: flex;
        flex-direction: row;
        align-items: center;
        flex-wrap: wrap;
        justify-content: space-between;
        padding-right: 0;
        position: relative;
        box-sizing: border-box;
      `,ne&&r.css`
          padding-left: 0;
        `),prefix:(0,r.cx)(j.prefix,r.css`
        position: relative;
      `)}}),h=t.forwardRef(function({focused:te,invalid:ne,disabled:j,children:be,innerProps:Le,prefix:Qe,...Ye},de){const Be=(0,m.l4)(),Ve=y(Be,ne,!!Qe);return t.createElement("div",{className:Ve.input,...Le,ref:de},Qe&&t.createElement("div",{className:(0,r.cx)(Ve.prefix)},Qe),be)});var a=e(20017),v=e(76686);const C=({innerProps:J,children:te})=>{const ne=(0,m.l4)(),j=(0,v.D)(ne);return t.createElement("div",{...J,className:j.multiValueContainer},te)},E=({children:J,innerProps:te})=>{const ne=(0,m.l4)(),j=(0,v.D)(ne);return t.createElement(a.h,{...te,name:"times",size:"sm",className:j.multiValueRemove})};var P=e(8887),x=e(19253);const M=J=>{const{isDisabled:te,isFocused:ne,children:j,selectProps:{invalid:be=!1}}=J,Le=(0,m.l4)(),Qe=S(Le,ne,te,be);return t.createElement(P.c.SelectContainer,{...J,className:(0,r.cx)(Qe.wrapper,J.className)},j)},S=(0,g.B)((J,te,ne,j)=>{const be=(0,d.H)({theme:J,invalid:j});return{wrapper:(0,r.cx)(be.wrapper,(0,p.RK)(J,j),te&&r.css`
            ${(0,x.focusCss)(J.v1)}
          `,ne&&be.inputDisabled,r.css`
          position: relative;
          box-sizing: border-box;
          /* The display property is set by the styles prop in SelectBase because it's dependant on the width prop  */
          flex-direction: row;
          flex-wrap: wrap;
          align-items: stretch;
          justify-content: space-between;

          min-height: 32px;
          height: auto;
          max-width: 100%;

          /* Input padding is applied to the InputControl so the menu is aligned correctly */
          padding: 0;
          cursor: ${ne?"not-allowed":"pointer"};
        `)}});var D=e(82897),T=e(75478),R=e(43565),L=e(49938);const w=({children:J,maxHeight:te,innerRef:ne,innerProps:j})=>{const be=(0,m.l4)(),Le=(0,v.D)(be);return t.createElement("div",{...j,className:Le.menu,style:{maxHeight:te},"aria-label":"Select options menu"},t.createElement(L.$,{scrollRefCallback:ne,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},J))};w.displayName="SelectMenu";const A=37,N=7,W=({children:J,maxHeight:te,options:ne,getValue:j})=>{const be=(0,m.l4)(),Le=(0,v.D)(be),[Qe]=j(),de=(Qe?ne.findIndex(We=>We.value===Qe.value):0)*A;if(!Array.isArray(J))return null;const Ve=((0,D.max)(ne.map(We=>We.label?.length))??0)*N,$e=Math.min(ne.length*A,te);return t.createElement(T.t7,{className:Le.menu,height:$e,width:Ve,"aria-label":"Select options menu",itemCount:J.length,itemSize:A,initialScrollOffset:de},({index:We,style:Ke})=>t.createElement("div",{style:{...Ke,overflow:"hidden"}},J[We]))};W.displayName="VirtualizedSelectMenu";const I=({children:J,data:te,innerProps:ne,innerRef:j,isFocused:be,isSelected:Le,renderOptionLabel:Qe})=>{const Ye=(0,m.l4)(),de=(0,v.D)(Ye),Be=te.icon?(0,R.iJ)(te.icon):void 0;return t.createElement("div",{ref:j,className:(0,r.cx)(de.option,be&&de.optionFocused,Le&&de.optionSelected,te.isDisabled&&de.optionDisabled),...ne,"aria-label":"Select option",title:te.title},Be&&t.createElement(f.J,{name:Be,className:de.optionIcon}),te.imgUrl&&t.createElement("img",{className:de.optionImage,src:te.imgUrl,alt:te.label||te.value}),t.createElement("div",{className:de.optionBody},t.createElement("span",null,Qe?Qe(te):J),te.description&&t.createElement("div",{className:de.optionDescription},te.description),te.component&&t.createElement(te.component,null)))};I.displayName="SelectMenuOptions";var F=e(28113),V=e(43046);class b extends t.Component{render(){const{children:te}=this.props,{selectProps:ne}=this.props;if(ne&&Array.isArray(te)&&Array.isArray(te[0])&&ne.maxVisibleValues!==void 0&&!(ne.showAllSelectedWhenOpen&&ne.menuIsOpen)){const[j,...be]=te,Le=j.slice(0,ne.maxVisibleValues);return this.renderContainer([Le,...be])}return this.renderContainer(te)}renderContainer(te){const{isMulti:ne,theme:j}=this.props,be=(0,v.D)(j),Le=(0,r.cx)(be.valueContainer,ne&&be.valueContainerMulti);return t.createElement("div",{className:Le},te)}}const X=(0,m.HE)(b);var k=e(91438);const H=(J,te)=>{if(Array.isArray(J)){const ne=J.filter(Boolean);return ne?.length?ne:void 0}if(typeof J=="object")return[J];if(typeof J=="string"||typeof J=="number"){const ne=Y(J,te);if(ne)return[ne]}},Y=(J,te)=>{for(const ne of te)if("options"in ne){let j=Y(J,ne.options);if(j)return j}else if("value"in ne&&ne.value===J)return ne;return null},ee=J=>J.map(({description:te,...ne})=>ne),ue=J=>{const{maxVisibleValues:te,selectedValuesCount:ne,menuIsOpen:j,showAllSelectedWhenOpen:be}=J;return te!==void 0&&ne>te&&!(be&&j)?t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",ne-te,")"):null},q=J=>{const{children:te,innerProps:ne,selectProps:{menuIsOpen:j,onMenuClose:be,onMenuOpen:Le},isFocused:Qe,isMulti:Ye,getValue:de,innerRef:Be}=J,Ve=J.selectProps;return Ve.renderControl?t.createElement(Ve.renderControl,{isOpen:j,value:Ye?de():de()[0],ref:Be,onClick:j?be:Le,onBlur:be,disabled:!!Ve.disabled,invalid:!!Ve.invalid}):t.createElement(h,{ref:Be,innerProps:ne,prefix:Ve.prefix,focused:Qe,invalid:!!Ve.invalid,disabled:!!Ve.disabled},te)};function ge({allowCustomValue:J=!1,allowCreateWhileLoading:te=!1,"aria-label":ne,autoFocus:j=!1,backspaceRemovesValue:be=!0,cacheOptions:Le,className:Qe,closeMenuOnSelect:Ye=!0,components:de,createOptionPosition:Be="last",defaultOptions:Ve,defaultValue:$e,disabled:We=!1,filterOption:Ke,formatCreateLabel:qe,getOptionLabel:Xe,getOptionValue:at,inputValue:Ze,invalid:lt,isClearable:nt=!1,id:_e,isLoading:ut=!1,isMulti:rt=!1,inputId:je,isOpen:dt,isOptionDisabled:oe,isSearchable:Se=!0,loadOptions:Re,loadingMessage:ze="Loading options...",maxMenuHeight:ve=300,minMenuHeight:Te,maxVisibleValues:he,menuPlacement:pe="auto",menuPosition:ye,menuShouldPortal:Oe=!0,noOptionsMessage:Ne="No options found",onBlur:Me,onChange:Ae,onCloseMenu:we,onCreateOption:ke,onInputChange:st,onKeyDown:Et,onOpenMenu:Pt,onFocus:gt,openMenuOnFocus:Ct=!1,options:Ot=[],placeholder:Ft="Choose",prefix:jt,renderControl:En,showAllSelectedWhenOpen:xn=!0,tabSelectsValue:Cn=!0,value:bn,virtualized:Tn=!1,width:Zn,isValidNewOption:Bn,formatOptionLabel:Sn}){const wn=(0,m.l4)(),$n=(0,v.D)(wn),Xn=(0,t.useRef)(null),[ba,hn]=(0,t.useState)(!1),Kn=(0,k.O)(wn,Zn);(0,t.useEffect)(()=>{if(Re&&dt&&Xn.current&&Xn.current.controlRef&&pe==="auto"){const At=window.innerHeight-Xn.current.controlRef.getBoundingClientRect().bottom;hn(At<ve)}},[ve,pe,Re,dt]);const ta=(0,t.useCallback)((At,kt)=>{if(rt&&At==null)return Ae([],kt);Ae(At,kt)},[rt,Ae]);let La=n.ZP;const oa={};let ha={},ia;if(rt&&Re)ia=bn;else if(rt&&bn&&Array.isArray(bn)&&!Re)ia=bn.map(At=>Y(At.value??At,Ot));else if(Re){const At=$e||bn;ia=At?[At]:[]}else ia=H(bn,Ot);const Rt={"aria-label":ne,autoFocus:j,backspaceRemovesValue:be,captureMenuScroll:!1,closeMenuOnSelect:Ye,defaultValue:$e,disabled:We,filterOption:Ke,getOptionLabel:Xe,getOptionValue:at,inputValue:Ze,invalid:lt,isClearable:nt,id:_e,isDisabled:We,isLoading:ut,isMulti:rt,inputId:je,isOptionDisabled:oe,isSearchable:Se,maxMenuHeight:ve,minMenuHeight:Te,maxVisibleValues:he,menuIsOpen:dt,menuPlacement:pe==="auto"&&ba?"top":pe,menuPosition:ye,menuShouldBlockScroll:!0,menuPortalTarget:Oe&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:Me,onChange:ta,onInputChange:st,onKeyDown:Et,onMenuClose:we,onMenuOpen:Pt,onFocus:gt,formatOptionLabel:Sn,openMenuOnFocus:Ct,options:Tn?ee(Ot):Ot,placeholder:Ft,prefix:jt,renderControl:En,showAllSelectedWhenOpen:xn,tabSelectsValue:Cn,value:rt?ia:ia?.[0]};J&&(La=i.Z,oa.allowCreateWhileLoading=te,oa.formatCreateLabel=qe??De,oa.onCreateOption=ke,oa.createOptionPosition=Be,oa.isValidNewOption=Bn),Re&&(La=J?s.Z:u.Z,ha={loadOptions:Re,cacheOptions:Le,defaultOptions:Ve});const Lt=Tn?W:w;return t.createElement(t.Fragment,null,t.createElement(La,{ref:Xn,components:{MenuList:Lt,Group:F.n,ValueContainer:X,IndicatorsContainer(At){const{selectProps:kt}=At,{value:Zt,showAllSelectedWhenOpen:Qt,maxVisibleValues:Jt,menuIsOpen:rn}=kt;if(Jt!==void 0){const mn=Zt.length,Xt=[...At.children];return Xt.splice(-1,0,ue({maxVisibleValues:Jt,selectedValuesCount:mn,showAllSelectedWhenOpen:Qt,menuIsOpen:rn})),t.createElement(c,{...At},Xt)}return t.createElement(c,{...At})},IndicatorSeparator(){return t.createElement(t.Fragment,null)},Control:q,Option:I,ClearIndicator(At){const{clearValue:kt}=At;return t.createElement(f.J,{name:"times",role:"button","aria-label":"select-clear-value",className:$n.singleValueRemove,onMouseDown:Zt=>{Zt.preventDefault(),Zt.stopPropagation(),kt()}})},LoadingIndicator(){return t.createElement(o.$,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:$n.loadingMessage},ze)},NoOptionsMessage(){return t.createElement("div",{className:$n.loadingMessage,"aria-label":"No options provided"},Ne)},DropdownIndicator(At){return t.createElement(l.m,{isOpen:At.selectProps.menuIsOpen})},SingleValue(At){return t.createElement(V.P,{...At,disabled:We})},SelectContainer:M,MultiValueContainer:C,MultiValueRemove:E,...de},styles:Kn,className:Qe,...Rt,...oa,...ha}))}function De(J){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,J),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function fe(J){return t.createElement(ge,{...J})}function me(J){return t.createElement(ge,{...J,isMulti:!0})}function ce(J){return t.createElement(ge,{...J})}function ie(J){return t.createElement(ge,{virtualized:!0,...J})}function re(J){return t.createElement(ge,{virtualized:!0,...J})}function Ee(J){return t.createElement(ge,{...J,isMulti:!0})}},28113:(G,O,e)=>{"use strict";e.d(O,{n:()=>o});var t=e(52423),n=e(68404),u=e(82385),s=e(29516),i=e(81697);const m=(0,u.B)(l=>({header:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      justify-items: center;
      cursor: pointer;
      padding: 7px 10px;
      width: 100%;
      border-bottom: 1px solid ${l.colors.background.secondary};

      &:hover {
        color: ${l.colors.text.maxContrast};
      }
    `,label:t.css`
      flex-grow: 1;
    `,icon:t.css`
      padding-right: 2px;
    `}));class f extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(r=>({expanded:!r.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:r}=this.props.selectProps.value;r&&this.props.options.some(d=>d.value===r)&&this.setState({expanded:!0})}}componentDidUpdate(r){r.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:r,label:d,theme:c}=this.props,{expanded:g}=this.state,p=m(c);return n.createElement("div",null,n.createElement("div",{className:p.header,onClick:this.onToggleChildren},n.createElement("span",{className:p.label},d),n.createElement(i.J,{className:p.icon,name:g?"angle-up":"angle-down"})," "),g&&r)}}const o=(0,s.HE)(f)},43046:(G,O,e)=>{"use strict";e.d(O,{P:()=>r});var t=e(52423),n=e(68404),u=e(8887),s=e(29516);function i(c,g={}){const{duration:p=250,delay:y=250}=g,[h,a]=(0,n.useState)(c),v=(0,n.useRef)();return(0,n.useEffect)(()=>{let C;if(c)C=setTimeout(()=>{v.current=new Date,a(c)},y);else{const E=v.current?Date.now()-v.current.valueOf():0,P=()=>{v.current=void 0,a(c)};E>=p?P():C=setTimeout(P,p-E)}return()=>{C&&(clearTimeout(C),C=void 0)}},[c,p,y]),h}var m=e(40008),f=e(28840),o=e(97098);const l=c=>{const g=t.css`
    label: singleValue;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    box-sizing: border-box;
    max-width: 100%;
    grid-area: 1 / 1 / 2 / 3;
  `,p=t.css`
    width: 16px;
    height: 16px;
    display: inline-block;
    margin-right: 10px;
    position: relative;
    vertical-align: middle;
    overflow: hidden;
  `,y=t.css`
    width: 100%;
    height: 100%;
    position: absolute;
  `,h=t.css`
    color: ${c.colors.text.disabled};
  `,a=t.css`
    color: ${c.colors.text.disabled};
  `;return{singleValue:g,spinnerWrapper:p,spinnerIcon:y,disabled:h,isOpen:a}},r=c=>{const{children:g,data:p,isDisabled:y}=c,h=(0,s.wW)(l),a=i(p.loading||!1,{delay:250,duration:750});return n.createElement(u.c.SingleValue,{...c,className:(0,t.cx)(h.singleValue,y&&h.disabled,c.selectProps.menuIsOpen&&h.isOpen)},p.imgUrl?n.createElement(d,{loading:a,imgUrl:p.imgUrl,styles:h,alt:p.label??p.value}):n.createElement(o.R,{horizontal:!0,size:16,visible:a,duration:150},n.createElement("div",{className:h.spinnerWrapper},n.createElement(m.$,{className:h.spinnerIcon,inline:!0}))),!p.hideText&&g)},d=c=>n.createElement("div",{className:c.styles.spinnerWrapper},n.createElement(f.n,{duration:150,visible:c.loading},n.createElement(m.$,{className:c.styles.spinnerIcon,inline:!0})),n.createElement(f.n,{duration:150,visible:!c.loading},n.createElement("img",{className:c.styles.spinnerIcon,src:c.imgUrl,alt:c.alt})))},76686:(G,O,e)=>{"use strict";e.d(O,{D:()=>u});var t=e(52423),n=e(82385);const u=(0,n.B)(s=>({menu:t.css`
      label: grafana-select-menu;
      background: ${s.components.dropdown.background};
      box-shadow: ${s.shadows.z3};
      position: relative;
      min-width: 100%;
      z-index: 1;
    `,option:t.css`
      label: grafana-select-option;
      padding: 8px;
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;

      &:hover {
        background: ${s.colors.action.hover};
      }
    `,optionIcon:t.css`
      margin-right: ${s.spacing(1)};
    `,optionImage:t.css`
      label: grafana-select-option-image;
      width: 16px;
      margin-right: 10px;
    `,optionDescription:t.css`
      label: grafana-select-option-description;
      font-weight: normal;
      font-size: ${s.typography.size.sm};
      color: ${s.colors.text.secondary};
      white-space: normal;
      line-height: ${s.typography.body.lineHeight};
    `,optionBody:t.css`
      label: grafana-select-option-body;
      display: flex;
      font-weight: ${s.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,optionFocused:t.css`
      label: grafana-select-option-focused;
      background: ${s.colors.action.focus};
    `,optionSelected:t.css`
      background: ${s.colors.action.selected};
    `,optionDisabled:t.css`
      label: grafana-select-option-disabled;
      background-color: ${s.colors.action.disabledBackground};
      color: ${s.colors.action.disabledText};
      cursor: not-allowed;
    `,singleValue:t.css`
      label: grafana-select-single-value;
      color: ${s.components.input.text};
      grid-area: 1 / 1 / 2 / 3;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
    `,valueContainer:t.css`
      label: grafana-select-value-container;
      align-items: center;
      display: grid;
      position: relative;
      box-sizing: border-box;
      flex: 1 1 0%;
      outline: none;
      overflow: hidden;
    `,valueContainerMulti:t.css`
      label: grafana-select-value-container-multi;
      flex-wrap: wrap;
      display: flex;
    `,loadingMessage:t.css`
      label: grafana-select-loading-message;
      padding: ${s.spacing(1)};
      text-align: center;
      width: 100%;
    `,multiValueContainer:t.css`
      label: grafana-select-multi-value-container;
      display: flex;
      align-items: center;
      line-height: 1;
      background: ${s.colors.background.secondary};
      border-radius: ${s.shape.borderRadius()};
      margin: ${s.spacing(.25,1,.25,0)};
      padding: ${s.spacing(.25,0,.25,1)};
      color: ${s.colors.text.primary};
      font-size: ${s.typography.size.sm};

      &:hover {
        background: ${s.colors.emphasize(s.colors.background.secondary)};
      }
    `,multiValueRemove:t.css`
      label: grafana-select-multi-value-remove;
      margin: ${s.spacing(0,.5)};
      cursor: pointer;
      svg {
        margin-bottom: 0;
      }
    `,singleValueRemove:t.css`
      cursor: pointer;
      &:hover {
        color: ${s.colors.text.primary};
      }
    `}))},91438:(G,O,e)=>{"use strict";e.d(O,{O:()=>u,Z:()=>n});var t=e(68404);function n(s){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(i){return{...i,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:i})=>({maxHeight:i}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:i=>({...i,color:s.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function u(s,i){return(0,t.useMemo)(()=>({...n(s),menuPortal:m=>({...m,zIndex:s.zIndex.portal}),menu:({top:m,bottom:f,position:o})=>({top:m,bottom:f,position:o,minWidth:"100%",zIndex:s.zIndex.dropdown}),container:()=>({width:i?s.spacing(i):"100%",display:i==="auto"?"inline-flex":"flex"}),option:(m,f)=>({...m,opacity:f.isDisabled?.5:1})}),[s,i])}},11268:()=>{"use strict"},59459:(G,O,e)=>{"use strict";e.d(O,{F:()=>g});var t=e(82897),n=e.n(t),u=e(68404),s=e(96209),i=e(53786),m=e(3255),f=e(65243),o=e(13016),l=e(29236),r=e(29076),d=e(45781);function c(p){return{label:p,value:stringToMs(p)}}class g extends u.PureComponent{constructor(y){super(y),this.propsSubject=new s.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,o.w)(y=>d.dP.isLive(y.interval)?(0,i.of)({}):y.loading?m.C:(0,f.F)((0,r.e0)(y.interval))),(0,l.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(y){d.dP.isLive(y.interval)&&d.dP.isLive(this.props.interval)||(0,t.isEqual)(y,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},936:(G,O,e)=>{"use strict";e.d(O,{PR:()=>a,ZH:()=>d,rD:()=>g});var t=e(82897),n=e.n(t),u=e(21760),s=e(20251),i=e(24177),m=e(67008),f=e(66926),o=e(36998),l=e(58230);const r=["reduceOptions","orientation"];function d(v,C,E){let P=v.options;if(v.fieldConfig=v.fieldConfig||{defaults:{},overrides:[]},C==="singlestat"&&E.angular)return c(v,E);for(const x of r)E.hasOwnProperty(x)&&(P[x]=(0,t.cloneDeep)(E[x]));return P}function c(v,C){const E=C.angular,P=u.TB.getIfExists(E.valueName),x={reduceOptions:{calcs:[P?P.id:u.gz.mean]},orientation:s.wm.Horizontal},M={};if(E.format&&(M.unit=E.format),E.tableColumn&&(x.reduceOptions.fields=`/^${E.tableColumn}$/`),E.nullPointMode&&(M.nullValueMode=E.nullPointMode),E.nullText&&(M.noValue=E.nullText),(E.decimals||E.decimals===0)&&(M.decimals=E.decimals),E.thresholds&&E.colors){const D=E.thresholds.split(",").map(R=>Number(R.trim())),T=[];for(const R of E.colors){const L=T.length-1;L>=0?T.push({value:D[L],color:R}):T.push({value:-1/0,color:R})}M.thresholds={mode:i.H.Absolute,steps:T}}const S=(0,m.Jb)(E,M.thresholds);return S&&S.length&&(M.mappings=S),E.gauge&&E.gauge.show&&(M.min=E.gauge.minValue,M.max=E.gauge.maxValue),v.fieldConfig.defaults=M,x}function g(v){if(!v.options)return{};const C=parseFloat(v.pluginVersion||"6.1");let E=v.options;C<6.2&&(E=y(E)),C<6.3&&(E=p(E));const{fieldOptions:P}=E;if(C<6.6&&P){if(P&&P.override){const{override:S,...D}=E.fieldOptions;E={...E,fieldOptions:{...D,overrides:[]}}}let x=P?.defaults?.thresholds;x?delete P.defaults.thresholds:(x=P?.thresholds,delete P.thresholds),x&&(P.defaults.thresholds={mode:i.H.Absolute,steps:x});const{defaults:M}=P;M.color&&typeof M.color=="string"&&(M.color={mode:f.S.Fixed,fixedColor:M.color}),(0,o.gb)(M)}if(C<7&&(v.fieldConfig=v.fieldConfig||{defaults:{},overrides:[]},v.fieldConfig={defaults:P&&P.defaults?{...v.fieldConfig.defaults,...P.defaults}:v.fieldConfig.defaults,overrides:P&&P.overrides?[...v.fieldConfig.overrides,...P.overrides]:v.fieldConfig.overrides},P&&(E.reduceOptions={values:P.values,limit:P.limit,calcs:P.calcs}),delete E.fieldOptions),C<7.1){const x=v.fieldConfig.defaults.title;x!=null&&(v.fieldConfig.defaults.displayName=x,delete v.fieldConfig.defaults.title)}if(C<8){const x=v.fieldConfig?.defaults;let M=x?.unit;M==="percent"?((0,t.isNumber)(x.min)||(x.min=0),(0,t.isNumber)(x.max)||(x.max=100)):M==="percentunit"&&((0,t.isNumber)(x.min)||(x.min=0),(0,t.isNumber)(x.max)||(x.max=1))}return E}function p(v){const{fieldOptions:C}=v;if(!C)return v;const{mappings:E,...P}=v.fieldOptions;let x;return v.thresholds&&(x={mode:i.H.Absolute,steps:h(v.thresholds)}),{...v,fieldOptions:{...P,defaults:{...C.defaults,mappings:E,thresholds:x}}}}function y(v){const{valueOptions:C}=v;if(!C)return v;const E={},P={};if(E.mappings=v.valueMappings,E.thresholds=v.thresholds,E.defaults=P,P.unit=C.unit,P.decimals=C.decimals,C.stat){const M=u.TB.get(C.stat);M&&(E.calcs=[M.id])}P.min=v.minValue,P.max=v.maxValue;const x={...v,fieldOptions:E};return(0,t.omit)(x,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function h(v){if(!v||!v.length)return;const C=v.map(E=>({value:E.value===null?-1/0:E.value,color:E.color}));return(0,l.bP)(C),C[0].value=-1/0,C}function a(v){return(0,m.Jb)(v)}},70292:(G,O,e)=>{"use strict";e.d(O,{PR:()=>t.PR,ZH:()=>t.ZH,rD:()=>t.rD});var t=e(936)},30668:(G,O,e)=>{"use strict";e.d(O,{U:()=>d});var t=e(52423),n=e(78966),u=e(81183),s=e(68404),i=e(29516),m=e(61163);const f=c=>{const{value:g,children:p,visible:y,placement:h,tipFormatter:a,...v}=c,C=(0,s.useRef)(),E=(0,s.useRef)(null),P=(0,i.wW)(o);function x(){E.current!==null&&cancelAnimationFrame(E.current)}function M(){E.current=requestAnimationFrame(()=>{C.current?.forcePopupAlign?.()})}return(0,s.useEffect)(()=>(y?M():x(),x),[g,y]),s.createElement(m.Z,{overlayClassName:P.tooltip,placement:h,overlay:a??g,overlayInnerStyle:{minHeight:"auto"},ref:C,visible:y,...v},p)},o=c=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:c.typography.bodySmall.fontSize,opacity:.9,padding:3})}),l=f;var r=e(63065);const d=({min:c,max:g,onChange:p,onAfterChange:y,orientation:h="horizontal",reverse:a,step:v,formatTooltipResult:C,value:E,tooltipAlwaysVisible:P=!0})=>{const x=(0,s.useCallback)(L=>{p?.(typeof L=="number"?[L,L]:L)},[p]),M=(0,s.useCallback)(L=>{y?.(typeof L=="number"?[L,L]:L)},[y]),S=h==="horizontal",D=(0,i.l4)(),T=(0,r.W)(D,S),R=(L,w)=>s.createElement(l,{value:w.value,visible:P||w.dragging,tipFormatter:C,placement:S?"top":"right"},L);return s.createElement("div",{className:(0,t.cx)(T.container,T.slider)},s.createElement(n.Global,{styles:T.tooltip}),s.createElement(u.Z,{min:c,max:g,step:v,defaultValue:E,range:!0,onChange:x,onAfterChange:M,vertical:!S,reverse:a,handleRender:R}))};d.displayName="RangeSlider"},5445:(G,O,e)=>{"use strict";e.d(O,{i:()=>o});var t=e(52423),n=e(78966),u=e(81183),s=e(68404),i=e(29516),m=e(25474),f=e(63065);const o=({min:l,max:r,onChange:d,onAfterChange:c,orientation:g="horizontal",reverse:p,step:y,value:h,ariaLabelForHandle:a,marks:v,included:C})=>{const E=g==="horizontal",P=(0,i.l4)(),x=(0,f.W)(P,E,Boolean(v)),M=u.Z,[S,D]=(0,s.useState)(h??l),T=(0,s.useCallback)(W=>{const I=typeof W=="number"?W:W[0];D(I),d?.(I)},[D,d]),R=(0,s.useCallback)(W=>{let I=+W.target.value;Number.isNaN(I)&&(I=0),D(I),d&&d(I),c&&c(I)},[d,c]),L=(0,s.useCallback)(W=>{const I=+W.target.value;I>r?D(r):I<l&&D(l)},[r,l]),w=(0,s.useCallback)(W=>{const I=typeof W=="number"?W:W[0];c?.(I)},[c]),A=E?[]:[x.sliderInputVertical],N=E?[]:[x.sliderInputFieldVertical];return s.createElement("div",{className:(0,t.cx)(x.container,x.slider)},s.createElement(n.Global,{styles:x.tooltip}),s.createElement("div",{className:(0,t.cx)(x.sliderInput,...A)},s.createElement(M,{min:l,max:r,step:y,defaultValue:h,value:S,onChange:T,onAfterChange:w,vertical:!E,reverse:p,ariaLabelForHandle:a,marks:v,included:C}),s.createElement(m.I,{type:"text",className:(0,t.cx)(x.sliderInputField,...N),value:S,onChange:R,onBlur:L,min:l,max:r})))};o.displayName="Slider"},63065:(G,O,e)=>{"use strict";e.d(O,{W:()=>s});var t=e(52423),n=e(78966),u=e(82385);const s=(0,u.B)((i,m,f=!1)=>{const{spacing:o}=i,l=i.colors.border.strong,r=i.colors.primary.main,d=i.colors.primary.main,g=`box-shadow: 0px 0px 0px 6px ${i.colors.primary.transparent}`;return{container:t.css`
      width: 100%;
      margin: ${m?"inherit":`${o(1,3,1,1)}`};
      padding-bottom: ${m&&f?i.spacing(1):"inherit"};
      height: ${m?"auto":"100%"};
    `,slider:t.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${i.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${i.colors.text.disabled};
        font-size: ${i.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${i.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${d};
        box-shadow: ${i.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${g};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${i.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${i.colors.text.primary};
        border-color: ${i.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${r};
      }
      .rc-slider-rail {
        background-color: ${l};
        cursor: pointer;
      }
    `,tooltip:n.css`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${i.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${i.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      width: 100%;
    `,sliderInputVertical:t.css`
      flex-direction: column;
      height: 100%;

      .rc-slider {
        margin: 0;
        order: 2;
      }
    `,sliderInputField:t.css`
      margin-left: ${i.spacing(3)};
      width: 60px;
      input {
        text-align: center;
      }
    `,sliderInputFieldVertical:t.css`
      margin: 0 0 ${i.spacing(3)} 0;
      order: 1;
    `}})},32056:(G,O,e)=>{"use strict";e.d(O,{b:()=>p});var t=e(82897),n=e(68404),u=e(38067),s=e(14582),i=e(425),m=e(40538),f=e(43921),o=e(17920),l=e(31451),r=e(44405),d=e(41917);function c(y,h){const a=y.y.values.length,v={...y.y.config,...h};return(0,d.w)({frame:{refId:"sparkline",fields:[y.x??r.r.newField(a),{...y.y,config:v}],length:a}})}const g={drawStyle:m.l8.Line,showPoints:m.Jp.Auto,axisPlacement:m.LB.Hidden};class p extends n.PureComponent{constructor(h){super(h);const a=c(h.sparkline,h.config);this.state={data:(0,l.Bj)(a,(0,l.i7)(a)),alignedDataFrame:a,configBuilder:this.prepareConfig(a)}}static getDerivedStateFromProps(h,a){const v=c(h.sparkline,h.config);return v?{...a,data:(0,l.Bj)(v,(0,l.i7)(v)),alignedDataFrame:v}:{...a}}componentDidUpdate(h,a){const{alignedDataFrame:v}=this.state;if(!v)return;let C=!1;h.sparkline!==this.props.sparkline?C=!(0,u.Ch)(this.state.alignedDataFrame,a.alignedDataFrame):C=!(0,t.isEqual)(h.config,this.props.config),C&&this.setState({configBuilder:this.prepareConfig(v)})}getYRange(h){let{min:a,max:v}=this.state.alignedDataFrame.fields[1].state?.range;return a===v?(a===0?v=100:(a=0,v*=2),[a,v]):[Math.max(a,h.config.min??-1/0),Math.min(v,h.config.max??1/0)]}prepareConfig(h){const{theme:a}=this.props,v=new o.U;v.setCursor({show:!1,x:!1,y:!1});const C=h.fields[0];v.addScale({scaleKey:"x",orientation:m.wN.Horizontal,direction:m.bQ.Right,isTime:!1,range:()=>{const{sparkline:E}=this.props;if(E.x){if(E.timeRange&&E.x.type===s.fS.time)return[E.timeRange.from.valueOf(),E.timeRange.to.valueOf()];const P=E.x.values;return[P.get(0),P.get(P.length-1)]}return[0,E.y.values.length-1]}}),v.addAxis({scaleKey:"x",theme:a,placement:m.LB.Hidden});for(let E=0;E<h.fields.length;E++){const P=h.fields[E],x=P.config,M={...g,...x.custom};if(P===C||P.type!==s.fS.number)continue;const S=x.unit||"__fixed";v.addScale({scaleKey:S,orientation:m.wN.Vertical,direction:m.bQ.Up,range:()=>this.getYRange(P)}),v.addAxis({scaleKey:S,theme:a,placement:m.LB.Hidden});const T=(0,i.fD)(P).getCalculator(P,a)(0,0),R=M.drawStyle===m.l8.Points?m.Jp.Always:M.showPoints;v.addSeries({pxAlign:!1,scaleKey:S,theme:a,drawStyle:M.drawStyle,lineColor:M.lineColor??T,lineWidth:M.lineWidth,lineInterpolation:M.lineInterpolation,showPoints:R,pointSize:M.pointSize,fillOpacity:M.fillOpacity,fillColor:M.fillColor??T})}return v}render(){const{data:h,configBuilder:a}=this.state,{width:v,height:C,sparkline:E}=this.props;return n.createElement(f.N,{data:h,config:a,width:v,height:C,timeRange:E.timeRange})}}},40008:(G,O,e)=>{"use strict";e.d(O,{$:()=>m});var t=e(52423),n=e(68404),u=e(82385),s=e(81697);const i=(0,u.B)((f,o)=>({wrapper:t.css`
      font-size: ${f}px;
      ${o?t.css`
            display: inline-block;
          `:""}
    `})),m=f=>{const{className:o,inline:l=!1,iconClassName:r,style:d,size:c=16}=f,g=i(c,l);return n.createElement("div",{"data-testid":"Spinner",style:d,className:(0,t.cx)(g.wrapper,o)},n.createElement(s.J,{className:(0,t.cx)("fa-spin",r),name:"fa fa-spinner"}))}},68858:(G,O,e)=>{"use strict";e.d(O,{m:()=>m});var t=e(82897),n=e.n(t),u=e(68404),s=e(21760),i=e(46739);class m extends u.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:o,allowMultiple:l,defaultStat:r,onChange:d}=this.props,c=s.TB.list(o);if(c.length!==o.length){const g=c.map(y=>y.id),p=(0,t.difference)(o,g);console.warn("Unknown stats",p,o),d(c.map(y=>y.id))}!l&&o.length>1&&(console.warn("Removing extra stat",o),d([o[0]])),r&&o.length<1&&d([r])},this.onSelectionChange=o=>{const{onChange:l}=this.props;Array.isArray(o)?l(o.map(r=>r.value)):l(o&&o.value?[o.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(o){this.checkInput()}render(){const{stats:o,allowMultiple:l,defaultStat:r,placeholder:d,className:c,menuPlacement:g,width:p,inputId:y}=this.props,h=s.TB.selectOptions(o);return u.createElement(i.Ph,{value:h.current,className:c,isClearable:!r,isMulti:l,width:p,isSearchable:!0,options:h.options,placeholder:d,onChange:this.onSelectionChange,menuPlacement:g,inputId:y})}}m.defaultProps={allowMultiple:!1}},44727:(G,O,e)=>{"use strict";e.d(O,{r:()=>l,x:()=>r});var t=e(52423),n=e(82897),u=e.n(n),s=e(68404),i=e(99227),m=e(29516),f=e(82385),o=e(19253);const l=s.forwardRef(({value:c,checked:g,onChange:p,id:y,label:h,disabled:a,...v},C)=>{g&&(0,i.d)("Switch","checked prop","value");const E=(0,m.l4)(),P=d(E),x=(0,s.useRef)(y||(0,n.uniqueId)("switch-"));return s.createElement("div",{className:(0,t.cx)(P.switch)},s.createElement("input",{type:"checkbox",disabled:a,checked:c,onChange:M=>{!a&&p?.(M)},id:x.current,...v,ref:C}),s.createElement("label",{htmlFor:x.current,"aria-label":h??"Toggle switch"}))});l.displayName="Switch";const r=s.forwardRef(({transparent:c,className:g,showLabel:p,label:y,value:h,id:a,...v},C)=>{const E=(0,m.l4)(),P=d(E,c);return s.createElement("div",{className:(0,t.cx)(P.inlineContainer,g,v.disabled&&P.disabled)},p&&s.createElement("label",{htmlFor:a,className:(0,t.cx)(P.inlineLabel,h&&P.inlineLabelEnabled,"inline-switch-label")},y),s.createElement(l,{...v,id:a,label:y,ref:C,value:h}))});r.displayName="Switch";const d=(0,f.B)((c,g)=>({switch:t.css`
      width: 32px;
      height: 16px;
      position: relative;

      input {
        opacity: 0;
        left: -100vw;
        z-index: -1000;
        position: absolute;

        &:disabled + label {
          background: ${c.colors.action.disabledBackground};
          cursor: not-allowed;
        }

        &:checked + label {
          background: ${c.colors.primary.main};
          border-color: ${c.colors.primary.main};

          &:hover {
            background: ${c.colors.primary.shade};
          }

          &::after {
            transform: translate3d(18px, -50%, 0);
            background: ${c.colors.primary.contrastText};
          }
        }

        &:focus + label,
        &:focus-visible + label {
          ${(0,o.getFocusStyles)(c)}
        }

        &:focus:not(:focus-visible) + label {
          ${(0,o.getMouseFocusStyles)(c)}
        }
      }

      label {
        width: 100%;
        height: 100%;
        cursor: pointer;
        border: none;
        border-radius: 50px;
        background: ${c.components.input.background};
        border: 1px solid ${c.components.input.borderColor};
        transition: all 0.3s ease;

        &:hover {
          border-color: ${c.components.input.borderHover};
        }

        &::after {
          position: absolute;
          display: block;
          content: '';
          width: 12px;
          height: 12px;
          border-radius: 6px;
          background: ${c.colors.text.secondary};
          box-shadow: ${c.shadows.z1};
          top: 50%;
          transform: translate3d(2px, -50%, 0);
          transition: transform 0.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
      }
    `,inlineContainer:t.css`
      padding: ${c.spacing(0,1)};
      height: ${c.spacing(c.components.height.md)};
      display: inline-flex;
      align-items: center;
      background: ${g?"transparent":c.components.input.background};
      border: 1px solid ${g?"transparent":c.components.input.borderColor};
      border-radius: ${c.shape.borderRadius()};

      &:hover {
        border: 1px solid ${g?"transparent":c.components.input.borderHover};

        .inline-switch-label {
          color: ${c.colors.text.primary};
        }
      }
    `,disabled:t.css`
      background-color: rgba(204, 204, 220, 0.04);
      color: rgba(204, 204, 220, 0.6);
      border: 1px solid rgba(204, 204, 220, 0.04);
    `,inlineLabel:t.css`
      cursor: pointer;
      padding-right: ${c.spacing(1)};
      color: ${c.colors.text.secondary};
      white-space: nowrap;
    `,inlineLabelEnabled:t.css`
      color: ${c.colors.text.primary};
    `}))},68972:(G,O,e)=>{"use strict";e.d(O,{W:()=>d});var t=e(52423),n=e(68404),u=e(26625),s=e(17353),i=e(20017),m=e(49938),f=e(51142),o=e(82385),l=e(29516);const r=(0,o.B)(c=>({container:t.css`
      height: 100%;
    `,tabContent:t.css`
      padding: ${c.spacing(2)};
      background-color: ${c.colors.background.primary};
      height: calc(100% - ${c.components.menuTabs.height}px);
    `,close:t.css`
      position: absolute;
      right: 16px;
      top: 5px;
      cursor: pointer;
      font-size: ${c.typography.size.lg};
    `,tabs:t.css`
      padding-top: ${c.spacing(1)};
      border-color: ${c.colors.border.weak};
      ul {
        margin-left: ${c.spacing(2)};
      }
    `}));function d(c){const[g,p]=(0,n.useState)(c.tabs.some(P=>P.value===c.defaultTab)?c.defaultTab:c.tabs?.[0].value),y=P=>{p(P.value)},{tabs:h,onClose:a,closeIconTooltip:v}=c,C=(0,l.l4)(),E=r(C);return n.createElement("div",{className:E.container},n.createElement(u.J,{className:E.tabs},h.map(P=>n.createElement(s.O,{key:P.value,label:P.label,active:P.value===g,onChangeTab:()=>y(P),icon:P.icon})),n.createElement(i.h,{className:E.close,onClick:a,name:"times",title:v??"Close"})),n.createElement(m.$,{autoHeightMin:"100%"},n.createElement(f.I,{className:E.tabContent},h.find(P=>P.value===g)?.content)))}},52578:(G,O,e)=>{"use strict";e.d(O,{i:()=>m,c:()=>o});var t=e(68404),n=e(68183),u=e(52423);const s=l=>{const r=u.css`
    width: 100%;
    list-style: none;
  `,d=u.css`
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  `;return l.value&&!Array.isArray(l.value)?t.createElement("span",null,l.value):l.value&&Array.isArray(l.value)&&l.value.length>0?t.createElement("ul",{className:r},l.value.map((c,g)=>{const p=Object.keys(c)[0];return t.createElement("li",{className:d,key:g},t.createElement("span",null,p,":"),t.createElement("span",null,c[p]))})):i},i=()=>t.createElement("span",null,"\xA0"),m=l=>{const{totalColumnsWidth:r,footerGroups:d,isPaginationVisible:c,tableStyles:g}=l,p=n.wl.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:c?"relative":"absolute",width:r?`${r}px`:"100%",bottom:"0px"}},d.map(y=>{const{key:h,...a}=y.getFooterGroupProps();return t.createElement("div",{className:g.tfoot,...a,key:h,"data-testid":p.footer},y.headers.map(v=>f(v,g)))}))};function f(l,r){const d=l.getHeaderProps();return d?(d.style=d.style??{},d.style.position="absolute",d.style.justifyContent=l.justifyContent,t.createElement("div",{className:r.headerCell,...d},l.render("Footer"))):null}function o(l,r,d){if(r===void 0)return i;if(d){const c=r[l];return typeof c!="string"?i:s({value:[{Count:c}]})}return s({value:r[l]})}},93163:(G,O,e)=>{"use strict";e.d(O,{i:()=>ue});var t=e(68404),n=e(91742),u=e(75478),s=e(21760),i=e(29516),m=e(49938),f=e(89891),o=e(52578),l=e(68183),r=e(91228),d=e(81697),c=e(52423),g=e(30995),p=e(57319),y=e(90701),h=e(38835),a=e(20017),v=e(90723),C=e(79230),E=e(94338),P=e(82385);const x=28,M=x*5,S=({options:q,values:ge,caseSensitive:De,onChange:fe})=>{const me=(0,i.l4)(),ce=D(me),[ie,re]=(0,t.useState)(""),Ee=(0,t.useMemo)(()=>new RegExp(ie,De?void 0:"i"),[ie,De]),J=(0,t.useMemo)(()=>q.filter(Le=>Le.label===void 0?!1:Ee.test(Le.label)),[q,Ee]),te=me.spacing.gridSize,ne=(0,t.useMemo)(()=>Math.min(J.length*x,M)+te,[te,J.length]),j=(0,t.useCallback)(Le=>{re(Le)},[re]),be=(0,t.useCallback)(Le=>Qe=>{const Ye=Qe.currentTarget.checked?ge.concat(Le):ge.filter(de=>de.value!==Le.value);fe(Ye)},[fe,ge]);return t.createElement(y.wc,{spacing:"md"},t.createElement(C.H,{placeholder:"Filter values",onChange:j,value:ie}),!J.length&&t.createElement(h._,null,"No values"),J.length&&t.createElement(u.t7,{height:ne,itemCount:J.length,itemSize:x,width:"100%",className:ce.filterList},({index:Le,style:Qe})=>{const Ye=J[Le],{value:de,label:Be}=Ye,Ve=ge.find($e=>$e.value===de)!==void 0;return t.createElement("div",{className:ce.filterListRow,style:Qe,title:Be},t.createElement(E.X,{value:Ve,label:Be,onChange:be(Ye)}))}))},D=(0,P.B)(q=>({filterList:c.css`
    label: filterList;
  `,filterListRow:c.css`
    label: filterListRow;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: ${q.spacing(.5)};

    :hover {
      background-color: ${q.colors.action.hover};
    }
  `}));var T=e(78058);const R=({column:{preFilteredRows:q,filterValue:ge,setFilter:De},onClose:fe,field:me})=>{const ce=(0,i.l4)(),ie=(0,t.useMemo)(()=>(0,T.AF)(q,me),[q,me]),re=(0,t.useMemo)(()=>(0,T.mP)(ie),[ie]),Ee=(0,t.useMemo)(()=>(0,T.n0)(re,ge),[re,ge]),[J,te]=(0,t.useState)(Ee),[ne,j]=(0,t.useState)(!1),be=(0,t.useCallback)(Be=>fe(),[fe]),Le=(0,t.useCallback)(Be=>{const Ve=J.length?J:void 0;De(Ve),fe()},[De,J,fe]),Qe=(0,t.useCallback)(Be=>{De(void 0),fe()},[De,fe]),Ye=(0,t.useMemo)(()=>ge!==void 0,[ge]),de=(0,i.wW)(L);return t.createElement(p.L,{onClick:be,useCapture:!0},t.createElement("div",{className:(0,c.cx)(de.filterContainer),onClick:w},t.createElement(y.wc,{spacing:"lg"},t.createElement(y.wc,{spacing:"xs"},t.createElement(y.Lh,{justify:"space-between",align:"center"},t.createElement(h._,{className:de.label},"Filter by values:"),t.createElement(a.h,{name:"text-fields",tooltip:"Match case",style:{color:ne?ce.colors.text.link:ce.colors.text.disabled},onClick:()=>{j(Be=>!Be)}})),t.createElement("div",{className:(0,c.cx)(de.listDivider)}),t.createElement(S,{onChange:te,values:J,options:re,caseSensitive:ne})),t.createElement(y.Lh,{spacing:"lg"},t.createElement(y.Lh,null,t.createElement(v.zx,{size:"sm",onClick:Le},"Ok"),t.createElement(v.zx,{size:"sm",variant:"secondary",onClick:be},"Cancel")),Ye&&t.createElement(y.Lh,null,t.createElement(v.zx,{fill:"text",size:"sm",onClick:Qe},"Clear filter"))))))},L=q=>({filterContainer:c.css`
    label: filterContainer;
    width: 100%;
    min-width: 250px;
    height: 100%;
    max-height: 400px;
    background-color: ${q.colors.background.primary};
    border: 1px solid ${q.colors.border.medium};
    padding: ${q.spacing(2)};
    margin: ${q.spacing(1)} 0;
    box-shadow: 0px 0px 20px ${q.v1.palette.black};
    border-radius: ${q.spacing(.5)};
  `,listDivider:c.css`
    label: listDivider;
    width: 100%;
    border-top: 1px solid ${q.colors.border.medium};
    padding: ${q.spacing(.5,2)};
  `,label:c.css`
    margin-bottom: 0;
  `}),w=q=>{q.stopPropagation()},A=({column:q,field:ge,tableStyles:De})=>{const fe=(0,t.useRef)(null),[me,ce]=(0,t.useState)(!1),ie=(0,i.wW)(N),re=(0,t.useMemo)(()=>Boolean(q.filterValue),[q.filterValue]),Ee=(0,t.useCallback)(()=>ce(!0),[ce]),J=(0,t.useCallback)(()=>ce(!1),[ce]);return!ge||!ge.config.custom?.filterable?null:t.createElement("button",{className:(0,c.cx)(De.headerFilter,re?ie.filterIconEnabled:ie.filterIconDisabled),ref:fe,type:"button",onClick:Ee},t.createElement(d.J,{name:"filter"}),me&&fe.current&&t.createElement(g.J,{content:t.createElement(R,{column:q,tableStyles:De,field:ge,onClose:J}),placement:"bottom-start",referenceElement:fe.current,show:!0}))},N=q=>({filterIconEnabled:c.css`
    label: filterIconEnabled;
    color: ${q.colors.primary.text};
  `,filterIconDisabled:c.css`
    label: filterIconDisabled;
    color: ${q.colors.text.disabled};
  `}),W=q=>{const{headerGroups:ge,showTypeIcons:De,tableStyles:fe}=q,me=l.wl.components.Panels.Visualization.Table;return t.createElement("div",{role:"rowgroup",className:fe.headerRow},ge.map(ce=>{const{key:ie,...re}=ce.getHeaderGroupProps();return t.createElement("div",{className:fe.thead,...re,key:ie,"aria-label":me.header,role:"row"},ce.headers.map((Ee,J)=>I(Ee,fe,De)))}))};function I(q,ge,De){const fe=q.getHeaderProps(),me=q.field??null;return q.canResize&&(fe.style.userSelect=q.isResizing?"none":"auto"),fe.style.position="absolute",fe.style.justifyContent=q.justifyContent,t.createElement("div",{className:ge.headerCell,...fe,role:"columnheader"},q.canSort&&t.createElement(t.Fragment,null,t.createElement("button",{...q.getSortByToggleProps(),className:ge.headerCellLabel},De&&t.createElement(d.J,{name:(0,r.e7)(me),title:me?.type,size:"sm",className:ge.typeIcon}),t.createElement("div",null,q.render("Header")),q.isSorted&&(q.isSortedDesc?t.createElement(d.J,{size:"lg",name:"arrow-down",className:ge.sortIcon}):t.createElement(d.J,{name:"arrow-up",size:"lg",className:ge.sortIcon}))),q.canFilter&&t.createElement(A,{column:q,tableStyles:ge,field:me})),!q.canSort&&q.render("Header"),!q.canSort&&q.canFilter&&t.createElement(A,{column:q,tableStyles:ge,field:me}),q.canResize&&t.createElement("div",{...q.getResizerProps(),className:ge.resizeHandle}))}var F=e(85563);function V(q,ge){(0,t.useEffect)(()=>{const De=q.current?.querySelector(".track-vertical"),fe=ge.current?.firstChild;fe&&De&&(De?.remove(),fe.querySelector(":scope > .track-vertical")?.remove(),fe.append(De))})}function b(q,ge,De){(0,t.useEffect)(()=>{if(q.lastExpandedIndex!==void 0){ge.current?.resetAfterIndex(Math.max(q.lastExpandedIndex-1,0));return}},[q.lastExpandedIndex,q.toggleRowExpandedCounter,ge,De])}var X=e(89890);function k({onColumnResize:q,onSortByChange:ge,data:De}){return(0,t.useCallback)((fe,me)=>{switch(me.type){case"columnDoneResizing":if(q){const ie=fe.columnResizing.headerIdWidths[0][0],re=parseInt(ie,10),Ee=Math.round(fe.columnResizing.columnWidths[ie]),J=De.fields[re];if(!J)return fe;const te=(0,X.C)(J,De);q(te,Ee)}case"toggleSortBy":if(ge){const ce=[];for(const ie of fe.sortBy){const re=De.fields[parseInt(ie.id,10)];re&&ce.push({displayName:(0,X.C)(re,De),desc:ie.desc})}ge(ce)}case"toggleRowExpanded":if(me.id)return{...fe,lastExpandedIndex:parseInt(me.id,10),toggleRowExpandedCounter:fe.toggleRowExpandedCounter+1}}return fe},[De,q,ge])}function H(q,ge){const De={toggleRowExpandedCounter:0};if(q){De.sortBy=[];for(const fe of q)for(const me of ge)me.Header===fe.displayName&&De.sortBy.push({id:me.id,desc:fe.desc})}return De}var Y=e(26192);const ee=150,ue=(0,t.memo)(q=>{const{ariaLabel:ge,data:De,subData:fe,height:me,maxHeight:ce,onCellFilterAdded:ie,width:re,columnMinWidth:Ee=ee,noHeader:J,resizable:te=!0,initialSortBy:ne,footerOptions:j,showTypeIcons:be,footerValues:Le,enablePagination:Qe}=q,Ye=(0,t.useRef)(null),de=(0,t.useRef)(null),Be=(0,t.useRef)(null),Ve=(0,i.wW)(Y.V),$e=(0,i.l4)(),We=J?0:Ve.rowHeight,[Ke,qe]=(0,t.useState)(Le),Xe=(0,t.useMemo)(()=>{const gt=We;let Ct=0;if(!Ke)return 0;for(const Ot of Ke)Array.isArray(Ot)&&Ot.length>Ct&&(Ct=Ot.length);return Ct>1?gt*Ct:gt},[Ke,We]),at=(0,t.useMemo)(()=>De.fields.length?Array(De.length).fill(0):[],[De]),Ze=Boolean(j?.countRows&&j.reducer&&j.reducer.length&&j.reducer[0]===s.gz.count),lt=(0,t.useMemo)(()=>(0,T.Pu)(De,re,Ee,!!fe?.length,Ke,Ze),[De,re,Ee,Ke,fe,Ze]),nt=k(q),_e=(0,t.useMemo)(()=>({columns:lt,data:at,disableResizing:!te,stateReducer:nt,initialState:H(ne,lt),autoResetFilters:!1,sortTypes:{number:T.QT,"alphanumeric-insensitive":T.nl}}),[ne,lt,at,te,nt]),{getTableProps:ut,headerGroups:rt,rows:je,prepareRow:dt,totalColumnsWidth:oe,footerGroups:Se,page:Re,state:ze,gotoPage:ve,setPageSize:Te,pageOptions:he}=(0,n.useTable)(_e,n.useFilters,n.useSortBy,n.useAbsoluteLayout,n.useResizeColumns,n.useExpanded,n.usePagination),pe=ze;(0,t.useEffect)(()=>{j||qe(Le)},[Le,j]),(0,t.useEffect)(()=>{if(!j)return;if(!j.show){qe(void 0);return}const gt=(0,T.jB)(rt[0].headers,(0,T.KF)(je),j,$e);if(Ze){const Ct=new Array(gt.length).fill(void 0);Ct[0]=De.length.toString(),qe(Ct)}else qe(gt)},[j,$e,ze.filters,De]);let ye=me-(We+Xe);Qe&&(ye-=Ve.cellHeight);const Oe=Math.round(ye/Ve.rowHeight)-1,Ne=Object.keys(pe.expanded);if(Ne.length){const gt=Ne.reduce((Ct,Ot)=>{const Ft=fe?.find(jt=>jt.meta?.custom?.parentRowIndex===parseInt(Ot,10))?.length;return Ft?Ct+Ve.rowHeight*(Ft+1):Ct},0);ye<gt&&(ye=Math.min(ye+gt,ce||Number.MAX_SAFE_INTEGER))}(0,t.useEffect)(()=>{Oe<=0||Te(Oe)},[Oe,Te]),b(pe,Ye,De),V(Be,de);const Me=t.useCallback(gt=>{if(ze.expanded[gt]){const Ct=fe?.find(Ot=>Ot.meta?.custom?.parentRowIndex===gt);if(Ct){const Ot=!!Ct.meta?.custom?.noHeader,Ft={height:Ve.rowHeight*(Ct.length+(Ot?0:1)),background:$e.colors.emphasize($e.colors.background.primary,.015),paddingLeft:T.bc,position:"absolute",bottom:0};return t.createElement("div",{style:Ft},t.createElement(ue,{data:Ct,width:re-T.bc,height:Ve.rowHeight*(Ct.length+1),noHeader:Ot}))}}return null},[ze.expanded,fe,Ve.rowHeight,$e.colors,re]),Ae=t.useCallback(({index:gt,style:Ct})=>{let Ot=je[gt];return Qe&&(Ot=Re[gt]),dt(Ot),t.createElement("div",{...Ot.getRowProps({style:Ct}),className:Ve.row},Me(gt),Ot.cells.map((Ft,jt)=>t.createElement(F.p,{key:jt,tableStyles:Ve,cell:Ft,onCellFilterAdded:ie,columnIndex:jt,columnCount:Ot.cells.length})))},[ie,Re,Qe,dt,je,Ve,Me]),we=(0,t.useCallback)(gt=>{ve(gt-1)},[ve]),ke=Qe?Re.length:je.length;let st=null;if(Qe){const gt=ze.pageIndex*ze.pageSize+1;let Ct=gt+ze.pageSize-1;const Ot=re<550;Ct>De.length&&(Ct=De.length),st=t.createElement("div",{className:Ve.paginationWrapper},Ot?null:t.createElement("div",{className:Ve.paginationItem}),t.createElement("div",{className:Ve.paginationCenterItem},t.createElement(f.t,{currentPage:ze.pageIndex+1,numberOfPages:he.length,showSmallVersion:Ot,onNavigate:we})),Ot?null:t.createElement("div",{className:Ve.paginationSummary},gt," - ",Ct," of ",De.length," rows"))}const Et=gt=>{if(ze.expanded[gt]){const Ct=fe?.find(Ot=>Ot.meta?.custom?.parentRowIndex===gt);if(Ct){const Ot=!!Ct.meta?.custom?.noHeader;return Ve.rowHeight*(Ct.length+1+(Ot?0:1))}}return Ve.rowHeight},Pt=gt=>{const{scrollTop:Ct}=gt.target;Ye.current!==null&&Ye.current.scrollTo(Ct)};return t.createElement("div",{...ut(),className:Ve.table,"aria-label":ge,role:"table",ref:de},t.createElement(m.$,{hideVerticalTrack:!0},t.createElement("div",{className:Ve.tableContentWrapper(oe)},!J&&t.createElement(W,{headerGroups:rt,showTypeIcons:be,tableStyles:Ve}),ke>0?t.createElement("div",{ref:Be},t.createElement(m.$,{onScroll:Pt,hideHorizontalTrack:!0},t.createElement(u.S_,{height:ye,itemCount:ke,itemSize:Et,width:"100%",ref:Ye,style:{overflow:void 0}},Ae))):t.createElement("div",{style:{height:me-We},className:Ve.noData},"No data"),Ke&&t.createElement(o.i,{isPaginationVisible:Boolean(Qe),footerValues:Ke,footerGroups:Se,totalColumnsWidth:oe,tableStyles:Ve}))),st)});ue.displayName="Table"},85563:(G,O,e)=>{"use strict";e.d(O,{p:()=>t});const t=({cell:n,tableStyles:u,onCellFilterAdded:s,columnIndex:i,columnCount:m,userProps:f})=>{const o=n.getCellProps(),l=n.column.field;if(!l?.display)return null;o.style&&(o.style.minWidth=o.style.width,o.style.justifyContent=n.column.justifyContent);let r=(n.column.width??24)-u.cellPadding*2;return n.render("Cell",{field:l,tableStyles:u,onCellFilterAdded:s,cellProps:o,innerWidth:r,userProps:f})}},26192:(G,O,e)=>{"use strict";e.d(O,{V:()=>n});var t=e(52423);const n=u=>{const s=u.colors.border.weak,i=u.colors.primary.border,m=6,f=u.typography.body.lineHeight,o=14,l=m*2+o*f,r=l+2,d=u.colors.emphasize(u.colors.background.primary,.03),c=(g,p,y)=>{const h={margin:u.spacing(0,-.5,0,.5)},a={position:"absolute",top:0,right:0,margin:"auto"},v={overflow:"visible",width:"auto !important",boxShadow:`0 0 2px ${u.colors.primary.main}`,background:p??d,zIndex:1};return t.css`
      label: ${y?"cellContainerOverflow":"cellContainerNoOverflow"};
      padding: ${m}px;
      width: 100%;
      // Cell height need to account for row border
      height: ${r-1}px;
      display: flex;
      align-items: center;
      border-right: 1px solid ${s};

      ${g?`color: ${g};`:""};
      ${p?`background: ${p};`:""};
      background-clip: padding-box;

      &:last-child:not(:only-child) {
        border-right: none;
      }

      &:hover {
        ${y&&v};
        .cellActions {
          visibility: visible;
          opacity: 1;
          width: auto;
        }
      }

      a {
        color: inherit;
      }

      .cellActions {
        display: flex;
        ${y?h:a}
        visibility: hidden;
        opacity: 0;
        width: 0;
        align-items: center;
        height: 100%;
        padding: ${u.spacing(1,.5,1,.5)};
        background: ${p?"none":u.colors.emphasize(u.colors.background.primary,.03)};

        svg {
          color: ${g};
        }
      }

      .cellActionsLeft {
        right: auto !important;
        left: 0;
      }

      .cellActionsTransparent {
        background: none;
      }
    `};return{theme:u,cellHeight:l,buildCellContainerStyle:c,cellPadding:m,cellHeightInner:o*f,rowHeight:r,table:t.css`
      height: 100%;
      width: 100%;
      overflow: auto;
      display: flex;
      flex-direction: column;
    `,thead:t.css`
      label: thead;
      height: ${r}px;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,tfoot:t.css`
      label: tfoot;
      height: ${r}px;
      border-top: 1px solid ${s};
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,headerRow:t.css`
      label: row;
      border-bottom: 1px solid ${s};
    `,headerCell:t.css`
      padding: ${m}px;
      overflow: hidden;
      white-space: nowrap;
      display: flex;
      font-weight: ${u.typography.fontWeightMedium};

      &:last-child {
        border-right: none;
      }
    `,headerCellLabel:t.css`
      border: none;
      padding: 0;
      background: inherit;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-weight: ${u.typography.fontWeightMedium};
      display: flex;
      align-items: center;
      margin-right: ${u.spacing(.5)};

      &:hover {
        text-decoration: underline;
        color: ${u.colors.text.link};
      }
    `,cellContainer:c(void 0,void 0,!0),cellContainerNoOverflow:c(void 0,void 0,!1),cellText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
    `,sortIcon:t.css`
      margin-left: ${u.spacing(.5)};
    `,cellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      color: ${u.colors.text.link};
      font-weight: ${u.typography.fontWeightMedium};
      &:hover {
        text-decoration: underline;
      }
    `,cellLinkForColoredCell:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      font-weight: ${u.typography.fontWeightMedium};
      text-decoration: underline;
    `,imageCellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      height: 100%;
    `,headerFilter:t.css`
      background: transparent;
      border: none;
      label: headerFilter;
      padding: 0;
    `,paginationWrapper:t.css`
      display: flex;
      height: ${l}px;
      justify-content: center;
      align-items: center;
      width: 100%;
      li {
        margin-bottom: 0;
      }
    `,paginationItem:t.css`
      flex: 20%;
    `,paginationCenterItem:t.css`
      flex: 100%;
      display: flex;
      justify-content: center;
    `,paginationSummary:t.css`
      color: ${u.colors.text.secondary};
      font-size: ${u.typography.bodySmall.fontSize};
      display: flex;
      justify-content: flex-end;
      flex: 20%;
      padding-right: ${u.spacing(1)};
    `,tableContentWrapper:g=>{const p=g!==void 0?`${g}px`:"100%";return t.css`
        label: tableContentWrapper;
        width: ${p};
        display: flex;
        flex-direction: column;
      `},row:t.css`
      label: row;
      border-bottom: 1px solid ${s};

      &:hover {
        background-color: ${d};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,imageCell:t.css`
      height: 100%;
    `,resizeHandle:t.css`
      label: resizeHandle;
      cursor: col-resize !important;
      display: inline-block;
      background: ${i};
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      width: 8px;
      height: 100%;
      position: absolute;
      right: -4px;
      border-radius: 3px;
      top: 0;
      touch-action: none;

      &:hover {
        opacity: 1;
      }
    `,typeIcon:t.css`
      margin-right: ${u.spacing(1)};
      color: ${u.colors.text.secondary};
    `,noData:t.css`
      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      width: 100%;
    `,expanderCell:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: ${r}px;
      cursor: pointer;
    `}}},15745:(G,O,e)=>{"use strict";e.d(O,{PT:()=>t,tE:()=>n});const t="=",n="!="},78058:(G,O,e)=>{"use strict";e.d(O,{bc:()=>ge,AF:()=>ie,KF:()=>Ye,S_:()=>Be,Pu:()=>fe,n0:()=>te,jB:()=>Le,E4:()=>De,q7:()=>Ve,nl:()=>ne,QT:()=>j,mP:()=>Ee});var t=e(82897),n=e(58635),u=e(14582),s=e(89890),i=e(20112),m=e(21760),f=e(19695),o=e(36512),l=e(40538),r=e(68404),d=e(24177),c=e(59309),g=e(20251),p=e(87462),y=e(67591);const h={mode:d.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},a=$e=>{const{field:We,innerWidth:Ke,tableStyles:qe,cell:Xe,cellProps:at,row:Ze}=$e;let lt=(0,c.xD)(We,!1);lt.thresholds||(lt={...lt,thresholds:h});const nt=We.display(Xe.value);let _e=l.QH.Gradient;const ut=Be(We);ut.type===l.h2.Gauge&&(_e=ut.mode??l.QH.Gradient);const rt=()=>(0,t.isFunction)(We.getLinks)?We.getLinks({valueRowIndex:Ze.index}):[],je=Boolean(rt().length),dt=oe=>{const{openMenu:Se,targetClassName:Re}=oe;return r.createElement(p.xf,{width:Ke,height:qe.cellHeightInner,field:lt,display:We.display,text:{valueSize:14},value:nt,orientation:g.wm.Horizontal,theme:qe.theme,onClick:Se,className:Re,itemSpacing:1,lcdCellWidth:8,displayMode:_e})};return r.createElement("div",{...at,className:qe.cellContainer},je&&r.createElement(y.V,{links:rt,style:{display:"flex",width:"100%"}},oe=>dt(oe)),!je&&r.createElement(p.xf,{width:Ke,height:qe.cellHeightInner,field:lt,display:We.display,text:{valueSize:14},value:nt,orientation:g.wm.Horizontal,theme:qe.theme,itemSpacing:1,lcdCellWidth:8,displayMode:_e}))};var v=e(52423),C=e(35008),E=e.n(C),P=e(29516),x=e(89814),M=e(1301),S=e(90723),D=e(20017),T=e(90701),R=e(38120),L=e(6694),w=e(57172);function A({value:$e,onDismiss:We,mode:Ke}){let qe=$e;if((0,t.isString)($e))try{$e=JSON.parse($e)}catch{}else qe=JSON.stringify($e,null," ");let Xe=qe;return Ke==="code"&&(Xe=JSON.stringify($e,null," ")),r.createElement(L.u,{onDismiss:We,isOpen:!0,title:"Inspect value"},Ke==="code"?r.createElement(w.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(Xe&&Xe.length)>100,value:Xe,readOnly:!0}):r.createElement("pre",null,Xe),r.createElement(L.u.ButtonRow,null,r.createElement(R.m,{icon:"copy",getText:()=>Xe},"Copy to Clipboard")))}var N=e(15745);function W({field:$e,cell:We,previewMode:Ke,onCellFilterAdded:qe}){const[Xe,at]=(0,r.useState)(!1),Ze=De($e)==="flex-end",lt=Boolean($e.config.filterable)&&We.value!==void 0,nt=Boolean($e.config.custom?.inspect),_e={size:"sm",tooltipPlacement:"top"},ut=(0,r.useCallback)(je=>{qe&&qe({key:$e.name,operator:N.PT,value:We.value})},[We,$e,qe]),rt=(0,r.useCallback)(je=>{qe&&qe({key:$e.name,operator:N.tE,value:We.value})},[We,$e,qe]);return r.createElement(r.Fragment,null,r.createElement("div",{className:`cellActions ${Ze?"cellActionsLeft":""}`},r.createElement(T.Lh,{spacing:"xs"},nt&&r.createElement(D.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{at(!0)},..._e}),lt&&r.createElement(D.h,{name:"search-plus",onClick:ut,tooltip:"Filter for value",..._e}),lt&&r.createElement(D.h,{name:"search-minus",onClick:rt,tooltip:"Filter out value",..._e}))),Xe&&r.createElement(A,{mode:Ke,value:We.value,onDismiss:()=>{at(!1)}}))}const I=$e=>{const{field:We,cell:Ke,tableStyles:qe,row:Xe,cellProps:at}=$e,Ze=Boolean(We.config.custom?.inspect),lt=We.display(Ke.value);let nt;r.isValidElement(Ke.value)?nt=Ke.value:nt=(0,i.zc)(lt);const ut=We.config.filterable&&Ke.value!==void 0||Ze,rt=Be(We),je=F(qe,rt,lt,Ze),dt=Boolean((0,x.i)(We,Xe)?.length),oe=(0,P.wW)(S._7);return r.createElement("div",{...at,className:je},!dt&&r.createElement("div",{className:qe.cellText},nt),dt&&r.createElement(y.V,{links:()=>(0,x.i)(We,Xe)||[]},Se=>{const Re=r.createElement("div",{className:V(qe,rt,Se.targetClassName)},nt);return Se.openMenu?r.createElement(S.zx,{className:(0,v.cx)(oe),onClick:Se.openMenu},Re):Re}),ut&&r.createElement(W,{...$e,previewMode:"text"}))};function F($e,We,Ke,qe=!1){const Xe=$e.theme.isDark?1:-.7;let at,Ze;if(We.type===l.h2.ColorText)at=Ke.color;else if(We.type===l.h2.ColorBackground){if(We.mode===l.v7.Basic)at=(0,M.bM)(Ke.color,$e.theme.isDark),Ze=E()(Ke.color).toRgbString();else if(We.mode===l.v7.Gradient){const lt=E()(Ke.color).darken(10*Xe).spin(5);at=(0,M.bM)(Ke.color,$e.theme.isDark),Ze=`linear-gradient(120deg, ${lt.toRgbString()}, ${Ke.color})`}}return at!==void 0||Ze!==void 0?$e.buildCellContainerStyle(at,Ze,!qe):qe?$e.cellContainerNoOverflow:$e.cellContainer}function V($e,We,Ke){return We.type===l.h2.Auto?(0,v.cx)($e.cellLink,Ke):(0,v.cx)($e.cellLinkForColoredCell,Ke)}var b=e(52578),X=e(77495),k=e(50913);function H($e){const{cell:We,tableStyles:Ke,cellProps:qe}=$e;let Xe="";return We.value instanceof k.Z?Xe=new X.Z().writeGeometry(We.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):We.value!=null&&(Xe=`${We.value}`),r.createElement("div",{...qe,className:Ke.cellContainer},r.createElement("div",{className:Ke.cellText,style:{fontFamily:"monospace"}},Xe))}const Y=$e=>{const{field:We,cell:Ke,tableStyles:qe,row:Xe,cellProps:at}=$e,Ze=We.display(Ke.value),lt=Boolean((0,x.i)(We,Xe)?.length),nt=(0,P.wW)(S._7);return r.createElement("div",{...at,className:qe.cellContainer},!lt&&r.createElement("img",{src:Ze.text,className:qe.imageCell,alt:""}),lt&&r.createElement(y.V,{style:{height:"100%"},links:()=>(0,x.i)(We,Xe)||[]},_e=>{const ut=r.createElement("img",{src:Ze.text,className:qe.imageCell,alt:""});return _e.openMenu?r.createElement(S.zx,{className:(0,v.cx)(nt),onClick:_e.openMenu},ut):ut}))};function ee($e){const{cell:We,tableStyles:Ke,cellProps:qe,field:Xe,row:at}=$e,Ze=Boolean(Xe.config.custom?.inspect),lt=v.css`
    cursor: pointer;
    font-family: monospace;
  `;let nt=We.value,_e=nt;if((0,t.isString)(nt))try{nt=JSON.parse(nt)}catch{}else _e=JSON.stringify(nt,null," ");const ut=Boolean((0,x.i)(Xe,at)?.length),rt=(0,P.wW)(S._7);return r.createElement("div",{...qe,className:Ze?Ke.cellContainerNoOverflow:Ke.cellContainer},r.createElement("div",{className:(0,v.cx)(Ke.cellText,lt)},!ut&&r.createElement("div",{className:Ke.cellText},_e),ut&&r.createElement(y.V,{links:()=>(0,x.i)(Xe,at)||[]},je=>je.openMenu?r.createElement(S.zx,{className:(0,v.cx)(rt),onClick:je.openMenu},_e):r.createElement(r.Fragment,null,_e))),Ze&&r.createElement(W,{...$e,previewMode:"code"}))}var ue=e(81697);function q({row:$e,tableStyles:We}){return r.createElement("div",{className:We.expanderCell,...$e.getToggleRowExpandedProps()},r.createElement(ue.J,{"aria-label":$e.isExpanded?"Collapse row":"Expand row",name:$e.isExpanded?"angle-down":"angle-right",size:"xl"}))}const ge=50;function De($e){if(!$e)return"flex-start";if($e.config.custom)switch($e.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return $e.type===u.fS.number?"flex-end":"flex-start"}function fe($e,We,Ke,qe,Xe,at){const Ze=[];let lt=0;qe&&(Ze.push({Header:()=>null,id:"expander",Cell:q,width:ge,minWidth:ge,filter:(_e,ut,rt)=>[],justifyContent:"left",field:$e.fields[0],sortType:"basic"}),We-=ge);for(const[_e,ut]of $e.fields.entries()){const rt=ut.config.custom||{};if(rt.hidden)continue;rt.width?We-=rt.width:lt++;const je=oe=>{switch(oe){case u.fS.number:return"number";case u.fS.time:return"basic";default:return"alphanumeric-insensitive"}},dt=me(rt.cellOptions?.type,ut);Ze.push({Cell:dt,id:_e.toString(),field:ut,Header:(0,s.C)(ut,$e),accessor:(oe,Se)=>ut.values.get(Se),sortType:je(ut.type),width:rt.width,minWidth:rt.minWidth??Ke,filter:(0,n.Z)(ce(ut)),justifyContent:De(ut),Footer:(0,b.c)(_e,Xe,at)})}let nt=We/lt;for(let _e=lt;_e>0;_e--)for(const ut of Ze)!ut.width&&ut.minWidth>nt&&(ut.width=ut.minWidth,We-=ut.width,lt-=1,nt=We/lt);for(const _e of Ze)_e.width||(_e.width=nt),_e.minWidth=50;return Ze}function me($e,We){switch($e){case l.h2.ColorText:case l.h2.ColorBackground:return I;case l.h2.Image:return Y;case l.h2.Gauge:return a;case l.h2.JSONView:return ee}return We.type===u.fS.geo?H:We.type===u.fS.other?ee:I}function ce($e){return function(We,Ke,qe){return We.length===0||!qe||!$e?We:We.filter(Xe=>{if(!Xe.values.hasOwnProperty(Ke))return!1;const at=re(Xe,$e);return qe.find(Ze=>Ze.value===at)!==void 0})}}function ie($e,We){if(!We||$e.length===0)return{};const Ke={};for(let qe=0;qe<$e.length;qe++){const Xe=re($e[qe],We);Ke[Xe||"(Blanks)"]=Xe}return Ke}function re($e,We){if(!We||!$e)return"";const Ke=We.values.get($e.index),qe=We.display?We.display(Ke):Ke;return We.display?(0,i.zc)(qe):qe}function Ee($e){return Object.keys($e).reduce((We,Ke)=>We.concat({value:$e[Ke],label:Ke}),[]).sort(J)}function J($e,We){return $e.label===void 0&&We.label===void 0?0:$e.label===void 0&&We.label!==void 0?-1:$e.label!==void 0&&We.label===void 0?1:$e.label<We.label?-1:$e.label>We.label?1:0}function te($e,We){return We?$e.filter(Ke=>We.some(qe=>qe.value===Ke.value)):[]}function ne($e,We,Ke){return String($e.values[Ke]).localeCompare(String(We.values[Ke]),void 0,{sensitivity:"base"})}function j($e,We,Ke){const qe=be($e.values[Ke]),Xe=be(We.values[Ke]);return qe===Xe?0:qe>Xe?1:-1}function be($e){return $e==null||$e===""||isNaN($e)?Number.NEGATIVE_INFINITY:typeof $e=="number"?$e:Number($e)}function Le($e,We,Ke,qe){return $e.map((Xe,at)=>{if(Xe.field.type!==u.fS.number)return at===0&&Ke.reducer&&Ke.reducer.length>0?m.TB.get(Ke.reducer[0]).name:void 0;let Ze=(0,t.clone)(Xe.field);return Ze.values=new f.G(We[at]),Ze.state=void 0,Xe.field=Ze,Ke.fields&&Ke.fields.length>0?Ke.fields.find(nt=>nt===Xe.field.name)?Qe(Xe.field,Ke.reducer,qe):void 0:Qe(Xe.field,Ke.reducer||[],qe)})}function Qe($e,We,Ke){const qe=$e.display??(0,o.U)({field:$e,theme:Ke}),Xe=We[0],at=(0,m.Kx)({field:$e,reducers:We})[Xe];return(0,i.zc)(qe(at))}function Ye($e){const We=[];for(const Ke in $e)for(const[qe,Xe]of Object.entries($e[Ke].values))We[qe]===void 0&&(We[qe]=[]),We[qe].push(Xe);return We}const de={type:l.h2.Auto};function Be($e){return $e.config.custom?.displayMode?Ve($e.config.custom?.displayMode):$e.config.custom?.cellOptions?$e.config.custom.cellOptions:de}function Ve($e){switch($e){case"basic":case"gradient-gauge":case"lcd-gauge":let We=l.QH.Basic;return $e==="gradient-gauge"?We=l.QH.Gradient:$e==="lcd-gauge"&&(We=l.QH.Lcd),{type:l.h2.Gauge,mode:We};case"color-background":case"color-background-solid":let Ke=l.v7.Basic;return $e==="color-background"&&(Ke=l.v7.Gradient),{type:l.h2.ColorBackground,mode:Ke};default:return{type:$e}}}},46804:(G,O,e)=>{"use strict";e.d(O,{w:()=>d});var t=e(52423),n=e(82897),u=e.n(n),s=e(68404),i=e(89230),m=e(29516),f=e(82385),o=e(81697),l=e(79090);class r extends s.PureComponent{constructor(p){super(p),this.readCSV=(0,n.debounce)(()=>{const{config:a}=this.props,{text:v}=this.state;this.setState({data:(0,i.uP)(v,{config:a})})},150),this.onTextChange=a=>{this.setState({text:a.target.value})};const{text:y,config:h}=p;this.state={text:y,data:(0,i.uP)(y,{config:h})}}componentDidUpdate(p,y){const{text:h}=this.state;(h!==y.text||this.props.config!==p.config)&&this.readCSV(),this.props.text!==p.text&&this.props.text!==h&&this.setState({text:this.props.text}),this.state.data!==y.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:p,height:y,theme:h}=this.props,{data:a}=this.state,v=c(h);return s.createElement("div",{className:v.tableInputCsv},s.createElement(l.K,{style:{width:p,height:y},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:v.textarea}),a&&s.createElement("footer",{className:v.footer},a.map((C,E)=>s.createElement("span",{key:E},"Rows:",C.length,", Columns:",C.fields.length," \xA0",s.createElement(o.J,{name:"check-circle"})))))}}const d=(0,m.HE)(r);d.displayName="TableInputCSV";const c=(0,f.B)(g=>({tableInputCsv:t.css`
      position: relative;
    `,textarea:t.css`
      height: 100%;
      width: 100%;
    `,footer:t.css`
      position: absolute;
      bottom: 15px;
      right: 15px;
      border: 1px solid #222;
      background: ${g.colors.success.main};
      padding: 1px ${g.spacing(.5)};
      font-size: 80%;
    `}))},24123:(G,O,e)=>{"use strict";e.d(O,{A:()=>f});var t=e(52423),n=e(68404),u=e(20112),s=e(82385),i=e(29516);const m=(0,s.B)(o=>({counter:t.css`
      label: counter;
      margin-left: ${o.spacing(1)};
      border-radius: ${o.spacing(3)};
      background-color: ${o.colors.action.hover};
      padding: ${o.spacing(.25,1)};
      color: ${o.colors.text.secondary};
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
    `})),f=({value:o})=>{const l=(0,i.wW)(m);return n.createElement("span",{className:l.counter},(0,u.SP)(o,0).text)}},17353:(G,O,e)=>{"use strict";e.d(O,{O:()=>l});var t=e(52423),n=e(68404),u=e(68183),s=e(29516),i=e(82385),m=e(19253),f=e(81697),o=e(24123);const l=n.forwardRef(({label:d,active:c,icon:g,onChangeTab:p,counter:y,suffix:h,className:a,href:v,...C},E)=>{const P=(0,s.l4)(),x=r(P),M=()=>n.createElement(n.Fragment,null,g&&n.createElement(f.J,{name:g}),d,typeof y=="number"&&n.createElement(o.A,{value:y}),h&&n.createElement(h,{className:x.suffix})),S=(0,t.cx)(x.link,c?x.activeStyle:x.notActive);return n.createElement("div",{className:x.item},n.createElement("a",{href:v||"#",className:S,...C,onClick:p,"aria-label":C["aria-label"]||u.wl.components.Tab.title(d),role:"tab","aria-selected":c,ref:E},M()))});l.displayName="Tab";const r=(0,i.B)(d=>({item:t.css`
      list-style: none;
      position: relative;
      display: flex;
    `,link:t.css`
      color: ${d.colors.text.secondary};
      padding: ${d.spacing(1.5,2,1)};
      display: block;
      height: 100%;
      svg {
        margin-right: ${d.spacing(1)};
      }

      &:focus-visible {
+        ${(0,m.getFocusStyles)(d)}
      }
    `,notActive:t.css`
      a:hover,
      &:hover,
      &:focus {
        color: ${d.colors.text.primary};

        &::before {
          display: block;
          content: ' ';
          position: absolute;
          left: 0;
          right: 0;
          height: 4px;
          border-radius: 2px;
          bottom: 0px;
          background: ${d.colors.action.hover};
        }
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${d.colors.text.primary};
      overflow: hidden;
      font-weight: ${d.typography.fontWeightMedium};

      a {
        color: ${d.colors.text.primary};
      }

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 4px;
        border-radius: 2px;
        bottom: 0px;
        background-image: ${d.colors.gradients.brandHorizontal} !important;
      }
    `,suffix:t.css`
      margin-left: ${d.spacing(1)};
    `}))},51142:(G,O,e)=>{"use strict";e.d(O,{I:()=>m});var t=e(52423),n=e(68404),u=e(82385),s=e(29516);const i=(0,u.B)(f=>({tabContent:t.css`
      background: ${f.colors.background.primary};
    `})),m=({children:f,className:o,...l})=>{const r=(0,s.l4)(),d=i(r);return n.createElement("div",{...l,className:(0,t.cx)(d.tabContent,o)},f)}},26625:(G,O,e)=>{"use strict";e.d(O,{J:()=>m});var t=e(52423),n=e(68404),u=e(82385),s=e(29516);const i=(0,u.B)((f,o=!1)=>({tabsWrapper:!o&&t.css`
        border-bottom: 1px solid ${f.colors.border.weak};
      `,tabs:t.css`
      position: relative;
      display: flex;
      height: ${f.components.menuTabs.height}px;
    `})),m=n.forwardRef(({children:f,className:o,hideBorder:l},r)=>{const d=(0,s.l4)(),c=i(d,l);return n.createElement("div",{className:(0,t.cx)(c.tabsWrapper,o),ref:r},n.createElement("div",{className:c.tabs,role:"tablist"},f))});m.displayName="TabsBar"},99615:(G,O,e)=>{"use strict";e.d(O,{L:()=>f});var t=e(52423),n=e(68404),u=e(68183),s=e(29516),i=e(81697),m=e(24123);const f=n.forwardRef(({label:l,active:r,icon:d,counter:c,className:g,suffix:p,onChangeTab:y,href:h,...a},v)=>{const C=(0,s.wW)(o),E=()=>n.createElement(n.Fragment,null,d&&n.createElement(i.J,{name:d}),l,typeof c=="number"&&n.createElement(m.A,{value:c}),p&&n.createElement(p,{className:C.suffix})),P=(0,t.cx)(C.link,r&&C.activeStyle);return n.createElement("a",{href:h,className:P,...a,onClick:y,"aria-label":a["aria-label"]||u.wl.components.Tab.title(l),role:"tab","aria-selected":r,ref:v},E())});f.displayName="Tab";const o=l=>({link:t.css`
      padding: 6px 12px;
      display: block;
      height: 100%;
      cursor: pointer;
      position: relative;

      color: ${l.colors.text.primary};

      svg {
        margin-right: ${l.spacing(1)};
      }

      &:hover,
      &:focus {
        text-decoration: underline;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${l.colors.text.maxContrast};
      font-weight: 500;
      overflow: hidden;

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: 2px;
        background-image: linear-gradient(0deg, #f05a28 30%, #fbca0a 99%);
      }
    `,suffix:t.css`
      margin-left: ${l.spacing(1)};
    `})},3349:(G,O,e)=>{"use strict";e.d(O,{V:()=>m});var t=e(52423),n=e(68404),u=e(29516),s=e(74099),i=e(81697);const m=(0,n.forwardRef)(({name:o,onClick:l,icon:r,className:d,colorIndex:c,...g},p)=>{const y=(0,u.l4)(),h=f(y,o,c),a=C=>{C.preventDefault(),C.stopPropagation(),l?.(o,C)},v=(0,t.cx)(h.wrapper,d,{[h.hover]:l!==void 0});return l?n.createElement("button",{...g,className:v,onClick:a,ref:p},r&&n.createElement(i.J,{name:r}),o):n.createElement("span",{...g,className:v,ref:p},r&&n.createElement(i.J,{name:r}),o)});m.displayName="Tag";const f=(o,l,r)=>{let d;return r===void 0?d=(0,s.Bx)(l):d=(0,s.vm)(r),{wrapper:t.css`
      appearance: none;
      border-style: none;
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
      line-height: ${o.typography.bodySmall.lineHeight};
      vertical-align: baseline;
      background-color: ${d.color};
      color: ${o.v1.palette.gray98};
      white-space: nowrap;
      text-shadow: none;
      padding: 3px 6px;
      border-radius: ${o.shape.borderRadius(2)};
    `,hover:t.css`
      &:hover {
        opacity: 0.85;
        cursor: pointer;
      }
    `}}},36012:(G,O,e)=>{"use strict";e.d(O,{P:()=>i});var t=e(52423),n=e(68404),u=e(29516),s=e(3349);const i=(0,n.memo)((0,n.forwardRef)(({displayMax:f,tags:o,icon:l,onClick:r,className:d,getAriaLabel:c},g)=>{const p=(0,u.l4)(),y=m(p,Boolean(f&&f>0)),h=o.length,a=f?o.slice(0,f):o;return n.createElement("ul",{className:(0,t.cx)(y.wrapper,d),"aria-label":"Tags",ref:g},a.map((v,C)=>n.createElement("li",{className:y.li,key:v},n.createElement(s.V,{name:v,icon:l,onClick:r,"aria-label":c?.(v,C),"data-tag-id":C}))),f&&f>0&&h-f>0&&n.createElement("span",{className:y.moreTagsLabel},"+ ",h-f))}));i.displayName="TagList";const m=(f,o)=>({wrapper:t.css`
      position: relative;
      align-items: ${o?"center":"unset"};
      display: flex;
      flex: 1 1 auto;
      flex-wrap: wrap;
      flex-shrink: ${o?0:1};
      justify-content: flex-end;
      gap: 6px;
    `,moreTagsLabel:t.css`
      color: ${f.colors.text.secondary};
      font-size: ${f.typography.size.sm};
    `,li:(0,t.css)({listStyle:"none"})})},64407:(G,O,e)=>{"use strict";e.d(O,{B:()=>r});var t=e(52423),n=e(68404),u=e(29516),s=e(90723),i=e(25474),m=e(74099),f=e(20017);const o=({name:c,disabled:g,onRemove:p})=>{const{color:y,borderColor:h}=(0,n.useMemo)(()=>(0,m.Bx)(c),[c]),a=(0,u.wW)(l);return n.createElement("li",{className:a.itemStyle,style:{backgroundColor:y,borderColor:h}},n.createElement("span",{className:a.nameStyle},c),n.createElement(f.h,{name:"times",size:"lg",disabled:g,ariaLabel:`Remove "${c}" tag`,onClick:()=>p(c),type:"button",className:a.buttonStyles}))},l=c=>{const g=c.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${g}px`,lineHeight:`${g-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:"3px",padding:`0 ${c.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:c.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},r=({placeholder:c="New tag (enter key to add)",tags:g=[],onChange:p,width:y,className:h,disabled:a,addOnBlur:v,invalid:C,id:E})=>{const[P,x]=(0,n.useState)(""),M=(0,u.wW)(d),S=(0,u.l4)(),D=(0,n.useCallback)(A=>{x(A.target.value)},[]),T=A=>{p(g.filter(N=>N!==A))},R=A=>{A?.preventDefault(),g.includes(P)||p(g.concat(P)),x("")},L=()=>{v&&P&&R()},w=A=>{A.key==="Enter"&&P!==""&&R(A)};return n.createElement("div",{className:(0,t.cx)(M.wrapper,h,y?(0,t.css)({width:S.spacing(y)}):"")},n.createElement(i.I,{id:E,disabled:a,placeholder:c,onChange:D,value:P,onKeyDown:w,onBlur:L,invalid:C,suffix:n.createElement(s.zx,{fill:"text",className:M.addButtonStyle,onClick:R,size:"md",disabled:P.length<=0},"Add")}),g?.length>0&&n.createElement("ul",{className:M.tags},g.map(A=>n.createElement(o,{key:A,name:A,onRemove:T,disabled:a}))))},d=c=>({wrapper:t.css`
    min-height: ${c.spacing(4)};
    display: flex;
    flex-direction: column;
    gap: ${c.spacing(1)};
    flex-wrap: wrap;
  `,tags:t.css`
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
    gap: ${c.spacing(.5)};
  `,addButtonStyle:t.css`
    margin: 0 -${c.spacing(1)};
  `})},79090:(G,O,e)=>{"use strict";e.d(O,{K:()=>m});var t=e(52423),n=e(68404),u=e(29516),s=e(82385),i=e(51821);const m=n.forwardRef(({invalid:o,className:l,...r},d)=>{const c=(0,u.l4)(),g=f(c,o);return n.createElement("textarea",{...r,className:(0,t.cx)(g.textarea,l),ref:d})}),f=(0,s.B)((o,l=!1)=>({textarea:(0,t.cx)((0,i.RK)(o),(0,i.GL)(o),t.css`
        border-radius: ${o.shape.borderRadius()};
        padding: ${o.spacing.gridSize/4}px ${o.spacing.gridSize}px;
        width: 100%;
        border-color: ${l?o.colors.error.border:o.components.input.borderColor};
      `)}));m.displayName="TextArea"},85969:(G,O,e)=>{"use strict";e.d(O,{p:()=>w});var t=e(68404),n=e(29516),u=e(67043),s=e(71235),i=e(46901),m=e(82897),f=e(75974),o=e(14582),l=e(36512),r=e(425),d=e(66926),c=e(20112),g=e(89890),p=e(29431),y=e(55294),h=e(40538),a=e(90941),v=e(17920),C=e(72296),E=e(31451);const P=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),x=Array(53);for(let A=0;A<x.length;A++)x[A]=2**A;const M=(A,N=1)=>A==null?"-":A.toFixed(N),S={drawStyle:h.l8.Line,showPoints:h.Jp.Auto,axisPlacement:h.LB.Auto},D=({frame:A,theme:N,timeZones:W,getTimeRange:I,eventBus:F,sync:V,allFrames:b,renderers:X,tweakScale:k=Y=>Y,tweakAxis:H=Y=>Y})=>{const Y=new v.U(W[0]);let ee;Y.setPrepData(ne=>(ee=ne[0],(0,E.Bj)(ne[0],Y.getStackingGroups())));const ue=A.fields[0];if(!ue)return Y;let q=0;const ge="x";let De="_x",fe="";const me=ue.config.custom?.axisPlacement!==h.LB.Hidden?h.LB.Bottom:h.LB.Hidden,ce=ue.config.custom?.axisPlacement!==h.LB.Hidden;if(ue.type===o.fS.time){De="time",Y.addScale({scaleKey:ge,orientation:h.wN.Horizontal,direction:h.bQ.Right,isTime:!0,range:()=>{const j=I();return[j.from.valueOf(),j.to.valueOf()]}});const ne=W.length>1?(j,be)=>be.map((Le,Qe)=>Qe<2?null:Le):void 0;for(let j=0;j<W.length;j++){const be=W[j];Y.addAxis({scaleKey:ge,isTime:!0,placement:me,show:ce,label:ue.config.custom?.axisLabel,timeZone:be,theme:N,grid:{show:j===0&&ue.config.custom?.axisGridShow},filter:ne})}W.length>1&&Y.addHook("drawAxes",j=>{j.ctx.save(),j.ctx.fillStyle=N.colors.text.primary,j.ctx.textAlign="left",j.ctx.textBaseline="bottom";let be=0;j.axes.forEach(Le=>{if(Le.side===2){let Qe=Le._pos+Le._size;j.ctx.fillText(W[be],j.bbox.left,Qe*f.Z.pxRatio),be++}}),j.ctx.restore()})}else ue.config.unit&&(De=ue.config.unit),Y.addScale({scaleKey:ge,orientation:h.wN.Horizontal,direction:h.bQ.Right}),Y.addAxis({scaleKey:ge,placement:me,show:ce,label:ue.config.custom?.axisLabel,theme:N,grid:{show:ue.config.custom?.axisGridShow}});let ie=X?.flatMap(ne=>Object.values(ne.fieldMap).filter(j=>ne.indicesOnly.indexOf(j)===-1))??[],re;for(let ne=1;ne<A.fields.length;ne++){const j=A.fields[ne],be={...j.config,custom:{...S,...j.config.custom}},Le=be.custom;if(j===ue||j.type!==o.fS.number)continue;j.state.seriesIndex=q++;let Qe=j.display??M;j.config.custom?.stacking?.mode===h.o0.Percent&&(Qe=(0,l.U)({field:{...j,config:{...j.config,unit:"percentunit"}},theme:N}));const Ye=(0,a.z)(be),de=(0,r.fD)(j),Ve=(0,r.YO)(j,N).color;if(Y.addScale(k({scaleKey:Ye,orientation:h.wN.Vertical,direction:h.bQ.Up,distribution:Le.scaleDistribution?.type,log:Le.scaleDistribution?.log,linearThreshold:Le.scaleDistribution?.linearThreshold,min:j.config.min,max:j.config.max,softMin:Le.axisSoftMin,softMax:Le.axisSoftMax,centeredZero:Le.axisCenteredZero,range:Le.stacking?.mode===h.o0.Percent?(Ze,lt,nt)=>(lt=lt<0?-1:0,nt=nt>0?1:0,[lt,nt]):void 0,decimals:j.config.decimals},j)),fe||(fe=Ye),Le.axisPlacement!==h.LB.Hidden){let Ze;Le.axisColorMode===h.yK.Series&&(de.isByValue&&j.config.custom?.gradientMode===h.FI.Scheme&&de.id===d.S.Thresholds?Ze=(0,C.P2)(1,N,de,j.config.thresholds):Ze=Ve);let lt={};Ze&&(lt={border:{show:!0,width:1,stroke:Ze},ticks:{stroke:Ze},color:Le.axisColorMode===h.yK.Series?Ze:void 0});let nt;P.has(be.unit)&&(nt=x),Y.addAxis(H({scaleKey:Ye,label:Le.axisLabel,size:Le.axisWidth,placement:Le.axisPlacement??h.LB.Auto,formatValue:(_e,ut)=>(0,c.zc)(Qe(_e,ut)),theme:N,grid:{show:Le.axisGridShow},decimals:j.config.decimals,distr:Le.scaleDistribution?.type,incrs:nt,...lt},j))}const $e=Le.drawStyle===h.l8.Points?h.Jp.Always:Le.showPoints;let We=()=>null;Le.spanNulls!==!0&&(We=(Ze,lt,nt,_e)=>{let ut=[],rt=Ze.series[lt];if(!nt&&_e&&_e.length){const[je,dt]=rt.idxs,oe=Ze.data[0],Se=Ze.data[lt],Re=Math.round(Ze.valToPos(oe[je],"x",!0)),ze=Math.round(Ze.valToPos(oe[dt],"x",!0));_e[0][0]===Re&&ut.push(je);for(let ve=0;ve<_e.length;ve++){let Te=_e[ve],he=_e[ve+1];if(he&&Te[1]===he[0]){let pe=Ze.posToIdx(Te[1],!0);if(Se[pe]==null)for(let ye=1;ye<100;ye++){if(Se[pe+ye]!=null){pe+=ye;break}if(Se[pe-ye]!=null){pe-=ye;break}}ut.push(pe)}}_e[_e.length-1][1]===ze&&ut.push(dt)}return ut.length?ut:null});let{fillOpacity:Ke}=Le,qe=null,Xe=null;if(j.state?.origin){re||(re=T(A,b));const Ze=b[j.state.origin.frameIndex],lt=Ze?.fields[j.state.origin.fieldIndex],nt=(0,g.C)(lt??j,Ze,b);if(ie.indexOf(nt)>=0)qe=()=>null,Xe=()=>{};else if(Le.transform===h.pR.Constant){const _e=f.Z.paths.linear();qe=(ut,rt)=>{const je=ut._data,dt=I();let oe=[dt.from.valueOf(),dt.to.valueOf()],Se=je[rt].find(ve=>ve!=null),Re=[Se,Se],ze=je.slice();return ze[0]=oe,ze[rt]=Re,_e({...ut,_data:ze},rt,0,1)}}if(Le.fillBelowTo){const _e=A.fields.find(dt=>Le.fillBelowTo===dt.name||Le.fillBelowTo===dt.config?.displayNameFromDS||Le.fillBelowTo===(0,g.C)(dt,A,b)),ut=_e?(0,g.C)(_e,A,b):Le.fillBelowTo,rt=re.get(nt),je=re.get(ut);(0,m.isNumber)(je)&&(0,m.isNumber)(rt)?(Y.addBand({series:[rt,je],fill:void 0}),Ke||(Ke=35)):Ke=0}}let at;de.id===d.S.Thresholds&&(at=Ze=>(0,r.YO)(ee.fields[Ze],N).color),Y.addSeries({pathBuilder:qe,pointsBuilder:Xe,scaleKey:Ye,showPoints:$e,pointsFilter:We,colorMode:de,fillOpacity:Ke,theme:N,dynamicSeriesColor:at,drawStyle:Le.drawStyle,lineColor:Le.lineColor??Ve,lineWidth:Le.lineWidth,lineInterpolation:Le.lineInterpolation,lineStyle:Le.lineStyle,barAlignment:Le.barAlignment,barWidthFactor:Le.barWidthFactor,barMaxWidth:Le.barMaxWidth,pointSize:Le.pointSize,spanNulls:Le.spanNulls||!1,show:!Le.hideFrom?.viz,gradientMode:Le.gradientMode,thresholds:be.thresholds,hardMin:j.config.min,hardMax:j.config.max,softMin:Le.axisSoftMin,softMax:Le.axisSoftMax,dataFrameFieldIndex:j.state?.origin}),Le.thresholdsStyle&&be.thresholds&&(Le.thresholdsStyle.mode??h.i3.Off)!==h.i3.Off&&Y.addThresholds({config:Le.thresholdsStyle,thresholds:be.thresholds,scaleKey:Ye,theme:N,hardMin:j.config.min,hardMax:j.config.max,softMin:Le.axisSoftMin,softMax:Le.axisSoftMax})}let Ee=(0,E.i7)(A);Y.setStackingGroups(Ee),X?.forEach(ne=>{re||(re=T(A,b));let j={};for(let be in ne.fieldMap){let Le=ne.fieldMap[be];j[be]=re.get(Le)}ne.init(Y,j)}),Y.scaleKeys=[ge,fe];const J=15;let te={dataIdx:(ne,j,be,Le)=>{let Qe=ne.data[j];if(Qe[be]==null){let Ye=null,de=null,Be;for(Be=be;Ye==null&&Be-- >0;)Qe[Be]!=null&&(Ye=Be);for(Be=be;de==null&&Be++<Qe.length;)Qe[Be]!=null&&(de=Be);let Ve=ne.data[0],$e=ne.valToPos(Le,"x"),We=de==null?1/0:ne.valToPos(Ve[de],"x"),Ke=Ye==null?-1/0:ne.valToPos(Ve[Ye],"x"),qe=$e-Ke,Xe=We-$e;qe<=Xe?qe<=J&&(be=Ye):Xe<=J&&(be=de)}return be}};if(V&&V()!==p.m.Off){const ne={point:{[ge]:null,[fe]:null},data:A},j=new y.es(ne);te.sync={key:"__global_",filters:{pub:(be,Le,Qe,Ye,de,Be,Ve)=>V&&V()===p.m.Off?!1:(ne.rowIndex=Ve,Qe<0&&Ye<0?(ne.point[De]=null,ne.point[fe]=null,F.publish(new y.xH)):(ne.point[De]=Le.posToVal(Qe,ge),ne.point[fe]=Le.posToVal(Ye,fe),ne.point.panelRelY=Ye>0?Ye/Be:1,F.publish(j),j.payload.down=void 0),!0)},scales:[ge,fe]}}return Y.setSync(),Y.setCursor(te),Y};function T(A,N){const W=new Map;return A.fields.forEach((I,F)=>{const V=I.state?.origin;if(V){const b=N[V.frameIndex]?.fields[V.fieldIndex];b&&W.set((0,g.C)(b,N[V.frameIndex],N),F)}}),W}const R=["legend","options","theme"];class L extends t.Component{constructor(){super(...arguments),this.panelContext={},this.prepConfig=(N,W,I)=>{const{eventBus:F,sync:V}=this.context,{theme:b,timeZone:X,renderers:k,tweakAxis:H,tweakScale:Y}=this.props;return D({frame:N,theme:b,timeZones:Array.isArray(X)?X:[X],getTimeRange:I,eventBus:F,sync:V,allFrames:W,renderers:k,tweakScale:Y,tweakAxis:H})},this.renderLegend=N=>{const{legend:W,frames:I}=this.props;return!N||W&&!W.showLegend?null:t.createElement(i.l,{data:I,config:N,...W})}}render(){return t.createElement(u.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:R,renderLegend:this.renderLegend})}}L.contextType=s.bb;const w=(0,n.HE)(L);w.displayName="TimeSeries"},26408:(G,O,e)=>{"use strict";e.d(O,{h:()=>r});var t=e(52423),n=e(68404),u=e(43565),s=e(68183),i=e(29516),m=e(19253),f=e(90723),o=e(81697),l=e(48756);const r=(0,n.forwardRef)(({tooltip:p,icon:y,className:h,children:a,imgSrc:v,imgAlt:C,fullWidth:E,isOpen:P,narrow:x,variant:M="default",iconOnly:S,"aria-label":D,isHighlighted:T,...R},L)=>{const w=(0,i.wW)(g),A=(0,t.cx)({[w.button]:!0,[w.buttonFullWidth]:E,[w.narrow]:x},w[M],h),N=(0,t.cx)({[w.content]:!0,[w.contentWithIcon]:!!y,[w.contentWithRightIcon]:P!==void 0}),W=n.createElement("button",{ref:L,className:A,"aria-label":d(D,p),"aria-expanded":P,...R},c(y),v&&n.createElement("img",{className:w.img,src:v,alt:C??""}),a&&!S&&n.createElement("div",{className:N},a),P===!1&&n.createElement(o.J,{name:"angle-down"}),P===!0&&n.createElement(o.J,{name:"angle-up"}),T&&n.createElement("div",{className:w.highlight}));return p?n.createElement(l.u,{content:p,placement:"bottom"},W):W});r.displayName="ToolbarButton";function d(p,y){return p||(y?s.wl.components.PageToolbar.item(y):void 0)}function c(p){return p?(0,u.Mo)(p)?n.createElement(o.J,{name:p,size:"lg"}):p:null}const g=p=>{const y=(0,f.c9)(p,"primary","solid"),h=(0,f.c9)(p,"destructive","solid"),a=t.css`
    color: ${p.colors.text.secondary};
    background-color: ${p.colors.background.primary};

    &:hover {
      color: ${p.colors.text.primary};
      background: ${p.colors.background.secondary};
    }
  `,v=t.css`
    color: ${p.colors.text.secondary};
    background-color: transparent;
    border-color: transparent;

    &:hover {
      color: ${p.colors.text.primary};
      background: ${p.colors.background.secondary};
    }
  `;return{button:t.css`
      label: toolbar-button;
      position: relative;
      display: flex;
      align-items: center;
      height: ${p.spacing(p.components.height.md)};
      padding: ${p.spacing(0,1)};
      border-radius: ${p.shape.borderRadius()};
      line-height: ${p.components.height.md*p.spacing.gridSize-2}px;
      font-weight: ${p.typography.fontWeightMedium};
      border: 1px solid ${p.colors.border.weak};
      white-space: nowrap;
      transition: ${p.transitions.create(["background","box-shadow","border-color","color"],{duration:p.transitions.duration.short})};

      &:focus,
      &:focus-visible {
        ${(0,m.getFocusStyles)(p)}
        z-index: 1;
      }

      &:focus:not(:focus-visible) {
        ${(0,m.getMouseFocusStyles)(p)}
      }

      &:hover {
        box-shadow: ${p.shadows.z1};
      }

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        opacity: ${p.colors.action.disabledOpacity};
        background: ${p.colors.action.disabledBackground};
        box-shadow: none;

        &:hover {
          color: ${p.colors.text.disabled};
          background: ${p.colors.action.disabledBackground};
          box-shadow: none;
        }
      }
    `,default:p.flags.topnav?v:a,canvas:a,active:t.css`
      color: ${p.v1.palette.orangeDark};
      border-color: ${p.v1.palette.orangeDark};
      background-color: transparent;

      &:hover {
        color: ${p.colors.text.primary};
        background: ${p.colors.emphasize(p.colors.background.canvas,.03)};
      }
    `,primary:(0,t.css)(y),destructive:(0,t.css)(h),narrow:t.css`
      padding: 0 ${p.spacing(.5)};
    `,img:t.css`
      width: 16px;
      height: 16px;
      margin-right: ${p.spacing(1)};
    `,buttonFullWidth:t.css`
      flex-grow: 1;
    `,content:t.css`
      flex-grow: 1;
    `,contentWithIcon:t.css`
      display: none;
      padding-left: ${p.spacing(1)};

      @media ${m.mediaUp(p.v1.breakpoints.md)} {
        display: block;
      }
    `,contentWithRightIcon:t.css`
      padding-right: ${p.spacing(.5)};
    `,highlight:t.css`
      background-color: ${p.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      position: absolute;
      top: -3px;
      right: -3px;
      z-index: 1;
    `}}},93880:(G,O,e)=>{"use strict";e.d(O,{R:()=>o});var t=e(52423),n=e(99510),u=e(81699),s=e(6665),i=e(68404),m=e(29516),f=e(26408);const o=(0,i.forwardRef)(({alignment:r="left",className:d,children:c,...g},p)=>{const y=i.Children.toArray(c).filter(L=>L!==null),[h,a]=(0,i.useState)(Array(y.length).fill(!0)),v=(0,i.useRef)(null),[C,E]=(0,i.useState)(!1),P=(0,i.useRef)(null),x=(0,i.createRef)(),{overlayProps:M}=(0,s.Ir)({onClose:()=>E(!1),isDismissable:!0,isOpen:C,shouldCloseOnInteractOutside:L=>!P.current?.contains(L)},x),{dialogProps:S}=(0,n.R)({},x),D=(0,m.l4)(),T=r==="left"?h.indexOf(!1)-1:h.length,R=l(D,T,r);return(0,i.useLayoutEffect)(()=>{const L=new IntersectionObserver(w=>{w.forEach(A=>{if(A.target instanceof HTMLElement&&A.target.parentNode){const N=Array.prototype.indexOf.call(A.target.parentNode.children,A.target);a(W=>{const I=[...W];return I[N]=A.isIntersecting,I})}})},{threshold:1,root:v.current});return v.current&&Array.from(v.current.children).forEach(w=>{w instanceof HTMLElement&&w!==P.current&&L.observe(w)}),()=>L.disconnect()},[c]),i.createElement("div",{ref:v,className:(0,t.cx)(R.container,d),...g},y.map((L,w)=>i.createElement("div",{key:w,style:{order:w,visibility:h[w]?"visible":"hidden"},className:R.childWrapper},L)),h.includes(!1)&&i.createElement("div",{ref:P,className:R.overflowButton},i.createElement(f.h,{variant:C?"active":"default",tooltip:"Show more items",onClick:()=>E(!C),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),C&&i.createElement(u.MT,{contain:!0,autoFocus:!0},i.createElement("div",{className:R.overflowItems,ref:x,...M,...S},y.map((L,w)=>!h[w]&&L)))))});o.displayName="ToolbarButtonRow";const l=(r,d,c)=>({overflowButton:t.css`
    order: ${d};
  `,overflowItems:t.css`
    align-items: center;
    background-color: ${r.colors.background.primary};
    border-radius: ${r.shape.borderRadius()};
    box-shadow: ${r.shadows.z3};
    display: flex;
    flex-wrap: wrap;
    gap: ${r.spacing(1)};
    margin-top: ${r.spacing(1)};
    max-width: 80vw;
    padding: ${r.spacing(.5,1)};
    position: absolute;
    right: 0;
    top: 100%;
    width: max-content;
    z-index: ${r.zIndex.sidemenu};
  `,container:t.css`
    align-items: center;
    display: flex;
    gap: ${r.spacing(1)};
    justify-content: ${c==="left"?"flex-start":"flex-end"};
    min-width: 0;
    position: relative;
  `,childWrapper:t.css`
    align-items: center;
    display: flex;
    gap: ${r.spacing(1)};
  `})},30995:(G,O,e)=>{"use strict";e.d(O,{J:()=>o});var t=e(68404),n=e(93701),u=e(73934),s=e(41141),i=e(97635);const m={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},f={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class o extends t.PureComponent{render(){const{content:r,show:d,placement:c,onMouseEnter:g,onMouseLeave:p,className:y,wrapperClassName:h,renderArrow:a,referenceElement:v,onKeyDown:C}=this.props;return t.createElement(n.dK,null,t.createElement(s.ZP,{in:d,timeout:100,mountOnEnter:!0,unmountOnExit:!0},E=>t.createElement(i.h_,null,t.createElement(u.r,{placement:c,referenceElement:v,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:P,style:x,placement:M,arrowProps:S,update:D})=>t.createElement("div",{onMouseEnter:g,onMouseLeave:p,onKeyDown:C,ref:P,style:{...x,...m,...f[E]},"data-placement":M,className:`${h}`},t.createElement("div",{className:y},typeof r=="string"&&r,t.isValidElement(r)&&t.cloneElement(r),typeof r=="function"&&r({updatePopperPosition:D}),a&&a({arrowProps:S,placement:M})))))))}}},26345:(G,O,e)=>{"use strict";e.d(O,{D:()=>n});var t=e(68404);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:s,content:i,placement:m="auto"}=this.props,{show:f}=this.state;return s(this.showPopper,this.hidePopper,{show:f,placement:m,content:i})}}},48756:(G,O,e)=>{"use strict";e.d(O,{u:()=>f});var t=e(52423),n=e(68404),u=e(85361),s=e(64724),i=e(29516),m=e(97635);const f=n.memo(({children:l,theme:r,interactive:d,show:c,placement:g,content:p})=>{const[y,h]=n.useState(c);(0,n.useEffect)(()=>{if(y!==!1){const D=T=>{T.key==="Escape"&&h(!1)};return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}}else return},[y]);const{getArrowProps:a,getTooltipProps:v,setTooltipRef:C,setTriggerRef:E,visible:P,update:x}=(0,u.O)({visible:y,placement:g,interactive:d,delayHide:d?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"],onVisibleChange:h}),S=(0,i.wW)(o)[r??"info"];return n.createElement(n.Fragment,null,n.cloneElement(l,{ref:E,tabIndex:0}),P&&n.createElement(m.h_,null,n.createElement("div",{ref:C,...v({className:S})},n.createElement("div",{...a({className:"tooltip-arrow"})}),typeof p=="string"&&p,n.isValidElement(p)&&n.cloneElement(p),typeof p=="function"&&x&&p({updatePopperPosition:x}))))});f.displayName="Tooltip";function o(l){function r(g,p,y){return t.css`
      background-color: ${g};
      border-radius: 3px;
      border: 1px solid ${p};
      box-shadow: ${l.shadows.z2};
      color: ${y};
      font-size: ${l.typography.bodySmall.fontSize};
      padding: ${l.spacing(.5,1)};
      transition: opacity 0.3s;
      z-index: ${l.zIndex.tooltip};
      max-width: 400px;
      overflow-wrap: break-word;

      &[data-popper-interactive='false'] {
        pointer-events: none;
      }

      .tooltip-arrow {
        height: 1rem;
        position: absolute;
        width: 1rem;
        pointer-events: none;
      }

      .tooltip-arrow::before {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        width: 0;
      }

      .tooltip-arrow::after {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        position: absolute;
        width: 0;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow {
        left: 0;
        margin-top: -10px;
        top: 0;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow::before {
        border-color: transparent transparent ${p} transparent;
        border-width: 0 8px 7px 8px;
        position: absolute;
        top: -1px;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow::after {
        border-color: transparent transparent ${g} transparent;
        border-width: 0 8px 7px 8px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow {
        bottom: 0;
        left: 0;
        margin-bottom: -11px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow::before {
        border-color: ${p} transparent transparent transparent;
        border-width: 7px 8px 0 7px;
        position: absolute;
        top: 1px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow::after {
        border-color: ${g} transparent transparent transparent;
        border-width: 7px 8px 0 7px;
      }

      &[data-popper-placement*='right'] .tooltip-arrow {
        left: 0;
        margin-left: -11px;
      }

      &[data-popper-placement*='right'] .tooltip-arrow::before {
        border-color: transparent ${p} transparent transparent;
        border-width: 7px 6px 7px 0;
      }

      &[data-popper-placement*='right'] .tooltip-arrow::after {
        border-color: transparent ${g} transparent transparent;
        border-width: 6px 7px 7px 0;
        left: 2px;
        top: 1px;
      }

      &[data-popper-placement*='left'] .tooltip-arrow {
        margin-right: -10px;
        right: 0;
      }

      &[data-popper-placement*='left'] .tooltip-arrow::before {
        border-color: transparent transparent transparent ${p};
        border-width: 7px 0px 6px 7px;
      }

      &[data-popper-placement*='left'] .tooltip-arrow::after {
        border-color: transparent transparent transparent ${g};
        border-width: 6px 0 5px 5px;
        left: 1px;
        top: 1px;
      }

      code {
        border: none;
        display: inline;
        background: ${s.darken(g,.1)};
        color: ${y};
      }

      pre {
        background: ${s.darken(g,.1)};
        color: ${y};
      }

      a {
        color: ${y};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `}const d=r(l.components.tooltip.background,l.components.tooltip.background,l.components.tooltip.text),c=r(l.colors.error.main,l.colors.error.main,l.colors.error.contrastText);return{info:d,["info-alt"]:d,error:c}}},11265:(G,O,e)=>{"use strict";e.d(O,{H:()=>u});var t=e(68404);function n(s,i){const m=[];return s.forEach(f=>{m.push(f.start,f.end+1)}),m[0]!==0&&m.unshift(0),m[m.length-1]!==i&&m.push(i),m}const u=s=>{let{highlightParts:i,text:m,highlightClassName:f}=s;if(!i?.length)return null;let o=[],l=n(i,m.length),r=i[0].start===0;for(let d=1;d<l.length;d++){let c=l[d-1],g=l[d];o.push((0,t.createElement)(r?"mark":"span",{key:d-1,className:r?f:void 0},m.substring(c,g))),r=!r}return t.createElement("div",null,o)}},52373:(G,O,e)=>{"use strict";e.d(O,{n:()=>i});var t=e(68404),n=e(20112),u=e(76100);function s(m){return`Custom unit: ${m}`}class i extends t.PureComponent{constructor(){super(...arguments),this.onChange=f=>{this.props.onChange(f.value)}}render(){const{value:f,width:o}=this.props;let l;const d=(0,n.QW)().map(c=>{const g=c.submenu.map(p=>{const y={label:p.text,value:p.value};return p.value===f&&(l=y),y});return{label:c.text,value:c.text,items:g}});return f&&!l&&(l={value:f,label:f}),t.createElement(u.v,{width:o,initialValue:l&&l.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:s,options:d,placeholder:"Choose",onSelect:this.props.onChange})}}},4955:(G,O,e)=>{"use strict";e.d(O,{b:()=>m});var t=e(68404),n=e(68183),u=e(29516),s=e(90723),i=e(46739);function m({"aria-label":f,label:o,icon:l,options:r,onChange:d,variant:c,minWidth:g=16,size:p="sm",isFullWidth:y=!0,menuPlacement:h,fill:a,buttonCss:v}){const[C,E]=(0,t.useState)(!1),P=(0,u.l4)();return t.createElement(t.Fragment,null,!C&&t.createElement(s.zx,{size:p||"sm",className:v,icon:l||"plus",onClick:()=>E(!0),variant:c,fill:a,fullWidth:y,"aria-label":n.wl.components.ValuePicker.button(f??o)},o),C&&t.createElement("span",{style:{minWidth:P.spacing(g),flexGrow:y?1:void 0}},t.createElement(i.Ph,{placeholder:o,options:r,"aria-label":n.wl.components.ValuePicker.select(f??o),isOpen:!0,onCloseMenu:()=>E(!1),autoFocus:!0,onChange:x=>{E(!1),d(x)},menuPlacement:h})))}},85623:(G,O,e)=>{"use strict";e.d(O,{AY:()=>f});var t=e(52423),n=e(68404),u=e(11041),s=e(29516),i=e(19253),m=e(49938);const f=({width:r,height:d,legend:c,children:g})=>{const p=(0,s.wW)(o),y={display:"flex",width:`${r}px`,height:`${d}px`},[h,a]=(0,u.Z)();if(!c)return n.createElement(n.Fragment,null,n.createElement("div",{tabIndex:0,style:y,className:p.viz},g(r,d)));const{placement:v,maxHeight:C="35%",maxWidth:E="60%"}=c.props;let P=null;const x={};switch(v){case"bottom":y.flexDirection="column",x.maxHeight=C,a&&(P={width:r,height:d-a.height});break;case"right":y.flexDirection="row",x.maxWidth=E,a&&(P={width:r-a.width,height:d}),c.props.width&&(x.width=c.props.width,P={width:r-c.props.width,height:d});break}return P?.width===0&&(P.width=r),P?.height===0&&(P.height=d),n.createElement("div",{style:y},n.createElement("div",{tabIndex:0,className:p.viz},P&&g(P.width,P.height)),n.createElement("div",{style:x,ref:h},n.createElement(m.$,{hideHorizontalTrack:!0},c)))},o=r=>({viz:(0,t.css)({flexGrow:2,borderRadius:r.shape.borderRadius(1),"&:focus-visible":(0,i.getFocusStyles)(r)})}),l=({children:r})=>n.createElement(n.Fragment,null,r);f.Legend=l},86888:(G,O,e)=>{"use strict";e.d(O,{F:()=>s});var t=e(68404),n=e(425),u=e(29516);const s=t.memo(t.forwardRef(({color:i,className:m,gradient:f,...o},l)=>{const r=(0,u.l4)();let d;if(f){const g=n.WO.get(f).getColors?.(r);g?.length?d=`linear-gradient(90deg, ${g.join(", ")})`:d=r.visualization.getColorByName("")}else d=i;const c={background:d,width:"14px",height:"4px",borderRadius:"1px",display:"inline-block",marginRight:"8px"};return t.createElement("div",{"data-testid":"series-icon",ref:l,className:m,style:c,...o})}));s.displayName="SeriesIcon"},21987:(G,O,e)=>{"use strict";e.d(O,{l:()=>S});var t=e(68404),n=e(55294),u=e(40538),s=e(71235),i=e(85675),m=e(52423),f=e(29516),o=e(62444),l=e(15031),r=e(11507);const d=({items:D,itemRenderer:T,onLabelMouseOver:R,onLabelMouseOut:L,onLabelClick:w,placement:A,className:N,readonly:W})=>{const I=(0,f.wW)(c);T||(T=V=>t.createElement(r.e,{item:V,onLabelClick:w,onLabelMouseOver:R,onLabelMouseOut:L,readonly:W}));const F=V=>`${V.getItemKey?V.getItemKey():V.label}`;switch(A){case"right":{const V=(b,X)=>t.createElement("span",{className:I.itemRight},T(b,X));return t.createElement("div",{className:(0,m.cx)(I.rightWrapper,N)},t.createElement(l.a,{items:D,renderItem:V,getItemKey:F}))}case"bottom":default:{const V=(b,X)=>t.createElement("span",{className:I.itemBottom},T(b,X));return t.createElement("div",{className:(0,m.cx)(I.bottomWrapper,N)},t.createElement("div",{className:I.section},t.createElement(o.Y,{items:D.filter(b=>b.yAxis===1),renderItem:V,getItemKey:F})),t.createElement("div",{className:(0,m.cx)(I.section,I.sectionRight)},t.createElement(o.Y,{items:D.filter(b=>b.yAxis!==1),renderItem:V,getItemKey:F})))}}};d.displayName="VizLegendList";const c=D=>{const T=m.css`
    padding-right: 10px;
    display: flex;
    font-size: ${D.typography.bodySmall.fontSize};
    white-space: nowrap;
  `;return{itemBottom:T,itemRight:(0,m.cx)(T,m.css`
        margin-bottom: ${D.spacing(.5)};
      `),rightWrapper:m.css`
      padding-left: ${D.spacing(.5)};
    `,bottomWrapper:m.css`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      width: 100%;
      padding-left: ${D.spacing(.5)};
    `,section:m.css`
      display: flex;
    `,sectionRight:m.css`
      justify-content: flex-end;
      flex-grow: 1;
    `}};var g=e(82897),p=e(81697),y=e(20112),h=e(19253),a=e(58690);const v=({item:D,onLabelClick:T,onLabelMouseOver:R,onLabelMouseOut:L,className:w,readonly:A})=>{const N=(0,f.wW)(C),W=(0,t.useCallback)(V=>{R&&R(D,V)},[D,R]),I=(0,t.useCallback)(V=>{L&&L(D,V)},[D,L]),F=(0,t.useCallback)(V=>{T&&T(D,V)},[D,T]);return t.createElement("tr",{className:(0,m.cx)(N.row,w)},t.createElement("td",null,t.createElement("span",{className:N.itemWrapper},t.createElement(a.i,{color:D.color,seriesName:D.label,readonly:A}),t.createElement("button",{disabled:A,type:"button",onBlur:I,onFocus:W,onMouseOver:W,onMouseOut:I,onClick:A?void 0:F,className:(0,m.cx)(N.label,D.disabled&&N.labelDisabled)},D.label," ",D.yAxis===2&&t.createElement("span",{className:N.yAxisLabel},"(right y-axis)")))),D.getDisplayValues&&D.getDisplayValues().map((V,b)=>t.createElement("td",{className:N.value,key:`${V.title}-${b}`},(0,y.zc)(V))))};v.displayName="LegendTableItem";const C=D=>{const T=h.hoverColor(D.colors.background.primary,D);return{row:m.css`
      label: LegendRow;
      font-size: ${D.v1.typography.size.sm};
      border-bottom: 1px solid ${D.colors.border.weak};
      td {
        padding: ${D.spacing(.25,1)};
        white-space: nowrap;
      }

      &:hover {
        background: ${T};
      }
    `,label:m.css`
      label: LegendLabel;
      white-space: nowrap;
      background: none;
      border: none;
      font-size: inherit;
      padding: 0;
    `,labelDisabled:m.css`
      label: LegendLabelDisabled;
      color: ${D.colors.text.disabled};
    `,itemWrapper:m.css`
      display: flex;
      white-space: nowrap;
      align-items: center;
    `,value:m.css`
      text-align: right;
    `,yAxisLabel:m.css`
      color: ${D.colors.text.secondary};
    `}},E=({items:D,sortBy:T,sortDesc:R,itemRenderer:L,className:w,onToggleSort:A,onLabelClick:N,onLabelMouseOver:W,onLabelMouseOut:I,readonly:F})=>{const V=(0,f.wW)(P),b={};for(const k of D)if(k.getDisplayValues)for(const H of k.getDisplayValues())b[H.title??"?"]=H;const X=T?(0,g.orderBy)(D,k=>{if(k.getDisplayValues){const H=k.getDisplayValues().filter(Y=>Y.title===T)[0];return H&&H.numeric}},R?"desc":"asc"):D;return L||(L=(k,H)=>t.createElement(v,{key:`${k.label}-${H}`,item:k,onLabelClick:N,onLabelMouseOver:W,onLabelMouseOut:I,readonly:F})),t.createElement("table",{className:(0,m.cx)(V.table,w)},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null),Object.keys(b).map(k=>{const H=b[k];return t.createElement("th",{title:H.description,key:k,className:(0,m.cx)(V.header,A&&V.headerSortable,{[V.withIcon]:T===k}),onClick:()=>{A&&A(k)}},k,T===k&&t.createElement(p.J,{size:"xs",name:R?"angle-down":"angle-up"}))}))),t.createElement("tbody",null,X.map(L)))},P=D=>({table:m.css`
    width: 100%;
    th:first-child {
      width: 100%;
      border-bottom: 1px solid ${D.colors.border.weak};
    }
  `,header:m.css`
    color: ${D.colors.primary.text};
    font-weight: ${D.typography.fontWeightMedium};
    border-bottom: 1px solid ${D.colors.border.weak};
    padding: ${D.spacing(.25,1,.25,1)};
    font-size: ${D.typography.bodySmall.fontSize};
    text-align: right;
    white-space: nowrap;
  `,withIcon:m.css`
    padding-right: 4px;
  `,headerSortable:m.css`
    cursor: pointer;
  `});var x=e(49597);function M(D){return D.ctrlKey||D.metaKey||D.shiftKey?i.R.AppendToSelection:i.R.ToggleSelection}function S({items:D,displayMode:T,sortBy:R,seriesVisibilityChangeBehavior:L=x.Y.Isolate,sortDesc:w,onLabelClick:A,onToggleSort:N,placement:W,className:I,itemRenderer:F,readonly:V}){const{eventBus:b,onToggleSeriesVisibility:X,onToggleLegendSort:k}=(0,s.R9)(),H=(0,t.useCallback)((ue,q)=>{b?.publish({type:n.es.type,payload:{raw:q,x:0,y:0,dataId:ue.label}})},[b]),Y=(0,t.useCallback)((ue,q)=>{b?.publish({type:n.xH.type,payload:{raw:q,x:0,y:0,dataId:ue.label}})},[b]),ee=(0,t.useCallback)((ue,q)=>{A&&A(ue,q),X&&X(ue.label,L===x.Y.Hide?i.R.AppendToSelection:M(q))},[X,A,L]);switch(T){case u.jK.Table:return t.createElement(E,{className:I,items:D,placement:W,sortBy:R,sortDesc:w,onLabelClick:ee,onToggleSort:N||k,onLabelMouseOver:H,onLabelMouseOut:Y,itemRenderer:F,readonly:V});case u.jK.List:return t.createElement(d,{className:I,items:D,placement:W,onLabelMouseOver:H,onLabelMouseOut:Y,onLabelClick:ee,itemRenderer:F,readonly:V});default:return null}}S.displayName="VizLegend"},11507:(G,O,e)=>{"use strict";e.d(O,{e:()=>d});var t=e(52423),n=e(68404),u=e(68183),s=e(29516),i=e(58690),m=e(82897),f=e(20112),o=e(62444);const l=({stats:g})=>{const p=(0,s.wW)(r);return g.length===0?null:n.createElement(o.Y,{className:p.list,items:g,renderItem:y=>n.createElement("div",{className:p.item,title:y.description},y.title&&`${(0,m.capitalize)(y.title)}:`," ",(0,f.zc)(y))})},r=()=>({list:t.css`
    flex-grow: 1;
    text-align: right;
  `,item:t.css`
    margin-left: 8px;
  `});l.displayName="VizLegendStatsList";const d=({item:g,onLabelClick:p,onLabelMouseOver:y,onLabelMouseOut:h,className:a,readonly:v})=>{const C=(0,s.wW)(c),E=(0,n.useCallback)(M=>{y&&y(g,M)},[g,y]),P=(0,n.useCallback)(M=>{h&&h(g,M)},[g,h]),x=(0,n.useCallback)(M=>{p&&p(g,M)},[g,p]);return n.createElement("div",{className:(0,t.cx)(C.itemWrapper,g.disabled&&C.itemDisabled,a),"aria-label":u.wl.components.VizLegend.seriesName(g.label)},n.createElement(i.i,{seriesName:g.label,color:g.color,gradient:g.gradient,readonly:v}),n.createElement("button",{disabled:v,type:"button",onBlur:P,onFocus:E,onMouseOver:E,onMouseOut:P,onClick:x,className:C.label},g.label),g.getDisplayValues&&n.createElement(l,{stats:g.getDisplayValues()}))};d.displayName="VizLegendListItem";const c=g=>({label:t.css`
    label: LegendLabel;
    white-space: nowrap;
    background: none;
    border: none;
    font-size: inherit;
    padding: 0;
  `,itemDisabled:t.css`
    label: LegendLabelDisabled;
    color: ${g.colors.text.disabled};
  `,itemWrapper:t.css`
    label: LegendItemWrapper;
    display: flex;
    white-space: nowrap;
    align-items: center;
    flex-grow: 1;
  `,value:t.css`
    text-align: right;
  `,yAxisLabel:t.css`
    color: ${g.v1.palette.gray2};
  `})},58690:(G,O,e)=>{"use strict";e.d(O,{i:()=>i});var t=e(68404),n=e(45089),u=e(71235),s=e(86888);const i=t.memo(({seriesName:m,color:f,gradient:o,readonly:l})=>{const{onSeriesColorChange:r}=(0,u.R9)(),d=(0,t.useCallback)(c=>r(m,c),[m,r]);return m&&r&&f&&!l?t.createElement(n.sp,{color:f,onChange:d,enableNamedColors:!0},({ref:c,showColorPicker:g,hideColorPicker:p})=>t.createElement(s.F,{color:f,className:"pointer",ref:c,onClick:g,onMouseLeave:p})):t.createElement(s.F,{color:f,gradient:o})});i.displayName="VizLegendSeriesIcon"},49597:(G,O,e)=>{"use strict";e.d(O,{Y:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},3652:(G,O,e)=>{"use strict";e.d(O,{Q:()=>i});var t=e(68404),n=e(20251);const u=(f,o,l,r)=>{const d=s(f,o,r),c=s(o,f,r),g=Math.max(d,c);let p=Math.floor(f/g),y=Math.ceil(r/p);p=Math.ceil(r/y);const h=p-(p*y-r),a=f/h-l+l/h;return{width:f/p-l+l/p,height:o/y-l+l/y,widthOnLastRow:a,xCount:p,yCount:y}};function s(f,o,l){const r=Math.ceil(Math.sqrt(l*f/o));return Math.floor(r*o/f)*r<l?o/Math.ceil(r*o/f):f/r}class i extends t.PureComponent{constructor(o){super(o),this.state={values:o.getValues()}}componentDidUpdate(o){const{renderCounter:l,source:r}=this.props;(l!==o.renderCounter||r!==o.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:o,width:l,height:r}=this.props;return o===n.wm.Auto?l>r?n.wm.Vertical:n.wm.Horizontal:o}renderGrid(){const{renderValue:o,height:l,width:r,itemSpacing:d,getAlignmentFactors:c,orientation:g}=this.props,{values:p}=this.state,y=u(r,l,d,p.length),h=c?c(p,y.width,y.height):{};let a=0,v=0,C=[];for(let E=0;E<p.length;E++){const P=p[E],M=v===y.yCount-1?y.widthOnLastRow:y.width,S=y.height,D=a*M+d*a,T=v*S+d*v,R={position:"absolute",left:D,top:T,width:`${M}px`,height:`${S}px`};C.push(t.createElement("div",{key:E,style:R},o({value:P,width:M,height:S,alignmentFactors:h,orientation:g,count:p.length}))),a++,a===y.xCount&&(a=0,v++)}return t.createElement("div",{style:{position:"relative"}},C)}render(){const{renderValue:o,height:l,width:r,itemSpacing:d,getAlignmentFactors:c,autoGrid:g,orientation:p,minVizWidth:y,minVizHeight:h}=this.props,{values:a}=this.state;if(g&&p===n.wm.Auto)return this.renderGrid();const v={display:"flex"},C={display:"flex",overflow:`${y?"auto":"hidden"} ${h?"auto":"hidden"}`};let E=l,P=r,x=this.getOrientation();switch(x){case n.wm.Horizontal:C.flexDirection="column",C.height=`${l}px`,v.marginBottom=`${d}px`,P=r,E=Math.max(l/a.length-d+d/a.length,h??0);break;case n.wm.Vertical:C.flexDirection="row",C.justifyContent="space-between",v.marginRight=`${d}px`,E=l,P=Math.max(r/a.length-d+d/a.length,y??0)}v.width=`${P}px`,v.height=`${E}px`;const M=c?c(a,P,E):{};return t.createElement("div",{style:C},a.map((S,D)=>t.createElement("div",{key:D,style:m(v,D,a.length)},o({value:S,width:P,height:E,alignmentFactors:M,orientation:x,count:a.length}))))}}i.defaultProps={itemSpacing:8};function m(f,o,l){return o===l-1?{...f,marginRight:0,marginBottom:0}:f}},78873:(G,O,e)=>{"use strict";e.d(O,{V:()=>m,c:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=e(86888);const i=o=>({icon:t.css`
      margin-right: ${o.spacing(1)};
      vertical-align: middle;
    `,seriesTable:t.css`
      display: table;
    `,seriesTableRow:t.css`
      display: table-row;
      font-size: ${o.typography.bodySmall.fontSize};
    `,seriesTableCell:t.css`
      display: table-cell;
    `,label:t.css`
      word-break: break-all;
    `,value:t.css`
      padding-left: ${o.spacing(2)};
    `,activeSeries:t.css`
      font-weight: ${o.typography.fontWeightBold};
      color: ${o.colors.text.maxContrast};
    `,timestamp:t.css`
      font-weight: ${o.typography.fontWeightBold};
      font-size: ${o.typography.bodySmall.fontSize};
    `}),m=({color:o,label:l,value:r,isActive:d})=>{const c=(0,u.wW)(i);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(c.seriesTableRow,d&&c.activeSeries)},o&&n.createElement("div",{className:c.seriesTableCell},n.createElement(s.F,{color:o,className:c.icon})),l&&n.createElement("div",{className:(0,t.cx)(c.seriesTableCell,c.label)},l),r&&n.createElement("div",{className:(0,t.cx)(c.seriesTableCell,c.value)},r))},f=({timestamp:o,series:l})=>{const r=(0,u.wW)(i);return n.createElement(n.Fragment,null,o&&n.createElement("div",{className:r.timestamp,"aria-label":"Timestamp"},o),l.map((d,c)=>n.createElement(m,{isActive:d.isActive,label:d.label,color:d.color,value:d.value,key:`${d.label}-${c}`})))}},95193:(G,O,e)=>{"use strict";e.d(O,{I:()=>m});var t=e(52423),n=e(68404),u=e(29516),s=e(97635),i=e(68148);const m=({content:o,position:l,offset:r})=>{const d=(0,u.wW)(f);return l?n.createElement(s.h_,{className:d.portal},n.createElement(i.S,{position:l,offset:r||{x:0,y:0}},o)):null};m.displayName="VizTooltip";const f=()=>({portal:t.css`
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
    `})},68148:(G,O,e)=>{"use strict";e.d(O,{S:()=>f});var t=e(52423),n=e(68404),u=e(98101),s=e(29516),i=e(19253);const m=(l=0,r=0,d=0,c=0,g=0,p=0,y=0,h=0)=>{let a=l,v=r;const C=Math.max(l+g+d-(y-g),0),E=Math.abs(Math.min(l-g-d-g,0)),P=C>0,x=E>0,M=Math.max(r+p+c-(h-p),0),S=Math.abs(Math.min(r-p-c-p,0)),D=M>0,T=S>0;return P&&x?a=C>E?g:y-g-d:P?a=l-g-d:a=l+g,D&&T?v=M>S?p:h-p-c:D?v=r-p-c:v=r+p,{x:a,y:v}},f=({position:{x:l,y:r},offset:{x:d,y:c},children:g,allowPointerEvents:p=!1,className:y,...h})=>{const a=(0,n.useRef)(null),[v,C]=(0,n.useState)({width:0,height:0}),{width:E,height:P}=(0,u.Z)(),[x,M]=(0,n.useState)({x:l+d,y:r+c}),S=(0,n.useMemo)(()=>new ResizeObserver(T=>{for(let R of T){const L=Math.floor(R.contentRect.width+16),w=Math.floor(R.contentRect.height+2*8);(v.width!==L||v.height!==w)&&C({width:Math.min(L,E),height:Math.min(w,P)})}}),[v,E,P]);(0,n.useLayoutEffect)(()=>(a.current&&S.observe(a.current),()=>{S.disconnect()}),[S]),(0,n.useLayoutEffect)(()=>{if(a&&a.current){const{x:T,y:R}=m(l,r,v.width,v.height,d,c,E,P);M({x:T,y:R})}},[E,P,l,d,r,c,v]);const D=(0,s.wW)(o);return n.createElement("div",{ref:a,style:{position:"fixed",left:0,pointerEvents:p?"auto":"none",top:0,transform:`translate(${x.x}px, ${x.y}px)`,transition:"transform ease-out 0.1s"},...h,className:(0,t.cx)(D.wrapper,y)},g)};f.displayName="VizTooltipContainer";const o=l=>({wrapper:t.css`
    ${(0,i.getTooltipContainerStyles)(l)}
  `})},89014:(G,O,e)=>{"use strict";e.r(O),e.d(O,{Alert:()=>Ne.b,AlertingSettings:()=>ia.O,AsyncMultiSelect:()=>fa.M8,AsyncSelect:()=>fa.qb,AsyncVirtualizedSelect:()=>fa.gY,AutoSizeInput:()=>or.H,Badge:()=>ws.C,BarGauge:()=>ut.xf,BarGaugeDisplayMode:()=>Ye.QH,BigValue:()=>Xe.w6,BigValueColorMode:()=>Xe.pc,BigValueGraphMode:()=>Xe.IG,BigValueJustifyMode:()=>Xe.ap,BigValueTextMode:()=>Xe.jG,BrowserLabel:()=>ft._,Button:()=>Ea.zx,ButtonCascader:()=>E.O,ButtonGroup:()=>Ma.h,ButtonSelect:()=>zn.d,CallToActionCard:()=>En._,Card:()=>Ws.Z,CardContainer:()=>xa._,Cascader:()=>C.v,CertificationKey:()=>At.W,Checkbox:()=>Xs.X,ClickOutsideWrapper:()=>Ft.L,ClipboardButton:()=>v.m,CodeEditor:()=>me.p,CodeEditorSuggestionItemKind:()=>ie.k,CollapsableSection:()=>we.s,Collapse:()=>Ae.U,ColorPicker:()=>S.zH,ColorPickerInput:()=>D.T,ConfirmButton:()=>r.p,ConfirmModal:()=>De.s,Container:()=>ds.W2,ContextMenu:()=>xn.x,ControlledCollapse:()=>Ae.y,Counter:()=>Ke.A,CustomHeadersSettings:()=>ha.H,CustomScrollbar:()=>h.$,DataLinkButton:()=>gt.k,DataLinkInput:()=>Sn.v,DataLinksContextMenu:()=>wn.V,DataLinksInlineEditor:()=>Bn.d,DataSourceHttpSettings:()=>oa.E,DatePicker:()=>V.M,DatePickerWithInput:()=>b.d,DateTimePicker:()=>X.x,DeleteButton:()=>d.m,Drawer:()=>In.d,Dropdown:()=>Tt.L,DropdownIndicator:()=>Bs.m,EmptySearchResult:()=>R.K,ErrorBoundary:()=>ta.SV,ErrorBoundaryAlert:()=>ta.z4,ErrorWithStack:()=>La.X,EventsCanvas:()=>er.TZ,FIXED_UNIT:()=>ae.j,FadeTransition:()=>Zt.n,FeatureBadge:()=>ba.a,FeatureInfoBox:()=>ba.Z,Field:()=>fs.g,FieldArray:()=>ps.F,FieldLinkList:()=>Ct.Z,FieldSet:()=>cs.C,FieldValidationMessage:()=>gs.S,FileDropzone:()=>ts.Yo,FileDropzoneDefaultChildren:()=>ts.A_,FileListItem:()=>ts.K$,FileUpload:()=>es.p,FilterInput:()=>Gs.H,FilterPill:()=>ge.B,Form:()=>_n.l,FormattedValueDisplay:()=>ka.W,FullWidthButtonContainer:()=>Ot.f,Gauge:()=>Ze.a,Graph:()=>lt.k,GraphContextMenu:()=>_e.w,GraphContextMenuHeader:()=>_e.b,GraphNG:()=>ae.d,GraphSeriesToggler:()=>Me.U,GraphWithLegend:()=>nt.U,HorizontalGroup:()=>ds.Lh,Icon:()=>o.J,IconButton:()=>l.h,InfoBox:()=>Xn.v,InlineField:()=>ya._,InlineFieldRow:()=>Jn.Z,InlineFormLabel:()=>_s.c,InlineLabel:()=>Pa.W,InlineSegmentGroup:()=>za.m,InlineSwitch:()=>Js.x,InlineToast:()=>P.K,Input:()=>rr.I,InputControl:()=>Fa.g,InteractiveTable:()=>H.e,JSONFormatter:()=>hn.g,JsonExplorer:()=>Kn.u,KeyboardPlugin:()=>Z.Cm,Label:()=>Xa._,LegacyForms:()=>St,LegacyInputStatus:()=>n.G,Legend:()=>ls.D,Link:()=>Va.r,LinkButton:()=>Ea.Qj,List:()=>k.a,LoadingBar:()=>M.F,LoadingPlaceholder:()=>x.u,LogLabels:()=>ke.j,LogMessageAnsi:()=>st.Q,LogRows:()=>Et.w,Marker:()=>er.Jx,Menu:()=>Cn.v,MenuGroup:()=>bn.k,MenuItem:()=>Tn.s,Modal:()=>Ee.u,ModalHeader:()=>J.x,ModalRoot:()=>j.Y0,ModalTabContent:()=>ne.Q,ModalTabsHeader:()=>te.H,ModalsContext:()=>j.kr,ModalsController:()=>j.JY,ModalsProvider:()=>j.$i,MultiSelect:()=>fa.NU,PageToolbar:()=>be.X,Pagination:()=>ee.t,PanelChrome:()=>Re.fm,PanelChromeErrorIndicator:()=>ve.g,PanelChromeLoadingIndicator:()=>ze.T,PanelContainer:()=>xt.l,PanelContextProvider:()=>Te._w,PanelContextRoot:()=>Te.bb,PlotLegend:()=>Pr.l,PluginSignatureBadge:()=>Is.o,Popover:()=>p.J,PopoverController:()=>g.D,Portal:()=>y.h_,PortalContainer:()=>y.lO,QueryField:()=>fe.q,RadioButtonGroup:()=>ks.S,RadioButtonList:()=>Ns.x,RangeSlider:()=>Vn.U,ReactMonacoEditor:()=>ce.o,RefreshPicker:()=>A.dP,RelativeTimeRangePicker:()=>qn.x,RenderUserContentAsHTML:()=>qe.D,ScaleDistribution:()=>Ye.wf,SecretInput:()=>Wt.m,SecretTextArea:()=>Zs.Z,SecureSocksProxySettings:()=>Rt.i,Segment:()=>Jt.X,SegmentAsync:()=>rn.V,SegmentInput:()=>mn.X,SegmentSection:()=>fn.f,SegmentSelect:()=>Xt.V,Select:()=>fa.Ph,SelectContainer:()=>fa.eI,SeriesColorPicker:()=>S.sp,SeriesColorPickerPopover:()=>T.j,SeriesColorPickerPopoverWithTheme:()=>T.q,SeriesIcon:()=>$n.F,SeriesTable:()=>dt.c,SeriesTableRow:()=>dt.V,SeriesVisibilityChangeBehavior:()=>pe.Y,SeriesVisibilityChangeMode:()=>ot.R,SetInterval:()=>Le.F,SlideOutTransition:()=>Qt.R,Slider:()=>Yn.i,Sparkline:()=>at.b,Spinner:()=>kt.$,StatsPicker:()=>w.m,Switch:()=>Js.r,TLSAuthSettings:()=>Lt.s,Tab:()=>Ve.O,TabContent:()=>We.I,TabbedContainer:()=>a.W,Table:()=>Qe.i,TableCellDisplayMode:()=>Ye.h2,TableInputCSV:()=>de.w,TabsBar:()=>Be.J,Tag:()=>ue.V,TagList:()=>q.P,TagsInput:()=>Y.B,TextArea:()=>sa.K,TimeOfDayPicker:()=>W.y,TimePickerTooltip:()=>N.IF,TimeRangeInput:()=>ns.K,TimeRangePicker:()=>N.Xc,TimeSeries:()=>Pe.p,TimeZonePicker:()=>I.O,ToolbarButton:()=>Za.h,ToolbarButtonRow:()=>ca.R,Tooltip:()=>c.u,TooltipPlugin:()=>Z.ii,UPLOT_AXIS_FONT_SIZE:()=>Ms.gD,UPlotChart:()=>ir.N,UPlotConfigBuilder:()=>Ys.U,UnitPicker:()=>L.n,ValuePicker:()=>Ja.b,VerticalGroup:()=>ds.wc,VerticalTab:()=>$e.L,VirtualizedSelect:()=>fa.LT,VizLayout:()=>he.AY,VizLegend:()=>ye.l,VizLegendListItem:()=>Oe.e,VizRepeater:()=>oe.Q,VizTooltip:()=>rt.I,VizTooltipContainer:()=>je.S,WeekStartPicker:()=>F.z,WithContextMenu:()=>Zn.z,XYCanvas:()=>er.K2,ZoomPlugin:()=>Z.Rb,buildScaleKey:()=>et.z,clearButtonStyles:()=>Ea.gN,convertOldAngularValueMapping:()=>jt.PR,defaultIntervals:()=>A.o5,fieldMatchersUI:()=>qa.i,getCardStyles:()=>Ws.L,getInputStyles:()=>rr.H,getLogRowStyles:()=>Pt.h,getPortalContainer:()=>y.RN,getSelectStyles:()=>Ca.D,graphFieldOptions:()=>qs.q,graphTickFormatter:()=>Se.sV,graphTimeFormat:()=>Se.mc,preparePlotFrame:()=>et.R,resetSelectStyles:()=>Ha.Z,sharedInputStyle:()=>va.RK,sharedSingleStatMigrationHandler:()=>jt.rD,sharedSingleStatPanelChangedHandler:()=>jt.ZH,useGraphNGContext:()=>Ue.z,usePanelContext:()=>Te.R9,variableSuggestionToCodeEditorSuggestion:()=>re.T,withErrorBoundary:()=>ta.Pf});var t=e(45586),n=e(70640),u=e(89861),s=e(93250),i=e(52756),m=e(88977),f=e(16486),o=e(81697),l=e(20017),r=e(91252),d=e(20428),c=e(48756),g=e(26345),p=e(30995),y=e(97635),h=e(49938),a=e(68972),v=e(38120),C=e(76100),E=e(37751),P=e(87152),x=e(90090),M=e(61458),S=e(45089),D=e(5025),T=e(53505),R=e(42682),L=e(52373),w=e(68858),A=e(45781),N=e(85320),W=e(21836),I=e(68172),F=e(84498),V=e(98259),b=e(20223),X=e(2974),k=e(15031),H=e(92325),Y=e(64407),ee=e(89891),ue=e(3349),q=e(36012),ge=e(1140),De=e(81202),fe=e(18302),me=e(57172),ce=e(26501),ie=e(61723),re=e(82586),Ee=e(6694),J=e(5114),te=e(33716),ne=e(60255),j=e(88561),be=e(10129),Le=e(59459),Qe=e(93163),Ye=e(40538),de=e(46804),Be=e(26625),Ve=e(17353),$e=e(99615),We=e(51142),Ke=e(24123),qe=e(52438),Xe=e(11003),at=e(32056),Ze=e(51874),lt=e(36562),nt=e(63599),_e=e(77312),ut=e(87462),rt=e(95193),je=e(68148),dt=e(78873),oe=e(3652),Se=e(62999),Re=e(86016),ze=e(48484),ve=e(15354),Te=e(71235),he=e(85623),pe=e(49597),ye=e(21987),Oe=e(11507),Ne=e(2323),Me=e(61937),Ae=e(7917),we=e(53535),ke=e(93746),st=e(89333),Et=e(52697),Pt=e(61694),gt=e(89205),Ct=e(9651),Ot=e(67089),Ft=e(57319),jt=e(70292),En=e(86373),xn=e(67303),Cn=e(63346),bn=e(75182),Tn=e(87302),Zn=e(40304),Bn=e(27376),Sn=e(64377),wn=e(67591),$n=e(86888),Xn=e(68698),ba=e(69369),hn=e(16558),Kn=e(6503),ta=e(78758),La=e(56065),oa=e(32695),ha=e(94390),ia=e(36555),Rt=e(97064),Lt=e(11474),At=e(86352),kt=e(40008),Zt=e(28840),Qt=e(97098),Jt=e(75154),rn=e(29822),mn=e(74448),Xt=e(80451),fn=e(95539),In=e(55461),Yn=e(5445),Vn=e(30668),_n=e(4403),va=e(51821),Fa=e(11017),Ea=e(90723),Ma=e(75952),Za=e(26408),ca=e(93880),Ja=e(4955),qa=e(46090),Va=e(90031),Xa=e(38835),fs=e(74955),ls=e(78107),cs=e(65587),gs=e(69556),ya=e(71210),za=e(24657),Pa=e(91605),Jn=e(9274),ps=e(14206),Ha=e(91438),fa=e(46739),Bs=e(6749),Ca=e(76686),Sa=e(11268),is=e.n(Sa),An={};for(const Bt in Sa)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","graphTimeFormat","graphTickFormatter","PanelChrome","PanelChromeLoadingIndicator","PanelChromeErrorIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","LogLabels","LogMessageAnsi","LogRows","getLogRowStyles","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","DropdownIndicator","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","InlineFormLabel","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","GraphNG","FIXED_UNIT","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","BrowserLabel","PanelContainer","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(Bt)<0&&(An[Bt]=()=>Sa[Bt]);e.d(O,An);var ds=e(90701),ws=e(68884),ks=e(318),Ns=e(32306),rr=e(25474),or=e(53799),Gs=e(79230),Wt=e(88517),Zs=e(16591),Js=e(44727),Xs=e(94338),sa=e(79090),es=e(81524),ts=e(20181),ns=e(77592),qn=e(50330),Ws=e(66208),xa=e(38603),ka=e(4395),zn=e(92470),Tt=e(26639),Is=e(80914),_s=e(49371),qs=e(85885),Ys=e(17920),Ms=e(71906),ir=e(43921),Pr=e(46901),er=e(31772),Z=e(48595),ae=e(67043),Pe=e(85969),Ue=e(79242),et=e(90941),ot=e(85675),ft=e(83978),xt=e(48888);const St={SecretFormField:f.c,FormField:t.W,Select:i.Ph,AsyncSelect:i.qb,IndicatorsContainer:u.B,NoOptionsMessage:s.P,Input:n.I,Switch:m.r}},28840:(G,O,e)=>{"use strict";e.d(O,{n:()=>m});var t=e(52423),n=e(68404),u=e(22163),s=e(82385);const i=(0,s.B)(f=>({enter:t.css`
      label: enter;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      opacity: 1;
      transition: opacity ${f}ms ease-out;
    `,exit:t.css`
      label: exit;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      transition: opacity ${f}ms ease-out;
    `}));function m(f){const{visible:o,children:l,duration:r=250}=f,d=i(r);return n.createElement(u.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:r,classNames:d},l)}},97098:(G,O,e)=>{"use strict";e.d(O,{R:()=>m});var t=e(52423),n=e(68404),u=e(22163),s=e(82385);const i=(0,s.B)((f,o,l)=>({enter:t.css`
      label: enter;
      ${o}: 0;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      ${o}: ${l}px;
      opacity: 1;
      transition: opacity ${f}ms ease-out, ${o} ${f}ms ease-out;
    `,exit:t.css`
      label: exit;
      ${o}: ${l}px;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      ${o}: 0;
      transition: opacity ${f}ms ease-out, ${o} ${f}ms ease-out;
    `}));function m(f){const{visible:o,children:l,duration:r=250,horizontal:d,size:c}=f,g=i(r,d?"width":"height",c);return n.createElement(u.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:r,classNames:g},l)}},43921:(G,O,e)=>{"use strict";e.d(O,{N:()=>o});var t=e(68404),n=e(75974),u=e(31451);function s(l,r){return r.width===l.width&&r.height===l.height}function i(l,r){return r.data===l.data}function m(l,r){return r.config===l.config}function f(l,r){let d=l.timeRange,c=r.timeRange;return d===c||c.from.valueOf()===d.from.valueOf()&&c.to.valueOf()===d.to.valueOf()}class o extends t.Component{constructor(r){super(r),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:r,height:d,plotRef:c}=this.props;if(this.state.plot?.destroy(),r===0&&d===0)return;this.props.config.addHook("setSize",y=>{y.over});const g={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,u.Zp)("UPlot",!1,"Reinitializing plot",g);const p=new n.Z(g,this.props.data,this.plotContainer.current);c&&c(p),this.setState({plot:p})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(r){let{plot:d}=this.state;s(r,this.props)?m(r,this.props)?i(r,this.props)?f(r,this.props)||d?.setScale("x",{min:this.props.timeRange.from.valueOf(),max:this.props.timeRange.to.valueOf()}):d?.setData(this.props.data):this.reinitPlot():d?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},46901:(G,O,e)=>{"use strict";e.d(O,{l:()=>d});var t=e(68404),n=e(89890),u=e(425),s=e(21760),i=e(36512),m=e(40538),f=e(29516),o=e(85623),l=e(21987);const r=c=>c==null?"-":c.toFixed(1),d=t.memo(({data:c,config:g,placement:p,calcs:y,displayMode:h,...a})=>{const v=(0,f.l4)(),C=g.getSeries().map(E=>{const P=E.props,x=P.dataFrameFieldIndex,M=g.getAxisPlacement(E.props.scaleKey);if(!x)return;const S=c[x.frameIndex]?.fields[x.fieldIndex];if(!S||S.config.custom?.hideFrom?.legend)return;const D=(0,n.C)(S,c[x.frameIndex],c),R=(0,u.YO)(S,v).color;return{disabled:!(P.show??!0),fieldIndex:x,color:R,label:D,yAxis:M===m.LB.Left||M===m.LB.Bottom?1:2,getDisplayValues:()=>{if(!y?.length)return[];const L=S.display??r;let w=null;const A=(0,s.Kx)({field:S,reducers:y});return y.map(N=>{const W=s.TB.get(N);let I=L;return W.id===s.gz.diffperc&&(I=(0,i.U)({field:{...S,config:{...S.config,unit:"percentunit"}},theme:v})),(W.id===s.gz.count||W.id===s.gz.changeCount||W.id===s.gz.distinctCount)&&(w||(w=(0,i.U)({field:{...S,config:{...S.config,unit:"none"}},theme:v})),I=w),{...I(A[N]),title:W.name,description:W.description}})},getItemKey:()=>`${D}-${x.frameIndex}-${x.fieldIndex}`}}).filter(E=>E!==void 0);return t.createElement(o.AY.Legend,{placement:p,...a},t.createElement(l.l,{placement:p,items:C,displayMode:h,sortBy:a.sortBy,sortDesc:a.sortDesc}))});d.displayName="PlotLegend"},85885:(G,O,e)=>{"use strict";e.d(O,{q:()=>n});var t=e(40538);const n={drawStyle:[{label:"Lines",value:t.l8.Line},{label:"Bars",value:t.l8.Bars},{label:"Points",value:t.l8.Points}],lineInterpolation:[{description:"Linear",value:t.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:t.Jp.Always},{label:"Never",value:t.Jp.Never}],axisPlacement:[{label:"Auto",value:t.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.LB.Left},{label:"Right",value:t.LB.Right},{label:"Hidden",value:t.LB.Hidden}],fillGradient:[{label:"None",value:t.FI.None},{label:"Opacity",value:t.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.o0.None},{label:"Normal",value:t.o0.Normal},{label:"100%",value:t.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.i3.Off},{label:"As lines",value:t.i3.Line},{label:"As lines (dashed)",value:t.i3.Dashed},{label:"As filled regions",value:t.i3.Area},{label:"As filled regions and lines",value:t.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.i3.DashedAndArea}]}},71906:(G,O,e)=>{"use strict";e.d(O,{ff:()=>d,gD:()=>l,mr:()=>g});var t=e(20112),n=e(43211),u=e(47513),s=e(38849),i=e(40538),m=e(80369),f=e(18399),o=e(32266);const l=12,r=8;class d extends f.L{merge(h){this.props.size=(0,o.V)("max",this.props.size,h.size),this.props.label||(this.props.label=h.label),this.props.placement===i.LB.Auto&&(this.props.placement=h.placement)}calculateSpace(h,a,v,C,E){const P=h.axes[a],x=h.scales[P.scale];if(P.side!==2||!x)return 30;const M=40;if(x.time){const S=E/M,D=(C-v)/S,T=g(h,[v],a,M,D);return(0,m.X1)(T[0],l).width+18}return M}calculateAxisSize(h,a,v){const C=h.axes[v];let E=C.ticks.size;if(C.side===2)E+=C.gap+l;else if(a?.length){let P=a.reduce((M,S)=>Math.max(M,(0,m.X1)(S,l).width),0);const x=Math.min(h.width*.4,P);E+=C.gap+C.labelGap+x}return Math.ceil(E)}getConfig(){let{scaleKey:h,label:a,show:v=!0,placement:C=i.LB.Auto,grid:E={show:!0},ticks:P,space:x,filter:M,gap:S=5,formatValue:D,splits:T,values:R,incrs:L,isTime:w,timeZone:A,theme:N,tickLabelRotation:W,size:I,color:F,border:V,decimals:b,distr:X=i.wf.Linear}=this.props;const k=`${l}px ${N.typography.fontFamily}`,H=N.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.br)(h)&&(T=[0,1]),b===0&&X===i.wf.Linear&&(M=(ee,ue)=>ue.map(q=>Number.isInteger(q)?q:null));let Y={scale:h,show:v,stroke:F??N.colors.text.primary,side:p(C),font:k,size:I??((ee,ue,q)=>this.calculateAxisSize(ee,ue,q)),rotate:W,gap:S,labelGap:0,grid:{show:E.show,stroke:H,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:H,width:1/devicePixelRatio,size:4},P),splits:T,values:R,space:x??((ee,ue,q,ge,De)=>this.calculateSpace(ee,ue,q,ge,De)),filter:M,incrs:L};return V!=null&&(Y.border=V),a!=null&&a.length>0&&(Y.label=a,Y.labelSize=l+r,Y.labelFont=k,Y.labelGap=r),R?Y.values=R:w?Y.values=g:D&&(Y.values=(ee,ue,q,ge,De)=>{let fe=(0,n.d)((0,n.O)(De,6));return ue.map(me=>D(me,fe>0?fe:void 0))}),Y.timeZone=A,Y}}const c={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function g(y,h,a,v,C){const E=y.axes[a].timeZone,P=y.scales.x,x=(P?.max??0)-(P?.min??0),M=Math.round(c.year/c.day)*c.day,S=Math.round(C/c.day)*c.day;let D=u.U6.interval.year;return C<c.second?D=u.U6.interval.millisecond:C<=c.minute?D=u.U6.interval.second:x<=c.day?D=u.U6.interval.minute:C<=c.day?D=u.U6.interval.hour:x<c.year?D=u.U6.interval.day:S===M?D=u.U6.interval.year:C<=c.year&&(D=u.U6.interval.month),h.map(T=>T==null?"":(0,s.dq)(T,{format:D,timeZone:E}))}function p(y){switch(y){case i.LB.Top:return 0;case i.LB.Right:return 1;case i.LB.Bottom:return 2;case i.LB.Left:}return 3}},17920:(G,O,e)=>{"use strict";e.d(O,{U:()=>P});var t=e(82897),n=e(75974),u=e(69311),s=e(38306),i=e(40538),m=e(31451),f=e(71906),o=e(32266),l=e(66926),r=e(64724),d=e(18399),c=e(72296);class g extends d.L{getConfig(){const{facets:M,drawStyle:S,pathBuilder:D,pointsBuilder:T,pointsFilter:R,lineInterpolation:L,lineWidth:w,lineStyle:A,barAlignment:N,barWidthFactor:W,barMaxWidth:I,showPoints:F,pointSize:V,scaleKey:b,pxAlign:X,spanNulls:k,show:H=!0}=this.props;let Y={},ee=this.getLineColor();Y.stroke=ee,D!=null?(Y.paths=D,Y.width=w):S===i.l8.Points?Y.paths=()=>null:S!=null&&(Y.width=w,A&&A.fill!=="solid"&&(A.fill==="dot"&&(Y.cap="round"),Y.dash=A.dash??[10,10]),Y.paths=(ge,De,fe,me)=>y(S,L,N,W,I)(ge,De,fe,me));const ue=typeof ee=="string"?ee:(ge,De)=>ge.series[De]._stroke,q={points:{stroke:ue,fill:ue,size:!V||V<w?void 0:V,filter:R}};return T!=null?q.points.show=T:S===i.l8.Points?q.points.show=!0:F===i.Jp.Auto?S===i.l8.Bars&&(q.points.show=!1):F===i.Jp.Never?q.points.show=!1:F===i.Jp.Always&&(q.points.show=!0),{scale:b,facets:M,spanGaps:typeof k=="number"?!1:k,value:()=>"",pxAlign:X,show:H,fill:this.getFill(),...Y,...q}}getLineColor(){const{lineColor:M,gradientMode:S,colorMode:D,thresholds:T,theme:R,hardMin:L,hardMax:w,softMin:A,softMax:N,dynamicSeriesColor:W}=this.props;return S===i.FI.None&&W?(I,F)=>W(F)??M??l.R:S===i.FI.Scheme&&D?.id!==l.S.Fixed?(0,c.P2)(1,R,D,T,L,w,A,N):M??l.R}getFill(){const{lineColor:M,fillColor:S,gradientMode:D,fillOpacity:T,colorMode:R,thresholds:L,theme:w,hardMin:A,hardMax:N,softMin:W,softMax:I,dynamicSeriesColor:F}=this.props;if(S)return S;const V=D??i.FI.None,b=(T??0)/100;if(V===i.FI.None&&F&&b>0)return(X,k)=>{let H=X.series[k]._stroke;return r.alpha(H??"",b)};switch(V){case i.FI.Opacity:return(0,c.DT)(S??M,b);case i.FI.Hue:return(0,c.oN)(S??M,b,w);case i.FI.Scheme:if(R?.id!==l.S.Fixed)return(0,c.P2)(b,w,R,L,A,N,W,I);default:if(b>0)return r.alpha(M??"",b)}}}let p;function y(x,M,S=0,D=.6,T=200){const R=n.Z.paths;if(p||(p={linear:R.linear(),smooth:R.spline(),stepBefore:R.stepped({align:-1,extend:!0}),stepAfter:R.stepped({align:1,extend:!0})}),x===i.l8.Bars){let L=`bars|${S}|${D}|${T}`;return p[L]||(p[L]=R.bars({size:[D,T],align:S})),p[L]}else if(x===i.l8.Line){if(M===i.KC.StepBefore)return p.stepBefore;if(M===i.KC.StepAfter)return p.stepAfter;if(M===i.KC.Smooth)return p.smooth}return p.linear}var h=e(35008),a=e.n(h),v=e(24177);function C(x){const M=x.config.mode===i.i3.Dashed||x.config.mode===i.i3.DashedAndArea?[10,10]:null;function S(F,V,b,X){let k=F.ctx,H=0;for(let Y=0;Y<b.length;Y++)if(b[Y].color==="transparent"){H=Y;break}k.lineWidth=2,M&&k.setLineDash(M);for(let Y=1;Y<b.length;Y++){const ee=b[Y];let ue;H>=Y&&Y>0?ue=a()(X.visualization.getColorByName(b[Y-1].color)):ue=a()(X.visualization.getColorByName(ee.color)),ue.getAlpha()===1&&ue.setAlpha(.7);let q=Math.round(F.bbox.left),ge=Math.round(F.valToPos(ee.value,V,!0)),De=Math.round(F.bbox.left+F.bbox.width),fe=Math.round(F.valToPos(ee.value,V,!0));k.beginPath(),k.moveTo(q,ge),k.lineTo(De,fe),k.strokeStyle=ue.toString(),k.stroke()}}function D(F,V,b,X){let k=F.ctx,H=(0,c.KV)(F,V,b.map(Y=>{let ee=a()(X.visualization.getColorByName(Y.color));return ee.getAlpha()===1&&ee.setAlpha(.15),[Y.value,ee.toString()]}),!0);k.fillStyle=H,k.fillRect(F.bbox.left,F.bbox.top,F.bbox.width,F.bbox.height)}const{scaleKey:T,thresholds:R,theme:L,config:w,hardMin:A,hardMax:N,softMin:W,softMax:I}=x;return F=>{const V=F.ctx,{min:b,max:X}=F.scales.x,{min:k,max:H}=F.scales[T];if(b==null||X==null||k==null||H==null)return;let{steps:Y,mode:ee}=R;if(ee===v.H.Percentage){let[ue,q]=(0,c.A9)(F,T,A,N,W,I),ge=q-ue;Y=Y.map(De=>({...De,value:ue+ge*(De.value/100)}))}switch(V.save(),w.mode){case i.i3.Line:case i.i3.Dashed:S(F,T,Y,L);break;case i.i3.Area:D(F,T,Y,L);break;case i.i3.LineAndArea:case i.i3.DashedAndArea:D(F,T,Y,L),S(F,T,Y,L)}V.restore()}}const E={drag:{setScale:!1},points:{size:(x,M)=>x.series[M].points.size*2,width:(x,M,S)=>S/4},focus:{prox:30}};class P{constructor(M=u.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=S=>{let D=new Date(S);return this.tz?n.Z.tzDate(D,this.tz):D},this.tz=(0,s.Pr)(M,Date.now())?.ianaName}addHook(M,S){(0,m.Zp)("UPlotConfigBuilder",!1,"addHook",M),this.hooks[M]||(this.hooks[M]=[]),this.hooks[M].push(S)}addThresholds(M){this.thresholds[M.scaleKey]||(this.thresholds[M.scaleKey]=M,this.addHook("drawClear",C(M)))}addAxis(M){M.placement=M.placement??i.LB.Auto,M.grid=M.grid??{};let S=M.scaleKey;if(S==="x"&&(S+=M.timeZone??""),this.axes[S]){this.axes[S].merge(M);return}M.placement===i.LB.Auto&&(M.placement=this.hasLeftAxis?i.LB.Right:i.LB.Left),M.placement===i.LB.Left&&(this.hasLeftAxis=!0),M.placement===i.LB.Hidden&&(M.grid.show=!1,M.size=0),this.axes[S]=new f.ff(M)}getAxisPlacement(M){return this.axes[M]?.props.placement??i.LB.Left}setCursor(M){this.cursor=(0,t.merge)({},this.cursor,M)}setMode(M){this.mode=M}setSelect(M){this.select=M}addSeries(M){this.series.push(new g(M))}getSeries(){return this.series}addScale(M){const S=this.scales.find(D=>D.props.scaleKey===M.scaleKey);if(S){S.merge(M);return}this.scales.push(new o.I(M))}addBand(M){this.bands.push(M)}setStackingGroups(M){this.stackingGroups=M}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(M){this.tooltipInterpolator=M}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(M){this.prepData=S=>(this.frames=S,M(S,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(M){this.padding=M}getConfig(){const M={...m.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};M.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(D=>D.getConfig()),M.series=[...M.series,...this.series.map(D=>D.getConfig())],M.scales=this.scales.reduce((D,T)=>({...D,...T.getConfig()}),{}),M.hooks=this.hooks,M.select=this.select;const S=(D="")=>(T,R)=>{let L=T.series[R].points._stroke;if(typeof L!="string"){let w=this.frames[0].fields[R];L=w.display(w.values.get(T.cursor.idxs[R])).color}return L+D};return M.cursor=(0,t.merge)({},E,{points:{stroke:S("80"),fill:S()}},this.cursor),M.tzDate=this.tzDate,Array.isArray(this.padding)&&(M.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(D=>{(0,m.Kq)(D).forEach(T=>{this.addBand(T)})}),this.bands.length&&(M.bands=this.bands),M}ensureNonOverlappingAxes(M){const S=M.find(R=>R.props.scaleKey==="x"),D=M.filter(R=>R.props.grid?.show===void 0),T=D.findIndex(R=>R.props.placement===i.LB.Left||R.props.placement===i.LB.Right||R.props.placement===i.LB.Bottom&&R!==S);for(let R=0;R<D.length;R++)D[R]===S||R===T?D[R].props.grid.show=!0:D[R].props.grid.show=!1;return M}}},32266:(G,O,e)=>{"use strict";e.d(O,{I:()=>m,V:()=>f});var t=e(75974),n=e(15128),u=e(20112),s=e(40538),i=e(18399);class m extends i.L{merge(l){this.props.min=f("min",this.props.min,l.min),this.props.max=f("max",this.props.max,l.max)}getConfig(){let{isTime:l,scaleKey:r,min:d,max:c,softMin:g,softMax:p,range:y,direction:h,orientation:a,centeredZero:v,decimals:C}=this.props;const E=this.props.distribution,P=l?{}:{distr:E===s.wf.Symlog?4:E===s.wf.Log?3:E===s.wf.Ordinal?2:1,log:E===s.wf.Log||E===s.wf.Symlog?this.props.log??2:void 0,asinh:E===s.wf.Symlog?this.props.linearThreshold??1:void 0};let x=g==null?3:1,M=p==null?3:1;const S={min:{pad:.1,hard:d??-1/0,soft:g||0,mode:x},max:{pad:.1,hard:c??1/0,soft:p||0,mode:M}};let D=g==null&&d!=null,T=p==null&&c!=null,R=D&&T;const L=(A,N,W,I)=>{const F=A.scales[I];let V=[N,W];if(!R&&N==null&&W==null)return V;let b=F.log??10;if(F.distr===1||F.distr===2||F.distr===4){if(v){let X=Math.abs(N),k=Math.abs(W),H=Math.max(X,k);N=-H,W=H}F.distr===4?V=t.Z.rangeAsinh(N,W,b,!0):V=t.Z.rangeNum(D?d:N,T?c:W,S)}else F.distr===3&&(V=t.Z.rangeLog(N,W,b,!0));if(C===0)if(F.distr===1||F.distr===2)V[0]=(0,n.mB)(V[0],1),V[1]=(0,n.UO)(V[1],1);else if(F.distr===3){let X=F.log===2?Math.log2:Math.log10;if(V[0]<=1)V[0]=1;else{let H=Math.floor(X(V[0]));V[0]=b**H}let k=Math.ceil(X(V[1]));V[1]=b**k,V[0]===V[1]&&(V[1]*=b)}else F.distr===4&&(V[0]=(0,n.mB)(V[0],1),V[1]=(0,n.UO)(V[1],1));return D&&(V[0]=d),T&&(V[1]=c),V[0]>=V[1]&&(V[0]=F.distr===3?1:0,V[1]=100),V};let w=!l&&!R;return(0,u.br)(r)&&(w=!1,y=[0,1]),{[r]:{time:l,auto:w,range:y??L,dir:h,ori:a,...P}}}}function f(o,l,r){const d=l!=null,c=r!=null;return d?c?o==="min"?l<r?l:r:l>r?l:r:l:r}},72296:(G,O,e)=>{"use strict";e.d(O,{A9:()=>p,DT:()=>l,KV:()=>c,P2:()=>y,oN:()=>r});var t=e(35008),n=e.n(t),u=e(64724),s=e(66926),i=e(24177),m=e(40538),f=e(80369);function o(h,a,v){let C=0,E=0,P=0,x=0;return h===d.Down?(E=a.top,x=a.top+a.height):h===d.Left?(C=a.left+a.width,P=a.left):h===d.Up?(E=a.top+a.height,x=a.top):h===d.Right&&(C=a.left,P=a.left+a.width),v.createLinearGradient(C,E,P,x)}function l(h,a){return(v,C)=>{const E=(0,f.AE)(),P=o(v.scales.x.ori===m.wN.Horizontal?d.Down:d.Left,v.bbox,E);return P.addColorStop(0,u.alpha(h,a)),P.addColorStop(1,u.alpha(h,0)),P}}function r(h,a,v){return(C,E)=>{const P=(0,f.AE)(),x=o(C.scales.x.ori===m.wN.Horizontal?d.Down:d.Left,C.bbox,P),M=n()(h).spin(-15),S=n()(h).spin(15);return v.isDark?(x.addColorStop(0,S.lighten(10).setAlpha(a).toString()),x.addColorStop(1,M.darken(10).setAlpha(a).toString())):(x.addColorStop(0,S.lighten(10).setAlpha(a).toString()),x.addColorStop(1,M.setAlpha(a).toString())),x}}var d=(h=>(h[h.Right=0]="Right",h[h.Up=1]="Up",h[h.Left=2]="Left",h[h.Down=3]="Down",h))(d||{});function c(h,a,v,C=!1){let E=h.scales[a],P=null,x=null;for(let V=0;V<v.length;V++){let b=v[V][0];if((b<=E.min||P==null)&&(P=V),x=V,b>=E.max)break}if(P===x)return v[P][1];let M=v[P][0],S=v[x][0];M===-1/0&&(M=E.min),S===1/0&&(S=E.max);let D=Math.round(h.valToPos(M,a,!0)),T=Math.round(h.valToPos(S,a,!0)),R=D-T;if(R===0)return v[x][1];let L,w,A,N;h.scales.x.ori===m.wN.Horizontal?(L=A=0,w=D,N=T):(w=N=0,L=D,A=T);let I=(0,f.AE)().createLinearGradient(L,w,A,N),F;for(let V=P;V<=x;V++){let b=v[V],X=V===P?D:V===x?T:Math.round(h.valToPos(b[0],a,!0)),k=(D-X)/R;C&&V>P&&I.addColorStop(k,F),I.addColorStop(k,F=b[1])}return I}function g(h,a){let v=h.scales[a],C=1/0,E=-1/0;return h.series.forEach((P,x)=>{if(P.show&&P.scale===a)if(P.min==null){let M=h.data[x];for(let S=0;S<M.length;S++)M[S]!=null&&(C=Math.min(C,M[S]),E=Math.max(E,M[S]))}else C=Math.min(C,P.min),E=Math.max(E,P.max)}),E===C&&(C=v.min,E=v.max),[C,E]}function p(h,a,v,C,E,P){let x=v??E??null,M=C??P??null;if(x==null||M==null){let[S,D]=g(h,a);x=x??S??0,M=M??D??100}return[x,M]}function y(h,a,v,C,E,P,x,M){if(!v)throw Error("Missing colorMode required for color scheme gradients");if(!C)throw Error("Missing thresholds required for color scheme gradients");return(S,D)=>{let T=S.series[D].scale,R="";if(v.id===s.S.Thresholds)if(C.mode===i.H.Absolute){const L=C.steps.map(w=>[w.value,u.alpha(a.visualization.getColorByName(w.color),h)]);R=c(S,T,L,!0)}else{const[L,w]=p(S,T,E,P,x,M),A=w-L,N=C.steps.map(W=>[L+A*(W.value/100),u.alpha(a.visualization.getColorByName(W.color),h)]);R=c(S,T,N,!0)}else if(v.getColors){const L=v.getColors(a),[w,A]=p(S,T,E,P,x,M),N=A-w,W=L.map((I,F)=>[w+N*(F/(L.length-1)),u.alpha(a.visualization.getColorByName(I),h)]);R=c(S,T,W,!1)}return R}}},2310:(G,O,e)=>{"use strict";e.d(O,{T:()=>i});var t=e(68404),n=e(24015),u=e(32280),s=e(17184);function i({id:m,events:f,renderEventMarker:o,mapEventToXYCoords:l,config:r}){const d=(0,t.useRef)(),[c,g]=(0,t.useState)(0),p=(0,n.Z)();(0,t.useLayoutEffect)(()=>{r.addHook("init",h=>{d.current=h}),r.addHook("draw",()=>{p()&&g(h=>h+1)})},[r,g]);const y=(0,t.useMemo)(()=>{const h=[];if(!d.current||f.length===0)return h;for(let a=0;a<f.length;a++){const v=f[a];for(let C=0;C<v.length;C++){const E=l(v,{fieldIndex:C,frameIndex:a});E&&h.push(t.createElement(u.J,{...E,key:`${m}-marker-${a}-${C}`},o(v,{fieldIndex:C,frameIndex:a})))}}return t.createElement(t.Fragment,null,h)},[f,o,c]);return d.current?t.createElement(s.K,{left:d.current.bbox.left/window.devicePixelRatio,top:d.current.bbox.top/window.devicePixelRatio},y):null}},32280:(G,O,e)=>{"use strict";e.d(O,{J:()=>n});var t=e(68404);const n=({x:u,y:s,children:i})=>t.createElement("div",{style:{position:"absolute",top:`${s}px`,left:`${u}px`}},i)},17184:(G,O,e)=>{"use strict";e.d(O,{K:()=>u});var t=e(52423),n=e(68404);const u=({children:s,left:i,top:m})=>{const f=(0,n.useMemo)(()=>t.css`
      position: absolute;
      overflow: visible;
      left: ${i}px;
      top: ${m}px;
    `,[i,m]);return n.createElement("div",{className:f},s)}},31772:(G,O,e)=>{"use strict";e.d(O,{Jx:()=>n.J,K2:()=>u.K,TZ:()=>t.T});var t=e(2310),n=e(32280),u=e(17184)},12272:(G,O,e)=>{"use strict";e.d(O,{C:()=>o});var t=e(82897),n=e.n(t),u=e(68404);const s=.1,i=2,m=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),f=l=>{let r=l.root.closest("[tabindex]"),d=new Set,c=null,g=null;if(!r)return;const p=(P,x)=>{const{cursor:M}=l;if(M.left===void 0||M.top===void 0)return;const{width:S,height:D}=l.over.style,[T,R]=[Math.floor(parseFloat(S)),Math.floor(parseFloat(D))];l.setCursor({left:(0,t.clamp)(M.left+P,0,T),top:(0,t.clamp)(M.top+x,0,R)})},y=P=>{if(d.size===0||!l){g=null;return}const S=(P-(g??P))*s;let D=0,T=0;d.has("ArrowUp")&&(T-=S),d.has("ArrowDown")&&(T+=S),d.has("ArrowLeft")&&(D-=S),d.has("ArrowRight")&&(D+=S),d.has("Shift")&&(D*=i,T*=i),p(D,T);const{cursor:R}=l;if(d.has(" ")&&R){const L=Number(l.over.style.height.slice(0,-2));l.setSelect({left:R.left<c?R.left:c,top:0,width:Math.abs(R.left-(c??R.left)),height:L},!1)}g=P,window.requestAnimationFrame(y)},h=P=>{if(P.key==="Tab"){l.setCursor({left:-5,top:-5});return}if(!m.has(P.key))return;if(P.preventDefault(),P.stopPropagation(),!d.has(P.key)){const M=d.size===0;d.add(P.key),c=P.key===" "&&c===null?l.cursor.left:c,M&&window.requestAnimationFrame(y)}},a=P=>{m.has(P.key)&&(d.delete(P.key),P.key===" "&&(P.preventDefault(),P.stopPropagation(),l.setSelect(l.select),c=null))},v=()=>{if(!r?.matches(":focus-visible"))return;const P=parseFloat(l.over.style.width),x=parseFloat(l.over.style.height);l.setCursor({left:P/2,top:x/2})},C=()=>{g=null,c=null,d.clear(),l.setSelect({left:0,top:0,width:0,height:0},!1)};r.addEventListener("keydown",h),r.addEventListener("keyup",a),r.addEventListener("focus",v),r.addEventListener("blur",C);const E=()=>{r?.removeEventListener("keydown",h),r?.removeEventListener("keyup",a),r?.removeEventListener("focus",v),r?.removeEventListener("blur",C),r=null};(l.hooks.destroy??=[]).push(E)},o=({config:l})=>((0,u.useLayoutEffect)(()=>l.addHook("init",f),[l]),null)},22701:(G,O,e)=>{"use strict";e.d(O,{_:()=>C,i:()=>a});var t=e(68404),n=e(24015),u=e(29431),s=e(36512),i=e(66926),m=e(89890),f=e(20112),o=e(14582),l=e(76553),r=e(40538),d=e(29516),c=e(97635),g=e(78873),p=e(68148),y=e(31451);const h=10,a=({mode:E=r.f3.Single,sortOrder:P=r.As.None,sync:x,timeZone:M,config:S,renderTooltip:D,...T})=>{const R=(0,t.useRef)(),L=(0,d.l4)(),[w,A]=(0,t.useState)(null),[N,W]=(0,t.useState)(null),[I,F]=(0,t.useState)([]),[V,b]=(0,t.useState)(null),[X,k]=(0,t.useState)(!1),H=(0,n.Z)(),Y="TooltipPlugin";if((0,t.useEffect)(()=>{(0,y.Zp)(Y,!0,`Focused series: ${w}, focused point: ${N}`)},[N,w]),(0,t.useLayoutEffect)(()=>{let De;const fe=()=>{H()&&(k(!0),R.current?.root.classList.add("plot-active"))},me=()=>{H()&&(b(null),k(!1),R.current?.root.classList.remove("plot-active"))};S.addHook("syncRect",(ie,re)=>De=re),S.addHook("init",ie=>{R.current=ie,ie.root.parentElement?.addEventListener("focus",fe),ie.over.addEventListener("mouseenter",fe),ie.root.parentElement?.addEventListener("blur",me),ie.over.addEventListener("mouseleave",me),x&&x()===u.m.Crosshair&&ie.root.classList.add("shared-crosshair")});const ce=S.getTooltipInterpolator();return ce?S.addHook("setCursor",ie=>{ce(A,W,re=>{if(re){b(null);return}if(!De)return;const{x:Ee,y:J}=C(ie,De);Ee!==void 0&&J!==void 0&&b({x:Ee,y:J})},ie)}):(S.addHook("setLegend",ie=>{H()&&(W(ie.legend.idx),F(ie.legend.idxs.slice()))}),S.addHook("setCursor",ie=>{if(!De||!H())return;const{x:re,y:Ee}=C(ie,De);b(re!==void 0&&Ee!==void 0?{x:re,y:Ee}:null)}),S.addHook("setSeries",(ie,re)=>{H()&&A(re)})),()=>{b(null),R.current&&(R.current.over.removeEventListener("mouseleave",me),R.current.over.removeEventListener("mouseenter",fe),R.current.root.parentElement?.removeEventListener("focus",fe),R.current.root.parentElement?.removeEventListener("blur",me))}},[S,b,k,W,F]),N===null||!X&&x&&x()===u.m.Crosshair)return null;let ee=T.data.fields[0];if(!ee)return null;const ue=ee.display||(0,s.U)({field:ee,timeZone:M,theme:L});let q=null,ge=ue(ee.values.get(N)).text;if(D)q=D(T.data,w,N);else{if(E===r.f3.Single&&w!==null){const De=T.data.fields[w];if(!De)return null;const fe=I?.[w]??N;ge=ue(ee.values.get(fe)).text;const ce=(De.display||(0,s.U)({field:De,timeZone:M,theme:L}))(De.values.get(fe));q=t.createElement(g.c,{series:[{color:ce.color||i.R,label:(0,m.C)(De,T.data,T.frames),value:ce?(0,f.zc)(ce):null}],timestamp:ge})}if(E===r.f3.Multi){let De=[];const fe=T.data,me=fe.fields,ce=[];for(let ie=0;ie<me.length;ie++){const re=fe.fields[ie];if(!re||re===ee||re.type===o.fS.time||re.type!==o.fS.number||re.config.custom?.hideFrom?.tooltip||re.config.custom?.hideFrom?.viz)continue;const Ee=T.data.fields[ie].values.get(I[ie]),J=re.display(Ee);ce.push(Ee),De.push({color:J.color||i.R,label:(0,m.C)(re,fe,T.frames),value:J?(0,f.zc)(J):null,isActive:w===ie})}if(P!==r.As.None){const ie=[...De],re=l.sortValues(P);De.sort((Ee,J)=>{const te=ie.indexOf(Ee),ne=ie.indexOf(J);return re(ce[te],ce[ne])})}q=t.createElement(g.c,{series:De,timestamp:ge})}}return t.createElement(c.h_,null,q&&V&&t.createElement(p.S,{position:{x:V.x,y:V.y},offset:{x:h,y:h}},q))};function v({left:E,top:P},x){return E===void 0||P===void 0?!1:E<0||E>x.width||P<0||P>x.height}function C(E,P){let x,M;const S=E.cursor.left||0,D=E.cursor.top||0;if(v(E.cursor,P)){const T=E.posToIdx(S);if(D<0||D>P.height){let R=(0,y.ah)(E,T);R&&(M=P.top+R,S>=0&&S<=P.width&&(x=P.left+E.valToPos(E.data[0][E.posToIdx(S)],E.series[0].scale)))}}else x=P.left+S,M=P.top+D;return{x,y:M}}},84864:(G,O,e)=>{"use strict";e.d(O,{R:()=>s});var t=e(68404),n=e(31451);const u=5,s=({onZoom:i,config:m})=>{const[f,o]=(0,t.useState)(null);return(0,t.useEffect)(()=>{if(f){if((0,n.Zp)("ZoomPlugin",!1,"selected",f),f.bbox.width<u)return;i({from:f.min,to:f.max})}},[f]),(0,t.useLayoutEffect)(()=>{m.addHook("setSelect",l=>{const r=l.posToVal(l.select.left,"x"),d=l.posToVal(l.select.left+l.select.width,"x");o({min:r,max:d,bbox:{left:l.bbox.left/window.devicePixelRatio+l.select.left,top:l.bbox.top/window.devicePixelRatio,height:l.bbox.height/window.devicePixelRatio,width:l.select.width}}),l.setSelect({left:0,width:0},!1)})},[m]),null}},48595:(G,O,e)=>{"use strict";e.d(O,{Cm:()=>u.C,Rb:()=>t.R,ii:()=>n.i});var t=e(84864),n=e(22701),u=e(12272)},18399:(G,O,e)=>{"use strict";e.d(O,{L:()=>t});class t{constructor(u){this.props=u}}},31451:(G,O,e)=>{"use strict";e.d(O,{Bj:()=>p,Kq:()=>c,Zp:()=>C,ah:()=>y,i7:()=>g,qt:()=>r});var t=e(14582),n=e(2932),u=e(40538),s=e(76804),i=e(62009),m=e(90941);const f=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function o(E){return E.replace(f,P=>`{${P}}`)}const l=(E,P,x)=>{let M=P%2?x[0]||x[2]:x[1]||x[3];return x[P]||!M?0:8},r={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[l,l,l,l],series:[],hooks:{}};var d=(E=>(E[E.Pos=1]="Pos",E[E.Neg=-1]="Neg",E))(d||{});function c(E){let P=[],{series:x,dir:M}=E,S=x.length-1,D=x.slice().reverse();return D.forEach((T,R)=>{if(R!==S){let L=D[R+1];P.push({series:[T,L],dir:-1*M})}}),P}function g(E){let P=new Map;return E.fields.forEach(({config:x,values:M},S)=>{if(S===0)return;let{custom:D}=x;if(D==null||D.hideFrom?.viz)return;let{stacking:T}=D;if(T==null)return;let{mode:R,group:L}=T;if(R===u.o0.None)return;let w=M.toArray(),A=D.transform,N=h(A,w),W=D.drawStyle,I=W===u.l8.Bars?D.barAlignment:W===u.l8.Line?D.lineInterpolation:null,F=`${N}|${R}|${L}|${(0,m.z)(x)}|${W}|${I}`,V=P.get(F);V==null&&(V={series:[],dir:N},P.set(F,V)),V.series.push(S)}),[...P.values()]}function p(E,P,x){let M=Array(E.fields.length),S=P.length,D=E.length,T=S>0?Array(D).fill(0):[],R=S>0?Array(D).fill(!1):[],L=Array.from({length:S},()=>T.slice()),w=Array.from({length:S},()=>R.slice());if(P.forEach((A,N)=>{let W=w[N];A.series.forEach(I=>{let F=E.fields[I];if(F.config.custom?.hideFrom?.viz)return;let V=F.values.toArray();for(let b=0;b<D;b++)V[b]!=null&&(W[b]=!0)})}),E.fields.forEach((A,N)=>{let W=A.values.toArray();if(N===0){A.type===t.fS.time?M[N]=(0,n.J_)(A).values.toArray():M[N]=W;return}let{custom:I}=A.config;if(!I||I.hideFrom?.viz){M[N]=W;return}if(I.transform===u.pR.Constant){let V=W.findIndex(X=>X!=null),b=W[V];W=Array(W.length).fill(void 0),W[V]=b}else if(W=W.slice(),I.transform===u.pR.NegativeY)for(let V=0;V<W.length;V++)W[V]!=null&&(W[V]*=-1);let F=I.stacking?.mode;if(!F||F===u.o0.None)M[N]=W;else{let V=P.findIndex(H=>H.series.indexOf(N)>-1),b=L[V],X=w[V],k=M[N]=Array(D);for(let H=0;H<D;H++){let Y=W[H];Y!=null?k[H]=b[H]+=Y:k[H]=X[H]?b[H]:Y}}}),x){let A=M.map((N,W)=>{let I=P.findIndex(F=>F.series.indexOf(W)>-1);return I!==-1?L[I]:N});x({totals:A})}return E.fields.forEach((A,N)=>{if(N===0||A.config.custom?.hideFrom?.viz)return;if(A.config.custom?.stacking?.mode===u.o0.Percent){let I=P.findIndex(X=>X.series.indexOf(N)>-1),F=L[I],V=P[I],b=M[N];for(let X=0;X<D;X++){let k=b[X];k!=null&&(b[X]=F[X]===0?0:V.dir*(k/F[X]))}}}),M}function y(E,P){let x,M=1,S=1,D=E.data[1][P],T=E.data[1][P];for(let R=1;R<E.data.length;R++){const w=E.data[R][P];w!=null&&(D==null?D=w:w>D&&(D=E.data[R][P],M=R),T==null?T=w:w<T&&(T=E.data[R][P],S=R))}return T==null&&D==null?x=void 0:T!=null&&D!=null?x=(E.valToPos(T,E.series[S].scale)+E.valToPos(D,E.series[M].scale))/2:x=E.valToPos(T||D,E.series[M||S].scale),x!==void 0&&x<0&&(x=E.bbox.height/devicePixelRatio),x}function h(E,P){const x=a(P);return E===u.pR.NegativeY?x?1:-1:x?-1:1}function a(E,P=50){const x=E.length;if(x===0)return!1;let M=0,S=x-1;for(;M<=S&&E[M]==null;)M++;for(;S>=M&&E[S]==null;)S--;if(S>=M){const D=Math.max(1,Math.floor((S-M+1)/P));for(let T=M;T<=S;T+=D){const R=E[T];if(R!=null&&(R<0||Object.is(R,-0)))return!0}}return!1}const v=(0,i.h)("uPlot"),C=v.logger;(0,s.x)("graphng",void 0,v)},84666:(G,O,e)=>{"use strict";e.r(O),e.d(O,{ALERTING_COLOR:()=>s.ns,AxisPlacement:()=>o.LB,BarAlignment:()=>o.pu,BarValueVisibility:()=>o.eU,BracesPlugin:()=>f.hP,ClearPlugin:()=>f.Gp,ClipboardPlugin:()=>f.wl,DEFAULT_ANNOTATION_COLOR:()=>s.Jx,DOMUtil:()=>s.Qi,DrawStyle:()=>o.$6,EventsWithValidation:()=>s.JU,GlobalStyles:()=>i.nz,GraphGradientMode:()=>o.FI,GraphTresholdsStyleMode:()=>o.i3,IndentationPlugin:()=>f.Rc,LegendDisplayMode:()=>o.jK,LineInterpolation:()=>o.KC,NO_DATA_COLOR:()=>s._V,NewlinePlugin:()=>f.z2,NodeGraphDataFrameFieldNames:()=>s.zG,OK_COLOR:()=>s.te,PENDING_COLOR:()=>s.f7,PointVisibility:()=>o.mv,REGION_FILL_ALPHA:()=>s.iV,ReactUtils:()=>s.Ot,RunnerPlugin:()=>f.dv,SCHEMA:()=>s.Yi,ScaleDirection:()=>o.bQ,ScaleOrientation:()=>o.wN,SearchFunctionType:()=>s.nu,SelectionShortcutsPlugin:()=>f.$L,SlatePrism:()=>f.Ze,StackingMode:()=>o.o0,SuggestionsPlugin:()=>f.bm,ThemeContext:()=>i.Ni,TooltipDisplayMode:()=>o.f3,ansicolor:()=>s._J,attachDebugger:()=>s.xq,calculateFontSize:()=>s.MX,colors:()=>s.O9,commonOptionsBuilder:()=>m.q,createLogger:()=>s.hu,fuzzyMatch:()=>s.C6,getCanvasContext:()=>s.AE,getCellLinks:()=>s.iu,getScrollbarWidth:()=>s.np,getTagColor:()=>s.vm,getTagColorsFromName:()=>s.Bx,getTextColorForAlphaBackground:()=>s.bM,getTextColorForBackground:()=>s.Gc,getTheme:()=>i.gh,hasValidationEvent:()=>s.z3,isCompactUrl:()=>s.go,linkModelToContextMenuItems:()=>s.Rc,makeFragment:()=>s.xl,makeValue:()=>s.l1,measureText:()=>s.X1,mockTheme:()=>i.Zu,mockThemeContext:()=>i.sJ,regexValidation:()=>s.FE,sortedColors:()=>s.Wm,styleMixins:()=>i.GU,stylesFactory:()=>i.Bb,useForceUpdate:()=>s.NW,useStyles:()=>i.yK,useStyles2:()=>i.wW,useTheme:()=>i.Fg,useTheme2:()=>i.l4,validate:()=>s.Gu,withTheme:()=>i.Zz,withTheme2:()=>i.HE});var t=e(89014),u={};for(const l in t)l!=="default"&&(u[l]=()=>t[l]);e.d(O,u);var n=e(46894),u={};for(const l in n)["default","Alert","AlertingSettings","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","AutoSizeInput","Badge","BarGauge","BarGaugeDisplayMode","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","BrowserLabel","Button","ButtonCascader","ButtonGroup","ButtonSelect","CallToActionCard","Card","CardContainer","Cascader","CertificationKey","Checkbox","ClickOutsideWrapper","ClipboardButton","CodeEditor","CodeEditorSuggestionItemKind","CollapsableSection","Collapse","ColorPicker","ColorPickerInput","ConfirmButton","ConfirmModal","Container","ContextMenu","ControlledCollapse","Counter","CustomHeadersSettings","CustomScrollbar","DataLinkButton","DataLinkInput","DataLinksContextMenu","DataLinksInlineEditor","DataSourceHttpSettings","DatePicker","DatePickerWithInput","DateTimePicker","DeleteButton","Drawer","Dropdown","DropdownIndicator","EmptySearchResult","ErrorBoundary","ErrorBoundaryAlert","ErrorWithStack","EventsCanvas","FIXED_UNIT","FadeTransition","FeatureBadge","FeatureInfoBox","Field","FieldArray","FieldLinkList","FieldSet","FieldValidationMessage","FileDropzone","FileDropzoneDefaultChildren","FileListItem","FileUpload","FilterInput","FilterPill","Form","FormattedValueDisplay","FullWidthButtonContainer","Gauge","Graph","GraphContextMenu","GraphContextMenuHeader","GraphNG","GraphSeriesToggler","GraphWithLegend","HorizontalGroup","Icon","IconButton","InfoBox","InlineField","InlineFieldRow","InlineFormLabel","InlineLabel","InlineSegmentGroup","InlineSwitch","InlineToast","Input","InputControl","InteractiveTable","JSONFormatter","JsonExplorer","KeyboardPlugin","Label","LegacyForms","LegacyInputStatus","Legend","Link","LinkButton","List","LoadingBar","LoadingPlaceholder","LogLabels","LogMessageAnsi","LogRows","Marker","Menu","MenuGroup","MenuItem","Modal","ModalHeader","ModalRoot","ModalTabContent","ModalTabsHeader","ModalsContext","ModalsController","ModalsProvider","MultiSelect","PageToolbar","Pagination","PanelChrome","PanelChromeErrorIndicator","PanelChromeLoadingIndicator","PanelContainer","PanelContextProvider","PanelContextRoot","PlotLegend","PluginSignatureBadge","Popover","PopoverController","Portal","PortalContainer","QueryField","RadioButtonGroup","RadioButtonList","RangeSlider","ReactMonacoEditor","RefreshPicker","RelativeTimeRangePicker","RenderUserContentAsHTML","ScaleDistribution","SecretInput","SecretTextArea","SecureSocksProxySettings","Segment","SegmentAsync","SegmentInput","SegmentSection","SegmentSelect","Select","SelectContainer","SeriesColorPicker","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","SeriesIcon","SeriesTable","SeriesTableRow","SeriesVisibilityChangeBehavior","SeriesVisibilityChangeMode","SetInterval","SlideOutTransition","Slider","Sparkline","Spinner","StatsPicker","Switch","TLSAuthSettings","Tab","TabContent","TabbedContainer","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tag","TagList","TagsInput","TextArea","TimeOfDayPicker","TimePickerTooltip","TimeRangeInput","TimeRangePicker","TimeSeries","TimeZonePicker","ToolbarButton","ToolbarButtonRow","Tooltip","TooltipPlugin","UPLOT_AXIS_FONT_SIZE","UPlotChart","UPlotConfigBuilder","UnitPicker","ValuePicker","VerticalGroup","VerticalTab","VirtualizedSelect","VizLayout","VizLegend","VizLegendListItem","VizRepeater","VizTooltip","VizTooltipContainer","WeekStartPicker","WithContextMenu","XYCanvas","ZoomPlugin","buildScaleKey","clearButtonStyles","convertOldAngularValueMapping","defaultIntervals","fieldMatchersUI","getCardStyles","getInputStyles","getLogRowStyles","getPortalContainer","getSelectStyles","graphFieldOptions","graphTickFormatter","graphTimeFormat","preparePlotFrame","resetSelectStyles","sharedInputStyle","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","useGraphNGContext","usePanelContext","variableSuggestionToCodeEditorSuggestion","withErrorBoundary"].indexOf(l)<0&&(u[l]=()=>n[l]);e.d(O,u);var s=e(88154),i=e(81365),m=e(14711),f=e(41538),o=e(41441)},23084:(G,O,e)=>{"use strict";e.d(O,{Y:()=>g,r:()=>r});var t=e(68404),n=e(14582),u=e(78798),s=e(40538),i=e(85885),m=e(318),f=e(74955),o=e(46739),l=e(25474);function r(p,y,h){const a=["Axis"];p.addRadio({path:"axisPlacement",name:"Placement",category:a,defaultValue:i.q.axisPlacement[0].value,settings:{options:i.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:a,defaultValue:"",settings:{placeholder:"Optional text"},showIf:v=>v.axisPlacement!==s.LB.Hidden,shouldApply:v=>v.type!==n.fS.time&&v.type!==n.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:a,settings:{placeholder:"Auto"},showIf:v=>v.axisPlacement!==s.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:a,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}).addRadio({path:"axisColorMode",name:"Color",category:a,defaultValue:s.yK.Text,settings:{options:[{value:s.yK.Text,label:"Text"},{value:s.yK.Series,label:"Series"}]}}),p.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:a,editor:g,override:g,defaultValue:{type:s.wf.Linear},shouldApply:v=>v.type===n.fS.number,process:u.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:a,defaultValue:!1,showIf:v=>v.scaleDistribution?.type!==s.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:y.axisSoftMin,category:a,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:y.axisSoftMax,category:a,settings:{placeholder:"See: Standard options > Max"}})}const d=[{label:"Linear",value:s.wf.Linear},{label:"Logarithmic",value:s.wf.Log},{label:"Symlog",value:s.wf.Symlog}],c=[{label:"2",value:2},{label:"10",value:10}],g=({value:p,onChange:y})=>{const h=p?.type??s.wf.Linear;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(m.S,{value:h,options:d,onChange:a=>{y({...p,type:a,log:a===s.wf.Linear?void 0:p.log??2})}})),(h===s.wf.Log||h===s.wf.Symlog)&&t.createElement(f.g,{label:"Log base"},t.createElement(o.Ph,{options:c,value:p.log??2,onChange:a=>{y({...p,log:a.value})}})),h===s.wf.Symlog&&t.createElement(f.g,{label:"Linear threshold"},t.createElement(l.I,{placeholder:"1",value:p.linearThreshold,onChange:a=>{y({...p,linearThreshold:Number(a.currentTarget.value)})}})))}},71464:(G,O,e)=>{"use strict";e.d(O,{B:()=>f});var t=e(82897),n=e.n(t),u=e(68404),s=e(90701),i=e(1140);const m=o=>{const{value:l,onChange:r}=o,d=(0,u.useCallback)(c=>{r({...l,[c]:!l[c]})},[l,r]);return u.createElement(s.Lh,{spacing:"xs"},Object.keys(l).map(c=>{const g=c;return u.createElement(i.B,{icon:l[g]?"eye-slash":"eye",onClick:()=>d(g),key:g,label:(0,t.startCase)(g),selected:l[g]})}))};function f(o){o.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:m,override:m,shouldApply:()=>!0,hideFromDefaults:!0,process:l=>l})}},80228:(G,O,e)=>{"use strict";e.d(O,{J:()=>u});var t=e(35363),n=e(40538);function u(s,i=!0){s.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.jK.List,settings:{options:[{value:n.jK.List,label:"List"},{value:n.jK.Table,label:"Table"}]},showIf:m=>m.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:m=>m.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:m=>m.legend.showLegend&&m.legend.placement==="right"}),i&&s.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:m=>m.legend.showLegend!==!1})}},35321:(G,O,e)=>{"use strict";e.d(O,{V:()=>c,n:()=>d});var t=e(68404),n=e(78798),u=e(14582),s=e(40538),i=e(90701),m=e(318),f=e(25474),o=e(48756),l=e(20017),r=e(85885);const d=({value:g,context:p,onChange:y,item:h})=>t.createElement(i.Lh,null,t.createElement(m.S,{value:g?.mode||s.o0.None,options:h.settings.options,onChange:a=>{y({...g,mode:a})}}),p.isOverride&&g?.mode&&g?.mode!==s.o0.None&&t.createElement(f.I,{type:"text",placeholder:"Group",suffix:t.createElement(o.u,{content:"Name of the stacking group",placement:"top"},t.createElement(l.h,{name:"question-circle"})),defaultValue:g?.group,onChange:a=>{y({...g,group:a.currentTarget.value.trim()})}}));function c(g,p,y=["Graph styles"]){g.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:y,defaultValue:p,editor:d,override:d,settings:{options:r.q.stacking},process:n.kG,shouldApply:h=>h.type===u.fS.number})}},96003:(G,O,e)=>{"use strict";e.d(O,{Z:()=>t});function t(n,u=!0){u&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},31650:(G,O,e)=>{"use strict";e.d(O,{L:()=>n});var t=e(40538);function n(u,s=!1){const i=["Tooltip"],m=s?[{value:t.f3.Single,label:"Single"},{value:t.f3.None,label:"Hidden"}]:[{value:t.f3.Single,label:"Single"},{value:t.f3.Multi,label:"All"},{value:t.f3.None,label:"Hidden"}],f=[{value:t.As.None,label:"None"},{value:t.As.Ascending,label:"Ascending"},{value:t.As.Descending,label:"Descending"}];u.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:i,defaultValue:"single",settings:{options:m}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:i,defaultValue:t.As.None,showIf:o=>o.tooltip.mode===t.f3.Multi,settings:{options:f}})}},14711:(G,O,e)=>{"use strict";e.d(O,{q:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.Y,StackingEditor:()=>f.n,addAxisConfig:()=>n.r,addHideFrom:()=>u.B,addLegendOptions:()=>s.J,addStackingConfig:()=>f.V,addTextSizeOptions:()=>m.Z,addTooltipOptions:()=>i.L});var n=e(23084),u=e(71464),s=e(80228),i=e(31650),m=e(96003),f=e(35321)},41441:(G,O,e)=>{"use strict";e.d(O,{$6:()=>t.l8,FI:()=>t.FI,KC:()=>t.KC,LB:()=>t.LB,bQ:()=>t.bQ,eU:()=>t.Jp,f3:()=>t.f3,i3:()=>t.i3,jK:()=>t.jK,mv:()=>t.Jp,o0:()=>t.o0,pu:()=>t.pu,wN:()=>t.wN});var t=e(40538)},37777:(G,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(44288);const n={"[":"]","{":"}","(":")"},u="brace_match";function s(){return{onKeyDown(i,m,f){const{value:o}=m;switch(i.key){case"(":case"{":case"[":{const{start:{offset:l,key:r},end:{offset:d,key:c},focus:{offset:g}}=o.selection,p=o.focusText.text;if(o.selection.isExpanded)return i.preventDefault(),m.insertTextByKey(r,l,i.key).insertTextByKey(c,d+1,n[i.key]).moveEndBackward(1),!0;if(g===p.length||p[g]===" "||Object.values(n).includes(p[g])){i.preventDefault();const y=n[i.key],h={key:`${u}-${(0,t.Z)()}`,type:`${u}-${y}`,anchor:{key:r,offset:l,object:"point"},focus:{key:c,offset:d+1,object:"point"},object:"annotation"};return m.insertText(i.key).insertText(y).addAnnotation(h).moveBackward(1),!0}break}case")":case"}":case"]":{const l=o.anchorText.text,r=o.selection.anchor.offset,d=l[r],c=i.key,g=`${u}-${c}`,p=o.annotations.find(y=>y?.type===g&&y.anchor.key===o.anchorText.key);if(p&&d===c&&!o.selection.isExpanded)return i.preventDefault(),m.moveFocusForward(1).removeAnnotation(p).moveAnchorForward(1),!0;break}case"Backspace":{const l=o.anchorText.text,r=o.selection.anchor.offset,d=l[r-1],c=l[r];if(n[d]&&n[d]===c)return i.preventDefault(),m.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return f()}}}},59358:(G,O,e)=>{"use strict";e.d(O,{G:()=>t});function t(){return{onKeyDown(n,u,s){const i=u.value;if(i.selection.isExpanded)return s();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const m=i.anchorText.text,f=i.selection.anchor.offset,l=m.length-f;return u.deleteForward(l),!0}return s()}}}},11993:(G,O,e)=>{"use strict";e.d(O,{w:()=>u});const t=(s,i,m)=>{if(!s.length)return;const f=s.slice(0,-1).join("").length+s.length-1;return s.join(`
`).slice(i,f+m)},n=s=>s?.replace(/[\uFEFF]/g,"");function u(){const s={onCopy(i,m,f){i.preventDefault();const{document:o,selection:l}=m.value,{start:{offset:r},end:{offset:d}}=l,c=o.getLeafBlocksAtRange(l).toArray().map(p=>p.text),g=n(t(c,r,d));return g&&i.clipboardData&&i.clipboardData.setData("Text",g),!0},onPaste(i,m,f){if(i.preventDefault(),i.clipboardData){const l=n(i.clipboardData.getData("Text"))?.split(`
`);if(l&&l.length){m.insertText(l[0]);for(const r of l.slice(1))m.splitBlock().insertText(r)}}return!0}};return{...s,onCut(i,m,f){return s.onCopy(i,m,f),m.deleteAtRange(m.value.selection),!0}}}},87908:(G,O,e)=>{"use strict";e.d(O,{R:()=>r});var t=e(59641),n=e(53594),u=e(40246);const s=(0,t.TB)("mod+["),i=(0,t.TB)("shift+tab"),m=(0,t.TB)("mod+]"),f="  ",o=(d,c,g)=>{const{startBlock:p,endBlock:y,selection:{start:{offset:h,key:a},end:{offset:v,key:C}}}=c.value;if(u.Z.serialize(c.value)==="")return;d.preventDefault();const E=p.getFirstText();E&&h===0&&a===E.key&&v===E.text.length&&C===E.key||!p.equals(y)?l(c,"right"):c.insertText(f)},l=(d,c)=>{const g=d.value.selection,p=d.value.document.getLeafBlocksAtRange(g).toArray();if(c==="left")for(const y of p){const h=y.text.length-y.text.trimLeft().length,a=y.getFirstText().key,v={anchor:{key:a,offset:h,path:[]},focus:{key:a,offset:h,path:[]}};d.deleteBackwardAtRange(n.e6.create(v),Math.min(f.length,h))}else{const{startText:y}=d.value,h=y.text.slice(0,g.start.offset),a=/^\s*$/.test(h);for(const v of p)d.insertTextByKey(v.getFirstText().key,0,f);a&&d.moveStartBackward(f.length)}};function r(){return{onKeyDown(d,c,g){if(s(d)||i(d))d.preventDefault(),l(c,"left");else if(m(d))d.preventDefault(),l(c,"right");else if(d.key==="Tab")o(d,c,g);else return g();return!0}}}},41538:(G,O,e)=>{"use strict";e.d(O,{$L:()=>f.$,Gp:()=>n.G,Rc:()=>s.R,Ze:()=>o.Z,bm:()=>l.b,dv:()=>m.d,hP:()=>t.h,wl:()=>u.w,z2:()=>i.z});var t=e(37777),n=e(59358),u=e(11993),s=e(87908),i=e(76756),m=e(26982),f=e(52001),o=e(1357),l=e(58090)},76756:(G,O,e)=>{"use strict";e.d(O,{z:()=>n});function t(u){let s=u.length-u.trimLeft().length;if(s){let i=u[0];for(;--s;)i+=u[0];return i}return""}function n(){return{onKeyDown(u,s,i){const m=s.value;if(m.selection.isExpanded)return i();if(u.key==="Enter"){u.preventDefault();const{startBlock:f}=m,o=f.text,l=t(o);return s.splitBlock().insertText(l).focus()}return i()}}}},26982:(G,O,e)=>{"use strict";e.d(O,{d:()=>t});function t({handler:n}){return{onKeyDown(u,s,i){return n&&u.key==="Enter"&&(u.shiftKey||u.ctrlKey)?(u.preventDefault(),n(u),s):i()}}}},52001:(G,O,e)=>{"use strict";e.d(O,{$:()=>u});var t=e(59641);const n=(0,t.TB)("mod+l");function u(){return{onKeyDown(s,i,m){if(n(s)){s.preventDefault();const{focusBlock:f,document:o}=i.value;i.moveAnchorToStartOfBlock(),o.getNextBlock(f.key)?i.moveFocusToStartOfNextBlock():i.moveFocusToEndOfText()}else return m();return!0}}}},32890:(G,O,e)=>{"use strict";e.d(O,{Z:()=>n});const n="prism-token"},1357:(G,O,e)=>{"use strict";e.d(O,{Z:()=>c,a:()=>h});var t=e(57706),n=e.n(t),u=e(53594),s=e(32890),i=e(7908),m=e(68404);function f(a){return a.object==="block"&&a.type==="code_block"}function o(a){return"javascript"}function l(a,v,C){const{decoration:E}=a;if(E.type!==s.Z)return C();const P=E.data.get("className");return m.createElement("span",{className:P},a.children)}class r extends(0,i.Record)({onlyIn:f,getSyntax:o,renderDecoration:l}){constructor(v){super(v)}}const d=r;function c(a={},v=n().languages){const C=new d(a);return{decorateNode:(E,P,x)=>{if(!C.onlyIn(E))return x();const M=u.gO.create(E),S=C.getSyntax(M),D=v[S];if(!D)return[];const R=M.getTexts().map(N=>N&&N.getText()).join(`
`),L=n().tokenize(R,D),w=h(L),A=P.value.data.set("tokens",w);return P.setData(A),g(C,L,M)},renderDecoration:(E,P,x)=>C.renderDecoration({children:E.children,decoration:E.decoration},P,x)}}function g(a,v,C){const E=C.getTexts(),P=[];let x=0,M=0;return E.forEach(S=>{M=x+S.getText().length;let D=0;function T(R,L){if(typeof R=="string"){if(L){const w=p({text:S,textStart:x,textEnd:M,start:D,end:D+R.length,className:`prism-token token ${L}`,block:C});w&&P.push(w)}D+=R.length}else if(L=`${L} ${R.type}`,R.alias&&(L+=" "+R.alias),typeof R.content=="string"){const w=p({text:S,textStart:x,textEnd:M,start:D,end:D+R.content.length,className:`prism-token token ${L}`,block:C});w&&P.push(w),D+=R.content.length}else for(let w=0;w<R.content.length;w+=1)T(R.content[w],L)}v.forEach(T),x=M+1}),P}function p({text:a,textStart:v,textEnd:C,start:E,end:P,className:x,block:M}){return E>=C||P<=v?null:(E=Math.max(E,v),P=Math.min(P,C),E-=v,P-=v,M.createDecoration({object:"decoration",anchor:{key:a.key,offset:E,object:"point"},focus:{key:a.key,offset:P,object:"point"},type:s.Z,data:{className:x}}))}function y(a){return typeof a=="string"?[{content:a,types:[],aliases:[]}]:Array.isArray(a)?a.flatMap(v=>y(v)):a instanceof n().Token?y(a.content).flatMap(v=>{let C=[];return typeof a.alias=="string"?C=[a.alias]:C=a.alias??[],{content:v.content,types:[a.type,...v.types],aliases:[...C,...v.aliases]}}):[]}function h(a){const v=y(a);if(!v.length)return[];const C=v[0];C.prev=null,C.next=v.length>=2?v[1]:null,C.offsets={start:0,end:C.content.length};for(let P=1;P<v.length-1;P++)v[P].prev=v[P-1],v[P].next=v[P+1],v[P].offsets={start:v[P-1].offsets.end,end:v[P-1].offsets.end+v[P].content.length};const E=v[v.length-1];return E.prev=v.length>=2?v[v.length-2]:null,E.next=null,E.offsets={start:v.length>=2?v[v.length-2].offsets.end:0,end:v.length>=2?v[v.length-2].offsets.end+E.content.length:E.content.length},v}},58090:(G,O,e)=>{"use strict";e.d(O,{b:()=>A});var t=e(82897),n=e(68404),u=e(97394),s=e(75478),i=e(29516),m=e(71344),f=e(13265);const o=W=>W.reduce((I,{items:F,label:V})=>(I.push({label:V,kind:m.c.GroupTitle}),F.reduce((b,X)=>(b.push(X),b),I)),[]),l=W=>W.reduce((I,F)=>I.length<F.label.length?F.label:I,""),r=(W,I,F)=>{const V=(0,f.Z)(F,{font:W.typography.fontFamilyMonospace,fontSize:W.typography.bodySmall.fontSize,fontWeight:"normal"}),b=c(V.width,W),X=d(V.height,W),k=g(X,I);return{listWidth:b,listHeight:k,itemHeight:X}},d=(W,I)=>{const F=I.spacing.gridSize*2;return W+F},c=(W,I)=>{const F=I.spacing.gridSize*3,V=800;return Math.min(Math.max(W+F,200),V)},g=(W,I)=>{const F=Math.min(I.length,10),V=100,b=F*W;return Math.max(b,V)};var p=e(52423),y=e(41959);const h=(W,I,F)=>({typeaheadItem:p.css`
      label: type-ahead-item;
      z-index: 11;
      padding: ${W.spacing(1,1,1,2)};
      border: ${W.colors.border.medium};
      overflow-y: scroll;
      overflow-x: hidden;
      outline: none;
      background: ${W.colors.background.secondary};
      color: ${W.colors.text};
      box-shadow: 0 0 20px ${W.v1.colors.dropdownShadow};
      visibility: ${F===!0?"visible":"hidden"};
      width: 250px;
      min-height: ${I+parseInt(W.spacing(.25),10)}px;
      position: relative;
      word-break: break-word;
    `}),a=({item:W,height:I})=>{const F=W&&!!W.documentation,V=W?W.label:"",b=(0,y.a)(W?.documentation),X=(0,i.l4)(),k=h(X,I,F);return n.createElement("div",{className:(0,p.cx)([k.typeaheadItem])},n.createElement("b",null,V),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:b}}))};var v=e(47846),C=e.n(v),E=e(11265);const P=W=>({typeaheadItem:p.css`
    border: none;
    background: none;
    text-align: left;
    label: type-ahead-item;
    height: auto;
    font-family: ${W.typography.fontFamilyMonospace};
    padding: ${W.spacing(1,1,1,2)};
    font-size: ${W.typography.bodySmall.fontSize};
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: 11;
    display: block;
    white-space: nowrap;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),
      background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1);
  `,typeaheadItemSelected:p.css`
    label: type-ahead-item-selected;
    background-color: ${W.colors.background.secondary};
  `,typeaheadItemMatch:p.css`
    label: type-ahead-item-match;
    color: ${W.v1.palette.yellow};
    border-bottom: 1px solid ${W.v1.palette.yellow};
    padding: inherit;
    background: inherit;
  `,typeaheadItemGroupTitle:p.css`
    label: type-ahead-item-group-title;
    color: ${W.colors.text.secondary};
    font-size: ${W.typography.bodySmall.fontSize};
    line-height: ${W.typography.body.lineHeight};
    padding: ${W.spacing(1)};
  `}),x=W=>{const I=(0,i.wW)(P),{isSelected:F,item:V,prefix:b,style:X,onMouseEnter:k,onMouseLeave:H,onClickItem:Y}=W,ee=F?(0,p.cx)([I.typeaheadItem,I.typeaheadItemSelected]):(0,p.cx)([I.typeaheadItem]),ue=(0,p.cx)([I.typeaheadItemMatch]),q=(0,p.cx)([I.typeaheadItemGroupTitle]),ge=V.label||"";return V.kind===m.c.GroupTitle?n.createElement("li",{className:q,style:X},n.createElement("span",null,ge)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:ee,style:X,onMouseDown:Y,onMouseEnter:k,onMouseLeave:H,type:"button"},V.highlightParts!==void 0?n.createElement(E.H,{text:ge,highlightClassName:ue,highlightParts:V.highlightParts}):n.createElement(C(),{textToHighlight:ge,searchWords:[b??""],autoEscape:!0,highlightClassName:ue})))},M=(W,I)=>W-I*Math.floor(W/I);class S extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const I=o(this.props.groupedItems),F=l(I),{listWidth:V,listHeight:b,itemHeight:X}=r(this.context,I,F);this.setState({listWidth:V,listHeight:b,itemHeight:X,allItems:I})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(I,F)=>{if(this.state.typeaheadIndex!==null&&F.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(I.groupedItems,this.props.groupedItems)===!1){const V=o(this.props.groupedItems),b=l(V),{listWidth:X,listHeight:k,itemHeight:H}=r(this.context,V,b);this.setState({listWidth:X,listHeight:k,itemHeight:H,allItems:V,typeaheadIndex:null})}},this.onMouseEnter=I=>{this.setState({hoveredItem:I})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=I=>{const F=this.state.allItems.length;if(F){const V=this.state.typeaheadIndex||0;let b=M(V+I,F);this.state.allItems[b].kind===m.c.GroupTitle&&(b=M(b+I,F)),this.setState({typeaheadIndex:b});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const I=window.getSelection(),F=I&&I.anchorNode;if(F&&F.parentElement){const V=F.parentElement.getBoundingClientRect(),b=window.scrollX,X=window.scrollY;return`position: absolute; display: flex; top: ${V.top+X+V.height+6}px; left: ${V.left+b-2}px`}return""}render(){const{prefix:I,isOpen:F=!1,origin:V}=this.props,{allItems:b,listWidth:X,listHeight:k,itemHeight:H,hoveredItem:Y,typeaheadIndex:ee}=this.state,ue=Y||ee,q=b[Y||ee||0];return n.createElement(D,{origin:V,isOpen:F,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(s.t7,{ref:this.listRef,itemCount:b.length,itemSize:H,itemKey:ge=>{const De=b&&b[ge];return De?`${ge}-${De.label}`:`${ge}`},width:X,height:k},({index:ge,style:De})=>{const fe=b&&b[ge];return fe?n.createElement(x,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(fe):{},isSelected:ee===null?!1:b[ee]===fe,item:fe,prefix:I,style:De,onMouseEnter:()=>this.onMouseEnter(ge),onMouseLeave:this.onMouseLeave}):null})),ue&&n.createElement(a,{height:k,item:q}))}}S.contextType=i.Ni;class D extends n.PureComponent{constructor(I){super(I);const{index:F=0,origin:V="query",style:b}=I;this.node=document.createElement("div"),this.node.setAttribute("style",b),this.node.classList.add("slate-typeahead",`slate-typeahead-${V}-${F}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),u.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var T=e(5745),R=e(54285),L=e(32890);const w=250;function A({onTypeahead:W,cleanText:I,onWillApplySuggestion:F,portalOrigin:V}){let b,X={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const k=(0,t.debounce)(N,w),H=Y=>{X={...X,...Y}};return{onBlur:(Y,ee,ue)=>(X={...X,groupedItems:[]},ue()),onClick:(Y,ee,ue)=>(X={...X,groupedItems:[]},ue()),onKeyDown:(Y,ee,ue)=>{const ge=X.groupedItems.length;switch(Y.key){case"Escape":{if(ge)return Y.preventDefault(),X={...X,groupedItems:[]},ee.insertText("");break}case"ArrowDown":case"ArrowUp":if(ge){Y.preventDefault(),b.moveMenuIndex(Y.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(Y.shiftKey||Y.ctrlKey)&&ge)return Y.preventDefault(),b.insertSuggestion();break}case"Tab":{if(ge)return Y.preventDefault(),b.insertSuggestion();break}default:{Y.key.length===1&&k(ee,H,W,I);break}}return ue()},commands:{selectSuggestion:(Y,ee)=>{const ue=X.groupedItems;if(!ue||!ue.length)return Y;const q=Y.applyTypeahead(ee);return k(Y,H,W,I),q},applyTypeahead:(Y,ee)=>{let ue=ee.insertText||ee.label;const q=ee.kind==="function",ge=ee.move||0,De=ge>0?ge:0,fe=ge<0?-ge:0,{typeaheadPrefix:me,typeaheadText:ce,typeaheadContext:ie}=X;F&&(ue=F(ue,{groupedItems:X.groupedItems,typeaheadContext:ie,typeaheadPrefix:me,typeaheadText:ce}));const re=ee.deleteBackwards||me.length,J=(I?I(ce):ce).length-me.length,te=ce.indexOf(me),j=me&&(J>0&&te>-1||ue===ce)&&!q?J+te:0;if(ue.match(/\n/)){const be=(0,T.xl)(ue);return Y.deleteBackward(re).deleteForward(j).insertFragment(be).focus(),Y}return X={...X,groupedItems:[]},Y.snapshotSelection().deleteBackward(re).deleteForward(j).insertText(ue).moveForward(De).moveBackward(fe).focus(),Y}},renderEditor(Y,ee,ue){if(ee.value.selection.isExpanded)return ue();const q=ue();return n.createElement(n.Fragment,null,q,n.createElement(S,{menuRef:ge=>b=ge,origin:V,prefix:X.typeaheadPrefix,isOpen:!!X.groupedItems.length,groupedItems:X.groupedItems,onSelectSuggestion:ee.selectSuggestion}))}}}const N=async(W,I,F,V)=>{if(!F)return;const{value:b}=W,{selection:X}=b,k=b.document.getClosestBlock(b.focusBlock.key),H=b.selection.start.offset-1,Y=k&&k.getDecorations(W),ee=Y?Y.filter(Ee=>Ee.start.offset<=H&&Ee.end.offset>H&&Ee.type===L.Z).toArray():[],ue=Y&&Y.filter(Ee=>Ee.end.offset<=H&&Ee.type===L.Z&&Ee.data.get("className").includes("label-key")).last(),q=ue&&b.focusText.text.slice(ue.start.offset,ue.end.offset),ge=ee.map(Ee=>Ee.data.get("className")).join(" ").split(" ").filter(Ee=>Ee.length);let De=b.focusText.text,fe=De.slice(0,X.focus.offset);ee.length&&(De=b.focusText.text.slice(ee[0].start.offset,ee[0].end.offset),fe=b.focusText.text.slice(ee[0].start.offset,X.focus.offset));const me=fe.match(/(?:!?=~?"?|")(.*)/);me?fe=me[1]:V&&(fe=V(fe));const{suggestions:ce,context:ie}=await F({prefix:fe,text:De,value:b,wrapperClasses:ge,labelKey:q||void 0,editor:W}),re=ce.map(Ee=>{if(!Ee.items)return Ee;const J=Ee.searchFunctionType||(Ee.prefixMatch?R.Z.Prefix:R.Z.Word),te=R.n[J];let ne={...Ee};return fe&&(Ee.skipFilter||(ne.items=ne.items.filter(j=>(j.filterText||j.label).length>=fe.length),ne.items=te(ne.items,fe)),ne.items=ne.items.filter(j=>!(j.insertText===fe||(j.filterText??j.label)===fe))),Ee.skipSort||(ne.items=(0,t.sortBy)(ne.items,j=>j.sortText===void 0?j.sortValue!==void 0?j.sortValue:j.label:j.sortText||j.label)),ne}).filter(Ee=>Ee.items&&Ee.items.length);I({groupedItems:re,typeaheadPrefix:fe,typeaheadContext:ie,typeaheadText:De}),W.blur().focus()}},49483:(G,O,e)=>{"use strict";e.d(O,{n:()=>c});var t=e(78966),n=e(68404),u=e(29516);function s(g){return t.css`
    .panel-options-group {
      border-bottom: 1px solid ${g.colors.border.weak};
    }

    .panel-options-group__header {
      padding: ${g.spacing(1,2,1,1)};
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 500;
      color: ${g.colors.text.primary};

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.primary,.03)};
      }
    }

    .panel-options-group__icon {
      color: ${g.colors.text.secondary};
      margin-right: ${g.spacing(1)};
      padding: ${g.spacing(0,.9,0,.6)};
    }

    .panel-options-group__title {
      position: relative;
    }

    .panel-options-group__body {
      padding: ${g.spacing(1,2,1,4)};
    }
  `}function i(g){return t.css`
    .card-section {
      margin-bottom: ${g.spacing(4)};
    }

    .card-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      list-style-type: none;
    }

    .card-item {
      display: block;
      height: 100%;
      background: ${g.colors.background.secondary};
      box-shadow: none;
      padding: ${g.spacing(2)};
      border-radius: 4px;

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.secondary,.03)};
      }

      .label-tag {
        margin-left: ${g.spacing(1)};
        font-size: 11px;
        padding: 2px 6px;
      }
    }

    .card-item-body {
      display: flex;
      overflow: hidden;
    }

    .card-item-details {
      overflow: hidden;
    }

    .card-item-header {
      margin-bottom: ${g.spacing(2)};
    }

    .card-item-type {
      color: ${g.colors.text.secondary};
      text-transform: uppercase;
      font-size: ${g.typography.size.sm};
      font-weight: ${g.typography.fontWeightMedium};
    }

    .card-item-badge {
      margin: 6px 0;
    }

    .card-item-notice {
      font-size: ${g.typography.size.sm};
    }

    .card-item-name {
      color: ${g.colors.text.primary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-label {
      margin-left: ${g.spacing(1)};
    }

    .card-item-sub-name {
      color: ${g.colors.text.secondary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-sub-name--header {
      color: ${g.colors.text.secondary};
      text-transform: uppercase;
      margin-bottom: ${g.spacing(2)};
      font-size: ${g.typography.size.sm};
      font-weight: bold;
    }

    .card-list-layout-grid {
      .card-item-type {
        display: inline-block;
      }

      .card-item-notice {
        font-size: ${g.typography.size.sm};
        display: inline-block;
        margin-left: ${g.spacing(2)};
      }

      .card-item-header-action {
        float: right;
      }

      .card-item-wrapper {
        width: 100%;
        padding: ${g.spacing(0,2,2,0)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item-figure {
        margin: ${g.spacing(0,2,2,0)}0;
        height: 80px;

        img {
          width: 80px;
        }
      }

      .card-item-name {
        font-size: ${g.typography.h3.fontSize};
      }

      ${g.breakpoints.up("md")} {
        .card-item-wrapper {
          width: 50%;
        }
      }

      ${g.breakpoints.up("lg")} {
        .card-item-wrapper {
          width: 33.333333%;
        }
      }

      &.card-list-layout-grid--max-2-col {
        ${g.breakpoints.up("lg")} {
          .card-item-wrapper {
            width: 50%;
          }
        }
      }
    }

    .card-list-layout-list {
      .card-item-wrapper {
        padding: 0;
        width: 100%;
        margin-bottom: ${g.spacing(1)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item {
        border-radius: 2px;
      }

      .card-item-header {
        float: right;
        text-align: right;
      }

      .card-item-figure {
        margin: ${g.spacing(0,2,0,0)};
        img {
          width: 48px;
        }
      }

      .card-item-name {
        font-size: ${g.typography.h4.fontSize};
      }

      .card-item-sub-name {
        font-size: ${g.typography.size.sm};
      }

      .layout-selector {
        margin-right: 0;
      }
    }
  `}var m=e(19253);function f(g){return t.css`
    html {
      -ms-overflow-style: scrollbar;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      height: 100%;
      font-size: ${g.typography.htmlFontSize}px;
      font-family: ${g.typography.fontFamily};
      line-height: ${g.typography.body.lineHeight};
      font-kerning: normal;
    }

    :root {
      color-scheme: ${g.colors.mode};
    }

    body {
      height: 100%;
      width: 100%;
      position: absolute;
      color: ${g.colors.text.primary};
      background-color: ${g.colors.background.canvas};
      ${o(g.typography.body)}
    }

    h1,
    .h1 {
      ${o(g.typography.h1)}
    }
    h2,
    .h2 {
      ${o(g.typography.h2)}
    }
    h3,
    .h3 {
      ${o(g.typography.h3)}
    }
    h4,
    .h4 {
      ${o(g.typography.h4)}
    }
    h5,
    .h5 {
      ${o(g.typography.h5)}
    }
    h6,
    .h6 {
      ${o(g.typography.h6)}
    }

    p {
      margin: 0 0 ${g.spacing(2)};
    }

    button {
      letter-spacing: ${g.typography.body.letterSpacing};

      &:focus-visible {
        outline: ${(0,m.getFocusStyles)(g)};
      }
      &:focus {
        outline: none;
      }
    }

    // Ex: 14px base font * 85% = about 12px
    small {
      font-size: ${g.typography.bodySmall.fontSize};
    }

    b,
    strong {
      font-weight: ${g.typography.fontWeightMedium};
    }

    em {
      font-style: italic;
      color: ${g.colors.text.primary};
    }

    cite {
      font-style: normal;
    }

    // Utility classes
    .muted {
      color: ${g.colors.text.secondary};
    }

    a.muted:hover,
    a.muted:focus {
      color: ${g.colors.text.primary};
    }

    .text-warning {
      color: ${g.colors.warning.text};

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.warning.text,.15)};
      }
    }

    .text-error {
      color: ${g.colors.error.text};

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.error.text,.15)};
      }
    }

    .text-success {
      color: $success-text-color;

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.success.text,.15)};
      }
    }

    a {
      cursor: pointer;
      color: ${g.colors.text.primary};
      text-decoration: none;

      &:focus {
        outline: none;
      }

      &:focus-visible {
        ${(0,m.getFocusStyles)(g)}
      }

      &: [disabled] {
        cursor: default;
        pointer-events: none !important;
      }
    }

    .text-link {
      text-decoration: underline;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }

    .highlight-search-match {
      background: ${g.components.textHighlight.background};
      color: ${g.components.textHighlight.text};
      padding: 0;
    }
  `}function o(g){return`
    margin: 0;
    font-size: ${g.fontSize};
    line-height: ${g.lineHeight};
    font-weight: ${g.fontWeight};
    letter-spacing: ${g.letterSpacing};
    font-family: ${g.fontFamily};
    margin-bottom: 0.45em;
  `}function l(g){return t.css`
    input,
    button,
    select,
    textarea {
      font-size: ${g.typography.body.fontSize};
      font-weight: ${g.typography.body.fontWeight};
      line-height: ${g.typography.body.lineHeight};
    }
    input,
    button,
    select,
    textarea {
      font-family: ${g.typography.body.fontFamily};
    }

    input,
    select {
      background-color: ${g.components.input.background};
      color: ${g.components.input.text};
      border: none;
      box-shadow: none;
    }

    textarea {
      height: auto;
    }

    // Reset width of input images, buttons, radios, checkboxes
    input[type='file'],
    input[type='image'],
    input[type='submit'],
    input[type='reset'],
    input[type='button'],
    input[type='radio'],
    input[type='checkbox'] {
      width: auto; // Override of generic input selector
    }
  `}function r(g){return t.css`
    // TODO copy from _utils.scss
  `}function d(g){const p=g.breakpoints.values.xxl+g.spacing.gridSize*2+g.components.sidemenu.width;return t.css`
    .grafana-app {
      display: flex;
      align-items: stretch;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .main-view {
      position: relative;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      flex: 1 1 0;
      min-width: 0;
    }

    .page-scrollbar-content {
      display: flex;
      min-height: 100%;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .page-container {
      flex-grow: 1;
      flex-basis: 100%;
      padding-left: ${g.spacing(2)};
      padding-right: ${g.spacing(2)};

      ${g.breakpoints.up("sm")} {
        margin: ${g.spacing(0,1)};
      }

      ${g.breakpoints.up("md")} {
        margin: ${g.spacing(0,2)};
      }

      @media (min-width: ${p}px) {
        max-width: ${g.breakpoints.values.xxl}px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
    }

    .page-full {
      margin-left: ${g.spacing(2)};
      padding-left: ${g.spacing(2)};
      padding-right: ${g.spacing(2)};
    }

    .page-body {
      padding: ${g.spacing(1)};
      background: ${g.components.panel.background};
      border: 1px solid ${g.components.panel.borderColor};
      margin-bottom: 32px;

      ${g.breakpoints.up("md")} {
        padding: ${g.spacing(2)};
      }

      ${g.breakpoints.up("lg")} {
        padding: ${g.spacing(3)};
      }
    }

    .page-heading {
      font-size: ${g.typography.h4.fontSize};
      margin-top: 0;
      margin-bottom: ${g.spacing(2)};
    }

    .page-action-bar {
      margin-bottom: ${g.spacing(2)};
      display: flex;
      align-items: flex-start;

      > a,
      > button,
      > div:nth-child(2) {
        margin-left: ${g.spacing(2)};
      }
    }

    .page-action-bar--narrow {
      margin-bottom: 0;
    }

    .page-action-bar__spacer {
      width: ${g.spacing(2)};
      flex-grow: 1;
    }

    .page-sub-heading {
      margin-bottom: ${g.spacing(2)};
    }

    .page-sub-heading-icon {
      margin-left: ${g.spacing(1)};
      margin-top: ${g.spacing(.5)};
    }

    .page-hidden {
      display: none;
    }
  `}function c(){const g=(0,u.l4)();return n.createElement(t.Global,{styles:[f(g),l(g),d(g),i(g),s(g),r(g)]})}},29516:(G,O,e)=>{"use strict";e.d(O,{Fg:()=>d,HE:()=>r,Ni:()=>o,Zz:()=>l,l4:()=>c,sJ:()=>y,wW:()=>p,yK:()=>g});var t=e(24420),n=e.n(t),u=e(68404),s=e(36328),i=e(82385);let m=null;const f=new WeakMap,o=u.createContext((0,s.j)());o.displayName="ThemeContext";const l=h=>{const a=v=>{const C=m||o;return u.createElement(C.Consumer,null,E=>u.createElement(h,{...v,theme:E.v1}))};return a.displayName=`WithTheme(${h.displayName})`,n()(a,h),a},r=h=>{const a=v=>{const C=m||o;return u.createElement(C.Consumer,null,E=>u.createElement(h,{...v,theme:E}))};return a.displayName=`WithTheme(${h.displayName})`,n()(a,h),a};function d(){return(0,u.useContext)(m||o).v1}function c(){return(0,u.useContext)(m||o)}function g(h){const a=d();let v=f.get(h);return v||(v=(0,i.B)(h),f.set(h,v)),v(a)}function p(h){const a=c();let v=f.get(h);return v||(v=(0,i.B)(h),f.set(h,v)),v(a)}const y=h=>(m=u.createContext(h),()=>{m=null})},81365:(G,O,e)=>{"use strict";e.d(O,{nz:()=>f.n,Ni:()=>t.Ni,gh:()=>s,Zu:()=>i,sJ:()=>t.sJ,GU:()=>o,Bb:()=>m.B,yK:()=>t.yK,wW:()=>t.wW,Fg:()=>t.Fg,l4:()=>t.l4,Zz:()=>t.Zz,HE:()=>t.HE});var t=e(29516),n=e(36328);let u;const s=(l="dark")=>u?u(l):(0,n.j)({colors:{mode:l}}).v1,i=l=>(u=l,()=>{u=null});var m=e(82385),f=e(49483),o=e(19253)},19253:(G,O,e)=>{"use strict";e.r(O),e.d(O,{cardChrome:()=>u,focusCss:()=>l,getFocusStyles:()=>d,getMouseFocusStyles:()=>r,getTooltipContainerStyles:()=>c,hoverColor:()=>s,listItem:()=>i,listItemSelected:()=>m,mediaUp:()=>f});var t=e(35008),n=e.n(t);function u(g){return`
    background: ${g.colors.background.secondary};
    &:hover {
      background: ${s(g.colors.background.secondary,g)};
    }
    box-shadow: ${g.components.panel.boxShadow};
    border-radius: ${g.shape.borderRadius(2)};
`}function s(g,p){return p.isDark?n()(g).brighten(2).toString():n()(g).darken(2).toString()}function i(g){return`
  background: ${g.colors.background.secondary};
  &:hover {
    background: ${s(g.colors.background.secondary,g)};
  }
  box-shadow: ${g.components.panel.boxShadow};
  border-radius: ${g.shape.borderRadius(2)};
`}function m(g){return`
    background: ${s(g.colors.background.secondary,g)};
    color: ${g.colors.text.maxContrast};
`}function f(g){return`only screen and (min-width: ${g})`}const o=g=>g.hasOwnProperty("v1"),l=g=>{const p=o(g),y=p?g.colors.background.canvas:g.colors.bodyBg,h=p?g.colors.primary.main:g.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${y}, 0 0 0px 4px ${h};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function r(g){return{outline:"none",boxShadow:"none"}}function d(g){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${g.colors.background.canvas}, 0 0 0px 4px ${g.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const c=g=>`
  overflow: hidden;
  background: ${g.colors.background.secondary};
  box-shadow: ${g.shadows.z2};
  max-width: 800px;
  padding: ${g.spacing(1)};
  border-radius: ${g.shape.borderRadius()};
  z-index: ${g.zIndex.tooltip};
`},82385:(G,O,e)=>{"use strict";e.d(O,{B:()=>n});var t=e(58635);function n(u){return(0,t.Z)(u)}},71344:(G,O,e)=>{"use strict";e.d(O,{c:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},46437:()=>{"use strict"},91228:(G,O,e)=>{"use strict";e.d(O,{BI:()=>u,e7:()=>s,iJ:()=>t.iJ});var t=e(43565),n=e(14582);const u=()=>Object.keys(t._S);function s(i){if(i)switch(i.type){case n.fS.time:return"clock-nine";case n.fS.string:return"font";case n.fS.number:return"calculator-alt";case n.fS.boolean:return"toggle-on";case n.fS.trace:return"info-circle";case n.fS.geo:return"map-marker";case n.fS.other:return"brackets-curly"}return"question-circle"}},46894:(G,O,e)=>{"use strict";e.r(O),e.d(O,{CompletionItemKind:()=>i.c,getAvailableIcons:()=>r.BI,getFieldTypeIcon:()=>r.e7,toIconName:()=>r.iJ});var t=e(7647),n=e.n(t),a={};for(const v in t)v!=="default"&&(a[v]=()=>t[v]);e.d(O,a);var u=e(67258),s=e.n(u),a={};for(const v in u)v!=="default"&&(a[v]=()=>u[v]);e.d(O,a);var i=e(71344),m=e(99236),f=e.n(m),a={};for(const v in m)["default","CompletionItemKind"].indexOf(v)<0&&(a[v]=()=>m[v]);e.d(O,a);var o=e(46437),l=e.n(o),a={};for(const v in o)["default","CompletionItemKind"].indexOf(v)<0&&(a[v]=()=>o[v]);e.d(O,a);var r=e(91228),d=e(74209),c=e.n(d),a={};for(const v in d)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","toIconName"].indexOf(v)<0&&(a[v]=()=>d[v]);e.d(O,a);var g=e(43671),p=e.n(g),a={};for(const v in g)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","toIconName"].indexOf(v)<0&&(a[v]=()=>g[v]);e.d(O,a);var y=e(3012),h=e.n(y),a={};for(const v in y)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","toIconName"].indexOf(v)<0&&(a[v]=()=>y[v]);e.d(O,a)},67258:()=>{"use strict"},3012:()=>{"use strict"},74209:()=>{"use strict"},43671:()=>{"use strict"},99236:()=>{"use strict"},7647:()=>{"use strict"},76167:(G,O,e)=>{"use strict";e.d(O,{i:()=>t});const t=(n,u)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&u())}},1301:(G,O,e)=>{"use strict";e.d(O,{Gc:()=>h,Jx:()=>m,O9:()=>c,Wm:()=>v,_V:()=>l,bM:()=>a,f7:()=>r,iV:()=>d,ns:()=>o,te:()=>f});var t=e(82897),n=e.n(t),u=e(35008),s=e.n(u);const i=4,m="rgba(0, 211, 255, 1)",f="rgba(11, 237, 50, 1)",o="rgba(237, 46, 24, 1)",l="rgba(150, 150, 150, 1)",r="rgba(247, 149, 32, 1)",d=.09,c=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function g(C){const E=(0,t.map)(C,p),P=(0,t.sortBy)(E,["h"]),x=(0,t.chunk)(P,i),M=(0,t.map)(x,D=>(0,t.sortBy)(D,"l")),S=(0,t.flattenDeep)((0,t.zip)(...M));return(0,t.map)(S,y)}function p(C){return s()(C).toHsl()}function y(C){return s()(C).toHexString()}function h(C){return s()(C).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function a(C,E){const P=s()(C),x=P.getBrightness();return P.getAlpha()<.3?E?"rgb(247, 248, 250)":"rgb(32, 34, 38)":x>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let v=g(c)},26774:(G,O,e)=>{"use strict";e.d(O,{R:()=>t,g:()=>n});const t=u=>u().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick})),n=u=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(u)},76804:(G,O,e)=>{"use strict";e.d(O,{x:()=>t});function t(n,u,s){}},29344:(G,O,e)=>{"use strict";e.r(O),e.d(O,{getNextCharacter:()=>n,getPreviousCousin:()=>t}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(u){const s=(this.document||this.ownerDocument).querySelectorAll(u);let i=this,m;do{for(m=s.length;--m>=0&&s.item(m)!==i;);i=i.parentElement}while(m<0&&i);return i});function t(u,s){let i=u.parentElement.previousSibling,m;for(;i;){if(m=i.querySelector(s),m)return m;i=i.previousSibling}}function n(u){const s=(u||window).getSelection();if(!s||!s.anchorNode)return null;const i=s.getRangeAt(0),m=s.anchorNode.textContent,f=i.startOffset;return m.slice(f,f+1)}},89542:(G,O,e)=>{"use strict";e.d(O,{O:()=>t});function t(n){const s=n.lastIndexOf("."),i=n.substring(s),m=n.substring(0,s);return m.length<16?n:`${m.substring(0,16)}...${i}`}},11337:(G,O,e)=>{"use strict";e.d(O,{C:()=>u});var t=e(82897),n=e.n(t);function u(s,i){let m=0,f=s.indexOf(i);i=i.replace(/\s/g,"");const o=[];if(f!==-1)return{distance:0,found:!0,ranges:[{start:f,end:f+i.length-1}]};for(const l of i){const r=s.indexOf(l,f);if(r===-1)return{distance:1/0,ranges:[],found:!1};if(f!==-1&&(m+=r-f),f=r+1,o.length===0)o.push({start:r,end:r});else{const d=(0,t.last)(o);r===d.end+1?d.end++:o.push({start:r,end:r})}}return{distance:m,ranges:o,found:!0}}},39451:(G,O,e)=>{"use strict";e.d(O,{c:()=>m,t:()=>o});var t=e(36509),n=e(68404),u=e(4696),s=e(45710);function i(){t.ZP.options.lng||t.ZP.use(u.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const m=l=>(i(),n.createElement(s.c,{...l})),f=t.ZP.t,o=(l,r,d)=>(i(),f(l,r,d))},88154:(G,O,e)=>{"use strict";e.d(O,{ns:()=>u.ns,Jx:()=>u.Jx,Qi:()=>t,JU:()=>s.JU,_V:()=>u._V,zG:()=>h,te:()=>u.te,f7:()=>u.f7,iV:()=>u.iV,Ot:()=>n,Yi:()=>i.Yi,nu:()=>c.Z,_J:()=>g._J,xq:()=>y.x,MX:()=>r.MX,O9:()=>u.O9,hu:()=>p.h,C6:()=>a.C,AE:()=>r.AE,iu:()=>l.i,np:()=>o.n,vm:()=>f.vm,Bx:()=>f.Bx,bM:()=>u.bM,Gc:()=>u.Gc,z3:()=>s.z3,go:()=>m.g,Rc:()=>m.R,xl:()=>i.xl,l1:()=>i.l1,X1:()=>r.X1,FE:()=>s.FE,Wm:()=>u.Wm,NW:()=>d.N,Gu:()=>s.Gu});var t=e(29344),n=e(10027),u=e(1301),s=e(7505),i=e(5745),m=e(26774),f=e(74099),o=e(94150),l=e(89814),r=e(80369),d=e(80313),c=e(54285),g=e(2525),p=e(62009),y=e(76804),h=(v=>(v.id="id",v.title="title",v.subTitle="subTitle",v.mainStat="mainStat",v.secondaryStat="secondaryStat",v.source="source",v.target="target",v.detail="detail__",v.arc="arc__",v.color="color",v))(h||{}),a=e(11337)},62009:(G,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(82897),n=e.n(t);const u=(0,t.throttle)((...i)=>{console.log(...i)},500),s=i=>{let m=!1;return{logger:(f,o=!1,...l)=>{},enable:()=>m=!0,disable:()=>m=!1,isEnabled:()=>m}}},80369:(G,O,e)=>{"use strict";e.d(O,{AE:()=>i,MX:()=>f,X1:()=>m});let t;const n=new Map,u=500;let s="";function i(){return t||(t=document.createElement("canvas").getContext("2d")),t}function m(o,l){const r=`${l}px 'Inter'`,d=o+r,c=n.get(d);if(c)return c;const g=i();s!==r&&(g.font=s=r);const p=g.measureText(o);return n.size===u&&n.clear(),n.set(d,p),p}function f(o,l,r,d,c){const g=m(o,14),p=l/(g.width+2)*14,y=r/d,h=Math.min(y,p);return Math.min(h,c??h)}},10027:(G,O,e)=>{"use strict";e.r(O),e.d(O,{getChildId:()=>n,renderOrCallToRender:()=>u});var t=e(68404);function n(s){let i;const m=t.Children.only(s);return"id"in m?.props?i=m.props.id:"inputId"in m.props&&(i=m?.props.inputId),typeof i=="string"?i:void 0}function u(s,i){if(t.isValidElement(s)||typeof s=="string"||typeof s=="number")return s;if(typeof s=="function")return s(i);throw new Error(`${s} is not a React element nor a function that returns React element`)}},94150:(G,O,e)=>{"use strict";e.d(O,{n:()=>n});let t=null;function n(){if(t!==null)return t;if(typeof document<"u"){const u=document.createElement("div"),s={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(s).map(i=>{u.style[i]=s[i]}),document.body.appendChild(u),t=u.offsetWidth-u.clientWidth,document.body.removeChild(u)}else t=0;return t||0}},54285:(G,O,e)=>{"use strict";e.d(O,{Z:()=>n,n:()=>m});var t=e(11337),n=(f=>(f.Word="Word",f.Prefix="Prefix",f.Fuzzy="Fuzzy",f))(n||{});const m={Word:(f,o)=>f.filter(l=>(l.filterText||l.label).includes(o)),Prefix:(f,o)=>f.filter(l=>(l.filterText||l.label).startsWith(o)),Fuzzy:(f,o)=>(o=o.toLowerCase(),f.filter(l=>{const{distance:r,ranges:d,found:c}=(0,t.C)(l.label.toLowerCase(),o);return c?(l.sortValue=r,l.highlightParts=d,!0):!1}))}},5745:(G,O,e)=>{"use strict";e.d(O,{Yi:()=>n,l1:()=>s,xl:()=>u});var t=e(53594);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},u=(i,m)=>{const f=i.split(`
`).map(l=>t.gO.create({type:"code_line",nodes:[t.xv.create(l)]})),o=t.gO.create({data:{syntax:m},type:"code_block",nodes:f});return t.BB.create({nodes:[o]})},s=(i,m)=>{const f=u(i,m);return t.B4.create({document:f})}},89814:(G,O,e)=>{"use strict";e.d(O,{i:()=>t});const t=(n,u)=>{let s;if(n.getLinks&&(s=n.getLinks({valueRowIndex:u.index})),!!s){for(let i=0;i<s?.length;i++)if(s[i].onClick){const m=s[i].onClick;s[i].onClick=f=>{f.ctrlKey||f.metaKey||f.shiftKey||(f.preventDefault(),m(f,{field:n,rowIndex:u.index}))}}return s}}},74099:(G,O,e)=>{"use strict";e.d(O,{Bx:()=>u,vm:()=>s});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function u(f=""){const o=i(f.toLowerCase()),l=Math.abs(o%t.length);return s(l)}function s(f){return{color:t[f],borderColor:n[f]}}function i(f){let o=5381;for(let l=0;l<f.length;l++)o=(o<<5)+o+f.charCodeAt(l);return o}var m={getTagColorsFromName:u}},80313:(G,O,e)=>{"use strict";e.d(O,{N:()=>n});var t=e(68404);function n(){const[u,s]=(0,t.useState)(0);return()=>s(i=>i+1)}},7505:(G,O,e)=>{"use strict";e.d(O,{FE:()=>s,Gu:()=>n,JU:()=>t,z3:()=>u});var t=(i=>(i.onBlur="onBlur",i.onFocus="onFocus",i.onChange="onChange",i))(t||{});const n=(i,m)=>{const f=m.reduce((o,l)=>l.rule(i)?o:o.concat(l.errorMessage),[]);return f.length>0?f:null},u=(i,m)=>m&&m[i],s=(i,m)=>({rule:f=>!!f.match(i),errorMessage:m||"Value is not valid"})},42879:(G,O,e)=>{"use strict";e.d(O,{z:()=>t});const t={Breadcrumbs:{breadcrumb:n=>`data-testid ${n} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:n=>`${n} menu`,MenuGroup:n=>`${n} menu group`,MenuItem:n=>`${n} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:n=>`data-testid Panel header ${n}`,headerItems:n=>`Panel header item ${n}`,containerByTitle:n=>`${n} panel`,headerCornerInfo:n=>`Panel header ${n}`},Visualization:{Graph:{VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:n=>`gpl alias ${n}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:n=>`VizLegend series ${n}`},Drawer:{General:{title:n=>`Drawer title ${n}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:n=>`${n} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"toggle-viz-picker",toggleVizOptions:"toggle-viz-options",toggleTableView:"toggle-table-view",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:n=>`Tab ${n}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:n=>`${n} query operation action`,title:n=>`Query editor row title ${n}`,container:n=>`Query editor row ${n}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:n=>`Alert ${n}`,alertV2:n=>`data-testid Alert ${n}`},TransformTab:{content:"Transform editor tab content",newTransform:n=>`New transform ${n}`,transformationEditor:n=>`Transformation editor ${n}`,transformationEditorDebugger:n=>`Transformation editor debugger ${n}`},Transforms:{card:n=>`New transform ${n}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:n=>`${n}`},QueryEditorToolbarItem:{button:n=>`QueryEditor toolbar item button ${n}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:n=>n?`Options group ${n}`:"Options group",toggle:n=>n?`Options group ${n} toggle`:"Options group toggle"},PluginVisualization:{item:n=>`Plugin visualization item ${n}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:n=>`Value picker button ${n}`,select:n=>`Value picker select ${n}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:n=>`data-testid Collapse folder ${n}`,expandFolder:n=>`data-testid Expand folder ${n}`,dashboardItem:n=>`${t.Search.dashboardItems} ${n}`,dashboardCard:n=>`data-testid Search card ${n}`,folderHeader:n=>`data-testid Folder header ${n}`,folderContent:n=>`data-testid Folder content ${n}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:n=>`Call to action button ${n}`,buttonV2:n=>`data-testid Call to action button ${n}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:n=>`data-testid suggestion-${n}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:n=>`data-testid dashboard-row-title-${n}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"}}},68183:(G,O,e)=>{"use strict";e.d(O,{wl:()=>u});var t=e(42879);const u={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:s=>`Data source list item ${s}`},AddDataSource:{url:"/datasources/new",dataSourcePlugins:s=>`Data source plugin item ${s}`,dataSourcePluginsV2:s=>`Add new data source ${s}`},ConfirmModal:{delete:"Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:s=>`/d/${s}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:s=>`data-testid Dashboard template variables submenu Label ${s}`,submenuItemValueDropDownValueLinkTexts:s=>`data-testid Dashboard template variables Variable Value DropDown value link text ${s}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:s=>`data-testid Dashboard template variables Variable Value DropDown option text ${s}`},Settings:{General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:s=>`Dashboard settings section item ${s}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.z.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.z.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"}},Variables:{List:{addVariableCTA:t.z.CallToActionCard.button("Add variable"),addVariableCTAV2:t.z.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:s=>`Variable editor Table Name field ${s}`,tableRowDefinitionFields:s=>`Variable editor Table Definition field ${s}`,tableRowArrowUpButtons:s=>`Variable editor Table ArrowUp button ${s}`,tableRowArrowDownButtons:s=>`Variable editor Table ArrowDown button ${s}`,tableRowDuplicateButtons:s=>`Variable editor Table Duplicate button ${s}`,tableRowRemoveButtons:s=>`Variable editor Table Remove button ${s}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.z.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}}},Dashboards:{url:"/dashboards",dashboards:s=>`Dashboard search item ${s}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",EnableSwitch:"data-testid public dashboard on off switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",SaveConfigButton:"data-testid public dashboard save config button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDatasourcesWarningAlert:"data-testid public dashboard unsupported datasources",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range"}},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:s=>`/d-solo/${s}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"Delete playlist item"},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button"}}},components:t.z}},40538:(G,O,e)=>{"use strict";e.d(O,{As:()=>T,FI:()=>r,IG:()=>x,Jp:()=>i,KC:()=>o,LB:()=>u,QH:()=>L,ap:()=>M,bQ:()=>p,f3:()=>D,h2:()=>w,i3:()=>h,iT:()=>W,jG:()=>S,jK:()=>a,l8:()=>m,o0:()=>d,pR:()=>f,pc:()=>P,pu:()=>c,q1:()=>n,v7:()=>A,wN:()=>g,wf:()=>l,wm:()=>C,yK:()=>s});var t=(I=>(I.Field="field",I.Fixed="fixed",I.Template="template",I))(t||{}),n=(I=>(I.Auto="auto",I.Coords="coords",I.Geohash="geohash",I.Lookup="lookup",I))(n||{}),u=(I=>(I.Auto="auto",I.Bottom="bottom",I.Hidden="hidden",I.Left="left",I.Right="right",I.Top="top",I))(u||{}),s=(I=>(I.Series="series",I.Text="text",I))(s||{}),i=(I=>(I.Always="always",I.Auto="auto",I.Never="never",I))(i||{}),m=(I=>(I.Bars="bars",I.Line="line",I.Points="points",I))(m||{}),f=(I=>(I.Constant="constant",I.NegativeY="negative-Y",I))(f||{}),o=(I=>(I.Linear="linear",I.Smooth="smooth",I.StepAfter="stepAfter",I.StepBefore="stepBefore",I))(o||{}),l=(I=>(I.Linear="linear",I.Log="log",I.Ordinal="ordinal",I.Symlog="symlog",I))(l||{}),r=(I=>(I.Hue="hue",I.None="none",I.Opacity="opacity",I.Scheme="scheme",I))(r||{}),d=(I=>(I.None="none",I.Normal="normal",I.Percent="percent",I))(d||{}),c=(I=>(I[I.After=1]="After",I[I.Before=-1]="Before",I[I.Center=0]="Center",I))(c||{}),g=(I=>(I[I.Horizontal=0]="Horizontal",I[I.Vertical=1]="Vertical",I))(g||{}),p=(I=>(I[I.Down=-1]="Down",I[I.Left=-1]="Left",I[I.Right=1]="Right",I[I.Up=1]="Up",I))(p||{});const y={dash:[]};var h=(I=>(I.Area="area",I.Dashed="dashed",I.DashedAndArea="dashed+area",I.Line="line",I.LineAndArea="line+area",I.Off="off",I.Series="series",I))(h||{}),a=(I=>(I.Hidden="hidden",I.List="list",I.Table="table",I))(a||{});const v={calcs:[]};var C=(I=>(I.Auto="auto",I.Horizontal="horizontal",I.Vertical="vertical",I))(C||{});const E={timezone:[]};var P=(I=>(I.Background="background",I.None="none",I.Value="value",I))(P||{}),x=(I=>(I.Area="area",I.Line="line",I.None="none",I))(x||{}),M=(I=>(I.Auto="auto",I.Center="center",I))(M||{}),S=(I=>(I.Auto="auto",I.Name="name",I.None="none",I.Value="value",I.ValueAndName="value_and_name",I))(S||{}),D=(I=>(I.Multi="multi",I.None="none",I.Single="single",I))(D||{}),T=(I=>(I.Ascending="asc",I.Descending="desc",I.None="none",I))(T||{});const R={calcs:[]};var L=(I=>(I.Basic="basic",I.Gradient="gradient",I.Lcd="lcd",I))(L||{}),w=(I=>(I.Auto="auto",I.BasicGauge="basic",I.ColorBackground="color-background",I.ColorBackgroundSolid="color-background-solid",I.ColorText="color-text",I.Gauge="gauge",I.GradientGauge="gradient-gauge",I.Image="image",I.JSONView="json-view",I.LcdGauge="lcd-gauge",I))(w||{}),A=(I=>(I.Basic="basic",I.Gradient="gradient",I))(A||{});const N={align:"auto",inspect:!1},W="browser"},85596:(G,O,e)=>{"use strict";e.d(O,{AU:()=>v,Gu:()=>i,NU:()=>y,Ql:()=>E,Vb:()=>h,ZM:()=>a,gW:()=>u});const t={tags:[]},n={builtIn:0,enable:!0,hide:!1,showIn:0,type:"dashboard"},u={global:!1,id:"00000000-0000-0000-0000-000000000000",index:-1,skipUrlSync:!1};var s=(P=>(P[P.dontHide=0]="dontHide",P[P.hideLabel=1]="hideLabel",P[P.hideVariable=2]="hideVariable",P))(s||{}),i=(P=>(P.Done="Done",P.Error="Error",P.Loading="Loading",P.NotStarted="NotStarted",P.Streaming="Streaming",P))(i||{});const m={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var f=(P=>(P.ContinuousGrYlRd="continuous-GrYlRd",P.Fixed="fixed",P.PaletteClassic="palette-classic",P.PaletteSaturated="palette-saturated",P.Thresholds="thresholds",P))(f||{});const o={h:9,w:12,x:0,y:0};var l=(P=>(P.Absolute="absolute",P.Percentage="percentage",P))(l||{});const r={steps:[]};var d=(P=>(P.RangeToText="range",P.RegexToText="regex",P.SpecialValue="special",P.ValueToText="value",P))(d||{}),c=(P=>(P.Empty="empty",P.False="false",P.NaN="nan",P.Null="null",P.NullAndNan="null+nan",P.True="true",P))(c||{}),g=(P=>(P[P.Crosshair=1]="Crosshair",P[P.Off=0]="Off",P[P.Tooltip=2]="Tooltip",P))(g||{});const p=0,y={links:[],repeatDirection:"h",tags:[],targets:[],thresholds:[],timeRegions:[],transformations:[],transparent:!1},h={overrides:[]},a={id:""},v={links:[],mappings:[]},C={collapsed:!1,panels:[]},E={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],revision:-1,schemaVersion:36,style:"dark",tags:[],timezone:"browser"}},30670:(G,O,e)=>{"use strict";e.d(O,{Ql:()=>u});var t=e(85596),n=(l=>(l[l.dontHide=0]="dontHide",l[l.hideLabel=1]="hideLabel",l[l.hideVariable=2]="hideVariable",l))(n||{});const u=t.Ql,s={...t.gW,rootStateKey:null,error:null,description:null,hide:0,state:t.Gu.NotStarted,datasource:null},i=t.NU,m=t.AU,f=t.Vb,o=t.ZM},32973:(G,O,e)=>{"use strict";e.d(O,{h:()=>u});var t=e(35008),n=e.n(t);function u(s,i,m){if(s.isLight)return i;{if(m){const l=n()(i);return n().mostReadable(m,[l.clone().lighten(25),l.clone().lighten(10),l,l.clone().darken(10),l.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const f=n()(i).toHsl();f.l=1-f.l;const o=n()(f);return o.isLight()?o.darken(5).toHex8String():o.lighten(5).toHex8String()}}},21435:(G,O,e)=>{"use strict";e.d(O,{Z:()=>g});var t=e(86780),n=e(23019),u=e.n(n),s=e(68404),i=e(77274),m=e(29516),f=e(90723),o=e(20017),l=e(25474);class r extends s.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}render(){const{allowClear:y,inputProps:h,value:a}=this.props,v=s.createElement(s.Fragment,null,h.suffix,y&&a&&a.length&&s.createElement(o.h,{name:"times",onClick:this.clearUiFind}));return s.createElement(l.I,{placeholder:"Find...",...h,onChange:C=>this.props.onChange(C.currentTarget.value),suffix:v,value:a})}}r.defaultProps={inputProps:{},trackFindFunction:void 0,value:void 0};var d=e(47175);const c=p=>({TracePageSearchBar:t.iv`
      label: TracePageSearchBar;
      float: right;
      position: absolute;
      top: 0;
      right: 0;
      z-index: ${p.zIndex.navbarFixed};
      background: ${p.colors.background.primary};
      margin-bottom: -48px;
      padding: 8px;
      margin-right: 2px;
      border-radius: 4px;
      box-shadow: ${p.shadows.z2};
    `,TracePageSearchBarBar:t.iv`
      label: TracePageSearchBarBar;
      max-width: 20rem;
      transition: max-width 0.5s;
      &:focus-within {
        max-width: 100%;
      }
    `,TracePageSearchBarSuffix:t.iv`
      label: TracePageSearchBarSuffix;
      opacity: 0.6;
    `,TracePageSearchBarBtn:t.iv`
      label: TracePageSearchBarBtn;
      transition: 0.2s;
      margin-left: 8px;
    `,TracePageSearchBarBtnDisabled:t.iv`
      label: TracePageSearchBarBtnDisabled;
      opacity: 0.5;
    `,TracePageSearchBarLocateBtn:t.iv`
      label: TracePageSearchBarLocateBtn;
      padding: 1px 8px 4px;
    `}),g=(0,s.memo)(function(y){const{navigable:h,setSearch:a,searchValue:v,searchBarSuffix:C,spanFindMatches:E,focusedSpanIdForSearch:P,setSearchBarSuffix:x,setFocusedSpanIdForSearch:M,datasourceType:S}=y,D=(0,m.wW)(c),T=v?s.createElement("span",{className:D.TracePageSearchBarSuffix,"aria-label":"Search bar suffix"},C):null,R=u()(D.TracePageSearchBarBtn,{[D.TracePageSearchBarBtnDisabled]:!v}),L={className:u()(D.TracePageSearchBarBar,d.A4),name:"search",suffix:T},w=I=>{M(""),x(""),a(I)},A=()=>{(0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:S,direction:"next"});const I=Array.from(E),F=I.indexOf(P)?I.indexOf(P):0;if(F===-1||F===I.length-1){M(I[0]),x(W(1));return}M(I[F+1]),x(W(F+2))},N=()=>{(0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:S,direction:"prev"});const I=Array.from(E),F=I.indexOf(P)?I.indexOf(P):0;if(F===-1||F===0){M(I[I.length-1]),x(W(I.length));return}M(I[F-1]),x(W(F))},W=I=>E?.size&&E?.size>0?I+" of "+E?.size:"";return s.createElement("div",{className:D.TracePageSearchBar},s.createElement("span",{className:d.NY,style:{display:"flex"}},s.createElement(r,{onChange:w,value:v,inputProps:L,allowClear:!0}),s.createElement(s.Fragment,null,h&&s.createElement(s.Fragment,null,s.createElement(f.zx,{className:R,variant:"secondary",disabled:!v,type:"button",icon:"arrow-down","aria-label":"Next results button",onClick:A}),s.createElement(f.zx,{className:R,variant:"secondary",disabled:!v,type:"button",icon:"arrow-up","aria-label":"Prev results button",onClick:N})))))})},60428:(G,O,e)=>{"use strict";e.d(O,{Z:()=>l});var t=e(86780),n=e(23019),u=e.n(n),s=e(68404),i=e(29516),m=e(32973),f=e(807);const o=r=>({Ticks:t.iv`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:t.iv`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,m.h)(r,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:t.iv`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:t.iv`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function l(r){const{endTime:d,numTicks:c,showLabels:g,startTime:p}=r;let y;if(g){y=[];const v=(d||0)-(p||0);for(let C=0;C<c;C++){const E=(p||0)+C/(c-1)*v;y.push((0,f.LU)(E))}}const h=(0,i.wW)(o),a=[];for(let v=0;v<c;v++){const C=v/(c-1);a.push(s.createElement("div",{"data-testid":"TicksID",key:C,className:h.TicksTick,style:{left:`${C*100}%`}},y&&s.createElement("span",{className:u()(h.TicksTickLabel,{[h.TicksTickLabelEndAnchor]:C>=1})},y[v])))}return s.createElement("div",{className:h.Ticks},a)}l.defaultProps={endTime:null,showLabels:null,startTime:null}},77834:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(86780),n=e(23019),u=e.n(n),s=e(68404),i=e(29516),m=e(47175);const f=()=>({flexRow:t.iv`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function o(r){const{children:d,className:c="",...g}=r,p=(0,i.wW)(f);return s.createElement("div",{className:u()(p.flexRow,c),...g},d)}o.defaultProps={className:""};function l(r){const{children:d,className:c="",width:g,style:p,...y}=r,h=`${g*100}%`,a={...p,flexBasis:h,maxWidth:h};return s.createElement("div",{className:u()(m.WW,c),style:a,"data-testid":"TimelineRowCell",...y},d)}l.defaultProps={className:"",style:{}},o.Cell=l},21903:(G,O,e)=>{"use strict";e.d(O,{l4:()=>wn,ZP:()=>ia});var t=e(86780),n=e(82897),u=e(58635),s=e(68404),i=e(77274),m=e(82385),f=e(26408),o=e(29516);const l="http.method",r="peer.service",d="span.kind";var c=e(4713);class g{constructor(Lt){this.ys=[],this.heights=[],this.bufferLen=Lt,this.dataLen=-1,this.lastI=-1}profileData(Lt){Lt!==this.dataLen&&(this.dataLen=Lt,this.ys.length=Lt,this.heights.length=Lt,this.lastI>=Lt&&(this.lastI=Lt-1))}calcHeights(Lt,At,kt){kt!=null&&(this.lastI=kt);let Zt=Lt+this.bufferLen;if(Zt<=this.lastI)return;Zt>=this.heights.length&&(Zt=this.heights.length-1);let Qt=this.lastI;for(this.lastI===-1&&(Qt=0,this.ys[0]=0);Qt<=Zt;){const Jt=this.heights[Qt]=At(Qt);this.ys[Qt+1]=this.ys[Qt]+Jt,Qt++}this.lastI=Zt}calcYs(Lt,At){for(;(this.ys[this.lastI]==null||Lt>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,At)}confirmHeight(Lt,At){let kt=Lt;if(kt>this.lastI){this.calcHeights(kt,At);return}const Zt=At(kt);if(Zt===this.heights[kt])return;const Qt=Zt-this.heights[kt];for(this.heights[kt]=Zt;++kt<=this.lastI;)this.ys[kt]+=Qt;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=Qt)}findFloorIndex(Lt,At){this.calcYs(Lt,At);let kt=0,Zt=this.lastI;if(this.ys.length<2||Lt<this.ys[1])return 0;if(Lt>this.ys[Zt])return Zt;let Qt;for(;kt<Zt;)if(Qt=kt+.5*(Zt-kt)|0,Lt>this.ys[Qt]){if(Lt<=this.ys[Qt+1])return Qt;kt=Qt}else if(Lt<this.ys[Qt]){if(Lt>=this.ys[Qt-1])return Qt-1;Zt=Qt}else return Qt;throw new Error(`unable to find floor index for y=${Lt}`)}getRowPosition(Lt,At){return this.confirmHeight(Lt,At),{height:this.heights[Lt],y:this.ys[Lt]}}getEstimatedHeight(){const Lt=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?Lt|0:Lt/(this.lastI+1)*this.heights.length|0}}const p=100;class y extends s.Component{constructor(Lt){super(Lt),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const At=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(At,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=At=>this._yPositions.getRowPosition(At,this._getHeight),this.scrollToIndex=At=>{const{scrollElement:kt}=this.props,Zt=kt?.getBoundingClientRect().top||0,Jt=(kt?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-Zt,rn=this.getRowPosition(At).y;this.props.scrollElement?.scrollTo({top:rn+Jt-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const At=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,kt=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(At<this._startIndexDrawn||kt>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=At=>{this.props.windowScroller&&(this._wrapperElm=At,At&&(this._viewHeight=At.clientHeight))},this._initItemHolder=At=>{this._itemHolderElm=At,this._scanItemHeights()},this._scanItemHeights=()=>{const At=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let kt=null,Zt=null,Qt=!1;const Jt=this._itemHolderElm.childNodes,rn=Jt.length;for(let mn=0;mn<rn;mn++){const Xt=Jt[mn],fn=Xt.getAttribute("data-item-key");if(!fn){console.warn("itemKey not found");continue}const Yn=(Xt.firstElementChild||Xt).clientHeight,Vn=this._knownHeights.get(fn);Yn!==Vn&&(this._knownHeights.set(fn,Yn),Qt?Zt=fn:(Qt=!0,kt=Zt=fn))}if(kt!=null&&Zt!=null){const mn=At(kt),Xt=Zt===kt?mn:At(Zt);this._yPositions.calcHeights(Xt,this._getHeight,mn),this.forceUpdate()}},this._getHeight=At=>{const kt=this.props.getKeyFromIndex(At),Zt=this._knownHeights.get(kt);return Zt!=null&&Zt===Zt?Zt:this.props.itemHeightGetter(At,kt)},this._yPositions=new g(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:Lt}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=Lt+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(Lt){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&Lt.scrollElement!==this.props.scrollElement&&(Lt.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const Lt=this.props.windowScroller,At=Lt?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,kt=Lt?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return At!==this._viewHeight||kt!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const At=this._scrollTop,kt=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(At,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(kt,this._getHeight)}render(){const{dataLength:Lt,getKeyFromIndex:At,initialDraw:kt=p,itemRenderer:Zt,viewBuffer:Qt,viewBufferMin:Jt}=this.props,rn=this._getHeight,mn=[];let Xt,fn;if(this._yPositions.profileData(Lt),!this._wrapperElm)Xt=0,fn=(kt<Lt?kt:Lt)-1;else{this._isViewChanged()&&this._calcViewIndexes();const Vn=Jt>this._startIndex?0:this._startIndex-Jt,_n=Jt<Lt-this._endIndex?this._endIndex+Jt:Lt-1;Vn<this._startIndexDrawn||_n>this._endIndexDrawn?(Xt=Qt>this._startIndex?0:this._startIndex-Qt,fn=this._endIndex+Qt,fn>=Lt&&(fn=Lt-1)):(Xt=this._startIndexDrawn,fn=this._endIndexDrawn>Lt-1?Lt-1:this._endIndexDrawn)}this._yPositions.calcHeights(fn,rn,Xt||-1),this._startIndexDrawn=Xt,this._endIndexDrawn=fn,mn.length=fn-Xt+1;for(let Vn=Xt;Vn<=fn;Vn++){const{y:_n,height:va}=this._yPositions.getRowPosition(Vn,rn),Fa={height:va,top:_n,position:"absolute"},Ea=At(Vn),Ma={"data-item-key":Ea};mn.push(Zt(Ea,Fa,Vn,Ma))}const In={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(In.onScroll=this._onScroll,In.style.height="100%",In.style.overflowY="auto");const Yn={position:"relative",height:this._yPositions.getEstimatedHeight()};return s.createElement("div",{...In,"data-testid":"ListView"},s.createElement("div",{style:Yn},s.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},mn)))}}y.defaultProps={initialDraw:p,itemsWrapperClassName:"",windowScroller:!1};var h=e(23019),a=e.n(h),v=e(62969),C=e.n(v),E=e(29796),P=e.n(E),x=e(32973),M=e(30116),S=e(68183),D=e(26345),T=e(30995);function R({children:Rt,content:Lt,overlayClassName:At}){const kt=(0,s.useRef)(null);return s.createElement(D.D,{content:Lt,hideAfter:300},(Zt,Qt,Jt)=>s.createElement(s.Fragment,null,kt.current&&s.createElement(T.J,{...Jt,referenceElement:kt.current,wrapperClassName:At,onMouseLeave:Qt,onMouseEnter:Zt}),s.cloneElement(Rt,{ref:kt,onMouseEnter:Zt,onMouseLeave:Qt})))}var L=e(65188),w=e.n(L),A=e(94961),N=e.n(A),W=e(47175),I=e(807);const F="label";var V=e(18440),b=e.n(V),X=e(81697),k=e(81582),H=e.n(k),Y=e(48756),ee=e(90723);const ue=()=>({CopyIcon:t.iv`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function q(Rt){const Lt=(0,o.wW)(ue),[At,kt]=(0,s.useState)(!1),Zt=()=>{H()(Rt.copyText),kt(!0)};return s.createElement(Y.u,{content:At?"Copied":Rt.tooltipTitle},s.createElement(ee.zx,{className:a()(Lt.CopyIcon),type:"button",icon:Rt.icon,onClick:Zt}))}q.defaultProps={icon:"copy",className:void 0};const ge="copyIcon",De=Rt=>({KeyValueTable:t.iv`
      label: KeyValueTable;
      background: ${(0,x.h)(Rt,"#fff")};
      border: 1px solid ${(0,x.h)(Rt,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:t.iv`
      label: body;
      vertical-align: baseline;
    `,row:t.iv`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,x.h)(Rt,"#f5f5f5")};
      }
      &:not(:hover) .${ge} {
        visibility: hidden;
      }
    `,keyColumn:t.iv`
      label: keyColumn;
      color: ${(0,x.h)(Rt,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:t.iv`
      label: copyColumn;
      text-align: right;
    `,linkIcon:t.iv`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),fe=/^(\[|\{)/;function me(Rt){if(typeof Rt=="string"&&fe.test(Rt))try{return JSON.parse(Rt)}catch{}return Rt}const ce=Rt=>s.createElement("a",{href:Rt.href,title:Rt.title,target:"_blank",rel:"noopener noreferrer"},Rt.children," ",s.createElement(X.J,{name:"external-link-alt"}));ce.defaultProps={title:""};function ie(Rt){const{data:Lt,linksGetter:At}=Rt,kt=(0,o.wW)(De);return s.createElement("div",{className:a()(kt.KeyValueTable),"data-testid":"KeyValueTable"},s.createElement("table",{className:W.K9},s.createElement("tbody",{className:kt.body},Lt.map((Zt,Qt)=>{const Jt={__html:b()(me(Zt.value))},rn=s.createElement("div",{className:W.b$,dangerouslySetInnerHTML:Jt}),mn=At?At(Lt,Qt):null;let Xt;return mn&&mn.length?Xt=s.createElement("div",null,s.createElement(ce,{href:mn[0].url,title:mn[0].text},rn)):Xt=rn,s.createElement("tr",{className:kt.row,key:`${Zt.key}-${Qt}`},s.createElement("td",{className:kt.keyColumn,"data-testid":"KeyValueTable--keyColumn"},Zt.key),s.createElement("td",null,Xt),s.createElement("td",{className:kt.copyColumn},s.createElement(q,{className:ge,copyText:JSON.stringify(Zt,null,2),tooltipTitle:"Copy JSON"})))}))))}const re=Rt=>({header:t.iv`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,x.h)(Rt,"#e8e8e8")};
      }
    `,headerEmpty:t.iv`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:t.iv`
      label: headerHighContrast;
      &:hover {
        background: ${(0,x.h)(Rt,"#ddd")};
      }
    `,emptyIcon:t.iv`
      label: emptyIcon;
      color: ${(0,x.h)(Rt,"#aaa")};
    `,summary:t.iv`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:t.iv`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,x.h)(Rt,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:t.iv`
      label: summaryLabel;
      color: ${(0,x.h)(Rt,"#777")};
    `,summaryDelim:t.iv`
      label: summaryDelim;
      color: ${(0,x.h)(Rt,"#bbb")};
      padding: 0 0.2em;
    `});function Ee(Rt){const{data:Lt}=Rt,At=(0,o.wW)(re);return!Array.isArray(Lt)||!Lt.length?null:s.createElement("ul",{className:At.summary},Lt.map((kt,Zt)=>s.createElement("li",{className:At.summaryItem,key:`${kt.key}-${Zt}`},s.createElement("span",{className:At.summaryLabel},kt.key),s.createElement("span",{className:At.summaryDelim},"="),String(kt.value))))}Ee.defaultProps={data:null};function J(Rt){const{className:Lt,data:At,highContrast:kt,interactive:Zt,isOpen:Qt,label:Jt,linksGetter:rn,onToggle:mn}=Rt,Xt=!Array.isArray(At)||!At.length,fn=(0,o.wW)(re),In=a()(W.Im,{[fn.emptyIcon]:Xt});let Yn=null,Vn=null;return Zt&&(Yn=Qt?s.createElement(w(),{className:In}):s.createElement(N(),{className:In}),Vn={"aria-checked":Qt,onClick:Xt?null:mn,role:"switch"}),s.createElement("div",{className:a()(Lt,W.ty)},s.createElement("div",{className:a()(fn.header,{[fn.headerEmpty]:Xt,[fn.headerHighContrast]:kt&&!Xt}),...Vn,"data-testid":"AccordianKeyValues--header"},Yn,s.createElement("strong",{"data-test":F},Jt,Qt||":"),!Qt&&s.createElement(Ee,{data:At})),Qt&&s.createElement(ie,{data:At,linksGetter:rn}))}J.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const te=Rt=>({AccordianLogs:t.iv`
      label: AccordianLogs;
      border: 1px solid ${(0,x.h)(Rt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:t.iv`
      label: AccordianLogsHeader;
      background: ${(0,x.h)(Rt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,x.h)(Rt,"#dadada")};
      }
    `,AccordianLogsContent:t.iv`
      label: AccordianLogsContent;
      background: ${(0,x.h)(Rt,"#f0f0f0")};
      border-top: 1px solid ${(0,x.h)(Rt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:t.iv`
      label: AccordianLogsFooter;
      color: ${(0,x.h)(Rt,"#999")};
    `});function ne(Rt){const{interactive:Lt,isOpen:At,linksGetter:kt,logs:Zt,openedItems:Qt,onItemToggle:Jt,onToggle:rn,timestamp:mn}=Rt;let Xt=null,fn="span",In=null;Lt&&(Xt=At?s.createElement(w(),{className:W.Im}):s.createElement(N(),{className:"u-align-icon"}),fn="a",In={"aria-checked":At,onClick:rn,role:"switch"});const Yn=(0,o.wW)(te);return s.createElement("div",{className:Yn.AccordianLogs},s.createElement(fn,{className:Yn.AccordianLogsHeader,...In},Xt," ",s.createElement("strong",null,"Events")," (",Zt.length,")"),At&&s.createElement("div",{className:Yn.AccordianLogsContent},(0,n.sortBy)(Zt,"timestamp").map((Vn,_n)=>s.createElement(J,{key:`${Vn.timestamp}-${_n}`,className:_n<Zt.length-1?W.bi:null,data:Vn.fields||[],highContrast:!0,interactive:Lt,isOpen:Qt?Qt.has(Vn):!1,label:`${(0,I.LU)(Vn.timestamp-mn)}`,linksGetter:kt,onToggle:Lt&&Jt?()=>Jt(Vn):null})),s.createElement("small",{className:Yn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}ne.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const j=Rt=>({wrapper:t.iv`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:t.iv`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:t.iv`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:t.iv`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:t.iv`
      label: logMarker;
      background-color: ${(0,x.h)(Rt,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,x.h)(Rt,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function be(Rt){return`${(Rt*100).toFixed(1)}%`}function Le({viewEnd:Rt,viewStart:Lt,getViewedBounds:At,color:kt,shortLabel:Zt,longLabel:Qt,onClick:Jt,rpc:rn,traceStartTime:mn,span:Xt,className:fn,labelClassName:In}){const[Yn,Vn]=(0,s.useState)(Zt),_n=()=>Vn(Zt),va=()=>Vn(Qt),Fa=(0,n.groupBy)(Xt.logs,Ma=>{const Za=At(Ma.timestamp,Ma.timestamp).start;return be(Math.round(Za*500)/500)}),Ea=(0,o.wW)(j);return s.createElement("div",{className:a()(Ea.wrapper,fn),onBlur:_n,onClick:Jt,onFocus:va,onMouseOut:_n,onMouseOver:va,"aria-hidden":!0,"data-testid":S.wl.components.TraceViewer.spanBar},s.createElement("div",{"aria-label":Yn,className:Ea.bar,style:{background:kt,left:be(Lt),width:be(Rt-Lt)}},s.createElement("div",{className:a()(Ea.label,In),"data-testid":"SpanBar--label"},Yn)),s.createElement("div",null,Object.keys(Fa).map(Ma=>s.createElement(R,{key:Ma,content:s.createElement(ne,{interactive:!1,isOpen:!0,logs:Fa[Ma],timestamp:mn})},s.createElement("div",{"data-testid":"SpanBar--logMarker",className:Ea.logMarker,style:{left:Ma}})))),rn&&s.createElement("div",{className:Ea.rpc,style:{background:rn.color,left:be(rn.viewStart),width:be(rn.viewEnd-rn.viewStart)}}))}const Qe=s.memo(Le);var Ye=e(75182),de=e(87302),Be=e(67303);const Ve=(Rt,Lt,At,kt)=>s.createElement(s.Fragment,null,Rt.logLinks?.length?s.createElement(Ye.k,{label:"Logs"},Rt.logLinks.map((Zt,Qt)=>s.createElement(de.s,{key:Qt,label:"Logs for this span",onClick:Zt.onClick?Jt=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:kt,type:"log",location:"menu"}),Jt?.preventDefault(),Zt.onClick(Jt),At()}:void 0,url:Zt.href,className:Lt.menuItem}))):null,Rt.metricLinks?.length?s.createElement(Ye.k,{label:"Metrics"},Rt.metricLinks.map((Zt,Qt)=>s.createElement(de.s,{key:Qt,label:Zt.title??"Metrics for this span",onClick:Zt.onClick?Jt=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:kt,type:"metric",location:"menu"}),Jt?.preventDefault(),Zt.onClick(Jt),At()}:void 0,url:Zt.href,className:Lt.menuItem}))):null,Rt.traceLinks?.length?s.createElement(Ye.k,{label:"Traces"},Rt.traceLinks.map((Zt,Qt)=>s.createElement(de.s,{key:Qt,label:Zt.title??"View linked span",onClick:Zt.onClick?Jt=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:kt,type:"trace",location:"menu"}),Jt?.preventDefault(),Zt.onClick(Jt),At()}:void 0,url:Zt.href,className:Lt.menuItem}))):null),$e=({links:Rt,datasourceType:Lt})=>{const At=(0,o.wW)(We),[kt,Zt]=(0,s.useState)(!1),[Qt,Jt]=(0,s.useState)({x:0,y:0}),rn=()=>Zt(!1);return s.createElement("div",{"data-testid":"SpanLinksMenu"},s.createElement("button",{onClick:mn=>{Zt(!0),Jt({x:mn.pageX,y:mn.pageY})},className:At.button},s.createElement(X.J,{name:"link",className:At.button})),kt?s.createElement(Be.x,{onClose:()=>Zt(!1),renderMenuItems:()=>Ve(Rt,At,rn,Lt),focusOnOpen:!0,x:Qt.x,y:Qt.y}):null)},We=()=>({button:t.iv`
      background: transparent;
      border: none;
      padding: 0;
      margin: 0 3px 0 0;
    `,menuItem:t.iv`
      max-width: 60ch;
      overflow: hidden;
    `});var Ke=e(51290),qe=e.n(Ke);function Xe(Rt){return(0,n.get)((0,n.find)(Rt.references,({span:Lt,refType:At})=>Lt&&Lt.spanID&&(At==="CHILD_OF"||At==="FOLLOWS_FROM")),"span")}function at(Rt){const Lt=[];if(!Rt)return Lt;let At=Xe(Rt);for(;At;)Lt.push(At.spanID),At=Xe(At);return Lt}const Ze=(0,m.B)(Rt=>({SpanTreeOffset:t.iv`
      label: SpanTreeOffset;
      color: ${(0,x.h)(Rt,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:t.iv`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:t.iv`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: calc(0.5rem + 12px);
      height: 100%;
      border-left: 3px solid transparent;
      display: inline-flex;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,x.h)(Rt,"lightgrey")};
      }
    `,indentGuideActive:t.iv`
      label: indentGuideActive;
      border-color: ${(0,x.h)(Rt,"darkgrey")};
      &::before {
        background-color: transparent;
      }
    `,iconWrapper:t.iv`
      label: iconWrapper;
      position: absolute;
      right: 0.25rem;
    `}));class lt extends s.PureComponent{constructor(Lt){super(Lt),this.handleMouseLeave=(At,kt)=>{(!(At.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(At,"relatedTarget.dataset.ancestorId")!==kt)&&this.props.removeHoverIndentGuideId(kt)},this.handleMouseEnter=(At,kt)=>{(!(At.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(At,"relatedTarget.dataset.ancestorId")!==kt)&&this.props.addHoverIndentGuideId(kt)},this.ancestorIds=at(Lt.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:Lt,onClick:At,showChildrenIcon:kt,span:Zt,theme:Qt}=this.props,{hasChildren:Jt,spanID:rn}=Zt,mn=Jt?{onClick:At,role:"switch","aria-checked":Lt}:null,Xt=kt&&Jt&&(Lt?s.createElement(w(),{"data-testid":"icon-arrow-down"}):s.createElement(qe(),{"data-testid":"icon-arrow-right"})),fn=Ze(Qt);return s.createElement("span",{className:a()(fn.SpanTreeOffset,{[fn.SpanTreeOffsetParent]:Jt}),...mn},this.ancestorIds.map(In=>s.createElement("span",{key:In,className:a()(fn.indentGuide,{[fn.indentGuideActive]:this.props.hoverIndentGuideIds.has(In)}),"data-ancestor-id":In,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:Yn=>this.handleMouseEnter(Yn,In),onMouseLeave:Yn=>this.handleMouseLeave(Yn,In)})),Xt&&s.createElement("span",{className:fn.iconWrapper,onMouseEnter:In=>this.handleMouseEnter(In,rn),onMouseLeave:In=>this.handleMouseLeave(In,rn),"data-testid":"icon-wrapper"},Xt))}}lt.displayName="UnthemedSpanTreeOffset",lt.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const nt=(0,o.HE)(lt);var _e=e(60428),ut=e(77834);const rt="spanBar",je="spanBarLabel",dt="nameWrapper",oe="nameWrapperMatchingFilter",Se="jaegerView",Re="nameColumn",ze=(0,m.B)(Rt=>{const Lt={flash:t.F4`
    label: flash;
    from {
      background-color: ${(0,x.h)(Rt,"#68b9ff")};
    }
    to {
      background-color: default;
    }
  `};return{nameWrapper:t.iv`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:t.iv`
      label: nameWrapperMatchingFilter;
      background-color: ${(0,x.h)(Rt,"#fffce4")};
    `,nameColumn:t.iv`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:t.iv`
      label: endpointName;
      color: ${(0,x.h)(Rt,"#808080")};
    `,view:t.iv`
      label: view;
      position: relative;
    `,viewExpanded:t.iv`
      label: viewExpanded;
      background: ${(0,x.h)(Rt,"#f8f8f8")};
      outline: 1px solid ${(0,x.h)(Rt,"#ddd")};
    `,viewExpandedAndMatchingFilter:t.iv`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,x.h)(Rt,"#fff3d7")};
      outline: 1px solid ${(0,x.h)(Rt,"#ddd")};
    `,row:t.iv`
      label: row;
      &:hover .${rt} {
        opacity: 1;
      }
      &:hover .${je} {
        color: ${(0,x.h)(Rt,"#000")};
      }
      &:hover .${dt} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,x.h)(Rt,"#fafafa")},
          ${(0,x.h)(Rt,"#f8f8f8")} 75%,
          ${(0,x.h)(Rt,"#eee")}
        );
      }
      &:hover .${Se} {
        background-color: ${(0,x.h)(Rt,"#f5f5f5")};
        outline: 1px solid ${(0,x.h)(Rt,"#ddd")};
      }
    `,rowClippingLeft:t.iv`
      label: rowClippingLeft;
      & .${Re}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,x.h)(Rt,"rgba(25, 25, 25, 0.25)")},
          ${(0,x.h)(Rt,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:t.iv`
      label: rowClippingRight;
      & .${Se}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,x.h)(Rt,"rgba(25, 25, 25, 0.25)")},
          ${(0,x.h)(Rt,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:t.iv`
      label: rowExpanded;
      & .${rt} {
        opacity: 1;
      }
      & .${je} {
        color: ${(0,x.h)(Rt,"#000")};
      }
      & .${dt}, &:hover .${dt} {
        background: ${(0,x.h)(Rt,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,x.h)(Rt,"#ddd")};
      }
      & .${oe} {
        background: ${(0,x.h)(Rt,"#fff3d7")};
      }
      &:hover .${Se} {
        background: ${(0,x.h)(Rt,"#eee")};
      }
    `,rowMatchingFilter:t.iv`
      label: rowMatchingFilter;
      background-color: ${(0,x.h)(Rt,"#fffbde")};
      &:hover .${dt} {
        background: linear-gradient(
          90deg,
          ${(0,x.h)(Rt,"#fffbde")},
          ${(0,x.h)(Rt,"#fffbde")} 75%,
          ${(0,x.h)(Rt,"#f7f1c6")}
        );
      }
      &:hover .${Se} {
        background-color: ${(0,x.h)(Rt,"#f7f1c6")};
        outline: 1px solid ${(0,x.h)(Rt,"#ddd")};
      }
    `,rowFocused:t.iv`
      label: rowFocused;
      background-color: ${(0,x.h)(Rt,"#cbe7ff")};
      animation: ${Lt.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${dt}, .${Se}, .${oe} {
        background-color: ${(0,x.h)(Rt,"#cbe7ff")};
        animation: ${Lt.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${rt} {
        opacity: 1;
      }
      & .${je} {
        color: ${(0,x.h)(Rt,"#000")};
      }
      &:hover .${dt}, :hover .${Se} {
        background: ${(0,x.h)(Rt,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,x.h)(Rt,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:t.iv`
      label: rowExpandedAndMatchingFilter;
      &:hover .${Se} {
        background: ${(0,x.h)(Rt,"#ffeccf")};
      }
    `,name:t.iv`
      label: name;
      color: ${(0,x.h)(Rt,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      margin-right: 8px;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &::before {
        content: ' ';
        position: absolute;
        top: 4px;
        bottom: 4px;
        left: 0;
        border-left: 4px solid;
        border-left-color: inherit;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > small {
        color: ${(0,x.h)(Rt,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
    `,nameDetailExpanded:t.iv`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:t.iv`
      label: svcName;
      padding: 0 0.25rem 0 0.5rem;
      font-size: 1.05em;
    `,svcNameChildrenCollapsed:t.iv`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:t.iv`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,x.h)(Rt,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:t.iv`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:t.iv`
      label: labelRight;
      left: 100%;
    `,labelLeft:t.iv`
      label: labelLeft;
      right: 100%;
    `}});class ve extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(Lt,At,kt)=>{const Zt=At?.type??"";if(Zt===M.Hn)return"";if(Zt===""||Zt===M.th)return`(${kt})`;if(Zt===M.Kg){const Qt=At?.tag?.trim()??"";if(Qt!==""&&Lt.tags){const Jt=Lt.tags?.find(mn=>mn.key===Qt),rn=Lt.process?.tags?.find(mn=>mn.key===Qt);if(Jt)return`(${Jt.value})`;if(rn)return`(${rn.value})`}}return""}}render(){const{className:Lt,color:At,spanBarOptions:kt,columnDivision:Zt,isChildrenExpanded:Qt,isDetailExpanded:Jt,isMatchingFilter:rn,isFocused:mn,numTicks:Xt,rpc:fn,noInstrumentedServer:In,showErrorIcon:Yn,getViewedBounds:Vn,traceStartTime:_n,span:va,hoverIndentGuideIds:Fa,addHoverIndentGuideId:Ea,removeHoverIndentGuideId:Ma,clippingLeft:Za,clippingRight:ca,theme:Ja,createSpanLink:qa,datasourceType:Va}=this.props,{duration:Xa,hasChildren:fs,operationName:ls,process:{serviceName:cs}}=va,gs=(0,I.LU)(Xa),ya=Vn(va.startTime,va.startTime+va.duration),za=ya.start,Pa=ya.end,Jn=ze(Ja),ps=`${cs}::${ls}`;let Ha,fa;za>1-Pa?(Ha=`${ps} | ${gs}`,fa=Jn.labelLeft):(Ha=`${gs} | ${ps}`,fa=Jn.labelRight);const Bs=Ca=>Ca?Object.values(Ca).reduce((Sa,is)=>Sa+is.length,0):0;return s.createElement(ut.Z,{className:a()(Jn.row,{[Jn.rowExpanded]:Jt,[Jn.rowMatchingFilter]:rn,[Jn.rowExpandedAndMatchingFilter]:rn&&Jt,[Jn.rowFocused]:mn,[Jn.rowClippingLeft]:Za,[Jn.rowClippingRight]:ca},Lt)},s.createElement(ut.Z.Cell,{className:a()(Jn.nameColumn,Re),width:Zt},s.createElement("div",{className:a()(Jn.nameWrapper,dt,{[Jn.nameWrapperMatchingFilter]:rn,nameWrapperMatchingFilter:rn})},s.createElement(nt,{onClick:fs?this._childrenToggle:void 0,childrenVisible:Qt,span:va,hoverIndentGuideIds:Fa,addHoverIndentGuideId:Ea,removeHoverIndentGuideId:Ma}),s.createElement("button",{type:"button",className:a()(Jn.name,{[Jn.nameDetailExpanded]:Jt}),"aria-checked":Jt,title:ps,onClick:this._detailToggle,role:"switch",style:{borderColor:At},tabIndex:0},s.createElement("span",{className:a()(Jn.svcName,{[Jn.svcNameChildrenCollapsed]:fs&&!Qt})},Yn&&s.createElement(C(),{style:{backgroundColor:va.errorIconColor?(0,x.h)(Ja,va.errorIconColor):(0,x.h)(Ja,"#db2828")},className:Jn.errorIcon}),cs," ",fn&&s.createElement("span",null,s.createElement(P(),null)," ",s.createElement("i",{className:Jn.rpcColorMarker,style:{background:fn.color}}),fn.serviceName),In&&s.createElement("span",null,s.createElement(P(),null)," ",s.createElement("i",{className:Jn.rpcColorMarker,style:{background:In.color}}),In.serviceName)),s.createElement("small",{className:Jn.endpointName},fn?fn.operationName:ls),s.createElement("small",{className:Jn.endpointName}," ",this.getSpanBarLabel(va,kt,gs))),qa&&(()=>{const Ca=qa(va),Sa=Bs(Ca);if(Ca&&Sa===1){const is=Ca.logLinks?.[0]??Ca.metricLinks?.[0]??Ca.traceLinks?.[0]??void 0;return is?s.createElement("a",{href:is.href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:is.onClick?An=>{!(An.ctrlKey||An.metaKey||An.shiftKey)&&is.onClick&&(An.preventDefault(),is.onClick(An))}:void 0},is.content):null}else return Ca&&Sa>1?s.createElement($e,{links:Ca,datasourceType:Va}):null})())),s.createElement(ut.Z.Cell,{className:a()(Jn.view,Se,{[Jn.viewExpanded]:Jt,[Jn.viewExpandedAndMatchingFilter]:rn&&Jt}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-Zt,onClick:this._detailToggle},s.createElement(_e.Z,{numTicks:Xt}),s.createElement(Qe,{rpc:fn,viewStart:za,viewEnd:Pa,getViewedBounds:Vn,color:At,shortLabel:gs,longLabel:Ha,traceStartTime:_n,span:va,labelClassName:`${je} ${fa}`,className:rt})))}}ve.displayName="UnthemedSpanBarRow",ve.defaultProps={className:"",rpc:null};const Te=(0,o.HE)(ve);var he=e(90962),pe=e.n(he),ye=e(38849),Oe=e(89205),Ne=e(79090);const Me=Rt=>({Divider:t.iv`
      background: ${(0,x.h)(Rt,"#ddd")};
    `,DividerVertical:t.iv`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:t.iv`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function Ae({className:Rt,style:Lt,type:At}){const kt=(0,o.wW)(Me);return s.createElement("div",{style:Lt,className:(0,t.cx)(kt.Divider,At==="horizontal"?kt.DividerHorizontal:kt.DividerVertical,Rt)})}var we=e(68210);function ke(Rt){const{reference:Lt,children:At,createFocusSpanLink:kt}=Rt,Zt=kt(Lt.traceID,Lt.spanID);return s.createElement("a",{href:Zt.href,target:Zt.target,rel:"noopener noreferrer",onClick:Zt.onClick?Qt=>{Qt.preventDefault(),Zt.onClick(Qt)}:void 0},At)}const st=Rt=>({AccordianReferenceItem:t.iv`
      border-bottom: 1px solid ${(0,x.h)(Rt,"#d8d8d8")};
    `,AccordianKeyValues:t.iv`
      margin-left: 10px;
    `,AccordianReferences:t.iv`
      label: AccordianReferences;
      border: 1px solid ${(0,x.h)(Rt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:t.iv`
      label: AccordianReferencesHeader;
      background: ${(0,x.h)(Rt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,x.h)(Rt,"#dadada")};
      }
    `,AccordianReferencesContent:t.iv`
      label: AccordianReferencesContent;
      background: ${(0,x.h)(Rt,"#f0f0f0")};
      border-top: 1px solid ${(0,x.h)(Rt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:t.iv`
      label: AccordianReferencesFooter;
      color: ${(0,x.h)(Rt,"#999")};
    `,ReferencesList:t.iv`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:t.iv`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:t.iv`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:t.iv`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:t.iv`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:t.iv`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:t.iv`
      margin-right: 8px;
    `,title:t.iv`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function Et(Rt){const{data:Lt,createFocusSpanLink:At,openedItems:kt,onItemToggle:Zt,interactive:Qt}=Rt,Jt=(0,o.wW)(st);return s.createElement("div",{className:Jt.AccordianReferencesContent},Lt.map((rn,mn)=>s.createElement("div",{className:mn<Lt.length-1?Jt.AccordianReferenceItem:void 0,key:mn},s.createElement("div",{className:Jt.item,key:`${rn.spanID}`},s.createElement(ke,{reference:rn,createFocusSpanLink:At},s.createElement("span",{className:Jt.itemContent},rn.span?s.createElement("span",null,s.createElement("span",{className:(0,t.cx)("span-svc-name",Jt.serviceName)},rn.span.process.serviceName),s.createElement("small",{className:"endpoint-name"},rn.span.operationName)):s.createElement("span",{className:(0,t.cx)("span-svc-name",Jt.title)},"View Linked Span ",s.createElement(X.J,{name:"external-link-alt"})),s.createElement("small",{className:Jt.debugInfo},s.createElement("span",{className:Jt.debugLabel,"data-label":"TraceID:"},rn.traceID),s.createElement("span",{className:Jt.debugLabel,"data-label":"SpanID:"},rn.spanID))))),!!rn.tags?.length&&s.createElement("div",{className:Jt.AccordianKeyValues},s.createElement(J,{className:mn<Lt.length-1?W.bi:null,data:rn.tags||[],highContrast:!0,interactive:Qt,isOpen:kt?kt.has(rn):!1,label:"attributes",linksGetter:null,onToggle:Qt&&Zt?()=>Zt(rn):null})))))}const Pt=({data:Rt,interactive:Lt=!0,isOpen:At,onToggle:kt,onItemToggle:Zt,openedItems:Qt,createFocusSpanLink:Jt})=>{const rn=!Array.isArray(Rt)||!Rt.length;let mn=null,Xt="span",fn=null;Lt&&(mn=At?s.createElement(w(),{className:W.Im}):s.createElement(N(),{className:W.Im}),Xt="a",fn={"aria-checked":At,onClick:rn?null:kt,role:"switch"});const In=(0,o.wW)(st);return s.createElement("div",{className:In.AccordianReferences},s.createElement(Xt,{className:In.AccordianReferencesHeader,...fn},mn,s.createElement("strong",null,s.createElement("span",null,"References"))," ","(",Rt.length,")"),At&&s.createElement(Et,{data:Rt,openedItems:Qt,createFocusSpanLink:Jt,onItemToggle:Zt,interactive:Lt}))},gt=s.memo(Pt),Ct=()=>({TextList:t.iv`
      max-height: 450px;
      overflow: auto;
    `,List:t.iv`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:t.iv`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function Ot(Rt){const{data:Lt}=Rt,At=(0,o.wW)(Ct);return s.createElement("div",{className:a()(At.TextList),"data-testid":"TextList"},s.createElement("ul",{className:At.List},Lt.map((kt,Zt)=>s.createElement("li",{className:At.item,key:`${Zt}`},kt))))}const Ft=Rt=>({header:t.iv`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,x.h)(Rt,"#e8e8e8")};
      }
    `});function jt({data:Rt}){return s.createElement(Ot,{data:Rt})}function En(Rt){const{className:Lt,data:At,headerClassName:kt,interactive:Zt,isOpen:Qt,label:Jt,onToggle:rn,TextComponent:mn=jt}=Rt,Xt=!Array.isArray(At)||!At.length,fn=(0,o.wW)(re),In=a()(W.Im,{[fn.emptyIcon]:Xt});let Yn=null,Vn=null;Zt&&(Yn=Qt?s.createElement(w(),{className:In}):s.createElement(N(),{className:In}),Vn={"aria-checked":Qt,onClick:Xt?null:rn,role:"switch"});const _n=(0,o.wW)(Ft);return s.createElement("div",{className:Lt||""},s.createElement("div",{className:a()(_n.header,kt),...Vn,"data-testid":"AccordianText--header"},Yn,s.createElement("strong",null,Jt)," (",At.length,")"),Qt&&s.createElement(mn,{data:At}))}En.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const xn=Rt=>({header:t.iv`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:t.iv`
      overflow: hidden;
    `,debugInfo:t.iv`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:t.iv`
      label: debugLabel;
      &::before {
        color: ${(0,x.h)(Rt,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:t.iv`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,x.h)(Rt,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,x.h)(Rt,"#333")};
      }
    `,AccordianWarnings:t.iv`
      label: AccordianWarnings;
      background: ${(0,x.h)(Rt,"#fafafa")};
      border: 1px solid ${(0,x.h)(Rt,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:t.iv`
      label: AccordianWarningsHeader;
      background: ${(0,x.h)(Rt,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,x.h)(Rt,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:t.iv`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,x.h)(Rt,"#e8e8e8")};
    `,AccordianWarningsLabel:t.iv`
      label: AccordianWarningsLabel;
      color: ${(0,x.h)(Rt,"#d36c08")};
    `,Textarea:t.iv`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:t.iv`
      font-size: 1.5em;
    `});function Cn(Rt){const{detailState:Lt,linksGetter:At,logItemToggle:kt,logsToggle:Zt,processToggle:Qt,span:Jt,tagsToggle:rn,traceStartTime:mn,warningsToggle:Xt,stackTracesToggle:fn,referencesToggle:In,referenceItemToggle:Yn,createSpanLink:Vn,createFocusSpanLink:_n,topOfViewRefType:va,datasourceType:Fa}=Rt,{isTagsOpen:Ea,isProcessOpen:Ma,logs:Za,isWarningsOpen:ca,references:Ja,isStackTracesOpen:qa}=Lt,{operationName:Va,process:Xa,duration:fs,relativeStartTime:ls,startTime:cs,traceID:gs,spanID:ya,logs:za,tags:Pa,warnings:Jn,references:ps,stackTraces:Ha}=Jt,{timeZone:fa}=Rt,Bs=[{key:"svc",label:"Service:",value:Xa.serviceName},{key:"duration",label:"Duration:",value:(0,I.LU)(fs)},{key:"start",label:"Start Time:",value:(0,I.LU)(ls)+bn(cs,fa)},...Jt.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:Jt.childSpanCount}]:[]],Ca=(0,o.wW)(xn);let Sa;if(Vn){const An=Vn(Jt);An?.logLinks?Sa=s.createElement(Oe.k,{link:{...An.logLinks[0],title:"Logs for this span",target:"_blank",origin:An.logLinks[0].field,onClick:ds=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Fa,type:"log",location:"spanDetails"}),An?.logLinks?.[0].onClick?.(ds)}},buttonProps:{icon:"gf-logs"}}):Sa=s.createElement(ee.zx,{variant:"primary",size:"sm",icon:"gf-logs",disabled:!0,tooltip:"We did not match any variables between the link and this span. Check your configuration or this span attributes."},"Logs for this span")}const is=_n(gs,ya);return s.createElement("div",{"data-testid":"span-detail-component"},s.createElement("div",{className:Ca.header},s.createElement("h2",{className:a()(W.h2)},Va),s.createElement("div",{className:Ca.listWrapper},s.createElement(we.Z,{className:W.xb,divider:!0,items:Bs}))),Sa,s.createElement(Ae,{className:W.im,type:"horizontal"}),s.createElement("div",null,s.createElement("div",null,s.createElement(J,{data:Pa,label:"Attributes",linksGetter:At,isOpen:Ea,onToggle:()=>rn(ya)}),Xa.tags&&s.createElement(J,{className:W.bi,data:Xa.tags,label:"Resource",linksGetter:At,isOpen:Ma,onToggle:()=>Qt(ya)})),za&&za.length>0&&s.createElement(ne,{linksGetter:At,logs:za,isOpen:Za.isOpen,openedItems:Za.openedItems,onToggle:()=>Zt(ya),onItemToggle:An=>kt(ya,An),timestamp:mn}),Jn&&Jn.length>0&&s.createElement(En,{className:Ca.AccordianWarnings,headerClassName:Ca.AccordianWarningsHeader,label:s.createElement("span",{className:Ca.AccordianWarningsLabel},"Warnings"),data:Jn,isOpen:ca,onToggle:()=>Xt(ya)}),Ha&&Ha.length&&s.createElement(En,{label:"Stack trace",data:Ha,isOpen:qa,TextComponent:An=>{let ds;return An.data?.length>1?ds=An.data.map((ws,ks)=>`StackTrace ${ks+1}:
${ws}`).join(`
`):ds=An.data?.[0],s.createElement(Ne.K,{className:Ca.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:ds})},onToggle:()=>fn(ya)}),ps&&ps.length>0&&(ps.length>1||ps[0].refType!=="CHILD_OF")&&s.createElement(gt,{data:ps,isOpen:Ja.isOpen,openedItems:Ja.openedItems,onToggle:()=>In(ya),onItemToggle:An=>Yn(ya,An),createFocusSpanLink:_n}),va===wn.Explore&&s.createElement("small",{className:Ca.debugInfo},s.createElement("a",{...is,onClick:An=>{is.onClick&&An.button===0&&(!An.currentTarget.target||An.currentTarget.target==="_self")&&!(An.metaKey||An.altKey||An.ctrlKey||An.shiftKey)&&(An.preventDefault(),is.onClick(An))}},s.createElement(pe(),{className:a()(W.Im,Ca.LinkIcon)})),s.createElement("span",{className:Ca.debugLabel,"data-label":"SpanID:"})," ",ya)))}const bn=(Rt,Lt)=>{const At=(0,ye.dq)(Rt/1e3,{timeZone:Lt,defaultWithMS:!0}),kt=At.split(" ");return` (${kt[1]?kt[1]:At})`},Tn=(0,m.B)(Rt=>({expandedAccent:t.iv`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 4px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:t.iv`
      label: infoWrapper;
      border: 1px solid ${(0,x.h)(Rt,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class Zn extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(Lt,At)=>{const{linksGetter:kt,span:Zt}=this.props;return kt(Zt,Lt,At)}}render(){const{color:Lt,columnDivision:At,detailState:kt,logItemToggle:Zt,logsToggle:Qt,processToggle:Jt,referenceItemToggle:rn,referencesToggle:mn,warningsToggle:Xt,stackTracesToggle:fn,span:In,timeZone:Yn,tagsToggle:Vn,traceStartTime:_n,hoverIndentGuideIds:va,addHoverIndentGuideId:Fa,removeHoverIndentGuideId:Ea,theme:Ma,createSpanLink:Za,focusedSpanId:ca,createFocusSpanLink:Ja,topOfViewRefType:qa,datasourceType:Va}=this.props,Xa=Tn(Ma);return s.createElement(ut.Z,null,s.createElement(ut.Z.Cell,{width:At,style:{overflow:"hidden"}},s.createElement(nt,{span:In,showChildrenIcon:!1,hoverIndentGuideIds:va,addHoverIndentGuideId:Fa,removeHoverIndentGuideId:Ea}),s.createElement(ee.zx,{fill:"text",onClick:this._detailToggle,className:a()(Xa.expandedAccent,(0,ee.gN)(Ma)),style:{borderColor:Lt},"data-testid":"detail-row-expanded-accent"})),s.createElement(ut.Z.Cell,{width:1-At},s.createElement("div",{className:Xa.infoWrapper,style:{borderTopColor:Lt}},s.createElement(Cn,{detailState:kt,linksGetter:this._linksGetter,logItemToggle:Zt,logsToggle:Qt,processToggle:Jt,referenceItemToggle:rn,referencesToggle:mn,warningsToggle:Xt,stackTracesToggle:fn,span:In,timeZone:Yn,tagsToggle:Vn,traceStartTime:_n,createSpanLink:Za,focusedSpanId:ca,createFocusSpanLink:Ja,topOfViewRefType:qa,datasourceType:Va}))))}}const Bn=(0,o.HE)(Zn),Sn=(0,m.B)(Rt=>{const{topOfViewRefType:Lt}=Rt,At=Lt===wn.Explore?"fixed":"absolute";return{rowsWrapper:t.iv`
      width: 100%;
    `,row:t.iv`
      width: 100%;
    `,scrollToTopButton:t.iv`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${At};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}});var wn=(Rt=>(Rt.Explore="Explore",Rt.Panel="Panel",Rt))(wn||{});const $n={bar:28,detail:161,detailWithLogs:197},Xn=5;function ba(Rt,Lt,At){if(!Rt)return[];let kt=null;const Zt=[];for(let Qt=0;Qt<Rt.length;Qt++){const Jt=Rt[Qt],{spanID:rn,depth:mn}=Jt;let Xt=!1;kt!=null&&(mn>=kt?Xt=!0:kt=null),!Xt&&(Lt.has(rn)&&(kt=mn+1),Zt.push({span:Jt,isDetail:!1,spanIndex:Qt}),At.has(rn)&&Zt.push({span:Jt,isDetail:!0,spanIndex:Qt}))}return Zt}function hn(Rt){const[Lt,At]=Rt;return{left:Lt>0,right:At<1}}function Kn(Rt,Lt,At){return Rt?ba(Rt.spans,Lt,At):[]}const ta=(0,u.Z)(Kn),La=(0,u.Z)(I._h,n.isEqual),oa=(0,u.Z)(hn,n.isEqual);class ha extends s.Component{constructor(Lt){super(Lt),this.topTraceViewRef=(0,s.createRef)(),this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=Qt=>this.getRowStates()[Qt].spanIndex,this.mapSpanIndexToRowIndex=Qt=>{const Jt=this.getRowStates().length;for(let rn=0;rn<Jt;rn++){const{spanIndex:mn}=this.getRowStates()[rn];if(mn===Qt)return rn}throw new Error(`unable to find row for span index: ${Qt}`)},this.setListView=Qt=>{const Jt=this.listView!==Qt;this.listView=Qt,Qt&&Jt&&this.props.registerAccessors(this.getAccessors())},this.getKeyFromIndex=Qt=>{const{isDetail:Jt,span:rn}=this.getRowStates()[Qt];return`${rn.traceID}--${rn.spanID}--${Jt?"detail":"bar"}`},this.getIndexFromKey=Qt=>{const Jt=Qt.split("--"),rn=Jt[0],mn=Jt[1],Xt=Jt[2]==="detail",fn=this.getRowStates().length;for(let In=0;In<fn;In++){const{span:Yn,isDetail:Vn}=this.getRowStates()[In];if(Yn.spanID===mn&&Yn.traceID===rn&&Vn===Xt)return In}return-1},this.getRowHeight=Qt=>{const{span:Jt,isDetail:rn}=this.getRowStates()[Qt];return rn?Array.isArray(Jt.logs)&&Jt.logs.length?$n.detailWithLogs:$n.detail:$n.bar},this.renderRow=(Qt,Jt,rn,mn)=>{const{isDetail:Xt,span:fn,spanIndex:In}=this.getRowStates()[rn];return Xt?this.renderSpanDetailRow(fn,Qt,Jt,mn):this.renderSpanBarRow(fn,In,Qt,Jt,mn)},this.scrollToSpan=Qt=>{if(Qt==null)return;const Jt=this.getRowStates().findIndex(rn=>rn.span.spanID===Qt);Jt>=0&&this.listView?.scrollToIndex(Jt)},this.scrollToTop=()=>{const{topOfViewRef:Qt,datasourceType:Jt,trace:rn}=this.props;Qt?.current?.scrollIntoView({behavior:"smooth"}),(0,i.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:Jt,numServices:rn.services.length,numSpans:rn.spans.length})};const{setTrace:At,trace:kt,uiFind:Zt}=Lt;At(kt,Zt)}componentDidMount(){this.scrollToSpan(this.props.focusedSpanId)}shouldComponentUpdate(Lt){const At=Object.keys(Lt);for(let kt=0;kt<At.length;kt+=1)if(Lt[At[kt]]!==this.props[At[kt]])if(At[kt]==="shouldScrollToFirstUiFindMatch"){if(Lt[At[kt]])return!0}else return!0;return!1}componentDidUpdate(Lt){const{registerAccessors:At,trace:kt}=Lt,{shouldScrollToFirstUiFindMatch:Zt,clearShouldScrollToFirstUiFindMatch:Qt,scrollToFirstVisibleSpan:Jt,registerAccessors:rn,setTrace:mn,trace:Xt,uiFind:fn,focusedSpanId:In,focusedSpanIdForSearch:Yn}=this.props;kt!==Xt&&mn(Xt,fn),this.listView&&At!==rn&&rn(this.getAccessors()),Zt&&(Jt(),Qt()),In!==Lt.focusedSpanId&&this.scrollToSpan(In),Yn!==Lt.focusedSpanIdForSearch&&this.scrollToSpan(Yn)}getRowStates(){const{childrenHiddenIDs:Lt,detailStates:At,trace:kt}=this.props;return ta(kt,Lt,At)}getClipping(){const{currentViewRangeTime:Lt}=this.props;return oa(Lt)}getViewedBounds(){const{currentViewRangeTime:Lt,trace:At}=this.props,[kt,Zt]=Lt;return La({min:At.startTime,max:At.endTime,viewStart:kt,viewEnd:Zt})}getAccessors(){const Lt=this.listView;if(!Lt)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:Lt.getViewHeight,getBottomRowIndexVisible:Lt.getBottomVisibleIndex,getTopRowIndexVisible:Lt.getTopVisibleIndex,getRowPosition:Lt.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(Lt,At,kt,Zt,Qt){const{spanID:Jt}=Lt,{serviceName:rn}=Lt.process,{childrenHiddenIDs:mn,childrenToggle:Xt,detailStates:fn,detailToggle:In,findMatchesIDs:Yn,spanNameColumnWidth:Vn,trace:_n,spanBarOptions:va,hoverIndentGuideIds:Fa,addHoverIndentGuideId:Ea,removeHoverIndentGuideId:Ma,createSpanLink:Za,focusedSpanId:ca,focusedSpanIdForSearch:Ja,theme:qa,datasourceType:Va}=this.props;if(!_n)return null;const Xa=(0,c._K)(rn,qa),fs=mn.has(Jt),ls=fn.has(Jt),cs=Yn?Yn.has(Jt):!1,gs=Jt===ca||Jt===Ja,ya=(0,I.yM)(Lt)||fs&&(0,I.Qx)(_n.spans,At);let za=null;if(fs){const Ha=(0,I.s2)(_n.spans.slice(At));if(Ha){const fa=this.getViewedBounds()(Ha.startTime,Ha.startTime+Ha.duration);za={color:(0,c._K)(Ha.process.serviceName,qa),operationName:Ha.operationName,serviceName:Ha.process.serviceName,viewEnd:fa.end,viewStart:fa.start}}}const Pa=Lt.tags.find(Ha=>Ha.key===r);let Jn=null;!Lt.hasChildren&&Pa&&(0,I.JE)(Lt)&&(Jn={serviceName:Pa.value,color:(0,c._K)(Pa.value,qa)});const ps=Sn(this.props);return s.createElement("div",{className:ps.row,key:kt,style:Zt,...Qt},s.createElement(Te,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:Xa,spanBarOptions:va,columnDivision:Vn,isChildrenExpanded:!fs,isDetailExpanded:ls,isMatchingFilter:cs,isFocused:gs,numTicks:Xn,onDetailToggled:In,onChildrenToggled:Xt,rpc:za,noInstrumentedServer:Jn,showErrorIcon:ya,getViewedBounds:this.getViewedBounds(),traceStartTime:_n.startTime,span:Lt,hoverIndentGuideIds:Fa,addHoverIndentGuideId:Ea,removeHoverIndentGuideId:Ma,createSpanLink:Za,datasourceType:Va}))}renderSpanDetailRow(Lt,At,kt,Zt){const{spanID:Qt}=Lt,{serviceName:Jt}=Lt.process,{detailLogItemToggle:rn,detailLogsToggle:mn,detailProcessToggle:Xt,detailReferencesToggle:fn,detailReferenceItemToggle:In,detailWarningsToggle:Yn,detailStackTracesToggle:Vn,detailStates:_n,detailTagsToggle:va,detailToggle:Fa,spanNameColumnWidth:Ea,trace:Ma,timeZone:Za,hoverIndentGuideIds:ca,addHoverIndentGuideId:Ja,removeHoverIndentGuideId:qa,linksGetter:Va,createSpanLink:Xa,focusedSpanId:fs,createFocusSpanLink:ls,topOfViewRefType:cs,theme:gs,datasourceType:ya}=this.props,za=_n.get(Qt);if(!Ma||!za)return null;const Pa=(0,c._K)(Jt,gs),Jn=Sn(this.props);return s.createElement("div",{className:Jn.row,key:At,style:{...kt,zIndex:1},...Zt},s.createElement(Bn,{color:Pa,columnDivision:Ea,onDetailToggled:Fa,detailState:za,linksGetter:Va,logItemToggle:rn,logsToggle:mn,processToggle:Xt,referenceItemToggle:In,referencesToggle:fn,warningsToggle:Yn,stackTracesToggle:Vn,span:Lt,timeZone:Za,tagsToggle:va,traceStartTime:Ma.startTime,hoverIndentGuideIds:ca,addHoverIndentGuideId:Ja,removeHoverIndentGuideId:qa,createSpanLink:Xa,focusedSpanId:fs,createFocusSpanLink:ls,topOfViewRefType:cs,datasourceType:ya}))}render(){const Lt=Sn(this.props),{scrollElement:At}=this.props;return s.createElement(s.Fragment,null,s.createElement(y,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:Lt.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:At}),s.createElement(f.h,{className:Lt.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const ia=(0,o.HE)(ha)},60456:()=>{"use strict"},807:(G,O,e)=>{"use strict";e.d(O,{JE:()=>d,LU:()=>t.LU,Qx:()=>l,_h:()=>n,s2:()=>r,yM:()=>o});var t=e(89444);function n(c){const{min:g,max:p,viewStart:y,viewEnd:h}=c,a=p-g,v=g+y*a,E=p-(1-h)*a-v;return(P,x)=>({start:(P-v)/E,end:(x-v)/E})}function u(c,g,p){return!Array.isArray(p.tags)||!p.tags.length?!1:p.tags.some(y=>y.key===c&&y.value===g)}const s=u.bind(null,"span.kind","client"),i=u.bind(null,"span.kind","server"),m=u.bind(null,"error",!0),f=u.bind(null,"error","true"),o=c=>m(c)||f(c);function l(c,g){const{depth:p}=c[g];let y=g+1;for(;y<c.length&&c[y].depth>p;y++)if(o(c[y]))return!0;return!1}function r(c){if(c.length<=1||!s(c[0]))return!1;const p=c[0].depth+1;let y=1;for(;y<c.length&&c[y].depth===p;){if(i(c[y]))return c[y];y++}return null}const d=c=>c.tags.some(({key:g,value:p})=>g==="span.kind"&&p==="client")},68210:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(86780),n=e(23019),u=e.n(n),s=e(68404),i=e(29516),m=e(32973);const f=l=>r=>({LabeledList:t.iv`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${l===!0&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:t.iv`
      label: LabeledListItem;
      display: inline-block;
      ${l===!0&&`
        border-right: 1px solid ${(0,m.h)(r,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:t.iv`
      label: LabeledListLabel;
      color: ${r.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:t.iv`
      label: LabeledListValue;
      margin-right: 0.55rem;
    `});function o(l){const{className:r,divider:d=!1,items:c}=l,g=(0,i.wW)(f(d));return s.createElement("ul",{className:u()(g.LabeledList,r)},c.map(({key:p,label:y,value:h})=>s.createElement("li",{className:g.LabeledListItem,key:`${p}`},s.createElement("span",{className:g.LabeledListLabel},y),s.createElement("strong",{className:g.LabeledListValue},h))))}},81473:(G,O,e)=>{"use strict";e.d(O,{DetailState:()=>mn,SpanBarSettings:()=>Jt.ZP,TracePageHeader:()=>Qt,TraceTimelineViewer:()=>q,autoColor:()=>m.h,filterSpans:()=>er,transformTraceData:()=>Pr});var t=e(86780),n=e(68404),u=e(77274),s=e(82385),i=e(29516),m=e(32973),f=e(21710),o=e.n(f);const r={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let d;function c(){if(d)return d;const Z=new(o())(document.body);return d=Z,Z}function g(Z){const ae=c();Object.keys(Z).forEach(Pe=>{const Ue=Z[Pe];Ue&&ae.bind(r[Pe].binding,Ue)})}function p(){c().reset()}var y=e(23019),h=e.n(y),a=e(47175),v=e(60428),C=e(77834),E=e(20017);const P=()=>({TimelineCollapser:t.iv`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function x(Z){const{onExpandAll:ae,onExpandOne:Pe,onCollapseAll:Ue,onCollapseOne:et}=Z,ot=(0,i.wW)(P);return n.createElement("div",{className:ot.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(E.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:Pe}),n.createElement(E.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:et}),n.createElement(E.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:ae}),n.createElement(E.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:Ue}))}var M=(Z=>(Z.DragEnd="DragEnd",Z.DragMove="DragMove",Z.DragStart="DragStart",Z.MouseEnter="MouseEnter",Z.MouseLeave="MouseLeave",Z.MouseMove="MouseMove",Z))(M||{});const S=M;var D=e(82897);const T=0;class R{constructor({getBounds:ae,tag:Pe,resetBoundsOnResize:Ue=!0,...et}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=ot=>{const{button:ft,clientX:xt,type:St}=ot;if(this._isDragging||ft!==T)return;let Bt=null,Ht;if(St==="mouseenter")Bt=S.MouseEnter,Ht=this._onMouseEnter;else if(St==="mouseleave")Bt=S.MouseLeave,Ht=this._onMouseLeave;else if(St==="mousemove")Bt=S.MouseMove,Ht=this._onMouseMove;else throw new Error(`invalid event type: ${St}`);if(!Ht)return;const{value:qt,x:nn}=this._getPosition(xt);Ht({event:ot,type:Bt,value:qt,x:nn,manager:this,tag:this.tag})},this._handleDragEvent=ot=>{const{button:ft,clientX:xt,type:St}=ot;let Bt=null,Ht;if(St==="mousedown"){if(this._isDragging||ft!==T)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const Mn=(0,D.get)(document,"body.style");Mn&&(Mn.userSelect="none"),this._isDragging=!0,Bt=S.DragStart,Ht=this._onDragStart}else if(St==="mousemove"){if(!this._isDragging)return;Bt=S.DragMove,Ht=this._onDragMove}else if(St==="mouseup"){if(!this._isDragging)return;this._stopDragging(),Bt=S.DragEnd,Ht=this._onDragEnd}else throw new Error(`invalid event type: ${St}`);if(!Ht)return;const{value:qt,x:nn}=this._getPosition(xt);Ht({event:ot,type:Bt,value:qt,x:nn,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=ae,this.tag=Pe,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=Boolean(Ue),this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=et.onMouseEnter,this._onMouseLeave=et.onMouseLeave,this._onMouseMove=et.onMouseMove,this._onDragStart=et.onDragStart,this._onDragMove=et.onDragMove,this._onDragEnd=et.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(ae){const{clientXLeft:Pe,maxValue:Ue,minValue:et,width:ot}=this._getBounds();let ft=ae-Pe,xt=ft/ot;return et!=null&&xt<et?(xt=et,ft=et*ot):Ue!=null&&xt>Ue&&(xt=Ue,ft=Ue*ot),{value:xt,x:ft}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const ae=(0,D.get)(document,"body.style");ae&&(ae.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}const L=(0,s.B)(()=>({TimelineColumnResizer:t.iv`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:t.iv`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:t.iv`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:t.iv`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:t.iv`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:t.iv`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:t.iv`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:t.iv`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class w extends n.PureComponent{constructor(ae){super(ae),this._setRootElm=Pe=>{this._rootElm=Pe},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:Pe,width:Ue}=this._rootElm.getBoundingClientRect(),{min:et,max:ot}=this.props;return{clientXLeft:Pe,width:Ue,maxValue:ot,minValue:et}},this._handleDragUpdate=({value:Pe})=>{this.setState({dragPosition:Pe})},this._handleDragEnd=({manager:Pe,value:Ue})=>{Pe.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(Ue)},this._dragManager=new R({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let ae,Pe;const{position:Ue,columnResizeHandleHeight:et}=this.props,{dragPosition:ot}=this.state;ae=`${Ue*100}%`;const ft={left:ae};let xt=!1,St=!1;const Bt=L();if(this._dragManager.isDragging()&&this._rootElm&&ot!=null){xt=ot<Ue,St=ot>Ue,ae=`${ot*100}%`;const qt=`${Math.min(Ue,ot)*100}%`,nn=`calc(${(1-Math.max(Ue,ot))*100}% - 1px)`;Pe={left:qt,right:nn}}else Pe=ft;Pe.height=et;const Ht=xt||St;return n.createElement("div",{className:Bt.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:h()(Bt.gripIcon,Ht&&Bt.gripIconDragging),style:ft,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:h()(Bt.dragger,Ht&&Bt.draggerDragging,St&&Bt.draggerDraggingRight,xt&&Bt.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:Pe,"data-testid":"TimelineColumnResizer--dragger"}))}}const A=(0,s.B)(()=>({TimelineViewingLayer:t.iv`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:t.iv`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:t.iv`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:t.iv`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:t.iv`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:t.iv`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:t.iv`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:t.iv`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function N(Z){return Reflect.has(Z,"isOutOfView")}function W(Z,ae,Pe){return Z+Pe*(ae-Z)}function I(Z,ae,Pe){return(Pe-Z)/(ae-Z)}function F(Z,ae){let[Pe,Ue]=Z<ae?[Z,ae]:[ae,Z];return Pe>=1||Ue<=0?{isOutOfView:!0}:(Pe<0&&(Pe=0),Ue>1&&(Ue=1),{isDraggingLeft:Z>ae,left:`${Pe*100}%`,width:`${(Ue-Pe)*100}%`})}function V(Z,ae,Pe,Ue,et){const ot=I(Z,ae,Pe),ft=I(Z,ae,Ue),xt=F(ot,ft);if(N(xt))return null;const{isDraggingLeft:St,left:Bt,width:Ht}=xt,qt=A(),nn=(0,t.cx)({[qt.TimelineViewingLayerDraggedDraggingRight]:!St,[qt.TimelineViewingLayerDraggedReframeDrag]:!et,[qt.TimelineViewingLayerDraggedShiftDrag]:et});return n.createElement("div",{className:(0,t.cx)(qt.TimelineViewingLayerDragged,qt.TimelineViewingLayerDraggedDraggingLeft,nn),style:{left:Bt,width:Ht},"data-testid":"Dragged"})}class b extends n.PureComponent{constructor(ae){super(ae),this._setRoot=Pe=>{this._root=Pe},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:Pe,width:Ue}=this._root.getBoundingClientRect();return{clientXLeft:Pe,width:Ue}},this._handleReframeMouseMove=({value:Pe})=>{const[Ue,et]=this.props.viewRangeTime.current,ot=W(Ue,et,Pe);this.props.updateNextViewRangeTime({cursor:ot})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:Pe})=>{const{current:Ue,reframe:et}=this.props.viewRangeTime,[ot,ft]=Ue,xt=W(ot,ft,Pe),Bt={reframe:{anchor:et?et.anchor:xt,shift:xt}};this.props.updateNextViewRangeTime(Bt)},this._handleReframeDragEnd=({manager:Pe,value:Ue})=>{const{current:et,reframe:ot}=this.props.viewRangeTime,[ft,xt]=et,St=W(ft,xt,Ue),Bt=ot?ot.anchor:St,[Ht,qt]=St<Bt?[St,Bt]:[Bt,St];Pe.resetBounds(),this.props.updateViewRangeTime(Ht,qt,"timeline-header")},this._draggerReframe=new R({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(ae){const{boundsInvalidator:Pe}=this.props;Pe!==ae.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:ae}=this.props,{current:Pe,cursor:Ue,reframe:et,shiftEnd:ot,shiftStart:ft}=ae,[xt,St]=Pe,Bt=et!=null||ot!=null||ft!=null;let Ht;!Bt&&Ue!=null&&Ue>=xt&&Ue<=St&&(Ht=`${I(xt,St,Ue)*100}%`);const qt=A();return n.createElement("div",{"aria-hidden":!0,className:qt.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},Ht!=null&&n.createElement("div",{className:qt.TimelineViewingLayerCursorGuide,style:{left:Ht},"data-testid":"TimelineViewingLayer--cursorGuide"}),et!=null&&V(xt,St,et.anchor,et.shift,!1),ot!=null&&V(xt,St,St,ot,!0),ft!=null&&V(xt,St,xt,ft,!0))}}const X=Z=>({TimelineHeaderRow:t.iv`
      label: TimelineHeaderRow;
      background: ${(0,m.h)(Z,"#ececec")};
      border-bottom: 1px solid ${(0,m.h)(Z,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:t.iv`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:t.iv`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function k(Z){const{duration:ae,nameColumnWidth:Pe,numTicks:Ue,onCollapseAll:et,onCollapseOne:ot,onColummWidthChange:ft,onExpandAll:xt,onExpandOne:St,updateViewRangeTime:Bt,updateNextViewRangeTime:Ht,viewRangeTime:qt,columnResizeHandleHeight:nn}=Z,[Mn,Rn]=qt.current,Pn=(0,i.wW)(X);return n.createElement(C.Z,{className:Pn.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(C.Z.Cell,{className:h()(a.oD,a.H3,Pn.TimelineHeaderWrapper),width:Pe},n.createElement("h4",{className:Pn.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(x,{onCollapseAll:et,onExpandAll:xt,onCollapseOne:ot,onExpandOne:St})),n.createElement(C.Z.Cell,{width:1-Pe},n.createElement(b,{boundsInvalidator:Pe,updateNextViewRangeTime:Ht,updateViewRangeTime:Bt,viewRangeTime:qt}),n.createElement(v.Z,{numTicks:Ue,startTime:Mn*ae,endTime:Rn*ae,showLabels:!0})),n.createElement(w,{columnResizeHandleHeight:nn,position:Pe,onChange:ft,min:.2,max:.85}))}var H=e(21903);const Y=(0,s.B)(Z=>({TraceTimelineViewer:t.iv`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,m.h)(Z,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,m.h)(Z,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,m.h)(Z,"teal")};
      }

      & .json-markup-null {
        color: ${(0,m.h)(Z,"teal")};
      }

      & .json-markup-number {
        color: ${(0,m.h)(Z,"blue","black")};
      }
    `})),ee=5;class ue extends n.PureComponent{constructor(ae){super(ae),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,u.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,u.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,u.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,u.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,type:"expandOne"})},this.state={height:0}}componentDidMount(){g({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:ae,updateNextViewRangeTime:Pe,updateViewRangeTime:Ue,viewRange:et,traceTimeline:ot,theme:ft,topOfViewRef:xt,focusedSpanIdForSearch:St,...Bt}=this.props,{trace:Ht}=Bt,qt=Y(ft);return n.createElement("div",{className:qt.TraceTimelineViewer,ref:nn=>nn&&this.setState({height:nn.getBoundingClientRect().height})},n.createElement(k,{duration:Ht.duration,nameColumnWidth:ot.spanNameColumnWidth,numTicks:ee,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:ae,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:et.time,updateNextViewRangeTime:Pe,updateViewRangeTime:Ue,columnResizeHandleHeight:this.state.height}),n.createElement(H.ZP,{...Bt,...ot,setSpanNameColumnWidth:ae,currentViewRangeTime:et.time.current,topOfViewRef:xt,focusedSpanIdForSearch:St,datasourceType:this.props.datasourceType}))}}const q=(0,i.HE)(ue);var ge=e(68485),De=e.n(ge),fe=e(38849),me=e(977),ce=e.n(me);const ie=()=>({NewWindowIconLarge:t.iv`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function re(Z){const{isLarge:ae,className:Pe,...Ue}=Z,et=(0,i.wW)(ie),ot=h()({[et.NewWindowIconLarge]:ae},Pe);return n.createElement(ce(),{className:ot,...Ue})}re.defaultProps={isLarge:!1};const Ee=Z=>n.createElement("a",{href:Z.href,title:Z.title,target:"_blank",rel:"noopener noreferrer",className:Z.className},Z.children," ",n.createElement(re,null));function J(Z){const{links:ae}=Z;return n.createElement(Ee,{href:ae[0].url,title:ae[0].text,className:Z.className})}var te=e(68210);const ne=100,j="<trace-without-root-span>",Ye={DONE:"FETCH_DONE",ERROR:"FETCH_ERROR",LOADING:"FETCH_LOADING"},de=()=>({BreakableText:t.iv`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),Be=/\W*\w+\W*/g;function Ve(Z){const{className:ae,text:Pe,wordRegexp:Ue=Be}=Z,et=(0,i.wW)(de);if(!Pe)return typeof Pe=="string"?Pe:null;const ot=[];Ue.exec("");let ft=Ue.exec(Pe)||[Pe];for(;ft;)ot.push(n.createElement("span",{key:`${Pe}-${ot.length}`,className:ae||et.BreakableText},ft[0])),ft=Ue.exec(Pe);return ot}Ve.defaultProps={wordRegexp:Be};const $e=Z=>({TraceName:t.iv`
      label: TraceName;
      font-size: ${Z.typography.size.lg};
    `});function We(Z){const{className:ae,traceName:Pe}=Z,Ue=(0,i.wW)($e),et=String(Pe||j),ot=n.createElement(Ve,{text:et});return n.createElement("span",{className:h()(Ue.TraceName,ae)},ot)}var Ke=e(87855),qe=e(9763),Xe=e.n(qe);const at=Xe()(Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:ne,menuEnabled:!0},linkPatterns:[],menu:[{label:"About Jaeger",items:[{label:"GitHub",url:"https://github.com/uber/jaeger"},{label:"Docs",url:"http://jaeger.readthedocs.io/en/latest/"},{label:"Twitter",url:"https://twitter.com/JaegerTracing"},{label:"Discussion Group",url:"https://groups.google.com/forum/#!forum/jaeger-tracing"},{label:"Gitter.im",url:"https://gitter.im/jaegertracing/Lobby"},{label:"Blog",url:"https://medium.com/jaegertracing/"}]}],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]})),Ze=[{formerKey:"dependenciesMenuEnabled",currentKey:"dependencies.menuEnabled"},{formerKey:"gaTrackingID",currentKey:"tracking.gaID"}];function lt(){return at}function nt(Z){return(0,D.get)(lt(),Z)}function _e(Z){const ae=Z.references?Z.references.find(Pe=>Pe.refType==="CHILD_OF"):null;return ae?ae.span:null}const ut=/#\{([^{}]*)\}/g;function rt(Z){const ae=new Set;return Z.replace(ut,(Pe,Ue)=>(ae.add(Ue),Pe)),Array.from(ae)}function je(Z,ae,Pe){return Z.replace(ut,(Ue,et)=>{const ot=Pe[et];return ot==null?"":ae(ot)})}function dt(Z,ae){if(typeof Z!="string")throw new Error("Invalid template");return{parameters:rt(Z),template:je.bind(null,Z,ae)}}function oe(Z){if(typeof Z=="string")return ae=>ae===Z;if(Array.isArray(Z))return ae=>Z.indexOf(ae)>-1;if(Z==null)return()=>!0;throw new Error(`Invalid value: ${Z}`)}const Se=Z=>Z;function Re(Z){try{const ae=dt(Z.url,encodeURIComponent),Pe=dt(Z.text,Se);return{object:Z,type:oe(Z.type),key:oe(Z.key),value:oe(Z.value),url:ae,text:Pe,parameters:(0,D.uniq)(ae.parameters.concat(Pe.parameters))}}catch(ae){return console.error(`Ignoring invalid link pattern: ${ae}`,Z),null}}function ze(Z,ae){if(ae)return ae.find(Pe=>Pe.key===Z)}function ve(Z,ae){let Pe=ae;for(;Pe;){const Ue=ze(Z,Pe.tags)||ze(Z,Pe.process.tags);if(Ue)return Ue;Pe=_e(Pe)}}function Te(Z,ae){return Z.template(ae)}function he(Z,ae){const Pe=[],Ue=Object.keys(ae).filter(et=>typeof ae[et]=="string"||ae[et]==="number");return Z?.filter(et=>et?.type("traces")).forEach(et=>{const ot={};et?.parameters.every(xt=>{const St=xt;return Ue.includes(St)?(ot[xt]=ae[St],!0):!1})&&Pe.push({url:Te(et.url,ot),text:Te(et.text,ot)})}),Pe}function pe(Z,ae,Pe,Ue){const et=Pe[Ue];let ot="logs";const ft=ae.process.tags===Pe;ft&&(ot="process"),ae.tags===Pe&&(ot="tags");const St=[];return Z.forEach(Bt=>{if(Bt.type(ot)&&Bt.key(et.key)&&Bt.value(et.value)){const Ht={};Bt.parameters.every(nn=>{let Mn=ze(nn,Pe);return!Mn&&!ft&&(Mn=ve(nn,ae)),Mn?(Ht[nn]=Mn.value,!0):(console.warn(`Skipping link pattern, missing parameter ${nn} for key ${et.key} in ${ot}.`,Bt.object),!1)})&&St.push({url:Te(Bt.url,Ht),text:Te(Bt.text,Ht)})}}),St}function ye(Z,ae){return(Pe,Ue,et)=>{if(Z.length===0)return[];const ot=Ue[et];let ft=ae.get(ot);return ft||(ft=pe(Z,Pe,Ue,et),ae.set(ot,ft)),ft}}const Oe=(nt("linkPatterns")||[]).map(Re).filter(Z=>Boolean(Z)),Ne=(0,Ke.Z)(10)(Z=>{const ae=[];return Z?he(Oe,Z):ae}),Me=ye(Oe,new WeakMap);function Ae(Z){let ae;const Pe=new Set(Z.map(({spanID:Ue})=>Ue));for(let Ue=0;Ue<Z.length;Ue++){if(Z[Ue].references&&Z[Ue].references.some(({traceID:xt,spanID:St})=>xt===Z[Ue].traceID&&Pe.has(St)))continue;if(!ae){ae=Z[Ue];continue}const ot=Z[Ue].references&&Z[Ue].references.length||0,ft=ae.references&&ae.references.length||0;(ot<ft||ot===ft&&Z[Ue].startTime<ae.startTime)&&(ae=Z[Ue])}return ae?`${ae.process.serviceName}: ${ae.operationName}`:""}const we=(0,D.memoize)(Ae,Z=>Z.length?Z[0].traceID:0);var ke=e(89444),st=e(58635),Et=e(4713);const Pt=.8,gt=2,Ct=200,Ot=10,Ft=60,jt=6;function En(Z,ae,Pe,Ue,et){const ot=new Map,ft=ae.length<Ft?Ft:Math.min(ae.length,Ct),xt=window.innerWidth*2;Z.width=xt,Z.height=ft;const St=Math.min(jt,Math.max(gt,ft/ae.length)),Bt=ft/ae.length,Ht=Z.getContext("2d",{alpha:!1});Ht.fillStyle=et,Ht.fillRect(0,0,xt,ft);for(let qt=0;qt<ae.length;qt++){const{valueWidth:nn,valueOffset:Mn,serviceName:Rn}=ae[qt],Pn=Mn/Pe*xt;let jn=nn/Pe*xt;jn<Ot&&(jn=Ot);let On=ot.get(Rn);On||(On=`rgba(${Ue(Rn).concat(Pt).join()})`,ot.set(Rn,On)),Ht.fillStyle=On,Ht.fillRect(Pn,qt*Bt,jn,St)}}const xn=(0,s.B)(Z=>({CanvasSpanGraph:t.iv`
      label: CanvasSpanGraph;
      background: ${(0,m.h)(Z,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class Cn extends n.PureComponent{constructor(ae){super(ae),this.getColor=Pe=>(0,Et.e6)(Pe,this.props.theme),this._setCanvasRef=Pe=>{this._canvasElm=Pe},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:ae,items:Pe}=this.props;En(this._canvasElm,Pe,ae,this.getColor,(0,m.h)(this.props.theme,"#fff"))}}render(){return n.createElement("canvas",{className:xn(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const bn=(0,i.HE)(Cn),Tn=()=>({TickLabels:t.iv`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:t.iv`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function Zn(Z){const{numTicks:ae,duration:Pe}=Z,Ue=(0,i.wW)(Tn),et=[];for(let ot=0;ot<ae+1;ot++){const ft=ot/ae,xt=ft===1?{right:"0%"}:{left:`${ft*100}%`};et.push(n.createElement("div",{key:ft,className:Ue.TickLabelsLabel,style:xt,"data-testid":"tick"},(0,ke.LU)(Pe*ft)))}return n.createElement("div",{className:Ue.TickLabels,"data-testid":"TickLabels"},et)}var Bn=e(90723);const Sn=()=>({GraphTick:t.iv`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function wn(Z){const{numTicks:ae}=Z,Pe=(0,i.wW)(Sn),Ue=[];for(let et=1;et<ae;et++){const ot=`${et/ae*100}%`;Ue.push(n.createElement("line",{className:Pe.GraphTick,x1:ot,y1:"0%",x2:ot,y2:"100%",key:et/ae}))}return n.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},Ue)}const $n=()=>({ScrubberHandleExpansion:h()(t.iv`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:h()(t.iv`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:h()(t.iv`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:t.iv`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:t.iv`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function Xn({isDragging:Z,onMouseDown:ae,onMouseEnter:Pe,onMouseLeave:Ue,position:et}){const ot=`${et*100}%`,ft=(0,i.wW)($n),xt=h()({[ft.ScrubberDragging]:Z});return n.createElement("g",{className:xt,"data-testid":"scrubber-component"},n.createElement("g",{"data-testid":"scrubber-component-g",className:ft.ScrubberHandles,onMouseDown:ae,onMouseEnter:Pe,onMouseLeave:Ue},n.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:ot,className:ft.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),n.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:ot,className:ft.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),n.createElement("line",{className:ft.ScrubberLine,y2:"100%",x1:ot,x2:ot,"data-testid":"scrubber-component-line"}))}const ba=(0,s.B)(Z=>{const ae="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",Pe=t.iv`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:t.iv`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${ae} {
        display: unset;
      }
    `,ViewingLayerGraph:t.iv`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,m.h)(Z,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:t.iv`
      label: ViewingLayerInactive;
      fill: ${(0,m.h)(Z,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:t.iv`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,m.h)(Z,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:t.iv`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:t.iv`
      label: ViewingLayerDrag;
      fill: ${(0,m.h)(Z,"#44f")};
    `,ViewingLayerFullOverlay:t.iv`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:Pe,ViewingLayerResetZoomHoverClassName:ae}}),hn={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function Kn(Z,ae){const[Pe,Ue]=Z<ae?[Z,ae]:[ae,Z];return{x:`${Pe*100}%`,width:`${(Ue-Pe)*100}%`,leadingX:`${ae*100}%`}}class ta extends n.PureComponent{constructor(ae){super(ae),this._setRoot=Pe=>{this._root=Pe},this._getDraggingBounds=Pe=>{if(!this._root)throw new Error("invalid state");const{left:Ue,width:et}=this._root.getBoundingClientRect(),[ot,ft]=this.props.viewRange.time.current;let xt=1,St=0;return Pe===hn.SHIFT_START?xt=ft:Pe===hn.SHIFT_END&&(St=ot),{clientXLeft:Ue,maxValue:xt,minValue:St,width:et}},this._handleReframeMouseMove=({value:Pe})=>{this.props.updateNextViewRangeTime({cursor:Pe})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:Pe})=>{const Ue=Pe,{time:et}=this.props.viewRange,ft={reframe:{anchor:et.reframe?et.reframe.anchor:Ue,shift:Ue}};this.props.updateNextViewRangeTime(ft)},this._handleReframeDragEnd=({manager:Pe,value:Ue})=>{const{time:et}=this.props.viewRange,ot=et.reframe?et.reframe.anchor:Ue,[ft,xt]=Ue<ot?[Ue,ot]:[ot,Ue];Pe.resetBounds(),this.props.updateViewRangeTime(ft,xt,"minimap")},this._handleScrubberEnterLeave=({type:Pe})=>{const Ue=Pe===S.MouseEnter;this.setState({preventCursorLine:Ue})},this._handleScrubberDragUpdate=({event:Pe,tag:Ue,type:et,value:ot})=>{et===S.DragStart&&Pe.stopPropagation(),Ue===hn.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:ot}):Ue===hn.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:ot})},this._handleScrubberDragEnd=({manager:Pe,tag:Ue,value:et})=>{const[ot,ft]=this.props.viewRange.time.current;let xt;if(Ue===hn.SHIFT_START)xt=[et,ft];else if(Ue===hn.SHIFT_END)xt=[ot,et];else throw new Error("bad state");Pe.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(xt[0],xt[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new R({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:hn.REFRAME}),this._draggerStart=new R({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:hn.SHIFT_START}),this._draggerEnd=new R({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:hn.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(ae,Pe){const Ue=ba(this.props.theme),et=Kn(ae,Pe);return[n.createElement("rect",{key:"fill",className:h()(Ue.ViewingLayerDraggedShift,Ue.ViewingLayerDrag),x:et.x,y:"0",width:et.width,height:this.props.height-2}),n.createElement("rect",{key:"edge",className:h()(Ue.ViewingLayerDrag),x:et.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:ae,viewRange:Pe,numTicks:Ue,theme:et}=this.props,{preventCursorLine:ot}=this.state,{current:ft,cursor:xt,shiftStart:St,shiftEnd:Bt,reframe:Ht}=Pe.time,qt=St!=null||Bt!=null||Ht!=null,[nn,Mn]=ft;let Rn=0;nn&&(Rn=nn*100);let Pn=100;Mn&&(Pn=100-Mn*100);let jn;!qt&&xt!=null&&!ot&&(jn=`${xt*100}%`);const On=ba(et);return n.createElement("div",{"aria-hidden":!0,className:On.ViewingLayer,style:{height:ae}},(nn!==0||Mn!==1)&&n.createElement(Bn.zx,{onClick:this._resetTimeZoomClickHandler,className:h()(On.ViewingLayerResetZoom,On.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),n.createElement("svg",{height:ae,className:On.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},Rn>0&&n.createElement("rect",{x:0,y:0,height:"100%",width:`${Rn}%`,className:On.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),Pn>0&&n.createElement("rect",{x:`${100-Pn}%`,y:0,height:"100%",width:`${Pn}%`,className:On.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),n.createElement(wn,{numTicks:Ue}),jn&&n.createElement("line",{className:On.ViewingLayerCursorGuide,x1:jn,y1:"0",x2:jn,y2:ae-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),St!=null&&this._getMarkers(nn,St),Bt!=null&&this._getMarkers(Mn,Bt),n.createElement(Xn,{isDragging:St!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:nn||0}),n.createElement(Xn,{isDragging:Bt!=null,position:Mn||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),Ht!=null&&this._getMarkers(Ht.anchor,Ht.shift)),qt&&n.createElement("div",{className:On.ViewingLayerFullOverlay}))}}const La=(0,i.HE)(ta),oa=60,ha=4;function ia(Z){return{valueOffset:Z.relativeStartTime,valueWidth:Z.duration,serviceName:Z.process.serviceName}}function Rt(Z){return Z.spans.map(ia)}const Lt=(0,st.Z)(Rt);class At extends n.PureComponent{render(){const{height:ae,trace:Pe,viewRange:Ue,updateNextViewRangeTime:et,updateViewRangeTime:ot}=this.props;if(!Pe)return n.createElement("div",null);const ft=Lt(Pe);return n.createElement("div",{className:h()(a.GL,a.H3)},n.createElement(Zn,{numTicks:ha,duration:Pe.duration}),n.createElement("div",{className:a.WW},n.createElement(bn,{valueWidth:Pe.duration,items:ft}),n.createElement(La,{viewRange:Ue,numTicks:ha,height:ae||oa,updateViewRangeTime:ot,updateNextViewRangeTime:et})))}}At.defaultProps={height:oa};const kt=Z=>({TracePageHeader:t.iv`
      label: TracePageHeader;
      & > :first-child {
        border-bottom: 1px solid ${(0,m.h)(Z,"#e8e8e8")};
      }
      & > :nth-child(2) {
        background-color: ${(0,m.h)(Z,"#eee")};
        border-bottom: 1px solid ${(0,m.h)(Z,"#e4e4e4")};
      }
      & > :last-child {
        border-bottom: 1px solid ${(0,m.h)(Z,"#ccc")};
      }
    `,TracePageHeaderTitleRow:t.iv`
      label: TracePageHeaderTitleRow;
      align-items: center;
      display: flex;
    `,TracePageHeaderBack:t.iv`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderTitleLink:t.iv`
      label: TracePageHeaderTitleLink;
      align-items: center;
      display: flex;
      flex: 1;

      &:hover * {
        text-decoration: underline;
      }
      &:hover > *,
      &:hover small {
        text-decoration: none;
      }
      /* Adapt styles when changing from a element into button */
      background: transparent;
      text-align: left;
      border: none;
    `,TracePageHeaderDetailToggle:t.iv`
      label: TracePageHeaderDetailToggle;
      font-size: 2.5rem;
      transition: transform 0.07s ease-out;
    `,TracePageHeaderDetailToggleExpanded:t.iv`
      label: TracePageHeaderDetailToggleExpanded;
      transform: rotate(90deg);
    `,TracePageHeaderTitle:t.iv`
      label: TracePageHeaderTitle;
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
      margin: 0 0 0 0.5em;
      padding-bottom: 0.5em;
    `,TracePageHeaderTitleCollapsible:t.iv`
      label: TracePageHeaderTitleCollapsible;
      margin-left: 0;
    `,TracePageHeaderOverviewItems:t.iv`
      label: TracePageHeaderOverviewItems;
      border-bottom: 1px solid #e4e4e4;
      padding: 0.25rem 0.5rem !important;
    `,TracePageHeaderOverviewItemValueDetail:h()(t.iv`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:t.iv`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,TracePageHeaderArchiveIcon:t.iv`
      label: TracePageHeaderArchiveIcon;
      font-size: 1.78em;
      margin-right: 0.15em;
    `,TracePageHeaderTraceId:t.iv`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
    `}),Zt=[{key:"timestamp",label:"Trace Start:",renderer(Z,ae,Pe){const Ue=(0,fe.dq)(Z.startTime/1e3,{timeZone:ae,defaultWithMS:!0}),et=Ue.match(/^(.+)(:\d\d\.\d+)$/);return et?n.createElement("span",{className:Pe.TracePageHeaderOverviewItemValue},et[1],n.createElement("span",{className:Pe.TracePageHeaderOverviewItemValueDetail},et[2])):Ue}},{key:"duration",label:"Duration:",renderer:Z=>(0,ke.LU)(Z.duration)},{key:"service-count",label:"Services:",renderer:Z=>new Set((0,D.values)(Z.processes).map(ae=>ae.serviceName)).size},{key:"depth",label:"Depth:",renderer:Z=>(0,D.get)((0,D.maxBy)(Z.spans,"depth"),"depth",0)+1},{key:"span-count",label:"Total Spans:",renderer:Z=>Z.spans.length}];function Qt(Z){const{canCollapse:ae,hideMap:Pe,hideSummary:Ue,onSlimViewClicked:et,slimView:ot,trace:ft,updateNextViewRangeTime:xt,updateViewRangeTime:St,viewRange:Bt,timeZone:Ht}=Z,qt=(0,i.wW)(kt),nn=n.useMemo(()=>ft?Ne(ft):[],[ft]);if(!ft)return null;const Mn=!Ue&&!ot&&Zt.map(Pn=>{const{renderer:jn,...On}=Pn;return{...On,value:jn(ft,Ht,qt)}}),Rn=n.createElement("h1",{className:h()(qt.TracePageHeaderTitle,ae&&qt.TracePageHeaderTitleCollapsible)},n.createElement(We,{traceName:we(ft.spans)})," ",n.createElement("small",{className:h()(qt.TracePageHeaderTraceId,a.pQ)},ft.traceID));return n.createElement("header",{className:qt.TracePageHeader},n.createElement("div",{className:qt.TracePageHeaderTitleRow},nn&&nn.length>0&&n.createElement(J,{links:nn,className:qt.TracePageHeaderBack}),ae?n.createElement("button",{type:"button",className:qt.TracePageHeaderTitleLink,onClick:et,role:"switch","aria-checked":!ot},n.createElement(De(),{className:h()(qt.TracePageHeaderDetailToggle,!ot&&qt.TracePageHeaderDetailToggleExpanded)}),Rn):Rn),Mn&&n.createElement(te.Z,{className:qt.TracePageHeaderOverviewItems,items:Mn}),!Pe&&!ot&&n.createElement(At,{trace:ft,viewRange:Bt,updateNextViewRangeTime:xt,updateViewRangeTime:St}))}var Jt=e(30116),rn=e(60456);class mn{constructor(ae){const{isTagsOpen:Pe,isProcessOpen:Ue,isReferencesOpen:et,isWarningsOpen:ot,isStackTracesOpen:ft,logs:xt,references:St}=ae||{};this.isTagsOpen=Boolean(Pe),this.isProcessOpen=Boolean(Ue),this.isReferencesOpen=Boolean(et),this.isWarningsOpen=Boolean(ot),this.isStackTracesOpen=Boolean(ft),this.logs={isOpen:Boolean(xt&&xt.isOpen),openedItems:xt&&xt.openedItems?new Set(xt.openedItems):new Set},this.references={isOpen:Boolean(St&&St.isOpen),openedItems:St&&St.openedItems?new Set(St.openedItems):new Set}}toggleTags(){const ae=new mn(this);return ae.isTagsOpen=!this.isTagsOpen,ae}toggleProcess(){const ae=new mn(this);return ae.isProcessOpen=!this.isProcessOpen,ae}toggleReferences(){const ae=new mn(this);return ae.references.isOpen=!this.references.isOpen,ae}toggleReferenceItem(ae){const Pe=new mn(this);return Pe.references.openedItems.has(ae)?Pe.references.openedItems.delete(ae):Pe.references.openedItems.add(ae),Pe}toggleWarnings(){const ae=new mn(this);return ae.isWarningsOpen=!this.isWarningsOpen,ae}toggleStackTraces(){const ae=new mn(this);return ae.isStackTracesOpen=!this.isStackTracesOpen,ae}toggleLogs(){const ae=new mn(this);return ae.logs.isOpen=!this.logs.isOpen,ae}toggleLogItem(ae){const Pe=new mn(this);return Pe.logs.openedItems.has(ae)?Pe.logs.openedItems.delete(ae):Pe.logs.openedItems.add(ae),Pe}}var Xt=e(58565);class fn{static iterFunction(ae,Pe=0){return Ue=>ae(Ue.value,Ue,Pe)}static searchFunction(ae){return typeof ae=="function"?ae:(Pe,Ue)=>ae instanceof fn?Ue===ae:Pe===ae}constructor(ae,Pe=[]){this.value=ae,this.children=Pe}get depth(){return this.children?.reduce((ae,Pe)=>Math.max(Pe.depth+1,ae),1)}get size(){let ae=0;return this.walk(()=>ae++),ae}addChild(ae){return this.children?.push(ae instanceof fn?ae:new fn(ae)),this}find(ae){if(fn.iterFunction(fn.searchFunction(ae))(this))return this;for(let Ue=0;Ue<this.children.length;Ue++){const et=this.children[Ue].find(ae);if(et)return et}return null}getPath(ae){const Pe=fn.iterFunction(fn.searchFunction(ae)),Ue=(et,ot)=>{const ft=ot.concat([et]);if(Pe(et))return ft;for(let xt=0;xt<et.children.length;xt++){const St=et.children[xt],Bt=Ue(St,ft);if(Bt)return Bt}return null};return Ue(this,[])}walk(ae,Pe=0){const Ue=[];let et=Pe;for(Ue.push({node:this,depth:et});Ue.length;){const ot=Ue.pop();if(ot){const{node:ft,depth:xt}=ot;ae(ft.value,ft,xt),et=(xt||0)+1;let St=ft.children.length-1;for(;St>=0;)Ue.push({node:ft.children[St],depth:et}),St--}}}}function In(Z,ae){return Z.localeCompare(ae)}function Yn(Z,ae){return Z-ae}function Vn(Z){return`sorted ${Z===1?"ascending":"descending"}`}function _n(Z,ae){const{defaultDir:Pe=1}=ae;return{key:ae.name,dir:Z.key===ae.name?-1*Z.dir:Pe}}function va(Z,ae,Pe,Ue){return function(){const{key:ot,dir:ft}=_n({key:ae,dir:Pe},Z);Ue(ot,ft)}}const Fa=Z=>Z.serviceName,Ea=Z=>Z.tags;var Ma=e(21817),Za=e.n(Ma);const ca=Z=>Z.spanID,Ja=Z=>Z.operationName,qa=Z=>Z.duration,Va=Z=>Z.startTime,Xa=Z=>Z.processID,fs=Z=>Z.references||[],ls=(0,Xt.P1)((0,Xt.P1)(({span:Z})=>Z,fs),({type:Z})=>Z,(Z,ae)=>Z.find(Pe=>Pe.refType===ae)),cs=(0,Xt.P1)(Z=>ls({span:Z,type:"CHILD_OF"}),Z=>Z?Z.spanID:null),gs=Z=>{if(!Z.process)throw new Error(`
      you must hydrate the spans with the processes, perhaps
      using hydrateSpansWithProcesses(), before accessing a span's process
    `);return Z.process},ya=(0,Xt.P1)(gs,Fa),za=(0,Xt.P1)(({spans:Z})=>Z,({leftBound:Z})=>Z,({rightBound:Z})=>Z,(Z,ae,Pe)=>Z.filter(Ue=>Va(Ue)>=ae&&Va(Ue)<=Pe)),Pa=(0,Xt.P1)(({spans:Z})=>Z,({text:Z})=>Z,(Z,ae)=>Za().filter(ae,Z,{extract:Pe=>`${ya(Pe)} ${Ja(Pe)}`}).map(({original:Pe})=>Pe)),Jn=(0,Xt.P1)(Pa,Z=>Z.reduce((ae,Pe)=>({...ae,[ca(Pe)]:Pe}),{})),ps=(0,Xt.P1)(({spans:Z})=>Z,Jn,(Z,ae)=>Z.map(Pe=>({...Pe,muted:!ae[ca(Pe)]}))),Ha=Z=>Z.traceID,fa=Z=>Z.spans,Bs=Z=>Z.processes,Ca=(0,Xt.P1)(Z=>Z.span,Z=>Z.processes,(Z,ae)=>({...Z,process:ae[Xa(Z)]})),Sa=(0,Xt.P1)(fa,Z=>Z.reduce((ae,Pe)=>ae.set(ca(Pe),Pe),new Map)),is="__root__";function An(Z){const ae=new Map(Z.spans.map(ot=>[ot.spanID,new fn(ot.spanID)])),Pe=new Map(Z.spans.map(ot=>[ot.spanID,ot])),Ue=new fn(is);Z.spans.forEach(ot=>{const ft=ae.get(ot.spanID);if(Array.isArray(ot.references)&&ot.references.length){const{refType:xt,spanID:St}=ot.references[0];if(xt==="CHILD_OF"||xt==="FOLLOWS_FROM")(ae.get(St)||Ue).children?.push(ft);else throw new Error(`Unrecognized ref type: ${xt}`)}else Ue.children.push(ft)});const et=(ot,ft)=>{const xt=ot?.value?Pe.get(ot.value.toString()):void 0,St=ft?.value?Pe.get(ft.value.toString()):void 0;return+(xt?.startTime>St?.startTime)||+(xt?.startTime===St?.startTime)-1};return Z.spans.forEach(ot=>{const ft=ae.get(ot.spanID);ft.children.length>1&&ft?.children.sort(et)}),Ue.children.sort(et),Ue}const ds=Z=>{const ae=fa(Z),Pe=Bs(Z);return{...Z,spans:ae.map(Ue=>Ca({span:Ue,processes:Pe}))}},ws=(0,Xt.P1)(fa,Z=>Z.length),ks=(0,Xt.P1)(fa,Z=>Z.reduce((ae,Pe)=>ae?Math.min(ae,Va(Pe)):Va(Pe),0)),Ns=(0,Xt.P1)(fa,ks,(Z,ae)=>Z.reduce((Pe,Ue)=>Pe?Math.max(Va(Ue)-ae+qa(Ue),Pe):qa(Ue),0)),rr=(0,Xt.P1)(ks,Ns,(Z,ae)=>Z+ae),or=(0,Xt.P1)(An,Sa,(Z,ae)=>Z.children.map(Pe=>ae.get(Pe.value)).sort((Pe,Ue)=>Yn(Va(Pe),Va(Ue)))[0]),Gs=(0,Xt.P1)(An,Z=>Z.depth-1),Wt=(0,Xt.P1)((0,Xt.P1)(Z=>Z.trace,An),(0,Xt.P1)(Z=>Z.span,ca),(Z,ae)=>Z.getPath(ae).length-1),Zs=(0,Xt.P1)(Bs,Z=>Object.keys(Z).reduce((ae,Pe)=>ae.add(Fa(Z[Pe])),new Set)),Js=(0,Xt.P1)(Zs,Z=>Z.size),Xs={ms:ke.Cz,s:ke.Gk},sa=(0,Xt.P1)(Ns,Z=>Z>=ke.WT?Xs.s:Xs.ms),es=(0,Xt.P1)(({duration:Z})=>Z,({unit:Z})=>Xs[Z],(Z,ae)=>ae(Z)),ts=(0,Xt.P1)(({duration:Z})=>Z,(0,Xt.P1)(({trace:Z})=>Z,sa),(Z,ae)=>ae(Z)),ns=(0,Xt.P1)(({trace:Z})=>Z,({spans:Z})=>Z,({sort:Z})=>Z,(Z,ae,{dir:Pe,comparator:Ue,selector:et})=>[...ae].sort((ot,ft)=>Pe*Ue(et(ot,Z),et(ft,Z)))),qn=(0,Xt.P1)(An,Z=>{const ae=new Map;let Pe=0;return Z.walk(Ue=>ae.set(Ue,Pe++)),ae}),Ws=(0,Xt.P1)((0,Xt.P1)(Z=>Z.trace,An),(0,Xt.P1)(Z=>Z.span,ca),(Z,ae)=>{const Pe=Z.find(ae);return Pe?Pe.size-1:-1}),xa=(0,Xt.P1)((0,Xt.P1)(({trace:Z})=>Z,qn),({span:Z})=>Z,(Z,ae)=>Z.get(ca(ae))),ka=(0,Xt.P1)((0,Xt.P1)((0,Xt.P1)(ds,or),(0,Xt.zB)({name:Ja,serviceName:ya})),({name:Z,serviceName:ae})=>`${ae}: ${Z}`),zn=(0,Xt.P1)(({spans:Z})=>Z,(0,Xt.P1)(({trace:Z})=>Z,An),({collapsed:Z})=>Z,(Z,ae,Pe)=>{const Ue=Pe.reduce((et,ot)=>(ae.find(ot).walk(ft=>ft!==ot&&et.add(ft)),et),new Set);return Ue.size>0?Z.filter(et=>!Ue.has(ca(et))):Z}),Tt=4,Is=3,_s=(0,Xt.P1)(({trace:Z})=>Z,({interval:Z=Tt})=>Z,({width:Z=Is})=>Z,(Z,ae,Pe)=>[...Array(ae+1).keys()].map(Ue=>({timestamp:ks(Z)+Ns(Z)*(Ue/ae),width:Pe}))),qs=(0,Xt.P1)(Z=>Z,fa,(Z,ae)=>{const Pe=new Map,Ue=[];return{...Z,spans:ae.reduce((et,ot)=>{const ft=Pe.has(ca(ot))?`${ca(ot)}_${Pe.get(ca(ot))}`:ca(ot),xt={...ot,spanID:ft};return ft!==ca(ot)&&console.warn("duplicate spanID in trace replaced",ca(ot),"new:",ft),Pe.set(ca(ot),(Pe.get(ca(ot))||0)+1),et.concat([xt])},Ue)}}),Ys=(0,Xt.P1)(Z=>Z,fa,(Z,ae)=>({...Z,spans:ae.filter(Pe=>!!Va(Pe))}));function Ms(Z){const ae=new Map,Pe=Z.reduce((et,ot)=>(et.some(ft=>ft.key===ot.key&&ft.value===ot.value)?ae.set(`${ot.key}:${ot.value}`,`Duplicate tag "${ot.key}:${ot.value}"`):et.push(ot),et),[]),Ue=Array.from(ae.values());return{tags:Pe,warnings:Ue}}function ir(Z,ae){const Pe=Z?.slice()??[],Ue=(ae||[]).map(et=>et.toLowerCase());return Pe.sort((et,ot)=>{const ft=et.key.toLowerCase(),xt=ot.key.toLowerCase();for(let St=0;St<Ue.length;St++){const Bt=Ue[St];if(ft.startsWith(Bt)&&!xt.startsWith(Bt))return-1;if(!ft.startsWith(Bt)&&xt.startsWith(Bt))return 1}return ft>xt?1:ft<xt?-1:0}),Pe}function Pr(Z){if(!Z?.traceID)return null;const ae=Z.traceID.toLowerCase();let Pe=0,Ue=Number.MAX_SAFE_INTEGER;const et=new Map,ot=new Map;Z.spans=Z.spans.filter(nn=>Boolean(nn.startTime)),Z.processes=Object.entries(Z.processes).reduce((nn,[Mn,Rn])=>(nn[Mn]={...Rn,tags:ir(Rn.tags)},nn),{});const ft=Z.spans.length;for(let nn=0;nn<ft;nn++){const Mn=Z.spans[nn],{startTime:Rn,duration:Pn,processID:jn}=Mn;let On=Mn.spanID;Rn<Ue&&(Ue=Rn),Rn+Pn>Pe&&(Pe=Rn+Pn);const Fn=et.get(On);Fn!=null?(console.warn(`Dupe spanID, ${Fn+1} x ${On}`,Mn,ot.get(On)),(0,D.isEqual)(Mn,ot.get(On))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),et.set(On,Fn+1),On=`${On}_${Fn}`,Mn.spanID=On):et.set(On,1),Mn.process=Z.processes[jn],ot.set(On,Mn)}const xt=An(Z),St=[],Bt={};xt.walk((nn,Mn,Rn=0)=>{if(nn==="__root__"||typeof nn!="string")return;const Pn=ot.get(nn);if(!Pn)return;const{serviceName:jn}=Pn.process;Bt[jn]=(Bt[jn]||0)+1,Pn.relativeStartTime=Pn.startTime-Ue,Pn.depth=Rn-1,Pn.hasChildren=Mn.children.length>0,Pn.childSpanCount=Mn.children.length,Pn.warnings=Pn.warnings||[],Pn.tags=Pn.tags||[],Pn.references=Pn.references||[];const On=Ms(Pn.tags);Pn.tags=ir(On.tags,nt("topTagPrefixes")),Pn.warnings=Pn.warnings.concat(On.warnings),Pn.references.forEach((Fn,hs)=>{const Ra=ot.get(Fn.spanID);Ra&&(Fn.span=Ra,hs>0&&(Ra.subsidiarilyReferencedBy=Ra.subsidiarilyReferencedBy||[],Ra.subsidiarilyReferencedBy.push({spanID:nn,traceID:ae,span:Pn,refType:Fn.refType})))}),St.push(Pn)});const Ht=we(St);return{services:Object.keys(Bt).map(nn=>({name:nn,numberOfSpans:Bt[nn]})),spans:St,traceID:ae,traceName:Ht,processes:Z.processes,duration:Pe-Ue,startTime:Ue,endTime:Pe}}function er(Z,ae){if(!ae)return;const Pe=[],Ue=[];Z.split(/\s+/).filter(Boolean).forEach(St=>{St[0]==="-"?Ue.push(St.slice(1).toLowerCase()):Pe.push(St.toLowerCase())});const et=(St,Bt)=>St.some(Ht=>Bt.toLowerCase().includes(Ht)),ot=St=>St?St.some(Bt=>et(Ue,Bt.key)?!1:et(Pe,Bt.key)||et(Pe,Bt.value.toString())):!1,ft=St=>et(Pe,St.operationName)||et(Pe,St.process.serviceName)||ot(St.tags)||St.logs!==null&&St.logs.some(Bt=>ot(Bt.fields))||ot(St.process.tags)||Pe.some(Bt=>Bt===St.spanID);return new Set(ae.filter(ft).map(St=>St.spanID))}},30116:(G,O,e)=>{"use strict";e.d(O,{Hn:()=>r,Kg:()=>c,ZP:()=>g,th:()=>d});var t=e(86780),n=e(68404),u=e(63134),s=e(5916),i=e(29516),m=e(9274),f=e(71210),o=e(46739),l=e(25474);const r="None",d="Duration",c="Tag";function g({options:y,onOptionsChange:h}){const a=(0,i.wW)(p),v=[r,d,c].map(u.E);return n.createElement("div",{className:(0,t.iv)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Span bar label"),n.createElement("div",{className:a.infoText},"Span bar label lets you add additional info to the span bar row."),n.createElement(m.Z,{className:a.row},n.createElement(f._,{label:"Label",labelWidth:26,grow:!0},n.createElement(o.Ph,{inputId:"label",options:v,value:y.jsonData.spanBar?.type||"",onChange:C=>{(0,s.tp)({onOptionsChange:h,options:y},"spanBar",{...y.jsonData.spanBar,type:C?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:25}))),y.jsonData.spanBar?.type===c&&n.createElement(m.Z,{className:a.row},n.createElement(f._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value"},n.createElement(l.I,{type:"text",placeholder:"Enter tag key",onChange:C=>(0,s.tp)({onOptionsChange:h,options:y},"spanBar",{...y.jsonData.spanBar,tag:C.currentTarget.value}),value:y.jsonData.spanBar?.tag||"",width:25}))))}const p=y=>({infoText:t.iv`
    label: infoText;
    padding-bottom: ${y.spacing(2)};
    color: ${y.colors.text.secondary};
  `,row:t.iv`
    label: row;
    align-items: baseline;
  `})},47175:(G,O,e)=>{"use strict";e.d(O,{A4:()=>d,GL:()=>f,H3:()=>m,Im:()=>p,K9:()=>h,NY:()=>v,WW:()=>n,b$:()=>g,bi:()=>u,h2:()=>i,im:()=>s,oD:()=>o,pQ:()=>a,ty:()=>y,xb:()=>c});var t=e(86780);const n=t.iv`
  position: relative;
`,u=t.iv`
  margin-bottom: 0.25rem;
`,s=t.iv`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,i=t.iv`
  margin: 0;
`,m=t.iv`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,f=t.iv`
  padding-bottom: 0.5rem;
`,o=t.iv`
  display: flex;
`,l=t.iv`
  align-items: center;
`,r=t.iv`
  align-items: start;
`,d=t.iv`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,c=t.iv`
  text-align: right;
`,g=t.iv`
  display: inline-block;
`,p=t.iv`
  margin: -0.2rem 0.25rem 0 0;
`,y=t.iv`
  text-overflow: ellipsis;
`,h=t.iv`
  width: 100%;
`,a=t.iv`
  color: #aaa;
`,v=t.iv`
  justify-content: flex-end;
`},4713:(G,O,e)=>{"use strict";e.d(O,{_K:()=>l,e6:()=>r});var t=e(58635),n=e(35008),u=e.n(n),s=e(1301);function i(c){if(c.length!==7)return[0,0,0];const g=c.slice(1,3),p=c.slice(3,5),y=c.slice(5);return[parseInt(g,16),parseInt(p,16),parseInt(y,16)]}class m{constructor(g,p){const y=d(g,p);this.colorsHex=y,this.colorsRgb=y.map(i),this.cache=new Map}_getColorIndex(g){let p=this.cache.get(g);if(p==null){const y=this.hashCode(g.toLowerCase());p=Math.abs(y%this.colorsHex.length);const h=Array.from(this.cache).pop();if(h&&h[1]){h[1]===p&&(p=this.getNextIndex(p));const a=this.colorsHex[h[1]];if(u().readability(a,this.colorsHex[p])<1.5){let v=p;for(let C=0;C<this.colorsHex.length;C++)if(v=this.getNextIndex(v),u().readability(a,this.colorsHex[v])>1.5){p=v;break}}}this.cache.set(g,p)}return p}getNextIndex(g){return g+1<this.colorsHex.length?g+1:0}hashCode(g){let p=0,y,h;for(y=0;y<g.length;y++)h=g.charCodeAt(y),p=(p<<5)-p+h;return p}getColorByKey(g){const p=this._getColorIndex(g);return this.colorsHex[p]}getRgbColorByKey(g){const p=this._getColorIndex(g);return this.colorsRgb[p]}clear(){this.cache.clear()}}const f=(0,t.Z)((c,g)=>new m(c,g));function o(c){f([],c)}function l(c,g){return f(s.O9,g).getColorByKey(c)}function r(c,g){return f(s.O9,g).getRgbColorByKey(c)}function d(c,g){const p=c.indexOf("#E24D42");p>-1&&c.splice(p,1);const y=c.indexOf("#BF1B00");y>-1&&c.splice(y,1);let h=[];for(const a of c)u().readability(g.colors.background.primary,a)>=3&&h.push(a);return h}},89444:(G,O,e)=>{"use strict";e.d(O,{WT:()=>d,LU:()=>S,Cz:()=>x,Gk:()=>M});var t=e(82897),n=e(92467),u=e.n(n);function s(T,R){const L=Math.floor(Math.log10(Math.abs(T)))+1,w=R+L;return w<=0?Math.trunc(T):Number(T.toPrecision(w))}const i="Today",m="Yesterday",f="YYYY-MM-DD",o="HH:mm",l="MMMM D YYYY, HH:mm:ss.SSS",r=1e3,d=1e3*r,c=60*d,g=60*c,p=24*g,y=Math.log10(r),h=[{unit:"d",microseconds:p,ofPrevious:24},{unit:"h",microseconds:g,ofPrevious:60},{unit:"m",microseconds:c,ofPrevious:60},{unit:"s",microseconds:d,ofPrevious:1e3},{unit:"ms",microseconds:r,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}];function a(T,R){return T/R*100}const v=(T,R,L)=>s(T/L,R)*L;function C(T){return moment(T/r).format(f)}function E(T){return moment(T/r).format(o)}function P(T){return moment(T/r).format(l)}function x(T){const R=v(T,y,r);return`${u().duration(R/r).asMilliseconds()}ms`}function M(T){const R=v(T,y,d);return`${u().duration(R/r).asSeconds()}s`}function S(T){const[R,L]=(0,t.dropWhile)(h,({microseconds:I},F)=>F<h.length-1&&I>T);if(R.ofPrevious===1e3)return`${(0,t.round)(T/R.microseconds,2)}${R.unit}`;const A=`${Math.floor(T/R.microseconds)}${R.unit}`,N=Math.round(T/L.microseconds%R.ofPrevious),W=`${N}${L.unit}`;return N===0?A:`${A} ${W}`}function D(T,R=!1){const L=moment.isMoment(T)?T:moment(T),w=R?"MMMM":"MMM",A=new Date;if(A.getFullYear()!==L.year())return L.format(`${w} D, YYYY`);const N=L.month(),W=L.date(),I=A.getDate();return N===A.getMonth()&&W===I?i:(A.setDate(I-1),N===A.getMonth()&&W===A.getDate()?m:L.format(`${w} D`))}},96093:(G,O,e)=>{"use strict";e.d(O,{ZP:()=>i,hF:()=>u,rb:()=>s});var t=e(93964),n=e.n(t);const u=n().module("grafana.core",["ngRoute"]),s=[u,n().module("grafana.controllers",[]),n().module("grafana.directives",[]),n().module("grafana.factories",[]),n().module("grafana.services",[]),n().module("grafana.filters",[]),n().module("grafana.routes",[])],i=u},37219:(G,O,e)=>{"use strict";e.d(O,{M:()=>i,Z:()=>u});var t=e(82897),n=e.n(t);class u{constructor(f){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",f){if(f.columns)for(const o of f.columns)this.addColumn(o);if(f.rows)for(const o of f.rows)this.addRow(o)}}sort(f){f.col===null||f.col===void 0||this.columns.length<=f.col||(this.rows.sort((o,l)=>(o=o[f.col],l=l[f.col],+(o==null)-+(l==null)||+(o>l)||-(o<l))),f.desc&&this.rows.reverse(),this.columns[f.col].sort=!0,this.columns[f.col].desc=f.desc)}addColumn(f){this.columnMap[f.text]||(this.columns.push(f),this.columnMap[f.text]=f)}addRow(f){this.rows.push(f)}}function s(m,f,o){let l=!1;for(let r=0;r<m.length;r++)if(f[r]!==void 0&&o[r]!==void 0){if(f[r]!==o[r])return!1}else(f[r]===void 0||o[r]===void 0)&&(l=!0);return l}function i(m,...f){const o=m||new u;if(arguments.length===1)return o;if(arguments.length===2)return o.columns=f[0].hasOwnProperty("columns")?[...f[0].columns]:[],o.rows=f[0].hasOwnProperty("rows")?[...f[0].rows]:[],o;const l=f.filter(h=>!!h.columns),r={},d=l.slice().reduce((h,a)=>(a.columns.forEach(v=>{const{text:C}=v;r[C]===void 0&&(r[C]=h.length,h.push(v))}),h),[]),c=l.map(h=>h.columns.map(a=>r[a.text])),g=l.reduce((h,a,v)=>{const C=c[v];return a.rows.forEach(E=>{const P=[];C.forEach((x,M)=>{P[x]=E[M]}),h.push(P)}),h},[]),p={},y=g.reduce((h,a,v)=>{if(!p[v]){let C=v+1;for(;C<g.length;){const E=(0,t.findIndex)(g,P=>s(d,a,P),C);if(E>-1){const P=g[E];for(let x=0;x<d.length;x++)a[x]===void 0&&P[x]!==void 0&&(a[x]=P[x]);p[E]=P,C=E+1}else break}h.push(a)}return h},[]);return o.columns=d,o.rows=y,o}},70431:(G,O,e)=>{"use strict";e.d(O,{e:()=>n});var t=e(32557);const n=(0,t.PH)("core/cleanUpState")},659:(G,O,e)=>{"use strict";e.d(O,{$l:()=>t.$l,H7:()=>n.H7,RL:()=>n.RL,ad:()=>t.ad});var t=e(98864),n=e(14393)},97063:(G,O,e)=>{"use strict";e.d(O,{Z:()=>u,h:()=>n});var t=e(85081);const n=new t.F,u=n},73546:(G,O,e)=>{"use strict";e.d(O,{P:()=>D});var t=e(82897),n=e(68404),u=e(90723),s=e(1108),i=e(29930),m=e(4403),f=e(90701),o=e(46739),l=e(50796),r=e(94080),d=e(28038),c=e(73757),g=(W=>(W.None="None",W.Team="Team",W.User="User",W.BuiltInRole="builtInRole",W))(g||{});const p=({title:W="Add Permission For",permissions:I,assignments:F,onAdd:V,onCancel:b})=>{const[X,k]=(0,n.useState)(g.None),[H,Y]=(0,n.useState)(0),[ee,ue]=(0,n.useState)(0),[q,ge]=(0,n.useState)(""),[De,fe]=(0,n.useState)(""),me=(0,n.useMemo)(()=>{const ie=[];return F.users&&ie.push({value:g.User,label:"User"}),F.teams&&ie.push({value:g.Team,label:"Team"}),F.builtInRoles&&ie.push({value:g.BuiltInRole,label:"Role"}),ie},[F]);(0,n.useEffect)(()=>{I.length>0&&fe(I[0])},[I]);const ce=()=>X===g.Team&&H>0||X===g.User&&ee>0||g.BuiltInRole&&c.B5.hasOwnProperty(q);return n.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},n.createElement(l.P,{onClick:b}),n.createElement("h5",null,W),n.createElement(m.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>V({userId:ee,teamId:H,builtInRole:q,permission:De,target:X})},()=>n.createElement(f.Lh,null,n.createElement(o.Ph,{"aria-label":"Role to add new permission to",value:X,options:me,onChange:ie=>k(ie.value),disabled:me.length===0}),X===g.User&&n.createElement(d.f,{onSelected:ie=>ue(ie.value||0),className:"width-20"}),X===g.Team&&n.createElement(r.c,{onSelected:ie=>Y(ie.value?.id||0),className:"width-20"}),X===g.BuiltInRole&&n.createElement(o.Ph,{"aria-label":"Built-in role picker",options:Object.values(c.B5).map(ie=>({value:ie,label:ie})),onChange:ie=>ge(ie.value||""),width:40}),n.createElement(o.Ph,{"aria-label":"Permission Level",width:25,value:I.find(ie=>ie===De),options:I.map(ie=>({label:ie,value:ie})),onChange:ie=>fe(ie.value||"")}),n.createElement(u.zx,{type:"submit",disabled:!ce()},"Save"))))};var y=e(48756),h=e(81697);const a=({item:W,permissionLevels:I,canSet:F,onRemove:V,onChange:b})=>n.createElement("tr",null,n.createElement("td",{style:{width:"1%"}},v(W)),n.createElement("td",{style:{width:"90%"}},E(W)),n.createElement("td",null,W.isInherited&&n.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),n.createElement("td",null,n.createElement("div",{className:"gf-form"},n.createElement(o.Ph,{className:"width-20",disabled:!F||!W.isManaged,onChange:X=>b(W,X.value),value:I.find(X=>X===W.permission),options:I.map(X=>({value:X,label:X}))}))),n.createElement("td",null,n.createElement(y.u,{content:P(W)},n.createElement(h.J,{name:"info-circle"}))),n.createElement("td",null,W.isManaged?n.createElement(u.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!F,onClick:()=>V(W),"aria-label":`Remove permission for ${C(W)}`}):n.createElement(y.u,{content:W.isInherited?"Inherited Permission":"Provisioned Permission"},n.createElement(u.zx,{size:"sm",icon:"lock"})))),v=W=>W.teamId?n.createElement("img",{className:"filter-table__avatar",src:W.teamAvatarUrl,alt:`Avatar for team ${W.teamId}`}):W.userId?n.createElement("img",{className:"filter-table__avatar",src:W.userAvatarUrl,alt:`Avatar for user ${W.userId}`}):n.createElement(h.J,{size:"xl",name:"shield"}),C=W=>W.userId?W.userLogin:W.teamId?W.team:W.builtInRole,E=W=>W.userId?n.createElement("span",{key:"name"},W.userLogin," "):W.teamId?n.createElement("span",{key:"name"},W.team," "):W.builtInRole?n.createElement("span",{key:"name"},W.builtInRole," "):n.createElement("span",{key:"name"}),P=W=>`Actions: ${[...new Set(W.actions)].sort().join(" ")}`,x=({title:W,items:I,compareKey:F,permissionLevels:V,canSet:b,onRemove:X,onChange:k})=>{const H=(0,n.useMemo)(()=>{const Y={};for(let ee of I){const ue=ee[F];if(!Y[ue]){Y[ue]=ee;continue}ee.actions.length>Y[ue].actions.length&&(Y[ue]=ee)}return Object.keys(Y).map(ee=>Y[ee])},[I,F]);return H.length===0?null:n.createElement("div",null,n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,W),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,"Permission"),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",{style:{width:"1%"}}))),n.createElement("tbody",null,H.map((Y,ee)=>n.createElement(a,{item:Y,onRemove:X,onChange:k,canSet:b,key:`${ee}-${Y.userId}`,permissionLevels:V})))))},M="",S={permissions:[],assignments:{teams:!1,users:!1,builtInRoles:!1}},D=({title:W="Permissions",buttonLabel:I="Add a permission",emptyLabel:F="There are no permissions",resource:V,resourceId:b,canSetPermissions:X,addPermissionTitle:k})=>{const[H,Y]=(0,n.useState)(!1),[ee,ue]=(0,n.useState)([]),[q,ge]=(0,n.useState)(S),De=(0,n.useCallback)(()=>R(V,b).then(J=>ue(J)),[V,b]);(0,n.useEffect)(()=>{T(V).then(J=>(ge(J),De()))},[V,b,De]);const fe=J=>{let te=null;J.target===g.User?te=L(V,b,J.userId,J.permission):J.target===g.Team?te=w(V,b,J.teamId,J.permission):J.target===g.BuiltInRole&&(te=A(V,b,J.builtInRole,J.permission)),te!==null&&te.then(De)},me=J=>{let te=null;J.userId?te=L(V,b,J.userId,M):J.teamId?te=w(V,b,J.teamId,M):J.builtInRole&&(te=A(V,b,J.builtInRole,M)),te!==null&&te.then(De)},ce=(J,te)=>{J.permission!==te&&(J.userId?fe({permission:te,userId:J.userId,target:g.User}):J.teamId?fe({permission:te,teamId:J.teamId,target:g.Team}):J.builtInRole&&fe({permission:te,builtInRole:J.builtInRole,target:g.BuiltInRole}))},ie=(0,n.useMemo)(()=>(0,t.sortBy)(ee.filter(J=>J.teamId),["team","isManaged"]),[ee]),re=(0,n.useMemo)(()=>(0,t.sortBy)(ee.filter(J=>J.userId),["userLogin","isManaged"]),[ee]),Ee=(0,n.useMemo)(()=>(0,t.sortBy)(ee.filter(J=>J.builtInRole),["builtInRole","isManaged"]),[ee]);return n.createElement("div",null,n.createElement("div",{className:"page-action-bar"},n.createElement("h3",{className:"page-sub-heading"},W),n.createElement("div",{className:"page-action-bar__spacer"}),X&&n.createElement(u.zx,{variant:"primary",key:"add-permission",onClick:()=>Y(!0)},I)),n.createElement("div",null,n.createElement(s.s,{in:H},n.createElement(p,{title:k,onAdd:fe,permissions:q.permissions,assignments:q.assignments,onCancel:()=>Y(!1)})),ee.length===0&&n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",null,F)))),n.createElement(x,{title:"Role",items:Ee,compareKey:"builtInRole",permissionLevels:q.permissions,onChange:ce,onRemove:me,canSet:X}),n.createElement(x,{title:"User",items:re,compareKey:"userLogin",permissionLevels:q.permissions,onChange:ce,onRemove:me,canSet:X}),n.createElement(x,{title:"Team",items:ie,compareKey:"team",permissionLevels:q.permissions,onChange:ce,onRemove:me,canSet:X})))},T=async W=>{try{return await(0,i.i)().get(`/api/access-control/${W}/description`)}catch(I){return console.error("failed to load resource description: ",I),S}},R=(W,I)=>(0,i.i)().get(`/api/access-control/${W}/${I}`),L=(W,I,F,V)=>N(W,I,"users",F,V),w=(W,I,F,V)=>N(W,I,"teams",F,V),A=(W,I,F,V)=>N(W,I,"builtInRoles",F,V),N=(W,I,F,V,b)=>(0,i.i)().post(`/api/access-control/${W}/${I}/${F}/${V}`,{permission:b})},1108:(G,O,e)=>{"use strict";e.d(O,{s:()=>m});var t=e(68404),n=e(41141);const u="200px",s=200,i={transition:`max-height ${s}ms ease-in-out`,overflow:"hidden"},m=({children:f,in:o,maxHeight:l=u,style:r=i})=>{const d={exited:{maxHeight:0},entering:{maxHeight:l},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return t.createElement(n.ZP,{in:o,timeout:s},c=>t.createElement("div",{style:{...r,...d[c]}},f))}},95379:(G,O,e)=>{"use strict";e.d(O,{A:()=>u});var t=e(68404),n=e(34177);const u=t.memo(({actions:s})=>{const{chrome:i}=(0,n.p)();return(0,t.useEffect)(()=>{i.update({actions:s})}),null});u.displayName="TopNavUpdate"},31953:(G,O,e)=>{"use strict";e.d(O,{G:()=>r});var t=e(52423),n=e(68404),u=e(29516),s=e(79396),i=e(76770),m=e(14617),f=e(66208);function o({description:c,text:g,url:p}){const y=(0,u.wW)(l);return n.createElement(f.Z,{className:y.card,href:p},n.createElement(f.Z.Heading,null,g),n.createElement(f.Z.Description,{className:y.description},c))}const l=c=>({card:(0,t.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,t.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function r({navId:c}){const{node:g}=(0,i.q)(c),p=(0,u.wW)(d),y=g.children?.filter(h=>!h.hideFromTabs);return n.createElement(s.T,{navId:g.id},n.createElement(s.T.Contents,null,n.createElement("div",{className:p.content},y&&y.length>0&&n.createElement("section",{className:p.grid},y?.map(h=>n.createElement(o,{key:h.id,description:(0,m.L)(h.id)??h.subTitle,text:(0,m.Y)(h.id)??h.text,url:h.url??""}))))))}const d=c=>({content:(0,t.css)({display:"flex",flexDirection:"column",gap:c.spacing(2)}),grid:(0,t.css)({display:"grid",gap:c.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:c.spacing(2,0)})})},89097:(G,O,e)=>{"use strict";e.d(O,{M:()=>i});var t=e(52423),n=e(68404),u=e(93003),s=e(29516);function i({className:f,leftActionsSeparator:o}){const l=(0,s.wW)(m);return o?n.createElement("div",{className:(0,t.cx)(f,l.leftActionsSeparator)}):u.v.featureToggles.topnav?n.createElement("div",{className:(0,t.cx)(f,l.line)}):null}const m=f=>({leftActionsSeparator:(0,t.css)({display:"flex",flexGrow:1}),line:(0,t.css)({width:1,backgroundColor:f.colors.border.medium,height:24})})},13211:(G,O,e)=>{"use strict";e.d(O,{$:()=>t});const t=40},36578:(G,O,e)=>{"use strict";e.d(O,{c:()=>r});var t=e(52423),n=e(68404),u=e(64724),s=e(29516),i=e(19253);const m=({className:d,logo:c})=>n.createElement("img",{className:d,src:`${c||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),f=({className:d,children:c})=>{const g=(0,s.l4)(),p=t.css`
    &:before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${g.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${i.mediaUp(g.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return n.createElement("div",{className:(0,t.cx)(p,d)},c)},o=({className:d})=>n.createElement("img",{className:d,src:"public/img/grafana_icon.svg",alt:"Grafana"}),l=()=>{const d=(0,s.l4)();return t.css`
    background: ${u.alpha(d.colors.background.primary,.7)};
    background-size: cover;
  `};class r{}r.LoginLogo=m,r.LoginBackground=f,r.MenuLogo=o,r.LoginBoxBackground=l,r.AppTitle="Grafana",r.LoginTitle="Welcome to Grafana",r.GetLoginSubTitle=()=>null},67345:(G,O,e)=>{"use strict";e.d(O,{t:()=>n});var t=e(14617);function n(u,s,i){const m=[];let f=!1;function o(l){const r=new URLSearchParams(l.url?.split("?")[1]);let d=`${l.url?.split("?")[0]}`;r.has("editview")&&(d+=`?editview=${r.get("editview")}`),!f&&!l.hideFromBreadcrumbs&&(i&&d===i.url?(m.unshift({text:(0,t.Y)(i.id)??i.text,href:l.url??""}),f=!0):m.unshift({text:(0,t.Y)(l.id)??l.text,href:l.url??""})),l.parentItem&&o(l.parentItem)}if(s)if(s.url&&s.children){const l=s.children.find(r=>r.active);l&&(o(l),l.parentItem!==s&&o(s))}else o(s);return o(u),m}},52822:(G,O,e)=>{"use strict";e.d(O,{x:()=>i});var t=e(52423),n=e(68404),u=e(29516),s=e(81697);const i=n.forwardRef(({icon:f,children:o,onClick:l,...r},d)=>{const c=(0,u.wW)(m);return n.createElement("button",{...r,className:c.action,onClick:l},n.createElement(s.J,{name:f,size:"xl"}),o)});i.displayName="CardButton";const m=f=>({action:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${f.colors.background.secondary};
      border-radius: ${f.shape.borderRadius(1)};
      color: ${f.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${f.colors.emphasize(f.colors.background.secondary)};
      }
    `})},50796:(G,O,e)=>{"use strict";e.d(O,{P:()=>i});var t=e(52423),n=e(68404),u=e(29516),s=e(20017);const i=({onClick:f,"aria-label":o,style:l})=>{const r=(0,u.wW)(m);return n.createElement(s.h,{"aria-label":o??"Close",className:r,name:"times",onClick:f,style:l})},m=f=>t.css`
    position: absolute;
    right: ${f.spacing(.5)};
    top: ${f.spacing(1)};
  `},69142:(G,O,e)=>{"use strict";e.d(O,{Z:()=>r});var t=e(52423),n=e(68404),u=e(68183),s=e(81697),i=e(90723),m=e(86373);const f=t.css`
  text-align: center;
`,o=t.css`
  max-width: 700px;
  margin: 0 auto;
`,r=({title:d,buttonIcon:c,buttonLink:g,buttonTitle:p,buttonDisabled:y,onClick:h,proTip:a,proTipLink:v,proTipLinkTitle:C,proTipTarget:E,infoBox:P,infoBoxTitle:x})=>{const M=()=>n.createElement(n.Fragment,null,a?n.createElement("span",{key:"proTipFooter"},n.createElement(s.J,{name:"rocket"}),n.createElement(n.Fragment,null," ProTip: ",a," "),v&&n.createElement("a",{href:v,target:E,className:"text-link"},C)):"",P?n.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${o}`},x&&n.createElement("h5",null,x),n.createElement("div",{dangerouslySetInnerHTML:P})):""),S=M()?"":t.css`
        margin-bottom: 20px;
      `,D=g?i.Qj:i.zx,T=n.createElement(D,{size:"lg",onClick:h,href:g,icon:c,className:S,"data-testid":u.wl.components.CallToActionCard.buttonV2(p),disabled:y},p);return n.createElement(m._,{className:f,message:d,footer:M(),callToActionElement:T})}},25337:(G,O,e)=>{"use strict";e.d(O,{$_:()=>r,dP:()=>i});var t=e(68404),n=e(93003),u=e(81697),s=e(35287);let i=()=>[{target:"_blank",id:"documentation",text:(0,s.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,s.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,s.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function m(c){return{hasReleaseNotes:!0,isBeta:c.includes("-beta")}}let f=()=>{const{buildInfo:c,licenseInfo:g}=n.v,p=[],y=g.stateInfo?` (${g.stateInfo})`:"";if(p.push({target:"_blank",id:"version",text:`${c.edition}${y}`,url:g.licenseUrl}),c.hideVersion)return p;const{hasReleaseNotes:h}=m(c.version);return p.push({target:"_blank",id:"version",text:`v${c.version} (${c.commit})`,url:h?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),c.hasUpdate&&p.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),p};function o(c){i=c}function l(c){f=c}const r=t.memo(({customLinks:c})=>{const g=(c||i()).concat(f());return t.createElement("footer",{className:"footer"},t.createElement("div",{className:"text-center"},t.createElement("ul",null,g.map(p=>t.createElement("li",{key:p.text},t.createElement(d,{item:p}))))))});r.displayName="Footer";function d({item:c}){const g=c.url?t.createElement("a",{href:c.url,target:c.target,rel:"noopener noreferrer",id:c.id},c.text):c.text;return t.createElement(t.Fragment,null,c.icon&&t.createElement(u.J,{name:c.icon})," ",g)}},24901:(G,O,e)=>{"use strict";e.d(O,{G:()=>r});var t=e(68404),n=e(68183),u=e(4403),s=e(74955),i=e(90701),m=e(90723),f=e(48756),o=e(5080),l=e(20787);const r=({onSubmit:d,onSkip:c})=>{const g=p=>{d(p.newPassword)};return t.createElement(u.l,{onSubmit:g},({errors:p,register:y,getValues:h})=>t.createElement(t.Fragment,null,t.createElement(s.g,{label:"New password",invalid:!!p.newPassword,error:p?.newPassword?.message},t.createElement(l.Z,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...y("newPassword",{required:"New Password is required"})})),t.createElement(s.g,{label:"Confirm new password",invalid:!!p.confirmNew,error:p?.confirmNew?.message},t.createElement(l.Z,{id:"confirm-new-password",autoComplete:"new-password",...y("confirmNew",{required:"Confirmed Password is required",validate:a=>a===h().newPassword||"Passwords must match!"})})),t.createElement(i.wc,null,t.createElement(m.zx,{type:"submit",className:o.F},"Submit"),c&&t.createElement(f.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},t.createElement(m.zx,{fill:"text",onClick:c,type:"button","aria-label":n.wl.pages.Login.skip},"Skip")))))}},93022:(G,O,e)=>{"use strict";e.d(O,{X:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=e(81697),i=e(25474),m=e(69556);const f=({name:l,onChange:r,verifyLayerNameUniqueness:d,overrideStyles:c})=>{const g=(0,u.wW)(o),[p,y]=(0,n.useState)(!1),[h,a]=(0,n.useState)(null),v=S=>{y(!0)},C=S=>{if(y(!1),h){a(null);return}l!==S&&r(S)},E=S=>{const D=S.currentTarget.value.trim();if(D.length===0){a("An empty layer name is not allowed");return}if(d&&!d(D)&&D!==l){a("Layer name already exists");return}h&&a(null)},P=S=>{C(S.currentTarget.value.trim())},x=S=>{S.key==="Enter"&&C(S.currentTarget.value)},M=S=>{S.target.select()};return n.createElement(n.Fragment,null,n.createElement("div",{className:g.wrapper},!p&&n.createElement("button",{className:g.layerNameWrapper,title:"Edit layer name",onClick:v,"data-testid":"layer-name-div"},n.createElement("span",{className:c?"":g.layerName},l),n.createElement(s.J,{name:"pen",className:g.layerEditIcon,size:"sm"})),p&&n.createElement(n.Fragment,null,n.createElement(i.I,{type:"text",defaultValue:l,onBlur:P,autoFocus:!0,onKeyDown:x,onFocus:M,invalid:h!==null,onChange:E,className:g.layerNameInput,"data-testid":"layer-name-input"}),h&&n.createElement(m.S,{horizontal:!0},h))))},o=l=>({wrapper:t.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${l.spacing(.5)};
    `,layerNameWrapper:t.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${l.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${l.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${l.colors.action.hover};
        border: 1px dashed ${l.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${l.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:t.css`
      font-weight: ${l.typography.fontWeightMedium};
      color: ${l.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${l.spacing(.5)};
    `,layerEditIcon:(0,t.cx)(t.css`
        margin-left: ${l.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:t.css`
      max-width: 300px;
      margin: -4px 0;
    `})},59796:(G,O,e)=>{"use strict";e.d(O,{G:()=>u});var t=e(68404),n=e(58379);const u=s=>{const{children:i,storageKey:m,defaultValue:f}=s,[o,l]=(0,t.useState)({value:n.Z.getObject(s.storageKey,s.defaultValue)});(0,t.useEffect)(()=>{const c=g=>{g.key===m&&l({value:n.Z.getObject(s.storageKey,s.defaultValue)})};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}});const r=c=>{try{n.Z.setObject(m,c)}catch(g){console.error(g)}l({value:c})},d=()=>{try{n.Z.delete(m)}catch(c){console.log(c)}l({value:f})};return t.createElement(t.Fragment,null,i(o.value,r,d))}},86824:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(68404),n=e(25318),u=e(47214),s=e(97063),i=e(47694);const m=()=>!!i.ZP.oauth&&Object.keys(i.ZP.oauth).length>0;class f extends t.PureComponent{constructor(r){super(r),this.result={},this.changePassword=d=>{const c={newPassword:d,confirmNew:d,oldPassword:"admin"};if(this.props.resetCode){const g={code:this.props.resetCode,newPassword:d,confirmPassword:d};(0,u.i)().post("/api/user/password/reset",g).then(()=>{this.toGrafana()})}else(0,u.i)().put("/api/user/password",c).then(()=>{this.toGrafana()}).catch(g=>console.error(g))},this.login=d=>{this.setState({isLoggingIn:!0}),(0,u.i)().post("/login",d).then(c=>{if(this.result=c,d.password!=="admin"||i.ZP.ldapEnabled||i.ZP.authProxyEnabled){this.toGrafana();return}else this.changeView()}).catch(()=>{this.setState({isLoggingIn:!1})})},this.changeView=()=>{this.setState({isChangingPassword:!0})},this.toGrafana=()=>{this.result.redirectUrl?i.ZP.appSubUrl!==""&&!this.result.redirectUrl.startsWith(i.ZP.appSubUrl)?window.location.assign(i.ZP.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(i.ZP.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1},i.ZP.loginError&&s.Z.emit(n.SI.alertWarning,["Login Failed",i.ZP.loginError])}render(){const{children:r}=this.props,{isLoggingIn:d,isChangingPassword:c}=this.state,{login:g,toGrafana:p,changePassword:y}=this,{loginHint:h,passwordHint:a,disableLoginForm:v,disableUserSignUp:C}=i.ZP;return t.createElement(t.Fragment,null,r({isOauthEnabled:m(),loginHint:h,passwordHint:a,disableLoginForm:v,disableUserSignUp:C,login:g,isLoggingIn:d,changePassword:y,skipPasswordChange:p,isChangingPassword:c}))}}const o=f},5080:(G,O,e)=>{"use strict";e.d(O,{F:()=>r,U:()=>d});var t=e(52423),n=e(68404),u=e(68183),s=e(4403),i=e(74955),m=e(25474),f=e(90723),o=e(20787);const l=t.css`
  width: 100%;
  padding-bottom: 16px;
`,r=t.css`
  justify-content: center;
  width: 100%;
`,d=({children:c,onSubmit:g,isLoggingIn:p,passwordHint:y,loginHint:h})=>n.createElement("div",{className:l},n.createElement(s.l,{onSubmit:g,validateOn:"onChange"},({register:a,errors:v})=>n.createElement(n.Fragment,null,n.createElement(i.g,{label:"Email or username",invalid:!!v.user,error:v.user?.message},n.createElement(m.I,{...a("user",{required:"Email or username is required"}),autoFocus:!0,autoCapitalize:"none",placeholder:h,"aria-label":u.wl.pages.Login.username})),n.createElement(i.g,{label:"Password",invalid:!!v.password,error:v.password?.message},n.createElement(o.Z,{id:"current-password",autoComplete:"current-password",passwordHint:y,...a("password",{required:"Password is required"})})),n.createElement(f.zx,{type:"submit","aria-label":u.wl.pages.Login.submit,className:r,disabled:p},p?"Logging in...":"Log in"),c)))},80472:(G,O,e)=>{"use strict";e.d(O,{$s:()=>f,dd:()=>o});var t=e(52423),n=e(68404),u=e(29516),s=e(19253),i=e(36578),m=e(25337);const f=({children:d,enterAnimation:c=!0})=>{const g=(0,u.wW)(r);return n.createElement("div",{className:(0,t.cx)(g.loginInnerBox,c&&g.enterAnimation)},d)},o=({children:d,branding:c})=>{const g=(0,u.wW)(r),[p,y]=(0,n.useState)(!1),h=c?.loginSubtitle??i.c.GetLoginSubTitle(),a=c?.loginTitle??i.c.LoginTitle,v=c?.loginBoxBackground||i.c.LoginBoxBackground(),C=c?.loginLogo;return(0,n.useEffect)(()=>y(!0),[]),n.createElement(i.c.LoginBackground,{className:(0,t.cx)(g.container,p&&g.loginAnim,c?.loginBackground)},n.createElement("div",{className:(0,t.cx)(g.loginContent,v,"login-content-box")},n.createElement("div",{className:g.loginLogoWrapper},n.createElement(i.c.LoginLogo,{className:g.loginLogo,logo:C}),n.createElement("div",{className:g.titleWrapper},n.createElement("h1",{className:g.mainTitle},a),h&&n.createElement("h3",{className:g.subTitle},h))),n.createElement("div",{className:g.loginOuterBox},d)),c?.hideFooter?n.createElement(n.Fragment,null):n.createElement(m.$_,{customLinks:c?.footerLinks}))},l=t.keyframes`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,r=d=>({container:(0,t.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:t.css`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:t.css`
      justify-content: center;
      width: 100%;
    `,loginLogo:t.css`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${s.mediaUp(d.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${d.spacing(3)};
    `,titleWrapper:t.css`
      text-align: center;
    `,mainTitle:t.css`
      font-size: 22px;

      @media ${s.mediaUp(d.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:t.css`
      font-size: ${d.typography.size.md};
      color: ${d.colors.text.secondary};
    `,loginContent:t.css`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${d.shape.borderRadius(4)};
      padding: ${d.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${s.mediaUp(d.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:t.css`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:t.css`
      padding: ${d.spacing(2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:t.css`
      animation: ${l} ease-out 0.2s;
    `})},14617:(G,O,e)=>{"use strict";e.d(O,{L:()=>s,Y:()=>u});var t=e(93003),n=e(35287);function u(i){switch(i){case"home":return(0,n.t)("nav.home.title","Home");case"new":return(0,n.t)("nav.new.title","New");case"create":return(0,n.t)("nav.create.title","Create");case"create-dashboard":return(0,n.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,n.t)("nav.create-folder.title","Folder");case"import":return(0,n.t)("nav.create-import.title","Import");case"alert":return(0,n.t)("nav.create-alert.title","New alert rule");case"starred":return(0,n.t)("nav.starred.title","Starred");case"starred-empty":return(0,n.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return t.v.featureToggles.topnav?(0,n.t)("nav.dashboards.title","Dashboards"):(0,n.t)("nav.manage-dashboards.title","Browse");case"dashboards/playlists":return(0,n.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.title","Library panels");case"dashboards/new":return(0,n.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,n.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,n.t)("nav.create-import.title","Import");case"scenes":return(0,n.t)("nav.scenes.title","Scenes");case"explore":return(0,n.t)("nav.explore.title","Explore");case"alerting":return(0,n.t)("nav.alerting.title","Alerting");case"alerting-legacy":return(0,n.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-home":return(0,n.t)("nav.alerting-home.title","Home");case"alert-list":return(0,n.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,n.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,n.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,n.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,n.t)("nav.alerting-silences.title","Silences");case"groups":return(0,n.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,n.t)("nav.alerting-admin.title","Admin");case"cfg":return t.v.featureToggles.topnav?(0,n.t)("nav.config.title","Administration"):(0,n.t)("nav.config.titleBeforeTopnav","Configuration");case"datasources":return(0,n.t)("nav.datasources.title","Data sources");case"correlations":return(0,n.t)("nav.correlations.title","Correlations");case"users":return(0,n.t)("nav.users.title","Users");case"teams":return(0,n.t)("nav.teams.title","Teams");case"plugins":return(0,n.t)("nav.plugins.title","Plugins");case"org-settings":return t.v.featureToggles.topnav?(0,n.t)("nav.org-settings.title","Default preferences"):(0,n.t)("nav.org-settings.titleBeforeTopnav","Preferences");case"apikeys":return(0,n.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,n.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,n.t)("nav.admin.title","Server admin");case"support-bundles":return(0,n.t)("nav.support-bundles.title","Support bundles");case"global-users":return t.v.featureToggles.topnav?(0,n.t)("nav.global-users.title","Users"):(0,n.t)("nav.global-users.titleBeforeTopnav","Users");case"global-orgs":return(0,n.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,n.t)("nav.server-settings.title","Settings");case"storage":return(0,n.t)("nav.storage.title","Storage");case"upgrading":return(0,n.t)("nav.upgrading.title","Stats and license");case"live":return(0,n.t)("nav.live.title","Event streaming");case"live-status":return(0,n.t)("nav.live-status.title","Status");case"live-pipeline":return(0,n.t)("nav.live-pipeline.title","Pipeline");case"live-cloud":return(0,n.t)("nav.live-cloud.title","Cloud");case"monitoring":return(0,n.t)("nav.monitoring.title","Monitoring");case"apps":return(0,n.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.title","Alerts & incidents");case"help":return(0,n.t)("nav.help.title","Help");case"profile/settings":return(0,n.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,n.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,n.t)("nav.profile/password.title","Change password");case"sign-out":return(0,n.t)("nav.sign-out.title","Sign out");case"search":return(0,n.t)("nav.search-dashboards.title","Search dashboards");default:return}}function s(i){switch(i){case"dashboards":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return t.v.featureToggles.topnav?(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data"):void 0;case"dashboards/playlists":return(0,n.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,n.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,n.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,n.t)("nav.alerting-receivers.subtitle","Decide how your contacts are notified when an alert fires");case"am-routes":return(0,n.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,n.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,n.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,n.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,n.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,n.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,n.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,n.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,n.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,n.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,n.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,n.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,n.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,n.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,n.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,n.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return t.v.featureToggles.topnav?(0,n.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses"):void 0;case"apps":return(0,n.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,n.t)("nav.monitoring.subtitle","Monitoring and infrastructure apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");default:return}}},45458:(G,O,e)=>{"use strict";e.d(O,{Y:()=>m});var t=e(82897),n=e.n(t),u=e(68404),s=e(25474),i=e(74955);class m extends u.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=u.createRef(),this.updateValue=()=>{const o=this.inputRef.current?.value;let l=!1,r="";const d=this.props.min,c=this.props.max;let g=o!==""?Number(o):void 0;g&&!Number.isNaN(g)&&(d!=null&&g<d?(r=d.toString(),l=!0):c!=null&&g>c?(r=c.toString(),l=!0):r=o??"",this.setState({text:r,inputCorrected:l})),l&&this.updateValueDebounced(),!Number.isNaN(g)&&g!==this.props.value&&this.props.onChange(g)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=o=>{this.setState({text:o.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=o=>{o.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(o){if(this.props.value!==o.value){const l=isNaN(this.props.value)?"":`${this.props.value}`;l!==this.state.text&&this.setState({text:l})}}renderInput(){return u.createElement(s.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder})}render(){const{inputCorrected:o}=this.state;if(o){let l="",{min:r,max:d}=this.props;return d==null?r!=null&&(l=`< ${r}`):r!=null?l=`${r} < > ${d}`:l=`> ${d}`,u.createElement(i.g,{invalid:o,error:`Out of range ${l}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},13355:(G,O,e)=>{"use strict";e.d(O,{B:()=>m});var t=e(52423),n=e(68404),u=e(29516),s=e(45089),i=e(16046);const m=({value:o,onChange:l})=>{const r=(0,u.l4)(),d=(0,u.wW)(f);return n.createElement(s.zH,{color:o??"",onChange:l,enableNamedColors:!0},({ref:c,showColorPicker:g,hideColorPicker:p})=>n.createElement("div",{className:d.spot},n.createElement("div",{className:d.colorPicker},n.createElement(i.b,{ref:c,onClick:g,onMouseLeave:p,color:o?r.visualization.getColorByName(o):r.components.input.borderColor}))))},f=o=>({spot:t.css`
      color: ${o.colors.text};
      background: ${o.components.input.background};
      padding: 3px;
      height: ${o.v1.spacing.formInputHeight}px;
      border: 1px solid ${o.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      &:hover {
        border: 1px solid ${o.components.input.borderHover};
      }
    `,colorPicker:t.css`
      padding: 0 ${o.spacing(1)};
    `,colorText:t.css`
      cursor: pointer;
      flex-grow: 1;
    `,trashIcon:t.css`
      cursor: pointer;
      color: ${o.colors.text.secondary};
      &:hover {
        color: ${o.colors.text};
      }
    `})},23712:(G,O,e)=>{"use strict";e.d(O,{w:()=>u});var t=e(68404),n=e(45458);const u=({value:s,onChange:i,item:m})=>{const{settings:f}=m,o=(0,t.useCallback)(l=>{i(f?.integer&&l!==void 0?Math.floor(l):l)},[i,f?.integer]);return t.createElement(n.Y,{value:s,min:f?.min,max:f?.max,step:f?.step,placeholder:f?.placeholder,onChange:o})}},52974:(G,O,e)=>{"use strict";e.d(O,{u:()=>ut,l:()=>rt});var t=e(68404),n=e(35363),u=e(78798),s=e(14582),i=e(24177),m=e(44727),f=e(318),o=e(68172),l=e(98206),r=e(52423),d=e(82897),c=e(58230),g=e(1301),p=e(25474),y=e(45089),h=e(20017),a=e(29516),v=e(90723),C=e(38835),E=e(82385);const P=[{value:i.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:i.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class x extends t.PureComponent{constructor(dt){super(dt),this.onAddThreshold=()=>{const{steps:Se}=this.state;let Re=0;Se.length>1&&(Re=Se[Se.length-1].value+10);let ze=g.O9.filter(he=>!Se.some(pe=>pe.color===he))[1];ze||(ze="#CCCCCC");const ve={value:Re,color:ze,key:M++},Te=[...Se,ve];(0,c.bP)(Te),this.setState({steps:Te},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=Se=>{const{steps:Re}=this.state;Re.length&&Se.key!==Re[0].key&&this.setState({steps:Re.filter(ze=>ze.key!==Se.key)},this.onChange)},this.onChangeThresholdValue=(Se,Re)=>{const ze=Se.target.value.replace(/,/g,"."),ve=parseFloat(ze),Te=isNaN(ve)?"":ve,he=this.state.steps.map(pe=>(pe.key===Re.key&&(pe={...pe,value:Te}),pe));he.length&&(he[0].value=-1/0),(0,c.bP)(he),this.setState({steps:he})},this.onChangeThresholdColor=(Se,Re)=>{const{steps:ze}=this.state,ve=ze.map(Te=>(Te.key===Se.key&&(Te={...Te,color:Re}),Te));this.setState({steps:ve},this.onChange)},this.onBlur=()=>{const Se=[...this.state.steps];(0,c.bP)(Se),this.setState({steps:Se},this.onChange)},this.onChange=()=>{this.props.onChange(D(this.props.thresholds,this.state.steps))},this.onModeChanged=Se=>{this.props.onChange({...this.props.thresholds,mode:Se})};const oe=S(dt.thresholds.steps);oe[0].value=-1/0,this.state={steps:oe},this.latestThresholdInputRef=t.createRef()}renderInput(dt,oe,Se){const Re=this.props.thresholds.mode===i.H.Percentage,ze=`Threshold ${Se+1}`;return isFinite(dt.value)?t.createElement(p.I,{type:"number",step:"0.0001",key:Re.toString(),onChange:ve=>this.onChangeThresholdValue(ve,dt),value:dt.value,"aria-label":ze,ref:Se===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:t.createElement("div",{className:oe.inputPrefix},t.createElement("div",{className:oe.colorPicker},t.createElement(y.zH,{color:dt.color,onChange:ve=>this.onChangeThresholdColor(dt,ve),enableNamedColors:!0})),Re&&t.createElement("div",{className:oe.percentIcon},"%")),suffix:t.createElement(h.h,{"aria-label":`Remove ${ze}`,className:oe.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(dt)})}):t.createElement(p.I,{type:"text",value:"Base","aria-label":ze,disabled:!0,prefix:t.createElement("div",{className:oe.colorPicker},t.createElement(y.zH,{color:dt.color,onChange:ve=>this.onChangeThresholdColor(dt,ve),enableNamedColors:!0}))})}render(){const{thresholds:dt}=this.props,{steps:oe}=this.state;return t.createElement(a.Ni.Consumer,null,Se=>{const Re=T(Se);return t.createElement("div",{className:Re.wrapper},t.createElement(v.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:Re.addButton,fullWidth:!0},"Add threshold"),t.createElement("div",{className:Re.thresholds},oe.slice(0).reverse().map((ze,ve)=>t.createElement("div",{className:Re.item,key:`${ze.key}`},this.renderInput(ze,Re,ve)))),t.createElement("div",null,t.createElement(C._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),t.createElement(f.S,{options:P,onChange:this.onModeChanged,value:dt.mode})))})}}let M=100;function S(je){return(!je||je.length===0)&&(je=[{value:-1/0,color:"green"}]),je.filter((dt,oe)=>(0,d.isNumber)(dt.value)||oe===0).map(dt=>({color:dt.color,value:dt.value===null?-1/0:dt.value,key:M++}))}function D(je,dt){return{mode:je.mode??i.H.Absolute,steps:dt.map(Se=>{const{key:Re,...ze}=Se;return ze})}}const T=(0,E.B)(je=>({wrapper:r.css`
      display: flex;
      flex-direction: column;
    `,thresholds:r.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${je.spacing(2)};
    `,item:r.css`
      margin-bottom: ${je.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:r.css`
      padding: 0 ${je.spacing(1)};
    `,addButton:r.css`
      margin-bottom: ${je.spacing(1)};
    `,percentIcon:r.css`
      font-size: ${je.typography.bodySmall.fontSize};
      color: ${je.colors.text.secondary};
    `,inputPrefix:r.css`
      display: flex;
      align-items: center;
    `,trashIcon:r.css`
      color: ${je.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${je.colors.text};
      }
    `}));class R extends t.PureComponent{constructor(dt){super(dt)}render(){const{onChange:dt}=this.props;let oe=this.props.value;return oe||(oe={mode:i.H.Percentage,steps:[]}),t.createElement(x,{thresholds:oe,onChange:dt})}}var L=e(26031),w=e(90701),A=e(81697),N=e(6694),W=e(92484),I=e(26786),F=e(19677),V=e(4955),b=e(46739);function X({mapping:je,index:dt,onChange:oe,onRemove:Se,onDuplicate:Re,showIconPicker:ze}){const{key:ve,result:Te,id:he}=je,pe=(0,a.wW)(k),ye=(0,t.useRef)(null),Oe=(0,t.useCallback)(Ft=>{const jt={...je,result:{...je.result}};Ft(jt),oe(dt,jt)},[je,dt,oe]);(0,t.useEffect)(()=>{ye.current&&je.isNew&&(ye.current.focus(),Oe(Ft=>{Ft.isNew=!1}))},[je,ye,Oe]);const Ne=Ft=>{Oe(jt=>{jt.result.color=Ft})},Me=()=>{Oe(Ft=>{Ft.result.color=void 0})},Ae=Ft=>{Oe(jt=>{jt.result.icon=Ft})},we=()=>{Oe(Ft=>{Ft.result.icon=void 0})},ke=Ft=>{Oe(jt=>{jt.key=Ft.currentTarget.value})},st=Ft=>{Oe(jt=>{jt.result.text=Ft.currentTarget.value})},Et=Ft=>{Oe(jt=>{jt.from=parseFloat(Ft.currentTarget.value)})},Pt=Ft=>{Oe(jt=>{jt.to=parseFloat(Ft.currentTarget.value)})},gt=Ft=>{Oe(jt=>{jt.pattern=Ft.currentTarget.value})},Ct=Ft=>{Oe(jt=>{jt.specialMatch=Ft.value})},Ot=[{label:"Null",value:L.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:L.e[NaN],description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:L.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:L.e.True,description:"Boolean true values"},{label:"False",value:L.e.False,description:"Boolean false values"},{label:"Empty",value:L.e.Empty,description:"Empty string"}];return t.createElement(F._l,{key:he,draggableId:he,index:dt},Ft=>t.createElement("tr",{className:pe.dragRow,ref:Ft.innerRef,...Ft.draggableProps},t.createElement("td",null,t.createElement("div",{className:pe.dragHandle,...Ft.dragHandleProps},t.createElement(A.J,{name:"draggabledots",size:"lg"}))),t.createElement("td",{className:pe.typeColumn},je.type),t.createElement("td",null,je.type===L.H.ValueToText&&t.createElement(p.I,{ref:ye,type:"text",value:ve??"",onChange:ke,placeholder:"Exact value to match"}),je.type===L.H.RangeToText&&t.createElement("div",{className:pe.rangeInputWrapper},t.createElement(p.I,{type:"number",value:je.from??"",placeholder:"Range start",onChange:Et,prefix:"From"}),t.createElement(p.I,{type:"number",value:je.to??"",placeholder:"Range end",onChange:Pt,prefix:"To"})),je.type===L.H.RegexToText&&t.createElement(p.I,{type:"text",value:je.pattern??"",placeholder:"Regular expression",onChange:gt}),je.type===L.H.SpecialValue&&t.createElement(b.Ph,{value:Ot.find(jt=>jt.value===je.specialMatch),options:Ot,onChange:Ct})),t.createElement("td",null,t.createElement(p.I,{type:"text",value:Te.text??"",onChange:st,placeholder:"Optional display text"})),t.createElement("td",{className:pe.textAlignCenter},Te.color&&t.createElement(w.Lh,{spacing:"sm",justify:"center"},t.createElement(y.zH,{color:Te.color,onChange:Ne,enableNamedColors:!0}),t.createElement(h.h,{name:"times",onClick:Me,tooltip:"Remove color",tooltipPlacement:"top"})),!Te.color&&t.createElement(y.zH,{color:"gray",onChange:Ne,enableNamedColors:!0},jt=>t.createElement(v.zx,{variant:"primary",fill:"text",onClick:jt.showColorPicker,ref:jt.ref,size:"sm"},"Set color"))),ze&&t.createElement("td",{className:pe.textAlignCenter},t.createElement(w.Lh,{spacing:"sm",justify:"center"},t.createElement(I.E,{onChange:Ae,onClear:we,value:Te.icon,size:W.zc.SMALL,folderName:W.QS.Icon,mediaType:W.DD.Icon,color:Te.color}),Te.icon&&t.createElement(h.h,{name:"times",onClick:we,tooltip:"Remove icon",tooltipPlacement:"top"}))),t.createElement("td",{className:pe.textAlignCenter},t.createElement(w.Lh,{spacing:"sm"},t.createElement(h.h,{name:"copy",onClick:()=>Re(dt),"data-testid":"duplicate-value-mapping"}),t.createElement(h.h,{name:"trash-alt",onClick:()=>Se(dt),"data-testid":"remove-value-mapping"})))))}const k=je=>({dragRow:(0,r.css)({position:"relative"}),dragHandle:(0,r.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${je.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,r.css)({display:"flex","> div:first-child":{marginRight:je.spacing(2)}}),regexInputWrapper:(0,r.css)({display:"flex","> div:first-child":{marginRight:je.spacing(2)}}),typeColumn:(0,r.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,r.css)({textAlign:"center"})});function H({value:je,onChange:dt,onClose:oe,showIconPicker:Se}){const Re=(0,a.wW)(Y),[ze,ve]=(0,t.useState)([]);(0,t.useEffect)(()=>{ve(De(je))},[je]);const Te=Ae=>{if(!je||!Ae.destination)return;const we=[...ze],ke=we[Ae.source.index];we.splice(Ae.source.index,1),we.splice(Ae.destination.index,0,ke),ve(we)},he=(Ae,we)=>{const ke=[...ze];ke.splice(Ae,1,we),ve(ke)},pe=Ae=>{const we=[...ze];we.splice(Ae,1),ve(we)},ye=[{label:"Value",value:L.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:L.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:L.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:L.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],Oe=Ae=>{ve([...ze,ue({type:Ae.value,result:{},isNew:!0})])},Ne=Ae=>{const we=q(ze[Ae]),ke=[...ze];ke.splice(Ae,0,{...we});for(let st=Ae;st<ze.length;st++)ke[st].result.index=st;ve(ke)},Me=()=>{dt(ge(ze)),oe()};return(0,t.useEffect)(()=>{je?.length||Oe({value:L.H.ValueToText})},[]),t.createElement(t.Fragment,null,t.createElement("div",{className:Re.tableWrap},t.createElement("table",{className:Re.editTable},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),t.createElement("th",{style:{textAlign:"left"}},"Display text"),t.createElement("th",{style:{width:"10%"}},"Color"),Se&&t.createElement("th",{style:{width:"10%"}},"Icon"),t.createElement("th",{style:{width:"1%"}}))),t.createElement(F.Z5,{onDragEnd:Te},t.createElement(F.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},Ae=>t.createElement("tbody",{ref:Ae.innerRef,...Ae.droppableProps},ze.map((we,ke)=>t.createElement(X,{key:we.id,mapping:we,index:ke,onChange:he,onRemove:pe,onDuplicate:Ne,showIconPicker:Se})),Ae.placeholder))))),t.createElement(N.u.ButtonRow,{leftItems:t.createElement(V.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:ye,onChange:Oe})},t.createElement(v.zx,{variant:"secondary",fill:"outline",onClick:oe},"Cancel"),t.createElement(v.zx,{variant:"primary",onClick:Me},"Update")))}const Y=je=>({tableWrap:r.css`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,r.css)({width:"100%",marginBottom:je.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:je.colors.action.hover}," th, td":{padding:je.spacing(1)}})});function ee(){return(0,d.uniqueId)("mapping-")}function ue(je){return{type:L.H.ValueToText,result:{},id:ee(),...je}}function q(je){return{...ue(je),id:ee()}}function ge(je){const dt=[],oe={type:L.H.ValueToText,options:{}};return je.forEach((Se,Re)=>{const ze={...Se.result,index:Re};switch((!ze.text||ze.text.trim().length===0)&&(ze.text=void 0),Se.type){case L.H.ValueToText:Se.key!=null&&(oe.options[Se.key]=ze);break;case L.H.RangeToText:Se.from!=null&&Se.to!=null&&dt.push({type:Se.type,options:{from:Se.from,to:Se.to,result:ze}});break;case L.H.RegexToText:Se.pattern!=null&&dt.push({type:Se.type,options:{pattern:Se.pattern,result:ze}});break;case L.H.SpecialValue:dt.push({type:Se.type,options:{match:Se.specialMatch,result:ze}})}}),Object.keys(oe.options).length>0&&dt.unshift(oe),dt}function De(je){const dt=[];if(je)for(const oe of je)switch(oe.type){case L.H.ValueToText:for(const Se of Object.keys(oe.options))dt.push(ue({type:oe.type,result:oe.options[Se],key:Se}));break;case L.H.RangeToText:dt.push(ue({type:oe.type,result:oe.options.result,from:oe.options.from??0,to:oe.options.to??0}));break;case L.H.RegexToText:dt.push(ue({type:oe.type,result:oe.options.result,pattern:oe.options.pattern}));break;case L.H.SpecialValue:dt.push(ue({type:oe.type,result:oe.options.result,specialMatch:oe.options.match??L.e.Null}))}return dt.sort((oe,Se)=>(oe.result.index??0)>(Se.result.index??0)?1:-1),dt}const fe=t.memo(je=>{const{value:dt,onChange:oe,item:Se}=je,Re=(0,a.wW)(me),ze=Se.settings?.icon,[ve,Te]=(0,t.useState)(!1),he=(0,t.useCallback)(()=>{Te(!1)},[Te]),pe=(0,t.useMemo)(()=>De(dt),[dt]),ye=(0,t.useCallback)((Ne,Me)=>{pe[Me].result.color=Ne,oe(ge(pe))},[pe,oe]),Oe=(0,t.useCallback)((Ne,Me)=>{pe[Me].result.icon=Ne,oe(ge(pe))},[pe,oe]);return t.createElement(w.wc,null,t.createElement("table",{className:Re.compactTable},t.createElement("tbody",null,pe.map((Ne,Me)=>t.createElement("tr",{key:Me.toString()},t.createElement("td",null,Ne.type===L.H.ValueToText&&Ne.key,Ne.type===L.H.RangeToText&&t.createElement("span",null,"[",Ne.from," - ",Ne.to,"]"),Ne.type===L.H.RegexToText&&Ne.pattern,Ne.type===L.H.SpecialValue&&Ne.specialMatch),t.createElement("td",null,t.createElement(A.J,{name:"arrow-right"})),t.createElement("td",null,Ne.result.text),Ne.result.color&&t.createElement("td",null,t.createElement(y.zH,{color:Ne.result.color,onChange:Ae=>ye(Ae,Me),enableNamedColors:!0})),ze&&Ne.result.icon&&t.createElement("td",{"data-testid":"iconPicker"},t.createElement(I.E,{onChange:Ae=>Oe(Ae,Me),value:Ne.result.icon,size:W.zc.SMALL,folderName:W.QS.Icon,mediaType:W.DD.Icon,color:Ne.result.color})))))),t.createElement(v.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>Te(!0)},pe.length>0&&t.createElement("span",null,"Edit value mappings"),pe.length===0&&t.createElement("span",null,"Add value mappings")),t.createElement(N.u,{isOpen:ve,title:"Value mappings",onDismiss:he,className:Re.modal,closeOnBackdropClick:!1},t.createElement(H,{value:dt,onChange:oe,onClose:he,showIconPicker:ze})))});fe.displayName="ValueMappingsEditor";const me=je=>({modal:(0,r.css)({width:"980px"}),compactTable:(0,r.css)({width:"100%","tbody td":{padding:je.spacing(.5)}})});var ce=e(99661);const ie=({value:je,onChange:dt,item:oe})=>{const{placeholder:Se,isClearable:Re}=oe?.settings??{},ze=(0,t.useCallback)(ve=>{dt(ve?.value?.uid)},[dt]);return t.createElement(ce.o,{isClearable:Re,defaultOptions:!0,onChange:ze,placeholder:Se,value:je})};var re=e(13355),Ee=e(425),J=e(66926),te=e(74955);const ne=({value:je,onChange:dt,item:oe,id:Se})=>{const Re=(0,a.l4)(),ze=(0,a.wW)(be),ve=(0,Ee.QY)(je?.mode),he=(oe.settings?.byValueSupport?Ee.WO.list():Ee.WO.list().filter(Me=>!Me.isByValue)).map(Me=>{let Ae=Me.isByValue?" (by value)":"";return{value:Me.id,label:`${Me.name}${Ae}`,description:Me.description,isContinuous:Me.isContinuous,isByValue:Me.isByValue,component(){return t.createElement(j,{mode:Me,theme:Re})}}}),pe=Me=>{dt({...je,mode:Me.value})},ye=Me=>{dt({...je,mode:Ne,fixedColor:Me})},Oe=Me=>{dt({...je,mode:Ne,seriesBy:Me})},Ne=je?.mode??J.S.Thresholds;if(Ne===J.S.Fixed)return t.createElement("div",{className:ze.group},t.createElement(b.Ph,{minMenuHeight:200,options:he,value:Ne,onChange:pe,className:ze.select,inputId:Se}),t.createElement(re.B,{value:je?.fixedColor,onChange:ye}));if(oe.settings?.bySeriesSupport&&ve.isByValue){const Me=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:Re.spacing(2)}},t.createElement(b.Ph,{minMenuHeight:200,options:he,value:Ne,onChange:pe,inputId:Se})),t.createElement(te.g,{label:"Color series by"},t.createElement(f.S,{value:je?.seriesBy??"last",options:Me,onChange:Oe})))}return t.createElement(b.Ph,{minMenuHeight:200,options:he,value:Ne,onChange:pe,inputId:Se})},j=({mode:je,theme:dt})=>{if(!je.getColors)return null;const oe=je.getColors(dt).map(dt.visualization.getColorByName),Se={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(je.isContinuous)Se.background=`linear-gradient(90deg, ${oe.join(",")})`;else{let Re="",ze="";for(let ve=0;ve<oe.length;ve++){const Te=oe[ve];if(Re==="")Re=`linear-gradient(90deg, ${Te} 0%`;else{const pe=ve/(oe.length-1)*100;Re+=`, ${ze} ${pe}%, ${Te} ${pe}%`}ze=Te}Se.background=Re}return t.createElement("div",{style:Se})},be=je=>({group:r.css`
      display: flex;
    `,select:r.css`
      margin-right: 8px;
      flex-grow: 1;
    `});var Le=e(28151),Qe=e(27376);const Ye=({value:je,onChange:dt,context:oe})=>t.createElement(Qe.d,{links:je,onChange:dt,data:oe.data,getSuggestions:()=>oe.getSuggestions?oe.getSuggestions(Le.o.Values):[]});class de extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:dt}=this.props,{settings:oe}=dt;let Se=dt.settings?.options||[];oe?.getOptions&&(Se=await oe.getOptions(this.props.context)),this.state.options!==Se&&this.setState({isLoading:!1,options:Se})}}componentDidMount(){this.updateOptions()}componentDidUpdate(dt){const oe=dt.item?.settings,Se=this.props.item?.settings;if(oe!==Se)this.updateOptions();else if(Se?.getOptions){const Re=dt.context?.data,ze=this.props.context?.data;Re!==ze&&this.updateOptions()}}render(){const{options:dt,isLoading:oe}=this.state,{value:Se,onChange:Re,item:ze}=this.props,{settings:ve}=ze;return t.createElement(b.NU,{isLoading:oe,value:Se,defaultValue:Se,allowCustomValue:ve?.allowCustomValue,onChange:Te=>{Re(Te.map(he=>he.value).flatMap(he=>he!==void 0?[he]:[]))},options:dt})}}var Be=e(23712);class Ve extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:dt}=this.props,{settings:oe}=dt;let Se=dt.settings?.options||[];oe?.getOptions&&(Se=await oe.getOptions(this.props.context)),this.state.options!==Se&&this.setState({isLoading:!1,options:Se})}}componentDidMount(){this.updateOptions()}componentDidUpdate(dt){const oe=dt.item?.settings,Se=this.props.item?.settings;if(oe!==Se)this.updateOptions();else if(Se?.getOptions){const Re=dt.context?.data,ze=this.props.context?.data;Re!==ze&&this.updateOptions()}}render(){const{options:dt,isLoading:oe}=this.state,{value:Se,onChange:Re,item:ze}=this.props,{settings:ve}=ze;let Te=dt.find(he=>he.value===Se);return!Te&&Se&&(Te={label:`${Se}`,value:Se}),t.createElement(b.Ph,{isLoading:oe,value:Te,defaultValue:Se,allowCustomValue:ve?.allowCustomValue,isClearable:ve?.isClearable,onChange:he=>Re(he?.value),options:dt})}}var $e=e(74912),We=e(68858);const Ke=({value:je,onChange:dt,item:oe,id:Se})=>t.createElement(We.m,{stats:je,onChange:dt,allowMultiple:!!oe.settings?.allowMultiple,defaultStat:oe.settings?.defaultStat,inputId:Se});var qe=e(37565),Xe=e(93003);class at extends t.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=dt=>{const{value:oe,onChange:Se}=this.props,Re=[...oe];Re.splice(dt,1),Se(Re)},this.onValueChange=(dt,oe)=>{const Se=dt;if(dt.hasOwnProperty("key")&&Se.key!=="Enter")return;const{value:Re,onChange:ze}=this.props,ve=Se.currentTarget.value.trim();if(oe<0){ve&&(Se.currentTarget.value="",ze([...Re,ve])),this.setState({showAdd:!1});return}if(!ve)return this.onRemoveString(oe);const Te=[...Re];Te[oe]=ve,ze(Te)}}render(){const{value:dt,item:oe}=this.props,{showAdd:Se}=this.state,Re=Ze(Xe.v.theme2),ze=oe.settings?.placeholder||"Add text";return t.createElement("div",null,dt.map((ve,Te)=>t.createElement(p.I,{className:Re.textInput,key:`${Te}/${ve}`,defaultValue:ve||"",onBlur:he=>this.onValueChange(he,Te),onKeyDown:he=>this.onValueChange(he,Te),suffix:t.createElement(A.J,{className:Re.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(Te)})})),Se?t.createElement(p.I,{autoFocus:!0,className:Re.textInput,placeholder:ze,defaultValue:"",onBlur:ve=>this.onValueChange(ve,-1),onKeyDown:ve=>this.onValueChange(ve,-1),suffix:t.createElement(A.J,{name:"plus-circle"})}):t.createElement(v.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},ze))}}const Ze=(0,E.B)(je=>({textInput:r.css`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${je.components.input.borderHover};
      }
    `,trashIcon:r.css`
      color: ${je.colors.text.secondary};
      cursor: pointer;

      &:hover {
        color: ${je.colors.text};
      }
    `}));var lt=e(52373);function nt({value:je,onChange:dt,item:oe}){const Se=(0,a.wW)(_e);return oe?.settings?.isClearable&&je!=null?t.createElement("div",{className:Se.wrapper},t.createElement("span",{className:Se.first},t.createElement(lt.n,{value:je,onChange:dt})),t.createElement(h.h,{ariaLabel:"clear unit selection",name:"times",onClick:()=>dt(void 0)})):t.createElement(lt.n,{value:je,onChange:dt})}const _e=je=>({wrapper:r.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:r.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),ut=()=>{const je={id:"number",name:"Number",description:"Allows numeric values input",editor:Be.w},dt={id:"slider",name:"Slider",description:"Allows numeric values input",editor:$e.p},oe={id:"text",name:"Text",description:"Allows string values input",editor:qe.A},Se={id:"strings",name:"String array",description:"An array of strings",editor:at},Re={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(Et){const{id:Pt,...gt}=Et;return t.createElement(m.r,{...gt,onChange:Ct=>Et.onChange(Ct.currentTarget.checked)})}},ze={id:"select",name:"Select",description:"Allows option selection",editor:Ve},ve={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:de},Te={id:"radio",name:"Radio",description:"Allows option selection",editor(Et){return t.createElement(f.S,{...Et,options:Et.item.settings?.options})}},he={id:"unit",name:"Unit",description:"Allows unit input",editor:nt},pe={id:"color",name:"Color",description:"Allows color selection",editor(Et){return t.createElement(re.B,{value:Et.value,onChange:Et.onChange})}},ye={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:ne},Oe={id:"links",name:"Links",description:"Allows defining data links",editor:Ye},Ne={id:"stats-picker",name:"Stats Picker",editor:Ke,description:""},Me={id:"timezone",name:"Time zone",description:"Time zone selection",editor:o.O},Ae={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:l.b};return[oe,je,dt,Re,Te,ze,he,Oe,Ne,Se,Me,ye,pe,ve,Ae,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:ie},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:fe},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:R}]},rt=()=>{const je=["Standard options"],dt={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:u.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:je},oe={id:"unit",path:"unit",name:"Unit",description:"",editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:u.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:je},Se={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:u.Oh,settings:{placeholder:"auto"},shouldApply:Ne=>Ne.type===s.fS.number,category:je},Re={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:u.Oh,settings:{placeholder:"auto"},shouldApply:Ne=>Ne.type===s.fS.number,category:je},ze={id:"decimals",path:"decimals",name:"Decimals",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:u.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:Ne=>Ne.type===s.fS.number,category:je},ve={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:u.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:je},Te={id:"links",path:"links",name:"Data links",editor:n.S.get("links").editor,override:n.S.get("links").editor,process:u.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:Ne=>Ne?Ne.length:0},he={id:"color",path:"color",name:"Color scheme",editor:n.S.get("fieldColor").editor,override:n.S.get("fieldColor").editor,process:u.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:je},pe={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.S.get("mappings").editor,override:n.S.get("mappings").editor,process:u.uj,settings:{},defaultValue:[],shouldApply:Ne=>Ne.type!==s.fS.time,category:["Value mappings"],getItemsCount:Ne=>Ne?Ne.length:0},ye={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.S.get("thresholds").editor,override:n.S.get("thresholds").editor,process:u.ZN,settings:{},defaultValue:{mode:i.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:Ne=>Ne?Ne.steps.length:0},Oe={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:u.W4,shouldApply:()=>!0,settings:{},category:je};return[oe,Se,Re,ze,dt,he,ve,Te,pe,ye,Oe]}},74912:(G,O,e)=>{"use strict";e.d(O,{p:()=>o});var t=e(52423),n=e(78966),u=e(81183),s=e(68404),i=e(29516),m=e(63065),f=e(45458);const o=({value:d,onChange:c,item:g})=>{const p=(0,s.useRef)(null),{settings:y}=g,h=y?.min||0,a=y?.max||100,v=y?.step,C=y?.marks||{[h]:h,[a]:a},E=y?.included,P=y?.ariaLabelForHandle,x=75,M=!0,S=(0,i.l4)(),[D,T]=(0,s.useState)(d??h),[R,L]=(0,s.useState)(x);(0,s.useEffect)(()=>{d!=null&&d!==D&&T(d)},[d,D]),(0,s.useEffect)(()=>{const F=getComputedStyle(p.current),V=F.getPropertyValue("font-weight")||"normal",b=F.getPropertyValue("font-size")||"16px",X=F.getPropertyValue("font-family")||"Arial",k="0",H=4,Y=8,ee=Math.max((a+(v||0)).toString().length,(a-(v||0)).toString().length)+H,ue=k.repeat(ee),q=l(ue,`${V} ${b} ${X}`);q&&L(q+Y*2)},[a,v]);const w=(0,s.useCallback)(F=>{const V=typeof F=="number"?F:F[0];T(V),c&&c(V)},[T,c]),A=(0,s.useCallback)(F=>{let V=F;(Number.isNaN(V)||!V)&&(V=0),T(V),c&&c(V)},[c]),N=(0,m.W)(S,M,Boolean(C)),W=r(S,R),I=M?[]:[N.sliderInputVertical];return s.createElement("div",{className:(0,t.cx)(N.container,N.slider)},s.createElement(n.Global,{styles:N.slider}),s.createElement("label",{className:(0,t.cx)(N.sliderInput,...I)},s.createElement(u.Z,{min:h,max:a,step:v,defaultValue:d,value:D,onChange:w,vertical:!M,reverse:!1,ariaLabelForHandle:P,marks:C,included:E}),s.createElement("span",{className:W.numberInputWrapper,ref:p},s.createElement(f.Y,{value:D,onChange:A,max:a,min:h,step:v}))))};function l(d,c){const p=document.createElement("canvas").getContext("2d");return p?(p.font=c,p.measureText(d).width):null}const r=(d,c)=>({numberInputWrapper:t.css`
      margin-left: 10px;
      max-height: 32px;
      max-width: ${c}px;
      min-width: ${c}px;
      overflow: visible;
      width: 100%;
    `})},37565:(G,O,e)=>{"use strict";e.d(O,{A:()=>s});var t=e(68404),n=e(79090),u=e(25474);const s=({value:i,onChange:m,item:f,suffix:o})=>{const l=f.settings?.useTextarea?n.K:u.I,r=(0,t.useCallback)(d=>{let c=i??"";if(d.hasOwnProperty("key")){const g=d;g.key==="Enter"&&!f.settings?.useTextarea&&(c=g.currentTarget.value.trim())}else c=d.currentTarget.value.trim();c!==i&&m(c===""?void 0:c)},[i,f.settings?.useTextarea,m]);return t.createElement(l,{placeholder:f.settings?.placeholder,defaultValue:i||"",rows:f.settings?.useTextarea&&f.settings.rows||5,onBlur:r,onKeyDown:r,suffix:o})}},79396:(G,O,e)=>{"use strict";e.d(O,{T:()=>h});var t=e(52423),n=e(68404),u=e(24844),s=e(93003),i=e(29516),m=e(49938),f=e(25337),o=e(91289),l=e(79008);function r({children:v}){return n.createElement(n.Fragment,null,v)}var d=e(2555);const c=({isLoading:v,children:C,className:E})=>n.createElement("div",{className:(0,t.cx)("page-container","page-body",E)},v?n.createElement(d.Z,null):C);var g=e(83233),p=e(22174);const y=({navId:v,navModel:C,pageNav:E,children:P,className:x,toolbar:M,scrollRef:S,scrollTop:D,layout:T=u.Qz.Standard,renderTitle:R,subTitle:L,actions:w,info:A,...N})=>{const W=(0,i.wW)(a),I=(0,g.P)(v,C);(0,p.T)(I,E);const F=E??I?.main;return n.createElement("div",{className:(0,t.cx)(W.wrapper,x),...N},T===u.Qz.Standard&&n.createElement(m.$,{autoHeightMin:"100%",scrollTop:D,scrollRefCallback:S},n.createElement("div",{className:(0,t.cx)("page-scrollbar-content",x)},F&&n.createElement(o.m,{actions:w,info:A,navItem:F,renderTitle:R,subTitle:L}),P,n.createElement(f.$_,null))),T===u.Qz.Canvas&&n.createElement(n.Fragment,null,M,n.createElement("div",{className:W.scrollWrapper},n.createElement(m.$,{autoHeightMin:"100%",scrollTop:D,scrollRefCallback:S},n.createElement("div",{className:(0,t.cx)(W.content,!M&&W.contentWithoutToolbar)},P)))),T===u.Qz.Custom&&n.createElement(n.Fragment,null,M,P))};y.Contents=c,y.OldNavOnly=r;const h=s.v.featureToggles.topnav?l.T:y,a=v=>({wrapper:(0,t.css)({width:"100%",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),scrollWrapper:(0,t.css)({width:"100%",flexGrow:1,minHeight:0,display:"flex"}),content:(0,t.css)({display:"flex",flexDirection:"column",padding:v.spacing(0,2,2,2),flexBasis:"100%",flexGrow:1}),contentWithoutToolbar:(0,t.css)({padding:v.spacing(2)})})},83233:(G,O,e)=>{"use strict";e.d(O,{P:()=>i});var t=e(58565),n=e(86245),u=e(3153),s=e(81168);function i(f,o){if(o)return o;if(f&&u.h)return(0,s.useSelector)((0,t.P1)(m,l=>(0,n.ht)(l,f??"home")))}function m(f){return f.navIndex}},22174:(G,O,e)=>{"use strict";e.d(O,{T:()=>m});var t=e(68404),n=e(14393),u=e(81168),s=e(36578),i=e(67345);function m(f,o){const l=(0,u.useSelector)(r=>r.navIndex)?.[n.Qz];(0,t.useEffect)(()=>{const r=(f?.node!==f?.main?f?.node:f?.main)??{text:"Grafana"},d=(0,i.t)(r,o,l).map(c=>c.text).reverse();d[d.length-1]=s.c.AppTitle,document.title=d.join(" - ")},[l,f,o])}},91289:(G,O,e)=>{"use strict";e.d(O,{m:()=>p});var t=e(52423),n=e(68404),u=e(26625),s=e(17353),i=e(29516),m=e(84666),f=e(81697),o=e(14617),l=e(79860),r=e(9591),d=e(73194);const c=({children:a,customCss:v})=>{if(!a||a.length===0)return null;const C=a.find(E=>E.active===!0);return n.createElement("div",{className:`gf-form-select-wrapper width-20 ${v}`},n.createElement("div",{className:"dropdown"},n.createElement("button",{type:"button",className:"gf-form-input dropdown-toggle","data-toggle":"dropdown",style:{textAlign:"left"}},C?.text),n.createElement("ul",{role:"menu",className:"dropdown-menu dropdown-menu--menu"},a.map(E=>E.hideFromTabs?null:n.createElement(l.u,{key:E.url,iconClassName:E.icon,text:E.text,href:E.url})))))},g=({children:a})=>!a||a.length===0?null:n.createElement("nav",null,n.createElement(c,{customCss:"page-header__select-nav"},a),n.createElement(u.J,{className:"page-header__tabs",hideBorder:!0},a.map((v,C)=>!v.hideFromTabs&&n.createElement(s.O,{label:(0,o.Y)(v.id)??v.text,active:v.active,key:`${v.url}-${C}`,icon:v.icon,href:v.url,suffix:v.tabSuffix})))),p=({navItem:a,renderTitle:v,actions:C,info:E,subTitle:P})=>{const x=(0,i.wW)(h);if(!a)return null;const M=S=>{const D=S.icon==="grafana"?12:14,T=S.icon&&(0,m.toIconName)(S.icon),R=P??(0,o.L)(S.id)??S.subTitle,L=(0,o.Y)(S.id)??S.text;return n.createElement("div",{className:"page-header__inner"},n.createElement("span",{className:"page-header__logo"},T&&n.createElement(f.J,{name:T,size:"xxxl",style:{marginTop:D}}),S.img&&n.createElement("img",{className:"page-header__img",src:S.img,alt:`logo of ${L}`})),n.createElement("div",{className:(0,t.cx)("page-header__info-block",x.headerText)},v?v(L):y(L,S.breadcrumbs??[],S.highlightText),E&&n.createElement(r.S,{info:E}),R&&n.createElement("div",{className:"page-header__sub-title"},R),C&&n.createElement("div",{className:x.actions},C)))};return n.createElement("div",{className:x.headerCanvas},n.createElement("div",{className:"page-container"},n.createElement("div",{className:"page-header"},M(a),a.children&&a.children.length>0&&n.createElement(g,null,a.children))))};function y(a,v,C){if(!a&&(!v||v.length===0))return null;if(!v||v.length===0)return n.createElement("h1",{className:"page-header__title"},a,C&&n.createElement(d.Z,{text:C,className:t.css`
              vertical-align: middle;
            `}));const E=[];for(const P of v)P.url?E.push(n.createElement("a",{className:"page-header__link",key:E.length,href:P.url},P.title)):E.push(n.createElement("span",{key:E.length}," / ",P.title));return E.push(n.createElement("span",{key:v.length+1}," / ",a)),n.createElement("h1",{className:"page-header__title"},E)}const h=a=>({actions:(0,t.css)({display:"flex",flexDirection:"row",gap:a.spacing(1)}),headerText:(0,t.css)({display:"flex",flexDirection:"column",gap:a.spacing(1)}),headerCanvas:t.css`
    background: ${a.colors.background.canvas};
  `})},9591:(G,O,e)=>{"use strict";e.d(O,{S:()=>s});var t=e(52423),n=e(68404),u=e(29516);function s({info:m}){const f=(0,u.wW)(i);return n.createElement("div",{className:f.container},m.map((o,l)=>n.createElement(n.Fragment,{key:l},n.createElement("div",{className:f.infoItem},n.createElement("div",{className:f.label},o.label),o.value),l+1<m.length&&n.createElement("div",{"data-testid":"page-info-separator",className:f.separator}))))}const i=m=>({container:(0,t.css)({display:"flex",flexDirection:"row",gap:m.spacing(1.5),overflow:"auto"}),infoItem:(0,t.css)({...m.typography.bodySmall,display:"flex",flexDirection:"column",gap:m.spacing(.5)}),label:(0,t.css)({color:m.colors.text.secondary}),separator:(0,t.css)({borderLeft:`1px solid ${m.colors.border.weak}`})})},2555:(G,O,e)=>{"use strict";e.d(O,{Z:()=>s});var t=e(68404),n=e(90090);const s=({pageName:i=""})=>{const m=`Loading ${i}...`;return t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:m}))}},79008:(G,O,e)=>{"use strict";e.d(O,{T:()=>F});var t=e(52423),n=e(68404),u=e(24844),s=e(29516),i=e(49938),m=e(34177),f=e(25337),o=e(83233),l=e(22174),r=e(2555);const d=({isLoading:b,children:X,className:k})=>{let H=k?n.createElement("div",{className:k},X):X;return n.createElement(n.Fragment,null,b?n.createElement(r.Z,null):H)};var c=e(14617),g=e(9591);function p({navItem:b,renderTitle:X,actions:k,info:H,subTitle:Y}){const ee=(0,s.wW)(y),ue=Y??(0,c.L)(b.id)??b.subTitle,q=(0,c.Y)(b.id)??b.text,ge=X?X(q):n.createElement("h1",{className:ee.pageTitle},q);return n.createElement("div",{className:ee.pageHeader},n.createElement("div",{className:ee.topRow},n.createElement("div",{className:ee.titleInfoContainer},n.createElement("div",{className:ee.title},b.img&&n.createElement("img",{className:ee.img,src:b.img,alt:`logo for ${b.text}`}),ge),H&&n.createElement(g.S,{info:H})),n.createElement("div",{className:ee.actions},k)),ue&&n.createElement("div",{className:ee.subTitle},ue))}const y=b=>({topRow:(0,t.css)({alignItems:"center",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:b.spacing(1,2)}),title:(0,t.css)({display:"flex",flexDirection:"row"}),actions:(0,t.css)({display:"flex",flexDirection:"row",gap:b.spacing(1)}),titleInfoContainer:(0,t.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:b.spacing(1,4),justifyContent:"space-between",maxWidth:"100%"}),pageHeader:(0,t.css)({label:"page-header",display:"flex",flexDirection:"column",gap:b.spacing(1),marginBottom:b.spacing(2)}),pageTitle:(0,t.css)({display:"flex",marginBottom:0}),subTitle:(0,t.css)({position:"relative",color:b.colors.text.secondary}),img:(0,t.css)({width:"32px",height:"32px",marginRight:b.spacing(2)})});var h=e(26625),a=e(84666),v=e(17353);function C({navItem:b}){const X=(0,s.wW)(E);return n.createElement("div",{className:X.tabsWrapper},n.createElement(h.J,null,b.children.map((k,H)=>{const Y=k.icon?(0,a.toIconName)(k.icon):void 0;return!k.hideFromTabs&&n.createElement(v.O,{label:k.text,active:k.active,key:`${k.url}-${H}`,icon:Y,href:k.url,suffix:k.tabSuffix})})))}const E=b=>({tabsWrapper:(0,t.css)({paddingBottom:b.spacing(3)})});var P=e(24664),x=e(68183),M=e(81697);function S({item:b,isSectionRoot:X=!1}){const k=(0,s.wW)(D),H=b.children?.filter(q=>!q.hideFromTabs),Y=X&&Boolean(b.children[0].children?.length),ee=(0,t.cx)({[k.link]:!0,[k.activeStyle]:b.active,[k.isSection]:Boolean(H?.length)||b.isSection,[k.isSectionRoot]:X,[k.noRootMargin]:Y});let ue=null;return b.img?ue=n.createElement("img",{"data-testid":"section-image",className:k.sectionImg,src:b.img,alt:""}):b.icon&&(ue=n.createElement(M.J,{"data-testid":"section-icon",name:b.icon})),n.createElement(n.Fragment,null,n.createElement("a",{href:b.url,className:ee,"aria-label":x.wl.components.Tab.title(b.text),role:"tab","aria-selected":b.active},X&&ue,(0,c.Y)(b.id)??b.text,b.tabSuffix&&n.createElement(b.tabSuffix,{className:k.suffix})),H?.map((q,ge)=>n.createElement(S,{item:q,key:ge})))}const D=b=>({link:t.css`
      padding: ${b.spacing(1,0,1,1.5)};
      display: flex;
      align-items: center;
      border-radius: ${b.shape.borderRadius(2)};
      gap: ${b.spacing(1)};
      height: 100%;
      position: relative;
      color: ${b.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${b.colors.text.primary};
      background: ${b.colors.emphasize(b.colors.background.canvas,.03)};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: 2px;
        background-image: ${b.colors.gradients.brandVertical};
      }
    `,suffix:t.css`
      margin-left: ${b.spacing(1)};
    `,sectionImg:(0,t.css)({height:18}),isSectionRoot:(0,t.css)({fontSize:b.typography.h4.fontSize,marginTop:0,marginBottom:b.spacing(2),fontWeight:b.typography.fontWeightMedium}),isSection:(0,t.css)({color:b.colors.text.primary,fontSize:b.typography.h5.fontSize,marginTop:b.spacing(2),fontWeight:b.typography.fontWeightMedium}),noRootMargin:(0,t.css)({marginBottom:0})});var T=e(9085),R=e.n(T),L=e(90723);const w=({className:b,isExpanded:X,onClick:k})=>{const H=(0,s.l4)(),Y=A(H);return n.createElement(L.zx,{title:"Toggle section navigation","aria-label":X?"Close section navigation":"Open section navigation",icon:"arrow-to-right",className:R()(b,Y.icon,{[Y.iconExpanded]:X}),variant:"secondary",fill:"text",size:"md",onClick:k})};w.displayName="SectionNavToggle";const A=b=>({icon:(0,t.css)({color:b.colors.text.secondary,marginRight:0,zIndex:1}),iconExpanded:(0,t.css)({rotate:"180deg"})});function N({model:b}){const X=(0,s.wW)(I),{isExpanded:k,onToggleSectionNav:H}=W();return Boolean(b.main?.children?.length)?n.createElement("div",{className:X.navContainer},n.createElement("nav",{className:(0,t.cx)(X.nav,{[X.navExpanded]:k})},n.createElement(i.$,{showScrollIndicators:!0},n.createElement("div",{className:X.items,role:"tablist"},n.createElement(S,{item:b.main,isSectionRoot:!0})))),n.createElement(w,{className:(0,t.cx)(X.collapseIcon,{[X.collapseIconExpanded]:k}),isExpanded:Boolean(k),onClick:H})):null}function W(){const b=(0,s.l4)(),X=window.matchMedia(`(max-width: ${b.breakpoints.values.lg}px)`).matches,[k,H]=(0,P.Z)("grafana.sectionNav.expanded",!X),[Y,ee]=(0,n.useState)(!X&&k);return(0,n.useEffect)(()=>{const q=window.matchMedia(`(max-width: ${b.breakpoints.values.lg}px)`),ge=De=>ee(De.matches?!1:k);return q.addEventListener("change",ge),()=>q.removeEventListener("change",ge)},[k,b.breakpoints.values.lg]),{isExpanded:Y,onToggleSectionNav:()=>{H(!Y),ee(!Y)}}}const I=b=>({navContainer:(0,t.css)({display:"flex",flexDirection:"column",[b.breakpoints.up("md")]:{flexDirection:"row"}}),nav:(0,t.css)({display:"flex",flexDirection:"column",background:b.colors.background.canvas,flexShrink:0,transition:b.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[b.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,t.css)({maxHeight:"50vh",visibility:"visible",[b.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,t.css)({display:"flex",flexDirection:"column",padding:b.spacing(2,1,2,2),minWidth:"250px",[b.breakpoints.up("md")]:{padding:b.spacing(4.5,1,2,2)}}),collapseIcon:(0,t.css)({alignSelf:"center",margin:b.spacing(1,0),position:"relative",top:b.spacing(0),transform:"rotate(90deg)",transition:b.transitions.create("opacity"),[b.breakpoints.up("md")]:{alignSelf:"flex-start",left:0,margin:b.spacing(0,0,0,1),top:b.spacing(2),transform:"none"},"div:hover > &, &:focus":{opacity:1}}),collapseIconExpanded:(0,t.css)({[b.breakpoints.up("md")]:{opacity:0}})}),F=({navId:b,navModel:X,pageNav:k,renderTitle:H,actions:Y,subTitle:ee,children:ue,className:q,info:ge,layout:De=u.Qz.Standard,toolbar:fe,scrollTop:me,scrollRef:ce,...ie})=>{const re=(0,s.wW)(V),Ee=(0,o.P)(b,X),{chrome:J}=(0,m.p)();(0,l.T)(Ee,k);const te=k??Ee?.node;return(0,n.useEffect)(()=>{Ee&&J.update({sectionNav:Ee.node,pageNav:k})},[Ee,k,J]),n.createElement("div",{className:(0,t.cx)(re.wrapper,q),...ie},De===u.Qz.Standard&&n.createElement("div",{className:re.panes},Ee&&n.createElement(N,{model:Ee}),n.createElement("div",{className:re.pageContainer},n.createElement(i.$,{autoHeightMin:"100%",scrollTop:me,scrollRefCallback:ce},n.createElement("div",{className:re.pageInner},te&&n.createElement(p,{actions:Y,navItem:te,renderTitle:H,info:ge,subTitle:ee}),k&&k.children&&n.createElement(C,{navItem:k}),n.createElement("div",{className:re.pageContent},ue)),n.createElement(f.$_,null)))),De===u.Qz.Canvas&&n.createElement(i.$,{autoHeightMin:"100%",scrollTop:me,scrollRefCallback:ce},n.createElement("div",{className:re.canvasContent},fe,ue)),De===u.Qz.Custom&&n.createElement(n.Fragment,null,fe,ue))};F.Contents=d,F.OldNavOnly=function(){return null};const V=b=>{const X=b.isDark?"0 0.6px 1.5px -1px rgb(0 0 0),0 2px 4px -1px rgb(0 0 0 / 40%),0 5px 10px -1px rgb(0 0 0 / 23%)":"0 0.6px 1.5px -1px rgb(0 0 0 / 8%),0 2px 4px rgb(0 0 0 / 6%),0 5px 10px -1px rgb(0 0 0 / 5%)";return{wrapper:(0,t.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),panes:(0,t.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[b.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,t.css)({label:"page-container",flexGrow:1}),pageContent:(0,t.css)({label:"page-content",flexGrow:1}),pageInner:(0,t.css)({label:"page-inner",padding:b.spacing(2),boxShadow:X,background:b.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:b.spacing(0,0,0,0),[b.breakpoints.up("sm")]:{margin:b.spacing(0,1,1,1)},[b.breakpoints.up("md")]:{margin:b.spacing(2,2,2,1),padding:b.spacing(3)}}),canvasContent:(0,t.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:b.spacing(2),flexBasis:"100%",flexGrow:1})}}},20787:(G,O,e)=>{"use strict";e.d(O,{Z:()=>i});var t=e(68404),n=e(68183),u=e(25474),s=e(20017);const i=t.forwardRef(({autoComplete:m,autoFocus:f,id:o,passwordHint:l,...r},d)=>{const[c,g]=(0,t.useState)(!1);return t.createElement(u.I,{id:o,autoFocus:f,autoComplete:m,...r,type:c?"text":"password",placeholder:l,"aria-label":n.wl.pages.Login.password,ref:d,suffix:t.createElement(s.h,{name:c?"eye-slash":"eye",type:"button","aria-controls":o,role:"switch","aria-checked":c,"aria-label":"Show password",onClick:()=>{g(!c)}})})});i.displayName="PasswordField"},6645:(G,O,e)=>{"use strict";e.d(O,{Z:()=>y});var t=e(52423),n=e(68404),u=e(4403),s=e(90701),i=e(46739),m=e(90723),f=e(82385),o=e(94080),l=e(28038),r=e(47694),d=e(73757),c=e(50796);class g extends n.Component{constructor(a){super(a),this.onTypeChanged=v=>{const C=v.value;switch(C){case d.pC.User:case d.pC.Team:this.setState({type:C,userId:0,teamId:0,role:void 0});break;case d.pC.Editor:this.setState({type:C,userId:0,teamId:0,role:d.B5.Editor});break;case d.pC.Viewer:this.setState({type:C,userId:0,teamId:0,role:d.B5.Viewer});break}},this.onUserSelected=v=>{this.setState({userId:v&&!Array.isArray(v)?v.id:0})},this.onTeamSelected=v=>{this.setState({teamId:v.value?.id&&!Array.isArray(v.value)?v.value.id:0})},this.onPermissionChanged=v=>{this.setState({permission:v.value})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())},this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:d.pC.Team,permission:d.V5.View}}isValid(){switch(this.state.type){case d.pC.Team:return this.state.teamId>0;case d.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:a}=this.props,v=this.state,C="min-width-20",E=this.isValid(),P=p(r.ZP.theme2);return n.createElement("div",{className:"cta-form"},n.createElement(c.P,{onClick:a}),n.createElement("h5",null,"Add Permission For"),n.createElement(u.l,{maxWidth:"none",onSubmit:this.onSubmit},()=>n.createElement(s.Lh,null,n.createElement(i.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:this.state.type,options:d.BL,onChange:this.onTypeChanged}),v.type===d.pC.User?n.createElement(l.f,{onSelected:this.onUserSelected,className:C}):null,v.type===d.pC.Team?n.createElement(o.c,{onSelected:this.onTeamSelected,className:C}):null,n.createElement("span",{className:P.label},"Can"),n.createElement(i.Ph,{"aria-label":"Permission level",isSearchable:!1,value:this.state.permission,options:d.vT,onChange:this.onPermissionChanged,width:25}),n.createElement(m.zx,{"data-save-permission":!0,type:"submit",disabled:!E},"Save"))))}}g.defaultProps={showPermissionLevels:!0};const p=(0,f.B)(h=>({label:t.css`
    color: ${h.colors.primary.text};
    font-weight: bold;
  `})),y=g},92103:(G,O,e)=>{"use strict";e.d(O,{Z:()=>c});var t=e(68404),n=e(81697),u=e(46739),s=e(90723),i=e(73757);class m extends t.Component{render(){const{item:p}=this.props,y=i.vT.find(h=>h.value===p.permission);return t.createElement("tr",{className:"gf-form-disabled"},t.createElement("td",{style:{width:"1%"}},t.createElement(n.J,{size:"lg",name:"shield"})),t.createElement("td",{style:{width:"90%"}},p.name,t.createElement("span",{className:"filter-table__weak-italic"}," (Role)")),t.createElement("td",null),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement("div",{className:"gf-form"},t.createElement(u.Ph,{"aria-label":`Permission level for "${p.name}"`,options:i.vT,onChange:()=>{},disabled:!0,value:y}))),t.createElement("td",null,t.createElement(s.zx,{"aria-label":`Remove permission for "${p.name}"`,size:"sm",icon:"lock",disabled:!0})))}}const f=g=>g?"gf-form-disabled":"";function o({item:g}){return g.userAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:g.userAvatarUrl,alt:"User avatar"}):g.teamAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:g.teamAvatarUrl,alt:"Team avatar"}):g.role==="Editor"?t.createElement(n.J,{size:"lg",name:"edit"}):t.createElement(n.J,{size:"lg",name:"eye"})}function l({item:g}){return g.userId?t.createElement("span",{className:"filter-table__weak-italic"},"(User)"):g.teamId?t.createElement("span",{className:"filter-table__weak-italic"},"(Team)"):t.createElement("span",{className:"filter-table__weak-italic"},"(Role)")}class r extends t.PureComponent{constructor(){super(...arguments),this.onPermissionChanged=p=>{this.props.onPermissionChanged(this.props.item,p.value)},this.onRemoveItem=()=>{this.props.onRemoveItem(this.props.item)}}render(){const{item:p,folderInfo:y}=this.props,h=p.dashboardId===-1&&!p.inherited,a=i.vT.find(v=>v.value===p.permission);return t.createElement("tr",{className:f(Boolean(p?.inherited))},t.createElement("td",{style:{width:"1%"}},t.createElement(o,{item:p})),t.createElement("td",{style:{width:"90%"}},p.name," ",t.createElement(l,{item:p})),t.createElement("td",null,p.inherited&&y&&t.createElement("em",{className:"muted no-wrap"},"Inherited from folder"," ",y.canViewFolderPermissions?t.createElement("a",{className:"text-link",href:`${y.url}/permissions`},y.title):y.title),h&&t.createElement("em",{className:"muted no-wrap"},"Default Permission")),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement(u.Ph,{"aria-label":`Permission level for "${p.name}"`,isSearchable:!1,options:i.vT,onChange:this.onPermissionChanged,disabled:p.inherited,value:a,width:25})),t.createElement("td",null,p.inherited?t.createElement(s.zx,{"aria-label":`Remove permission for "${p.name}" (Disabled)`,size:"sm",disabled:!0,icon:"times"}):t.createElement(s.zx,{"aria-label":`Remove permission for "${p.name}"`,size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})))}}class d extends t.PureComponent{render(){const{items:p,onRemoveItem:y,onPermissionChanged:h,isFetching:a,folderInfo:v}=this.props;return t.createElement("table",{className:"filter-table gf-form-group"},t.createElement("tbody",null,t.createElement(m,{key:0,item:{name:"Admin",permission:4}}),p.map((C,E)=>t.createElement(r,{key:E+1,item:C,onRemoveItem:y,onPermissionChanged:h,folderInfo:v})),a===!0&&p.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"Loading permissions..."))):null,a===!1&&p.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"No permissions are set. Will only be accessible by admins."))):null))}}const c=d},54630:(G,O,e)=>{"use strict";e.d(O,{Z:()=>u});var t=e(68404);const u=()=>t.createElement("div",null,t.createElement("h5",null,"What are Permissions?"),t.createElement("p",null,"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."))},19117:(G,O,e)=>{"use strict";e.d(O,{h:()=>i});var t=e(52423),n=e(68404),u=e(41959),s=e(29516);const i=n.memo(n.forwardRef(({className:o,children:l,markdown:r,onRemove:d,...c},g)=>{const p=(0,s.wW)(f);return n.createElement("div",{className:(0,t.cx)(p.wrapper,o),...c,ref:g},r&&m(r),l)}));function m(o){const l=(0,u.a)(o);return n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:l}})}i.displayName="OperationRowHelp";const f=o=>{const l=o.shape.borderRadius();return{wrapper:t.css`
      padding: ${o.spacing(2)};
      border: 2px solid ${o.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${l} ${l};
      position: relative;
      top: -4px;
    `}}},1029:(G,O,e)=>{"use strict";e.d(O,{y:()=>m});var t=e(52423),n=e(68404),u=e(68183),s=e(29516),i=e(20017);const m=({icon:o,active:l,disabled:r,title:d,onClick:c})=>{const g=(0,s.wW)(f);return n.createElement("div",{className:(0,t.cx)(g.icon,l&&g.active)},n.createElement(i.h,{name:o,tooltip:d,className:g.icon,disabled:!!r,onClick:c,type:"button","aria-label":u.wl.components.QueryEditorRow.actionButton(d)}))};m.displayName="QueryOperationAction";const f=o=>({icon:t.css`
      display: flex;
      position: relative;
      color: ${o.colors.text.secondary};
    `,active:t.css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: 2px;
        bottom: -8px;
        background-image: ${o.colors.gradients.brandHorizontal} !important;
      }
    `})},67254:(G,O,e)=>{"use strict";e.d(O,{t:()=>c});var t=e(52423),n=e(68404),u=e(19677),s=e(73802),i=e(77274),m=e(29516),f=e(10027),o=e(20017),l=e(81697);const r=({actionsElement:p,disabled:y,draggable:h,dragHandleProps:a,headerElement:v,isContentVisible:C,onRowToggle:E,reportDragMousePosition:P,titleElement:x,id:M})=>{const S=(0,m.wW)(d);return n.createElement("div",{className:S.header},n.createElement("div",{className:S.column},n.createElement(o.h,{name:C?"angle-down":"angle-right",title:"toggle collapse and expand","aria-label":"toggle collapse and expand query row",className:S.collapseIcon,onClick:E,type:"button","aria-expanded":C,"aria-controls":M}),x&&n.createElement("div",{className:S.titleWrapper,onClick:E,"aria-label":"Query operation row title"},n.createElement("div",{className:(0,t.cx)(S.title,y&&S.disabled)},x)),v),n.createElement("div",{className:S.column},p,h&&n.createElement(l.J,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:S.dragIcon,onMouseMove:P,...a})))},d=p=>({header:t.css`
    label: Header;
    padding: ${p.spacing(.5,.5)};
    border-radius: ${p.shape.borderRadius(1)};
    background: ${p.colors.background.secondary};
    min-height: ${p.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:t.css`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:t.css`
    cursor: grab;
    color: ${p.colors.text.disabled};
    margin: ${p.spacing(0,.5)};
    &:hover {
      color: ${p.colors.text};
    }
  `,collapseIcon:t.css`
    margin-left: ${p.spacing(.5)};
    color: ${p.colors.text.disabled};
    }
  `,titleWrapper:t.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${p.spacing(.5)};
  `,title:t.css`
    font-weight: ${p.typography.fontWeightBold};
    color: ${p.colors.text.link};
    margin-left: ${p.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:t.css`
    color: ${p.colors.text.disabled};
  `});r.displayName="QueryOperationRowHeader";function c({children:p,actions:y,title:h,headerElement:a,onClose:v,onOpen:C,isOpen:E,disabled:P,draggable:x,index:M,id:S}){const[D,T]=(0,n.useState)(E!==void 0?E:!0),R=(0,m.wW)(g),L=(0,n.useCallback)(()=>{T(!D)},[D,T]),w=(0,n.useCallback)(F=>{if(F.defaultPrevented){const V=F.currentTarget.getBoundingClientRect(),b=F.clientX-V.left,X=F.clientY-V.top;(0,i.ff)("query_row_reorder_drag_position",{x:b/V.width,y:X/V.height,width:V.width,height:V.height})}},[]);(0,s.Z)(()=>{D?C&&C():v&&v()},[D]);const A={isOpen:D,onOpen:()=>{T(!0)},onClose:()=>{T(!1)}},N=h&&f.renderOrCallToRender(h,A),W=y&&f.renderOrCallToRender(y,A),I=a&&f.renderOrCallToRender(a,A);return x?n.createElement(u._l,{draggableId:S,index:M},F=>n.createElement(n.Fragment,null,n.createElement("div",{ref:F.innerRef,className:R.wrapper,...F.draggableProps},n.createElement("div",null,n.createElement(r,{id:S,actionsElement:W,disabled:P,draggable:!0,dragHandleProps:F.dragHandleProps,headerElement:I,isContentVisible:D,onRowToggle:L,reportDragMousePosition:w,titleElement:N})),D&&n.createElement("div",{className:R.content},p)))):n.createElement("div",{className:R.wrapper},n.createElement(r,{id:S,actionsElement:W,disabled:P,draggable:!1,headerElement:I,isContentVisible:D,onRowToggle:L,reportDragMousePosition:w,titleElement:N}),D&&n.createElement("div",{className:R.content},p))}const g=p=>({wrapper:t.css`
      margin-bottom: ${p.spacing(2)};
    `,content:t.css`
      margin-top: ${p.spacing(.5)};
      margin-left: ${p.spacing(3)};
    `});c.displayName="QueryOperationRow"},53674:(G,O,e)=>{"use strict";e.d(O,{I:()=>ie});var t=e(68404),n=e(90701),u=e(40008),s=e(57319),i=e(52423),m=e(29516),f=e(81697),o=e(48756),l=e(25474),r=e(51821),d=e(19253),c=e(76686);const g=(0,t.forwardRef)(({children:re,iconName:Ee},J)=>{const te=(0,m.wW)(p);return t.createElement("div",{className:te.container,ref:J},Ee&&t.createElement(f.J,{name:Ee,size:"xs"}),re)});g.displayName="ValueContainer";const p=re=>{const{prefix:Ee}=(0,l.H)({theme:re}),{multiValueContainer:J}=(0,c.D)(re);return{container:(0,i.cx)(Ee,J,i.css`
        position: relative;
        padding: ${re.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${re.spacing(.5)};
        }
      `)}},y=300,h=360,a=260,v=re=>re.stopPropagation(),C=({appliedRoles:re,basicRole:Ee,disabled:J,isFocused:te,query:ne,showBasicRole:j,onOpen:be,onClose:Le,onQueryChange:Qe,...Ye})=>{const de=(0,m.wW)(We=>P(We,!1,!!te,!!J,!1)),Be=(0,t.useRef)(null);(0,t.useEffect)(()=>{te&&Be.current?.focus()});const Ve=We=>{const Ke=We.target?.value;Qe(Ke)},$e=re.length;return te?t.createElement("div",{className:de.wrapper},j&&t.createElement(g,null,Ee),re.map(We=>t.createElement(g,{key:We.uid},We.displayName)),!J&&t.createElement("input",{...Ye,className:de.input,ref:Be,onMouseDown:v,onChange:Ve,"data-testid":"role-picker-input",placeholder:te?"Select role":"",value:ne}),t.createElement("div",{className:de.suffix},t.createElement(f.J,{name:"angle-up",className:de.dropdownIndicator,onMouseDown:Le}))):t.createElement("div",{className:(0,i.cx)(de.wrapper,de.selectedRoles),onMouseDown:be},j&&t.createElement(g,null,Ee),t.createElement(E,{appliedRoles:re,numberOfRoles:$e,showBuiltInRole:j}))};C.displayName="RolePickerInput";const E=({showBuiltInRole:re,numberOfRoles:Ee,appliedRoles:J})=>{const te=(0,m.wW)(ne=>x(ne));return t.createElement(t.Fragment,null,Ee?t.createElement(o.u,{content:t.createElement("div",{className:te.tooltip},J?.map(ne=>t.createElement("p",{key:ne.uid},ne.displayName)))},t.createElement(g,null,`${re?"+":""}${Ee} role${Ee>1?"s":""}`)):!re&&t.createElement(g,null,"No roles assigned"))},P=(re,Ee,J,te,ne)=>{const j=(0,l.H)({theme:re,invalid:Ee});return{wrapper:(0,i.cx)(j.wrapper,(0,r.RK)(re,Ee),J&&i.css`
          ${d.focusCss(re.v1)}
        `,te&&j.inputDisabled,i.css`
        min-width: ${h}px;
        min-height: 32px;
        height: auto;
        flex-direction: row;
        padding-right: 24px;
        max-width: 100%;
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        cursor: default;
      `,ne&&i.css`
          padding-left: 0;
        `),input:(0,i.cx)((0,r.RK)(re,Ee),i.css`
        max-width: 120px;
        border: none;
        cursor: ${J?"default":"pointer"};
      `),suffix:j.suffix,dropdownIndicator:i.css`
      cursor: pointer;
    `,selectedRoles:i.css`
      display: flex;
      align-items: center;
      cursor: ${te?"not-allowed":"pointer"};
    `,tooltip:i.css`
      p {
        margin-bottom: ${re.spacing(.5)};
      }
    `}},x=re=>({tooltip:i.css`
    p {
      margin-bottom: ${re.spacing(.5)};
    }
  `});var M=e(49938),S=e(318),D=e(90723),T=e(81168),R=e(94338),L=e(97635);const w=re=>({menuWrapper:i.css`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${re.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:i.css`
      min-width: ${a}px;

      & > div {
        padding-top: ${re.spacing(1)};
      }
    `,menuLeft:i.css`
      right: 0;
      flex-direction: row-reverse;
    `,subMenu:i.css`
      height: 100%;
      min-width: ${a}px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid ${re.components.input.borderColor};

      & > div {
        padding-top: ${re.spacing(1)};
      }
    `,subMenuLeft:i.css`
      border-right: 1px solid ${re.components.input.borderColor};
      border-left: unset;
    `,groupHeader:i.css`
      padding: ${re.spacing(0,4.5)};
      display: flex;
      align-items: center;
      color: ${re.colors.text.primary};
      font-weight: ${re.typography.fontWeightBold};
    `,container:i.css`
      padding: ${re.spacing(1)};
      border: 1px ${re.colors.border.weak} solid;
      border-radius: ${re.shape.borderRadius(1)};
      background-color: ${re.colors.background.primary};
      z-index: ${re.zIndex.modal};
    `,menuSection:i.css`
      margin-bottom: ${re.spacing(2)};
    `,menuOptionCheckbox:i.css`
      display: flex;
      margin: ${re.spacing(0,1,0,.25)};
    `,menuButtonRow:i.css`
      background-color: ${re.colors.background.primary};
      padding: ${re.spacing(1)};
    `,menuOptionBody:i.css`
      font-weight: ${re.typography.fontWeightRegular};
      padding: ${re.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:i.css`
      color: ${re.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionExpand:i.css`
      position: absolute;
      right: ${re.spacing(1.25)};
      color: ${re.colors.text.disabled};

      &:after {
        content: '>';
      }
    `,menuOptionInfoSign:i.css`
      color: ${re.colors.text.disabled};
    `,basicRoleSelector:i.css`
      margin: ${re.spacing(1,1.25,1,1)};
    `,subMenuPortal:i.css`
      height: 100%;
      > div {
        height: 100%;
      }
    `,subMenuButtonRow:i.css`
      background-color: ${re.colors.background.primary};
      padding: ${re.spacing(1)};
    `,checkboxPartiallyChecked:i.css`
      input {
        &:checked + span {
          &:after {
            border-width: 0 3px 0px 0;
            transform: rotate(90deg);
          }
        }
      }
    `}),A=(0,t.memo)(t.forwardRef(({name:re,value:Ee,isFocused:J,isSelected:te,partiallySelected:ne,disabled:j,onChange:be,onClick:Le,onOpenSubMenu:Qe,onCloseSubMenu:Ye,children:de,root:Be},Ve)=>{const $e=(0,m.l4)(),We=(0,c.D)($e),Ke=(0,m.wW)(w),qe=(0,i.cx)(We.option,J&&We.optionFocused,j&&Ke.menuOptionDisabled),Xe=nt=>{j||Ee&&be(Ee)},at=nt=>{Le&&Le(Ee)},Ze=()=>{Qe&&Qe(Ee)},lt=()=>{Ye&&Ye()};return t.createElement("div",{onMouseEnter:Ze,onMouseLeave:lt},t.createElement("div",{ref:Ve,className:qe,"aria-label":"Role picker option",onClick:at},t.createElement(R.X,{value:te,className:(0,i.cx)(Ke.menuOptionCheckbox,{[Ke.checkboxPartiallyChecked]:ne}),onChange:Xe,disabled:j}),t.createElement("div",{className:(0,i.cx)(We.optionBody,Ke.menuOptionBody)},t.createElement("span",null,re),t.createElement("span",{className:Ke.menuOptionExpand})),Be&&de&&t.createElement(L.h_,{className:Ke.subMenuPortal,root:Be},de)))}));A.displayName="RoleMenuGroupOption";const N=t.forwardRef(({data:re,isFocused:Ee,isSelected:J,disabled:te,onChange:ne,hideDescription:j},be)=>{const Le=(0,m.l4)(),Qe=(0,c.D)(Le),Ye=(0,m.wW)(w),de=(0,i.cx)(Qe.option,Ee&&Qe.optionFocused,te&&Ye.menuOptionDisabled),Be=Ve=>{te||(Ve.preventDefault(),Ve.stopPropagation(),ne(re))};return t.createElement("div",{ref:be,className:de,"aria-label":"Role picker option",onClick:Be},t.createElement(R.X,{value:J,className:Ye.menuOptionCheckbox,onChange:Be,disabled:te}),t.createElement("div",{className:(0,i.cx)(Qe.optionBody,Ye.menuOptionBody)},t.createElement("span",null,re.displayName||re.name),!j&&re.description&&t.createElement("div",{className:Qe.optionDescription},re.description)),re.description&&t.createElement(o.u,{content:re.description},t.createElement(f.J,{name:"info-circle",className:Ye.menuOptionInfoSign})))});N.displayName="RoleMenuOption";const W=re=>re.delegatable!==void 0&&!re.delegatable,I=({options:re,selectedOptions:Ee,disabledOptions:J,onSelect:te,onClear:ne,showOnLeft:j})=>{const be=(0,m.l4)(),Le=(0,c.D)(be),Qe=(0,m.wW)(w),Ye=async()=>{ne&&ne()};return t.createElement("div",{className:(0,i.cx)(Qe.subMenu,{[Qe.subMenuLeft]:j}),"aria-label":"Role picker submenu"},t.createElement(M.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0},t.createElement("div",{className:Le.optionBody},re.map((de,Be)=>t.createElement(N,{data:de,key:Be,isSelected:!!(de.uid&&(Ee.find(Ve=>Ve.uid===de.uid)||J?.find(Ve=>Ve.uid===de.uid))),disabled:!!(de.uid&&J?.find(Ve=>Ve.uid===de.uid))||W(de),onChange:te,hideDescription:!0})))),t.createElement("div",{className:Qe.subMenuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(D.zx,{size:"sm",fill:"text",onClick:Ye},"Clear"))))},F=t.forwardRef(({roles:re,renderedName:Ee,showGroups:J,optionGroups:te,onGroupChange:ne,groupSelected:j,groupPartiallySelected:be,subMenuNode:Le,selectedOptions:Qe,onRoleChange:Ye,onClearSubMenu:de,showOnLeftSubMenu:Be},Ve)=>{const[$e,We]=(0,t.useState)(!1),[Ke,qe]=(0,t.useState)(""),Xe=(0,m.l4)(),at=(0,c.D)(Xe),Ze=(0,m.wW)(w),lt=(0,t.useCallback)(_e=>{qe(_e),We(!0)},[]),nt=(0,t.useCallback)(()=>{We(!1),qe("")},[]);return t.createElement("div",null,re.length>0&&t.createElement("div",{className:Ze.menuSection},t.createElement("div",{className:Ze.groupHeader},Ee),t.createElement("div",{className:at.optionBody}),J&&te?.length?te.map(_e=>t.createElement(A,{key:_e.value,name:_e.name,value:_e.value,isSelected:j(_e.value)||be(_e.value),partiallySelected:be(_e.value),disabled:_e.options?.every(W),onChange:ne,onOpenSubMenu:lt,onCloseSubMenu:nt,root:Le,isFocused:$e&&Ke===_e.value},$e&&Ke===_e.value&&t.createElement(I,{options:_e.options,selectedOptions:Qe,onSelect:Ye,onClear:()=>de(Ke),showOnLeft:Be}))):re.map(_e=>t.createElement(N,{data:_e,key:_e.uid,isSelected:!!(_e.uid&&Qe.find(ut=>ut.uid===_e.uid)),disabled:W(_e),onChange:Ye,hideDescription:!0}))))});F.displayName="RoleMenuGroupsSection";var V=(re=>(re.fixed="fixed",re.custom="custom",re.plugin="plugin",re))(V||{});const X=Object.values(T.OrgRole).map(re=>({label:re,value:re})),k={ldap:"LDAP",current:"Current org"},H=({basicRole:re,options:Ee,appliedRoles:J,showGroups:te,basicRoleDisabled:ne,showBasicRole:j,onSelect:be,onBasicRoleSelect:Le,onUpdate:Qe,updateDisabled:Ye,offset:de,apply:Be})=>{const[Ve,$e]=(0,t.useState)(J),[We,Ke]=(0,t.useState)(re),[qe,Xe]=(0,t.useState)({}),at=(0,t.useRef)(null),Ze=(0,m.l4)(),lt=(0,c.D)(Ze),nt=(0,m.wW)(w);(0,t.useEffect)(()=>{be(Ve)},[Ve,be]),(0,t.useEffect)(()=>{Le&&We&&Le(We)},[We,Le]),(0,t.useEffect)(()=>{const ve=Ee.filter(Y).sort(me),Te=Ee.filter(ee).sort(me),he=Ee.filter(ue).sort(me),pe={fixed:q(Te).sort((ye,Oe)=>ye.name.localeCompare(Oe.name)),custom:q(ve).sort((ye,Oe)=>ye.name.localeCompare(Oe.name)),plugin:q(he).sort((ye,Oe)=>ye.name.localeCompare(Oe.name))};Xe({fixed:{groupType:"fixed",optionGroup:pe.fixed,renderedName:"Fixed roles",roles:Te},custom:{groupType:"custom",optionGroup:pe.custom,renderedName:"Custom roles",roles:ve},plugin:{groupType:"plugin",optionGroup:pe.plugin,renderedName:"Plugin roles",roles:he}})},[Ee]);const _e=ve=>{const Te=[];for(const he of Ve)ge(he)===ve&&Te.push(he);return Te},ut=(ve,Te)=>{const he=_e(Te),pe=qe[ve]?.optionGroup.find(ye=>ye.value===Te);return he.length>0&&he.length>=pe.options.length},rt=(ve,Te)=>{const he=_e(Te),pe=qe[ve]?.optionGroup.find(ye=>ye.value===Te);return he.length>0&&he.length<pe.options.length},je=ve=>{Ve.find(Te=>Te.uid===ve.uid)?$e(Ve.filter(Te=>Te.uid!==ve.uid)):$e([...Ve,ve])},dt=(ve,Te)=>{const he=qe[ve]?.optionGroup.find(pe=>pe.value===Te);if(he)if(ut(ve,Te)||rt(ve,Te))$e(Ve.filter(pe=>!he.options.find(ye=>pe.uid===ye.uid)));else{const pe=he.options.filter(Oe=>Oe.delegatable),ye=Ve.filter(Oe=>!he.options.find(Ne=>Oe.uid===Ne.uid));$e([...ye,...pe])}},oe=ve=>{Ke(ve)},Se=async()=>{$e([])},Re=ve=>{const Te=Ve.filter(he=>ge(he)!==ve);$e(Te)},ze=()=>{Qe(Ve,We)};return t.createElement("div",{className:(0,i.cx)(lt.menu,nt.menuWrapper,{[nt.menuLeft]:de.horizontal>0},i.css`
          bottom: ${de.vertical>0?`${de.vertical}px`:"unset"};
          top: ${de.vertical<0?`${Math.abs(de.vertical)}px`:"unset"};
        `)},t.createElement("div",{className:nt.menu,"aria-label":"Role picker menu"},t.createElement(M.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0},j&&t.createElement("div",{className:nt.menuSection},t.createElement("div",{className:nt.groupHeader},"Basic roles"),t.createElement(S.S,{className:nt.basicRoleSelector,options:X,value:We,onChange:oe,fullWidth:!0,disabled:ne})),Object.entries(qe).map(([ve,Te])=>t.createElement(F,{key:ve,roles:Te.roles,renderedName:Te.renderedName,showGroups:te,optionGroups:Te.optionGroup,groupSelected:he=>ut(Te.groupType,he),groupPartiallySelected:he=>rt(Te.groupType,he),onGroupChange:he=>dt(Te.groupType,he),subMenuNode:at?.current,selectedOptions:Ve,onRoleChange:je,onClearSubMenu:Re,showOnLeftSubMenu:de.horizontal>0}))),t.createElement("div",{className:nt.menuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(D.zx,{size:"sm",fill:"text",onClick:Se,disabled:Ye},"Clear all"),t.createElement(D.zx,{size:"sm",onClick:ze,disabled:Ye},Be?"Apply":"Update")))),t.createElement("div",{ref:at}))},Y=re=>!re.name?.startsWith("fixed:")&&!re.name.startsWith("plugins:"),ee=re=>re.name?.startsWith("fixed:"),ue=re=>re.name?.startsWith("plugins:"),q=re=>{const Ee={};return re.forEach(te=>{const ne=ge(te),j=De(te);Ee[ne]||(Ee[ne]={name:j,roles:[]}),Ee[ne].roles.push(te)}),Object.entries(Ee).map(([te,ne])=>({name:k[te]||ce(ne.name),value:te,options:ne.roles.sort(me)}))},ge=re=>{const Ee=fe(re),J=De(re);return`${Ee}:${J}`},De=re=>re.group||"Other",fe=re=>{const Ee=re.name.indexOf(":");return Ee<0?"unknown":re.name.substring(0,Ee)},me=(re,Ee)=>re.name.localeCompare(Ee.name),ce=re=>re.slice(0,1).toUpperCase()+re.slice(1),ie=({basicRole:re,appliedRoles:Ee,roleOptions:J,disabled:te,isLoading:ne,basicRoleDisabled:j,showBasicRole:be,onRolesChange:Le,onBasicRoleChange:Qe,canUpdateRoles:Ye=!0,apply:de=!1,maxWidth:Be=h})=>{const[Ve,$e]=(0,t.useState)(!1),[We,Ke]=(0,t.useState)(Ee),[qe,Xe]=(0,t.useState)(re),[at,Ze]=(0,t.useState)(""),[lt,nt]=(0,t.useState)({vertical:0,horizontal:0}),_e=(0,t.useRef)(null);(0,t.useEffect)(()=>{Xe(re),Ke(Ee)},[Ee,re]),(0,t.useEffect)(()=>{const ve=_e?.current?.getBoundingClientRect();if(!ve||!Ve)return;const{bottom:Te,top:he,left:pe,right:ye,width:Oe}=ve,Ne=window.innerHeight-Te,Me=Te-he+10,Ae=ye-pe;let we=-Ae,ke=-Me;Ne<y+20&&(ke=Me),window.innerWidth-ye<Oe&&Oe<2*a&&(we=Ae),nt({horizontal:we,vertical:ke})},[Ve,We]);const ut=(0,t.useCallback)(ve=>{te||(ve.preventDefault(),ve.stopPropagation(),$e(!0))},[$e,te]),rt=(0,t.useCallback)(()=>{$e(!1),Ze(""),Ke(Ee),Xe(re)},[Ee,re]),je=()=>Ve&&rt(),dt=ve=>{Ze(ve||"")},oe=ve=>{Ke(ve)},Se=ve=>{Xe(ve)},Re=(ve,Te)=>{Qe&&Te&&Te!==re&&Qe(Te),Ye&&Le(ve),Ze(""),$e(!1)},ze=()=>{const ve=J.map(Te=>({...Te,delegatable:Ye&&Te.delegatable}));return at&&at.trim()!==""?ve.filter(Te=>Te.name?.toLowerCase().includes(at.toLowerCase())):ve};return ne?t.createElement(n.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(u.$,{size:16})):t.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:Be},ref:_e},t.createElement(s.L,{onClick:je},t.createElement(C,{basicRole:qe,appliedRoles:We,query:at,onQueryChange:dt,onOpen:ut,onClose:rt,isFocused:Ve,disabled:te,showBasicRole:be}),Ve&&t.createElement(H,{options:ze(),basicRole:qe,appliedRoles:Ee,onBasicRoleSelect:Se,onSelect:oe,onUpdate:Re,showGroups:at.length===0||at.trim()==="",basicRoleDisabled:j,showBasicRole:be,updateDisabled:j&&!Ye,apply:de,offset:lt})))}},66226:(G,O,e)=>{"use strict";e.d(O,{R:()=>f});var t=e(68404),n=e(671),u=e(77582),s=e(81168),i=e(53674),m=e(11630);const f=({basicRole:o,userId:l,orgId:r,onBasicRoleChange:d,roleOptions:c,disabled:g,basicRoleDisabled:p,apply:y=!1,onApplyRoles:h,pendingRoles:a,maxWidth:v})=>{const[{loading:C,value:E=[]},P]=(0,n.Z)(async()=>{try{if(y&&Boolean(a?.length))return a;if(u.Vt.hasPermission(s.AccessControlAction.ActionUserRolesList))return await(0,m.kt)(l,r)}catch{console.error("Error loading options")}return[]},[r,l,a]);(0,t.useEffect)(()=>{r&&P()},[r,P,a]);const x=async S=>{y?h&&h(S,l,r):(await(0,m.hB)(S,l,r),await P())},M=u.Vt.hasPermission(s.AccessControlAction.ActionUserRolesAdd)&&u.Vt.hasPermission(s.AccessControlAction.ActionUserRolesRemove);return t.createElement(i.I,{appliedRoles:E,basicRole:o,onRolesChange:x,onBasicRoleChange:d,roleOptions:c,isLoading:C,disabled:g,basicRoleDisabled:p,showBasicRole:!0,apply:y,canUpdateRoles:M,maxWidth:v})}},11630:(G,O,e)=>{"use strict";e.d(O,{_C:()=>i,hB:()=>s,kt:()=>u,u7:()=>m,ul:()=>n});var t=e(47214);const n=async(f,o)=>{let l="/api/access-control/roles?delegatable=true";f&&(l+=`&targetOrgId=${f}`);const r=await(0,t.i)().get(l);return!r||!r.length?[]:r},u=async(f,o)=>{let l=`/api/access-control/users/${f}/roles`;o&&(l+=`?targetOrgId=${o}`);try{const r=await(0,t.i)().get(l);return!r||!r.length?[]:r}catch(r){return(0,t.kW)(r)&&(r.isHandled=!0),[]}},s=(f,o,l)=>{let r=`/api/access-control/users/${o}/roles`;l&&(r+=`?targetOrgId=${l}`);const d=f.flatMap(c=>c.uid);return(0,t.i)().put(r,{orgId:l,roleUids:d})},i=async(f,o)=>{let l=`/api/access-control/teams/${f}/roles`;o&&(l+=`?targetOrgId=${o}`);try{const r=await(0,t.i)().get(l);return!r||!r.length?[]:r}catch(r){return(0,t.kW)(r)&&(r.isHandled=!0),[]}},m=(f,o,l)=>{let r=`/api/access-control/teams/${o}/roles`;l&&(r+=`?targetOrgId=${l}`);const d=f.flatMap(c=>c.uid);return(0,t.i)().put(r,{orgId:l,roleUids:d})}},16964:(G,O,e)=>{"use strict";e.d(O,{V:()=>i});var t=e(25980),n=e.n(t),u=e(68404),s=e(95148);const i=o=>u.createElement(s.Z,{...o,cacheRequests:!0,preProcessor:f});let m=new Map;function f(o){let l=m.get(o);return l||(l=t.sanitize(o,{USE_PROFILES:{svg:!0,svgFilters:!0}}),m.set(o,l)),l}},99661:(G,O,e)=>{"use strict";e.d(O,{o:()=>l});var t=e(99151),n=e.n(t),u=e(68404),s=e(46739),i=e(29930);const m=(r="General",d)=>`${r}/${d}`;async function f(r=""){return i.ae.search({type:"dash-db",query:r,limit:100}).then(d=>d.map(c=>({value:{uid:c.uid,title:c.title,folderTitle:c.folderTitle,folderUid:c.folderUid},label:m(c?.folderTitle,c.title)})))}const o=n()(f,250,{leading:!0}),l=({value:r,onChange:d,placeholder:c="Select dashboard",noOptionsMessage:g="No dashboards found",...p})=>{const[y,h]=(0,u.useState)();(0,u.useEffect)(()=>{!r||r===y?.value?.uid||(async()=>{const v=await i.ae.getDashboardByUid(r);v.dashboard&&h({value:{uid:v.dashboard.uid,title:v.dashboard.title,folderTitle:v.meta.folderTitle,folderUid:v.meta.folderUid},label:m(v.meta?.folderTitle,v.dashboard.title)})})()},[r]);const a=(0,u.useCallback)(v=>{h(v),d?.(v?.value)},[d,h]);return u.createElement(s.qb,{loadOptions:o,onChange:a,placeholder:c,noOptionsMessage:g,value:y,defaultOptions:!0,...p})}},79658:(G,O,e)=>{"use strict";e.d(O,{Es:()=>v});var t=e(52423),n=e(99151),u=e.n(n),s=e(68404),i=e(22350),m=e(25318),f=e(68183),o=e(29516),l=e(25474),r=e(46739),d=e(97063),c=e(35287),g=e(82002),p=e(50946),y=e(81168);const h="+ Add new",a="-10";function v(x){const{dashboardId:M,allowEmpty:S,onChange:D,filter:T,enableCreateNew:R,inputId:L,onClear:w,enableReset:A,initialFolderUid:N,initialTitle:W="",permissionLevel:I=y.PermissionLevelString.Edit,rootName:F="General",showRoot:V=!0,skipInitialLoad:b,accessControlMetadata:X,customAdd:k,folderWarning:H}=x,[Y,ee]=(0,s.useState)(null),[ue,q]=(0,s.useState)(!1),[ge,De]=(0,s.useState)(""),[fe,me]=(0,s.useState)(Y?.title??""),ce=(0,o.wW)(P),ie=typeof w=="function",re=(0,s.useCallback)(async Be=>{const Ve=await(0,p.ZL)(Be,I,X),We=C(Ve,T);return(g.Vt.hasAccess(y.AccessControlAction.DashboardsWrite,g.Vt.isEditor)||g.Vt.hasAccess(y.AccessControlAction.DashboardsCreate,g.Vt.isEditor))&&F?.toLowerCase().startsWith(Be.toLowerCase())&&V&&We.unshift({label:F,value:""}),A&&Be===""&&W!==""&&!We.find(qe=>qe.label===W)&&We.unshift({label:W,value:N}),R&&Boolean(k)?[...We,{value:a,label:h,title:Be}]:We},[A,N,W,I,F,V,X,T,R,k]),Ee=(0,s.useMemo)(()=>u()(re,300,{leading:!0}),[re]),J=async()=>{const Be={label:W,value:void 0},Ve={label:F,value:""},$e=await re("");let We=null;N!=null?We=$e.find(Ke=>Ke.value===N)||null:A&&W?We=Be:N&&(We=$e.find(Ke=>Ke.id===N)||null),!We&&!S&&(g.Vt.isEditor?We=Ve:!!M?We=Be:We=$e.length>0?$e[0]:Be),!ue&&ee(We)};(0,s.useEffect)(()=>{Y&&Y.value!==N&&!ue&&Y.value&&Y.label&&D({uid:Y.value,title:Y.label})},[Y,N]),(0,i.Z)(async()=>{if(b){const Be=await E({getFolder:p.Pb,folderUid:N,folderName:W});ee(Be)}await J()},[b,N,W]),(0,s.useEffect)(()=>{Y&&Y.id===a&&q(!0)},[Y]);const te=(0,s.useCallback)((Be,Ve)=>{if(Be?.value===a)ee({id:a,title:ge}),me(ge);else{if(Be||(Be={value:"",label:F}),Ve.action==="clear"&&w){w();return}ee(Be),D({uid:Be.value,title:Be.label})}},[D,w,F,ge]),ne=(0,s.useCallback)(async Be=>{if(H?.warningCondition(Be))return!1;const Ve=await(0,p.L6)({title:Be});let $e={value:"",label:"Not created"};return Ve.uid?(d.Z.emit(m.SI.alertSuccess,["Folder Created","OK"]),$e={value:Ve.uid,label:Ve.title},ee(Ve),te($e,{action:"create-option",option:$e})):d.Z.emit(m.SI.alertError,["Folder could not be created"]),$e},[H,te]),j=(0,s.useCallback)(Be=>{const Ve=Boolean(k?.disallowValues);if(Be.key==="Enter"&&Ve&&!k?.isAllowedValue(fe)){Be.preventDefault();return}switch(Be.key){case"Enter":{ne(Y?.title),q(!1);break}case"Escape":ee({value:"",label:F}),q(!1)}},[k?.disallowValues,k?.isAllowedValue,fe,ne,Y?.title,F]),be=Be=>{const Ve=Be.currentTarget.value;me(Ve),ee({id:void 0,title:Ve})},Le=()=>{ee({value:"",label:F}),q(!1)},Qe=(Be,{action:Ve})=>{Ve==="input-change"&&De($e=>Be),Ve==="menu-close"&&De($e=>Be)},Ye=()=>H?.warningCondition(fe)?s.createElement(H.warningComponent,null):null,de=()=>H?.warningCondition(ge)?s.createElement(H.warningComponent,null):null;return ue?s.createElement(s.Fragment,null,s.createElement(Ye,null),s.createElement("div",{className:ce.newFolder},"Press enter to create the new folder."),s.createElement(l.I,{"aria-label":"aria-label",width:30,autoFocus:!0,value:fe,onChange:be,onKeyDown:j,placeholder:"Press enter to confirm new folder.",onBlur:Le})):s.createElement("div",{"data-testid":f.wl.components.FolderPicker.containerV2},s.createElement(de,null),s.createElement(r.gY,{inputId:L,"aria-label":f.wl.components.FolderPicker.input,loadingMessage:(0,c.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:Y,inputValue:ge,onInputChange:Qe,value:Y,allowCustomValue:R&&!Boolean(k),loadOptions:Ee,onChange:te,onCreateOption:ne,isClearable:ie}))}function C(x,M){return(M?M(x):x).map(D=>({label:D.title,value:D.uid}))}async function E({folderName:x,folderUid:M,getFolder:S}){if(M==null)throw new Error("folderUid is not found.");return x?{label:x,value:M}:{label:(await S(M)).title,value:M}}const P=x=>({newFolder:t.css`
    color: ${x.colors.warning.main};
    font-size: ${x.typography.bodySmall.fontSize};
    padding-bottom: ${x.spacing(1)};
  `})},79979:(G,O,e)=>{"use strict";e.d(O,{P:()=>y});var t=e(68404),n=e(22350),u=e(46739),s=e(81697),i=e(10216),m=e(82897),f=e(82002),o=e(13019),l=e(58379),r=e(1037),d=e(63053),c=e(29930);class g{getRecentDashboards(a){return this.queryForRecentDashboards().then(v=>{v.length>0&&(a.recent={title:"Recent",icon:"clock-nine",score:-1,expanded:l.Z.getBool(`${i.qi}.recent`,!0),items:v,type:r.o.DashFolder})})}queryForRecentDashboards(){return new Promise(a=>{o.Z.getDashboardOpened().then(v=>{const C=(0,m.take)(v,30);if(C.length===0)return a([]);c.ae.search({dashboardUIDs:C}).then(E=>a(C.map(P=>E.find(x=>x.uid===P)).filter(P=>P&&!P.isStarred)))})})}getStarred(a){return f.Vt.isSignedIn?c.ae.search({starred:!0,limit:30}).then(v=>{v.length>0&&(a.starred={title:"Starred",icon:"star",score:-2,expanded:l.Z.getBool(`${i.qi}.starred`,!0),items:v,type:r.o.DashFolder})}):Promise.resolve()}search(a){const v={},C=[],E=(0,m.clone)(a),P=(0,d.L)(a)||E.folderIds?.length>0;return E.folderIds=E.folderIds||[],E.layout===r.A.List?c.ae.search({...E,type:r.o.DashDB}).then(x=>x.length?[{title:"",items:x}]:[]):(P||(E.folderIds=[0]),!a.skipRecent&&!P&&C.push(this.getRecentDashboards(v)),!a.skipStarred&&!P&&C.push(this.getStarred(v)),C.push(c.ae.search(E).then(x=>this.handleSearchResult(v,x))),Promise.all(C).then(()=>(0,m.sortBy)((0,m.values)(v),"score")))}handleSearchResult(a,v){if(v.length===0)return a;for(const C of v)C.type==="dash-folder"&&(a[C.uid]={uid:C.uid,title:C.title,expanded:!1,items:[],url:C.url,icon:"folder",score:(0,m.keys)(a).length,type:C.type});for(const C of v){if(C.type==="dash-folder")continue;let E=a[C.folderUid||0];E||(C.folderUid?E={uid:C.folderUid,title:C.folderTitle,url:C.folderUrl,items:[],icon:"folder-open",score:(0,m.keys)(a).length,type:r.o.DashFolder}:E={uid:"",title:"General",items:[],icon:"folder-open",score:(0,m.keys)(a).length,type:r.o.DashFolder},a[C.folderUid||0]=E),E.expanded=!0,E.items&&E.items.push(C)}}getDashboardTags(){return c.ae.get("/api/dashboards/tags")}getSortOptions(){return c.ae.get("/api/search/sorting")}}const p=()=>new g().getSortOptions().then(({sortOptions:h})=>h.map(a=>({label:a.displayName,value:a.name})));function y({onChange:h,value:a,placeholder:v,filter:C,getSortOptions:E,isClearable:P}){const x=(0,n.Z)(async()=>{const S=await(E??p)();return C?S.filter(D=>C.includes(D.value)):S},[E,C]);if(x.loading)return null;const M=Boolean(a?.includes("desc")||a?.startsWith("-"));return t.createElement(u.Ph,{key:a,width:28,onChange:h,value:x.value?.find(S=>S.value===a)??null,options:x.value,"aria-label":"Sort",placeholder:v??`Sort (Default ${i.yw.label})`,prefix:t.createElement(s.J,{name:M?"sort-amount-down":"sort-amount-up"}),isClearable:P})}},94080:(G,O,e)=>{"use strict";e.d(O,{c:()=>m});var t=e(82897),n=e.n(t),u=e(68404),s=e(47214),i=e(46739);class m extends u.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/teams/search?perpage=100&page=1&query=${o}`).then(l=>{const r=l.teams.map(d=>({value:d,label:d.name,imgUrl:d.avatarUrl}));return this.setState({isLoading:!1}),r})}render(){const{onSelected:o,className:l}=this.props,{isLoading:r}=this.state;return u.createElement("div",{className:"user-picker","data-testid":"teamPicker"},u.createElement(i.qb,{isLoading:r,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:o,className:l,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}},28038:(G,O,e)=>{"use strict";e.d(O,{f:()=>m});var t=e(82897),n=e.n(t),u=e(68404),s=e(47214),i=e(46739);class m extends u.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/org/users/lookup?query=${o}&limit=100`).then(l=>l.map(r=>({id:r.userId,value:r.userId,label:r.login,imgUrl:r.avatarUrl,login:r.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:o,onSelected:l,inputId:r}=this.props,{isLoading:d}=this.state;return u.createElement("div",{className:"user-picker","data-testid":"userPicker"},u.createElement(i.qb,{isClearable:!0,className:o,inputId:r,isLoading:d,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:l,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}},21731:(G,O,e)=>{"use strict";e.d(O,{e:()=>s});var t=e(68404),n=e(74099),u=e(81697);class s extends t.Component{constructor(m){super(m)}render(){const{label:m,removeIcon:f,count:o,onClick:l}=this.props,{color:r}=(0,n.Bx)(m),d={backgroundColor:r},c=o!==0&&t.createElement("span",{className:"tag-count-label"},`(${o})`);return t.createElement("span",{className:"label label-tag",style:d},f&&t.createElement(u.J,{onClick:l,name:"times"}),m," ",c)}}},24357:(G,O,e)=>{"use strict";e.d(O,{D:()=>c});var t=e(52423),n=e(68404),u=e(8887),s=e(29076),i=e(29516),m=e(46739),f=e(81697),o=e(21731);const l=({data:p,className:y,label:h,isFocused:a,innerProps:v})=>{const C=(0,i.wW)(r);return n.createElement("div",{className:(0,t.cx)(C.option,a&&C.optionFocused),"aria-label":"Tag option",...v},n.createElement("div",{className:`tag-filter-option ${y||""}`},typeof h=="string"?n.createElement(o.e,{label:h,removeIcon:!1,count:p.count??0}):h))},r=p=>({option:t.css`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${p.colors.background.secondary};
      }
    `,optionFocused:t.css`
      background: ${p.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),d=(p,y)=>RegExp((0,s.GE)(y),"i").test(p.value),c=({allowCustomValue:p=!1,formatCreateLabel:y,hideValues:h,inputId:a,isClearable:v,onChange:C,placeholder:E="Filter by tag",tagOptions:P,tags:x,width:M})=>{const S=(0,i.wW)(g),D=x.map(H=>({value:H,label:H,count:0})),[T,R]=(0,n.useState)(D),[L,w]=(0,n.useState)(!1),[A,N]=(0,n.useState)(x),[W,I]=(0,n.useState)(D),F=(0,n.useMemo)(()=>x.join(),[x]),V=(0,n.useCallback)(async()=>(await P()).map(Y=>x.includes(Y.term)?{value:Y.term,label:Y.term,count:0}:{value:Y.term,label:Y.term,count:Y.count}),[P,x]),b=(0,n.useCallback)(async()=>{w(!0);const H=await V();p&&W.forEach(Y=>H.push(Y)),R(H),w(!1)},[p,W,V]);(0,n.useEffect)(()=>{x.length>0&&T.length===0&&b()},[b,T.length,x.length]),(0,n.useEffect)(()=>{x!==A&&(N(x),b())},[b,A,x]);const X=H=>{H.forEach(Y=>Y.count=0),C((H||[]).map(Y=>Y.value)),p&&I(H.filter(Y=>!x.includes(Y)))},k={key:F,onFocus:b,isLoading:L,options:T,allowCreateWhileLoading:!0,allowCustomValue:p,formatCreateLabel:y,defaultOptions:!0,filterOption:d,getOptionLabel:H=>H.label,getOptionValue:H=>H.value,inputId:a,isMulti:!0,loadingMessage:"Loading...",noOptionsMessage:"No tags found",onChange:X,placeholder:E,value:D,width:M,components:{Option:l,MultiValueLabel:()=>null,MultiValueRemove(H){const{data:Y}=H;return n.createElement(u.c.MultiValueRemove,{...H},n.createElement(o.e,{key:Y.label,label:Y.label,removeIcon:!0,count:Y.count}))},MultiValueContainer:h?()=>null:u.c.MultiValueContainer}};return n.createElement("div",{className:S.tagFilter},v&&x.length>0&&n.createElement("button",{className:S.clear,onClick:()=>X([])},"Clear tags"),n.createElement(m.NU,{...k,prefix:n.createElement(f.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};c.displayName="TagFilter";const g=p=>({tagFilter:t.css`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:t.css`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${p.colors.text.secondary};

    &:hover {
      color: ${p.colors.text.primary};
    }
  `})},32873:(G,O,e)=>{"use strict";e.d(O,{a:()=>l});var t=e(82897),n=e.n(t),u=e(68404),s=e(33180),i=e(46519),m=e(85320),f=e(59796);const o="grafana.dashboard.timepicker.history",l=y=>u.createElement(f.G,{storageKey:o,defaultValue:[]},(h,a)=>{const v=d(h),C=r(v,y.timeZone);return u.createElement(m.Xc,{...y,history:C,onChange:E=>{c(E,v,a),y.onChange(E)}})});function r(y,h){return y.map(a=>s.convertRawToRange(a,h))}function d(y){return y.map(h=>{const a=typeof h.from=="string"?h.from:h.from.toISOString(),v=typeof h.to=="string"?h.to:h.to.toISOString();return{from:a,to:v}})}function c(y,h,a){if(!g(y))return;const v={from:typeof y.raw.from=="string"?y.raw.from:y.raw.from.toISOString(),to:typeof y.raw.to=="string"?y.raw.to:y.raw.to.toISOString()},C=p([v,...h]);a(C)}function g(y){return(0,i.v9)(y.raw.from)||(0,i.v9)(y.raw.to)}function p(y){return(0,t.uniqBy)(y,h=>h.from+h.to).slice(0,4)}},97551:(G,O,e)=>{"use strict";e.d(O,{KN:()=>N,iK:()=>ge,Y:()=>De,$m:()=>ue,Ur:()=>Y,Nj:()=>F,AR:()=>H,SA:()=>ee});var t=e(66926),n=e(89890),u=e(20112),s=e(29431),i=e(55294),m=e(14582),f=e(24177),o=e(59309),l=e(58230),r=e(19695),d=e(98234),c=e(40538),g=e(17920),p=e(67043),y=e(41917),h=e(70994),a=e(31451),v=e(75974),C=e(64724),E=e(28586),P=e(60892);const{round:x,min:M,ceil:S}=Math,D=2;let T=6;const R=E.Gj;function L(fe,me,ce,ie,re){(0,E.Qm)(ce,fe,R,me,(Ee,J,te)=>{let ne=ie*J,j=ie*te;re(Ee,ne,j)})}function w(fe){const{mode:me,numSeries:ce,isDiscrete:ie,rowHeight:re=0,colWidth:Ee=0,showValue:J,mergeValues:te=!1,theme:ne,label:j,formatValue:be,alignValue:Le="left",getTimeRange:Qe,getValueColor:Ye,getFieldConfig:de,onHover:Be,onLeave:Ve}=fe;let $e;const We=Array(ce).fill(null).map(()=>{let Ae=document.createElement("div");return Ae.classList.add("bar-mark"),Ae.style.position="absolute",Ae.style.background="rgba(255,255,255,0.2)",Ae});let Ke;const qe=Ae=>{Ke=Array(ce).fill(null).map(we=>Array(Ae).fill(null))},Xe=`500 ${Math.round(12*devicePixelRatio)}px ${ne.typography.fontFamily}`,at=Array(ce).fill(null),Ze=[Ee,1/0],lt=1-Ze[0],nt=(Ze[1]??1/0)*v.Z.pxRatio,_e=new Map,ut=new Map;function rt(Ae){_e.forEach((we,ke)=>{Ae.fillStyle=ke,Ae.fill(we)}),ut.forEach((we,ke)=>{Ae.strokeStyle=ke,Ae.stroke(we)}),_e.clear(),ut.clear()}function je(Ae,we,ke,st,Et,Pt,gt,Ct,Ot,Ft,jt,En,xn){if(gt<1)return;const Cn=Ye(Ft+1,En),bn=de(Ft),Tn=A(bn,Cn);if(Ke[Ft][jt]={x:x(Et-ke),y:x(Pt-st),w:gt,h:Ct,sidx:Ft+1,didx:jt,fillColor:Tn},xn){let Zn=Tn,Bn=_e.get(Zn);if(Bn==null&&_e.set(Zn,Bn=new Path2D),we(Bn,Et,Pt,gt,Ct),Ot){let Sn=Cn,wn=ut.get(Sn);wn==null&&ut.set(Sn,wn=new Path2D),we(wn,Et+Ot/2,Pt+Ot/2,gt-Ot,Ct-Ot)}}else Ae.beginPath(),we(Ae,Et,Pt,gt,Ct),Ae.fillStyle=Tn,Ae.fill(),Ot&&(Ae.beginPath(),we(Ae,Et+Ot/2,Pt+Ot/2,gt-Ot,Ct-Ot),Ae.strokeStyle=Cn,Ae.lineWidth=Ot,Ae.stroke())}const dt=(Ae,we,ke,st)=>(v.Z.orient(Ae,we,(Et,Pt,gt,Ct,Ot,Ft,jt,En,xn,Cn,bn,Tn,Zn,Bn)=>{let Sn=x((Et.width||0)*v.Z.pxRatio),wn=ie(we);Ae.ctx.save(),Bn(Ae.ctx,Ae.bbox.left,Ae.bbox.top,Ae.bbox.width,Ae.bbox.height),Ae.ctx.clip(),L(re,we-1,ce,bn,($n,Xn,ba)=>{if(me===N.Changes)for(let hn=0;hn<gt.length;hn++){let Kn=gt[hn];if(Kn!=null){let ta=Math.round(Ft(Pt[hn],Ct,Cn,En)),La=hn;for(;++La<gt.length&&(gt[La]===void 0||te&&gt[La]===Kn););let oa=La===gt.length?En+Cn+Sn:Math.round(Ft(Pt[La],Ct,Cn,En));je(Ae.ctx,Bn,En,xn,ta,x(xn+Xn),oa-ta,x(ba),Sn,$n,hn,Kn,wn),hn=La-1}}else if(me===N.Samples){let hn=Ft(Pt[1],Ct,Cn,En)-Ft(Pt[0],Ct,Cn,En),Kn=hn*lt,ta=x(M(nt,hn-Kn)-Sn),La=ta/2;for(let oa=ke;oa<=st;oa++)if(gt[oa]!=null){let ha=Ft(Pt[oa],Ct,Cn,En);je(Ae.ctx,Bn,En,xn,x(ha-La),x(xn+Xn),ta,x(ba),Sn,$n,oa,gt[oa],wn)}}}),wn&&(Ae.ctx.lineWidth=Sn,rt(Ae.ctx)),Ae.ctx.restore()}),null),oe=be==null||J===c.Jp.Never?!1:(Ae,we,ke,st)=>(Ae.ctx.save(),Ae.ctx.rect(Ae.bbox.left,Ae.bbox.top,Ae.bbox.width,Ae.bbox.height),Ae.ctx.clip(),Ae.ctx.font=Xe,Ae.ctx.textAlign=me===N.Changes?Le:"center",Ae.ctx.textBaseline="middle",v.Z.orient(Ae,we,(Et,Pt,gt,Ct,Ot,Ft,jt,En,xn,Cn,bn)=>{let Tn=x((Et.width||0)*v.Z.pxRatio),Zn=x(xn+Ne[we-1]);for(let Bn=0;Bn<gt.length;Bn++)if(gt[Bn]!=null){const Sn=Ke[we-1][Bn];if(!Sn||Sn.x>=Cn)continue;let wn=Math.floor(Sn?.w/T);if(J===c.Jp.Auto&&wn<2)continue;let $n=be(we,gt[Bn]),Xn=x(Sn.x+En+Sn.w/2);me===N.Changes&&(Le==="left"?Xn=x(Sn.x+En+Tn+D):Le==="right"&&(Xn=x(Sn.x+En+Sn.w-Tn-D))),Ae.ctx.fillStyle=ne.colors.getContrastText(Sn.fillColor,3),Ae.ctx.fillText($n.slice(0,wn),Xn,Zn)}}),Ae.ctx.restore(),!1),Se=Ae=>{let we=Ae.over,ke="";for(let st=32;st<=126;st++)ke+=String.fromCharCode(st);T=Math.ceil(Ae.ctx.measureText(ke).width/ke.length*v.Z.pxRatio),T+=2.5,we.style.overflow="hidden",We.forEach(st=>{we.appendChild(st)})},Re=Ae=>{$e=$e||new P.lW(0,0,Ae.bbox.width,Ae.bbox.height),$e.clear(),qe(Ae.data[0].length),Ae.series.forEach(we=>{we._paths=null})};function ze(Ae,we){let ke=We[Ae],st=v.Z.pxRatio;we?(ke.style.display="",ke.style.left=x(we.x/st)+"px",ke.style.top=x(we.y/st)+"px",ke.style.width=x(we.w/st)+"px",ke.style.height=x(we.h/st)+"px"):ke.style.display="none",at[Ae]=we}let ve;function Te(Ae,we){let ke;for(let st=0;st<ce;st++){let Et;if(Ae>=0){let Pt=Ne[st];$e.get(Ae,Pt,1,1,gt=>{(0,P.Pn)(Ae,Pt,gt.x,gt.y,gt.x+gt.w,gt.y+gt.h)&&(Et=gt,Math.abs(we-Pt)<=gt.h/2&&(ke=gt))})}Et?Et!==at[st]&&ze(st,Et):at[st]!=null&&ze(st,null)}ke?ke!==ve&&(ve=ke,Be(ke.sidx,ke.didx,ke)):ve&&(ve=void 0,Ve())}function he(Ae,we){let ke;$e.get(Ae,we,1,1,st=>{(0,P.Pn)(Ae,we,st.x,st.y,st.x+st.w,st.y+st.h)&&(ke=st)}),ke?(ze(0,ke),ke!==ve&&(ve=ke,Be(ke.sidx,ke.didx,ke))):ve&&(ze(0,null),ve=void 0,Ve())}const pe=me===N.Changes?Te:he,ye=Ae=>{let we=x(Ae.cursor.left*v.Z.pxRatio),ke=x(Ae.cursor.top*v.Z.pxRatio);if(!$e.o.length&&$e.q==null)for(const st of Ke)for(const Et of st)Et&&$e.add(Et);pe(we,ke)},Oe={y:!1,x:me===N.Changes,points:{show:!1}},Ne=Array(ce).fill(0),Me=Array(ce).fill(0);return{cursor:Oe,xSplits:me===N.Samples?(Ae,we,ke,st,Et,Pt)=>{let gt=[],Ct=Ae.data[0][1]-Ae.data[0][0],Ot=S(Et/Ct);for(let Ft=0;Ft<Ae.data[0].length;Ft+=Ot){let jt=Ae.data[0][Ft];jt>=ke&&jt<=st&&gt.push(jt)}return gt}:null,xRange:Ae=>{const we=Qe();let ke=we.from.valueOf(),st=we.to.valueOf();if(me===N.Samples){let Pt=(Ae.data[0][1]-Ae.data[0][0])/2;ke<=Ae.data[0][0]&&(ke=Ae.data[0][0]-Pt);let gt=Ae.data[0].length-1;st>=Ae.data[0][gt]&&(st=Ae.data[0][gt]+Pt)}return[ke,st]},ySplits:Ae=>(L(re,null,ce,Ae.bbox.height,(we,ke,st)=>{Ne[we]=x(ke+st/2),Me[we]=Ae.posToVal(Ne[we]/v.Z.pxRatio,p.j)}),Me),yValues:(Ae,we)=>we.map((ke,st)=>j(st+1)),yRange:[0,1],drawPaths:dt,drawPoints:oe,init:Se,drawClear:Re,setCursor:ye}}function A(fe,me){if(me[0]==="#"&&me.length===9)return me;const ce=(fe.fillOpacity??100)/100;return(0,C.alpha)(me,ce)}var N=(fe=>(fe.Changes="changes",fe.Samples="samples",fe))(N||{});const W={lineWidth:0,fillOpacity:80};function I(fe){return fe.ctrlKey||fe.metaKey||fe.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const F=({frame:fe,theme:me,timeZones:ce,getTimeRange:ie,mode:re,eventBus:Ee,sync:J,rowHeight:te,colWidth:ne,showValue:j,alignValue:be,mergeValues:Le,getValueColor:Qe})=>{const Ye=new g.U(ce[0]),de="time",Be="x",Ve=_e=>{const ut=_e.config?.color?.mode;return!(ut&&_e.display&&ut.startsWith("continuous-"))},$e=(_e,ut)=>{const rt=fe.fields[_e];return rt.state?.origin?.fieldIndex!==void 0&&rt.state?.origin?.frameIndex!==void 0&&Qe?Qe(rt.state?.origin?.frameIndex,rt.state?.origin?.fieldIndex,ut):t.R},We={mode:re,numSeries:fe.fields.length-1,isDiscrete:_e=>Ve(fe.fields[_e]),mergeValues:Le,rowHeight:te,colWidth:ne,showValue:j,alignValue:be,theme:me,label:_e=>(0,n.C)(fe.fields[_e],fe),getFieldConfig:_e=>fe.fields[_e].config.custom,getValueColor:$e,getTimeRange:ie,formatValue:(_e,ut)=>(0,u.zc)(fe.fields[_e].display(ut)),onHover:(_e,ut)=>{qe=_e,Xe=ut,Ke=!0},onLeave:()=>{qe=null,Xe=null,Ke=!0}};let Ke=!1,qe=null,Xe=null;const at=w(We),Ze={point:{[de]:null,[p.j]:null},data:fe};Ye.addHook("init",at.init),Ye.addHook("drawClear",at.drawClear),Ye.addHook("setCursor",at.setCursor);const lt=(_e,ut,rt)=>{Ke&&(qe!=null&&(_e(qe),ut(Xe)),Ke=!1),rt(qe==null)};Ye.setTooltipInterpolator(lt),Ye.setPrepData(_e=>(0,a.Bj)(_e[0],(0,a.i7)(_e[0]))),Ye.setCursor(at.cursor),Ye.addScale({scaleKey:Be,isTime:!0,orientation:c.wN.Horizontal,direction:c.bQ.Right,range:at.xRange}),Ye.addScale({scaleKey:p.j,isTime:!1,orientation:c.wN.Vertical,direction:c.bQ.Up,range:at.yRange}),Ye.addAxis({scaleKey:Be,isTime:!0,splits:at.xSplits,placement:c.LB.Bottom,timeZone:ce[0],theme:me,grid:{show:!0}}),Ye.addAxis({scaleKey:p.j,isTime:!1,placement:c.LB.Left,splits:at.ySplits,values:at.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:me});let nt=0;for(let _e=0;_e<fe.fields.length;_e++){if(_e===0)continue;const ut=fe.fields[_e],rt=ut.config,je={...W,...rt.custom};ut.state.seriesIndex=nt++,Ye.addSeries({scaleKey:p.j,pathBuilder:at.drawPaths,pointsBuilder:at.drawPoints,lineWidth:je.lineWidth,fillOpacity:je.fillOpacity,theme:me,show:!je.hideFrom?.viz,thresholds:rt.thresholds,dataFrameFieldIndex:ut.state?.origin})}if(J&&J()!==s.m.Off){let _e={};_e.sync={key:"__global_",filters:{pub:(ut,rt,je,dt,oe,Se,Re)=>J&&J()===s.m.Off?!1:(Ze.rowIndex=Re,je<0&&dt<0?(Ze.point[de]=null,Ze.point[p.j]=null,Ee.publish(new i.xH)):(Ze.point[de]=rt.posToVal(je,Be),Ze.point.panelRelY=dt>0?dt/Se:1,Ze.down=void 0,Ee.publish(new i.es(Ze))),!0)},scales:[Be,null]},Ye.setSync(),Ye.setCursor(_e)}return Ye};function V(fe){const me=new Map;for(let ce=0;ce<fe.fields.length;ce++)me.set(getFieldDisplayName(fe.fields[ce],fe),ce);return me}function b(fe){let me=fe[0],ce;for(let ie=1;ie<fe.length;ie++){let re=fe[ie];re===null?me=null:re===me?(ce||(ce=[...fe]),ce[ie]=void 0):re!=null&&(me=re)}return ce}function X(fe){let me=fe.config.custom?.spanNulls;return me?me===!0?1/0:me:-1}function k(fe,me){const ce=fe.config.thresholds;if(fe.type!==m.fS.number||!ce||!ce.steps.length)return;const ie=Y(fe.config,me);if(ie.length!==ce.steps.length)return;const re=new Map,Ee=new Map;for(let ne=0;ne<ie.length;ne++)re.set(ce.steps[ne],ie[ne].label),Ee.set(ie[ne].label,ie[ne].color);let J=fe.values.toArray();const te=new Array(fe.values.length);if(ce.mode===f.H.Percentage){const{min:ne,max:j}=(0,o.xD)(fe),be=j-ne;J=J.map(Le=>Le==null?Le:(Le-ne)/be*100)}for(let ne=0;ne<te.length;ne++){const j=J[ne];j==null?te[ne]=j:te[ne]=re.get((0,l.m1)(j,ce.steps))}return{...fe,config:{...fe.config,custom:{...fe.config.custom,spanNulls:X(fe)}},type:m.fS.string,values:new r.G(te),display:ne=>({text:ne,color:Ee.get(ne),numeric:NaN})}}function H(fe,me,ce,ie){if(!fe?.length)return{warn:"No data in response"};let re=!1;const Ee=[];for(let J of fe){let te=!1,ne=!1,j=(0,d.Y3)(J,J.fields.findIndex(Qe=>Qe.type===m.fS.time)),be=(0,y.w)({frame:j,refFieldPseudoMin:ce.from.valueOf(),refFieldPseudoMax:ce.to.valueOf()});be!==J&&(ne=!0);const Le=[];for(let Qe of(0,h.I)(be).fields)switch(Qe.type){case m.fS.time:te=!0,re=!0,Le.push(Qe);break;case m.fS.number:if(me&&Qe.config.color?.mode===t.S.Thresholds){const Ye=k(Qe,ie);if(Ye){Le.push(Ye),ne=!0;continue}}case m.fS.boolean:case m.fS.string:Qe={...Qe,config:{...Qe.config,custom:{...Qe.config.custom,spanNulls:X(Qe)}}},Le.push(Qe);break;default:ne=!0}te&&Le.length>1&&(re=!0,ne?Ee.push({...j,fields:Le}):Ee.push(j))}return re?Ee.length?{frames:Ee}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function Y(fe,me){const ce=[],ie=fe.thresholds;if(!ie||!ie.steps.length)return ce;const re=ie.steps,Ee=(0,u.Cf)(ie.mode===f.H.Percentage?"percent":fe.unit??""),J=te=>(0,u.zc)(Ee(te));for(let te=0;te<re.length;te++){let ne=re[te],j=ne.value,be="",Le="";j===-1/0&&te<re.length-1?(j=re[te+1].value,be="< "):Le="+",ce.push({label:`${be}${J(j)}${Le}`,color:me.visualization.getColorByName(ne.color),yAxis:1})}return ce}function ee(fe,me,ce){if(!(!fe||me.showLegend===!1))return ue(q(fe),ce)}function ue(fe,me){if(!fe.length)return;const ce=[],ie=fe[0].config,re=ie.color?.mode??t.S.Fixed;if(re===t.S.Thresholds)return Y(ie,me);if(re.startsWith("continuous"))return;let Ee=new Map;return fe.forEach(J=>{J.values.toArray().forEach(te=>{let ne=J.display(te);ne.color&&Ee.set(ne.text,ne.color)})}),Ee.forEach((J,te)=>{te.length>0&&ce.push({label:te,color:me.visualization.getColorByName(J??t.R),yAxis:1})}),ce}function q(fe){const me=[];for(const ce of fe)for(const ie of ce.fields)ie.type!==m.fS.time&&me.push(ie);return me}function ge(fe,me){let ce,ie=me+1;if(ie>=fe.values.length)return null;const re=fe.values.get(me);for(;ce===void 0;){if(ie>=fe.values.length)return null;const Ee=fe.values.get(ie);Ee===void 0||Ee===re?ie++:ce=ie}return ce}function De(fe){if(fe<0||Number.isNaN(fe))return"";let me,ce,ie,re,Ee,J,te,ne;return te=Math.floor(fe/1e3),J=Math.floor(te/60),te=te%60,Ee=Math.floor(J/60),J=J%60,re=Math.floor(Ee/24),Ee=Ee%24,me=Math.floor(re/365),me>0&&(re=re%365),ce=Math.floor(re/30),ce>0&&(re=re%30),ie=Math.floor(re/7),ie>0&&(re=re%7),ne=Math.round(fe%1e3*1e3)/1e3,(me>0?me+"y "+(ce>0?ce+"mo ":"")+(ie>0?ie+"w ":"")+(re>0?re+"d ":""):ce>0?ce+"mo "+(ie>0?ie+"w ":"")+(re>0?re+"d ":""):ie>0?ie+"w "+(re>0?re+"d ":""):re>0?re+"d "+(Ee>0?Ee+"h ":""):Ee>0?Ee+"h "+(J>0?J+"m ":""):J>0?J+"m "+(te>0?te+"s ":""):te>0?te+"s "+(ne>0?ne+"ms ":""):ne>0?ne+"ms ":"0").trim()}},33045:(G,O,e)=>{"use strict";e.d(O,{a:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=e(74448),i=e(91605),m=e(81697);const f=({values:l,onChange:r,id:d})=>{const c=(0,u.wW)(o);return n.createElement("div",{className:c.wrapper},l.length?l.map((g,p)=>n.createElement("div",{className:c.pair,key:p},n.createElement(s.X,{id:`${d}-key-${p}`,placeholder:"Tag name",value:g.key,onChange:y=>{r(l.map((h,a)=>(a===p&&(h.key=String(y)),h)))}}),n.createElement(i.W,{"aria-label":"equals",className:c.operator},"as"),n.createElement(s.X,{id:`${d}-value-${p}`,placeholder:"New name (optional)",value:g.value||"",onChange:y=>{r(l.map((h,a)=>(a===p&&(h.value=String(y)),h)))}}),n.createElement("button",{onClick:()=>r([...l.slice(0,p),...l.slice(p+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button"},n.createElement(m.J,{name:"times"})),p===l.length-1?n.createElement("button",{onClick:()=>r([...l,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(m.J,{name:"plus"})):null)):n.createElement("button",{onClick:()=>r([...l,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(m.J,{name:"plus"})))},o=l=>({wrapper:t.css`
    display: flex;
    flex-direction: column;
    gap: ${l.spacing(.5)} 0;
  `,pair:t.css`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:t.css`
    color: ${l.v1.palette.orange};
    width: auto;
  `})},83437:(G,O,e)=>{"use strict";e.d(O,{Z:()=>d,p:()=>r});var t=e(52423),n=e(68404),u=e(2248),s=e(29516),i=e(9274),m=e(71210),f=e(44727),o=e(25474),l=e(33045);function r(y){if(y?.tracesToLogsV2)return y.tracesToLogsV2;if(!y?.tracesToLogs)return;const h={customQuery:!1};return h.datasourceUid=y.tracesToLogs.datasourceUid,h.tags=y.tracesToLogs.mapTagNamesEnabled?y.tracesToLogs.mappedTags:y.tracesToLogs.tags?.map(a=>({key:a})),h.filterByTraceID=y.tracesToLogs.filterByTraceID,h.filterBySpanID=y.tracesToLogs.filterBySpanID,h.spanStartTimeShift=y.tracesToLogs.spanStartTimeShift,h.spanEndTimeShift=y.tracesToLogs.spanEndTimeShift,h}function d({options:y,onOptionsChange:h}){const a=(0,s.wW)(p),v=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource"],C=(0,n.useMemo)(()=>r(y.jsonData)||{customQuery:!1},[y.jsonData]),{query:E="",tags:P,customQuery:x}=C,M=(0,n.useCallback)(S=>{h({...y,jsonData:{...y.jsonData,tracesToLogsV2:{...C,...S},tracesToLogs:void 0}})},[h,y,C]);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Trace to logs"),n.createElement("div",{className:a.infoText},"Trace to logs lets you navigate from a trace span to the selected data source's logs."),n.createElement(i.Z,null,n.createElement(m._,{tooltip:"The data source the trace is going to navigate to",label:"Data source",labelWidth:26},n.createElement(u.q,{inputId:"trace-to-logs-data-source-picker",filter:S=>v.includes(S.type),current:C.datasourceUid,noDefault:!0,width:40,onChange:S=>M({datasourceUid:S.uid})}))),n.createElement(g,{type:"start",value:C.spanStartTimeShift||"",onChange:S=>M({spanStartTimeShift:S})}),n.createElement(g,{type:"end",value:C.spanEndTimeShift||"",onChange:S=>M({spanEndTimeShift:S})}),n.createElement(i.Z,null,n.createElement(m._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26},n.createElement(l.a,{values:P??[],onChange:S=>M({tags:S})}))),n.createElement(c,{disabled:x,type:"trace",id:"filterByTraceID",value:Boolean(C.filterByTraceID),onChange:S=>M({filterByTraceID:S})}),n.createElement(c,{disabled:x,type:"span",id:"filterBySpanID",value:Boolean(C.filterBySpanID),onChange:S=>M({filterBySpanID:S})}),n.createElement(i.Z,null,n.createElement(m._,{tooltip:"Use custom query with possibility to interpolate variables from the trace or span.",label:"Use custom query",labelWidth:26},n.createElement(f.x,{id:"customQuerySwitch",value:x,onChange:S=>M({customQuery:S.currentTarget.checked})}))),x&&n.createElement(m._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword.",grow:!0},n.createElement(o.I,{label:"Query",type:"text",allowFullScreen:!0,value:E,onChange:S=>M({query:S.currentTarget.value})})))}function c(y){return n.createElement(i.Z,null,n.createElement(m._,{disabled:y.disabled,label:`Filter by ${y.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${y.type} ID`},n.createElement(f.x,{id:y.id,value:y.value,onChange:h=>y.onChange(h.currentTarget.checked)})))}function g(y){return n.createElement(i.Z,null,n.createElement(m._,{label:`Span ${y.type} time shift`,labelWidth:26,grow:!0,tooltip:`Shifts the ${y.type} time of the span. Default 0 Time units can be used here, for example: 5s, 1m, 3h`},n.createElement(o.I,{type:"text",placeholder:"1h",width:40,onChange:h=>y.onChange(h.currentTarget.value),value:y.value})))}const p=y=>({infoText:t.css`
    padding-bottom: ${y.spacing(2)};
    color: ${y.colors.text.secondary};
  `})},73194:(G,O,e)=>{"use strict";e.d(O,{Z:()=>i});var t=e(52423),n=e(68404),u=e(77274),s=e(29516);const i=({text:f="PRO",className:o,experimentId:l,eventVariant:r="",...d})=>{const c=(0,s.wW)(m);return(0,n.useEffect)(()=>{l&&(0,u.SZ)(l,"test",r)},[l,r]),n.createElement("span",{className:(0,t.cx)(c.badge,o),...d},f)},m=f=>({badge:t.css`
      margin-left: ${f.spacing(1.25)};
      border-radius: ${f.shape.borderRadius(5)};
      background-color: ${f.colors.success.main};
      padding: ${f.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${f.typography.fontWeightMedium};
      font-size: ${f.typography.pxToRem(10)};
    `})},41197:(G,O,e)=>{"use strict";e.d(O,{B:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=e(6694),i=e(43226);const m=l=>({Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","e"],description:"Go to Explore"},{keys:["g","p"],description:"Go to Profile"},{keys:["s","o"],description:"Open search"},{keys:["esc"],description:"Exit edit/setting views"},{keys:["h"],description:"Show all keyboard shortcuts"},{keys:[`${l}+k`],description:"Open command palette"},{keys:["c","t"],description:"Change theme"}],Dashboard:[{keys:[`${l}+s`],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:[`${l}+o`],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","\u2190"],description:"Move time range back"},{keys:["t","\u2192"],description:"Move time range forward"},{keys:["t","a"],description:"Make time range absolute/permanent"}]}),f=({onDismiss:l})=>{const r=(0,u.wW)(o),d=(0,n.useMemo)(()=>(0,i.vl)(),[]),c=(0,n.useMemo)(()=>m(d),[d]);return n.createElement(s.u,{title:"Shortcuts",isOpen:!0,onDismiss:l,onClickBackdrop:l},n.createElement("div",{className:r.categories},Object.entries(c).map(([g,p],y)=>n.createElement("div",{className:r.shortcutCategory,key:y},n.createElement("table",{className:r.shortcutTable},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{className:r.shortcutTableCategoryHeader,colSpan:2},g)),p.map((h,a)=>n.createElement("tr",{key:`${y}-${a}`},n.createElement("td",{className:r.shortcutTableKeys},h.keys.map((v,C)=>n.createElement("span",{className:r.shortcutTableKey,key:`${y}-${a}-${C}`},v))),n.createElement("td",{className:r.shortcutTableDescription},h.description)))))))))};function o(l){return{titleDescription:t.css`
      font-size: ${l.typography.bodySmall.fontSize};
      font-weight: ${l.typography.bodySmall.fontWeight};
      color: ${l.colors.text.disabled};
      padding-bottom: ${l.spacing(2)};
    `,categories:t.css`
      font-size: ${l.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:t.css`
      width: 50%;
      font-size: ${l.typography.bodySmall.fontSize};
    `,shortcutTable:t.css`
      margin-bottom: ${l.spacing(2)};
    `,shortcutTableCategoryHeader:t.css`
      font-weight: normal;
      font-size: ${l.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:t.css`
      text-align: left;
      color: ${l.colors.text.disabled};
      width: 99%;
      padding: ${l.spacing(1,2)};
    `,shortcutTableKeys:t.css`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${l.colors.text.primary};
    `,shortcutTableKey:t.css`
      display: inline-block;
      text-align: center;
      margin-right: ${l.spacing(.5)};
      padding: 3px 5px;
      font: 11px Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${l.colors.border.medium};
      border-radius: ${l.shape.borderRadius(3)};
      color: ${l.colors.text.primary};
      background-color: ${l.colors.background.secondary};
    `}}},47694:(G,O,e)=>{"use strict";e.d(O,{Oh:()=>f,ZP:()=>s,iE:()=>i,vc:()=>n.v});var t=e(24699),n=e(93003);let u=n.v;const s=u,i=()=>u,m=o=>{u={...u,...o}},f=Boolean(n.v.panels?.debug?.state===t.BV.alpha)},84952:(G,O,e)=>{"use strict";e.d(O,{AV:()=>o,FL:()=>g,K3:()=>t,OA:()=>s,QO:()=>r,b0:()=>f,cz:()=>u,gN:()=>c,hD:()=>n,kh:()=>m,yM:()=>i,zF:()=>l});const t=30,n=8,u=24,s="v",i="h",m=4,f=250,o=t*3,l="panel-copy",r=2,d=23763571993,c=40,g="VisualizationSelectPane.ListMode"},34177:(G,O,e)=>{"use strict";e.d(O,{h:()=>n,p:()=>u});var t=e(68404);const n=t.createContext(void 0);function u(){const s=(0,t.useContext)(n);if(!s)throw new Error("No GrafanaContext found");return s}},60499:(G,O,e)=>{"use strict";e.d(O,{AT:()=>l,ZR:()=>d,iG:()=>c,t_:()=>r});var t=e(68404),n=e(44288),u=e(82052),s=e(81168),i=e(659);const m={title:"",text:"",severity:s.AppNotificationSeverity.Success,icon:"check"},f={title:"",text:"",severity:s.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},o={title:"",text:"",severity:s.AppNotificationSeverity.Error,icon:"exclamation-triangle"},l=(g,p="",y)=>({...m,title:g,text:p,id:(0,n.Z)(),timestamp:Date.now(),showing:!0}),r=(g,p="",y,h)=>({...o,text:(0,u.i)(p),title:g,id:(0,n.Z)(),traceId:y,component:h,timestamp:Date.now(),showing:!0}),d=(g,p="",y)=>({...f,title:g,text:p,traceId:y,id:(0,n.Z)(),timestamp:Date.now(),showing:!0});function c(){const g=(0,s.useDispatch)();return(0,t.useMemo)(()=>({success:(p,y="")=>{g((0,i.$l)(l(p,y)))},warning:(p,y="",h)=>{g((0,i.$l)(d(p,y,h)))},error:(p,y="",h)=>{g((0,i.$l)(r(p,y,h)))}}),[g])}},77582:(G,O,e)=>{"use strict";e.d(O,{Vt:()=>u.Vt,Wz:()=>s.W,h$:()=>t.Z,rv:()=>n.r});var t=e(97063),n=e(29494),u=e(82002),s=e(4050)},66719:(G,O,e)=>{"use strict";e.d(O,{H6:()=>l,ZP:()=>r});var t=e(82897),n=e(58379),u=e(12151),s=e(77213);const i=C=>{const E=(0,s.F)().getInstanceSettings(C.datasourceName);return{id:C.ts.toString(),createdAt:C.ts,datasourceName:C.datasourceName,datasourceUid:E?.uid||"",starred:C.starred,comment:C.comment,queries:C.queries}},m=C=>{if(!(0,s.F)().getInstanceSettings({uid:C.datasourceUid}))throw new Error("Datasource not found.");return{ts:C.createdAt,datasourceName:C.datasourceName,starred:C.starred,comment:C.comment,queries:C.queries}};var f=e(69597);const o="grafana.explore.richHistory",l=1e4;class r{async getRichHistory(E){const P=p().map(i),x=E.starred?P.filter(S=>S.starred===!0):P,M=(0,f.ZX)(x,E.sortOrder,E.datasourceFilters,E.search,[E.from,E.to]);return{richHistory:M,total:M.length}}async addToRichHistory(E){const P=Date.now(),x={id:P.toString(),createdAt:P,...E},M=m(x),S=c(p()),D=M.queries.map(A=>(0,t.omit)(A,["key","refId"])),T=S.length>0&&S[0].queries.map(A=>(0,t.omit)(A,["key","refId"]));if((0,t.isEqual)(D,T)){const A=new Error("Entry already exists");throw A.name=u.j.DuplicatedEntry,A}const{queriesToKeep:R,limitExceeded:L}=g(S),w=[M,...R];try{n.Z.setObject(o,w)}catch(A){if(A instanceof Error&&A.name==="QuotaExceededError")v(u.j.StorageFull,`Saving rich history failed: ${A.message}`);else throw A}return L?{warning:{type:u.V.LimitExceeded,message:`Query history reached the limit of ${l}. Old, not-starred items have been removed.`},richHistoryQuery:x}:{richHistoryQuery:x}}async deleteAll(){n.Z.delete(o)}async deleteRichHistory(E){const P=parseInt(E,10),M=n.Z.getObject(o,[]).filter(S=>S.ts!==P);n.Z.setObject(o,M)}async updateStarred(E,P){return d(E,x=>x.starred=P)}async updateComment(E,P){return d(E,x=>x.comment=P)}async getSettings(){return{activeDatasourceOnly:n.Z.getObject(f.hO.activeDatasourceOnly,!1),retentionPeriod:n.Z.getObject(f.hO.retentionPeriod,7),starredTabAsFirstTab:n.Z.getBool(f.hO.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:n.Z.getObject(f.hO.datasourceFilters,[]).map(E=>E.value)}}async updateSettings(E){n.Z.set(f.hO.activeDatasourceOnly,E.activeDatasourceOnly),n.Z.set(f.hO.retentionPeriod,E.retentionPeriod),n.Z.set(f.hO.starredTabAsFirstTab,E.starredTabAsFirstTab),n.Z.setObject(f.hO.datasourceFilters,(E.lastUsedDatasourceFilters||[]).map(P=>({value:P})))}}function d(C,E){const P=parseInt(C,10),x=n.Z.getObject(o,[]),M=(0,t.find)(x,{ts:P});if(!M)throw new Error("Rich history item not found.");return E(M),n.Z.setObject(o,x),i(M)}function c(C){const E=n.Z.getObject(f.hO.retentionPeriod,7),P=(0,f.Jo)(E,!1);return C.filter(x=>x.ts>P||x.starred===!0)||[]}function g(C){let E=!1,P=C.length-1;for(;P>=0&&C.length>=l;)C[P].starred||(C.splice(P,1),E=!0),P--;return{queriesToKeep:C,limitExceeded:E}}function p(){const C=n.Z.getObject(o,[]);return y(C)}function y(C){return C.map(P=>{const x=P.queries.map((M,S)=>h(P,M,S));return{...P,queries:x}})}function h(C,E,P){const x="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof E=="object"?E:a(E)?JSON.parse(E):{expr:E,refId:x[P]}}function a(C){try{JSON.parse(C)}catch{return!1}return!0}function v(C,E){const P=new Error(E);throw P.name=C,P}},4420:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(3363),n=e(47214),u=e(77213),s=e(42454),i=e(43823);const m=r=>{const d=(0,u.F)().getInstanceSettings({uid:r.datasourceUid});return{id:r.uid,createdAt:r.createdAt*1e3,datasourceName:d?.name||"",datasourceUid:r.datasourceUid,starred:r.starred,comment:r.comment,queries:r.queries}},f=r=>({uid:r.id,createdAt:Math.floor(r.createdAt/1e3),datasourceUid:r.datasourceUid,starred:r.starred,comment:r.comment,queries:r.queries});class o{constructor(){this.preferenceService=new s.y("user")}async addToRichHistory(d){const{result:c}=await(0,n.i)().post("/api/query-history",{dataSourceUid:d.datasourceUid,queries:d.queries});return{richHistoryQuery:m(c)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(d){(0,n.i)().delete(`/api/query-history/${d}`)}async getRichHistory(d){const c=l(d),p=(await(0,t.n)((0,n.i)().fetch({method:"GET",url:`/api/query-history?${c}`,requestId:"query-history-get-all"}))).data,y=(p.result.queryHistory||[]).map(m),h=p.result.totalCount||0;return{richHistory:y,total:h}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(d,c){const g=await(0,n.i)().patch(`/api/query-history/${d}`,{comment:c});return m(g.result)}updateSettings(d){return this.preferenceService.patch({queryHistory:{homeTab:d.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(d,c){let g;return c?g=await(0,n.i)().post(`/api/query-history/star/${d}`):g=await(0,n.i)().delete(`/api/query-history/star/${d}`),m(g.result)}async migrate(d){const c={queries:d.map(f)};await(0,t.n)((0,n.i)().fetch({url:"/api/query-history/migrate",method:"POST",data:c,showSuccessAlert:!1}))}}function l(r){let d=`${r.datasourceFilters.map(p=>{const y=(0,u.F)().getInstanceSettings(p).uid;return`datasourceUid=${encodeURIComponent(y)}`}).join("&")}`;r.search&&(d=d+`&searchString=${r.search}`),r.sortOrder&&(d=d+`&sort=${r.sortOrder===i.A.Ascending?"time-asc":"time-desc"}`);const c=r.from===0?"now":`now-${r.from}d`,g=r.to===0?"now":`now-${r.to}d`;return d=d+`&to=${c}`,d=d+`&from=${g}`,d=d+"&limit=100",d=d+`&page=${r.page||1}`,r.starred&&(d=d+`&onlyStarred=${r.starred}`),d}},12151:(G,O,e)=>{"use strict";e.d(O,{V:()=>n,j:()=>t});var t=(u=>(u.StorageFull="StorageFull",u.DuplicatedEntry="DuplicatedEntry",u))(t||{}),n=(u=>(u.LimitExceeded="LimitExceeded",u))(n||{})},69597:(G,O,e)=>{"use strict";e.d(O,{Jo:()=>i,ZX:()=>s,hO:()=>r});var t=e(82897),n=e.n(t),u=e(43823);function s(d,c,g,p,y){const h=f(d,g),a=o(h,p),v=y?m(a,y):a;return l(v,c)}const i=(d,c)=>{const g=new Date,p=new Date(g.setDate(g.getDate()-d));return c?p.setHours(24,0,0,0):p.setHours(0,0,0,0)};function m(d,c){const g=i(c[0],!0),p=i(c[1],!1);return d.filter(y=>y.createdAt<g&&y.createdAt>p)}function f(d,c){return c.length>0?d.filter(g=>c.includes(g.datasourceName)):d}function o(d,c){return d.filter(g=>g.comment.includes(c)?!0:g.queries.filter(y=>Object.values((0,t.omit)(y,["datasource","key","refId","hide","queryType"])).some(h=>h?.toString().includes(c))).length>0)}const l=(d,c)=>{let g;return c===u.A.Ascending&&(g=(p,y)=>p.createdAt<y.createdAt?-1:p.createdAt>y.createdAt?1:0),c===u.A.Descending&&(g=(p,y)=>p.createdAt<y.createdAt?1:p.createdAt>y.createdAt?-1:0),c===u.A.DatasourceZA&&(g=(p,y)=>p.datasourceName<y.datasourceName?-1:p.datasourceName>y.datasourceName?1:0),c===u.A.DatasourceAZ&&(g=(p,y)=>p.datasourceName<y.datasourceName?1:p.datasourceName>y.datasourceName?-1:0),d.sort(g)},r={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters",migrated:"grafana.explore.richHistory.migrated"}},40967:(G,O,e)=>{"use strict";e.d(O,{X:()=>l,b:()=>o});var t=e(93003),n=e(77582),u=e(43823),s=e(66719),i=e(4420);const m=new s.ZP,f=new i.Z,o=()=>t.v.queryHistoryEnabled?f:m,l=()=>t.v.queryHistoryEnabled?{availableFilters:[u.A.Descending,u.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:n.Vt.isSignedIn}:{availableFilters:[u.A.Descending,u.A.Ascending,u.A.DatasourceAZ,u.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},40014:(G,O,e)=>{"use strict";e.d(O,{x:()=>s});var t=e(68404),n=e(81168),u=e(70431);function s(i){const m=(0,n.useDispatch)(),f=(0,t.useRef)(i);f.current=i,(0,t.useEffect)(()=>()=>{m((0,u.e)({cleanupAction:f.current}))},[m])}},76770:(G,O,e)=>{"use strict";e.d(O,{q:()=>u});var t=e(81168),n=e(86245);const u=s=>{const i=(0,t.useSelector)(m=>m.navIndex);return(0,n.ht)(i,s)}},96044:(G,O,e)=>{"use strict";e.d(O,{K:()=>s});var t=e(68404),n=e(70356),u=e(57388);function s(){const{search:i}=(0,n.TH)(),m=(0,t.useMemo)(()=>(0,u.Ox)(i||""),[i]),f=(0,t.useCallback)((o,l)=>u.E1.partial(o,l),[]);return[m,f]}},19719:(G,O,e)=>{"use strict";e.d(O,{D_:()=>l,a2:()=>o,k$:()=>f});const t="en-US",n="fr-FR",u="es-ES",s="de-DE",i="zh-Hans",m="pseudo-LOCALE",f=t,o=[{code:t,name:"English",loader:()=>Promise.resolve({})},{code:n,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,58756,19))},{code:u,name:"Espa\xF1ol",loader:()=>e.e(6008).then(e.t.bind(e,4253,19))},{code:s,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:i,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],l=o.map(r=>r.code)},35287:(G,O,e)=>{"use strict";e.d(O,{$q:()=>c,cC:()=>l,t:()=>d,uC:()=>f});var t=e(36509),n=e(68404),u=e(4696),s=e(45710),i=e(19719);const m={type:"backend",init(){},async read(g,p,y){const h=i.a2.find(v=>v.code===g);if(!h)return y(new Error("No message loader available for "+g),null);const a=await h.loader();y(null,a)}};function f(g){const p=i.D_.includes(g)?g:i.k$;t.ZP.use(m).use(u.Db).init({lng:p,partialBundledLanguages:!0,resources:{},returnEmptyString:!1,pluralSeparator:"__"}),d("_comment","Do not manually edit this file, or update these source phrases in Crowdin. The source of truth for English strings are in the code source")}function o(g){const p=VALID_LANGUAGES.includes(g)?g:DEFAULT_LANGUAGE;return i18n.changeLanguage(p)}const l=g=>n.createElement(s.c,{...g}),r=t.ZP.t,d=(g,p,y)=>r(g,p,y),c=(g,p={})=>{if(typeof g=="string")return c(new Date(g),p);const y=t.ZP.options.lng??i.k$;return new Intl.DateTimeFormat(y,p).format(g)}},37959:(G,O,e)=>{"use strict";e.d(O,{Qp:()=>D,aB:()=>k,UW:()=>F,nu:()=>V,Ce:()=>re,Bz:()=>ie});var t=e(82897),n=e(46060),u=e(36683),s=e(85526),i=e(90595),m=e(16911),f=e(71895),o=e(14582),l=e(66926),r=e(15355),d=e(46519),c=e(8928),g=e(38849),p=e(33180),y=e(38685),h=e(49922),a=e(8428),v=e(40538),C=e(1301),E=e(2525),P=e(47694);function x(J,te){return P.ZP.bootData.user.lightTheme?te:J}var M=e(81042);const S="Line limit",D="Common labels",T={[i.in.critical]:C.O9[7],[i.in.warning]:C.O9[1],[i.in.error]:C.O9[4],[i.in.info]:C.O9[0],[i.in.debug]:C.O9[5],[i.in.trace]:C.O9[2],[i.in.unknown]:x("#8e8e8e","#bdc4cd")},R=1,L=1e3*R,w=60*L,A=60*w,N=24*A,W=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function I(J,te,ne){switch(ne){case i.Y4.exact:return J.entry.replace(W,"")===te.entry.replace(W,"");case i.Y4.numbers:return J.entry.replace(/\d/g,"")===te.entry.replace(/\d/g,"");case i.Y4.signature:return J.entry.replace(/\w/g,"")===te.entry.replace(/\w/g,"");default:return!1}}function F(J,te){return te===i.Y4.none?J:J.reduce((ne,j,be)=>{const Le={...j},Qe=ne[ne.length-1];return be>0&&I(j,Qe,te)?Qe.duplicates++:(Le.duplicates=0,ne.push(Le)),ne},[])}function V(J,te){return te.size===0?J:J.filter(ne=>!te.has(ne.logLevel))}function b(J,te){const ne={},j=[];for(const be of J){let Le=ne[be.logLevel];Le||(ne[be.logLevel]=Le={lastTs:null,datapoints:[],target:be.logLevel,color:T[be.logLevel]},j.push(Le));const Qe=Math.floor(be.timeEpochMs/te)*te;Qe===Le.lastTs?Le.datapoints[Le.datapoints.length-1][0]++:(Le.datapoints.push([1,Qe]),Le.lastTs=Qe);for(const Ye of j)Ye!==Le&&Ye.lastTs!==Qe&&(Ye.datapoints.push([0,Qe]),Ye.lastTs=Qe)}return j.map((be,Le)=>{be.datapoints.sort((Be,Ve)=>Be[1]-Ve[1]);const Qe=(0,m.g0)(be),de=new f.N(Qe).getFirstFieldOfType(o.fS.number);return Qe.fields[de.index].config.min=0,Qe.fields[de.index].config.decimals=0,Qe.fields[de.index].config.color={mode:l.S.Fixed,fixedColor:be.color},Qe.fields[de.index].config.custom={drawStyle:v.l8.Bars,barAlignment:v.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:be.color,pointColor:be.color,fillColor:be.color,lineWidth:0,fillOpacity:100,stacking:{mode:v.o0.Normal,group:"A"}},Qe})}function X(J){return J.fields.some(te=>te.type===o.fS.time)&&J.fields.some(te=>te.type===o.fS.string)}function k(J,te,ne,j){const{logSeries:be}=Y(J),Le=q(be,j);if(Le){if(te&&Le.rows.length>0){const Qe=Le.rows.sort(M.DA),{visibleRange:Ye,bucketSize:de,visibleRangeMs:Be,requestedRangeMs:Ve}=H(Qe,te,ne);Le.visibleRange=Ye,Le.series=b(Qe,de),Le.meta&&(Le.meta=De(Le,Be,Ve))}else Le.series=[];return Le.queries=j,Le}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:j}}function H(J,te,ne,j=20,be=1e3){let Le=ne,Qe=te,Ye=Math.max(Qe*j,be),de,Be;if(ne){const Ve=J[0].timeEpochMs;if(Be=ne.to-ne.from,de=ne.to-Ve,de>0){const $e=de/Be;Qe*=$e,Ye=Math.max(Math.ceil(Qe*j),be),Le={from:Math.floor(Ve/Ye)*Ye,to:ne.to}}else de=1}return{bucketSize:Ye,visibleRange:Le,visibleRangeMs:de,requestedRangeMs:Be}}function Y(J){const te=[],ne=[];for(const j of J){if(X(j)||!j.fields.length){ne.push(j);continue}j.length>0&&te.push(j)}return{logSeries:ne,metricSeries:te}}function ee(J){const{stringField:te,labelsField:ne}=J;return ne!==void 0?ne.values.toArray():[te.labels??{}]}function ue(J,te){const{stringField:ne,labelsField:j}=J;return j!==void 0?j.values.get(te):ne.labels??{}}function q(J,te=[]){if(J.length===0)return;const ne=[];let j=[];const be=J.filter(at=>at.fields.length);be.length&&be.forEach(at=>{const Ze=new f.N(at),lt=Ze.getFirstFieldOfType(o.fS.string),nt=Ze.getFirstFieldOfType(o.fS.time),_e=at.meta?.custom?.frameType==="LabeledTimeValues"?Ze.getFieldByName("labels"):void 0;if(lt!==void 0&&nt!==void 0){const ut={series:at,timeField:nt,labelsField:_e,timeNanosecondField:Ze.getFieldByName("tsNs"),stringField:lt,logLevelField:Ze.getFieldByName("level"),idField:ge(Ze)};j.push(ut);const rt=ee(ut);rt.length>0&&ne.push(rt)}});const Le=ne.flat(),Qe=Le.length>0?(0,r.FT)(Le):{},Ye=[];let de=!1;for(const at of j){const{timeField:Ze,timeNanosecondField:lt,stringField:nt,logLevelField:_e,idField:ut,series:rt}=at;for(let je=0;je<rt.length;je++){const dt=Ze.values.get(je),oe=(0,d.zh)(dt),Se=lt?lt.values.get(je):void 0,Re=Se||oe.valueOf()+"000000",ze=nt.values.get(je)??"",ve=typeof ze=="string"?ze:JSON.stringify(ze),Te=c.QX.hasAnsiCodes(ve),he=!!ve.match(/\\n|\\t|\\r/),pe=rt.meta&&rt.meta.searchWords?rt.meta.searchWords:[],ye=Te?E._J.strip(ve):ve,Oe=ue(at,je),Ne=(0,r.IU)(Oe,Qe);Object.keys(Ne).length>0&&(de=!0);let Me=i.in.unknown;const Ae=_e&&_e.values.get(je)||Oe&&Oe.level;Ae?Me=(0,M.jx)(Ae):Me=(0,M.ZO)(ye);const we=te.find(ke=>ke.refId===rt.refId)?.datasource?.type;Ye.push({entryFieldIndex:nt.index,rowIndex:je,dataFrame:rt,logLevel:Me,timeFromNow:(0,g.E8)(dt),timeEpochMs:oe.valueOf(),timeEpochNs:Re,timeLocal:(0,g.dq)(dt,{timeZone:"browser"}),timeUtc:(0,g.dq)(dt,{timeZone:"utc"}),uniqueLabels:Ne,hasAnsi:Te,hasUnescapedContent:he,searchWords:pe,entry:ye,raw:ve,labels:Oe||{},uid:ut?ut.values.get(je):je.toString(),datasourceType:we})}}const Be=[];(0,t.size)(Qe)>0&&Be.push({label:D,value:Qe,kind:i.Ku.LabelsMap});const $e=J.filter(at=>at.meta&&at.meta.limit).reduce((at,Ze)=>(at[Ze.refId??""]=Ze.meta?.limit??0,at),{}),We=Object.values($e).reduce((at,Ze)=>at+=Ze,0);We>0&&Be.push({label:S,value:We,kind:i.Ku.Number});let Ke=0;const qe={};let Xe=!1;for(const at of J){const Ze=at.meta?.custom?.lokiQueryStatKey,{refId:lt}=at;if(!Xe&&at.meta?.custom?.error&&(Be.push({label:"",value:at.meta?.custom.error,kind:i.Ku.Error}),Xe=!0),lt&&!qe[lt]){if(Ze&&at.meta?.stats){const nt=at.meta.stats.find(_e=>_e.displayName===Ze);nt&&(Ke+=nt.value)}qe[lt]=!0}}if(Ke>0){const{text:at,suffix:Ze}=(0,a.i7)("B")(Ke);Be.push({label:"Total bytes processed",value:`${at} ${Ze}`,kind:i.Ku.String})}return{hasUniqueLabels:de,meta:Be,rows:Ye}}function ge(J){const te=["id"];for(const ne of te){const j=J.getFieldByName(ne);if(j)return j}}function De(J,te,ne){let j=[...J.meta];const be=j.findIndex(Qe=>Qe.label===S),Le=be>=0&&j[be]?.value;if(Le&&Le>0){let Qe;if(Le===J.rows.length&&te&&ne){const Ye=(te/ne*100).toFixed(2);Qe=`${Le} reached, received logs cover ${Ye}% (${p.msRangeToTimeString(te)}) of your selected time range (${p.msRangeToTimeString(ne)})`}else Qe=`${Le} (${J.rows.length} returned)`;j[be]={label:S,value:Qe,kind:i.Ku.String}}return j}function fe(J,te){const ne=te&&J===i.in.unknown?"logs":J,j=T[J];return{displayNameFromDS:ne,color:{mode:l.S.Fixed,fixedColor:j},custom:{drawStyle:v.l8.Bars,barAlignment:v.pu.Center,lineColor:j,pointColor:j,fillColor:j,lineWidth:1,fillOpacity:100,stacking:{mode:v.o0.Normal,group:"A"}}}}function me(J,te){const ne={};return J.forEach(j=>{const be=te(j);ne[be]||(ne[be]=[]),ne[be].push(j)}),Object.keys(ne).map(j=>ce(ne[j],fe(j,Object.keys(ne).length===1)))}function ce(J,te){const ne=new y.v;if(!J.length)return ne;const j=J[0].length,be=new f.N(J[0]).getFirstFieldOfType(o.fS.time);return be&&(ne.addField({name:"Time",type:o.fS.time},j),ne.addField({name:"Value",type:o.fS.number,config:te},j),J.forEach(Le=>{Le.fields.forEach(Qe=>{if(Qe.type===o.fS.number)for(let Ye=0;Ye<j;Ye++){const de=ne.get(Ye).Value,Be=Qe.values.get(Ye),Ve=de===null&&Be===null?null:(de||0)+(Be||0);ne.set(Ye,{Value:Ve,Time:be.values.get(Ye)})}})})),ne}function ie(J,te,ne){const j=ne.range.to.valueOf()-ne.range.from.valueOf(),be=Ee(te.scopedVars,j);return te.interval=be.interval,te.scopedVars.__interval={value:be.interval,text:be.interval},be.intervalMs!==void 0&&(te.intervalMs=be.intervalMs,te.scopedVars.__interval_ms={value:be.intervalMs,text:be.intervalMs}),te.hideFromInspector=!0,new n.y(Le=>{let Qe=[];Le.next({state:h.Gu.Loading,error:void 0,data:[]});const Ye=J.query(te),Be=((0,u.b)(Ye)?Ye:(0,s.D)(Ye)).subscribe({complete:()=>{const Ve=me(Qe,ne.extractLevel);Ve[0]&&(Ve[0].meta={custom:{targets:ne.targets,absoluteRange:{from:ne.range.from.valueOf(),to:ne.range.to.valueOf()}}}),Le.next({state:h.Gu.Done,error:void 0,data:Ve}),Le.complete()},next:Ve=>{const{error:$e}=Ve;$e!==void 0?(Le.next({state:h.Gu.Error,error:$e,data:[]}),Le.error($e)):Qe=Qe.concat(Ve.data.map(m.g0))},error:Ve=>{Le.next({state:h.Gu.Error,error:Ve,data:[]}),Le.error(Ve)}});return()=>{Be?.unsubscribe()}})}function re(J,te){return te.hideFromInspector=!0,new n.y(ne=>{let j=[];ne.next({state:h.Gu.Loading,error:void 0,data:[]});const be=J.query(te),Qe=((0,u.b)(be)?be:(0,s.D)(be)).subscribe({complete:()=>{ne.next({state:h.Gu.Done,error:void 0,data:j}),ne.complete()},next:Ye=>{const{error:de}=Ye;de!==void 0?(ne.next({state:h.Gu.Error,error:de,data:[]}),ne.error(de)):j=j.concat(Ye.data.map(m.g0))},error:Ye=>{ne.next({state:h.Gu.Error,error:Ye,data:[]}),ne.error(Ye)}});return()=>{Qe?.unsubscribe()}})}function Ee(J,te){if(J.__interval){let ne=J.__interval_ms.value,j="";return te<L*5?(ne=R,j="1ms"):ne>A?(ne=N,j="1d"):ne>w?(ne=A,j="1h"):ne>L?(ne=w,j="1m"):(ne=L,j="1s"),{interval:j,intervalMs:ne}}else return{interval:"$__interval"}}},96694:(G,O,e)=>{"use strict";e.d(O,{U:()=>n});var t=e(81168);function n(u){switch(u.kiosk){case"tv":return t.KioskMode.TV;case"1":case!0:return t.KioskMode.Full;default:return null}}},29494:(G,O,e)=>{"use strict";e.d(O,{r:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},98864:(G,O,e)=>{"use strict";e.d(O,{$l:()=>o,Av:()=>p,F6:()=>d,Jk:()=>c,VW:()=>g,ad:()=>l,hS:()=>r,mE:()=>h,vo:()=>a});var t=e(32557),n=e(81168);const u=25,s="notifications",i=`${s}/lastRead`,m={byId:P(),lastRead:Number.parseInt(window.localStorage.getItem(i)??`${Date.now()}`,10)},f=(0,t.oM)({name:"appNotifications",initialState:m,reducers:{notifyApp:(M,{payload:S})=>{Object.values(M.byId).some(D=>v(S,D)&&D.showing)||(M.byId[S.id]=S,x(M.byId))},hideAppNotification:(M,{payload:S})=>{S in M.byId&&(M.byId[S].showing=!1,x(M.byId))},clearNotification:(M,{payload:S})=>{delete M.byId[S],x(M.byId)},clearAllNotifications:M=>{M.byId={},x(M.byId)},readAllNotifications:(M,{payload:S})=>{M.lastRead=S}}}),{notifyApp:o,hideAppNotification:l,clearNotification:r,clearAllNotifications:d,readAllNotifications:c}=f.actions,g=f.reducer,p=M=>M.lastRead,y=M=>Object.values(M.byId).sort((S,D)=>D.timestamp-S.timestamp),h=M=>y(M).filter(C),a=M=>Object.values(M.byId).filter(S=>S.showing);function v(M,S){return M.icon===S.icon&&M.severity===S.severity&&M.text===S.text&&M.title===S.title}function C(M){return M.severity===n.AppNotificationSeverity.Warning||M.severity===n.AppNotificationSeverity.Error}function E(M){return typeof M=="object"&&M!==null&&"id"in M&&"icon"in M&&"title"in M&&"text"in M}function P(){const M=window.localStorage.getItem(s);if(!M)return{};const S=JSON.parse(M);return Object.values(S).every(D=>E(D))?S:{}}function x(M){const S=Object.values(M).filter(C).sort((D,T)=>T.timestamp-D.timestamp).slice(0,u).reduce((D,T)=>(D[T.id]={id:T.id,severity:T.severity,icon:T.icon,title:T.title,text:T.text,traceId:T.traceId,timestamp:T.timestamp,showing:T.showing},D),{});try{window.localStorage.setItem(s,JSON.stringify(S))}catch(D){console.error("Unable to persist notifications to local storage"),console.error(D)}}},61962:(G,O,e)=>{"use strict";e.d(O,{OQ:()=>m,V4:()=>o,gd:()=>f});var t=e(32557),n=e(93003);const u=n.v.bootData?.navTree??[],s="starred/",i=(0,t.oM)({name:"navBarTree",initialState:u,reducers:{setStarred:(l,r)=>{const d=l.find(h=>h.id==="starred"),{id:c,title:g,url:p,isStarred:y}=r.payload;if(d)if(y){d.children||(d.children=[]);const h={id:s+c,text:g,url:p};d.children.push(h),d.children.sort((a,v)=>a.text.localeCompare(v.text))}else{const h=d.children?.findIndex(a=>a.id===s+c)??-1;h>-1&&d?.children?.splice(h,1)}},updateDashboardName:(l,r)=>{const{id:d,title:c,url:g}=r.payload,p=l.find(y=>y.id==="starred");if(p){const y=p.children?.find(h=>h.id===d);y&&(y.text=c,y.url=g,p.children?.sort((h,a)=>h.text.localeCompare(a.text)))}}}}),{setStarred:m,updateDashboardName:f}=i.actions,o=i.reducer},14393:(G,O,e)=>{"use strict";e.d(O,{Cu:()=>m,G4:()=>g,H7:()=>d,Qz:()=>i,RL:()=>r});var t=e(32557),n=e(82897),u=e.n(n),s=e(47694);const i="home";function m(){const p={},y=(0,n.cloneDeep)(s.ZP.bootData.navTree),h=y.find(v=>v.id===i),a=y.filter(v=>v.id!==i);return h&&f(p,[h]),f(p,a,h),p}function f(p,y,h){for(const a of y)a.parentItem=h,a.id&&(p[a.id]=a),a.children&&f(p,a.children,a);p["not-found"]={...o("Page not found","404 Error").node},p.error={...o("Page error","An unexpected error").node}}function o(p,y){const h={text:p,subTitle:y,icon:"exclamation-triangle"};return{node:h,main:h}}const l={},r=(0,t.PH)("navIndex/updateNavIndex"),d=(0,t.PH)("navIndex/updateConfigurationSubtitle"),c=(p,y)=>({...p,parentItem:{...p.parentItem,text:p.parentItem?.text??"",subTitle:y}}),g=(p=l,y)=>{if(r.match(y)){const h={},a=y.payload;for(const v of a.children)h[v.id]={...v,parentItem:a};return{...p,...h}}else if(d.match(y)){const h=`Organization: ${y.payload}`;return{...p,cfg:{...p.cfg,subTitle:h},datasources:c(p.datasources,h),correlations:c(p.correlations,h),users:c(p.users,h),teams:c(p.teams,h),plugins:c(p.plugins,h),"org-settings":c(p["org-settings"],h),apikeys:c(p.apikeys,h)}}return p}},86245:(G,O,e)=>{"use strict";e.d(O,{ht:()=>u,vw:()=>s});var t=e(14393);const n=()=>{const f={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:f,main:f}},u=(f,o,l,r=!1)=>{if(f[o]){const d=f[o],c=r?d:s(d),g=i(c,o);return{node:d,main:g}}return l||n()};function s(f){return f.parentItem&&f.parentItem.id!==t.Qz?s(f.parentItem):f}function i(f,o){return f.id===o?{...f,active:!0}:f.children&&f.children.length>0?{...f,children:f.children.map(l=>i(l,o))}:f}const m=f=>`${f.main.text}${f.node.text?": "+f.node.text:""}`},42454:(G,O,e)=>{"use strict";e.d(O,{y:()=>n});var t=e(29930);class n{constructor(s){this.resourceUri=s}update(s){return t.ae.put(`/api/${this.resourceUri}/preferences`,s)}patch(s){return t.ae.patch(`/api/${this.resourceUri}/preferences`,s)}load(){return t.ae.get(`/api/${this.resourceUri}/preferences`)}}},38535:(G,O,e)=>{"use strict";e.d(O,{b:()=>s});var t=e(68404),n=e(96209),u=e(80313);class s{constructor(f){this._subject=new n.x,this._state=f}useState(){return i(this)}get state(){return this._state}setState(f){this._state={...this._state,...f},this._subject.next(this._state)}subscribeToState(f){return this._subject.subscribe(f)}}function i(m){const f=(0,u.N)();return(0,t.useEffect)(()=>{const o=m.subscribeToState({next:f});return()=>o.unsubscribe()},[m,f]),m.state}},29930:(G,O,e)=>{"use strict";e.d(O,{y$:()=>me,ae:()=>ce,i:()=>ie});var t=e(96209),n=e(3363),u=e(46060),s=e(95484),i=e(16313),m=e(37537),f=e(53786),o=e(85526),l=e(39274),r=e(2101),d=e(14542),c=e(29236),g=e(94514),p=e(98356),y=e(44962),h=e(47994),a=e(67305),v=e(80136),C=e(44288),E=e(25318),P=e(7238),x=e(93003),M=e(97063),S=e(47694),D=e(53747),T=e(63163),R=e(52423),L=e(68404),w=e(29516),A=e(97635),N=e(68698),W=e(90723),I=e(82385),F=e(34003);const V=Ee=>{const J=(0,w.l4)(),te=b(J),ne=(0,F.J)(J),j=Boolean(Ee.maxConcurrentSessions),be=()=>{window.location.reload()};return L.createElement(A.h_,null,L.createElement("div",{className:ne.modal},L.createElement(N.v,{title:"You have been automatically signed out",severity:"warning",className:te.infobox},L.createElement("div",{className:te.text},L.createElement("p",null,"Your session token was automatically revoked because you have reached",L.createElement("strong",null,` the maximum number of ${j?Ee.maxConcurrentSessions:""} concurrent sessions `),"for your account."),L.createElement("p",null,L.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),L.createElement(W.zx,{size:"md",variant:"primary",onClick:be},"Sign in"))),L.createElement("div",{className:(0,R.cx)(ne.modalBackdrop,te.backdrop)}))},b=(0,I.B)(Ee=>({infobox:R.css`
      margin-bottom: 0;
    `,text:R.css`
      margin: ${Ee.spacing(1,0,2)};
    `,backdrop:R.css`
      background-color: ${Ee.colors.background.canvas};
      opacity: 0.8;
    `}));var X=e(45984),k=e(8878),H=e(99822),Y=(Ee=>(Ee[Ee.Pending=0]="Pending",Ee[Ee.InProgress=1]="InProgress",Ee[Ee.Done=2]="Done",Ee))(Y||{});class ee{constructor(J=!1){this.state={},this.queue=new t.x,this.updates=new t.x,this.add=(te,ne)=>this.queue.next({id:te,options:ne,state:0}),this.setInProgress=te=>this.queue.next({id:te,state:1}),this.setDone=te=>this.queue.next({id:te,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=te=>{const ne=Object.keys(te).filter(be=>te[be].state===1).length;return{noOfPending:Object.keys(te).filter(be=>te[be].state===0).length,noOfInProgress:ne,state:te}},this.publishUpdate=(te,ne)=>{this.printState(te,ne),this.updates.next(te)},this.printState=(te,ne)=>{if(!ne)return;const j=Object.keys(te.state).reduce((be,Le)=>{const Qe={id:Le,state:te.state[Le].state};return be.push(Qe),be},[]);console.log("FetchQueue noOfStarted",te.noOfInProgress),console.log("FetchQueue noOfNotStarted",te.noOfPending),console.log("FetchQueue state",j)},this.queue.subscribe(te=>{const{id:ne,state:j,options:be}=te;if(this.state[ne]||(this.state[ne]={state:0,options:{}}),j===2){delete this.state[ne];const Qe=this.getUpdate(this.state);this.publishUpdate(Qe,J);return}this.state[ne].state=j,be&&(this.state[ne].options=be);const Le=this.getUpdate(this.state);this.publishUpdate(Le,J)})}}var ue=e(39409);class q{constructor(J,te,ne){const j=ne?.http2Enabled?1e3:5;J.getUpdates().pipe((0,d.h)(({noOfPending:be})=>be>0),(0,ue.b)(({state:be,noOfInProgress:Le})=>{const Qe=Object.keys(be).filter(Ve=>be[Ve].state===Y.Pending&&!(0,H.mu)(be[Ve].options.url)).reduce((Ve,$e)=>{const We={id:$e,options:be[$e].options};return Ve.push(We),Ve},[]),Ye=Object.keys(be).filter(Ve=>be[Ve].state===Y.Pending&&(0,H.mu)(be[Ve].options.url)).reduce((Ve,$e)=>{const We={id:$e,options:be[$e].options};return Ve.push(We),Ve},[]),de=Math.max(j-Le-Qe.length,0),Be=Ye.slice(0,de);return Qe.concat(Be)})).subscribe(({id:be,options:Le})=>{te.add(be,Le)})}}class ge{constructor(J,te){this.queue=new t.x,this.responses=new t.x,this.add=(ne,j)=>{this.queue.next({id:ne,options:j})},this.getResponses=ne=>this.responses.asObservable().pipe((0,d.h)(j=>j.id===ne)),this.queue.subscribe(ne=>{const{id:j,options:be}=ne;J.setInProgress(j),this.responses.next({id:j,observable:te(be)})})}}var De=e(82002);const fe="cancel_all_requests_request_id";class me{constructor(J){this.inFlightRequests=new t.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new t.x,this.dependencies={fromFetch:l.U,appEvents:M.Z,contextSrv:De.Vt,logout:()=>{De.Vt.setLoggedOut(),window.location.reload()}},J&&(this.dependencies={...this.dependencies,...J}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new ee,this.responseQueue=new ge(this.fetchQueue,this.internalFetch),new q(this.fetchQueue,this.responseQueue,(0,S.iE)())}async request(J){return await(0,n.n)(this.fetch(J).pipe((0,r.U)(te=>te.data)))}fetch(J){const te=(0,C.Z)(),ne=this.fetchQueue;return new u.y(j=>{const be=new s.w0;return be.add(this.responseQueue.getResponses(te).subscribe(Le=>{be.add(Le.observable.subscribe(j))})),this.fetchQueue.add(te,J),function(){ne.setDone(te),be.unsubscribe()}})}internalFetch(J){J.requestId&&this.inFlightRequests.next(J.requestId),J=this.parseRequestOptions(J);const te=(0,D.v)();te!==null&&te!==""&&(J.headers||(J.headers={}),x.v.jwtUrlLogin&&x.v.jwtHeaderName&&(J.headers[x.v.jwtHeaderName]=`${te}`));const ne=this.getFromFetchStream(J),j=ne.pipe(this.toFailureStream(J)),be=ne.pipe((0,d.h)(Le=>Le.ok===!0),(0,c.b)(Le=>{this.showSuccessAlert(Le),this.inspectorStream.next(Le)}));return(0,i.T)(be,j).pipe((0,g.K)(Le=>(0,m._)(this.processRequestError(J,Le))),this.handleStreamCancellation(J))}resolveCancelerIfExists(J){this.inFlightRequests.next(J)}cancelAllInFlightRequests(){this.inFlightRequests.next(fe)}async datasourceRequest(J){return(0,n.n)(this.fetch(J))}parseRequestOptions(J){const te=this.dependencies.contextSrv.user?.orgId;return J.retry=J.retry??0,(0,H.R8)(J.url)&&(te&&(J.headers=J.headers??{},J.headers["X-Grafana-Org-Id"]=te),J.url.startsWith("/")&&(J.url=J.url.substring(1)),J.headers?.Authorization&&(J.headers["X-DS-Authorization"]=J.headers.Authorization,delete J.headers.Authorization),this.noBackendCache&&(J.headers=J.headers??{},J.headers["X-Grafana-NoCache"]="true")),J.hideFromInspector===void 0&&(J.hideFromInspector=(0,H.R8)(J.url)&&!(0,H.mu)(J.url)),J}getFromFetchStream(J){const te=(0,k.Xv)(J),ne=(0,k.nS)(J);return this.dependencies.fromFetch(te,ne).pipe((0,p.z)(async j=>{const{status:be,statusText:Le,ok:Qe,headers:Ye,url:de,type:Be,redirected:Ve}=j,$e=J.responseType??((0,k.rZ)(Ye)?"json":void 0),We=await(0,k.aO)(j,$e);return{status:be,statusText:Le,ok:Qe,data:We,headers:Ye,url:de,type:Be,redirected:Ve,config:J}}),(0,y.B)())}toFailureStream(J){const{isSignedIn:te}=this.dependencies.contextSrv.user;return ne=>ne.pipe((0,d.h)(j=>j.ok===!1),(0,p.z)(j=>{const{status:be,statusText:Le,data:Qe}=j,Ye={status:be,statusText:Le,data:Qe,config:J};return(0,m._)(Ye)}),(0,h.a)(j=>j.pipe((0,p.z)((be,Le)=>{const Qe=Le===0&&J.retry===0;return be.status===401&&(0,H.R8)(J.url)&&Qe&&te?be.data?.error?.id==="ERR_TOKEN_REVOKED"?(this.dependencies.appEvents.publish(new X.Dn({component:V,props:{maxConcurrentSessions:be.data?.error?.maxConcurrentSessions}})),(0,f.of)({})):(0,o.D)(this.loginPing()).pipe((0,g.K)(Ye=>(Ye.status===401&&this.dependencies.logout(),(0,m._)(Ye)))):(0,m._)(be)}))))}showApplicationErrorAlert(J){}showSuccessAlert(J){const{config:te}=J;if(te.showSuccessAlert===!1||te.showSuccessAlert===void 0&&(te.method==="GET"||(0,H.mu)(te.url)||!(0,H.R8)(te.url)))return;const ne=J.data;ne?.message&&this.dependencies.appEvents.emit(E.SI.alertSuccess,[ne.message])}showErrorAlert(J,te){if(J.showErrorAlert===!1||J.showErrorAlert===void 0&&((0,H.mu)(J.url)||!(0,H.R8)(J.url)))return;let ne="",j=te.data.message;j.length>80&&(ne=j,j="Error"),te.status===422&&(j="Validation failed"),this.dependencies.appEvents.emit(te.status<500?E.SI.alertWarning:E.SI.alertError,[j,ne,te.data.traceID])}processRequestError(J,te){return te.data=te.data??{message:"Unexpected error"},typeof te.data=="string"&&(te.data={message:te.data,error:te.statusText,response:te.data}),te.data&&!te.data.message&&typeof te.data.error=="string"&&(te.data.message=te.data.error),te.data.message&&setTimeout(()=>{te.isHandled||this.showErrorAlert(J,te)},50),this.inspectorStream.next(te),te}handleStreamCancellation(J){return te=>te.pipe((0,a.R)(this.inFlightRequests.pipe((0,d.h)(ne=>{let j=!1;return J&&J.requestId&&J.requestId===ne&&(j=!0),ne===fe&&(j=!0),j}))),(0,v.T)(()=>({type:P.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:J})))}getInspectorStream(){return this.inspectorStream}async get(J,te,ne,j){return this.request({...j,method:"GET",url:J,params:te,requestId:ne})}async delete(J,te,ne){return this.request({...ne,method:"DELETE",url:J,data:te})}async post(J,te,ne){return this.request({...ne,method:"POST",url:J,data:te})}async patch(J,te,ne){return this.request({...ne,method:"PATCH",url:J,data:te})}async put(J,te,ne){return this.request({...ne,method:"PUT",url:J,data:te})}withNoBackendCache(J){return this.noBackendCache=!0,J().finally(()=>{this.noBackendCache=!1})}loginPing(){return this.request({url:"/api/login/ping",method:"GET",retry:1})}search(J){return this.get("/api/search",J)}getDashboardByUid(J){return J.indexOf("/")>0&&x.v.featureToggles.dashboardsFromStorage?(0,T.$)().getDashboard(J):this.get(`/api/dashboards/uid/${J}`)}validateDashboard(J){const te=JSON.stringify(J,re,2);return this.request({method:"POST",url:"/api/dashboards/validate",data:{dashboard:te},showSuccessAlert:!1,showErrorAlert:!1})}getPublicDashboardByUid(J){return this.get(`/api/public/dashboards/${J}`)}getFolderByUid(J,te={}){const ne=new URLSearchParams;return te.withAccessControl&&ne.set("accesscontrol","true"),this.get(`/api/folders/${J}?${ne.toString()}`)}}const ce=new me,ie=()=>ce;function re(Ee,J){if(!(typeof J=="number"&&!Number.isFinite(J)))return J}},82002:(G,O,e)=>{"use strict";e.d(O,{Vt:()=>r});var t=e(82897),n=e.n(t),u=e(33180),s=e(47214),i=e(14876),m=e(81168),f=e(47694);class o{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.lightTheme=!1,this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",f.ZP.bootData.user&&(0,t.extend)(this,f.ZP.bootData.user)}}class l{constructor(){this.sidemenuSmallBreakpoint=!1,f.ZP.bootData||(f.ZP.bootData={user:{},settings:{},navTree:[]}),this.user=new o,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=f.ZP.minRefreshInterval}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,s.i)().get("/api/access-control/user/actions",{reloadcache:!0}))}catch(g){console.error(g)}}setLoggedOut(){this.user.isSignedIn=!1,this.isSignedIn=!1}hasRole(g){return g==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===g}accessControlEnabled(){return f.ZP.rbacEnabled}licensedAccessControlEnabled(){return(0,i.v)("accesscontrol")&&f.ZP.rbacEnabled}hasPermissionInMetadata(g,p){return this.accessControlEnabled()?!!p.accessControl?.[g]:!0}hasPermission(g){return this.accessControlEnabled()?!!this.user.permissions?.[g]:!0}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(g){return f.ZP.minRefreshInterval?u.intervalToMs(g)>=u.intervalToMs(f.ZP.minRefreshInterval):!0}getValidInterval(g){return this.isAllowedInterval(g)?g:f.ZP.minRefreshInterval}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(m.AccessControlAction.DataSourcesExplore)&&f.ZP.exploreEnabled:(this.isEditor||f.ZP.viewersCanEdit)&&f.ZP.exploreEnabled}hasAccess(g,p){return this.accessControlEnabled()?this.hasPermission(g):p}hasAccessInMetadata(g,p,y){return this.accessControlEnabled()?this.hasPermissionInMetadata(g,p):y}evaluatePermission(g,p){return this.accessControlEnabled()?p.some(y=>this.hasPermission(y))?[]:["Reject"]:g()}}let r=new l;const d=c=>{throw new Error("contextSrv can be only overridden in test environment")}},13019:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(82897),n=e.n(t),u=e(47214),s=e(47694),i=e(58379);class m{constructor(){}addDashboardImpression(r){const d=this.impressionKey();let c=[];i.Z.exists(d)&&(c=JSON.parse(i.Z.get(d)),(0,t.isArray)(c)||(c=[])),c=c.filter(g=>r!==g),c.unshift(r),c.length>50&&c.pop(),i.Z.set(d,JSON.stringify(c))}async convertToUIDs(){let r=this.getImpressions();const d=(0,t.filter)(r,g=>(0,t.isNumber)(g));if(!d.length)return;const c=await(0,u.i)().get(`/api/dashboards/ids/${d.join(",")}`);i.Z.set(this.impressionKey(),JSON.stringify([...(0,t.filter)(r,g=>(0,t.isString)(g)),...c]))}getImpressions(){const r=i.Z.get(this.impressionKey())||"[]";return JSON.parse(r)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,t.filter)(this.getImpressions(),d=>(0,t.isString)(d))}impressionKey(){return"dashboard_impressions-"+s.ZP.bootData.user.orgId}}const o=new m},58379:(G,O,e)=>{"use strict";e.d(O,{Z:()=>u});class t{get(i){return window.localStorage[i]}set(i,m){window.localStorage[i]=m}getBool(i,m){return m!==void 0&&!this.exists(i)?m:window.localStorage[i]==="true"}getObject(i,m){let f=m;if(this.exists(i)){const o=window.localStorage[i];try{f=JSON.parse(o)}catch(l){console.error(`Error parsing store object: ${i}. Returning default: ${m}. [${l}]`)}}return f}setObject(i,m){let f;try{f=JSON.stringify(m)}catch(o){throw new Error(`Could not stringify object: ${i}. [${o}]`)}try{this.set(i,f)}catch(o){const l=new Error(`Could not save item in localStorage: ${i}. [${o}]`);throw o instanceof Error&&(l.name=o.name),l}return!0}exists(i){return window.localStorage[i]!==void 0}delete(i){window.localStorage.removeItem(i)}}const u=new t},4050:(G,O,e)=>{"use strict";e.d(O,{W:()=>o,Z:()=>l});var t=e(82897),n=e.n(t),u=e(29076),s=e(20112);function i(r,d){if(!r)return!1;if(r[0]==="/"){const c=(0,u.jO)(r);return d.match(c)!=null}return r===d}function m(r){return r===0?.001:r/10}function f(r){return r?{colors:[{opacity:0},{opacity:r/10}]}:null}function o(r,d,c){for(let g=0;g<r.length;g++){const p=r[g],y=d.yaxes,h=p.yaxis||1,a=y[h-1],v=(0,s.Cf)(a.format);(0,t.isNumber)(d.decimals)?p.updateLegendValues(v,d.decimals):(0,t.isNumber)(a.decimals)?p.updateLegendValues(v,a.decimals+1):p.updateLegendValues(v,null)}}class l{constructor(d){this.datapoints=d.datapoints,this.label=d.alias,this.id=d.alias,this.alias=d.alias,this.aliasEscaped=(0,t.escape)(d.alias),this.color=d.color,this.bars={fillColor:d.color},this.valueFormater=(0,s.Cf)("none"),this.stats={},this.legend=!0,this.unit=d.unit,this.dataFrameIndex=d.dataFrameIndex,this.fieldIndex=d.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(d){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let c=0;c<d.length;c++){const g=d[c];i(g.alias,this.alias)&&(g.lines!==void 0&&(this.lines.show=g.lines),g.dashes!==void 0&&(this.dashes.show=g.dashes,this.lines.lineWidth=0),g.points!==void 0&&(this.points.show=g.points),g.bars!==void 0&&(this.bars.show=g.bars),g.fill!==void 0&&(this.lines.fill=m(g.fill)),g.fillGradient!==void 0&&(this.lines.fillColor=f(g.fillGradient)),g.stack!==void 0&&(this.stack=g.stack),g.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:g.linewidth,this.dashes.lineWidth=g.linewidth),g.dashLength!==void 0&&(this.dashes.dashLength[0]=g.dashLength),g.spaceLength!==void 0&&(this.dashes.dashLength[1]=g.spaceLength),g.nullPointMode!==void 0&&(this.nullPointMode=g.nullPointMode),g.pointradius!==void 0&&(this.points.radius=g.pointradius),g.steppedLine!==void 0&&(this.lines.steps=g.steppedLine),g.zindex!==void 0&&(this.zindex=g.zindex),g.fillBelowTo!==void 0&&(this.fillBelowTo=g.fillBelowTo),g.color!==void 0&&this.setColor(g.color),g.transform!==void 0&&(this.transform=g.transform),g.legend!==void 0&&(this.legend=g.legend),g.hideTooltip!==void 0&&(this.hideTooltip=g.hideTooltip),g.yaxis!==void 0&&(this.yaxis=g.yaxis),g.hiddenSeries!==void 0&&(this.hiddenSeries=g.hiddenSeries))}}getFlotPairs(d){const c=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const g=d==="connected",p=d==="null as zero";let y,h,a=0,v,C=0,E=!0;for(let P=0;P<this.datapoints.length;P++){if(h=this.datapoints[P][0],y=this.datapoints[P][1],v!==void 0){const x=y-v;x<this.stats.timeStep&&(this.stats.timeStep=x)}if(v=y,h===null){if(g)continue;p&&(h=0)}h!==null&&((0,t.isNumber)(h)&&(this.stats.total+=h,this.allIsNull=!1,a++),h>this.stats.max&&(this.stats.max=h),h<this.stats.min&&(this.stats.min=h),this.stats.first===null?this.stats.first=h:C>h?(E=!1,P===this.datapoints.length-1&&(this.stats.delta+=h)):(E?this.stats.delta+=h-C:this.stats.delta+=h,E=!0),C=h,h<this.stats.logmin&&h>0&&(this.stats.logmin=h),h!==0&&(this.allIsZero=!1)),c.push([y,h])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),c.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/a,this.stats.current=c[c.length-1][1],this.stats.current===null&&c.length>1&&(this.stats.current=c[c.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=c.length,c}updateLegendValues(d,c){this.valueFormater=d,this.decimals=c}formatValue(d){return(0,t.isFinite)(d)||(d=null),(0,s.zc)(this.valueFormater(d,this.decimals))}isMsResolutionNeeded(){for(let d=0;d<this.datapoints.length;d++)if(this.datapoints[d][1]!==null&&this.datapoints[d][1]!==void 0){const c=this.datapoints[d][1].toString();if(c.length===13&&c%1e3!==0)return!0}return!1}hideFromLegend(d){return!!(d.hideEmpty&&this.allIsNull||!this.legend||d.hideZero&&this.allIsZero)}setColor(d){this.color=d,this.bars.fillColor=d}}},92973:(G,O,e)=>{"use strict";e.d(O,{E:()=>m,f:()=>i});var t=e(68404),n=e(1821),u=e(29516),s=e(77582);const i=({children:f,value:o})=>{const[l,r]=(0,t.useState)(o);return(0,t.useEffect)(()=>{const d=s.h$.subscribe(n.hD,c=>{r(c.payload)});return()=>d.unsubscribe()},[]),t.createElement(u.Ni.Provider,{value:l},f)},m=(f,o)=>function(r){return t.createElement(i,{value:o},t.createElement(f,{...r}))}},77410:(G,O,e)=>{"use strict";e.d(O,{q:()=>t});class t extends window.Worker{constructor(u,s){const i=u.toString(),m=i.split("/");m.pop();const f=`${m.join("/")}/`,o=`importScripts('${i}');`,l=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${f}'; ${o}`],{type:"application/javascript"}));super(l,s),URL.revokeObjectURL(l)}}},95156:(G,O,e)=>{"use strict";e.d(O,{y:()=>n});var t=e(47694);function n(u={}){return t.ZP.rbacEnabled?{...u,accesscontrol:!0}:u}},2024:(G,O,e)=>{"use strict";e.d(O,{A:()=>t});function t(u){return u.map(n).sort((s,i)=>i.sortRank-s.sortRank||s.name.localeCompare(i.name))}function n(u){const s=u;return s.sortRank=0,s.userId>0?(s.name=s.userLogin,s.sortRank=10):s.teamId>0?(s.name=s.team,s.sortRank=20):s.role&&(s.icon="fa fa-fw fa-street-view",s.name=s.role,s.sortRank=30,s.role==="Editor"&&(s.sortRank+=1)),s.inherited&&(s.sortRank+=100),s}},79378:(G,O,e)=>{"use strict";e.d(O,{R:()=>t});const t=(n,u,s)=>(n.splice(s,0,n.splice(u,1)[0]),n)},43226:(G,O,e)=>{"use strict";e.d(O,{vl:()=>u});function t(){const s=navigator.userAgent.indexOf("MSIE")>-1,i=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,m=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),o=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return s&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||i&&(o&&parseFloat(o[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||m&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(f&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function n(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function u(){return n()?"cmd":"ctrl"}},28630:(G,O,e)=>{"use strict";e.d(O,{kJ:()=>u});class t{_linkTo(f,o){o<=0&&f.inputEdges.push(this),o>=0&&f.outputEdges.push(this),f.edges.push(this)}link(f,o){if(!f)throw Error("inputNode is required");if(!o)throw Error("outputNode is required");return this.unlink(),this.inputNode=f,this.outputNode=o,this._linkTo(f,1),this._linkTo(o,-1),this}unlink(){let f;const o=this.inputNode,l=this.outputNode;o&&l&&(f=o.edges.indexOf(this),f>-1&&o.edges.splice(f,1),f=l.edges.indexOf(this),f>-1&&l.edges.splice(f,1),f=o.outputEdges.indexOf(this),f>-1&&o.outputEdges.splice(f,1),f=l.inputEdges.indexOf(this),f>-1&&l.inputEdges.splice(f,1))}}class n{constructor(f){this.name=f,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(f){return f?typeof f=="object"?this.inputEdges.find(o=>o.inputNode?.name===f.name):this.inputEdges.find(o=>o.inputNode?.name===f):null}getEdgeTo(f){return f?typeof f=="object"?this.outputEdges.find(o=>o.outputNode?.name===f.name):this.outputEdges.find(o=>o.outputNode?.name===f):null}getOptimizedInputEdges(){const f=[];return this.inputEdges.forEach(o=>{o.inputNode?.inputEdges.map(r=>r.inputNode)?.forEach(r=>{const d=r?.getEdgeTo(this.name);d&&f.push(d)})}),this.inputEdges.filter(o=>f.indexOf(o)===-1)}}class u{constructor(){this.nodes={}}createNode(f){const o=new n(f);return this.nodes[f]=o,o}createNodes(f){const o=[];return f.forEach(l=>{o.push(this.createNode(l))}),o}link(f,o){let l=[],r=[];const d=[],c=[];f instanceof Array?l=f:l=[f],o instanceof Array?r=o:r=[o];for(let p=0;p<l.length;p++){const y=l[p];if(typeof y=="string"){const h=this.getNode(y);if(!h)throw Error(`cannot link input node named ${y} since it doesn't exist in graph`);d.push(h)}else d.push(y)}for(let p=0;p<r.length;p++){const y=r[p];if(typeof y=="string"){const h=this.getNode(y);if(!h)throw Error(`cannot link output node named ${y} since it doesn't exist in graph`);c.push(h)}else c.push(y)}const g=[];return d.forEach(p=>{c.forEach(y=>{g.push(this.createEdge().link(p,y))})}),g}descendants(f){if(!f.length)return new Set;const o=new Set(i(f)?f.map(l=>this.nodes[l]).filter(l=>l!==void 0):f);return this.descendantsRecursive(o)}descendantsRecursive(f,o=new Set){for(const l of f){const r=new Set;for(const{inputNode:d}of l.inputEdges)d&&!o.has(d)&&(o.add(d),r.add(d));this.descendantsRecursive(r,o)}return o}createEdge(){return new t}getNode(f){return this.nodes[f]}}const s=m=>{Object.keys(m.nodes).forEach(f=>{const o=m.nodes[f];let l=o.outputEdges.map(d=>d.outputNode?.name).join(", ");l||(l="<none>");let r=o.inputEdges.map(d=>d.inputNode?.name).join(", ");r||(r="<none>"),console.log(`${o.name}:
 - links to:   ${l}
 - links from: ${r}`)})};function i(m){return m.length>0&&typeof m[0]=="string"}},82052:(G,O,e)=>{"use strict";e.d(O,{i:()=>u});var t=e(82897),n=e.n(t);function u(s){return s&&!(0,t.isString)(s)?s.message?s.message:s.data&&s.data.message?s.data.message:s.statusText?s.statusText:JSON.stringify(s):s}},55935:(G,O,e)=>{"use strict";e.d(O,{$$:()=>k,F3:()=>De,H6:()=>P,HI:()=>w,I$:()=>E,J5:()=>L,OQ:()=>H,Oy:()=>ge,RZ:()=>fe,UI:()=>h,Xh:()=>R,Xk:()=>A,Z8:()=>I,Zf:()=>x,_Q:()=>b,_o:()=>W,fR:()=>N,n9:()=>ce,uC:()=>M,vP:()=>ee,z_:()=>V});var t=e(82897),n=e.n(t),u=e(44288),s=e(90595),i=e(27677),m=e(40400),f=e(69311),o=e(33180),l=e(46519),r=e(21053),d=e(77213),c=e(45781),g=e(58379),p=e(47694),y=e(99822);const h={from:"now-1h",to:"now"},a={dedupStrategy:s.Y4.none},v=100,C="grafana.explore.datasource",E=ie=>`${C}.${ie}`;async function P(ie){const{panel:re,datasourceSrv:Ee,timeSrv:J}=ie;let te=await Ee.get(re.datasource),ne=re.targets.map(be=>(0,t.omit)(be,"legendFormat")),j;if(p.vc.featureToggles.exploreMixedDatasource===!1&&te.meta?.id==="mixed"&&ne)for(const be of ne){const Le=await Ee.get(be.datasource||void 0);if(Le){te=Le,ne=re.targets.filter(Qe=>Qe.datasource===Le.name);break}}if(te){let Le={range:J.timeRangeForUrl()};if(te.interpolateVariablesInQueries){const Ye=re.scopedVars||{};Le={...Le,datasource:te.name,context:"explore",queries:te.interpolateVariablesInQueries(ne,Ye)}}else Le={...Le,datasource:te.name,context:"explore",queries:ne};const Qe=JSON.stringify(Le);j=i.Cj.renderUrl("/explore",{left:Qe})}return j}function x(ie,re,Ee,J,te,ne){const j=re.reduce((de,Be)=>(de+=Be.key,de),""),{interval:be,intervalMs:Le}=me(J,Ee.minInterval,Ee.maxDataPoints),Qe=`${j}`,Ye={app:m.zj.Explore,dashboardId:0,timezone:ne||f.Ys,startTime:Date.now(),interval:be,intervalMs:Le,panelId:Qe,targets:re,range:J,requestId:"explore_"+ie,rangeRaw:J.raw,scopedVars:{__interval:{text:be,value:be},__interval_ms:{text:Le,value:Le}},maxDataPoints:Ee.maxDataPoints,liveStreaming:Ee.liveStreaming};return{queries:re,request:Ye,scanning:te,id:w(),done:!1}}const M=({key:ie,...re})=>re,S=(ie,...re)=>re.some(Ee=>ie.hasOwnProperty(Ee));var D=(ie=>(ie[ie.RangeFrom=0]="RangeFrom",ie[ie.RangeTo=1]="RangeTo",ie[ie.Datasource=2]="Datasource",ie[ie.SegmentsStart=3]="SegmentsStart",ie))(D||{});const T=ie=>{if(ie)try{return JSON.parse(ie)}catch(re){console.error(re)}},R=(ie,re)=>{if(!ie)return"";try{return JSON.stringify(ie,null,re)}catch(Ee){console.error(Ee)}return""};function L(ie){const re=T(ie),Ee={datasource:null,queries:[],range:h,mode:null};if(!re)return Ee;if(!Array.isArray(re))return{...re,isFromCompactUrl:!1};if(re.length<=3)return console.error("Error parsing compact URL state for Explore."),Ee;const J={from:re[0],to:re[1]},te=re[2],ne=re.slice(3),j=ne.filter(Le=>!S(Le,"ui","mode","__panelsState")),be=ne.find(Le=>S(Le,"__panelsState"))?.__panelsState;return{datasource:te,queries:j,range:J,panelsState:be,isFromCompactUrl:!0}}function w(ie=0){return`Q-${(0,u.Z)()}-${ie}`}async function A(ie,re=0,Ee){let J,te,ne;return Ee?te=Ee:ie.length>0&&ie[ie.length-1].datasource?te=ie[ie.length-1].datasource:(J=await(0,d.F)().get(),ne=J.getDefaultQuery?.(m.zj.Explore),te=J.getRef()),J||(J=await(0,d.F)().get(te),ne=J.getDefaultQuery?.(m.zj.Explore)),{refId:(0,y.Hs)(ie),key:w(re),datasource:te,...ne}}const N=(ie,re,Ee=0)=>{const J=w(Ee),te=ie.refId||(0,y.Hs)(re);return{...ie,refId:te,key:J}},W=ie=>{const re=ie.map(Ee=>Ee.datasource?.uid);return{allHaveDatasource:re.length===ie.length,noneHaveDatasource:re.length===0,allDatasourceSame:re.every((Ee,J,te)=>Ee===te[0])}};async function I(ie,re){if(ie&&typeof ie=="object"&&ie.length>0){const Ee=[];for(let J=0;J<ie.length;J++){const te=ie[J],ne=w(J);let j=te.refId;j||(j=(0,y.Hs)(Ee));let be=!0;if(te.datasource)try{await(0,d.F)().get(te.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),be=!1}be&&Ee.push({...te,refId:j,key:ne})}return Ee}try{const Ee=re??(await(0,d.F)().get()).getRef();return[await A(ie??[],void 0,Ee)]}catch{return[]}}const F=["refId","key","context","datasource"];function V(ie){return ie&&ie.some(re=>Object.keys(re).filter(J=>F.indexOf(J)===-1).map(J=>re[J]).filter(J=>J).length>0)}function b(ie,re,Ee){const J=Date.now();let te=ie;Ee.forEach(j=>{te=[{query:j,ts:J},...te]}),te.length>v&&(te=te.slice(0,v));const ne=`grafana.explore.history.${re}`;try{return g.Z.setObject(ne,te),te}catch(j){return console.error(j),ie}}function X(ie){const re=`grafana.explore.history.${ie}`;store.delete(re)}const k=ie=>ie.reduce((Ee,J,te)=>{const ne=J.datasource?.uid||J.key;return Ee.concat(`${ne}-${te}`)},[]),H=(ie,re,Ee)=>{let J=o.convertRawToRange(re,ie,Ee);return J.to.isBefore(J.from)&&(J=o.convertRawToRange({from:J.raw.to,to:J.raw.from},ie,Ee)),J},Y=ie=>{if(ie===null)return null;if((0,l.v9)(ie)||ie.indexOf("now")!==-1)return ie;if(ie.length===8)return(0,l.zh)(ie,"YYYYMMDD");if(ie.length===15)return(0,l.zh)(ie,"YYYYMMDDTHHmmss");if(ie.length===19)return(0,l.zh)(ie,"YYYY-MM-DD HH:mm:ss");if(ie.match(/^\d+$/)){const Ee=parseInt(ie,10);return(0,l.zh)(Ee)}const re=(0,l.zh)(ie);return re.isValid()?re:null},ee=(ie,re,Ee)=>{const J={from:Y(ie.from),to:Y(ie.to)};return{from:r.parse(J.from,!1,re),to:r.parse(J.to,!0,re),raw:J}},ue=ie=>{if(!ie||typeof ie!="object")return;if(ie.refId)return ie;const re=Object.keys(ie);for(let Ee=0;Ee<re.length;Ee++){const J=re[Ee],te=ue(ie[J]);if(te)return te}},q=ie=>{if(!ie)return[];if(typeof ie!="object")return[];const re=Object.keys(ie),Ee=[];for(let J=0;J<re.length;J++){const te=re[J];if(te==="refId"){Ee.push(ie[te]);continue}Ee.push(q(ie[te]))}return uniq(flatten(Ee))},ge=ie=>c.dP.isLive(ie)?s.UV.Ascending:s.UV.Descending,De=ie=>{let Ee=`${window.location.protocol==="https:"?"wss://":"ws://"}${window.location.host}${p.vc.appSubUrl}`;return Ee.endsWith("/")&&(Ee=Ee.slice(0,-1)),`${Ee}${ie}`},fe=ie=>{ie&&ie.unsubscribe()};function me(ie,re,Ee){return Ee?o.calculateInterval(ie,Ee,re):{interval:"1s",intervalMs:1e3}}const ce=ie=>{const re=document.createElement("textarea");re.value=ie,document.body.appendChild(re),re.select(),document.execCommand("copy"),document.body.removeChild(re)}},8878:(G,O,e)=>{"use strict";e.d(O,{Xv:()=>h,aO:()=>p,nS:()=>s,rZ:()=>c,tW:()=>y});var t=e(82897),n=e.n(t),u=e(99227);const s=v=>{const C=v.method,E=d(v),P=c(E),x=g(v,P),M=a(v);return{method:C,headers:E,body:x,credentials:M}},i={canParse:()=>!0,parse:v=>(v.get("accept")||v.set("accept","application/json, text/plain, */*"),v)},m=v=>({canParse:C=>(C?.method?C?.method.toLowerCase():"")===v,parse:C=>(C.get("content-type")||C.set("content-type","application/json"),C)}),f=m("post"),o=m("put"),l=m("patch"),r=[f,o,l,i],d=v=>{const C=v?.headers?new Headers(v.headers):new Headers;return r.filter(x=>x.canParse(v)).reduce((x,M)=>M.parse(x),C)},c=v=>{if(!v)return!1;const C=v.get("content-type");return!!(C&&C.toLowerCase()==="application/json")},g=(v,C)=>v&&(!v.data||typeof v.data=="string"?v.data:C?JSON.stringify(v.data):new URLSearchParams(v.data));async function p(v,C){if(C)switch(C){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"json":return v.headers.get("Content-Length")==="0"?(console.warn(`${v.url} returned an invalid JSON`),{}):await v.json();case"text":return v.text()}const E=await v.text();try{return JSON.parse(E)}catch{}return E}function y(v){return Object.keys(v).map(C=>{const E=v[C];return Array.isArray(E)?E.map(P=>`${encodeURIComponent(C)}=${encodeURIComponent(P)}`).join("&"):`${encodeURIComponent(C)}=${encodeURIComponent(E)}`}).join("&")}const h=v=>{const C=(0,t.omitBy)(v.params,P=>P===void 0||P&&P.length===0),E=y(C);return v.params&&E.length?`${v.url}?${E}`:v.url},a=v=>v&&(v.credentials?v.credentials:v.withCredentials?((0,u.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin")},40229:(G,O,e)=>{"use strict";e.r(O),e.d(O,{default:()=>t});function t(n,u){u=u||{};const s=u.delimiter||".";let i=u.maxDepth||3,m=1;const f={};function o(l,r){Object.keys(l).forEach(d=>{const c=l[d],g=u?.safe&&Array.isArray(c),y=Object.prototype.toString.call(c)==="[object Object]",h=r?r+s+d:d;if(u?.maxDepth||(i=m+1),!g&&y&&Object.keys(c).length&&m<i)return++m,o(c,h);f[h]=c})}return o(n,null),f}},24816:(G,O,e)=>{"use strict";e.d(O,{Z:()=>m});var t=e(99227),n=e(29076),u=e(33180),s=e(20112);const i={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:f=>((0,t.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.yI)(f)),roundInterval:f=>((0,t.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),u.roundInterval(f)),secondsToHms:f=>((0,t.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),u.secondsToHms(f)),secondsToHhmmss:f=>{const o=[],l=Math.floor(f/3600),r=Math.floor(f%3600/60),d=Math.floor(f%3600%60);return l>9?o.push(""+l):o.push("0"+l),r>9?o.push(""+r):o.push("0"+r),d>9?o.push(""+d):o.push("0"+d),o.join(":")},toPercent:(f,o)=>Math.floor(f/o*1e4)/100+"%",addSlashes:f=>f.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:f=>((0,t.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),u.describeInterval(f)),intervalToSeconds:f=>((0,t.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),u.intervalToSeconds(f)),intervalToMs:f=>((0,t.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),u.intervalToMs(f)),calculateInterval:(f,o,l)=>((0,t.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),u.calculateInterval(f,o,l)),queryColorDot:(f,o)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+f,"font-size:"+o+"px"].join(";")+'"></div>',slugifyForUrl:f=>f.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:f=>((0,t.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.jO)(f)),toFixed:(f,o)=>{if(f===null)return"";const l=o?Math.pow(10,Math.max(0,o)):1,r=String(Math.round(f*l)/l);if(r.indexOf("e")!==-1||f===0)return r;if(o!=null){const d=r.indexOf("."),c=d===-1?0:r.length-d-1;if(c<o)return(c?r:r+".")+String(l).slice(1,o-c+1)}return r},toFixedScaled:(f,o,l,r,d)=>l===null?i.toFixed(f,o)+d:i.toFixed(f,l+r)+d,roundValue:(f,o)=>{if(f===null)return null;const l=Math.pow(10,o),r=(l*f).toFixed(o);return Math.round(parseFloat(r))/l},getUnitFormats:s.QW};typeof Proxy<"u"?i.valueFormats=new Proxy(i.valueFormats,{get(f,o,l){if(typeof o!="string")throw{message:`Value format ${String(o)} is not a string`};const r=(0,s.Cf)(o);return r?(d,c,g,p)=>(0,s.zc)(r(d,c,g,p?"utc":"browser")):Reflect.get(f,o,l)}}):i.valueFormats=(0,s.Td)();const m=i},99822:(G,O,e)=>{"use strict";e.d(O,{DI:()=>u,Hs:()=>t,R8:()=>i,mu:()=>s,sB:()=>f,vH:()=>n});const t=o=>{for(let l=0;;l++){const r=m(l);if(!o.some(d=>d.refId===r))return r}};function n(o){const l=["refId","hide","key","queryType","datasource"];for(const r in o)if(r!=="label"&&!l.includes(r))return!1;return!0}function u(o,l,r){const d=l||{};return d.refId=t(o),d.hide=!1,!d.datasource&&r&&(d.datasource=r),[...o,d]}function s(o){return o.indexOf("api/datasources/proxy")!==-1||o.indexOf("api/ds/query")!==-1}function i(o){return!o.match(/^http/)}function m(o){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return o<l.length?l[o]:m(Math.floor(o/l.length)-1)+l[o%l.length]}function f(o){return o||void 0}},51424:(G,O,e)=>{"use strict";e.d(O,{As:()=>p.A,DR:()=>W,HK:()=>C,OH:()=>A,VI:()=>E,au:()=>y,bQ:()=>T,di:()=>v,gt:()=>P,k4:()=>N,kg:()=>a,rq:()=>S,rv:()=>M,t2:()=>D,ub:()=>h,y9:()=>x});var t=e(82897),n=e.n(t),u=e(27677),s=e(38849),i=e(77213),m=e(659),f=e(60499),o=e(3153),l=e(47694),r=e(66719),d=e(4420),c=e(12151),g=e(40967),p=e(43823);async function y(F,V,b,X,k,H,Y){const ee=b&&b.filter(ue=>I(ue));if(ee.length>0){let ue=!1,q=!1,ge;try{ge=(await(0,g.b)().addToRichHistory({datasourceUid:F,datasourceName:V??"",queries:ee,starred:X,comment:k??""})).warning}catch(De){return De instanceof Error&&(De.name===c.j.StorageFull?(ue=!0,H&&(0,o.WI)((0,m.$l)((0,f.t_)(De.message)))):De.name!==c.j.DuplicatedEntry&&(0,o.WI)((0,m.$l)((0,f.t_)("Rich History update failed",De.message)))),{richHistoryStorageFull:ue,limitExceeded:q}}return ge&&ge.type===c.V.LimitExceeded&&(q=!0,Y&&(0,o.WI)((0,m.$l)((0,f.ZR)(ge.message)))),{richHistoryStorageFull:ue,limitExceeded:q}}return{}}async function h(F){return await(0,g.b)().getRichHistory(F)}async function a(F){await(0,g.b)().updateSettings(F)}async function v(){return await(0,g.b)().getSettings()}async function C(){return(0,g.b)().deleteAll()}async function E(F,V){try{return await(0,g.b)().updateStarred(F,V)}catch(b){b instanceof Error&&(0,o.WI)((0,m.$l)((0,f.t_)("Saving rich history failed",b.message)));return}}async function P(F,V){try{return await(0,g.b)().updateComment(F,V)}catch(b){b instanceof Error&&(0,o.WI)((0,m.$l)((0,f.t_)("Saving rich history failed",b.message)));return}}async function x(F){try{return await(0,g.b)().deleteRichHistory(F),F}catch(V){V instanceof Error&&(0,o.WI)((0,m.$l)((0,f.t_)("Saving rich history failed",V.message)));return}}var M=(F=>(F.Successful="successful",F.Failed="failed",F.NotNeeded="not-needed",F))(M||{});async function S(){const F=new r.ZP,V=new d.Z;try{const{richHistory:b}=await F.getRichHistory({datasourceFilters:[],from:0,search:"",sortOrder:p.A.Descending,starred:!1,to:14});return b.length===0?{status:"not-needed"}:(await V.migrate(b),(0,o.WI)((0,m.$l)((0,f.AT)("Query history successfully migrated from local storage"))),{status:"successful"})}catch(b){const X=b instanceof Error?b:new Error("Uknown error occurred.");return(0,o.WI)((0,m.$l)((0,f.ZR)(`Query history migration failed. ${X.message}`))),{status:"failed",error:X}}}const D=F=>{const V={range:{from:"now-1h",to:"now"},datasource:F.datasourceName,queries:F.queries,context:"explore"},b=(0,u.S)(V),X=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return u.Cj.renderUrl(`${X}/explore`,{left:b})},T=F=>{let V;switch(F){case 0:V="today";break;case 1:V="yesterday";break;case 7:V="a week ago";break;case 14:V="two weeks ago";break;default:V=`${F} days ago`}return V};function R(F){return(0,s.dq)(F,{format:"MMMM D"})}function L(F){const V=(0,t.omit)(F,["key","refId","datasource"]);return JSON.stringify(V)}function w(F,V){let b="";return V===p.A.DatasourceAZ||V===p.A.DatasourceZA?b=F.datasourceName:b=R(F.createdAt),b}function A(F,V){return V?.getQueryDisplayText?V.getQueryDisplayText(F):L(F)}function N(F,V){let b={};return F.forEach(X=>{let k=w(X,V);k in b?b[k]=[...b[k],X]:b[k]=[X]}),b}function W(){return(0,i.F)().getList({mixed:l.vc.featureToggles.exploreMixedDatasource===!0}).map(F=>({name:F.name,uid:F.uid,imgUrl:F.meta.info.logos.small}))}function I(F){const V=(0,t.omit)(F,["key","refId","datasource"]);return Object.keys(V).length>0}},43823:(G,O,e)=>{"use strict";e.d(O,{A:()=>t});var t=(n=>(n.Descending="Descending",n.Ascending="Ascending",n.DatasourceAZ="Datasource A-Z",n.DatasourceZA="Datasource Z-A",n))(t||{})},57465:(G,O,e)=>{"use strict";e.d(O,{D:()=>r,L:()=>d});var t=e(58635),n=e(93003),u=e(47214),s=e(659),i=e(60499),m=e(3153),f=e(55935);function o(){return`${window.location.protocol}//${window.location.host}${n.v.appSubUrl}`}function l(c){let g=c.replace(o(),"");return g.startsWith("/")?g.substring(1,g.length):g}const r=(0,t.Z)(async function(c){try{return(await(0,u.i)().post("/api/short-urls",{path:l(c)})).url}catch(g){console.error("Error when creating shortened link: ",g),(0,m.WI)((0,s.$l)((0,i.t_)("Error generating shortened link")))}}),d=async c=>{const g=await r(c);g?((0,f.n9)(g),(0,m.WI)((0,s.$l)((0,i.AT)("Shortened link copied to clipboard")))):(0,m.WI)((0,s.$l)((0,i.t_)("Error generating shortened link")))}},97724:(G,O,e)=>{"use strict";e.r(O),e.d(O,{getFlotRange:()=>s,getFlotTickDecimals:()=>i,getFlotTickSize:()=>u,getPrecision:()=>o,getScaledDecimals:()=>n,getStringPrecision:()=>l,grafanaTimeFormat:()=>m,logp:()=>f,tickStep:()=>t});function t(r,d,c){const g=Math.sqrt(50),p=Math.sqrt(10),y=Math.sqrt(2),h=Math.abs(d-r)/Math.max(0,c);let a=Math.pow(10,Math.floor(Math.log(h)/Math.LN10));const v=h/a;return v>=g?a*=10:v>=p?a*=5:v>=y&&(a*=2),d<r?-a:a}function n(r,d){return r-Math.floor(Math.log(d)/Math.LN10)}function u(r,d,c,g){const p=(d-r)/c;let y=-Math.floor(Math.log(p)/Math.LN10);const h=g,a=Math.pow(10,-y),v=p/a;let C;return v<1.5?C=1:v<3?(C=2,v>2.25&&(h==null||y+1<=h)&&(C=2.5,++y)):v<7.5?C=5:C=10,C*=a,C}function s(r,d,c,g){let y=+(r??c),h=+(d??g);const a=h-y;if(a===0){const C=Math.abs(h===0?1:h*.25);r===null&&(y-=C),(d==null||r!=null)&&(h+=C)}else .02!=null&&(r==null&&(y-=a*.02,y<0&&c!=null&&c>=0&&(y=0)),d==null&&(h+=a*.02,h>0&&g!=null&&g<=0&&(h=0)));return{min:y,max:h}}function i(r,d,c,g){const{min:p,max:y}=s(c.min,c.max,r,d),h=.3*Math.sqrt(g),a=(y-p)/h,v=-Math.floor(Math.log(a)/Math.LN10),C=Math.pow(10,-v),E=a/C;let P;E<1.5?P=1:E<3?(P=2,E>2.25&&(P=2.5)):E<7.5?P=5:P=10,P*=C;const x=Math.max(0,-Math.floor(Math.log(a)/Math.LN10)+1),M=x-Math.floor(Math.log(P)/Math.LN10);return{tickDecimals:x,scaledDecimals:M}}function m(r,d,c){if(d&&c&&r){const g=c-d,p=g/r/1e3,y=864e5,h=31536e6;return p<=45?"HH:mm:ss":p<=7200||g<=y?"HH:mm":p<=8e4?"MM/DD HH:mm":p<=2419200||g<=h?"MM/DD":"YYYY-MM"}return"HH:mm"}function f(r,d){return Math.log(r)/Math.log(d)}function o(r){const d=r.toString();return l(d)}function l(r){if(isNaN(r))return 0;const d=r.indexOf(".");return d===-1?0:r.length-d-1}},5242:(G,O,e)=>{"use strict";e.d(O,{e:()=>n,h:()=>u});var t=e(46519);const n=(s,i)=>{const m={from:(0,t.zh)(i.from),to:(0,t.zh)(i.to)},f=(m.to.valueOf()-m.from.valueOf())/2;let o,l;return s===-1?(o=m.to.valueOf()-f,l=m.from.valueOf()-f):s===1?(o=m.to.valueOf()+f,l=m.from.valueOf()+f,o>Date.now()&&m.to.valueOf()<Date.now()&&(o=Date.now(),l=m.from.valueOf())):(o=m.to.valueOf(),l=m.from.valueOf()),{from:l,to:o}},u=(s,i)=>{const m=s.to.valueOf()-s.from.valueOf(),f=s.to.valueOf()-m/2,o=m===0?3e4:m*i,l=f+o/2;return{from:f-o/2,to:l}}},53747:(G,O,e)=>{"use strict";e.d(O,{v:()=>n});let t="";const n=()=>{const s=new URLSearchParams(window.location.search).get("auth_token");return s!==null&&s!==""?(t=s,s):t}},65135:(G,O,e)=>{"use strict";e.d(O,{A:()=>i});var t=e(68404),n=e(74020),u=e(46739);const s=Object.keys(n.B).map(m=>({label:m,value:m}));function i({value:m,onChange:f,"aria-label":o,inputId:l,autoFocus:r,...d}){return t.createElement(u.Ph,{inputId:l,value:m,options:s,onChange:c=>f(c.value),placeholder:"Choose role...","aria-label":o,autoFocus:r,...d})}},37592:(G,O,e)=>{"use strict";e.d(O,{B9:()=>h,CP:()=>L,Dx:()=>a,Fm:()=>T,IS:()=>W,Jk:()=>x,M6:()=>X,Nq:()=>p,PK:()=>c,R5:()=>b,V0:()=>N,Xx:()=>C,Y3:()=>w,_1:()=>D,bN:()=>P,b_:()=>A,h8:()=>v,j4:()=>R,oO:()=>k,tQ:()=>y,uV:()=>M,uh:()=>F});var t=e(82897),n=e.n(t),u=e(38849),s=e(14876),i=e(47214),m=e(57388),f=e(47694),o=e(77582),l=e(95156),r=e(81168),d=e(66114);function c(H){return async Y=>{try{Y((0,d.UA)(!1)),await Y(g(H)),await Y(E(H)),await Y(S(H)),f.ZP.ldapEnabled&&(0,s.v)("ldapsync")&&await Y(R()),Y((0,d.UA)(!0))}catch(ee){if(console.error(ee),(0,i.kW)(ee)){const ue={title:ee.data.message,body:ee.data.error};Y((0,d.sL)(ue))}}}}function g(H){return async Y=>{const ee=await(0,i.i)().get(`/api/users/${H}`,(0,l.y)());Y((0,d.pm)(ee))}}function p(H){return async Y=>{await(0,i.i)().put(`/api/users/${H.id}`,H),Y(c(H.id))}}function y(H,Y){return async ee=>{const ue={password:Y};await(0,i.i)().put(`/api/admin/users/${H}/password`,ue),ee(c(H))}}function h(H){return async Y=>{await(0,i.i)().post(`/api/admin/users/${H}/disable`),m.E1.push("/admin/users")}}function a(H){return async Y=>{await(0,i.i)().post(`/api/admin/users/${H}/enable`),Y(c(H))}}function v(H){return async Y=>{await(0,i.i)().delete(`/api/admin/users/${H}`),m.E1.push("/admin/users")}}function C(H,Y){return async ee=>{const ue={isGrafanaAdmin:Y};await(0,i.i)().put(`/api/admin/users/${H}/permissions`,ue),ee(c(H))}}function E(H){return async Y=>{const ee=await(0,i.i)().get(`/api/users/${H}/orgs`);Y((0,d.fm)(ee))}}function P(H,Y,ee){return async ue=>{const q={loginOrEmail:H.login,role:ee};await(0,i.i)().post(`/api/orgs/${Y}/users/`,q),ue(c(H.id))}}function x(H,Y,ee){return async ue=>{const q={role:ee};await(0,i.i)().patch(`/api/orgs/${Y}/users/${H}`,q),ue(c(H))}}function M(H,Y){return async ee=>{await(0,i.i)().delete(`/api/orgs/${Y}/users/${H}`),ee(c(H))}}function S(H){return async Y=>{if(!o.Vt.hasPermission(r.AccessControlAction.UsersAuthTokenList))return;const ee=await(0,i.i)().get(`/api/admin/users/${H}/auth-tokens`);ee.reverse();const ue=ee.map(q=>({id:q.id,isActive:q.isActive,seenAt:(0,u.E8)(q.seenAt),createdAt:q.createdAt,clientIp:q.clientIp,browser:q.browser,browserVersion:q.browserVersion,os:q.os,osVersion:q.osVersion,device:q.device}));Y((0,d.RC)(ue))}}function D(H,Y){return async ee=>{const ue={authTokenId:H};await(0,i.i)().post(`/api/admin/users/${Y}/revoke-auth-token`,ue),ee(S(Y))}}function T(H){return async Y=>{await(0,i.i)().post(`/api/admin/users/${H}/logout`),Y(S(H))}}function R(){return async H=>{const Y=o.Vt.hasPermission(r.AccessControlAction.LDAPStatusRead);if((0,s.v)("ldapsync")&&Y){const ee=await(0,i.i)().get("/api/admin/ldap-sync-status");H((0,d.CY)(ee))}}}function L(H){return async Y=>{await(0,i.i)().post(`/api/admin/ldap/sync/${H}`),Y(c(H))}}function w(){return async H=>{if(o.Vt.hasPermission(r.AccessControlAction.LDAPStatusRead))try{const Y=await(0,i.i)().get("/api/admin/ldap/status");H((0,d.Ls)(Y))}catch(Y){if((0,i.kW)(Y)){Y.isHandled=!0;const ee={title:Y.data.message,body:Y.data.error};H((0,d.y3)(ee))}}}}function A(H){return async Y=>{try{const ee=await(0,i.i)().get(`/api/admin/ldap/${encodeURIComponent(H)}`),{name:ue,surname:q,email:ge,login:De,isGrafanaAdmin:fe,isDisabled:me,roles:ce,teams:ie}=ee,re={info:{name:ue,surname:q,email:ge,login:De},permissions:{isGrafanaAdmin:fe,isDisabled:me},roles:ce,teams:ie};Y((0,d.sJ)(re))}catch(ee){if((0,i.kW)(ee)){ee.isHandled=!0;const ue={title:ee.data.message,body:ee.data.error};Y((0,d.eq)()),Y((0,d.VB)(ue))}}}}function N(){return H=>{H((0,d.WO)())}}function W(){return H=>{H((0,d.WO)()),H((0,d.eq)())}}const I=H=>H.map(Y=>Array.isArray(Y.value)?Y.value.map(ee=>`${Y.name}=${ee.value}`).join("&"):`${Y.name}=${Y.value}`).join("&");function F(){return async(H,Y)=>{try{const{perPage:ee,page:ue,query:q,filters:ge}=Y().userListAdmin,De=await(0,i.i)().get(`/api/users/search?perpage=${ee}&page=${ue}&query=${q}&${I(ge)}`);H((0,d.xh)(De))}catch(ee){(0,d.k7)(),console.error(ee)}}}const V=(0,t.debounce)(H=>H(F()),500);function b(H){return async Y=>{Y((0,d.tZ)()),Y((0,d.aj)(H)),V(Y)}}function X(H){return async Y=>{Y((0,d.tZ)()),Y((0,d.qz)(H)),V(Y)}}function k(H){return async Y=>{Y((0,d.tZ)()),Y((0,d.PJ)(H)),Y(F())}}},66114:(G,O,e)=>{"use strict";e.d(O,{CY:()=>o,Ls:()=>m,PJ:()=>T,RC:()=>h,UA:()=>a,VB:()=>l,WO:()=>s,ZP:()=>w,aj:()=>D,eq:()=>i,fm:()=>y,k7:()=>S,pm:()=>p,qz:()=>R,sJ:()=>r,sL:()=>v,tZ:()=>M,xh:()=>x,y3:()=>f});var t=e(32557);const n={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},u=(0,t.oM)({name:"ldap",initialState:n,reducers:{ldapConnectionInfoLoadedAction:(A,N)=>({...A,ldapError:void 0,connectionInfo:N.payload}),ldapFailedAction:(A,N)=>({...A,ldapError:N.payload}),ldapSyncStatusLoadedAction:(A,N)=>({...A,syncInfo:N.payload}),userMappingInfoLoadedAction:(A,N)=>({...A,user:N.payload,userError:void 0}),userMappingInfoFailedAction:(A,N)=>({...A,user:void 0,userError:N.payload}),clearUserMappingInfoAction:(A,N)=>({...A,user:void 0}),clearUserErrorAction:(A,N)=>({...A,userError:void 0})}}),{clearUserErrorAction:s,clearUserMappingInfoAction:i,ldapConnectionInfoLoadedAction:m,ldapFailedAction:f,ldapSyncStatusLoadedAction:o,userMappingInfoFailedAction:l,userMappingInfoLoadedAction:r}=u.actions,d=u.reducer,c={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},g=(0,t.oM)({name:"userAdmin",initialState:c,reducers:{userProfileLoadedAction:(A,N)=>({...A,user:N.payload}),userOrgsLoadedAction:(A,N)=>({...A,orgs:N.payload}),userSessionsLoadedAction:(A,N)=>({...A,sessions:N.payload}),userAdminPageLoadedAction:(A,N)=>({...A,isLoading:!N.payload}),userAdminPageFailedAction:(A,N)=>({...A,error:N.payload,isLoading:!1})}}),{userProfileLoadedAction:p,userOrgsLoadedAction:y,userSessionsLoadedAction:h,userAdminPageLoadedAction:a,userAdminPageFailedAction:v}=g.actions,C=g.reducer,E={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!1},P=(0,t.oM)({name:"userListAdmin",initialState:E,reducers:{usersFetched:(A,N)=>{const{totalCount:W,perPage:I,...F}=N.payload,V=Math.ceil(W/I);return{...A,...F,totalPages:V,perPage:I,showPaging:V>1,isLoading:!1}},usersFetchBegin:A=>({...A,isLoading:!0}),usersFetchEnd:A=>({...A,isLoading:!1}),queryChanged:(A,N)=>({...A,query:N.payload,page:0}),pageChanged:(A,N)=>({...A,page:N.payload}),filterChanged:(A,N)=>{const{name:W,value:I}=N.payload;return A.filters.some(F=>F.name===W)?{...A,page:0,filters:A.filters.map(F=>F.name===W?{...F,value:I}:F)}:{...A,page:0,filters:[...A.filters,N.payload]}}}}),{usersFetched:x,usersFetchBegin:M,usersFetchEnd:S,queryChanged:D,pageChanged:T,filterChanged:R}=P.actions,L=P.reducer,w={ldap:d,userAdmin:C,userListAdmin:L}},67162:(G,O,e)=>{"use strict";e.d(O,{$:()=>f,Z:()=>v});var t=e(82897),n=e.n(t),u=e(57591);const s=new u.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),i=[{text:"Query",value:"query"}],m={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var f=(C=>(C.IsAbove="gt",C.IsBelow="lt",C.IsOutsideRange="outside_range",C.IsWithinRange="within_range",C.HasNoValue="no_value",C))(f||{});const o=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],l=[{text:"OR",value:"or"},{text:"AND",value:"and"}],r=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],d=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],c=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function g(C){const E=new u.zU({type:C.type,defaultParams:[]});return new u.XN(C,E)}function p(C){return C.toLowerCase().replace(/_/g,"").split(" ")[0]}function y(C){switch(p(C)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function h(C,E){return(0,t.reduce)(C,(P,x)=>(x.metric!==void 0&&x.value!==void 0&&P.push(x.metric+"="+x.value),x.Metric!==void 0&&x.Value!==void 0&&P.push(x.Metric+"="+x.Value),P),[]).join(E)}function a(C){return(0,t.isArray)(C.data)?h(C.data,", "):(0,t.isArray)(C.data.evalMatches)?h(C.data.evalMatches,", "):C.data.error?"Error: "+C.data.error:""}const v={alertQueryDef:s,getStateDisplayModel:y,conditionTypes:i,evalFunctions:o,evalOperators:l,noDataModes:d,executionErrorModes:c,reducerTypes:r,createReducerPart:g,getAlertAnnotationInfo:a,alertStateSortScore:m}},57591:(G,O,e)=>{"use strict";e.d(O,{C7:()=>m,D:()=>i,XN:()=>s,zU:()=>u});var t=e(82897),n=e.n(t);class u{constructor(r){this.type=r.type,this.params=r.params,this.defaultParams=r.defaultParams,this.renderer=r.renderer,this.category=r.category,this.addStrategy=r.addStrategy}}class s{constructor(r,d){if(this.part=r,this.def=d,!this.def)throw{message:"Could not find query part "+r.type};r.params=r.params||(0,t.clone)(this.def.defaultParams),this.params=r.params,this.text="",this.updateText()}render(r){return this.def.renderer(this,r)}hasMultipleParamsInString(r,d){return r.indexOf(",")===-1?!1:this.def.params[d+1]&&this.def.params[d+1].optional}updateParam(r,d){if(this.hasMultipleParamsInString(r,d)){(0,t.each)(r.split(","),(c,g)=>{this.updateParam(c.trim(),g)});return}r===""&&this.def.params[d].optional?this.params.splice(d,1):this.params[d]=r,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let r=this.def.type+"(";r+=this.params.join(", "),r+=")",this.text=r}}function i(l,r){const d=l.def.type+"(",c=(0,t.map)(l.params,(g,p)=>{const y=l.def.params[p];return y.type==="time"&&g==="auto"&&(g="$__interval"),y.quote==="single"?"'"+g+"'":y.quote==="double"?'"'+g+'"':g});return r&&c.unshift(r),d+c.join(", ")+")"}function m(l,r){return r+" "+l.params[0]}function f(l,r){return l.params[0]}function o(l,r){return'"'+l.params[0]+'"'}},11626:(G,O,e)=>{"use strict";e.d(O,{ZP:()=>x,Gr:()=>r,gz:()=>p,Oc:()=>y,K:()=>v,J0:()=>C,T2:()=>a,ql:()=>h});var t=e(32557),n=e(46519),u=e(31259),s=e(46818),i=e(72004);const f=(0,u.combineReducers)({dataSources:(0,s.jK)("dataSources",i.nw,({rulesSourceName:D})=>D).reducer,promRules:(0,s.jK)("promRules",i.y6,({rulesSourceName:D})=>D).reducer,rulerRules:(0,s.jK)("rulerRules",i.UR,({rulesSourceName:D})=>D).reducer,amConfigs:(0,s.jK)("amConfigs",i.Yh,D=>D).reducer,silences:(0,s.jK)("silences",i.je,D=>D).reducer,ruleForm:(0,u.combineReducers)({saveRule:(0,s.i6)("saveRule",i.wy).reducer,existingRule:(0,s.i6)("existingRule",i.on).reducer}),grafanaNotifiers:(0,s.i6)("grafanaNotifiers",i.Vj).reducer,saveAMConfig:(0,s.i6)("saveAMConfig",i.mM).reducer,deleteAMConfig:(0,s.i6)("deleteAMConfig",i.Nc).reducer,updateSilence:(0,s.i6)("updateSilence",i.QY).reducer,amAlerts:(0,s.jK)("amAlerts",i.dB,D=>D).reducer,folders:(0,s.jK)("folders",i.vL,D=>D).reducer,amAlertGroups:(0,s.jK)("amAlertGroups",i.mS,D=>D).reducer,testReceivers:(0,s.i6)("testReceivers",i.D8).reducer,updateLotexNamespaceAndGroup:(0,s.i6)("updateLotexNamespaceAndGroup",i.hv).reducer,externalAlertmanagers:(0,u.combineReducers)({alertmanagerConfig:(0,s.i6)("alertmanagerConfig",i.wE).reducer,discoveredAlertmanagers:(0,s.i6)("discoveredAlertmanagers",i.zy).reducer}),managedAlertStateHistory:(0,s.i6)("managedAlertStateHistory",i.Ms).reducer});var o=e(67162);const l={items:[],searchQuery:"",isLoading:!1},r={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function d(D,T){const R=o.Z.getStateDisplayModel(T),L={...D,stateText:R.text,stateIcon:R.iconClass,stateClass:R.stateClass,stateAge:(0,n.CQ)(D.newStateDate).fromNow(!0)};return L.state!=="paused"&&(L.executionError&&(L.info="Execution Error: "+L.executionError),L.evalData&&L.evalData.noData&&(L.info="Query returned no data")),L}const c=(0,t.oM)({name:"alertRules",initialState:l,reducers:{loadAlertRules:D=>({...D,isLoading:!0}),loadedAlertRules:(D,T)=>{const L=T.payload.map(w=>d(w,w.state));return{...D,items:L,isLoading:!1}},setSearchQuery:(D,T)=>({...D,searchQuery:T.payload})}}),g=(0,t.oM)({name:"notificationChannel",initialState:r,reducers:{setNotificationChannels:(D,T)=>({...D,notificationChannelTypes:S(T.payload),notifiers:T.payload}),notificationChannelLoaded:(D,T)=>{const R=T.payload,w=D.notifiers.find(A=>A.type===R.type).options.filter(A=>A.secure);return w.length>0&&w.some(A=>R.settings[A.propertyName]!=="")?M(D,T.payload,w):{...D,notificationChannel:R}},resetSecureField:(D,T)=>({...D,notificationChannel:{...D.notificationChannel,secureFields:{...D.notificationChannel.secureFields,[T.payload]:!1}}})}}),{loadAlertRules:p,loadedAlertRules:y,setSearchQuery:h}=c.actions,{setNotificationChannels:a,notificationChannelLoaded:v,resetSecureField:C}=g.actions,E=c.reducer,P=g.reducer,x={alertRules:E,notificationChannel:P,unifiedAlerting:f};function M(D,T,R){const L={},w={};return R.forEach(A=>{w[A.propertyName]=T.settings[A.propertyName],L[A.propertyName]=""}),{...D,notificationChannel:{...T,settings:{...T.settings,...L},secureSettings:{...w}}}}function S(D){return D.map(T=>({value:T.type,label:T.name,...T,typeName:T.type})).sort((T,R)=>T.name>R.name?1:-1)}},41904:(G,O,e)=>{"use strict";e.d(O,{Hc:()=>g,I5:()=>c,PN:()=>l,Z0:()=>p,pM:()=>r,z7:()=>o});var t=e(46519),n=e(2358),u=e(14327),s=e(47214),i=e(93003),m=e(77274);const f=15,o={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully"};function l(y,h={}){i.v.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([y],{level:u.in.INFO,context:{...h,module:"Alerting"}})}function r(y,h,a){return async function(...v){const C=performance.now(),E=await y(...v);return l(h,{loadTimeMs:(performance.now()-C).toFixed(0),...a}),E}}async function d(y){try{const{createdAt:h}=await(0,s.i)().get(`/api/users/${y}`),a=(0,t.CQ)().subtract(f,"days"),v=(0,t.CQ)(h);return a.isBefore(v)}catch{return!0}}const c=async y=>{await d(y.user_id)||(0,m.ff)("grafana_alerting_rule_creation",y)},g=async y=>{await d(y.user_id)||(0,m.ff)("grafana_alerting_rule_aborted",y)},p=async y=>{await d(y.user_id)||(0,m.ff)("grafana_alerting_rule_form_error",y)}},29427:(G,O,e)=>{"use strict";e.d(O,{C:()=>m});var t=e(32504),n=e(3363),u=e(47214),s=e(41904);const i=()=>async f=>{try{const o=performance.now(),{data:l,...r}=await(0,n.n)((0,u.i)().fetch(f));return(0,s.PN)("Request finished",{loadTimeMs:(performance.now()-o).toFixed(0),url:f.url,method:f.method??"",responseStatus:r.statusText}),{data:l,meta:r}}catch(o){return{error:o}}},m=(0,t.LC)({reducerPath:"alertingApi",baseQuery:i(),tagTypes:["AlertmanagerChoice"],endpoints:()=>({})})},44737:(G,O,e)=>{"use strict";e.d(O,{C$:()=>o,SJ:()=>d,WG:()=>l,Zy:()=>r});var t=e(3363),n=e(47214),u=e(46063),s=e(37190),i=e(45849),m=e(95454),f=e(49011);async function o(a){if(a===i.GC)return{features:{rulerApiEnabled:!0}};const v=(0,i.c$)(a);if(!v)throw new Error(`Cannot find data source configuration for ${a}`);const{url:C,name:E,type:P}=v;if(!C)throw new Error("The data source url cannot be empty.");if(P!=="prometheus"&&P!=="loki")throw new Error(`The build info request is not available for ${P}. Only 'prometheus' and 'loki' are supported`);return l({name:E,url:C,type:P})}async function l(a){const{url:v,name:C,type:E}=a,P=E==="loki"?void 0:await g(v);if(!(P!==void 0)){if(!await p(C))throw new Error(`Unable to fetch alert rules. Is the ${C} data source properly configured?`);const D=await y(C);return{application:u.T8.Cortex,features:{rulerApiEnabled:D}}}const{features:M}=P.data;return M?{application:u.T8.Mimir,features:{rulerApiEnabled:M?.ruler_config_api==="true"}}:{application:u.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function r(a){if(a===i.GC)return{lazyConfigInit:!1};const v=c(a),{url:C,type:E}=v;if(!C)throw new Error("The data source url cannot be empty.");if(E!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${E}. Only 'alertmanager' type is supported`);return await d(C)}async function d(a){try{return{lazyConfigInit:(await g(a))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function c(a){const v=(0,i.c$)(a);if(!v)throw new Error(`Cannot find data source configuration for ${a}`);return v}async function g(a){return(await(0,t.n)((0,n.i)().fetch({url:`${a}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(C=>{if(!("status"in C&&C.status===404))throw C}))?.data}async function p(a){try{return await(0,m.j)(a),!0}catch{return!1}}async function y(a){try{return await(0,f.jw)(a),!0}catch(v){if(h(v))return!1;throw v}}function h(a){return(0,n.kW)(a)?a.data.message?.includes("GetRuleGroup unsupported in rule local store")||a.data.message?.includes("page not found")||a.data.message?.includes(s.jZ):a instanceof Error&&a.message?.includes("404 from rules config endpoint")}},79572:(G,O,e)=>{"use strict";e.d(O,{T:()=>u});var t=e(29427),n=e(44737);const u=t.C.injectEndpoints({endpoints:s=>({discoverAmFeatures:s.query({queryFn:async({amSourceName:i})=>{try{return{data:await(0,n.Zy)(i)}}catch(m){return{error:m}}}})})})},644:(G,O,e)=>{"use strict";e.d(O,{QE:()=>o,i9:()=>s});var t=e(3363),n=e(47214),u=e(45849);function s(){return(0,n.i)().get("/api/alert-notifiers")}const i=l=>{const r=l.match(/^(\w+)(\[\d+\])?$/);return r?{type:r[1],index:r[2]}:{type:l,index:void 0}},m=l=>{const r={receivers:{},errorCount:0};l.forEach(c=>{r.receivers[c.name]={active:c.active,notifiers:{},errorCount:0};const g=r.receivers[c.name];c.integrations.forEach(p=>{Boolean(p?.lastNotifyAttemptError)&&(g.errorCount+=1);const h=f(p.name);h&&(g.notifiers[h]||(g.notifiers[h]=[]),g.notifiers[h].push(p))})});const d=Object.values(r.receivers).reduce((c,g)=>c+g.errorCount,0);return{...r,errorCount:d}},f=l=>i(l)?.type;async function o(l){try{const r=await(0,t.n)((0,n.i)().fetch({url:`/api/alertmanager/${(0,u.gt)(l)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return m(r.data)}catch{return m([])}}},95454:(G,O,e)=>{"use strict";e.d(O,{hd:()=>i,j:()=>m});var t=e(3363),n=e(47214),u=e(45849);function s(f){const{dataSourceName:o}=f;return{rules:l=>{const r=new URLSearchParams,d=i(r,l);return{url:`/api/prometheus/${(0,u.gt)(o)}/api/v1/rules`,params:d}}}}function i(f,o){return o?.dashboardUID&&(f.set("dashboard_uid",o.dashboardUID),o?.panelId&&f.set("panel_id",String(o.panelId))),Object.fromEntries(f)}async function m(f,o){if(o?.dashboardUID&&f!==u.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:l,params:r}=s({dataSourceName:f}).rules(o),d=await(0,t.n)((0,n.i)().fetch({url:l,params:r,showErrorAlert:!1,showSuccessAlert:!1})).catch(g=>{throw"status"in g&&g.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):g}),c={};return d.data.data.groups.forEach(g=>{g.rules.forEach(p=>{p.query=p.query||""}),c[g.file]?c[g.file].groups.push(g):c[g.file]={dataSourceName:f,name:g.file,groups:[g]}}),Object.values(c)}},49011:(G,O,e)=>{"use strict";e.d(O,{BC:()=>c,P4:()=>f,jJ:()=>d,jw:()=>r,m6:()=>o,sz:()=>a});var t=e(3363),n=e(47214),u=e(37190),s=e(45849),i=e(95454);function m(v){const E=`${`/api/ruler/${(0,s.gt)(v.dataSourceName)}`}/api/v1/rules`,P=new URLSearchParams;return P.set("subtype",v.apiVersion==="legacy"?"cortex":"mimir"),{rules:x=>{const M=(0,i.hd)(P,x);return{path:`${E}`,params:M}},namespace:x=>({path:`${E}/${encodeURIComponent(x)}`,params:Object.fromEntries(P)}),namespaceGroup:(x,M)=>({path:`${E}/${encodeURIComponent(x)}/${encodeURIComponent(M)}`,params:Object.fromEntries(P)})}}async function f(v,C,E){const{path:P,params:x}=m(v).namespace(C);await(0,t.n)((0,n.i)().fetch({method:"POST",url:P,data:E,showErrorAlert:!1,showSuccessAlert:!1,params:x}))}async function o(v,C){if(C?.dashboardUID&&v.dataSourceName!==s.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:E,params:P}=m(v).rules(C);return g(E,{},P)}async function l(v,C){const{path:E,params:P}=m(v).namespace(C);return(await g(E,{},P))[C]||[]}async function r(v){return g(`/api/ruler/${(0,s.gt)(v)}/api/v1/rules/test/test`,null)}async function d(v,C,E){const{path:P,params:x}=m(v).namespaceGroup(C,E);return g(P,null,x)}async function c(v,C,E){const{path:P,params:x}=m(v).namespaceGroup(C,E);await(0,t.n)((0,n.i)().fetch({url:P,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:x}))}async function g(v,C,E){try{return(await(0,t.n)((0,n.i)().fetch({url:v,showErrorAlert:!1,showSuccessAlert:!1,params:E}))).data}catch(P){if(!p(P))throw P;if(h(P))return C;throw y(P)?{...P,data:{...P.data,message:u.jZ}}:P}}function p(v){const C=v.data!=null;return Number.isFinite(v.status)&&C}function y(v){return v.status===404||v.status===500&&v.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function h(v){return v.status===404&&(v.data.message?.includes("group does not exist")||v.data.message?.includes("no rule groups found"))}async function a(v,C){const{path:E,params:P}=m(v).namespace(C);await(0,t.n)((0,n.i)().fetch({method:"DELETE",url:E,showErrorAlert:!1,showSuccessAlert:!1,params:P}))}},24782:(G,O,e)=>{"use strict";e.d(O,{i:()=>i});var t=e(52423),n=e(68404),u=e(29516),s=e(20017);const i=({labelKey:f,value:o,operator:l="=",onRemoveLabel:r})=>{const d=(0,u.wW)(m);return n.createElement("div",{className:d.wrapper},f,l,o,!!r&&n.createElement(s.h,{name:"times",size:"xs",onClick:r}))},m=f=>({wrapper:t.css`
    padding: ${f.spacing(.5,1)};
    border-radius: ${f.shape.borderRadius(1)};
    border: solid 1px ${f.colors.border.medium};
    font-size: ${f.typography.bodySmall.fontSize};
    background-color: ${f.colors.background.secondary};
    font-weight: ${f.typography.fontWeightBold};
    color: ${f.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},52694:(G,O,e)=>{"use strict";e.d(O,{s:()=>u});var t=e(68404),n=e(36012);const u=({labels:s,className:i})=>{const m=Object.entries(s).filter(([f])=>!(f.startsWith("__")&&f.endsWith("__")));return t.createElement("div",{className:i},t.createElement(n.P,{tags:Object.values(m).map(([f,o])=>`${f}=${o}`)}))}},94984:(G,O,e)=>{"use strict";e.d(O,{P:()=>o});var t=e(52423),n=e(68404),u=e(29516),s=e(74955),i=e(46739),m=e(45849);function f(r){return r.name===m.GC?"Grafana":r.name.slice(0,37)}const o=({onChange:r,current:d,dataSources:c,disabled:g=!1})=>{const p=(0,u.wW)(l),y=(0,n.useMemo)(()=>c.map(h=>({label:f(h),value:h.name,imgUrl:h.imgUrl,meta:h.meta})),[c]);return n.createElement(s.g,{className:p.field,label:g?"Alertmanager":"Choose Alertmanager",disabled:g||y.length===1,"data-testid":"alertmanager-picker"},n.createElement(i.Ph,{"aria-label":g?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:h=>h.value&&r(h.value),options:y,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:d,getOptionLabel:h=>h.label}))},l=r=>({field:t.css`
    margin-bottom: ${r.spacing(4)};
  `})},78543:(G,O,e)=>{"use strict";e.d(O,{a:()=>r});var t=e(52423),n=e(68404),u=e(48756),s=e(29516),i=e(37190),m=e(80498),f=e(46587),o=e(94884);const l=["message","description"],r=({annotationKey:g,value:p})=>{const y=i.vY[g]?n.createElement(u.u,{content:g,placement:"top",theme:"info"},n.createElement("span",null,i.vY[g])):g;return n.createElement(m.C,{label:y,horizontal:!0},n.createElement(d,{annotationKey:g,value:p}))},d=({annotationKey:g,value:p})=>{const y=(0,s.wW)(c),h=l.includes(g),a=p&&p.startsWith("http"),v=n.createElement(f.Z,{input:p,delimiter:["{{","}}"]});return h?n.createElement(o.t,{className:y.well},v):a?n.createElement("a",{href:p,target:"__blank",className:y.link},p):n.createElement(n.Fragment,null,v)},c=g=>({well:t.css`
    word-break: break-word;
  `,link:t.css`
    word-break: break-all;
    color: ${g.colors.primary.text};
  `})},33950:(G,O,e)=>{"use strict";e.d(O,{U:()=>i});var t=e(52423),n=e(68404),u=e(29516),s=e(90723);const i=({isCollapsed:f,onToggle:o,idControlled:l,className:r,text:d,size:c="xl",...g})=>{const p=(0,u.wW)(m);return n.createElement(s.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!f,"aria-controls":l,className:(0,t.cx)(p.expandButton,r),icon:f?"angle-right":"angle-down",onClick:()=>o(!f),...g},d)},m=f=>({expandButton:t.css`
    margin-right: ${f.spacing(1)};
  `})},80498:(G,O,e)=>{"use strict";e.d(O,{C:()=>s});var t=e(52423),n=e(68404),u=e(29516);const s=({className:m,label:f,horizontal:o,children:l})=>{const r=(0,u.wW)(i);return n.createElement("div",{className:(0,t.cx)(m,r.field,o?r.fieldHorizontal:r.fieldVertical)},n.createElement("div",null,f),n.createElement("div",null,l))},i=m=>({fieldHorizontal:t.css`
    flex-direction: row;
    ${m.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:t.css`
    flex-direction: column;
  `,field:t.css`
    display: flex;
    margin: ${m.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${m.spacing(1)};
      font-size: ${m.typography.size.sm};
      font-weight: ${m.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${m.colors.text.secondary};
    }
  `})},53731:(G,O,e)=>{"use strict";e.d(O,{t:()=>o});var t=e(52423),n=e(68404),u=e(29516),s=e(20017),i=e(89891),m=e(25724),f=e(1562);const o=({cols:r,items:d,isExpandable:c=!1,onCollapse:g,onExpand:p,isExpanded:y,renderExpandedContent:h,testIdGenerator:a,pagination:v,paginationStyles:C,renderPrefixCell:E,renderPrefixHeader:P,footerRow:x})=>{const M=(0,u.wW)(f.Z);if((g||p||y)&&!(g&&p&&y))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((c||h)&&!(c&&h))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const S=(0,u.wW)(l(r,c,!!P)),[D,T]=(0,n.useState)([]),R=I=>{y&&g&&p?y(I)?g(I):p(I):T(D.includes(I.id)?D.filter(F=>F!==I.id):[...D,I.id])},L=v?.itemsPerPage??d.length,{page:w,numberOfPages:A,onPageChange:N,pageItems:W}=(0,m.h)(d,1,L);return n.createElement(n.Fragment,null,n.createElement("div",{className:S.container,"data-testid":"dynamic-table"},n.createElement("div",{className:S.row,"data-testid":"header"},P&&P(),c&&n.createElement("div",{className:S.cell}),r.map(I=>n.createElement("div",{className:S.cell,key:I.id},I.label))),W.map((I,F)=>{const V=y?y(I):D.includes(I.id);return n.createElement("div",{className:S.row,key:`${I.id}-${F}`,"data-testid":a?.(I,F)??"row"},E&&E(I,F,d),c&&n.createElement("div",{className:(0,t.cx)(S.cell,S.expandCell)},n.createElement(s.h,{"aria-label":`${V?"Collapse":"Expand"} row`,size:"xl","data-testid":"collapse-toggle",className:S.expandButton,name:V?"angle-down":"angle-right",onClick:()=>R(I),type:"button"})),r.map(b=>n.createElement("div",{className:(0,t.cx)(S.cell,S.bodyCell),"data-column":b.label,key:`${I.id}-${b.id}`},b.renderCell(I,F))),V&&h&&n.createElement("div",{className:S.expandedContentRow,"data-testid":"expanded-content"},h(I,F,d)))}),x&&n.createElement("div",{className:(0,t.cx)(S.row,S.footerRow)},x)),v&&n.createElement(i.t,{className:(0,t.cx)(M,C),currentPage:w,numberOfPages:A,onNavigate:N,hideWhenSinglePage:!0}))},l=(r,d,c)=>{const g=r.map(p=>p.size?typeof p.size=="number"?`${p.size}fr`:p.size:"auto");return d&&g.unshift("calc(1em + 16px)"),c&&g.unshift("0"),p=>({container:t.css`
      border: 1px solid ${p.colors.border.strong};
      border-radius: 2px;
      color: ${p.colors.text.secondary};
    `,row:t.css`
      display: grid;
      grid-template-columns: ${g.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${p.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${p.colors.background.primary};
      }

      ${p.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${p.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${c?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:t.css`
      display: flex;
      padding: ${p.spacing(1)};
    `,cell:t.css`
      align-items: center;
      padding: ${p.spacing(1)};

      ${p.breakpoints.down("sm")} {
        padding: ${p.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:t.css`
      overflow: hidden;

      ${p.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${p.colors.text.primary};
        }
      }
    `,expandCell:t.css`
      justify-content: center;

      ${p.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:t.css`
      grid-column-end: ${g.length+1};
      grid-column-start: ${c?3:2};
      grid-row: 2;
      padding: 0 ${p.spacing(3)} 0 ${p.spacing(1)};
      position: relative;

      ${p.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${p.colors.border.strong};
        grid-row: auto;
        padding: ${p.spacing(1)} 0 0 0;
      }
    `,expandButton:t.css`
      margin-right: 0;
      display: block;
    `})}},42042:(G,O,e)=>{"use strict";e.d(O,{z:()=>o});var t=e(52423),n=e(9085),u=e.n(n),s=e(68404),i=e(29516),m=e(26345),f=e(30995);const o=({children:r,content:d,wrapperClassName:c,disabled:g=!1,...p})=>{const y=(0,s.useRef)(null),h=(0,i.wW)(l);return g?r:s.createElement(m.D,{content:d,hideAfter:100},(a,v,C)=>s.createElement(s.Fragment,null,y.current&&s.createElement(f.J,{...C,...p,wrapperClassName:u()(h.popover,c),onMouseLeave:v,onMouseEnter:a,referenceElement:y.current}),s.cloneElement(r,{ref:y,onMouseEnter:a,onMouseLeave:v})))},l=r=>({popover:t.css`
    border-radius: ${r.shape.borderRadius()};
    box-shadow: ${r.shadows.z3};
    background: ${r.colors.background.primary};
    border: 1px solid ${r.colors.border.medium};

    padding: ${r.spacing(1)};
  `})},63613:(G,O,e)=>{"use strict";e.d(O,{s:()=>s});var t=e(68404),n=e(48756),u=e(81697);function s({text:i}){return t.createElement(n.u,{placement:"top",content:t.createElement("div",null,i)},t.createElement(u.J,{name:"info-circle",size:"xs"}))}},74542:(G,O,e)=>{"use strict";e.d(O,{j:()=>i});var t=e(68404),n=e(93003),u=e(318),s=e(37190);function i(o){const{value:l,onChange:r,size:d="md"}=o,c=(0,t.useMemo)(()=>m(),[]);return t.createElement(u.S,{options:c,value:l,onChange:r,size:d})}function m(){return Object.values(n.v.panels).reduce((o,l)=>(f(l.id)&&o.push({value:l.id,label:l.name,imgUrl:l.info.logos.small}),o),[])}function f(o){switch(o){case s.GC:case s.Fe:case s.Kd:return!0;default:return!1}}},79453:(G,O,e)=>{"use strict";e.d(O,{i:()=>s});var t=e(52423),n=e(68404),u=e(29516);const s=({children:m,state:f,size:o="md"})=>{const l=(0,u.wW)(i);return n.createElement("span",{className:(0,t.cx)(l.common,l[f],l[o])},m||f)},i=m=>({common:t.css`
    display: inline-block;
    color: white;
    border-radius: ${m.shape.borderRadius()};
    font-size: ${m.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${m.typography.fontWeightBold};
  `,good:t.css`
    background-color: ${m.colors.success.main};
    border: solid 1px ${m.colors.success.main};
    color: ${m.colors.success.contrastText};
  `,warning:t.css`
    background-color: ${m.colors.warning.main};
    border: solid 1px ${m.colors.warning.main};
    color: ${m.colors.warning.contrastText};
  `,bad:t.css`
    background-color: ${m.colors.error.main};
    border: solid 1px ${m.colors.error.main};
    color: ${m.colors.error.contrastText};
  `,neutral:t.css`
    background-color: ${m.colors.secondary.main};
    border: solid 1px ${m.colors.secondary.main};
    color: ${m.colors.secondary.contrastText};
  `,info:t.css`
    background-color: ${m.colors.primary.main};
    border: solid 1px ${m.colors.primary.main};
    color: ${m.colors.primary.contrastText};
  `,md:t.css`
    padding: ${m.spacing(.5,1)};
    min-width: ${m.spacing(8)};
  `,sm:t.css`
    padding: ${m.spacing(.3,.5)};
    min-width: 52px;
  `})},46587:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(52423),n=e(68404),u=e(29516),s=e(68884),i=e(42042),m=e(86922);const f=["$",".",'"'];function o({input:h,delimiter:a=["{{","}}"]}){const v=(0,u.wW)(y),[C,E]=a,P=new RegExp(`(?<before>.*?)(${C}(?<token>.*?)${E}|$)`,"gm"),x=h.split(`
`),M=[];return x.forEach((S,D)=>{Array.from(S.matchAll(P)).forEach((R,L)=>{const w=R.groups?.before,A=R.groups?.token?.trim();if(w&&M.push(n.createElement("span",{key:`${D}-${L}-before`},w)),A){const N=p(A),W=N===l.Variable?A:"",I=`${C} ${A} ${E}`;M.push(n.createElement(r,{key:`${D}-${L}-token`,content:I,type:N,description:W}))}}),M.push(n.createElement("br",{key:`${D}-newline`}))}),n.createElement("span",{className:v.wrapper},M)}var l=(h=>(h.Variable="variable",h.Function="function",h.Keyword="keyword",h.Unknown="unknown",h))(l||{});function r({content:h,description:a,type:v}){const C=(0,u.wW)(y),E=Boolean(v)===!1;return n.createElement(i.z,{placement:"top-start",disabled:E,content:n.createElement("div",{className:C.hoverTokenItem},n.createElement(s.C,{text:n.createElement(n.Fragment,null,v),color:"blue"})," ",a&&n.createElement("code",null,a))},n.createElement("span",null,n.createElement(s.C,{className:C.token,text:h,color:"blue"})))}function d(h){return f.some(a=>h.startsWith(a))}function c(h){return m.keywords.some(a=>h.startsWith(a))}function g(h){return m.builtinFunctions.some(a=>h.startsWith(a))}function p(h){let a;return d(h)?a="variable":c(h)?a="keyword":g(h)?a="function":a="unknown",a}const y=h=>({wrapper:t.css`
    white-space: pre-wrap;
  `,token:t.css`
    cursor: default;
    font-family: ${h.typography.fontFamilyMonospace};
  `,popover:t.css`
    border-radius: ${h.shape.borderRadius()};
    box-shadow: ${h.shadows.z3};
    background: ${h.colors.background.primary};
    border: 1px solid ${h.colors.border.medium};

    padding: ${h.spacing(1)};
  `,hoverTokenItem:t.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${h.spacing(1)};
  `})},94884:(G,O,e)=>{"use strict";e.d(O,{t:()=>s});var t=e(52423),n=e(68404),u=e(29516);const s=({children:m,className:f})=>{const o=(0,u.wW)(i);return n.createElement("div",{className:(0,t.cx)(o.wrapper,f)},m)},i=m=>({wrapper:t.css`
    background-color: ${m.components.panel.background};
    border: solid 1px ${m.components.input.borderColor};
    border-radius: ${m.shape.borderRadius(1)};
    padding: ${m.spacing(.5,1)};
    font-family: ${m.typography.fontFamilyMonospace};
  `})},96308:(G,O,e)=>{"use strict";e.d(O,{Z:()=>m});var t=e(64681),n=e.n(t),u=e(68404),s=e(29516),i=e(53715);const m=({group:f})=>{const o=(0,s.wW)(i.r),l=f.alerts.length,r=f.alerts.reduce((d,c)=>(d[c.status.state]?d[c.status.state]+=1:d[c.status.state]=1,d),{});return u.createElement("div",null,`${l} ${n()("alert",l)}: `,Object.entries(r).map(([d,c],g)=>u.createElement("span",{key:`${JSON.stringify(f.labels)}-notifications-${g}`,className:o[d]},g>0&&", ",`${c} ${d}`)))}},50362:(G,O,e)=>{"use strict";e.d(O,{_:()=>i});var t=e(52423),n=e(68404),u=e(29516),s=e(68884);const i=({enabled:f=!1,error:o,warning:l,onSetCondition:r})=>{const d=(0,u.wW)(m);return f&&o?n.createElement(s.C,{color:"red",icon:"exclamation-circle",text:"Alert condition",tooltip:o.message}):f&&l?n.createElement(s.C,{color:"orange",icon:"exclamation-triangle",text:"Alert condition",tooltip:l.message}):f&&!o&&!l?n.createElement(s.C,{color:"green",icon:"check",text:"Alert condition"}):f?null:n.createElement("div",{className:d.actionLink,onClick:()=>r&&r()},"Make this the alert condition")},m=f=>({actionLink:t.css`
    color: ${f.colors.text.link};
    cursor: pointer;

    &:hover {
      text-decoration: underline;
    }
  `})},76726:(G,O,e)=>{"use strict";e.d(O,{A2:()=>w,bw:()=>A});var t=e(52423),n=e(82897),u=e(68404),s=e(49922),i=e(38849),m=e(34472),f=e(26418),o=e(29516),l=e(53799),r=e(81697),d=e(46739),c=e(20017),g=e(5076),p=e(71263),y=e(75897),h=e(436),a=e(70227),v=e(97573),C=e(46063),E=e(42042);const P=()=>u.createElement("span",{className:t.css`
      flex: 1;
    `});var x=e(45608),M=e(50362),S=e(43211);const D=b=>b.name??R(b.fields[0].labels??{}),T=b=>{const X=b.fields[0].values.get(0);return Number.isFinite(X)?(0,S.O)(X,5):X},R=b=>Object.entries(b).map(([X,k])=>X+"="+k).join(", "),L=b=>b.every(k=>k.fields.every(H=>H.values.toArray().every(Y=>Y==null))),w=({queries:b=[],query:X,data:k,error:H,warning:Y,isAlertCondition:ee,onSetCondition:ue,onUpdateRefId:q,onRemoveExpression:ge,onUpdateExpressionType:De,onChangeQuery:fe})=>{const me=(0,o.wW)(V),ce=X?.type,ie=k&&Object.values(k).some(be=>Boolean(be)&&be.state===s.Gu.Loading),re=Array.isArray(k?.series)&&!ie,Ee=k?.series??[],J=ee??!1,te=ee&&re,ne={[C.x_.Firing]:Ee.filter(be=>T(be)>=1),[C.x_.Inactive]:Ee.filter(be=>T(be)<1)},j=(0,u.useCallback)(be=>{const Le=b.filter(Qe=>be.refId!==Qe.refId).map(Qe=>({value:Qe.refId,label:Qe.refId}));switch(be.type){case v.Us.math:return u.createElement(p.Z,{onChange:fe,query:be,labelWidth:"auto",onRunQuery:()=>{}});case v.Us.reduce:return u.createElement(y.v,{onChange:fe,refIds:Le,labelWidth:"auto",query:be});case v.Us.resample:return u.createElement(h.p,{onChange:fe,query:be,labelWidth:"auto",refIds:Le});case v.Us.classic:return u.createElement(g.I,{onChange:fe,query:be,refIds:Le});case v.Us.threshold:return u.createElement(a.M,{onChange:fe,query:be,labelWidth:"auto",refIds:Le});default:return u.createElement(u.Fragment,null,"Expression not supported: ",be.type)}},[fe,b]);return u.createElement("div",{className:(0,t.cx)(me.expression.wrapper,J&&me.expression.alertCondition)},u.createElement("div",{className:me.expression.stack},u.createElement(W,{refId:X.refId,queryType:ce,onRemoveExpression:()=>ge(X.refId),onUpdateRefId:be=>q(X.refId,be),onUpdateExpressionType:be=>De(X.refId,be)}),u.createElement("div",{className:me.expression.body},j(X)),re&&u.createElement(A,{series:Ee,isAlertCondition:ee}),u.createElement("div",{className:me.footer},u.createElement(f.Stack,{direction:"row",alignItems:"center"},u.createElement(M._,{onSetCondition:()=>ue(X.refId),enabled:J,error:H,warning:Y}),u.createElement(P,null),te&&u.createElement(N,{firing:ne[C.x_.Firing].length,normal:ne[C.x_.Inactive].length})))))},A=({series:b,isAlertCondition:X})=>{const k=(0,o.wW)(V),H=L(b),Y=!H&&(0,m.hZ)(b);return u.createElement("div",{className:k.expression.results},!H&&Y&&u.createElement("div",null,b.map((ee,ue)=>u.createElement(F,{key:(0,n.uniqueId)(),frame:ee,index:ue,isAlertCondition:X}))),!H&&!Y&&b.map((ee,ue)=>u.createElement(I,{key:(0,n.uniqueId)(),frame:ee,index:ue,isAlertCondition:X})),H&&u.createElement("div",{className:(0,t.cx)(k.expression.noData,k.mutedText)},"No data"))},N=({firing:b,normal:X})=>{const{mutedText:k}=(0,o.wW)(V);return u.createElement("span",{className:k},`${b} firing, ${X} normal`)},W=({refId:b,queryType:X,onUpdateRefId:k,onUpdateExpressionType:H,onRemoveExpression:Y})=>{const ee=(0,o.wW)(V),[ue,q]=(0,u.useState)(!1),ge=ue!==!1,De=ge&&ue==="refId",fe=ge&&ue==="expressionType",me=v._M.find(ce=>ce.value===X);return u.createElement("header",{className:ee.header.wrapper},u.createElement(f.Stack,{direction:"row",gap:.5,alignItems:"center"},u.createElement(f.Stack,{direction:"row",gap:1,alignItems:"center",wrap:!1},!De&&u.createElement("div",{className:ee.editable,onClick:()=>q("refId")},u.createElement("div",{className:ee.expression.refId},b)),De&&u.createElement(l.H,{autoFocus:!0,defaultValue:b,minWidth:5,onChange:ce=>{k(ce.currentTarget.value),q(!1)},onFocus:ce=>ce.target.select(),onBlur:ce=>{k(ce.currentTarget.value),q(!1)}}),!fe&&u.createElement("div",{className:ee.editable,onClick:()=>q("expressionType")},u.createElement("div",{className:ee.mutedText},(0,n.capitalize)(X)),u.createElement(r.J,{size:"xs",name:"pen",className:ee.mutedIcon,onClick:()=>q("expressionType")})),fe&&u.createElement(d.Ph,{isOpen:!0,autoFocus:!0,onChange:ce=>{H(ce.value??v.Us.classic),q(!1)},onBlur:()=>{q(!1)},options:v._M,value:me,width:25})),u.createElement(P,null),u.createElement(c.h,{type:"button",name:"trash-alt",variant:"secondary",className:ee.mutedIcon,onClick:Y})))},I=({frame:b,index:X,isAlertCondition:k})=>{const H=(0,o.wW)(V),Y=D(b)||"Series "+X,ee=T(b),ue=k&&ee!==0,q=k&&ee===0;return u.createElement("div",{className:H.expression.resultsRow},u.createElement(f.Stack,{direction:"row",gap:1,alignItems:"center"},u.createElement("span",{className:(0,t.cx)(H.mutedText,H.expression.resultLabel),title:Y},Y),u.createElement("div",{className:H.expression.resultValue},ee),ue&&u.createElement(x.l,{state:C.x_.Firing,size:"sm"}),q&&u.createElement(x.l,{state:C.x_.Inactive,size:"sm"})))},F=({frame:b,index:X})=>{const k=(0,o.wW)(V),Y=b.fields[1].labels?R(b.fields[1].labels??{}):"Series "+X,ee=b.fields[0].values.toArray(),ue=ge=>b.fields[0].values.get(ge),q=ge=>b.fields[1].values.get(ge);return u.createElement("div",{className:k.expression.resultsRow},u.createElement(f.Stack,{direction:"row",gap:1,alignItems:"center"},u.createElement("span",{className:(0,t.cx)(k.mutedText,k.expression.resultLabel),title:Y},Y),u.createElement("div",{className:k.expression.resultValue},u.createElement(E.z,{placement:"right",wrapperClassName:k.timeseriesTableWrapper,content:u.createElement("table",{className:k.timeseriesTable},u.createElement("thead",null,u.createElement("tr",null,u.createElement("th",null,"Timestamp"),u.createElement("th",null,"Value"))),u.createElement("tbody",null,ee.map((ge,De)=>u.createElement("tr",{key:De},u.createElement("td",{className:k.mutedText},(0,i.dq)(ue(De))),u.createElement("td",{className:k.expression.resultValue},q(De))))))},u.createElement("span",null,"Time series data")))))},V=b=>({expression:{wrapper:t.css`
      display: flex;
      border: solid 1px ${b.colors.border.medium};

      border-radius: ${b.shape.borderRadius()};
      max-width: 640px;
    `,stack:t.css`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      gap: 0;
      min-width: 0; // this one is important to prevent text overflow
    `,alertCondition:t.css``,body:t.css`
      padding: ${b.spacing(1)};
      flex: 1;
    `,refId:t.css`
      font-weight: ${b.typography.fontWeightBold};
      color: ${b.colors.primary.text};
    `,results:t.css`
      border-top: solid 1px ${b.colors.border.medium};
    `,noResults:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
    `,resultsRow:t.css`
      padding: ${b.spacing(.75)} ${b.spacing(1)};

      &:nth-child(odd) {
        background-color: ${b.colors.background.secondary};
      }

      &:hover {
        background-color: ${b.colors.background.canvas};
      }
    `,resultValue:t.css`
      color: ${b.colors.text.maxContrast};
      text-align: right;
    `,resultLabel:t.css`
      flex: 1;
    `,noData:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      padding: ${b.spacing()};
    `},mutedText:t.css`
    color: ${b.colors.text.secondary};
    font-size: 0.9em;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,header:{wrapper:t.css`
      background: ${b.colors.background.secondary};
      padding: ${b.spacing(.5)} ${b.spacing(1)};
      border-bottom: solid 1px ${b.colors.border.medium};
    `},footer:t.css`
    background: ${b.colors.background.secondary};
    padding: ${b.spacing(1)};
    border-top: solid 1px ${b.colors.border.medium};
  `,draggableIcon:t.css`
    cursor: grab;
  `,mutedIcon:t.css`
    color: ${b.colors.text.secondary};
  `,editable:t.css`
    padding: ${b.spacing(.5)} ${b.spacing(1)};
    border: solid 1px ${b.colors.border.weak};
    border-radius: ${b.shape.borderRadius()};

    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${b.spacing(1)};

    cursor: pointer;
  `,timeseriesTableWrapper:t.css`
    max-height: 500px;
    max-width: 300px;

    overflow-y: scroll;

    padding: 0 !important; // not sure why but style override doesn't work otherwise :( (Gilles)
  `,timeseriesTable:t.css`
    table-layout: auto;

    width: 100%;
    height: 100%;

    td,
    th {
      padding: ${b.spacing(1)};
    }

    td {
      background: ${b.colors.background.primary};
    }

    th {
      background: ${b.colors.background.secondary};
    }

    tr {
      border-bottom: 1px solid ${b.colors.border.medium};

      &:last-of-type {
        border-bottom: none;
      }
    }
  `})},86922:(G,O,e)=>{"use strict";e.r(O),e.d(O,{AlertmanagerTemplateFunction:()=>n,availableAlertManagerFunctions:()=>u,builtinFunctions:()=>i,conf:()=>o,keywords:()=>m,language:()=>f});var t=(l=>(l.Delimiter="delimiter",l.Keyword="keyword",l.Function="type.identifier",l.String="string",l.Variable="variable.name",l.Number="number",l.Comment="comment",l.Operator="operator",l.Identifier="idenfifier",l))(t||{}),n=(l=>(l.toUpper="toUpper",l.toLower="toLower",l.title="title",l.join="join",l.match="match",l.safeHtml="safeHtml",l.reReplaceAll="reReplaceAll",l.stringSlice="stringSlice",l))(n||{});const u=Object.values(n),i=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],m=["define","if","else","end","range","break","continue","template","block","with"],f={defaultToken:"",keywords:m,functions:[...i,...u],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},o={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},11376:(G,O,e)=>{"use strict";e.d(O,{p:()=>ir,E:()=>Ms});var t=e(52423),n=e(68404),u=e(59052),s=e(16144),i=e(93003),m=e(184),f=e(29516),o=e(74955),l=e(25474),r=e(90701),d=e(90723),c=e(40008),g=e(49938),p=e(81202),y=e(60499),h=e(77582),a=e(40014),v=e(96044),C=e(81168),E=e(41904),P=e(79370),x=e(72004),M=e(94617),S=e(46818),D=e(21767),T=e(60048),R=e(11017),L=e(46739),w=e(58593),A=e(24015),N=e(84380),W=e(38849),I=e(49922),F=e(77213),V=e(2323),b=e(53786),X=e(2101),k=e(94514),H=e(44962),Y=e(83849),ee=e(70006),ue=e(69311),q=e(47214),ge=e(91896);function De(Z){return"expr"in Z}function fe(Z){return"grafana_condition"in Z}var me=e(45849);function ce(Z){if(De(Z))return ie(Z,Z.dataSourceUid,M.$.cloudAlerting);if(fe(Z))return ie(Z,me.GC,M.$.grafana);throw new Error("unsupported preview rule request")}function ie(Z,ae,Pe){return(0,Y.x)({whileLoading:re(Pe),source:(0,q.i)().fetch({method:"POST",url:`/api/v1/rule/test/${ae}`,data:Z}).pipe((0,X.U)(({data:Ue})=>re(Pe,{state:I.Gu.Done,series:Ue.instances.map(ee.vP)})),(0,k.K)(Ue=>(0,b.of)(re(Pe,{state:I.Gu.Error,error:(0,ge.P)(Ue)}))),(0,H.B)())})}function re(Z,ae={}){return{ruleType:Z,data:{state:I.Gu.Loading,series:[],timeRange:(0,ue.JK)(),...ae}}}var Ee=e(34111),J=e(89050),te=e(85854),ne=e(73274),j=e(40538);function be(Z){const{preview:ae}=Z,Pe=(0,f.wW)(Le),Ue={defaults:{},overrides:[{matcher:{id:te.mi.byName,options:"Info"},properties:[{id:"custom.displayMode",value:j.h2.JSONView}]}]};if(!ae)return null;const{data:et,ruleType:ot}=ae;return et.state===I.Gu.Loading?n.createElement("div",{className:Pe.container},n.createElement("span",null,"Loading preview...")):et.state===I.Gu.Error?n.createElement("div",{className:Pe.container},et.error?(0,S.kk)(et.error):"Failed to preview alert rule"):n.createElement("div",{className:Pe.container},n.createElement("span",null,"Preview based on the result of running the query, for this moment."," ",ot===M.$.grafana?"Configuration for `no data` and `error handling` is not applied.":null),n.createElement("div",{className:Pe.table},n.createElement(J.Z,null,({width:ft,height:xt})=>n.createElement("div",{style:{width:`${ft}px`,height:`${xt}px`}},n.createElement(ne.$,{title:"",width:ft,height:xt,pluginId:"table",data:et,fieldConfig:Ue})))))}function Le(Z){return{container:t.css`
      margin: ${Z.spacing(2)} 0;
    `,table:t.css`
      flex: 1 1 auto;
      height: 135px;
      margin-top: ${Z.spacing(2)};
      border: 1px solid ${Z.colors.border.medium};
      border-radius: ${Z.shape.borderRadius(1)};
    `}}const Qe=["type","dataSourceName","condition","queries","expression"];function Ye(){const Z=(0,f.wW)($e),[ae,Pe]=de(),{watch:Ue}=(0,u.Gc)(),[et,ot,ft]=Ue(["type","condition","queries"]),{allDataSourcesAvailable:xt}=(0,Ee.S)(ft);if(et===M.$.cloudRecording||et===M.$.cloudAlerting)return null;const St=Boolean(ot)&&xt;return n.createElement("div",{className:Z.container},n.createElement(r.Lh,null,xt&&n.createElement(d.zx,{disabled:!St,type:"button",variant:"primary",onClick:Pe},"Preview alerts"),!xt&&n.createElement(V.b,{title:"Preview is not available",severity:"warning"},"Cannot display the query preview. Some of the data sources used in the queries are not available.")),n.createElement(be,{preview:ae}))}function de(){const[Z,ae]=(0,n.useState)(),{getValues:Pe}=(0,u.Gc)(),Ue=(0,A.Z)(),et=(0,n.useCallback)(()=>{const ot=Pe(Qe),ft=Be(ot);ce(ft).pipe((0,N.o)(xt=>!Ve(xt),!0)).subscribe(xt=>{Ue()&&ae(xt)})},[Pe,Ue]);return[Z,et]}function Be(Z){const[ae,Pe,Ue,et,ot]=Z,ft=(0,F.F)().getInstanceSettings(Pe);if(!ft)throw new Error(`Cannot find data source settings for ${Pe}`);switch(ae){case M.$.cloudAlerting:return{dataSourceUid:ft.uid,dataSourceName:Pe,expr:ot};case M.$.grafana:return{grafana_condition:{condition:Ue,data:et,now:(0,W.lf)(Date.now())}};default:throw new Error(`Alert type ${ae} not supported by preview.`)}}function Ve(Z){switch(Z.data.state){case I.Gu.Done:case I.Gu.Error:return!0;default:return!1}}function $e(Z){return{container:t.css`
      margin-top: ${Z.spacing(2)};
      max-width: ${Z.breakpoints.values.xxl}px;
    `}}var We=e(36894);const Ke=()=>{const Z=(0,f.wW)(qe),{register:ae,control:Pe,watch:Ue,formState:{errors:et}}=(0,u.Gc)();return Ue("type")===M.$.cloudRecording?null:n.createElement(We.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(o.g,{label:"For",description:"Expression has to be true for this long for the alert to be fired."},n.createElement("div",{className:Z.flexRow},n.createElement(o.g,{invalid:!!et.forTime?.message,error:et.forTime?.message,className:Z.inlineField},n.createElement(l.I,{...ae("forTime",{pattern:{value:/^\d+$/,message:"Must be a positive integer."}}),width:8})),n.createElement(R.g,{name:"forTimeUnit",render:({field:{onChange:ft,ref:xt,...St}})=>n.createElement(L.Ph,{...St,options:w.qr,onChange:Bt=>ft(Bt?.value),width:15,className:Z.timeUnit}),control:Pe}))),n.createElement(Ye,null))},qe=Z=>({inlineField:t.css`
    margin-bottom: 0;
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
  `,timeUnit:t.css`
    margin-left: ${Z.spacing(.5)};
  `});var Xe=e(16808),at=e(20700);const Ze=({rulesSourceName:Z})=>{const{control:ae,watch:Pe,formState:{errors:Ue},setValue:et}=(0,u.Gc)(),ot=(0,f.wW)(lt),ft=(0,P._)(nn=>nn.rulerRules),xt=(0,C.useDispatch)();(0,n.useEffect)(()=>{xt((0,x.UR)({rulesSourceName:Z}))},[Z,xt]);const St=ft[Z]?.result,Bt=Pe("namespace"),Ht=(0,n.useMemo)(()=>St?Object.keys(St).map(nn=>({label:nn,value:nn})):[],[St]),qt=(0,n.useMemo)(()=>Bt&&St?.[Bt]?.map(nn=>({label:nn.name,value:nn.name}))||[],[Bt,St]);return n.createElement("div",{className:ot.flexRow},n.createElement(o.g,{"data-testid":"namespace-picker",label:"Namespace",error:Ue.namespace?.message,invalid:!!Ue.namespace?.message},n.createElement(R.g,{render:({field:{onChange:nn,ref:Mn,...Rn}})=>n.createElement(L.LT,{...Rn,allowCustomValue:!0,className:ot.input,onChange:Pn=>{et("group",""),nn(Pn.value)},options:Ht,width:42}),name:"namespace",control:ae,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:at.p0}}})),n.createElement(o.g,{"data-testid":"group-picker",label:"Group",error:Ue.group?.message,invalid:!!Ue.group?.message},n.createElement(R.g,{render:({field:{ref:nn,...Mn}})=>n.createElement(L.LT,{...Mn,allowCustomValue:!0,options:qt,width:42,onChange:Rn=>{et("group",Rn.value??"")},className:ot.input}),name:"group",control:ae,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:at.p0}}})))},lt=Z=>({flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;

    & > * + * {
      margin-left: ${Z.spacing(3)};
    }
  `,input:t.css`
    width: 330px !important;
  `});function nt(){const{watch:Z}=(0,u.Gc)(),ae=Z("type"),Pe=Z("dataSourceName"),Ue=Z("type");return n.createElement(We.z,{stepNo:Ue===M.$.cloudRecording?3:4,title:Ue===M.$.cloudRecording?"Folder and group":"Add details for your alert rule",description:Ue===M.$.cloudRecording?"Select the Namespace and Group for your recording rule":"Select the folder and evaluation group for your alert. Write a summary to help you better manage your alerts"},(ae===M.$.cloudRecording||ae===M.$.cloudAlerting)&&Pe&&n.createElement(Ze,{rulesSourceName:Pe}),Ue!==M.$.cloudRecording&&n.createElement(Xe.Z,null))}var _e=e(56412),ut=e(66208),rt=e(90031),je=e(19191);const dt=()=>{const Z=(0,f.wW)(Se),{watch:ae,getValues:Pe}=(0,u.Gc)(),Ue=ae("type"),et=ae("dataSourceName")??me.GC,ot=oe(Pe("labels")).length>0;return n.createElement(We.z,{stepNo:Ue===M.$.cloudRecording?4:5,title:Ue===M.$.cloudRecording?"Labels":"Notifications",description:Ue===M.$.cloudRecording?"Add labels to help you better manage your recording rules":"Grafana handles the notifications for alerts by assigning labels to alerts. These labels connect alerts to contact points and silence alert instances that have matching labels."},n.createElement("div",{className:Z.contentWrapper},n.createElement("div",{style:{display:"flex",flexDirection:"column"}},!ot&&Ue!==M.$.cloudRecording&&n.createElement(ut.Z,{className:Z.card},n.createElement(ut.Z.Heading,null,"Root route \u2013 default for all alerts"),n.createElement(ut.Z.Description,null,"Without custom labels, your alert will be routed through the root route. To view and edit the root route, go to ",n.createElement(rt.r,{href:"/alerting/routes"},"notification policies")," or contact your admin in case you are using non-Grafana alert management.")),n.createElement(je.Z,{dataSourceName:et}))))};function oe(Z){return Z.filter(ae=>ae.key&&ae.value)}const Se=Z=>({contentWrapper:t.css`
    display: flex;
    align-items: center;
  `,hideButton:t.css`
    color: ${Z.colors.text.secondary};
    cursor: pointer;
    margin-bottom: ${Z.spacing(1)};
  `,card:t.css`
    max-width: 500px;
  `,flowChart:t.css`
    margin-right: ${Z.spacing(3)};
  `});var Re=e(20091),ze=e(55461),ve=e(26625),Te=e(17353),he=e(48756),pe=e(81697),ye=e(57172),Oe=e(79662);const Ne=[{label:"Yaml",value:"yaml"}],Me=({onClose:Z})=>{const[ae,Pe]=(0,n.useState)("yaml"),{setValue:Ue}=(0,u.Gc)(),et=(0,f.wW)(Pt),ot=ft=>{for(const xt in ft)Ue(xt,ft[xt]);Z()};return n.createElement(ze.d,{title:"Inspect Alert rule",subtitle:n.createElement("div",{className:et.subtitle},n.createElement(Ae,{setActiveTab:Pe,activeTab:ae})),onClose:Z},ae==="yaml"&&n.createElement(we,{onSubmit:ot}))},Ae=({activeTab:Z,setActiveTab:ae})=>n.createElement(ve.J,null,Ne.map((Pe,Ue)=>n.createElement(Te.O,{key:`${Pe.value}-${Ue}`,label:Pe.label,value:Pe.value,onChangeTab:()=>ae(Pe.value),active:Z===Pe.value}))),we=({onSubmit:Z})=>{const ae=(0,f.wW)(Et),{getValues:Pe}=(0,u.Gc)(),Ue=(0,D.yh)(Pe()),[et,ot]=(0,n.useState)((0,Re.$w)(Ue)),ft=()=>{const xt=(0,Re.zD)(et),St=Pe(),Bt=st(xt);Z({...St,...Bt})};return n.createElement(n.Fragment,null,n.createElement("div",{className:ae.applyButton},n.createElement(d.zx,{type:"button",onClick:ft},"Apply"),n.createElement(he.u,{content:n.createElement(ke,null),theme:"info",placement:"left-start",interactive:!0},n.createElement(pe.J,{name:"exclamation-triangle",size:"xl"}))),n.createElement("div",{className:ae.content},n.createElement(J.Z,{disableWidth:!0},({height:xt})=>n.createElement(ye.p,{width:"100%",height:xt,language:"yaml",value:et,onBlur:ot,monacoOptions:{minimap:{enabled:!1}}}))))};function ke(){return n.createElement("div",null,"The YAML content in the editor only contains alert rule configuration ",n.createElement("br",null),"To configure Prometheus, you need to provide the rest of the"," ",n.createElement("a",{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",target:"_blank",rel:"noreferrer"},"configuration file content."))}function st(Z){return(0,Oe.cG)(Z)?(0,D.WL)(Z):(0,Oe.yF)(Z)?(0,D.lN)(Z):{}}const Et=Z=>({content:t.css`
    flex-grow: 1;
    height: 100%;
    padding-bottom: 16px;
    margin-bottom: ${Z.spacing(2)};
  `,applyButton:t.css`
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    flex-grow: 0;
    margin-bottom: ${Z.spacing(2)};
  `}),Pt=()=>({subtitle:t.css`
    display: flex;
    align-items: center;
    justify-content: space-between;
  `});var gt=e(68183),Ct=e(26418),Ot=e(75e3),Ft=e(81001),jt=e(82897),En=e(22350),xn=e(94929),Cn=e(40400),bn=e(36012);function Tn(Z){return Object.entries(Z).map(([ae,Pe])=>`${ae}=${Pe}`).sort()}var Zn=e(45608),Bn=e(46063);function Sn({fields:Z}){const ae=Z.filter(xt=>!["State","Info"].includes(xt.name)),Pe=Z.findIndex(xt=>xt.name==="State"),Ue=Z.findIndex(xt=>xt.name==="Info"),et=ae.map(xt=>Z.indexOf(xt)),ot=Z[Pe]?.values.length??0,ft=[];for(let xt=0;xt<ot;xt++){const St=et.map(qt=>[Z[qt].name,Z[qt].values.get(xt)]),Bt=Z[Pe]?.values?.get(xt),Ht=Z[Ue]?.values?.get(xt);(0,Bn.Yb)(Bt)&&ft.push({state:Bt,info:Ht,labels:Object.fromEntries(St)})}return{instances:ft}}function wn({preview:Z}){const ae=(0,f.wW)($n),Pe=Sn(Z);return n.createElement("table",{className:ae.table},n.createElement("caption",null,n.createElement("div",null,"Alerts preview"),n.createElement("span",null,"Preview based on the result of running the query for this moment.")),n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"State"),n.createElement("th",null,"Labels"),n.createElement("th",null,"Info"))),n.createElement("tbody",null,Pe.instances.map(({state:Ue,info:et,labels:ot},ft)=>{const xt=Tn(ot);return n.createElement("tr",{key:ft},n.createElement("td",null,n.createElement(Zn.l,{state:Ue})),n.createElement("td",null,n.createElement(bn.P,{tags:xt,className:ae.tagList})),n.createElement("td",null,et&&n.createElement(he.u,{content:et},n.createElement(pe.J,{name:"info-circle"}))))})))}const $n=Z=>({table:t.css`
    width: 100%;
    margin: ${Z.spacing(2,0)};

    caption {
      caption-side: top;
      color: ${Z.colors.text.primary};

      & > span {
        font-size: ${Z.typography.bodySmall.fontSize};
        color: ${Z.colors.text.secondary};
      }
    }

    td,
    th {
      padding: ${Z.spacing(1,1)};
    }

    td + td,
    th + th {
      padding-left: ${Z.spacing(3)};
    }

    thead th {
      &:nth-child(1) {
        width: 80px;
      }

      &:nth-child(2) {
        width: auto;
      }

      &:nth-child(3) {
        width: 40px;
      }
    }

    td:nth-child(3) {
      text-align: center;
    }

    tbody tr:nth-child(2n + 1) {
      background-color: ${Z.colors.background.secondary};
    }
  `,tagList:t.css`
    justify-content: flex-start;
  `}),Xn=({value:Z,onChange:ae,dataSourceName:Pe,showPreviewAlertsButton:Ue=!0})=>{const et=(0,f.wW)(ba),{mapToValue:ot,mapToQuery:ft}=hn(Pe),xt=ft({refId:"A",hide:!1},Z),{error:St,loading:Bt,value:Ht}=(0,En.Z)(()=>(0,F.F)().get(Pe),[Pe]),qt=(0,n.useCallback)(Ra=>{ae(ot(Ra))},[ae,ot]),[nn,Mn]=de(),Rn=async()=>{Mn()};if(Bt||Ht?.name!==Pe)return null;const Pn=(0,F.F)().getInstanceSettings(Pe);if(St||!Ht||!Ht?.components?.QueryEditor||!Pn){const Ra=St?.message||"Data source plugin does not export any Query Editor component";return n.createElement("div",null,"Could not load query editor due to: ",Ra)}const jn=nn?.data.state===I.Gu.Done,On=Ht?.components?.QueryEditor,Fn=nn?.data?.series?.find(Ra=>Ra.name==="evaluation results"),hs=Fn&&Fn.fields.some(Ra=>Ra.values.length>0);return n.createElement(n.Fragment,null,n.createElement(xn.n,{instanceSettings:Pn},n.createElement(On,{query:xt,queries:[xt],app:Cn.zj.CloudAlerting,onChange:qt,onRunQuery:jt.noop,datasource:Ht})),Ue&&n.createElement("div",{className:et.preview},n.createElement(d.zx,{type:"button",onClick:Rn,disabled:nn?.data.state===I.Gu.Loading},"Preview alerts"),jn&&!hs&&n.createElement(V.b,{title:"Alerts preview",severity:"info",className:et.previewAlert},"There are no firing alerts for your query."),hs&&n.createElement(wn,{preview:Fn})))},ba=Z=>({preview:t.css`
    padding: ${Z.spacing(2,0)};
    max-width: ${Z.breakpoints.values.xl}px;
  `,previewAlert:t.css`
    margin: ${Z.spacing(1,0)};
  `});function hn(Z){return(0,n.useMemo)(()=>{switch((0,F.F)().getInstanceSettings(Z)?.type){case"loki":case"prometheus":return{mapToValue:Pe=>Pe.expr,mapToQuery:(Pe,Ue)=>({...Pe,expr:Ue})};default:throw new Error(`${Z} is not supported as an expression editor`)}},[Z])}var Kn=e(76726);const ta=({condition:Z,onSetCondition:ae,queries:Pe,panelData:Ue,onUpdateRefId:et,onRemoveExpression:ot,onUpdateExpressionType:ft,onUpdateQueryExpression:xt})=>{const St=(0,n.useMemo)(()=>Pe.reduce((Bt,Ht)=>(0,Ot.j)(Ht.model)?Bt.concat(Ht.model):Bt,[]),[Pe]);return n.createElement(Ct.Stack,{direction:"row",alignItems:"stretch"},St.map(Bt=>{const Ht=Ue[Bt.refId],qt=Z===Bt.refId,nn=qt&&Ht?(0,at.Vp)(Ht.series):void 0,Mn=qt&&Ht?(0,at.Yq)(Ht.series):void 0;return n.createElement(Kn.A2,{key:Bt.refId,isAlertCondition:qt,data:Ht,error:nn,warning:Mn,queries:Pe,query:Bt,onSetCondition:ae,onRemoveExpression:ot,onUpdateRefId:et,onUpdateExpressionType:ft,onChangeQuery:xt})}))};var La=e(19677),oa=e(67254),ha=e(91162),ia=e(50330),Rt=e(49371),Lt=e(36584),At=e(37190),kt=e(50362),Zt=e(71235),Qt=e(97063);function Jt(Z,ae,Pe){const Ue=(0,f.l4)();if(ae===At.GC||ae===At.Kd||rn(Z))return 200;const et=Z.series[Pe].fields[0].values.length,ot=Ue.spacing.gridSize*5,ft=et*ot+ot;return ft>=200?200:ft}function rn(Z){return!Z||!Z.series[0]||!Z.series[0].fields[0]||!Z.series[0].fields[0].values}var mn=e(74542);const Xt=({data:Z,currentPanel:ae,changePanel:Pe,thresholds:Ue,thresholdsType:et=j.i3.Line})=>{const[ot,ft]=(0,n.useState)({frameIndex:0,showHeader:!0}),xt=Jt(Z,ae,ot.frameIndex),St=(0,f.wW)(fn(xt)),[Bt,Ht]=(0,n.useState)(Yn(Z,Ue));(0,n.useEffect)(()=>{Ht(nn=>({...nn,defaults:{...nn.defaults,thresholds:Ue,unit:In(Z),custom:{...nn.defaults.custom,thresholdsStyle:{mode:et}}}}))},[Ue,Ht,Z,et]);const qt=(0,n.useMemo)(()=>({eventBus:Qt.Z,canEditThresholds:!1,showThresholds:!0}),[]);return!ot||!Z?null:n.createElement("div",{className:St.wrapper},n.createElement("div",{className:St.buttonGroup},n.createElement(mn.j,{onChange:Pe,value:ae})),n.createElement(J.Z,null,({width:nn})=>nn===0?null:n.createElement("div",{style:{height:`${xt}px`,width:`${nn}px`}},n.createElement(Zt._w,{value:qt},n.createElement(ne.$,{height:xt,width:nn,data:Z,pluginId:ae,title:"title",onOptionsChange:ft,options:ot,fieldConfig:Bt})))))},fn=Z=>ae=>({wrapper:t.css`
    padding: 0 ${ae.spacing(2)};
    height: ${Z+ae.spacing.gridSize*4}px;
  `,buttonGroup:t.css`
    display: flex;
    justify-content: flex-end;
  `});function In(Z){return Z.series[0]?.fields.find(ae=>ae.type==="number")?.config.unit}function Yn(Z,ae){return ae?{defaults:{thresholds:ae,unit:In(Z),custom:{thresholdsStyle:{mode:j.i3.Line}}},overrides:[]}:{defaults:{},overrides:[]}}const Vn=43200,_n=({data:Z,error:ae,dsSettings:Pe,index:Ue,onChangeDataSource:et,onChangeQuery:ot,onChangeTimeRange:ft,onRunQueries:xt,onRemoveQuery:St,onDuplicateQuery:Bt,query:Ht,queries:qt,thresholds:nn,thresholdsType:Mn,onChangeThreshold:Rn,condition:Pn,onSetCondition:jn,onChangeQueryOptions:On})=>{const Fn=(0,f.wW)(Ea),hs=(0,Ot.j)(Ht.model),[Ra,as]=(0,n.useState)(hs?At.Fe:At.GC);function Ps(){const ss=(0,f.wW)(Ea);return n.createElement("div",{className:ss.dsTooltip},n.createElement(he.u,{content:n.createElement(n.Fragment,null,"Not finding the data source you want? Some data sources are not supported for alerting. Click on the icon for more information.")},n.createElement(pe.J,{name:"info-circle",onClick:()=>window.open(" https://grafana.com/docs/grafana/latest/alerting/fundamentals/data-source-alerting/","_blank")})))}function Cr({query:ss,error:Cs,index:xs}){const tr={maxDataPoints:{maxDataPoints:ss.model.maxDataPoints}.maxDataPoints};return(0,Ot.j)(ss.model)?null:n.createElement(Ct.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(Ps,null),ft&&n.createElement(ia.x,{timeRange:ss.relativeTimeRange??(0,ue.Rr)(),onChange:Wa=>ft(Wa,xs)}),n.createElement("div",{className:Fn.queryOptions},n.createElement(Fa,{options:tr,onChange:Wa=>On(Wa,xs)})),n.createElement(kt._,{onSetCondition:()=>jn(ss.refId),enabled:Pn===ss.refId,error:Cs}))}return n.createElement("div",{className:Fn.wrapper},n.createElement(Lt.x,{alerting:!0,dataSource:Pe,onChangeDataSource:hs?void 0:ss=>et(ss,Ue),id:Ht.refId,index:Ue,key:Ht.refId,data:Z,query:(0,jt.cloneDeep)(Ht.model),onChange:ss=>ot(ss,Ue),onRemoveQuery:St,onAddQuery:()=>Bt((0,jt.cloneDeep)(Ht)),onRunQuery:xt,queries:qt,renderHeaderExtras:()=>n.createElement(Cr,{query:Ht,index:Ue,error:ae}),app:Cn.zj.UnifiedAlerting,visualization:Z.state!==I.Gu.NotStarted?n.createElement(Xt,{data:Z,changePanel:as,currentPanel:Ra,thresholds:nn,thresholdsType:Mn,onThresholdsChange:Rn?ss=>Rn(ss,Ue):void 0}):null,hideDisableQuery:!0}))},va=({children:Z})=>{const ae=(0,f.wW)(Ea);return n.createElement("div",{className:ae.wrapper},Z)};function Fa({options:Z,onChange:ae}){const Pe=Z.maxDataPoints??"",Ue=et=>{const ot=parseInt(et.target.value,10),ft=isNaN(ot)||ot===0?void 0:ot;ft!==Z.maxDataPoints&&ae({...Z,maxDataPoints:ft})};return n.createElement(Ct.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(Rt.c,{width:8,tooltip:n.createElement(n.Fragment,null,"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer.")},"Max data points"),n.createElement(l.I,{type:"number",className:"width-6",placeholder:Vn.toLocaleString(),spellCheck:!1,onBlur:Ue,defaultValue:Pe}))}const Ea=Z=>({wrapper:t.css`
    label: AlertingQueryWrapper;
    margin-bottom: ${Z.spacing(1)};
    border: 1px solid ${Z.colors.border.medium};
    border-radius: ${Z.shape.borderRadius(1)};
  `,queryOptions:t.css`
    margin-bottom: -${Z.spacing(2)};
  `,dsTooltip:t.css`
    display: flex;
    align-items: center;
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `});class Ma extends n.PureComponent{constructor(ae){super(ae),this.onRemoveQuery=Pe=>{const{queries:Ue,onQueriesChange:et}=this.props;et(Ue.filter(ot=>ot.refId!==Pe.refId))},this.onChangeTimeRange=(Pe,Ue)=>{const{queries:et,onQueriesChange:ot}=this.props;ot(et.map((ft,xt)=>xt!==Ue?ft:{...ft,relativeTimeRange:Pe}))},this.onChangeQueryOptions=(Pe,Ue)=>{const{queries:et,onQueriesChange:ot}=this.props;ot(et.map((ft,xt)=>xt!==Ue?ft:{...ft,model:{...ft.model,maxDataPoints:Pe.maxDataPoints}}))},this.onChangeDataSource=(Pe,Ue)=>{const{queries:et,onQueriesChange:ot}=this.props,ft=et.map((xt,St)=>{if(St!==Ue)return xt;const Bt=this.getDataSourceSettings(xt);return Pe.type===Bt?.type?Za(xt,Pe):ca(xt,Pe)});ot(ft)},this.onChangeQuery=(Pe,Ue)=>{const{queries:et,onQueriesChange:ot}=this.props;ot(et.map((ft,xt)=>xt!==Ue?ft:{...ft,refId:Pe.refId,queryType:ft.model.queryType??"",model:{...ft.model,...Pe,datasource:Pe.datasource}}))},this.onDragEnd=Pe=>{const{queries:Ue,onQueriesChange:et}=this.props;if(!Pe||!Pe.destination)return;const ot=Pe.source.index,ft=Pe.destination.index;if(ot===ft)return;const xt=Array.from(Ue),[St]=xt.splice(ot,1);xt.splice(ft,0,St),et(xt)},this.getDataSourceSettings=Pe=>(0,F.F)().getInstanceSettings(Pe.datasourceUid)}render(){const{queries:ae,expressions:Pe}=this.props,Ue=(0,at.Fu)([...ae,...Pe]);return n.createElement(La.Z5,{onDragEnd:this.onDragEnd},n.createElement(La.bK,{droppableId:"alerting-queries",direction:"vertical"},et=>n.createElement("div",{ref:et.innerRef,...et.droppableProps},ae.map((ot,ft)=>{const xt=this.props.data?.[ot.refId]??{series:[],state:I.Gu.NotStarted},St=this.getDataSourceSettings(ot),Ht=this.props.condition===ot.refId?(0,at.Vp)(xt.series):void 0;return St?n.createElement(_n,{index:ft,key:ot.refId,dsSettings:St,data:xt,error:Ht,query:ot,onChangeQuery:this.onChangeQuery,onRemoveQuery:this.onRemoveQuery,queries:ae,onChangeDataSource:this.onChangeDataSource,onDuplicateQuery:this.props.onDuplicateQuery,onChangeTimeRange:this.onChangeTimeRange,onChangeQueryOptions:this.onChangeQueryOptions,thresholds:Ue[ot.refId]?.config,thresholdsType:Ue[ot.refId]?.mode,onRunQueries:this.props.onRunQueries,condition:this.props.condition,onSetCondition:this.props.onSetCondition}):n.createElement(Ja,{key:`${ot.refId}-${ft}`,index:ft,model:ot.model,onUpdateDatasource:()=>{const qt=(0,ha.ak)().getInstanceSettings(null);qt&&this.onChangeDataSource(qt,ft)},onRemoveQuery:()=>{this.onRemoveQuery(ot)}})}),et.placeholder)))}}function Za(Z,ae){return{...Z,model:{...(0,jt.omit)(Z.model,"datasource"),datasource:{type:ae.type,uid:ae.uid}},datasourceUid:ae.uid}}function ca(Z,ae){return{refId:Z.refId,relativeTimeRange:Z.relativeTimeRange,queryType:"",datasourceUid:ae.uid,model:{refId:Z.refId,hide:!1,datasource:{type:ae.type,uid:ae.uid}}}}const Ja=({index:Z,onUpdateDatasource:ae,onRemoveQuery:Pe,model:Ue})=>{const et=Ue.refId,[ot,ft]=(0,n.useState)(!1),xt=()=>{ft(Bt=>!Bt)},St=()=>{ae()};return n.createElement(va,null,n.createElement(oa.t,{title:et,draggable:!0,index:Z,id:et,isOpen:!0},n.createElement(ut.Z,null,n.createElement(ut.Z.Heading,null,"This datasource has been removed"),n.createElement(ut.Z.Description,null,"The datasource for this query was not found, it was either removed or is not installed correctly."),n.createElement(ut.Z.Figure,null,n.createElement(pe.J,{name:"question-circle"})),n.createElement(ut.Z.Actions,null,n.createElement(d.zx,{key:"update",variant:"secondary",onClick:St},"Update datasource"),n.createElement(d.zx,{key:"remove",variant:"destructive",onClick:Pe},"Remove query")),n.createElement(ut.Z.SecondaryActions,null,n.createElement(d.zx,{key:"details",onClick:xt,icon:ot?"angle-up":"angle-down",fill:"text",size:"sm"},"Show details"))),ot&&n.createElement("div",null,n.createElement("pre",null,n.createElement("code",null,JSON.stringify(Ue,null,2))))))},qa=({queries:Z,expressions:ae,panelData:Pe,onRunQueries:Ue,onChangeQueries:et,onDuplicateQuery:ot,condition:ft,onSetCondition:xt})=>{const St=(0,f.wW)(Va);return n.createElement("div",{className:St.container},n.createElement(Ma,{data:Pe,queries:Z,expressions:ae,onRunQueries:Ue,onQueriesChange:et,onDuplicateQuery:ot,condition:ft,onSetCondition:xt}))},Va=Z=>({container:t.css`
    background-color: ${Z.colors.background.primary};
    height: 100%;
    max-width: ${Z.breakpoints.values.xxl}px;
  `});var Xa=e(82002),fs=e(2248),ls=e(3153);function cs(){const Z=(0,P._)(Pe=>Pe.dataSources);return Object.values(Z).map(Pe=>Pe.result).filter(Pe=>Boolean(Pe?.rulerConfig)).map(Pe=>(0,me.c$)(Pe.name)).filter(Pe=>Boolean(Pe))}function gs({value:Z,...ae}){const Pe=cs(),{loading:Ue=!0}=(0,En.Z)(()=>(0,ls.WI)((0,x.dV)()),[ls.WI]),et=(0,n.useCallback)(ot=>!!Pe.find(({id:ft})=>ft===ot.id),[Pe]);return n.createElement(fs.q,{disabled:Ue,isLoading:Ue,noDefault:!0,alerting:!0,filter:et,current:Z,...ae})}const ya=Z=>{const{name:ae,description:Pe,image:Ue,selected:et=!1,value:ot,onClick:ft,disabled:xt=!1}=Z,St=(0,f.wW)(za),Bt=(0,t.cx)({[St.wrapper]:!0,[St.disabled]:xt});return n.createElement(ut.Z,{className:Bt,isSelected:et,onClick:()=>ft(ot),disabled:xt},n.createElement(ut.Z.Figure,null,n.createElement("img",{src:Ue,alt:""})),n.createElement(ut.Z.Heading,null,ae),n.createElement(ut.Z.Description,null,Pe))},za=Z=>({wrapper:t.css`
    width: 380px;
    cursor: pointer;
    user-select: none;
  `,disabled:t.css`
    opacity: 0.5;
  `}),Pa=({selected:Z=!1,disabled:ae,onClick:Pe})=>n.createElement(ya,{name:"Grafana managed alert",description:n.createElement("span",null,"Supports multiple data sources of any kind.",n.createElement("br",null),"Transform data with expressions."),image:"public/img/grafana_icon.svg",selected:Z,disabled:ae,value:M.$.grafana,onClick:Pe}),Jn=({children:Z,visible:ae=!1})=>ae?n.createElement(he.u,{content:"You do not appear to have any compatible datasources.",placement:"top"},n.createElement("div",null,Z)):n.createElement(n.Fragment,null,Z),ps=({selected:Z=!1,disabled:ae=!1,onClick:Pe})=>n.createElement(Jn,{visible:ae},n.createElement(ya,{name:"Mimir or Loki alert",description:n.createElement("span",null,"Use a Mimir, Loki or Cortex datasource.",n.createElement("br",null),"Expressions are not supported."),image:"public/img/alerting/mimir_logo.svg",selected:Z,disabled:ae,value:M.$.cloudAlerting,onClick:Pe})),Ha=({selected:Z=!1,disabled:ae=!1,onClick:Pe})=>n.createElement(Jn,{visible:ae},n.createElement(ya,{name:"Mimir or Loki recording rule",description:n.createElement("span",null,"Precompute expressions.",n.createElement("br",null),"Should be combined with an alert rule."),image:"public/img/alerting/mimir_logo_recording.svg",selected:Z,disabled:ae,value:M.$.cloudRecording,onClick:Pe})),fa=({selected:Z,onChange:ae,enabledTypes:Pe})=>{const Ue=cs(),et=!(0,jt.isEmpty)(Ue);(0,n.useEffect)(()=>{(0,ls.WI)((0,x.dV)())},[]);const ot=(0,f.wW)(Bs);return n.createElement(n.Fragment,null,n.createElement(Ct.Stack,{direction:"row",gap:2},Pe.includes(M.$.grafana)&&n.createElement(Pa,{selected:Z===M.$.grafana,onClick:ae}),Pe.includes(M.$.cloudAlerting)&&n.createElement(ps,{selected:Z===M.$.cloudAlerting,onClick:ae,disabled:!et}),Pe.includes(M.$.cloudRecording)&&n.createElement(Ha,{selected:Z===M.$.cloudRecording,onClick:ae,disabled:!et})),Pe.includes(M.$.grafana)&&n.createElement("small",{className:ot.meta},"Select \u201CGrafana managed\u201D unless you have a Mimir, Loki or Cortex data source with the Ruler API enabled."))},Bs=Z=>({meta:t.css`
    color: ${Z.colors.text.disabled};
  `}),Ca=({editingExistingRule:Z})=>{const{enabledRuleTypes:ae,defaultRuleType:Pe}=Sa(),{control:Ue,formState:{errors:et},getValues:ot,setValue:ft,watch:xt}=(0,u.Gc)(),St=(0,f.wW)(is),Bt=xt("type");return n.createElement(n.Fragment,null,!Z&&n.createElement(o.g,{error:et.type?.message,invalid:!!et.type?.message,"data-testid":"alert-type-picker"},n.createElement(R.g,{render:({field:{onChange:Ht}})=>n.createElement(fa,{"aria-label":"Rule type",selected:ot("type")??Pe,onChange:Ht,enabledTypes:ae}),name:"type",control:Ue,rules:{required:{value:!0,message:"Please select alert type"}}})),n.createElement("div",{className:St.flexRow},(Bt===M.$.cloudRecording||Bt===M.$.cloudAlerting)&&n.createElement(o.g,{className:St.formInput,label:"Select data source",error:et.dataSourceName?.message,invalid:!!et.dataSourceName?.message,"data-testid":"datasource-picker"},n.createElement(R.g,{render:({field:{onChange:Ht,ref:qt,...nn}})=>n.createElement(gs,{...nn,onChange:Mn=>{ft("location",void 0),Ht(Mn?.name??null)}}),name:"dataSourceName",control:Ue,rules:{required:{value:!0,message:"Please select a data source"}}}))))};function Sa(){const Z=Xa.Vt.hasAccess(C.AccessControlAction.AlertingRuleCreate,Xa.Vt.hasEditPermissionInFolders),ae=Xa.Vt.hasAccess(C.AccessControlAction.AlertingRuleExternalWrite,Xa.Vt.isEditor),Pe=Z?M.$.grafana:M.$.cloudAlerting,Ue=[];return Z&&Ue.push(M.$.grafana),ae&&Ue.push(M.$.cloudAlerting,M.$.cloudRecording),{enabledRuleTypes:Ue,defaultRuleType:Pe}}const is=Z=>({formInput:t.css`
    width: 330px;
    & + & {
      margin-left: ${Z.spacing(3)};
    }
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-end;
  `});var An=e(32557),ds=e(99822),ws=e(47471);const ks=Z=>{try{return JSON.stringify(Z),!1}catch{return!0}},Ns=(Z,ae)=>{if(ks(Z))return null;if(ae.datasourceUid!==ws.Yq)return ae;{const Pe=Z.find(Ue=>Ue.refId===ae.model.expression);return Pe?Ns(Z,Pe):null}};var rr=e(97573),or=e(51935);const Gs=(Z,ae)=>{const Pe=Z.find(et=>et.refId===ae);return Pe&&Ns(Z,Pe)},Wt={queries:[]},Zs=(0,An.PH)("duplicateQuery"),Js=(0,An.PH)("addNewDataQuery"),Xs=(0,An.PH)("setDataQueries"),sa=(0,An.PH)("addNewExpression"),es=(0,An.PH)("removeExpression"),ts=(0,An.PH)("updateExpression"),ns=(0,An.PH)("updateExpressionRefId"),qn=(0,An.PH)("rewireExpressions"),Ws=(0,An.PH)("updateExpressionType"),xa=(0,An.PH)("updateExpressionTimeRange"),ka=(0,An.PH)("updateMaxDataPoints"),zn=(0,An.Lq)(Wt,Z=>{Z.addCase(Zs,(ae,{payload:Pe})=>{ae.queries=Tt(ae.queries,Pe)}).addCase(Js,ae=>{const Pe=(0,me.P)();Pe&&(ae.queries=Tt(ae.queries,{datasourceUid:Pe.uid,model:{refId:"",datasource:{type:Pe.type,uid:Pe.uid}}}))}).addCase(Xs,(ae,{payload:Pe})=>{const Ue=ae.queries.filter(et=>(0,Ot.j)(et.model));ae.queries=[...Pe,...Ue]}).addCase(ka,(ae,Pe)=>{ae.queries=ae.queries.map(Ue=>Ue.refId===Pe.payload.refId?{...Ue,model:{...Ue.model,maxDataPoints:Pe.payload.maxDataPoints}}:Ue)}),Z.addCase(sa,ae=>{ae.queries=Tt(ae.queries,{datasourceUid:ws.Yq,model:ws.mV.newQuery({type:rr.Us.math,conditions:[{...or.R,query:{params:[]}}],expression:""})})}).addCase(es,(ae,{payload:Pe})=>{ae.queries=ae.queries.filter(Ue=>Ue.refId!==Pe)}).addCase(ts,(ae,{payload:Pe})=>{ae.queries=ae.queries.map(Ue=>{const et=Gs(ae.queries,Pe.expression),ot=et?et.relativeTimeRange:(0,ue.Rr)();return Ue.refId===Pe.refId&&(Ue.model=Pe,Pe.type===rr.Us.resample&&(Ue.relativeTimeRange=ot)),Ue})}).addCase(xa,ae=>{const Pe=ae.queries.map(Ue=>{if(Ue.datasourceUid===ws.Yq){const et=Gs(ae.queries,Ue.model.expression),ot=et?et.relativeTimeRange:(0,ue.Rr)();Ue.relativeTimeRange=ot}return Ue});ae.queries=Pe}).addCase(ns,(ae,{payload:Pe})=>{const{newRefId:Ue,oldRefId:et}=Pe;if((0,at.Dr)(ae.queries,Ue))return;const ft=(0,at.Ry)(ae.queries,et,Ue);ae.queries=ft.map(xt=>xt.refId===et?{...xt,refId:Ue,model:{...xt.model,refId:Ue}}:xt)}).addCase(qn,(ae,{payload:Pe})=>{ae.queries=(0,at.Ry)(ae.queries,Pe.oldRefId,Pe.newRefId)}).addCase(Ws,(ae,Pe)=>{ae.queries=ae.queries.map(Ue=>Ue.refId===Pe.payload.refId?{...Ue,model:{...ws.mV.newQuery({type:Pe.payload.type,conditions:[{...or.R,query:{params:[]}}],expression:""}),refId:Pe.payload.refId}}:Ue)})}),Tt=(Z,ae)=>{const Pe=(0,ds.Hs)(Z),Ue={...ae,refId:Pe,queryType:"",model:{...ae.model,hide:!1,refId:Pe},relativeTimeRange:ae.relativeTimeRange??Is(ae.model)};return[...Z,Ue]},Is=Z=>{if(!(0,Ot.j)(Z))return(0,ue.Rr)()},_s=({editingExistingRule:Z,onDataChange:ae})=>{const Pe=(0,n.useRef)(new Ft.v),{setValue:Ue,getValues:et,watch:ot,formState:{errors:ft},control:xt}=(0,u.Gc)(),[St,Bt]=(0,n.useState)({}),Ht={queries:et("queries"),panelData:{}},[{queries:qt},nn]=(0,n.useReducer)(zn,Ht),[Mn,Rn,Pn]=ot(["type","condition","dataSourceName"]),jn=Mn===M.$.grafana,On=Mn===M.$.cloudAlerting,Fn=Mn===M.$.cloudRecording,hs=(Fn||On)&&Pn,Ra=(0,n.useCallback)(()=>{Pe.current.cancel()},[]),as=(0,n.useCallback)(()=>{Pe.current.run(et("queries"))},[et]);(0,n.useEffect)(()=>{Ue("queries",qt,{shouldValidate:!1})},[qt,as,Ue]),(0,n.useEffect)(()=>{const la=Pe.current;return Pe.current.get().subscribe(us=>{Bt(us)}),()=>la.destroy()},[]);const Ps=(0,me.P)()===void 0,Cr=(0,n.useMemo)(()=>Object.values(St).some(la=>la.state===I.Gu.Loading),[St]),ss=(0,n.useMemo)(()=>qt.filter(la=>!(0,Ot.j)(la.model)),[qt]),Cs=(0,n.useMemo)(()=>qt.filter(la=>(0,Ot.j)(la.model)),[qt]),xs=qt.length===0;(0,n.useEffect)(()=>{const la=et("condition");if(!la)return;const us=(0,at.Vp)(St[la]?.series||[]);ae(us?.message||"")},[St,et,ae]);const Rs=(0,n.useCallback)(la=>{la&&(as(),Ue("condition",la))},[as,Ue]),tr=(0,n.useCallback)((la,us)=>{(0,at.Dr)(qt,us)||(nn(ns({oldRefId:la,newRefId:us})),Rn===la&&Rs(us))},[Rn,qt,Rs]),Wa=(0,n.useCallback)(la=>{nn(Xs(la)),nn(xa()),la.forEach((us,io)=>{const Bo=qt[io].refId,lo=us.refId;Bo!==lo&&nn(qn({oldRefId:Bo,newRefId:lo}))})},[qt]),Jr=(0,n.useCallback)(la=>{nn(Zs(la))},[]);return(0,n.useEffect)(()=>{if(!(0,at.Dr)(qt,Rn)){const la=qt.at(-1)?.refId??null;Rs(la)}},[Rn,qt,Rs]),n.createElement(We.z,{stepNo:2,title:"Set a query and alert condition"},n.createElement(Ca,{editingExistingRule:Z}),hs&&n.createElement(o.g,{error:ft.expression?.message,invalid:!!ft.expression?.message},n.createElement(R.g,{name:"expression",render:({field:{ref:la,...us}})=>n.createElement(Xn,{...us,dataSourceName:Pn,showPreviewAlertsButton:!Fn}),control:xt,rules:{required:{value:!0,message:"A valid expression is required"}}})),jn&&n.createElement(Ct.Stack,{direction:"column"},n.createElement(qa,{queries:ss,expressions:Cs,onRunQueries:as,onChangeQueries:Wa,onDuplicateQuery:Jr,panelData:St,condition:Rn,onSetCondition:Rs}),n.createElement(ta,{queries:qt,panelData:St,condition:Rn,onSetCondition:Rs,onRemoveExpression:la=>{nn(es(la))},onUpdateRefId:tr,onUpdateExpressionType:(la,us)=>{nn(Ws({refId:la,type:us}))},onUpdateQueryExpression:la=>{nn(ts(la))}}),n.createElement(Ct.Stack,{direction:"row"},n.createElement(he.u,{content:"You appear to have no compatible data sources",show:Ps},n.createElement(d.zx,{type:"button",icon:"plus",onClick:()=>{nn(Js())},variant:"secondary","aria-label":gt.wl.components.QueryTab.addQuery,disabled:Ps},"Add query")),i.v.expressionsEnabled&&n.createElement(d.zx,{type:"button",icon:"plus",onClick:()=>{nn(sa())},variant:"secondary"},"Add expression"),Cr&&n.createElement(d.zx,{icon:"fa fa-spinner",type:"button",variant:"destructive",onClick:Ra},"Cancel"),!Cr&&n.createElement(d.zx,{icon:"sync",type:"button",onClick:()=>as(),disabled:xs},"Preview")),xs&&n.createElement(V.b,{title:"No queries or expressions have been configured",severity:"warning"},"Create at least one query or expression to be alerted on")))},qs={message:"Recording rule name must be valid metric name. It may only contain letters, numbers, and colons. It may not contain whitespace.",value:/^[a-zA-Z_:][a-zA-Z0-9_:]*$/},Ys=()=>{const Z=(0,f.wW)(er),{register:ae,watch:Pe,formState:{errors:Ue}}=(0,u.Gc)(),et=Pe("type");return n.createElement(We.z,{stepNo:1,title:"Set an alert rule name"},n.createElement(o.g,{className:Z.formInput,label:"Rule name",description:"Name for the alert rule.",error:Ue?.name?.message,invalid:!!Ue.name?.message},n.createElement(l.I,{id:"name",...ae("name",{required:{value:!0,message:"Must enter an alert name"},pattern:et===M.$.cloudRecording?qs:void 0}),placeholder:"Give your alert rule a name."})))},Ms="1m",ir=({existing:Z,prefill:ae})=>{const Pe=(0,f.wW)(er),Ue=(0,C.useDispatch)(),et=(0,y.iG)(),[ot]=(0,v.K)(),[ft,xt]=(0,n.useState)(!1),[St,Bt]=(0,n.useState)(Z?.group.interval??Ms),Ht=ot.returnTo??"/alerting/list",[qt,nn]=(0,n.useState)(!1),Mn=(0,n.useMemo)(()=>Z?(0,D.DQ)(Z):ae?{...(0,D.uZ)(),...ae}:{...(0,D.uZ)(),queries:(0,D.s0)(),condition:"C",...ot.defaults?JSON.parse(ot.defaults):{},type:M.$.grafana,evaluateEvery:St},[Z,ae,ot,St]),Rn=(0,u.cI)({mode:"onSubmit",defaultValues:Mn,shouldFocusError:!0}),{handleSubmit:Pn,watch:jn}=Rn,On=jn("type"),Fn=jn("dataSourceName"),hs=Boolean(On&&(On===M.$.grafana||!!Fn)),Ra=(0,P._)(Wa=>Wa.ruleForm.saveRule)||S.oq;(0,a.x)(Wa=>Wa.unifiedAlerting.ruleForm.saveRule=S.oq);const[as,Ps]=(0,n.useState)(""),Cr=(Wa="")=>{Ps(Wa)},ss=(Wa,Jr)=>{if(as!==""){et.error(as);return}Ue((0,x.wy)({values:{...Mn,...Wa,annotations:Wa.annotations?.map(({key:la,value:us})=>({key:la.trim(),value:us.trim()})).filter(({key:la,value:us})=>!!la&&!!us)??[],labels:Wa.labels?.map(({key:la,value:us})=>({key:la.trim(),value:us.trim()})).filter(({key:la})=>!!la)??[]},existing:Z,redirectOnSave:Jr?Ht:void 0,initialAlertRuleName:Mn.name,evaluateEvery:St}))},Cs=()=>{if(Z){const Wa=T.Zk(Z.ruleSourceName,Z.namespace,Z.group.name,Z.rule);Ue((0,x.hS)(Wa,{navigateTo:"/alerting/list"}))}},xs=Wa=>{Z||(0,E.Z0)({grafana_version:i.v.buildInfo.version,org_id:h.Vt.user.orgId,user_id:h.Vt.user.id,error:Object.keys(Wa).toString()}),et.error("There are errors in the form. Please correct them and try again!")},Rs=()=>{(0,m.PN)(E.z7.cancelSavingAlertRule),Z||(0,E.Hc)({grafana_version:i.v.buildInfo.version,org_id:h.Vt.user.orgId,user_id:h.Vt.user.id})},tr=jn("evaluateEvery");return(0,n.useEffect)(()=>Bt(tr),[tr]),n.createElement(u.RV,{...Rn},n.createElement("form",{onSubmit:Wa=>Wa.preventDefault(),className:Pe.form},n.createElement(r.Lh,{height:"auto",justify:"flex-end"},n.createElement(s.Link,{to:Ht},n.createElement(d.zx,{variant:"secondary",disabled:Ra.loading,type:"button",fill:"outline",onClick:Rs},"Cancel")),Z?n.createElement(d.zx,{variant:"destructive",type:"button",onClick:()=>nn(!0)},"Delete"):null,Pr(jn)&&n.createElement(d.zx,{variant:"secondary",type:"button",onClick:()=>xt(!0),disabled:Ra.loading},"Edit yaml"),n.createElement(d.zx,{variant:"primary",type:"button",onClick:Pn(Wa=>ss(Wa,!1),xs),disabled:Ra.loading},Ra.loading&&n.createElement(c.$,{className:Pe.buttonSpinner,inline:!0}),"Save"),n.createElement(d.zx,{variant:"primary",type:"button",onClick:Pn(Wa=>ss(Wa,!0),xs),disabled:Ra.loading},Ra.loading&&n.createElement(c.$,{className:Pe.buttonSpinner,inline:!0}),"Save and exit")),n.createElement("div",{className:Pe.contentOuter},n.createElement(g.$,{autoHeightMin:"100%",hideHorizontalTrack:!0},n.createElement("div",{className:Pe.contentInner},n.createElement(Ys,null),n.createElement(_s,{editingExistingRule:!!Z,onDataChange:Cr}),hs&&n.createElement(n.Fragment,null,On===M.$.grafana?n.createElement(_e.wO,{initialFolder:Mn.folder,evaluateEvery:St,setEvaluateEvery:Bt}):n.createElement(Ke,null),n.createElement(nt,null),n.createElement(dt,null)))))),qt?n.createElement(p.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:Cs,onDismiss:()=>nn(!1)}):null,ft?n.createElement(Me,{onClose:()=>xt(!1)}):null)},Pr=Z=>{const[ae,Pe]=Z(["type","dataSourceName"]);return(ae===M.$.cloudAlerting||ae===M.$.cloudRecording)&&Pe!==""},er=Z=>({buttonSpinner:t.css`
      margin-right: ${Z.spacing(1)};
    `,form:t.css`
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    `,contentInner:t.css`
      flex: 1;
      padding: ${Z.spacing(2)};
    `,contentOuter:t.css`
      background: ${Z.colors.background.primary};
      border: 1px solid ${Z.colors.border.weak};
      border-radius: ${Z.shape.borderRadius()};
      overflow: hidden;
      flex: 1;
      margin-top: ${Z.spacing(1)};
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
    `,formInput:t.css`
      width: 275px;

      & + & {
        margin-left: ${Z.spacing(3)};
      }
    `})},16808:(G,O,e)=>{"use strict";e.d(O,{Z:()=>I});var t=e(52423),n=e(64421),u=e(68404),s=e(59052),i=e(86253),m=e(26418),f=e(29516),o=e(38835),l=e(25474),r=e(79090),d=e(74955),c=e(11017),g=e(90723),p=e(37190),y=e(46739);const h=({value:F,onChange:V,options:b,className:X,placeholder:k,width:H,custom:Y,onCustomChange:ee,disabled:ue=!1,addLabel:q="+ Add new","aria-label":ge,getOptionLabel:De})=>{const[fe,me]=(0,u.useState)(Y);(0,u.useEffect)(()=>{me(Y)},[Y]);const ce=(0,u.useMemo)(()=>[...b,{value:"__add__",label:q}],[b,q]),ie=(0,u.useRef)(null);return(0,u.useEffect)(()=>{ie.current&&fe&&ie.current.focus()},[fe]),fe?u.createElement(l.I,{"aria-label":ge,width:H,autoFocus:!Y,value:F||"",placeholder:k,className:X,disabled:ue,ref:ie,onChange:re=>V(re.currentTarget.value)}):u.createElement(y.Ph,{"aria-label":ge,width:H,options:ce,value:F,className:X,placeholder:k,getOptionLabel:De,disabled:ue,onChange:re=>{const Ee=re?.value;Ee==="__add__"?(me(!0),ee&&ee(!0),V("")):V(Ee)}})},a=({value:F,existingKeys:V,"aria-label":b,...X})=>{const k=(0,u.useMemo)(()=>Object.values(p.q6).filter(H=>!V.includes(H)).map(H=>({value:H,label:p.vY[H]})),[V]);return u.createElement(h,{"aria-label":b,value:F,options:k,custom:!!F&&!Object.values(p.q6).includes(F),...X})};var v=e(70197),C=e(89050),E=e(75478),P=e(81697),x=e(6694),M=e(2323),S=e(79230),D=e(90090),T=e(29427);const R=T.C.injectEndpoints({endpoints:F=>({search:F.query({query:({query:V})=>{const b=new URLSearchParams({type:"dash-db",limit:"1000",page:"1",sort:"name_sort"});return V&&b.set("query",V),{url:`/api/search?${b.toString()}`}}}),dashboard:F.query({query:({uid:V})=>({url:`/api/dashboards/uid/${V}`})})})});function L(F,V){return F.title&&V.title?F.title.localeCompare(V.title):F.title&&!V.title?1:!F.title&&V.title?-1:0}const w=({dashboardUid:F,panelId:V,isOpen:b,onChange:X,onDismiss:k})=>{const H=(0,f.wW)(A),[Y,ee]=(0,u.useState)(F),[ue,q]=(0,u.useState)(V),[ge,De]=(0,u.useState)(""),[fe,me]=(0,u.useState)(""),[ce,ie]=(0,u.useState)(""),{useSearchQuery:re,useDashboardQuery:Ee}=R,{currentData:J=[],isFetching:te}=re({query:fe}),{currentData:ne,isFetching:j}=Ee({uid:Y??""},{skip:!Y}),be=(0,u.useCallback)(Ke=>{ee(Ke),q(void 0)},[]),Le=ne?.dashboard?.panels?.filter(Ke=>typeof Ke.id=="number")?.filter(Ke=>Ke.title?.toLowerCase().includes(ce.toLowerCase())).sort(L)??[],Qe=ne?.dashboard?.panels?.find(Ke=>Ke.id.toString()===ue),Ye=(0,u.useMemo)(()=>J.map(Ke=>Ke.uid).indexOf(Y??""),[J,Y]),de=F&&F===Y,Be=Ye>=0,Ve=(0,u.useCallback)(Ke=>{const qe=Ye>=0;de&&qe&&Ke?.scrollToItem(Ye,"smart")},[de,Ye]);(0,v.Z)(()=>{me(ge)},500,[ge]);const $e=({index:Ke,style:qe})=>{const Xe=J[Ke],at=Y===Xe.uid;return u.createElement("div",{title:Xe.title,style:qe,className:(0,t.cx)(H.row,{[H.rowOdd]:Ke%2===1,[H.rowSelected]:at}),onClick:()=>be(Xe.uid)},u.createElement("div",{className:H.dashboardTitle},Xe.title),u.createElement("div",{className:H.dashboardFolder},u.createElement(P.J,{name:"folder"})," ",Xe.folderTitle??"General"))},We=({index:Ke,style:qe})=>{const Xe=Le[Ke],at=ue===Xe.id.toString();return u.createElement("div",{style:qe,className:(0,t.cx)(H.row,{[H.rowOdd]:Ke%2===1,[H.rowSelected]:at}),onClick:()=>q(Xe.id.toString())},Xe.title||"<No title>")};return u.createElement(x.u,{title:"Select dashboard and panel",closeOnEscape:!0,isOpen:b,onDismiss:k,className:H.modal,contentClassName:H.modalContent},!Be&&F&&u.createElement(M.b,{title:"Current selection",severity:"info",topSpacing:0,bottomSpacing:1,className:H.modalAlert},u.createElement("div",null,"Dashboard: ",ne?.dashboard.title," (",ne?.dashboard.uid,") in folder"," ",ne?.meta.folderTitle??"General"),Boolean(Qe)&&u.createElement("div",null,"Panel: ",Qe.title," (",Qe.id,")")),u.createElement("div",{className:H.container},u.createElement(S.H,{value:ge,onChange:De,title:"Search dashboard",placeholder:"Search dashboard",autoFocus:!0}),u.createElement(S.H,{value:ce,onChange:ie,title:"Search panel",placeholder:"Search panel"}),u.createElement("div",{className:H.column},te&&u.createElement(D.u,{text:"Loading dashboards...",className:H.loadingPlaceholder}),!te&&u.createElement(C.Z,null,({height:Ke,width:qe})=>u.createElement(E.t7,{ref:Ve,itemSize:50,height:Ke,width:qe,itemCount:J.length},$e))),u.createElement("div",{className:H.column},!F&&!j&&u.createElement("div",null,"Select a dashboard to get a list of available panels"),j&&u.createElement(D.u,{text:"Loading dashboard...",className:H.loadingPlaceholder}),!j&&u.createElement(C.Z,null,({width:Ke,height:qe})=>u.createElement(E.t7,{itemSize:32,height:qe,width:Ke,itemCount:Le.length},We)))),u.createElement(x.u.ButtonRow,null,u.createElement(g.zx,{type:"button",variant:"secondary",onClick:k},"Cancel"),u.createElement(g.zx,{type:"button",variant:"primary",disabled:!(Y&&ue),onClick:()=>{Y&&ue&&X(Y,ue)}},"Confirm")))},A=F=>({container:t.css`
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: min-content auto;
    gap: ${F.spacing(2)};
    flex: 1;
  `,column:t.css`
    flex: 1 1 auto;
  `,dashboardTitle:t.css`
    height: 22px;
    font-weight: ${F.typography.fontWeightBold};
  `,dashboardFolder:t.css`
    height: 20px;
    font-size: ${F.typography.bodySmall.fontSize};
    color: ${F.colors.text.secondary};
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    column-gap: ${F.spacing(1)};
    align-items: center;
  `,row:t.css`
    padding: ${F.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    cursor: pointer;
    border: 2px solid transparent;
  `,rowSelected:t.css`
    border-color: ${F.colors.primary.border};
  `,rowOdd:t.css`
    background-color: ${F.colors.background.secondary};
  `,loadingPlaceholder:t.css`
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  `,modal:t.css`
    height: 100%;
  `,modalContent:t.css`
    flex: 1;
    display: flex;
    flex-direction: column;
  `,modalAlert:t.css`
    flex-grow: 0;
  `}),N=()=>{const F=(0,f.wW)(W),[V,b]=(0,i.Z)(!1),{control:X,register:k,watch:H,formState:{errors:Y},setValue:ee}=(0,s.Gc)(),ue=H("annotations"),q=(0,u.useCallback)(re=>ue.filter((Ee,J)=>J!==re).map(({key:Ee})=>Ee),[ue]),{fields:ge,append:De,remove:fe}=(0,s.Dq)({control:X,name:"annotations"}),me=ue.find(re=>re.key===p.q6.dashboardUID)?.value,ce=ue.find(re=>re.key===p.q6.panelID)?.value,ie=(re,Ee)=>{const J=(0,n.ZP)(ue,te=>{const ne=te.find(be=>be.key===p.q6.dashboardUID),j=te.find(be=>be.key===p.q6.panelID);ne?ne.value=re:te.push({key:p.q6.dashboardUID,value:re}),j?j.value=Ee:te.push({key:p.q6.panelID,value:Ee})});ee("annotations",J),b(!1)};return u.createElement(u.Fragment,null,u.createElement(o._,null,"Summary and annotations"),u.createElement("div",{className:F.flexColumn},ge.map((re,Ee)=>{const J=ue[Ee]?.key?.toLocaleLowerCase().endsWith("url"),te=J?l.I:r.K;return u.createElement("div",{key:re.id,className:F.flexRow},u.createElement(d.g,{className:F.field,invalid:!!Y.annotations?.[Ee]?.key?.message,error:Y.annotations?.[Ee]?.key?.message,"data-testid":`annotation-key-${Ee}`},u.createElement(c.g,{name:`annotations.${Ee}.key`,defaultValue:re.key,render:({field:{ref:ne,...j}})=>u.createElement(a,{...j,"aria-label":`Annotation detail ${Ee+1}`,existingKeys:q(Ee),width:18}),control:X,rules:{required:{value:!!ue[Ee]?.value,message:"Required."}}})),u.createElement(d.g,{className:(0,t.cx)(F.flexRowItemMargin,F.field),invalid:!!Y.annotations?.[Ee]?.value?.message,error:Y.annotations?.[Ee]?.value?.message},u.createElement(te,{"data-testid":`annotation-value-${Ee}`,className:(0,t.cx)(F.annotationValueInput,{[F.textarea]:!J}),...k(`annotations.${Ee}.value`),placeholder:J?"https://":"Text",defaultValue:re.value})),u.createElement(g.zx,{type:"button",className:F.flexRowItemMargin,"aria-label":"delete annotation",icon:"trash-alt",variant:"secondary",onClick:()=>fe(Ee)}))}),u.createElement(m.Stack,{direction:"row",gap:1},u.createElement(g.zx,{className:F.addAnnotationsButton,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{De({key:"",value:""})}},"Add annotation"),u.createElement(g.zx,{type:"button",variant:"secondary",icon:"dashboard",onClick:()=>b(!0)},"Set dashboard and panel")),V&&u.createElement(w,{isOpen:!0,dashboardUid:me,panelId:ce,onChange:ie,onDismiss:()=>b(!1)})))},W=F=>({annotationValueInput:t.css`
    width: 394px;
  `,textarea:t.css`
    height: 76px;
  `,addAnnotationsButton:t.css`
    flex-grow: 0;
    align-self: flex-start;
    margin-left: 148px;
  `,flexColumn:t.css`
    display: flex;
    flex-direction: column;
  `,field:t.css`
    margin-bottom: ${F.spacing(.5)};
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
  `,flexRowItemMargin:t.css`
    margin-left: ${F.spacing(.5)};
  `}),I=N},56412:(G,O,e)=>{"use strict";e.d(O,{wO:()=>te,Xr:()=>fe,Jm:()=>me});var t=e(52423),n=e(68404),u=e(59052),s=e(26418),i=e(29516),m=e(74955),f=e(91605),o=e(25474),l=e(90723),r=e(11017),d=e(41904),c=e(79370),g=e(45849),p=e(58593),y=e(33950),h=e(61068),a=e(11376),v=e(82897),C=e(38835),E=e(90090),P=e(46739),x=e(77582),M=e(81168),S=e(72004),D=e(79662),T=e(63613),R=e(48756),L=e(81697),w=e(79658);const A=()=>{const j=(0,i.wW)(I),be=()=>window.open("https://github.com/grafana/grafana/issues/42947","_blank");return n.createElement(s.Stack,{gap:.5},n.createElement("div",{className:j.slashNotAllowed},"Folders with '/' character are not allowed."),n.createElement(R.u,{placement:"top",content:"Link to the Github issue",theme:"info"},n.createElement(L.J,{name:"info-circle",size:"xs",className:j.infoIcon,onClick:be})))},N=j=>j.indexOf("/")!==-1;function W(j){const{value:be}=j,Qe={warningCondition:de=>N(de),warningComponent:A},Ye={disallowValues:!0,isAllowedValue:de=>!N(de)};return n.createElement(w.Es,{showRoot:!1,rootName:"",allowEmpty:!0,initialTitle:be?.title,initialFolderUid:be?.uid,accessControlMetadata:!0,...j,permissionLevel:M.PermissionLevelString.View,customAdd:Ye,folderWarning:Qe})}const I=j=>({slashNotAllowed:t.css`
    color: ${j.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
  `,infoIcon:t.css`
    color: ${j.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
    cursor: pointer;
  `});var F=e(20700);const V=1e3,b=(j,be)=>(0,n.useMemo)(()=>(j?j[be]??[]:[]).map(de=>({name:de.name,provisioned:de.rules.some(Be=>(0,D.Pc)(Be)&&Boolean(Be.grafana_alert.provenance))})).filter(de=>!de.provisioned).map(de=>de.name),[j,be]);function X(j,be,Le){return be.map(Qe=>({label:Qe,value:Qe,description:`${me(j,Qe,Le)}`}))}const k=j=>{const Le=(0,c._)(de=>de.rulerRules)[g.GC],Qe=Le?.result;return{groupOptions:X(Qe,b(Le?.result,j),j),loading:Le?.loading}},H=j=>{const be=(0,n.useCallback)(Le=>{const Qe=x.Vt.hasEditPermissionInFolders,Ye=x.Vt.hasAccessInMetadata(M.AccessControlAction.AlertingRuleCreate,Le,Qe),de=j&&Le.folderId===j.id&&x.Vt.hasAccessInMetadata(M.AccessControlAction.AlertingRuleUpdate,Le,Qe);return Ye||de},[j]);return(0,n.useCallback)(Le=>Le.filter(be).filter(Qe=>!N(Qe.title??"")),[be])};function Y({initialFolder:j}){const{formState:{errors:be},watch:Le,control:Qe}=(0,u.Gc)(),Ye=(0,i.wW)(ee),de=(0,M.useDispatch)(),Be=H(j),Ve=Le("folder"),$e=Le("group"),[We,Ke]=(0,n.useState)({label:$e,title:$e}),qe=(0,n.useRef)(!0),{groupOptions:Xe,loading:at}=k(Ve?.title??"");(0,n.useEffect)(()=>Ke({label:$e,title:$e}),[$e,Ke]),(0,n.useEffect)(()=>{de((0,S.IA)(g.GC))},[de]);const Ze=(0,n.useCallback)(()=>{$e&&!qe.current&&Ve?.title&&Ke({label:"",title:""}),qe.current=!1},[$e,Ve?.title]),lt=(0,n.useCallback)(rt=>Xe.includes(je=>je.label===rt),[Xe]),nt=rt=>rt.slice(0,V),_e=(0,n.useCallback)(async rt=>nt(rt?Xe.filter(dt=>(dt.label??"").toLowerCase().includes(rt.toLowerCase())):Xe),[Xe]),ut=(0,n.useMemo)(()=>(0,v.debounce)(_e,300,{leading:!0}),[_e]);return n.createElement("div",{className:Ye.container},n.createElement(m.g,{label:n.createElement(C._,{htmlFor:"folder",description:"Select a folder for your rule."},n.createElement(s.Stack,{gap:.5},"Folder",n.createElement(T.s,{text:"Each folder has unique folder permission. When you store multiple rules in a folder, the folder access permissions are assigned to the rules."}))),className:Ye.formInput,error:be.folder?.message,invalid:!!be.folder?.message,"data-testid":"folder-picker"},n.createElement(r.g,{render:({field:{ref:rt,...je}})=>n.createElement(W,{inputId:"folder",...je,enableCreateNew:x.Vt.hasPermission(M.AccessControlAction.FoldersCreate),enableReset:!0,filter:Be,onChange:({title:dt,uid:oe})=>{je.onChange({title:dt,uid:oe}),lt(We.value??"")||Ze()}}),name:"folder",rules:{required:{value:!0,message:"Select a folder"},validate:{pathSeparator:rt=>(0,F.p0)(rt.title)}}})),n.createElement(m.g,{label:"Evaluation group (interval)","data-testid":"group-picker",description:"Select a group to evaluate all rules in the same group over the same time interval.",className:Ye.formInput,error:be.group?.message,invalid:!!be.group?.message},n.createElement(r.g,{render:({field:{ref:rt,...je}})=>at?n.createElement(E.u,{text:"Loading..."}):n.createElement(P.qb,{disabled:!Ve,inputId:"group",key:`my_unique_select_key__${We?.title??""}`,...je,loadOptions:ut,loadingMessage:"Loading groups...",defaultOptions:Xe,defaultValue:We,getOptionLabel:dt=>`${dt.label}`,placeholder:"Evaluation group name",onChange:dt=>{je.onChange(dt.label??"")},value:We,allowCustomValue:!0,formatCreateLabel:dt=>"+ Add new "}),name:"group",control:Qe,rules:{required:{value:!0,message:"Must enter a group name"},validate:{pathSeparator:rt=>(0,F.p0)(rt)}}})))}const ee=j=>({container:t.css`
    display: flex;
    flex-direction: row;
    align-items: baseline;
    max-width: ${j.breakpoints.values.sm}px;
    justify-content: space-between;
  `,formInput:t.css`
    width: 275px;
    & + & {
      margin-left: ${j.spacing(3)};
    }
  `});var ue=e(46063);const q=[{value:ue.g0.Alerting,label:"Alerting"},{value:ue.g0.NoData,label:"No Data"},{value:ue.g0.OK,label:"OK"},{value:ue.g0.Error,label:"Error"}],ge=({includeNoData:j,includeError:be,...Le})=>{const Qe=(0,n.useMemo)(()=>j?be?q:q.filter(Ye=>Ye.value!==ue.g0.Error):q.filter(Ye=>Ye.value!==ue.g0.NoData),[j,be]);return n.createElement(P.Ph,{options:Qe,...Le})};var De=e(36894);const fe=10,me=(j,be,Le)=>(j?j[Le]:[])?.find(Be=>Be.name===be)?.interval??a.E,ce=j=>({required:{value:!0,message:"Required."},validate:be=>{if(be==="0")return!0;try{const Le=(0,p.nd)(be);if(Le===0)return!0;try{const Qe=(0,p.nd)(j);return Le>=Qe?!0:"For duration must be greater than or equal to the evaluation interval."}catch{return!0}}catch(Le){return Le instanceof Error?Le.message:"Failed to parse duration"}}}),ie=(j,be)=>{const{groupOptions:Le}=k(j);return!(0,n.useCallback)(Ye=>Le.some(de=>de.label===Ye),[Le])(be)},re=({rules:j})=>{const{watch:be,register:Le,formState:{errors:Qe}}=(0,u.Gc)(),Ye=(0,i.wW)(ne),de="eval-every-input";return n.createElement(m.g,{label:"Evaluation interval",description:"Applies to every rule within a group. It can overwrite the interval of an existing alert rule."},n.createElement("div",{className:Ye.alignInterval},n.createElement(s.Stack,{direction:"row","justify-content":"left","align-items":"baseline",gap:0},n.createElement(f.W,{htmlFor:de,width:16,tooltip:"How often the alert will be evaluated to see if it fires"},"Evaluate every"),n.createElement(m.g,{className:Ye.inlineField,error:Qe.evaluateEvery?.message,invalid:!!Qe.evaluateEvery,validationMessageHorizontalOverflow:!0},n.createElement(o.I,{id:de,width:8,...Le("evaluateEvery",(0,h.MD)(j,be("group"),be("folder.title")))})))))};function Ee({initialFolder:j,evaluateEvery:be,setEvaluateEvery:Le}){const Qe=(0,i.wW)(ne),{watch:Ye,setValue:de}=(0,u.Gc)(),[Be,Ve]=(0,n.useState)(!1),$e=Ye("group"),We=Ye("folder"),qe=(0,c._)(nt=>nt.rulerRules)[g.GC],Xe=ie(We?.title??"",$e);(0,n.useEffect)(()=>{Xe?(Le(a.E),de("evaluateEvery",a.E)):$e&&We&&Le(me(qe?.result,$e,We?.title??""))},[$e,We,qe?.result,Le,Xe,de]);const at=(nt=!1)=>{nt||(0,d.PN)(d.z7.leavingRuleGroupEdit),Ve(!1)},Ze=()=>Ve(!0),lt=qe?.loading||Xe||!We||!$e;return n.createElement("div",null,n.createElement(Y,{initialFolder:j}),Be&&n.createElement(h.vq,{groupInterval:be,nameSpaceAndGroup:{namespace:We?.title??"",group:$e},sourceName:g.GC,onClose:()=>at(),folderAndGroupReadOnly:!0}),We&&$e&&n.createElement("div",{className:Qe.evaluationContainer},n.createElement(s.Stack,{direction:"column",gap:0},n.createElement("div",{className:Qe.marginTop},Xe&&$e?n.createElement(re,{rules:qe?.result}):n.createElement(s.Stack,{direction:"column",gap:1},n.createElement("div",{className:Qe.evaluateLabel},"Alert rules in the "," ",n.createElement("span",{className:Qe.bold},$e)," group are evaluated every"," ",n.createElement("span",{className:Qe.bold},be),"."),!Xe&&n.createElement("div",null,"Evaluation group interval applies to every rule within a group. It overwrites intervals defined for existing alert rules."))),n.createElement(s.Stack,{direction:"row","justify-content":"right","align-items":"center"},!Xe&&n.createElement("div",{className:Qe.marginTop},n.createElement(l.zx,{icon:"edit",type:"button",variant:"secondary",disabled:lt,onClick:Ze},n.createElement("span",null,"Edit evaluation group")))))))}function J({evaluateEvery:j}){const be=(0,i.wW)(ne),{register:Le,formState:{errors:Qe}}=(0,u.Gc)(),Ye="eval-for-input";return n.createElement(s.Stack,{direction:"row","justify-content":"flex-start","align-items":"flex-start"},n.createElement(f.W,{htmlFor:Ye,width:7,tooltip:'Once the condition is breached, the alert goes into pending state. If the alert is pending longer than the "for" value, it becomes a firing alert.'},"for"),n.createElement(m.g,{className:be.inlineField,error:Qe.evaluateFor?.message,invalid:!!Qe.evaluateFor?.message,validationMessageHorizontalOverflow:!0},n.createElement(o.I,{id:Ye,width:8,...Le("evaluateFor",ce(j))})))}function te({initialFolder:j,evaluateEvery:be,setEvaluateEvery:Le}){const Qe=(0,i.wW)(ne),[Ye,de]=(0,n.useState)(!1);return n.createElement(De.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(s.Stack,{direction:"column","justify-content":"flex-start","align-items":"flex-start"},n.createElement(Ee,{initialFolder:j,setEvaluateEvery:Le,evaluateEvery:be}),n.createElement(J,{evaluateEvery:be})),n.createElement(y.U,{isCollapsed:!Ye,onToggle:Be=>de(!Be),text:"Configure no data and error handling",className:Qe.collapseToggle}),Ye&&n.createElement(n.Fragment,null,n.createElement(m.g,{htmlFor:"no-data-state-input",label:"Alert state if no data or all values are null"},n.createElement(r.g,{render:({field:{onChange:Be,ref:Ve,...$e}})=>n.createElement(ge,{...$e,inputId:"no-data-state-input",width:42,includeNoData:!0,includeError:!1,onChange:We=>Be(We?.value)}),name:"noDataState"})),n.createElement(m.g,{htmlFor:"exec-err-state-input",label:"Alert state if execution error or timeout"},n.createElement(r.g,{render:({field:{onChange:Be,ref:Ve,...$e}})=>n.createElement(ge,{...$e,inputId:"exec-err-state-input",width:42,includeNoData:!1,includeError:!0,onChange:We=>Be(We?.value)}),name:"execErrState"}))))}const ne=j=>({inlineField:t.css`
    margin-bottom: 0;
  `,collapseToggle:t.css`
    margin: ${j.spacing(2,0,2,-1)};
  `,evaluateLabel:t.css`
    align-self: left;
    margin-right: ${j.spacing(1)};
  `,evaluationContainer:t.css`
    background-color: ${j.colors.background.secondary};
    padding: ${j.spacing(2)};
    max-width: ${j.breakpoints.values.sm}px;
    font-size: ${j.typography.size.sm};
  `,intervalChangedLabel:t.css`
    margin-bottom: ${j.spacing(1)};
  `,warningIcon:t.css`
    justify-self: center;
    margin-right: ${j.spacing(1)};
    color: ${j.colors.warning.text};
  `,warningMessage:t.css`
    color: ${j.colors.warning.text};
  `,bold:t.css`
    font-weight: bold;
  `,alignInterval:t.css`
    margin-top: ${j.spacing(1)};
    margin-left: -${j.spacing(1)};
  `,marginTop:t.css`
    margin-top: ${j.spacing(1)};
  `})},19191:(G,O,e)=>{"use strict";e.d(O,{Z:()=>w});var t=e(52423),n=e(82897),u=e(68404),s=e(59052),i=e(26418),m=e(90723),f=e(29516),o=e(90090),l=e(74955),r=e(91605),d=e(25474),c=e(38835),g=e(48756),p=e(81697),y=e(81168),h=e(79370),a=e(72004),v=e(46739);const E=u.forwardRef(function({onChange:N,options:W,defaultValue:I,type:F,onOpenMenu:V=()=>{}},b){return u.createElement("div",{ref:b},u.createElement(l.g,{disabled:!1,"data-testid":`alertlabel-${F}-picker`},u.createElement(v.Ph,{placeholder:`Choose ${F}`,width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:N,onOpenMenu:V,options:W,maxMenuHeight:500,noOptionsMessage:"No labels found",defaultValue:I,allowCustomValue:!0})))}),P=A=>{const N=(0,y.useDispatch)();(0,u.useEffect)(()=>{N((0,a.IA)(A))},[N,A]);const I=(0,h._)(X=>X.rulerRules)[A],F=I?.result||{},V=(0,n.compact)((0,n.flattenDeep)(Object.keys(F).map(X=>F[X].map(k=>k.rules.map(H=>H.labels))))),b={};return V.forEach(X=>{Object.entries(X).forEach(([k,H])=>{b[k]=[...new Set([...b[k]||[],H])]})}),{loading:I?.loading,labelsByKey:b}};function x(A=[]){return A.map(N=>({label:N,value:N}))}const M=({remove:A,className:N,index:W})=>u.createElement(m.zx,{className:N,"aria-label":"delete label",icon:"trash-alt","data-testid":`delete-label-${W}`,variant:"secondary",onClick:()=>{A(W)}}),S=({append:A,className:N})=>u.createElement(m.zx,{className:N,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{A({key:"",value:""})}},"Add label"),D=({dataSourceName:A})=>{const N=(0,f.wW)(L),{register:W,control:I,watch:F,formState:{errors:V},setValue:b}=(0,s.Gc)(),X=F("labels"),{fields:k,remove:H,append:Y}=(0,s.Dq)({control:I,name:"labels"}),{loading:ee,labelsByKey:ue}=P(A),[q,ge]=(0,u.useState)(""),De=(0,u.useMemo)(()=>x(Object.keys(ue)),[ue]),fe=(0,u.useCallback)(ce=>x(ue[ce]),[ue]),me=(0,u.useMemo)(()=>fe(q),[q,fe]);return u.createElement(u.Fragment,null,ee&&u.createElement(o.u,{text:"Loading"}),!ee&&u.createElement(u.Fragment,null,k.map((ce,ie)=>u.createElement("div",{key:ce.id},u.createElement("div",{className:(0,t.cx)(N.flexRow,N.centerAlignRow)},u.createElement(l.g,{className:N.labelInput,invalid:Boolean(V.labels?.[ie]?.key?.message),error:V.labels?.[ie]?.key?.message,"data-testid":`label-key-${ie}`},u.createElement(E,{...W(`labels.${ie}.key`,{required:{value:Boolean(X[ie]?.value),message:"Required."}}),defaultValue:ce.key?{label:ce.key,value:ce.key}:void 0,options:De,onChange:re=>{b(`labels.${ie}.key`,re.value),ge(re.value)},type:"key"})),u.createElement(r.W,{className:N.equalSign},"="),u.createElement(l.g,{className:N.labelInput,invalid:Boolean(V.labels?.[ie]?.value?.message),error:V.labels?.[ie]?.value?.message,"data-testid":`label-value-${ie}`},u.createElement(E,{...W(`labels.${ie}.value`,{required:{value:Boolean(X[ie]?.key),message:"Required."}}),defaultValue:ce.value?{label:ce.value,value:ce.value}:void 0,options:me,onChange:re=>{b(`labels.${ie}.value`,re.value)},onOpenMenu:()=>{ge(X[ie].key)},type:"value"})),u.createElement(M,{className:N.deleteLabelButton,index:ie,remove:H})))),u.createElement(S,{className:N.addLabelButton,append:Y})))},T=()=>{const A=(0,f.wW)(L),{register:N,control:W,watch:I,formState:{errors:F}}=(0,s.Gc)(),V=I("labels"),{fields:b,remove:X,append:k}=(0,s.Dq)({control:W,name:"labels"});return u.createElement(u.Fragment,null,b.map((H,Y)=>u.createElement("div",{key:H.id},u.createElement("div",{className:(0,t.cx)(A.flexRow,A.centerAlignRow),"data-testid":"alertlabel-input-wrapper"},u.createElement(l.g,{className:A.labelInput,invalid:!!F.labels?.[Y]?.key?.message,error:F.labels?.[Y]?.key?.message},u.createElement(d.I,{...N(`labels.${Y}.key`,{required:{value:!!V[Y]?.value,message:"Required."}}),placeholder:"key","data-testid":`label-key-${Y}`,defaultValue:H.key})),u.createElement(r.W,{className:A.equalSign},"="),u.createElement(l.g,{className:A.labelInput,invalid:!!F.labels?.[Y]?.value?.message,error:F.labels?.[Y]?.value?.message},u.createElement(d.I,{...N(`labels.${Y}.value`,{required:{value:!!V[Y]?.key,message:"Required."}}),placeholder:"value","data-testid":`label-value-${Y}`,defaultValue:H.value})),u.createElement(M,{className:A.deleteLabelButton,index:Y,remove:X})))),u.createElement(S,{className:A.addLabelButton,append:k}))},R=({className:A,dataSourceName:N})=>{const W=(0,f.wW)(L);return u.createElement("div",{className:(0,t.cx)(A,W.wrapper)},u.createElement(c._,null,u.createElement(i.Stack,{gap:.5},u.createElement("span",null,"Custom Labels"),u.createElement(g.u,{content:u.createElement("div",null,"The dropdown only displays labels that you have previously used for alerts. Select a label from the dropdown or type in a new one.")},u.createElement(p.J,{className:W.icon,name:"info-circle",size:"sm"})))),u.createElement(u.Fragment,null,u.createElement("div",{className:W.flexRow},u.createElement(r.W,{width:18},"Labels"),u.createElement("div",{className:W.flexColumn},N&&u.createElement(D,{dataSourceName:N}),!N&&u.createElement(T,null)))))},L=A=>({icon:t.css`
      margin-right: ${A.spacing(.5)};
    `,wrapper:t.css`
      margin-bottom: ${A.spacing(4)};
    `,flexColumn:t.css`
      display: flex;
      flex-direction: column;
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;

      & + button {
        margin-left: ${A.spacing(.5)};
      }
    `,deleteLabelButton:t.css`
      margin-left: ${A.spacing(.5)};
      align-self: flex-start;
    `,addLabelButton:t.css`
      flex-grow: 0;
      align-self: flex-start;
    `,centerAlignRow:t.css`
      align-items: baseline;
    `,equalSign:t.css`
      align-self: flex-start;
      width: 28px;
      justify-content: center;
      margin-left: ${A.spacing(.5)};
    `,labelInput:t.css`
      width: 175px;
      margin-bottom: ${A.spacing(1)};
      & + & {
        margin-left: ${A.spacing(1)};
      }
    `}),w=R},36894:(G,O,e)=>{"use strict";e.d(O,{z:()=>i});var t=e(52423),n=e(68404),u=e(29516),s=e(65587);const i=({title:f,stepNo:o,children:l,description:r})=>{const d=(0,u.wW)(m);return n.createElement("div",{className:d.parent},n.createElement("div",null,n.createElement("span",{className:d.stepNo},o)),n.createElement("div",{className:d.content},n.createElement(s.C,{label:f,className:d.fieldset},r&&n.createElement("p",{className:d.description},r),l)))},m=f=>({fieldset:t.css`
    legend {
      font-size: 16px;
      padding-top: ${f.spacing(.5)};
    }
  `,parent:t.css`
    display: flex;
    flex-direction: row;
    max-width: ${f.breakpoints.values.xl};
    & + & {
      margin-top: ${f.spacing(4)};
    }
  `,description:t.css`
    margin-top: -${f.spacing(2)};
    color: ${f.colors.text.secondary};
  `,stepNo:t.css`
    display: inline-block;
    width: ${f.spacing(4)};
    height: ${f.spacing(4)};
    line-height: ${f.spacing(4)};
    border-radius: ${f.spacing(4)};
    text-align: center;
    color: ${f.colors.text.maxContrast};
    background-color: ${f.colors.background.canvas};
    font-size: ${f.typography.size.lg};
    margin-right: ${f.spacing(2)};
  `,content:t.css`
    flex: 1;
  `})},20700:(G,O,e)=>{"use strict";e.d(O,{p0:()=>P,Vp:()=>x,Fu:()=>S,Ry:()=>v,Dr:()=>E,Yq:()=>M});var t=e(24177),n=e(34472),u=e(40538),s=e(47694),i=e(67162),m=e(75e3),f=e(97573),o=e(82897),l=e(58635),r=e(28630);const d=(0,l.Z)(c,(T,R)=>a(T[0])===a(R[0]));function c(T){const R=new r.kJ,L=T.map(w=>w.refId);return R.createNodes(L),T.forEach(w=>{const A=w.refId;((0,m.j)(w.model)&&w.model.type==="math"?g(w.model.expression??""):[w.model.expression]).forEach(I=>{A&&I&&!(A===I)&&R.link(I,A)})}),R}function g(T){const R=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),L=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),w=Array.from(T.matchAll(R)).map(N=>N.groups?.var),A=Array.from(T.matchAll(L)).map(N=>N.groups?.var);return(0,o.compact)((0,o.uniq)([...w,...A]))}const p=(0,o.memoize)(y,(T,R)=>T+h(R));function y(T,R){const L=R.getNode(T);let w=[];function A(N){const W=N.inputEdges;W.length>0?W.forEach(I=>{I.inputNode&&A(I.inputNode)}):w?.push(N)}return A(L),w.map(N=>N.name)}function h(T){return Object.keys(T.nodes).map(R=>{const L=T.nodes[R];let w=L.outputEdges.map(N=>N.outputNode?.name).join(", "),A=L.inputEdges.map(N=>N.inputNode?.name).join(", ");return`${L.name}:${w}:${A}`}).join(" ")}function a(T){return T.map(R=>{const L=(0,m.j)(R.model)?R.model.type:R.queryType;return R.refId+(R.model.expression??"")+L}).join()}function v(T,R,L){return T.map(w=>{if(R===L||!(0,m.j)(w.model))return w;const A=w.model.type==="math",N=w.model.type==="reduce",W=w.model.type==="resample",I=w.model.type==="classic_conditions",F=w.model.type==="threshold";if(A)return{...w,model:{...w.model,expression:C(w.model.expression??"",R,L)}};if(W||N||F){const V=w.model.expression===R;return{...w,model:{...w.model,expression:V?L:w.model.expression}}}if(I){const V=w.model.conditions?.map(b=>({...b,query:{...b.query,params:b.query.params.map(X=>X===R?L:X)}}));return{...w,model:{...w.model,conditions:V}}}return w})}function C(T,R,L){const w=new RegExp("(\\$"+R+"\\b)|(\\${"+R+"})","gm"),A="${"+L+"}";return T.replace(w,A)}function E(T,R){return T.find(L=>L.refId===R)!==void 0}function P(T){return T.includes("/")||T.includes("\\")?'Cannot contain "/" or "\\" characters':!0}function x(T){if(T.length===0)return;const R=(0,n.hZ)(T);let L;return R&&(L=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),L}function M(T){const L=(T[0]?.meta?.notices??[]).find(w=>w.severity==="warning")?.text;return L?new Error(L):void 0}function S(T){const R={},L=[f.Us.threshold,f.Us.classic];for(const N of T){if(!(0,m.j)(N.model)||!L.includes(N.model.type)||!Array.isArray(N.model.conditions))continue;const W=N.model.conditions.some(D);N.model.conditions.forEach((I,F)=>{const V=I.evaluator.params,b=I.query.params[0]??N.model.expression,X=D(I);try{const k=d(T),H=p(b,k);T.filter(ee=>H.includes(ee.refId)).forEach(ee=>{const ue=ee.refId,q=!(0,m.j)(ee?.model),ge=Boolean(q&&ue);ue&&!R[ue]&&(R[ue]={config:{mode:t.H.Absolute,steps:[]},mode:u.i3.Line}),ue&&ge&&!X&&!W?w(ue,V[0]):ue&&ge&&X&&(A(ue,V,I.evaluator.type),R[ue].mode=u.i3.LineAndArea)})}catch(k){console.error("Failed to parse thresholds",k);return}})}function w(N,W){R[N].config.steps.push({value:-1/0,color:"transparent"},{value:W,color:s.vc.theme2.colors.error.main})}function A(N,W,I){I===i.$.IsWithinRange&&R[N].config.steps.push({value:-1/0,color:"transparent"},{value:W[0],color:s.vc.theme2.colors.error.main},{value:W[1],color:s.vc.theme2.colors.error.main},{value:W[1],color:"transparent"}),I===i.$.IsOutsideRange&&R[N].config.steps.push({value:-1/0,color:s.vc.theme2.colors.error.main},{value:W[0],color:s.vc.theme2.colors.error.main},{value:W[0],color:"transparent"},{value:W[1],color:s.vc.theme2.colors.error.main}),R[N].config.steps.sort((F,V)=>F.value-V.value)}return R}function D(T){return T.evaluator.type===i.$.IsWithinRange||T.evaluator.type===i.$.IsOutsideRange}},48563:(G,O,e)=>{"use strict";e.d(O,{o:()=>r});var t=e(68404),n=e(46519),u=e(79662),s=e(52694),i=e(53731),m=e(78543),f=e(80498);const o=({instance:c})=>{const g=(Object.entries(c.annotations||{})||[]).filter(([p,y])=>!!y.trim());return t.createElement("div",null,c.value&&t.createElement(f.C,{label:"Value",horizontal:!0},c.value),g.map(([p,y])=>t.createElement(m.a,{key:p,annotationKey:p,value:y})))};var l=e(45608);const r=({instances:c,pagination:g,footerRow:p})=>{const y=(0,t.useMemo)(()=>c.map(h=>({data:h,id:(0,u.pB)(h)})),[c]);return t.createElement(i.t,{cols:d,isExpandable:!0,items:y,renderExpandedContent:({data:h})=>t.createElement(o,{instance:h}),pagination:g,footerRow:p})},d=[{id:"state",label:"State",renderCell:({data:{state:c}})=>t.createElement(l.l,{state:c}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{labels:c}})=>t.createElement(s.s,{labels:c})},{id:"created",label:"Created",renderCell:({data:{activeAt:c}})=>t.createElement(t.Fragment,null,c.startsWith("0001")?"-":(0,n.CQ)(c).format("YYYY-MM-DD HH:mm:ss")),size:"150px"}]},45608:(G,O,e)=>{"use strict";e.d(O,{l:()=>s});var t=e(68404),n=e(79662),u=e(79453);const s=({state:i,size:m="md"})=>t.createElement(u.i,{state:(0,n.Aq)(i),size:m},(0,n.SS)(i))},61068:(G,O,e)=>{"use strict";e.d(O,{vq:()=>H,MD:()=>k,qd:()=>W,BT:()=>F,Bg:()=>b});var t=e(52423),n=e(68404),u=e(59052),s=e(26418),i=e(68884),m=e(29516),f=e(6694),o=e(74955),l=e(38835),r=e(25474),d=e(90723),c=e(60499),g=e(40014),p=e(81168),y=e(79370),h=e(72004),a=e(82963),v=e(45849),C=e(46818),E=e(79662),P=e(58593),x=e(53731),M=e(63613),S=e(93003),D=e(2323);const T=()=>n.createElement(D.b,{severity:"warning",title:"Global evalutation interval limit exceeded"},"A minimum evaluation interval of ",n.createElement("strong",null,S.v.unifiedAlerting.minInterval)," has been configured in Grafana.",n.createElement("br",null),"Please contact the administrator to configure a lower interval.");var R=e(56412);const L="1m",w=10;function A({message:ee,error:ue}){return ue?n.createElement(i.C,{color:"red",icon:"exclamation-circle",text:"Error",tooltip:ee}):n.createElement(i.C,{color:"orange",icon:"exclamation-triangle",text:"Unknown",tooltip:ee})}const N=(ee,ue)=>{const q=b(ue),ge=b(ee);return ge===0&&q!==0?1:q===0||ge/q<1?0:Math.ceil(ge/q)+1},W=(ee,ue)=>{const q={alertName:"",forDuration:"0s",evaluationsToFire:0};return(0,E.Pc)(ee)?{alertName:ee.grafana_alert.title,forDuration:ee.for,evaluationsToFire:N(ee.for,ue)}:(0,E.cG)(ee)?{alertName:ee.alert,forDuration:ee.for??"1m",evaluationsToFire:N(ee.for??"1m",ue)}:q},I=ee=>{try{const ue=(0,P.nd)(ee);return!(ue<R.Xr*1e3||ue%(R.Xr*1e3)!==0)}catch{return!1}},F=(ee,ue,q)=>(ee?ee[q]:[])?.find(De=>De.name===ue),V=(ee,ue,q)=>F(ee,ue,q)?.interval??L,b=ee=>{try{return(0,P.nd)(ee)}catch{return 0}},X=({rulesWithoutRecordingRules:ee})=>{const ue=(0,m.wW)(Y),{watch:q}=(0,u.Gc)(),ge=q("groupInterval"),De=!Boolean(ge),fe=ee.slice().map((ce,ie)=>({id:ie,data:W(ce,ge)})).sort((ce,ie)=>b(ce.data.forDuration)-b(ie.data.forDuration)),me=(0,n.useMemo)(()=>[{id:"alertName",label:"Alert",renderCell:({data:{alertName:ce}})=>n.createElement(n.Fragment,null,ce),size:"330px"},{id:"for",label:"For",renderCell:({data:{forDuration:ce}})=>n.createElement(n.Fragment,null,ce),size:.2},{id:"numberEvaluations",label:"#Evaluations",renderCell:({data:{evaluationsToFire:ce}})=>De?n.createElement(A,{message:"#Evaluations not available."}):I(ge)?ce===0?n.createElement(A,{message:"Invalid 'For' value: it should be greater or equal to evaluation interval.",error:!0}):n.createElement(n.Fragment,null,ce):n.createElement(A,{message:"Invalid evaluation interval format",error:!0}),size:.6}],[ge,De]);return n.createElement("div",{className:ue.tableWrapper},n.createElement(x.t,{items:fe,cols:me,pagination:{itemsPerPage:w}}))},k=(ee,ue,q)=>({required:{value:!0,message:"Required."},validate:ge=>{try{const De=(0,P.nd)(ge);return De<R.Xr*1e3?`Cannot be less than ${R.Xr} seconds.`:De%(R.Xr*1e3)!==0?`Must be a multiple of ${R.Xr} seconds.`:(0,h.iH)(ee,ue,q,ge).length===0?!0:"Invalid evaluation interval. Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."}catch(De){return De instanceof Error?De.message:"Failed to parse duration"}}});function H(ee){const{nameSpaceAndGroup:{namespace:ue,group:q},onClose:ge,groupInterval:De,sourceName:fe,folderAndGroupReadOnly:me}=ee,ce=(0,m.wW)(Y),ie=(0,p.useDispatch)(),{loading:re,error:Ee,dispatched:J}=(0,y._)(je=>je.updateLotexNamespaceAndGroup)??C.oq,te=(0,c.iG)(),ne=typeof ue=="string"?ue:ue.name,j=typeof q=="string"?q:q.name,be=(0,n.useMemo)(()=>({namespaceName:ne,groupName:j,groupInterval:De??""}),[ne,j,De]),Le=fe===v.GC,Qe=Le?"Folder":"Namespace",Be=me?Le?"Folder name can be updated in folder view":"Name space can be updated folder view":Le?"Folder name can be updated to a non-existing folder name":"Name space can be updated to a non-existing name space";(0,n.useEffect)(()=>{J&&!re&&!Ee&&ge(!0)},[J,re,ge,Ee]),(0,g.x)(je=>je.unifiedAlerting.updateLotexNamespaceAndGroup=C.oq);const Ve=je=>{ie((0,h.hv)({rulesSourceName:fe,groupName:j,newGroupName:je.groupName,namespaceName:ne,newNamespaceName:je.namespaceName,groupInterval:je.groupInterval||void 0}))},$e=(0,u.cI)({mode:"onBlur",defaultValues:be,shouldFocusError:!0}),{handleSubmit:We,register:Ke,watch:qe,formState:{isDirty:Xe,errors:at}}=$e,Ze=()=>{te.error("There are errors in the form. Correct the errors and retry.")},lt=(0,y._)(je=>je.rulerRules),nt=lt[fe],ut=F(nt?.result,j,ne)?.rules.filter(je=>!(0,E.yF)(je))??[],rt=ut.length>0;return n.createElement(f.u,{className:ce.modal,isOpen:!0,title:me?"Edit evaluation group":`Edit ${Qe} or evaluation group`,onDismiss:ge,onClickBackdrop:ge},n.createElement(u.RV,{...$e},n.createElement("form",{onSubmit:je=>je.preventDefault(),key:JSON.stringify(be)},n.createElement(n.Fragment,null,n.createElement(o.g,{label:n.createElement(l._,{htmlFor:"namespaceName"},n.createElement(s.Stack,{gap:.5},Qe,n.createElement(M.s,{text:Be}))),invalid:!!at.namespaceName,error:at.namespaceName?.message},n.createElement(r.I,{id:"namespaceName",readOnly:me,...Ke("namespaceName",{required:"Namespace name is required."})})),n.createElement(o.g,{label:n.createElement(l._,{htmlFor:"groupName"},n.createElement(s.Stack,{gap:.5},"Evaluation group",Le?n.createElement(M.s,{text:"Group name can be updated on Group view."}):n.createElement(M.s,{text:"Group name can be updated to a non existing group name."}))),invalid:!!at.groupName,error:at.groupName?.message},n.createElement(r.I,{id:"groupName",readOnly:me,...Ke("groupName",{required:"Evaluation group name is required."})})),n.createElement(o.g,{label:n.createElement(l._,{htmlFor:"groupInterval",description:"Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."},n.createElement(s.Stack,{gap:.5},"Rule group evaluation interval",n.createElement(M.s,{text:"How frequently to evaluate rules."}))),invalid:!!at.groupInterval,error:at.groupInterval?.message},n.createElement(r.I,{id:"groupInterval",placeholder:"1m",...Ke("groupInterval",k(nt?.result,j,ne))})),(0,a.f)(qe("groupInterval")).exceedsLimit&&n.createElement(T,null),n.createElement("div",{className:ce.modalButtons},n.createElement(f.u.ButtonRow,null,n.createElement(d.zx,{variant:"secondary",type:"button",disabled:re,onClick:()=>ge(!1),fill:"outline"},"Close"),n.createElement(d.zx,{type:"button",disabled:!Xe||re,onClick:We(je=>Ve(je),Ze)},re?"Saving...":"Save changes"))),lt&&!rt&&n.createElement("div",null,"This group does not contain alert rules."),lt&&rt&&n.createElement(n.Fragment,null,n.createElement("div",null,"List of rules that belong to this group"),n.createElement("div",{className:ce.evalRequiredLabel},"#Evaluations column represents the number of evaluations needed before alert starts firing."),n.createElement(X,{rulesWithoutRecordingRules:ut}))))))}const Y=ee=>({modal:t.css`
    max-width: 560px;
  `,modalButtons:t.css`
    top: -24px;
    position: relative;
  `,formInput:t.css`
    width: 275px;
    & + & {
      margin-left: ${ee.spacing(3)};
    }
  `,tableWrapper:t.css`
    margin-top: ${ee.spacing(2)};
    margin-bottom: ${ee.spacing(2)};
    height: 100%;
  `,evalRequiredLabel:t.css`
    font-size: ${ee.typography.bodySmall.fontSize};
  `})},34111:(G,O,e)=>{"use strict";e.d(O,{S:()=>u});var t=e(68404),n=e(77213);function u(s){return{allDataSourcesAvailable:(0,t.useMemo)(()=>s.every(m=>Boolean((0,n.F)().getInstanceSettings(m.datasourceUid))),[s])}}},25724:(G,O,e)=>{"use strict";e.d(O,{h:()=>n});var t=e(68404);function n(u,s,i){const[m,f]=(0,t.useState)(s),o=Math.ceil(u.length/i),l=i*(m-1),r=(0,t.useMemo)(()=>u.slice(l,l+i),[u,l,i]),d=(0,t.useCallback)(c=>{f(c)},[f]);return(0,t.useEffect)(()=>f(1),[o]),{page:m,onPageChange:d,numberOfPages:o,pageItems:r}}},79370:(G,O,e)=>{"use strict";e.d(O,{_:()=>n});var t=e(81168);function n(u,s){return(0,t.useSelector)(i=>u(i.unifiedAlerting),s)}},734:(G,O,e)=>{"use strict";e.d(O,{VG:()=>V,HY:()=>X,ug:()=>b});var t=e(46063),n=e(79662);const u=1,s=2,i=3,m=4,f=5,o=6,l=7,r=8,d=9,c=10,g=11,p=12,y=0,h=1,a=2,v=3,C=4,E=5,P=6,x=7;var M=e(82897),S=e(27765);const D=S.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),T={[i]:"datasource",[f]:"namespace",[o]:"label",[r]:"rule",[l]:"group",[d]:"state",[c]:"type",[g]:"health"};var R=(k=>(k.dataSource="dataSourceFilter",k.nameSpace="nameSpaceFilter",k.label="labelFilter",k.group="groupFilter",k.rule="ruleFilter",k.state="stateFilter",k.type="typeFilter",k.health="healthFilter",k))(R||{});function L(k,H,Y){W(k,H,ee=>{if(ee.type.id===s){const ue=w(k,ee);if(ue.type&&ue.value){const q=Y[ue.type];q&&q(ue.value)}}else if(ee.type.id===p){const ue=Y[p];ue&&ue(A(k,ee))}})}function w(k,H){if(H.type.id!==s)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const Y=H.firstChild;if(!Y)return{type:void 0,value:void 0};const ee=H.getChild(m),ue=ee?(0,M.trim)(A(k,ee),'"'):void 0;return{type:Y.type.id,value:ue}}function A(k,H){return k.slice(H.from,H.to).trim().replace(/\"/g,"")}function N(k,H,Y){const ee=[];W(k,H,q=>{q.type.id===s&&q.firstChild&&ee.push(q.firstChild),q.type.id===p&&ee.push(q)});let ue=[];return ee.forEach(q=>{const ge=Y.findIndex(De=>De.type===q.type.id);if(ge!==-1){if(q.parent?.type.is(s)){const De=T[q.type.id],fe=Y.splice(ge,1)[0];ue.push(`${De}:${I(fe.value)}`)}if(q.type.is(p)){const De=Y.splice(ge,1)[0];ue.push(De.value)}}}),Y.forEach(q=>{q.type===p?ue.push(q.value):ue.push(`${T[q.type]}:${I(q.value)}`)}),ue.join(" ")}function W(k,H,Y){const ee=H.join(" ");let q=D.configure({dialect:ee}).parse(k).cursor();do Y(q.node);while(q.next())}function I(k){return/\s/.test(k)?`"${k}"`:k}const F=[R.dataSource,R.nameSpace,R.label,R.group,R.rule,R.state,R.type,R.health];var V=(k=>(k.Ok="ok",k.Error="error",k.NoData="nodata",k.Unknown="unknown",k))(V||{});function b(k){const H={labels:[],freeFormWords:[]},Y={[i]:ee=>H.dataSourceName=ee,[f]:ee=>H.namespace=ee,[l]:ee=>H.groupName=ee,[r]:ee=>H.ruleName=ee,[o]:ee=>H.labels.push(ee),[d]:ee=>(0,t.I9)(ee)?H.ruleState=ee:void 0,[c]:ee=>(0,n.Wd)(ee)?H.ruleType=ee:void 0,[g]:ee=>H.ruleHealth=(0,n.vU)(ee),[p]:ee=>H.freeFormWords.push(ee)};return L(k,F,Y),H}function X(k,H){const Y=[];return H.dataSourceName&&Y.push({type:i,value:H.dataSourceName}),H.namespace&&Y.push({type:f,value:H.namespace}),H.groupName&&Y.push({type:l,value:H.groupName}),H.ruleName&&Y.push({type:r,value:H.ruleName}),H.ruleState&&Y.push({type:d,value:H.ruleState}),H.ruleType&&Y.push({type:c,value:H.ruleType}),H.ruleHealth&&Y.push({type:g,value:H.ruleHealth}),H.labels&&Y.push(...H.labels.map(ee=>({type:o,value:ee}))),H.freeFormWords&&Y.push(...H.freeFormWords.map(ee=>({type:p,value:ee}))),N(k,F,Y)}},81001:(G,O,e)=>{"use strict";e.d(O,{v:()=>R});var t=e(16527),n=e(53786),u=e(94514),s=e(44962),i=e(2101),m=e(44288),f=e(49922),o=e(83849),l=e(33180),r=e(69311),d=e(70006),c=e(77213),g=e(91896),p=e(29930),y=e(75e3),h=e(13204),a=e(59584),v=e(75434),C=e(97573);const E={from:21600,to:0},P=(F,V)=>{const b=x(F,V);if(!b)return E;const{from:X,to:k}=S(b,V);return!X.length&&!k.length?E:{from:Math.max(...X),to:Math.min(...k)}},x=(F,V)=>{switch(F.type){case C.Us.classic:return M(F);case C.Us.math:return D(F,V);case C.Us.resample:case C.Us.reduce:case C.Us.threshold:return T(F)}},M=F=>F.conditions?.map(V=>V.query.params[0]),S=(F,V)=>{let b=[],X=[E.to];for(const k of F){const H=V.find(Y=>Y.refId===k);!H||!H.relativeTimeRange||(b.push(H.relativeTimeRange.from),X.push(H.relativeTimeRange.to))}return{from:b,to:X}},D=(F,V)=>V.filter(b=>b.queryType==="query"&&F.expression?.includes(b.refId)).map(b=>b.refId),T=F=>F.expression?[F.expression]:void 0;class R{constructor(V=(0,p.i)(),b=(0,c.F)()){this.backendSrv=V,this.dataSourceSrv=b,this.subject=new t.t(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(V){if(V.length===0){const b=w(V,f.Gu.Done);return this.subject.next(b)}for(const b of V)if(!(0,y.j)(b.model)){const X=await this.dataSourceSrv.get(b.datasourceUid);if(X.filterQuery&&!X.filterQuery(b.model)){const k=w(V,f.Gu.Done);return this.subject.next(k)}}this.subscription=L(this.backendSrv,V).subscribe({next:b=>{const X=I(b,(k,H)=>{const Y=this.lastResult[k],ee=(0,v.zR)(H,Y);return(0,a.C)(ee,Y)});this.lastResult=X,this.subject.next(this.lastResult)},error:b=>{this.lastResult=W(this.lastResult,b),this.subject.next(this.lastResult)}})}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let V=!1;const b=I(this.lastResult,(X,k)=>(k.state===f.Gu.Loading&&(V=!0),{...k,state:f.Gu.Done}));V&&this.subject.next(b)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const L=(F,V)=>{const b=w(V,f.Gu.Loading),X={data:{data:V},url:"/api/v1/eval",method:"POST",requestId:(0,m.Z)()};return(0,o.x)({whileLoading:b,source:F.fetch(X).pipe(N(b),(0,u.K)(k=>(0,n.of)(W(b,k))),(0,h.V)(F,X.requestId),(0,s.B)())})},w=(F,V)=>F.reduce((b,X)=>(b[X.refId]={state:V,series:[],timeRange:A(X,F)},b),{}),A=(F,V)=>{if((0,y.j)(F.model)){const b=P(F.model,V);return l.relativeToTimeRange(b)}return F.relativeTimeRange?l.relativeToTimeRange(F.relativeTimeRange):(console.warn(`Query with refId: ${F.refId} did not have any relative time range, using default.`),(0,r.JK)())},N=F=>(0,i.U)(V=>{const{data:b}=V,X={};for(const[k,H]of Object.entries(b.results))X[k]={timeRange:F[k].timeRange,state:f.Gu.Done,series:H.frames.map(d.vP)};return X}),W=(F,V)=>{const b=(0,g.P)(V);return I(F,(X,k)=>({...k,state:f.Gu.Error,error:b}))},I=(F,V)=>{const b={};for(const[X,k]of Object.entries(F))b[X]=V(X,k);return b}},72004:(G,O,e)=>{"use strict";e.d(O,{QY:()=>nt,Nc:()=>oe,r0:()=>Se,X4:()=>_e,hS:()=>We,oE:()=>$e,S6:()=>ut,yO:()=>lt,mS:()=>dt,Yh:()=>Ee,ei:()=>de,dV:()=>Qe,lB:()=>Be,dB:()=>Ze,on:()=>Ve,zy:()=>J,wE:()=>te,vL:()=>rt,sw:()=>je,Ms:()=>Xe,Vj:()=>qe,dn:()=>j,y6:()=>re,UR:()=>ne,IA:()=>Le,nw:()=>Ye,je:()=>be,iH:()=>ze,wy:()=>Ke,D8:()=>Re,mM:()=>at,hv:()=>ve,tg:()=>Te});var t=e(32557),n=e(82897),u=e(57388),s=e(93003),i=e(46063),m=e(77582),f=e(29930),o=e(41904),l=e(3363),r=e(27677),d=e(47214),c=e(45849);async function g(pe){try{const ye=await(0,l.n)((0,d.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(pe)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:ye.data.template_files??{},template_file_provenances:ye.data.template_file_provenances??{},alertmanager_config:ye.data.alertmanager_config??{}}}catch(ye){if(pe===c.GC&&(0,d.kW)(ye)&&ye.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw ye}}async function p(pe,ye){await(0,l.n)((0,d.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,c.gt)(pe)}/config/api/v1/alerts`,data:ye,showErrorAlert:!1,showSuccessAlert:!1}))}async function y(pe){await(0,l.n)((0,d.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,c.gt)(pe)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function h(pe){return(await(0,l.n)((0,d.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(pe)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function a(pe,ye){return(await(0,l.n)((0,d.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(pe)}/api/v2/silences`,data:ye,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function v(pe,ye){await(0,d.i)().delete(`/api/alertmanager/${(0,c.gt)(pe)}/api/v2/silence/${encodeURIComponent(ye)}`)}async function C(pe,ye,Oe=!0,Ne=!0,Me=!0){const Ae=r.Cj.toUrlParams({silenced:Oe,active:Ne,inhibited:Me})+ye?.map(ke=>`filter=${encodeURIComponent(`${w(ke.name)}=${ke.isRegex?"~":""}"${w(ke.value)}"`)}`).join("&")||"";return(await(0,l.n)((0,d.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(pe)}/api/v2/alerts`+(Ae?"?"+Ae:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function E(pe){return(await(0,l.n)((0,d.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(pe)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function P(pe){return(await(0,l.n)((0,d.i)().fetch({url:`/api/alertmanager/${(0,c.gt)(pe)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function x(pe,ye,Oe){const Ne={receivers:ye,alert:Oe};try{const Me=await(0,l.n)((0,d.i)().fetch({method:"POST",data:Ne,url:`/api/alertmanager/${(0,c.gt)(pe)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(M(Me.data))throw new Error(D(Me.data))}catch(Me){throw(0,d.kW)(Me)&&S(Me.data)&&M(Me.data)?new Error(D(Me.data)):Me}}function M(pe){return pe.receivers.some(ye=>ye.grafana_managed_receiver_configs.some(Oe=>Oe.status==="failed"))}function S(pe){const ye=pe?.receivers;return Array.isArray(ye)?ye.every(Oe=>typeof Oe.name=="string"&&Array.isArray(Oe.grafana_managed_receiver_configs)):!1}function D(pe){return pe.receivers.flatMap(ye=>ye.grafana_managed_receiver_configs.filter(Oe=>Oe.status==="failed").map(Oe=>Oe.error??"Unknown error.")).join("; ")}async function T(pe){await(0,l.n)((0,d.i)().fetch({method:"POST",data:pe,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{L()})}async function R(){return(await(0,l.n)((0,d.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function L(){return(await(0,l.n)((0,d.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function w(pe){return pe.replace(/"/g,'\\"')}function A(pe){return(0,d.i)().get("/api/annotations",{alertId:pe}).then(ye=>ye?.sort(N))}function N(pe,ye){const Oe=(Ae,we)=>Ae>we?-1:we>Ae?1:0,Ne=Oe(pe.timeEnd,ye.timeEnd);if(Ne)return Ne;const Me=Oe(pe.time,ye.time);return Me||Oe(pe.id,ye.id)}var W=e(44737),I=e(79572),F=e(644),V=e(95454),b=e(49011),X=e(61068),k=e(94617),H=e(20194),Y=e(10505),ee=e(46818),ue=e(60048),q=e(21767),ge=e(79662);function De(pe){const ye=async st=>{if((0,ge.Kl)(st)){const Et=await(0,b.m6)(pe);for(const[Pt,gt]of Object.entries(Et))for(const Ct of gt){const Ot=Ct.rules.find(Ft=>(0,ge.Pc)(Ft)&&Ft.grafana_alert?.uid===st.uid);if(Ot)return{group:Ct,ruleSourceName:c.GC,namespace:Pt,rule:Ot}}}if((0,ge.E4)(st)){const{ruleSourceName:Et,namespace:Pt,groupName:gt}=st,Ct=await(0,b.jJ)(pe,Pt,gt);if(!Ct)return null;const Ot=Ct.rules.find(Ft=>{const jt=ue.Zk(Et,Pt,Ct.name,Ft);return ue.Dg(jt,st)});return Ot?{group:Ct,ruleSourceName:Et,namespace:Pt,rule:Ot}:null}if((0,ge.qE)(st))throw new Error("Native prometheus rules can not be edited in grafana.");return null},Oe=async st=>{const{namespace:Et,group:Pt,rule:gt}=st;if(Pt.rules.length===1){await(0,b.BC)(pe,Et,Pt.name);return}await(0,b.P4)(pe,Et,{...Pt,rules:Pt.rules.filter(Ct=>Ct!==gt)})},Ne=async(st,Et,Pt)=>{const{dataSourceName:gt,group:Ct,namespace:Ot}=st,Ft=(0,q.yh)(st);if(gt&&Ct&&Ot){if(Pt){const xn=await ye(ue.CK(Pt));if(!xn)throw new Error("Rule not found.");if(xn.namespace!==Ot||xn.group.name!==Ct)await Oe(xn);else{const Cn={...xn.group,rules:xn.group.rules.map(bn=>bn===xn.rule?Ft:bn),evaluateEvery:Et};return await(0,b.P4)(pe,Ot,Cn),ue.Zk(gt,Ot,Ct,Ft)}}const jt=await(0,b.jJ)(pe,Ot,Ct),En=jt?{...jt,rules:[...jt.rules,Ft]}:{name:Ct,rules:[Ft]};return await(0,b.P4)(pe,Ot,En),ue.Zk(gt,Ot,Ct,Ft)}else throw new Error("Data source and location must be specified")},Me=async(st,Et,Pt)=>{const{folder:gt,group:Ct}=st;if(!gt)throw new Error("Folder must be specified");const Ot=(0,q.mI)(st),Ft=gt.title,jt={name:Ct,interval:Et};if(!Pt)return Ae(Ft,jt,Ot);const En=await ye(ue.CK(Pt));if(!En)throw new Error("Rule not found.");const xn=En.namespace===Ft,Cn=En.group.name===st.group;return xn&&Cn?ke(En,Ot,Et):we(Ft,jt,En,Ot)},Ae=async(st,Et,Pt)=>{const gt=await(0,b.jJ)(pe,st,Et.name);if(!gt)throw new Error(`No group found with name "${Et.name}"`);const Ct={name:Et.name,interval:Et.interval,rules:(gt.rules??[]).concat(Pt)};return await(0,b.P4)(pe,st,Ct),{uid:Pt.grafana_alert.uid??"",ruleSourceName:c.GC}},we=async(st,Et,Pt,gt)=>(fe(Pt,gt),await Ae(st,Et,gt)),ke=async(st,Et,Pt)=>{fe(st,Et);const gt=st.group.rules.map(Ct=>(0,ge.Pc)(Ct)&&Ct.grafana_alert.uid===st.rule.grafana_alert.uid?Et:Ct);return await(0,b.P4)(pe,st.namespace,{name:st.group.name,interval:Pt,rules:gt}),{uid:st.rule.grafana_alert.uid,ruleSourceName:c.GC}};return{findEditableRule:ye,deleteRule:Oe,saveLotexRule:Ne,saveGrafanaRule:Me}}function fe(pe,ye){if(!(0,ge.Pc)(pe.rule))throw new Error("The rule is not a Grafana managed rule");const Oe=pe.rule.grafana_alert.uid;ye.grafana_alert.uid=Oe}const me=30*1e3;function ce(pe,ye){const Ne=pe().unifiedAlerting.dataSources[ye]?.result;if(!Ne)throw new Error(`Data source configuration is not available for "${ye}" data source`);return Ne}function ie(pe,ye){const Oe=ce(pe,ye);if(!Oe.rulerConfig)throw new Error(`Ruler API is not available for ${ye}`);return Oe.rulerConfig}const re=(0,t.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:pe,filter:ye},Oe)=>{await Oe.dispatch(Ye({rulesSourceName:pe}));const Ne=(0,o.pM)(V.j,`[${pe}] Prometheus rules loaded`,{dataSourceName:pe,thunk:"unifiedalerting/fetchPromRules"});return await(0,ee.$b)(Ne(pe,ye))}),Ee=(0,t.hg)("unifiedalerting/fetchAmConfig",(pe,ye)=>(0,ee.$b)((async()=>{if((0,c.RY)(pe))return P(pe).then(Ae=>({alertmanager_config:Ae.config,template_files:{}}));const{data:Oe}=await ye.dispatch(I.T.endpoints.discoverAmFeatures.initiate({amSourceName:pe})),Ne=Oe?.lazyConfigInit??!1,Me=(0,o.pM)(g,`[${pe}] Alertmanager config loaded`,{dataSourceName:pe,thunk:"unifiedalerting/fetchAmConfig"});return(0,Y.fm)(()=>Me(pe),Ae=>!!(0,ee.kk)(Ae)?.includes("alertmanager storage object not found")&&!Ne,me).then(Ae=>(0,n.isEmpty)(Ae.alertmanager_config)&&(0,n.isEmpty)(Ae.template_files)&&pe!==c.GC?P(pe).then(we=>({alertmanager_config:we.config,template_files:{},template_file_provenances:Ae.template_file_provenances})):Ae).catch(Ae=>{if(Ne&&(0,ee.kk)(Ae)?.includes("alertmanager storage object not found"))return Promise.resolve({alertmanager_config:{},template_files:{},template_file_provenances:{}});throw Ae})})())),J=(0,t.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,ee.$b)(R())),te=(0,t.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,ee.$b)(L())),ne=(0,t.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:pe,filter:ye},{dispatch:Oe,getState:Ne})=>{await Oe(Ye({rulesSourceName:pe}));const Me=ie(Ne,pe),Ae=(0,o.pM)(b.m6,`[${pe}] Ruler rules loaded`,{dataSourceName:pe,thunk:"unifiedalerting/fetchRulerRules"});return await(0,ee.$b)(Ae(Me,ye))});function j({rulesSourceName:pe}){return async(ye,Oe)=>{await ye(Ye({rulesSourceName:pe}));const Ne=ce(Oe,pe);await ye(re({rulesSourceName:pe})),Ne.rulerConfig&&await ye(ne({rulesSourceName:pe}))}}const be=(0,t.hg)("unifiedalerting/fetchSilences",pe=>{const ye=(0,o.pM)(h,`[${pe}] Silences loaded`,{dataSourceName:pe,thunk:"unifiedalerting/fetchSilences"});return(0,ee.$b)(ye(pe))});function Le(pe){return(ye,Oe)=>{const{rulerRules:Ne}=Oe().unifiedAlerting,Me=Ne[pe];(0,n.isEmpty)(Me?.result)&&!(Me&&(0,ge.m$)(Me))&&!Me?.loading&&ye(ne({rulesSourceName:pe}))}}function Qe(){return async pe=>{const ye=(0,c.mA)().map(Oe=>pe(Ye({rulesSourceName:Oe})));await Promise.allSettled(ye)}}const Ye=(0,t.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:pe})=>(0,ee.$b)((async()=>{if(pe===c.GC)return{name:c.GC,id:c.GC,rulerConfig:{dataSourceName:c.GC,apiVersion:"legacy"}};const ye=(0,c.VX)(pe);if(!ye)throw new Error(`Missing data source configuration for ${pe}`);const{id:Oe,name:Ne}=ye,Ae=await(0,o.pM)(W.C$,`[${pe}] Rules source features discovered`,{dataSourceName:pe,thunk:"unifiedalerting/fetchPromBuildinfo"})(Ne),we=Ae.features.rulerApiEnabled?{dataSourceName:Ne,apiVersion:Ae.application===i.T8.Cortex?"legacy":"config"}:void 0;return{name:Ne,id:Oe,rulerConfig:we}})()),{condition:({rulesSourceName:pe},{getState:ye})=>{const Oe=ye().unifiedAlerting.dataSources,Ne=Boolean(Oe[pe]?.result),Me=Boolean(Oe[pe]?.error);return!(Ne||Me)}});function de(pe=!1){return async(ye,Oe)=>{const Ne=performance.now();await Promise.allSettled((0,c.mA)().map(async Me=>{await ye(Ye({rulesSourceName:Me}));const{promRules:Ae,rulerRules:we,dataSources:ke}=Oe().unifiedAlerting,st=ke[Me].result;if(!st)return;const Et=pe||!Ae[Me]?.loading,Pt=(pe||!we[Me]?.loading)&&Boolean(st.rulerConfig);await Promise.allSettled([Et&&ye(re({rulesSourceName:Me})),Pt&&ye(ne({rulesSourceName:Me}))])})),(0,o.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-Ne).toFixed(0)})}}function Be(pe=!1){return async(ye,Oe)=>{const{promRules:Ne}=Oe().unifiedAlerting;(0,c.mA)().map(Me=>{(pe||!Ne[Me]?.loading)&&ye(re({rulesSourceName:Me}))})}}const Ve=(0,t.hg)("unifiedalerting/fetchEditableRule",(pe,ye)=>{const Oe=ie(ye.getState,pe.ruleSourceName);return(0,ee.$b)(De(Oe).findEditableRule(pe))});function $e(pe,ye){return async(Oe,Ne)=>{(0,ee.Ez)((async()=>{const Me=(0,c.EG)(pe.rulesSource),Ae=ie(Ne,Me);await(0,b.BC)(Ae,pe.name,ye.name),await Oe(j({rulesSourceName:Me}))})(),{successMessage:"Group deleted"})}}function We(pe,ye={}){return async(Oe,Ne)=>{(0,ee.Ez)((async()=>{const Me=ie(Ne,pe.ruleSourceName),Ae=De(Me),we=await Ae.findEditableRule(pe);if(!we)throw new Error("Rule not found.");await Ae.deleteRule(we),await Oe(j({rulesSourceName:we.ruleSourceName})),ye.navigateTo&&u.E1.replace(ye.navigateTo)})(),{successMessage:"Rule deleted."})}}const Ke=(0,t.hg)("unifiedalerting/saveRuleForm",({values:pe,existing:ye,redirectOnSave:Oe,evaluateEvery:Ne},Me)=>(0,ee.Ez)((0,ee.$b)((async()=>{const{type:Ae}=pe;let we;if(Ae===k.$.cloudAlerting||Ae===k.$.cloudRecording){if(!pe.dataSourceName)throw new Error("The Data source has not been defined.");const ke=ie(Me.getState,pe.dataSourceName);we=await De(ke).saveLotexRule(pe,Ne,ye),await Me.dispatch(ne({rulesSourceName:pe.dataSourceName}))}else if(Ae===k.$.grafana){const ke=ie(Me.getState,c.GC);we=await De(ke).saveGrafanaRule(pe,Ne,ye),await Me.dispatch(ne({rulesSourceName:c.GC}))}else throw new Error("Unexpected rule form type");if((0,o.PN)(o.z7.successSavingAlertRule,{type:Ae,isNew:(!ye).toString()}),ye||(0,o.I5)({grafana_version:s.v.buildInfo.version,org_id:m.Vt.user.orgId,user_id:m.Vt.user.id}),Oe)u.E1.push(Oe);else{const ke=ue.$V(we);if(!ke){u.E1.push("/alerting/list");return}const st=`/alerting/${encodeURIComponent(ke)}/edit`;u.E1.getLocation().pathname!==st?u.E1.replace(st):Me.dispatch(Ve(we))}})()),{successMessage:ye?`Rule "${pe.name}" updated.`:`Rule "${pe.name}" saved.`,errorMessage:"Failed to save rule"})),qe=(0,t.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,ee.$b)((0,F.i9)())),Xe=(0,t.hg)("unifiedalerting/fetchGrafanaAnnotations",pe=>(0,ee.$b)(A(pe))),at=(0,t.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:pe,oldConfig:ye,newConfig:Oe,successMessage:Ne,redirectPath:Me,refetch:Ae},we)=>(0,ee.Ez)((0,ee.$b)((async()=>{const ke=await we.dispatch(Ee(pe)).unwrap();if(!((0,n.isEmpty)(ke.alertmanager_config)&&(0,n.isEmpty)(ke.template_files))&&JSON.stringify(ke)!==JSON.stringify(ye))throw new Error("It seems configuration has been recently updated. Please reload page and try again to make sure that recent changes are not overwritten.");await p(pe,(0,H.X4)(Oe)),Ae&&await we.dispatch(Ee(pe)),Me&&u.E1.push((0,Y.eQ)(Me,pe))})()),{successMessage:Ne})),Ze=(0,t.hg)("unifiedalerting/fetchAmAlerts",pe=>(0,ee.$b)(C(pe,[],!0,!0,!0))),lt=(pe,ye)=>async Oe=>{await(0,ee.Ez)(v(pe,ye),{successMessage:"Silence expired."}),Oe(be(pe)),Oe(Ze(pe))},nt=(0,t.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:pe,payload:ye,exitOnSave:Oe,successMessage:Ne})=>(0,ee.Ez)((0,ee.$b)((async()=>{await a(pe,ye),Oe&&u.E1.push("/alerting/silences")})()),{successMessage:Ne})),_e=(pe,ye)=>(Oe,Ne)=>{const Me=Ne().unifiedAlerting.amConfigs?.[ye]?.result;if(!Me)throw new Error(`Config for ${ye} not found`);if(!Me.alertmanager_config.receivers?.find(we=>we.name===pe))throw new Error(`Cannot delete receiver ${pe}: not found in config.`);const Ae={...Me,alertmanager_config:{...Me.alertmanager_config,receivers:Me.alertmanager_config.receivers.filter(we=>we.name!==pe)}};return Oe(at({newConfig:Ae,oldConfig:Me,alertManagerSourceName:ye,successMessage:"Contact point deleted.",refetch:!0}))},ut=(pe,ye)=>(Oe,Ne)=>{const Me=Ne().unifiedAlerting.amConfigs?.[ye]?.result;if(!Me)throw new Error(`Config for ${ye} not found`);if(typeof Me.template_files?.[pe]!="string")throw new Error(`Cannot delete template ${pe}: not found in config.`);const Ae={...Me.template_files};delete Ae[pe];const we={...Me,alertmanager_config:{...Me.alertmanager_config,templates:Me.alertmanager_config.templates?.filter(ke=>ke!==pe)},template_files:Ae};return Oe(at({newConfig:we,oldConfig:Me,alertManagerSourceName:ye,successMessage:"Template deleted.",refetch:!0}))},rt=(0,t.hg)("unifiedalerting/fetchFolder",pe=>(0,ee.$b)(f.ae.getFolderByUid(pe,{withAccessControl:!0}))),je=pe=>(ye,Oe)=>{Oe().unifiedAlerting.folders[pe]?.dispatched||ye(rt(pe))},dt=(0,t.hg)("unifiedalerting/fetchAlertGroups",pe=>(0,ee.$b)(E(pe))),oe=(0,t.hg)("unifiedalerting/deleteAlertManagerConfig",async(pe,ye)=>(0,ee.Ez)((0,ee.$b)((async()=>{await y(pe),await ye.dispatch(Ee(pe))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),Se=(pe,ye)=>async(Oe,Ne)=>{const Me=Ne().unifiedAlerting.amConfigs[pe].result,Ae=Me?.alertmanager_config?.mute_time_intervals?.filter(({name:we})=>we!==ye)??[];Me&&(0,ee.Ez)(Oe(at({alertManagerSourceName:pe,oldConfig:Me,newConfig:{...Me,alertmanager_config:{...Me.alertmanager_config,route:Me.alertmanager_config.route?(0,H.rU)(ye,Me.alertmanager_config?.route):void 0,mute_time_intervals:Ae}},refetch:!0})),{successMessage:`Deleted "${ye}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},Re=(0,t.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:pe,receivers:ye,alert:Oe})=>(0,ee.Ez)((0,ee.$b)(x(pe,ye,Oe)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),ze=(pe,ye,Oe,Ne)=>((0,X.BT)(pe,ye,Oe)?.rules??[]).filter(we=>{const{forDuration:ke}=(0,X.qd)(we,Ne),st=(0,X.Bg)(ke),Et=(0,X.Bg)(Ne);return st!==0&&st<Et}),ve=(0,t.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(pe,ye)=>(0,ee.Ez)((0,ee.$b)((async()=>{const{rulesSourceName:Oe,namespaceName:Ne,groupName:Me,newNamespaceName:Ae,newGroupName:we,groupInterval:ke}=pe,st=ie(ye.getState,Oe),Et=await(0,b.m6)(st);if(!Boolean(Et[Ne]))throw new Error(`Namespace "${Ne}" not found.`);const gt=Et[Ne].find(Ft=>Ft.name===Me);if(!gt)throw new Error(`Group "${Me}" not found.`);const Ct=Boolean(Et[Ne].find(Ft=>Ft.name===we));if(we!==Me&&Ct)throw new Error(`Group "${we}" already exists in namespace "${Ne}".`);const Ot=Boolean(Et[Ae]);if(Ae!==Ne&&Ot)throw new Error(`Namespace "${Ae}" already exists.`);if(Ae===Ne&&Me===we&&ke===gt.interval)throw new Error("Nothing changed.");if(ke!==gt.interval){const jt=ye.getState()?.unifiedAlerting.rulerRules[Oe],En=ze(jt?.result,Me,Ne,ke??"1m");if(En.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${En.map(xn=>{const{alertName:Cn}=(0,X.qd)(xn,ke??"");return Cn}).join(",")}`)}if(Ae!==Ne){for(const Ft of Et[Ne])await(0,b.P4)(st,Ae,Ft.name===Me?{...Ft,name:we,interval:ke}:Ft);await(0,b.sz)(st,Ne)}else await(0,b.P4)(st,Ne,{...gt,name:we,interval:ke}),we!==Me&&await(0,b.BC)(st,Ne,Me);await ye.dispatch(ne({rulesSourceName:Oe}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Te=(0,t.hg)("unifiedalerting/updateRulesOrderForGroup",async(pe,ye)=>(0,ee.Ez)((0,ee.$b)((async()=>{const{rulesSourceName:Oe,namespaceName:Ne,groupName:Me,newRules:Ae}=pe,we=ie(ye.getState,Oe),st=(await(0,b.m6)(we))[Ne].find(Pt=>Pt.name===Me);if(!st)throw new Error(`Group "${Me}" not found.`);const Et={name:st.name,interval:st.interval,rules:Ae};await(0,b.P4)(we,Ne,Et),await ye.dispatch(ne({rulesSourceName:Oe}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),he=(0,t.hg)("unifiedAlerting/addExternalAlertmanagers",async(pe,ye)=>(0,ee.Ez)((0,ee.$b)((async()=>{await T(pe),ye.dispatch(te())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},53715:(G,O,e)=>{"use strict";e.d(O,{r:()=>u});var t=e(52423),n=e(39031);const u=s=>({[n.Z9.Active]:t.css`
    color: ${s.colors.error.text};
  `,[n.Z9.Suppressed]:t.css`
    color: ${s.colors.primary.text};
  `,[n.Z9.Unprocessed]:t.css`
    color: ${s.colors.secondary.text};
  `})},1562:(G,O,e)=>{"use strict";e.d(O,{Z:()=>n});var t=e(52423);const n=u=>t.css`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${u.spacing(2,0)};
  `},94617:(G,O,e)=>{"use strict";e.d(O,{$:()=>t});var t=(n=>(n.grafana="grafana",n.cloudAlerting="cloud-alerting",n.cloudRecording="cloud-recording",n))(t||{})},97953:(G,O,e)=>{"use strict";e.d(O,{Bz:()=>r,Fo:()=>m,Ko:()=>l,Ob:()=>i,QX:()=>o,Rv:()=>c,ql:()=>d});var t=e(82002),n=e(81168),u=e(45849);function s(g){return(0,u.HY)(g)?"grafana":"external"}const i={read:{grafana:n.AccessControlAction.AlertingInstanceRead,external:n.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:n.AccessControlAction.AlertingInstanceCreate,external:n.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:n.AccessControlAction.AlertingInstanceUpdate,external:n.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:n.AccessControlAction.AlertingInstanceUpdate,external:n.AccessControlAction.AlertingInstancesExternalWrite}},m={read:{grafana:n.AccessControlAction.AlertingNotificationsRead,external:n.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite}},f={read:{grafana:n.AccessControlAction.AlertingRuleRead,external:n.AccessControlAction.AlertingRuleExternalRead},create:{grafana:n.AccessControlAction.AlertingRuleCreate,external:n.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:n.AccessControlAction.AlertingRuleUpdate,external:n.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:n.AccessControlAction.AlertingRuleDelete,external:n.AccessControlAction.AlertingRuleExternalWrite}};function o(g){const p=s(g);return{read:i.read[p],create:i.create[p],update:i.update[p],delete:i.delete[p]}}function l(g){const p=s(g);return{read:m.read[p],create:m.create[p],update:m.update[p],delete:m.delete[p]}}function r(g){const p=s(g);return{read:f.read[p],create:f.create[p],update:f.update[p],delete:f.delete[p]}}function d(g,p){return()=>t.Vt.evaluatePermission(()=>p,g)}function c(){return{canCreateGrafanaRules:t.Vt.hasAccess(n.AccessControlAction.FoldersRead,t.Vt.hasEditPermissionInFolders)&&t.Vt.hasAccess(f.create.grafana,t.Vt.hasEditPermissionInFolders),canCreateCloudRules:t.Vt.hasAccess(n.AccessControlAction.DataSourcesRead,t.Vt.isEditor)&&t.Vt.hasAccess(f.create.external,t.Vt.isEditor),canEditRules:g=>{const p=g===u.GC?t.Vt.hasEditPermissionInFolders:t.Vt.isEditor;return t.Vt.hasAccess(r(g).update,p)}}}},20194:(G,O,e)=>{"use strict";e.d(O,{FM:()=>m,J8:()=>S,X4:()=>s,Xy:()=>E,Zh:()=>a,_J:()=>c,cm:()=>d,eD:()=>v,m8:()=>D,nv:()=>o,oI:()=>g,qw:()=>T,rU:()=>i,tA:()=>p,tC:()=>h,u6:()=>x,uK:()=>P,v7:()=>M,zy:()=>l});var t=e(39031),n=e(82963),u=e(45849);function s(R){return R.alertmanager_config.receivers||(R.alertmanager_config.receivers=[{name:"default "}]),R.alertmanager_config.route||(R.alertmanager_config.route={receiver:R.alertmanager_config.receivers[0].name}),R.template_files||(R.template_files={}),R}function i(R,L){return{...L,mute_time_intervals:L.mute_time_intervals?.filter(A=>A!==R)??[],routes:L.routes?.map(A=>i(R,A))}}function m(R,L,w){return{...w,mute_time_intervals:w.mute_time_intervals?.map(A=>A===L?R:A),routes:w.routes?.map(A=>m(R,L,A))}}function f(R,L){return(L.receiver===R||L.routes?.some(w=>f(R,w)))??!1}function o(R,L){return(L.alertmanager_config.route&&f(R,L.alertmanager_config.route))??!1}function l(R){return R.isEqual?R.isRegex?t._M.regex:t._M.equal:R.isRegex?t._M.notRegex:t._M.notEqual}function r(R){switch(R){case t._M.equal:return{isEqual:!0,isRegex:!1};case t._M.notEqual:return{isEqual:!1,isRegex:!1};case t._M.regex:return{isEqual:!0,isRegex:!0};case t._M.notRegex:return{isEqual:!1,isRegex:!0}}}function d(R){return{name:R.name,value:R.value,operator:l(R)}}function c(R){return{name:R.name,value:R.value,...r(R.operator)}}function g(R){return`{${R.map(d).reduce((A,N)=>{const W=`${N.name}${N.operator}"${N.value}"`;return A?`${A},${W}`:W},"")}}`}const p=[{label:t._M.equal,description:"Equals",value:t._M.equal},{label:t._M.notEqual,description:"Does not equal",value:t._M.notEqual},{label:t._M.regex,description:"Matches regex",value:t._M.regex},{label:t._M.notRegex,description:"Does not match regex",value:t._M.notRegex}],y=[t._M.regex,t._M.notRegex,t._M.notEqual,t._M.equal];function h(R){const L=R.trim();if(L.startsWith("{")&&L.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${L}`);const w=y.map(F=>[F,L.indexOf(F)]).filter(([F,V])=>V>-1).sort((F,V)=>F[1]-V[1]);if(!w.length)throw new Error(`Invalid matcher: ${L}`);const[A,N]=w[0],W=L.slice(0,N).trim(),I=L.slice(N+A.length).trim();if(!W)throw new Error(`Invalid matcher: ${L}`);return{name:W,value:I,isRegex:A===t._M.regex||A===t._M.notRegex,isEqual:A===t._M.equal||A===t._M.regex}}function a(R){const L=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,]*)"?/g,w=[];return R.replace(L,(A,N,W,I)=>{const F=W===t._M.equal||W===t._M.regex,V=W===t._M.regex||W===t._M.notRegex;return w.push({name:N,value:I,isEqual:F,isRegex:V}),""}),w}function v(R,L){return L.every(({name:w,value:A,isRegex:N,isEqual:W})=>Object.entries(R).some(([I,F])=>{const V=w===I;let b;return W&&!N&&(b=A===F),!W&&!N&&(b=A!==F),W&&N&&(b=new RegExp(A).test(F)),!W&&N&&(b=!new RegExp(A).test(F)),V&&b}))}function C(){return(0,n.x)().filter(R=>R.type===u.ye.Alertmanager)}function E(R){return C().find(L=>R===L.uid)}function P(R){const{times:L,weekdays:w,days_of_month:A,months:N,years:W}=R,I=x(L),F=M(w),V=S(A),b=D(N),X=T(W);return[I,F,V,b,X].join(", ")}function x(R){return"Times: "+(R?R?.map(({start_time:L,end_time:w})=>`${L} - ${w} UTC`).join(" and "):"All")}function M(R){return"Weekdays: "+(R?.map(L=>{if(L.includes(":"))return L.split(":").map(w=>{const A=w.slice(0,3);return A[0].toLocaleUpperCase()+A.slice(1)}).join("-");{const w=L.slice(0,3);return w[0].toLocaleUpperCase()+w.slice(1)}}).join(", ")??"All")}function S(R){return"Days of the month: "+(R?.join(", ")??"All")}function D(R){return"Months: "+(R?.join(", ")??"All")}function T(R){return"Years: "+(R?.join(", ")??"All")}},82963:(G,O,e)=>{"use strict";e.d(O,{f:()=>s,x:()=>u});var t=e(93003),n=e(58593);function u(){return Object.values(t.v.datasources)}function s(i){if(!(0,n.wd)(t.v.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const m=(0,n.nd)(t.v.unifiedAlerting.minInterval);if(!i||!(0,n.wd)(i))return{globalLimit:m,exceedsLimit:!1};const f=(0,n.nd)(i),o=m>f&&f>0;return{globalLimit:m,exceedsLimit:o}}},37190:(G,O,e)=>{"use strict";e.d(O,{Fe:()=>l,GC:()=>o,Kd:()=>r,c4:()=>u,cm:()=>i,de:()=>s,iF:()=>m,jZ:()=>t,m4:()=>f,p4:()=>n,q6:()=>d,vY:()=>c});const t="ruler not supported",n=2e4,u="alertmanager",s="alerting-alertmanager",i=2e4,m=2e4,f=2e4,o="timeseries",l="table",r="stat";var d=(g=>(g.description="description",g.summary="summary",g.runbookURL="runbook_url",g.alertId="__alertId__",g.dashboardUID="__dashboardUid__",g.panelID="__panelId__",g))(d||{});const c={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"}},45849:(G,O,e)=>{"use strict";e.d(O,{EG:()=>E,Eu:()=>d,GC:()=>f,HY:()=>S,JY:()=>o,LE:()=>h,P:()=>A,RY:()=>M,VX:()=>c,aM:()=>g,c$:()=>D,gt:()=>L,h_:()=>C,jq:()=>x,mA:()=>v,o_:()=>T,v_:()=>P,ye:()=>l,z3:()=>y});var t=e(77213),n=e(82002),u=e(39031),s=e(81168),i=e(97953),m=e(82963);const f="grafana",o="-- Grafana --";var l=(N=>(N.Alertmanager="alertmanager",N.Loki="loki",N.Prometheus="prometheus",N))(l||{});const r=["loki","prometheus"];function d(){return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)?(0,m.x)().filter(N=>r.includes(N.type)&&N.jsonData.manageAlerts!==!1).sort((N,W)=>N.name.localeCompare(W.name)):[]}function c(N){return d().find(W=>W.name===N)}function g(){return(0,m.x)().filter(N=>N.type==="alertmanager").sort((N,W)=>N.name.localeCompare(W.name))}const p={name:f,imgUrl:"public/img/grafana_icon.svg"};function y(){return[p,...g().map(N=>({name:N.name,displayName:N.name,imgUrl:N.meta.info.logos.small,meta:N.meta}))]}function h(N){const W=[],I={instance:i.Ob.read,notification:i.Fo.read};if(n.Vt.hasPermission(I[N].grafana)&&W.push(p),n.Vt.hasPermission(I[N].external)){const F=g().map(V=>({name:V.name,displayName:V.name,imgUrl:V.meta.info.logos.small,meta:V.meta}));W.push(...F)}return W}function a(N){const W=D(N);if(!W)throw new Error(`Data source ${N} not found`);if(W.type!=="loki"&&W.type!=="prometheus")throw new Error(`Unexpected data source type ${W.type}`);return W}function v(){const N=d().map(W=>W.name);return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&N.push(f),N}function C(){const N=d();return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&N.push(f),N}function E(N){return x(N)?N.name:N}function P(N){return x(N)?N.uid:f}function x(N){return N!==f}function M(N){return N!==f&&D(N)?.jsonData?.implementation===u.sK.prometheus}function S(N){return N===f}function D(N){return(0,m.x)().find(W=>W.name===N)}function T(N){return N===f?f:D(N)}function R(N){if(N===f)return f;const W=D(N);if(!W)throw new Error(`Datasource "${N}" not found`);return String(W.id)}function L(N){if(N===f)return f;const W=D(N);if(!W)throw new Error(`Datasource "${N}" not found`);return W.uid}function w(){return(0,t.F)().getList({alerting:!0})[0]}function A(){const N=(0,t.F)().getInstanceSettings("default");return N?.meta.alerting??!1?N:w()}},66367:(G,O,e)=>{"use strict";e.d(O,{RT:()=>i,TZ:()=>f,rz:()=>m});var t=e(82897),n=e.n(t),u=e(39031),s=e(20194);function i(o){const l=o.filter(r=>!!r.trim()).map(r=>(0,s.tC)(r.trim()));return(0,t.uniqBy)(l,r=>r.name)}const m=o=>{const l=Object.entries(o).filter(([d])=>!(d.startsWith("__")&&d.endsWith("__"))),r=new URLSearchParams;return l.forEach(([d,c])=>r.append("matcher",`${d}=${c}`)),r},f=(o,l)=>{const r=p=>(p.startsWith("^")||(p="^"+p),p.endsWith("$")||(p=p+"$"),new RegExp(p)),d=(p,y)=>Object.entries(p.labels).some(([h,a])=>{if(!y.name||!y.value||y.name!==h)return!1;switch(y.operator){case u._M.equal:return y.value===a;case u._M.notEqual:return y.value!==a;case u._M.regex:return r(y.value).test(a);case u._M.notRegex:return!r(y.value).test(a);default:return!1}});return o.filter(p=>l.every(y=>d(p,y))).map(p=>({id:`${p.activeAt}-${p.value}`,data:{matchedInstance:p}}))}},10505:(G,O,e)=>{"use strict";e.d(O,{$f:()=>y,HV:()=>x,J8:()=>a,S0:()=>g,V2:()=>d,VN:()=>E,Vv:()=>C,Zl:()=>D,__:()=>P,eQ:()=>v,fm:()=>M,lC:()=>p,mH:()=>c,pF:()=>h});var t=e(82897),n=e.n(t),u=e(79662),s=e(40286),i=e(46063),m=e(37190),f=e(45849),o=e(66367),l=e(60048),r=e(93411);function d(T,R,L){const w=(0,f.EG)(T),A=l.Yd(w,R),N=encodeURIComponent(l.$V(A)),W=encodeURIComponent(w);return(0,r.u)(`/alerting/${W}/${N}/view`,{returnTo:L})}function c(T,R){return(0,r.u)("/explore",{left:JSON.stringify({datasource:T,queries:[{refId:"A",datasource:T,expr:R}],range:{from:"now-1h",to:"now"}})})}function g(T){return T.reduce((R,{key:L,value:w})=>(R[L]=w,R),{})}const p=T=>{const R=T.queryString===void 0?void 0:String(T.queryString),L=T.alertState===void 0?void 0:String(T.alertState),w=T.dataSource===void 0?void 0:String(T.dataSource),A=T.ruleType===void 0?void 0:String(T.ruleType),N=T.groupBy===void 0?void 0:String(T.groupBy).split(",");return{queryString:R,alertState:L,dataSource:w,groupBy:N,ruleType:A}},y=T=>({queryString:T.get("queryString")??void 0,contactPoint:T.get("contactPoint")??void 0}),h=T=>{const R=T.queryString===void 0?void 0:String(T.queryString),L=T.silenceState===void 0?void 0:String(T.silenceState);return{queryString:R,silenceState:L}};function a(T){return Object.entries(T).map(([R,L])=>({key:R,value:L}))}function v(T,R,L){const w=new URLSearchParams(L);return R&&w.append(m.c4,R),`${T}?${w.toString()}`}function C(T,R){const L={alertname:R.name,...R.labels};return E(T,L)}function E(T,R){const L=new URLSearchParams;return L.append("alertmanager",T),(0,o.rz)(R).forEach((A,N)=>L.append(N,A)),(0,r.u)("/alerting/silence/new",L)}function P(T){return(0,r.u)(`/datasources/edit/${T.uid}`)}function x(T){return(0,r.u)(`/dashboards/f/${T}`)}function M(T,R,L,w=1e3){const A=new Date().getTime(),N=()=>T().catch(W=>{if(R(W)&&new Date().getTime()-A<L)return new Promise(I=>setTimeout(I,w)).then(N);throw W});return N()}const S={[i.bj.Alerting]:1,[i.x_.Firing]:1,[i.bj.Error]:1,[i.bj.Pending]:2,[i.x_.Pending]:2,[i.x_.Inactive]:2,[i.bj.NoData]:3,[i.bj.Normal]:4};function D(T,R){if(T===s.As.Importance)return(0,t.sortBy)(R,w=>[S[(0,i.ED)(w.state)],(0,u.pB)(w).toLocaleLowerCase()]);if(T===s.As.TimeAsc)return(0,t.sortBy)(R,w=>[new Date(w.activeAt)||new Date,(0,u.pB)(w).toLocaleLowerCase()]);if(T===s.As.TimeDesc)return(0,t.sortBy)(R,w=>[new Date(w.activeAt)||new Date,(0,u.pB)(w).toLocaleLowerCase()]).reverse();const L=(0,t.sortBy)(R,w=>(0,u.pB)(w).toLocaleLowerCase());return T===s.As.AlphaDesc&&L.reverse(),L}},46818:(G,O,e)=>{"use strict";e.d(O,{$b:()=>l,Ez:()=>r,ed:()=>c,i6:()=>f,jK:()=>o,kk:()=>d,op:()=>y,oq:()=>i,yR:()=>p});var t=e(32557),n=e(25318),u=e(47214),s=e(77582);const i=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function m(h,a=i,v){if(h.pending.match(v))return{result:a.result,loading:!0,error:a.error,dispatched:!0,requestId:v.meta.requestId};if(h.fulfilled.match(v)){if(a.requestId===void 0||a.requestId===v.meta.requestId)return{...a,result:v.payload,loading:!1,error:void 0}}else if(h.rejected.match(v)&&a.requestId===v.meta.requestId)return{...a,loading:!1,error:v.error};return a}function f(h,a){return(0,t.oM)({name:h,initialState:i,reducers:{},extraReducers:v=>v.addDefaultCase((C,E)=>m(a,C,E))})}function o(h,a,v){return(0,t.oM)({name:h,initialState:{},reducers:{},extraReducers:C=>C.addDefaultCase((E,P)=>{if((0,t.Gx)(a)(P)){const x=P,M=v(x.meta.arg);return{...E,[M]:m(a,E[M],x)}}return E})})}function l(h){return h.catch(a=>{throw{message:d(a),code:a.statusCode}})}function r(h,a){return h.then(v=>(a.successMessage&&s.h$.emit(n.SI.alertSuccess,[a.successMessage]),v)).catch(v=>{const C=d(v);throw s.h$.emit(n.SI.alertError,[`${a.errorMessage??"Error"}: ${C}`]),v})}function d(h){if((0,u.kW)(h))if(h.data?.message){let a=h.data?.message;return typeof h.data?.error=="string"&&(a+=`; ${h.data.error}`),a}else{if(Array.isArray(h.data)&&h.data.length&&h.data[0]?.message)return h.data.map(a=>a?.message).filter(a=>!!a).join(" ");if(h.statusText)return h.statusText}return h?.message||String(h)}function c(h){return Object.values(h).every(g)}function g(h){return h.dispatched&&!h.loading&&!h.error}function p(h){return Object.values(h).some(y)}function y(h){return h?h.dispatched&&h.loading:!1}},21767:(G,O,e)=>{"use strict";e.d(O,{DQ:()=>x,WL:()=>M,aR:()=>L,lN:()=>S,mI:()=>P,s0:()=>D,uZ:()=>v,yh:()=>C});var t=e(69311),n=e(33180),u=e(77213),s=e(9800),i=e(99822),m=e(47471),f=e(97573),o=e(46063),l=e(67162),r=e(11376),d=e(94617),c=e(97953),g=e(37190),p=e(45849),y=e(10505),h=e(79662),a=e(58593);const v=()=>{const{canCreateGrafanaRules:W,canCreateCloudRules:I}=(0,c.Rv)();return Object.freeze({name:"",labels:[{key:"",value:""}],annotations:[{key:g.q6.summary,value:""},{key:g.q6.description,value:""},{key:g.q6.runbookURL,value:""}],dataSourceName:null,type:W?d.$.grafana:I?d.$.cloudAlerting:void 0,group:"",folder:null,queries:[],condition:"",noDataState:o.g0.NoData,execErrState:o.g0.Error,evaluateFor:"5m",evaluateEvery:r.E,namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function C(W){const{name:I,expression:F,forTime:V,forTimeUnit:b,type:X}=W;if(X===d.$.cloudAlerting)return{alert:I,for:`${V}${b}`,annotations:(0,y.S0)(W.annotations||[]),labels:(0,y.S0)(W.labels||[]),expr:F};if(X===d.$.cloudRecording)return{record:I,labels:(0,y.S0)(W.labels||[]),expr:F};throw new Error(`unexpected rule type: ${X}`)}function E(W){return[...(0,y.J8)(W||{}),{key:"",value:""}]}function P(W){const{name:I,condition:F,noDataState:V,execErrState:b,evaluateFor:X,queries:k}=W;if(F)return{grafana_alert:{title:I,condition:F,no_data_state:V,exec_err_state:b,data:k.map(A)},for:X,annotations:(0,y.S0)(W.annotations||[]),labels:(0,y.S0)(W.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function x(W){const{ruleSourceName:I,namespace:F,group:V,rule:b}=W,X=v();if((0,p.HY)(I))if((0,h.Pc)(b)){const k=b.grafana_alert;return{...X,name:k.title,type:d.$.grafana,group:V.name,evaluateEvery:V.interval||X.evaluateEvery,evaluateFor:b.for||"0",noDataState:k.no_data_state,execErrState:k.exec_err_state,queries:k.data,condition:k.condition,annotations:E(b.annotations),labels:E(b.labels),folder:{title:F,id:k.namespace_id}}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,h.cG)(b)){const k=M(b);return{...X,...k,type:d.$.cloudAlerting,dataSourceName:I,namespace:F,group:V.name}}else if((0,h.yF)(b)){const k=S(b);return{...X,...k,type:d.$.cloudRecording,dataSourceName:I,namespace:F,group:V.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function M(W){const I=v(),[F,V]=W.for?(0,a.bG)(W.for):[I.forTime,I.forTimeUnit];return{name:W.alert,expression:W.expr,forTime:F,forTimeUnit:V,annotations:E(W.annotations),labels:E(W.labels)}}function S(W){return{name:W.record,expression:W.expr,labels:E(W.labels)}}const D=()=>{const W=(0,p.P)();if(!W)return[...T("A","B")];const I=(0,t.Rr)();return[{refId:"A",datasourceUid:W.uid,queryType:"",relativeTimeRange:I,model:{refId:"A",hide:!1}},...T("B","C")]},T=(...W)=>{const I=W[0],F=W[1],V={refId:W[0],hide:!1,type:f.Us.reduce,datasource:{uid:m.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[],type:l.$.IsAbove},operator:{type:"and"},query:{params:[I]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},b={refId:F,hide:!1,type:f.Us.threshold,datasource:{uid:m.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:l.$.IsAbove},operator:{type:"and"},query:{params:[F]},reducer:{params:[],type:"last"}}],expression:I};return[{refId:I,datasourceUid:m.Yq,queryType:"",model:V},{refId:F,datasourceUid:m.Yq,queryType:"",model:b}]},R=async(W,I,F,V,b,X)=>{const k=[];for(const H of W){const Y=await(0,u.F)().get(H.datasource?.uid?H.datasource:V),ee={uid:Y.uid,type:Y.type},ue=n.relativeToTimeRange(I),{interval:q,intervalMs:ge}=w(ue,X??Y.interval,b),De={__interval:{text:q,value:q},__interval_ms:{text:ge,value:ge},...F},fe=Y.interpolateVariablesInQueries?await Y.interpolateVariablesInQueries([H],De)[0]:H;if(ee.uid===m.Yq){const me={refId:fe.refId,queryType:"",relativeTimeRange:I,datasourceUid:m.Yq,model:fe};k.push(me)}else{const me=(0,u.F)().getInstanceSettings(ee);if(me&&me.meta.alerting){const ce={refId:fe.refId,queryType:fe.queryType??"",relativeTimeRange:I,datasourceUid:me.uid,model:{...fe,maxDataPoints:b,intervalMs:ge}};k.push(ce)}}}return k},L=async(W,I)=>{const{targets:F}=W;if(!W.id||!I.uid)return;const V=n.timeRangeToRelative(n.convertRawToRange(I.time)),b=await R(F,V,W.scopedVars||{},W.datasource??void 0,W.maxDataPoints??void 0,W.interval??void 0);if(!b.length||!b.find(Y=>Y.datasourceUid!==m.Yq))return;if(!b.find(Y=>Y.datasourceUid===m.Yq)){const[Y,ee]=T((0,i.Hs)(b),"-");b.push(Y);const[ue,q]=T(Y.refId,(0,i.Hs)(b));b.push(q)}const{folderId:X,folderTitle:k}=I.meta;return{type:d.$.grafana,folder:X&&k?{id:X,title:k}:void 0,queries:b,name:W.title,condition:b[b.length-1].refId,annotations:[{key:g.q6.dashboardUID,value:I.uid},{key:g.q6.panelID,value:String(W.id)}]}};function w(W,I,F){return F?n.calculateInterval(W,F,I):I&&n.intervalToMs(I)>1e3?{interval:I,intervalMs:n.intervalToMs(I)}:{interval:"1s",intervalMs:1e3}}function A(W){const I=W.model;return N(I)&&I.instant&&I.range?{...W,model:{...I,range:!0,instant:!1}}:W}function N(W){return"expr"in W&&"instant"in W&&"range"in W}},60048:(G,O,e)=>{"use strict";e.d(O,{$V:()=>h,CK:()=>m,Dg:()=>f,OA:()=>y,Om:()=>v,Yd:()=>i,Zk:()=>u,s0:()=>P});var t=e(45849),n=e(79662);function u(x,M,S,D){return(0,n.Pc)(D)?{uid:D.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:x,namespace:M,groupName:S,rulerRuleHash:v(D)}}function s(x,M,S,D){return{ruleSourceName:x,namespace:M,groupName:S,ruleHash:C(D)}}function i(x,M){const S=M.namespace.name,D=M.group.name;if(M.rulerRule)return u(x,S,D,M.rulerRule);if(M.promRule)return s(x,S,D,M.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function m(x){return u(x.ruleSourceName,x.namespace,x.group.name,x.rule)}function f(x,M){return(0,n.Kl)(x)&&(0,n.Kl)(M)?x.uid===M.uid:(0,n.E4)(x)&&(0,n.E4)(M)?x.groupName===M.groupName&&x.namespace===M.namespace&&x.rulerRuleHash===M.rulerRuleHash&&x.ruleSourceName===M.ruleSourceName:(0,n.qE)(x)&&(0,n.qE)(M)?x.groupName===M.groupName&&x.namespace===M.namespace&&x.ruleHash===M.ruleHash&&x.ruleSourceName===M.ruleSourceName:!1}const o="cri",l="pri";function r(x){return x.replace(/\$/g,"_DOLLAR_")}function d(x){return x.replace(/\_DOLLAR\_/g,"$")}function c(x){return x.replace(/\//g,"").replace(/\\/g,"")}function g(x){return x.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function p(x,M=!1){const D=(M?decodeURIComponent(x):x).split("$");if(D.length===1)return{uid:x,ruleSourceName:"grafana"};if(D.length===5){const[T,R,L,w,A]=D.map(d).map(g);if(T===o)return{ruleSourceName:R,namespace:L,groupName:w,rulerRuleHash:A};if(T===l)return{ruleSourceName:R,namespace:L,groupName:w,ruleHash:A}}throw new Error(`Failed to parse rule location: ${x}`)}function y(x,M=!1){if(x)try{return p(x,M)}catch{return}}function h(x){return(0,n.Kl)(x)?x.uid:(0,n.E4)(x)?[o,x.ruleSourceName,x.namespace,x.groupName,x.rulerRuleHash].map(String).map(r).map(c).join("$"):[l,x.ruleSourceName,x.namespace,x.groupName,x.ruleHash].map(String).map(r).map(c).join("$")}function a(x){let M=0;if(x.length===0)return M;for(let S=0;S<x.length;S++){const D=x.charCodeAt(S);M=(M<<5)-M+D,M=M&M}return M}function v(x){if((0,n.yF)(x))return a(JSON.stringify([x.record,x.expr,E(x.labels)])).toString();if((0,n.cG)(x))return a(JSON.stringify([x.alert,x.expr,E(x.annotations),E(x.labels)])).toString();if((0,n.Pc)(x))return x.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function C(x){if((0,n.OP)(x))return a(JSON.stringify([x.type,x.query,E(x.labels)])).toString();if((0,n.x_)(x))return a(JSON.stringify([x.type,x.query,E(x.annotations),E(x.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function E(x){return JSON.stringify(Object.entries(x||{}).sort((M,S)=>M[0].localeCompare(S[0])))}function P(x){return(0,n.Kl)(x)?t.GC:x.ruleSourceName}},79662:(G,O,e)=>{"use strict";e.d(O,{Aq:()=>P,E4:()=>y,Jq:()=>S,Kl:()=>p,OP:()=>o,PW:()=>D,Pc:()=>d,SS:()=>C,Wd:()=>h,ZL:()=>E,cG:()=>l,m$:()=>g,pB:()=>c,qE:()=>a,ub:()=>M,vU:()=>v,x_:()=>f,yF:()=>r});var t=e(82897),n=e.n(t),u=e(23309),s=e(46063),i=e(734),m=e(37190);function f(T){return typeof T=="object"&&T.type===s.pz.Alerting}function o(T){return typeof T=="object"&&T.type===s.pz.Recording}function l(T){return typeof T=="object"&&"alert"in T}function r(T){return typeof T=="object"&&"record"in T}function d(T){return typeof T=="object"&&"grafana_alert"in T}function c(T){return JSON.stringify(T.labels)}function g(T){return T.error&&T.error?.message?.includes(m.jZ)}function p(T){return"uid"in T}function y(T){return"rulerRuleHash"in T}function h(T){return Object.values(s.pz).includes(T)}function a(T){return"ruleHash"in T}function v(T){switch(T){case"ok":return i.VG.Ok;case"nodata":return i.VG.NoData;case"error":case"err":return i.VG.Error;case"unknown":return i.VG.Unknown;default:return}}function C(T){return T===s.x_.Inactive?"Normal":(0,t.capitalize)(T)}const E=T=>T.reduce((R,{dataSourceName:L,name:w,groups:A})=>(A.forEach(({name:N,rules:W})=>{W.forEach(I=>{f(I)&&R.push({dataSourceName:L,namespaceName:w,groupName:N,rule:I})})}),R),[]);function P(T){let R;return Object.values(u.Z).includes(T)?R=T:R=(0,s.ED)(T),x[R]}const x={[s.x_.Inactive]:"good",[s.x_.Firing]:"bad",[s.x_.Pending]:"warning",[s.bj.Alerting]:"bad",[s.bj.Error]:"bad",[s.bj.NoData]:"info",[s.bj.Normal]:"good",[s.bj.Pending]:"warning",[u.Z.NoData]:"info",[u.Z.Paused]:"warning",[u.Z.Alerting]:"bad",[u.Z.OK]:"good",[u.Z.Pending]:"warning",[u.Z.Unknown]:"info"};function M(T){return T.alerts?T.alerts.reduce((R,L)=>{const w=(0,s.ED)(L.state)!==s.bj.Normal;if(L.activeAt&&w){const A=new Date(L.activeAt);if(R===null||R.getTime()>A.getTime())return A}return R},null):null}function S(T){return Array.isArray(T.source_tenants)}function D(T){return d(T)?T.grafana_alert.title:l(T)?T.alert:r(T)?T.record:""}},58593:(G,O,e)=>{"use strict";e.d(O,{wd:()=>m,bG:()=>n,nd:()=>r,qr:()=>s});var t=(d=>(d.seconds="s",d.minutes="m",d.hours="h",d.days="d",d.weeks="w",d))(t||{});function n(d){const c=d.match(/(\d+)(\w+)/);if(c)return[Number(c[1]),c[2]];throw new Error(`Invalid interval description: ${d}`)}function u(d){const{sec:c,count:g}=describeInterval(d);return c*g}const s=Object.entries(t).map(([d,c])=>({label:d[0].toUpperCase()+d.slice(1),value:c}));function i(d){return durationToMilliseconds(parseDuration(d))}function m(d){try{return r(d),!0}catch{return!1}}const f={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},o=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),l=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t).join(", ")}`);function r(d){let c=d,g=[];function p(h){const a=o.exec(h),v=a?.groups?.value&&a?.groups?.type;if(!a||!v)throw l;a&&a.groups?.value&&a.groups?.type&&(c=c.replace(a[0],""),g.push([Number(a.groups.value),a.groups.type])),c&&p(c)}if(p(d),!g.length)throw l;return g.reduce((h,[a,v])=>{const C=a*f[v];return h+C},0)}},93411:(G,O,e)=>{"use strict";e.d(O,{u:()=>n});var t=e(93003);function n(u,s){const i=new URLSearchParams(s);return`${t.v.appSubUrl}${u}?${i.toString()}`}},70659:(G,O,e)=>{"use strict";e.d(O,{Dl:()=>s,_E:()=>u,lK:()=>i,xD:()=>n});var t=e(47214);function n(m){return(0,t.i)().post("/api/annotations",m)}function u(m){return(0,t.i)().put(`/api/annotations/${m.id}`,m)}function s(m){return(0,t.i)().delete(`/api/annotations/${m.id}`)}async function i(){return(await(0,t.i)().get("/api/annotations/tags")).result.tags.map(({tag:f,count:o})=>({term:f,count:o}))}},86953:(G,O,e)=>{"use strict";e.d(O,{r:()=>r});var t=e(53786),n=e(98356),u=e(2101),s=e(33180),i=e(40400),m=e(75434),f=e(66228);let o=100;function l(){return"AQ"+o++}function r(d,c,g){const p={...f.yA,...c.annotations},y=p.prepareAnnotation(g);if(!y)return(0,t.of)({});const h=p.prepareQuery(y);if(!h)return(0,t.of)({});const a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,v=s.calculateInterval(d.range,a,c.interval),C={__interval:{text:v.interval,value:v.interval},__interval_ms:{text:v.intervalMs.toString(),value:v.intervalMs},__annotation:{text:y.name,value:y}},E={startTime:Date.now(),requestId:l(),range:d.range,maxDataPoints:a,scopedVars:C,...v,app:i.zj.Dashboard,publicDashboardAccessToken:d.dashboard.meta.publicDashboardAccessToken,timezone:d.dashboard.timezone,targets:[{...h,refId:"Anno"}]};return(0,m.v7)(c,E).pipe((0,n.z)(P=>P.series?p.processEvents(y,P.series).pipe((0,u.U)(x=>({panelData:P,events:x}))):(0,t.of)({panelData:P,events:[]})))}},66228:(G,O,e)=>{"use strict";e.d(O,{$w:()=>v,r0:()=>g,yA:()=>d,yr:()=>C});var t=e(82897),n=e.n(t),u=e(53786),s=e(98356),i=e(2101),m=e(74940),f=e(14582),o=e(89890),l=e(20442),r=e(47694);const d={prepareAnnotation:E=>{if((0,t.isString)(E?.query)){const{query:P,...x}=E;return{...x,target:{refId:"annotation_query",query:P},mappings:{}}}return E},prepareQuery:E=>E.target,processEvents:(E,P)=>h(P,E.mappings)};function c(){return E=>E.pipe((0,s.z)(P=>{if(!P?.length)return(0,u.of)(void 0);if(P.length===1)return(0,u.of)(P[0]);const x={interpolate:M=>M};return(0,u.of)(P).pipe(m.Y.mergeTransformer.operator({},x),(0,i.U)(M=>M[0]))}))}const g=[{key:"time",field:E=>E.fields.find(P=>P.type===f.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:E=>E.fields.find(P=>P.type===f.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],p=[{key:"color"},{key:"isRegion"},{key:"source"}],y=[...r.vc.isPublicDashboardView?p:[],...g,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function h(E,P){return(0,u.of)(E).pipe(c(),(0,i.U)(x=>{if(!x?.length)return[];let M=!1,S=!1;const D={};for(const L of x.fields){const w=(0,o.C)(L,x);D[w.toLowerCase()]=L}P||(P={});const T=[];for(const L of y){const w=P[L.key]||{};if(w.source===l.L.Skip)continue;const A={key:L.key,split:L.split};if(w.source===l.L.Text)A.text=w.value;else{const N=(w.value||L.key).toLowerCase();A.field=D[N],!A.field&&L.field&&(A.field=L.field(x))}(A.field||A.text)&&(T.push(A),A.key==="time"?M=!0:A.key==="text"&&(S=!0))}if(!M||!S)return console.error("Cannot process annotation fields. No time or text present."),[];const R=[];for(let L=0;L<x.length;L++){const w={type:"default",color:"red"};for(const A of T){let N;if(A.text)N=A.text;else if(A.field&&(N=A.field.values.get(L),N!==void 0&&A.regex)){const W=A.regex.exec(N);W&&(N=W[1]?W[1]:W[0])}N!=null&&(A.split&&typeof N=="string"&&(N=N.split(",")),w[A.key]=N)}R.push(w)}return R}))}const a=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function v(E){const{type:P}=E;return!(P==="datasource"||a.includes(P))}function C(E){const{type:P}=E;return a.includes(P)}},56777:(G,O,e)=>{"use strict";e.d(O,{ZP:()=>r,cB:()=>o,dF:()=>m,iK:()=>s,j4:()=>i,ql:()=>f});var t=e(32557);const n={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",apiKeysMigrated:!1},u=(0,t.oM)({name:"apiKeys",initialState:n,reducers:{apiKeysLoaded:(d,c)=>{const{keys:g,keysIncludingExpired:p}=c.payload,y=c.payload.keys.length===0&&c.payload.keysIncludingExpired.length>0?!0:d.includeExpired;return{...d,hasFetched:!0,keys:g,keysIncludingExpired:p,includeExpired:y}},apiKeysMigrationStatusLoaded:(d,c)=>({...d,apiKeysMigrated:c.payload}),setSearchQuery:(d,c)=>({...d,searchQuery:c.payload}),includeExpiredToggled:d=>({...d,includeExpired:!d.includeExpired}),isFetching:d=>({...d,hasFetched:!1})}}),{apiKeysLoaded:s,includeExpiredToggled:i,isFetching:m,setSearchQuery:f,apiKeysMigrationStatusLoaded:o}=u.actions,r={apiKeys:u.reducer}},65580:(G,O,e)=>{"use strict";e.d(O,{t:()=>y});var t=e(68404),n=e(62626),u=e(72274),s=e(47214),i=e(52423),m=e(29516),f=e(49938),o=e(79090),l=e(54391),r=e(41959);const d=({message:h})=>{const a=(0,m.wW)(c);let v="#34BA18",C="System",E="/public/img/grafana_icon.svg";h.userId>0&&(v="#19a2e7",C=h.user.login,E=h.user.avatarUrl);const P="#898989",x=new Date(h.created*1e3).toLocaleTimeString(),M=(0,r.a)(h.content,{breaks:!0});return t.createElement("div",{className:a.comment},t.createElement("div",{className:a.avatarContainer},t.createElement("img",{src:E,alt:"User avatar",className:a.avatar})),t.createElement("div",null,t.createElement("div",null,t.createElement("span",{style:{color:v}},C),"\xA0",t.createElement("span",{style:{color:P}},x)),t.createElement("div",null,t.createElement(l.Z,{html:M,className:a.content}))))},c=h=>({comment:i.css`
    margin-bottom: 10px;
    padding-top: 3px;
    padding-bottom: 3px;
    word-break: break-word;
    display: flex;
    flex-direction: row;
    align-items: top;

    :hover {
      background-color: #1e1f24;
    }

    blockquote {
      padding: 0 0 0 10px;
      margin: 0 0 10px;
    }
  `,avatarContainer:i.css`
    align-self: left;
    margin-top: 6px;
    margin-right: 10px;
  `,avatar:i.css`
    width: 30px;
    height: 30px;
  `,content:i.css`
    display: block;
    overflow: hidden;

    p {
      margin: 0;
      padding: 0;
    }

    blockquote p {
      font-size: 14px;
      padding-top: 4px;
    }

    a {
      color: #43c57e;
    }

    a:hover {
      text-decoration: underline;
    }
  `}),g=({comments:h,packetCounter:a,addComment:v})=>{const C=(0,m.wW)(p),[E,P]=(0,t.useState)(""),[x,M]=(0,t.useState)(0),S=(0,t.useRef)(null);(0,t.useLayoutEffect)(()=>{S.current?M(S.current.offsetHeight):M(0)},[a]);const D=R=>{const L=R.currentTarget;P(L.value)},T=async R=>{R?.key==="Enter"&&!R?.shiftKey&&(R.preventDefault(),E.length>0&&await v(E)&&P(""))};return t.createElement(f.$,{scrollTop:x},t.createElement("div",{ref:S,className:C.commentViewContainer},h.map(R=>t.createElement(d,{key:R.id,message:R})),t.createElement(o.K,{placeholder:"Write a comment",value:E,onChange:D,onKeyPress:T,autoFocus:!0})))},p=h=>({commentViewContainer:i.css`
    margin: 5px;
  `});class y extends t.PureComponent{constructor(a){super(a),this.packetCounter=0,this.getLiveChannel=()=>{const v=(0,u.gj)();if(!v){console.error('Grafana live not running, enable "live" feature toggle');return}const C=this.getLiveAddress();if(C)return v.getStream(C)},this.getLiveAddress=()=>({scope:n.z.Grafana,namespace:"comment",path:`${this.props.objectType}/${this.props.objectId}`}),this.updateSubscription=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0);const v=this.getLiveChannel();v&&(this.subscription=v.subscribe({next:C=>{if((0,n.RL)(C)){const{commentCreated:E}=C.message;E&&(this.setState(P=>({messages:[...P.messages,E]})),this.packetCounter++)}}}))},this.addComment=async v=>{const C=await(0,s.i)().post("/api/comments/create",{objectType:this.props.objectType,objectId:this.props.objectId,content:v});return console.log(C),!0},this.state={messages:[],value:""}}async componentDidMount(){const a=await(0,s.i)().post("/api/comments/get",{objectType:this.props.objectType,objectId:this.props.objectId});this.packetCounter++,this.setState({messages:a.comments}),this.updateSubscription()}render(){return t.createElement(g,{comments:this.state.messages,packetCounter:this.packetCounter,addComment:this.addComment})}}},86475:(G,O,e)=>{"use strict";e.d(O,{D:()=>t,Z:()=>n});const t="connections",n={Base:`/${t}`,YourConnections:`/${t}/your-connections`,DataSources:`/${t}/your-connections/datasources`,DataSourcesNew:`/${t}/your-connections/datasources/new`,DataSourcesEdit:`/${t}/your-connections/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/your-connections/datasources/edit/:uid/dashboards`,ConnectData:`/${t}/connect-data`,DataSourcesDetails:`/${t}/datasources/:id`}},10655:(G,O,e)=>{"use strict";e.d(O,{Mi:()=>c,Rh:()=>l,WJ:()=>p,Ym:()=>r,bS:()=>g,zZ:()=>d});var t=e(32504),n=e(73736),u=e(3363),s=e(47214),i=e(659),m=e(60499);const f=({baseUrl:y})=>async h=>{try{const{data:a,...v}=await(0,u.n)((0,s.i)().fetch({...h,url:y+h.url,showErrorAlert:h.showErrorAlert}));return{data:a,meta:v}}catch(a){return h.manageError?h.manageError(a):{error:a}}},o=y=>({error:y.status!==404?y:null}),l=(0,t.LC)({reducerPath:"publicDashboardApi",baseQuery:(0,n.XD)(f({baseUrl:"/api/dashboards"}),{maxRetries:0}),tagTypes:["PublicDashboard","AuditTablePublicDashboard"],refetchOnMountOrArgChange:!0,endpoints:y=>({getPublicDashboard:y.query({query:h=>({url:`/uid/${h}/public-dashboards`,manageError:o,showErrorAlert:!1}),async onQueryStarted(h,{dispatch:a,queryFulfilled:v}){try{await v}catch(C){const E=C;a((0,i.$l)((0,m.t_)(E?.error?.data?.message)))}},providesTags:(h,a,v)=>[{type:"PublicDashboard",id:v}]}),createPublicDashboard:y.mutation({query:h=>({url:`/uid/${h.dashboard.uid}/public-dashboards`,method:"POST",data:h.payload}),async onQueryStarted({dashboard:h,payload:a},{dispatch:v,queryFulfilled:C}){const{data:E}=await C;v((0,i.$l)((0,m.AT)("Public dashboard created!"))),h.updateMeta({publicDashboardUid:E.uid,publicDashboardEnabled:E.isEnabled})},invalidatesTags:(h,a,{payload:v})=>[{type:"PublicDashboard",id:v.dashboardUid}]}),updatePublicDashboard:y.mutation({query:h=>({url:`/uid/${h.dashboard.uid}/public-dashboards/${h.payload.uid}`,method:"PUT",data:h.payload}),extraOptions:{maxRetries:0},async onQueryStarted({dashboard:h,payload:a},{dispatch:v,queryFulfilled:C}){const{data:E}=await C;v((0,i.$l)((0,m.AT)("Public dashboard updated!"))),h.updateMeta({publicDashboardUid:E.uid,publicDashboardEnabled:E.isEnabled})},invalidatesTags:(h,a,{payload:v})=>[{type:"PublicDashboard",id:v.dashboardUid}]}),listPublicDashboards:y.query({query:()=>({url:"/public-dashboards"}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:y.mutation({query:h=>({url:`/uid/${h.dashboardUid}/public-dashboards/${h.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:h,uid:a},{dispatch:v,queryFulfilled:C}){await C,v((0,i.$l)((0,m.AT)("Public dashboard deleted!"))),h?.updateMeta({publicDashboardUid:a,publicDashboardEnabled:!1})},invalidatesTags:(h,a,{dashboardUid:v})=>[{type:"PublicDashboard",id:v},"AuditTablePublicDashboard"]})})}),{useGetPublicDashboardQuery:r,useCreatePublicDashboardMutation:d,useUpdatePublicDashboardMutation:c,useDeletePublicDashboardMutation:g,useListPublicDashboardsQuery:p}=l},134:(G,O,e)=>{"use strict";e.d(O,{E:()=>r});var t=e(82897),n=e(77213),u=e(47694),s=e(86648),i=e(6297),m=e(59096),f=e(15546),o=e(10672);function l(d){return d.libraryPanel&&typeof d.libraryPanel.name=="string"&&typeof d.libraryPanel.uid=="string"}class r{async makeExportable(c){c.cleanUpRepeats();const g=c.getSaveModelClone();g.id=null,c.processRepeats();const p=[],y={},h={},a={},v=new Map;for(const x of g.getVariables())a[x.name]=x;const C=(x,M)=>{if(x.datasource===void 0){x.datasource=M;return}let S=x.datasource,D=null;const T=S?.uid;return T&&T.indexOf("$")===0&&(D=a[T.substring(1)],D&&D.current&&(S=D.current.value)),(0,n.F)().get(S).then(R=>{if(R.meta?.builtIn||(y["datasource"+R.meta?.id]={type:"datasource",id:R.meta.id,name:R.meta.name,version:R.meta.info.version||"1.0.0"},D))return;const L="DS_"+R.name.replace(" ","_").toUpperCase();h[L]={name:L,label:R.name,description:"",type:"datasource",pluginId:R.meta?.id,pluginName:R.meta?.name},x.datasource={type:R.meta.id,uid:"${"+L+"}"}})},E=async x=>{if(x.type!=="row"){if(await C(x),x.targets)for(const S of x.targets)await C(S,x.datasource);const M=u.ZP.panels[x.type];M&&(y["panel"+M.id]={type:"panel",id:M.id,name:M.name,version:M.info.version})}},P=async x=>{if((0,i.V)(x)){const{name:M,uid:S}=x.libraryPanel;let D=x.libraryPanel.model;D||(D=(await(0,s.Mh)(S,!0)).model);const{gridPos:T,id:R,...L}=D;v.has(S)||v.set(S,{name:M,uid:S,kind:m.V.Panel,model:L})}};try{for(const S of g.panels)if(await E(S),S.collapsed!==void 0&&S.collapsed===!0&&S.panels)for(const D of S.panels)await E(D);for(const S of g.getVariables())(0,f.Xh)(S)&&(await C(S),S.options=[],S.current={},S.refresh=S.refresh!==o.Bd.never?S.refresh:o.Bd.onDashboardLoad);for(const S of g.annotations.list)await C(S);y.grafana={type:"grafana",id:"grafana",name:"Grafana",version:u.ZP.buildInfo.version},(0,t.each)(h,S=>{p.push(S)});for(const S of c.panels)if(await P(S),S.collapsed!==void 0&&S.collapsed===!0&&S.panels)for(const D of S.panels)await P(D);for(const S of g.getVariables())if((0,f.VC)(S)){const D="VAR_"+S.name.replace(" ","_").toUpperCase();p.push({name:D,type:"constant",label:S.label||S.name,value:S.query,description:""}),S.query="${"+D+"}",S.current={value:S.query,text:S.query,selected:!1},S.options=[S.current]}const x=[...v.entries()].reduce((S,[D,T])=>(S[D]=T,S),{}),M=(0,t.defaults)({__inputs:p,__elements:x,__requires:(0,t.sortBy)(y,["id"])},g);for(let S=0;S<M.panels.length;S++){const D=M.panels[S];l(D)&&(M.panels[S]={gridPos:D.gridPos,id:D.id,libraryPanel:{uid:D.libraryPanel.uid,name:D.libraryPanel.name}})}return M}catch(x){return console.error("Export failed:",x),{error:x}}}}},64503:(G,O,e)=>{"use strict";e.d(O,{u:()=>i});var t=e(52423),n=e(68404),u=e(29516),s=e(20017);const i=({icon:f,iconType:o,iconSize:l,tooltip:r,onClick:d,children:c})=>{const g=(0,u.wW)(m);return n.createElement("div",{className:g.noBorderContainer},f&&n.createElement(s.h,{name:f,size:l,iconType:o,tooltip:r,tooltipPlacement:"bottom",onClick:d}),c)},m=f=>({noBorderContainer:t.css`
    padding: 0 ${f.spacing(.5)};
    display: flex;
  `})},37877:(G,O,e)=>{"use strict";e.d(O,{C:()=>r});var t=e(68404),n=e(21053),u=e(1821),s=e(45781),i=e(32873),m=e(77582),f=e(35287),o=e(19349),l=e(45984);class r extends t.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=c=>{(0,o.$t)().setAutoRefresh(c),this.forceUpdate()},this.onRefresh=()=>((0,o.$t)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{m.h$.publish(new l.Qt({direction:l.Im.Left}))},this.onMoveForward=()=>{m.h$.publish(new l.Qt({direction:l.Im.Right}))},this.onChangeTimePicker=c=>{const{dashboard:g}=this.props,p=g.timepicker,y=p.nowDelay&&c.raw.to==="now",h=n.isMathString(c.raw.from)?c.raw.from:c.from,a=n.isMathString(c.raw.to)?c.raw.to:c.to,v={from:h,to:y?"now-"+p.nowDelay:a};(0,o.$t)().setTime(v)},this.onChangeTimeZone=c=>{this.props.dashboard.timezone=c,this.props.onChangeTimeZone(c),this.onRefresh()},this.onChangeFiscalYearStartMonth=c=>{this.props.dashboard.fiscalYearStartMonth=c,this.onRefresh()},this.onZoom=()=>{m.h$.publish(new l.p8({scale:2}))}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(u.md,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:c,isOnCanvas:g}=this.props,{refresh_intervals:p}=c.timepicker,y=(0,o.$t)().getValidIntervals(p||s.o5),h=(0,o.$t)().timeRange(),a=c.getTimezone(),v=c.fiscalYearStartMonth,C=c.panelInEdit?.isEditing;return t.createElement(t.Fragment,null,t.createElement(i.a,{value:h,onChange:this.onChangeTimePicker,timeZone:a,fiscalYearStartMonth:v,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:g}),t.createElement(s.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:c.refresh,intervals:y,isOnCanvas:g,tooltip:(0,f.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:C}))}}},66157:(G,O,e)=>{"use strict";e.d(O,{t:()=>ce});var t=e(52423),n=e(68404),u=e(36635),s=e(70356),i=e(8928),m=e(83383),f=e(68183),o=e(57388),l=e(80313),r=e(88561),d=e(81202),c=e(3349),g=e(75952),p=e(26408),y=e(93880),h=e(10129),a=e(95379),v=e(89097),C=e(47694),E=e(34177),P=e(60499),x=e(77582);function M(re,Ee){const[J,te]=(0,n.useState)();return(0,n.useEffect)(()=>{const ne=re.subscribe(Ee,te);return()=>ne.unsubscribe()},[re,Ee]),J}var S=e(35287),D=e(29516),T=e(6694),R=e(65580);const L=({dashboard:re,onDismiss:Ee})=>{const J=(0,D.wW)(w);return n.createElement(T.u,{isOpen:!0,title:"Dashboard comments",icon:"save",onDismiss:Ee,className:J.modal},n.createElement(R.t,{objectType:"dashboard",objectId:re.uid}))},w=re=>({modal:t.css`
    width: 500px;
    height: 60vh;
  `});var A=e(7196),N=e(18262),W=e(10079),I=e(54294),F=e(81168),V=e(45984),b=e(61962),X=e(9398),k=e(64503),H=e(37877);const Y={setStarred:b.OQ,updateTimeZoneForSession:I.YT},ee=(0,u.connect)(null,Y),ue=f.wl.pages.Dashboard.DashNav,q=[],ge=[];function De(re){q.push(re)}function fe(re){ge.push(re)}const me=n.memo(re=>{const Ee=(0,l.N)(),{chrome:J}=(0,E.p)(),{showModal:te,hideModal:ne}=(0,n.useContext)(r.kr);M(re.dashboard.events,V.hS);const j=re.dashboard.snapshot?.originalUrl??"",be=()=>{window.location.href=i.QX.sanitizeUrl(re.dashboard.snapshot.originalUrl)},Le=(0,P.iG)(),Qe=()=>{try{const Re=new URL(i.QX.sanitizeUrl(j),C.ZP.appUrl),ze=new URL(C.ZP.appUrl);Re.host!==ze.host?x.h$.publish(new V.Dn({component:d.s,props:{title:"Proceed to external site?",modalClass:ie,body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,j)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:be}})):be()}catch(Re){Le.error("Invalid URL",Re instanceof Error?Re.message:void 0)}},Ye=()=>{const Re=(0,X.h4)(),{dashboard:ze,setStarred:ve}=re;Re.starDashboard(ze.id,Boolean(ze.meta.isStarred)).then(Te=>{ve({id:ze.uid,title:ze.title,url:ze.meta.url??"",isStarred:Te}),ze.meta.isStarred=Te,Ee()})},de=()=>{o.E1.partial({viewPanel:null})},Be=()=>{J.onToggleKioskMode()},Ve=()=>{o.E1.partial({editview:"settings"})},$e=()=>{W.r0.prev()},We=()=>{W.r0.next()},Ke=()=>{W.r0.stop(),Ee()},qe=(Re,ze)=>{Re.map((ve,Te)=>{const he=ve.component,pe=n.createElement(he,{...re,key:`button-custom-${Te}`});typeof ve.index=="number"?ze.splice(ve.index,0,pe):ze.push(pe)})},Xe=()=>W.r0.isPlaying;(0,n.useEffect)(()=>{const Re=re.dashboard,ze=re.shareModalActiveTab,{canShare:ve}=Re.meta;return ve&&ze&&te(N.ShareModal,{dashboard:Re,onDismiss:ne,activeTab:ze}),()=>{ne()}},[te,ne,re.dashboard,re.shareModalActiveTab]);const at=()=>{const{dashboard:Re,kioskMode:ze}=re,{canStar:ve,canShare:Te,isStarred:he}=Re.meta,pe=[];if(ze||Xe())return[];if(ve){let ye=he?(0,S.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,S.t)("dashboard.toolbar.mark-favorite","Mark as favorite");pe.push(n.createElement(k.u,{tooltip:ye,icon:he?"favorite":"star",iconType:he?"mono":"default",iconSize:"lg",onClick:Ye,key:"button-star"}))}return Te&&pe.push(n.createElement(r.JY,{key:"button-share"},({showModal:ye,hideModal:Oe})=>n.createElement(k.u,{tooltip:(0,S.t)("dashboard.toolbar.share","Share dashboard or panel"),icon:"share-alt",iconSize:"lg",onClick:()=>{ye(N.ShareModal,{dashboard:Re,onDismiss:Oe})}}))),Re.meta.publicDashboardEnabled&&pe.push(n.createElement(c.V,{key:"public-dashboard",name:"Public",colorIndex:5,"data-testid":ue.publicDashboardTag})),Re.uid&&C.ZP.featureToggles.dashboardComments&&pe.push(n.createElement(r.JY,{key:"button-dashboard-comments"},({showModal:ye,hideModal:Oe})=>n.createElement(k.u,{tooltip:(0,S.t)("dashboard.toolbar.comments-show","Show dashboard comments"),icon:"comment-alt-message",iconSize:"lg",onClick:()=>{ye(L,{dashboard:Re,onDismiss:Oe})}}))),qe(q,pe),pe},Ze=()=>n.createElement(g.h,{key:"playlist-buttons"},n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:$e,narrow:!0}),n.createElement(p.h,{onClick:Ke},n.createElement(S.cC,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:We,narrow:!0})),lt=()=>{const{dashboard:Re,updateTimeZoneForSession:ze,hideTimePicker:ve}=re;return ve?null:n.createElement(H.C,{dashboard:Re,onChangeTimeZone:ze,key:"time-controls"})},nt=()=>{const{dashboard:Re,onAddPanel:ze,isFullscreen:ve,kioskMode:Te}=re,{canSave:he,canEdit:pe,showSettings:ye}=Re.meta,{snapshot:Oe}=Re,Ne=Oe&&Oe.originalUrl,Me=[],Ae=C.ZP.featureToggles.topnav?null:n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.tv-button","Cycle view mode"),icon:"monitor",onClick:Be,key:"tv-button"});return Xe()?[Ze(),lt()]:Te===F.KioskMode.TV?[lt(),Ae]:(pe&&!ve&&Me.push(n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",onClick:ze,key:"button-panel-add"})),he&&!ve&&Me.push(n.createElement(r.JY,{key:"button-save"},({showModal:we,hideModal:ke})=>n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{we(A.d,{dashboard:Re,onDismiss:ke})}}))),Ne&&Me.push(n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:Qe,icon:"link",key:"button-snapshot"})),ye&&Me.push(n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:Ve,key:"button-settings"})),qe(ge,Me),Me.push(lt()),Me.push(Ae),C.ZP.featureToggles.scenes&&Me.push(n.createElement(p.h,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>o.E1.push(`/scenes/dashboard/${Re.uid}`)})),Me)},{isFullscreen:_e,title:ut,folderTitle:rt}=re,je=(0,s.TH)(),dt=m.u.getUrlForPartial(je,{search:"open"}),oe=m.u.getUrlForPartial(je,{search:"open",query:"folder:current"}),Se=_e?de:void 0;return C.ZP.featureToggles.topnav?n.createElement(a.A,{actions:n.createElement(n.Fragment,null,at(),n.createElement(v.M,{leftActionsSeparator:!0}),n.createElement(y.R,{alignment:"right"},nt()))}):n.createElement(h.X,{pageIcon:_e?void 0:"apps",title:ut,parent:rt,titleHref:dt,parentHref:oe,onGoBack:Se,leftItems:at()},nt())});me.displayName="DashNav";const ce=ee(me),ie=(0,t.css)({width:"max-content",maxWidth:"80vw"})},42557:(G,O,e)=>{"use strict";e.d(O,{P:()=>h});var t=e(82897),n=e(68404),u=e(33180),s=e(68183),i=e(53535),m=e(74955),f=e(68172),o=e(84498),l=e(25474),r=e(44727),d=e(45781),c=e(19349);const g=({refreshIntervals:a,onRefreshIntervalChange:v,getIntervalsFunc:C=y,validateIntervalsFunc:E=p})=>{const[P,x]=(0,n.useState)(C(a??d.o5)),[M,S]=(0,n.useState)(null);(0,n.useEffect)(()=>{const L=C(a??d.o5);x(L)},[C,a]);const D=(0,n.useMemo)(()=>Array.isArray(P)?P.join(","):"",[P]),T=(0,n.useCallback)(L=>{const w=L.currentTarget.value?L.currentTarget.value.split(","):[];x(w)},[x]),R=(0,n.useCallback)(L=>{const w=E(P);w===null&&v(C(P)),S(w)},[C,P,v,E]);return n.createElement(m.g,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:M,invalid:!!M},n.createElement(l.I,{id:"auto-refresh-input",invalid:!!M,value:D,onChange:T,onBlur:R}))},p=(a,v={getTimeSrv:c.$t})=>{try{return y(a,v),null}catch(C){return C instanceof Error?C.message:"Invalid intervals"}},y=(a,v={getTimeSrv:c.$t})=>{const C=a.filter(E=>E.trim()!=="").map(E=>E.replace(/\s+/g,""));return[...new Set(v.getTimeSrv().getValidIntervals(C))]};class h extends n.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=v=>{const C=v.currentTarget.value;if((0,t.isEmpty)(C))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(C);if(u.isValidTimeSpan(C))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(C);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=v=>{typeof v=="string"&&this.props.onTimeZoneChange(v)},this.onWeekStartChange=v=>{this.props.onWeekStartChange(v)}}render(){return n.createElement(i.s,{label:"Time options",isOpen:!0},n.createElement(m.g,{label:"Time zone","data-testid":s.wl.components.TimeZonePicker.containerV2},n.createElement(f.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),n.createElement(m.g,{label:"Week start","data-testid":s.wl.components.WeekStartPicker.containerV2},n.createElement(o.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),n.createElement(g,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),n.createElement(m.g,{label:"Now delay",description:"Exclude recent data that may be incomplete."},n.createElement(l.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),n.createElement(m.g,{label:"Hide time picker"},n.createElement(r.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),n.createElement(m.g,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'"},n.createElement(r.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},36182:(G,O,e)=>{"use strict";e.d(O,{D:()=>Ys});var t=e(68404),n=e(70356),u=e(83383),s=e(57388),i=e(90723),m=e(10129),f=e(95379),o=e(79008),l=e(47694),r=e(82002),d=e(81168),c=e(45984),g=e(36635),p=e(31259),y=e(52423),h=e(22350),a=e(77274),v=e(29516),C=e(53535),E=e(90701),P=e(40008),x=e(48756),M=e(81697),S=e(20017),D=e(6694);const T=({nodes:Z,edges:ae,direction:Pe,width:Ue,height:et,onDoubleClick:ot})=>{const ft=(0,t.useRef)(null),xt=(0,t.useRef)(null),St=(0,t.useCallback)(Bt=>{ot&&ot(Bt.nodes[0])},[ot]);return(0,t.useEffect)(()=>((async()=>{const Ht=await e.e(8271).then(e.t.bind(e,47137,23)),qt={nodes:R(Ht,Z),edges:L(Ht,ae)},nn={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:Pe??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};ft.current=new Ht.Network(xt.current,qt,nn),ft.current?.on("doubleClick",St)})(),()=>{ft.current&&ft.current.off("doubleClick")}),[Pe,ae,Z,St]),t.createElement("div",null,t.createElement("div",{ref:xt,style:{width:Ue??"100%",height:et??"60vh"}}))};function R(Z,ae){const Pe=ae.map(Ue=>({...Ue,shape:"box"}));return new Z.DataSet(Pe)}function L(Z,ae){const Pe=ae.map(Ue=>({...Ue,arrows:"to",dashes:!0}));return new Z.DataSet(Pe)}function w({edges:Z,nodes:ae,show:Pe,title:Ue,children:et}){const[ot,ft]=(0,t.useState)(Pe),xt=(0,t.useCallback)(()=>ft(!0),[ft]),St=(0,t.useCallback)(()=>ft(!1),[ft]);return t.createElement(t.Fragment,null,t.createElement(D.u,{isOpen:ot,title:Ue,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:St,onDismiss:St},t.createElement(T,{nodes:ae,edges:Z})),et({showModal:xt}))}const A=({id:Z,usages:ae})=>{const Pe=(0,t.useMemo)(()=>ae.find(et=>et.variable.id===Z),[Z,ae]);if(!Pe)return null;const Ue=Pe.nodes.map(et=>et.label.includes(`$${Z}`)?{...et,color:"#FB7E81"}:et);return t.createElement(w,{show:!1,title:`Showing usages for: $${Z}`,nodes:Ue,edges:Pe.edges},({showModal:et})=>t.createElement(S.h,{onClick:()=>et(),name:"code-branch",title:"Show usages","data-testid":"VariablesUnknownButton"}))};var N=e(19248);const W=1e3;function I({variables:Z,dashboard:ae}){const[Pe,Ue]=(0,t.useState)(!1),[et,ot]=(0,t.useState)(0),[ft,xt]=(0,t.useState)([]),St=(0,v.wW)(X);(0,t.useEffect)(()=>ot(qt=>qt+1),[Z,ae]);const{loading:Bt}=(0,h.Z)(async()=>{if(Pe&&et>0){const qt=Date.now(),nn=await(0,N.Yg)(Z,ae),Rn=Date.now()-qt;return Rn>=W&&(0,a.ff)("Slow unknown variables expansion",{elapsed:Rn}),ot(0),xt(nn),nn}return[]},[Z,ae,Pe,et]),Ht=qt=>{qt&&(0,a.ff)("Unknown variables section expanded"),Ue(qt)};return t.createElement("div",{className:St.container},t.createElement(C.s,{label:t.createElement(F,null),isOpen:Pe,onToggle:Ht},Bt&&t.createElement(E.wc,{justify:"center"},t.createElement(E.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(P.$,{size:16}))),!Bt&&ft&&t.createElement(t.Fragment,null,ft.length===0&&t.createElement(V,null),ft.length>0&&t.createElement(b,{usages:ft}))))}function F(){const Z=(0,v.wW)(X);return t.createElement("h5",null,"Renamed or missing variables",t.createElement(x.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},t.createElement(M.J,{name:"info-circle",className:Z.infoIcon})))}function V(){return t.createElement("span",null,"No renamed or missing variables found.")}function b({usages:Z}){const ae=(0,v.wW)(X);return t.createElement("table",{className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",{colSpan:5}))),t.createElement("tbody",null,Z.map(Pe=>{const{variable:Ue}=Pe,{id:et,name:ot}=Ue;return t.createElement("tr",{key:et},t.createElement("td",{className:ae.firstColumn},t.createElement("span",null,ot)),t.createElement("td",{className:ae.defaultColumn}),t.createElement("td",{className:ae.defaultColumn}),t.createElement("td",{className:ae.defaultColumn}),t.createElement("td",{className:ae.lastColumn},t.createElement(A,{id:Ue.id,usages:Z})))})))}const X=Z=>({container:y.css`
    margin-top: ${Z.spacing(4)};
    padding-top: ${Z.spacing(4)};
  `,infoIcon:y.css`
    margin-left: ${Z.spacing(1)};
  `,defaultColumn:y.css`
    width: 1%;
  `,firstColumn:y.css`
    width: 1%;
    vertical-align: top;
    color: ${Z.colors.text.maxContrast};
  `,lastColumn:y.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var k=e(7240),H=e(87095),Y=e(92990),ee=e(92624),ue=e(81202);function q({varName:Z,isOpen:ae=!1,onConfirm:Pe,onDismiss:Ue}){return t.createElement(ue.s,{title:"Delete variable",isOpen:ae,onConfirm:Pe,onDismiss:Ue,body:`
      Are you sure you want to delete variable "${Z}"?
    `,modalClass:ge.modal,confirmText:"Delete"})}const ge={modal:(0,y.css)({width:"max-content",maxWidth:"80vw"})};var De=e(49922),fe=e(68183),me=e(22323),ce=e(15546),ie=e(85803),re=e(22107),Ee=e(74955),J=e(318);const te=[{label:"Label and value",value:re.bU.dontHide},{label:"Value",value:re.bU.hideLabel},{label:"Nothing",value:re.bU.hideVariable}];function ne({onChange:Z,hide:ae,type:Pe}){const Ue=(0,t.useMemo)(()=>te.find(et=>et.value===ae)?.value??te[0].value,[ae]);return Pe==="constant"?null:t.createElement(Ee.g,{label:"Show on dashboard"},t.createElement(J.S,{options:te,onChange:Z,value:Ue}))}var j=e(41624),be=e(49993),Le=e(57052),Qe=e(83704);function Ye({onChange:Z,type:ae}){const Pe=(0,t.useMemo)(()=>(0,ee.bi)(),[]),Ue=(0,t.useMemo)(()=>Pe.find(et=>et.value===ae)??Pe[0],[Pe,ae]);return t.createElement(Qe.u,{name:"Select variable type",value:Ue,options:Pe,onChange:Z,testId:fe.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var de=e(9274),Be=e(91605);const Ve=({variable:{options:Z}})=>{const[ae,Pe]=(0,t.useState)(20),[Ue,et]=(0,t.useState)([]),ot=(0,t.useCallback)(xt=>{xt.preventDefault(),Pe(ae+20)},[ae,Pe]),ft=(0,v.wW)($e);return(0,t.useEffect)(()=>et(Z.slice(0,ae)),[ae,Z]),Ue.length?t.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},t.createElement("h5",null,"Preview of values"),t.createElement(de.Z,null,Ue.map((xt,St)=>t.createElement(de.Z,{key:`${xt.value}-${St}`,className:ft.optionContainer},t.createElement(Be.W,{"aria-label":fe.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},t.createElement("div",{className:ft.label},xt.text))))),Z.length>ae&&t.createElement(de.Z,{className:ft.optionContainer},t.createElement(i.zx,{onClick:ot,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};Ve.displayName="VariableValuesPreview";function $e(Z){return{wrapper:(0,y.css)({display:"flex",flexDirection:"column",marginTop:Z.spacing(2)}),optionContainer:(0,y.css)({marginLeft:Z.spacing(.5),marginBottom:Z.spacing(.5)}),label:(0,y.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}var We=e(82897),Ke=e(37737),qe=e(50678);const Xe=Z=>async ae=>{const{rootStateKey:Pe}=Z;ae((0,k.mb)(Pe,(0,qe.wJ)({name:(0,H.E0)(Z).name,id:Z.id})))},at=Z=>async(ae,Pe)=>{const{rootStateKey:Ue}=Z;ae((0,k.mb)(Ue,(0,qe.qe)((0,ee.Y6)(Z))))},Ze=(Z,ae)=>(Pe,Ue)=>{const{id:et,rootStateKey:ot}=Z;let ft=null;if(ae.match(/^(?!__).*$/)||(ft="Template names cannot begin with '__', that's reserved for Grafana's global variables"),ae.match(/^\w+$/)||(ft="Only word and digit characters are allowed in variable names"),(0,H.gt)(ot,Ue()).filter(Bt=>Bt.name===ae&&Bt.id!==et).length&&(ft="Variable with the same name already exists"),ft){Pe((0,k.mb)(ot,(0,qe.y8)({newName:ae,errorText:ft})));return}Pe(lt(Z,ae))},lt=(Z,ae)=>(Pe,Ue)=>{const{rootStateKey:et}=Z,ot=(0,H.E0)(Z,Ue());if(ot.name===ae){Pe((0,k.mb)(et,(0,qe.Yo)((0,ee.Y6)(Z,{newName:ae}))));return}const ft={...(0,We.cloneDeep)(ot),name:ae,id:ae},xt=ot.global,St=ot.index,Bt=(0,ee.yQ)(ft);Pe((0,k.mb)(et,(0,Y.VN)((0,ee.Y6)(Bt,{global:xt,index:St,model:ft})))),Pe((0,k.mb)(et,(0,qe.Yo)((0,ee.Y6)(Bt,{newName:ae})))),Pe((0,k.mb)(et,(0,Y.mZ)((0,ee.Y6)(Z,{reIndex:!1}))))},nt=(Z,ae="query")=>(Pe,Ue)=>{const et=(0,ee.mn)(Z),ot=(0,H.gt)(et,Ue()),ft=ut(ae,ot),xt={type:ae,id:ft},St=!1,Bt=(0,H.Eo)(et,Ue()),Ht=(0,We.cloneDeep)(me.z.get(ae).initialState);Ht.id=ft,Ht.name=ft,Ht.rootStateKey=et,Pe((0,k.mb)(et,(0,Y.VN)((0,ee.Y6)(xt,{global:St,model:Ht,index:Bt})))),s.E1.partial({editIndex:ot.length})},_e=Z=>(ae,Pe)=>{const Ue=(0,ee.mn)(Z),et=Pe(),ot=(0,H.xD)(Ue,et),ft=et.dashboard.getModel(),{usages:xt}=(0,N.V)(ot,ft),St=(0,N.vI)(xt);ae((0,k.mb)(Ue,(0,Ke.j4)({usages:xt,usagesNetwork:St})))};function ut(Z,ae){let Pe=0,Ue=`${Z}${Pe}`;for(;ae.find(et=>et.id===Ue);)Ue=`${Z}${++Pe}`;return Ue}var rt=(Z=>(Z[Z.MaxSize=50]="MaxSize",Z))(rt||{});const je=(Z,ae)=>({editor:(0,H.AE)(ae.identifier.rootStateKey,Z).editor,variable:(0,H.E0)(ae.identifier,Z)}),dt=Z=>({...(0,p.bindActionCreators)({variableEditorMount:Xe,variableEditorUnMount:at,changeVariableName:Ze,updateOptions:ie.Rk},Z),changeVariableProp:(ae,Pe,Ue)=>Z((0,k.mb)(ae.rootStateKey,(0,Y.Pl)((0,ee.Y6)(ae,{propName:Pe,propValue:Ue})))),changeVariableType:(ae,Pe)=>Z((0,k.mb)(ae.rootStateKey,(0,Y.Be)((0,ee.Y6)(ae,{newType:Pe})))),removeVariable:ae=>{Z((0,k.mb)(ae.rootStateKey,(0,Y.mZ)((0,ee.Y6)(ae,{reIndex:!0}))))}}),oe=(0,g.connect)(je,dt);class Se extends t.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=ae=>{ae.preventDefault(),this.props.changeVariableName(this.props.identifier,ae.currentTarget.value)},this.onTypeChange=ae=>{ae.value&&this.props.changeVariableType(this.props.identifier,ae.value)},this.onLabelChange=ae=>{ae.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",ae.currentTarget.value)},this.onDescriptionChange=ae=>{this.props.changeVariableProp(this.props.identifier,"description",ae.currentTarget.value)},this.onHideChange=ae=>{this.props.changeVariableProp(this.props.identifier,"hide",ae)},this.onPropChanged=({propName:ae,propValue:Pe,updateOptions:Ue=!1})=>{this.props.changeVariableProp(this.props.identifier,ae,Pe),Ue&&this.props.updateOptions((0,ee.yQ)(this.props.variable))},this.onHandleSubmit=async ae=>{ae.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,ee.yQ)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),s.E1.partial({editIndex:null})},this.onApply=()=>{s.E1.partial({editIndex:null})}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:ae}=this.props,Pe=me.z.get(this.props.variable.type).editor;if(!Pe)return null;const Ue=ae.state===De.Gu.Loading;return t.createElement(t.Fragment,null,t.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},t.createElement(Ye,{onChange:this.onTypeChange,type:this.props.variable.type}),t.createElement(j.e,null,"General"),t.createElement(Le.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:fe.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:rt.MaxSize,required:!0}),t.createElement(Le.V,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:fe.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),t.createElement(be.W,{name:"Description",value:ae.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),t.createElement(ne,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),Pe&&t.createElement(Pe,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,ce.eL)(this.props.variable)?t.createElement(Ve,{variable:this.props.variable}):null,t.createElement("div",{style:{marginTop:"16px"}},t.createElement(E.Lh,{spacing:"md",height:"inherit"},t.createElement(i.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),t.createElement(i.zx,{type:"submit","aria-label":fe.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:Ue,variant:"secondary"},"Run query",Ue&&t.createElement(M.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),t.createElement(i.zx,{variant:"primary",onClick:this.onApply,"data-testid":fe.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),t.createElement(q,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const Re=oe(Se);var ze=e(19677),ve=e(26418),Te=e(69142),he=e(3153);const pe=({variables:Z})=>{const ae=(0,t.useMemo)(()=>(0,N.GQ)(Z),[Z]),Pe=(0,t.useMemo)(()=>(0,N.MJ)(Z),[Z]);return Pe.length?t.createElement(w,{show:!1,title:"Dependencies",nodes:(0,N.Of)(ae,Pe),edges:Pe},({showModal:Ue})=>t.createElement(i.zx,{onClick:()=>{(0,a.ff)("Show variable dependencies"),Ue()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},ye=Z=>t.createElement(g.Provider,{store:he.h},t.createElement(pe,{...Z})),Oe=({id:Z,usages:ae,isAdhoc:Pe})=>{const Ue=(0,t.useMemo)(()=>ae.find(ot=>ot.variable.id===Z),[ae,Z]);if(ae.length===0||Pe||!Ue)return null;const et=Ue.nodes.map(ot=>ot.label.includes(`$${Z}`)?{...ot,color:"#FB7E81"}:ot);return t.createElement(w,{show:!1,title:`Showing usages for: $${Z}`,nodes:et,edges:Ue.edges},({showModal:ot})=>t.createElement(S.h,{onClick:()=>{(0,a.ff)("Show variable usages"),ot()},name:"code-branch",title:"Show usages"}))};function Ne({index:Z,variable:ae,usageTree:Pe,usagesNetwork:Ue,onEdit:et,onDuplicate:ot,onDelete:ft}){const xt=(0,v.l4)(),St=(0,v.wW)(we),Bt=Me(ae),qt=(0,N.Rv)(ae.id,Pe)>0||(0,ce.Kn)(ae),nn=(0,ee.yQ)(ae);return t.createElement(ze._l,{draggableId:JSON.stringify(nn),index:Z},(Mn,Rn)=>t.createElement("tr",{ref:Mn.innerRef,...Mn.draggableProps,style:{userSelect:Rn.isDragging?"none":"auto",background:Rn.isDragging?xt.colors.background.secondary:void 0,...Mn.draggableProps.style}},t.createElement("td",{role:"gridcell",className:St.column},t.createElement(i.zx,{size:"xs",fill:"text",onClick:Pn=>{Pn.preventDefault(),et(nn)},className:St.nameLink,"aria-label":fe.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(ae.name)},ae.name)),t.createElement("td",{role:"gridcell",className:St.definitionColumn,onClick:Pn=>{Pn.preventDefault(),et(nn)},"aria-label":fe.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(ae.name)},Bt),t.createElement("td",{role:"gridcell",className:St.column},t.createElement(Ae,{passed:qt})),t.createElement("td",{role:"gridcell",className:St.column},t.createElement(Oe,{id:ae.id,isAdhoc:(0,ce.Kn)(ae),usages:Ue})),t.createElement("td",{role:"gridcell",className:St.column},t.createElement(S.h,{onClick:Pn=>{Pn.preventDefault(),(0,a.ff)("Duplicate variable"),ot(nn)},name:"copy",title:"Duplicate variable","aria-label":fe.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(ae.name)})),t.createElement("td",{role:"gridcell",className:St.column},t.createElement(S.h,{onClick:Pn=>{Pn.preventDefault(),(0,a.ff)("Delete variable"),ft(nn)},name:"trash-alt",title:"Remove variable","aria-label":fe.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(ae.name)})),t.createElement("td",{role:"gridcell",className:St.column},t.createElement("div",{...Mn.dragHandleProps,className:St.dragHandle},t.createElement(M.J,{name:"draggabledots",size:"lg"})))))}function Me(Z){let ae="";return(0,ce.Xh)(Z)?Z.definition?ae=Z.definition:typeof Z.query=="string"&&(ae=Z.query):(0,ce.eL)(Z)&&(ae=Z.query),ae}function Ae({passed:Z}){const ae=(0,v.wW)(we);return Z?t.createElement(M.J,{name:"check",className:ae.iconPassed,title:"This variable is referenced by other variables or dashboard."}):t.createElement(M.J,{name:"exclamation-triangle",className:ae.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function we(Z){return{dragHandle:y.css`
      cursor: grab;
    `,column:y.css`
      width: 1%;
    `,nameLink:y.css`
      cursor: pointer;
      color: ${Z.colors.primary.text};
    `,definitionColumn:y.css`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:y.css`
      color: ${Z.v1.palette.greenBase};
    `,iconFailed:y.css`
      color: ${Z.v1.palette.orange};
    `}}function ke({variables:Z,usages:ae,usagesNetwork:Pe,onChangeOrder:Ue,onAdd:et,onEdit:ot,onDelete:ft,onDuplicate:xt}){const St=Bt=>{if(!Bt.destination||!Bt.source)return;(0,a.ff)("Variable drag and drop");const Ht=JSON.parse(Bt.draggableId);Ue(Ht,Z[Bt.source.index].index,Z[Bt.destination.index].index)};return t.createElement("div",null,t.createElement("div",null,Z.length===0&&t.createElement(st,{onAdd:et}),Z.length>0&&t.createElement(ve.Stack,{direction:"column",gap:4},t.createElement("table",{className:"filter-table filter-table--hover","aria-label":fe.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",null,"Definition"),t.createElement("th",{colSpan:5}))),t.createElement(ze.Z5,{onDragEnd:St},t.createElement(ze.bK,{droppableId:"variables-list",direction:"vertical"},Bt=>t.createElement("tbody",{ref:Bt.innerRef,...Bt.droppableProps},Z.map((Ht,qt)=>t.createElement(Ne,{index:qt,key:`${Ht.name}-${qt}`,variable:Ht,usageTree:ae,usagesNetwork:Pe,onDelete:ft,onDuplicate:xt,onEdit:ot})),Bt.placeholder)))),t.createElement(ve.Stack,null,t.createElement(ye,{variables:Z}),t.createElement(i.zx,{"aria-label":fe.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:et,icon:"plus"},"New variable")))))}function st({onAdd:Z}){return t.createElement("div",null,t.createElement(Te.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:ae=>{ae.preventDefault(),Z()}}))}const Et=(Z,ae)=>{const{uid:Pe}=ae.dashboard,Ue=(0,H.AE)(Pe,Z);return{variables:(0,H.xD)(Pe,Z),idInEditor:Ue.editor.id,usagesNetwork:Ue.inspect.usagesNetwork,usages:Ue.inspect.usages}},Pt=Z=>({...(0,p.bindActionCreators)({createNewVariable:nt,initListMode:_e},Z),changeVariableOrder:(ae,Pe,Ue)=>Z((0,k.mb)(ae.rootStateKey,(0,Y.gE)((0,ee.Y6)(ae,{fromIndex:Pe,toIndex:Ue})))),duplicateVariable:ae=>Z((0,k.mb)(ae.rootStateKey,(0,Y.Y9)((0,ee.Y6)(ae,{newId:void 0})))),removeVariable:ae=>{Z((0,k.mb)(ae.rootStateKey,(0,Y.mZ)((0,ee.Y6)(ae,{reIndex:!0}))))}}),gt=(0,g.connect)(Et,Pt);class Ct extends t.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=ae=>{const Pe=this.props.variables.findIndex(Ue=>Ue.id===ae.id);s.E1.partial({editIndex:Pe})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(ae,Pe,Ue)=>{this.props.changeVariableOrder(ae,Pe,Ue)},this.onDuplicateVariable=ae=>{this.props.duplicateVariable(ae)},this.onModalOpen=ae=>{this.setState({variableId:ae})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:ae,variables:Pe}=this.props,Ue=ae!=null?Pe[ae]:void 0,et=Ue?{text:Ue.name}:void 0;return t.createElement(o.T,{navModel:this.props.sectionNav,pageNav:et},!Ue&&t.createElement(ke,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!Ue&&this.props.variables.length>0&&t.createElement(I,{variables:this.props.variables,dashboard:this.props.dashboard}),Ue&&t.createElement(Re,{identifier:(0,ee.yQ)(Ue)}),t.createElement(q,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const Ot=gt(Ct);var Ft=e(73546),jt=e(77582);const En=({dashboard:Z,sectionNav:ae})=>{const Pe=jt.Vt.hasPermission(d.AccessControlAction.DashboardsPermissionsWrite);return t.createElement(o.T,{navModel:ae},t.createElement(Ft.P,{resource:"dashboards",resourceId:Z.uid,canSetPermissions:Pe}))};var xn=e(1108),Cn=e(6645),bn=e(92103),Tn=e(54630),Zn=e(61986),Bn=e(86977);const Sn=Z=>({permissions:Z.dashboard.permissions,canViewFolderPermissions:Z.folder.canViewFolderPermissions}),wn={getDashboardPermissions:Bn.qm,addDashboardPermission:Bn.Yq,removeDashboardPermission:Bn.Qk,updateDashboardPermission:Bn.RF,checkFolderPermissions:Zn.J6},$n=(0,g.connect)(Sn,wn);class Xn extends t.PureComponent{constructor(ae){super(ae),this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onRemoveItem=Pe=>{this.props.removeDashboardPermission(this.props.dashboard.id,Pe)},this.onPermissionChanged=(Pe,Ue)=>{this.props.updateDashboardPermission(this.props.dashboard.id,Pe,Ue)},this.onAddPermission=Pe=>this.props.addDashboardPermission(this.props.dashboard.id,Pe),this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id),this.props.dashboard.meta.folderUid&&this.props.checkFolderPermissions(this.props.dashboard.meta.folderUid)}getFolder(){const{dashboard:ae,canViewFolderPermissions:Pe}=this.props;return{id:ae.meta.folderId,title:ae.meta.folderTitle,url:ae.meta.folderUrl,canViewFolderPermissions:Pe}}render(){const{permissions:ae,dashboard:Pe,sectionNav:Ue}=this.props,{isAdding:et}=this.state;return Pe.meta.hasUnsavedFolderChange?t.createElement(o.T,{navModel:Ue},t.createElement("h5",null,"You have changed a folder, please save to view permissions.")):t.createElement(o.T,{navModel:Ue},t.createElement("div",{className:"page-action-bar"},t.createElement(x.u,{placement:"auto",content:t.createElement(Tn.Z,null)},t.createElement(M.J,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})),t.createElement("div",{className:"page-action-bar__spacer"}),t.createElement(i.zx,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:et},"Add permission")),t.createElement(xn.s,{in:et},t.createElement(Cn.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})),t.createElement(bn.Z,{items:ae,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()}))}}const ba=$n(Xn);var hn=e(84135),Kn=e(5916),ta=e(77213),La=e(2248),oa=e(65587),ha=e(25474),ia=e(94338),Rt=e(13355),Lt=e(3363),At=e(94929),kt=e(9398),Zt=e(19349),Qt=e(86899),Jt=e(86953),rn=e(66228),mn=e(89890),Xt=e(20442),fn=e(20112),In=e(46739);class Yn extends t.PureComponent{constructor(ae){super(ae),this.updateFields=()=>{const Pe=this.props.response?.panelData?.series[0];if(Pe&&Pe.fields){const Ue=Pe.fields.map(et=>{const ot=(0,mn.C)(et,Pe);let ft="";for(let xt=0;xt<Pe.length;xt++){if(xt>0&&(ft+=", "),xt>2){ft+="...";break}ft+=et.values.get(xt)}return ft.length>50&&(ft=ft.substring(0,50)+"..."),{label:`${ot} (${et.type})`,value:ot,description:ft}});this.setState({fieldNames:Ue})}},this.onFieldSourceChange=(Pe,Ue)=>{const et=this.props.mappings||{},ot=et[Pe]||{};this.props.change({...et,[Pe]:{...ot,source:Ue.value||Xt.L.Field}})},this.onFieldNameChange=(Pe,Ue)=>{const et=this.props.mappings||{},ot=et[Pe]||{};this.props.change({...et,[Pe]:{...ot,value:Ue.value,source:Xt.L.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(ae){ae.response!==this.props.response&&this.updateFields()}renderRow(ae,Pe,Ue){const{fieldNames:et}=this.state;let ot=et;const ft=Pe.value;let xt=et.find(Bt=>ft===Bt.value);ft&&(ot=[...et],xt||ot.push({label:ft,value:ft}));let St=Ue?Ue[ae.key]:"";if(St&&ae.key.startsWith("time")){const Bt=(0,fn.Cf)("dateTimeAsIso");St=(0,fn.zc)(Bt(St))}return St==null&&(St=""),t.createElement("tr",{key:ae.key},t.createElement("td",null,ae.key," ",ae.help&&t.createElement(x.u,{content:ae.help},t.createElement(M.J,{name:"info-circle"}))),t.createElement("td",null,t.createElement(In.Ph,{value:xt,options:ot,placeholder:ae.placeholder||ae.key,onChange:Bt=>{this.onFieldNameChange(ae.key,Bt)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})),t.createElement("td",null,`${St}`))}render(){const ae=this.props.response?.events?.[0],Pe=this.props.mappings||{};return t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Annotation"),t.createElement("th",null,"From"),t.createElement("th",null,"First Value"))),t.createElement("tbody",null,rn.r0.map(Ue=>this.renderRow(Ue,Pe[Ue.key]||{},ae))))}}class Vn extends t.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:ae,annotation:Pe}=this.props;if((0,rn.yr)(ae))return;const Ue=(0,kt.h4)().getCurrent();if(!Ue)return;this.setState({running:!0});const et=await(0,Lt.n)((0,Jt.r)({range:(0,Zt.$t)().timeRange(),panel:new Qt.r({}),dashboard:Ue},ae,Pe));this.setState({running:!1,response:et})},this.onQueryChange=ae=>{this.props.onChange({...this.props.annotation,target:ae})},this.onMappingChange=ae=>{this.props.onChange({...this.props.annotation,mappings:ae})},this.onAnnotationChange=ae=>{this.props.onChange(ae)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(ae){this.props.annotation!==ae.annotation&&!(0,rn.yr)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:ae,annotation:Pe}=this.props,et={...rn.yA,...ae.annotations}.prepareAnnotation(Pe);et!==Pe?this.props.onChange(et):this.onRunQuery()}renderStatus(){const{response:ae,running:Pe}=this.state;let Ue="alert-info",et="...",ot;if(Pe||ae?.panelData?.state===De.Gu.Loading||!ae)et="loading...";else{const{events:ft,panelData:xt}=ae;if(xt?.error)Ue="alert-error",ot="exclamation-triangle",et=xt.error.message??"error";else if(!ft?.length)Ue="alert-warning",ot="exclamation-triangle",et="No events found";else{const St=xt?.series[0];et=`${ft.length} events (from ${St?.fields.length} fields)`}}return t.createElement("div",{className:(0,y.cx)(Ue,y.css`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},t.createElement("div",null,ot&&t.createElement(t.Fragment,null,t.createElement(M.J,{name:ot}),"\xA0"),et),t.createElement("div",null,Pe?t.createElement(P.$,null):t.createElement(i.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:ae,annotation:Pe,datasourceInstanceSettings:Ue}=this.props,{response:et}=this.state;let ot=ae.annotations?.QueryEditor||ae.components?.QueryEditor;if(!ot)return t.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const ft=Pe.target??{refId:"Anno"};return t.createElement(t.Fragment,null,t.createElement(At.n,{instanceSettings:Ue},t.createElement(ot,{key:ae?.name,query:ft,datasource:ae,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:et?.panelData,range:(0,Zt.$t)().timeRange(),annotation:Pe,onAnnotationChange:this.onAnnotationChange})),(0,rn.$w)(ae)&&t.createElement(t.Fragment,null,this.renderStatus(),t.createElement(Yn,{response:et,mappings:Pe.mappings,change:this.onMappingChange})))}}var _n=e(37210);class va extends t.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(ae){ae.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const ae=(0,_n.w)(),Pe='<plugin-component type="annotations-query-ctrl"> </plugin-component>',Ue={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=ae.load(this.ref,Ue,Pe),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(Ue.ctrl.ignoreNextWatcherFiring){Ue.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(Ue.ctrl.currentAnnotation)}),this.scopeProps=Ue}render(){return t.createElement("div",{ref:ae=>this.ref=ae})}}const Fa="New annotation",Ea=({editIdx:Z,dashboard:ae})=>{const[Pe,Ue]=(0,t.useState)(ae.annotations.list[Z]),{value:et}=(0,h.Z)(()=>(0,ta.F)().get(Pe.datasource),[Pe.datasource]),ot=(0,ta.F)().getInstanceSettings(Pe.datasource),ft=Pn=>{const jn=[...ae.annotations.list];jn.splice(Z,1,Pn),Ue(Pn),ae.annotations.list=jn},xt=Pn=>{ft({...Pe,name:Pn.currentTarget.value})},St=Pn=>{ft({...Pe,datasource:(0,Kn.iU)(Pn)})},Bt=Pn=>{const jn=Pn.currentTarget;ft({...Pe,[jn.name]:jn.type==="checkbox"?jn.checked:jn.value})},Ht=Pn=>{ft({...Pe,iconColor:Pn})},qt=Ma,nn=()=>{s.E1.partial({editview:null,editIndex:null})},Mn=()=>{const Pn=ae.annotations.list;ae.annotations.list=[...Pn.slice(0,Z),...Pn.slice(Z+1)],Ma()},Rn=Pe.name===Fa;return t.createElement("div",null,t.createElement(oa.C,null,t.createElement(Ee.g,{label:"Name"},t.createElement(ha.I,{"aria-label":fe.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:Rn,value:Pe.name,onChange:xt,width:50})),t.createElement(Ee.g,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(La.q,{width:50,annotations:!0,variables:!0,current:Pe.datasource,onChange:St})),t.createElement(Ee.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},t.createElement(ia.X,{name:"enable",id:"enable",value:Pe.enable,onChange:Bt})),t.createElement(Ee.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},t.createElement(ia.X,{name:"hide",id:"hide",value:Pe.hide,onChange:Bt})),t.createElement(Ee.g,{label:"Color",description:"Color to use for the annotation event markers"},t.createElement(E.Lh,null,t.createElement(Rt.B,{value:Pe?.iconColor,onChange:Ht}))),t.createElement("h3",{className:"page-heading"},"Query"),et?.annotations&&ot&&t.createElement(Vn,{datasource:et,datasourceInstanceSettings:ot,annotation:Pe,onChange:ft}),et&&!et.annotations&&t.createElement(va,{datasource:et,annotation:Pe,onChange:ft})),t.createElement(ve.Stack,null,!Pe.builtIn&&t.createElement(i.zx,{variant:"destructive",onClick:Mn},"Delete"),t.createElement(i.zx,{variant:"secondary",onClick:nn},"Preview in dashboard"),t.createElement(i.zx,{variant:"primary",onClick:qt},"Apply")))};Ea.displayName="AnnotationSettingsEdit";function Ma(){s.E1.partial({editIndex:null})}var Za=e(76553),ca=e(20428);const Ja=({children:Z,...ae})=>{const Pe=(0,v.wW)(qa);return t.createElement("div",{className:Pe.buttonWrapper},t.createElement(i.zx,{icon:"plus",variant:"secondary",...ae},Z))},qa=Z=>({buttonWrapper:y.css`
    padding: ${Z.spacing(3)} 0;
  `}),Va=({dashboard:Z,onNew:ae,onEdit:Pe})=>{const[Ue,et]=(0,t.useState)(Z.annotations.list),ot=(Ht,qt)=>{Z.annotations.list=Za.moveItemImmutably(Ue,Ht,Ht+qt),et(Z.annotations.list)},ft=Ht=>{Z.annotations.list=[...Ue.slice(0,Ht),...Ue.slice(Ht+1)],et(Z.annotations.list)},xt=Ue.length===0||Ue.length===1&&Ue[0].builtIn,St=Ht=>Ht.enable===!1?t.createElement(t.Fragment,null,t.createElement(M.J,{name:"times"})," \xA0",t.createElement("em",{className:"muted"},"(Disabled) \xA0 ",Ht.name)):Ht.builtIn?t.createElement(t.Fragment,null,t.createElement(M.J,{name:"comment-alt"})," \xA0",t.createElement("em",{className:"muted"},Ht.name," (Built-in)")):t.createElement(t.Fragment,null,t.createElement(M.J,{name:"comment-alt"})," \xA0",Ht.name),Bt=(0,ta.F)();return t.createElement(E.wc,null,Ue.length>0&&t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Query name"),t.createElement("th",null,"Data source"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Z.annotations.list.map((Ht,qt)=>t.createElement("tr",{key:`${Ht.name}-${qt}`},Ht.builtIn?t.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>Pe(qt)},St(Ht)):t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Pe(qt)},St(Ht)),t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Pe(qt)},Bt.getInstanceSettings(Ht.datasource)?.name||Ht.datasource?.uid),t.createElement("td",{role:"gridcell",style:{width:"1%"}},qt!==0&&t.createElement(S.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>ot(qt,-1)})),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Z.annotations.list.length>1&&qt!==Z.annotations.list.length-1?t.createElement(S.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>ot(qt,1)}):null),t.createElement("td",{role:"gridcell",style:{width:"1%"}},!Ht.builtIn&&t.createElement(ca.m,{size:"sm",onConfirm:()=>ft(qt),"aria-label":`Delete query with title "${Ht.name}"`})))))),xt&&t.createElement(Te.Z,{onClick:ae,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!xt&&t.createElement(Ja,{onClick:ae},"New query"))};function Xa({dashboard:Z,editIndex:ae,sectionNav:Pe}){const Ue=()=>{const ft={name:Fa,enable:!0,datasource:(0,Kn.iU)((0,ta.F)().getInstanceSettings(null)),iconColor:"red"};Z.annotations.list=[...Z.annotations.list,{...ft}],s.E1.partial({editIndex:Z.annotations.list.length-1})},et=ft=>{s.E1.partial({editIndex:ft})},ot=ae!=null&&ae<Z.annotations.list.length;return t.createElement(o.T,{navModel:Pe,pageNav:fs(Z,ae)},!ot&&t.createElement(Va,{dashboard:Z,onNew:Ue,onEdit:et}),ot&&t.createElement(Ea,{dashboard:Z,editIdx:ae}))}function fs(Z,ae){if(ae==null)return;const Pe=Z.annotations.list[ae];if(Pe)return{text:Pe.name}}var ls=e(93003),cs=e(64407),gs=e(79658),ya=e(88561),za=e(53787),Pa=e(671),Jn=e(60499),ps=e(50946);const Ha=(Z,ae)=>{const[Pe,Ue]=(0,Pa.Z)(()=>(0,ps.iM)(Z,!1),[]),et=(0,Jn.iG)();return(0,t.useEffect)(()=>{Pe.value&&(ae(),s.E1.replace("/"),et.success("Dashboard Deleted",`${Pe.value.title} has been deleted`))},[Pe,et,ae]),{state:Pe,onDeleteDashboard:Ue}},fa={cleanUpDashboardAndVariables:Bn.lw},Bs=(0,g.connect)(null,fa),Ca=({hideModal:Z,cleanUpDashboardAndVariables:ae,dashboard:Pe})=>{const Ue=Pe.meta.provisioned,{onDeleteDashboard:et}=Ha(Pe.uid,ae),[,ot]=(0,za.default)(async()=>{await et(),Z()},[Z]),ft=Sa(Pe.panels,Pe.title);return Ue?t.createElement(is,{hideModal:Z,provisionedId:Pe.meta.provisionedExternalId}):t.createElement(ue.s,{isOpen:!0,body:ft,onConfirm:ot,onDismiss:Z,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},Sa=(Z,ae)=>{const Pe=(0,We.sumBy)(Z,Ue=>Ue.alert?1:0);return Pe>0&&!l.vc.unifiedAlertingEnabled?t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,"This dashboard contains ",Pe," alert",Pe>1?"s":"",". Deleting this dashboard also deletes those alerts.")):t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,ae))},is=({hideModal:Z,provisionedId:ae})=>t.createElement(D.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:Z,className:y.css`
      width: 500px;
    `},t.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),t.createElement("p",null,t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null),"File path: ",ae),t.createElement(D.u.ButtonRow,null,t.createElement(i.zx,{variant:"primary",onClick:Z},"OK"))),An=Bs(Ca),ds=({dashboard:Z})=>t.createElement(ya.JY,null,({showModal:ae,hideModal:Pe})=>t.createElement(i.zx,{variant:"destructive",onClick:()=>{ae(An,{dashboard:Z,hideModal:Pe})},"aria-label":"Dashboard settings page delete dashboard button"},"Delete Dashboard"));var ws=e(81524),ks=e(29930),Ns=e(43993);class rr extends t.PureComponent{constructor(){super(...arguments),this.state={},this.doUpload=(ae,Pe)=>{const Ue=ae?.files&&ae.files[0];if(!Ue){console.log("NOPE!",ae);return}const et=(0,Ns.A)(this.props.uid,Pe),ot=new FormData;ot.append("file",Ue),fetch(et,{method:"POST",body:ot}).then(ft=>ft.json()).then(ft=>{console.log("Success:",ft),location.reload()}).catch(ft=>{console.error("Error:",ft)})},this.markAsStale=ae=>async()=>(0,ks.i)().put((0,Ns.A)(this.props.uid,ae),{state:"stale"})}render(){const{uid:ae}=this.props,Pe={maxWidth:300,maxHeight:300};return t.createElement(C.s,{label:"Preview settings",isOpen:!0},t.createElement("div",null,"DUMMY UI just so we have an upload button!"),t.createElement("table",{cellSpacing:"4"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("td",null,"[DARK]"),t.createElement("td",null,"[LIGHT]"))),t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,t.createElement(i.zx,{type:"button",variant:"primary",onClick:this.markAsStale(!1),fill:"outline"},"Mark as stale")),t.createElement("td",null,t.createElement(i.zx,{type:"button",variant:"primary",onClick:this.markAsStale(!0),fill:"outline"},"Mark as stale"))),t.createElement("tr",null,t.createElement("td",null,t.createElement("img",{src:(0,Ns.A)(ae,!1),alt:"Preview of dashboard in dark theme",style:Pe})),t.createElement("td",null,t.createElement("img",{src:(0,Ns.A)(ae,!0),alt:"Preview of dashboard in light theme",style:Pe}))),t.createElement("tr",null,t.createElement("td",null,t.createElement(ws.p,{accept:"image/png, image/webp",onFileUpload:({currentTarget:Ue})=>this.doUpload(Ue,!1)},"Upload dark")),t.createElement("td",null,t.createElement(ws.p,{accept:"image/png, image/webp",onFileUpload:({currentTarget:Ue})=>this.doUpload(Ue,!0)},"Upload light"))))))}}var or=e(42557);const Gs=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function Wt({dashboard:Z,updateTimeZone:ae,updateWeekStart:Pe,sectionNav:Ue}){const[et,ot]=(0,t.useState)(0),ft=Fn=>{Z.meta.folderUid=Fn.uid,Z.meta.folderTitle=Fn.title,Z.meta.hasUnsavedFolderChange=!0},xt=Fn=>{(Fn.currentTarget.name==="title"||Fn.currentTarget.name==="description")&&(Z[Fn.currentTarget.name]=Fn.currentTarget.value)},St=Fn=>{Z.graphTooltip=Fn,ot(et+1)},Bt=Fn=>{Z.timepicker.refresh_intervals=Fn.filter(hs=>hs.trim()!=="")},Ht=Fn=>{Z.timepicker.nowDelay=Fn},qt=Fn=>{Z.timepicker.hidden=Fn,ot(et+1)},nn=Fn=>{Z.liveNow=Fn,ot(et+1)},Mn=Fn=>{Z.timezone=Fn,ot(et+1),ae(Fn)},Rn=Fn=>{Z.weekStart=Fn,ot(et+1),Pe(Fn)},Pn=Fn=>{Z.tags=Fn,ot(et+1)},jn=Fn=>{Z.editable=Fn,ot(et+1)},On=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return t.createElement(o.T,{navModel:Ue},t.createElement("div",{style:{maxWidth:"600px"}},t.createElement("div",{className:"gf-form-group"},t.createElement(Ee.g,{label:"Name"},t.createElement(ha.I,{id:"title-input",name:"title",onBlur:xt,defaultValue:Z.title})),t.createElement(Ee.g,{label:"Description"},t.createElement(ha.I,{id:"description-input",name:"description",onBlur:xt,defaultValue:Z.description})),t.createElement(Ee.g,{label:"Tags"},t.createElement(cs.B,{id:"tags-input",tags:Z.tags,onChange:Pn,width:40})),t.createElement(Ee.g,{label:"Folder"},t.createElement(gs.Es,{inputId:"dashboard-folder-input",initialTitle:Z.meta.folderTitle,initialFolderUid:Z.meta.folderUid,onChange:ft,enableCreateNew:!0,dashboardId:Z.id,skipInitialLoad:!0})),t.createElement(Ee.g,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect"},t.createElement(J.S,{value:Z.editable,options:On,onChange:jn}))),ls.v.featureToggles.dashboardPreviews&&ls.v.featureToggles.dashboardPreviewsAdmin&&t.createElement(rr,{uid:Z.uid}),t.createElement(or.P,{onTimeZoneChange:Mn,onWeekStartChange:Rn,onRefreshIntervalChange:Bt,onNowDelayChange:Ht,onHideTimePickerChange:qt,onLiveNowChange:nn,refreshIntervals:Z.timepicker.refresh_intervals,timePickerHidden:Z.timepicker.hidden,nowDelay:Z.timepicker.nowDelay,timezone:Z.timezone,weekStart:Z.weekStart,liveNow:Z.liveNow}),t.createElement(C.s,{label:"Panel options",isOpen:!0},t.createElement(Ee.g,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect"},t.createElement(J.S,{onChange:St,options:Gs,value:Z.graphTooltip}))),t.createElement("div",{className:"gf-form-button-row"},Z.meta.canDelete&&t.createElement(ds,{dashboard:Z}))))}const Zs={updateTimeZone:Bn.tM,updateWeekStart:Bn.f4},Xs=(0,g.connect)(null,Zs)(Wt);var sa=e(57172),es=e(30992);function ts({dashboard:Z,sectionNav:ae}){const[Pe,Ue]=(0,t.useState)(JSON.stringify(Z.getSaveModelClone(),null,2)),et=async()=>{await(0,kt.h4)().saveJSONDashboard(Pe),es.H.reloadPage()},ot=(0,v.wW)(ns),ft="The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on";return t.createElement(o.T,{navModel:ae,subTitle:ft},t.createElement("div",{className:ot.wrapper},t.createElement(sa.p,{value:Pe,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:Ue,containerStyles:ot.codeEditor}),Z.meta.canSave&&t.createElement("div",null,t.createElement(i.zx,{type:"submit",onClick:et},"Save changes"))))}const ns=Z=>({wrapper:(0,y.css)({display:"flex",height:"100%",flexDirection:"column",gap:Z.spacing(2)}),codeEditor:(0,y.css)({flexGrow:1})});var qn=e(18428),Ws=e(36012);const xa=({dashboard:Z,onNew:ae,onEdit:Pe})=>{const[Ue,et]=(0,t.useState)(Z.links),ot=(Bt,Ht)=>{Z.links=Za.moveItemImmutably(Ue,Bt,Bt+Ht),et(Z.links)},ft=(Bt,Ht)=>{Z.links=[...Ue,{...Bt}],et(Z.links)},xt=Bt=>{Z.links=[...Ue.slice(0,Bt),...Ue.slice(Bt+1)],et(Z.links)};return Z.links.length===0?t.createElement("div",null,t.createElement(Te.Z,{onClick:ae,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):t.createElement(t.Fragment,null,t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Type"),t.createElement("th",null,"Info"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Ue.map((Bt,Ht)=>t.createElement("tr",{key:`${Bt.title}-${Ht}`},t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>Pe(Ht)},t.createElement(M.J,{name:"external-link-alt"})," \xA0 ",Bt.type),t.createElement("td",{role:"gridcell"},t.createElement(E.Lh,null,Bt.title&&t.createElement("span",null,Bt.title),Bt.type==="link"&&t.createElement("span",null,Bt.url),Bt.type==="dashboards"&&t.createElement(Ws.P,{tags:Bt.tags??[]}))),t.createElement("td",{style:{width:"1%"},role:"gridcell"},Ht!==0&&t.createElement(S.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>ot(Ht,-1)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},Ue.length>1&&Ht!==Ue.length-1?t.createElement(S.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>ot(Ht,1)}):null),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(S.h,{"aria-label":"copy",name:"copy",onClick:()=>ft(Bt,Ht)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(ca.m,{"aria-label":`Delete link with title "${Bt.title}"`,size:"sm",onConfirm:()=>xt(Ht)})))))),t.createElement(Ja,{onClick:ae},"New link"))};function ka({dashboard:Z,sectionNav:ae,editIndex:Pe}){const[Ue,et]=(0,t.useState)(!1),ot=()=>{et(!1),s.E1.partial({editIndex:void 0})},ft=()=>{Z.links=[...Z.links,{...qn.zA}],et(!0),s.E1.partial({editIndex:Z.links.length-1})},xt=Ht=>{et(!1),s.E1.partial({editIndex:Ht})},St=Pe!==void 0;let Bt;return St&&(Bt={text:Ue?"New link":"Edit link",subTitle:Ue?"Create a new link on your dashboard":"Edit a specific link of your dashboard"}),t.createElement(o.T,{navModel:ae,pageNav:Bt},!St&&t.createElement(xa,{dashboard:Z,onNew:ft,onEdit:xt}),St&&t.createElement(qn.fD,{dashboard:Z,editLinkIdx:Pe,onGoBack:ot}))}var zn=e(99714);const Tt=10;class Is extends t.PureComponent{constructor(ae){super(ae),this.getVersions=(Pe=!1)=>{this.setState({isAppending:Pe}),zn.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then(Ue=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(Ue)]}),this.start+=this.limit}).catch(Ue=>console.log(Ue)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const Pe=this.state.versions.filter(St=>St.checked),[Ue,et]=Pe,ot=Ue.version===this.props.dashboard.version;this.setState({isLoading:!0});const ft=await zn.K8.getDashboardVersion(this.props.dashboard.uid,et.version),xt=await zn.K8.getDashboardVersion(this.props.dashboard.uid,Ue.version);this.setState({baseInfo:et,isLoading:!1,isNewLatest:ot,newInfo:Ue,viewMode:"compare",diffData:{lhs:ft.data,rhs:xt.data}})},this.decorateVersions=Pe=>Pe.map(Ue=>({...Ue,createdDateString:this.props.dashboard.formatDate(Ue.created),ageString:this.props.dashboard.getRelativeTime(Ue.created),checked:!1})),this.onCheck=(Pe,Ue)=>{this.setState({versions:this.state.versions.map(et=>et.id===Ue?{...et,checked:Pe.currentTarget.checked}:et)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(Pe=>({...Pe,checked:!1})),viewMode:"list"})},this.limit=Tt,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(ae=>ae.version===1)}render(){const{versions:ae,viewMode:Pe,baseInfo:Ue,newInfo:et,isNewLatest:ot,isLoading:ft,diffData:xt}=this.state,St=ae.filter(qt=>qt.checked).length===2,Bt=ae.length>1,Ht=ae.length>=this.limit;return Pe==="compare"?t.createElement(o.T,{navModel:this.props.sectionNav},t.createElement(zn.Cs,{onClick:this.reset,baseVersion:Ue?.version,newVersion:et?.version,isNewLatest:ot}),ft?t.createElement(_s,{msg:"Fetching changes\u2026"}):t.createElement(zn.U$,{newInfo:et,baseInfo:Ue,isNewLatest:ot,diffData:xt})):t.createElement(o.T,{navModel:this.props.sectionNav},ft?t.createElement(_s,{msg:"Fetching history list\u2026"}):t.createElement(zn.Sd,{versions:ae,onCheck:this.onCheck,canCompare:St}),this.state.isAppending&&t.createElement(_s,{msg:"Fetching more entries\u2026"}),Bt&&t.createElement(zn.R1,{hasMore:Ht,canCompare:St,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const _s=({msg:Z})=>t.createElement(E.Lh,null,t.createElement(P.$,null),t.createElement("em",null,Z)),qs=()=>s.E1.partial({editview:null,editIndex:null});function Ys({dashboard:Z,editview:ae,pageNav:Pe,sectionNav:Ue}){const[et,ot]=(0,t.useState)(0);(0,t.useEffect)(()=>{Z.events.subscribe(c.hS,()=>ot(On=>On+1))},[Z]);const ft=(0,t.useMemo)(()=>Ms(Z),[Z,et]),xt=()=>{Z.meta.hasUnsavedFolderChange=!1},St=Z.meta.folderTitle,Bt=ft.find(On=>On.id===ae)??ft[0],Ht=r.Vt.hasEditPermissionInFolders,qt=Z.meta.canSave,nn=(0,n.TH)(),Mn=er(nn),Rn=ir(Pe,Ue,ft,Bt,nn),Pn=l.ZP.featureToggles.topnav?"sm":"md",jn=[l.ZP.featureToggles.topnav&&t.createElement(i.zx,{variant:"secondary",key:"close",fill:"outline",size:Pn,onClick:qs},"Close"),Ht&&t.createElement(hn.t,{dashboard:Z,onSaveSuccess:xt,variant:"secondary",key:"save as",size:Pn}),qt&&t.createElement(hn.i,{dashboard:Z,onSaveSuccess:xt,key:"Save",size:Pn})];return t.createElement(t.Fragment,null,l.ZP.featureToggles.topnav?t.createElement(f.A,{actions:jn}):t.createElement(m.X,{title:`${Z.title} / Settings`,parent:St,onGoBack:qs},jn),t.createElement(Bt.component,{sectionNav:Rn,dashboard:Z,editIndex:Mn}))}function Ms(Z){const ae=[];return Z.meta.canEdit&&(ae.push({title:"General",id:"settings",icon:"sliders-v-alt",component:Xs}),ae.push({title:"Annotations",id:"annotations",icon:"comment-alt",component:Xa,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),ae.push({title:"Variables",id:"templating",icon:"calculator-alt",component:Ot,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),ae.push({title:"Links",id:"links",icon:"link",component:ka})),Z.meta.canMakeEditable&&ae.push({title:"General",icon:"sliders-v-alt",id:"settings",component:Pr}),Z.id&&Z.meta.canSave&&ae.push({title:"Versions",id:"versions",icon:"history",component:Is}),Z.id&&Z.meta.canAdmin&&(l.ZP.rbacEnabled?r.Vt.hasPermission(d.AccessControlAction.DashboardsPermissionsRead)&&ae.push({title:"Permissions",id:"permissions",icon:"lock",component:En}):ae.push({title:"Permissions",id:"permissions",icon:"lock",component:ba})),ae.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",component:ts}),ae}function ir(Z,ae,Pe,Ue,et){const ot={text:"Settings",children:[],icon:"apps",hideFromBreadcrumbs:!0};return ot.children=Pe.map(ft=>({text:ft.title,icon:ft.icon,id:ft.id,url:u.u.getUrlForPartial(et,{editview:ft.id,editIndex:null}),active:ft===Ue,parentItem:ot,subTitle:ft.subTitle})),Z.parentItem?Z={...Z,parentItem:{...Z.parentItem,parentItem:ae.node}}:Z={...Z,parentItem:ae.node},ot.parentItem=Z,{main:ot,node:ot.children.find(ft=>ft.active)}}function Pr({dashboard:Z,sectionNav:ae}){return t.createElement(o.T,{navModel:ae},t.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),t.createElement(i.zx,{type:"submit",onClick:()=>Z.makeEditable()},"Make editable"))}function er(Z){const ae=new URLSearchParams(Z.search).get("editIndex");if(ae!=null)return parseInt(ae,10)}},18428:(G,O,e)=>{"use strict";e.d(O,{fD:()=>g,xy:()=>d,zA:()=>l});var t=e(68404),n=e(74955),u=e(25474),s=e(46739),i=e(64407),m=e(53535),f=e(94338),o=e(90723);const l={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},r=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],d={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},c=Object.keys(d).map(p=>({label:p,value:p})),g=({editLinkIdx:p,dashboard:y,onGoBack:h})=>{const[a,v]=(0,t.useState)(p!==null?y.links[p]:l),C=D=>{const T=[...y.links];T.splice(p,1,D),y.links=T,v(D)},E=D=>{C({...a,tags:D})},P=D=>{const T={...a,type:D.value};T.type==="dashboards"?(T.url="",T.tooltip=""):T.tags=[],C(T)},x=D=>{C({...a,icon:D.value})},M=D=>{const T=D.currentTarget;C({...a,[T.name]:T.type==="checkbox"?T.checked:T.value})},S=a.title===l.title;return t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(n.g,{label:"Title"},t.createElement(u.I,{name:"title",id:"title",value:a.title,onChange:M,autoFocus:S})),t.createElement(n.g,{label:"Type"},t.createElement(s.Ph,{inputId:"link-type-input",value:a.type,options:r,onChange:P})),a.type==="dashboards"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"With tags"},t.createElement(i.B,{tags:a.tags,onChange:E}))),a.type==="link"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"URL"},t.createElement(u.I,{name:"url",value:a.url,onChange:M})),t.createElement(n.g,{label:"Tooltip"},t.createElement(u.I,{name:"tooltip",value:a.tooltip,onChange:M,placeholder:"Open dashboard"})),t.createElement(n.g,{label:"Icon"},t.createElement(s.Ph,{value:a.icon,options:c,onChange:x}))),t.createElement(m.s,{label:"Options",isOpen:!0},a.type==="dashboards"&&t.createElement(n.g,null,t.createElement(f.X,{label:"Show as dropdown",name:"asDropdown",value:a.asDropdown,onChange:M})),t.createElement(n.g,null,t.createElement(f.X,{label:"Include current time range",name:"keepTime",value:a.keepTime,onChange:M})),t.createElement(n.g,null,t.createElement(f.X,{label:"Include current template variable values",name:"includeVars",value:a.includeVars,onChange:M})),t.createElement(n.g,null,t.createElement(f.X,{label:"Open link in new tab",name:"targetBlank",value:a.targetBlank,onChange:M}))),t.createElement(o.zx,{onClick:h},"Apply"))}},91183:(G,O,e)=>{"use strict";e.d(O,{u:()=>d});var t=e(52423),n=e(68404),u=e(24664),s=e(68183),i=e(29516),m=e(24123),f=e(90723),o=e(96044),l=e(36281);const r="showCategory",d=n.memo(({id:p,title:y,children:h,forceOpen:a,isOpenDefault:v,renderTitle:C,className:E,itemsCount:P,isNested:x=!1})=>{const M=v!==!1,[S,D]=(0,u.Z)(g(p),{isExpanded:M}),T=(0,i.wW)(c),[R,L]=(0,o.K)(),[w,A]=(0,n.useState)(S?.isExpanded??M),N=(0,n.useRef)(0),W=(0,n.useRef)(null),I=R[r]===p;(0,n.useEffect)(()=>{N.current&&Date.now()-N.current<200||(I||a)&&(w||A(!0),I&&W.current?.scrollIntoView())},[a,w,I]);const F=(0,n.useCallback)(()=>{N.current=Date.now(),L({[r]:w?void 0:p},!0),D({isExpanded:!w}),A(!w)},[D,A,L,w,p]);C||(C=function(H){return H||P===void 0||P===0?y:n.createElement("span",null,y," ",n.createElement(m.A,{value:P}))});const V=(0,t.cx)({[T.box]:!0,[T.boxNestedExpanded]:x&&w},E,"options-group"),b=(0,t.cx)(T.header,{[T.headerExpanded]:w,[T.headerNested]:x}),X=(0,t.cx)(T.body,{[T.bodyNested]:x});return n.createElement("div",{className:V,"data-testid":"options-category","aria-label":s.wl.components.OptionsGroup.group(p),ref:W},n.createElement("div",{className:b,onClick:F,"aria-label":s.wl.components.OptionsGroup.toggle(p)},n.createElement(f.zx,{type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":w,className:T.toggleButton,icon:w?"angle-down":"angle-right",onClick:F}),n.createElement("h6",{id:`button-${p}`,className:T.title},C(w))),w&&n.createElement("div",{className:X,id:p,"aria-labelledby":`button-${p}`},h))});d.displayName="OptionsPaneCategory";const c=p=>({box:t.css`
      border-top: 1px solid ${p.colors.border.weak};
    `,boxNestedExpanded:t.css`
      margin-bottom: ${p.spacing(2)};
    `,title:t.css`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${p.typography.fontWeightMedium};
      margin: 0;
    `,header:t.css`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${p.spacing(.5)};
      color: ${p.colors.text.primary};
      font-weight: ${p.typography.fontWeightMedium};

      &:hover {
        background: ${p.colors.emphasize(p.colors.background.primary,.03)};
      }
    `,toggleButton:t.css`
      align-self: baseline;
    `,headerExpanded:t.css`
      color: ${p.colors.text.primary};
    `,headerNested:t.css`
      padding: ${p.spacing(.5,0,.5,0)};
    `,body:t.css`
      padding: ${p.spacing(1,2,1,4)};
    `,bodyNested:t.css`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${p.colors.border.weak};
      }
    `}),g=p=>`${l.jy}.optionGroup[${p}]`},91752:(G,O,e)=>{"use strict";e.d(O,{j:()=>u});var t=e(68404),n=e(91183);class u{constructor(i){this.props=i,this.items=[],this.categories=[]}addItem(i){return i.parent=this,this.items.push(i),this}addCategory(i){return i.props.isNested=!0,i.parent=this,this.categories.push(i),this}getCategory(i){let m=this.categories.find(f=>f.props.id===i);return m||(m=new u({title:i,id:i}),this.addCategory(m),m)}render(i){return this.props.customRender?this.props.customRender():t.createElement(n.u,{key:this.props.title,...this.props},this.items.map(m=>m.render(i)),this.categories.map(m=>m.render(i)))}}},66352:(G,O,e)=>{"use strict";e.d(O,{a:()=>c});var t=e(68404),n=e(47846),u=e.n(n),s=e(68183),i=e(38835),m=e(74955),f=e(52423),o=e(29516),l=e(48756);function r({overrides:g}){const p=(0,o.wW)(d);return t.createElement("div",{className:p.wrapper},g.map((y,h)=>t.createElement(l.u,{content:y.tooltip,key:h.toString(),placement:"top"},t.createElement("div",{"aria-label":y.description,className:p[y.type]}))))}const d=g=>{const p={width:8,height:8,borderRadius:"50%",marginLeft:g.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,f.css)({display:"flex"}),rule:(0,f.css)({...p,backgroundColor:g.colors.primary.main}),data:(0,f.css)({...p,backgroundColor:g.colors.warning.main})}};class c{constructor(p){this.props=p}getLabel(p){const{title:y,description:h,overrides:a}=this.props;if(!p)return this.parent.props.title===y&&!a?.length?null:t.createElement(i._,{description:h},y,a&&a.length>0&&t.createElement(r,{overrides:a}));const v=[];return this.parent.parent&&v.push(this.highlightWord(this.parent.parent.props.title,p)),this.parent.props.title!==y&&v.push(this.highlightWord(this.parent.props.title,p)),t.createElement(i._,{description:h&&this.highlightWord(h,p),category:v},this.highlightWord(y,p),a&&a.length>0&&t.createElement(r,{overrides:a}))}highlightWord(p,y){return t.createElement(u(),{textToHighlight:p,searchWords:[y],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:p}=this.props;!p||p.length}render(p){const{title:y,description:h,render:a,showIf:v,skipField:C}=this.props,E=`${this.parent.props.id} ${y}`;return v&&!v()?null:C?a():t.createElement(m.g,{label:this.getLabel(p),description:h,key:E,"aria-label":s.wl.components.PanelEditor.OptionsPane.fieldLabel(E)},a())}}},57054:(G,O,e)=>{"use strict";e.d(O,{HZ:()=>g,AL:()=>c});var t=e(82897),n=e(68404),u=e(91171),s=e(64703),i=e(91752),m=e(66352);const f="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",o="An override rule exists for this property";function l(p,y,h){const a=[];if(h){for(const C of h)for(const E of C.fields)if((0,t.get)(E.config,p.path)!=null){a.push({type:"data",description:f,tooltip:f});break}}return y.overrides.some(C=>C.properties.some(E=>E.id===p.id))&&a.push({type:"rule",description:o,tooltip:o}),a}var r=e(13505);function d({data:p,replaceVariables:y,options:h,eventBus:a,instanceState:v}){const C=p?.series??[];return{data:C,replaceVariables:y,options:h,eventBus:a,getSuggestions:P=>(0,s.PW)(C,P),instanceState:v}}function c(p){const{plugin:y,panel:h,onPanelOptionsChanged:a,onFieldConfigsChange:v,data:C,dashboard:E,instanceState:P}=p,x=h.getOptions(),M=h.fieldConfig,S={},D=d({data:C,replaceVariables:h.replaceVariables,options:x,eventBus:E.events,instanceState:P}),T=L=>{const w=(L&&L[0])??`${y.meta.name}`,A=S[w];return A||(S[w]=new i.j({title:w,id:w}))},R={getValue:L=>(0,t.get)(x,L),onChange:(L,w)=>{const A=(0,r.hs)(x,L,w);a(A)}};g(y.getPanelOptionsSupplier(),R,T,D);for(const L of y.fieldConfigRegistry.list()){if(L.isCustom&&L.showIf&&!L.showIf(M.defaults.custom,C?.series)||L.hideFromDefaults)continue;const w=T(L.category),A=L.editor,N=M.defaults,W=L.isCustom?N.custom?(0,t.get)(N.custom,L.path):void 0:(0,t.get)(N,L.path);L.getItemsCount&&(w.props.itemsCount=L.getItemsCount(W)),w.addItem(new m.a({title:L.name,description:L.description,overrides:l(L,M,C?.series),render:function(){const F=V=>{v((0,r.uJ)(M,L.path,V,L.isCustom))};return n.createElement(A,{value:W,onChange:F,item:L,context:D,id:L.id})}}))}return Object.values(S)}function g(p,y,h,a,v){const C=new u.rt;p(C,a);for(const E of C.getItems()){if(E.showIf&&!E.showIf(a.options,a.data))continue;let P=v;if(P?E.category?.[0]?.length&&(P=P.getCategory(E.category[0])):P=h(E.category),(0,u.j)(E)){const M=E.getNestedValueAccess(y),S=M.getContext?M.getContext(a):{...a,options:y.getValue(E.path)};g(E.getBuilder(),M,h,S,P);continue}const x=E.editor;P.addItem(new m.a({title:E.name,description:E.description,render:function(){return n.createElement(x,{value:y.getValue(E.path),onChange:S=>{y.onChange(E.path,S)},item:E,context:a,id:E.id})}}))}}},36281:(G,O,e)=>{"use strict";e.d(O,{Hl:()=>d,K9:()=>y,OT:()=>a,ZP:()=>C,g_:()=>h,jy:()=>f,my:()=>p,yi:()=>g});var t=e(32557),n=e(49922),u=e(69311),s=e(58379),i=e(96161),m=e(16200);const f="grafana.dashboard.editor.ui",o={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:m.d1.Fill},l=()=>{const E=s.Z.getObject(f,o);let P={...E};return typeof E.topPaneSize=="string"&&(P={...E,topPaneSize:parseFloat(E.topPaneSize)/100}),{getPanel:()=>new i.r({}),getSourcePanel:()=>new i.r({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,u.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...o,...P}}},r=(0,t.oM)({name:"panelEditor",initialState:l(),reducers:{updateEditorInitState:(E,P)=>{E.getPanel=()=>P.payload.panel,E.getSourcePanel=()=>P.payload.sourcePanel,E.initDone=!0,E.isOpen=!0,E.shouldDiscardChanges=!1},setEditorPanelData:(E,P)=>{E.getData=()=>P.payload},setDiscardChanges:(E,P)=>{E.shouldDiscardChanges=P.payload},setPanelEditorUIState:(E,P)=>{E.ui={...E.ui,...P.payload},!E.ui.isPanelOptionsVisible&&E.isVizPickerOpen&&(E.isVizPickerOpen=!1)},toggleVizPicker:(E,P)=>{E.isVizPickerOpen=P.payload,E.isVizPickerOpen&&(E.ui.isPanelOptionsVisible=!0)},toggleTableView(E){E.tableViewEnabled=!E.tableViewEnabled},closeEditor:E=>{E.getPanel=()=>new i.r({}),E.getSourcePanel=()=>new i.r({}),E.isOpen=!1,E.initDone=!1,E.isVizPickerOpen=!1,E.tableViewEnabled=!1}}}),{updateEditorInitState:d,setEditorPanelData:c,setDiscardChanges:g,closeEditor:p,setPanelEditorUIState:y,toggleVizPicker:h,toggleTableView:a}=r.actions,C={panelEditor:r.reducer}},16200:(G,O,e)=>{"use strict";e.d(O,{Ip:()=>t,Ok:()=>m,d1:()=>n,d7:()=>s});var t=(f=>(f.Query="query",f.Transform="transform",f.Visualize="visualize",f.Alert="alert",f))(t||{}),n=(f=>(f[f.Fill=0]="Fill",f[f.Fit=1]="Fit",f[f.Exact=2]="Exact",f))(n||{}),u=(f=>(f[f.Off=0]="Off",f[f.Table=1]="Table",f))(u||{});const s=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],i=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var m=(f=>(f[f.Visualizations=0]="Visualizations",f[f.LibraryPanels=1]="LibraryPanels",f[f.Suggestions=2]="Suggestions",f))(m||{})},13505:(G,O,e)=>{"use strict";e.d(O,{hs:()=>o,jF:()=>i,sY:()=>m,uJ:()=>f});var t=e(82897),n=e.n(t),u=e(84952),s=e(16200);function i(l,r,d,c){if(l===s.d1.Fill)return{width:r,height:d};const g=8*6,p=60,h=(window.innerWidth-p-u.hD*4)/u.cz*c.gridPos.w,a=u.K3*c.gridPos.h+g,v=Math.min(r/h,d/a);return h<=r&&a<=d?{width:h,height:a}:{width:h*v,height:a*v}}function m(l){return l?.meta.skipDataQuery===!1}const f=(l,r,d,c)=>{let g={...l.defaults};const p=d==null||d==="";return c?g.custom?p?g.custom=(0,t.omit)(g.custom,r):g.custom=o(g.custom,r,d):p||(g.custom=o(g.custom,r,d)):p?g=(0,t.omit)(g,r):g=o(g,r,d),{...l,defaults:g}};function o(l,r,d){const c=Array.isArray(r)?r:r.split("."),g=c.shift();if(g.endsWith("]")){const y=g.lastIndexOf("["),h=+g.substring(y+1,g.length-1),a=g.substring(0,y);let v=l[a];const C=Array.isArray(v)?[...v]:[];return c.length&&(v=C[h],(v==null||typeof v!="object")&&(v={}),d=o(v,c,d)),C[h]=d,{...l,[a]:C}}if(!c.length)return{...l,[g]:d};let p=l[g];return(p==null||typeof p!="object")&&(p={}),{...l,[g]:o(p,c,d)}}},84135:(G,O,e)=>{"use strict";e.d(O,{i:()=>m,t:()=>f});var t=e(68404),n=e(68183),u=e(88561),s=e(90723),i=e(7196);const m=({dashboard:o,onSaveSuccess:l,size:r})=>t.createElement(u.JY,null,({showModal:d,hideModal:c})=>t.createElement(s.zx,{size:r,onClick:()=>{d(i.d,{dashboard:o,onSaveSuccess:l,onDismiss:c})},"aria-label":n.wl.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),f=({dashboard:o,onSaveSuccess:l,variant:r,size:d})=>t.createElement(u.JY,null,({showModal:c,hideModal:g})=>t.createElement(s.zx,{size:d,onClick:()=>{c(i.d,{dashboard:o,onSaveSuccess:l,onDismiss:g,isCopy:!0})},variant:r,"aria-label":n.wl.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},7196:(G,O,e)=>{"use strict";e.d(O,{d:()=>qe});var t=e(68404),n=e(22350),u=e(93003),s=e(47214),i=e(40008),m=e(55461),f=e(26625),o=e(17353),l=e(29930),r=e(15092),d=e(52423),c=e(29516),g=e(2323);function p({dashboard:Xe}){const at=(0,c.wW)(y),{loading:Ze,value:lt,error:nt}=(0,n.Z)(async()=>{const ut=Xe.getSaveModelClone();return l.ae.validateDashboard(ut).catch(je=>{if(je.status>=500)throw je;return je.data})},[Xe]);let _e;if(Ze)_e=t.createElement(g.b,{severity:"info",title:"Checking dashboard validity"});else if(lt)lt.isValid||(_e=t.createElement(g.b,{severity:"warning",title:"Dashboard failed schema validation"},t.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),t.createElement("div",{className:at.error},lt.message)));else{const ut=nt?.message??"Unknown error";_e=t.createElement(g.b,{severity:"info",title:"Error checking dashboard validity"},t.createElement("p",{className:at.error},ut))}return _e?t.createElement("div",{className:at.root},_e):null}const y=Xe=>({root:(0,d.css)({marginTop:Xe.spacing(1)}),error:(0,d.css)({fontFamily:Xe.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),h=p;var a=e(64687),v=e(61017);const C=({diff:Xe,oldValue:at,newValue:Ze})=>{const lt=(0,c.wW)(E),nt=(0,n.Z)(async()=>{const ut=JSON.stringify(at??{},null,2),rt=JSON.stringify(Ze??{},null,2);let je;const dt=[];let oe=0;if(Xe)for(const[Se,Re]of Object.entries(Xe)){const ze=t.createElement(a.B,{diffs:Re,key:Se,title:Se});Se==="schemaVersion"?je=ze:dt.push(ze),oe+=Re.length}return{schemaChange:je,diffs:dt,count:oe,showDiffs:oe<15,jsonView:t.createElement(v.Z,{oldValue:ut,newValue:rt})}},[Xe,at,Ze]),{value:_e}=nt;return!_e||!at?t.createElement(i.$,null):_e.count<1?t.createElement("div",null,"No changes in this dashboard"):t.createElement("div",null,_e.schemaChange&&t.createElement("div",{className:lt.spacer},_e.schemaChange),_e.showDiffs&&t.createElement("div",{className:lt.spacer},_e.diffs),t.createElement("h4",null,"JSON Model"),_e.jsonView)},E=Xe=>({spacer:d.css`
    margin-bottom: ${Xe.v1.spacing.xl};
  `});var P=e(81202),x=e(6694),M=e(90723),S=e(84135),D=e(53787),T=e(83383),R=e(77274),L=e(57388),w=e(97063),A=e(60499),N=e(77582),W=e(61962),I=e(50946),F=e(81168),V=e(45984);const b=async(Xe,at,Ze)=>{let lt=at.folderUid;lt===void 0&&(lt=Ze.meta.folderUid??Xe.folderUid);const nt=await(0,I.uC)({...at,folderUid:lt,dashboard:Xe});return await N.Vt.fetchUserPermissions(),nt},X=Xe=>{const[at,Ze]=(0,D.default)(async(_e,ut,rt)=>await b(_e,ut,rt),[]),lt=(0,F.useDispatch)(),nt=(0,A.iG)();return(0,t.useEffect)(()=>{if(at.error&&!at.loading&&nt.error(at.error.message??"Error saving dashboard"),at.value){Xe.version=at.value.version,Xe.clearUnsavedChanges(),w.Z.publish(new V.Jd),nt.success("Dashboard saved"),(0,R.ff)(`grafana_dashboard_${Xe.id?"saved":"created"}`,{name:Xe.title,url:at.value.url});const _e=L.E1.getLocation().pathname,ut=T.u.stripBaseFromUrl(at.value.url);ut!==_e&&setTimeout(()=>L.E1.replace(ut)),Xe.meta.isStarred&&lt((0,W.gd)({id:Xe.uid,title:Xe.title,url:ut}))}},[Xe,at,nt,lt]),{state:at,onDashboardSave:Ze}},k=({dashboard:Xe,dashboardSaveModel:at,error:Ze,onDismiss:lt})=>{const{onDashboardSave:nt}=X(Xe);return(0,t.useEffect)(()=>{Ze.data&&Y(Ze.data.status)&&(Ze.isHandled=!0)},[Ze]),t.createElement(t.Fragment,null,Ze.data&&Ze.data.status==="version-mismatch"&&t.createElement(P.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"Someone else has updated this dashboard ",t.createElement("br",null)," ",t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await nt(at,{overwrite:!0},Xe),lt()},onDismiss:lt}),Ze.data&&Ze.data.status==="name-exists"&&t.createElement(P.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",t.createElement("br",null),t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await nt(at,{overwrite:!0},Xe),lt()},onDismiss:lt}),Ze.data&&Ze.data.status==="plugin-dashboard"&&t.createElement(H,{dashboard:Xe,onDismiss:lt}))},H=({onDismiss:Xe,dashboard:at})=>{const{onDashboardSave:Ze}=X(at),lt=(0,c.wW)(ee);return t.createElement(x.u,{className:lt.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:Xe},t.createElement("div",{className:lt.modalText},"Your changes will be lost when you update the plugin.",t.createElement("br",null),t.createElement("small",null,"Use ",t.createElement("strong",null,"Save As")," to create custom version.")),t.createElement(x.u.ButtonRow,null,t.createElement(M.zx,{variant:"secondary",onClick:Xe,fill:"outline"},"Cancel"),t.createElement(S.t,{dashboard:at,onSaveSuccess:Xe}),t.createElement(M.zx,{variant:"destructive",onClick:async()=>{await Ze(at.getSaveModelClone(),{overwrite:!0},at),Xe()}},"Overwrite")))},Y=Xe=>{switch(Xe){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},ee=Xe=>({modal:d.css`
    width: 500px;
  `,modalText:d.css`
    font-size: ${Xe.typography.h4.fontSize};
    color: ${Xe.colors.text.primary};
    margin-bottom: ${Xe.spacing(4)}
    padding-top: ${Xe.spacing(2)};
  `,modalButtonRow:d.css`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${Xe.spacing(2)};
    }
  `});var ue=e(4403),q=e(74955),ge=e(25474),De=e(11017),fe=e(44727),me=e(90701),ce=e(79658),ie=e(85385);const re=Xe=>{const at=Xe.getSaveModelClone();return at.id=null,at.uid="",at.title+=" Copy",at.editable=!0,Xe.id>0&&at.panels.forEach(Ze=>{Ze.type==="graph"&&Ze.alert&&delete Ze.thresholds,delete Ze.alert}),at},Ee=({dashboard:Xe,isNew:at,onSubmit:Ze,onCancel:lt,onSuccess:nt})=>{const _e={title:at?Xe.title:`${Xe.title} Copy`,$folder:{uid:Xe.meta.folderUid,title:Xe.meta.folderTitle},copyTags:!1},ut=rt=>async je=>{if(je&&je===rt().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await ie.t.validateNewDashboardName(rt().$folder.uid,je),!0}catch(dt){return dt instanceof Error?dt.message:"Dashboard name is invalid"}};return t.createElement(ue.l,{defaultValues:_e,onSubmit:async rt=>{if(!Ze)return;const je=re(Xe);je.title=rt.title,rt.copyTags||(je.tags=[]),(await Ze(je,{folderUid:rt.$folder.uid},Xe)).status==="success"&&nt()}},({register:rt,control:je,errors:dt,getValues:oe})=>t.createElement(t.Fragment,null,t.createElement(q.g,{label:"Dashboard name",invalid:!!dt.title,error:dt.title?.message},t.createElement(ge.I,{...rt("title",{validate:ut(oe)}),"aria-label":"Save dashboard title field",autoFocus:!0})),t.createElement(q.g,{label:"Folder"},t.createElement(De.g,{render:({field:{ref:Se,...Re}})=>t.createElement(ce.Es,{...Re,dashboardId:Xe.id,initialFolderUid:Xe.meta.folderUid,initialTitle:Xe.meta.folderTitle,enableCreateNew:!0}),control:je,name:"$folder"})),!at&&t.createElement(q.g,{label:"Copy tags"},t.createElement(fe.r,{...rt("copyTags")})),t.createElement(me.Lh,null,t.createElement(M.zx,{type:"button",variant:"secondary",onClick:lt,fill:"outline"},"Cancel"),t.createElement(M.zx,{type:"submit","aria-label":"Save dashboard button"},"Save"))))};var J=e(68183),te=e(26418),ne=e(94338),j=e(79090);const be=({dashboard:Xe,saveModel:at,options:Ze,onSubmit:lt,onCancel:nt,onSuccess:_e,onOptionsChange:ut})=>{const rt=(0,t.useMemo)(()=>Xe.hasTimeChanged(),[Xe]),je=(0,t.useMemo)(()=>Xe.hasVariableValuesChanged(),[Xe]),[dt,oe]=(0,t.useState)(!1);return t.createElement(ue.l,{onSubmit:async Se=>{if(!lt)return;oe(!0),Ze={...Ze,message:Se.message},(await lt(at.clone,Ze,Xe)).status==="success"?(Ze.saveVariables&&Xe.resetOriginalVariables(),Ze.saveTimerange&&Xe.resetOriginalTime(),_e()):oe(!1)}},({register:Se,errors:Re})=>{const ze=Se("message");return t.createElement(te.Stack,{direction:"column",gap:2},rt&&t.createElement(ne.X,{checked:!!Ze.saveTimerange,onChange:()=>ut({...Ze,saveTimerange:!Ze.saveTimerange}),label:"Save current time range as dashboard default","aria-label":J.wl.pages.SaveDashboardModal.saveTimerange}),je&&t.createElement(ne.X,{checked:!!Ze.saveVariables,onChange:()=>ut({...Ze,saveVariables:!Ze.saveVariables}),label:"Save current variable values as dashboard default","aria-label":J.wl.pages.SaveDashboardModal.saveVariables}),t.createElement(j.K,{...ze,"aria-label":"message",value:Ze.message,onChange:ve=>{ut({...Ze,message:ve.currentTarget.value}),ze.onChange(ve)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5}),t.createElement(te.Stack,{alignItems:"center"},t.createElement(M.zx,{variant:"secondary",onClick:nt,fill:"outline"},"Cancel"),t.createElement(M.zx,{type:"submit",disabled:!at.hasChanges,icon:dt?"fa fa-spinner":void 0,"aria-label":J.wl.pages.SaveDashboardModal.save},"Save"),!at.hasChanges&&t.createElement("div",null,"No changes to save")))})};var Le=e(3574),Qe=e(38120);const Ye=({dashboard:Xe,onCancel:at})=>{const[Ze,lt]=(0,t.useState)(()=>{const _e=Xe.getSaveModelClone();return delete _e.id,JSON.stringify(_e,null,2)}),nt=(0,t.useCallback)(()=>{const _e=new Blob([Ze],{type:"application/json;charset=utf-8"});(0,Le.saveAs)(_e,Xe.title+"-"+new Date().getTime()+".json")},[Xe.title,Ze]);return t.createElement(t.Fragment,null,t.createElement(te.Stack,{direction:"column",gap:2},t.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",t.createElement("br",null),t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null)," ",t.createElement("br",null),t.createElement("strong",null,"File path: ")," ",Xe.meta.provisionedExternalId),t.createElement(j.K,{spellCheck:!1,value:Ze,onChange:_e=>{lt(_e.currentTarget.value)},className:de.json}),t.createElement(me.Lh,null,t.createElement(M.zx,{variant:"secondary",onClick:at,fill:"outline"},"Cancel"),t.createElement(Qe.m,{icon:"copy",getText:()=>Ze},"Copy JSON to clipboard"),t.createElement(M.zx,{type:"submit",onClick:nt},"Save JSON to file"))))},de={json:d.css`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `};var Be=e(318),Ve=e(63163),$e=e(7968);function We(Xe){const{dashboard:at,saveModel:Ze,onSubmit:lt,onCancel:nt,onSuccess:_e,onOptionsChange:ut,isNew:rt,isCopy:je}=Xe,dt=(0,t.useMemo)(()=>at.hasTimeChanged(),[at]),oe=(0,t.useMemo)(()=>at.hasVariableValuesChanged(),[at]),[Se,Re]=(0,t.useState)(!1),[ze,ve]=(0,t.useState)(),[Te,he]=(0,t.useState)(at.uid),[pe,ye]=(0,t.useState)($e.c.Save),Oe=(0,t.useMemo)(()=>{switch(pe){case $e.c.PR:return"Create PR";case $e.c.Push:return"Push"}return console.log("???",pe),"Save"},[pe]),Ne=(0,n.Z)(async()=>{const ke=await(0,Ve.$)().getOptions(at.uid);return ye(ke.workflows[0]?.value??$e.c.Save),ke},[at.uid]);if(Ne.error)return t.createElement("div",null,"Error loading workflows");if(Ne.loading||!Ne.value)return t.createElement(i.$,null);if(ze)return t.createElement("div",null,ze.url&&t.createElement("div",null,t.createElement("h2",null,"View pull request"),t.createElement("a",{href:ze.url},ze.url)),t.createElement("pre",null,JSON.stringify(ze)),t.createElement(me.Lh,null,t.createElement(M.zx,{variant:"secondary",onClick:nt},"Close")));let Me=Xe.options;const Ae=Ne.value?.workflows??[],we=Ze.hasChanges||rt||je;return t.createElement(ue.l,{onSubmit:async ke=>{if(!lt)return;Re(!0);let{uid:st,...Et}=Ze.clone;(rt||je)&&(st=Te,st.endsWith("-dash.json")||(st+="-dash.json"));const Pt=await(0,Ve.$)().write(st,{body:Et,kind:"dashboard",title:ke.title,message:ke.message,workflow:pe});console.log("GOT",Pt),Pt.code===200?(Me.saveVariables&&at.resetOriginalVariables(),Me.saveTimerange&&at.resetOriginalTime(),Pt.pending||(_e(),(rt||je)&&L.E1.push(`/g/${st}`))):Re(!1),ve(Pt)}},({register:ke,errors:st})=>t.createElement(te.Stack,{direction:"column",gap:1},t.createElement(te.Stack,{direction:"column",gap:1},dt&&t.createElement(ne.X,{checked:!!Me.saveTimerange,onChange:()=>ut({...Me,saveTimerange:!Me.saveTimerange}),label:"Save current time range as dashboard default","aria-label":J.wl.pages.SaveDashboardModal.saveTimerange}),oe&&t.createElement(ne.X,{checked:!!Me.saveVariables,onChange:()=>ut({...Me,saveVariables:!Me.saveVariables}),label:"Save current variable values as dashboard default","aria-label":J.wl.pages.SaveDashboardModal.saveVariables})),(rt||je)&&t.createElement(q.g,{label:"Path"},t.createElement(ge.I,{value:Te??"",required:!0,autoFocus:!0,placeholder:"Full path (todo, help validate)",onChange:Et=>he(Et.currentTarget.value)})),!Ke(Ne.value)&&t.createElement(q.g,{label:"Workflow"},t.createElement(Be.S,{value:pe,options:Ae,onChange:ye})),pe===$e.c.PR&&t.createElement(q.g,{label:"PR Title"},t.createElement(ge.I,{...ke("title"),required:!0,placeholder:"Enter a PR title",autoFocus:!0})),t.createElement(q.g,{label:"Message"},t.createElement(j.K,{...ke("message"),placeholder:"Add a note to describe your changes.",rows:5})),t.createElement(me.Lh,null,t.createElement(M.zx,{variant:"secondary",onClick:nt,fill:"outline"},"Cancel"),t.createElement(M.zx,{type:"submit",disabled:!we,icon:Se?"fa fa-spinner":void 0,"aria-label":J.wl.pages.SaveDashboardModal.save},Oe),!we&&t.createElement("div",null,"No changes to save"))))}function Ke(Xe){return Xe.workflows.length===1?Xe.workflows.find(at=>at.value===$e.c.Save)!=null:!1}const qe=({dashboard:Xe,onDismiss:at,onSaveSuccess:Ze,isCopy:lt})=>{const[nt,_e]=(0,t.useState)({}),ut=u.v.featureToggles.dashboardsFromStorage&&Xe.uid?.indexOf("/")>0,rt=Xe.meta.provisioned&&!ut,je=Xe.version===0&&!ut,dt=(0,n.Z)(async()=>je?void 0:(await l.ae.getDashboardByUid(Xe.uid)).dashboard,[Xe,je]),oe=(0,t.useMemo)(()=>{const ye=Xe.getSaveModelClone({saveTimerange:Boolean(nt.saveTimerange),saveVariables:Boolean(nt.saveVariables)});if(!dt.value)return{clone:ye,diff:{},diffCount:0,hasChanges:!1};const Oe=JSON.stringify(ye,null,2),Ne=JSON.parse(Oe),Me=(0,r.Q$)(dt.value,Ne);let Ae=0;for(const we of Object.values(Me))Ae+=we.length;return{clone:ye,diff:Me,diffCount:Ae,hasChanges:Ae>0&&!je}},[Xe,dt.value,nt,je]),[Se,Re]=(0,t.useState)(!1),{state:ze,onDashboardSave:ve}=X(Xe),Te=Ze?()=>{at(),Ze()}:at,he=()=>Se?t.createElement(C,{diff:oe.diff,oldValue:dt.value,newValue:oe.clone}):ze.loading?t.createElement("div",null,t.createElement(i.$,null)):ut?t.createElement(We,{dashboard:Xe,saveModel:oe,onCancel:at,onSuccess:Te,onSubmit:ve,options:nt,onOptionsChange:_e,isNew:je,isCopy:lt}):je||lt?t.createElement(Ee,{dashboard:Xe,onCancel:at,onSuccess:Te,onSubmit:ve,isNew:je}):rt?t.createElement(Ye,{dashboard:Xe,onCancel:at,onSuccess:Te}):t.createElement(be,{dashboard:Xe,saveModel:oe,onCancel:at,onSuccess:Te,onSubmit:ve,options:nt,onOptionsChange:_e});if(ze.error&&(0,s.kW)(ze.error)&&!ze.error.isHandled)return t.createElement(k,{error:ze.error,dashboard:Xe,dashboardSaveModel:oe.clone,onDismiss:at});let pe="Save dashboard";return lt?pe="Save dashboard copy":rt&&(pe="Provisioned dashboard"),t.createElement(m.d,{title:pe,onClose:at,width:"40%",subtitle:Xe.title,tabs:t.createElement(f.J,null,t.createElement(o.O,{label:"Details",active:!Se,onChangeTab:()=>Re(!1)}),oe.hasChanges&&t.createElement(o.O,{label:"Changes",active:Se,onChangeTab:()=>Re(!0),counter:oe.diffCount})),expandable:!0,scrollableContent:!0},he(),u.v.featureToggles.showDashboardValidationWarnings&&t.createElement(h,{dashboard:Xe}))}},18262:(G,O,e)=>{"use strict";e.d(O,{ShareModal:()=>ze});var t=e(68404),n=e(77274),u=e(33716),s=e(6694),i=e(51142),m=e(47694),f=e(77582),o=e(35287),l=e(52423),r=e(59052),d=e(95484),c=e(68183),g=e(80313),p=e(29516),y=e(88561),h=e(90701),a=e(40008),v=e(2323),C=e(74955),E=e(25474),P=e(38120),x=e(90723),M=e(82002),S=e(10655),D=e(65587),T=e(94338);const R=c.wl.pages.ShareDashboardModal.PublicDashboard,L=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public",testId:R.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of datasources",testId:R.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public causes queries to run each time it is viewed, which may increase costs",testId:R.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],w=({disabled:ve,register:Te})=>t.createElement(t.Fragment,null,t.createElement("p",null,"Before you click Save, please acknowledge the following information:"),t.createElement(D.C,{disabled:ve},t.createElement(h.wc,{spacing:"md"},L.map(he=>t.createElement(h.Lh,{key:he.type,spacing:"none",align:"center"},t.createElement(T.X,{...Te(he.type),label:he.description,"data-testid":he.testId}),t.createElement(x.Qj,{variant:"primary",href:he.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:he.info.tooltip}))))));var A=e(38835),N=e(77592),W=e(44727),I=e(98101);const F=()=>{const{width:ve}=(0,I.Z)();return ve>1024};var V=e(74124);const b=({disabled:ve,dashboard:Te,register:he})=>{const pe=c.wl.pages.ShareDashboardModal.PublicDashboard,ye=(0,p.wW)(X),Oe=F(),Ne=(0,V.O)(Te.getDefaultTime(),Te);return t.createElement(t.Fragment,null,t.createElement("h4",{className:ye.title},"Public dashboard configuration"),t.createElement(D.C,{disabled:ve,className:ye.dashboardConfig},t.createElement(h.wc,{spacing:"md"},t.createElement(h.Ar,{orientation:Oe?0:1,spacing:"xs",justify:"space-between"},t.createElement(A._,{description:"The public dashboard uses the default time settings of the dashboard"},"Default time range"),t.createElement(N.K,{value:Ne,disabled:!0,onChange:()=>{}})),t.createElement(h.Ar,{orientation:Oe?0:1,spacing:"xs",justify:"space-between"},t.createElement(A._,{description:"Allow viewers to change time range"},"Time range picker enabled"),t.createElement(W.r,{...he("isTimeRangeEnabled"),"data-testid":pe.EnableTimeRangeSwitch})),t.createElement(h.Ar,{orientation:Oe?0:1,spacing:"xs",justify:"space-between"},t.createElement(A._,{description:"Show annotations on public dashboard"},"Show annotations"),t.createElement(W.r,{...he("isAnnotationsEnabled"),onChange:Me=>{const{onChange:Ae}=he("isAnnotationsEnabled");(0,n.ff)("grafana_dashboards_annotations_clicked",{action:Me.currentTarget.checked?"enable":"disable"}),Ae(Me)},"data-testid":pe.EnableAnnotationsSwitch})),t.createElement(h.Ar,{orientation:Oe?0:1,spacing:"xs",justify:"space-between"},t.createElement(A._,{description:"Configures whether current dashboard can be available publicly"},"Enabled"),t.createElement(W.r,{...he("enabledSwitch"),onChange:Me=>{const{onChange:Ae}=he("enabledSwitch");(0,n.ff)("grafana_dashboards_public_enable_clicked",{action:Me.currentTarget.checked?"enable":"disable"}),Ae(Me)},"data-testid":pe.EnableSwitch})))))},X=ve=>({title:l.css`
    margin-bottom: ${ve.spacing(2)};
  `,dashboardConfig:l.css`
    margin: ${ve.spacing(0,0,3,0)};
  `,timeRange:l.css`
    margin-bottom: ${ve.spacing(0)};
  `,timeRangeDisabledText:l.css`
    font-size: ${ve.typography.bodySmall.fontSize};
  `}),k=()=>t.createElement(t.Fragment,null,t.createElement("p",null,"To allow the current dashboard to be published publicly, toggle the switch. For now we do not support template variables or frontend datasources."),t.createElement("p",null,"We'd love your feedback. To share, please comment on this"," ",t.createElement("a",{href:"https://github.com/grafana/grafana/discussions/49253",target:"_blank",rel:"noreferrer",className:"text-link"},"GitHub discussion"),".")),H=new Set(["aquaqanalytics-kdbbackend-datasource","cloudwatch","dlopes7-appdynamics-datasource","doitintl-bigquery-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-db2-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-github-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","marcusolsson-csv-datasource","marcusolsson-ynab-datasource","mssql","mysql","opentsdb","postgres","prometheus","redis-datasource","sentinelone-dataset-datasource","tdengine-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","yesoreyeram-infinity-datasource"]),Y=ve=>ve.length>0,ee=ve=>ve?.uid!==""&&ve?.uid!==void 0,ue=ve=>{let Te=new Set;for(const he of ve)for(const pe of he.targets){let ye=pe?.datasource?.type;ye&&!H.has(ye)&&Te.add(ye)}return Array.from(Te).sort()},q=ve=>`${(0,m.iE)().appUrl}public-dashboards/${ve.accessToken}`;var ge=e(80600),De=e(84532),fe=e(81168),me=e(45984);const ce=ve=>{const Te=(0,g.N)(),he=(0,p.wW)(ie),{showModal:pe,hideModal:ye}=(0,t.useContext)(y.kr),Oe=F(),Ne=ve.dashboard.getVariables(),Me=c.wl.pages.ShareDashboardModal.PublicDashboard,{isLoading:Ae,data:we,isError:ke,isFetching:st}=(0,S.Ym)(ve.dashboard.uid),{reset:Et,handleSubmit:Pt,watch:gt,register:Ct,formState:{dirtyFields:Ot}}=(0,r.cI)({defaultValues:{publicAcknowledgment:!1,dataSourcesAcknowledgment:!1,usageAcknowledgment:!1,isAnnotationsEnabled:!1,isTimeRangeEnabled:!1,enabledSwitch:!1}}),[Ft,{isLoading:jt}]=(0,S.zZ)(),[En,{isLoading:xn}]=(0,S.Mi)();(0,t.useEffect)(()=>{const $n=new d.w0;return $n.add(ve.dashboard.events.subscribe(me.hS,Te)),(0,n.ff)("grafana_dashboards_public_share_viewed"),()=>$n.unsubscribe()},[ve.dashboard.events,Te]),(0,t.useEffect)(()=>{const $n=ee(we);Et({publicAcknowledgment:$n,dataSourcesAcknowledgment:$n,usageAcknowledgment:$n,isAnnotationsEnabled:we?.annotationsEnabled,isTimeRangeEnabled:we?.timeSelectionEnabled,enabledSwitch:we?.isEnabled})},[we,Et]);const Cn=Ae||jt||xn,bn=M.Vt.hasAccess(fe.AccessControlAction.DashboardsPublicWrite,(0,De.RN)()),Tn=gt("publicAcknowledgment")&&gt("dataSourcesAcknowledgment")&&gt("usageAcknowledgment"),Zn=(0,t.useMemo)(()=>!bn||!Tn||ve.dashboard.hasUnsavedChanges()||Cn||st||ke||!ee(we)&&!Ot.enabledSwitch,[bn,Tn,ve.dashboard,Cn,ke,we,st,Ot.enabledSwitch]),Bn=Cn||st||ke,Sn=async $n=>{(0,n.ff)("grafana_dashboards_public_create_clicked");const Xn={dashboard:ve.dashboard,payload:{...we,isEnabled:$n.enabledSwitch,annotationsEnabled:$n.isAnnotationsEnabled,timeSelectionEnabled:$n.isTimeRangeEnabled}};we?En(Xn):Ft(Xn)},wn=()=>{pe(ze,{dashboard:ve.dashboard,onDismiss:ye,activeTab:"share"})};return t.createElement(t.Fragment,null,t.createElement(h.Lh,null,t.createElement("p",{className:l.css`
            margin: 0;
          `},"Welcome to Grafana public dashboards alpha!"),(Ae||st)&&t.createElement(a.$,null)),t.createElement("div",{className:he.content},ue(ve.dashboard.panels).length>0?t.createElement(v.b,{severity:"warning",title:"Unsupported Datasources","data-testid":Me.UnsupportedDatasourcesWarningAlert},t.createElement("div",null,`There are datasources in this dashboard that are unsupported for public dashboards. Panels that use these datasources may not function properly: ${ue(ve.dashboard.panels).join(", ")}. See the `,t.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",className:"text-link"},"docs")," ","for supported datasources.")):null,Y(Ne)&&!ee(we)?t.createElement(v.b,{severity:"warning",title:"dashboard cannot be public","data-testid":Me.TemplateVariablesWarningAlert},"This dashboard cannot be made public because it has template variables"):t.createElement("form",{onSubmit:Pt(Sn)},t.createElement(k,null),t.createElement("hr",null),t.createElement("div",{className:he.checkboxes},t.createElement(w,{disabled:ee(we)||!bn||Cn||ke,register:Ct})),t.createElement("hr",null),t.createElement(b,{register:Ct,dashboard:ve.dashboard,disabled:!bn||Cn||ke}),ee(we)&&gt("enabledSwitch")&&t.createElement(C.g,{label:"Link URL",className:he.publicUrl},t.createElement(E.I,{disabled:Cn,value:q(we),readOnly:!0,"data-testid":Me.CopyUrlInput,addonAfter:t.createElement(P.m,{"data-testid":Me.CopyUrlButton,variant:"primary",icon:"copy",getText:()=>q(we)},"Copy")})),bn?ve.dashboard.hasUnsavedChanges()?t.createElement(v.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning"}):Y(Ne)&&t.createElement(v.b,{title:"This public dashboard may not work since it uses template variables",severity:"warning"}):t.createElement(v.b,{title:"You don't have permissions to create or update a public dashboard",severity:"warning"}),t.createElement(h.Lh,null,t.createElement(h.Ar,{orientation:Oe?0:1},t.createElement(x.zx,{type:"submit",disabled:Zn,"data-testid":Me.SaveConfigButton},we?"Save public dashboard":"Create public dashboard"),we&&bn&&t.createElement(ge.H,{type:"button",disabled:Bn,"data-testid":Me.DeleteButton,onDismiss:wn,variant:"destructive",dashboard:ve.dashboard,publicDashboard:{uid:we.uid,dashboardUid:ve.dashboard.uid,title:ve.dashboard.title}},"Delete public dashboard")),(jt||st)&&t.createElement(a.$,null)))))},ie=ve=>({content:l.css`
    margin: ${ve.spacing(1,0,0,0)};
  `,checkboxes:l.css`
    margin: ${ve.spacing(2,0)};
  `,timeRange:l.css`
    padding: ${ve.spacing(1,1)};
    margin: ${ve.spacing(0,0,2,0)};
  `,publicUrl:l.css`
    width: 100%;
    margin-bottom: ${ve.spacing(0,0,3,0)};
  `});var re=e(6297),Ee=e(79090),J=e(318);const te=({selectedTheme:ve="current",onChange:Te})=>{const he=[{label:(0,o.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,o.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,o.t)("share-modal.theme-picker.light","Light"),value:"light"}];return t.createElement(C.g,{label:(0,o.t)("share-modal.theme-picker.field-name","Theme")},t.createElement(J.S,{options:he,value:ve,onChange:Te}))};var ne=e(89346);class j extends t.PureComponent{constructor(Te){super(Te),this.buildIframeHtml=()=>{const{panel:he,dashboard:pe}=this.props,{useCurrentTimeRange:ye,selectedTheme:Oe}=this.state,Ne=(0,ne.S_)(ye,pe.uid,Oe,he);this.setState({iframeHtml:Ne})},this.onIframeHtmlChange=he=>{this.setState({iframeHtml:he.currentTarget.value})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)},this.onThemeChange=he=>{this.setState({selectedTheme:he},this.buildIframeHtml)},this.getIframeHtml=()=>this.state.iframeHtml,this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:Te,selectedTheme:he,iframeHtml:pe}=this.state,Oe=(this.props.dashboard?this.props.dashboard.time.to==="now":!1)?(0,o.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),t.createElement(C.g,{label:(0,o.t)("share-modal.embed.time-range","Current time range"),description:Oe},t.createElement(W.r,{id:"share-current-time-range",value:Te,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(te,{selectedTheme:he,onChange:this.onThemeChange}),t.createElement(C.g,{label:(0,o.t)("share-modal.embed.html","Embed HTML"),description:(0,o.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},t.createElement(Ee.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:pe,onChange:this.onIframeHtmlChange})),t.createElement(s.u.ButtonRow,null,t.createElement(P.m,{icon:"copy",variant:"primary",getText:this.getIframeHtml},t.createElement(o.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}}var be=e(3574),Le=e(93003),Qe=e(29930),Ye=e(134),de=e(89050),Be=e(57172);function Ve({json:ve,onDismiss:Te}){const he=(0,t.useCallback)(()=>ve,[ve]);return t.createElement(s.u,{title:"JSON",onDismiss:Te,onClickBackdrop:Te,isOpen:!0},t.createElement(de.Z,{disableHeight:!0},({width:pe})=>t.createElement(Be.p,{value:ve,language:"json",showMiniMap:!1,height:"500px",width:pe})),t.createElement(s.u.ButtonRow,null,t.createElement(P.m,{icon:"copy",getText:he},t.createElement(o.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class $e extends t.PureComponent{constructor(Te){super(Te),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onTrimDefaultsChange=()=>{this.setState({trimDefaults:!this.state.trimDefaults})},this.onSaveAsFile=()=>{const{dashboard:he}=this.props,{shareExternally:pe}=this.state,{trimDefaults:ye}=this.state;pe?this.exporter.makeExportable(he).then(Oe=>{ye?(0,Qe.i)().post("/api/dashboards/trim",{dashboard:Oe}).then(Ne=>{this.openSaveAsDialog(Ne.dashboard)}):this.openSaveAsDialog(Oe)}):ye?(0,Qe.i)().post("/api/dashboards/trim",{dashboard:he.getSaveModelClone()}).then(Oe=>{this.openSaveAsDialog(Oe.dashboard)}):this.openSaveAsDialog(he.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:he}=this.props,{shareExternally:pe}=this.state,{trimDefaults:ye}=this.state;pe?this.exporter.makeExportable(he).then(Oe=>{ye?(0,Qe.i)().post("/api/dashboards/trim",{dashboard:Oe}).then(Ne=>{this.openJsonModal(Ne.dashboard)}):this.openJsonModal(Oe)}):ye?(0,Qe.i)().post("/api/dashboards/trim",{dashboard:he.getSaveModelClone()}).then(Oe=>{this.openJsonModal(Oe.dashboard)}):this.openJsonModal(he.getSaveModelClone())},this.openSaveAsDialog=he=>{const pe=JSON.stringify(he,null,2),ye=new Blob([pe],{type:"application/json;charset=utf-8"}),Oe=new Date().getTime();(0,be.saveAs)(ye,`${he.title}-${Oe}.json`)},this.openJsonModal=he=>{f.h$.publish(new me.Dn({props:{json:JSON.stringify(he,null,2)},component:Ve})),this.props.onDismiss?.()},this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new Ye.E}componentDidMount(){(0,n.ff)("grafana_dashboards_export_share_viewed")}render(){const{onDismiss:Te}=this.props,{shareExternally:he}=this.state,{trimDefaults:pe}=this.state,ye=(0,o.t)("share-modal.export.share-externally-label","Export for sharing externally"),Oe=(0,o.t)("share-modal.export.share-default-label","Export with default values removed");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(C.g,{label:ye},t.createElement(W.r,{id:"share-externally-toggle",value:he,onChange:this.onShareExternallyChange})),Le.v.featureToggles.trimDefaults&&t.createElement(C.g,{label:Oe},t.createElement(W.r,{id:"trim-defaults-toggle",value:pe,onChange:this.onTrimDefaultsChange})),t.createElement(s.u.ButtonRow,null,t.createElement(x.zx,{variant:"secondary",onClick:Te,fill:"outline"},t.createElement(o.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(x.zx,{variant:"secondary",onClick:this.onViewJson},t.createElement(o.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(x.zx,{variant:"primary",onClick:this.onSaveAsFile},t.createElement(o.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var We=e(76647);const Ke=({panel:ve,initialFolderUid:Te,onDismiss:he})=>((0,t.useEffect)(()=>{(0,n.ff)("grafana_dashboards_library_panel_share_viewed")},[]),ve?t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),t.createElement(We.T,{panel:ve,initialFolderUid:Te,onDismiss:he})):null);var qe=e(81697);class Xe extends t.PureComponent{constructor(Te){super(Te),this.buildUrl=async()=>{const{panel:he,dashboard:pe}=this.props,{useCurrentTimeRange:ye,useShortUrl:Oe,selectedTheme:Ne}=this.state,Me=await(0,ne.bl)(ye,Ne,he,Oe),Ae=(0,ne.Sc)(ye,pe.uid,Ne,he);this.setState({shareUrl:Me,imageUrl:Ae})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=he=>{this.setState({selectedTheme:he})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_link_share_viewed"),this.buildUrl()}componentDidUpdate(Te,he){const{useCurrentTimeRange:pe,useShortUrl:ye,selectedTheme:Oe}=this.state;(he.useCurrentTimeRange!==pe||he.selectedTheme!==Oe||he.useShortUrl!==ye)&&this.buildUrl()}render(){const{panel:Te,dashboard:he}=this.props,pe=he?he.time.to==="now":!1,{useCurrentTimeRange:ye,useShortUrl:Oe,selectedTheme:Ne,shareUrl:Me,imageUrl:Ae}=this.state,we=c.wl.pages.SharePanelModal,ke=Boolean(he.id),st=(0,o.t)("share-modal.link.time-range-label","Lock time range"),Et=(0,o.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),Pt=(0,o.t)("share-modal.link.shorten-url","Shorten URL"),gt=(0,o.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(D.C,null,t.createElement(C.g,{label:st,description:pe?Et:""},t.createElement(W.r,{id:"share-current-time-range",value:ye,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(te,{selectedTheme:Ne,onChange:this.onThemeChange}),t.createElement(C.g,{label:Pt},t.createElement(W.r,{id:"share-shorten-url",value:Oe,onChange:this.onUrlShorten})),t.createElement(C.g,{label:gt},t.createElement(E.I,{id:"link-url-input",value:Me,readOnly:!0,addonAfter:t.createElement(P.m,{icon:"copy",variant:"primary",getText:this.getShareUrl},t.createElement(o.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),Te&&m.ZP.rendererAvailable&&t.createElement(t.Fragment,null,ke&&t.createElement("div",{className:"gf-form"},t.createElement("a",{href:Ae,target:"_blank",rel:"noreferrer","aria-label":we.linkToRenderedImage},t.createElement(qe.J,{name:"camera"}),"\xA0",t.createElement(o.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!ke&&t.createElement(v.b,{severity:"info",title:(0,o.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(o.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),Te&&!m.ZP.rendererAvailable&&t.createElement(v.b,{severity:"info",title:(0,o.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(o.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the\xA0",t.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var at=e(47214),Ze=e(46739),lt=e(19349),nt=e(10672);const _e="/api/snapshots";class ut extends t.PureComponent{constructor(Te){super(Te),this.createSnapshot=he=>()=>{const{timeoutSeconds:pe}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,he)},pe*1e3)},this.saveSnapshot=async(he,pe)=>{const{snapshotExpires:ye}=this.state,Oe=this.dashboard.getSaveModelClone();this.scrubDashboard(Oe);const Ne={dashboard:Oe,name:Oe.title,expires:ye,external:pe};try{const Me=await(0,at.i)().post(_e,Ne);this.setState({deleteUrl:Me.deleteUrl,snapshotUrl:Me.url,step:2})}finally{(0,n.ff)("grafana_dashboards_snapshot_created",{location:pe?"raintank":"local"}),this.setState({isLoading:!1})}},this.scrubDashboard=he=>{const{panel:pe}=this.props,{snapshotName:ye}=this.state;he.title=ye,he.time=(0,lt.$t)().timeRange(),he.links=[],he.panels.forEach(Ne=>{Ne.targets=[],Ne.links=[],Ne.datasource=null});const Oe=he.annotations.list.filter(Ne=>Ne.enable);if(he.annotations.list=Oe.map(Ne=>({name:Ne.name,enable:Ne.enable,iconColor:Ne.iconColor,snapshotData:Ne.snapshotData,type:Ne.type,builtIn:Ne.builtIn,hide:Ne.hide})),he.getVariables().forEach(Ne=>{Ne.query="",Ne.options=Ne.current?[Ne.current]:[],Ne.refresh=nt.Bd.never}),pe){const Ne=pe.getSaveModel();Ne.gridPos.w=24,Ne.gridPos.x=0,Ne.gridPos.y=0,Ne.gridPos.h=20,he.panels=[Ne]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(Ne=>{delete Ne.snapshotData}),this.dashboard.annotations.list.forEach(Ne=>{delete Ne.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:he}=this.state;await(0,at.i)().get(he),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=he=>{this.setState({snapshotName:he.target.value})},this.onTimeoutChange=he=>{this.setState({timeoutSeconds:Number(he.target.value)})},this.onExpireChange=he=>{this.setState({selectedExpireOption:he,snapshotExpires:he.value})},this.dashboard=Te.dashboard,this.expireOptions=[{label:(0,o.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,o.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,o.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,o.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:Te.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_snapshot_share_viewed"),this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const Te=await(0,at.i)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:Te.externalSnapshotName,externalEnabled:Te.externalEnabled})}renderStep1(){const{onDismiss:Te}=this.props,{snapshotName:he,selectedExpireOption:pe,timeoutSeconds:ye,isLoading:Oe,sharingButtonText:Ne,externalEnabled:Me}=this.state,Ae=(0,o.t)("share-modal.snapshot.name","Snapshot name"),we=(0,o.t)("share-modal.snapshot.expire","Expire"),ke=(0,o.t)("share-modal.snapshot.timeout","Timeout (seconds)"),st=(0,o.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(C.g,{label:Ae},t.createElement(E.I,{id:"snapshot-name-input",width:30,value:he,onChange:this.onSnapshotNameChange})),t.createElement(C.g,{label:we},t.createElement(Ze.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:pe,onChange:this.onExpireChange})),t.createElement(C.g,{label:ke,description:st},t.createElement(E.I,{id:"timeout-input",type:"number",width:21,value:ye,onChange:this.onTimeoutChange})),t.createElement(s.u.ButtonRow,null,t.createElement(x.zx,{variant:"secondary",onClick:Te,fill:"outline"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),Me&&t.createElement(x.zx,{variant:"secondary",disabled:Oe,onClick:this.createSnapshot(!0)},Ne),t.createElement(x.zx,{variant:"primary",disabled:Oe,onClick:this.createSnapshot()},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:Te}=this.state;return t.createElement(t.Fragment,null,t.createElement(C.g,{label:(0,o.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(E.I,{id:"snapshot-url-input",value:Te,readOnly:!0,addonAfter:t.createElement(P.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(x.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return t.createElement("div",{className:"share-modal-header"},t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:Te,step:he}=this.state;return t.createElement(t.Fragment,null,he===1&&this.renderStep1(),he===2&&this.renderStep2(),he===3&&this.renderStep3(),Te&&t.createElement(a.$,{inline:!0}))}}const rt=[],je=[];function dt(ve){rt.push(ve)}function oe(ve){je.push(ve)}function Se(ve,Te){const pe=[{label:(0,o.t)("share-modal.tab-title.link","Link"),value:"link",component:Xe}];if(f.Vt.isSignedIn&&m.vc.snapshotEnabled){const Oe=(0,o.t)("share-modal.tab-title.snapshot","Snapshot");pe.push({label:Oe,value:"snapshot",component:ut})}if(ve){const Oe=(0,o.t)("share-modal.tab-title.embed","Embed");if(pe.push({label:Oe,value:"embed",component:j}),!(0,re.V)(ve)){const Ne=(0,o.t)("share-modal.tab-title.library-panel","Library panel");pe.push({label:Ne,value:"library_panel",component:Ke})}pe.push(...je)}else{const Oe=(0,o.t)("share-modal.tab-title.export","Export");pe.push({label:Oe,value:"export",component:$e}),pe.push(...rt)}Boolean(m.vc.featureToggles.publicDashboards)&&pe.push({label:"Public dashboard",value:"share",component:ce});const ye=pe.find(Oe=>Oe.value===Te);return{tabs:pe,activeTab:ye?.value??pe[0].value}}function Re(ve){const{tabs:Te,activeTab:he}=Se(ve.panel,ve.activeTab);return{tabs:Te,activeTab:he}}class ze extends t.Component{constructor(Te){super(Te),this.onSelectTab=he=>{this.setState(pe=>({...pe,activeTab:he.value}))},this.state=Re(Te)}componentDidMount(){(0,n.ff)("grafana_dashboards_share_modal_viewed")}getActiveTab(){const{tabs:Te,activeTab:he}=this.state;return Te.find(pe=>pe.value===he)}renderTitle(){const{panel:Te}=this.props,{activeTab:he}=this.state,pe=Te?(0,o.t)("share-modal.panel.title","Share Panel"):(0,o.t)("share-modal.dashboard.title","Share"),ye=Se(this.props.panel,this.state.activeTab).tabs;return t.createElement(u.H,{title:pe,icon:"share-alt",tabs:ye,activeTab:he,onChangeTab:this.onSelectTab})}render(){const{dashboard:Te,panel:he}=this.props,ye=this.getActiveTab().component;return t.createElement(s.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},t.createElement(i.I,null,t.createElement(ye,{dashboard:Te,panel:he,onDismiss:this.props.onDismiss})))}}},89346:(G,O,e)=>{"use strict";e.d(O,{OS:()=>o,S_:()=>c,Sc:()=>d,bl:()=>l});var t=e(27677),n=e(83383),u=e(46519),s=e(93003),i=e(57465),m=e(19349);function f({useCurrentTimeRange:p,selectedTheme:y,panel:h,search:a=window.location.search,range:v=(0,m.$t)().timeRange(),orgId:C=s.v.bootData.user.orgId}){const E=new URLSearchParams(a);return E.set("from",String(v.from.valueOf())),E.set("to",String(v.to.valueOf())),E.set("orgId",String(C)),p||(E.delete("from"),E.delete("to")),y!=="current"&&E.set("theme",y),h&&!E.has("editPanel")&&E.set("viewPanel",String(h.id)),E}function o(){let p=window.location.href;const y=p.indexOf("?");return y!==-1&&(p=p.substring(0,y)),p}async function l(p,y,h,a){const v=o(),C=f({useCurrentTimeRange:p,selectedTheme:y,panel:h}),E=t.Cj.appendQueryToUrl(v,C.toString());return a?await(0,i.D)(E):E}function r(p,y,h,a){const v=o(),C=f({useCurrentTimeRange:p,selectedTheme:h,panel:a});let E=v.replace(s.v.appSubUrl+"/dashboard/",s.v.appSubUrl+"/dashboard-solo/");E=E.replace(s.v.appSubUrl+"/d/",s.v.appSubUrl+"/d-solo/"),n.u.stripBaseFromUrl(v)==="/"&&(E=`${s.v.appUrl}d-solo/${y}`);const x=C.get("editPanel")??C.get("viewPanel")??"";return C.set("panelId",x),C.delete("editPanel"),C.delete("viewPanel"),t.Cj.appendQueryToUrl(E,C.toString())}function d(p,y,h,a){let C=r(p,y,h,a).replace(s.v.appSubUrl+"/dashboard-solo/",s.v.appSubUrl+"/render/dashboard-solo/");return C=C.replace(s.v.appSubUrl+"/d-solo/",s.v.appSubUrl+"/render/d-solo/"),C+="&width=1000&height=500"+g(),C}function c(p,y,h,a){return'<iframe src="'+r(p,y,h,a)+'" width="450" height="200" frameborder="0"></iframe>'}function g(){const p="&tz=UTC"+encodeURIComponent((0,u.CQ)().format("Z"));if(!window.Intl)return p;const y=window.Intl.DateTimeFormat();if(!y.resolvedOptions)return p;const h=y.resolvedOptions();return h.timeZone?"&tz="+encodeURIComponent(h.timeZone):p}},64687:(G,O,e)=>{"use strict";e.d(O,{B:()=>c});var t=e(52423),n=e(82897),u=e(68404),s=e(29516),i=e(81697);const m=({diff:p})=>{const y=(0,s.wW)(f),h=!(0,n.isUndefined)(p.originalValue)&&!(0,n.isArray)(p.originalValue)&&!(0,n.isObject)(p.originalValue),a=!(0,n.isUndefined)(p.value)&&!(0,n.isArray)(p.value)&&!(0,n.isObject)(p.value);return u.createElement(u.Fragment,null,h&&u.createElement("span",{className:y},String(p.originalValue)),h&&a?u.createElement(i.J,{name:"arrow-right"}):null,a&&u.createElement("span",{className:y},String(p.value)))},f=p=>t.css`
  background-color: ${p.colors.action.hover};
  border-radius: ${p.shape.borderRadius()};
  color: ${p.colors.text.primary};
  font-size: ${p.typography.body.fontSize};
  margin: 0 ${p.spacing(.5)};
  padding: ${p.spacing(.5,1)};
`;var o=e(15092);const l={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},r=({diff:p,title:y})=>{const h=(0,s.wW)(d);return p?u.createElement(u.Fragment,null,u.createElement(i.J,{type:"mono",name:"circle",className:h[p.op]})," ",u.createElement("span",{className:h.embolden},y)," ",u.createElement("span",null,(0,o.dW)(p,p.path.length>1))," ",u.createElement(m,{diff:p})):u.createElement("div",{className:h.withoutDiff},u.createElement(i.J,{type:"mono",name:"circle",className:h.replace})," ",u.createElement("span",{className:h.embolden},y)," ",u.createElement("span",null,(0,o.dW)(l,!1)))},d=p=>({embolden:t.css`
    font-weight: ${p.typography.fontWeightBold};
  `,add:t.css`
    color: ${p.colors.success.main};
  `,replace:t.css`
    color: ${p.colors.success.main};
  `,move:t.css`
    color: ${p.colors.success.main};
  `,copy:t.css`
    color: ${p.colors.success.main};
  `,_get:t.css`
    color: ${p.colors.success.main};
  `,test:t.css`
    color: ${p.colors.success.main};
  `,remove:t.css`
    color: ${p.colors.success.main};
  `,withoutDiff:t.css`
    margin-bottom: ${p.spacing(2)};
  `}),c=({diffs:p,title:y})=>{const h=(0,s.wW)(g);return p.length===1?u.createElement("div",{className:h.container,"data-testid":"diffGroup"},u.createElement(r,{title:y,diff:p[0]})):u.createElement("div",{className:h.container,"data-testid":"diffGroup"},u.createElement(r,{title:y}),u.createElement("ul",{className:h.list},p.map((a,v)=>u.createElement("li",{className:h.listItem,key:`${(0,n.last)(a.path)}__${v}`},u.createElement("span",null,(0,o.dW)(a))," ",u.createElement(m,{diff:a})))))},g=p=>({container:t.css`
    background-color: ${p.colors.background.secondary};
    font-size: ${p.typography.h6.fontSize};
    margin-bottom: ${p.spacing(2)};
    padding: ${p.spacing(2)};
  `,list:t.css`
    margin-left: ${p.spacing(4)};
  `,listItem:t.css`
    margin-bottom: ${p.spacing(1)};
  `})},61017:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(52423),n=e(68404),u=e(28072),s=e.n(u),i=e(35008),m=e.n(i),f=e(29516);const o=({oldValue:l,newValue:r})=>{const d=(0,f.l4)(),c={variables:{dark:{diffViewerBackground:d.colors.background.canvas,diffViewerColor:d.colors.text.primary,addedBackground:m()(d.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:m()(d.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:m()(d.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:m()(d.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:m()(d.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:m()(d.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:d.colors.background.primary,gutterBackgroundDark:d.colors.background.primary,highlightBackground:m()(d.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:m()(d.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:d.colors.background.secondary,codeFoldBackground:d.colors.background.secondary,emptyLineBackground:d.colors.background.secondary,gutterColor:d.colors.text.disabled,addedGutterColor:d.colors.text.primary,removedGutterColor:d.colors.text.primary,codeFoldContentColor:d.colors.text.disabled,diffViewerTitleBackground:d.colors.background.secondary,diffViewerTitleColor:d.colors.text.disabled,diffViewerTitleBorderColor:d.colors.border.strong}},codeFold:{fontSize:d.typography.bodySmall.fontSize},gutter:`
      pre {
        color: ${m()(d.colors.text.disabled).setAlpha(1).toString()};
        opacity: 0.61;
      }
    `};return n.createElement("div",{className:t.css`
        font-size: ${d.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `},n.createElement(s(),{styles:c,oldValue:l,newValue:r,splitView:!1,compareMethod:u.DiffMethod.CSS,useDarkTheme:d.isDark}))}},99714:(G,O,e)=>{"use strict";e.d(O,{U$:()=>F,Cs:()=>S,Sd:()=>E,R1:()=>L,K8:()=>s});var t=e(82897),n=e(47214);class u{getHistoryList(X,k){const H=X&&X.uid?X.uid:void 0;return H?(0,n.i)().get(`api/dashboards/uid/${H}/versions`,k):Promise.resolve([])}getDashboardVersion(X,k){return(0,n.i)().get(`api/dashboards/uid/${X}/versions/${k}`)}restoreDashboard(X,k){const H=X&&X.uid?X.uid:void 0,Y=`api/dashboards/uid/${H}/restore`;return H&&(0,t.isNumber)(k)?(0,n.i)().post(Y,{version:k}):Promise.resolve({})}}const s=new u;var i=e(52423),m=e(68404),f=e(94338),o=e(3349),l=e(88561),r=e(90723),d=e(81202),c=e(671),g=e(83383),p=e(57388),y=e(60499),h=e(81168);const a=async(b,X)=>await s.restoreDashboard(X,b),v=b=>{const X=(0,h.useSelector)(ee=>ee.dashboard.getModel()),[k,H]=(0,c.Z)(async()=>await a(b,X),[]),Y=(0,y.iG)();return(0,m.useEffect)(()=>{if(k.value){const ee=p.E1.getLocation(),ue=g.u.stripBaseFromUrl(k.value.url),q=ee.state?.routeReloadCounter;p.E1.replace({...ee,pathname:ue,state:{routeReloadCounter:q?q+1:1}}),Y.success("Dashboard restored",`Restored from version ${b}`)}},[k,b,Y]),{state:k,onRestoreDashboard:H}},C=({hideModal:b,version:X})=>{const{state:k,onRestoreDashboard:H}=v(X);return(0,m.useEffect)(()=>{k.loading===!1&&k.value&&b()},[k,b]),m.createElement(d.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:b,onConfirm:H,body:m.createElement("p",null,"Are you sure you want to restore the dashboard to version ",X,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${X}`})},E=({versions:b,canCompare:X,onCheck:k})=>m.createElement("table",{className:"filter-table gf-form-group"},m.createElement("thead",null,m.createElement("tr",null,m.createElement("th",{className:"width-4"}),m.createElement("th",{className:"width-4"},"Version"),m.createElement("th",{className:"width-14"},"Date"),m.createElement("th",{className:"width-10"},"Updated by"),m.createElement("th",null,"Notes"),m.createElement("th",null))),m.createElement("tbody",null,b.map((H,Y)=>m.createElement("tr",{key:H.id},m.createElement("td",null,m.createElement(f.X,{"aria-label":`Toggle selection of version ${H.version}`,className:i.css`
                display: inline;
              `,checked:H.checked,onChange:ee=>k(ee,H.id),disabled:!H.checked&&X})),m.createElement("td",null,H.version),m.createElement("td",null,H.createdDateString),m.createElement("td",null,H.createdBy),m.createElement("td",null,H.message),m.createElement("td",{className:"text-right"},Y===0?m.createElement(o.V,{name:"Latest",colorIndex:17}):m.createElement(l.JY,null,({showModal:ee,hideModal:ue})=>m.createElement(r.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{ee(C,{version:H.version,hideModal:ue})}},"Restore")))))));var P=e(29516),x=e(20017),M=e(81697);const S=({onClick:b=t.noop,baseVersion:X=0,newVersion:k=0,isNewLatest:H=!1})=>{const Y=(0,P.wW)(D);return m.createElement("h3",{className:Y.header},m.createElement(x.h,{name:"arrow-left",size:"xl",onClick:b}),m.createElement("span",null,"Comparing ",X," ",m.createElement(M.J,{name:"arrows-h"})," ",k," ",H&&m.createElement("cite",{className:"muted"},"(Latest)")))},D=b=>({header:i.css`
    font-size: ${b.typography.h3.fontSize};
    display: flex;
    gap: ${b.spacing(2)};
    margin-bottom: ${b.spacing(3)};
  `});var T=e(26418),R=e(48756);const L=({hasMore:b,canCompare:X,getVersions:k,getDiff:H,isLastPage:Y})=>m.createElement(T.Stack,null,b&&m.createElement(r.zx,{type:"button",onClick:()=>k(!0),variant:"secondary",disabled:Y},"Show more versions"),m.createElement(R.u,{content:"Select two versions to start comparing",placement:"bottom"},m.createElement(r.zx,{type:"button",disabled:!X,onClick:H,icon:"code-branch"},"Compare versions")));var w=e(90701),A=e(53535),N=e(64687),W=e(61017),I=e(15092);const F=({baseInfo:b,newInfo:X,diffData:k,isNewLatest:H})=>{const Y=(0,I.Q$)(k.lhs,k.rhs),ee=(0,P.wW)(V);return m.createElement("div",null,m.createElement("div",{className:ee.spacer},m.createElement(w.Lh,{justify:"space-between",align:"center"},m.createElement("div",null,m.createElement("p",{className:ee.versionInfo},m.createElement("strong",null,"Version ",X.version)," updated by ",X.createdBy," ",X.ageString," -"," ",X.message),m.createElement("p",{className:(0,i.cx)(ee.versionInfo,ee.noMarginBottom)},m.createElement("strong",null,"Version ",b.version)," updated by ",b.createdBy," ",b.ageString," -"," ",b.message)),H&&m.createElement(l.JY,null,({showModal:ue,hideModal:q})=>m.createElement(r.zx,{variant:"destructive",icon:"history",onClick:()=>{ue(C,{version:b.version,hideModal:q})}},"Restore to version ",b.version)))),m.createElement("div",{className:ee.spacer},Object.entries(Y).map(([ue,q])=>m.createElement(N.B,{diffs:q,key:ue,title:ue}))),m.createElement(A.s,{isOpen:!1,label:"View JSON Diff"},m.createElement(W.Z,{oldValue:JSON.stringify(k.lhs,null,2),newValue:JSON.stringify(k.rhs,null,2)})))},V=b=>({spacer:i.css`
    margin-bottom: ${b.spacing(4)};
  `,versionInfo:i.css`
    color: ${b.colors.text.secondary};
    font-size: ${b.typography.bodySmall.fontSize};
  `,noMarginBottom:i.css`
    margin-bottom: 0;
  `})},15092:(G,O,e)=>{"use strict";e.d(O,{Q$:()=>i,dW:()=>m});var t=e(92497),n=e(56070),u=e(82897),s=e.n(u);const i=(l,r)=>{const d=(0,t.qu)(l,r),c=n.stringify(l,null,2),g=n.stringify(r,null,2),p=a=>a.map(v=>{let C,E,P=0;const x=(0,u.tail)(v.path.split("/"));return v.op==="replace"&&(C=(0,u.get)(l,x),E=v.value,P=g.pointers[v.path].value.line),v.op==="add"&&(E=v.value,P=g.pointers[v.path].value.line),v.op==="remove"&&(C=(0,u.get)(l,x),P=c.pointers[v.path].value.line),{op:v.op,value:E,path:x,originalValue:C,startLineNumber:P}}),y=a=>(0,u.sortBy)(a,"startLineNumber"),h=a=>a.reduce((v,C)=>{const E=C.path[0];return v[E]||(v[E]=[]),v[E].push(C),v},{});return(0,u.flow)([p,y,h])(d)},m=(l,r=!0)=>{const d=(0,u.last)(l.path),c=f(d),g=l.op==="remove"?l.originalValue:l.value;let p=o(l.op);return r&&(c?p+=` item ${d}`:(0,u.isArray)(g)&&!(0,u.isEmpty)(g)?p+=` ${g.length} ${d}`:p+=` ${d}`),p},f=l=>!(0,u.isNaN)((0,u.toNumber)(l)),o=l=>l==="add"?"added":l==="remove"?"deleted":"changed"},79860:(G,O,e)=>{"use strict";e.d(O,{u:()=>f});var t=e(52423),n=e(68404),u=e(68183),s=e(29516),i=e(84666),m=e(81697);const f=r=>{const[d,c]=(0,n.useState)(null),g=r.type==="submenu",p=r.type==="divider",y=(0,s.wW)(l),h=r.iconClassName?(0,i.toIconName)(r.iconClassName):void 0;return p?n.createElement("li",{className:"divider"}):n.createElement("li",{className:g?`dropdown-submenu ${o(d)}`:void 0,ref:c},n.createElement("a",{onClick:r.onClick,href:r.href},h&&n.createElement(m.J,{name:h,className:y.menuIconClassName}),n.createElement("span",{className:"dropdown-item-text","aria-label":u.wl.components.Panels.Panel.headerItems(r.text)},r.text,g&&n.createElement(m.J,{name:"angle-right",className:y.shortcutIconClassName})),r.shortcut&&n.createElement("span",{className:"dropdown-menu-item-shortcut"},n.createElement(m.J,{name:"keyboard",className:y.menuIconClassName})," ",r.shortcut)),r.children)};function o(r){if(!r)return"invisible";const d=r.parentElement.getBoundingClientRect(),c=r.getBoundingClientRect();return c.width===0?"invisible":d.right+c.width+10>window.innerWidth?"pull-left":"pull-right"}function l(r){return{menuIconClassName:(0,t.css)({marginRight:r.spacing(1),"a::after":{display:"none"}}),shortcutIconClassName:(0,t.css)({position:"absolute",top:"7px",right:r.spacing(.5),color:r.colors.text.secondary})}}},6911:(G,O,e)=>{"use strict";e.d(O,{A:()=>o});var t=e(63479),n=e(46519),u=e(21053);const s=100;class i{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new t.X(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const r=Date.now();this.budget=(r-this.lastUpdate)/s;const d=this.ok.getValue(),c=this.budget<=this.threshold;if(d!==c&&this.ok.next(c),this.lastUpdate=r,this.isLive&&this.ok.getValue()&&this.timeRange){let g;for(const p of this.listeners){if(!p.panel.props.isInView)continue;if(r-p.last>=p.intervalMs){if(!g){const{raw:h}=this.timeRange;g={raw:h,from:(0,n.CQ)(r-this.liveTimeOffset),to:(0,n.CQ)(r)}}p.panel.liveTimeChanged(g),p.last=r}}}}}setLiveTimeRange(r){if(this.timeRange=r,this.isLive=r?.raw?.to==="now",this.isLive){const d=u.parse(r.raw.from,!1)?.valueOf(),c=u.parse(r.raw.to,!0)?.valueOf();this.liveTimeOffset=c-d;for(const g of this.listeners)g.intervalMs=f(this.liveTimeOffset,g.panel.props.width)}}listen(r){this.listeners.push({last:this.lastUpdate,panel:r,intervalMs:f(6e4,r.props.width)})}remove(r){this.listeners=this.listeners.filter(d=>d.panel!==r)}updateInterval(r){if(!(!this.timeRange||!this.isLive)){for(const d of this.listeners)if(d.panel===r){d.intervalMs=f(this.liveTimeOffset,d.panel.props.width);return}}}}const m=5*60*1e3;function f(l,r){const d=Math.ceil(l/r/100)*100;return d>m?m:d}const o=new i;setInterval(o.measure,s)},87449:(G,O,e)=>{"use strict";e.d(O,{Bg:()=>C,pD:()=>E});var t=e(21256),n=e.n(t),u=e(82897),s=e.n(u),i=e(36365),m=e.n(i),f=e(25318),o=e(21053),l=e(47214),r=e(57388),d=e(29930),c=e(13019),g=e(24816),p=e(91162),y=e(63163),h=e(81168),a=e(77582),v=e(9398);class C{constructor(){}_dashboardLoadFailed(M,S){return S=S||!1,{meta:{canStar:!1,isSnapshot:S,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:M}}}loadDashboard(M,S,D){let T;return M==="script"?T=this._loadScriptedDashboard(S):M==="snapshot"?T=d.ae.get("/api/snapshots/"+S).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0)):M===h.DashboardRoutes.Path?T=(0,y.$)().getDashboard(S):M==="ds"?T=this._loadFromDatasource(S):M==="public"?T=d.ae.getPublicDashboardByUid(D).then(R=>R).catch(()=>this._dashboardLoadFailed("Public Dashboard Not found",!0)):T=d.ae.getDashboardByUid(D).then(R=>{if(R.meta.isFolder)throw a.h$.emit(f.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return R}).catch(()=>this._dashboardLoadFailed("Not found",!0)),T.then(R=>(R.meta.dashboardNotFound!==!0&&c.Z.addDashboardImpression(R.dashboard.uid),R)),T}_loadScriptedDashboard(M){const S="public/dashboards/"+M.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,l.i)().get(S).then(this._executeScript.bind(this)).then(D=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:D.data}),D=>(console.error("Script dashboard error "+D),a.h$.emit(f.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(M){const S=await(0,p.ak)().get(M);if(!S)return Promise.reject("can not find datasource: "+M);const D=new URLSearchParams(window.location.search),T=D.get("path");if(!T)return Promise.reject("expecting path parameter");const R={};return D.forEach((L,w)=>{R[w]=L}),(0,l.i)().get(`/api/datasources/${S.id}/resources/${T}`,R).then(L=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:L}))}_executeScript(M){const S={dashboardSrv:(0,v.h4)(),datasourceSrv:(0,p.ak)()},T=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",M)(r.E1.getSearchObject(),g.Z,o,s(),m(),window,document,n(),n(),S);return(0,u.isFunction)(T)?new Promise(R=>{T(L=>{R({data:L})})}):{data:T}}}let E=new C;const P=x=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},9398:(G,O,e)=>{"use strict";e.d(O,{h4:()=>g});var t=e(3363),n=e(25318),u=e(97063),s=e(35287),i=e(29930),m=e(50946),f=e(45984),o=e(82302),l=e(2476);class r{constructor(){this.onRemovePanel=y=>{const h=this.getCurrent();h&&(0,l.WJ)(h,h.getPanelById(y),!0)},u.h.subscribe(f.Eb,y=>this.onRemovePanel(y.payload))}create(y,h){return new o.f(y,h)}setCurrent(y){this.dashboard=y}getCurrent(){return this.dashboard||console.warn("Calling getDashboardSrv().getCurrent() without calling getDashboardSrv().setCurrent() first."),this.dashboard}saveJSONDashboard(y){const h=JSON.parse(y);return(0,m.uC)({dashboard:h,folderUid:this.dashboard?.meta.folderUid||h.folderUid})}saveDashboard(y,h){return(0,t.n)((0,i.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...y,dashboard:y.dashboard.getSaveModelClone()},...h}))}starDashboard(y,h){const a=(0,i.i)(),v={showSuccessAlert:!1,url:"/api/user/stars/dashboard/"+y,method:h?"DELETE":"POST"};return a.request(v).then(()=>{const C=!h;this.dashboard?.id===y&&(this.dashboard.meta.isStarred=C);const E=C?(0,s.t)("notifications.starred-dashboard","Dashboard starred"):(0,s.t)("notifications.unstarred-dashboard","Dashboard unstarred");return u.h.emit(n.SI.alertSuccess,[E]),C})}}let d;function c(p){d=p}function g(){return d||(d=new r),d}},17424:(G,O,e)=>{"use strict";e.d(O,{Qi:()=>c,lh:()=>p});var t=e(53786),n=e(85526),u=e(13016),s=e(94514),i=e(7238),m=e(16911),f=e(47214),o=e(88635),l=e(7832),r=e(63496),d=e(45849);const c="-- Public --",g="1min";class p extends i.MF{constructor(h){let a={};p.isMixedDatasource(h)&&(a.mixed=!0),super({name:"public-ds",id:0,type:"public-ds",meta:a,uid:p.resolveUid(h),jsonData:{},access:"proxy",readOnly:!0}),this.interval=p.resolveInterval(h),this.annotations={prepareQuery(v){return{...v,queryType:l.hR.Annotations,refId:"anno"}}}}static resolveUid(h){return typeof h=="string"?h:h?.uid??c}static isMixedDatasource(h){return typeof h=="string"||h==null?!1:h?.uid===r.D}static resolveInterval(h){return typeof h=="string"||h==null?g:("interval"in h?h.interval:void 0)??g}query(h){const{intervalMs:a,maxDataPoints:v,requestId:C,publicDashboardAccessToken:E,panelId:P,range:{from:x,to:M}}=h;let S;if(!h.targets.length)return(0,t.of)({data:[]});const D=h.targets[0];if(D.queryType===l.hR.Annotations)return D?.datasource?.uid===d.JY?(0,n.D)(this.getAnnotations(h)):(0,t.of)({data:[]});{const T={intervalMs:a,maxDataPoints:v,timeRange:{from:x.valueOf().toString(),to:M.valueOf().toString()}};return(0,f.i)().fetch({url:`/api/public/dashboards/${E}/panels/${P}/query`,method:"POST",data:T,requestId:C}).pipe((0,u.w)(R=>(0,t.of)((0,o.z1)(R,S))),(0,s.K)(R=>(0,t.of)((0,o.z1)(R))))}}async getAnnotations(h){const{publicDashboardAccessToken:a,range:{to:v,from:C}}=h,E={from:C.valueOf(),to:v.valueOf()},P=a?await(0,f.i)().get(`/api/public/dashboards/${a}/annotations`,E):[];return{data:[(0,m.g0)(P)]}}testDatasource(){return Promise.resolve(null)}}},19349:(G,O,e)=>{"use strict";e.d(O,{$t:()=>v});var t=e(82897),n=e(46519),u=e(69311),s=e(33180),i=e(21053),m=e(57388),f=e(97063),o=e(47694),l=e(82002),r=e(5242),d=e(74124),c=e(45984),g=e(45781);function p({urlRefresh:C,currentRefresh:E,isAllowedIntervalFn:P,minRefreshInterval:x,refreshIntervals:M=g.o5}){if(!C)return E;const S=P(C),D=M.find(T=>T===C);if(!S||!D){const T=x?M.find(L=>L===x):void 0,R=M?.length?M[0]:void 0;return T??R??E}return C||E}class y{constructor(E){this.contextSrv=E,this.autoRefreshPaused=!1,this.timeRangeForUrl=()=>{const P=this.timeRange().raw;return(0,n.v9)(P.from)&&(P.from=P.from.valueOf().toString()),(0,n.v9)(P.to)&&(P.to=P.to.valueOf().toString()),P},this.time=(0,u.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),f.Z.subscribe(c.p8,P=>{this.zoomOut(P.payload.scale,P.payload.updateUrl)}),f.Z.subscribe(c.Qt,P=>{this.shiftTime(P.payload.direction,P.payload.updateUrl)}),f.Z.subscribe(c.QI,()=>{this.makeAbsoluteTime()}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(E){this.timeModel=E,this.time=E.time,this.refresh=E.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time);const P=s.convertRawToRange(this.time,this.timeModel?.getTimezone(),this.timeModel?.fiscalYearStartMonth);P.to.isBefore(P.from)&&this.setTime({from:P.raw.to,to:P.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(E){return this.contextSrv.minRefreshInterval?E.filter(P=>P!=="").filter(this.contextSrv.isAllowedInterval):E}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.CQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.CQ)(this.time.to).utc())}parseUrlParam(E){if(E.indexOf("now")!==-1)return E;if(E.length===8){const P=(0,n.zh)(E,"YYYYMMDD");if(P.isValid())return P}else if(E.length===15){const P=(0,n.zh)(E,"YYYYMMDDTHHmmss");if(P.isValid())return P}if(!isNaN(E)){const P=parseInt(E,10);return(0,n.zh)(P)}return null}getTimeWindow(E,P){const x=parseInt(E,10);let M;return P.match(/^\d+$/)&&parseInt(P,10)?M=parseInt(P,10):M=s.intervalToMs(P),{from:(0,n.zh)(x-M/2),to:(0,n.zh)(x+M/2)}}initTimeFromUrl(){if(o.vc.isPublicDashboardView&&this.timeModel?.timepicker?.hidden)return;const E=m.E1.getSearch();E.get("time")&&E.get("time.window")&&(this.time=this.getTimeWindow(E.get("time"),E.get("time.window"))),E.get("from")&&(this.time.from=this.parseUrlParam(E.get("from"))||this.time.from),E.get("to")&&(this.time.to=this.parseUrlParam(E.get("to"))||this.time.to),E.get("to")&&E.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=p({urlRefresh:E.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:o.vc.minRefreshInterval})}updateTimeRangeFromUrl(){const E=m.E1.getSearch();if(E.get("left"))return;const P=this.timeRangeForUrl(),x=E.get("from"),M=E.get("to");x&&M?(x!==P.from||M!==P.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(E){this.timeModel&&(this.timeModel.refresh=E),this.stopAutoRefresh();const P=m.E1.getSearchObject();if(!E){P.refresh&&m.E1.partial({refresh:null},!0);return}const x=this.contextSrv.getValidInterval(E),M=s.intervalToMs(x);this.refreshTimer=setTimeout(()=>{this.startNextRefreshTimer(M),!this.autoRefreshPaused&&this.refreshTimeModel()},M);const S=this.contextSrv.getValidInterval(E);P.refresh!==S&&m.E1.partial({refresh:S},!0)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(E){this.refreshTimer=setTimeout(()=>{this.startNextRefreshTimer(E),this.contextSrv.isGrafanaVisible()?!this.autoRefreshPaused&&this.refreshTimeModel():this.autoRefreshBlocked=!0},E)}stopAutoRefresh(){clearTimeout(this.refreshTimer)}pauseAutoRefresh(){this.autoRefreshPaused=!0}resumeAutoRefresh(){this.autoRefreshPaused=!1,this.refreshTimeModel()}setTime(E,P=!0){if((0,t.extend)(this.time,E),(0,n.v9)(E.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null),P===!0){const x=this.timeRangeForUrl(),M=m.E1.getSearchObject();if(M.from===x.from.toString()&&M.to===x.to.toString())return;M.from=x.from.toString(),M.to=x.to.toString(),m.E1.partial(M)}this.refreshTimeModel()}timeRange(){return(0,d.O)(this.time,this.timeModel)}zoomOut(E,P=!0){const x=this.timeRange(),{from:M,to:S}=(0,r.h)(x,E);this.setTime({from:(0,n.zh)(M),to:(0,n.zh)(S)},P)}shiftTime(E,P=!0){const x=this.timeRange(),{from:M,to:S}=(0,r.e)(E,x);this.setTime({from:(0,n.zh)(M),to:(0,n.zh)(S)},P)}makeAbsoluteTime(){if(m.E1.getSearch().get("left"))return;const{from:P,to:x}=this.timeRange();this.setTime({from:P,to:x},!0)}isRefreshOutsideThreshold(E,P=.05){const x=this.timeRange();if(i.isMathString(x.raw.from)){const M=x.to.diff(x.from),S=Date.now()-E,D=M*P;return S>=D}return!1}}let h;function a(C){h=C}function v(){return h||(h=new y(l.Vt)),h}},7592:(G,O,e)=>{"use strict";e.d(O,{o:()=>I,p:()=>H});var t=e(82897),n=e(35363),u=e(5916),s=e(27677),i=e(89029),m=e(26031),f=e(58230),o=e(85854),l=e(14582),r=e(1052),d=e(10158),c=e(77213),g=e(40538),p=e(78058),y=e(52974),h=e(47694),a=e(84952);function v(me){return Array.from(new Array(me+1),(ce,ie)=>ie).filter(ce=>me%ce===0)}var C=e(24816),E=e(91162),P=e(15546),x=e(96188),M=e(63496),S=e(7149),D=e(98967),T=e(99822),R=e(2868);function L(me,ce){const ie=[];if(me?.statistics&&me?.statistics.length){me.statistic=me.statistics[0];for(const re of me.statistics.splice(1))ie.push({...me,statistic:re})}for(const re of ie)re.refId=(0,T.Hs)(ce),delete re.statistics,ce.push(re);return delete me.statistics,ie}function w(me){const ce=[];if(me&&"statistics"in me&&me?.statistics?.length){for(const ie of me.statistics.splice(1)){const{statistics:re,name:Ee,...J}=me;ce.push({...J,statistic:ie,name:`${Ee} - ${ie}`})}me.statistic=me.statistics[0],ce.length!==0&&(me.name=`${me.name} - ${me.statistic}`),delete me.statistics}return ce}function A(me){me.hasOwnProperty("metricQueryType")||(me.metricQueryType=R.$5.Search),me.hasOwnProperty("metricEditorMode")||(me.metricQueryType===R.$5.Query?me.metricEditorMode=R.MQ.Code:me.metricEditorMode=me.expression?R.MQ.Code:R.MQ.Builder)}var N=e(10672),W=e(96161);n.S.setInit(y.u),n.N.setInit(y.l);class I{constructor(ce){this.dashboard=ce,(0,c.F)()||(0,c.w)(new E.ND)}updateSchema(ce){let ie,re,Ee,J;const te=this.dashboard.schemaVersion,ne=[];if(this.dashboard.schemaVersion=38,te!==this.dashboard.schemaVersion){if(te<2&&(ce.services&&ce.services.filter&&(this.dashboard.time=ce.services.filter.time,this.dashboard.templating.list=ce.services.filter.list||[]),ne.push(j=>(j.type==="graphite"&&(j.type="graph"),j.type!=="graph"||((0,t.isBoolean)(j.legend)&&(j.legend={show:j.legend}),j.grid&&(j.grid.min&&(j.grid.leftMin=j.grid.min,delete j.grid.min),j.grid.max&&(j.grid.leftMax=j.grid.max,delete j.grid.max)),j.y_format&&(j.y_formats||(j.y_formats=[]),j.y_formats[0]=j.y_format,delete j.y_format),j.y2_format&&(j.y_formats||(j.y_formats=[]),j.y_formats[1]=j.y2_format,delete j.y2_format)),j))),te<3){let j=this.dashboard.getNextPanelId();ne.push(be=>(be.id||(be.id=j,j+=1),be))}if(te<4&&ne.push(j=>(j.type!=="graph"||((0,t.each)(j.aliasYAxis,(be,Le)=>{j.seriesOverrides=[{alias:Le,yaxis:be}]}),delete j.aliasYAxis),j)),te<6){const j=(0,t.find)(ce.pulldowns,{type:"annotations"});for(j&&(this.dashboard.annotations={list:j.annotations||[]}),ie=0;ie<this.dashboard.templating.list.length;ie++){const be=this.dashboard.templating.list[ie];be.datasource===void 0&&(be.datasource=null),be.type==="filter"&&(be.type="query"),be.type===void 0&&(be.type="query"),be.allFormat===void 0&&(be.allFormat="glob")}}if(te<7&&(ce.nav&&ce.nav.length&&(this.dashboard.timepicker=ce.nav[0]),ne.push(j=>((0,t.each)(j.targets,be=>{be.refId||(be.refId=j.getNextQueryLetter&&j.getNextQueryLetter())}),j))),te<8&&ne.push(j=>((0,t.each)(j.targets,be=>{be.fields&&be.tags&&be.groupBy&&(be.rawQuery?(delete be.fields,delete be.fill):(be.select=(0,t.map)(be.fields,Le=>{const Qe=[];return Qe.push({type:"field",params:[Le.name]}),Qe.push({type:Le.func,params:[]}),Le.mathExpr&&Qe.push({type:"math",params:[Le.mathExpr]}),Le.asExpr&&Qe.push({type:"alias",params:[Le.asExpr]}),Qe}),delete be.fields,(0,t.each)(be.groupBy,Le=>{Le.type==="time"&&Le.interval&&(Le.params=[Le.interval],delete Le.interval),Le.type==="tag"&&Le.key&&(Le.params=[Le.key],delete Le.key)}),be.fill&&(be.groupBy.push({type:"fill",params:[be.fill]}),delete be.fill)))}),j)),te<9&&ne.push(j=>{if(j.type!=="singlestat"&&j.thresholds!=="")return j;if(j.thresholds){const be=j.thresholds.split(",");be.length>=3&&(be.shift(),j.thresholds=be.join(","))}return j}),te<10&&ne.push(j=>(j.type!=="table"||(0,t.each)(j.styles,be=>{if(be.thresholds&&be.thresholds.length>=3){const Le=be.thresholds;Le.shift(),be.thresholds=Le}}),j)),te<12&&(0,t.each)(this.dashboard.getVariables(),j=>{j.refresh&&(j.refresh=1),j.refresh||(j.refresh=0),j.hideVariable?j.hide=2:j.hideLabel&&(j.hide=1)}),te<12&&ne.push(j=>(j.type!=="graph"||!j.grid||j.yaxes||(j.yaxes=[{show:j["y-axis"],min:j.grid.leftMin,max:j.grid.leftMax,logBase:j.grid.leftLogBase,format:j.y_formats[0],label:j.leftYAxisLabel},{show:j["y-axis"],min:j.grid.rightMin,max:j.grid.rightMax,logBase:j.grid.rightLogBase,format:j.y_formats[1],label:j.rightYAxisLabel}],j.xaxis={show:j["x-axis"]},delete j.grid.leftMin,delete j.grid.leftMax,delete j.grid.leftLogBase,delete j.grid.rightMin,delete j.grid.rightMax,delete j.grid.rightLogBase,delete j.y_formats,delete j.leftYAxisLabel,delete j.rightYAxisLabel,delete j["y-axis"],delete j["x-axis"]),j)),te<13&&ne.push(j=>{if(j.type!=="graph"||!j.grid)return j;j.thresholds||(j.thresholds=[]);const be={},Le={};return j.grid.threshold1!==null&&(be.value=j.grid.threshold1,j.grid.thresholdLine?(be.line=!0,be.lineColor=j.grid.threshold1Color,be.colorMode="custom"):(be.fill=!0,be.fillColor=j.grid.threshold1Color,be.colorMode="custom")),j.grid.threshold2!==null&&(Le.value=j.grid.threshold2,j.grid.thresholdLine?(Le.line=!0,Le.lineColor=j.grid.threshold2Color,Le.colorMode="custom"):(Le.fill=!0,Le.fillColor=j.grid.threshold2Color,Le.colorMode="custom")),(0,t.isNumber)(be.value)&&((0,t.isNumber)(Le.value)?be.value>Le.value?(be.op=Le.op="lt",j.thresholds.push(be),j.thresholds.push(Le)):(be.op=Le.op="gt",j.thresholds.push(be),j.thresholds.push(Le)):(be.op="gt",j.thresholds.push(be))),delete j.grid.threshold1,delete j.grid.threshold1Color,delete j.grid.threshold2,delete j.grid.threshold2Color,delete j.grid.thresholdLine,j}),te<14&&(this.dashboard.graphTooltip=ce.sharedCrosshair?1:0),te<16&&this.upgradeToGridLayout(ce),te<17&&ne.push(j=>{if(j.minSpan){const be=a.cz/j.minSpan,Le=v(a.cz);j.maxPerRow=Le[(0,t.findIndex)(Le,Qe=>Qe>be)-1]}return delete j.minSpan,j}),te<18&&ne.push(j=>(j["options-gauge"]&&(j.options=j["options-gauge"],j.options.valueOptions={unit:j.options.unit,stat:j.options.stat,decimals:j.options.decimals,prefix:j.options.prefix,suffix:j.options.suffix},j.options.thresholds&&j.options.thresholds.reverse(),delete j.options.options,delete j.options.unit,delete j.options.stat,delete j.options.decimals,delete j.options.prefix,delete j.options.suffix,delete j["options-gauge"]),j)),te<19&&ne.push(j=>(j.links&&(0,t.isArray)(j.links)&&(j.links=j.links.map(b)),j)),te<20){const j=be=>({...be,url:X(be.url)});ne.push(be=>(be.options&&be.options.dataLinks&&(0,t.isArray)(be.options.dataLinks)&&(be.options.dataLinks=be.options.dataLinks.map(j)),be.options&&be.options.fieldOptions&&be.options.fieldOptions.defaults&&(be.options.fieldOptions.defaults.links&&(0,t.isArray)(be.options.fieldOptions.defaults.links)&&(be.options.fieldOptions.defaults.links=be.options.fieldOptions.defaults.links.map(j)),be.options.fieldOptions.defaults.title&&(be.options.fieldOptions.defaults.title=X(be.options.fieldOptions.defaults.title))),be))}if(te<21){const j=be=>({...be,url:be.url.replace(/__series.labels/g,"__field.labels")});ne.push(be=>(be.options&&be.options.dataLinks&&(0,t.isArray)(be.options.dataLinks)&&(be.options.dataLinks=be.options.dataLinks.map(j)),be.options&&be.options.fieldOptions&&be.options.fieldOptions.defaults&&be.options.fieldOptions.defaults.links&&(0,t.isArray)(be.options.fieldOptions.defaults.links)&&(be.options.fieldOptions.defaults.links=be.options.fieldOptions.defaults.links.map(j)),be))}if(te<22&&ne.push(j=>(j.type!=="table"||(0,t.each)(j.styles,be=>{be.align="auto"}),j)),te<23)for(const j of this.dashboard.templating.list){if(!(0,P.U4)(j))continue;const{multi:be,current:Le}=j;j.current=(0,x.x)(Le,be)}if(te<24&&ne.push(j=>{const be=j.type==="table";if(be&&!j.styles)return j;const Le=j.table==="table2";return!be||Le||(j.type=be?"table-old":"table"),j}),te<25,te<26&&ne.push(j=>(j.type==="text2"&&(j.type="text",delete j.options.angular),j)),te<27&&(this.dashboard.templating.list=this.dashboard.templating.list.map(j=>{if(!(0,P.VC)(j))return j;const be={...j};return be.current={selected:!0,text:be.query??"",value:be.query??""},be.options=[be.current],be.hide===N.bU.dontHide||be.hide===N.bU.hideLabel?{...be,type:"textbox"}:be})),te<28){ne.push(j=>j.type==="singlestat"?k(j):j);for(const j of this.dashboard.templating.list)j.tags&&delete j.tags,j.tagsQuery&&delete j.tagsQuery,j.tagValuesQuery&&delete j.tagValuesQuery,j.useTags&&delete j.useTags}if(te<29)for(const j of this.dashboard.templating.list)j.type==="query"&&(j.refresh!==1&&j.refresh!==2&&(j.refresh=1),j.options?.length&&(j.options=[]));if(te<30&&(ne.push(ee),ne.push(De)),te<31&&ne.push(j=>{if(j.transformations){for(const be of j.transformations)if(be.id===r.r.id)return Y(j,r.r.id,{id:d.R.id,options:{}})}return j}),te<32,te<33&&ne.push(j=>{if(j.datasource=H(j.datasource,{returnDefaultAsNull:!0}),!j.targets)return j;for(const be of j.targets){const Le=H(be.datasource,{returnDefaultAsNull:!0});Le!=null&&(be.datasource=Le)}return j}),te<34&&(ne.push(j=>(this.migrateCloudWatchQueries(j),j)),this.migrateCloudWatchAnnotationQuery()),te<35&&ne.push(fe),te<36){for(const be of this.dashboard.annotations.list)be.datasource=H(be.datasource,{returnDefaultAsNull:!1});const j=(0,c.F)().getInstanceSettings(null);if(j){for(const be of this.dashboard.templating.list)be.type==="query"&&be.datasource===null&&(be.datasource=(0,u.iU)(j));ne.push(be=>{if(be.targets){let Le=!1;be.datasource==null&&be.targets.length>0&&(be.datasource=(0,u.iU)(j),Le=!0);for(const Qe of be.targets)(Qe.datasource==null||Qe.datasource.uid==null)&&(be.datasource?.uid!==M.D?Qe.datasource={...be.datasource}:Qe.datasource=H(Qe.datasource,{returnDefaultAsNull:!1})),Le&&Qe.datasource?.uid!=="__expr__"&&(be.datasource=Qe.datasource)}return be})}}if(te<37&&ne.push(j=>(j.options?.legend&&(j.options.legend.displayMode==="hidden"||j.options.legend.showLegend===!1)?(j.options.legend.displayMode="list",j.options.legend.showLegend=!1):j.options?.legend&&(j.options.legend={...j.options?.legend,showLegend:!0}),j)),te<38&&ne.push(j=>{if(j.type==="table"&&j.fieldConfig!==void 0){const be=j.fieldConfig.defaults?.custom?.displayMode;be!==void 0&&(j.fieldConfig.defaults.custom.cellOptions=(0,p.q7)(be),delete j.fieldConfig.defaults.custom.displayMode);for(let Le=0;Le<j.fieldConfig.overrides.length;Le++)for(let Qe=0;Qe<j.fieldConfig.overrides[Le].properties.length;Qe++){let Ye=j.fieldConfig.overrides[Le].properties[Qe].value;j.fieldConfig.overrides[Le].properties[Qe].id==="custom.displayMode"&&(j.fieldConfig.overrides[Le].properties[Qe].id="custom.cellOptions",j.fieldConfig.overrides[Le].properties[Qe].value=(0,p.q7)(Ye))}}return j}),ne.length!==0)for(re=0;re<this.dashboard.panels.length;re++)for(Ee=0;Ee<ne.length;Ee++){this.dashboard.panels[re]=ne[Ee].call(this,this.dashboard.panels[re]);const j=this.dashboard.panels[re].panels;if(j)for(J=0;J<j.length;J++)j[J]=ne[Ee].call(this,j[J])}}}migrateCloudWatchQueries(ce){for(const ie of ce.targets||[])if(ue(ie)&&(A(ie),ie.hasOwnProperty("statistics"))){const re=L(ie,[...ce.targets]);for(const Ee of re)ce.targets.push(Ee)}}migrateCloudWatchAnnotationQuery(){for(const ce of this.dashboard.annotations.list)if(q(ce)){const ie=w(ce);for(const re of ie)this.dashboard.annotations.list.push(re)}}upgradeToGridLayout(ce){let ie=0;const re=a.cz/12;let J=(0,t.max)((0,t.flattenDeep)((0,t.map)(ce.rows,ne=>(0,t.map)(ne.panels,"id"))))+1;if(!ce.rows)return;const te=(0,t.some)(ce.rows,ne=>ne.collapse||ne.showTitle||ne.repeat);for(const ne of ce.rows){if(ne.repeatIteration)continue;const j=ne.height||a.b0,be=F(j),Le={};let Qe;te&&(Le.id=J,Le.type="row",Le.title=ne.title,Le.collapsed=ne.collapse,Le.repeat=ne.repeat,Le.panels=[],Le.gridPos={x:0,y:ie,w:a.cz,h:be},Qe=new W.r(Le),J++,ie++);const Ye=new V(be,a.cz,ie);for(const de of ne.panels){de.span=de.span||a.kh,de.minSpan&&(de.minSpan=Math.min(a.cz,a.cz/12*de.minSpan));const Be=Math.floor(de.span)*re,Ve=de.height?F(de.height):be,$e=Ye.getPanelPosition(Ve,Be);ie=Ye.yPos,de.gridPos={x:$e.x,y:ie+$e.y,w:Be,h:Ve},Ye.addPanel(de.gridPos),delete de.span,Qe&&Le.collapsed?Qe.panels?.push(de):this.dashboard.panels.push(new W.r(de))}Qe&&this.dashboard.panels.push(Qe),Qe&&Le.collapsed||(ie+=be)}}}function F(me){return(0,t.isString)(me)&&(me=parseInt(me.replace("px",""),10)),me<a.AV&&(me=a.AV),Math.ceil(me/(a.K3+a.hD))}class V{constructor(ce,ie=a.cz,re=0){this.area=new Array(ie).fill(0),this.yPos=re,this.height=ce}reset(){this.area.fill(0)}addPanel(ce){for(let ie=ce.x;ie<ce.x+ce.w;ie++)(!this.area[ie]||ce.y+ce.h-this.yPos>this.area[ie])&&(this.area[ie]=ce.y+ce.h-this.yPos);return this.area}getPanelPosition(ce,ie,re=!1){let Ee,J,te;for(let ne=this.area.length-1;ne>=0&&this.height-this.area[ne]>0;ne--)if(J===void 0)J=ne;else if(ne<this.area.length-1&&this.area[ne]<=this.area[ne+1])Ee=ne;else break;if(Ee!==void 0&&J!==void 0&&J-Ee>=ie-1){const ne=(0,t.max)(this.area.slice(Ee));te={x:Ee,y:ne}}else return re?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(ce,ie,!0));return te}}function b(me){let ce=me.url;return!ce&&me.dashboard&&(ce=`dashboard/db/${C.Z.slugifyForUrl(me.dashboard)}`),!ce&&me.dashUri&&(ce=`dashboard/${me.dashUri}`),ce||(ce="/"),me.keepTime&&(ce=s.Cj.appendQueryToUrl(ce,`$${i.W.keepTime}`)),me.includeVars&&(ce=s.Cj.appendQueryToUrl(ce,`$${i.W.includeVars}`)),me.params&&(ce=s.Cj.appendQueryToUrl(ce,me.params)),{url:ce,title:me.title,targetBlank:me.targetBlank}}function X(me){const ce=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return me.replace(ce,(ie,re,Ee,J,te,ne)=>re?"__series.name":Ee?"${__series.name}":J?"__value.time":te?"__field.name":ne?"${__field.name}":ie)}function k(me){if(h.vc.panels["grafana-singlestat-panel"])return me.type="grafana-singlestat-panel",me;let ce=!1;return me.changePlugin||(ce=!0,me=new W.r(me)),me.plugin={angularPanelCtrl:{}},me.gauge?.show?(S.plugin.meta=h.vc.panels.gauge,me.changePlugin(S.plugin)):(D.plugin.meta=h.vc.panels.stat,me.changePlugin(D.plugin)),ce?me.getSaveModel():me}function H(me,ce){if(ce.returnDefaultAsNull&&(me==null||me==="default"))return null;if((0,u.cv)(me))return me;const ie=(0,c.F)().getInstanceSettings(me);return ie?(0,u.iU)(ie):{uid:me}}function Y(me,ce,ie){if(me.transformations){const re=[];for(const Ee of me.transformations)re.push(Ee),Ee.id===ce&&re.push({...ie});me.transformations=re}return me}function ee(me){const ce=me.fieldConfig;if(!ce)return me;if(ce.defaults&&ce.defaults.mappings&&(ce.defaults.mappings=ge(ce.defaults.mappings,ce.defaults.thresholds)),Array.isArray(ce.overrides))for(const ie of ce.overrides)for(const re of ie.properties)re.id==="mappings"&&(re.value=ge(re.value));return me}function ue(me){return me.hasOwnProperty("dimensions")&&me.hasOwnProperty("namespace")&&me.hasOwnProperty("region")&&me.hasOwnProperty("metricName")}function q(me){return me.hasOwnProperty("dimensions")&&me.hasOwnProperty("namespace")&&me.hasOwnProperty("region")&&me.hasOwnProperty("prefixMatching")&&me.hasOwnProperty("statistics")}function ge(me,ce){if(!me)return;const ie={type:m.H.ValueToText,options:{}},re=[];for(const Ee of me){if(Ee.type&&Ee.options){Ee.type===m.H.ValueToText?ie.options={...ie.options,...Ee.options}:re.push(Ee);continue}let J;const te=parseFloat(Ee.text);if(ce&&!isNaN(te)){const ne=(0,f.m1)(te,ce.steps);ne&&ne.color&&(J=ne.color)}switch(Ee.type){case 1:Ee.value!=null&&(Ee.value==="null"?re.push({type:m.H.SpecialValue,options:{match:m.e.Null,result:{text:Ee.text,color:J}}}):ie.options[String(Ee.value)]={text:Ee.text,color:J});break;case 2:re.push({type:m.H.RangeToText,options:{from:+Ee.from,to:+Ee.to,result:{text:Ee.text,color:J}}});break}}return Object.keys(ie.options).length>0&&re.unshift(ie),re}function De(me){return(me.type==="timeseries"||me.type==="xychart")&&me.options.tooltipOptions&&(me.options={...me.options,tooltip:me.options.tooltipOptions},delete me.options.tooltipOptions),me}function fe(me){return me.type==="timeseries"&&me.fieldConfig?.defaults.custom?.axisPlacement===g.LB.Hidden&&(me.fieldConfig={...me.fieldConfig,overrides:[...me.fieldConfig.overrides,{matcher:{id:o.mi.byType,options:l.fS.time},properties:[{id:"custom.axisPlacement",value:g.LB.Auto}]}]}),me}},82302:(G,O,e)=>{"use strict";e.d(O,{f:()=>N});var t=e(82897),n=e(95484),u=e(85081),s=e(38849),i=e(46519),m=e(1821),f=e(1301),o=e(84952),l=e(82002);function r(I){return(0,t.isArray)(I)?I.map(r):(0,t.isPlainObject)(I)?Object.keys(I).sort().reduce((F,V)=>{const b=I[V];return b!=null&&(F[V]=r(b)),F},{}):I}var d=e(22323),c=e(85803),g=e(87095),p=e(81168),y=e(45984),h=e(77582),a=e(3153),v=e(10672),C=e(92624),E=e(19349),P=e(86899);const x=new Set(["gridPos","title","description","transparent"]);function M(I,F){const V=[],b={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:V};let X=0;const k=new Map;for(let H of F){let{id:Y}=H;Y||(X||(X=D([I,F])),Y=X++,H={...H,id:Y}),k.set(Y,H)}for(const H of I){const Y=k.get(H.id);if(!Y){b.changed=!0,b.actions.remove.push(H.id),H.destroy();continue}if(k.delete(H.id),Y===H){V.push(H),b.actions.noop.push(H.id);continue}if(H.type===Y.type){const ue=H.getSaveModel();let q=!0,ge=!1;for(const[De,fe]of Object.entries(Y))if(!(0,t.isEqualWith)(fe,ue[De],S))if(b.changed=!0,q=!1,x.has(De))H[De]=fe,ge=!0;else{ge=!1;break}if(q){V.push(H),b.actions.noop.push(H.id);continue}if(ge){V.push(H),b.actions.update.push(H.id);continue}}H.destroy();const ee=new P.r(Y);ee.key=`${ee.id}-update-${Date.now()}`,V.push(ee),b.changed=!0,b.actions.replace.push(H.id)}for(const H of k.values())V.push(new P.r(H)),b.changed=!0,b.actions.add.push(H.id);return b}function S(I,F){if(I==null&&(F===1/0||F===-1/0||F==null)||F==null&&(I===1/0||I===-1/0||I==null))return!0}function D(I){let F=0;for(const V of I)for(const b of V)b.id>F&&(F=b.id);return F+1}var T=e(7592),R=e(96161);function L(I,F){return I.repeatDirection===o.yM?!1:F.gridPos.x>=I.gridPos.x+I.gridPos.w&&F.gridPos.y===I.gridPos.y}function w(I){for(const F of I)if(delete F.scopedVars,F.panels?.length)for(const V of F.panels)delete V.scopedVars}const A=class{constructor(I,F,V=g.gt){this.getVariablesFromState=V,this.events=new u.F,this.id=I.id||null,this.uid=I.uid||null,this.revision=I.revision||1,this.title=I.title??"No Title",this.description=I.description,this.tags=I.tags??[],this.style=I.style??"dark",this.timezone=I.timezone??"",this.weekStart=I.weekStart??"",this.editable=I.editable!==!1,this.graphTooltip=I.graphTooltip||0,this.time=I.time??{from:"now-6h",to:"now"},this.timepicker=I.timepicker??{},this.liveNow=Boolean(I.liveNow),this.templating=this.ensureListExist(I.templating),this.annotations=this.ensureListExist(I.annotations),this.refresh=I.refresh||"",this.snapshot=I.snapshot,this.schemaVersion=I.schemaVersion??0,this.fiscalYearStartMonth=I.fiscalYearStartMonth??0,this.version=I.version??0,this.links=I.links??[],this.gnetId=I.gnetId||null,this.panels=(0,t.map)(I.panels??[],b=>new R.r(b)),this.ensurePanelsHaveIds(),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(F),this.updateSchema(I),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(h.h$.subscribe(v.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(h.h$.subscribe(v.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(h.h$.subscribe(v.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(F=>F.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:f.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(I){I=I||{},I.canShare=I.canShare!==!1,I.canSave=I.canSave!==!1,I.canStar=I.canStar!==!1,I.canEdit=I.canEdit!==!1,I.canDelete=I.canDelete!==!1,I.showSettings=I.canEdit,I.canMakeEditable=I.canSave&&!this.editable,I.hasUnsavedFolderChange=!1,this.editable||(I.canEdit=!1,I.canDelete=!1,I.canSave=!1),this.meta=I}getSaveModelClone(I){const F=(0,t.defaults)(I||{},{saveVariables:!0,saveTimerange:!0});let V={};for(const b in this)A.nonPersistedProperties[b]||!this.hasOwnProperty(b)||(V[b]=(0,t.cloneDeep)(this[b]));return this.updateTemplatingSaveModelClone(V,F),F.saveTimerange||(V.time=this.originalTime),V.panels=this.getPanelSaveModels(),V=r(V),V.getVariables=()=>V.templating.list,V}updatePanels(I){const F=M(this.panels,I??[]);return F.changed&&(this.panels=F.panels??[],this.sortPanelsByGridPos(),this.events.publish(new y._B)),F}getPanelSaveModels(){return this.panels.filter(I=>this.isSnapshotTruthy()||!(I.type==="add-panel"||I.repeatPanelId||I.repeatedByRow)).map(I=>{if(I.libraryPanel){const{id:F,title:V,libraryPanel:b,gridPos:X}=I;return{id:F,title:V,gridPos:X,libraryPanel:{uid:b.uid,name:b.name}}}return this.panelInEdit&&this.panelInEdit.id===I.id?this.panelInEdit.getSaveModel():I.getSaveModel()}).map(I=>(this.isSnapshotTruthy()||(delete I.scopedVars,I.type==="row"&&I.panels&&I.panels.length>0&&(I.panels=I.panels.filter(F=>!F.repeatPanelId).map(F=>(delete F.scopedVars,F)))),I))}updateTemplatingSaveModelClone(I,F){const V=this.originalTemplating,b=this.getVariablesFromState(this.uid);if(I.templating={list:b.map(X=>d.z.get(X.type).getSaveModel(X,F.saveVariables))},!F.saveVariables)for(const X of I.templating.list){const k=V.find(({name:H,type:Y})=>H===X.name&&Y===X.type);k&&(X.type==="adhoc"?X.filters=k.filters:X.current=k.current)}}timeRangeUpdated(I){this.events.publish(new m.md(I)),(0,a.WI)((0,c.DU)(this.uid,I))}startRefresh(I={refreshAll:!0,panelIds:[]}){if(this.events.publish(new m.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(I.refreshAll||I.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const F of this.panels)!this.otherPanelInFullscreen(F)&&(I.refreshAll||I.panelIds.includes(F.id))&&F.refresh()}render(){this.events.publish(new y._z);for(const I of this.panels)I.render()}panelInitialized(I){const F=I.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(I)&&!F&&I.refresh()}otherPanelInFullscreen(I){return(this.panelInEdit||this.panelInView)&&!(I.isViewing||I.isEditing)}initEditPanel(I){return(0,E.$t)().pauseAutoRefresh(),this.panelInEdit=I.getEditClone(),this.panelInEdit}initViewPanel(I){this.panelInView=I,I.setIsViewing(!0)}exitViewPanel(I){this.panelInView=void 0,I.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,E.$t)().resumeAutoRefresh(),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveIds(){let I=this.getNextPanelId();for(const F of this.panelIterator())F.id??=I++}ensureListExist(I={}){return I.list??=[],I}getNextPanelId(){let I=0;for(const F of this.panelIterator())F.id>I&&(I=F.id);return I+1}*panelIterator(){for(const I of this.panels){yield I;const F=I.panels??[];for(const V of F)yield V}}forEachPanel(I){for(let F=0;F<this.panels.length;F++)I(this.panels[F],F)}getPanelById(I){return this.panelInEdit&&this.panelInEdit.id===I?this.panelInEdit:this.panels.find(F=>F.id===I)??null}canEditPanel(I){return Boolean(this.meta.canEdit&&I&&!I.repeatPanelId&&I.type!=="row")}canEditPanelById(I){return this.canEditPanel(this.getPanelById(I))}addPanel(I){I.id=this.getNextPanelId(),this.panels.unshift(new R.r(I)),this.sortPanelsByGridPos(),this.events.publish(new y._B)}updateMeta(I){this.meta={...this.meta,...I},this.events.publish(new y.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((I,F)=>I.gridPos.y===F.gridPos.y?I.gridPos.x-F.gridPos.x:I.gridPos.y-F.gridPos.y)}clearUnsavedChanges(){for(const I of this.panels)I.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0)}hasUnsavedChanges(){const I=this.panels.find(F=>F.hasChanged);return Boolean(I)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;w(this.panels);const I=this.panels.filter(F=>(!F.repeat||F.repeatedByRow)&&F.repeatPanelId);(0,t.pull)(this.panels,...I),I.map(F=>F.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables())){this.cleanUpRepeats();for(let I=0;I<this.panels.length;I++){const F=this.panels[I];F.repeat&&this.repeatPanel(F,I)}this.sortPanelsByGridPos(),this.events.publish(new y._B)}}cleanUpRowRepeats(I){const F=I.map(b=>b.id),V=I.filter(b=>!b.repeat&&b.repeatPanelId&&F.includes(b.repeatPanelId));(0,t.pull)(I,...V),(0,t.pull)(this.panels,...V)}processRowRepeats(I){if(this.isSnapshotTruthy()||!this.hasVariables())return;let F=I.panels??[];if(!I.collapsed){const V=this.panels.findIndex(b=>b.id===I.id);F=this.getRowPanels(V)}this.cleanUpRowRepeats(F);for(const V of F)if(V.repeat){const b=this.panels.findIndex(X=>X.id===V.id);this.repeatPanel(V,b)}}getPanelRepeatClone(I,F,V){if(F===0)return I;const b=I.getSaveModel();b.id=this.getNextPanelId();const X=new R.r(b);return this.panels.splice(V+F,0,X),X.repeatPanelId=I.id,X.repeat=void 0,this.panelInView?.id===X.id&&(X.setIsViewing(!0),this.panelInView=X),X}getRowRepeatClone(I,F,V){if(F===0){if(!I.collapsed){const H=this.getRowPanels(V);I.panels=H}return I}const b=new R.r(I.getSaveModel());let X,k;return I.collapsed?(X=(0,t.cloneDeep)(I.panels)??[],b.panels=X,k=V+F):(X=this.getRowPanels(V),b.panels=X.map(H=>H.getSaveModel()),k=V+(X.length+1)*F),this.panels.splice(k,0,b),this.updateRepeatedPanelIds(b),b}repeatPanel(I,F){const V=this.getPanelRepeatVariable(I);if(!V)return;if(I.type==="row"){this.repeatRow(I,F,V);return}const b=this.getSelectedVariableOptions(V),X=I.maxPerRow||4;let k=0,H=I.gridPos.y;for(let ee=0;ee<b.length;ee++){const ue=b[ee];let q;q=this.getPanelRepeatClone(I,ee,F),q.scopedVars??={},q.scopedVars[V.name]=ue,I.repeatDirection===o.OA?(ee>0&&(H+=q.gridPos.h),q.gridPos.y=H):(q.gridPos.w=Math.max(o.cz/b.length,o.cz/X),q.gridPos.x=k,q.gridPos.y=H,k+=q.gridPos.w,k+q.gridPos.w>o.cz&&(k=0,H+=q.gridPos.h))}const Y=H-I.gridPos.y;if(Y>0){const ee=F+b.length;for(const ue of this.panels.slice(ee))L(I,ue)||(ue.gridPos.y+=Y)}}repeatRow(I,F,V){const b=this.getSelectedVariableOptions(V);let X=I.gridPos.y;function k(H,Y){H.scopedVars??={},H.scopedVars[V.name]=Y}for(let H=0;H<b.length;H++){const Y=b[H],ee=this.getRowRepeatClone(I,H,F);k(ee,Y);const ue=this.getRowHeight(ee),q=ee.panels||[];let ge;if(I.collapsed){for(const De of q)k(De,Y),H>0&&this.updateRepeatedPanelIds(De,!0);ee.gridPos.y+=H,X+=H,ge=F+H+1}else{const De=F+(q.length+1)*H+1;q.forEach((fe,me)=>{if(k(fe,Y),H>0){const ce=new R.r(fe);this.updateRepeatedPanelIds(ce,!0),ce.gridPos.y+=ue*H,this.panels.splice(De+me,0,ce)}}),ee.panels=[],ee.gridPos.y+=ue*H,X+=ue,ge=De+q.length}if(b.length>1)for(const De of this.panels.slice(ge))De.gridPos.y+=X}}updateRepeatedPanelIds(I,F){return I.repeatPanelId=I.id,I.id=this.getNextPanelId(),F?I.repeatedByRow=!0:I.repeat=void 0,I}getSelectedVariableOptions(I){let F;return(0,C.HY)(I)?F=I.options.slice(1,I.options.length):F=(0,t.filter)(I.options,{selected:!0}),F}getRowHeight(I){if(!I.panels||I.panels.length===0)return 0;const F=I.gridPos.y,V=(0,t.map)(I.panels,"gridPos"),b=(0,t.maxBy)(V,X=>X.y+X.h);return b.y+b.h-F}removePanel(I){this.panels=this.panels.filter(F=>F!==I),this.events.publish(new y._B)}removeRow(I,F){(!F&&I.collapsed||F&&!I.collapsed)&&this.toggleRow(I),this.removePanel(I)}expandRows(){const I=this.panels.filter(F=>F.type==="row"&&F.collapsed);for(const F of I)this.toggleRow(F)}collapseRows(){const I=this.panels.filter(F=>F.type==="row"&&!F.collapsed);for(const F of I)this.toggleRow(F)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(I=>I.hide!==2)||this.annotations.list.some(I=>!I.hide)}getPanelInfoById(I){const F=this.panels.findIndex(V=>V.id===I);return F>=0?{panel:this.panels[F],index:F}:null}duplicatePanel(I){const F=I.getSaveModel();return F.id=this.getNextPanelId(),delete F.repeat,delete F.repeatIteration,delete F.repeatPanelId,delete F.scopedVars,F.alert&&delete F.thresholds,delete F.alert,I.gridPos.x+I.gridPos.w*2<=o.cz?F.gridPos.x+=I.gridPos.w:F.gridPos.y+=I.gridPos.h,this.addPanel(F),F}formatDate(I,F){return(0,s.dq)(I,{format:F,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const I of this.panels)I.destroy()}toggleRow(I){const F=(0,t.indexOf)(this.panels,I);if(!I.collapsed){const X=this.getRowPanels(F);(0,t.pull)(this.panels,...X),I.panels=X.map(k=>k.getSaveModel()),I.collapsed=!0,X.some(k=>k.hasChanged)&&I.configRev++,this.events.publish(new y._B);return}I.collapsed=!1;const V=I.panels??[],b=V.some(X=>X.repeat);if(V.length>0){const k=(V[0].gridPos.y??I.gridPos.y)-(I.gridPos.y+I.gridPos.h);let H=F+1,Y=I.gridPos.y;for(const ue of V)ue.gridPos.y??(ue.gridPos.y=I.gridPos.y),ue.gridPos.y-=k,this.panels.splice(H,0,new R.r(ue)),H+=1,Y=Math.max(Y,ue.gridPos.y+ue.gridPos.h);const ee=Y-I.gridPos.y-1;for(const ue of this.panels.slice(H))ue.gridPos.y+=ee;I.panels=[],b&&this.processRowRepeats(I)}this.sortPanelsByGridPos(),this.events.publish(new y._B)}getRowPanels(I){const F=this.panels.slice(I+1),V=F.findIndex(X=>X.type==="row");return F.slice(0,V>=0?V:this.panels.length)}on(I,F){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(I,F)}off(I,F){console.log("DashboardModel.off is deprecated"),this.events.off(I,F)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(I){return(0,s.E8)(I,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:l.Vt?.user?.timezone}updateSchema(I){new T.o(this).updateSchema(I)}resetOriginalTime(){this.originalTime=(0,t.cloneDeep)(this.time)}hasTimeChanged(){const{time:I,originalTime:F}=this;return!((0,t.isEqual)(I,F)||(0,t.isEqual)((0,i.CQ)(I?.from),(0,i.CQ)(F?.from))&&(0,t.isEqual)((0,i.CQ)(I?.to),(0,i.CQ)(F?.to)))}resetOriginalVariables(I=!1){if(I){this.originalTemplating=this.cloneVariablesFrom(this.templating.list);return}this.originalTemplating=this.cloneVariablesFrom(this.getVariablesFromState(this.uid))}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState(this.uid))}autoFitPanels(I,F){const V=Math.max(...this.panels.map(ue=>ue.gridPos.h+ue.gridPos.y)),b=55,X=20,k=50;let H=I-b-X;this.meta.submenuEnabled&&!F&&(H-=k),F&&F!==p.KioskMode.TV&&(H+=b);const Y=Math.floor(H/(o.K3+o.hD)),ee=V/Y;for(const ue of this.panels)ue.gridPos.y=Math.round(ue.gridPos.y/ee)||1,ue.gridPos.h=Math.round(ue.gridPos.h/ee)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(p.CoreEvents.nq)}getPanelByUrlId(I){const F=parseInt(I??"0",10),V=this.panels.filter(b=>b.collapsed);for(const b of V)b.panels?.some(k=>k.id===F)&&this.toggleRow(b);return this.getPanelById(F)}toggleLegendsForAll(){const I=this.panels.filter(W),F=I.filter(X=>X.legend.show).length,V=I.length-F,b=F>=V;for(const X of I)X.legend.show=!b,X.render()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(I){let F=!0;return l.Vt.accessControlEnabled()&&(I?F=!!this.meta.annotationsPermissions?.dashboard.canEdit:F=!!this.meta.annotationsPermissions?.organization.canEdit),this.canEditDashboard()&&F}canDeleteAnnotations(I){let F=!0;return l.Vt.accessControlEnabled()&&(I?F=!!this.meta.annotationsPermissions?.dashboard.canDelete:F=!!this.meta.annotationsPermissions?.organization.canDelete),F&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(F=>F.builtIn===1)?.enable===!1||!this.canEditDashboard()?!1:!l.Vt.accessControlEnabled()||Boolean(this.meta.annotationsPermissions?.dashboard.canAdd)}canEditDashboard(){return Boolean(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(I,F){!(0,t.isEqual)(I?.gridPos,F?.gridPos)&&this.events.publish(new y._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(I){return this.getVariablesFromState(this.uid).find(F=>F.name===I.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(I,F){if(I.length!==F.length)return!1;const V=F.map(b=>({name:b.name,type:b.type,current:(0,t.cloneDeep)(b.current),filters:(0,t.cloneDeep)(b.filters)}));return!(0,t.isEqual)(V,I)}cloneVariablesFrom(I){return I.map(F=>({name:F.name,type:F.type,current:(0,t.cloneDeep)(F.current),filters:(0,t.cloneDeep)(F.filters)}))}variablesTimeRangeProcessDoneHandler(I){const F=I.payload.variableIds.length>0;this.variablesChangedHandler(new v.x9({panelIds:[],refreshAll:!0}),F)}variablesChangedHandler(I,F=!0){if(F&&this.processRepeats(),I.payload.refreshAll||(0,E.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=I.payload.panelIds.filter(V=>V!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(I.payload)}variablesChangedInUrlHandler(I){this.templateVariableValueUpdated(),this.startRefresh(I.payload)}};let N=A;N.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0};function W(I){return Boolean(I.legend)}},96161:(G,O,e)=>{"use strict";e.d(O,{J:()=>M,r:()=>P});var t=e(82897),n=e.n(t),u=e(44288),s=e(85081),i=e(40400),m=e(2118),f=e(27677),o=e(89029),l=e(1821),r=e(69934),d=e(47694),c=e(55935),g=e(99822),p=e(45984),y=e(78800),h=e(69155),a=e(19349);const v={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0},C={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},E={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:"",savedQueryLink:null};class P{constructor(D){this.datasource=null,this.savedQueryLink=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.cachedPluginOptions={},this.events=new s.F,this.restoreModel(D),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,u.Z)()}restoreModel(D){for(const T in this)v[T]||!this.hasOwnProperty(T)||D[T]||typeof this[T]!="function"&&typeof this[T]!="symbol"&&delete this[T];for(const T in D)this[T]=D[T];switch(this.type){case"graph":(d.ZP.featureToggles?.autoMigrateGraphPanels||!d.ZP.angularSupportEnabled)&&(this.autoMigrateFrom=this.type,this.type="timeseries");break;case"table-old":d.ZP.angularSupportEnabled||(this.autoMigrateFrom=this.type,this.type="table");break;case"heatmap-new":this.autoMigrateFrom=this.type,this.type="heatmap";break}(0,t.defaultsDeep)(this,(0,t.cloneDeep)(E)),this.ensureQueryIds()}generateNewKey(){this.key=(0,u.Z)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const D of this.targets)D.refId||(D.refId=(0,g.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(D){this.options=D,this.configRev++,this.events.publish(new p.Wj),this.render()}updateFieldConfig(D){this.fieldConfig=D,this.configRev++,this.events.publish(new p.Wj),this.resendLastResult(),this.render()}getSaveModel(){const D={};for(const T in this)v[T]||!this.hasOwnProperty(T)||(0,t.isEqual)(this[T],E[T])||(D[T]=(0,t.cloneDeep)(this[T]));return D}setIsViewing(D){this.isViewing=D}updateGridPos(D,T=!0){D.x===this.gridPos.x&&D.y===this.gridPos.y&&D.h===this.gridPos.h&&D.w===this.gridPos.w||(this.gridPos.x=D.x,this.gridPos.y=D.y,this.gridPos.w=D.w,this.gridPos.h=D.h,T&&this.configRev++)}runAllPanelQueries({dashboardId:D,dashboardUID:T,dashboardTimezone:R,timeData:L,width:w,publicDashboardAccessToken:A}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardId:D,dashboardUID:T,publicDashboardAccessToken:A,timezone:R,timeRange:L.timeRange,timeInfo:L.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(w),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,transformations:this.transformations,app:this.isEditing?i.zj.PanelEditor:this.isViewing?i.zj.PanelViewer:i.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new l.U5)}render(){this.hasRefreshed?this.events.publish(new p._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((D,T)=>v[T]||C[T]?D:{...D,[T]:this[T]},{})}restorePanelOptions(D){const T=this.cachedPluginOptions[D];T&&(Object.keys(T.properties).map(R=>{this[R]=T.properties[R]}),this.fieldConfig=(0,m.__)(this.fieldConfig,T.fieldConfig))}applyPluginOptionDefaults(D,T){const R=(0,m.d4)({plugin:D,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:T});this.fieldConfig=R.fieldConfig,this.options=R.options}pluginLoaded(D){this.plugin=D;const T=x(D);if(this.autoMigrateFrom){const R=this.autoMigrateFrom==="graph"||this.autoMigrateFrom==="table-old";this.callPanelTypeChangeHandler(D,this.autoMigrateFrom,this.getOptionsToRemember(),R),delete this.autoMigrateFrom}D.onPanelMigration&&T!==this.pluginVersion&&(this.options=D.onPanelMigration(this),this.pluginVersion=T),this.applyPluginOptionDefaults(D,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const D of(0,t.keys)(this))C[D]||delete this[D];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,m.aS)(this.fieldConfig.overrides,m._k)}}callPanelTypeChangeHandler(D,T,R,L){if(D.onPanelTypeChanged){const w=L?{angular:R}:R.options;Object.assign(this.options,D.onPanelTypeChanged(this,T,w,this.fieldConfig))}}changePlugin(D){const T=D.meta.id,R=this.getOptionsToRemember(),L=this.fieldConfig,w=this.type,A=this.isAngularPlugin();this.cachedPluginOptions[w]={properties:R,fieldConfig:L},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(T),this.callPanelTypeChangeHandler(D,w,R,A),this.type=T,this.plugin=D,this.configRev++,this.applyPluginOptionDefaults(D,!0),D.onPanelMigration&&(this.pluginVersion=x(D))}updateQueries(D){const{dataSource:T}=D;this.datasource={uid:T.uid,type:T.type},D.savedQueryUid?this.savedQueryLink={ref:{uid:D.savedQueryUid},variables:[]}:this.savedQueryLink=null,this.cacheTimeout=D.cacheTimeout,this.timeFrom=D.timeRange?.from,this.timeShift=D.timeRange?.shift,this.hideTimeOverride=D.timeRange?.hide,this.interval=D.minInterval,this.maxDataPoints=D.maxDataPoints,this.targets=D.queries,this.configRev++,this.events.publish(new p.pO)}addQuery(D){D=D||{refId:"A"},D.refId=(0,g.Hs)(this.targets),this.targets.push(D),this.configRev++}changeQuery(D,T){D.refId=this.targets[T].refId,this.configRev++,this.targets=this.targets.map((R,L)=>L===T?D:R)}getEditClone(){const D=this.getSaveModel(),T=new P(D);T.isEditing=!0,T.plugin=this.plugin;const R=this.getQueryRunner();return T.getQueryRunner().useLastResultFrom(R),T}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:d.ZP.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new y.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(D){this.transformations=D,this.resendLastResult(),this.configRev++,this.events.publish(new p.Xw)}setProperty(D,T){this[D]=T,this.configRev++,D==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(D,T,R){const L=this.getQueryRunner().getLastRequest(),w=Object.assign({},this.scopedVars,L?.scopedVars,T),A=(0,h.c)(w),N=f.Cj.toUrlParams(A),W=f.Cj.toUrlParams((0,a.$t)().timeRangeForUrl());return w[o.W.keepTime]={text:W,value:W},w[o.W.includeVars]={text:N,value:N},(0,r.J)().replace(D,w,R)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(D){for(const[T,R]of Object.entries(D.model)){switch(T){case"id":case"gridPos":case"libraryPanel":continue}this[T]=R}this.libraryPanel=D}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function x(S){return S&&S.meta.info.version?S.meta.info.version:d.ZP.buildInfo.version}function M(S){const D={};return Object.entries(S).filter(([T,R])=>!v[T]&&S.hasOwnProperty(T)&&!(0,t.isEqual)(R,E[T])).forEach(([T,R])=>{D[T]=R}),(0,c.Xh)(D)}},86977:(G,O,e)=>{"use strict";e.d(O,{$j:()=>h,Qk:()=>p,RF:()=>g,Yq:()=>y,f4:()=>E,fG:()=>a,lw:()=>v,qm:()=>d,tM:()=>C});var t=e(47214),n=e(659),u=e(60499),s=e(30992),i=e(46732),m=e(54294),f=e(85805),o=e(85803),l=e(19349),r=e(58790);function d(P){return async x=>{const M=await(0,t.i)().get(`/api/dashboards/id/${P}/permissions`);x((0,r.O0)(M))}}function c(P){return{userId:P.userId,teamId:P.teamId,role:P.role,permission:P.permission}}function g(P,x,M){return async(S,D)=>{const{dashboard:T}=D(),R=[];for(const L of T.permissions){if(L.inherited)continue;const w=c(L);x===L&&(w.permission=M),R.push(w)}await(0,t.i)().post(`/api/dashboards/id/${P}/permissions`,{items:R}),await S(d(P))}}function p(P,x){return async(M,S)=>{const D=S().dashboard,T=[];for(const R of D.permissions)R.inherited||R===x||T.push(c(R));await(0,t.i)().post(`/api/dashboards/id/${P}/permissions`,{items:T}),await M(d(P))}}function y(P,x){return async(M,S)=>{const{dashboard:D}=S(),T=[];for(const R of D.permissions)R.inherited||T.push(c(R));T.push({userId:x.userId,teamId:x.teamId,role:x.role,permission:x.permission}),await(0,t.i)().post(`/api/dashboards/id/${P}/permissions`,{items:T}),await M(d(P))}}function h(P,x){return async M=>{await(0,t.i)().post("/api/dashboards/import",P),M((0,n.$l)((0,u.AT)("Dashboard Imported",x))),M((0,f.m3)())}}function a(P){return async x=>{await(0,t.i)().delete(`/api/dashboards/uid/${P}`),x((0,f.m3)())}}const v=()=>(P,x)=>{const S=x().dashboard.getModel();S&&(S.destroy(),P((0,o.wX)(S.uid))),(0,l.$t)().stopAutoRefresh(),P((0,r.sG)()),P((0,i.Vl)()),s.H.leave()},C=P=>x=>{x((0,m.YT)(P)),(0,l.$t)().refreshTimeModel()},E=P=>x=>{x((0,m.zW)(P)),(0,l.$t)().refreshTimeModel()}},86899:(G,O,e)=>{"use strict";e.d(O,{f:()=>t.f,r:()=>n.r});var t=e(82302),n=e(96161)},58790:(G,O,e)=>{"use strict";e.d(O,{Nv:()=>c,O0:()=>o,ZP:()=>h,dS:()=>d,jA:()=>r,sG:()=>g,sf:()=>l,tq:()=>p});var t=e(32557),n=e(30670),u=e(2024),s=e(81168),i=e(82302);const m={initPhase:s.DashboardInitPhase.NotStarted,getModel:()=>null,permissions:[],initError:null},f=(0,t.oM)({name:"dashboard",initialState:m,reducers:{loadDashboardPermissions:(a,v)=>{a.permissions=(0,u.A)(v.payload)},dashboardInitFetching:a=>{a.initPhase=s.DashboardInitPhase.Fetching},dashboardInitServices:a=>{a.initPhase=s.DashboardInitPhase.Services},dashboardInitCompleted:(a,v)=>{a.getModel=()=>v.payload,a.initPhase=s.DashboardInitPhase.Completed},dashboardInitFailed:(a,v)=>{a.initPhase=s.DashboardInitPhase.Failed,a.initError=v.payload,a.getModel=()=>new i.f({...n.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:a=>{a.initPhase=s.DashboardInitPhase.NotStarted,a.initError=null,a.getModel=()=>null},addPanel:(a,v)=>{}}}),{loadDashboardPermissions:o,dashboardInitFetching:l,dashboardInitFailed:r,dashboardInitCompleted:d,dashboardInitServices:c,cleanUpDashboard:g,addPanel:p}=f.actions,h={dashboard:f.reducer}},2476:(G,O,e)=>{"use strict";e.d(O,{Kq:()=>x,Po:()=>P,W1:()=>T,WJ:()=>v,bY:()=>E,jN:()=>C,oe:()=>M,qw:()=>D});var t=e(82897),n=e.n(t),u=e(25318),s=e(33180),i=e(21053),m=e(69934),f=e(97063),o=e(47694),l=e(84952),r=e(58379),d=e(18262),c=e(96161),g=e(76647),p=e(81283),y=e(32294),h=e(3153),a=e(45984);const v=(w,A,N)=>{if(N!==!1){const W=A.alert&&!o.ZP.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,I=A.alert?"YES":void 0;f.Z.publish(new a.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:W,icon:"trash-alt",confirmText:I,yesText:"Remove",onConfirm:()=>v(w,A,!1)}));return}w.removePanel(A),(0,h.WI)((0,y.qj)(A.key))},C=(w,A)=>{w.duplicatePanel(A)},E=w=>{let A=w;w instanceof c.r&&(A=w.getSaveModel()),r.Z.set(l.zF,JSON.stringify(A)),f.Z.emit(u.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},P=(w,A)=>{f.Z.publish(new a.Dn({component:d.ShareModal,props:{dashboard:w,panel:A}}))},x=(w,A)=>{f.Z.publish(new a.Dn({component:g.c,props:{panel:A,initialFolderUid:w.meta.folderUid,isOpen:!0}}))},M=w=>{f.Z.publish(new a.Dn({component:p.i,props:{onConfirm:()=>w.unlinkLibraryPanel(),isOpen:!0}}))},S=w=>{w.refresh()},D=w=>{const A={...w.options};A.legend.showLegend===!0?A.legend.showLegend=!1:A.legend.showLegend=!0,w.updateOptions(A)};function T(w,A){const N={timeInfo:"",timeRange:A};if(w.timeFrom){const W=(0,m.J)().replace(w.timeFrom,w.scopedVars),I=s.describeTextRange(W);if(I.invalid)return N.timeInfo="invalid time override",N;if((0,t.isString)(A.raw.from)){const F=i.parse(I.from);N.timeInfo=I.display,N.timeRange={from:F,to:i.parse(I.to),raw:{from:I.from,to:I.to}}}}if(w.timeShift){const W=(0,m.J)().replace(w.timeShift,w.scopedVars);if(s.describeTextRange(W).invalid)return N.timeInfo="invalid timeshift",N;const F="-"+W;N.timeInfo+=" timeshift "+F;const V=i.parseDateMath(F,N.timeRange.from,!1),b=i.parseDateMath(F,N.timeRange.to,!0);N.timeRange={from:V,to:b,raw:{from:V,to:b}}}return w.hideTimeOverride&&(N.timeInfo=""),N}function R(w){const N=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return w.maxDataPoints?w.maxDataPoints:Math.ceil(N*(w.gridPos.w/24))}function L(w,A){const N=w.plugin&&w.plugin.noPadding?0:config.theme.panelPadding*2,W=w.hasTitle()?config.theme.panelHeaderHeight:0;return A-W-N-PANEL_BORDER}},74124:(G,O,e)=>{"use strict";e.d(O,{O:()=>u});var t=e(46519),n=e(21053);const u=(s,i)=>{const m={from:(0,t.v9)(s.from)?(0,t.CQ)(s.from):s.from,to:(0,t.v9)(s.to)?(0,t.CQ)(s.to):s.to},f=i?i.getTimezone():void 0;return{from:n.parse(m.from,!1,f,i?.fiscalYearStartMonth),to:n.parse(m.to,!0,f,i?.fiscalYearStartMonth),raw:m}}},3597:(G,O,e)=>{"use strict";e.d(O,{n:()=>t});const t={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},71128:(G,O,e)=>{"use strict";e.d(O,{Aq:()=>P,BX:()=>c,CT:()=>v,Ht:()=>d,Nu:()=>p,Ww:()=>f,ZP:()=>M,be:()=>i,iZ:()=>a,jS:()=>m,j_:()=>C,ng:()=>E,rl:()=>s,wZ:()=>o,yr:()=>g,zT:()=>l});var t=e(32557),n=e(1762);const u={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",hasFetched:!1,isLoadingDataSources:!1,dataSourceMeta:{},isSortAscending:!0},s=(0,t.PH)("dataSources/dataSourceLoaded"),i=(0,t.PH)("dataSources/dataSourcesLoaded"),m=(0,t.PH)("dataSources/dataSourceMetaLoaded"),f=(0,t.PH)("dataSources/dataSourcePluginsLoad"),o=(0,t.PH)("dataSources/dataSourcePluginsLoaded"),l=(0,t.PH)("dataSources/setDataSourcesSearchQuery"),r=(0,t.PH)("dataSources/setDataSourcesLayoutMode"),d=(0,t.PH)("dataSources/setDataSourceTypeSearchQuery"),c=(0,t.PH)("dataSources/setDataSourceName"),g=(0,t.PH)("dataSources/setIsDefault"),p=(0,t.PH)("dataSources/setIsSortAscending"),y=(S=u,D)=>i.match(D)?{...S,hasFetched:!0,dataSources:D.payload,dataSourcesCount:D.payload.length}:s.match(D)?{...S,dataSource:D.payload}:l.match(D)?{...S,searchQuery:D.payload}:r.match(D)?{...S,layoutMode:D.payload}:f.match(D)?{...S,plugins:[],isLoadingDataSources:!0}:o.match(D)?{...S,plugins:D.payload.plugins,categories:D.payload.categories,isLoadingDataSources:!1}:d.match(D)?{...S,dataSourceTypeSearchQuery:D.payload}:m.match(D)?{...S,dataSourceMeta:D.payload}:c.match(D)?{...S,dataSource:{...S.dataSource,name:D.payload}}:g.match(D)?{...S,dataSource:{...S.dataSource,isDefault:D.payload}}:p.match(D)?{...S,isSortAscending:D.payload}:S,h={testingStatus:{},loadError:null,loading:!0,plugin:null},a=(0,t.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),v=(0,t.PH)("dataSourceSettings/initDataSourceSettingsFailed"),C=(0,t.PH)("dataSourceSettings/testDataSourceStarting"),E=(0,t.PH)("dataSourceSettings/testDataSourceSucceeded"),P=(0,t.PH)("dataSourceSettings/testDataSourceFailed"),M={dataSources:y,dataSourceSettings:(S=h,D)=>a.match(D)?{...S,plugin:D.payload,loadError:null,loading:!1}:v.match(D)?{...S,plugin:null,loadError:D.payload.message,loading:!1}:C.match(D)?{...S,testingStatus:{message:"Testing...",status:"info"}}:E.match(D)?{...S,testingStatus:{status:D.payload?.status,message:D.payload?.message,details:D.payload?.details}}:P.match(D)?{...S,testingStatus:{status:"error",message:D.payload?.message,details:D.payload?.details}}:S}},97934:()=>{"use strict"},30785:(G,O,e)=>{"use strict";e.d(O,{L:()=>o});var t=e(52423),n=e(68404),u=e(29516),s=e(46739),i=e(45089),m=e(74067);const f={label:"Fixed color",value:"_____fixed_____"},o=r=>{const{value:d,context:c,onChange:g}=r,p="dark-green",y=(0,u.wW)(l),h=d?.field,a=Boolean(!h),v=(0,m.IX)(c.data),C=(0,m.nw)(v,h,f),E=(0,n.useCallback)(M=>{const S=M.value;if(S&&S!==f.value)g({...d,field:S});else{const D=d?.fixed??p;g({...d,field:void 0,fixed:D})}},[g,d]),P=(0,n.useCallback)(M=>{g({field:void 0,fixed:M??p})},[g]),x=a?f:C.find(M=>M.value===h);return n.createElement(n.Fragment,null,n.createElement("div",{className:y.container},n.createElement(s.Ph,{value:x,options:C,onChange:E,noOptionsMessage:"No fields found"}),a&&n.createElement("div",{className:y.picker},n.createElement(i.zH,{color:d?.fixed??p,onChange:P,enableNamedColors:!0}))))},l=r=>({container:t.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:t.css`
    padding-left: 8px;
  `})},26786:(G,O,e)=>{"use strict";e.d(O,{E:()=>y});var t=e(52423),n=e(68404),u=e(29516),s=e(90723),i=e(9274),m=e(71210),f=e(25474),o=e(26345),l=e(30995),r=e(76167),d=e(16964),c=e(59961),g=e(92484),p=e(26260);const y=a=>{const{value:v,src:C,name:E,placeholder:P,onChange:x,onClear:M,mediaType:S,folderName:D,size:T,color:R}=a,L=(0,u.wW)(h),w=(0,u.l4)(),A=(0,n.createRef)(),N=n.createElement(p.Y,{onChange:x,value:v,mediaType:S,folderName:D});let W=C;!W&&v&&(W=(0,c.t)(v));const I=R&&{fill:w.visualization.getColorByName(R)},F=()=>v&&W?n.createElement(d.V,{src:W,className:L.icon,style:{...I}}):n.createElement(s.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),V=()=>n.createElement(i.Z,null,n.createElement(m._,{label:null,grow:!0},n.createElement(f.I,{value:E,placeholder:P,readOnly:!0,prefix:W&&n.createElement(d.V,{src:W,className:L.icon,style:{...I}}),suffix:n.createElement(s.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:M})})));return n.createElement(o.D,{content:N},(b,X,k)=>n.createElement(n.Fragment,null,A.current&&n.createElement(l.J,{...k,referenceElement:A.current,onMouseEnter:b,onKeyDown:H=>{(0,r.i)(H,X)}}),n.createElement("div",{ref:A,onClick:b,className:L.pointer},T===g.zc.SMALL&&F(),T===g.zc.NORMAL&&V())))},h=a=>({pointer:t.css`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:t.css`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},26260:(G,O,e)=>{"use strict";e.d(O,{Y:()=>b});var t=e(52423),n=e(99510),u=e(81699),s=e(6665),i=e(68404),m=e(47214),f=e(29516),o=e(75952),l=e(90723),r=e(47694),d=e(92484),c=e(74955),g=e(9257),p=e(16964);function y({secondaryText:k="Drag and drop here or browse"}){const H=(0,f.wW)(a);return i.createElement("div",{className:H.iconWrapper},i.createElement("small",{className:H.small},k),i.createElement(l.zx,{type:"button",icon:"upload"},"Upload"))}const h=({mediaType:k,setFormData:H,setUpload:Y,error:ee})=>{const ue=(0,f.wW)(a),[q,ge]=(0,i.useState)(!1),[De,fe]=(0,i.useState)(""),me=()=>i.createElement(c.g,{label:"Preview"},i.createElement("div",{className:ue.iconPreview},k===d.DD.Icon&&i.createElement(p.V,{src:De,className:ue.img}),k===d.DD.Image&&i.createElement("img",{src:De,alt:"Preview of the uploaded file",className:ue.img}))),ce=re=>{fetch(`/api/storage/delete/upload/${re.file.name}`,{method:"DELETE"}).catch(Ee=>console.error("cannot delete file",Ee))},ie=k==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return i.createElement(g.Yo,{readAs:"readAsBinaryString",onFileRemove:ce,options:{accept:ie,multiple:!1,onDrop:re=>{let Ee=new FormData;Ee.append("file",re[0]),fe(URL.createObjectURL(re[0])),ge(!0),H(Ee),Y(!0)}}},ee.message!==""&&q?i.createElement("p",null,ee.message):q?i.createElement(me,null):i.createElement(y,null))};function a(k,H){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${k.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${k.colors.border.medium};
      background-color: ${H?k.colors.background.secondary:k.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:t.css`
      margin: ${k.spacing(2,0,1)};
    `,small:t.css`
      color: ${k.colors.text.secondary};
      margin-bottom: ${k.spacing(2)};
    `,iconContainer:t.css`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:t.css`
      width: 238px;
      height: 198px;
      border: 1px solid ${k.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:t.css`
      width: 147px;
      height: 147px;
      fill: ${k.colors.text.primary};
    `}}var v=e(46739),C=e(79230),E=e(91162),P=e(89050),x=e(75478),M=e(82385);function S(k){const{columnIndex:H,rowIndex:Y,style:ee,data:ue}=k,{cards:q,columnCount:ge,onChange:De,selected:fe}=ue,me=H+Y*ge,ce=q[me],ie=(0,f.l4)(),re=D(ie);return i.createElement("div",{style:ee},ce&&i.createElement("div",{key:ce.value,className:fe===ce.value?(0,t.cx)(re.card,re.selected):re.card,onClick:()=>De(ce.value)},ce.imgUrl.endsWith(".svg")?i.createElement(p.V,{src:ce.imgUrl,className:re.img}):i.createElement("img",{src:ce.imgUrl,alt:"",className:re.img}),i.createElement("h6",{className:re.text},ce.label.slice(0,-4))))}const D=(0,M.B)(k=>({card:t.css`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${k.colors.action.hover};
        box-shadow: ${k.shadows.z2};
      }
    `,selected:t.css`
      border: 2px solid ${k.colors.primary.main};
      :hover {
        border-color: ${k.colors.primary.main};
      }
    `,img:t.css`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${k.colors.text.primary};
    `,text:t.css`
      color: ${k.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:t.css`
      border: 1px solid ${k.colors.border.medium};
    `})),T=k=>{const{onChange:H,cards:Y,value:ee}=k,ue=(0,f.l4)(),q=D(ue);return i.createElement(P.Z,{defaultWidth:680},({width:ge,height:De})=>{const ce=Math.floor(ge/90),ie=Math.ceil(Y.length/ce);return i.createElement(x.Ym,{width:ge,height:De,columnCount:ce,columnWidth:90,rowCount:ie,rowHeight:90,itemData:{cards:Y,columnCount:ce,onChange:H,selected:ee},className:q.grid},(0,i.memo)(S,x.wy))})},R=k=>k===d.DD.Icon?[d.QS.Icon,d.QS.IOT,d.QS.Marker]:[d.QS.BG],L=(k,H)=>k.find(Y=>H.startsWith(Y.value))??k[0],w=k=>{const{value:H,mediaType:Y,folderName:ee,newValue:ue,setNewValue:q}=k,ge=(0,f.wW)(A),De=R(Y).map(j=>({label:j,value:j})),[fe,me]=(0,i.useState)(),[ce,ie]=(0,i.useState)(L(De,H?.length?H:ee)),[re,Ee]=(0,i.useState)([]),[J,te]=(0,i.useState)([]),ne=j=>{j?(j=j.toLowerCase(),te(re.filter(be=>be.search.includes(j)))):te(re)};return(0,i.useEffect)(()=>{const j=ce?.value;if(j){const be=Y===d.DD.Icon?Le=>Le.name.endsWith(".svg"):Le=>Le.name.endsWith(".png")||Le.name.endsWith(".gif");(0,E.ak)().get("-- Grafana --").then(Le=>{Le.listFiles(j).subscribe({next:Qe=>{const Ye=[];Qe.forEach(de=>{if(be(de)){const Be=de.name.lastIndexOf(".");Ye.push({value:`${j}/${de.name}`,label:de.name,search:(Be?de.name.substring(0,Be):de.name).toLowerCase(),imgUrl:`public/${j}/${de.name}`})}}),Ee(Ye),te(Ye)}})})}},[Y,ce]),i.createElement(i.Fragment,null,i.createElement(c.g,null,i.createElement(v.Ph,{options:De,onChange:ie,value:ce,menuShouldPortal:!1})),i.createElement(c.g,null,i.createElement(C.H,{value:fe??"",placeholder:"Search",onChange:j=>{ne(j),me(j)}})),J&&i.createElement("div",{className:ge.cardsWrapper},i.createElement(T,{cards:J,onChange:j=>q(j),value:ue})))},A=k=>({cardsWrapper:t.css`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var N=e(25474),W=e(38835),I=e(59961);const F=k=>{const{newValue:H,setNewValue:Y,mediaType:ee}=k,ue=(0,f.wW)(V),q=(0,I.t)(H);let ge=H?.substring(H.lastIndexOf("/")+1,H.lastIndexOf("."));return ge.length>20&&(ge=ge.substring(0,20)+"..."),i.createElement(i.Fragment,null,i.createElement(c.g,null,i.createElement(N.I,{onChange:De=>Y(De.currentTarget.value),value:H})),i.createElement("div",{className:ue.iconContainer},i.createElement(c.g,{label:"Preview"},i.createElement("div",{className:ue.iconPreview},ee===d.DD.Icon&&i.createElement(p.V,{src:q,className:ue.img}),ee===d.DD.Image&&H&&i.createElement("img",{src:q,alt:"Preview of the selected URL",className:ue.img}))),i.createElement(W._,null,ge)))},V=k=>({iconContainer:t.css`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:t.css`
    width: 238px;
    height: 198px;
    border: 1px solid ${k.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:t.css`
    width: 147px;
    height: 147px;
    fill: ${k.colors.text.primary};
  `}),b=k=>{const{value:H,onChange:Y,mediaType:ee,folderName:ue}=k,q=(0,f.wW)(X),ge=()=>{Y(H)},De=(0,i.createRef)(),{dialogProps:fe}=(0,n.R)({},De),{overlayProps:me}=(0,s.Ir)({onClose:ge,isDismissable:!0,isOpen:!0},De),ce=H&&H.includes("://"),[ie,re]=(0,i.useState)(H??""),[Ee,J]=(0,i.useState)(ce?d.hQ.URL:d.hQ.Folder),[te,ne]=(0,i.useState)(new FormData),[j,be]=(0,i.useState)(!1),[Le,Qe]=(0,i.useState)({message:""}),Ye=We=>`${q.resourcePickerPopoverTab} ${Ee===We&&q.resourcePickerPopoverActiveTab}`,de=()=>i.createElement(w,{value:H,mediaType:ee,folderName:ue,newValue:ie,setNewValue:re}),Be=()=>i.createElement(F,{newValue:ie,setNewValue:re,mediaType:ee}),Ve=()=>i.createElement(h,{mediaType:ee,setFormData:ne,setUpload:be,newValue:ie,error:Le}),$e=()=>{switch(Ee){case d.hQ.Folder:return de();case d.hQ.URL:return Be();case d.hQ.Upload:return Ve();default:return de()}};return i.createElement(u.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("section",{ref:De,...me,...fe},i.createElement("div",{className:q.resourcePickerPopover},i.createElement("div",{className:q.resourcePickerPopoverTabs},i.createElement("button",{className:Ye(d.hQ.Folder),onClick:()=>J(d.hQ.Folder)},"Folder"),i.createElement("button",{className:Ye(d.hQ.URL),onClick:()=>J(d.hQ.URL)},"URL")),i.createElement("div",{className:q.resourcePickerPopoverContent},$e(),i.createElement(o.h,{className:q.buttonGroup},i.createElement(l.zx,{className:q.button,variant:"secondary",onClick:()=>ge()},"Cancel"),i.createElement(l.zx,{className:q.button,variant:ie&&ie!==H?"primary":"secondary",onClick:()=>{j?fetch("/api/storage/upload",{method:"POST",body:te}).then(We=>{if(We.status>=400){We.json().then(Ke=>Qe(Ke));return}else return We.json()}).then(We=>{(0,m.i)().get(`api/storage/read/${We.path}`).then(()=>re(`${r.vc.appUrl}api/storage/read/${We.path}`)).then(()=>Y(`${r.vc.appUrl}api/storage/read/${We.path}`))}).catch(We=>console.error(We)):Y(ie)}},"Select"))))))},X=k=>({resourcePickerPopover:t.css`
    border-radius: ${k.shape.borderRadius()};
    box-shadow: ${k.shadows.z3};
    background: ${k.colors.background.primary};
    border: 1px solid ${k.colors.border.medium};
  `,resourcePickerPopoverTab:t.css`
    width: 50%;
    text-align: center;
    padding: ${k.spacing(1,0)};
    background: ${k.colors.background.secondary};
    color: ${k.colors.text.secondary};
    font-size: ${k.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:t.css`
    color: ${k.colors.text.primary};
    font-weight: ${k.typography.fontWeightMedium};
    background: ${k.colors.background.primary};
  `,resourcePickerPopoverContent:t.css`
    width: 315px;
    font-size: ${k.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${k.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:t.css`
    display: flex;
    width: 100%;
    border-radius: ${k.shape.borderRadius()} ${k.shape.borderRadius()} 0 0;
  `,buttonGroup:t.css`
    align-self: center;
    flex-direction: row;
  `,button:t.css`
    margin: 12px 20px 5px;
  `})},38647:(G,O,e)=>{"use strict";e.d(O,{$:()=>c});var t=e(68404),n=e(9274),u=e(71210),s=e(318),i=e(90723),m=e(98206),f=e(37565),o=e(92484);const l=[{label:"Fixed",value:o.xy.Fixed,description:"Fixed value"},{label:"Field",value:o.xy.Field,description:"Display field value"}],r={settings:{}},d={settings:{}},c=({value:g,context:p,onChange:y})=>{const a=(0,t.useCallback)(x=>{y({...g,mode:x})},[y,g]),v=(0,t.useCallback)(x=>{y({...g,field:x})},[y,g]),C=(0,t.useCallback)((x="")=>{y({...g,fixed:x})},[y,g]),E=()=>{C("")},P=g?.mode??o.xy.Fixed;return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(u._,{label:"Source",labelWidth:9,grow:!0},t.createElement(s.S,{value:P,options:l,onChange:a,fullWidth:!0}))),P!==o.xy.Fixed&&t.createElement(n.Z,null,t.createElement(u._,{label:"Field",labelWidth:9,grow:!0},t.createElement(m.b,{context:p,value:g.field??"",onChange:v,item:r}))),P===o.xy.Fixed&&t.createElement(n.Z,{key:g?.fixed},t.createElement(u._,{label:"Value",labelWidth:9,grow:!0},t.createElement(f.A,{context:p,value:g?.fixed,onChange:C,item:d,suffix:g?.fixed&&t.createElement(i.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:E})}))),P===o.xy.Template&&t.createElement(n.Z,null,t.createElement(u._,{label:"Template",labelWidth:9,grow:!0},t.createElement(f.A,{context:p,value:g?.fixed,onChange:C,item:d}))))}},54643:(G,O,e)=>{"use strict";e.d(O,{Lm:()=>t.L,Lv:()=>p,k9:()=>L,cL:()=>M,$2:()=>A.$});var t=e(30785),n=e(68404);const u=({value:N,onChange:W})=>{const[I,F]=useState(N?[{value:N,label:N}]:[]),[V,b]=useState(),X=window.__grafana_public_path__+"img/icons/unicons/",k=H=>{W(H),b(H)};return useEffect(()=>{getBackendSrv().get(`${X}/index.json`).then(H=>{F(H.files.map(Y=>({value:Y,label:Y})))})},[X]),React.createElement(Select,{options:I,value:V,onChange:H=>{k(H.value)}})},s=null;var i=e(9274),m=e(71210),f=e(318),o=e(98206),l=e(25532),r=e(92484),d=e(26786);const c=[{label:"Fixed",value:r.Q8.Fixed,description:"Fixed value"},{label:"Field",value:r.Q8.Field,description:"Use a string field result"}],g={settings:{}},p=N=>{const{value:W,context:I,onChange:F,item:V}=N,b=9,X=(0,n.useCallback)(fe=>{F({...W,mode:fe})},[F,W]),k=(0,n.useCallback)((fe="")=>{F({...W,field:fe})},[F,W]),H=(0,n.useCallback)(fe=>{F({...W,fixed:fe??""})},[F,W]),Y=fe=>{fe.stopPropagation(),F({mode:r.Q8.Fixed,fixed:"",field:""})},ee=W?.mode??r.Q8.Fixed,ue=V.settings?.showSourceRadio??!0,q=V.settings?.resourceType??r.DD.Icon,ge=V.settings?.folderName??l.ResourceFolderName.Icon;let De="";return q===r.DD.Icon&&(W?.fixed?De=(0,l.getPublicOrAbsoluteUrl)(W.fixed):V.settings?.placeholderValue&&(De=(0,l.getPublicOrAbsoluteUrl)(V.settings.placeholderValue))),n.createElement(n.Fragment,null,ue&&n.createElement(i.Z,null,n.createElement(m._,{label:"Source",labelWidth:b,grow:!0},n.createElement(f.S,{value:ee,options:c,onChange:X,fullWidth:!0}))),ee!==r.Q8.Fixed&&n.createElement(i.Z,null,n.createElement(m._,{label:"Field",labelWidth:b,grow:!0},n.createElement(o.b,{context:I,value:W.field??"",onChange:k,item:g}))),ee===r.Q8.Fixed&&n.createElement(d.E,{onChange:H,onClear:Y,value:W?.fixed,src:De,placeholder:V.settings?.placeholderText??"Select a value",name:y(W?.fixed)??"",mediaType:q,folderName:ge,size:r.zc.NORMAL}),ee===r.Q8.Mapping&&n.createElement(i.Z,null,n.createElement(m._,{label:"Mappings",labelWidth:b,grow:!0},n.createElement("div",null,"TODO mappings editor!"))))};function y(N){if(!N)return;const W=N.lastIndexOf("/");return W>0?N.substring(W+1):N}var h=e(52423),a=e(29516),v=e(46739),C=e(74067),E=e(45458),P=e(33048);const x={label:"Fixed value",value:"_____fixed_____"},M=N=>{const{value:W,context:I,onChange:F,item:V}=N,{settings:b}=V,X=(0,a.wW)(S),k=W?.field,H=Boolean(!k),Y=(0,C.IX)(I.data),ee=(0,C.nw)(Y,k,x),ue=(0,n.useMemo)(()=>(0,P.x5)(b),[b]),q=(0,n.useCallback)(re=>{F((0,P.C)(re,ue))},[F,ue]),ge=(0,n.useCallback)(re=>{const Ee=re.value;Ee&&Ee!==x.value?q({...W,field:Ee}):q({...W,field:void 0})},[q,W]),De=(0,n.useCallback)(re=>{re!==void 0&&q({...W,min:re})},[q,W]),fe=(0,n.useCallback)(re=>{re!==void 0&&q({...W,max:re})},[q,W]),me=(0,n.useCallback)(re=>{re!==void 0&&q({...W,fixed:re})},[q,W]),ce=W??{},ie=H?x:ee.find(re=>re.value===k);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(v.Ph,{value:ie,options:ee,onChange:ge,noOptionsMessage:"No fields found"})),n.createElement("div",{className:X.range},H&&n.createElement(i.Z,null,n.createElement(m._,{label:"Value",labelWidth:8,grow:!0},n.createElement(E.Y,{value:ce.fixed,...ue,onChange:me}))),!H&&!ue.hideRange&&n.createElement(n.Fragment,null,n.createElement(i.Z,null,n.createElement(m._,{label:"Min",labelWidth:8,grow:!0},n.createElement(E.Y,{value:ce.min,...ue,onChange:De}))),n.createElement(i.Z,null,n.createElement(m._,{label:"Max",labelWidth:8,grow:!0},n.createElement(E.Y,{value:ce.max,...ue,onChange:fe}))))))},S=N=>({range:h.css`
    padding-top: 8px;
  `});var D=e(14582);const T={label:"Fixed value",value:"_____fixed_____"},R=[{label:"Mod",value:r.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:r.eK.Clamped,description:"Use field values, clamped to max and min"}],L=({value:N,context:W,onChange:I,item:F})=>{const{settings:V}=F,b=0,X=N?.field,k=Boolean(!X),H=(0,C.IX)(W.data),Y=(0,C.nw)(H,X,T,D.fS.number),ee=(0,a.wW)(w),ue=(0,n.useCallback)(ce=>{const ie=ce.value;if(ie&&ie!==T.value)I({...N,field:ie});else{const re=N.fixed??b;I({...N,field:void 0,fixed:re})}},[I,N]),q=(0,n.useCallback)(ce=>{I({...N,mode:ce})},[I,N]),ge=(0,n.useCallback)(ce=>{I({...N,field:void 0,fixed:ce??b})},[I,N]),De=N??{},fe=N?.mode??r.eK.Mod,me=k?T:Y.find(ce=>ce.value===X);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(i.Z,null,n.createElement(m._,{label:"Limit",labelWidth:8,grow:!0},n.createElement(f.S,{value:fe,options:R,onChange:q,fullWidth:!0}))),n.createElement(v.Ph,{value:me,options:Y,onChange:ue,noOptionsMessage:"No fields found"})),n.createElement("div",{className:ee.range},k&&n.createElement(i.Z,null,n.createElement(m._,{label:"Value",labelWidth:8,grow:!0},n.createElement(E.Y,{value:De?.fixed??b,onChange:ge,max:V?.max,min:V?.min})))))},w=N=>({range:h.css`
    padding-top: 8px;
  `});var A=e(38647)},25532:(G,O,e)=>{"use strict";e.d(O,{MediaType:()=>t.DD,ResourceDimensionMode:()=>t.Q8,ResourceFolderName:()=>t.QS,ScalarDimensionMode:()=>t.eK,ScaleDimensionMode:()=>t.B5,TextDimensionMode:()=>t.xy,findField:()=>i.PI,findFieldIndex:()=>i.rj,getColorDimension:()=>m,getColorDimensionFromData:()=>i.FP,getPublicOrAbsoluteUrl:()=>g.t,getResourceDimension:()=>g.I,getResourceDimensionFromData:()=>i.Qz,getScalarDimension:()=>y.y,getScalarDimensionFromData:()=>i.z2,getScaleDimensionFromData:()=>i.pb,getScaledDimension:()=>o.W8,getScaledDimensionForField:()=>o.A,getTextDimension:()=>d,getTextDimensionFromData:()=>i.WO});var t=e(92484),n=e(425),u=e(59309),s=e(36512),i=e(20927);function m(h,a,v){return f((0,i.PI)(h,a.field),a,v)}function f(h,a,v){if(!h){const P=v.visualization.getColorByName(a.fixed??"grey");return{isAssumed:Boolean(a.field?.length)||!a.fixed,fixed:P,value:()=>P,get:x=>P}}const C=(0,n.fD)(h);if(C.isByValue||h.config.mappings?.length){const P=(0,u.xD)(h,!0);P!==h.config&&(h={...h,config:P},h.state=void 0);const x=(0,s.U)({field:h,theme:v}),M=S=>x(S).color??"#ccc";return{field:h,get:S=>M(h.values.get(S)),value:()=>M((0,i.cR)(h))}}const E=C.getCalculator(h,v)(0,0);return{fixed:E,value:()=>E,get:P=>E,field:h}}var o=e(33048),l=e(14582),r=e(20112);function d(h,a){const v=a.field?(0,i.PI)(h,a.field):h?.fields.find(C=>C.type===l.fS.string);return c(v,a)}function c(h,a){let v=a.fixed;const C=a.mode??t.xy.Fixed;if(C===t.xy.Fixed)return{isAssumed:!Boolean(v),fixed:v,value:()=>v,get:P=>v};if(C===t.xy.Template){const P=x=>`TEMPLATE[${a.fixed} // ${x}]`;return h?{field:h,get:x=>P(h.values.get(x)),value:()=>P((0,i.cR)(h))}:(v=P(""),{isAssumed:!0,fixed:v,value:()=>v,get:x=>v})}if(!h)return{isAssumed:!0,fixed:v,value:()=>v,get:P=>v};let E=P=>(0,r.zc)(h.display(P));return{field:h,get:P=>E(h.values.get(P)),value:()=>E((0,i.cR)(h))}}var g=e(59961),p=e(97934),y=e(86682)},59961:(G,O,e)=>{"use strict";e.d(O,{I:()=>s,t:()=>u});var t=e(92484),n=e(20927);function u(i){return i?i.indexOf(":/")>0?i:window.__grafana_public_path__+i:""}function s(i,m){const f=m.mode??t.Q8.Fixed;if(f===t.Q8.Fixed){const r=u(m.fixed);return{isAssumed:!Boolean(r),fixed:r,value:()=>r,get:d=>r}}const o=(0,n.PI)(i,m.field);if(!o){const r="";return{isAssumed:!0,fixed:r,value:()=>r,get:d=>r}}if(f===t.Q8.Mapping){const r=d=>u(`${d}`);return{field:o,get:d=>r(o.values.get(d)),value:()=>r((0,n.cR)(o))}}const l=r=>{if(o&&o.display){const d=o.display(r).icon;return u(d??"")}return""};return{field:o,get:r=>l(o.values.get(r)),value:()=>l((0,n.cR)(o))}}},86682:(G,O,e)=>{"use strict";e.d(O,{y:()=>u});var t=e(92484),n=e(20927);function u(i,m){return s((0,n.PI)(i,m?.field),m)}function s(i,m){if(!i){const l=m.fixed??0;return{isAssumed:Boolean(m.field?.length)||!m.fixed,fixed:l,value:()=>l,get:()=>l}}let f=l=>l%m.max;return m.mode===t.eK.Clamped&&(f=l=>l<m.min?m.min:l>m.max?m.max:l),{field:i,get:l=>{const r=i.values.get(l);return r===null||typeof r!="number"?0:f(r)},value:()=>(0,n.cR)(i)}}},33048:(G,O,e)=>{"use strict";e.d(O,{A:()=>i,C:()=>f,W8:()=>s,x5:()=>m});var t=e(59309),n=e(20927),u=e(25532);function s(o,l){return i((0,n.PI)(o,l?.field),l)}function i(o,l,r){if(!o){const h=l.fixed??0;return{isAssumed:Boolean(l.field?.length)||!l.fixed,fixed:h,value:()=>h,get:()=>h}}const d=(0,t.dz)(o),c=l.max-l.min;if(o.values.length<1||c<=0||d.delta<=0)return{fixed:l.min,value:()=>l.min,get:()=>l.min};let p=h=>l.min+h*c;if(r===u.ScaleDimensionMode.Quadratic){const h=Math.PI*(l.max/2)**2,a=Math.PI*(l.min/2)**2,v=h-a;p=C=>{let E=a+v*C;return Math.sqrt(E/Math.PI)*2}}const y=h=>{const a=o.values.get(h);let v=0;return a!==-1/0&&(v=(a-d.min)/d.delta),v>1?v=1:v<0&&(v=0),p(v)};return{get:y,value:()=>y((0,n.cR)(o)),field:o}}function m(o){return o||(o={min:0,max:1}),o.min==null&&(o.min=0),o.max==null&&(o.max=1),o}function f(o,l){let{min:r,max:d}=m(l);if(o||(o={}),o.max==null&&(o.max=d),o.min==null&&(o.min=r),o.min>o.max){const c=o.max;o.max=o.min,o.min=c}return o.min<r&&(o.min=r),o.max>d&&(o.max=d),o.fixed==null&&(o.fixed=o.min+(o.max-o.min)/2),o.field||(o.fixed>d?o.fixed=d:o.fixed<r&&(o.fixed=r)),o}},92484:(G,O,e)=>{"use strict";e.d(O,{B5:()=>t,DD:()=>f,Q8:()=>i,QS:()=>m,eK:()=>n,hQ:()=>o,qj:()=>s,xy:()=>u,zc:()=>l});var t=(r=>(r.Linear="linear",r.Quadratic="quad",r))(t||{}),n=(r=>(r.Mod="mod",r.Clamped="clamped",r))(n||{}),u=(r=>(r.Fixed="fixed",r.Field="field",r.Template="template",r))(u||{});const s=Object.freeze({fixed:"",mode:"field",field:""});var i=(r=>(r.Fixed="fixed",r.Field="field",r.Mapping="mapping",r))(i||{}),m=(r=>(r.Icon="img/icons/unicons",r.IOT="img/icons/iot",r.Marker="img/icons/marker",r.BG="img/bg",r))(m||{}),f=(r=>(r.Icon="icon",r.Image="image",r))(f||{}),o=(r=>(r.Folder="folder",r.URL="url",r.Upload="upload",r))(o||{}),l=(r=>(r.SMALL="small",r.NORMAL="normal",r))(l||{})},20927:(G,O,e)=>{"use strict";e.d(O,{FP:()=>m,PI:()=>d,Qz:()=>l,WO:()=>r,cR:()=>g,pb:()=>f,rj:()=>c,z2:()=>o});var t=e(89890),n=e(21760),u=e(93003),s=e(25532),i=e(86682);function m(p,y){if(p?.series&&y.field)for(const h of p.series){const a=(0,s.getColorDimension)(h,y,u.v.theme2);if(!a.isAssumed||p.series.length===1)return a}return(0,s.getColorDimension)(void 0,y,u.v.theme2)}function f(p,y){if(p?.series&&y.field)for(const h of p.series){const a=(0,s.getScaledDimension)(h,y);if(!a.isAssumed||p.series.length===1)return a}return(0,s.getScaledDimension)(void 0,y)}function o(p,y){if(p?.series&&y.field)for(const h of p.series){const a=(0,i.y)(h,y);if(!a.isAssumed||p.series.length===1)return a}return(0,i.y)(void 0,y)}function l(p,y){if(p?.series&&y.field)for(const h of p.series){const a=(0,s.getResourceDimension)(h,y);if(!a.isAssumed||p.series.length===1)return a}return(0,s.getResourceDimension)(void 0,y)}function r(p,y){if(p?.series&&y.field)for(const h of p.series){const a=(0,s.getTextDimension)(h,y);if(!a.isAssumed||p.series.length===1)return a}return(0,s.getTextDimension)(void 0,y)}function d(p,y){if(!(!p||!y?.length))for(const h of p.fields){if(y===h.name)return h;const a=(0,t.C)(h,p);if(y===a)return h}}function c(p,y){if(!(!p||!y?.length))for(let h=0;h<p.fields.length;h++){const a=p.fields[h];if(y===a.name)return h;const v=(0,t.C)(a,p);if(y===v)return h}}function g(p){const y=p.state?.calcs;if(y){const v=y[n.gz.lastNotNull];if(v!=null)return v}const h=p.values;let a=h.length-1;for(;a>=0;){const v=h.get(a--);if(v!=null)return v}}},14530:(G,O,e)=>{"use strict";e.d(O,{m:()=>ee});var t=e(52423),n=e(68404),u=e(89029),s=e(69934),i=e(29516),m=e(81473),f=e(83437),o=e(91162),l=e(25405),r=e(81168),d=e(93713),c=e(82897),g=e(33180),p=e(46519),y=e(81697),h=e(92624),a=e(71570);function v({splitOpenFn:q,traceToLogsOptions:ge,traceToMetricsOptions:De,dataFrame:fe,createFocusSpanLink:me,trace:ce}){if(!fe)return;let ie=R(ce);const re=fe.fields.some(J=>Boolean(J.config.links?.length));if(fe.fields.length===1||!re)return E(q,fe.fields[0],ge,De,me,ie);if(re)return function(te){ie={...ie,...L(te)};const ne=fe.fields.find(j=>Boolean(j.config.links?.length));try{const j=(0,a.a)({field:ne,rowIndex:te.dataFrameRowIndex,splitOpenFn:q,range:D(te),dataFrame:fe,vars:ie});return{logLinks:[{href:j[0].href,onClick:j[0].onClick,content:n.createElement(y.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:j[0].origin}]}}catch(j){console.error(j);return}}}const C=["cluster","hostname","namespace","pod"].map(q=>({key:q}));function E(q,ge,De,fe,me,ce){let ie;De?.datasourceUid&&(ie=(0,o.ak)().getInstanceSettings(De.datasourceUid));const re=ie?.type==="grafana-splunk-datasource";let Ee;return fe?.datasourceUid&&(Ee=(0,o.ak)().getInstanceSettings(fe.datasourceUid)),function(te){ce={...ce,...L(te)};const ne={traceLinks:[]};let j,be="";if(ie&&De){const Le=De.customQuery?De.query:void 0,Qe=De.tags||C;switch(ie?.type){case"loki":be=S(te,Qe),j=P(te,De,be,Le);break;case"grafana-splunk-datasource":be=S(te,Qe,{joinBy:" "}),j=M(te,De,be,Le);break;case"elasticsearch":case"grafana-opensearch-datasource":be=S(te,Qe,{labelValueSign:":",joinBy:" AND "}),j=x(te,De,be,Le);break}if(j){const Ye={title:ie.name,url:"",internal:{datasourceUid:ie.uid,datasourceName:ie.name,query:j}};if(ce={...ce,__tags:{text:"Tags",value:be}},w(Ye.internal.query,ce)){const de=(0,u._)({link:Ye,internalLink:Ye.internal,scopedVars:ce,range:D(te,{startMs:De.spanStartTimeShift?g.intervalToMs(De.spanStartTimeShift):0,endMs:De.spanEndTimeShift?g.intervalToMs(De.spanEndTimeShift):0},re),field:{},onClickFn:q,replaceVariables:(0,s.J)().replace.bind((0,s.J)())});ne.logLinks=[{href:de.href,onClick:de.onClick,content:n.createElement(y.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:ge}]}}}if(Ee&&fe?.queries){ne.metricLinks=[];for(const Le of fe.queries){const Qe=T(Le,fe?.tags||[],te),Ye={title:Ee.name,url:"",internal:{datasourceUid:Ee.uid,datasourceName:Ee.name,query:{expr:Qe,refId:"A"}}},de=(0,u._)({link:Ye,internalLink:Ye.internal,scopedVars:{},range:D(te,{startMs:fe.spanStartTimeShift?g.intervalToMs(fe.spanStartTimeShift):0,endMs:fe.spanEndTimeShift?g.intervalToMs(fe.spanEndTimeShift):0}),field:{},onClickFn:q,replaceVariables:(0,s.J)().replace.bind((0,s.J)())});ne.metricLinks.push({title:Le?.name,href:de.href,onClick:de.onClick,content:n.createElement(y.J,{name:"chart-line",title:"Explore metrics for this span"}),field:ge})}}if(te.references&&me)for(const Le of te.references){if(Le.refType==="CHILD_OF")continue;const Qe=me(Le.traceID,Le.spanID);ne.traceLinks.push({href:Qe.href,title:Le.span?Le.span.operationName:"View linked span",content:n.createElement(y.J,{name:"link",title:"View linked span"}),onClick:Qe.onClick,field:Qe.origin})}if(te.subsidiarilyReferencedBy&&me)for(const Le of te.subsidiarilyReferencedBy){const Qe=me(Le.traceID,Le.spanID);ne.traceLinks.push({href:Qe.href,title:Le.span?Le.span.operationName:"View linked span",content:n.createElement(y.J,{name:"link",title:"View linked span"}),onClick:Qe.onClick,field:Qe.origin})}return ne}}function P(q,ge,De,fe){const{filterByTraceID:me,filterBySpanID:ce}=ge;if(fe)return{expr:fe,refId:""};if(!De)return;let ie="{${__tags}}";return me&&q.traceID&&(ie+=' |="${__span.traceId}"'),ce&&q.spanID&&(ie+=' |="${__span.spanId}"'),{expr:ie,refId:""}}function x(q,ge,De,fe){const{filterByTraceID:me,filterBySpanID:ce}=ge;if(fe)return{query:fe,refId:"",metrics:[{id:"1",type:"logs"}]};let ie=[];return ce&&q.spanID&&ie.push('"${__span.spanId}"'),me&&q.traceID&&ie.push('"${__span.traceId}"'),De&&ie.push("${__tags}"),{query:ie.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function M(q,ge,De,fe){const{filterByTraceID:me,filterBySpanID:ce}=ge;if(fe)return{query:fe,refId:""};let ie="";return De&&(ie+="${__tags}"),me&&q.traceID&&(ie+=' "${__span.traceId}"'),ce&&q.spanID&&(ie+=' "${__span.spanId}"'),{query:ie,refId:""}}function S(q,ge,{labelValueSign:De="=",joinBy:fe=", "}={}){return[...q.process.tags,...q.tags,{key:"spanId",value:q.spanID},{key:"traceId",value:q.traceID},{key:"name",value:q.operationName},{key:"duration",value:q.duration}].map(me=>{const ce=ge.find(ie=>ie.key===me.key);if(ce)return`${ce.value?ce.value:ce.key}${De}"${me.value}"`}).filter(me=>Boolean(me)).join(fe)}function D(q,ge={startMs:0,endMs:0},De=!1){const fe=Math.floor(q.startTime/1e3+ge.startMs),me=(0,p.CQ)(fe),ce=(q.startTime+q.duration)/1e3;let ie=Math.floor(ce+ge.endMs);De&&ie-fe<1e3?ie=fe+1e3:fe===ie&&ie++;const re=(0,p.CQ)(ie);return{from:me,to:re,raw:{from:me,to:re}}}function T(q,ge=[],De){if(!q.query)return`histogram_quantile(0.5, sum(rate(tempo_spanmetrics_latency_bucket{operation="${De.operationName}"}[5m])) by (le))`;let fe=q.query;if(ge.length&&fe.indexOf("$__tags")!==-1){const me=[...De.process.tags,...De.tags],ie=ge.reduce((re,Ee)=>{const J=me.find(te=>te.key===Ee.key)?.value;return J&&re.push(`${Ee.value?Ee.value:Ee.key}="${J}"`),re},[])?.join(", ");fe=fe.replace(/\$__tags/g,ie)}return fe}function R(q){return{__trace:{text:"Trace",value:{duration:q.duration,name:q.traceName,traceId:q.traceID}}}}function L(q){const ge={};for(const De of q.process.tags)ge[De.key]=De.value;for(const De of q.tags)ge[De.key]=De.value;return{__span:{text:"Span",value:{spanId:q.spanID,traceId:q.traceID,duration:q.duration,name:q.operationName,tags:ge}}}}function w(q,ge){const De=N(A(q),ge);return Object.values(De).every(fe=>fe!==void 0)}function A(q){let ge="";for(const De of Object.keys(q))typeof q[De]=="string"?ge+=" "+q[De]:typeof q[De]=="object"&&q[De]!==null&&(ge+=" "+A(q[De]));return ge}function N(q,ge){const De=new RegExp(h.J7),fe={};return q.replace(De,(me,ce,ie,re,Ee,J)=>{const te=ce||ie||Ee;return fe[te]=W(te,J,ge),""}),fe}function W(q,ge,De){const fe=De[q];if(fe)return ge?(0,c.property)(ge)(fe.value):fe.value}function I(){const[q,ge]=(0,n.useState)(new Set),De=(0,n.useCallback)(function(Ee){if(q.size===0)return;let J=-1,te=!0;const ne=Ee.reduce((j,be)=>(be.depth<=J&&(te=!0),te&&j.has(be.spanID)&&(j.delete(be.spanID),te=!1,J=be.depth),j),new Set(q));ge(ne)},[q]),fe=(0,n.useCallback)(function(Ee){if(F(Ee,q))return;let J;const te=Ee.reduce((ne,j)=>(J&&j.depth<=J.depth?(ne.add(J.spanID),j.hasChildren&&(J=j)):j.hasChildren&&!ne.has(j.spanID)&&(J=j),ne),new Set(q));J&&te.add(J.spanID),ge(te)},[q]),me=(0,n.useCallback)(function(){ge(new Set)},[]),ce=(0,n.useCallback)(function(Ee){if(F(Ee,q))return;const J=Ee.reduce((te,ne)=>(ne.hasChildren&&te.add(ne.spanID),te),new Set);ge(J)},[q]),ie=(0,n.useCallback)(function(Ee){const J=new Set(q);q.has(Ee)?J.delete(Ee):J.add(Ee),ge(J)},[q]);return{childrenHiddenIDs:q,expandOne:De,collapseOne:fe,expandAll:me,collapseAll:ce,childrenToggle:ie}}function F(q,ge){return q.filter(fe=>fe.hasChildren).length===ge.size}function V(q){const[ge,De]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{De(new Map)},[q,De]);const fe=(0,n.useCallback)(function(re){const Ee=new Map(ge);Ee.has(re)?Ee.delete(re):Ee.set(re,new m.DetailState),De(Ee)},[ge]),me=(0,n.useCallback)(function(re,Ee){const J=ge.get(re);if(!J)return;const te=J.toggleLogItem(Ee),ne=new Map(ge);return ne.set(re,te),De(ne)},[ge]),ce=(0,n.useCallback)(function(re,Ee){const J=ge.get(re);if(!J)return;const te=J.toggleReferenceItem(Ee),ne=new Map(ge);return ne.set(re,te),De(ne)},[ge]);return{detailStates:ge,toggleDetail:fe,detailLogItemToggle:me,detailLogsToggle:(0,n.useCallback)(ie=>b("logs",ge,De)(ie),[ge]),detailWarningsToggle:(0,n.useCallback)(ie=>b("warnings",ge,De)(ie),[ge]),detailStackTracesToggle:(0,n.useCallback)(ie=>b("stackTraces",ge,De)(ie),[ge]),detailReferenceItemToggle:ce,detailReferencesToggle:(0,n.useCallback)(ie=>b("references",ge,De)(ie),[ge]),detailProcessToggle:(0,n.useCallback)(ie=>b("process",ge,De)(ie),[ge]),detailTagsToggle:(0,n.useCallback)(ie=>b("tags",ge,De)(ie),[ge])}}function b(q,ge,De){return fe=>{const me=ge.get(fe);if(!me)return;let ce;q==="tags"?ce=me.toggleTags():q==="process"?ce=me.toggleProcess():q==="warnings"?ce=me.toggleWarnings():q==="references"?ce=me.toggleReferences():q==="stackTraces"?ce=me.toggleStackTraces():ce=me.toggleLogs();const ie=new Map(ge);ie.set(fe,ce),De(ie)}}function X(){const[q,ge]=(0,n.useState)(new Set),De=(0,n.useCallback)(function(ce){ge(ie=>{const re=new Set(ie);return re.add(ce),re})},[]),fe=(0,n.useCallback)(function(ce){ge(ie=>{const re=new Set(ie);return re.delete(ce),re})},[]);return{hoverIndentGuideIds:q,addHoverIndentGuideId:De,removeHoverIndentGuideId:fe}}function k(){const[q,ge]=(0,n.useState)({time:{current:[0,1]}}),De=(0,n.useCallback)(function(ce){ge(ie=>{const re={...ie.time,...ce};return{...ie,time:re}})},[]),fe=(0,n.useCallback)(function(ce,ie){const Ee={current:[ce,ie]};ge(J=>({...J,time:Ee}))},[]);return{viewRange:q,updateViewRangeTime:fe,updateNextViewRangeTime:De}}const H=q=>({noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${q.typography.h4.fontSize};
    color: ${q.colors.text.secondary};
  `});function Y(){return{}}function ee(q){const{spanFindMatches:ge,traceProp:De,datasource:fe,topOfViewRef:me,topOfViewRefType:ce}=q,{detailStates:ie,toggleDetail:re,detailLogItemToggle:Ee,detailLogsToggle:J,detailProcessToggle:te,detailReferencesToggle:ne,detailReferenceItemToggle:j,detailTagsToggle:be,detailWarningsToggle:Le,detailStackTracesToggle:Qe}=V(q.dataFrames[0]),{removeHoverIndentGuideId:Ye,addHoverIndentGuideId:de,hoverIndentGuideIds:Be}=X(),{viewRange:Ve,updateViewRangeTime:$e,updateNextViewRangeTime:We}=k(),{expandOne:Ke,collapseOne:qe,childrenToggle:Xe,collapseAll:at,childrenHiddenIDs:Ze,expandAll:lt}=I(),nt=(0,i.wW)(H),[_e,ut]=(0,n.useState)(.25),[rt,je]=(0,n.useState)(!1),[dt,oe]=ue({refId:q.dataFrames[0]?.refId,exploreId:q.exploreId,datasource:fe,splitOpenFn:q.splitOpenFn}),Se=(0,n.useMemo)(()=>({childrenHiddenIDs:Ze,detailStates:ie,hoverIndentGuideIds:Be,shouldScrollToFirstUiFindMatch:!1,spanNameColumnWidth:_e,traceID:q.traceProp?.traceID}),[Ze,ie,Be,_e,q.traceProp?.traceID]),Re=(0,o.ak)().getInstanceSettings(fe?.name),ze=(0,f.p)(Re?.jsonData),ve=Re?.jsonData?.tracesToMetrics,Te=Re?.jsonData,he=(0,n.useMemo)(()=>v({splitOpenFn:q.splitOpenFn,traceToLogsOptions:ze,traceToMetricsOptions:ve,dataFrame:q.dataFrames[0],createFocusSpanLink:oe,trace:De}),[q.splitOpenFn,ze,ve,q.dataFrames,oe,De]),pe=(0,n.useCallback)(()=>je(!rt),[rt]),ye=(0,r.useSelector)(Ne=>(0,l.Z)(Ne.user)),Oe=fe?fe?.type:"unknown";return n.createElement(n.Fragment,null,q.dataFrames?.length&&q.dataFrames[0]?.meta?.preferredVisualisationType==="trace"&&De?n.createElement(n.Fragment,null,n.createElement(m.TracePageHeader,{canCollapse:!1,hideMap:!1,hideSummary:!1,onSlimViewClicked:pe,onTraceGraphViewClicked:Y,slimView:rt,trace:De,updateNextViewRangeTime:We,updateViewRangeTime:$e,viewRange:Ve,timeZone:ye}),n.createElement(m.TraceTimelineViewer,{registerAccessors:Y,scrollToFirstVisibleSpan:Y,findMatchesIDs:ge,trace:De,datasourceType:Oe,spanBarOptions:Te?.spanBar,traceTimeline:Se,updateNextViewRangeTime:We,updateViewRangeTime:$e,viewRange:Ve,timeZone:ye,setSpanNameColumnWidth:ut,collapseAll:at,collapseOne:qe,expandAll:lt,expandOne:Ke,childrenToggle:Xe,clearShouldScrollToFirstUiFindMatch:Y,detailLogItemToggle:Ee,detailLogsToggle:J,detailWarningsToggle:Le,detailStackTracesToggle:Qe,detailReferencesToggle:ne,detailReferenceItemToggle:j,detailProcessToggle:te,detailTagsToggle:be,detailToggle:re,setTrace:Y,addHoverIndentGuideId:de,removeHoverIndentGuideId:Ye,linksGetter:()=>[],uiFind:q.search,createSpanLink:he,scrollElement:q.scrollElement,focusedSpanId:dt,focusedSpanIdForSearch:q.focusedSpanIdForSearch,createFocusSpanLink:oe,topOfViewRef:me,topOfViewRefType:ce})):n.createElement("div",{className:nt.noDataMsg},"No data"))}function ue(q){const ge=(0,r.useSelector)(re=>re.explore[q.exploreId]?.panelsState.trace),De=ge?.spanId,fe=(0,r.useDispatch)(),me=re=>fe((0,d.km)(q.exploreId,"trace",{...ge,spanId:re})),ce=(0,r.useSelector)(re=>re.explore[q.exploreId]?.queries.find(Ee=>Ee.refId===q.refId));return[De,(re,Ee)=>{const J={title:"Deep link to this span",url:"",internal:{datasourceUid:q.datasource?.uid,datasourceName:q.datasource?.name,query:{...ce,query:re},panelsState:{trace:{spanId:Ee}}}},te=ce?.queryType==="traceId"&&ce.query===re;return(0,u._)({link:J,internalLink:J.internal,scopedVars:{},range:{},field:{},onClickFn:te?()=>me(De===Ee?void 0:Ee):q.splitOpenFn?()=>q.splitOpenFn({datasourceUid:q.datasource?.uid,query:{...ce,query:re},panelsState:{trace:{spanId:Ee}}}):void 0,replaceVariables:(0,s.J)().replace.bind((0,s.J)())})}]}},75151:(G,O,e)=>{"use strict";e.d(O,{R:()=>u});var t=e(68404),n=e(81473);function u(s){const[i,m]=(0,t.useState)(""),f=(0,t.useMemo)(()=>i&&s?(0,n.filterSpans)(i,s):void 0,[i,s]);return{search:i,setSearch:m,spanFindMatches:f}}},335:(G,O,e)=>{"use strict";e.d(O,{N:()=>u});var t=e(50235),n=e(81473);function u(i){if(!i)return null;let m=i.fields.length===1?i.fields[0].values.get(0):s(i);return(0,n.transformTraceData)(m)}function s(i){const m=new t.U(i),f={};for(let o=0;o<m.length;o++){const l=m.get(o);f[l.spanID]||(f[l.spanID]={serviceName:l.serviceName,tags:l.serviceTags})}return{traceID:m.get(0).traceID,processes:f,spans:m.toArray().map((o,l)=>{const r=[];return o.parentSpanID&&r.push({refType:"CHILD_OF",spanID:o.parentSpanID,traceID:o.traceID}),o.references&&r.push(...o.references.map(d=>({refType:"FOLLOWS_FROM",...d}))),{...o,duration:o.duration*1e3,startTime:o.startTime*1e3,processID:o.spanID,flags:0,references:r,logs:o.logs?.map(d=>({...d,timestamp:d.timestamp*1e3}))||[],dataFrameRowIndex:l}})}}},46526:(G,O,e)=>{"use strict";e.d(O,{eX:()=>d,zU:()=>r});var t=e(32557),n=e(77274),u=e(45781),s=e(55935),i=e(98589),m=e(73257),f=e(86297),o=e(16983);const l=(0,t.PH)("explore/updateDatasourceInstance");function r(c,g,p){return async(y,h)=>{const a=h().user.orgId,{history:v,instance:C}=await(0,o.r_)(a,{uid:g}),E=h().explore[c].datasourceInstance;if((0,n.ff)("explore_change_ds",{from:(E?.meta?.mixed?"mixed":E?.type)||"unknown",to:C.meta.mixed?"mixed":C.type,exploreId:c}),y(l({exploreId:c,datasourceInstance:C,history:v})),p?.importQueries){const P=h().explore[c].queries;await y((0,m.GJ)(c,P,E,C))}h().explore[c].isLive&&y((0,f.oz)(c,u.dP.offOption.value)),p?.importQueries&&y((0,m.aA)(c))}}const d=(c,g)=>{if(l.match(g)){const{datasourceInstance:p,history:y}=g.payload;return(0,s.RZ)(c.querySubscription),{...c,datasourceInstance:p,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,i.DK)(),queryResponse:(0,o.lp)(),loading:!1,queryKeys:[],history:y,datasourceMissing:!1}}return c}},93713:(G,O,e)=>{"use strict";e.d(O,{CK:()=>C,Om:()=>E,iz:()=>P,km:()=>y,qN:()=>v});var t=e(32557),n=e(82897),u=e.n(n),s=e(77213),i=e(55935),m=e(25405),f=e(46526),o=e(13582),l=e(48197),r=e(73257),d=e(86297),c=e(16983);const g=(0,t.PH)("explore/changeSize"),p=(0,t.PH)("explore/changePanels");function y(M,S,D){return async(T,R)=>{const L=R().explore[M];if(L===void 0)return;const{panelsState:w}=L;T(p({exploreId:M,panelsState:{...w,[S]:D}})),T((0,l.og)())}}const h=(0,t.PH)("explore/initializeExplore"),a=(0,t.PH)("explore/setUrlReplaced");function v(M,{height:S,width:D}){return g({exploreId:M,height:S,width:D})}function C(M,S,D,T,R,L,w,A){return async(N,W)=>{const I=(0,s.F)().getList();let F,V=[];if(I.length>=1){const b=W().user.orgId,X=await(0,c.r_)(b,S);F=X.instance,V=X.history}N(h({exploreId:M,containerWidth:R,eventBridge:L,queries:D,range:T,datasourceInstance:F,history:V,isFromCompactUrl:A})),w!==void 0&&N(p({exploreId:M,panelsState:w})),N((0,d.b3)({exploreId:M})),F&&N((0,r.aA)(M,{replaceUrl:!0}))}}function E(M,S){return async(D,T)=>{const R=T().explore[M];if(!R?.initialized)return;const L=(0,i.J5)(S),w=x(L,(0,c.D)(R)),{containerWidth:A,eventBridge:N}=R,{datasource:W,queries:I,range:F,panelsState:V}=L,b=[];for(let Y=0;Y<I.length;Y++){const ee=I[Y];b.push((0,i.fR)(ee,b,Y))}const X=(0,m.Z)(T().user),k=(0,m.i)(T().user),H=(0,i.vP)(F,X,k);if(w.datasource){const Y=await(0,i.Z8)(I);await D(C(M,W,Y,H,A,N,V));return}w.range&&D((0,d.b3)({exploreId:M,rawRange:H.raw})),w.queries&&D((0,r.SE)({exploreId:M,queries:b})),w.panelsState&&V!==void 0&&D(p({exploreId:M,panelsState:V})),(w.queries||w.range)&&D((0,r.aA)(M))}}const P=(M=(0,c.t5)(),S)=>{if(M=(0,r.Y)(M,S),M=(0,f.eX)(M,S),M=(0,d.ok)(M,S),M=(0,o.Oo)(M,S),l.ZU.match(S)){const{richHistory:D,total:T}=S.payload.richHistoryResults;return{...M,richHistory:D,richHistoryTotal:T}}if(l.Zy.match(S)){const D=S.payload.filters;return{...M,richHistorySearchFilters:D}}if(g.match(S)){const D=S.payload.width;return{...M,containerWidth:D}}if(p.match(S)){const{panelsState:D}=S.payload;return{...M,panelsState:D}}if(h.match(S)){const{containerWidth:D,eventBridge:T,queries:R,range:L,datasourceInstance:w,history:A,isFromCompactUrl:N}=S.payload;return{...M,containerWidth:D,eventBridge:T,range:L,queries:R,initialized:!0,queryKeys:(0,i.$$)(R),datasourceInstance:w,history:A,datasourceMissing:!w,queryResponse:(0,c.lp)(),cache:[],isFromCompactUrl:N||!1}}return M},x=(M,S)=>{const D=!(0,n.isEqual)(S?.datasource,M?.datasource),T=!(0,n.isEqual)(S?.queries,M?.queries),R=!(0,n.isEqual)(S?.range||i.UI,M?.range||i.UI),L=!(0,n.isEqual)(S?.panelsState,M?.panelsState);return{datasource:D,queries:T,range:R,panelsState:L}}},13582:(G,O,e)=>{"use strict";e.d(O,{Cs:()=>E,Ff:()=>y,KZ:()=>M,NV:()=>h,Oo:()=>S,TV:()=>v,WY:()=>g,ch:()=>x,ev:()=>p,fM:()=>r,ik:()=>a,io:()=>C,sO:()=>P});var t=e(32557),n=e(93003),u=e(184),s=e(69597),i=e(58379),m=e(51424),f=e(81168),o=e(40967),l=e(48197);const r=(0,t.PH)("explore/historyUpdated"),d=({updatedQuery:D,deletedId:T})=>async(R,L)=>{c(L().explore,(w,A)=>{const N=w.richHistory.map(I=>I.id===D?.id?D:I).filter(I=>I.id!==T),W=w.richHistory.length-N.length;R((0,l.ZU)({richHistoryResults:{richHistory:N,total:w.richHistoryTotal-W},exploreId:A}))})},c=(D,T)=>{T(D.left,f.ExploreId.left),D.right&&T(D.right,f.ExploreId.right)},g=(D,T,R)=>async(L,w)=>{const{richHistoryStorageFull:A,limitExceeded:N}=await(0,m.au)(D,T,R,!1,"",!w().explore.richHistoryStorageFull,!w().explore.richHistoryLimitExceededWarningShown);A&&L((0,l.fm)()),N&&L((0,l.QN)())},p=(D,T)=>async(R,L)=>{const w=await(0,m.VI)(D,T);R(d({updatedQuery:w}))},y=(D,T)=>async R=>{const L=await(0,m.gt)(D,T);R(d({updatedQuery:L}))},h=D=>async T=>{const R=await(0,m.y9)(D);T(d({deletedId:R}))},a=()=>async D=>{await(0,m.HK)(),D((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:f.ExploreId.left})),D((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:f.ExploreId.right}))},v=D=>async(T,R)=>{const L=R().explore[D]?.richHistorySearchFilters;if(L){const w=await(0,m.ub)(L);T((0,l.ZU)({richHistoryResults:w,exploreId:D}))}},C=D=>async(T,R)=>{const L=R().explore[D]?.richHistorySearchFilters,w=R().explore[D]?.richHistory;if(L&&w){const A={...L,page:(L?.page||1)+1},N=await(0,m.ub)(A),W=[...w,...N.richHistory];T((0,l.Zy)({filters:A,exploreId:D})),T((0,l.ZU)({richHistoryResults:{richHistory:W,total:N.total},exploreId:D}))}},E=D=>async T=>{T((0,l.Zy)({filters:void 0,exploreId:D})),T((0,l.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:D}))},P=()=>async(D,T)=>{const R=i.Z.getBool(s.hO.migrated,!1),L=T().explore.richHistoryMigrationFailed;if(n.v.queryHistoryEnabled&&!R&&!L){const A=await(0,m.rq)();A.status===m.rv.Failed?(D((0,l.CR)()),(0,u.H)(A.error,{explore:{event:"QueryHistoryMigrationFailed"}})):i.Z.set(s.hO.migrated,!0)}let w=T().explore.richHistorySettings;w||(w=await(0,m.di)(),D((0,l.e8)(w)))},x=D=>async T=>{T((0,l.e8)(D)),await(0,m.kg)(D)},M=(D,T)=>async(R,L)=>{await R((0,l.Zy)({exploreId:D,filters:{...T}}));const w=L().explore.richHistorySettings;(0,o.X)().lastUsedDataSourcesAvailable&&await R(x({...w,lastUsedDatasourceFilters:T.datasourceFilters}))},S=(D,T)=>r.match(T)?{...D,history:T.payload.history}:D},48197:(G,O,e)=>{"use strict";e.d(O,{AP:()=>v,CL:()=>y,CR:()=>c,IS:()=>x,QN:()=>d,Sx:()=>h,WK:()=>C,YV:()=>S,ZP:()=>w,ZU:()=>l,Zy:()=>p,bW:()=>M,e8:()=>g,fm:()=>r,m$:()=>D,nL:()=>a,og:()=>P,tl:()=>o});var t=e(32557),n=e(27677),u=e(57388),s=e(55935),i=e(3032),m=e(93713),f=e(16983);const o=(0,t.PH)("explore/syncTimes"),l=(0,t.PH)("explore/richHistoryUpdated"),r=(0,t.PH)("explore/richHistoryStorageFullAction"),d=(0,t.PH)("explore/richHistoryLimitExceededAction"),c=(0,t.PH)("explore/richHistoryMigrationFailedAction"),g=(0,t.PH)("explore/richHistorySettingsUpdated"),p=(0,t.PH)("explore/richHistorySearchFiltersUpdatedAction"),y=(0,t.PH)("explore/saveCorrelationsAction"),h=(0,t.PH)("explore/splitSizeUpdateAction"),a=(0,t.PH)("explore/maximizePaneAction"),v=(0,t.PH)("explore/evenPaneResizeAction"),C=(0,t.PH)("explore/resetExplore"),E=(0,t.PH)("explore/splitClose"),P=A=>(N,W)=>{const{left:I,right:F}=W().explore,b={orgId:W().user.orgId.toString()};b.left=(0,n.S)((0,f.D)(I)),F?b.right=(0,n.S)((0,f.D)(F)):b.right=null,x.right=b.right,x.left=b.left,u.E1.partial({...b},A?.replace)},x={},M=A=>async(N,W)=>{const I=W().explore[i.Kd.left];let V=(0,f.D)(I);A&&(V={datasource:A.datasourceUid,queries:[A.query],range:A.range||I.range,panelsState:A.panelsState});const b=(0,n.S)(V);u.E1.partial({right:b},!0)};function S(A){return(N,W)=>{N(E({itemId:A})),N(P())}}const D=(A,N)=>async W=>{const{getDataSourceSrv:I,getTimeSrv:F,getExploreUrl:V,openInNewWindow:b}=N,X=I(),k=await V({panel:A,datasourceSrv:X,timeSrv:F()});if(b&&k){b(k);return}u.E1.push(k)},T=(0,f.t5)(),R={syncedTimes:!1,left:T,right:void 0,correlations:void 0,richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,richHistoryMigrationFailed:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},w={explore:(A=R,N)=>{if(E.match(N)){const{itemId:W}=N.payload,I={left:W===i.Kd.left?A.right:A.left,right:void 0};return{...A,...I,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(h.match(N)){const{largerExploreId:W}=N.payload;return{...A,largerExploreId:W,maxedExploreId:void 0,evenSplitPanes:W===void 0}}if(a.match(N)){const{exploreId:W}=N.payload;return{...A,largerExploreId:W,maxedExploreId:W,evenSplitPanes:!1}}if(v.match(N))return{...A,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(y.match(N))return{...A,correlations:N.payload};if(o.match(N))return{...A,syncedTimes:N.payload.syncedTimes};if(r.match(N))return{...A,richHistoryStorageFull:!0};if(d.match(N))return{...A,richHistoryLimitExceededWarningShown:!0};if(c.match(N))return{...A,richHistoryMigrationFailed:!0};if(C.match(N)){const W=A[i.Kd.left],I=A[i.Kd.right];return(0,s.RZ)(W.querySubscription),I&&(0,s.RZ)(I.querySubscription),{...R,left:{...T,queries:A.left.queries}}}if(g.match(N)){const W=N.payload;return{...A,richHistorySettings:W}}if(N.payload){const{exploreId:W}=N.payload;if(W!==void 0){const I=A[W];return{...A,[W]:(0,m.iz)(I,N)}}}return A}}},73257:(G,O,e)=>{"use strict";e.d(O,{CS:()=>lt,K8:()=>ve,ci:()=>nt,PM:()=>J,LK:()=>Te,GJ:()=>rt,W1:()=>he,sK:()=>je,Y:()=>ye,aA:()=>oe,EA:()=>ze,P4:()=>Xe,sQ:()=>Ke,KO:()=>Re,SE:()=>$e,z0:()=>pe});var t=e(32557),n=e(10322),u=e.n(n),s=e(82897),i=e(86680),m=e(53786),f=e(89973),o=e(46060),l=e(98356),r=e(95027),d=e(49922),c=e(62163),g=e(90595),p=e(16642),y=e(7238),h=e(25318),a=e(16911),v=e(93003),C=e(77213),E=e(77274),P=e(55935),x=e(5242),M=e(25405),S=e(63496),D=e(3153),T=e(3032),R=e(659),L=e(60499),w=e(75434),A=e(2101),N=e(74940),W=e(36512),I=e(14582),F=e(37959);const V=(Me,Ae,we)=>(Me.forEach(ke=>{const st=ke.refId;if(!st)return;const Et=we[st],Pt=Ae.filter(gt=>gt.source.uid===Et);b(ke,Pt)}),Me),b=(Me,Ae)=>{Me.fields.forEach(we=>{Ae.map(ke=>{ke.config?.field===we.name&&(we.config.links=we.config.links||[],we.config.links.push({internal:{query:ke.config?.target,datasourceUid:ke.target.uid,datasourceName:ke.target.name},url:"",title:ke.label||ke.target.name}))})})};var X=e(81042);const k=Me=>{const Ae=[],we=[],ke=[],st=[],Et=[],Pt=[],gt=[];for(const Ct of Me.series)switch(Ct.meta?.preferredVisualisationType){case"logs":st.push(Ct);break;case"graph":Ae.push(Ct);break;case"trace":Et.push(Ct);break;case"table":we.push(Ct);break;case"rawPrometheus":ke.push(Ct);break;case"nodeGraph":Pt.push(Ct);break;case"flamegraph":v.v.featureToggles.flameGraph?gt.push(Ct):we.push(Ct);break;default:De(Ct)&&Ae.push(Ct),we.push(Ct)}return{...Me,graphFrames:Ae,tableFrames:we,logsFrames:st,traceFrames:Et,nodeGraphFrames:Pt,flameGraphFrames:gt,rawPrometheusFrames:ke,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},H=({queries:Me,correlations:Ae})=>we=>{if(Me?.length&&Ae?.length){const ke=(0,s.mapValues)((0,s.groupBy)(Me,"refId"),"0.datasource.uid");V(we.series,Ae,ke)}return we},Y=Me=>Me.graphFrames.length?{...Me,graphResult:Me.graphFrames}:{...Me,graphResult:null},ee=Me=>{if(Me.tableFrames.length===0)return(0,m.of)({...Me,tableResult:null});Me.tableFrames.sort((st,Et)=>{const Pt=st.refId,gt=Et.refId;return Pt>gt?1:Pt<gt?-1:0});const Ae=Me.tableFrames.every(st=>De(st)),we={interpolate:st=>st};return(Ae?(0,m.of)(Me.tableFrames).pipe(N.Y.joinByFieldTransformer.operator({},we)):(0,m.of)(Me.tableFrames).pipe(N.Y.mergeTransformer.operator({},we))).pipe((0,A.U)(st=>{for(const Et of st)for(const Pt of Et.fields)Pt.display=Pt.display??(0,W.U)({field:Pt,theme:v.v.theme2,timeZone:Me.request?.timezone??"browser"});return{...Me,tableResult:st}}))},ue=Me=>{const Ae=Me.rawPrometheusFrames;if(!Ae||Ae.length===0)return(0,m.of)({...Me,tableResult:null});Ae.sort((Et,Pt)=>{const gt=Et.refId,Ct=Pt.refId;return gt>Ct?1:gt<Ct?-1:0});const we=Ae.every(Et=>De(Et)),ke={interpolate:Et=>Et};return(we?(0,m.of)(Ae).pipe(N.Y.joinByFieldTransformer.operator({},ke)):(0,m.of)(Ae).pipe(N.Y.mergeTransformer.operator({},ke))).pipe((0,A.U)(Et=>{const Pt=Et[0];for(const gt of Pt.fields)gt.display=gt.display??(0,W.U)({field:gt,theme:v.v.theme2,timeZone:Me.request?.timezone??"browser"});return{...Me,rawPrometheusResult:Pt}}))},q=(Me={})=>Ae=>{if(Ae.logsFrames.length===0)return{...Ae,logsResult:null};const we=Ae.request?.intervalMs,ke=(0,F.aB)(Ae.logsFrames,we,Me.absoluteRange,Me.queries),st=(0,P.Oy)(Me.refreshInterval),Et=(0,X.j0)(ke,st),Pt=Et.rows,gt=Me.fullRangeLogsVolumeAvailable?void 0:Et.series,Ct={...Et,rows:Pt,series:gt};return{...Ae,logsResult:Ct}};function ge(Me,Ae,we,ke,st,Et,Pt){return(0,m.of)(Me).pipe((0,A.U)(gt=>(0,w.zR)(gt,Ae)),(0,A.U)(H({queries:st,correlations:Et})),(0,A.U)(k),(0,A.U)(Y),(0,A.U)(Y),(0,A.U)(q({absoluteRange:we,refreshInterval:ke,queries:st,fullRangeLogsVolumeAvailable:Pt})),(0,l.z)(ue),(0,l.z)(ee))}function De(Me){const Ae=(0,s.groupBy)(Me.fields,we=>we.type);return Boolean(Object.keys(Ae).length===2&&Ae[I.fS.time]?.length===1&&Ae[I.fS.number])}var fe=e(98589),me=e(13582),ce=e(48197),ie=e(86297),re=e(16983);const Ee=(0,t.PH)("explore/addQueryRow"),J=(0,t.PH)("explore/changeQueries"),te=(0,t.PH)("explore/cancelQueries"),ne=(0,t.PH)("explore/queriesImported"),j=(0,t.PH)("explore/queryStoreSubscription"),be=(0,t.PH)("explore/setSupplementaryQueryEnabledAction"),Le=(0,t.PH)("explore/storeSupplementaryQueryDataProviderAction"),Qe=(0,t.PH)("explore/cleanSupplementaryQueryDataProviderAction"),Ye=(0,t.PH)("explore/cleanSupplementaryQueryAction"),de=(0,t.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),Be=(0,t.PH)("explore/updateSupplementaryQueryDataAction"),Ve=(0,t.PH)("explore/queryStreamUpdated"),$e=(0,t.PH)("explore/setQueries"),We=(0,t.PH)("changeLoadingState"),Ke=(0,t.PH)("explore/setPausedState"),qe=(0,t.PH)("explore/scanStart"),Xe=(0,t.PH)("explore/scanStop"),at=(0,t.PH)("explore/addResultsToCache"),Ze=(0,t.PH)("explore/clearCache");function lt(Me,Ae){return async(we,ke)=>{const st=ke().explore[Me].queries;let Et;if(st.length===0){const gt=ke().explore[Me].datasourceInstance;(!v.v.featureToggles.exploreMixedDatasource||!gt?.meta.mixed)&&(Et=gt)}const Pt=await(0,P.Xk)(st,Ae,Et?.getRef());we(Ee({exploreId:Me,index:Ae,query:Pt}))}}function nt(Me){return(Ae,we)=>{Ae(Xe({exploreId:Me})),Ae(te({exploreId:Me}));const ke=we().explore[Me].supplementaryQueries;for(const st of fe.SY)Ae(Qe({exploreId:Me,type:st})),ke[st]?.data?.state!==d.Gu.Done&&Ae(Ye({exploreId:Me,type:st}));Ae((0,ce.og)())}}const _e=(Me,Ae)=>{const we=Me.getRef();return Ae.map(ke=>({...ke,datasource:we}))},ut=async(Me,Ae,we)=>{let ke=[];if(Ae.meta?.id===Me.meta?.id)ke=we;else if((0,c.p)(Ae)&&(0,c.CZ)(Me)){const st=await Ae.exportToAbstractQueries(we);ke=await Me.importFromAbstractQueries(st)}else Me.importQueries&&(ke=await Me.importQueries(we,Ae));return _e(Me,ke)},rt=(Me,Ae,we,ke,st)=>async Et=>{if(!we){Et(ne({exploreId:Me,queries:Ae}));return}let Pt=Ae;if(ke.uid===S.D)Pt=Ae.map(Ct=>({...Ct,datasource:we.getRef()}));else if(we.uid===S.D){const Ct=(0,s.groupBy)(Ae,Ft=>Ft.datasource?.uid),Ot=await Promise.all(Object.keys(Ct).map(async Ft=>{const jt=await(0,C.F)().get({uid:Ft});return await ut(ke,jt,Ct[Ft])}));Pt=(0,s.flatten)(Ot.filter(Ft=>Ft.length>0))}else{let Ct=Ae;if(st!==void 0){const Ot=Ae.find(Ft=>Ft.refId===st);Ot&&(Ct=[Ot])}Pt=await ut(ke,we,Ct)}let gt=await(0,P.Z8)(Pt,ke.getRef());if(st!==void 0){Pt.length===0&&(Pt=[await(0,P.Xk)([],void 0,ke.getRef())]);const Ct=Ae.findIndex(Ft=>Ft.refId===st),Ot={...gt[0],refId:Ae[Ct].refId};gt=[...Ae],gt[Ct]=Ot}Et(ne({exploreId:Me,queries:gt}))};function je(Me,Ae,we){return async(ke,st)=>{const Et=st().explore[Me],{queries:Pt}=Et,Ct=(await Promise.all(Pt.map(Ot=>we({...Ot},Ae)))).map((Ot,Ft)=>(0,P.fR)(Ot,Pt,Ft));ke($e({exploreId:Me,queries:Ct})),Ae.preventSubmit||ke(oe(Me))}}async function dt(Me,Ae,we,ke,st,Et){const Pt=ke.meta.id,gt=(0,P._Q)(we,Pt,st);Me((0,me.fM)({exploreId:Et,history:gt})),Me((0,me.WY)(ke.uid,ke.name,st)),await Me((0,me.TV)(T.Kd.left)),await Me((0,me.TV)(T.Kd.right))}const oe=(Me,Ae)=>(we,ke)=>{we((0,ie.b3)({exploreId:Me}));const st=Oe();Ae?.preserveCache===!0||we(Te(Me));const Pt=ke().explore[Me],{datasourceInstance:gt,containerWidth:Ct,isLive:Ot,range:Ft,scanning:jt,queryResponse:En,querySubscription:xn,refreshInterval:Cn,absoluteRange:bn,cache:Tn,supplementaryQueries:Zn}=Pt;let Bn;const Sn=Pt.queries.map($n=>({...$n,datasource:$n.datasource||gt?.getRef()}));gt!=null&&dt(we,ke().explore,Pt.history,gt,Sn,Me),we((0,ce.og)({replace:Ae?.replaceUrl}));const wn=(0,re.M0)(Tn,bn);if(wn)Bn=(0,i.a)([(0,m.of)(wn),st]).pipe((0,l.z)(([$n,Xn])=>ge($n,En,bn,Cn,Sn,Xn,gt!=null&&((0,g.mN)(gt,g.v8.LogsVolume)||(0,p.O)(gt))))).subscribe($n=>{$n.error||we((0,ce.og)()),we(Ve({exploreId:Me,response:$n}))});else{if(!(0,P.z_)(Sn)){we((0,ce.og)({replace:Ae?.replaceUrl}));return}if(!gt)return;const $n=gt?.interval;(0,P.RZ)(xn);const Xn={minInterval:$n,maxDataPoints:Ct,liveStreaming:Ot},ba=(0,M.Z)(ke().user),hn=(0,P.Zf)(Me,Sn,Xn,Ft,jt,ba);if(we(We({exploreId:Me,loadingState:d.Gu.Loading})),Bn=(0,i.a)([(0,w.v7)(gt,hn.request).pipe(Ot?(0,r.p)(500):f.y),st]).pipe((0,l.z)(([Kn,ta])=>ge(Kn,En,bn,Cn,Sn,ta,gt!=null&&((0,g.mN)(gt,g.v8.LogsVolume)||(0,p.O)(gt))))).subscribe({next(Kn){if(Kn.logsResult!==null&&(0,E.ff)("grafana_explore_logs_result_displayed",{datasourceType:gt.type}),we(Ve({exploreId:Me,response:Kn})),ke().explore[Me].scanning)if(Kn.state===d.Gu.Done&&Kn.series.length===0){const ta=(0,x.e)(-1,ke().explore[Me].range);we((0,ie.b3)({exploreId:Me,absoluteRange:ta})),we(oe(Me))}else we(Xe({exploreId:Me}))},error(Kn){we((0,R.$l)((0,L.t_)("Query processing error",Kn))),we(We({exploreId:Me,loadingState:d.Gu.Error})),console.error(Kn)},complete(){ke().explore[Me].queryResponse.state===d.Gu.Loading&&we(We({exploreId:Me,loadingState:d.Gu.Done}))}}),Ot)for(const Kn of fe.SY)we(Qe({exploreId:Me,type:Kn})),we(Ye({exploreId:Me,type:Kn}));else for(const Kn of fe.SY)if((0,g.mN)(gt,Kn)){const ta=gt.getDataProvider(Kn,{...hn.request,requestId:`${hn.request.requestId}_${(0,s.snakeCase)(Kn)}`});we(Le({exploreId:Me,type:Kn,dataProvider:ta})),Se(Zn[Kn].data,Sn,bn)||(we(Ye({exploreId:Me,type:Kn})),Zn[Kn].enabled&&we(he(Me,Kn)))}else if((0,p.O)(gt)&&Kn===g.v8.LogsVolume){const ta=gt.getLogsVolumeDataProvider({...hn.request,requestId:`${hn.request.requestId}_${(0,s.snakeCase)(Kn)}`});we(Le({exploreId:Me,type:Kn,dataProvider:ta})),Se(Zn[Kn].data,Sn,bn)||(we(Ye({exploreId:Me,type:Kn})),Zn[Kn].enabled&&we(he(Me,Kn)))}else we(Qe({exploreId:Me,type:Kn}))}we(j({exploreId:Me,querySubscription:Bn}))};function Se(Me,Ae,we){if(Me&&Me.data[0]){if(!u()(Me.data[0].meta?.custom?.targets,Ae))return!1;const ke=Me.data[0].meta?.custom?.absoluteRange;if(ke&&ke.from<=we.from&&we.to<=ke.to)return!0}return!1}function Re(Me,Ae){return(we,ke)=>{const st=ke().explore[Me].queries,Et=Ae.map((Pt,gt)=>(0,P.fR)(Pt,st,gt));we($e({exploreId:Me,queries:Et})),we(oe(Me))}}function ze(Me){return(Ae,we)=>{Ae(qe({exploreId:Me}));const ke=(0,x.e)(-1,we().explore[Me].range);Ae((0,ie.b3)({exploreId:Me,absoluteRange:ke})),Ae(oe(Me))}}function ve(Me){return(Ae,we)=>{const ke=we().explore[Me].queryResponse,st=we().explore[Me].absoluteRange,Et=(0,re.M7)(st);ke.state===d.Gu.Done&&Ae(at({exploreId:Me,cacheKey:Et,queryResponse:ke}))}}function Te(Me){return(Ae,we)=>{Ae(Ze({exploreId:Me}))}}function he(Me,Ae){return(we,ke)=>{const{supplementaryQueries:st}=ke().explore[Me],Et=st[Ae].dataProvider;if(Et){const Pt=Et.subscribe({next:gt=>{we(Be({exploreId:Me,type:Ae,data:gt}))}});we(de({exploreId:Me,type:Ae,dataSubscription:Pt}))}}}function pe(Me,Ae,we){return(ke,st)=>{ke(be({exploreId:Me,enabled:Ae,type:we})),(0,fe.B9)(Ae,we),Ae&&ke(he(Me,we))}}const ye=(Me,Ae)=>{if(Ee.match(Ae)){const{queries:we}=Me,{index:ke,query:st}=Ae.payload,Et=[...we.slice(0,ke+1),{...st},...we.slice(ke+1)];return{...Me,queries:Et,queryKeys:(0,P.$$)(Et)}}if(J.match(Ae)){const{queries:we}=Ae.payload;return{...Me,queries:we}}if(te.match(Ae))return(0,P.RZ)(Me.querySubscription),{...Me,loading:!1};if($e.match(Ae)){const{queries:we}=Ae.payload;return{...Me,queries:we.slice(),queryKeys:(0,P.$$)(we)}}if(j.match(Ae)){const{querySubscription:we}=Ae.payload;return{...Me,querySubscription:we}}if(be.match(Ae)){const{enabled:we,type:ke}=Ae.payload,{supplementaryQueries:st}=Me,Et=st[ke].dataSubscription;!we&&Et&&Et.unsubscribe();const Pt={...st,[ke]:{...st[ke],enabled:we,data:void 0}};return{...Me,supplementaryQueries:Pt}}if(Le.match(Ae)){const{dataProvider:we,type:ke}=Ae.payload,{supplementaryQueries:st}=Me,Et=st[ke];Et?.dataSubscription&&Et.dataSubscription.unsubscribe();const Pt={...st,[ke]:{...Et,dataProvider:we,dataSubscription:void 0}};return{...Me,supplementaryQueries:Pt}}if(Qe.match(Ae)){const{type:we}=Ae.payload,{supplementaryQueries:ke}=Me,st=ke[we];st?.dataSubscription&&st.dataSubscription.unsubscribe();const Et={...ke,[we]:{...st,dataProvider:void 0,dataSubscription:void 0}};return{...Me,supplementaryQueries:Et}}if(Ye.match(Ae)){const{type:we}=Ae.payload,{supplementaryQueries:ke}=Me,st={...ke,[we]:{...ke[we],data:void 0}};return{...Me,supplementaryQueries:st}}if(de.match(Ae)){const{dataSubscription:we,type:ke}=Ae.payload,{supplementaryQueries:st}=Me,Et={...st,[ke]:{...st[ke],dataSubscription:we}};return{...Me,supplementaryQueries:Et}}if(Be.match(Ae)){let{data:we,type:ke}=Ae.payload;const{supplementaryQueries:st}=Me,Et={...st,[ke]:{...st[ke],data:we}};return{...Me,supplementaryQueries:Et}}if(Ve.match(Ae))return Ne(Me,Ae);if(ne.match(Ae)){const{queries:we}=Ae.payload;return{...Me,queries:we,queryKeys:(0,P.$$)(we)}}if(We.match(Ae)){const{loadingState:we}=Ae.payload;return{...Me,queryResponse:{...Me.queryResponse,state:we},loading:we===d.Gu.Loading||we===d.Gu.Streaming}}if(Ke.match(Ae)){const{isPaused:we}=Ae.payload;return{...Me,isPaused:we}}if(qe.match(Ae))return{...Me,scanning:!0};if(Xe.match(Ae))return{...Me,scanning:!1,scanRange:void 0};if(at.match(Ae)){const{cache:ke}=Me,{queryResponse:st,cacheKey:Et}=Ae.payload;let Pt=[...ke];return Pt.some(Ct=>Ct.key===Et)||(Pt=[{key:Et,value:st},...Pt].slice(0,5)),{...Me,cache:Pt}}return Ze.match(Ae)?{...Me,cache:[]}:Me},Oe=()=>new o.y(Me=>{const Ae=D.h.getState().explore.correlations;if(Ae)Me.next(Ae),Me.complete();else{const we=D.h.subscribe(()=>{const{correlations:ke}=D.h.getState().explore;ke&&(we(),Me.next(ke),Me.complete())})}}),Ne=(Me,Ae)=>{const{response:we}=Ae.payload,{request:ke,state:st,series:Et,error:Pt,graphResult:gt,logsResult:Ct,tableResult:Ot,rawPrometheusResult:Ft,traceFrames:jt,nodeGraphFrames:En,flameGraphFrames:xn,rawPrometheusFrames:Cn}=we;if(Pt){if(Pt.type===y.eA.Timeout)return{...Me,queryResponse:we,loading:st===d.Gu.Loading||st===d.Gu.Streaming};if(Pt.type===y.eA.Cancelled)return Me;v.v.angularSupportEnabled&&Me.datasourceInstance?.components?.QueryCtrl&&Me.eventBridge.emit(h.Kh.dataError,Pt)}if(!ke)return{...Me};if(v.v.angularSupportEnabled&&Me.datasourceInstance?.components?.QueryCtrl){const bn=Et.map(Tn=>(0,a.Zr)(Tn));Me.eventBridge.emit(h.Kh.dataReceived,bn)}return{...Me,queryResponse:we,graphResult:gt,tableResult:Ot,rawPrometheusResult:Ft,logsResult:Ct,loading:st===d.Gu.Loading||st===d.Gu.Streaming,showLogs:!!Ct,showMetrics:!!gt,showTable:!!Ot?.length,showTrace:!!jt.length,showNodeGraph:!!En.length,showRawPrometheus:!!Cn.length,showFlameGraph:!!xn.length}}},86297:(G,O,e)=>{"use strict";e.d(O,{F9:()=>C,b3:()=>a,cD:()=>y,mG:()=>v,ok:()=>E,oz:()=>h});var t=e(32557),n=e(46519),u=e(49922),s=e(69934),i=e(45781),m=e(55935),f=e(81042),o=e(25405),l=e(3032),r=e(19349),d=e(48197),c=e(73257);const g=(0,t.PH)("explore/changeRange"),p=(0,t.PH)("explore/changeRefreshInterval"),y=P=>(x,M)=>{const{syncedTimes:S}=M().explore;S?(x(a({...P,exploreId:l.Kd.left})),x((0,c.aA)(l.Kd.left,{preserveCache:!0})),x(a({...P,exploreId:l.Kd.right})),x((0,c.aA)(l.Kd.right,{preserveCache:!0}))):(x(a({...P})),x((0,c.aA)(P.exploreId,{preserveCache:!0})))};function h(P,x){return p({exploreId:P,refreshInterval:x})}const a=P=>(x,M)=>{const{exploreId:S,absoluteRange:D,rawRange:T}=P,R=M().explore[S],L=(0,o.Z)(M().user),w=(0,o.i)(M().user),{range:A}=R;let N=A.raw;D&&(N={from:(0,n.GY)(L,D.from),to:(0,n.GY)(L,D.to)}),T&&(N=T);const W=(0,m.OQ)(L,N,w),I={from:W.from.valueOf(),to:W.to.valueOf()},F={time:W.raw,refresh:!1,timepicker:{},getTimezone:()=>L,timeRangeUpdated:V=>{x(y({exploreId:S,rawRange:V}))}};(0,r.$t)().init(F),(0,s.J)().updateTimeRange((0,r.$t)().timeRange()),x(g({exploreId:S,range:W,absoluteRange:I}))};function v(P){return(x,M)=>{if(P===l.Kd.left){const D=M().explore.left;x(y({exploreId:l.Kd.right,rawRange:D.range.raw}))}else{const D=M().explore.right;x(y({exploreId:l.Kd.left,rawRange:D.range.raw}))}const S=M().explore.syncedTimes;x((0,d.tl)({syncedTimes:!S})),x((0,d.og)())}}function C(){return(P,x)=>{const M=(0,o.Z)(x().user),S=(0,o.i)(x().user),D=x().explore.left,T=(0,m.OQ)(M,D.range.raw,S),R={from:T.from.valueOf(),to:T.to.valueOf()};P(a({exploreId:l.Kd.left,absoluteRange:R}));const L=x().explore.right;if(L){const w=(0,m.OQ)(M,L.range.raw,S),A={from:w.from.valueOf(),to:w.to.valueOf()};P(a({exploreId:l.Kd.right,absoluteRange:A}))}P((0,d.og)())}}const E=(P,x)=>{if(p.match(x)){const{refreshInterval:M}=x.payload,S=i.dP.isLive(M),D=(0,m.Oy)(M),T=(0,f.j0)(P.logsResult,D);return i.dP.isLive(P.refreshInterval)&&!S&&(0,m.RZ)(P.querySubscription),{...P,refreshInterval:M,queryResponse:{...P.queryResponse,state:S?u.Gu.Streaming:u.Gu.Done},isLive:S,isPaused:S?!1:P.isPaused,loading:S,logsResult:T}}if(g.match(x)){const{range:M,absoluteRange:S}=x.payload;return{...P,range:M,absoluteRange:S}}return P}},16983:(G,O,e)=>{"use strict";e.d(O,{M7:()=>v,lp:()=>p,M0:()=>C,D:()=>a,r_:()=>y,t5:()=>g,FG:()=>c});var t=e(82897),n=e(49922),u=e(69311),s=e(58379),i=e(55935),m=e(91162),f=e(98589),o=e(46519);const l=E=>{let P=E.raw.from;(0,o.v9)(P)&&(P=P.valueOf().toString(10));let x=E.raw.to;return(0,o.v9)(x)&&(x=x.valueOf().toString(10)),{from:P,to:x}},r={from:"now-6h",to:"now"},d="grafana.explore.style.graph",c=E=>{s.Z.set(d,E)},g=()=>({containerWidth:0,datasourceInstance:null,datasourceMissing:!1,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:r},absoluteRange:{from:null,to:null},scanning:!1,loading:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:p(),tableResult:null,graphResult:null,logsResult:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,f.DK)(),panelsState:{}}),p=()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,u.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function y(E,P){let x;try{x=await(0,m.ak)().get(P)}catch{x=await(0,m.ak)().get()}if(x.init)try{x.init()}catch(D){console.error(D)}const M=`grafana.explore.history.${x.meta?.id}`,S=s.Z.getObject(M,[]);return s.Z.set((0,i.I$)(E),x.uid),{history:S,instance:x}}function h(E){let P=(0,t.mapValues)(E,x=>(0,t.isObject)(x)?h(x):x);if(P=(0,t.omitBy)(P,t.isEmpty),!(0,t.isEmpty)(P))return P}function a(E){return{datasource:E.datasourceInstance?.uid||"",queries:E.queries.map(i.uC),range:l(E.range),panelsState:h(E.panelsState)}}function v(E){const P={from:E.from,to:E.to};return Object.entries(P).map(([M,S])=>`${encodeURIComponent(M)}=${encodeURIComponent(S.toString())}`).join("&")}function C(E,P){const x=v(P),M=E.findIndex(D=>D.key===x);return M>=0?E[M].value:void 0}},71570:(G,O,e)=>{"use strict";e.d(O,{a:()=>r,u:()=>c});var t=e(68404),n=e(94847),u=e(89029),s=e(69934),i=e(82002),m=e(64703);const l=[(g,p)=>{let y=!0;if(g.internal){let h="";try{h=JSON.stringify(g.internal.query||{}),(0,s.J)().replace(h,p,a=>(y=y&&!!a,""))}catch{}}return y},g=>!g.internal||i.Vt.hasAccessToExplore()],r=g=>{const{field:p,vars:y,splitOpenFn:h,range:a,rowIndex:v,dataFrame:C}=g,E={...y||{}};E.__value={value:{raw:p.values.get(v)},text:"Raw value"};let P;return C&&(P=(0,n.z)({frame:C,rowIndex:v}),E.__data={value:{name:C.name,refId:C.refId,fields:P},text:"Data"},C.fields.forEach(x=>{P&&P[x.name]&&(E[x.name]={value:P[x.name]})}),E.__targetField={value:P[p.name]}),p.config.links?p.config.links.filter(M=>l.every(S=>S(M,E))).map(M=>{if(M.internal)return(0,u._)({link:M,internalLink:M.internal,scopedVars:E,range:a,field:p,onClickFn:h,replaceVariables:(0,s.J)().replace.bind((0,s.J)())});{const S=(T,R)=>(0,s.J)().replace(T,{...R,...E}),D=(0,m.Bq)().getDataLinkUIModel(M,S,p);return D.title||(D.title=d(D.href)),D}}):[]};function d(g){g.indexOf("://")<0&&(g=`http://${g}`);let p;try{p=new URL(g).hostname}catch{p=g}return p}function c(g,p){return(0,t.useCallback)((y,h)=>y.fields.flatMap(a=>a.config?.links&&a.config?.links.length?r({field:a,rowIndex:h,range:g,dataFrame:y,splitOpenFn:p}):[]),[g,p])}},98589:(G,O,e)=>{"use strict";e.d(O,{B9:()=>i,DK:()=>m,SY:()=>u});var t=e(90595),n=e(58379);const u=[t.v8.LogsVolume,t.v8.LogsSample],s=f=>`grafana.explore.logs.enable${f}`,i=(f,o)=>{n.Z.set(s(o),f?"true":"false")},m=()=>{let f={[t.v8.LogsVolume]:{enabled:!0},[t.v8.LogsSample]:{enabled:!1}};for(const o of u){if(o===t.v8.LogsVolume){const r="grafana.explore.logs.enableVolumeHistogram",d=n.Z.get(r);if(d){f[o]={enabled:d==="true"},i(d==="true",t.v8.LogsVolume),localStorage.removeItem(r);continue}}if(o===t.v8.LogsSample)continue;n.Z.get(s(o))==="false"&&(f[o]={enabled:!1})}return f}},47471:(G,O,e)=>{"use strict";e.d(O,{Yq:()=>P,mV:()=>M,bE:()=>x});var t=e(85526),n=e(98356),u=e(24699),s=e(9800),i=e(69934),m=e(77213),f=e(68404),o=e(71210),l=e(46739),r=e(5076),d=e(71263),c=e(75897),g=e(436),p=e(70227),y=e(97573),h=e(51935);const a=14;function v(){const S=(0,f.useRef)({}),D=(0,f.useCallback)(R=>{switch(R){case y.Us.math:case y.Us.reduce:case y.Us.resample:case y.Us.threshold:return S.current[R];case y.Us.classic:return}},[]),T=(0,f.useCallback)((R,L)=>{switch(R){case y.Us.math:S.current.math=L;break;case y.Us.reduce:case y.Us.resample:case y.Us.resample:S.current.reduce=L,S.current.resample=L,S.current.threshold=L;break}},[]);return{getCachedExpression:D,setCachedExpression:T}}function C(S){const{query:D,queries:T,onRunQuery:R,onChange:L}=S,{getCachedExpression:w,setCachedExpression:A}=v();(0,f.useEffect)(()=>{A(D.type,D.expression)},[D.expression,D.type,A]);const N=(0,f.useCallback)(F=>{const V=w(F.value),b=(0,h.J)({...D,type:F.value});L({...b,expression:V??b.expression})},[D,L,w]),W=()=>{const F=T.filter(V=>D.refId!==V.refId).map(V=>({value:V.refId,label:V.refId}));switch(D.type){case y.Us.math:return f.createElement(d.Z,{onChange:L,query:D,labelWidth:a,onRunQuery:R});case y.Us.reduce:return f.createElement(c.v,{refIds:F,onChange:L,labelWidth:a,query:D});case y.Us.resample:return f.createElement(g.p,{query:D,labelWidth:a,onChange:L,refIds:F});case y.Us.classic:return f.createElement(r.I,{onChange:L,query:D,refIds:F});case y.Us.threshold:return f.createElement(p.M,{onChange:L,query:D,labelWidth:a,refIds:F})}},I=y._M.find(F=>F.value===D.type);return f.createElement("div",null,f.createElement(o._,{label:"Operation",labelWidth:a},f.createElement(l.Ph,{options:y._M,value:I,onChange:N,width:25})),W())}class E extends s.CK{constructor(D){super(D),this.instanceSettings=D}applyTemplateVariables(D,T){const R=(0,i.J)();return{...D,expression:R.replace(D.expression,T),window:R.replace(D.window,T)}}getCollapsedText(D){return`Expression: ${D.type}`}query(D){let T=D.targets.map(async L=>{const w=await(0,m.F)().get(L.datasource);return w.interpolateVariablesInQueries?w?.interpolateVariablesInQueries([L],D.scopedVars)[0]:L});return(0,t.D)(Promise.all(T)).pipe((0,n.z)(L=>super.query({...D,targets:L})))}newQuery(D){return{refId:"--",datasource:s.hr,type:D?.type??y.Us.math,...D}}}const P="-100",x={id:-100,uid:P,name:s.hr.name,type:s.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:u.zV.datasource,name:s.hr.type,id:s.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},M=new E(x);M.meta={id:s.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},M.components={QueryEditor:C}},5076:(G,O,e)=>{"use strict";e.d(O,{I:()=>C});var t=e(68404),n=e(9274),u=e(71210),s=e(90723),i=e(81697),m=e(51935),f=e(52423),o=e(26418),l=e(29516),r=e(92470),d=e(46739),c=e(25474),g=e(67162);const p=g.Z.reducerTypes.map(E=>({label:E.text,value:E.value})),y=g.Z.evalOperators.map(E=>({label:E.text,value:E.value})),h=g.Z.evalFunctions.map(E=>({label:E.text,value:E.value})),a=({condition:E,index:P,onChange:x,onRemoveCondition:M,refIds:S})=>{const D=(0,l.wW)(v),T=I=>{x({...E,operator:{type:I.value}})},R=I=>{x({...E,reducer:{type:I.value,params:[]}})},L=I=>{x({...E,query:{params:[I.value]}})},w=I=>{x({...E,evaluator:{params:E.evaluator.params,type:I.value}})},A=(I,F)=>{const V=parseFloat(I.currentTarget.value),b=[...E.evaluator.params];b[F]=V,x({...E,evaluator:{...E.evaluator,params:b}})},N=f.css`
    width: 60px;
  `,W=E.evaluator.type===g.$.IsWithinRange||E.evaluator.type===g.$.IsOutsideRange;return t.createElement(o.Stack,{direction:"row"},t.createElement("div",{style:{flex:1}},t.createElement(n.Z,null,P===0?t.createElement("div",{className:(0,f.cx)(D.button,N)},"WHEN"):t.createElement(r.d,{className:(0,f.cx)(D.buttonSelectText,N),options:y,onChange:T,value:y.find(I=>I.value===E.operator.type)}),t.createElement(d.Ph,{options:p,onChange:R,width:20,value:p.find(I=>I.value===E.reducer.type)}),t.createElement("div",{className:D.button},"OF"),t.createElement(d.Ph,{onChange:L,options:S,width:"auto",value:S.find(I=>I.value===E.query.params[0])})),t.createElement(n.Z,null,t.createElement(r.d,{className:D.buttonSelectText,options:h,onChange:w,value:h.find(I=>I.value===E.evaluator.type)}),W?t.createElement(t.Fragment,null,t.createElement(c.I,{type:"number",width:10,onChange:I=>A(I,0),value:E.evaluator.params[0]}),t.createElement("div",{className:D.button},"TO"),t.createElement(c.I,{type:"number",width:10,onChange:I=>A(I,1),value:E.evaluator.params[1]})):E.evaluator.type!==g.$.HasNoValue?t.createElement(c.I,{type:"number",width:10,onChange:I=>A(I,0),value:E.evaluator.params[0]}):null)),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:()=>M(P)},t.createElement(i.J,{name:"trash-alt"})))},v=E=>{const P=f.css`
    color: ${E.colors.primary.text};
    font-size: ${E.typography.bodySmall.fontSize};
  `;return{buttonSelectText:P,button:(0,f.cx)(f.css`
        display: flex;
        align-items: center;
        border-radius: ${E.shape.borderRadius(1)};
        font-weight: ${E.typography.fontWeightMedium};
        border: 1px solid ${E.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${E.spacing(1)};
        background-color: ${E.colors.background.canvas};
      `,P)}},C=({onChange:E,query:P,refIds:x})=>{const M=(T,R)=>{P.conditions&&E({...P,conditions:[...P.conditions.slice(0,R),T,...P.conditions.slice(R+1)]})},S=()=>{if(P.conditions){const T=P.conditions.at(-1)?.query?.params??[],R={...m.R,query:{params:T}};E({...P,conditions:P.conditions.length>0?[...P.conditions,R]:[R]})}},D=T=>{if(P.conditions){const R=P.conditions[T],L=P.conditions.filter(w=>w!==R).map((w,A)=>A===0?{...w,operator:{type:"when"}}:w);E({...P,conditions:L})}};return t.createElement("div",null,t.createElement(n.Z,null,t.createElement(u._,{label:"Conditions",labelWidth:14},t.createElement("div",null,P.conditions?.map((T,R)=>{if(T)return t.createElement(a,{key:R,index:R,condition:T,onChange:L=>M(L,R),onRemoveCondition:D,refIds:x})})))),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:S},t.createElement(i.J,{name:"plus-circle"})))}},71263:(G,O,e)=>{"use strict";e.d(O,{Z:()=>d});var t=e(52423),n=e(68404),u=e(26418),s=e(29516),i=e(71210),m=e(91605),f=e(81697),o=e(79090),l=e(42042);const r="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",d=({labelWidth:y,onChange:h,query:a,onRunQuery:v})=>{const C=x=>{h({...a,expression:x.target.value})},E=(0,s.wW)(g),P=()=>{a.expression&&v()};return n.createElement(u.Stack,{direction:"row"},n.createElement(i._,{label:n.createElement(m.W,{width:"auto"},n.createElement(l.z,{content:n.createElement("div",{className:E.documentationContainer},n.createElement("header",{className:E.documentationHeader},n.createElement(f.J,{name:"book-open"})," Math operator"),n.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",n.createElement("br",null),"Example: ",n.createElement("code",null,"$A + $B")),n.createElement("header",{className:E.documentationHeader},"Available Math functions"),n.createElement("div",{className:E.documentationFunctions},n.createElement(c,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),n.createElement(c,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(c,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(c,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(c,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),n.createElement(c,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),n.createElement(c,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),n.createElement(c,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),n.createElement(c,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),n.createElement(c,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."})),n.createElement("div",null,"See our additional documentation on"," ",n.createElement("a",{className:E.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},n.createElement(f.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."))},n.createElement("span",null,"Expression ",n.createElement(f.J,{name:"info-circle"})))),labelWidth:y,grow:!0,shrink:!0},n.createElement(o.K,{value:a.expression,onChange:C,rows:1,placeholder:r,onBlur:P,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},c=({name:y,description:h})=>{const a=(0,s.wW)(p);return n.createElement(n.Fragment,null,n.createElement("span",{className:a.name},y),n.createElement("span",{className:a.description},h))},g=y=>({documentationHeader:t.css`
    font-size: ${y.typography.h5.fontSize};
    font-weight: ${y.typography.h5.fontWeight};
  `,documentationLink:t.css`
    color: ${y.colors.text.link};
  `,documentationContainer:t.css`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${y.spacing(2)};

    padding: ${y.spacing(1)} ${y.spacing(2)};
  `,documentationFunctions:t.css`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${y.spacing(2)};
  `}),p=y=>({name:t.css`
    font-weight: ${y.typography.fontWeightBold};
  `,description:t.css`
    font-size: ${y.typography.bodySmall.fontSize};
    color: ${y.colors.text.disabled};
  `})},75897:(G,O,e)=>{"use strict";e.d(O,{v:()=>f});var t=e(68404),n=e(71210),u=e(25474),s=e(9274),i=e(46739),m=e(97573);const f=({labelWidth:o="auto",onChange:l,refIds:r,query:d})=>{const c=m.SQ.find(E=>E.value===d.reducer),g=E=>{l({...d,expression:E.value})},p=E=>{l({...d,reducer:E.value})},y=E=>{l({...d,settings:E})},h=E=>{let P;switch(E.value){case m.kN.ReplaceNonNumbers:let x=0;d.settings?.mode===m.kN.ReplaceNonNumbers&&(x=d.settings?.replaceWithValue??0),P={mode:m.kN.ReplaceNonNumbers,replaceWithValue:x};break;default:P={mode:E.value}}y(P)},a=E=>{const P=E.currentTarget.valueAsNumber;y({mode:m.kN.ReplaceNonNumbers,replaceWithValue:P??0})},v=d.settings?.mode??m.kN.Strict,C=()=>{if(v===m.kN.ReplaceNonNumbers)return t.createElement(n._,{label:"Replace With",labelWidth:o},t.createElement(u.I,{type:"number",width:10,onChange:a,value:d.settings?.replaceWithValue??0}))};return t.createElement(t.Fragment,null,t.createElement(s.Z,null,t.createElement(n._,{label:"Function",labelWidth:o},t.createElement(i.Ph,{options:m.SQ,value:c,onChange:p,width:20})),t.createElement(n._,{label:"Input",labelWidth:o},t.createElement(i.Ph,{onChange:g,options:r,value:d.expression,width:"auto"}))),t.createElement(s.Z,null,t.createElement(n._,{label:"Mode",labelWidth:o},t.createElement(i.Ph,{onChange:h,options:m.YM,value:v,width:25})),C()))}},436:(G,O,e)=>{"use strict";e.d(O,{p:()=>f});var t=e(68404),n=e(9274),u=e(71210),s=e(46739),i=e(25474),m=e(97573);const f=({labelWidth:o="auto",onChange:l,refIds:r,query:d})=>{const c=m.Fr.find(v=>v.value===d.downsampler),g=m.r8.find(v=>v.value===d.upsampler),p=v=>{l({...d,window:v.target.value})},y=v=>{l({...d,expression:v.value})},h=v=>{l({...d,downsampler:v.value})},a=v=>{l({...d,upsampler:v.value})};return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(u._,{label:"Input",labelWidth:o},t.createElement(s.Ph,{onChange:y,options:r,value:d.expression,width:20}))),t.createElement(n.Z,null,t.createElement(u._,{label:"Resample to",labelWidth:o,tooltip:"10s, 1m, 30m, 1h"},t.createElement(i.I,{onChange:p,value:d.window,width:15})),t.createElement(u._,{label:"Downsample"},t.createElement(s.Ph,{options:m.Fr,value:c,onChange:h,width:25})),t.createElement(u._,{label:"Upsample"},t.createElement(s.Ph,{options:m.r8,value:g,onChange:a,width:25}))))}},70227:(G,O,e)=>{"use strict";e.d(O,{M:()=>c});var t=e(52423),n=e(68404),u=e(29516),s=e(9274),i=e(71210),m=e(46739),f=e(92470),o=e(25474),l=e(67162),r=e(97573);const d=l.$.IsAbove,c=({labelWidth:y,onChange:h,refIds:a,query:v})=>{const C=(0,u.wW)(p),E={type:"query",evaluator:{type:d,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},P=v.conditions?.length?v.conditions:[E],x=P[0],M=r.Mi.find(L=>L.value===P[0].evaluator?.type),S=L=>{h({...v,expression:L.value})},D=L=>{const w=L.value??d;h({...v,conditions:g(P,{type:w})})},T=(L,w)=>{const A=parseFloat(L.currentTarget.value),N=[...x.evaluator.params];N[w]=A,h({...v,conditions:g(P,{params:N})})},R=x.evaluator.type===l.$.IsWithinRange||x.evaluator.type===l.$.IsOutsideRange;return n.createElement(s.Z,null,n.createElement(i._,{label:"Input",labelWidth:y},n.createElement(m.Ph,{onChange:S,options:a,value:v.expression,width:20})),n.createElement(f.d,{className:C.buttonSelectText,options:r.Mi,onChange:D,value:M}),R?n.createElement(n.Fragment,null,n.createElement(o.I,{type:"number",width:10,onChange:L=>T(L,0),defaultValue:x.evaluator.params[0]}),n.createElement("div",{className:C.button},"TO"),n.createElement(o.I,{type:"number",width:10,onChange:L=>T(L,1),defaultValue:x.evaluator.params[1]})):n.createElement(o.I,{type:"number",width:10,onChange:L=>T(L,0),defaultValue:P[0].evaluator.params[0]||0}))};function g(y,h){return[{...y[0],evaluator:{...y[0].evaluator,...h}}]}const p=y=>({buttonSelectText:t.css`
    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:t.css`
    height: 32px;

    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${y.shape.borderRadius(1)};
    font-weight: ${y.typography.fontWeightBold};
    border: 1px solid ${y.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${y.spacing(1)};
    background-color: ${y.colors.background.primary};
  `})},75e3:(G,O,e)=>{"use strict";e.d(O,{j:()=>u});var t=e(9800),n=e(97573);const u=s=>{if(!s)return!1;if((0,t.Pr)(s.datasource))return!0;const i=s;return typeof i.type!="string"?!1:Object.values(n.Us).includes(i.type)}},97573:(G,O,e)=>{"use strict";e.d(O,{Fr:()=>o,Mi:()=>r,SQ:()=>i,Us:()=>u,YM:()=>f,_M:()=>s,kN:()=>m,r8:()=>l});var t=e(21760),n=e(67162),u=(d=>(d.math="math",d.reduce="reduce",d.resample="resample",d.classic="classic_conditions",d.threshold="threshold",d))(u||{});const s=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],i=[{value:t.gz.min,label:"Min",description:"Get the minimum value"},{value:t.gz.max,label:"Max",description:"Get the maximum value"},{value:t.gz.mean,label:"Mean",description:"Get the average value"},{value:t.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gz.count,label:"Count",description:"Get the number of values"},{value:t.gz.last,label:"Last",description:"Get the last value"}];var m=(d=>(d.Strict="",d.ReplaceNonNumbers="replaceNN",d.DropNonNumbers="dropNN",d))(m||{});const f=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],o=[{value:t.gz.last,label:"Last",description:"Fill with the last value"},{value:t.gz.min,label:"Min",description:"Fill with the minimum value"},{value:t.gz.max,label:"Max",description:"Fill with the maximum value"},{value:t.gz.mean,label:"Mean",description:"Fill with the average value"},{value:t.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],l=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],r=[{value:n.$.IsAbove,label:"Is above"},{value:n.$.IsBelow,label:"Is below"},{value:n.$.IsWithinRange,label:"Is within range"},{value:n.$.IsOutsideRange,label:"Is outside range"}]},51935:(G,O,e)=>{"use strict";e.d(O,{J:()=>s,R:()=>i});var t=e(21760),n=e(67162),u=e(97573);const s=m=>{switch(m.type){case u.Us.reduce:m.reducer||(m.reducer=t.gz.mean);break;case u.Us.resample:m.downsampler||(m.downsampler=t.gz.mean),m.upsampler||(m.upsampler="fillna"),m.reducer=void 0;break;case u.Us.math:m.expression=void 0;break;case u.Us.classic:m.conditions||(m.conditions=[i]);break;default:m.reducer=void 0}return m},i={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:n.$.IsAbove}}},61986:(G,O,e)=>{"use strict";e.d(O,{Go:()=>g,J6:()=>y,OD:()=>c,Pb:()=>d,Uk:()=>v,W7:()=>E,a:()=>p,pz:()=>C,v7:()=>a});var t=e(3363),n=e(83383),u=e(57388),s=e(47214),i=e(659),m=e(60499),f=e(77582),o=e(29930),l=e(60492),r=e(15932);function d(P){return async x=>{const M=await o.ae.getFolderByUid(P);x((0,r.G3)(M)),x((0,i.RL)((0,l.B)(M)))}}function c(P){return async x=>{const M=await o.ae.put(`/api/folders/${P.uid}`,{title:P.title,version:P.version});x((0,i.$l)((0,m.AT)("Folder saved"))),x((0,r.G3)(M)),u.E1.push(n.u.stripBaseFromUrl(`${M.url}/settings`))}}function g(P){return async()=>{await o.ae.delete(`/api/folders/${P}?forceDeleteRules=false`),u.E1.push("/dashboards")}}function p(P){return async x=>{const M=await o.ae.get(`/api/folders/${P}/permissions`);x((0,r.R7)(M))}}function y(P){return async x=>{try{await(0,t.n)(o.ae.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${P}/permissions`})),x((0,r.$$)(!0))}catch(M){(0,s.kW)(M)&&M.status!==403&&x((0,i.$l)((0,m.ZR)("Error checking folder permissions",M.data?.message))),x((0,r.$$)(!1))}}}function h(P){return{userId:P.userId,teamId:P.teamId,role:P.role,permission:P.permission}}function a(P,x){return async(M,S)=>{const D=S().folder,T=[];for(const R of D.permissions){if(R.inherited)continue;const L=h(R);P===R&&(L.permission=x),T.push(L)}await o.ae.post(`/api/folders/${D.uid}/permissions`,{items:T}),await M(p(D.uid))}}function v(P){return async(x,M)=>{const S=M().folder,D=[];for(const T of S.permissions)T.inherited||T===P||D.push(h(T));await o.ae.post(`/api/folders/${S.uid}/permissions`,{items:D}),await x(p(S.uid))}}function C(P){return async(x,M)=>{const S=M().folder,D=[];for(const T of S.permissions)T.inherited||D.push(h(T));D.push({userId:P.userId,teamId:P.teamId,role:P.role,permission:P.permission}),await o.ae.post(`/api/folders/${S.uid}/permissions`,{items:D}),await x(p(S.uid))}}function E(P,x){return async M=>{const S=await(0,s.i)().post("/api/folders",{title:P,parentUid:x});await f.Vt.fetchUserPermissions(),M((0,i.$l)((0,m.AT)("Folder Created","OK"))),u.E1.push(n.u.stripBaseFromUrl(S.url))}}},60492:(G,O,e)=>{"use strict";e.d(O,{B:()=>s,_:()=>i});var t=e(93003),n=e(82002),u=e(81168);function s(m){const f={icon:"folder",id:"manage-folder",subTitle:"Manage folder dashboards and permissions",url:"",text:m.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"apps",id:`folder-dashboards-${m.uid}`,text:"Dashboards",url:m.url}]};return f.children.push({active:!1,icon:"library-panel",id:`folder-library-panels-${m.uid}`,text:"Panels",url:`${m.url}/library-panels`}),n.Vt.hasPermission(u.AccessControlAction.AlertingRuleRead)&&t.v.unifiedAlertingEnabled&&f.children.push({active:!1,icon:"bell",id:`folder-alerting-${m.uid}`,text:"Alert rules",url:`${m.url}/alerting`}),m.canAdmin&&f.children.push({active:!1,icon:"lock",id:`folder-permissions-${m.uid}`,text:"Permissions",url:`${m.url}/permissions`}),m.canSave&&f.children.push({active:!1,icon:"cog",id:`folder-settings-${m.uid}`,text:"Settings",url:`${m.url}/settings`}),f}function i(m){const f=s({id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return f.children[m].active=!0,{main:f,node:f.children[m]}}},15932:(G,O,e)=>{"use strict";e.d(O,{$$:()=>o,G3:()=>m,R7:()=>i,Ss:()=>f,ZP:()=>r});var t=e(32557),n=e(2024);const u={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},s=(0,t.oM)({name:"folder",initialState:u,reducers:{loadFolder:(d,c)=>({...d,...c.payload,hasChanged:!1}),setFolderTitle:(d,c)=>({...d,title:c.payload,hasChanged:c.payload.trim().length>0}),loadFolderPermissions:(d,c)=>({...d,permissions:(0,n.A)(c.payload)}),setCanViewFolderPermissions:(d,c)=>(d.canViewFolderPermissions=c.payload,d)}}),{loadFolderPermissions:i,loadFolder:m,setFolderTitle:f,setCanViewFolderPermissions:o}=s.actions,r={folder:s.reducer}},74311:(G,O,e)=>{"use strict";e.d(O,{Q:()=>l});var t=e(52423),n=e(68404),u=e(29516),s=e(46739),i=e(2323),m=e(82385),f=e(73063);const o=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:f.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],l=({value:d,onChange:c,context:g,item:p})=>{const y=r((0,u.l4)()),[h,a]=(0,n.useState)(),v=p.settings;(0,n.useEffect)(()=>{async function P(){const x=await(0,f.so)(d);a(x)}P()},[d,a]);const{current:C,options:E}=(0,n.useMemo)(()=>{let P=v?.options?[...v.options]:[...o],x=P?.find(M=>M.value===h?.path);return!x&&h&&(x={label:h.path,value:h.path},P.push(x)),{options:P,current:x}},[h,v?.options]);return n.createElement(n.Fragment,null,n.createElement(s.Ph,{value:C,options:E,onChange:P=>c(P.value),allowCustomValue:!0,formatCreateLabel:P=>`Load from URL: ${P}`}),h&&n.createElement(n.Fragment,null,h.error&&n.createElement(i.b,{title:h.error,severity:"warning"}),h.count&&n.createElement("div",{className:y.keys},n.createElement("b",null,"(",h.count,")"),h.examples(10).map(P=>n.createElement("span",{key:P},P,",")),h.count>10&&" ...")))},r=(0,m.B)(d=>({keys:t.css`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `}))},71575:(G,O,e)=>{"use strict";e.d(O,{C:()=>a});var t=e(14582),n=e(40538),u=e(74311),s=e(52423),i=e(68404),m=e(68183),f=e(29516),o=e(2323),l=e(81697),r=e(46739),d=e(90701),c=e(43524);const g=[{value:n.q1.Auto,label:"Auto",ariaLabel:m.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:n.q1.Coords,label:"Coords",ariaLabel:m.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:n.q1.Geohash,label:"Geohash",ariaLabel:m.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:n.q1.Lookup,label:"Lookup",ariaLabel:m.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],p="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",y=({value:v,onChange:C,context:E,item:P})=>{const[x,M]=(0,i.useState)();(0,i.useEffect)(()=>{P.settings?.source&&P.settings?.data?.length&&P.settings.data[0]&&(0,c.cJ)(P.settings.source).then(T=>{P.settings&&P.settings.data&&M((0,c.g6)(P.settings.data[0],T))})},[P.settings]);const S=(0,f.wW)(h),D=()=>{if(x){if(x.warning)return i.createElement(o.b,{title:x.warning,severity:"warning",buttonContent:i.createElement(l.J,{name:"question-circle",size:"xl"}),className:S.alert,onRemove:()=>{const T=window.open(p,"_blank","noopener,noreferrer");T&&(T.opener=null)}});if(v===n.q1.Auto&&x.description)return i.createElement("span",null,x.description)}return null};return i.createElement(i.Fragment,null,i.createElement(r.Ph,{options:g,value:v,onChange:T=>{C(T.value)}}),i.createElement(d.Lh,{className:S.hGroup},D()))},h=v=>({alert:s.css`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:s.css`
      & div {
        width: 100%;
      }
    `});function a(v,C,E,P,x){switch(E.addCustomEditor({id:"modeEditor",path:`${C}mode`,name:"Location Mode",editor:y,settings:{data:x,source:P}}),P?.mode){case n.q1.Coords:E.addFieldNamePicker({path:`${C}latitude`,name:"Latitude field",settings:{filter:M=>M.type===t.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${C}longitude`,name:"Longitude field",settings:{filter:M=>M.type===t.fS.number,noFieldsMessage:"No numeric fields found"}});break;case n.q1.Geohash:E.addFieldNamePicker({path:`${C}geohash`,name:"Geohash field",settings:{filter:M=>M.type===t.fS.string,noFieldsMessage:"No strings fields found"}});break;case n.q1.Lookup:E.addFieldNamePicker({path:`${C}lookup`,name:"Lookup field",settings:{filter:M=>M.type===t.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${C}gazetteer`,name:"Gazetteer",editor:u.Q})}}},50466:(G,O,e)=>{"use strict";e.d(O,{EK:()=>g,Fh:()=>p,ie:()=>c,uZ:()=>r,zS:()=>d});var t=e(18788),n=e(36597),u=e(54428),s=e(61331),i=e(14582),m=e(19695),f=e(14573);function o(h){if(!h?.length)return;const a=[16,8,4,2,1],v="0123456789bcdefghjkmnpqrstuvwxyz";let C=!0;const E=[],P=[];E[0]=-90,E[1]=90,P[0]=-180,P[1]=180;let x;h.split("").forEach(D=>{x=v.indexOf(D),a.forEach(T=>{l(C?P:E,x,T),C=!C})});const M=(E[0]+E[1])/2;return[(P[0]+P[1])/2,M]}function l(h,a,v){a&v?h[0]=(h[0]+h[1])/2:h[1]=(h[0]+h[1])/2}function r(h){return{name:h.name??"Point",type:i.fS.geo,values:new m.G(h.values.toArray().map(a=>{const v=o(a);if(v)return new t.Z((0,s.mi)(v))})),config:y}}function d(h,a){const v=new Array(h.values.length);for(let C=0;C<h.values.length;C++){const E=h.values.get(C),P=a.values.get(C);E===null||P===null||(v[C]=new t.Z((0,s.mi)([E,P])))}return{name:"Point",type:i.fS.geo,values:new m.G(v),config:y}}function c(h,a){const v=a.values.length,C=new Array(v);for(let E=0;E<v;E++)C[E]=h.find(a.values.get(E))?.geometry();return{name:"Geometry",type:i.fS.geo,values:new m.G(C),config:y}}function g(h,a){const v=h.values.toArray(),C=a.values.toArray();if(!v||!C)throw"missing src/dest";if(v.length!==C.length)throw"Source and destination field lengths do not match";const E=h.values.length,P=new Array(E);for(let x=0;x<E;x++){const M=v[x],S=C[x];M&&S?P[x]=new n.Z([M,S]):M?P[x]=M:S&&(P[x]=S)}return{name:"Geometry",type:i.fS.geo,values:new m.G(P),config:y}}function p(h,a){const v=h.values.toArray(),C=a.values.toArray();if(!v||!C)throw"missing src/dest";if(v.length!==C.length)throw"Source and destination field lengths do not match";const E=h.values.length,P=new Array(E);for(let x=0;x<E;x++){const M=v[x],S=C[x];M&&S&&(P[x]=new u.Z([(0,f.Lb)(M),(0,f.Lb)(S)]))}return{name:"Geometry",type:i.fS.geo,values:new m.G(P),config:y}}const y=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},73063:(G,O,e)=>{"use strict";e.d(O,{LI:()=>h,so:()=>a});var t=e(68208),n=e(18788),u=e(16911),s=e(14582),i=e(47214),m=e(23908),f=e(19695);function o(v){const C=new m.Z().readFeatures(v,{featureProjection:"EPSG:3857"}),E=C.length,P=new Array(E).fill(null),x=[],M=new Map,S=L=>{let w=M.get(L);return w||(w={types:new Set,values:new Array(E).fill(null),count:0},x.push(L),M.set(L,w)),w},D=(...L)=>{for(const w of L)if(!M.has(w))return w;return"___"+L[0]},T={types:new Set,values:new Array(E).fill(null),count:0};for(let L=0;L<E;L++){const w=C[L];P[L]=w.getGeometry();const A=w.getId();A!=null&&(T.values[L]=A,T.types.add((0,u.DP)(A)),T.count++);for(const N of w.getKeys()){const W=w.get(N);if(W===P[L]||W==null)continue;const I=S(N);I.values[L]=W,I.types.add((0,u.DP)(W)),I.count++}}const R=[];if(T.count>0){const L=l(T);R.push({name:D("id","_id","__id"),type:L,values:new f.G(T.values),config:{}})}R.push({name:D("geo","geometry"),type:s.fS.geo,values:new f.G(P),config:{}});for(const L of x){const w=M.get(L);if(!w)continue;const A=l(w);R.push({name:L,type:A,values:new f.G(w.values),config:{}})}return{fields:R,length:E}}function l(v){return v.count<1?s.fS.other:v.types.size>1?(v.values=v.values.map(C=>C!=null?`${C}`:C),s.fS.string):v.types.values().next().value}var r=e(50466),d=e(61331);function c(v,C){let E=0;const P=new Map;for(const x of C){const M=new n.Z((0,d.mi)([x.longitude,x.latitude])),S={point:()=>M,geometry:()=>M};if(x.name&&(P.set(x.name,S),P.set(x.name.toUpperCase(),S)),x.key&&(P.set(x.key,S),P.set(x.key.toUpperCase(),S)),x.keys)for(const D of x.keys)P.set(D,S),P.set(D.toUpperCase(),S);E++}return{path:v,find:x=>{let M=P.get(x);return!M&&typeof x=="string"&&(M=P.get(x.toUpperCase())),M},count:E,examples:x=>{const M=[];if(P.size<1)M.push("no values found");else for(const S of P.keys())if(M.push(S),M.length>=x)break;return M}}}function g(v,C){let E;if(Array.isArray(C)){const P=C[0];if(P.latitude&&P.longitude&&(P.key||P.keys))return c(v,C)}else Array.isArray(C?.features)&&C?.type==="FeatureCollection"&&(E=o(C));if(!E)try{E=(0,u.g0)(C)}catch(P){return{path:v,error:`${P}`,find:x=>{},examples:x=>[]}}return p(E,{path:v})}function p(v,C){const E=[];let P,x,M,S,D;for(const L of v.fields)if(L.type===s.fS.geo&&(P=L),!D&&L.type===s.fS.string&&(D=L),L.name){C.keys&&C.keys.includes(L.name)&&E.push(L);const w=L.name.toUpperCase();switch(w){case"LAT":case"LATITUTE":x=L;break;case"LON":case"LNG":case"LONG":case"LONGITUE":M=L;break;case"GEOHASH":S=L;break;case"ID":case"UID":case"KEY":case"CODE":C.keys||E.push(L);break;default:C.keys||(w.endsWith("_ID")||w.endsWith("_CODE"))&&E.push(L)}}!E.length&&D&&E.push(D);let T=!1;P?T=P.values.get(0).getType()==="Point":S?(P=(0,r.uZ)(S),T=!0):x&&M&&(P=(0,r.zS)(M,x),T=!0);const R=new Map;return E.forEach(L=>{L.values.toArray().forEach((w,A)=>{const N=`${w}`;R.set(N.toUpperCase(),A),R.set(N,A)})}),{path:C.path,find:L=>{const w=R.get(L);if(w!=null){const A=P?.values.get(w);return{frame:v,index:w,point:()=>!A||T?A:new n.Z((0,t.qg)(A.getExtent())),geometry:()=>A}}},examples:L=>{const w=[];for(let A of R.keys())if(w.push(A),w.length>L)break;return w},frame:()=>v,count:v.length}}const y={},h="public/gazetteer/countries.json";async function a(v){v||(v=h);let C=y[v];if(!C){try{const E=await(0,i.i)().get(v);C=g(v,E)}catch(E){console.warn("Error loading placename lookup",v,E),C={path:v,error:"Error loading URL",find:P=>{},examples:P=>[]}}y[v]=C}return C}},43524:(G,O,e)=>{"use strict";e.d(O,{cJ:()=>d,g6:()=>g});var t=e(89890),n=e(14582),u=e(3249),s=e(85854),i=e(40538),m=e(50466),f=e(73063);function o(p){return y=>{for(const h of y.fields)if(p(h,y,[]))return h}}function l(p){return y=>{for(const h of y.fields){if(p.has(h.name.toLowerCase()))return h;const a=(0,t.C)(h,y);if(p.has(a))return h}}}const r={mode:i.q1.Auto,geohash:l(new Set(["geohash"])),latitude:l(new Set(["latitude","lat"])),longitude:l(new Set(["longitude","lon","lng"])),h3:l(new Set(["h3"])),wkt:l(new Set(["wkt"])),lookup:l(new Set(["lookup"])),geo:p=>p.fields.find(y=>y.type===n.fS.geo)};async function d(p){const y={...r,mode:p?.mode??i.q1.Auto};switch(y.gazetteer=await(0,f.so)(p?.gazetteer),y.mode){case i.q1.Geohash:p?.geohash?y.geohash=o((0,u.sq)({id:s.mi.byName,options:p.geohash})):y.geohash=()=>{};break;case i.q1.Lookup:p?.lookup?y.lookup=o((0,u.sq)({id:s.mi.byName,options:p.lookup})):y.lookup=()=>{};break;case i.q1.Coords:p?.latitude?y.latitude=o((0,u.sq)({id:s.mi.byName,options:p.latitude})):y.latitude=()=>{},p?.longitude?y.longitude=o((0,u.sq)({id:s.mi.byName,options:p.longitude})):y.longitude=()=>{};break}return y}function c(p,y){const h={mode:y.mode??i.q1.Auto};if(h.mode===i.q1.Auto){if(h.geo=y.geo(p),h.geo)return h;if(h.latitude=y.latitude(p),h.longitude=y.longitude(p),h.latitude&&h.longitude)return h.mode=i.q1.Coords,h;if(h.geohash=y.geohash(p),h.geohash)return h.mode=i.q1.Geohash,h;if(h.lookup=y.lookup(p),h.lookup)return h.mode=i.q1.Lookup,h}switch(h.mode){case i.q1.Coords:h.latitude=y.latitude(p),h.longitude=y.longitude(p);break;case i.q1.Geohash:h.geohash=y.geohash(p);break;case i.q1.Lookup:h.lookup=y.lookup(p);break}return h}function g(p,y){const h=c(p,y);switch(h.mode){case i.q1.Auto:return h.geo?{field:h.geo}:{warning:"Unable to find location fields"};case i.q1.Coords:return h.latitude&&h.longitude?{field:(0,m.zS)(h.longitude,h.latitude),derived:!0,description:`${h.mode}: ${h.latitude.name}, ${h.longitude.name}`}:{warning:"Select latitude/longitude fields"};case i.q1.Geohash:return h.geohash?{field:(0,m.uZ)(h.geohash),derived:!0,description:`${h.mode}`}:{warning:"Select geohash field"};case i.q1.Lookup:return h.lookup?y.gazetteer?{field:(0,m.ie)(y.gazetteer,h.lookup),derived:!0,description:`${h.mode}: ${y.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},90336:(G,O,e)=>{"use strict";e.d(O,{GY:()=>m,MA:()=>i,nW:()=>s});var t=e(47214),n=e(77582),u=e(81168);const s=(0,u.createAsyncThunk)("users/fetchInvitees",async()=>n.Vt.hasPermission(u.AccessControlAction.OrgUsersAdd)?await(0,t.i)().get("/api/org/invites"):[]),i=(0,u.createAsyncThunk)("users/addInvitee",async(f,{dispatch:o})=>{await(0,t.i)().post("/api/org/invites",f),await o(s())}),m=(0,u.createAsyncThunk)("users/revokeInvite",async f=>(await(0,t.i)().patch(`/api/org/invites/${f}/revoke`,{}),f))},75804:(G,O,e)=>{"use strict";e.d(O,{ZP:()=>o,wl:()=>s});var t=e(32557),n=e(90336);const u=(0,t.HF)({selectId:l=>l.code}),s=u.getSelectors(),i=u.getInitialState({status:"idle"}),o={invites:(0,t.oM)({name:"invites",initialState:i,reducers:{},extraReducers:l=>{l.addCase(n.nW.pending,r=>{r.status="loading"}).addCase(n.nW.fulfilled,(r,{payload:d})=>{u.setAll(r,d),r.status="succeeded"}).addCase(n.nW.rejected,r=>{r.status="failed"}).addCase(n.GY.fulfilled,(r,{payload:d})=>{u.removeOne(r,d),r.status="succeeded"})}}).reducer}},76647:(G,O,e)=>{"use strict";e.d(O,{T:()=>g,c:()=>p});var t=e(68404),n=e(70197),u=e(22350),s=e(47214),i=e(74955),m=e(25474),f=e(6694),o=e(90723),l=e(79658),r=e(35287),d=e(86648),c=e(2313);const g=({panel:y,initialFolderUid:h,onDismiss:a})=>{const[v,C]=(0,t.useState)(h),[E,P]=(0,t.useState)(y.title),[x,M]=(0,t.useState)(y.title),[S,D]=(0,t.useState)(!1);(0,t.useEffect)(()=>D(!0),[E]),(0,n.Z)(()=>M(E),350,[E]);const{saveLibraryPanel:T}=(0,c.E)(),R=(0,t.useCallback)(()=>{y.libraryPanel={uid:"",name:E},T(y,v).then(A=>{A instanceof Error||a()})},[y,E,v,a,T]),L=(0,u.Z)(async()=>{try{return!(await(0,d.jh)(E)).some(A=>A.folderUid===v)}catch(A){return(0,s.kW)(A)&&(A.isHandled=!0),!0}finally{D(!1)}},[x,v]),w=!L?.value&&L.value!==void 0&&E===x&&!S;return t.createElement(t.Fragment,null,t.createElement(i.g,{label:(0,r.t)("library-panel.add-modal.name","Library panel name"),invalid:w,error:w?(0,r.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},t.createElement(m.I,{id:"share-panel-library-panel-name-input",name:"name",value:E,onChange:A=>P(A.currentTarget.value)})),t.createElement(i.g,{label:(0,r.t)("library-panel.add-modal.folder","Save in folder"),description:(0,r.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},t.createElement(l.Es,{onChange:({uid:A})=>C(A),initialFolderUid:h,inputId:"share-panel-library-panel-folder-picker"})),t.createElement(f.u.ButtonRow,null,t.createElement(o.zx,{variant:"secondary",onClick:a,fill:"outline"},t.createElement(r.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),t.createElement(o.zx,{onClick:R,disabled:w},t.createElement(r.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},p=({isOpen:y=!1,panel:h,initialFolderUid:a,...v})=>t.createElement(f.u,{title:"Create library panel",isOpen:y,onDismiss:v.onDismiss},t.createElement(g,{panel:h,initialFolderUid:a,onDismiss:v.onDismiss}))},81283:(G,O,e)=>{"use strict";e.d(O,{i:()=>u});var t=e(68404),n=e(81202);const u=({isOpen:s,onConfirm:i,onDismiss:m})=>t.createElement(n.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{i(),m()},onDismiss:m,isOpen:s})},6297:(G,O,e)=>{"use strict";e.d(O,{V:()=>t});function t(n){return Boolean(n.libraryPanel?.uid)}},86648:(G,O,e)=>{"use strict";e.d(O,{E8:()=>g,Ef:()=>c,Kq:()=>l,Mh:()=>f,Ob:()=>r,Pq:()=>m,UO:()=>d,jh:()=>o});var t=e(3363),n=e(30670),u=e(86899),s=e(29930),i=e(59096);async function m({searchString:p="",perPage:y=100,page:h=1,excludeUid:a="",sortDirection:v="",typeFilter:C=[],folderFilterUIDs:E=[]}={}){const P=new URLSearchParams;P.append("searchString",p),P.append("sortDirection",v),P.append("typeFilter",C.join(",")),P.append("folderFilterUIDs",E.join(",")),P.append("excludeUid",a),P.append("perPage",y.toString(10)),P.append("page",h.toString(10)),P.append("kind",i.V.Panel.toString(10));const{result:x}=await(0,s.i)().get(`/api/library-elements?${P.toString()}`);return x}async function f(p,y=!1){const h=await(0,t.n)((0,s.i)().fetch({method:"GET",url:`/api/library-elements/${p}`,showSuccessAlert:!y,showErrorAlert:!y})),{result:a}=h.data,v=new u.f({...n.Ql,schemaVersion:35,panels:[a.model]}),C=v.panels[0].getSaveModel();return v.destroy(),{...a,model:C}}async function o(p){const{result:y}=await(0,s.i)().get(`/api/library-elements/name/${p}`);return y}async function l(p,y){const{result:h}=await(0,s.i)().post("/api/library-elements",{folderUid:y,name:p.libraryPanel.name,model:p,kind:i.V.Panel});return h}async function r(p){const{libraryPanel:y,...h}=p,{uid:a,name:v,version:C,folderUid:E}=y,P=i.V.Panel,{result:x}=await(0,s.i)().patch(`/api/library-elements/${a}`,{folderUid:E,name:v,model:h,version:C,kind:P});return x}function d(p){return(0,s.i)().delete(`/api/library-elements/${p}`)}async function c(p){const{result:y}=await(0,s.i)().get(`/api/library-elements/${p}/connections`);return y}async function g(p){const y=await c(p);return y.length===0?[]:await(0,s.i)().search({dashboardUIDs:y.map(a=>a.connectionUid)})}},59096:(G,O,e)=>{"use strict";e.d(O,{V:()=>t});var t=(u=>(u[u.Panel=1]="Panel",u[u.Variable=2]="Variable",u))(t||{}),n=(u=>(u[u.Dashboard=1]="Dashboard",u))(n||{})},2313:(G,O,e)=>{"use strict";e.d(O,{E:()=>y});var t=e(68404),n=e(53787),u=e(47214),s=e(659),i=e(35287),m=e(81168),f=e(60499),o=e(86648);function l(h){return(0,f.t_)(h)}function r(h){return(0,f.AT)(h)}async function d(h,a){const v=c(h),C=await p(v,a);return g(h,C),C}function c(h){let a=h.getSaveModel();return a={libraryPanel:{name:h.title,uid:void 0},...a},a}function g(h,a){h.restoreModel({...a.model,configRev:0,libraryPanel:a,title:h.title}),h.hasSavedPanelEditChange=!0,h.refresh()}function p(h,a){return h.libraryPanel?h.libraryPanel&&h.libraryPanel.uid===""?(0,o.Kq)(h,a):(0,o.Ob)(h):Promise.reject()}const y=()=>{const h=(0,m.useDispatch)(),[a,v]=(0,n.default)(async(C,E)=>{try{return await d(C,E)}catch(P){throw(0,u.kW)(P)?(P.isHandled=!0,new Error(P.data.message)):P}},[]);return(0,t.useEffect)(()=>{if(a.error){const C=a.error.message;h((0,s.$l)(l((0,i.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:C}))))}a.value&&h((0,s.$l)(r((0,i.t)("library-panels.save.success","Library panel saved"))))},[h,a]),{state:a,saveLibraryPanel:v}}},30992:(G,O,e)=>{"use strict";e.d(O,{H:()=>v});var t=e(62626),n=e(25318),u=e(72274),s=e(57388),i=e(77582),m=e(57203),f=e(45984),o=e(9398),l=e(52423),r=e(68404),d=e(93003),c=e(6694),g=e(82385),p=(C=>(C.Saved="saved",C.EditingStarted="editing-started",C.EditingCanceled="editing-cancelled",C.Deleted="deleted",C))(p||{});class y extends r.PureComponent{constructor(){super(...arguments),this.state={},this.discardAndReload={label:"Discard local changes",description:"Load the latest saved version for this dashboard",action:()=>{v.reloadPage(),this.onDismiss()}},this.continueEditing={label:"Continue editing",description:"Keep your local changes and continue editing.  Note: when you save, this will overwrite the most recent changes",action:()=>{this.onDismiss()}},this.acceptDelete={label:"Discard Local changes",description:"view grafana homepage",action:()=>{document.location.href=d.v.appUrl}},this.onDismiss=()=>{this.setState({dismiss:!0})}}render(){const{event:E}=this.props,{dismiss:P}=this.state,x=h(d.v.theme2),M=E?.action===p.Deleted,S=M?[this.continueEditing,this.acceptDelete]:[this.continueEditing,this.discardAndReload];return r.createElement(c.u,{isOpen:!P,title:"Dashboard Changed",icon:"copy",onDismiss:this.onDismiss,onClickBackdrop:()=>{},className:x.modal},r.createElement("div",null,M?r.createElement("div",null,"This dashboard has been deleted by another session"):r.createElement("div",null,"This dashboard has been modifed by another session"),r.createElement("br",null),S.map(D=>r.createElement("div",{key:D.label,onClick:D.action,className:x.radioItem},r.createElement("h3",null,D.label),D.description)),r.createElement("br",null)))}}const h=(0,g.B)(C=>({modal:l.css`
      width: 500px;
    `,radioItem:l.css`
      margin: 0;
      font-size: ${C.typography.size.sm};
      color: ${C.colors.text.secondary};
      padding: 10px;
      cursor: pointer;
      width: 100%;

      &:hover {
        background: ${C.colors.primary.main};
        color: ${C.colors.text};
      }
    `}));class a{constructor(){this.editing=!1,this.observer={next:E=>{if((0,t.se)(E)&&this.editing&&E.state===t.yS.Connected&&this.sendEditingState(),(0,t.RL)(E)){if(E.message.sessionId===m.W4)return;const{action:P}=E.message;switch(P){case p.EditingStarted:case p.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const x=(0,o.h4)().getCurrent();if(x?.uid!==E.message.uid){console.log("dashboard event for different dashboard?",E,x);return}const M=this.editing||x.hasUnsavedChanges();if(P===p.Saved)M?i.h$.publish(new f.Dn({component:y,props:{event:E}})):(i.h$.emit(n.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(M&&P===p.EditingStarted&&!this.hasSeenNotice){const S=E.message,D=this.getRecentEditingEvent();(!D||D.message!==S.message)&&(this.hasSeenNotice=!0,i.h$.emit(n.SI.alertWarning,["Another session is editing this dashboard",S.message])),this.lastEditing=S}return}}}}}}setEditingState(E){const P=this.editing=E;this.editing=E,this.hasSeenNotice=!1,P&&i.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:E,uid:P}=this;E&&P&&(0,u.gj)().publish(E,{sessionId:m.W4,uid:P,action:this.editing?p.EditingStarted:p.EditingCanceled,timestamp:Date.now()})}watch(E){const P=(0,u.gj)();P&&E!==this.uid&&(this.channel={scope:t.z.Grafana,namespace:"dashboard",path:`uid/${E}`},this.leave(),E&&(this.subscription=P.getStream(this.channel).subscribe(this.observer)),this.uid=E)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){s.E1.reload()}}const v=new a},28625:(G,O,e)=>{"use strict";e.d(O,{Av:()=>c,MB:()=>a,_A:()=>g});var t=e(16911),n=e(14582),u=e(19695),s=e(70006),i=e(15355),m=e(98234),f=e(72274),o=e(44332);const l="__name__";var r=(x=>(x[x.wide=0]="wide",x[x.labels=1]="labels",x))(r||{});const d=class{constructor(x){this.options=x,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:f.T0.Replace,length:0},this.serialize=(M,S,D)=>{const T=S?Object.assign({},{...this.options,...S}):this.options,R=(0,t.Aw)(this,M),L=E(R.fields.map(A=>A.values),typeof D?.maxLength=="number"?Math.min(D.maxLength,T.maxLength):T.maxLength,this.timeFieldIndex,T.maxDelta);R.fields=R.fields.map(A=>({...A,values:A.values.slice(L)}));const w=R.fields[0]?.values?.length??0;return{...R,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:w,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:T}},this.initFromSerialized=M=>{this.name=M.name,this.refId=M.refId,this.meta=M.meta,this.length=M.length,this.labels=M.labels,this.schemaFields=M.schemaFields,this.timeFieldIndex=M.timeFieldIndex,this.pushMode=M.pushMode,this.packetInfo.length=M.packetInfo.length,this.packetInfo.number=M.packetInfo.number,this.packetInfo.action=f.T0.Replace,this.packetInfo.schemaChanged=!0,this.fields=M.fields.map(S=>({...S,type:S.type??n.fS.other,config:S.config??{},values:Array.isArray(S.values)?new u.G(S.values):new u.G})),C(this.fields.map(S=>S.values.buffer),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:M,maxDelta:S})=>{const D=M&&this.options.maxLength<M,T=S&&this.options.maxDelta<S,R=S&&this.options.maxDelta===1/0;return Boolean(D||T||R)},this.resize=({maxLength:M,maxDelta:S})=>{S&&(this.options.maxDelta===1/0?this.options.maxDelta=S:this.options.maxDelta=Math.max(S,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,M??0)},this.pushNewValues=M=>{if(!M?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=M[0].length,this.packetInfo.schemaChanged=!1,this.options.action===f.T0.Append?v(this.fields.map(D=>D.values.buffer),M,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(M.forEach((D,T)=>{this.fields[T]?.values&&(this.fields[T].values.buffer=D)}),C(this.fields.map(D=>D.values.buffer),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const S=this.fields?.[0]?.values?.buffer?.length;S!==void 0&&(this.length=S)},this.resetStateCalculations=()=>{this.fields.forEach(M=>{M.state={...M.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=M=>this.fields.map((S,D)=>M(S)?D:void 0).filter(S=>S!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(M=>{const S=M.values.buffer;return S.slice(Math.max(S.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>Boolean(this.packetInfo.length),this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action===f.T0.Replace}push(x){const{schema:M,data:S}=x;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,M){this.pushMode=0,this.timeFieldIndex=M.fields.findIndex(L=>L.type===n.fS.time);const D=M.fields[0];this.timeFieldIndex===1&&D.type===n.fS.string&&(D.name==="labels"||D.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const T=this.pushMode===1?M.fields.slice(1):M.fields;this.refId=M.refId,M.meta&&(this.meta={...M.meta});const{displayNameFormat:R}=this.options;if(P(this.schemaFields,T)){const L=T.length;this.fields.forEach((w,A)=>{const N=T[A%L];w.config=N.config??{},w.labels=N.labels}),R&&this.fields.forEach(w=>{const A={[l]:w.name,...w.labels};w.config.displayNameFromDS=(0,o.W)(R,A)})}else{this.packetInfo.schemaChanged=!0;const L=this.pushMode===0;this.fields=T.map(w=>{const A=w.config??{};if(R){const N={[l]:w.name,...w.labels};A.displayNameFromDS=(0,o.W)(R,N)}return{config:A,name:w.name,labels:w.labels,type:w.type??n.fS.other,values:L?this.fields.find(N=>N.name===w.name&&w.type===N.type)?.values??new u.G(Array(this.length).fill(void 0)):new u.G}})}this.schemaFields=T}if(S&&S.values.length&&S.values[0].length){let{values:D,entities:T}=S;if(T&&T.forEach((L,w)=>{L&&(0,s.Jy)(L,D[w])}),this.pushMode===1){const L=p(D);for(const N of L.keys())this.labels.has(N)||(this.packetInfo.schemaChanged=!0,this.addLabel(N));let w=Array(this.schemaFields.length).fill([]),A=[];this.labels.forEach(N=>{A.push(L.get(N)??w)}),D=(0,m.v_)(A)}if(D.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${D.length} (labels=${this.pushMode===1})`);this.fields=D.map((L,w)=>{let A=`Field ${w}`,N=(0,t.LI)(L[0]);return w===0&&N===n.fS.number&&L[0]>1600016688632&&(N=n.fS.time,A="Time"),{name:A,type:N,config:{},values:new u.G([])}})}let R=D;this.packetInfo.length=D[0].length,this.alwaysReplace||!this.length?this.packetInfo.action=f.T0.Replace:(this.packetInfo.action=f.T0.Append,R=this.fields.map(L=>L.values.buffer),v(R,D,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),R.forEach((L,w)=>{const{state:A,values:N}=this.fields[w];N.buffer=L,A&&(A.calcs=void 0)}),this.length=R[0].length}return{...this.packetInfo}}addLabel(x){const{displayNameFormat:M}=this.options,S=this.labels.size,D=h(x);if(S===0)this.fields.forEach((T,R)=>{if(R>0&&(T.labels=D,M)){const L={[l]:T.name,...D};T.config.displayNameFromDS=(0,o.W)(M,L)}});else for(let T=1;T<this.schemaFields.length;T++){let R=this.schemaFields[T];const L=R.config??{};if(M){const w={[l]:R.name,...D};L.displayNameFromDS=(0,o.W)(M,w)}this.fields.push({...R,config:L,labels:D,values:new u.G(Array(this.length).fill(void 0))})}this.labels.add(x)}};let c=d;c.deserialize=x=>{const M=new d(x.options);return M.initFromSerialized(x),M},c.empty=x=>new d(g(x)),c.fromDataFrameJSON=(x,M)=>{const S=new d(g(M));return S.push(x),S};function g(x){return{maxLength:x?.maxLength??1e3,maxDelta:x?.maxDelta??1/0,action:x?.action??f.T0.Append,displayNameFormat:x?.displayNameFormat}}function p(x){let M=new Set(x[0]),S=new Map;M.forEach(D=>{let T=Array(x.length-1).fill(null).map(()=>[]);S.set(D,T)});for(let D=0;D<x[0].length;D++){let T=S.get(x[0][D]);for(let R=1;R<x.length;R++)T[R-1].push(x[R][D])}return S}function y(x,M,S,D){let T;S=S||0,D=D||M.length-1;let R=D<=2147483647;for(;D-S>1;)T=R?S+D>>1:Math.floor((S+D)/2),M[T]<x?S=T:D=T;return x-M[S]<=M[D]-x?S:D}function h(x){if(!x.length)return{};if(x.charAt(0)==="{")return(0,i.J8)(x);const M={};return x.split(",").forEach(S=>{const[D,T]=S.trim().split("=");M[D]=T}),M}function a(x){const M=x.packetInfo;return M?.action?M:void 0}function v(x,M,S=1/0,D=0,T=1/0){for(let R=0;R<x.length;R++)for(let L=0;L<M[R].length;L++)x[R].push(M[R][L]);return C(x,S,D,T)}function C(x,M=1/0,S=0,D=1/0){const T=E(x,M,S,D);if(T)for(let R=0;R<x.length;R++)x[R].splice(0,T);return T}function E(x,M=1/0,S=0,D=1/0){if(!x[0]?.length)return 0;const T=x[0].length;let R=0;if(T>M&&(R=T-M),D!==1/0&&S>=0){const L=x[S],w=L[R],A=L[T-1];A-w>D&&(R=y(A-D,L,R))}return R}function P(x,M){if(x?.length!==M.length)return!1;for(let S=0;S<x.length;S++){const D=x[S],T=M[S];if(D.name!==T.name||D.type!==T.type)return!1}return!0}},14035:(G,O,e)=>{"use strict";e.d(O,{A1:()=>u,g0:()=>n,iL:()=>m});var t=e(16911),n=(f=>(f.NewValuesSameSchema="NewValuesSameSchema",f.FullFrame="FullFrame",f))(n||{});const u=(f,o)=>"type"in f&&f.type===o,s=Object.values(n),i=f=>"type"in f&&s.includes(f.type),m=f=>(0,t.aY)(f)&&"packetInfo"in f},57203:(G,O,e)=>{"use strict";e.d(O,{Bp:()=>w,W4:()=>L});var t=e(93003),n=e(72274),u=e(47214),s=e(6911),i=e(82002),m=e(53747),f=e(21056),o=e(88214),l=e(79702),r=e(6163),d=e(43752),c=e(77410);const g=()=>new c.q(new URL(e.p+e.u(8186),e.b));var p=e(46060),y=e(85526),h=e(13016);const a=N=>new p.y(W=>{const I=N.subscribe(l.sj(F=>{W.next(F)}),l.sj(F=>{W.error(F)}),l.sj(()=>{W.complete()}));return{unsubscribe:()=>{I.then(F=>F.unsubscribe())}}}),v=N=>(0,y.D)(N).pipe((0,h.w)(W=>a(W)));class C{constructor(W){this.getConnectionState=()=>v(this.centrifugeWorker.getConnectionState()),this.getDataStream=I=>v(this.centrifugeWorker.getDataStream(I)).pipe((0,r.Q)(d.z)),this.getQueryData=async I=>{const F=JSON.parse(JSON.stringify(I));return this.centrifugeWorker.getQueryData(F)},this.getPresence=I=>this.centrifugeWorker.getPresence(I),this.getStream=I=>v(this.centrifugeWorker.getStream(I)),this.centrifugeWorker=l.Ud(g()),this.centrifugeWorker.initialize(W,l.sj(W.dataStreamSubscriberReadiness))}}var E=e(2101),P=e(53786),x=e(62626),M=e(88635),S=e(9800),D=e(28625),T=e(14035);class R{constructor(W){this.deps=W,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=I=>{let F;const V=b=>{const X=b.data[0];if(!F&&!(0,T.A1)(X,T.g0.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${X?.type}`);return}switch(X.type){case T.g0.FullFrame:{F=D.Av.deserialize(X.frame);return}case T.g0.NewValuesSameSchema:{F.pushNewValues(X.values);return}}};return this.deps.centrifugeSrv.getDataStream(I).pipe((0,E.U)(b=>(V(b),{...b,data:[F??D.Av.empty()]})))},this.getStream=I=>this.deps.centrifugeSrv.getStream(I),this.getQueryData=I=>(0,y.D)(this.deps.centrifugeSrv.getQueryData(I)).pipe((0,h.w)(F=>{const V=(0,M.z1)(F,I.request.targets);return V.data?.length&&V.data.find(X=>X.meta?.channel)?(0,S.B9)(V,I.request,S.PI):(0,P.of)(V)})),this.publish=async(I,F)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,x.Aj)(I),data:F}),this.getPresence=I=>this.deps.centrifugeSrv.getPresence(I)}}const L=window?.grafanaBootData?.user?.id+"/"+Date.now().toString(16)+"/"+Math.random().toString(36).substring(2,15);function w(){const N={appUrl:`${window.location.origin}${t.v.appSubUrl}`,orgId:i.Vt.user.orgId,orgRole:i.Vt.user.orgRole,liveEnabled:t.v.liveEnabled,sessionId:L,dataStreamSubscriberReadiness:s.A.ok.asObservable(),grafanaAuthToken:(0,m.v)()},W=t.v.featureToggles["live-service-web-worker"]?new C(N):new f.R(N);(0,n.cA)(new R({centrifugeSrv:W,backendSrv:(0,u.i)()}))}function A(){return getGrafanaLiveSrv()}},54972:(G,O,e)=>{"use strict";e.d(O,{j:()=>i});var t=e(52423),n=e(68404),u=e(29516);const s=["level","lvl","filename"],i=({labels:f})=>{const o=(0,u.wW)(m),l=Object.keys(f).filter(r=>!r.startsWith("_")&&!s.includes(r));return l.length===0?n.createElement("span",{className:(0,t.cx)([o.logsLabels])},n.createElement("span",{className:(0,t.cx)([o.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([o.logsLabels])},l.sort().map(r=>{const d=f[r];if(!d)return;const c=`${r}: ${d}`;return n.createElement("span",{key:r,className:(0,t.cx)([o.logsLabel])},n.createElement("span",{className:(0,t.cx)([o.logsLabelValue]),title:c},d))}))},m=f=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${f.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: ${f.spacing(0,.25)};
      background-color: ${f.colors.background.secondary};
      border-radius: ${f.shape.borderRadius(1)};
      margin: ${f.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: ${f.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},25287:(G,O,e)=>{"use strict";e.d(O,{Q:()=>l});var t=e(2525),n=e(68404),u=e(47846),s=e.n(u),i=e(33399),m=e(29516);function f(r,d){return d.split(/;\s*/).reduce((c,g)=>{if(g==="color:rgba(0,0,0,0.5)")return{color:r.colors.text.secondary};const p=g.match(/([^:\s]+)\s*:\s*(.+)/);if(p&&p[1]&&p[2]){const y=p[1].replace(/-([a-z])/g,(h,a)=>a.toUpperCase());c[y]=p[2]}return c},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(d,c){return d.value===c.prevValue?null:{chunks:t.ZP.parse(d.value).spans.map(p=>p.css?{style:f(d.theme,p.css),text:p.text}:{text:p.text}),prevValue:d.value}}render(){const{chunks:d}=this.state;return d.map((c,g)=>{const p=this.props.highlight?.searchWords?n.createElement(s(),{key:g,textToHighlight:c.text,searchWords:this.props.highlight.searchWords,findChunks:i.Xt,highlightClassName:this.props.highlight.highlightClassName}):c.text;return c.style?n.createElement("span",{key:g,style:c.style,"data-testid":"ansiLogLine"},p):p})}}const l=(0,m.HE)(o);l.displayName="LogMessageAnsi"},48955:(G,O,e)=>{"use strict";e.d(O,{r:()=>I,n:()=>L});var t=e(52423),n=e(58635),u=e(68404),s=e(47846),i=e.n(s),m=e(35008),f=e.n(m),o=e(33399),l=e(40400),r=e(48756),d=e(20017),c=e(29516),g=e(25287),p=e(64076),y=e(90595),h=e(8928),a=e(90723),v=e(49938),C=e(15031),E=e(2323),P=e(57319),x=(F=>(F.Bottom="bottom",F.Top="top",F))(x||{});const M=(F,V)=>{const H=V?"100%":"75%",Y=V?t.css`
        top: -${260}px;
      `:t.css`
        margin-top: -${260}px;
      `,ee=V?t.css`
        top: 100%;
      `:t.css`
        margin-top: ${F.spacing(2.5)};
      `;return{width:t.css`
      width: ${H};
    `,commonStyles:t.css`
      position: absolute;
      height: ${260}px;
      z-index: ${F.zIndex.dropdown};
      overflow: hidden;
      background: ${F.colors.background.primary};
      box-shadow: 0 0 ${F.spacing(1.25)} ${F.v1.palette.black};
      border: 1px solid ${F.colors.background.secondary};
      border-radius: ${F.shape.borderRadius(2)};
      font-family: ${F.typography.fontFamily};
    `,header:t.css`
      height: ${40}px;
      padding: ${F.spacing(0,1.25)};
      display: flex;
      align-items: center;
      background: ${F.colors.background.canvas};
    `,top:t.css`
      border-radius: 0 0 ${F.shape.borderRadius(2)} ${F.shape.borderRadius(2)};
      box-shadow: 0 0 ${F.spacing(1.25)} ${F.v1.palette.black};
      clip-path: inset(0px -${F.spacing(1.25)} -${F.spacing(1.25)} -${F.spacing(1.25)});
    `,title:t.css`
      position: absolute;
      width: ${H};
      margin-top: -${260+40}px;
      z-index: ${F.zIndex.modal};
      height: ${40}px;
      background: ${F.colors.background.secondary};
      border: 1px solid ${F.colors.background.secondary};
      border-radius: ${F.shape.borderRadius(2)} ${F.shape.borderRadius(2)} 0 0;
      box-shadow: 0 0 ${F.spacing(1.25)} ${F.v1.palette.black};
      clip-path: inset(-${F.spacing(1.25)} -${F.spacing(1.25)} 0px -${F.spacing(1.25)});
      font-family: ${F.typography.fontFamily};

      display: flex;
      flex-direction: row;
      align-items: center;

      padding: ${F.spacing()};

      > h5 {
        margin: 0;
        flex: 1;
      }
    `,actions:t.css`
      align-items: center;
      display: flex;
    `,headerButton:t.css`
      margin-left: ${F.spacing(1)};
    `,logs:t.css`
      height: ${220}px;
      padding: ${F.spacing(1.25)};
      font-family: ${F.typography.fontFamilyMonospace};

      .scrollbar-view {
        overscroll-behavior: contain;
      }
    `,afterContext:Y,beforeContext:ee}},S=({row:F,rows:V,onLoadMoreContext:b,canLoadMoreRows:X,groupPosition:k,logsSortOrder:H})=>{const{header:Y,headerButton:ee}=(0,c.wW)(M);let ue="after";return k==="bottom"?H===y.UV.Descending&&(ue="before"):H===y.UV.Ascending&&(ue="before"),u.createElement("div",{className:Y},u.createElement("span",{className:t.css`
          opacity: 0.6;
        `},"Showing ",V.length," lines ",ue," match."),(V.length>=10||V.length>10&&V.length%10!==0)&&X&&u.createElement(a.zx,{className:ee,variant:"secondary",size:"sm",onClick:b},"Load 10 more lines"))},D=({row:F,rows:V,error:b,className:X,shouldScrollToBottom:k,canLoadMoreRows:H,onLoadMoreContext:Y,groupPosition:ee,logsSortOrder:ue})=>{const{commonStyles:q,logs:ge}=(0,c.wW)(M),[De,fe]=(0,u.useState)(0),[me,ce]=(0,u.useState)(0),ie=(0,u.useRef)(null),re=(0,p.Z)(V),Ee=(0,p.Z)(De),J=(0,p.Z)(me);(0,u.useLayoutEffect)(()=>{if(!k||!ie.current)return;const j=re?.length??0,be=J??0,Le=Ee??0,Qe=ie.current.parentElement;let Ye=0;Qe&&(Ye=Qe.scrollHeight-Qe.clientHeight,ce(Ye)),V.length>j&&Ye>be&&fe(Le+(Ye-be))},[k,V,re,Ee,J]);const te=()=>{ie.current?.parentElement&&fe(ie.current?.parentElement.scrollTop)},ne={row:F,rows:V,onLoadMoreContext:Y,canLoadMoreRows:H,groupPosition:ee,logsSortOrder:ue};return u.createElement("div",{className:(0,t.cx)(q,X)},k&&!b&&u.createElement(S,{...ne}),u.createElement("div",{className:ge},u.createElement(v.$,{autoHide:!0,onScroll:te,scrollTop:De,autoHeightMin:"210px"},u.createElement("div",{ref:ie},!b&&u.createElement(C.a,{items:V,renderItem:j=>u.createElement("div",{className:t.css`
                        padding: 5px 0;
                      `},typeof j=="string"&&h.QX.hasAnsiCodes(j)?u.createElement(g.Q,{value:j}):j)}),b&&u.createElement(E.b,{title:b})))),!k&&!b&&u.createElement(S,{...ne}))},T=({row:F,context:V,errors:b,onOutsideClick:X,onLoadMoreContext:k,hasMoreContextRows:H,wrapLogMessage:Y,logsSortOrder:ee})=>{(0,u.useEffect)(()=>{const ce=ie=>{(ie.key==="Escape"||ie.key==="Esc")&&X("close_esc")};return document.addEventListener("keydown",ce,!1),()=>{document.removeEventListener("keydown",ce,!1)}},[X,F]);const{afterContext:ue,beforeContext:q,title:ge,top:De,actions:fe,width:me}=(0,c.wW)(ce=>M(ce,Y));return u.createElement(P.L,{onClick:()=>X("close_outside_click")},u.createElement("div",{onClick:ce=>ce.stopPropagation()},V.after&&u.createElement(D,{rows:V.after,error:b&&b.after,row:F,className:(0,t.cx)(ue,De,me),shouldScrollToBottom:!0,canLoadMoreRows:H?H.after:!1,onLoadMoreContext:k,groupPosition:"top",logsSortOrder:ee}),V.before&&u.createElement(D,{onLoadMoreContext:k,canLoadMoreRows:H?H.before:!1,row:F,rows:V.before,error:b&&b.before,className:(0,t.cx)(q,me),groupPosition:"bottom",logsSortOrder:ee}),u.createElement("div",{className:(0,t.cx)(ge,me)},u.createElement("h5",null,"Log context"),u.createElement("div",{className:fe},u.createElement(d.h,{size:"lg",name:"times",onClick:()=>X("close_button")})))))};var R=e(34282);const L=1e5,w=(F,V,b)=>{const X=f()(F.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:t.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:t.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${X};
      display: inherit;
    `,horizontalScroll:t.css`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:t.css`
      display: block;
      margin-left: 0px;
    `,rowMenu:t.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      height: ${F.spacing(4.5)};
      background: ${F.colors.background.primary};
      box-shadow: ${F.shadows.z3};
      padding: ${F.spacing(0,0,0,.5)};
      z-index: 100;
      visibility: hidden;
      width: ${V?F.spacing(10):F.spacing(5)};
    `,logRowMenuCell:t.css`
      position: absolute;
      right: ${b?`calc(75px + ${F.spacing()} + ${V?"80px":"40px"})`:"40px"};
      margin-top: -${F.spacing(.125)};
    `,logLine:t.css`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${F.typography.fontFamilyMonospace};
      font-size: ${F.typography.bodySmall.fontSize};
      letter-spacing: ${F.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `}};function A(F,V,b,X){const k=b&&b.length>0&&b[0]&&b[0].length>0&&V.length<L,H=b??[];if(F){const Y=k?{searchWords:H,highlightClassName:X}:void 0;return u.createElement(g.Q,{value:V,highlight:Y})}else return k?u.createElement(i(),{textToHighlight:V,searchWords:H,findChunks:o.Xt,highlightClassName:X}):V}const N=(0,n.Z)((F,V)=>{if(V)try{return JSON.stringify(JSON.parse(F),void 0,2)}catch{return F}return F});class W extends u.PureComponent{constructor(){super(...arguments),this.logRowRef=u.createRef(),this.onContextToggle=V=>{V.stopPropagation(),this.props.onToggleContext("open")},this.onShowContextClick=V=>{const{scrollElement:b}=this.props;this.onContextToggle(V),b&&this.logRowRef.current&&b.scroll({behavior:"smooth",top:b.scrollTop+this.logRowRef.current.getBoundingClientRect().top-window.innerHeight/2})}}render(){const{row:V,theme:b,errors:X,hasMoreContextRows:k,updateLimit:H,context:Y,contextIsOpen:ee,showRowMenu:ue,wrapLogMessage:q,prettifyLogMessage:ge,onToggleContext:De,app:fe,logsSortOrder:me,showContextToggle:ce}=this.props,ie=(0,R.h)(b,V.logLevel),{hasAnsi:re,raw:Ee}=V,J=N(Ee,ge),te=ce?ce(V):!1,ne=w(b,te,fe===l.zj.Explore);return u.createElement(u.Fragment,null,u.createElement("td",{ref:this.logRowRef,style:ee?{position:"unset"}:void 0,className:ie.logsRowMessage},u.createElement("div",{className:(0,t.cx)({[ne.positionRelative]:q},{[ne.horizontalScroll]:!q})},ee&&Y&&u.createElement(T,{row:V,context:Y,errors:X,wrapLogMessage:q,hasMoreContextRows:k,onOutsideClick:De,logsSortOrder:me,onLoadMoreContext:()=>{H&&H()}}),u.createElement("button",{className:(0,t.cx)(ne.logLine,ne.positionRelative,{[ne.rowWithContext]:ee})},A(re,J,V.searchWords,ie.logsRowMatchHighLight)))),ue&&u.createElement("td",{className:(0,t.cx)("log-row-menu-cell",ne.logRowMenuCell)},u.createElement("span",{className:(0,t.cx)("log-row-menu",ne.rowMenu),onClick:j=>j.stopPropagation()},te&&u.createElement(r.u,{placement:"top",content:"Show context"},u.createElement(d.h,{size:"md",name:"gf-show-context",onClick:this.onShowContextClick})),u.createElement(r.u,{placement:"top",content:"Copy"},u.createElement(d.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(J)})))))}}const I=(0,c.HE)(W);I.displayName="LogRowMessage"},28947:(G,O,e)=>{"use strict";e.d(O,{w:()=>De});var t=e(58635),n=e(68404),u=e(90595),s=e(29516),i=e(81042),m=e(52423),f=e(38849),o=e(77274),l=e(19253),r=e(48756),d=e(81697),c=e(26408),g=e(93880),p=e(38120),y=e(89205),h=e(82385);const a=fe=>({logsStatsRow:m.css`
    label: logs-stats-row;
    margin: ${parseInt(fe.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:m.css`
    label: logs-stats-row--active;
    color: ${fe.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:m.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:m.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:m.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${fe.spacing(.75)};
  `,logsStatsRowPercent:m.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${fe.spacing(.75)};
    width: ${fe.spacing(4.5)};
  `,logsStatsRowBar:m.css`
    label: logs-stats-row__bar;
    height: ${fe.spacing(.5)};
    overflow: hidden;
    background: ${fe.colors.text.disabled};
  `,logsStatsRowInnerBar:m.css`
    label: logs-stats-row__innerbar;
    height: ${fe.spacing(.5)};
    overflow: hidden;
    background: ${fe.colors.primary.main};
  `}),v=({active:fe,count:me,proportion:ce,value:ie})=>{const re=(0,s.wW)(a),Ee=`${Math.round(ce*100)}%`,J={width:Ee},te=fe?(0,m.cx)([re.logsStatsRow,re.logsStatsRowActive]):(0,m.cx)([re.logsStatsRow]);return n.createElement("div",{className:te},n.createElement("div",{className:(0,m.cx)([re.logsStatsRowLabel])},n.createElement("div",{className:(0,m.cx)([re.logsStatsRowValue]),title:ie},ie),n.createElement("div",{className:(0,m.cx)([re.logsStatsRowCount])},me),n.createElement("div",{className:(0,m.cx)([re.logsStatsRowPercent])},Ee)),n.createElement("div",{className:(0,m.cx)([re.logsStatsRowBar])},n.createElement("div",{className:(0,m.cx)([re.logsStatsRowInnerBar]),style:J})))};v.displayName="LogLabelStatsRow";const C=5,E=(0,h.B)(fe=>({logsStats:m.css`
      label: logs-stats;
      background: inherit;
      color: ${fe.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:m.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${fe.colors.border.medium};
      display: flex;
    `,logsStatsTitle:m.css`
      label: logs-stats__title;
      font-weight: ${fe.typography.fontWeightMedium};
      padding-right: ${fe.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:m.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:m.css`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class P extends n.PureComponent{render(){const{label:me,rowCount:ce,stats:ie,value:re,theme:Ee,isLabel:J}=this.props,te=E(Ee),ne=ie.slice(0,C);let j=ne.find(Ve=>Ve.value===re),be=ie.slice(C);const Le=!j;Le&&(j=be.find(Ve=>Ve.value===re),be=be.filter(Ve=>Ve.value!==re));const Qe=be.reduce((Ve,$e)=>Ve+$e.count,0),de=ne.reduce((Ve,$e)=>Ve+$e.count,0)+Qe,Be=Qe/de;return n.createElement("div",{className:te.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:te.logsStatsHeader},n.createElement("div",{className:te.logsStatsTitle},me,": ",de," of ",ce," rows have that ",J?"label":"field")),n.createElement("div",{className:te.logsStatsBody},ne.map(Ve=>n.createElement(v,{key:Ve.value,...Ve,active:Ve.value===re})),Le&&j&&n.createElement(v,{key:j.value,...j,active:!0}),Qe>0&&n.createElement(v,{key:"__OTHERS__",count:Qe,value:"Other",proportion:Be})))}}const x=(0,s.HE)(P);x.displayName="LogLabelStats";var M=e(34282);const S=(0,t.Z)((fe,me)=>{const ce=m.css`
    color: ${fe.colors.text.secondary};
    background-color: ${fe.colors.background.primary};

    &:hover {
      color: ${fe.colors.text.primary};
      background: ${fe.colors.background.secondary};
    }
  `,ie=m.css`
    color: ${fe.colors.text.secondary};
    background-color: transparent;
    border-color: transparent;

    &:hover {
      color: ${fe.colors.text.primary};
      background: ${fe.colors.background.secondary};
    }
  `,re=m.css`
    color: ${fe.v1.palette.orangeDark};
    border-color: ${fe.v1.palette.orangeDark};
    background-color: transparent;

    &:hover {
      color: ${fe.colors.text.primary};
      background: ${fe.colors.emphasize(fe.colors.background.canvas,.03)};
    }
  `,Ee=fe.flags.topnav?ie:ce;return{noHoverBackground:m.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:m.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:m.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:m.css`
      color: ${fe.colors.primary.text};
    `,copyButton:m.css`
      & > button {
        color: ${fe.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: 50%;
        height: ${fe.spacing(fe.components.height.sm)};
        width: ${fe.spacing(fe.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${fe.colors.success.main};
          }
        }
      }
    `,wrapLine:m.css`
      label: wrapLine;
      white-space: pre-wrap;
    `,toolbarButtonRow:m.css`
      label: toolbarButtonRow;
      gap: ${fe.spacing(.5)};

      max-width: calc(3 * ${fe.spacing(fe.components.height.sm)});
      & > div {
        height: ${fe.spacing(fe.components.height.sm)};
        width: ${fe.spacing(fe.components.height.sm)};
        & > button {
          border: 0;
          background-color: transparent;
          height: inherit;

          &:hover {
            box-shadow: none;
            border-radius: 50%;
          }
        }
      }
      & div:last-child > button:not(.stats-button) {
        ${me?re:Ee};
      }
    `,logDetailsStats:m.css`
      padding: 0 ${fe.spacing(1)};
    `,logDetailsValue:m.css`
      display: table-cell;
      vertical-align: middle;
      line-height: 22px;

      .show-on-hover {
        display: inline;
        visibility: hidden;
      }
      &:hover {
        .show-on-hover {
          visibility: visible;
        }
      }
    `}});class D extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:me,parsedKey:ce,row:ie}=this.props;me&&me(ce),(0,o.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ie.datasourceType,logRowUid:ie.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:me,parsedKey:ce,row:ie}=this.props;me&&me(ce),(0,o.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ie.datasourceType,logRowUid:ie.uid,type:"disable"})},this.filterLabel=()=>{const{onClickFilterLabel:me,parsedKey:ce,parsedValue:ie,row:re}=this.props;me&&me(ce,ie),(0,o.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:re.datasourceType,filterType:"include",logRowUid:re.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:me,parsedKey:ce,parsedValue:ie,row:re}=this.props;me&&me(ce,ie),(0,o.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:re.datasourceType,filterType:"exclude",logRowUid:re.uid})},this.showStats=()=>{const{getStats:me,isLabel:ce,row:ie,app:re}=this.props,{showFieldsStats:Ee}=this.state;if(!Ee){const J=me(),te=J?J.reduce((ne,j)=>ne+j.count,0):0;this.setState({fieldStats:J,fieldCount:te})}this.toggleFieldsStats(),(0,o.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:ie.datasourceType,fieldType:ce?"label":"detectedField",type:Ee?"close":"open",logRowUid:ie.uid,app:re})}}toggleFieldsStats(){this.setState(me=>({showFieldsStats:!me.showFieldsStats}))}render(){const{theme:me,parsedKey:ce,parsedValue:ie,isLabel:re,links:Ee,displayedFields:J,wrapLogMessage:te,onClickFilterLabel:ne,onClickFilterOutLabel:j}=this.props,{showFieldsStats:be,fieldStats:Le,fieldCount:Qe}=this.state,Ye=J?.includes(ce)||be,de=S(me,Ye),Be=(0,M.h)(me),Ve=ne&&j,$e=J&&J.includes(ce)?n.createElement(c.h,{variant:"active",tooltip:"Hide this field",iconOnly:!0,narrow:!0,icon:"eye",onClick:this.hideField}):n.createElement(c.h,{tooltip:"Show this field instead of the message",iconOnly:!0,narrow:!0,icon:"eye",onClick:this.showField});return n.createElement(n.Fragment,null,n.createElement("tr",{className:(0,m.cx)(Be.logDetailsValue)},n.createElement("td",{className:Be.logsDetailsIcon},n.createElement(g.R,{alignment:"left",className:de.toolbarButtonRow},Ve&&n.createElement(c.h,{iconOnly:!0,narrow:!0,icon:"search-plus",tooltip:"Filter for value",onClick:this.filterLabel}),Ve&&n.createElement(c.h,{iconOnly:!0,narrow:!0,icon:"search-minus",tooltip:"Filter out value",onClick:this.filterOutLabel}),J&&$e,n.createElement(c.h,{iconOnly:!0,variant:be?"active":"default",narrow:!0,icon:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",onClick:this.showStats}))),n.createElement("td",{className:Be.logDetailsLabel},ce),n.createElement("td",{className:(0,m.cx)(de.wordBreakAll,te&&de.wrapLine)},n.createElement("div",{className:de.logDetailsValue},ie,n.createElement("div",{className:(0,m.cx)("show-on-hover",de.copyButton)},n.createElement(p.m,{getText:()=>ie,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"})),Ee?.map(We=>n.createElement("span",{key:We.title},"\xA0",n.createElement(y.k,{link:We})))))),be&&n.createElement("tr",null,n.createElement("td",null,n.createElement(g.R,{alignment:"left",className:de.toolbarButtonRow},n.createElement(c.h,{iconOnly:!0,variant:be?"active":"default",narrow:!0,icon:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats}))),n.createElement("td",{colSpan:2},n.createElement("div",{className:de.logDetailsStats},n.createElement(x,{stats:Le,label:ce,value:ie,rowCount:Qe,isLabel:re})))))}}const T=(0,s.HE)(D);T.displayName="LogDetailsRow";var R=e(35160);const L=fe=>({logsRowLevelDetails:m.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:m.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${fe.colors.background.primary};
      }
    `});class w extends n.PureComponent{render(){const{app:me,row:ce,theme:ie,hasError:re,onClickFilterOutLabel:Ee,onClickFilterLabel:J,getRows:te,showDuplicates:ne,className:j,onClickShowField:be,onClickHideField:Le,displayedFields:Qe,getFieldLinks:Ye,wrapLogMessage:de}=this.props,Be=(0,M.h)(ie,ce.logLevel),Ve=L(ie),$e=ce.labels?ce.labels:{},We=Object.keys($e).length>0,Ke=(0,R.Y)(ce,Ye),qe=Ke.filter(nt=>nt.links?.length).sort(),Xe=Ke.filter(nt=>nt.links?.length===0).sort(),at=Xe&&Xe.length>0,Ze=qe&&qe.length>0,lt=(0,m.cx)(!re&&[Be.logsRowLevel,Ve.logsRowLevelDetails]);return n.createElement("tr",{className:(0,m.cx)(j,Ve.logDetails)},ne&&n.createElement("td",null),n.createElement("td",{className:lt,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:Be.logDetailsContainer},n.createElement("table",{className:Be.logDetailsTable},n.createElement("tbody",null,(We||at)&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:Be.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys($e).sort().map(nt=>{const _e=$e[nt];return n.createElement(T,{key:`${nt}=${_e}`,parsedKey:nt,parsedValue:_e,isLabel:!0,getStats:()=>(0,i.lL)(te(),nt),onClickFilterOutLabel:Ee,onClickFilterLabel:J,onClickShowField:be,onClickHideField:Le,row:ce,app:me,wrapLogMessage:de,displayedFields:Qe})}),Xe.map(nt=>{const{key:_e,value:ut,fieldIndex:rt}=nt;return n.createElement(T,{key:`${_e}=${ut}`,parsedKey:_e,parsedValue:ut,onClickShowField:be,onClickHideField:Le,onClickFilterOutLabel:Ee,onClickFilterLabel:J,getStats:()=>(0,i.i6)(ce.dataFrame.fields[rt].values.toArray()),displayedFields:Qe,wrapLogMessage:de,row:ce,app:me})}),Ze&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:Be.logDetailsHeading,"aria-label":"Data Links"},"Links")),qe.map(nt=>{const{key:_e,value:ut,links:rt,fieldIndex:je}=nt;return n.createElement(T,{key:`${_e}=${ut}`,parsedKey:_e,parsedValue:ut,links:rt,onClickShowField:be,onClickHideField:Le,getStats:()=>(0,i.i6)(ce.dataFrame.fields[je].values.toArray()),displayedFields:Qe,wrapLogMessage:de,row:ce,app:me})}),!at&&!We&&!Ze&&n.createElement("tr",null,n.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const A=(0,s.HE)(w);A.displayName="LogDetails";var N=e(54972),W=e(50700),I=e(16911),F=e(71895);const V=async(fe,me,ce,ie)=>{const re=[fe(me,{limit:ce}),fe(me,{limit:ce+1,direction:"FORWARD"})],Ee=await Promise.all(re.map(ne=>ne.catch(j=>j))),J=Ee.map(ne=>{const j=ne;if(!j.data)return[];const be=[];for(let Le=0;Le<j.data.length;Le++){const Qe=(0,I.g0)(j.data[Le]),Ye=new F.N(Qe),de=Ye.getFieldByName("ts"),Be=Ye.getFieldByName("id");for(let Ve=0;Ve<de.values.length;Ve++){if(Be){if(Be.values.get(Ve)===me.uid)continue}else if(parseInt(de.values.get(Ve),10)===me.timeEpochMs)continue;const We=Qe.fields.filter(Ke=>Ke.name==="line")[0].values.get(Ve);be.length<ce&&be.push(We)}}return ie===u.UV.Ascending?be.reverse():be}),te=Ee.map(ne=>{const j=ne;return j.message?j.message:""});return{data:ie===u.UV.Ascending?J.reverse():J,errors:ie===u.UV.Ascending?te.reverse():te}},b=({getRowContext:fe,row:me,children:ce,logsSortOrder:ie})=>{const[re,Ee]=(0,n.useState)(10),[J,te]=(0,n.useState)(null),[ne,j]=(0,n.useState)({before:!0,after:!0}),{value:be}=(0,W.Z)(async()=>await V(fe,me,re,ie),[re]);return(0,n.useEffect)(()=>{be&&te(Le=>{let Qe=!0,Ye=!0;const de=Le?.data[0],Be=Le?.data[1],Ve=be.data[0],$e=be.data[1];return Le&&(!Ve||de.length===Ve.length)&&(Qe=!1),Le&&(!$e||Be.length===$e.length)&&(Ye=!1),j({before:Qe,after:Ye}),be})},[be]),ce({result:{before:J?J.data[0]:[],after:J?J.data[1]:[]},errors:{before:J?J.errors[0]:void 0,after:J?J.errors[1]:void 0},hasMoreContextRows:ne,updateLimit:()=>{Ee(re+10);const{datasourceType:Le,uid:Qe}=me;(0,o.ff)("grafana_explore_logs_log_context_load_more_clicked",{datasourceType:Le,logRowUid:Qe,newLimit:re+10})},limit:re,logsSortOrder:ie})};var X=e(48955);class k extends n.PureComponent{render(){const{row:me,showDetectedFields:ce,getFieldLinks:ie,wrapLogMessage:re}=this.props,Ee=(0,R.Y)(me,ie),J=re?"":m.css`
          white-space: nowrap;
        `,te=ce.map(ne=>{const j=Ee.find(be=>{const{key:Le}=be;return Le===ne});return j!=null?`${ne}=${j.value}`:me.labels[ne]!==void 0&&me.labels[ne]!==null?`${ne}=${me.labels[ne]}`:null}).filter(ne=>ne!==null).join(" ");return n.createElement("td",{className:J},te)}}const H=(0,s.HE)(k);H.displayName="LogRowMessageDisplayedFields";const Y=fe=>({topVerticalAlign:m.css`
      label: topVerticalAlign;
      margin-top: -${fe.spacing(.9)};
      margin-left: -${fe.spacing(.25)};
    `,detailsOpen:m.css`
      &:hover {
        background-color: ${l.hoverColor(fe.colors.background.primary,fe)};
      }
    `,errorLogRow:m.css`
      label: erroredLogRow;
      color: ${fe.colors.text.secondary};
    `});class ee extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.toggleContext=me=>{const{datasourceType:ce,uid:ie}=this.props.row;(0,o.ff)("grafana_explore_logs_log_context_clicked",{datasourceType:ce,logRowUid:ie,type:me}),this.props.toggleContextIsOpen?.(),this.setState(re=>({showContext:!re.showContext}))},this.toggleDetails=()=>{this.props.enableLogDetails&&((0,o.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(me=>({showDetails:!me.showDetails})))}}renderTimeStamp(me){return(0,f.dq)(me,{timeZone:this.props.timeZone})}renderLogRow(me,ce,ie,re,Ee){const{getRows:J,onClickFilterLabel:te,onClickFilterOutLabel:ne,onClickShowField:j,onClickHideField:be,enableLogDetails:Le,row:Qe,showDuplicates:Ye,showContextToggle:de,showRowMenu:Be,showLabels:Ve,showTime:$e,displayedFields:We,wrapLogMessage:Ke,prettifyLogMessage:qe,theme:Xe,getFieldLinks:at,forceEscape:Ze,onLogRowHover:lt,app:nt,scrollElement:_e}=this.props,{showDetails:ut,showContext:rt}=this.state,je=(0,M.h)(Xe,Qe.logLevel),dt=Y(Xe),{errorMessage:oe,hasError:Se}=(0,i.Mi)(Qe),Re=(0,m.cx)(je.logsRow,{[dt.errorLogRow]:Se,[je.contextBackground]:rt}),ze=Qe.hasUnescapedContent&&Ze?{...Qe,entry:(0,i.l3)(Qe.entry),raw:(0,i.l3)(Qe.raw)}:Qe;return n.createElement(n.Fragment,null,n.createElement("tr",{className:Re,onClick:this.toggleDetails,onMouseEnter:()=>{lt&&lt(Qe)},onMouseLeave:()=>{lt&&lt(void 0)}},Ye&&n.createElement("td",{className:je.logsRowDuplicates},ze.duplicates&&ze.duplicates>0?`${ze.duplicates+1}x`:null),n.createElement("td",{className:(0,m.cx)({[je.logsRowLevel]:!Se})},Se&&n.createElement(r.u,{content:`Error: ${oe}`,placement:"right",theme:"error"},n.createElement(d.J,{className:je.logIconError,name:"exclamation-triangle",size:"xs"}))),Le&&n.createElement("td",{title:ut?"Hide log details":"See log details",className:je.logsRowToggleDetails},n.createElement(d.J,{className:dt.topVerticalAlign,name:ut?"angle-down":"angle-right"})),$e&&n.createElement("td",{className:je.logsRowLocalTime},this.renderTimeStamp(Qe.timeEpochMs)),Ve&&ze.uniqueLabels&&n.createElement("td",{className:je.logsRowLabels},n.createElement(N.j,{labels:ze.uniqueLabels})),We&&We.length>0?n.createElement(H,{row:ze,showDetectedFields:We,getFieldLinks:at,wrapLogMessage:Ke}):n.createElement(X.r,{row:ze,getRows:J,errors:ce,hasMoreContextRows:ie,updateLimit:re,context:me,contextIsOpen:rt,showContextToggle:de,showRowMenu:Be,wrapLogMessage:Ke,prettifyLogMessage:qe,onToggleContext:this.toggleContext,app:nt,scrollElement:_e,logsSortOrder:Ee})),this.state.showDetails&&n.createElement(A,{className:Re,showDuplicates:Ye,getFieldLinks:at,onClickFilterLabel:te,onClickFilterOutLabel:ne,onClickShowField:j,onClickHideField:be,getRows:J,row:ze,wrapLogMessage:Ke,hasError:Se,displayedFields:We,app:nt}))}render(){const{showContext:me}=this.state,{logsSortOrder:ce,row:ie,getRowContext:re}=this.props;return me?n.createElement(n.Fragment,null,n.createElement(b,{row:ie,getRowContext:re,logsSortOrder:ce},({result:Ee,errors:J,hasMoreContextRows:te,updateLimit:ne,logsSortOrder:j})=>n.createElement(n.Fragment,null,this.renderLogRow(Ee,J,te,ne,j)))):this.renderLogRow()}}const ue=(0,s.HE)(ee);ue.displayName="LogRow";const q=100;class ge extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1,contextIsOpen:!1},this.toggleContextIsOpen=()=>{this.setState(me=>({contextIsOpen:!me.contextIsOpen}))},this.makeGetRows=(0,t.Z)(me=>()=>me),this.sortLogs=(0,t.Z)((me,ce)=>(0,i.$u)(me,ce))}componentDidMount(){const{logRows:me,previewLimit:ce}=this.props,re=(me?me.length:0)<=ce*2;re?this.setState({renderAll:re}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:me,showContextToggle:ce,showLabels:ie,showTime:re,wrapLogMessage:Ee,prettifyLogMessage:J,logRows:te,deduplicatedRows:ne,timeZone:j,onClickFilterLabel:be,onClickFilterOutLabel:Le,theme:Qe,enableLogDetails:Ye,previewLimit:de,getFieldLinks:Be,logsSortOrder:Ve,displayedFields:$e,onClickShowField:We,onClickHideField:Ke,forceEscape:qe,onLogRowHover:Xe,app:at,scrollElement:Ze}=this.props,{renderAll:lt,contextIsOpen:nt}=this.state,{logsRowsTable:_e}=(0,M.h)(Qe),ut=ne||te,rt=te&&te.length>0,je=ut?ut.reduce((he,pe)=>pe.duplicates?he+pe.duplicates:he,0):0,dt=me!==u.Y4.none&&je>0,oe=ut||[],Se=Ve?this.sortLogs(oe,Ve):oe,Re=Se.slice(0,de),ze=Se.slice(de,Se.length),ve=this.makeGetRows(Se),Te=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return n.createElement("table",{className:_e},n.createElement("tbody",null,rt&&Re.map((he,pe)=>n.createElement(ue,{key:he.uid,getRows:ve,getRowContext:Te,row:he,showContextToggle:ce,showRowMenu:!nt,showDuplicates:dt,showLabels:ie,showTime:re,displayedFields:$e,wrapLogMessage:Ee,prettifyLogMessage:J,timeZone:j,enableLogDetails:Ye,onClickFilterLabel:be,onClickFilterOutLabel:Le,onClickShowField:We,onClickHideField:Ke,getFieldLinks:Be,logsSortOrder:Ve,forceEscape:qe,toggleContextIsOpen:this.toggleContextIsOpen,onLogRowHover:Xe,app:at,scrollElement:Ze})),rt&&lt&&ze.map((he,pe)=>n.createElement(ue,{key:he.uid,getRows:ve,getRowContext:Te,row:he,showContextToggle:ce,showRowMenu:!nt,showDuplicates:dt,showLabels:ie,showTime:re,displayedFields:$e,wrapLogMessage:Ee,prettifyLogMessage:J,timeZone:j,enableLogDetails:Ye,onClickFilterLabel:be,onClickFilterOutLabel:Le,onClickShowField:We,onClickHideField:Ke,getFieldLinks:Be,logsSortOrder:Ve,forceEscape:qe,toggleContextIsOpen:this.toggleContextIsOpen,onLogRowHover:Xe,app:at,scrollElement:Ze})),rt&&!lt&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",Se.length-de," rows..."))))}}ge.defaultProps={previewLimit:q};const De=(0,s.HE)(ge);De.displayName="LogsRows"},34282:(G,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(52423),n=e(90595),u=e(19253);const s=(i,m)=>{let f=i.isLight?i.v1.palette.gray5:i.v1.palette.gray2;const o=u.hoverColor(i.colors.background.secondary,i);switch(m){case n.in.crit:case n.in.critical:f="#705da0";break;case n.in.error:case n.in.err:f="#e24d42";break;case n.in.warning:case n.in.warn:f=i.colors.warning.main;break;case n.in.info:f="#7eb26d";break;case n.in.debug:f="#1f78c1";break;case n.in.trace:f="#6ed0e0";break}return{logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${i.components.textHighlight.text}
      background-color: ${i.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${i.typography.fontFamilyMonospace};
      font-size: ${i.typography.bodySmall.fontSize};
      width: 100%;
    `,contextBackground:t.css`
      background: ${o};
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          visibility: visible;
          z-index: 1;
        }

        background: ${o};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${i.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:t.css`
      label: logs-row__level;
      max-width: ${i.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${i.spacing(.5)};
        background-color: ${f};
      }
    `,logIconError:t.css`
      color: ${i.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${i.colors.border.medium};
      padding: 0 ${i.spacing(1)} ${i.spacing(1)};
      border-radius: ${i.shape.borderRadius(1.5)};
      margin: ${i.spacing(2.5)} ${i.spacing(1)} ${i.spacing(2.5)} ${i.spacing(2)};
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${i.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${i.spacing(.75)};
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${i.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${i.typography.fontWeightBold};
      padding: ${i.spacing(1)} 0 ${i.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${o};
      }
    `}}},35160:(G,O,e)=>{"use strict";e.d(O,{B:()=>s,Y:()=>u});var t=e(58635),n=e(14582);const u=(0,t.Z)((m,f)=>{const o=s(m,f);return Object.values(o)}),s=(0,t.Z)((m,f)=>m.dataFrame.fields.map((o,l)=>({...o,index:l})).filter((o,l)=>!i(o,l,m)).map(o=>{const l=f?f(o,m.rowIndex,m.dataFrame):[];return{key:o.name,value:o.values.get(m.rowIndex).toString(),links:l,fieldIndex:o.index}}));function i(m,f,o){if(m.name==="labels"&&m.type===n.fS.other||m.name==="id"||m.name==="tsNs"||o.entryFieldIndex===f)return!0;const l=o.dataFrame.fields.find(r=>r.type===n.fS.time);return!!(m.name===l?.name&&m.type===n.fS.time&&m.values.get(0)===l.values.get(0)||m.config.custom?.hidden||m.values.get(o.rowIndex)==null)}},81042:(G,O,e)=>{"use strict";e.d(O,{$u:()=>g,DA:()=>r,Di:()=>h,Mi:()=>p,ZO:()=>i,i6:()=>o,j0:()=>c,jx:()=>m,l3:()=>y,lL:()=>f});var t=e(82897),n=e.n(t),u=e(90595),s=e(35160);function i(a){if(!a)return u.in.unknown;let v=u.in.unknown,C;for(const E of Object.keys(u.in)){const x=new RegExp(`\\b${E}\\b`,"i").exec(a);x&&(C===void 0||x.index<C)&&(v=u.in[E],C=x.index)}return v}function m(a){const v=u.in[a.toString().toLowerCase()];return v||u.in.unknown}function f(a,v){const C=a.filter(x=>x.labels[v]!==void 0),E=C.length,P=(0,t.countBy)(C,x=>x.labels[v]);return l(P,E)}function o(a){const v=a.filter(E=>E!=null),C=(0,t.countBy)(v);return l(C,v.length)}const l=(a,v)=>(0,t.chain)(a).map((C,E)=>({count:C,value:E,proportion:C/v})).sortBy("count").reverse().value(),r=(a,v)=>a.timeEpochMs<v.timeEpochMs?-1:a.timeEpochMs>v.timeEpochMs?1:a.timeEpochNs<v.timeEpochNs?-1:a.timeEpochNs>v.timeEpochNs?1:0,d=(a,v)=>a.timeEpochMs>v.timeEpochMs?-1:a.timeEpochMs<v.timeEpochMs?1:a.timeEpochNs>v.timeEpochNs?-1:a.timeEpochNs<v.timeEpochNs?1:0,c=(a,v)=>{const C=a?g(a.rows,v):[];return a?{...a,rows:C}:{hasUniqueLabels:!1,rows:C}},g=(a,v)=>v===u.UV.Ascending?a.sort(r):a.sort(d),p=a=>a.labels.__error__?{hasError:!0,errorMessage:a.labels.__error__}:{hasError:!1},y=a=>a.replace(/\\r\\n|\\n|\\t|\\r/g,v=>v.slice(1)==="t"?"	":`
`);function h(a){return a.map(v=>{const C=(0,s.B)(v).reduce((E,P)=>(E[P.key]=P.value,E),{});return{line:v.entry,timestamp:v.timeEpochNs,fields:{...C,...v.labels}}})}},80600:(G,O,e)=>{"use strict";e.d(O,{H:()=>d});var t=e(68404),n=e(88561),u=e(90723),s=e(10655),i=e(52423),m=e(29516),f=e(81202);const o=({title:c})=>{const g=(0,m.wW)(r);return t.createElement(t.Fragment,null,t.createElement("p",{className:g.title},"Do you want to delete this public dashboard?"),t.createElement("p",{className:g.description},c?`This will delete the public dashboard for "${c}". Your dashboard will not be deleted.`:"Orphaned public dashboard will be deleted"))},l=({dashboardTitle:c,onConfirm:g,onDismiss:p})=>t.createElement(f.s,{isOpen:!0,body:t.createElement(o,{title:c}),onConfirm:g,onDismiss:p,title:"Delete",icon:"trash-alt",confirmText:"Delete"}),r=c=>({title:i.css`
    margin-bottom: ${c.spacing(1)};
  `,description:i.css`
    font-size: ${c.typography.bodySmall.fontSize};
  `}),d=({dashboard:c,publicDashboard:g,loader:p,children:y,onDismiss:h,...a})=>{const[v,{isLoading:C}]=(0,s.bS)(),E=(P,x)=>{v({dashboard:c,uid:P.uid,dashboardUid:P.dashboardUid}),x()};return t.createElement(n.JY,null,({showModal:P,hideModal:x})=>t.createElement(u.zx,{"aria-label":"Delete public dashboard",title:"Delete public dashboard",onClick:()=>P(l,{dashboardTitle:g.title,onConfirm:()=>E(g,x),onDismiss:()=>{h?h():x()}}),...a},C&&p?p:y))}},85385:(G,O,e)=>{"use strict";e.d(O,{t:()=>i});var t=e(29930);const n={FOLDER:"dash-folder",DASHBOARD:"dash-db"};class u extends Error{constructor(f,o){super(o),this.type=f}}class s{constructor(){this.rootName="general"}validateNewDashboardName(f,o){return this.validate(f,o,"A dashboard or a folder with the same name already exists")}validateNewFolderName(f){return this.validate(0,f,"A folder or dashboard in the general folder with the same name already exists")}async validate(f,o,l){o=(o||"").trim();const r=o.toLowerCase();if(o.length===0)throw new u("REQUIRED","Name is required");if(f===0&&r===this.rootName)throw new u("EXISTING","This is a reserved name and cannot be used for a folder.");const d=[];d.push(t.ae.search({type:n.FOLDER,folderIds:[f],query:o})),d.push(t.ae.search({type:n.DASHBOARD,folderIds:[f],query:o}));const c=await Promise.all(d);let g=[];c.length>0&&c[0].length>0&&(g=c[0]),c.length>1&&c[1].length>0&&(g=g.concat(c[1]));for(const p of g)if(r===p.title.toLowerCase())throw new u("EXISTING",l)}}const i=new s},50946:(G,O,e)=>{"use strict";e.d(O,{$j:()=>h,EW:()=>L,Fd:()=>P,L6:()=>S,Pb:()=>R,ZL:()=>T,ct:()=>v,iM:()=>w,nQ:()=>c,q_:()=>d,uC:()=>x,ys:()=>y});var t=e(83383),n=e(47214),u=e(57388),s=e(77213),i=e(659),m=e(60499),f=e(30992),o=e(86648),l=e(59096),r=e(24693);function d(N){return async W=>{try{W((0,r.AK)());const I=await(0,n.i)().get(`/api/gnet/dashboards/${N}`);W((0,r.S9)(I)),W(g(I.json)),W(p(I.json))}catch(I){W((0,r.eh)()),(0,n.kW)(I)&&W((0,i.$l)((0,m.t_)(I.data.message||I)))}}}function c(N){return async W=>{W((0,r.Nw)(N)),W(g(N)),W(p(N))}}function g(N){return W=>{if(N&&N.__inputs){const I=[];N.__inputs.forEach(F=>{const V={name:F.name,label:F.label,info:F.description,value:F.value,type:F.type,pluginId:F.pluginId,options:[]};F.type===r.n$.DataSource?a(F,V):V.info||(V.info="Specify a string constant"),I.push(V)}),W((0,r.Zc)(I))}}}function p(N){return async function(W){if(!N||!N.__elements)return;const I=[];for(const F of Object.values(N.__elements)){if(F.kind!==l.V.Panel)continue;const V=F.model,{type:b,description:X}=V,{uid:k,name:H}=F,Y={model:{model:V,uid:k,name:H,version:0,meta:{},id:0,type:b,kind:l.V.Panel,description:X},state:r.KQ.New};try{const ee=await(0,o.Mh)(k,!0);Y.state=r.KQ.Exists,Y.model=ee}catch(ee){if(ee.status!==404)throw ee}I.push(Y)}W((0,r.C2)(I))}}function y(){return N=>{N((0,r.MO)())}}function h(N){return async(W,I)=>{const F=I().importDashboard.dashboard,V=I().importDashboard.inputs;let b=[];N.dataSources?.forEach((H,Y)=>{const ee=V.dataSources[Y];b.push({name:ee.name,type:ee.type,pluginId:ee.pluginId,value:H.uid})}),N.constants?.forEach((H,Y)=>{const ee=V.constants[Y];b.push({value:H,name:ee.name,type:ee.type})});const X=await(0,n.i)().post("api/dashboards/import",{dashboard:{...F,title:N.title,uid:N.uid||F.uid},overwrite:!0,inputs:b,folderUid:N.folder.uid}),k=t.u.stripBaseFromUrl(X.importedUrl);u.E1.push(k)}}const a=(N,W)=>{(0,s.F)().getList({pluginId:N.pluginId}).length===0?W.info="No data sources of type "+N.pluginName+" found":W.info||(W.info="Select a "+N.pluginName+" data source")};function v(N,W){const I=[];for(const F of N)I.push(E(C,!0,F,W));return A(I).then(F=>({totalCount:F.length,successCount:F.filter(V=>V.succeeded).length,alreadyInFolderCount:F.filter(V=>V.alreadyInFolder).length}))}async function C(N,W){const I=await(0,n.i)().get(`/api/dashboards/uid/${N}`);if((I.meta.folderUid===void 0||I.meta.folderUid===null)&&W.uid===""||I.meta.folderUid===W.uid)return{alreadyInFolder:!0};const F={dashboard:I.dashboard,folderUid:W.uid,overwrite:!1};try{return await x(F),{succeeded:!0}}catch(V){if((0,n.kW)(V)){if(V.data?.status!=="plugin-dashboard")return{succeeded:!1};V.isHandled=!0}F.overwrite=!0;try{return await x(F),{succeeded:!0}}catch{return{succeeded:!1}}}}function E(N,W,...I){return async F=>{try{const V=await N(...I);return Array.prototype.concat(F,[V])}catch(V){if(W)return F;throw V}}}function P(N,W){const I=[];for(const F of N)I.push(E(M,!0,F,!0));for(const F of W)I.push(E(w,!0,F,!0));return A(I)}function x(N){return f.H.ignoreNextSave(),(0,n.i)().post("/api/dashboards/db/",{dashboard:N.dashboard,message:N.message??"",overwrite:N.overwrite??!1,folderUid:N.folderUid})}function M(N,W){return(0,n.i)().delete(`/api/folders/${N}?forceDeleteRules=false`,void 0,{showSuccessAlert:W})}function S(N){return(0,n.i)().post("/api/folders",N)}const D=1e3;function T(N,W,I=!1){return(0,n.i)().get("/api/search",{query:N,type:"dash-folder",permission:W,accesscontrol:I,limit:D})}function R(N){return(0,n.i)().get(`/api/folders/${N}`)}function L(N){return(0,n.i)().get(`/api/folders/id/${N}`)}function w(N,W){return(0,n.i)().delete(`/api/dashboards/uid/${N}`,{showSuccessAlert:W})}function A(N){return N.reduce((W,I)=>Promise.resolve(W).then(I),[])}},24693:(G,O,e)=>{"use strict";e.d(O,{AK:()=>p,C2:()=>c,G7:()=>u,KQ:()=>i,MO:()=>o,Nw:()=>d,S9:()=>r,ZP:()=>h,Zc:()=>l,eh:()=>g,n$:()=>s,wg:()=>m});var t=e(32557),n=e(49922),u=(a=>(a[a.Gcom=0]="Gcom",a[a.Json=1]="Json",a))(u||{}),s=(a=>(a.DataSource="datasource",a.Constant="constant",a.LibraryPanel="libraryPanel",a))(s||{}),i=(a=>(a.New="new",a.Exists="exists",a.Different="different",a))(i||{});const m={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},f=(0,t.oM)({name:"manageDashboards",initialState:m,reducers:{setGcomDashboard:(a,v)=>{a.dashboard={...v.payload.json,id:null},a.meta={updatedAt:v.payload.updatedAt,orgName:v.payload.orgName},a.source=0,a.state=n.Gu.Done},setJsonDashboard:(a,v)=>{a.dashboard={...v.payload,id:null},a.meta=m.meta,a.source=1,a.state=n.Gu.Done},clearDashboard:a=>{a.dashboard={},a.state=n.Gu.NotStarted},setInputs:(a,v)=>{a.inputs={dataSources:v.payload.filter(C=>C.type==="datasource"),constants:v.payload.filter(C=>C.type==="constant"),libraryPanels:[]}},setLibraryPanelInputs:(a,v)=>{a.inputs.libraryPanels=v.payload},fetchFailed:a=>{a.dashboard={},a.state=n.Gu.Error},fetchDashboard:a=>{a.state=n.Gu.Loading}}}),{clearDashboard:o,setInputs:l,setGcomDashboard:r,setJsonDashboard:d,setLibraryPanelInputs:c,fetchFailed:g,fetchDashboard:p}=f.actions,h={importDashboard:f.reducer}},2183:(G,O,e)=>{"use strict";e.d(O,{FV:()=>i,JE:()=>o,Q$:()=>m,RF:()=>s,Yi:()=>f});var t=e(47214),n=e(659),u=e(17283);function s(l={getBackendSrv:t.i}){return async r=>{const d=await l.getBackendSrv().get("/api/org");return r((0,u.jR)(d)),d}}function i(l={getBackendSrv:t.i}){return async(r,d)=>{const c=d().organization.organization;await l.getBackendSrv().put("/api/org",{name:c.name}),r((0,n.H7)(c.name)),r(s(l))}}function m(l,r={getBackendSrv:t.i}){return async d=>{const c=await r.getBackendSrv().post("/api/user/using/"+l);d((0,n.H7)(c.name))}}function f(l,r={getBackendSrv:t.i}){return async d=>{const c=await r.getBackendSrv().post("/api/orgs/",l);d(m(c.orgId))}}function o(l={getBackendSrv:t.i}){return async r=>{const d=await l.getBackendSrv().get("/api/user/orgs");return r((0,u.IM)(d)),d}}},17283:(G,O,e)=>{"use strict";e.d(O,{IM:()=>m,ZP:()=>o,jR:()=>i,xR:()=>s});var t=e(32557);const n={organization:{},userOrgs:[]},u=(0,t.oM)({name:"organization",initialState:n,reducers:{organizationLoaded:(l,r)=>({...l,organization:r.payload}),setOrganizationName:(l,r)=>({...l,organization:{...l.organization,name:r.payload}}),userOrganizationsLoaded:(l,r)=>({...l,userOrgs:r.payload})}}),{setOrganizationName:s,organizationLoaded:i,userOrganizationsLoaded:m}=u.actions,o={organization:u.reducer}},51927:(G,O,e)=>{"use strict";e.d(O,{Z:()=>y});var t=e(52423),n=e(68404),u=e(20251),s=e(40400),i=e(29516),m=e(71235),f=e(52822),o=e(84952),l=e(58379),r=e(36281),d=e(16200),c=e(9398),g=e(81168),p=e(32294);function y(v){const C=(0,i.wW)(a),E=(0,m.R9)(),P=new u.mi(v.data),{dataSummary:x}=P,M=h(v,x),S=(0,g.useDispatch)(),D=()=>{l.Z.setObject(o.FL,d.Ok.Suggestions),S((0,r.g_)(!0))},T=()=>{const R=(0,c.h4)().getCurrent()?.getPanelById(v.panelId);R&&S((0,p.Kc)({panel:R,pluginId:"table"}))};return n.createElement("div",{className:C.wrapper},n.createElement("div",{className:C.message},M),E.app===s.zj.PanelEditor&&x.hasData&&n.createElement("div",{className:C.actions},n.createElement(f.x,{icon:"table",onClick:T},"Switch to table"),n.createElement(f.x,{icon:"chart-line",onClick:D},"Open visualization suggestions")))}function h({data:v,fieldConfig:C,message:E,needsNumberField:P,needsTimeField:x,needsStringField:M},S){return E||(!v.series||v.series.length===0||v.series.length===1&&v.series[0].length===0?C?.defaults.noValue??"No data":M&&!S.hasStringField?"Data is missing a string field":P&&!S.hasNumberField?"Data is missing a number field":x&&!S.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const a=v=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,t.css)({textAlign:"center",color:v.colors.text.secondary,fontSize:v.typography.size.lg,width:"100%"}),actions:(0,t.css)({marginTop:v.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:v.spacing(1),rowGap:v.spacing(1),width:"100%",maxWidth:"600px"})})},35974:(G,O,e)=>{"use strict";e.d(O,{F:()=>f,X:()=>o});var t=e(68404),n=e(48513),u=e(24699),s=e(2323),i=e(81168);class m extends t.PureComponent{constructor(r){super(r)}render(){const r={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:r},t.createElement(s.b,{severity:i.AppNotificationSeverity.Error,...this.props}))}}function f(l,r){const d=class extends t.PureComponent{render(){const p=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(m,{title:`Error loading: ${l.id}`,text:p})}},c=new n.c(d);return c.meta=l,c.loadError=!0,c}function o(l,r){const d=class extends t.PureComponent{render(){return t.createElement(m,{title:`Panel plugin not found: ${l}`})}},c=new n.c(r?()=>null:d);return c.meta={id:l,name:l,sort:100,type:u.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},c}},98141:(G,O,e)=>{"use strict";e.d(O,{$:()=>c});var t=e(68404),n=e(99919),u=e(36998),s=e(20231),i=e(2118),m=e(69934),f=e(29516),o=e(78758),l=e(77582),r=e(38490);const d={defaults:{},overrides:[]};function c(p){const{pluginId:y,data:h,timeZone:a=(0,n.Z)(),options:v={},width:C,height:E,title:P,onOptionsChange:x=()=>{},onChangeTimeRange:M=()=>{},onFieldConfigChange:S=()=>{},fieldConfig:D=d}=p,T=(0,f.l4)(),R=(0,m.J)(),L=(0,t.useMemo)(()=>R.replace.bind(R),[R]),[w,A]=(0,t.useState)((0,r.q1)(y)),[N,W]=(0,t.useState)(),I=g(w,v,D),F=(0,u.Cc)(w,I?.fieldConfig,h,a,T,L);if((0,t.useEffect)(()=>{w&&w.hasPluginId(y)||(0,r.Ub)(y).then(b=>A(b)).catch(b=>{W(b.message)})},[y,w]),N)return t.createElement("div",null,"Failed to load plugin: ",N);if(!w||!w.hasPluginId(y))return t.createElement("div",null,"Loading plugin panel...");if(!w.panel)return t.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!F)return t.createElement("div",null,"No panel data");const V=w.panel;return t.createElement(o.z4,{dependencies:[w,h]},t.createElement(s.b,{meta:w.meta},t.createElement(V,{id:1,data:F,title:P,timeRange:F.timeRange,timeZone:a,options:I.options,fieldConfig:D,transparent:!1,width:C,height:E,renderCounter:0,replaceVariables:b=>b,onOptionsChange:x,onFieldConfigChange:S,onChangeTimeRange:M,eventBus:l.h$})))}function g(p,y,h){return(0,t.useMemo)(()=>{if(p)return(0,i.d4)({plugin:p,currentOptions:y,currentFieldConfig:h,isAfterPluginChange:!1})},[p,h,y])}},64703:(G,O,e)=>{"use strict";e.d(O,{Bq:()=>R,PR:()=>C,PW:()=>x});var t=e(82897),n=e.n(t),u=e(89029),s=e(28151),i=e(89890),m=e(14582),f=e(83383),o=e(8928),l=e(27677),r=e(99227),d=e(69934),c=e(47694),g=e(19349),p=e(69155);const y=[{value:`${u.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.L.BuiltIn},{value:`${u.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.L.BuiltIn},{value:`${u.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.L.BuiltIn}],h=[{value:`${u.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.L.Series}],a=[{value:`${u.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.L.Value},{value:`${u.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.L.Value},{value:`${u.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.L.Value}],v=L=>L.includes(".")||L.trim().includes(" ")?`["${L}"]`:`.${L}`,C=()=>[...(0,d.J)().getVariables().map(L=>({value:L.name,label:L.name,origin:s.L.Template})),{value:`${u.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.L.Template},...y],E=L=>{const w=[];for(const N of L)for(const W of N.fields)if(W.labels)for(const I of Object.keys(W.labels))w.push(I);const A=(0,t.chain)(w).flatten().uniq().value();return[{value:`${u.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.L.Field},...A.map(N=>({value:`__field.labels${v(N)}`,label:`labels.${N}`,documentation:`${N} label value`,origin:s.L.Field}))]},P=L=>{let w,A;const N=[],W={};if(L.length!==1)return[];const I=L[0];for(const F of I.fields){const V=(0,i.C)(F,I,L);W[V]||(N.push({value:`__data.fields${v(V)}`,label:`${V}`,documentation:`Formatted value for ${V} on the same row`,origin:s.L.Fields}),W[V]=!0,!w&&F.type===m.fS.number&&(w={...F,name:V}),!A&&F.config.displayName&&F.config.displayName!==F.name&&(A={...F,name:V}))}return N.length&&N.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.L.Fields}),w&&(N.push({value:`__data.fields${v(w.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.L.Fields}),N.push({value:`__data.fields${v(w.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.L.Fields})),A&&N.push({value:`__data.fields${v(A.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.L.Fields}),N},x=(L,w)=>{const A={value:`${u.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.L.Value};return w===s.o.Values?[...h,...E(L),...a,A,...P(L),...C()]:[...h,...E(L),...P(L),...C()]},M=L=>{const w=E(L),A={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...h,...w,...a,A,...C()]};class S{constructor(){this.getDataLinkUIModel=(w,A,N)=>{let W=w.url;w.onBuildUrl&&(W=w.onBuildUrl({origin:N,replaceVariables:A}));const I={href:f.u.assureBaseUrl(W.replace(/\n/g,"")),title:w.title??"",target:w.targetBlank?"_blank":void 0,origin:N};return A&&(I.href=A(I.href),I.title=A(w.title)),w.onClick&&(I.onClick=F=>{w.onClick({origin:N,replaceVariables:A,e:F})}),I.href=(0,c.iE)().disableSanitizeHtml?I.href:o.QX.sanitizeUrl(I.href),I}}getLinkUrl(w){let A=f.u.assureBaseUrl((0,d.J)().replace(w.url||"")),N={};if(w.keepTime){const W=(0,g.$t)().timeRangeForUrl();N.from=W.from,N.to=W.to}return w.includeVars&&(N={...N,...(0,p.c)()}),A=l.Cj.appendQueryToUrl(A,l.Cj.toUrlParams(N)),(0,c.iE)().disableSanitizeHtml?A:o.QX.sanitizeUrl(A)}getAnchorInfo(w){const A=(0,d.J)(),N={};return N.href=this.getLinkUrl(w),N.title=A.replace(w.title||""),N.tooltip=A.replace(w.tooltip||""),N}getPanelLinkAnchorInfo(w,A){(0,r.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const N=(W,I,F)=>(0,d.J)().replace(W,{...A,...I},F);return this.getDataLinkUIModel(w,N,{})}}let D;function T(L){D=L}function R(){return D||(D=new S),D}},32294:(G,O,e)=>{"use strict";e.d(O,{JI:()=>f,Kc:()=>l,ih:()=>r,qj:()=>o});var t=e(2118),n=e(86648),u=e(35974),s=e(85805),i=e(45984),m=e(46732);function f(c){return async(g,p)=>{if(c.libraryPanel?.uid&&!("model"in c.libraryPanel)){g(d(c));return}let y=c.type,h=p().plugins.panels[y];if(!h)try{h=await g((0,s.Ro)(y))}catch{h=(0,u.X)(y,y==="row")}c.plugin||c.pluginLoaded(h),g((0,m.bc)({key:c.key,plugin:h}))}}function o(c){return g=>{g((0,m.WJ)({key:c}))}}function l({panel:c,pluginId:g,options:p,fieldConfig:y}){return async(h,a)=>{if(c.type===g&&!p&&!y)return;let C=a().plugins.panels[g];if(C||(C=await h((0,s.Ro)(g))),c.type!==g&&c.changePlugin(C),p||y){const E=(0,t.d4)({plugin:C,currentOptions:p||c.options,currentFieldConfig:y||c.fieldConfig,isAfterPluginChange:!1});c.options=E.options,c.fieldConfig=E.fieldConfig,c.configRev++}c.generateNewKey(),h((0,m.bc)({key:c.key,plugin:C}))}}function r(c,g){return async(p,y)=>{const h=g.model.type,a=c.type;if(c.restoreModel({...g.model,gridPos:c.gridPos,id:c.id,libraryPanel:g}),c.getQueryRunner().clearLastResult(),a!==h){let C=y().plugins.panels[h];C||(C=await p((0,s.Ro)(h))),c.pluginLoaded(C),c.generateNewKey(),await p((0,m.bc)({key:c.key,plugin:C}))}else{const v=c.key;c.generateNewKey(),p((0,m.mr)({oldKey:v,newKey:c.key}))}c.configRev=0,c.hasSavedPanelEditChange=!0,c.refresh(),c.events.publish(i.pO),c.events.publish(i.Wj)}}function d(c){return async g=>{const p=c.libraryPanel.uid;try{const y=await(0,n.Mh)(p,!0);c.initLibraryPanel(y),g(f(c))}catch(y){console.log("ERROR: ",y),g((0,m.bc)({key:c.key,plugin:(0,u.X)("Unable to load library panel: "+p,!1)}))}}}},46732:(G,O,e)=>{"use strict";e.d(O,{Vl:()=>l,WJ:()=>o,ZP:()=>d,bc:()=>s,mr:()=>f,o8:()=>i,pC:()=>m});var t=e(32557);const n={},u=(0,t.oM)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(c,g)=>{c[g.payload.key]={plugin:g.payload.plugin}},changePanelKey:(c,g)=>{c[g.payload.newKey]=c[g.payload.oldKey],delete c[g.payload.oldKey]},removePanel:(c,g)=>{delete c[g.payload.key]},removeAllPanels:c=>{Object.keys(c).forEach(g=>delete c[g])},setPanelInstanceState:(c,g)=>{c[g.payload.key].instanceState=g.payload.value},setPanelAngularComponent:(c,g)=>{const p=c[g.payload.key];p.angularComponent=g.payload.angularComponent}}}),{panelModelAndPluginReady:s,setPanelAngularComponent:i,setPanelInstanceState:m,changePanelKey:f,removePanel:o,removeAllPanels:l}=u.actions,d={panels:u.reducer}},10079:(G,O,e)=>{"use strict";e.d(O,{r0:()=>r});var t=e(82897),n=e.n(t),u=e(83383),s=e(27677),i=e(33180),m=e(57388),f=e(6129);const o={kiosk:!0,autofitpanels:!0,orgId:!0};class l{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this)}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const g=this.urls[this.index],p=m.E1.getSearchObject(),y=(0,t.pickBy)(p,(a,v)=>o[v]),h=u.u.stripBaseFromUrl(g);this.index++,this.validPlaylistUrl=h,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),m.E1.push(h+"?"+s.Cj.toUrlParams(y))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(c){c.pathname!==this.validPlaylistUrl&&this.stop()}async start(c){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=m.E1.getHistory().listen(this.locationUpdated);const g=[];let p=await(0,f.A5)(c);if(!p.items?.length)return;this.interval=i.intervalToMs(p.interval);const y=await(0,f.jc)(p.items);for(const h of y)if(h.dashboards)for(const a of h.dashboards)g.push(a.url);g.length&&(this.urls=g,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),m.E1.getSearchObject().kiosk&&m.E1.partial({kiosk:null}))}}const r=new l},6129:(G,O,e)=>{"use strict";e.d(O,{A5:()=>p,CE:()=>c,Ds:()=>C,Dv:()=>y,cg:()=>d,d5:()=>v,jc:()=>a,l8:()=>g});var t=e(3363),n=e(50235),u=e(47214),s=e(93003),i=e(659),m=e(60499),f=e(83977),o=e(7832),l=e(3153),r=e(64823);async function d(E){await h(()=>(0,u.i)().post("/api/playlists",E))}async function c(E,P){await h(()=>(0,u.i)().put(`/api/playlists/${E}`,P))}async function g(E){await h(()=>(0,u.i)().delete(`/api/playlists/${E}`),"Playlist deleted")}async function p(E){const P=await(0,u.i)().get(`/api/playlists/${E}`);if(P.items){for(const x of P.items)if(x.type==="dashboard_by_id"){x.type="dashboard_by_uid";const M=await(0,u.i)().get(`/api/dashboards/ids/${x.value}`);M.length&&(x.value=M[0])}}return P}async function y(){return(0,u.i)().get("/api/playlists/")}async function h(E,P="Playlist saved"){try{await E(),(0,l.WI)((0,i.$l)((0,m.AT)(P)))}catch(x){x instanceof Error&&(0,l.WI)((0,i.$l)((0,m.t_)("Unable to save playlist",x)))}}async function a(E){let P=0;if(!E?.length)return[];const x=[];for(const D of E){const T={query:"*",kind:["dashboard"],limit:1e3};switch(D.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":T.uid=[D.value];break;case"dashboard_by_tag":T.tags=[D.value];break}x.push({refId:`${P++}`,queryType:o.hR.Search,search:T})}if(!s.v.featureToggles.panelTitleSearch){const D=(0,r.getGrafanaSearcher)(),T=[];for(let R=0;R<x.length;R++){const L=(await D.search(x[R].search)).view;T.push({...E[R],dashboards:L.map(w=>({...w}))})}return T}const M=await(0,f.e)(),S=await(0,t.n)(M.query({targets:x}));if(S.data.length!==E.length)throw new Error("unexpected result size");return E.map((D,T)=>{const R=new n.U(S.data[T]);return{...D,dashboards:R.map(L=>({...L}))}})}function v(){return{items:[],interval:"5m",name:"",uid:""}}function C(E,P){return P?.length?(P=P.toLowerCase(),E.filter(x=>x.name.toLowerCase().includes(P))):E}},73354:(G,O,e)=>{"use strict";e.d(O,{$F:()=>f,E1:()=>c,GP:()=>p,GV:()=>m,P6:()=>y,Tk:()=>g,jL:()=>o});var t=e(41959),n=e(47214),u=e(95156),s=e(11212),i=e(59210);async function m(a){const v=await l(a),C=Boolean(v),[E,P,x]=await Promise.all([c(),r(a,C),d(a)]),M=E.find(D=>D.id===a),S=M?.dependencies||v?.json?.dependencies;return{grafanaDependency:S?.grafanaDependency??S?.grafanaVersion??"",pluginDependencies:S?.plugins||[],links:M?.info.links||v?.json?.info.links||[],readme:x||v?.readme,versions:P}}async function f(){const{items:a}=await(0,n.i)().get(`${s.tB}/plugins`);return a.filter(i.wB)}async function o(){try{return await(0,n.i)().get(`${s.O2}/errors`)}catch{return[]}}async function l(a){try{return await(0,n.i)().get(`${s.tB}/plugins/${a}`,{})}catch(v){(0,n.kW)(v)&&(v.isHandled=!0);return}}async function r(a,v){try{return v?((await(0,n.i)().get(`${s.tB}/plugins/${a}/versions`)).items||[]).map(E=>({version:E.version,createdAt:E.createdAt,isCompatible:E.isCompatible,grafanaDependency:E.grafanaDependency})):[]}catch(C){return(0,n.kW)(C)&&(C.isHandled=!0),[]}}async function d(a){try{const v=await(0,n.i)().get(`${s.O2}/${a}/markdown/README`);return v?(0,t.a)(v):""}catch(v){return(0,n.kW)(v)&&(v.isHandled=!0),""}}async function c(){return(await(0,n.i)().get(`${s.O2}`,(0,u.y)({embedded:0}))).filter(i.EP)}async function g(a){return await(0,n.i)().post(`${s.O2}/${a}/install`)}async function p(a){return await(0,n.i)().post(`${s.O2}/${a}/uninstall`)}async function y(a,v){return(await(0,n.i)().datasourceRequest({url:`/api/plugins/${a}/settings`,method:"POST",data:v}))?.data}const h={getRemotePlugins:f,getInstalledPlugins:c,installPlugin:g,uninstallPlugin:p}},11212:(G,O,e)=>{"use strict";e.d(O,{O2:()=>t,tB:()=>n,uJ:()=>u});const t="/api/plugins",n="/api/gnet",u="plugins"},59210:(G,O,e)=>{"use strict";e.d(O,{AA:()=>h,EP:()=>M,HT:()=>x,Nh:()=>y,RU:()=>E,Uj:()=>p,XB:()=>C,ZG:()=>c,fG:()=>P,uR:()=>l,wB:()=>S});var t=e(24699),n=e(85052),u=e(93003),s=e(14876),i=e(77582),m=e(29930),f=e(81168),o=e(84532);function l(L=[],w=[],A){const N=[],W=a(A);return L.forEach(I=>{const F=w.find(b=>b.slug===I.id),V=W[I.id];F||N.push(r(I,void 0,V))}),w.forEach(I=>{const F=L.find(b=>b.id===I.slug),V=W[I.slug];N.push(r(F,I,V))}),N}function r(L,w,A){return!L&&w?d(w,A):L&&!w?c(L,A):g(L,w,A)}function d(L,w){const{name:A,slug:N,description:W,version:I,orgName:F,popularity:V,downloads:b,typeCode:X,updatedAt:k,createdAt:H,status:Y}=L,ee=!!w||T(X);return{description:W,downloads:b,id:N,info:{logos:{small:`https://grafana.com/api/plugins/${N}/versions/${I}/logos/small`,large:`https://grafana.com/api/plugins/${N}/versions/${I}/logos/large`}},name:A,orgName:F,popularity:V,publishedAt:H,signature:v({remote:L,error:w}),updatedAt:k,hasUpdate:!1,isPublished:!0,isInstalled:ee,isDisabled:ee,isCore:L.internal,isDev:!1,isEnterprise:Y==="enterprise",type:X,error:w?.errorCode}}function c(L,w){const{name:A,info:{description:N,version:W,logos:I,updated:F,author:V},id:b,dev:X,type:k,signature:H,signatureOrg:Y,signatureType:ee,hasUpdate:ue,accessControl:q}=L,ge=!!w||T(k);return{description:N,downloads:0,id:b,info:{logos:I},name:A,orgName:V.name,popularity:0,publishedAt:"",signature:v({local:L,error:w}),signatureOrg:Y,signatureType:ee,updatedAt:F,installedVersion:W,hasUpdate:ue,isInstalled:!0,isDisabled:ge,isCore:H==="internal",isPublished:!1,isDev:Boolean(X),isEnterprise:!1,type:k,error:w?.errorCode,accessControl:q}}function g(L,w,A){const N=L?.info.version,W=w?.slug||L?.id||"",I=L?.type||w?.typeCode,F=!!A||T(I);let V={small:`/public/img/icn-${I}.svg`,large:`/public/img/icn-${I}.svg`};return w?V={small:`https://grafana.com/api/plugins/${W}/versions/${w.version}/logos/small`,large:`https://grafana.com/api/plugins/${W}/versions/${w.version}/logos/large`}:L&&L.info.logos&&(V=L.info.logos),{description:L?.info.description||w?.description||"",downloads:w?.downloads||0,hasUpdate:L?.hasUpdate||!1,id:W,info:{logos:V},isCore:Boolean(w?.internal||L?.signature===t.Xy.internal),isDev:Boolean(L?.dev),isEnterprise:w?.status==="enterprise",isInstalled:Boolean(L)||F,isDisabled:F,isPublished:!0,name:w?.name||L?.name||"",orgName:w?.orgName||L?.info.author.name||"",popularity:w?.popularity||0,publishedAt:w?.createdAt||"",type:I,signature:v({local:L,remote:w,error:A}),signatureOrg:L?.signatureOrg||w?.versionSignedByOrgName,signatureType:L?.signatureType||w?.versionSignatureType||w?.signatureType||void 0,updatedAt:w?.updatedAt||L?.info.updated||"",installedVersion:N,error:A?.errorCode,accessControl:L?.accessControl}}const p=L=>`${u.v.pluginCatalogURL}${L}`;var y=(L=>(L.nameAsc="nameAsc",L.nameDesc="nameDesc",L.updated="updated",L.published="published",L.downloads="downloads",L))(y||{});const h=(L,w)=>{const A={nameAsc:(N,W)=>N.name.localeCompare(W.name),nameDesc:(N,W)=>W.name.localeCompare(N.name),updated:(N,W)=>(0,n.J)(W.updatedAt).valueOf()-(0,n.J)(N.updatedAt).valueOf(),published:(N,W)=>(0,n.J)(W.publishedAt).valueOf()-(0,n.J)(N.publishedAt).valueOf(),downloads:(N,W)=>W.downloads-N.downloads};return A[w]?L.sort(A[w]):L};function a(L=[]){return L.reduce((w,A)=>(w[A.pluginId]=A,w),{})}function v(L){const{error:w,local:A,remote:N}=L;if(w)switch(w.errorCode){case t.w2.invalidSignature:return t.Xy.invalid;case t.w2.missingSignature:return t.Xy.missing;case t.w2.modifiedSignature:return t.Xy.modified}return A?.signature?A.signature:N?.signatureType||N?.versionSignatureType?t.Xy.valid:t.Xy.missing}const C=()=>(0,m.i)().get("/api/frontend/settings").then(L=>{u.v.panels=L.panels});function E(L){if(!L)return;const[w]=L.filter(A=>Boolean(A.isCompatible));return w}const P=()=>u.v.pluginAdminEnabled,x=(L,w,A)=>{const N=u.v.pluginAdminExternalManageEnabled,W=i.Vt.hasAccess(f.AccessControlAction.PluginsInstall,(0,o.bO)()),I=Boolean(A);return L.type===t.zV.renderer||L.type===t.zV.secretsmanager||L.isEnterprise&&!(0,s.v)("enterprise.plugins")||L.isDev||!W&&!N||!L.isPublished||!I||!w},M=L=>D(L.id),S=L=>D(L.slug);function D(L){const{pluginCatalogHiddenPlugins:w}=u.v;return!w.includes(L)}function T(L){return L===t.zV.secretsmanager&&!u.v.secretsManagerPluginEnabled}function R(L){return Boolean(L?.signature==="internal")}},84532:(G,O,e)=>{"use strict";e.d(O,{Gg:()=>m,RN:()=>i,bO:()=>s});var t=e(47694),n=e(82002),u=e(81168);function s(){return t.vc.bootData.user.isGrafanaAdmin}function i(){return n.Vt.hasRole("Admin")}function m(){return n.Vt.hasPermission(u.AccessControlAction.DataSourcesCreate)&&n.Vt.hasPermission(u.AccessControlAction.DataSourcesWrite)}},85805:(G,O,e)=>{"use strict";e.d(O,{DD:()=>d,LP:()=>y,N9:()=>c,Qd:()=>o,Ro:()=>h,Tz:()=>g,bp:()=>l,m3:()=>p,tQ:()=>r});var t=e(32557),n=e(47214),u=e(38490),s=e(49168),i=e(73354),m=e(11212),f=e(59210);const o=(0,t.hg)(`${m.uJ}/fetchAll`,async(a,v)=>{try{const{dispatch:C}=v,[E,P,{payload:x}]=await Promise.all([(0,i.E1)(),(0,i.jL)(),C(r())]);return(0,f.uR)(E,x,P)}catch{return v.rejectWithValue("Unknown error.")}}),l=(0,t.hg)(`${m.uJ}/fetchAllLocal`,async(a,v)=>{try{return(await(0,i.E1)()).map(E=>(0,f.ZG)(E))}catch{return v.rejectWithValue("Unknown error.")}}),r=(0,t.hg)(`${m.uJ}/fetchRemotePlugins`,async(a,v)=>{try{return await(0,i.$F)()}catch(C){return(0,n.kW)(C)&&(C.isHandled=!0),v.rejectWithValue([])}}),d=(0,t.hg)(`${m.uJ}/fetchDetails`,async(a,v)=>{try{const C=await(0,i.GV)(a);return{id:a,changes:{details:C}}}catch{return v.rejectWithValue("Unknown error.")}}),c=(0,t.hg)(`${m.uJ}/install`,async({id:a,version:v,isUpdating:C=!1},E)=>{const P=C?{isInstalled:!0,installedVersion:v,hasUpdate:!1}:{isInstalled:!0,installedVersion:v};try{return await(0,i.Tk)(a),await(0,f.XB)(),C&&(0,s.Hl)(a),{id:a,changes:P}}catch(x){return console.error(x),E.rejectWithValue("Unknown error.")}}),g=(0,t.hg)(`${m.uJ}/uninstall`,async(a,v)=>{try{return await(0,i.GP)(a),await(0,f.XB)(),(0,s.Hl)(a),{id:a,changes:{isInstalled:!1,installedVersion:void 0}}}catch(C){return console.error(C),v.rejectWithValue("Unknown error.")}}),p=(0,t.hg)(`${m.uJ}/loadPluginDashboards`,async(a,v)=>{const P=`api/plugins/${v.getState().dataSources.dataSource.type}/dashboards`;return(0,n.i)().get(P)}),y=(0,t.PH)(`${m.uJ}/panelPluginLoaded`),h=a=>async(v,C)=>{let E=C().plugins.panels[a];return E||(E=await(0,u.Ub)(a),C().plugins.panels[a]||v(y(E))),E}},66552:(G,O,e)=>{"use strict";e.d(O,{CD:()=>i,I6:()=>g,UC:()=>c});var t=e(32557),n=e(11212),u=e(48996),s=e(85805);const i=(0,t.HF)(),m=p=>new RegExp(`${n.uJ}/(.*)/pending`).test(p.type),f=p=>new RegExp(`${n.uJ}/(.*)/fulfilled`).test(p.type),o=p=>new RegExp(`${n.uJ}/(.*)/rejected`).test(p.type),l=p=>{const y=p.lastIndexOf("/");return p.substring(0,y)},r={items:i.getInitialState(),requests:{},settings:{displayMode:u.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},d=(0,t.oM)({name:"plugins",initialState:r,reducers:{setDisplayMode(p,y){p.settings.displayMode=y.payload}},extraReducers:p=>p.addCase(s.Qd.fulfilled,(y,h)=>{i.upsertMany(y.items,h.payload)}).addCase(s.bp.fulfilled,(y,h)=>{i.upsertMany(y.items,h.payload)}).addCase(s.DD.fulfilled,(y,h)=>{i.updateOne(y.items,h.payload)}).addCase(s.N9.fulfilled,(y,h)=>{i.updateOne(y.items,h.payload)}).addCase(s.Tz.fulfilled,(y,h)=>{i.updateOne(y.items,h.payload)}).addCase(s.LP,(y,h)=>{y.panels[h.payload.meta.id]=h.payload}).addCase(s.m3.pending,(y,h)=>{y.isLoadingPluginDashboards=!0,y.dashboards=[]}).addCase(s.m3.fulfilled,(y,h)=>{y.isLoadingPluginDashboards=!1,y.dashboards=h.payload}).addMatcher(m,(y,h)=>{y.requests[l(h.type)]={status:u.eE.Pending}}).addMatcher(f,(y,h)=>{y.requests[l(h.type)]={status:u.eE.Fulfilled}}).addMatcher(o,(y,h)=>{y.requests[l(h.type)]={status:u.eE.Rejected,error:h.payload}})}),{setDisplayMode:c}=d.actions,g=d.reducer},48996:(G,O,e)=>{"use strict";e.d(O,{Co:()=>u,cd:()=>n,eE:()=>f,lL:()=>t,tu:()=>m,vF:()=>s,xc:()=>i});var t=(o=>(o.Grid="grid",o.List="list",o))(t||{}),n=(o=>(o.Home="plugins-home",o.Browse="plugins-browse",o.Details="plugins-details",o))(n||{}),u=(o=>(o.app="apps",o.datasource="database",o.panel="credit-card",o.renderer="capture",o.secretsmanager="key-skeleton-alt",o))(u||{}),s=(o=>(o.INSTALL="INSTALL",o.UNINSTALL="UNINSTALL",o.UPDATE="UPDATE",o.REINSTALL="REINSTALL",o))(s||{}),i=(o=>(o.OVERVIEW="Overview",o.VERSIONS="Version history",o.CONFIG="Config",o.DASHBOARDS="Dashboards",o.USAGE="Usage",o))(i||{}),m=(o=>(o.OVERVIEW="overview",o.VERSIONS="version-history",o.CONFIG="config",o.DASHBOARDS="dashboards",o.USAGE="usage",o))(m||{}),f=(o=>(o.Pending="Pending",o.Fulfilled="Fulfilled",o.Rejected="Rejected",o))(f||{})},91162:(G,O,e)=>{"use strict";e.d(O,{ND:()=>c,ak:()=>p});var t=e(7238),n=e(25318),u=e(69934),s=e(60667),i=e(47214),m=e(77213),f=e(9800),o=e(97063),l=e(47694),r=e(47471),d=e(92885);class c{constructor(h=(0,u.J)()){this.templateSrv=h,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(h,a){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=h,this.defaultName=a;for(const v of Object.values(h))v.uid||(v.uid=v.name),this.settingsMapByUid[v.uid]=v,this.settingsMapById[v.id]=v;this.datasources[f.hr.type]=r.mV,this.datasources[r.Yq]=r.mV,this.settingsMapByUid[f.hr.uid]=r.bE,this.settingsMapByUid[r.Yq]=r.bE}getDataSourceSettingsByUid(h){return this.settingsMapByUid[h]}getInstanceSettings(h,a){const v=typeof h=="string";let C=v?h:h?.uid;if(C==="default"||C===null||C===void 0){if(!v&&h){const E=h?.type;if(E===f.hr.type)return r.mV.instanceSettings;E&&console.log("FIND Default instance for datasource type?",h)}return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName]}if(C[0]==="$"){const E=this.templateSrv.replace(C,a,g);let P;return E==="default"?P=this.settingsMapByName[this.defaultName]:P=this.settingsMapByUid[E]??this.settingsMapByName[E],P?{...P,isDefault:!1,name:C,uid:C,rawRef:{type:P.type,uid:P.uid}}:void 0}return this.settingsMapByUid[C]??this.settingsMapByName[C]}get(h,a){let v=typeof h=="string"?h:h?.uid;if(!v)return this.get(this.defaultName);const C=this.settingsMapByName[v];return C&&(v=C.uid),this.datasources[v]?Promise.resolve(this.datasources[v]):(v=this.templateSrv.replace(v,a,g),v==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[v]?Promise.resolve(this.datasources[v]):this.loadDatasource(v))}async loadDatasource(h){if(this.datasources[h])return Promise.resolve(this.datasources[h]);const a=this.settingsMapByUid[h]??this.settingsMapByName[h]??this.settingsMapById[h];if(!a)return Promise.reject({message:`Datasource ${h} was not found`});try{const v=await(0,d.nL)(a.meta);if(this.datasources[h])return this.datasources[h];const C=v.DataSourceClass.length!==1;let E;if(C?E=(0,s.V)().instantiate(v.DataSourceClass,{instanceSettings:a}):E=new v.DataSourceClass(a),E.components=v.components,!(E instanceof t.MF)){const P=E;P.name=a.name,P.id=a.id,P.type=a.type,P.meta=a.meta,P.uid=a.uid,E.getRef=t.MF.prototype.getRef}return this.datasources[h]=E,this.datasources[E.uid]=E,E}catch(v){return v instanceof Error&&o.Z.emit(n.SI.alertError,[a.name+" plugin failed",v.toString()]),Promise.reject({message:`Datasource: ${h} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(h={}){const a=Object.values(this.settingsMapByName).filter(C=>!(C.meta.id==="grafana"||C.meta.id==="mixed"||C.meta.id==="dashboard"||h.metrics&&!C.meta.metrics||h.tracing&&!C.meta.tracing||h.logs&&C.meta.category!=="logging"&&!C.meta.logs||h.annotations&&!C.meta.annotations||h.alerting&&!C.meta.alerting||h.pluginId&&C.meta.id!==h.pluginId||h.filter&&!h.filter(C)||h.type&&(Array.isArray(h.type)?!h.type.includes(C.type):h.type!==C.type)||!h.all&&C.meta.metrics!==!0&&C.meta.annotations!==!0&&C.meta.tracing!==!0&&C.meta.logs!==!0&&C.meta.alerting!==!0));if(h.variables)for(const C of this.templateSrv.getVariables()){if(C.type!=="datasource")continue;let E=C.current.value==="default"?this.defaultName:C.current.value;Array.isArray(E)&&E.length===1&&(E=E[0]);const P=!Array.isArray(E)&&this.settingsMapByName[E];if(P){const x=`\${${C.name}}`;a.push({...P,name:x,uid:x})}}const v=a.sort((C,E)=>C.name.toLowerCase()>E.name.toLowerCase()?1:C.name.toLowerCase()<E.name.toLowerCase()?-1:0);if(!h.pluginId&&!h.alerting){if(h.mixed){const C=this.getInstanceSettings("-- Mixed --");C&&a.push(C)}if(h.dashboard){const C=this.getInstanceSettings("-- Dashboard --");C&&a.push(C)}if(!h.tracing){const C=this.getInstanceSettings("-- Grafana --");C&&a.push(C)}}return v}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(h=>({name:h.name,value:h.name,meta:h.meta}))}getMetricSources(h){return this.getList({metrics:!0,variables:!h?.skipVariables}).map(a=>({name:a.name,value:a.name,meta:a.meta}))}async reload(){const h=await(0,i.i)().get("/api/frontend/settings");l.ZP.datasources=h.datasources,l.ZP.defaultDatasource=h.defaultDatasource,this.init(h.datasources,h.defaultDatasource)}}function g(y){return Array.isArray(y)?y[0]:y}const p=()=>(0,m.F)()},38490:(G,O,e)=>{"use strict";e.d(O,{Ub:()=>f,_2:()=>o,q1:()=>l});var t=e(48513),n=e(47694),u=e(35974),s=e(92885);const i={},m={};function f(d){const c=i[d];if(c)return c;const g=n.ZP.panels[d];if(!g)throw new Error(`Plugin ${d} not found`);return i[d]=r(g),i[d]}function o(d){return r(d)}function l(d){return m[d]}function r(d){return(0,s.N$)(d.module,d.info?.version).then(c=>{if(c.plugin)return c.plugin;if(c.PanelCtrl){const g=new t.c(null);return g.angularPanelCtrl=c.PanelCtrl,g}throw new Error("missing export: plugin or PanelCtrl")}).then(c=>(c.meta=d,m[d.id]=c,c)).catch(c=>(console.warn("Error loading panel plugin: "+d.id,c),(0,u.F)(d,c)))}},49168:(G,O,e)=>{"use strict";e.d(O,{Hl:()=>i,Vf:()=>s,hf:()=>m});var t=e(13011);const n={},u=Date.now();function s({path:o,version:l}){n[o]||(n[o]=encodeURI(l))}function i(o){const l=`plugins/${o}/module`;n[l]&&delete n[l],(0,t.Z)(o)}function m(o,l=u){const{address:r}=o,d=f(r);if(!d)return`${r}?_cache=${l}`;const g=n[d]||l;return`${r}?_cache=${g}`}function f(o){const l=/\/public\/(plugins\/.+\/module)\.js/i.exec(o);if(!l)return;const[r,d]=l;if(d)return d}},13011:(G,O,e)=>{"use strict";e.d(O,{Z:()=>s,a:()=>u});var t=e(47214);const n={};function u(i,m){const f=n[i];return f?Promise.resolve(f):(0,t.i)().get(`/api/plugins/${i}/settings`,void 0,void 0,m).then(o=>(n[i]=o,o)).catch(o=>Promise.reject(new Error("Unknown Plugin")))}const s=i=>i?delete n[i]:Object.keys(n).forEach(m=>delete n[m])},92885:(G,O,e)=>{"use strict";e.d(O,{kY:()=>ga,Av:()=>km,nL:()=>Hc,N$:()=>ni});var t={};e.r(t),e.d(t,{plugin:()=>Oe});var n={};e.r(n),e.d(n,{plugin:()=>Ha});var u={};e.r(u),e.d(u,{plugin:()=>ts});var s={};e.r(s),e.d(s,{plugin:()=>wo});var i={};e.r(i),e.d(i,{plugin:()=>mo});var m={};e.r(m),e.d(m,{plugin:()=>Bd});var f={};e.r(f),e.d(f,{plugin:()=>Kd});var o={};e.r(o),e.d(o,{plugin:()=>Vs});var l={};e.r(l),e.d(l,{plugin:()=>Rl});var r={};e.r(r),e.d(r,{plugin:()=>Ci});var d={};e.r(d),e.d(d,{plugin:()=>ou});var c={};e.r(c),e.d(c,{plugin:()=>uu});var g={};e.r(g),e.d(g,{plugin:()=>Go});var p={};e.r(p),e.d(p,{plugin:()=>jo});var y={};e.r(y),e.d(y,{plugin:()=>hu});var h={};e.r(h),e.d(h,{plugin:()=>Uu});var a={};e.r(a),e.d(a,{plugin:()=>Vu});var v={};e.r(v),e.d(v,{plugin:()=>ku});var C={};e.r(C),e.d(C,{plugin:()=>hc});var E={};e.r(E),e.d(E,{plugin:()=>om});var P={};e.r(P),e.d(P,{plugin:()=>pm});var x={};e.r(x),e.d(x,{plugin:()=>Pm});var M={};e.r(M),e.d(M,{plugin:()=>Dm});var S={};e.r(S),e.d(S,{plugin:()=>Ef});var D=e(52423),T=e(78966),R=e(47700),L=e(21256),w=e.n(L),A=e(82897),N=e.n(A),W=e(36365),I=e.n(W),F=e(57706),V=e.n(F),b=e(68404),X=e(97394),k=e(36635),H=e(16144),Y=e(31259),ee=e(88232),ue=e(70772),q=e(53594),ge=e(40246),De=e(56747),fe=e(48513),me=e(7238),ce=e(40400),ie=e(24034),re=e(21053),Ee=e(69945),J=e(51054),te=e(84666),ne=e(37219),j=e(47694),be=e(77582),Le=e(29930),Qe=e(13019),Ye=e(4050),de=e(40229),Be=e(24816),Ve=e(97724),$e=e(94984),We=e(45849),Ke=e(93003),qe=e(49938),Xe=e(79370),at=e(72004),Ze=e(20194),lt=e(37190),nt=e(46818),_e=e(81168),ut=e(37556),rt=e(29516),je=e(90723),dt=e(52694),oe=e(33950),Se=e(96308),Re=e(53715),ze=e(10505),ve=e(39031);const Te=({alertManagerSourceName:K,group:_,expandAll:se})=>{const[xe,Fe]=(0,b.useState)(se),He=(0,rt.wW)(he),Ge=(0,rt.wW)(Re.r);return(0,b.useEffect)(()=>Fe(se),[se]),b.createElement("div",{className:He.group,"data-testid":"alert-group"},Object.keys(_.labels).length>0?b.createElement(dt.s,{labels:_.labels}):b.createElement("div",{className:He.noGroupingText},"No grouping"),b.createElement("div",{className:He.row},b.createElement(oe.U,{isCollapsed:!xe,onToggle:()=>Fe(!xe)})," ",b.createElement(Se.Z,{group:_})),xe&&b.createElement("div",{className:He.alerts},_.alerts.map((tt,ct)=>{const ht=tt.status.state.toUpperCase(),mt=(0,ut.vT)({start:new Date(tt.startsAt),end:Date.now()});return b.createElement("div",{"data-testid":"alert-group-alert",className:He.alert,key:`${tt.fingerprint}-${ct}`},b.createElement("div",null,b.createElement("span",{className:Ge[tt.status.state]},ht," "),"for ",mt),b.createElement("div",null,b.createElement(dt.s,{labels:tt.labels})),b.createElement("div",{className:He.actionsRow},tt.status.state===ve.Z9.Suppressed&&b.createElement(je.Qj,{href:`${(0,ze.eQ)("/alerting/silences",K)}&silenceIds=${tt.status.silencedBy.join(",")}`,className:He.button,icon:"bell",size:"sm"},"Manage silences"),tt.status.state===ve.Z9.Active&&b.createElement(je.Qj,{href:(0,ze.VN)(K,tt.labels),className:He.button,icon:"bell-slash",size:"sm"},"Silence"),tt.generatorURL&&b.createElement(je.Qj,{className:He.button,href:tt.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},he=K=>({noGroupingText:D.css`
    height: ${K.spacing(4)};
  `,group:D.css`
    background-color: ${K.colors.background.secondary};
    margin: ${K.spacing(.5,1,.5,1)};
    padding: ${K.spacing(1)};
  `,row:D.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${K.spacing(1)};
  `,alerts:D.css`
    margin: ${K.spacing(0,2,0,4)};
  `,alert:D.css`
    padding: ${K.spacing(1,0)};
    & + & {
      border-top: 1px solid ${K.colors.border.medium};
    }
  `,button:D.css`
    & + & {
      margin-left: ${K.spacing(1)};
    }
  `,actionsRow:D.css`
    padding: ${K.spacing(1,0)};
  `}),pe=(K,_)=>(0,b.useMemo)(()=>K.filter(se=>(0,Ze.eD)(se.labels,_)||se.alerts.some(xe=>(0,Ze.eD)(xe.labels,_))),[K,_]),ye=K=>{const _=(0,_e.useDispatch)(),se=Ke.v.unifiedAlertingEnabled,xe=K.options.expandAll,Fe=K.options.alertmanager,Ge=((0,Xe._)(mt=>mt.amAlertGroups)||nt.oq)[Fe||""]?.result||[],tt=K.options.labels?(0,Ze.Zh)(K.options.labels):[],ct=pe(Ge,tt);(0,b.useEffect)(()=>{function mt(){Fe&&_((0,at.mS)(Fe))}mt();const yt=setInterval(mt,lt.iF);return()=>{clearInterval(yt)}},[_,Fe]);const ht=ct.length>0;return b.createElement(qe.$,{autoHeightMax:"100%",autoHeightMin:"100%"},se&&b.createElement("div",null,ht&&ct.map(mt=>b.createElement(Te,{alertManagerSourceName:Fe,key:JSON.stringify(mt.labels),group:mt,expandAll:xe})),!ht&&"No alerts"))},Oe=new fe.c(ye).setPanelOptions(K=>K.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:We.GC,category:["Options"],editor:function(se){const xe=(0,b.useMemo)(We.z3,[]);return b.createElement($e.P,{current:se.value,onChange:Fe=>se.onChange(Fe),dataSources:xe})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var Ne=e(2248),Me=e(64407),Ae=e(79658),we=e(99151),ke=e.n(we),st=e(68183),Et=e(46739),Pt=e(10216),gt=e(50946);async function Ct({query:K,permissionLevel:_}){return(await(0,gt.ZL)(K,_)).map(Fe=>({id:Fe.id,title:Fe.title,url:Fe.url}))}async function Ot({query:K,permissionLevel:_,extraFolders:se}){const xe=await Ct({query:K,permissionLevel:_}),Fe=se??[],He=K?Fe.filter(Ge=>Ge.title?.toLowerCase().includes(K.toLowerCase())):Fe;return xe?He.concat(xe):He}async function Ft({query:K,permissionLevel:_=_e.PermissionLevelString.View,extraFolders:se=[]}){return(await Ot({query:K,permissionLevel:_,extraFolders:se})).map(Fe=>({value:Fe,label:Fe.title}))}function jt(K,_){return K?.find(se=>se.value?.id===_)}async function En(K){if(K!=null)try{const{id:_,title:se}=await(0,gt.EW)(K);return{value:{id:_,title:se},label:se}}catch{console.error(`Could not find folder with id:${K}`)}}const xn={id:void 0,title:"All"},Cn={id:Pt.pW,title:Pt.fy};function bn({onChange:K,extraFolders:_=[],initialFolderId:se,permissionLevel:xe=_e.PermissionLevelString.View}){const[Fe,He]=(0,b.useState)(!1),[Ge,tt]=(0,b.useState)(void 0),[ct,ht]=(0,b.useState)(void 0),mt=(0,b.useCallback)(async $t=>{let Vt=jt($t,se);Vt||(Vt=await En(se)??$t[0],K(Vt.value)),He(!0),ht($t),tt(Vt)},[se,K]),yt=(0,b.useCallback)(async $t=>{const Vt=await Ft({query:$t,permissionLevel:xe,extraFolders:_});return Fe||await mt(Vt),Vt},[xe,_,Fe,mt]),Dt=ke()(yt,300,{leading:!0}),bt=(0,b.useCallback)(({value:$t})=>{const Vt=jt(ct,$t?.id);tt(Vt),K($t)},[ct,K]);return b.createElement("div",{"data-testid":st.wl.components.ReadonlyFolderPicker.container},b.createElement(Et.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:Ge,value:Ge,loadOptions:Dt,onChange:bt}))}var Tn=e(22350),Zn=e(46519),Bn=e(69934),Sn=e(47214),wn=e(66208),$n=e(81697),Xn=e(67162),ba=e(9398),hn=e(40286);function Kn(K){const[_,se]=(0,b.useState)(""),xe=(0,Tn.Z)(async()=>{if(K.options.showOptions!==hn.kx.Current)return;const Ge={state:La(K.options.stateFilter)},tt=(0,ba.h4)().getCurrent()?.getPanelById(K.id);K.options.alertName&&(Ge.query=(0,Bn.J)().replace(K.options.alertName,tt.scopedVars)),K.options.folderId>=0&&(Ge.folderId=K.options.folderId),K.options.dashboardTitle&&(Ge.dashboardQuery=K.options.dashboardTitle),K.options.dashboardAlerts&&(Ge.dashboardId=(0,ba.h4)().getCurrent()?.id),K.options.tags&&(Ge.dashboardTag=K.options.tags);const ct=await(0,Sn.i)().get("/api/alerts",Ge,`alert-list-get-current-alert-state-${K.id}`);let ht=ta(K.options.sortOrder,ct.map(mt=>({...mt,stateModel:Xn.Z.getStateDisplayModel(mt.state),newStateDateAgo:(0,Zn.CQ)(mt.newStateDate).locale("en").fromNow(!0)})));return ht.length>K.options.maxItems&&(ht=ht.slice(0,K.options.maxItems)),se(ht.length===0?"No alerts":""),ht},[K.options.showOptions,K.options.stateFilter.alerting,K.options.stateFilter.execution_error,K.options.stateFilter.no_data,K.options.stateFilter.ok,K.options.stateFilter.paused,K.options.stateFilter.pending,K.options.maxItems,K.options.tags,K.options.dashboardAlerts,K.options.dashboardTitle,K.options.folderId,K.options.alertName,K.options.sortOrder,K.timeRange]),Fe=(0,Tn.Z)(async()=>{if(K.options.showOptions!==hn.kx.RecentChanges)return;const Ge={limit:K.options.maxItems,type:"alert",newState:La(K.options.stateFilter)},tt=(0,ba.h4)().getCurrent();K.options.dashboardAlerts&&(Ge.dashboardId=tt?.id),Ge.from=re.parse(tt?.time.from).unix()*1e3,Ge.to=re.parse(tt?.time.to).unix()*1e3;const ct=await(0,Sn.i)().get("/api/annotations",Ge,`alert-list-get-state-changes-${K.id}`),ht=ta(K.options.sortOrder,ct.map(mt=>({...mt,time:tt?.formatDate(mt.time,"MMM D, YYYY HH:mm:ss"),stateModel:Xn.Z.getStateDisplayModel(mt.newState),info:Xn.Z.getAlertAnnotationInfo(mt)})));return se(ht.length===0?"No alerts in current time range":""),ht},[K.options.showOptions,K.options.maxItems,K.options.stateFilter.alerting,K.options.stateFilter.execution_error,K.options.stateFilter.no_data,K.options.stateFilter.ok,K.options.stateFilter.paused,K.options.stateFilter.pending,K.options.dashboardAlerts,K.options.sortOrder]),He=(0,rt.wW)(oa);return b.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},b.createElement("div",{className:He.container},_&&b.createElement("div",{className:He.noAlertsMessage},_),b.createElement("section",null,b.createElement("ol",{className:He.alertRuleList},K.options.showOptions===hn.kx.Current?!xe.loading&&xe.value&&xe.value.map(Ge=>b.createElement("li",{className:He.alertRuleItem,key:`alert-${Ge.id}`},b.createElement(wn.Z,{href:`${Ge.url}?viewPanel=${Ge.panelId}`,className:He.cardContainer},b.createElement(wn.Z.Heading,null,Ge.name),b.createElement(wn.Z.Figure,{className:(0,D.cx)(He.alertRuleItemIcon,Ge.stateModel.stateClass)},b.createElement($n.J,{name:Ge.stateModel.iconClass,size:"xl",className:He.alertIcon})),b.createElement(wn.Z.Meta,null,b.createElement("div",{className:He.alertRuleItemText},b.createElement("span",{className:Ge.stateModel.stateClass},Ge.stateModel.text),b.createElement("span",{className:He.alertRuleItemTime}," for ",Ge.newStateDateAgo)))))):!Fe.loading&&Fe.value&&Fe.value.map(Ge=>b.createElement("li",{className:He.alertRuleItem,key:`alert-${Ge.id}`},b.createElement(wn.Z,{className:He.cardContainer},b.createElement(wn.Z.Heading,null,Ge.alertName),b.createElement(wn.Z.Figure,{className:(0,D.cx)(He.alertRuleItemIcon,Ge.stateModel.stateClass)},b.createElement($n.J,{name:Ge.stateModel.iconClass,size:"xl"})),b.createElement(wn.Z.Meta,null,b.createElement("span",{className:(0,D.cx)(He.alertRuleItemText,Ge.stateModel.stateClass)},Ge.stateModel.text),b.createElement("span",null,Ge.time),Ge.info&&b.createElement("span",{className:He.alertRuleItemInfo},Ge.info)))))))))}function ta(K,_){if(K===hn.As.Importance)return(0,A.sortBy)(_,xe=>Xn.Z.alertStateSortScore[xe.state||xe.newState]);if(K===hn.As.TimeAsc)return(0,A.sortBy)(_,xe=>new Date(xe.newStateDate||xe.time));if(K===hn.As.TimeDesc)return(0,A.sortBy)(_,xe=>new Date(xe.newStateDate||xe.time)).reverse();const se=(0,A.sortBy)(_,xe=>(xe.name||xe.alertName).toLowerCase());return K===hn.As.AlphaDesc&&se.reverse(),se}function La(K){return Object.entries(K).filter(([_,se])=>se).map(([_,se])=>_)}const oa=K=>({cardContainer:D.css`
    padding: ${K.spacing(.5)} 0 ${K.spacing(.25)} 0;
    line-height: ${K.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:D.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:D.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:D.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${K.colors.background.secondary};
    padding: ${K.spacing(.5)} ${K.spacing(1)};
    border-radius: ${K.shape.borderRadius(2)};
    margin-bottom: ${K.spacing(.5)};
  `,alertRuleItemIcon:D.css`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${K.spacing(4)};
    padding: 0 ${K.spacing(.5)} 0 ${K.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:D.css`
    font-weight: ${K.typography.fontWeightBold};
    font-size: ${K.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:D.css`
    color: ${K.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:D.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:D.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:D.css`
    margin-right: ${K.spacing(.5)};
  `}),ha=K=>{const _={showOptions:K.options.showOptions??K.show??hn.kx.Current,maxItems:K.options.maxItems??K.limit??10,sortOrder:K.options.sortOrder??K.sortOrder??hn.As.AlphaAsc,dashboardAlerts:K.options.dashboardAlerts??K.onlyAlertsOnDashboard??!1,alertName:K.options.alertName??K.nameFilter??"",dashboardTitle:K.options.dashboardTitle??K.dashboardFilter??"",folderId:K.options.folderId??K.folderId,tags:K.options.tags??K.dashboardTags??[],stateFilter:K.options.stateFilter??K.stateFilter?.reduce((xe,Fe)=>({...xe,[Fe]:!0}),{})??{}};return parseFloat(K.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(Fe=>delete K[Fe]),_};var ia=e(46063);function Rt(K,_){return(0,ia.ED)(K.state)===_}function Lt(K,_){const{stateFilter:se}=K;return(0,A.isEmpty)(se)?_:_.filter(xe=>se.firing&&(Rt(xe,ia.bj.Alerting)||Rt(xe,ia.x_.Firing))||se.pending&&(Rt(xe,ia.bj.Pending)||Rt(xe,ia.x_.Pending))||se.noData&&Rt(xe,ia.bj.NoData)||se.normal&&Rt(xe,ia.bj.Normal)||se.error&&Rt(xe,ia.bj.Error)||se.inactive&&Rt(xe,ia.x_.Inactive))}function At(K){return!(K.startsWith("__")&&K.endsWith("__"))}const kt=K=>{const{onChange:_,id:se,defaultValue:xe}=K,Fe=(0,_e.useDispatch)();(0,b.useEffect)(()=>{Fe((0,at.lB)())},[Fe]);const He=(0,Xe._)(mt=>mt.promRules),Ge=(0,b.useMemo)(We.mA,[]),tt=(0,nt.ed)(He),ct=(0,nt.yR)(He),ht=(0,b.useMemo)(()=>{if((0,A.isEmpty)(He))return[];if(!tt)return[];const mt=Ge.flatMap(yt=>He[yt].result??[]).flatMap(yt=>yt.groups).flatMap(yt=>yt.rules.filter(Dt=>Dt.type===ia.pz.Alerting)).flatMap(yt=>yt.alerts??[]).map(yt=>Object.keys(yt.labels??{})).flatMap(yt=>yt.filter(At));return(0,A.uniq)(mt)},[tt,He,Ge]);return b.createElement(Et.NU,{id:se,isLoading:ct,defaultValue:xe,"aria-label":"group by label keys",placeholder:"Group by",prefix:b.createElement($n.J,{name:"tag-alt"}),onChange:mt=>{_(mt.map(yt=>yt.value??""))},options:ht.map(mt=>({label:mt,value:mt}))})};var Zt=e(58252),Qt=e(1821),Jt=e(2323),rn=e(90090),mn=e(11003),Xt=e(82002),fn=e(79662),In=e(24782),Yn=e(64681),Vn=e.n(Yn),_n=e(48563),va=e(84952);const Fa=({alerts:K,options:_})=>{const se=_.groupMode===hn.LM.Custom?!0:_.showInstances,[xe,Fe]=(0,b.useState)(se),He=(0,rt.wW)(Ea),Ge=(0,b.useCallback)(()=>{Fe(yt=>!yt)},[]),tt=(0,b.useMemo)(()=>Lt(_,(0,ze.Zl)(_.sortOrder,K))??[],[K,_]),ct=K.length-tt.length,ht=tt.length>0,mt=ht?Ge:A.noop;return(0,b.useEffect)(()=>{tt.length===0&&Fe(!1)},[tt]),b.createElement("div",null,_.groupMode===hn.LM.Default&&b.createElement("div",{className:ht?He.clickable:"",onClick:()=>mt()},ht&&b.createElement($n.J,{name:xe?"angle-down":"angle-right",size:"md"}),b.createElement("span",null,`${tt.length} ${Vn()("instance",tt.length)}`),ct>0&&b.createElement("span",null,", ",`${ct} hidden by filters`)),xe&&b.createElement(_n.o,{instances:tt,pagination:{itemsPerPage:2*va.gN}}))},Ea=K=>({clickable:D.css`
    cursor: pointer;
  `}),Ma=({rules:K,options:_})=>{const se=(0,rt.wW)(ya),xe=_.groupBy,Fe=(0,b.useMemo)(()=>{const He=new Map,Ge=ht=>xe?Ja(ht,xe):!0;return K.filter(Ge).forEach(ht=>{(ht.rule.alerts??[]).forEach(mt=>{const yt=Za(xe,mt.labels),Dt=He.get(yt)??[];He.set(yt,[...Dt,mt])})}),Array.from(He.entries()).reduce((ht,[mt,yt])=>{const Dt=Lt(_,yt);return Dt.length>0&&ht.set(mt,Dt),ht},new Map)},[xe,K,_]);return b.createElement(b.Fragment,null,Array.from(Fe).map(([He,Ge])=>b.createElement("li",{className:se.alertRuleItem,key:He},b.createElement("div",null,b.createElement("div",{className:se.customGroupDetails},b.createElement("div",{className:se.alertLabels},He&&ca(He).map(([tt,ct])=>b.createElement(In.i,{key:tt,labelKey:tt,value:ct})),!He&&"No grouping")),b.createElement(Fa,{alerts:Ge,options:_})))))};function Za(K,_){return new URLSearchParams(K.map(se=>[se,_[se]])).toString()}function ca(K){return[...new URLSearchParams(K)]}function Ja(K,_){return _.every(se=>(K.rule.alerts??[]).some(xe=>xe.labels[se]))}const qa=Ma,Va=({rules:K,options:_})=>{const se=(0,rt.wW)(ya),xe=(0,rt.wW)(Xa),Fe=K.length<=_.maxItems?K:K.slice(0,_.maxItems);return b.createElement(b.Fragment,null,b.createElement("ol",{className:se.alertRuleList},Fe.map((He,Ge)=>{const{rule:tt,namespaceName:ct,groupName:ht}=He,mt=(0,fn.ub)(tt);return b.createElement("li",{className:se.alertRuleItem,key:`alert-${ct}-${ht}-${tt.name}-${Ge}`},b.createElement("div",{className:xe.icon},b.createElement($n.J,{name:Xn.Z.getStateDisplayModel(tt.state).iconClass,className:xe[(0,fn.Aq)(tt.state)],size:"lg"})),b.createElement("div",null,b.createElement("div",{className:se.instanceDetails},b.createElement("div",{className:se.alertName,title:tt.name},tt.name),b.createElement("div",{className:se.alertDuration},b.createElement("span",{className:xe[(0,fn.Aq)(tt.state)]},(0,fn.SS)(tt.state))," ",mt&&tt.state!==ia.x_.Inactive&&b.createElement(b.Fragment,null,"for"," ",b.createElement("span",null,(0,ut.vT)({start:mt,end:Date.now()}))))),b.createElement(Fa,{alerts:He.rule.alerts??[],options:_})))})))},Xa=K=>({common:D.css`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${K.shape.borderRadius()};
    font-size: ${K.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:D.css`
    margin-top: ${K.spacing(2.5)};
    align-self: flex-start;
  `,good:D.css`
    color: ${K.colors.success.main};
  `,bad:D.css`
    color: ${K.colors.error.main};
  `,warning:D.css`
    color: ${K.colors.warning.main};
  `,neutral:D.css`
    color: ${K.colors.secondary.main};
  `,info:D.css`
    color: ${K.colors.primary.main};
  `}),fs=Va;function ls(K){const _=(0,_e.useDispatch)(),se=(0,b.useMemo)(We.mA,[]);(0,b.useEffect)(()=>{K.options.stateFilter.inactive===!0&&(K.options.stateFilter.normal=!0),K.options.stateFilter.inactive=void 0},[K.options.stateFilter]);let xe;(0,Zt.Z)(()=>{xe=(0,ba.h4)().getCurrent()}),(0,b.useEffect)(()=>{_((0,at.lB)());const yt=xe?.events.subscribe(Qt.md,()=>_((0,at.lB)()));return()=>{yt?.unsubscribe()}},[_,xe]);const Fe=(0,Xe._)(yt=>yt.promRules),He=se.some(yt=>Fe[yt]?.dispatched),Ge=se.some(yt=>Fe[yt]?.loading),tt=se.some(yt=>Fe[yt]?.result?.length&&!Fe[yt]?.error),ct=(0,rt.wW)(ya),ht=(0,b.useMemo)(()=>gs(K,cs(K.options.sortOrder,Object.values(Fe).flatMap(({result:yt=[]})=>(0,fn.ZL)(yt)))),[K,Fe]),mt=ht.length===0?"No alerts matching filters":void 0;return!Xt.Vt.hasPermission(_e.AccessControlAction.AlertingRuleRead)&&!Xt.Vt.hasPermission(_e.AccessControlAction.AlertingRuleExternalRead)?b.createElement(Jt.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):b.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},b.createElement("div",{className:ct.container},He&&Ge&&!tt&&b.createElement(rn.u,{text:"Loading..."}),mt&&b.createElement("div",{className:ct.noAlertsMessage},mt),b.createElement("section",null,K.options.viewMode===hn.wO.Stat&&tt&&b.createElement(mn.w6,{width:K.width,height:K.height,graphMode:mn.IG.None,textMode:mn.jG.Auto,justifyMode:mn.ap.Auto,theme:j.vc.theme2,value:{text:`${ht.length}`,numeric:ht.length}}),K.options.viewMode===hn.wO.List&&K.options.groupMode===hn.LM.Custom&&tt&&b.createElement(qa,{rules:ht,options:K.options}),K.options.viewMode===hn.wO.List&&K.options.groupMode===hn.LM.Default&&tt&&b.createElement(fs,{rules:ht,options:K.options}))))}function cs(K,_){if(K===hn.As.Importance)return(0,A.sortBy)(_,xe=>Xn.Z.alertStateSortScore[xe.state]);if(K===hn.As.TimeAsc)return(0,A.sortBy)(_,xe=>(0,fn.ub)(xe.rule)||new Date);if(K===hn.As.TimeDesc)return(0,A.sortBy)(_,xe=>(0,fn.ub)(xe.rule)||new Date).reverse();const se=(0,A.sortBy)(_,xe=>xe.rule.name.toLowerCase());return K===hn.As.AlphaDesc&&se.reverse(),se}function gs(K,_){const{options:se,replaceVariables:xe}=K;let Fe=[..._];if(se.dashboardAlerts){const He=(0,ba.h4)().getCurrent()?.uid;Fe=Fe.filter(({rule:{annotations:Ge={}}})=>Object.entries(Ge).some(([tt,ct])=>tt===lt.q6.dashboardUID&&ct===He))}if(se.alertName){const He=xe(se.alertName);Fe=Fe.filter(({rule:{name:Ge}})=>Ge.toLocaleLowerCase().includes(He.toLocaleLowerCase()))}if(Fe=Fe.filter(He=>se.stateFilter.firing&&He.rule.state===ia.x_.Firing||se.stateFilter.pending&&He.rule.state===ia.x_.Pending||se.stateFilter.normal&&He.rule.state===ia.x_.Inactive),se.alertInstanceLabelFilter){const He=xe(se.alertInstanceLabelFilter),Ge=(0,Ze.Zh)(He);Fe=Fe.reduce((tt,ct)=>{const ht=(ct.rule.alerts??[]).filter(({labels:mt})=>(0,Ze.eD)(mt,Ge));return ht.length&&tt.push({...ct,rule:{...ct.rule,alerts:ht}}),tt},[])}if(se.folder&&(Fe=Fe.filter(He=>He.namespaceName===se.folder.title)),se.datasource){const He=se.datasource===We.JY;Fe=Fe.filter(He?({dataSourceName:Ge})=>Ge===We.GC:({dataSourceName:Ge})=>Ge===se.datasource)}return Fe=Fe.reduce((He,Ge)=>(Lt(se,Ge.rule.alerts??[]).length&&He.push(Ge),He),[]),Fe}const ya=K=>({cardContainer:D.css`
    padding: ${K.spacing(.5)} 0 ${K.spacing(.25)} 0;
    line-height: ${K.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:D.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:D.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:D.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${K.colors.background.secondary};
    padding: ${K.spacing(.5)} ${K.spacing(1)};
    border-radius: ${K.shape.borderRadius(2)};
    margin-bottom: ${K.spacing(.5)};

    & > * {
      margin-right: ${K.spacing(1)};
    }
  `,alertName:D.css`
    font-size: ${K.typography.h6.fontSize};
    font-weight: ${K.typography.fontWeightBold};
  `,alertLabels:D.css`
    > * {
      margin-right: ${K.spacing(.5)};
    }
  `,alertDuration:D.css`
    font-size: ${K.typography.bodySmall.fontSize};
  `,alertRuleItemText:D.css`
    font-weight: ${K.typography.fontWeightBold};
    font-size: ${K.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:D.css`
    color: ${K.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:D.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:D.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:D.css`
    margin-right: ${K.spacing(.5)};
  `,instanceDetails:D.css`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:D.css`
    margin-bottom: ${K.spacing(.5)};
  `});class za{getSuggestionsForData(_){const{dataSummary:se}=_;if(se.hasData)return;_.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function Pa(K){return K.showOptions===hn.kx.Current}const Jn=new fe.c(Kn).setPanelOptions(K=>{K.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:hn.kx.Current},{label:"Recent state changes",value:hn.kx.RecentChanges}]},defaultValue:hn.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:hn.As.AlphaAsc},{label:"Alphabetical (desc)",value:hn.As.AlphaDesc},{label:"Importance",value:hn.As.Importance},{label:"Time (asc)",value:hn.As.TimeAsc},{label:"Time (desc)",value:hn.As.TimeDesc}]},defaultValue:hn.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:Pa}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:Pa}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:se,onChange:xe}){return b.createElement(bn,{initialFolderId:se,onChange:Fe=>xe(Fe?.id),extraFolders:[xn,Cn]})},category:["Filter"],showIf:Pa}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(_){return b.createElement(Me.B,{tags:_.value,onChange:_.onChange})},category:["Filter"],showIf:Pa}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:Pa}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:Pa}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:Pa}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:Pa}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:Pa}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:Pa})}).setMigrationHandler(ha).setSuggestionsSupplier(new za),ps=new fe.c(ls).setPanelOptions(K=>{K.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:hn.wO.List,settings:{options:[{label:"List",value:hn.wO.List},{label:"Stat",value:hn.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:hn.LM.Default,settings:{options:[{value:hn.LM.Default,label:"Default grouping"},{value:hn.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:_=>_.groupMode===hn.LM.Custom,category:["Options"],editor:_=>b.createElement(kt,{id:_.id??"groupBy",defaultValue:_.value.map(se=>({label:se,value:se})),onChange:_.onChange})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:hn.As.AlphaAsc},{label:"Alphabetical (desc)",value:hn.As.AlphaDesc},{label:"Importance",value:hn.As.Importance},{label:"Time (asc)",value:hn.As.TimeAsc},{label:"Time (desc)",value:hn.As.TimeDesc}]},defaultValue:hn.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(se){return b.createElement(Ae.Es,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:se.value?.title,initialFolderUid:se.value?.uid,permissionLevel:_e.PermissionLevelString.View,onClear:()=>se.onChange(""),...se})},category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(se){return b.createElement(Ne.q,{...se,type:["prometheus","loki","grafana"],noDefault:!0,current:se.value,onChange:xe=>se.onChange(xe.name),onClear:()=>se.onChange(null)})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),Ha=Ke.v.unifiedAlertingEnabled?ps:Jn;var fa=e(95484),Bs=e(83383),Ca=e(25318),Sa=e(55294),is=e(57388),An=e(36012),ds=e(82385),ws=e(94108),ks=e(97063),Ns=e(52438),rr=e(48756);const or=({options:K,annotation:_,formatDate:se,onClick:xe,onAvatarClick:Fe,onTagClick:He})=>{const Ge=(0,rt.wW)(Zs),{showUser:tt,showTags:ct,showTime:ht}=K,{text:mt="",login:yt,email:Dt,avatarUrl:bt,tags:$t,time:Vt,timeEnd:Yt}=_,It=()=>{xe(_)},Ut=()=>{Fe(_)},wt=yt&&tt,zt=Vt&&ht,cn=Yt&&Yt!==Vt&&ht;return b.createElement(wn.Z,{className:Ge.card,onClick:It},b.createElement(wn.Z.Heading,null,b.createElement(Ns.D,{className:Ge.heading,onClick:_t=>{_t.stopPropagation()},content:mt})),zt&&b.createElement(wn.Z.Description,{className:Ge.timestamp},b.createElement(Wt,{formatDate:se,time:Vt}),cn&&b.createElement(b.Fragment,null,b.createElement("span",{className:Ge.time},"-"),b.createElement(Wt,{formatDate:se,time:Yt})," ")),wt&&b.createElement(wn.Z.Meta,{className:Ge.meta},b.createElement(Gs,{email:Dt,login:yt,avatarUrl:bt,onClick:Ut})),ct&&$t&&b.createElement(wn.Z.Tags,null,b.createElement(An.P,{tags:$t,onClick:_t=>He(_t,!1)})))},Gs=({onClick:K,avatarUrl:_,login:se,email:xe})=>{const Fe=(0,rt.wW)(Zs),He=tt=>{tt.stopPropagation(),K()},Ge=b.createElement("span",null,"Created by:",b.createElement("br",null)," ",xe);return b.createElement(rr.u,{content:Ge,theme:"info",placement:"top"},b.createElement("button",{onClick:He,className:Fe.avatar,"aria-label":`Created by ${xe}`},b.createElement("img",{src:_,alt:"avatar icon"})))},Wt=({time:K,formatDate:_})=>{const se=(0,rt.wW)(Zs);return b.createElement("span",{className:se.time},b.createElement("span",null,_(K)))};function Zs(K){return{card:(0,D.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:K.spacing(1),margin:K.spacing(.5),width:"inherit"}),heading:(0,D.css)({a:{zIndex:1,position:"relative",color:K.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,D.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,D.css)({margin:0,alignSelf:"center"}),time:(0,D.css)({marginLeft:K.spacing(1),marginRight:K.spacing(1),fontSize:K.typography.bodySmall.fontSize,color:K.colors.text.secondary}),avatar:(0,D.css)({border:"none",background:"inherit",margin:0,padding:K.spacing(.5),img:{borderRadius:"50%",width:K.spacing(2),height:K.spacing(2)}})}}class Js extends b.PureComponent{constructor(_){super(_),this.style=Xs(Ke.v.theme2),this.subs=new fa.w0,this.tagListRef=b.createRef(),this.onAnnoClick=async se=>{if(!se.time)return;const{options:xe}=this.props,He=(0,ba.h4)().getCurrent(),Ge={from:this._timeOffset(se.time,xe.navigateBefore,!0),to:this._timeOffset(se.timeEnd??se.time,xe.navigateAfter,!1)};if(xe.navigateToPanel&&(Ge.viewPanel=se.panelId),He?.uid===se.dashboardUID){is.E1.partial(Ge);return}const tt=await(0,Sn.i)().get("/api/search",{dashboardUIDs:se.dashboardUID});if(tt&&tt.length&&tt[0].uid===se.dashboardUID){const ct=tt[0],ht=new URL(ct.url,window.location.origin);ht.searchParams.set("from",Ge.from),ht.searchParams.set("to",Ge.to),is.E1.push(Bs.u.stripBaseFromUrl(ht.toString()));return}ks.Z.emit(Ca.SI.alertWarning,["Unknown Dashboard: "+se.dashboardUID])},this.onTagClick=(se,xe)=>{if(!xe&&this.state.queryTags.includes(se))return;const Fe=xe?this.state.queryTags.filter(Ge=>Ge!==se):[...this.state.queryTags,se];let He;if(xe){const Ge=document.activeElement,tt=Ge?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(Ge)&&tt){const ct=Number.parseInt(tt,10),ht=this.tagListRef.current.querySelector(`[data-tag-id="${ct+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${ct-1}"]`);ht instanceof HTMLElement&&(He=ht)}}this.setState({queryTags:Fe},()=>He?.focus())},this.onUserClick=se=>{this.setState({queryUser:{id:se.userId,login:se.login,email:se.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(se,xe)=>{const{options:Fe}=this.props,He=(0,ba.h4)().getCurrent();return He?b.createElement(or,{annotation:se,formatDate:He.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:Fe}):b.createElement(b.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(Sa.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(_,se){const{options:xe,timeRange:Fe}=this.props;(xe!==_.options||this.state.queryTags!==se.queryTags||this.state.queryUser!==se.queryUser||xe.onlyInTimeRange&&Fe!==_.timeRange)&&this.doSearch()}async doSearch(){const{options:_}=this.props,{queryUser:se,queryTags:xe}=this.state,Fe={tags:_.tags,limit:_.limit,type:"annotation"};_.onlyFromThisDashboard&&(Fe.dashboardUID=(0,ba.h4)().getCurrent()?.uid);let He="";if(_.onlyInTimeRange){const{timeRange:tt}=this.props;Fe.from=tt.from.valueOf(),Fe.to=tt.to.valueOf()}else He="All Time";se&&(Fe.userId=se.id),_.tags&&_.tags.length&&(Fe.tags=_.tags.map(tt=>this.props.replaceVariables(tt))),xe.length&&(Fe.tags=Fe.tags?[...Fe.tags,...xe]:xe);const Ge=await(0,Sn.i)().get("/api/annotations",Fe,`anno-list-panel-${this.props.id}`);this.setState({annotations:Ge,timeInfo:He,loaded:!0})}_timeOffset(_,se,xe=!1){let Fe=5,He="m";const Ge=/^(\d+)(\w)/.exec(se);Ge&&Ge.length===3&&(Fe=parseInt(Ge[1],10),He=Ge[2]);const tt=(0,Zn.CQ)(_);return xe&&(Fe*=-1),tt.add(Fe,He).valueOf()}render(){const{loaded:_,annotations:se,queryUser:xe,queryTags:Fe}=this.state;if(!_)return b.createElement("div",null,"loading...");const He=xe||Fe.length>0;return b.createElement(qe.$,{autoHeightMin:"100%"},He&&b.createElement("div",{className:this.style.filter},b.createElement("b",null,"Filter:"),xe&&b.createElement(je.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${xe.email}`},xe.email),Fe.length>0&&b.createElement(An.P,{icon:"times",tags:Fe,onClick:Ge=>this.onTagClick(Ge,!0),getAriaLabel:Ge=>`Remove ${Ge} tag`,className:this.style.tagList,ref:this.tagListRef})),se.length<1&&b.createElement("div",{className:this.style.noneFound},"No Annotations Found"),b.createElement(ws.L,{items:se,renderItem:this.renderItem,getItemKey:Ge=>`${Ge.id}`}))}}const Xs=(0,ds.B)(K=>({noneFound:D.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,D.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:K.spacing(.5),padding:K.spacing(.5)}),tagList:(0,D.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),sa=Object.freeze([0,0]),es={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},ts=new fe.c(Js).setPanelOptions(K=>{K.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:es.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:es.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(_){return b.createElement(Me.B,{tags:_.value,onChange:_.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:es.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:es.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:es.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:es.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:es.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:es.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:es.navigateAfter,description:""})}).setPanelChangeHandler((K,_,se)=>_==="ryantxu-annolist-panel"?se:K.options);var ns=e(68061),qn=e(66926),Ws=e(78798),xa=e(89890),ka=e(20251),zn=e(14582),Tt=e(40538),Is=e(85885),_s=e(23084),qs=e(71464),Ys=e(31650),Ms=e(80228),ir=e(96003),Pr=e(74855),er=e(38067),Z=e(68711),ae=e(71235),Pe=e(80369),Ue=e(71906),et=e(85623),ot=e(21987),ft=e(46901),xt=e(67043),St=e(97635),Bt=e(68148),Ht=e(29431),qt=e(22701);const nn=({config:K,onUPlotClick:_,setFocusedSeriesIdx:se,setFocusedPointIdx:xe,setCoords:Fe,setHover:He,isToolTipOpen:Ge,isActive:tt,setIsActive:ct,sync:ht})=>{Ge.current=!1;const mt=()=>{ct&&ct(!0)},yt=()=>{Ge.current||(Fe(null),ct&&ct(!1))};let Dt=null,bt=null;K.addHook("init",It=>{Dt=It.root.parentElement,bt=It.over,Dt?.addEventListener("click",_),bt.addEventListener("mouseleave",yt),bt.addEventListener("mouseenter",mt),ht&&ht()===Ht.m.Crosshair&&It.root.classList.add("shared-crosshair")});const $t=()=>{Ge.current&&(Fe(null),_())};K.addHook("drawClear",$t),K.addHook("destroy",()=>{Dt?.removeEventListener("click",_),bt?.removeEventListener("mouseleave",yt),bt?.removeEventListener("mouseenter",mt),$t()});let Vt;K.addHook("syncRect",(It,Ut)=>{Vt=Ut});const Yt=K.getTooltipInterpolator();return Yt&&K.addHook("setCursor",It=>{Ge.current||Yt(se,xe,Ut=>{if(Ut){Fe(null);return}if(!Vt)return;const{x:wt,y:zt}=(0,qt._)(It,Vt);wt!==void 0&&zt!==void 0&&Fe({canvas:{x:It.cursor.left,y:It.cursor.top},viewport:{x:wt,y:zt}})},It)}),K.addHook("setLegend",It=>{if(!Ge.current&&!Yt&&xe(It.legend.idx),It.cursor.idxs!=null)for(let Ut=0;Ut<It.cursor.idxs.length;Ut++){const wt=It.cursor.idxs[Ut];if(wt!=null){const zt={xIndex:wt,yIndex:0,pageX:Vt.left+It.cursor.left,pageY:Vt.top+It.cursor.top};(!Ge.current||!zt)&&He(zt);return}}}),K.addHook("setSeries",(It,Ut)=>{Ge.current||se(Ut)}),K};var Mn=e(50796),Rn=e(97551),Pn=e(19942),jn=e(75974),On=e(20112),Fn=e(425),hs=e(98234),Ra=e(19695),as=e(36512),Ps=e(21760),Cr=e(17920),ss=e(31451),Cs=e(25532),xs=e(64724),Rs=e(28586),tr=e(60892);const Wa=Rs.Gj,Jr=Rs.Gj,la=8,us=30,io=.65,Bo=.1,lo=.15,Zc=5,Jc=10,rl=.1;function Xc(K,_,se,xe,Fe){const He=(0,Pe.X1)(K,14),Ge=_/(He.width+2)*14,tt=se/xe,ct=Math.min(tt,Ge);return{fontSize:Math.min(ct,Fe??ct),textMetrics:He}}function _c(K,_){const{xOri:se,xDir:xe,rawValue:Fe,getColor:He,formatValue:Ge,formatShortValue:tt,fillOpacity:ct=1,showValue:ht,xSpacing:mt=0}=K,yt=se===Tt.wN.Horizontal,Dt=!Boolean(K.text?.valueSize),bt=K.stacking!==Tt.o0.None,$t=K.stacking===Tt.o0.Percent;let{groupWidth:Vt,barWidth:Yt,barRadius:It=0}=K;bt&&([Vt,Yt]=[Yt,Vt]);let Ut,wt;const zt=gn=>Array.from(gn.data[0].map((yn,an)=>an)),cn=mt===0?void 0:(gn,yn)=>{const an=gn.bbox.width,Un=xe*(yt?1:-1);let Hn=yn.length,ma=Hn-1,aa=0,bs=an/jn.Z.pxRatio,vs=Math.abs(Math.floor(bs/mt));aa=Hn<vs?0:Math.ceil(Hn/vs);let hr=yn.map((Ss,Ls)=>aa!==0&&(mt>0?Ls:ma-Ls)%aa>0?null:Ss);return Un===1?hr:hr.reverse()},_t=(gn,yn,an,Un,Hn)=>{if(K.xTimeAuto){let ma=gn.scales.x,aa=ma.min,bs=ma.max;ma.min=gn.data[0][0],ma.max=gn.data[0][gn.data[0].length-1];let vs=(0,Ue.mr)(gn,yn,an,Un,Hn);return ma.min=aa,ma.max=bs,vs}return yn.map(ma=>yt?tt(0,ma):Ge(0,ma))},vn=(gn,yn,an)=>{yn=0,an=Math.max(1,gn.data[0].length-1);let Un=0;(0,Rs.Qm)(gn.data[0].length,Vt,Wa,0,(ma,aa,bs)=>{Un=aa+bs/2});let Hn=an-yn;if(Un===.5)yn-=Hn;else{let aa=(1/(1-Un*2)*Hn-Hn)/2;yn-=aa,an+=aa}return[yn,an]};let dn=(gn,yn)=>{let an=Array.from({length:yn},()=>({offs:Array(gn).fill(0),size:Array(gn).fill(0)}));return(0,Rs.Qm)(gn,Vt,Wa,null,(Un,Hn,ma)=>{(0,Rs.Qm)(yn,Yt,Jr,null,(aa,bs,vs)=>{an[aa].offs[Un]=Hn+ma*bs,an[aa].size[Un]=ma*vs})}),an},Dn=(gn,yn)=>{let an=Array.from({length:yn},()=>({offs:Array(gn).fill(0),size:Array(gn).fill(0)}));return(0,Rs.Qm)(gn,Vt,Wa,null,(Un,Hn,ma)=>{(0,Rs.Qm)(yn,Yt,Jr,null,(aa,bs,vs)=>{an[aa].offs[Un]=Hn,an[aa].size[Un]=ma})}),an};const Nn=yt?Bo:lo,Ln=yt?Zc:Jc;let Qn=[],Aa=[],ra=1,ln,kn=K.text?.valueSize??us,ea=Ln,ja=1/0,$a=1/0,Qa=He!=null,os=Qa?{fill:{unit:3,values:(gn,yn)=>Aa[yn].fill},stroke:{unit:3,values:(gn,yn)=>Aa[yn].stroke}}:{},Ia=jn.Z.paths.bars({radius:It,disp:{x0:{unit:2,values:(gn,yn)=>Qn[yn].offs},size:{unit:2,values:(gn,yn)=>Qn[yn].size},...os},each:(gn,yn,an,Un,Hn,ma,aa)=>{Un-=gn.bbox.left,Hn-=gn.bbox.top;let bs=gn.data[yn][an];yt?(ja=Math.min(ja,bs<0?gn.bbox.height-(Hn+aa):Hn),$a=ma):(ja=aa,$a=Math.min($a,bs<0?Un:gn.bbox.width-(Un+ma)));let vs={x:Un,y:Hn,w:ma,h:aa,sidx:yn,didx:an};if(K.fullHighlight&&(K.xOri===Tt.wN.Horizontal?(vs.y=0,vs.h=gn.bbox.height):(vs.x=0,vs.w=gn.bbox.width)),Ut.add(vs),ht!==Tt.Jp.Never){const hr=Fe(yn,an);let Ss=1;$t&&Da[yn][an]&&(Ss=Da[yn][an]);const Ls=Ss===0?0:hr/Ss,ar=Ge(yn,Ls);if(ea=Math.min(ea,Math.round(Nn*(yt?ma:aa))),ln[an]===void 0&&(ln[an]={}),ln[an][yn]={text:ar,value:Fe(yn,an),hidden:!1},Dt){const{fontSize:fr,textMetrics:vr}=Xc(ln[an][yn].text,$a*(yt?io:1)-(yt?0:ea),ja*(yt?1:io)-(yt?ea:0),1);ln[an][yn].textMetrics=vr;let Hs=Math.round(Math.min(kn,us,fr));ra=Hs/kn*(Hs/14),kn=Hs}else ln[an][yn].textMetrics=(0,Pe.X1)(ln[an][yn].text,kn);let Rr=yt?0:-Math.round(rl*kn),Os=Fe(yn,an);if(K.negY?.[yn]&&Os!=null&&(Os*=-1),Os!=null){const fr=gn.bbox.left+(yt?Un+ma/2:Os<0?Un-ea:Un+ma+ea),vr=gn.bbox.top+(yt?Os<0?Hn+aa+ea:Hn-ea:Hn+aa/2-Rr),{textMetrics:Hs={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=ln[an][yn];let Lo=0,tl=0;yt?(Lo=Hs.width*ra/2,tl=Os>0?(Hs.actualBoundingBoxAscent+Hs.actualBoundingBoxDescent)*ra:0):(tl=(Hs.actualBoundingBoxAscent+Hs.actualBoundingBoxDescent)*ra/2,Lo=Os<0?Hs.width*ra:0),ln[an][yn].x=fr,ln[an][yn].y=vr,ln[an][yn].bbox={x:fr-Lo,y:vr-tl,w:Hs.width*ra,h:(Hs.actualBoundingBoxAscent+Hs.actualBoundingBoxDescent)*ra}}}}});const Wn=gn=>{let yn=gn.over;yn.style.overflow="hidden",gn.root.querySelectorAll(".u-cursor-pt").forEach(an=>{an instanceof HTMLElement&&(an.style.borderRadius="0",K.fullHighlight&&(an.style.zIndex="-1"))})},sn={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(gn,yn)=>{if(yn===1){wt=null;let an=gn.cursor.left*jn.Z.pxRatio,Un=gn.cursor.top*jn.Z.pxRatio;Ut.get(an,Un,1,1,Hn=>{(0,tr.Pn)(an,Un,Hn.x,Hn.y,Hn.x+Hn.w,Hn.y+Hn.h)&&(bt?(wt==null||Hn.h*Hn.w<wt.h*wt.w)&&(wt=Hn):wt=Hn)})}return wt&&yn===wt.sidx?wt.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(gn,yn)=>{let an=wt&&yn===wt.sidx,Un=0,Hn=0;return bt&&an&&wt.sidx>1&&(yt?Un=(0,tr.zZ)(Ut,wt.sidx-1,wt.didx).h:Hn=(0,tr.zZ)(Ut,wt.sidx-1,wt.didx).w),{left:an?(wt.x+Hn)/jn.Z.pxRatio:-10,top:an?wt.y/jn.Z.pxRatio:-10,width:an?(wt.w-Hn)/jn.Z.pxRatio:0,height:an?(wt.h-Un)/jn.Z.pxRatio:0}}}},ua=gn=>{if(Ut=Ut||new tr.lW(0,0,gn.bbox.width,gn.bbox.height),Ut.clear(),gn.series.forEach(yn=>{yn._paths=null}),bt?Qn=[null].concat(Dn(gn.data[0].length,gn.data.length-1)):Qn=[null].concat(dn(gn.data[0].length,gn.data.length-1)),Qa){Aa=[null];for(let yn=1;yn<gn.data.length;yn++){let an=gn.data[yn].map((Un,Hn)=>Un!=null?He(yn,Hn,Un):null);Aa.push({fill:ct<1?an.map(Un=>Un!=null?(0,xs.alpha)(Un,ct):null):an,stroke:an})}}ln={},kn=K.text?.valueSize??us,ea=Ln,ja=$a=1/0},Ua=gn=>{if(ht===Tt.Jp.Never||kn<la)return;gn.ctx.save(),gn.ctx.fillStyle=_.colors.text.primary,gn.ctx.font=`${kn}px ${_.typography.fontFamily}`;let yn,an;for(const Un in ln){let Hn=!0;for(const ma in ln[Un]){const aa=ln[Un][ma],{text:bs,x:vs=0,y:hr=0}=aa;let{value:Ss}=aa;K.negY?.[ma]&&Ss!=null&&(Ss*=-1);let Ls=yt?"center":Ss!==null&&Ss<0?"right":"left",ar=yt?Ss!==null&&Ss<0?"top":"alphabetic":"middle";if(Ls!==yn&&(gn.ctx.textAlign=yn=Ls),ar!==an&&(gn.ctx.textBaseline=an=ar),ht===Tt.Jp.Always)gn.ctx.fillText(bs,vs,hr);else if(ht===Tt.Jp.Auto){let{bbox:Rr}=aa,Os=!1;if(Rr==null)Os=!0,aa.hidden=!0;else if(!Hn)for(const fr in ln[Un]){if(fr===ma)continue;const vr=ln[Un][fr],{bbox:Hs,hidden:Lo}=vr;if(!Lo&&Hs&&(0,tr.kK)(Rr,Hs)){Os=!0,aa.hidden=!0;break}}Hn=!1,!Os&&gn.ctx.fillText(bs,vs,hr)}}}gn.ctx.restore()},na=(gn,yn,an,Un)=>{wt?(gn(wt.sidx),yn(wt.didx),an()):an(!0)};let Da=null;function da(gn,yn){return Da=null,(0,ss.Bj)(gn[0],yn,({totals:an})=>{Da=an})}return{cursor:sn,xRange:vn,xValues:_t,xSplits:zt,hFilter:cn,barsBuilder:Ia,init:Wn,drawClear:ua,draw:Ua,interpolateTooltip:na,prepData:da}}const nf=Object.freeze([0,0]),Sr={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:Tt.wm.Auto,showValue:Tt.Jp.Auto,stacking:Tt.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},co={fillOpacity:80,gradientMode:Tt.FI.None,lineWidth:1};function qc(K){return K===ka.wm.Vertical?{xOri:Tt.wN.Horizontal,xDir:Tt.bQ.Right,yOri:Tt.wN.Vertical,yDir:Tt.bQ.Up}:{xOri:Tt.wN.Vertical,xDir:Tt.bQ.Down,yOri:Tt.wN.Horizontal,yDir:Tt.bQ.Right}}const ed=({frame:K,theme:_,orientation:se,showValue:xe,groupWidth:Fe,barWidth:He,barRadius:Ge=0,stacking:tt,text:ct,rawValue:ht,getColor:mt,fillOpacity:yt,allFrames:Dt,xTickLabelRotation:bt,xTickLabelMaxLength:$t,xTickLabelSpacing:Vt=0,legend:Yt,timeZone:It,fullHighlight:Ut})=>{const wt=new Cr.U,zt=(ra,ln)=>(0,On.zc)(K.fields[ra].display(ln)),cn=(ra,ln)=>Xr(zt(ra,ln),$t),_t=qc(se);K.fields.length===2&&(Fe=He,He=1);const vn={xOri:_t.xOri,xDir:_t.xDir,groupWidth:Fe,barWidth:He,barRadius:Ge,stacking:tt,rawValue:ht,getColor:mt,fillOpacity:yt,formatValue:zt,formatShortValue:cn,timeZone:It,text:ct,showValue:xe,legend:Yt,xSpacing:Vt,xTimeAuto:K.fields[0]?.type===zn.fS.time&&!K.fields[0].config.unit?.startsWith("time:"),negY:K.fields.map(ra=>ra.config.custom?.transform===Tt.pR.NegativeY),fullHighlight:Ut},dn=_c(vn,_);if(wt.setCursor(dn.cursor),wt.addHook("init",dn.init),wt.addHook("drawClear",dn.drawClear),wt.addHook("draw",dn.draw),wt.setTooltipInterpolator(dn.interpolateTooltip),bt!==0){let ra=50,ln=_t.xOri===Tt.wN.Horizontal?14:5;wt.setPadding(td(K,bt,$t,ra,ln))}wt.setPrepData(dn.prepData),wt.addScale({scaleKey:"x",isTime:!1,range:dn.xRange,distribution:Tt.wf.Ordinal,orientation:_t.xOri,direction:_t.xDir});const Dn=K.fields[0].config.custom?.axisPlacement!==Tt.LB.Hidden?_t.xOri===Tt.wN.Horizontal?Tt.LB.Bottom:Tt.LB.Left:Tt.LB.Hidden,Nn=K.fields[0].config.custom?.axisPlacement!==Tt.LB.Hidden;wt.addAxis({scaleKey:"x",isTime:!1,placement:Dn,label:K.fields[0].config.custom?.axisLabel,splits:dn.xSplits,filter:_t.xOri===0?dn.hFilter:void 0,values:dn.xValues,timeZone:It,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:_t.xOri===0?bt*-1:0,theme:_,show:Nn});let Ln=0;const Qn=$r(Yt);for(let ra=1;ra<K.fields.length;ra++){const ln=K.fields[ra];Ln++;const kn={...co,...ln.config.custom},ea=ln.config.unit||xt.j,ja=(0,Fn.fD)(ln),Qa=(0,Fn.YO)(ln,_).color;let os=kn.axisSoftMin,Ia=kn.axisSoftMax;if(os==null&&ln.config.min==null&&(os=0),Ia==null&&ln.config.max==null&&(Ia=0),kn.thresholdsStyle&&ln.config.thresholds&&(kn.thresholdsStyle.mode??Tt.i3.Off)!==Tt.i3.Off&&wt.addThresholds({config:kn.thresholdsStyle,thresholds:ln.config.thresholds,scaleKey:ea,theme:_,hardMin:ln.config.min,hardMax:ln.config.max,softMin:kn.axisSoftMin,softMax:kn.axisSoftMax}),wt.addSeries({scaleKey:ea,pxAlign:!0,lineWidth:kn.lineWidth,lineColor:Qa,fillOpacity:kn.fillOpacity,theme:_,colorMode:ja,pathBuilder:dn.barsBuilder,show:!kn.hideFrom?.viz,gradientMode:kn.gradientMode,thresholds:ln.config.thresholds,hardMin:ln.config.min,hardMax:ln.config.max,softMin:os,softMax:Ia,dataFrameFieldIndex:{fieldIndex:Qn?ra:Dt[0].fields.findIndex(Wn=>Wn.type===zn.fS.number&&Wn.state?.seriesIndex===Ln-1),frameIndex:0}}),wt.addScale({scaleKey:ea,min:ln.config.min,max:ln.config.max,softMin:os,softMax:Ia,orientation:_t.yOri,direction:_t.yDir,distribution:kn.scaleDistribution?.type,log:kn.scaleDistribution?.log}),kn.axisPlacement!==Tt.LB.Hidden){let Wn=kn.axisPlacement;(!Wn||Wn===Tt.LB.Auto)&&(Wn=Tt.LB.Left),_t.xOri===1&&(Wn===Tt.LB.Left&&(Wn=Tt.LB.Bottom),Wn===Tt.LB.Right&&(Wn=Tt.LB.Top)),wt.addAxis({scaleKey:ea,label:kn.axisLabel,size:kn.axisWidth,placement:Wn,formatValue:(sn,ua)=>(0,On.zc)(ln.display(sn,ua)),filter:_t.yOri===0?dn.hFilter:void 0,tickLabelRotation:_t.xOri===1?bt*-1:0,theme:_,grid:{show:kn.axisGridShow}})}}let Aa=(0,ss.i7)(K);return wt.setStackingGroups(Aa),wt};function Xr(K,_){return K.length>_?K.substring(0,_).concat("..."):K}function td(K,_,se,xe=0,Fe=0){const He=K.fields[0].values,Ge=Ue.gD,tt=K.fields[0].display??(Dt=>Dt);let ct=0;for(let Dt=0;Dt<He.length;Dt++){let bt=(0,Pe.X1)(Xr((0,On.zc)(tt(He.get(Dt))),se),Ge);ct=bt.width>ct?bt.width:ct}const ht=_>0?Math.cos(_*Math.PI/180)*(0,Pe.X1)(Xr((0,On.zc)(tt(He.get(He.length-1))),se),Ge).width:0,mt=_<0?Math.cos(_*-1*Math.PI/180)*(0,Pe.X1)(Xr((0,On.zc)(tt(He.get(0))),se),Ge).width:0,yt=Math.sin((_>=0?_:_*-1)*Math.PI/180)*ct-Fe;return[Math.round(Ue.gD*jn.Z.pxRatio),ht,yt,Math.max(0,mt-xe)]}function ol(K,_,se){if(!K?.length)return{warn:"No data in response"};const xe=K.length===1?(0,hs.Y3)(K[0],K[0].fields.findIndex(yt=>yt.type===zn.fS.time)):(0,hs._9)({frames:K});if(!xe)return{warn:"Unable to join data"};let Fe;if(se.colorByField&&(Fe=(0,Cs.findField)(xe,se.colorByField),!Fe))return{warn:"Color field not found"};let He;if(se.xField&&(He=(0,Cs.findField)(xe,se.xField),!He))return{warn:"Configured x field not found"};let Ge,tt,ct=[];for(const yt of xe.fields)if(yt!==He)switch(yt.type){case zn.fS.string:Ge||(Ge=yt);break;case zn.fS.time:tt||(tt=yt);break;case zn.fS.number:{const Dt={...yt,state:{...yt.state,seriesIndex:ct.length},config:{...yt.config,custom:{...yt.config.custom,stacking:{group:"_",mode:se.stacking}}},values:new Ra.G(yt.values.toArray().map(bt=>Number.isFinite(bt)||bt==null?bt:null))};se.stacking===Tt.o0.Percent&&(Dt.config.unit="percentunit",Dt.display=(0,as.U)({field:Dt,theme:_})),ct.push(Dt)}}let ht=He;if(ht||(ht=Ge||tt),!ht)return{warn:"Bar charts requires a string or time field"};if(!ct.length)return{warn:"No numeric fields found"};if(Fe&&ct.length>1){const yt=ct.find(Dt=>Dt!==Fe);yt&&(ct=[yt])}if($r(se.legend)){const yt=se.legend.sortBy.toLowerCase(),Dt=se.legend.calcs??[yt];ct=(0,A.orderBy)(ct,bt=>(0,Ps.Kx)({field:bt,reducers:Dt})[yt],se.legend.sortDesc?"desc":"asc")}let mt=ct;return se.stacking===Tt.o0.Percent&&(mt=ct.map(yt=>{const Dt=xe.fields.find($t=>$t.name===yt.name),bt={...yt,config:{...Dt.config},values:yt.values};return bt.display=(0,as.U)({field:bt,theme:_}),bt}),mt.unshift(ht)),ct.unshift(ht),{aligned:xe,colorByField:Fe,viz:[{length:ht.values.length,fields:ct}],legend:{fields:mt,length:ht.values.length}}}const $r=K=>Boolean(K?.sortBy&&K.sortDesc!==null),il=10,nd=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(K,_)=>_.text?.valueSize===K.text?.valueSize],uo=({data:K,options:_,fieldConfig:se,width:xe,height:Fe,timeZone:He,id:Ge})=>{const tt=(0,rt.l4)(),{eventBus:ct}=(0,ae.R9)(),ht=(0,b.useRef)(void 0),mt=(0,b.useRef)(!1),[yt,Dt]=(0,b.useState)(void 0),[bt,$t]=(0,b.useState)(null),[Vt,Yt]=(0,b.useState)(null),[It,Ut]=(0,b.useState)(null),[wt,zt]=(0,b.useState)(!1),[cn,_t]=(0,b.useState)(!1),vn=()=>{mt.current=!1,$t(null),_t(!1)},dn=()=>{mt.current=!mt.current,_t(mt.current)},Dn=(0,b.useRef)(),Nn=(0,b.useRef)(),Ln=(0,b.useMemo)(()=>ol(K?.series,tt,_),[K,tt,_]),Qn="viz"in Ln?Ln:null;Nn.current=Qn?.colorByField;const Aa=(0,b.useRef)(1e4);(0,b.useMemo)(()=>{Aa.current++},[_]);const ra=(0,b.useMemo)(()=>{const Wn=Qn?.viz[0],sn=Dn.current;return Wn&&sn&&(0,er.Ch)(Wn,sn,!0)||Aa.current++,Dn.current=Wn,(K.structureRev??0)+Aa.current},[Qn,K.structureRev]),ln=(0,b.useMemo)(()=>!_.orientation||_.orientation===ka.wm.Auto?xe<Fe?ka.wm.Horizontal:ka.wm.Vertical:_.orientation,[xe,Fe,_.orientation]),kn=(0,b.useMemo)(()=>{if(_.xTickLabelMaxLength)return _.xTickLabelMaxLength;{const Wn=_.xTickLabelRotation,sn=(0,Pe.X1)("M",Ue.gD).width;return Fe/2/(Math.sin((Wn>=0?Wn:Wn*-1)*Math.PI/180)*sn)-3}},[Fe,_.xTickLabelRotation,_.xTickLabelMaxLength]);if("warn"in Ln)return b.createElement(Z.Z,{panelId:Ge,fieldConfig:se,data:K,message:Ln.warn,needsNumberField:!0});const ea=(Wn,sn,ua)=>{const Ua=sn==null?null:Wn.fields[sn];if(Ua){const Da=(0,xa.C)(Ua,Wn);sn=Ln.aligned.fields.findIndex(da=>Da===(0,xa.C)(da,Ln.aligned))}const na=_.fullHighlight&&_.stacking!==Tt.o0.None?Tt.f3.Multi:_.tooltip.mode;return b.createElement(b.Fragment,null,cn&&b.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},b.createElement(Mn.P,{onClick:vn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),b.createElement(Pn.H,{data:Ln.aligned,rowIndex:ua,columnIndex:sn,sortOrder:_.tooltip.sort,mode:na}))},ja=Wn=>{const{legend:sn}=_;if(!Wn||sn.showLegend===!1)return null;if(Ln.colorByField){const ua=(0,Rn.$m)([Ln.colorByField],tt);if(ua?.length)return b.createElement(et.AY.Legend,{placement:sn.placement},b.createElement(ot.l,{placement:sn.placement,items:ua,displayMode:sn.displayMode}))}return b.createElement(ft.l,{data:[Ln.legend],config:Wn,maxHeight:"35%",maxWidth:"60%",..._.legend})},$a=(Wn,sn)=>Dn.current.fields[Wn].values.get(sn);let Qa,os=1;if(Ln.colorByField){const Wn=Ln.colorByField,sn=Wn.display;os=(Wn.config.custom.fillOpacity??100)/100,Qa=(ua,Ua)=>sn(Nn.current?.values.get(Ua)).color}else Dn.current.fields.some(sn=>sn.config.custom?.gradientMode===Tt.FI.Scheme&&sn.config.color?.mode===qn.S.Thresholds||sn.config.mappings?.some(Ua=>Ua.type==="value"?Object.values(Ua.options).some(na=>na.color!=null):Ua.options.result.color!=null))&&(os=(Dn.current.fields.find(ua=>ua.type===zn.fS.number).config.custom.fillOpacity??100)/100,Qa=(ua,Ua)=>{let na=Dn.current.fields[ua];return na.display(na.values.get(Ua)).color});const Ia=(Wn,sn,ua)=>{const{barWidth:Ua,barRadius:na=0,showValue:Da,groupWidth:da,stacking:gn,legend:yn,tooltip:an,text:Un,xTickLabelRotation:Hn,xTickLabelSpacing:ma,fullHighlight:aa}=_;return ed({frame:Wn,getTimeRange:ua,timeZone:He,theme:tt,timeZones:[He],eventBus:ct,orientation:ln,barWidth:Ua,barRadius:na,showValue:Da,groupWidth:da,xTickLabelRotation:Hn,xTickLabelMaxLength:kn,xTickLabelSpacing:ma,stacking:gn,legend:yn,tooltip:an,text:Un,rawValue:$a,getColor:Qa,fillOpacity:os,allFrames:Ln.viz,fullHighlight:aa})};return b.createElement(xt.d,{theme:tt,frames:Ln.viz,prepConfig:Ia,propsToDiff:nd,preparePlotFrame:Wn=>Wn[0],renderLegend:ja,legend:_.legend,timeZone:He,timeRange:{from:1,to:1},structureRev:ra,width:xe,height:Fe},Wn=>(ht.current!==Wn&&(ht.current=nn({config:Wn,onUPlotClick:dn,setFocusedSeriesIdx:Yt,setFocusedPointIdx:Ut,setCoords:$t,setHover:Dt,isToolTipOpen:mt,isActive:wt,setIsActive:zt})),_.tooltip.mode===Tt.f3.None?null:b.createElement(St.h_,null,yt&&bt&&Vt&&b.createElement(Bt.S,{position:{x:bt.viewport.x,y:bt.viewport.y},offset:{x:il,y:il},allowPointerEvents:mt.current},ea(Ln.viz[0],Vt,It)))))};var Lr=e(90701),ad=e(318),sd=e(94338);const Kr=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],rd=K=>{let _=K.value??0;const se=_<0;se&&(_*=-1);let xe=Kr[0];for(const Ge of Kr)if(xe=Ge,_<=xe.value)break;const Fe=Ge=>{K.onChange(Ge*(se?-1:1))},He=()=>{K.onChange(K.value*-1)};return b.createElement(Lr.Lh,null,b.createElement(ad.S,{value:xe.value,options:Kr,onChange:Fe}),_!==0&&b.createElement(rr.u,{content:"Require space from the right side",placement:"top"},b.createElement("div",null,b.createElement(sd.X,{value:se,onChange:He,label:"RTL"}))))};var Oa=e(26410);class od{getListWithDefaults(_){return _.getListAppender({name:Oa.y.BarChart,pluginId:"barchart",options:{showValue:Tt.Jp.Never,legend:{calcs:[],displayMode:Tt.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:se=>{se.options.barWidth=.8}}})}getSuggestionsForData(_){const se=this.getListWithDefaults(_),{dataSummary:xe}=_;xe.frameCount===1&&(!xe.hasNumberField||!xe.hasStringField||xe.rowCountTotal>50||(se.append({name:Oa.y.BarChart}),xe.numberFieldCount>1&&(se.append({name:Oa.y.BarChartStacked,options:{stacking:Tt.o0.Normal}}),se.append({name:Oa.y.BarChartStackedPercent,options:{stacking:Tt.o0.Percent}})),se.append({name:Oa.y.BarChartHorizontal,options:{orientation:ka.wm.Horizontal}}),xe.numberFieldCount>1&&(se.append({name:Oa.y.BarChartHorizontalStacked,options:{stacking:Tt.o0.Normal,orientation:ka.wm.Horizontal}}),se.append({name:Oa.y.BarChartHorizontalStackedPercent,options:{orientation:ka.wm.Horizontal,stacking:Tt.o0.Percent}}))))}}const wo=new fe.c(uo).useFieldConfig({standardOptions:{[ns.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:qn.S.PaletteClassic}}},useCustomConfig:K=>{const _=co;K.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:_.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:_.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:Is.q.fillGradient[0].value,settings:{options:Is.q.fillGradient}}),K.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:Tt.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:Tt.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),K.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:Tt.i3.Off},settings:{options:Is.q.thresholdsDisplayModes},editor:Pr.F,override:Pr.F,process:Ws.kG,shouldApply:()=>!0}),_s.r(K,_,!1),qs.B(K)}}).setPanelOptions((K,_)=>{const se=ol(_.data,Ke.v.theme2,_.options??{});let xe="First string or time field";const Fe="viz"in se?se.viz[0]:void 0;if(Fe?.fields?.length){const He=Fe.fields[0];xe+=` (${(0,xa.C)(He,Fe)})`}K.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:xe}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:ka.wm.Auto,label:"Auto"},{value:ka.wm.Horizontal,label:"Horizontal"},{value:ka.wm.Vertical,label:"Vertical"}]},defaultValue:Sr.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Sr.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:He=>He.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Sr.xTickLabelSpacing,editor:rd}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Tt.Jp.Auto,label:"Auto"},{value:Tt.Jp.Always,label:"Always"},{value:Tt.Jp.Never,label:"Never"}]},defaultValue:Sr.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:Is.q.stacking},defaultValue:Sr.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Sr.groupWidth,settings:{min:0,max:1,step:.01},showIf:(He,Ge)=>He.stacking&&He.stacking!==Tt.o0.None?!1:id(Ge)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Sr.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Sr.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Sr.fullHighlight}),K.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!_.options?.fullHighlight||_.options?.stacking===Tt.o0.None)&&Ys.L(K),Ms.J(K),ir.Z(K,!1)}).setSuggestionsSupplier(new od);function id(K){let _=0;if(K)for(const se of K)for(const xe of se.fields)xe.type===zn.fS.number&&_++;return _}var ll=e(936),oi=e(30383);const ld=K=>(0,ll.rD)(K);var cl=e(63992);const dl=Object.freeze([0,0]),Es={displayMode:Tt.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0};class ul{getSuggestionsForData(_){const{dataSummary:se}=_;if(!se.hasData||!se.hasNumberField)return;const xe=_.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});se.numberFieldCount>50||(se.hasStringField&&se.frameCount===1&&se.rowCountTotal<30?(xe.append({name:Oa.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Tt.QH.Basic,orientation:ka.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),xe.append({name:Oa.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Tt.QH.Lcd,orientation:ka.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(xe.append({name:Oa.y.BarGaugeBasic,options:{displayMode:Tt.QH.Basic,orientation:ka.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),xe.append({name:Oa.y.BarGaugeLCD,options:{displayMode:Tt.QH.Lcd,orientation:ka.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const mo=new fe.c(cl.M).useFieldConfig().setPanelOptions(K=>{(0,oi.j)(K),(0,oi.h)(K),ir.Z(K),K.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:Tt.QH.Gradient,label:"Gradient"},{value:Tt.QH.Lcd,label:"Retro LCD"},{value:Tt.QH.Basic,label:"Basic"}]},defaultValue:Es.displayMode}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:Es.showUnfilled,showIf:_=>_.displayMode!=="lcd"}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:Es.minVizWidth,showIf:_=>_.orientation===ka.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:Es.minVizHeight,showIf:_=>_.orientation===ka.wm.Horizontal})}).setPanelChangeHandler(ll.ZH).setMigrationHandler(ld).setSuggestionsSupplier(new ul);var _r=e(56703),fo=e(36998),ii=e(85969),No=e(84864),qr=e(71570),cd=e(24015),Uo=e(11979),li=e(1301);const ml=K=>_=>{const se=K.visualization.getColorByName(_?.color||li.Jx);return{markerTriangle:D.css`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${se};
      `,markerBar:D.css`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${se};
      `}};var go=e(53787),dd=e(92787),ud=e(4403),lr=e(74955),md=e(79090),fd=e(11017),$s=e(24357),mr=e(70659);const Ds=b.forwardRef(({annotation:K,onSave:_,onDismiss:se,timeFormatter:xe,className:Fe,...He},Ge)=>{const tt=(0,rt.wW)(Ga),ct=(0,ae.R9)(),ht=(0,b.useRef)(null);(0,dd.Z)(ht,()=>{se()});const[mt,yt]=(0,go.default)(async cn=>{const _t=await ct.onAnnotationCreate(cn);return _&&_(),_t}),[Dt,bt]=(0,go.default)(async cn=>{const _t=await ct.onAnnotationUpdate(cn);return _&&_(),_t}),$t=K.id!==void 0,Vt=K.time!==K.timeEnd,Yt=$t?bt:yt,It=$t?Dt:mt,Ut=Vt?`${xe(K.time)} - ${xe(K.timeEnd)}`:xe(K.time),wt=({tags:cn,description:_t})=>{Yt({id:K.id,tags:cn,description:_t,from:Math.round(K.time),to:Math.round(K.timeEnd)})},zt=b.createElement("div",{ref:Ge,className:(0,D.cx)(tt.editor,Fe),...He},b.createElement("div",{className:tt.header},b.createElement(Lr.Lh,{justify:"space-between",align:"center"},b.createElement("div",{className:tt.title},"Add annotation"),b.createElement("div",{className:tt.ts},Ut))),b.createElement("div",{className:tt.editorForm},b.createElement(ud.l,{onSubmit:wt,defaultValues:{description:K?.text,tags:K?.tags||[]}},({register:cn,errors:_t,control:vn})=>b.createElement(b.Fragment,null,b.createElement(lr.g,{label:"Description",invalid:!!_t.description,error:_t?.description?.message},b.createElement(md.K,{...cn("description",{required:"Annotation description is required"})})),b.createElement(lr.g,{label:"Tags"},b.createElement(fd.g,{control:vn,name:"tags",render:({field:{ref:dn,onChange:Dn,...Nn}})=>b.createElement($s.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:Dn,tagOptions:mr.lK,tags:Nn.value})})),b.createElement(Lr.Lh,{justify:"flex-end"},b.createElement(je.zx,{size:"sm",variant:"secondary",onClick:se,fill:"outline"},"Cancel"),b.createElement(je.zx,{size:"sm",type:"submit",disabled:It?.loading},It?.loading?"Saving":"Save"))))));return b.createElement(b.Fragment,null,b.createElement("div",{className:tt.backdrop}),b.createElement("div",{ref:ht},zt))});Ds.displayName="AnnotationEditorForm";const Ga=K=>({backdrop:D.css`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${K.zIndex.navbarFixed};
    `,editorContainer:D.css`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:D.css`
      background: ${K.colors.background.primary};
      box-shadow: ${K.shadows.z3};
      z-index: ${K.zIndex.dropdown};
      border: 1px solid ${K.colors.border.weak};
      border-radius: ${K.shape.borderRadius()};
      width: 460px;
    `,editorForm:D.css`
      padding: ${K.spacing(1)};
    `,header:D.css`
      border-bottom: 1px solid ${K.colors.border.weak};
      padding: ${K.spacing(1.5,1)};
    `,title:D.css`
      font-weight: ${K.typography.fontWeightMedium};
    `,ts:D.css`
      font-size: ${K.typography.bodySmall.fontSize};
      color: ${K.colors.text.secondary};
    `}),Vr=({onDismiss:K,onSave:_,timeZone:se,data:xe,selection:Fe,annotation:He,style:Ge})=>{const tt=(0,rt.l4)(),ct=(0,rt.wW)(fl),ht=(0,rt.wW)(ml),[mt,yt]=(0,b.useState)(null),[Dt,bt]=(0,b.useState)(null),$t=(0,Uo.D)(mt,Dt,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let Vt=xe.fields[0];if(!Vt)return null;const Yt=Vt.display||(0,as.U)({field:Vt,timeZone:se,theme:tt}),It=Fe.min!==Fe.max;return b.createElement(St.h_,null,b.createElement(b.Fragment,null,b.createElement("div",{style:Ge},b.createElement("div",{className:(0,D.cx)(D.css`
                position: absolute;
                top: ${Fe.bbox.top}px;
                left: ${Fe.bbox.left}px;
                width: ${Fe.bbox.width}px;
                height: ${Fe.bbox.height}px;
              `,It?ct.overlayRange(He):ct.overlay(He))},b.createElement("div",{ref:yt,className:It?(0,D.cx)(ht(He).markerBar,ct.markerBar):(0,D.cx)(ht(He).markerTriangle,ct.markerTriangle)}))),b.createElement(Ds,{annotation:He||{time:Fe.min,timeEnd:Fe.max},timeFormatter:Ut=>Yt(Ut).text,onSave:_,onDismiss:K,ref:bt,style:$t.styles.popper,...$t.attributes.popper})))},fl=K=>({overlay:_=>{const se=K.visualization.getColorByName(_?.color||li.Jx);return D.css`
        border-left: 1px dashed ${se};
      `},overlayRange:_=>{const se=K.visualization.getColorByName(_?.color||li.Jx);return D.css`
        background: ${xs.alpha(se,.1)};
        border-left: 1px dashed ${se};
        border-right: 1px dashed ${se};
      `},markerTriangle:D.css`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:D.css`
      top: 100%;
      left: 0;
      position: absolute;
    `}),eo=({data:K,timeZone:_,config:se,children:xe})=>{const Fe=(0,b.useRef)(),[He,Ge]=(0,b.useState)(),[tt,ct]=(0,b.useState)(!1),[ht,mt]=(0,b.useState)(null),yt=(0,cd.Z)(),Dt=(0,b.useCallback)(()=>{mt(null),Fe.current&&Fe.current.setSelect({top:0,left:0,width:0,height:0}),ct(!1)},[ct,mt]);(0,b.useLayoutEffect)(()=>{let $t=!1;se.addHook("init",Yt=>{Fe.current=Yt;const It=Yt.hooks.setSelect;if(It)for(let Ut=0;Ut<It.length;Ut++){const wt=It[Ut];wt!==Vt&&(It[Ut]=(...zt)=>{!$t&&wt(...zt)})}}),se.addHook("syncRect",(Yt,It)=>{yt()&&Ge(It)});const Vt=Yt=>{$t&&(ct(!0),mt({min:Yt.posToVal(Yt.select.left,"x"),max:Yt.posToVal(Yt.select.left+Yt.select.width,"x"),bbox:{left:Yt.select.left,top:0,height:Yt.select.height,width:Yt.select.width}}),$t=!1)};se.addHook("setSelect",Vt),se.setCursor({bind:{mousedown:(Yt,It,Ut)=>wt=>($t=wt.button===0&&(wt.metaKey||wt.ctrlKey),Ut(wt),null),mouseup:(Yt,It,Ut)=>wt=>($t&&Yt.select.width===0&&(Yt.select.left=Yt.cursor.left,Yt.select.height=Yt.bbox.height/window.devicePixelRatio),Ut(wt),null)}})},[se,Ge,yt]);const bt=(0,b.useCallback)(({coords:$t})=>{if(!Fe.current||!He||!$t)return;const Vt=Fe.current.posToVal($t.plotCanvas.x,"x");Vt&&(mt({min:Vt,max:Vt,bbox:{left:$t.plotCanvas.x,top:0,height:He.height,width:0}}),ct(!0))},[He]);return b.createElement(b.Fragment,null,tt&&ht&&He&&b.createElement(Vr,{selection:ht,onDismiss:Dt,onSave:Dt,data:K,timeZone:_,style:{position:"absolute",top:`${He.top}px`,left:`${He.left}px`,width:`${He.width}px`,height:`${He.height}px`}}),xe?xe({startAnnotating:bt}):null)};var ci=e(50235),gl=e(2310),pl=e(38849),gr=e(47513),Ks=e(19253),hl=e(8928),zr=e(20017),di=e(3349),gd=e(65580);const vl=({annotation:K,timeFormatter:_,canEdit:se,canDelete:xe,onEdit:Fe,onDelete:He})=>{const Ge=(0,rt.wW)(pd),tt=_(K.time),ct=_(K.timeEnd);let ht=K.text;const mt=K.tags;let yt="",Dt,bt,$t=null;const Vt=b.createElement("span",{className:Ge.time},Boolean(K.isRegion)?`${tt} - ${ct}`:tt);if(K.login&&K.avatarUrl&&(Dt=b.createElement("img",{className:Ge.avatar,alt:"Annotation avatar",src:K.avatarUrl})),K.alertId!==void 0&&K.newState){const It=Xn.Z.getStateDisplayModel(K.newState);$t=b.createElement("div",{className:Ge.alertState},b.createElement("i",{className:It.stateClass},It.text)),yt=Xn.Z.getAlertAnnotationInfo(K)}else K.title&&(ht=K.title+"<br />"+(typeof ht=="string"?ht:""));(se||xe)&&(bt=b.createElement("div",{className:Ge.editControls},se&&b.createElement(zr.h,{name:"pen",size:"sm",onClick:Fe}),xe&&b.createElement(zr.h,{name:"trash-alt",size:"sm",onClick:He})));const Yt=j.ZP.featureToggles.annotationComments;return b.createElement("div",{className:Ge.wrapper,style:Yt?{minWidth:"300px"}:{}},b.createElement("div",{className:Ge.header},b.createElement(Lr.Lh,{justify:"space-between",align:"center",spacing:"md"},b.createElement("div",{className:Ge.meta},b.createElement("span",null,Dt,$t),Vt),bt)),b.createElement("div",{className:Ge.body},ht&&b.createElement("div",{dangerouslySetInnerHTML:{__html:hl.QX.sanitize(ht)}}),yt,b.createElement(b.Fragment,null,b.createElement(Lr.Lh,{spacing:"xs",wrap:!0},mt?.map((It,Ut)=>b.createElement(di.V,{name:It,key:`${It}-${Ut}`})))),Yt&&b.createElement("div",{className:Ge.commentWrapper},b.createElement(gd.t,{objectType:"annotation",objectId:K.id.toString()}))))};vl.displayName="AnnotationTooltip";const pd=K=>({wrapper:D.css`
      max-width: 400px;
    `,commentWrapper:D.css`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:D.css`
      padding: ${K.spacing(.5,1)};
      border-bottom: 1px solid ${K.colors.border.weak};
      font-size: ${K.typography.bodySmall.fontSize};
      display: flex;
    `,meta:D.css`
      display: flex;
      justify-content: space-between;
    `,editControls:D.css`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:D.css`
      border-radius: 50%;
      width: 16px;
      height: 16px;
      margin-right: ${K.spacing(1)};
    `,alertState:D.css`
      padding-right: ${K.spacing(1)};
      font-weight: ${K.typography.fontWeightMedium};
    `,time:D.css`
      color: ${K.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:D.css`
      padding: ${K.spacing(1)};

      a {
        color: ${K.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),ui=6,El={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function hd({annotation:K,timeZone:_,width:se}){const{canAddAnnotations:xe,canEditAnnotations:Fe,canDeleteAnnotations:He,...Ge}=(0,ae.R9)(),tt=(0,rt.wW)(ml),ct=(0,rt.wW)(yl),[ht,mt]=(0,b.useState)(!1),[yt,Dt]=(0,b.useState)(!1),[bt,$t]=(0,b.useState)(null),[Vt,Yt]=(0,b.useState)(null),[It,Ut]=(0,b.useState)(null),wt=(0,b.useRef)(),zt=(0,Uo.D)(bt,Vt,El),cn=(0,Uo.D)(bt,It,El),_t=(0,b.useCallback)(()=>{Dt(!0),mt(!1)},[Dt,mt]),vn=(0,b.useCallback)(()=>{Ge.onAnnotationDelete&&Ge.onAnnotationDelete(K.id)},[K,Ge]),dn=(0,b.useCallback)(()=>{wt.current&&clearTimeout(wt.current),mt(!0)},[mt]),Dn=(0,b.useCallback)(()=>{wt.current&&clearTimeout(wt.current)},[]),Nn=(0,b.useCallback)(()=>{wt.current=setTimeout(()=>{mt(!1)},100)},[mt]),Ln=(0,b.useCallback)(kn=>(0,pl.dq)(kn,{format:gr.U6.fullDate,timeZone:_}),[_]),Qn=(0,b.useCallback)(()=>b.createElement(vl,{annotation:K,timeFormatter:Ln,onEdit:_t,onDelete:vn,canEdit:Fe(K.dashboardUID),canDelete:He(K.dashboardUID)}),[Fe,He,vn,_t,Ln,K]),Aa=Boolean(K.isRegion)&&se>ui;let ra=`${se/2}px`,ln=b.createElement("div",{className:tt(K).markerTriangle,style:{left:ra,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return Aa&&(ln=b.createElement("div",{className:tt(K).markerBar,style:{width:`${se}px`,transform:"translate3d(0,-50%, 0)"}})),b.createElement(b.Fragment,null,b.createElement("div",{ref:$t,onMouseEnter:dn,onMouseLeave:Nn,className:Aa?void 0:ct.markerWrapper},ln),ht&&b.createElement(St.h_,null,b.createElement("div",{ref:Yt,style:zt.styles.popper,...zt.attributes.popper,className:ct.tooltip,onMouseEnter:Dn,onMouseLeave:Nn},Qn())),yt&&b.createElement(St.h_,null,b.createElement(Ds,{onDismiss:()=>Dt(!1),onSave:()=>Dt(!1),timeFormatter:Ln,annotation:K,ref:Ut,style:cn.styles.popper,...cn.attributes.popper})))}const yl=K=>({markerWrapper:D.css`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:D.css`
      max-width: 400px;
    `,tooltip:D.css`
      ${(0,Ks.getTooltipContainerStyles)(K)};
      padding: 0;
    `}),mi=({annotations:K,timeZone:_,config:se})=>{const xe=(0,rt.l4)(),Fe=(0,b.useRef)(),He=(0,b.useRef)();(0,b.useEffect)(()=>{const ct=[];for(const ht of K)ct.push(new ci.U(ht));He.current=ct},[K]),(0,b.useLayoutEffect)(()=>{se.addHook("init",ct=>{Fe.current=ct}),se.addHook("draw",ct=>{if(!He.current)return null;const ht=ct.ctx;if(!ht)return;ht.save(),ht.beginPath(),ht.rect(ct.bbox.left,ct.bbox.top,ct.bbox.width,ct.bbox.height),ht.clip();const mt=(yt,Dt)=>{ht.beginPath(),ht.lineWidth=2,ht.strokeStyle=Dt,ht.setLineDash([5,5]),ht.moveTo(yt,ct.bbox.top),ht.lineTo(yt,ct.bbox.top+ct.bbox.height),ht.stroke(),ht.closePath()};for(let yt=0;yt<He.current.length;yt++){const Dt=He.current[yt];for(let bt=0;bt<Dt.length;bt++){const $t=Dt.get(bt);if(!$t.time)continue;let Vt=ct.valToPos($t.time,"x",!0);const Yt=xe.visualization.getColorByName($t.color);if(mt(Vt,Yt),$t.isRegion&&$t.timeEnd){let It=ct.valToPos($t.timeEnd,"x",!0);mt(It,Yt),ht.fillStyle=xs.alpha(Yt,.1),ht.rect(Vt,ct.bbox.top,It-Vt,ct.bbox.height),ht.fill()}}}ht.restore()})},[se,xe]);const Ge=(0,b.useCallback)((ct,ht)=>{const yt=new ci.U(ct).get(ht.fieldIndex);if(!yt.time||!Fe.current)return;let Dt=Fe.current.valToPos(yt.time,"x");return Dt<0&&(Dt=0),{x:Dt,y:Fe.current.bbox.height/window.devicePixelRatio+4}},[]),tt=(0,b.useCallback)((ct,ht)=>{let mt=0;const Dt=new ci.U(ct).get(ht.fieldIndex);if(Boolean(Dt.isRegion)&&Fe.current){let $t=Fe.current.valToPos(Dt.time,"x"),Vt=Fe.current.valToPos(Dt.timeEnd,"x");$t<0&&($t=0),Vt>Fe.current.bbox.width/window.devicePixelRatio&&(Vt=Fe.current.bbox.width/window.devicePixelRatio),mt=Vt-$t}return b.createElement(hd,{annotation:Dt,timeZone:_,width:mt})},[_]);return b.createElement(gl.T,{id:"annotations",config:se,events:K,renderEventMarker:tt,mapEventToXYCoords:Ge})};var vd=e(86889),Ed=e(77312),yd=e(75182),Fo=e(87302),Pd=e(67303);const Ba=({data:K,config:_,onClose:se,timeZone:xe,replaceVariables:Fe,...He})=>{const Ge=(0,b.useRef)(),[tt,ct]=(0,b.useState)(null),[ht,mt]=(0,b.useState)(null),[yt,Dt]=(0,b.useState)(!1),bt=(0,b.useCallback)(()=>{Dt(!0)},[Dt]),$t=(0,b.useCallback)(()=>{Dt(!1)},[Dt]),Vt=(0,b.useCallback)(()=>{(0,ss.Zp)("ContextMenuPlugin",!1,"clearing click selection"),mt(null)},[mt]);(0,b.useLayoutEffect)(()=>{let It;const Ut=wt=>{let zt={viewport:{x:wt.clientX,y:wt.clientY},plotCanvas:{x:0,y:0}};It&&(zt={...zt,plotCanvas:{x:wt.clientX-It.left,y:wt.clientY-It.top}}),ct(zt)};_.addHook("syncRect",(wt,zt)=>{It=zt}),_.addHook("init",wt=>{const zt=wt.over;Ge.current=zt||void 0,Ge.current?.addEventListener("mousedown",Ut),(0,ss.Zp)("ContextMenuPlugin",!1,"init");let cn=!1,_t=Array.from(wt.root.querySelectorAll(".u-cursor-pt"));Ge.current?.addEventListener("mousedown",()=>{cn=!0}),Ge.current?.addEventListener("mousemove",()=>{cn=!1}),Ge.current?.addEventListener("mouseup",vn=>{if(!cn||vn.metaKey||vn.ctrlKey){mt(null);return}cn=!0,vn.target instanceof HTMLElement&&(vn.target.classList.contains("u-cursor-pt")||((0,ss.Zp)("ContextMenuPlugin",!1,"canvas click"),mt({seriesIdx:null,dataIdx:null}))),bt()}),_t.length>0&&_t.forEach((vn,dn)=>{vn.addEventListener("click",()=>{const Dn=dn+1,Nn=wt.cursor.idx;(0,ss.Zp)("ContextMenuPlugin",!1,Dn,Nn),mt({seriesIdx:Dn,dataIdx:Nn??null})})})})},[_,bt,ct,mt]);const Yt=(0,b.useMemo)(()=>He.defaultItems?He.defaultItems.map(It=>({...It,items:It.items.map(Ut=>({...Ut,onClick:wt=>{tt&&Ut.onClick&&Ut.onClick(wt,{coords:tt})}}))})):[],[tt,He.defaultItems]);return b.createElement(b.Fragment,null,b.createElement(T.Global,{styles:T.css`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),yt&&tt&&b.createElement(Pl,{data:K,frames:He.frames,defaultItems:Yt,timeZone:xe,selection:{point:ht,coords:tt},replaceVariables:Fe,onClose:()=>{Vt(),$t(),se&&se()}}))},Pl=({selection:K,timeZone:_,defaultItems:se,replaceVariables:xe,data:Fe,...He})=>{const Ge=(0,b.useRef)(null),tt=()=>{He.onClose&&He.onClose()};(0,vd.Z)(Ge,()=>{tt()});const ct=Fe.fields[0];if(!ct)return null;const ht=se?[...se]:[];let mt=()=>null;if(K.point){const{seriesIdx:Dt,dataIdx:bt}=K.point,$t=ct.display;if(Dt&&bt!==null){const Vt=Fe.fields[Dt],Yt=Vt.display(Vt.values.get(bt));Vt.config.links&&Vt.config.links.length>0&&Vt.getLinks&&ht.push({items:Vt.getLinks({valueRowIndex:bt}).map(Ut=>({label:Ut.title,ariaLabel:Ut.title,url:Ut.href,target:Ut.target,icon:Ut.target==="_self"?"link":"external-link-alt",onClick:Ut.onClick}))}),mt=()=>b.createElement(Ed.b,{timestamp:$t(ct.values.get(bt)).text,displayValue:Yt,seriesColor:Yt.color,displayName:(0,xa.C)(Vt,Fe,He.frames)})}}const yt=()=>ht?.map((Dt,bt)=>b.createElement(yd.k,{key:`${Dt.label}${bt}`,label:Dt.label},(Dt.items||[]).map($t=>b.createElement(Fo.s,{key:$t.label,url:$t.url,label:$t.label,target:$t.target,icon:$t.icon,active:$t.active,onClick:$t.onClick}))));return b.createElement(Pd.x,{renderMenuItems:yt,renderHeader:mt,x:K.coords.viewport.x,y:K.coords.viewport.y,onClose:tt})};var Ya=e(9651);const on=({timeZone:K,dataFrame:_,dataFrameFieldIndex:se,config:xe,getFieldLinks:Fe,exemplarColor:He})=>{const Ge=(0,rt.wW)(Cl),[tt,ct]=(0,b.useState)(!1),[ht,mt]=b.useState(null),[yt,Dt]=b.useState(null),{styles:bt,attributes:$t}=(0,Uo.D)(ht,yt,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),Vt=(0,b.useRef)(),Yt=()=>{const cn=[b.createElement("rect",{fill:He,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),b.createElement("path",{fill:He,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),b.createElement("path",{fill:He,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),b.createElement("rect",{fill:He,key:"rectangle",width:"5",height:"5"}),b.createElement("path",{fill:He,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),b.createElement("path",{fill:He,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return cn[se.frameIndex%cn.length]},It=(0,b.useCallback)(()=>{Vt.current&&clearTimeout(Vt.current),ct(!0)},[ct]),Ut=(0,b.useCallback)(()=>{Vt.current=setTimeout(()=>{ct(!1)},100)},[ct]),wt=(0,b.useCallback)(()=>{const cn=_.fields.find(dn=>dn.name==="traceID")||_.fields[0],_t=[cn,..._.fields.filter(dn=>cn!==dn)],vn=dn=>(0,pl.dq)(dn,{format:gr.U6.fullDate,timeZone:K});return b.createElement("div",{onMouseEnter:It,onMouseLeave:Ut,className:Ge.tooltip,ref:Dt,style:bt.popper,...$t.popper},b.createElement("div",{className:Ge.wrapper},b.createElement("div",{className:Ge.header},b.createElement("span",{className:Ge.title},"Exemplar")),b.createElement("div",{className:Ge.body},b.createElement("div",null,b.createElement("table",{className:Ge.exemplarsTable},b.createElement("tbody",null,_t.map((dn,Dn)=>{const Nn=dn.values.get(se.fieldIndex),Ln=dn.config.links?.length?Fe(dn,se.fieldIndex):void 0;return b.createElement("tr",{key:Dn},b.createElement("td",{valign:"top"},dn.name),b.createElement("td",null,b.createElement("div",{className:Ge.valueWrapper},b.createElement("span",null,dn.type===zn.fS.time?vn(Nn):Nn),Ln&&b.createElement(Ya.Z,{links:Ln}))))})))))))},[$t.popper,_.fields,Fe,se,It,Ut,bt.popper,Ge,K]),zt=xe.getSeries().find(cn=>cn.props.dataFrameFieldIndex?.frameIndex===se.frameIndex)?.props.lineColor;return b.createElement(b.Fragment,null,b.createElement("div",{ref:mt,onMouseEnter:It,onMouseLeave:Ut,className:Ge.markerWrapper,"aria-label":st.wl.components.DataSource.Prometheus.exemplarMarker},b.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:zt},className:(0,D.cx)(Ge.marble,tt&&Ge.activeMarble)},Yt())),tt&&b.createElement(St.h_,null,wt()))},Cl=K=>{const _=K.isDark?K.v1.palette.dark2:K.v1.palette.white,se=K.isDark?K.v1.palette.dark9:K.v1.palette.gray5,xe=K.isDark?K.v1.palette.black:K.v1.palette.white,Fe=K.isDark?K.v1.palette.dark3:K.v1.palette.gray6;return{markerWrapper:D.css`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:D.css`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${K.v1.palette.red};
      pointer-events: none;
    `,wrapper:D.css`
      background: ${_};
      border: 1px solid ${se};
      border-radius: ${K.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${xe};
    `,exemplarsTable:D.css`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${K.components.panel.background};
      }

      tr {
        background-color: ${K.colors.background.primary};
        &:nth-child(even) {
          background-color: ${Fe};
        }
      }
    `,valueWrapper:D.css`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${K.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:D.css`
      background: none;
      padding: 0;
    `,header:D.css`
      background: ${se};
      padding: 6px 10px;
      display: flex;
    `,title:D.css`
      font-weight: ${K.typography.fontWeightMedium};
      padding-right: ${K.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:D.css`
      padding: ${K.spacing(1)};
      font-weight: ${K.typography.fontWeightMedium};
    `,marble:D.css`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:D.css`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},xl=({exemplars:K,timeZone:_,getFieldLinks:se,config:xe,visibleSeries:Fe})=>{const He=(0,b.useRef)();(0,b.useLayoutEffect)(()=>{xe.addHook("init",ct=>{He.current=ct})},[xe]);const Ge=(0,b.useCallback)((ct,ht)=>{const mt=ct.fields.find(Yt=>Yt.name===zn.Ls),yt=ct.fields.find(Yt=>Yt.name===zn.M5);if(!mt||!yt||!He.current)return;const Dt=Object.keys(He.current.scales).find(Yt=>!["x","y"].some(It=>It===Yt))??xt.j,bt=He.current.scales[Dt].min,$t=He.current.scales[Dt].max;let Vt=yt.values.get(ht.fieldIndex);return bt!=null&&Vt<bt&&(Vt=bt),$t!=null&&Vt>$t&&(Vt=$t),{x:He.current.valToPos(mt.values.get(ht.fieldIndex),"x"),y:He.current.valToPos(Vt,Dt)}},[]),tt=(0,b.useCallback)((ct,ht)=>{const mt=Fe!==void 0?po(Fe,ct,ht):!0,yt=Fe!==void 0?xd(ct,ht,Fe):void 0;return mt?b.createElement(on,{timeZone:_,getFieldLinks:se,dataFrame:ct,dataFrameFieldIndex:ht,config:xe,exemplarColor:yt}):b.createElement(b.Fragment,null)},[xe,_,se,Fe]);return b.createElement(gl.T,{config:xe,id:"exemplars",events:K,renderEventMarker:tt,mapEventToXYCoords:Ge})},Cd=(K,_)=>{const se=K.series.filter(Fe=>Fe.props.show),xe=[];return _?.length&&se.forEach(Fe=>{const He=Fe.props?.dataFrameFieldIndex?.frameIndex,Ge=Fe.props?.dataFrameFieldIndex?.fieldIndex;if(He!==void 0&&Ge!==void 0){const tt=_[He]?.fields[Ge];tt?.labels&&xe.push({labels:tt.labels,color:Fe.props?.lineColor??""})}}),{labels:xe,totalSeriesCount:K.series.length}},xd=(K,_,se)=>{let xe;return se.labels.some(Fe=>{const He=Object.keys(Fe.labels),Ge=K.fields.filter(tt=>He.find(ct=>ct===tt.name));return Ge.length&&Ge.every((ct,ht,mt)=>{const yt=ct.values.get(_.fieldIndex);return Fe.labels[ct.name]===yt})?(xe=Fe.color,!0):!1}),xe},po=(K,_,se)=>{let xe=!1;return K.labels.length===K.totalSeriesCount?xe=!0:K.labels.some(Fe=>{const He=Object.keys(Fe.labels);if(Object.keys(Fe.labels).length===0)xe=!0;else{const Ge=_.fields.filter(tt=>He.find(ct=>ct===tt.name));Ge.length&&(xe=K.labels.some(tt=>Object.keys(tt.labels).every(ct=>{const ht=tt.labels[ct];return Ge.find(mt=>mt.values.get(se.fieldIndex)===ht)})))}return xe}),xe},Hr=({config:K,onChangeTimeRange:_})=>{const se=(0,b.useRef)(),[xe,Fe]=(0,b.useState)([]),[He,Ge]=(0,b.useState)();if((0,b.useLayoutEffect)(()=>{K.addHook("init",bt=>{se.current=bt}),K.addHook("setScale",bt=>{Fe(bt.data?.[0]??[]),Ge(bt.scales.x??void 0)})},[K]),xe.length<2||!_||!He||!He.time||!He.min||!He.max)return null;let tt=0,ct=xe.length-1;for(;tt<=ct&&xe[tt]==null;)tt++;for(;ct>=0&&xe[ct]==null;)ct--;const ht=xe[tt],mt=xe[ct],yt=He.min,Dt=He.max;return ht==null||mt==null||ht<=Dt&&mt>=yt?null:b.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},b.createElement("div",null,b.createElement("div",null,"Data outside time range"),b.createElement(je.zx,{onClick:bt=>_({from:ht,to:mt}),variant:"secondary"},"Zoom to data")))};Hr.displayName="OutsideRangePlugin";var kr=e(90941),Dl=e(53004),fi=e.n(Dl);const bl=({step:K,y:_,dragBounds:se,mapPositionToValue:xe,formatValue:Fe,onChange:He})=>{const Ge=(0,rt.l4)();let tt=_,ct="none";_<(se.top??0)&&(ct="top"),_>(se.bottom??0)+22&&(ct="bottom"),ct==="bottom"&&(tt=se.bottom??_),ct==="top"&&(tt=se.top??_);const ht=typeof He!="function",mt=(0,rt.wW)($t=>Wo($t,K,ct,ht)),[yt,Dt]=(0,b.useState)(K.value),bt=(0,b.useMemo)(()=>Ge.colors.getContrastText(Ge.visualization.getColorByName(K.color)),[K.color,Ge]);return b.createElement(fi(),{axis:"y",grid:[1,1],disabled:ht,onStop:ht?A.noop:($t,Vt)=>(He(xe(Vt.lastY)),!1),onDrag:($t,Vt)=>Dt(xe(Vt.lastY)),position:{x:0,y:tt},bounds:se},b.createElement("div",{className:mt.handle,style:{color:bt}},b.createElement("span",{className:mt.handleText},Fe(yt))))};bl.displayName="ThresholdDragHandle";const Wo=(K,_,se,xe)=>{const Fe=K.visualization.getColorByName(_.color),He=Dd(se),Ge=se!=="none";return{handle:D.css`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${Fe};
      cursor: ${xe?"initial":"grab"};
      border-top-right-radius: ${K.shape.borderRadius(1)};
      border-bottom-right-radius: ${K.shape.borderRadius(1)};
      ${Ge&&D.css`
        margin-top: 0;
        border-radius: ${K.shape.borderRadius(1)};
      `}
      background: ${Fe};
      font-size: ${K.typography.bodySmall.fontSize};
      &:before {
        ${He};
      }
    `,handleText:D.css`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function Dd(K){const _=K==="none",se=xe=>D.css`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${xe}px;
    border-right-color: inherit;
    border-top: ${xe}px solid transparent;
    border-bottom: ${xe}px solid transparent;
  `;return _?D.css`
      ${se(9)};
      left: -9px;
    `:K==="top"?D.css`
      ${se(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:K==="bottom"?D.css`
      ${se(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const gi=60,pi=({config:K,fieldConfig:_,onThresholdsChange:se})=>{const xe=(0,b.useRef)(),[Fe,He]=(0,b.useState)(0);(0,b.useLayoutEffect)(()=>{K.setPadding([0,gi,0,0]),K.addHook("init",tt=>{xe.current=tt}),K.addHook("draw",()=>{He(tt=>tt+1)})},[K]);const Ge=(0,b.useMemo)(()=>{const tt=xe.current;if(!tt)return null;const ct=_.defaults.thresholds;if(!ct)return null;const ht=(0,kr.z)(_.defaults),mt=_.defaults.decimals,yt=[];for(let Dt=0;Dt<ct.steps.length;Dt++){const bt=ct.steps[Dt],$t=tt.valToPos(bt.value,ht);if(Number.isNaN($t)||!Number.isFinite($t))continue;const Vt=tt.bbox.height/window.devicePixelRatio,It=typeof se=="function"?wt=>{const zt=[...ct.steps.slice(0,Dt),...ct.steps.slice(Dt+1),{...ct.steps[Dt],value:wt}].sort((cn,_t)=>cn.value-_t.value);se({...ct,steps:zt})}:void 0,Ut=b.createElement(bl,{key:`${bt.value}-${Dt}`,step:bt,y:$t,dragBounds:{top:0,bottom:Vt},mapPositionToValue:wt=>tt.posToVal(wt,ht),formatValue:wt=>(0,On.Cf)(ht)(wt,mt).text,onChange:It});yt.push(Ut)}return yt},[Fe,_,se]);return xe.current?b.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(xe.current.bbox.left+xe.current.bbox.width)/window.devicePixelRatio}px`,top:`${xe.current.bbox.top/window.devicePixelRatio}px`,width:`${gi}px`,height:`${xe.current.bbox.height/window.devicePixelRatio}px`}},Ge):null};pi.displayName="ThresholdControlsPlugin";var Ml=e(12022),bd=e(41917),Md=e(70994);function Sl(K,_,se){if(!K?.length)return null;let xe;const Fe=[];for(let He of K){const Ge=[];let tt=!1,ct=!1,ht=(0,bd.w)({frame:He,refFieldPseudoMin:se?.from.valueOf(),refFieldPseudoMax:se?.to.valueOf()});for(const mt of(0,Md.I)(ht).fields)switch(mt.type){case zn.fS.time:tt=!0,Ge.push(mt);break;case zn.fS.number:ct=!0,xe={...mt,values:new Ra.G(mt.values.toArray().map(bt=>Number.isFinite(bt)||bt==null?bt:null))},Ge.push(xe);break;case zn.fS.string:xe={...mt,values:new Ra.G(mt.values.toArray())},Ge.push(xe);break;case zn.fS.boolean:ct=!0;const yt=mt.config?.custom??{},Dt={...mt.config,max:1,min:0,custom:yt};yt.lineInterpolation!==Tt.KC.StepBefore&&(yt.lineInterpolation=Tt.KC.StepAfter),xe={...mt,config:Dt,type:zn.fS.number,values:new Ra.G(mt.values.toArray().map(bt=>bt==null?bt:Boolean(bt)?1:0))},(0,On.br)(Dt.unit)||(Dt.unit="bool",xe.display=(0,as.U)({field:xe,theme:_})),Ge.push(xe);break}tt&&ct&&Fe.push({...He,length:ht.length,fields:Ge})}return Fe.length?Fe:null}function hi(K,_){return!K||!K.length?[_]:K.map(se=>se?.length?se:_)}function Sd(K,_,se,xe){return K.fields.forEach(Fe=>{if(Fe.state?.origin?.frameIndex===void 0||_[Fe.state?.origin?.frameIndex]===void 0)return;const He=[];for(const tt of _[Fe.state?.origin?.frameIndex].fields)if(tt.type===zn.fS.string)if(Fe.values instanceof Ml.o){const ct={...tt};ct.values=new Ml.o(tt.values,Fe.values.getOrderArray()),He.push(ct)}else He.push(tt);const Ge={fields:[...K.fields,...He],length:K.fields.length+He.length};Fe.getLinks=(0,fo.oB)(Ge,Fe,Fe.state.scopedVars,se,xe)}),K}const af=Object.freeze([1,0]);var nr=(K=>(K.CandlesVolume="candles+volume",K.Candles="candles",K.Volume="volume",K))(nr||{}),$o=(K=>(K.Candles="candles",K.OHLCBars="ohlcbars",K))($o||{}),Br=(K=>(K.OpenClose="open-close",K.CloseClose="close-close",K))(Br||{});const Ko={up:"green",down:"red",flat:"gray"},xr={mode:"candles+volume",candleStyle:"candles",colorStrategy:"open-close",colors:Ko,fields:{},legend:{displayMode:Tt.jK.List,showLegend:!0,placement:"bottom",calcs:[]},includeAllFields:!1},wr={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function Od(K,_,se){const xe=(0,Cs.findField)(K,se[_.key]);if(!xe)for(const Fe of K.fields){const He=(0,xa.C)(Fe,K).toLowerCase();if(_.defaults.includes(He)||_.defaults.includes(Fe.name))return Fe}return xe}function vi(K,_,se,xe){if(!K?.length)return null;const Fe=_.fields??{},He=K.length===1?(0,hs.Y3)(K[0],K[0].fields.findIndex(bt=>bt.type===zn.fS.time)):(0,hs._9)({frames:K});if(!He?.length)return null;const Ge={aligned:He,frame:He,names:{}},tt=Sl([He],se,xe);if(!tt)return null;const ct=Ge.frame=tt[0],ht=ct.fields.findIndex(bt=>bt.type===zn.fS.time);if(ht<0)return null;const mt=new Set;for(const bt of Object.values(wr)){const $t=Od(ct,bt,Fe);$t&&(Ge[bt.key]=$t,mt.add($t))}if(!Ge.open&&!Ge.close&&(Ge.open=ct.fields.find(bt=>bt.type===zn.fS.number),Ge.open&&mt.add(Ge.open)),Ge.open&&!Ge.close&&!Fe.close){const bt=Ge.open.values.toArray().slice(1);bt.push(bt[bt.length-1]),Ge.close={...Ge.open,values:new Ra.G(bt),name:"Next open",state:void 0},mt.add(Ge.close),ct.fields.push(Ge.close),Ge.autoOpenClose=!0}if(Ge.close&&!Ge.open&&!Fe.open){const bt=Ge.close.values.toArray().slice();bt.unshift(bt[0]),bt.length=ct.length,Ge.open={...Ge.close,values:new Ra.G(bt),name:"Previous close",state:void 0},mt.add(Ge.open),ct.fields.push(Ge.open),Ge.autoOpenClose=!0}!Ge.high&&!Fe.high&&(Ge.high=Ge.open),!Ge.low&&!Fe.low&&(Ge.low=Ge.open),_.mode===nr.Volume?(Ge.high&&(Ge.high!==Ge.open&&mt.delete(Ge.high),Ge.high=void 0),Ge.low&&(Ge.low!==Ge.open&&mt.delete(Ge.low),Ge.low=void 0)):_.mode===nr.Candles&&Ge.volume&&(mt.delete(Ge.volume),Ge.volume=void 0);for(const bt of Object.values(wr)){const $t=Ge[bt.key];$t&&(Ge.names[bt.key]=(0,xa.C)($t,Ge.frame))}const yt=ct.fields[ht],Dt=[yt];_.includeAllFields?Dt.push(...ct.fields.filter(bt=>bt!==yt)):Dt.push(...mt),Ge.frame={...Ge.frame,fields:Dt};for(let bt=0;bt<Ge.frame.fields.length;bt++){const $t=Ge.frame.fields[bt];$t.state={...$t.state,seriesIndex:bt-1,origin:{fieldIndex:bt,frameIndex:0}}}return Ge}const{alpha:Gr}=xs;function Td(K){let{mode:_,candleStyle:se,fields:xe,colorStrategy:Fe,upColor:He,downColor:Ge,flatColor:tt,volumeAlpha:ct,flatAsUp:ht=!0}=K;const mt=_!==nr.Volume&&xe.high!=null&&xe.low!=null,yt=mt&&se===$o.Candles,Dt=_!==nr.Candles&&xe.volume!=null;function bt(zt,cn,_t,vn,dn){return zt>0?_t:zt<0?vn:dn?_t:cn}let $t=0,Vt=xe.open,Yt=xe.high,It=xe.low,Ut=xe.close,wt=xe.volume;return zt=>{let cn,_t,vn,dn,Dn,Nn;mt&&(vn=new Path2D,_t=new Path2D,cn=new Path2D),Dt&&(dn=new Path2D,Dn=new Path2D,Nn=new Path2D);let Ln=new Path2D,Qn=zt.ctx,Aa=zt.data[$t],ra=zt.data[Vt],ln=zt.data[Ut],kn=mt?zt.data[Yt]:null,ea=mt?zt.data[It]:null,ja=Dt?zt.data[wt]:null,$a=wt!=null?Math.round(zt.valToPos(0,zt.series[wt].scale,!0)):null,[Qa,os]=zt.series[0].idxs,Ia=zt.data[0],Wn=ra,sn=zt.bbox.width;if(Ia.length>1){let da=null;for(let gn=0,yn=1/0;gn<Ia.length;gn++)if(Wn[gn]!==void 0){if(da!=null){let an=Math.abs(Ia[gn]-Ia[da]);an<yn&&(yn=an,sn=Math.abs(zt.valToPos(Ia[gn],"x",!0)-zt.valToPos(Ia[da],"x",!0)))}da=gn}}let ua=Math.round(.6*sn),Ua=2,na=2;ua<=12&&(Ua=na=1);let Da=Math.floor(ua/2);for(let da=Qa;da<=os;da++){let gn=Math.round(zt.valToPos(Aa[da],"x",!0)),yn=da===Qa?0:Math.sign(ln[da]-ln[da-1]),an=Math.sign(ln[da]-ra[da]);if(Dt){let Un=bt(Fe===Br.CloseClose?yn:an,Nn,Dn,dn,da===Qa&&Br.CloseClose?!1:ht),Hn=Math.round(zt.valToPos(ja[da],zt.series[wt].scale,!0));Un.rect(gn-Da,Hn,ua,$a-Hn)}if(mt){let Un=bt(Fe===Br.CloseClose?yn:an,vn,_t,cn,da===Qa&&Br.CloseClose?!1:ht),Hn=Math.round(zt.valToPos(kn[da],zt.series[Yt].scale,!0)),ma=Math.round(zt.valToPos(ea[da],zt.series[It].scale,!0));Un.rect(gn-Math.floor(Ua/2),Hn,Ua,ma-Hn);let aa=Math.round(zt.valToPos(ra[da],zt.series[Vt].scale,!0)),bs=Math.round(zt.valToPos(ln[da],zt.series[Ut].scale,!0));if(yt){let vs=Math.min(aa,bs),hr=Math.max(aa,bs),Ss=Math.max(1,hr-vs);Un.rect(gn-Da,vs,ua,Ss),Fe===Br.CloseClose&&an>=0&&Ss>na*2&&Ln.rect(gn-Da+na,vs+na,ua-na*2,Ss-na*2)}else Un.rect(gn-Da,aa,Da,Ua),Un.rect(gn,bs,Da,Ua)}}Qn.save(),Qn.rect(zt.bbox.left,zt.bbox.top,zt.bbox.width,zt.bbox.height),Qn.clip(),Dt&&(Qn.fillStyle=Gr(He,ct),Qn.fill(Dn),Qn.fillStyle=Gr(Ge,ct),Qn.fill(dn),Qn.fillStyle=Gr(tt,ct),Qn.fill(Nn)),mt&&(Qn.fillStyle=He,Qn.fill(_t),Qn.fillStyle=Ge,Qn.fill(cn),Qn.fillStyle=tt,Qn.fill(vn),Qn.globalCompositeOperation="destination-out",Qn.fill(Ln)),Qn.restore()}}const wa=({data:K,id:_,timeRange:se,timeZone:xe,width:Fe,height:He,options:Ge,fieldConfig:tt,onChangeTimeRange:ct,replaceVariables:ht})=>{const{sync:mt,canAddAnnotations:yt,onThresholdsChange:Dt,canEditThresholds:bt,showThresholds:$t,onSplitOpen:Vt}=(0,ae.R9)(),Yt=(dn,Dn)=>(0,qr.a)({field:dn,rowIndex:Dn,splitOpenFn:Vt,range:se}),It=(0,rt.l4)(),Ut=(0,b.useMemo)(()=>vi(K.series,Ge,It,se),[K,Ge,It,se]),{renderers:wt,tweakScale:zt,tweakAxis:cn,shouldRenderPrice:_t}=(0,b.useMemo)(()=>{let dn=(na,Da)=>na,Dn=(na,Da)=>na,Nn={renderers:[],tweakScale:dn,tweakAxis:Dn,shouldRenderPrice:!1};if(!Ut)return Nn;const Ln=Ut.names;if(!Object.keys(Ln).length)return Nn;const{mode:Qn,candleStyle:Aa,colorStrategy:ra}=Ge,ln={...Ko,...Ge.colors};let{open:kn,high:ea,low:ja,close:$a,volume:Qa}=Ln;if(kn==null||$a==null)return Nn;let os=.5,Ia=-1,Wn=!1;if(Qa!=null&&Qn!==nr.Candles){let na=Ut.volume;if(na!=null){Wn=!0;let{fillOpacity:Da}=na.config.custom;Da&&(os=Da/100),Qn!==nr.Volume&&(na.config={...na.config},na.config.unit="short",na.display=(0,as.U)({field:na,theme:j.vc.theme2}),Dn=(da,gn)=>{if(gn.name===Ut.volume?.name){let yn=(an,Un)=>{let Hn=[],ma=an.series[Ia].max;for(let aa=0;aa<Un.length&&(Hn.push(Un[aa]),!(Un[aa]>ma));aa++);return Hn};da.space=20,da.filter=yn,da.ticks={...da.ticks,filter:yn}}return da},dn=(da,gn)=>(gn.name===Ut.volume?.name&&(da.range=(yn,an,Un)=>[0,Un*7]),da))}}let sn=Qn!==nr.Volume&&ea!=null&&ja!=null;if(!sn&&!Wn)return Nn;let ua={},Ua=[];return sn?ua={open:kn,high:ea,low:ja,close:$a}:Ua.push(kn,$a),Wn&&(ua.volume=Qa,ua.open=kn,ua.close=$a),{shouldRenderPrice:sn,renderers:[{fieldMap:ua,indicesOnly:Ua,init:(na,Da)=>{Ia=Da.volume,na.addHook("drawAxes",Td({mode:Qn,fields:Da,upColor:j.vc.theme2.visualization.getColorByName(ln.up),downColor:j.vc.theme2.visualization.getColorByName(ln.down),flatColor:j.vc.theme2.visualization.getColorByName(ln.flat),volumeAlpha:os,colorStrategy:ra,candleStyle:Aa,flatAsUp:!0}))}}],tweakScale:dn,tweakAxis:Dn}},[Ge,K.structureRev,K.series.length]);if(!Ut)return b.createElement(Z.Z,{panelId:_,fieldConfig:tt,data:K,needsTimeField:!0,needsNumberField:!0});if(_t)for(let dn in wt[0].fieldMap){let Dn=Ut[dn];Dn.config={...Dn.config,custom:{...Dn.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const vn=Boolean(yt&&yt());return b.createElement(ii.p,{frames:[Ut.frame],structureRev:K.structureRev,timeRange:se,timeZone:xe,width:Fe,height:He,legend:Ge.legend,renderers:wt,tweakAxis:cn,tweakScale:zt,options:Ge},(dn,Dn)=>(Dn.fields.forEach(Nn=>{Nn.getLinks=(0,fo.oB)(Dn,Nn,Nn.state.scopedVars,ht,xe)}),b.createElement(b.Fragment,null,b.createElement(No.R,{config:dn,onZoom:ct}),b.createElement(qt.i,{data:Dn,config:dn,mode:Tt.f3.Multi,sync:mt,timeZone:xe}),K.annotations&&b.createElement(mi,{annotations:K.annotations,config:dn,timeZone:xe}),vn?b.createElement(eo,{data:Dn,timeZone:xe,config:dn},({startAnnotating:Nn})=>b.createElement(Ba,{data:Dn,config:dn,timeZone:xe,replaceVariables:ht,defaultItems:vn?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Ln,Qn)=>{Qn&&Nn({coords:Qn.coords})}}]}]:[]})):b.createElement(Ba,{data:Dn,config:dn,timeZone:xe,replaceVariables:ht,defaultItems:[]}),K.annotations&&b.createElement(xl,{config:dn,exemplars:K.annotations,timeZone:xe,getFieldLinks:Yt}),(bt&&Dt||$t)&&b.createElement(pi,{config:dn,fieldConfig:tt,onThresholdsChange:bt?Dt:void 0}),b.createElement(Hr,{config:dn,onChangeTimeRange:ct}))))};class Id{getSuggestionsForData(_){const{dataSummary:se}=_;if(!_.data?.series||!se.hasData||se.timeFieldCount<1||se.numberFieldCount<2||se.numberFieldCount>10)return;const xe=vi(_.data.series,xr,Ke.v.theme2);if(!xe||xe.open===xe.high&&xe.open===xe.low)return;_.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Oa.y.Candlestick,options:xr,fieldConfig:{defaults:{},overrides:[]},score:xe.autoOpenClose?ka._.Good:ka._.Best})}}const Rd=[{label:"Candles",value:nr.Candles},{label:"Volume",value:nr.Volume},{label:"Both",value:nr.CandlesVolume}],As=[{label:"Candles",value:$o.Candles},{label:"OHLC Bars",value:$o.OHLCBars}],Ad=[{label:"Since Open",value:Br.OpenClose},{label:"Since Prior Close",value:Br.CloseClose}],Ld=K=>K.type===zn.fS.number;function ho(K,_,se){let xe="Auto ";if(se){const Fe=se[_.key];Fe?.config?(xe+="= "+(0,xa.C)(Fe),Fe===se?.open&&_.key!=="open"&&(xe+=` (${_.defaults.join(",")})`)):xe+=`(${_.defaults.join(",")})`}K.addFieldNamePicker({path:`fields.${_.key}`,name:_.name,description:_.description,settings:{filter:Ld,placeholderText:xe}})}const Bd=new fe.c(wa).useFieldConfig((0,_r.F)(_r.r)).setPanelOptions((K,_)=>{const se=_.options??xr,xe=vi(_.data,se,Ke.v.theme2);K.addRadio({path:"mode",name:"Mode",description:"",defaultValue:xr.mode,settings:{options:Rd}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:xr.candleStyle,settings:{options:As},showIf:Fe=>Fe.mode!==nr.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:xr.colorStrategy,settings:{options:Ad}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:Ko.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:Ko.down}),ho(K,wr.open,xe),se.mode!==nr.Volume&&(ho(K,wr.high,xe),ho(K,wr.low,xe)),ho(K,wr.close,xe),se.mode!==nr.Candles&&ho(K,wr.volume,xe),K.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:xr.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),Ms.J(K)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new Id);var sf=e(61962),wd=e(43993);const Nd=Object.freeze([0,0]);var vo=(K=>(K.List="list",K.Previews="previews",K))(vo||{});const Yr={layout:"list",maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},Ol=K=>({dashlistSectionHeader:D.css`
    padding: ${K.spacing(.25,1)};
    margin-right: ${K.spacing(1)};
  `,dashlistSection:D.css`
    margin-bottom: ${K.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:D.css`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${K.colors.border.weak};
    margin-right: ${K.spacing(1)};
    padding: ${K.spacing(1)};

    &:hover {
      a {
        color: ${K.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistStar:D.css`
    align-self: center;
    margin-right: 0px;
    color: ${K.colors.secondary.text};
    z-index: 1;
  `,dashlistFolder:D.css`
    color: ${K.colors.text.secondary};
    font-size: ${K.typography.bodySmall.fontSize};
    line-height: ${K.typography.body.lineHeight};
  `,dashlistTitle:D.css`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:D.css`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:D.css`
    position: relative;
    list-style: none;
  `,gridContainer:D.css`
    display: grid;
    gap: ${K.spacing(1)};
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    list-style: none;
    margin-bottom: ${K.spacing(1)};
  `});async function Ud(K,_){let se=Promise.resolve([]);if(K.showStarred){const mt={limit:K.maxItems,starred:"true"};se=(0,Le.i)().search(mt)}let xe=Promise.resolve([]),Fe=[];if(K.showRecentlyViewed){let mt=await Qe.Z.getDashboardOpened();Fe=(0,A.take)(mt,K.maxItems),xe=(0,Le.i)().search({dashboardUIDs:Fe,limit:K.maxItems})}let He=Promise.resolve([]);if(K.showSearch){const mt={limit:K.maxItems,query:_(K.query,{},"text"),folderIds:K.folderId,tag:K.tags.map(yt=>_(yt,{},"text")),type:"dash-db"};He=(0,Le.i)().search(mt)}const[Ge,tt,ct]=await Promise.all([se,He,xe]);let ht=new Map;for(const mt of Fe){const yt=ct.find(Dt=>Dt.uid===mt);yt&&ht.set(mt,{...yt,isRecent:!0})}return tt.forEach(mt=>{mt.uid&&(ht.has(mt.uid)?ht.get(mt.uid).isSearchResult=!0:ht.set(mt.uid,{...mt,isSearchResult:!0}))}),Ge.forEach(mt=>{mt.uid&&(ht.has(mt.uid)?ht.get(mt.uid).isStarred=!0:ht.set(mt.uid,{...mt,isStarred:!0}))}),ht}function Fd(K){const[_,se]=(0,b.useState)(new Map),xe=(0,_e.useDispatch)();(0,b.useEffect)(()=>{Ud(K.options,K.replaceVariables).then(It=>{se(It)})},[K.options,K.replaceVariables,K.renderCounter]);const Fe=async(It,Ut)=>{const{uid:wt,title:zt,url:cn}=Ut;It.preventDefault(),It.stopPropagation();const _t=await(0,ba.h4)().starDashboard(Ut.id.toString(),Ut.isStarred),vn=new Map(_);vn.set(Ut?.uid??"",{...Ut,isStarred:_t}),se(vn),xe((0,sf.OQ)({id:wt??"",title:zt,url:cn,isStarred:_t}))},[He,Ge,tt]=(0,b.useMemo)(()=>{const It=[..._.values()];return[It.filter(Ut=>Ut.isStarred).sort((Ut,wt)=>Ut.title.localeCompare(wt.title)),It.filter(Ut=>Ut.isRecent),It.filter(Ut=>Ut.isSearchResult).sort((Ut,wt)=>Ut.title.localeCompare(wt.title))]},[_]),{showStarred:ct,showRecentlyViewed:ht,showHeadings:mt,showSearch:yt,layout:Dt}=K.options,bt=[{header:"Starred dashboards",dashboards:He,show:ct},{header:"Recently viewed dashboards",dashboards:Ge,show:ht},{header:"Search",dashboards:tt,show:yt}],$t=(0,rt.wW)(Ol),Vt=It=>b.createElement("ul",null,It.map(Ut=>b.createElement("li",{className:$t.dashlistItem,key:`dash-${Ut.uid}`},b.createElement("div",{className:$t.dashlistLink},b.createElement("div",{className:$t.dashlistLinkBody},b.createElement("a",{className:$t.dashlistTitle,href:Ut.url},Ut.title),Ut.folderTitle&&b.createElement("div",{className:$t.dashlistFolder},Ut.folderTitle)),b.createElement(Wd,{"aria-label":`Star dashboard "${Ut.title}".`,className:$t.dashlistStar,enabled:{name:"favorite",type:"mono"},disabled:{name:"star",type:"default"},checked:Ut.isStarred,onClick:wt=>Fe(wt,Ut)}))))),Yt=It=>b.createElement("ul",{className:$t.gridContainer},It.map(Ut=>b.createElement("li",{key:Ut.uid},b.createElement(wd.K,{item:Ut}))));return b.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},bt.map(({show:It,header:Ut,dashboards:wt},zt)=>It&&b.createElement("div",{className:$t.dashlistSection,key:`dash-group-${zt}`},mt&&b.createElement("h6",{className:$t.dashlistSectionHeader},Ut),Dt===vo.Previews?Yt(wt):Vt(wt))))}function Wd({enabled:K,disabled:_,checked:se,onClick:xe,className:Fe,"aria-label":He,...Ge}){const tt=(0,b.useCallback)(yt=>{yt.preventDefault(),yt.stopPropagation(),xe?.(yt)},[xe]),ht={...Ge,...se?K:_},mt=(0,rt.wW)($d);return b.createElement("label",{className:mt.wrapper},b.createElement("input",{type:"checkbox",defaultChecked:se,onClick:tt,className:mt.checkBox,"aria-label":He}),b.createElement($n.J,{className:(0,D.cx)(mt.icon,Fe),...ht}))}const $d=(0,ds.B)(K=>({wrapper:(0,D.css)({display:"flex",alignSelf:"center",cursor:"pointer",zIndex:1}),checkBox:(0,D.css)({appearance:"none","&:focus-visible + *":{...(0,Ks.getFocusStyles)(K),borderRadius:K.shape.borderRadius(1)}}),icon:(0,D.css)({marginBottom:0,verticalAlign:"baseline",display:"flex"})})),Kd=new fe.c(Fd).setPanelOptions(K=>{Ke.v.featureToggles.dashboardPreviews&&K.addRadio({path:"layout",name:"Layout",defaultValue:vo.List,settings:{options:[{value:vo.List,label:"List"},{value:vo.Previews,label:"Preview"}]}}),K.addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:Yr.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:Yr.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:Yr.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:Yr.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:Yr.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:Yr.query}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function({value:se,onChange:xe}){return b.createElement(bn,{initialFolderId:se,onChange:Fe=>xe(Fe?.id),extraFolders:[xn,Cn]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:Yr.tags,editor(_){return b.createElement(Me.B,{tags:_.value,onChange:_.onChange})}})}).setMigrationHandler(K=>{const _={showStarred:K.options.showStarred??K.starred,showRecentlyViewed:K.options.showRecentlyViewed??K.recent,showSearch:K.options.showSearch??K.search,showHeadings:K.options.showHeadings??K.headings,maxItems:K.options.maxItems??K.limit,query:K.options.query??K.query,folderId:K.options.folderId??K.folderId,tags:K.options.tags??K.tags};return parseFloat(K.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(Fe=>delete K[Fe]),_});class Vd extends b.Component{constructor(){super(...arguments),this.subscription=new fa.w0,this.state={}}componentDidMount(){const{eventBus:_}=this.props;this.subscription.add(_.subscribe(Sa.es,se=>{this.setState({event:se})})),this.subscription.add(_.subscribe(Sa.xH,se=>{this.setState({event:se})})),this.subscription.add(_.subscribe(Ca.IA,se=>{this.setState({event:se})})),this.subscription.add(_.subscribe(Ca.oi,se=>{this.setState({event:se})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:_}=this.state;if(!_)return b.createElement("div",null,"no events yet");const{type:se,payload:xe,origin:Fe}=_;return b.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},b.createElement("h3",null,"Origin: ",Fe?.path),b.createElement("span",null,"Type: ",se),Boolean(xe)&&b.createElement(b.Fragment,null,b.createElement("pre",null,JSON.stringify(xe.point,null,"  ")),xe.data&&b.createElement(Pn.H,{data:xe.data,rowIndex:xe.rowIndex,columnIndex:xe.columnIndex})))}}var zd=e(98212);let Ei=100;class Hd extends b.PureComponent{constructor(_){super(_),this.history=new zd.d({capacity:40,append:"head"}),this.eventObserver={next:xe=>{const Fe=xe.origin;this.history.add({key:Ei++,type:xe.type,path:Fe?.path,payload:xe.payload}),this.setState({counter:Ei})}},this.state={counter:Ei};const se=[];se.push(_.eventBus.getStream(Sa.es).subscribe(this.eventObserver)),se.push(_.eventBus.getStream(Sa.xH).subscribe(this.eventObserver)),se.push(_.eventBus.getStream(Sa.v9).subscribe(this.eventObserver)),this.subs=se}componentWillUnmount(){for(const _ of this.subs)_.unsubscribe()}render(){return b.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((_,se)=>b.createElement("div",{key:_.key},JSON.stringify(_.path)," ",_.type," / X:",JSON.stringify(_.payload.x)," / Y:",JSON.stringify(_.payload.y))))}}class kd extends b.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(_){const{data:se,options:xe}=this.props;if(_.data!==se&&(this.counters.dataChanged++,xe.counters?.schemaChanged)){const Fe=_.data?.series,He=se.series;He&&Fe&&((0,er.nl)(He,Fe,er.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:_,options:se}=this.props,xe=se.counters??{};this.counters.render++;const Fe=Date.now(),He=Fe-this.lastRender;this.lastRender=Fe;const Ge=Ps.TB.get(Ps.gz.lastNotNull);return b.createElement("div",null,b.createElement("div",null,b.createElement(zr.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters}),b.createElement("span",null,xe.render&&b.createElement("span",null,"Render: ",this.counters.render,"\xA0"),xe.dataChanged&&b.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),xe.schemaChanged&&b.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),b.createElement("span",null,"TIME: ",He,"ms"))),_.series&&_.series.map((tt,ct)=>b.createElement("div",{key:`${ct}/${tt.refId}`},b.createElement("h4",null,(0,xa.n)(tt,ct)," (",tt.length,")"),b.createElement("table",{className:"filter-table"},b.createElement("thead",null,b.createElement("tr",null,b.createElement("td",null,"Field"),b.createElement("td",null,"Type"),b.createElement("td",null,"Last"))),b.createElement("tbody",null,tt.fields.map((ht,mt)=>{const yt=Ge.reduce(ht,!1,!1)[Ge.id];return b.createElement("tr",{key:`${mt}/${ht.name}`},b.createElement("td",null,(0,xa.C)(ht,tt,_.series)),b.createElement("td",null,ht.type),b.createElement("td",null,`${yt}`))}))))))}}var Gd=e(25474);function rf(K){const _=(0,ae.R9)(),se=xe=>{_.onInstanceStateChange({name:xe.currentTarget.value})};return b.createElement(b.Fragment,null,b.createElement(lr.g,{label:"State name"},b.createElement(Gd.I,{value:_.instanceState?.name??"",onChange:se})))}function Yd({value:K,context:_,onChange:se,item:xe}){return b.createElement("div",null,"Current value: ",_.instanceState?.name," ")}var pa=(K=>(K.Render="render",K.Events="events",K.Cursor="cursor",K.State="State",K.ThrowError="ThrowError",K))(pa||{});class tn extends b.Component{render(){const{options:_}=this.props;switch(_.mode){case pa.Events:return b.createElement(Hd,{eventBus:this.props.eventBus});case pa.Cursor:return b.createElement(Vd,{eventBus:this.props.eventBus});case pa.State:return b.createElement(rf,{...this.props});case pa.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return b.createElement(kd,{...this.props})}}}const Vs=new fe.c(tn).useFieldConfig().setPanelOptions(K=>{K.addSelect({path:"mode",name:"Mode",defaultValue:pa.Render,settings:{options:[{label:"Render",value:pa.Render},{label:"Events",value:pa.Events},{label:"Cursor",value:pa.Cursor},{label:"Cursor",value:pa.Cursor},{label:"Share state",value:pa.State},{label:"Throw error",value:pa.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:_})=>_===pa.State,editor:Yd}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:_})=>_===pa.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:_})=>_===pa.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:_})=>_===pa.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var Tl=e(35450);const Il=K=>b.createElement(Tl.Z,{data:K.data.series[0],app:ce.zj.Unknown,flameGraphHeight:K.height}),Rl=new fe.c(Il);var jd=e(7149),Qd=e(40008);const Al=(K,_)=>{const se="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",xe=_?se:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",Fe=_?se:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",He=K.isDark?xe:Fe;return`
      background-color: ${K.colors.background.secondary};
      margin-right: ${K.spacing(4)};
      border: 1px solid ${K.colors.border.weak};
      border-bottom-left-radius: ${K.shape.borderRadius(2)};
      border-bottom-right-radius: ${K.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${K.breakpoints.down("xxl")} {
        margin-right: ${K.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${He};
      }
`},Eo=(K,_)=>D.css`
  color: ${_?K.v1.palette.blue95:K.colors.text.secondary};

  ${K.breakpoints.down("sm")} {
    display: none;
  }
`,Ll=D.css`
  padding: 16px;
`,Bl=({card:K})=>{const _=(0,rt.wW)((0,b.useCallback)(xe=>Zd(xe,K.done),[K.done])),se=(0,rt.wW)((0,b.useCallback)(xe=>Eo(xe,K.done),[K.done]));return b.createElement("div",{className:_.card},b.createElement("div",{className:Ll},b.createElement("a",{href:`${K.href}?utm_source=grafana_gettingstarted`,className:_.url},b.createElement("div",{className:_.heading},K.done?"complete":K.heading),b.createElement("h4",{className:_.title},K.title),b.createElement("div",null,b.createElement($n.J,{className:se,name:K.icon,size:"xxl"})))),b.createElement("a",{href:`${K.learnHref}?utm_source=grafana_gettingstarted`,className:_.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",b.createElement($n.J,{name:"external-link-alt"})))},Zd=(K,_)=>({card:D.css`
      ${Al(K,_)}

      min-width: 230px;

      ${K.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:D.css`
      text-transform: uppercase;
      color: ${_?K.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${K.spacing(2)};
    `,title:D.css`
      margin-bottom: ${K.spacing(2)};
    `,url:D.css`
      display: inline-block;
    `,learnUrl:D.css`
      border-top: 1px solid ${K.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var to=e(58379);const Jd=({card:K})=>{const _=(0,rt.wW)((0,b.useCallback)(xe=>Nr(xe,K.done),[K.done])),se=(0,rt.wW)((0,b.useCallback)(xe=>Eo(xe,K.done),[K.done]));return b.createElement("a",{className:_.card,target:"_blank",rel:"noreferrer",href:`${K.href}?utm_source=grafana_gettingstarted`,onClick:xe=>Xd(xe,K)},b.createElement("div",{className:Ll},b.createElement("div",{className:_.type},K.type),b.createElement("div",{className:_.heading},K.done?"complete":K.heading),b.createElement("h4",{className:_.cardTitle},K.title),b.createElement("div",{className:_.info},K.info),b.createElement($n.J,{className:se,name:K.icon,size:"xxl"})))},Xd=(K,_)=>{K.preventDefault(),to.Z.get(_.key)||to.Z.set(_.key,!0)},Nr=(K,_)=>({card:D.css`
      ${Al(K,_)}
      width: 460px;
      min-width: 460px;

      ${K.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${K.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:D.css`
      color: ${K.colors.primary.text};
      text-transform: uppercase;
    `,heading:D.css`
      text-transform: uppercase;
      color: ${K.colors.primary.text};
      margin-bottom: ${K.spacing(1)};
    `,cardTitle:D.css`
      margin-bottom: ${K.spacing(2)};
    `,info:D.css`
      margin-bottom: ${K.spacing(2)};
    `,status:D.css`
      display: flex;
      justify-content: flex-end;
    `}),Vo=({step:K})=>{const _=(0,rt.wW)(no);return b.createElement("div",{className:_.setup},b.createElement("div",{className:_.info},b.createElement("h2",{className:_.title},K.title),b.createElement("p",null,K.info)),b.createElement("div",{className:_.cards},K.cards.map((se,xe)=>{const Fe=`${se.title}-${xe}`;return se.type==="tutorial"?b.createElement(Jd,{key:Fe,card:se}):b.createElement(Bl,{key:Fe,card:se})})))},no=K=>({setup:D.css`
      display: flex;
      width: 95%;
    `,info:D.css`
      width: 172px;
      margin-right: 5%;

      ${K.breakpoints.down("xxl")} {
        margin-right: ${K.spacing(4)};
      }
      ${K.breakpoints.down("sm")} {
        display: none;
      }
    `,title:D.css`
      color: ${K.v1.palette.blue95};
    `,cards:D.css`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${K.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var _d=e(91162);const wl="Grafana fundamentals",of="Create users and teams",yi="getting.started.",yo=`${yi}${wl.replace(" ","-").trim().toLowerCase()}`,Nl=`${yi}${of.replace(" ","-").trim().toLowerCase()}`,qd=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:wl,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(to.Z.get(yo)),key:yo,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(K=>{K((0,_d.ak)().getMetricSources().filter(_=>_.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Le.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:Nl,check:()=>Promise.resolve(to.Z.get(Nl)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const K=await(0,Le.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(K.length>0)},done:!1}]}];class Pi extends b.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:qd()},this.onForwardClick=()=>{this.setState(_=>({currentStep:_.currentStep+1}))},this.onPreviousClick=()=>{this.setState(_=>({currentStep:_.currentStep-1}))},this.dismiss=()=>{const{id:_}=this.props,se=(0,ba.h4)().getCurrent(),xe=se?.getPanelById(_);se?.removePanel(xe),Le.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(Fe=>{be.Vt.user.helpFlags1=Fe.helpFlags1})}}async componentDidMount(){const{steps:_}=this.state,se=_.map(async Fe=>{const He=Fe.cards.map(tt=>tt.check().then(ct=>({...tt,done:ct}))),Ge=await Promise.all(He);return{...Fe,done:Ge.every(tt=>tt.done),cards:Ge}}),xe=await Promise.all(se);this.setState({currentStep:xe[0].done?1:0,steps:xe,checksDone:!0})}render(){const{checksDone:_,currentStep:se,steps:xe}=this.state,Fe=eu(),He=xe[se];return b.createElement("div",{className:Fe.container},_?b.createElement(b.Fragment,null,b.createElement(je.zx,{variant:"secondary",fill:"text",className:Fe.dismiss,onClick:this.dismiss},"Remove this panel"),se===xe.length-1&&b.createElement(je.zx,{className:(0,D.cx)(Fe.backForwardButtons,Fe.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),b.createElement("div",{className:Fe.content},b.createElement(Vo,{step:He})),se<xe.length-1&&b.createElement(je.zx,{className:(0,D.cx)(Fe.backForwardButtons,Fe.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):b.createElement("div",{className:Fe.loading},b.createElement("div",{className:Fe.loadingText},"Checking completed setup steps"),b.createElement(Qd.$,{size:24,inline:!0})))}}const eu=(0,ds.B)(()=>{const K=Ke.v.theme2;return{container:D.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${K.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${K.spacing(4)} ${K.spacing(2)} 0;
    `,content:D.css`
      label: content;
      display: flex;
      justify-content: center;

      ${K.breakpoints.down("xxl")} {
        margin-left: ${K.spacing(3)};
        justify-content: flex-start;
      }
    `,header:D.css`
      label: header;
      margin-bottom: ${K.spacing(3)};
      display: flex;
      flex-direction: column;

      ${K.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:D.css`
      height: 58px;
      padding-right: ${K.spacing(2)};
      display: none;

      ${K.breakpoints.up("md")} {
        display: block;
      }
    `,heading:D.css`
      label: heading;
      margin-right: ${K.spacing(3)};
      margin-bottom: ${K.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${K.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:D.css`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:D.css`
      left: 10px;

      ${K.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:D.css`
      right: 10px;

      ${K.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:D.css`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${K.spacing(1)};
    `,loading:D.css`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:D.css`
      margin-right: ${K.spacing(1)};
    `}}),Ci=new fe.c(Pi).setNoPadding();var js=e(15128),Ul=e(43921);const tu=Object.freeze([0,0]),xi={bucketOffset:0},ao={fillOpacity:80,gradientMode:Tt.FI.None,lineWidth:1};function nu(K,_){return Math.floor(K/_)*_}function au(K,_){return Math.ceil(K/_)*_}function Di(K){return K.fields[1].values.get(0)-K.fields[0].values.get(0)}const Na=(K,_)=>{let se=new Cr.U,xe=Di(K),Fe=(yt,Dt,bt,$t,Vt,Yt)=>{let It=yt.axes[Dt]._space,Ut=yt.valToPos(yt.data[0][0]+xe,"x")-yt.valToPos(yt.data[0][0],"x"),wt=yt.data[0][0],zt=yt.data[0][yt.data[0].length-1]+xe,cn=[],_t=Math.ceil(It/Ut);for(let vn=0,dn=wt;dn<=zt;vn++,dn+=xe)!(vn%_t)&&cn.push(dn);return cn};se.addScale({scaleKey:"x",isTime:!1,distribution:Tt.wf.Linear,orientation:Tt.wN.Horizontal,direction:Tt.bQ.Right,range:(yt,Dt,bt)=>{let $t=yt.data[0][0],Vt=yt.data[0][yt.data[0].length-1];return bt===Vt?bt+=xe:bt=au(bt,xe),Dt>$t&&(Dt=nu(Dt,xe)),[Dt,bt]}}),se.addScale({scaleKey:"y",isTime:!1,distribution:Tt.wf.Linear,orientation:Tt.wN.Vertical,direction:Tt.bQ.Up});const He=K.fields[0].display,Ge=yt=>(0,On.zc)(He(yt));se.addAxis({scaleKey:"x",isTime:!1,placement:Tt.LB.Bottom,incrs:js.Zi,splits:Fe,values:(yt,Dt)=>{const bt=Dt.map(Ge),$t=bt.reduce((Ut,wt)=>Math.max((0,Pe.X1)(wt,Ue.gD).width,Ut),0),Vt=10,Yt=yt.bbox.width/(($t+Vt)*devicePixelRatio),It=Math.ceil(bt.length/Yt);return bt.map((Ut,wt)=>wt%It===0?Ut:null)},theme:_});let ct=K.fields[2].display;se.addAxis({scaleKey:"y",isTime:!1,placement:Tt.LB.Left,formatValue:(yt,Dt)=>(0,On.zc)(ct(yt,Dt)),theme:_}),se.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let ht=jn.Z.paths.bars({align:1,size:[1,1/0]}),mt=0;for(let yt=2;yt<K.fields.length;yt++){const Dt=K.fields[yt];Dt.state=Dt.state??{},Dt.state.seriesIndex=mt++;const bt={...ao,...Dt.config.custom},$t="y",Vt=(0,Fn.fD)(Dt),It=(0,Fn.YO)(Dt,_).color;se.addSeries({scaleKey:$t,lineWidth:bt.lineWidth,lineColor:It,fillOpacity:bt.fillOpacity,theme:_,colorMode:Vt,pathBuilder:ht,show:!bt.hideFrom?.viz,gradientMode:bt.gradientMode,thresholds:Dt.config.thresholds,hardMin:Dt.config.min,hardMax:Dt.config.max,softMin:bt.axisSoftMin,softMax:bt.axisSoftMax,dataFrameFieldIndex:Dt.state.origin})}return se},su=K=>{let _=[];for(const se of K.fields)se.name!==js.cO&&_.push(se.values.toArray());for(let se=1;se<_.length;se++){let xe=_[se];for(let Fe=0;Fe<xe.length;Fe++)xe[Fe]===0&&(xe[Fe]=null)}return _};class Fl extends b.Component{constructor(_){super(_),this.state=this.prepState(_)}prepState(_,se=!0){let xe=null;const{alignedFrame:Fe}=_;return Fe&&(xe={alignedData:su(Fe)},se&&(xe.config=Na(Fe,this.props.theme))),xe}renderLegend(_){const{legend:se}=this.props;return!_||se.showLegend===!1?null:b.createElement(ft.l,{data:this.props.rawSeries,config:_,maxHeight:"35%",maxWidth:"60%",...se})}componentDidUpdate(_){const{structureRev:se,alignedFrame:xe,bucketSize:Fe}=this.props;if(xe!==_.alignedFrame){let He=this.prepState(this.props,!1);He&&(Fe!==_.bucketSize||this.props.options!==_.options||this.state.config===void 0||se!==_.structureRev||!se)&&(He.config=Na(xe,this.props.theme)),He&&this.setState(He)}}render(){const{width:_,height:se,children:xe,alignedFrame:Fe}=this.props,{config:He}=this.state;return He?b.createElement(et.AY,{width:_,height:se,legend:this.renderLegend(He)},(Ge,tt)=>b.createElement(Ul.N,{config:this.state.config,data:this.state.alignedData,width:Ge,height:tt,timeRange:null},xe?xe(He,Fe):null)):null}}const ru=({data:K,options:_,width:se,height:xe})=>{const Fe=(0,rt.l4)(),He=(0,b.useMemo)(()=>{if(!K?.series?.length)return;if(K.series.forEach((ct,ht)=>{ct.fields.forEach((mt,yt)=>{mt.state={...mt.state,origin:{frameIndex:ht,fieldIndex:yt}}})}),K.series.length===1){const ct=(0,js.qr)(K.series[0]);if(ct)return(0,js.zM)(ct)}const tt=(0,js.gY)(K.series,_);if(tt)return(0,js.zM)(tt,Fe)},[K.series,_,Fe]);if(!He||!He.fields.length)return b.createElement("div",{className:"panel-empty"},b.createElement("p",null,"No histogram found in response"));const Ge=Di(He);return b.createElement(Fl,{options:_,theme:Fe,legend:_.legend,rawSeries:K.series,structureRev:K.structureRev,width:se,height:xe,alignedFrame:He,bucketSize:Ge},(tt,ct)=>null)};function zo(K){if(K?.length!==1)return!1;const _=K[0];if(_.fields.length<3||!(0,js.Ok)(_.fields[0].name)||!(0,js.kl)(_.fields[1].name))return!1;for(const se of _.fields)if(se.type!==zn.fS.number)return!1;return!0}const ou=new fe.c(ru).setPanelOptions(K=>{K.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(_,se)=>zo(se)}).addNumberInput({path:"bucketSize",name:js.py.bucketSize.name,description:js.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:xi.bucketSize,showIf:(_,se)=>!zo(se)}).addNumberInput({path:"bucketOffset",name:js.py.bucketOffset.name,description:js.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:xi.bucketOffset,showIf:(_,se)=>!zo(se)}).addBooleanSwitch({path:"combine",name:js.py.combine.name,description:js.py.combine.description,defaultValue:xi.combine,showIf:(_,se)=>!zo(se)}),Ms.J(K)}).useFieldConfig({standardOptions:{[ns.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:qn.S.PaletteClassic}}},useCustomConfig:K=>{const _=ao;K.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:_.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:_.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:Is.q.fillGradient[0].value,settings:{options:Is.q.fillGradient}}),qs.B(K)}});var cr=e(62626),bi=e(38835);const Wl=[{label:"Grafana",value:cr.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:cr.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:cr.z.Plugin,description:"Plugins with live support"}];class iu extends b.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=_=>{_.value&&this.props.onChange({scope:_.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=_=>{const se={scope:this.props.value?.scope,path:void 0};_.value&&(se.namespace=_.value),this.props.onChange(se)},this.onPathChanged=_=>{const{value:se,onChange:xe}=this.props,Fe={scope:se.scope,namespace:se.namespace};_.value&&(Fe.path=_.value),xe(Fe)}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(_){this.props.value!==_.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:_,paths:se}=this.state,{scope:xe,namespace:Fe,path:He}=this.props.value,Ge=$l(j.vc.theme2);return b.createElement(b.Fragment,null,b.createElement(Jt.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),b.createElement("div",null,b.createElement("div",{className:Ge.dropWrap},b.createElement(bi._,null,"Scope"),b.createElement(Et.Ph,{options:Wl,value:Wl.find(tt=>tt.value===xe),onChange:this.onScopeChanged})),xe&&b.createElement("div",{className:Ge.dropWrap},b.createElement(bi._,null,"Namespace"),b.createElement(Et.Ph,{options:_,value:_.find(tt=>tt.value===Fe)??(Fe?{label:Fe,value:Fe}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),xe&&Fe&&b.createElement("div",{className:Ge.dropWrap},b.createElement(bi._,null,"Path"),b.createElement(Et.Ph,{options:se,value:lu(se,He),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function lu(K,_){const se=K.find(xe=>xe.value===_);if(se)return se;if(_)return{label:_,value:_}}const $l=(0,ds.B)(K=>({dropWrap:D.css`
    margin-bottom: ${K.spacing(1)};
  `}));var Kl=e(49922),Mi=e(72274),Ho=e(16558),Qs=e(57172),zs=e(28625),_a=e(85854),cu=e(93163);function Vl(K){const{data:_,height:se,width:xe,options:Fe,fieldConfig:He,id:Ge}=K,tt=(0,rt.l4)(),ct=(0,ae.R9)(),ht=_.series,mt=ht.filter(zt=>zt.meta?.custom?.parentRowIndex===void 0),yt=ht.filter(zt=>zt.meta?.custom?.parentRowIndex!==void 0),Dt=mt?.length,bt=mt[0]?.fields.length,$t=Po(mt,Fe),Vt=mt[$t];let Yt=se,It=yt;if(!Dt||!bt)return b.createElement(Z.Z,{panelId:Ge,fieldConfig:He,data:_});if(Dt>1){const zt=tt.spacing.gridSize*tt.components.height.md,cn=tt.spacing.gridSize;Yt=se-zt-cn,It=yt.filter(_t=>_t.refId===Vt.refId)}const Ut=b.createElement(cu.i,{height:Yt,width:xe,data:Vt,noHeader:!Fe.showHeader,showTypeIcons:Fe.showTypeIcons,resizable:!0,initialSortBy:Fe.sortBy,onSortByChange:zt=>du(zt,K),onColumnResize:(zt,cn)=>zl(zt,cn,K),onCellFilterAdded:ct.onAddAdHocFilter,footerOptions:Fe.footer,enablePagination:Fe.footer?.enablePagination,subData:It});if(Dt===1)return Ut;const wt=mt.map((zt,cn)=>({label:(0,xa.n)(zt),value:cn}));return b.createElement("div",{className:kl.wrapper},Ut,b.createElement("div",{className:kl.selectWrapper},b.createElement(Et.Ph,{options:wt,value:wt[$t],onChange:zt=>Hl(zt,K)})))}function Po(K,_){return _.frameIndex>0&&_.frameIndex<K.length?_.frameIndex:0}function zl(K,_,se){const{fieldConfig:xe}=se,{overrides:Fe}=xe,He=_a.mi.byName,Ge="custom.width",tt=Fe.find(ct=>ct.matcher.id===He&&ct.matcher.options===K);if(tt){const ct=tt.properties.find(ht=>ht.id===Ge);ct?ct.value=_:tt.properties.push({id:Ge,value:_})}else Fe.push({matcher:{id:He,options:K},properties:[{id:Ge,value:_}]});se.onFieldConfigChange({...xe,overrides:Fe})}function du(K,_){_.onOptionsChange({..._.options,sortBy:K})}function Hl(K,_){_.onOptionsChange({..._.options,frameIndex:K.value||0})}const kl={wrapper:D.css`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,noData:D.css`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
  `,selectWrapper:D.css`
    padding: 8px 8px 0px 8px;
  `};var Dr=(K=>(K.Raw="raw",K.JSON="json",K.Auto="auto",K.None="none",K))(Dr||{});class lf extends b.PureComponent{constructor(_){super(_),this.styles=Si(Ke.v.theme2),this.streamObserver={next:se=>{(0,cr.se)(se)?this.setState({status:se,changed:Date.now()}):(0,cr.RL)(se)?this.setState({message:se.message,changed:Date.now()}):console.log("ignore",se)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=se=>{const{options:xe,onOptionsChange:Fe}=this.props;try{const He=JSON.parse(se);Fe({...xe,json:He})}catch(He){console.log("Error reading JSON",He)}},this.onPublishClicked=async()=>{const{addr:se}=this.state;if(!se){console.log("invalid address");return}const xe=this.props.options?.json;if(!xe){console.log("nothing to publish");return}const Fe=await(0,Mi.gj)().publish(se,xe);console.log("onPublishClicked (response from publish)",Fe)},this.isValid=!!(0,Mi.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(_){this.props.options?.channel!==_.options?.channel&&this.loadChannel()}async loadChannel(){const _=this.props.options?.channel;if(!(0,cr.nU)(_)){console.log("INVALID",_),this.unsubscribe(),this.setState({addr:void 0});return}if((0,A.isEqual)(_,this.state.addr)){console.log("Same channel",this.state.addr);return}const se=(0,Mi.gj)();if(!se){console.log("INVALID",_),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",_);try{this.subscription=se.getStream(_).subscribe(this.streamObserver),this.setState({addr:_,error:void 0})}catch(xe){this.setState({addr:void 0,error:xe})}}renderNotEnabled(){const _=`[feature_toggles]
    enable = live`;return b.createElement(Jt.b,{title:"Grafana Live",severity:"info"},b.createElement("p",null,"Grafana live requires a feature flag to run"),b.createElement("b",null,"custom.ini:"),b.createElement("pre",null,_))}renderMessage(_){const{options:se}=this.props,{message:xe}=this.state;if(!xe)return b.createElement("div",null,b.createElement("h4",null,"Waiting for data:"),se.channel?.scope,"/",se.channel?.namespace,"/",se.channel?.path);if(se.message===Dr.JSON)return b.createElement(Ho.g,{json:xe,open:5});if(se.message===Dr.Auto&&xe instanceof zs.Av){const Fe={series:(0,fo.SM)({data:[xe],theme:Ke.v.theme2,replaceVariables:Ge=>Ge,fieldConfig:{defaults:{},overrides:[]}}),state:Kl.Gu.Streaming},He={...this.props,options:{frameIndex:0,showHeader:!0}};return b.createElement(Vl,{...He,data:Fe,height:_})}return b.createElement("pre",null,JSON.stringify(xe))}renderPublish(_){const{options:se}=this.props;return b.createElement(b.Fragment,null,b.createElement(Qs.p,{height:_-32,language:"json",value:se.json?JSON.stringify(se.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),b.createElement("div",{style:{height:32}},b.createElement(je.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:_}=this.state;if(_?.state===cr.yS.Connected)return;let se="";return _&&(se=this.styles.status[_.state]),b.createElement("div",{className:(0,D.cx)(se,this.styles.statusWrap)},_?.state)}renderBody(){const{status:_}=this.state,{options:se,height:xe}=this.props;if(se.publish){if(se.message===Dr.None)return b.createElement("div",null,this.renderPublish(xe));const Fe=xe/2;return b.createElement("div",null,b.createElement("div",{style:{height:Fe,overflow:"hidden"}},b.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Fe))),b.createElement("div",null,this.renderPublish(Fe)))}return se.message===Dr.None?b.createElement("pre",null,JSON.stringify(_)):b.createElement("div",{style:{overflow:"hidden",height:xe}},b.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(xe)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:_,error:se}=this.state;return _?se?b.createElement("div",null,b.createElement("h2",null,"ERROR"),b.createElement("div",null,JSON.stringify(se))):b.createElement(b.Fragment,null,this.renderStatus(),this.renderBody()):b.createElement(Jt.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const Si=(0,ds.B)(K=>({statusWrap:D.css`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${K.components.panel.background};
    padding: 10px;
    z-index: ${K.zIndex.modal};
  `,status:{[cr.yS.Pending]:D.css`
      border: 1px solid ${K.v1.palette.orange};
    `,[cr.yS.Connected]:D.css`
      border: 1px solid ${K.colors.success.main};
    `,[cr.yS.Connecting]:D.css`
      border: 1px solid ${K.v1.palette.brandWarning};
    `,[cr.yS.Disconnected]:D.css`
      border: 1px solid ${K.colors.warning.main};
    `,[cr.yS.Shutdown]:D.css`
      border: 1px solid ${K.colors.error.main};
    `,[cr.yS.Invalid]:D.css`
      border: 1px solid red;
    `}})),uu=new fe.c(lf).setPanelOptions(K=>{K.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:iu,defaultValue:{}}),K.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:Dr.Raw,label:"Raw Text"},{value:Dr.JSON,label:"JSON"},{value:Dr.Auto,label:"Auto"},{value:Dr.None,label:"None"}]},defaultValue:Dr.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var rs=e(90595),Ur=e(37959),Oi=e(51927),ko=e(54972),Gl=e(28947);const Ti=({data:K,timeZone:_,fieldConfig:se,options:{showLabels:xe,showTime:Fe,wrapLogMessage:He,showCommonLabels:Ge,prettifyLogMessage:tt,sortOrder:ct,dedupStrategy:ht,enableLogDetails:mt},title:yt,id:Dt})=>{const bt=ct===rs.UV.Ascending,$t=(0,rt.wW)(mu(yt,bt)),[Vt,Yt]=(0,b.useState)(0),It=(0,b.useRef)(null),{eventBus:Ut}=(0,ae.R9)(),wt=(0,b.useCallback)(Dn=>{Dn?Ut.publish(new Sa.es({point:{time:Dn.timeEpochMs}})):Ut.publish(new Sa.xH)},[Ut]),[zt,cn,_t]=(0,b.useMemo)(()=>{const Dn=K?(0,Ur.aB)(K.series,K.request?.intervalMs,void 0,K.request?.targets):null,Nn=Dn?.rows||[],Ln=Dn?.meta?.find(Aa=>Aa.label===Ur.Qp),Qn=(0,Ur.UW)(Nn,ht);return[Nn,Qn,Ln]},[K,ht]);(0,b.useLayoutEffect)(()=>{bt&&It.current?Yt(It.current.offsetHeight):Yt(0)},[bt,zt]);const vn=(0,b.useCallback)((Dn,Nn)=>(0,qr.a)({field:Dn,rowIndex:Nn,range:K.timeRange}),[K]);if(!K||zt.length===0)return b.createElement(Oi.Z,{fieldConfig:se,panelId:Dt,data:K,needsStringField:!0});const dn=()=>b.createElement("div",{className:$t.labelContainer},b.createElement("span",{className:$t.label},"Common labels:"),b.createElement(ko.j,{labels:_t?_t.value:{labels:"(no common labels)"}}));return b.createElement(qe.$,{autoHide:!0,scrollTop:Vt},b.createElement("div",{className:$t.container,ref:It},Ge&&!bt&&dn(),b.createElement(Gl.w,{logRows:zt,deduplicatedRows:cn,dedupStrategy:ht,showLabels:xe,showTime:Fe,wrapLogMessage:He,prettifyLogMessage:tt,timeZone:_,getFieldLinks:vn,logsSortOrder:ct,enableLogDetails:mt,previewLimit:bt?zt.length:void 0,onLogRowHover:wt,app:ce.zj.Dashboard}),Ge&&bt&&dn()))},mu=(K,_)=>se=>({container:D.css`
    margin-bottom: ${se.spacing(1.5)};
    //We can remove this hot-fix when we fix panel menu with no title overflowing top of all panels
    margin-top: ${se.spacing(K?0:2.5)};
  `,labelContainer:D.css`
    margin: ${_?se.spacing(.5,0,.5,0):se.spacing(0,0,.5,.5)};
    display: flex;
    align-items: center;
  `,label:D.css`
    margin-right: ${se.spacing(.5)};
    font-size: ${se.typography.bodySmall.fontSize};
    font-weight: ${se.typography.fontWeightMedium};
  `});class Yl{getSuggestionsForData(_){const se=_.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:xe}=_;!xe.hasData||!xe.hasTimeField||!xe.hasStringField||(xe.preferredVisualisationType==="logs"?se.append({name:Oa.y.Logs,score:ka._.Best}):se.append({name:Oa.y.Logs}))}}const Go=new fe.c(Ti).setPanelOptions(K=>{K.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:rs.Y4.none,label:"None",description:rs.Uv[rs.Y4.none]},{value:rs.Y4.exact,label:"Exact",description:rs.Uv[rs.Y4.exact]},{value:rs.Y4.numbers,label:"Numbers",description:rs.Uv[rs.Y4.numbers]},{value:rs.Y4.signature,label:"Signature",description:rs.Uv[rs.Y4.signature]}]},defaultValue:rs.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:rs.UV.Descending,label:"Newest first"},{value:rs.UV.Ascending,label:"Oldest first"}]},defaultValue:rs.UV.Descending})}).setSuggestionsSupplier(new Yl);var Co=e(53764),pr=e(6981),Yo=e(13724);function Fr(K){const{width:_,options:{feedUrl:se=pr.k,showImage:xe}}=K,{state:Fe,getNews:He}=(0,Yo.j)(se);return(0,b.useEffect)(()=>{const Ge=K.eventBus.subscribe(Qt.U5,He);return()=>{Ge.unsubscribe()}},[He,K.eventBus]),(0,b.useEffect)(()=>{He()},[He]),Fe.error?b.createElement("div",null,"Error loading RSS feed."):Fe.loading?b.createElement("div",null,"Loading..."):Fe.value?b.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Fe.value.map((Ge,tt)=>b.createElement(Co.S,{key:tt,index:tt,width:_,showImage:xe,data:Fe.value}))):null}const Ii=Object.freeze([0,0]),dr={showImage:!0},jo=new fe.c(Fr).setPanelOptions(K=>{K.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:pr.k},defaultValue:dr.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:dr.showImage})});var Ri=e(58635),fu=e(74538),jl=e(68545);const xo=({width:K,height:_,data:se,options:xe})=>{const Fe=(0,qr.u)(se.timeRange);if(!se||!se.series.length)return b.createElement("div",{className:"panel-empty"},b.createElement("p",null,"No data found in response"));const He=(0,Ri.Z)(jl.Ee);return b.createElement("div",{style:{width:K,height:_}},b.createElement(fu.E,{dataFrames:He(se.series,xe),getLinks:Fe}))};var gu=e(45089),jr=e(98206);const pu=({value:K,onChange:_,context:se})=>{const xe=(0,rt.wW)(Ql),Fe=()=>{const tt={field:"",color:""};_(K?[...K,tt]:[tt])},He=tt=>{const ct=K?.slice();ct.splice(tt,1),_(ct)},Ge=(tt,ct,ht)=>{let mt=K?.slice()??[];mt[tt][ct]=ht,_(mt)};return b.createElement(b.Fragment,null,K?.map((tt,ct)=>b.createElement("div",{className:xe.section,key:ct},b.createElement(jr.b,{context:se,value:tt.field??"",onChange:ht=>{Ge(ct,"field",ht)},item:{settings:{filter:ht=>ht.name.includes("arc__")},id:`arc-field-${ct}`,name:`arc-field-${ct}`,editor:()=>null}}),b.createElement(gu.zH,{color:tt.color||"#808080",onChange:ht=>{Ge(ct,"color",ht)}}),b.createElement(je.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>He(ct),title:"Remove arc"}))),b.createElement(je.zx,{size:"sm",icon:"plus",onClick:Fe,variant:"secondary"},"Add arc"))},Ql=()=>({section:D.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),hu=new fe.c(xo).setPanelOptions((K,_)=>{K.addNestedOptions({category:["Nodes"],path:"nodes",build:se=>{se.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),se.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),se.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:pu})}}),K.addNestedOptions({category:["Edges"],path:"edges",build:se=>{se.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),se.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var vu=e(17128),Eu=e(49597),Zl=e(5361),Ai=e(42365),Jl=e(78668),yu=e(66838),Pu=e(82992),Xl=e(22038),Cu=e(35008),Do=e.n(Cu),Or=e(67591),bo=e(78873);let xu=0;const Du=()=>xu++;function bu(K){const _=(0,b.useRef)(null);return _.current===null&&(_.current=K+Du()),_.current.toString()}const cf=Object.freeze([0,0]);var Tr=(K=>(K.Donut="donut",K.Pie="pie",K))(Tr||{}),ur=(K=>(K.Name="name",K.Percent="percent",K.Value="value",K))(ur||{}),Wr=(K=>(K.Percent="percent",K.Value="value",K))(Wr||{});const df={values:[]},_l={displayLabels:[]};function ql(K){return!K.field.custom?.hideFrom?.viz&&!isNaN(K.display.numeric)}function ec(K,_){return _.display.numeric+K}const Mu=({fieldDisplayValues:K,pieType:_,width:se,height:xe,highlightedTitle:Fe,displayLabels:He=[],tooltipOptions:Ge})=>{const tt=(0,rt.l4)(),ct=bu("PieChart"),ht=(0,rt.wW)(Bi),mt=(0,Pu.Z)(),{containerRef:yt,TooltipInPortal:Dt}=(0,Xl.Z)({detectBounds:!0,scroll:!0}),bt=K.filter(ql),$t=_t=>_t.display.numeric,Vt=_t=>`${ct}-${Do()(_t).toHex()}`,Yt=_t=>`url(#${Vt(_t)})`,It=He.length>0,Ut=Ge.mode!=="none"&&mt.tooltipOpen,wt=bt.reduce(ec,0),zt=Ru(se,xe,_),cn=[...new Set(bt.map(_t=>_t.display.color??qn.R))];return b.createElement("div",{className:ht.container},b.createElement("svg",{width:zt.size,height:zt.size,ref:yt},b.createElement(Jl.Z,{top:zt.position,left:zt.position},cn.map(_t=>b.createElement(Ai.Z,{key:_t,id:Vt(_t),from:Tu(_t,tt),to:Iu(_t,tt),fromOffset:zt.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:zt.outerRadius})),b.createElement(yu.Z,{data:bt,pieValue:$t,outerRadius:zt.outerRadius,innerRadius:zt.innerRadius,cornerRadius:3,padAngle:.005},_t=>b.createElement(b.Fragment,null,_t.arcs.map(vn=>{const dn=vn.data.display.color??qn.R,Dn=Li(Fe,vn);return vn.data.hasLinks&&vn.data.getLinks?b.createElement(Or.V,{key:vn.index,links:vn.data.getLinks},Nn=>b.createElement(tc,{tooltip:mt,highlightState:Dn,arc:vn,pie:_t,fill:Yt(dn),openMenu:Nn.openMenu,tooltipOptions:Ge})):b.createElement(tc,{key:vn.index,highlightState:Dn,tooltip:mt,arc:vn,pie:_t,fill:Yt(dn),tooltipOptions:Ge})}),It&&_t.arcs.map(vn=>{const dn=Li(Fe,vn);return b.createElement(nc,{arc:vn,key:vn.index,highlightState:dn,outerRadius:zt.outerRadius,innerRadius:zt.innerRadius,displayLabels:He,total:wt,color:tt.colors.text.primary})}))))),Ut?b.createElement(Dt,{key:Math.random(),top:mt.tooltipTop,className:ht.tooltipPortal,left:mt.tooltipLeft,unstyled:!0,applyPositionStyle:!0},b.createElement(bo.c,{series:mt.tooltipData})):null)};function tc({arc:K,pie:_,highlightState:se,openMenu:xe,fill:Fe,tooltip:He,tooltipOptions:Ge}){const tt=(0,rt.l4)(),ct=(0,rt.wW)(Bi),{eventBus:ht}=(0,ae.R9)(),mt=(0,b.useCallback)(bt=>{ht?.publish({type:Sa.xH.type,payload:{raw:bt,x:0,y:0,dataId:K.data.display.title}}),He.hideTooltip()},[ht,K,He]),yt=(0,b.useCallback)(bt=>{ht?.publish({type:Sa.es.type,payload:{raw:bt,x:0,y:0,dataId:K.data.display.title}});const $t=bt.currentTarget.ownerSVGElement;if($t){const Vt=(0,Zl.Z)($t,bt);He.showTooltip({tooltipLeft:Vt.x,tooltipTop:Vt.y,tooltipData:Su(_,K,Ge)})}},[ht,K,He,_,Ge]),Dt=ac(se,ct);return b.createElement("g",{key:K.data.display.title,className:Dt,onMouseMove:Ge.mode!=="none"?yt:void 0,onMouseOut:mt,onClick:xe,"aria-label":st.wl.components.Panels.Visualization.PieChart.svgSlice},b.createElement("path",{d:_.path({...K}),fill:Fe,stroke:tt.colors.background.primary,strokeWidth:1}))}function nc({arc:K,outerRadius:_,innerRadius:se,displayLabels:xe,total:Fe,color:He,highlightState:Ge}){const tt=(0,rt.wW)(Bi),ct=se===0?_/6:se,[ht,mt]=Ou(K,_,ct);if(!(K.endAngle-K.startAngle>=.3))return null;let Dt=xe.includes(ur.Name)?Math.min(Math.max(_/150*14,12),30):Math.min(Math.max(_/100*14,12),36);return b.createElement("g",{className:ac(Ge,tt)},b.createElement("text",{fill:He,x:ht,y:mt,dy:".33em",fontSize:Dt,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},xe.includes(ur.Name)&&b.createElement("tspan",{x:ht,dy:"1.2em"},K.data.display.title),xe.includes(ur.Value)&&b.createElement("tspan",{x:ht,dy:"1.2em"},(0,On.zc)(K.data.display)),xe.includes(ur.Percent)&&b.createElement("tspan",{x:ht,dy:"1.2em"},(K.data.display.numeric/Fe*100).toFixed(K.data.field.decimals??0)+"%")))}function Su(K,_,se){return se.mode==="multi"?K.arcs.filter(xe=>{const Fe=xe.data.field;return Fe&&!Fe.custom?.hideFrom?.tooltip&&!Fe.custom?.hideFrom?.viz}).map(xe=>({color:xe.data.display.color??qn.R,label:xe.data.display.title,value:(0,On.zc)(xe.data.display),isActive:xe.index===_.index})):[{color:_.data.display.color??qn.R,label:_.data.display.title,value:(0,On.zc)(_.data.display)}]}function Ou(K,_,se){const xe=(_+se)/2,Fe=(+K.startAngle+ +K.endAngle)/2-Math.PI/2;return[Math.cos(Fe)*xe,Math.sin(Fe)*xe]}function Tu(K,_){return Do()(K).darken(20*(_.isDark?1:-.7)).spin(4).toRgbString()}function Iu(K,_){return Do()(K).darken(10*(_.isDark?1:-.7)).spin(-4).toRgbString()}function Ru(K,_,se,xe=16){const Fe=Math.min(_,K),He=(Fe-xe*2)/2,Ge=se===Tr.Pie?He:Math.max(He/3,20),tt=He-Ge,ct=(Fe-xe*2)/2,ht=1-(He-tt)/He;return{position:ct+xe,size:Fe,outerRadius:He,innerRadius:tt,gradientFromOffset:ht}}var Mo=(K=>(K[K.Highlighted=0]="Highlighted",K[K.Deemphasized=1]="Deemphasized",K[K.Normal=2]="Normal",K))(Mo||{});function Li(K,_){return K?K===_.data.display.title?0:1:2}function ac(K,_){switch(K){case 0:return _.svgArg.highlighted;case 1:return _.svgArg.deemphasized;case 2:default:return _.svgArg.normal}}const Bi=K=>({container:D.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:D.css`
        transition: all 200ms ease-in-out;
      `,highlighted:D.css`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:D.css`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:D.css`
      ${(0,Ks.getTooltipContainerStyles)(K)}
    `}),Au={displayMode:Tt.jK.List,showLegend:!0,placement:"right",calcs:[],values:[Wr.Percent]};function Lu(K){const{data:_,timeZone:se,fieldConfig:xe,replaceVariables:Fe,width:He,height:Ge,options:tt,id:ct}=K,ht=(0,rt.l4)(),mt=sc(),yt=(0,vu.nG)({fieldConfig:xe,reduceOptions:tt.reduceOptions,data:_.series,theme:ht,replaceVariables:Fe,timeZone:se});return wi(yt)?b.createElement(et.AY,{width:He,height:Ge,legend:Bu(K,yt)},(Dt,bt)=>b.createElement(Mu,{width:Dt,height:bt,highlightedTitle:mt,fieldDisplayValues:yt,tooltipOptions:tt.tooltip,pieType:tt.pieType,displayLabels:tt.displayLabels})):b.createElement(Z.Z,{panelId:ct,fieldConfig:xe,data:_})}function Bu(K,_){const se=K.options.legend??Au;if(se.showLegend===!1)return;const xe=_.filter(ql).reduce(ec,0),Fe=_.sort((He,Ge)=>isNaN(He.display.numeric)?1:isNaN(Ge.display.numeric)?-1:Ge.display.numeric-He.display.numeric).map((He,Ge)=>{const tt=He.field.custom?.hideFrom??{};if(tt.legend)return;const ct=Boolean(tt.viz),ht=He.display;return{label:ht.title??"",color:ht.color??qn.R,yAxis:1,disabled:ct,getItemKey:()=>(ht.title??"")+Ge,getDisplayValues:()=>{const mt=se.values??[];let yt=[];if(mt.includes(Wr.Value)&&yt.push({numeric:ht.numeric,text:(0,On.zc)(ht),title:"Value"}),mt.includes(Wr.Percent)){const Dt=ct?0:ht.numeric/xe,bt=Dt*100;yt.push({numeric:Dt,percent:bt,text:ct||isNaN(Dt)?K.fieldConfig.defaults.noValue??"-":bt.toFixed(He.field.decimals??0)+"%",title:mt.length>1?"Percent":""})}return yt}}}).filter(He=>!!He);return b.createElement(ot.l,{items:Fe,seriesVisibilityChangeBehavior:Eu.Y.Hide,placement:se.placement,displayMode:se.displayMode})}function wi(K){return K.some(_=>_.view?.dataFrame.length)}function sc(){const[K,_]=(0,b.useState)(),{eventBus:se}=(0,ae.R9)();return(0,b.useEffect)(()=>{const xe=Ge=>{_(Ge.payload.dataId)},Fe=Ge=>{_(void 0)},He=new fa.w0;return He.add(se.getStream(Sa.es).subscribe({next:xe})),He.add(se.getStream(Sa.xH).subscribe({next:Fe})),()=>{He.unsubscribe()}},[_,se]),K}const wu=(K,_,se)=>{if(_==="grafana-piechart-panel"&&se.angular){const xe=se.angular,Fe=[];let He=K.options;if(xe.aliasColors)for(const Ge of Object.keys(xe.aliasColors)){const tt=xe.aliasColors[Ge];tt&&Fe.push({matcher:{id:_a.mi.byName,options:Ge},properties:[{id:ns.qb.Color,value:{mode:qn.S.Fixed,fixedColor:tt}}]})}if(K.fieldConfig={overrides:Fe,defaults:{unit:xe.format,decimals:xe.decimals?xe.decimals:0}},He.legend={placement:"right",values:[],displayMode:Tt.jK.Table,showLegend:!0,calcs:[]},xe.valueName)switch(He.reduceOptions={calcs:[]},xe.valueName){case"current":He.reduceOptions.calcs=["lastNotNull"];break;case"min":He.reduceOptions.calcs=["min"];break;case"max":He.reduceOptions.calcs=["max"];break;case"avg":He.reduceOptions.calcs=["mean"];break;case"total":He.reduceOptions.calcs=["sum"];break}switch(xe.legendType){case"Under graph":He.legend.placement="bottom";break;case"Right side":He.legend.placement="right";break}switch(xe.pieType){case"pie":He.pieType=Tr.Pie;break;case"donut":He.pieType=Tr.Donut;break}return xe.legend&&(xe.legend.show||(He.legend.showLegend=!1),xe.legend.values&&He.legend.values.push(Wr.Value),xe.legend.percentage&&He.legend.values.push(Wr.Percent),!xe.legend.percentage&&!xe.legend.values&&(He.legend.showLegend=!1)),xe.legendType==="On graph"&&(He.legend.showLegend=!1,He.displayLabels=[ur.Name],xe.legend.values&&He.displayLabels.push(ur.Value),xe.legend.percentage&&He.displayLabels.push(ur.Percent)),He}return{}};class Nu{getSuggestionsForData(_){const se=_.getListAppender({name:Oa.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[ur.Percent],legend:{placement:"right",values:[]}},cardOptions:{previewModifier:Fe=>{Fe.options.legend.showLegend=!1}}}),{dataSummary:xe}=_;if(xe.hasNumberField){if(xe.hasStringField&&xe.frameCount===1){if(xe.rowCountTotal>30||xe.rowCountTotal<2)return;se.append({name:Oa.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),se.append({name:Oa.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:Tr.Donut}});return}xe.numberFieldCount>30||xe.numberFieldCount<2||(se.append({name:Oa.y.PieChart}),se.append({name:Oa.y.PieChartDonut,options:{pieType:Tr.Donut}}))}}}const Uu=new fe.c(Lu).setPanelChangeHandler(wu).useFieldConfig({disableStandardOptions:[ns.qb.Thresholds],standardOptions:{[ns.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:qn.S.PaletteClassic}}},useCustomConfig:K=>{qs.B(K)}}).setPanelOptions(K=>{(0,oi.j)(K),K.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Tr.Pie,label:"Pie"},{value:Tr.Donut,label:"Donut"}]},defaultValue:Tr.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:ur.Percent,label:"Percent"},{value:ur.Name,label:"Name"},{value:ur.Value,label:"Value"}]}}),Ys.L(K),Ms.J(K,!1),K.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:Wr.Percent,label:"Percent"},{value:Wr.Value,label:"Value"}]},showIf:_=>_.legend.showLegend!==!1})}).setSuggestionsSupplier(new Nu);var Fu=e(98967),Ni=e(49616);const rc=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class Ui extends b.Component{constructor(){super(...arguments),this.panelContext={},this.getValueColor=(_,se,xe)=>{const Fe=this.props.frames[_].fields[se];if(Fe.display){const He=Fe.display(xe);if(He.color)return He.color}return qn.R},this.prepConfig=(_,se,xe)=>{this.panelContext=this.context;const{eventBus:Fe,sync:He}=this.panelContext;return(0,Rn.Nj)({frame:_,getTimeRange:xe,eventBus:Fe,sync:He,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:_.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=_=>{const{legend:se,legendItems:xe}=this.props;return!_||!xe||!se||se.showLegend===!1?null:b.createElement(et.AY.Legend,{placement:se.placement},b.createElement(ot.l,{placement:se.placement,items:xe,displayMode:se.displayMode,readonly:!0}))}}render(){return b.createElement(xt.d,{...this.props,fields:{x:_=>_.type===zn.fS.time,y:_=>_.type===zn.fS.number||_.type===zn.fS.boolean||_.type===zn.fS.string},prepConfig:this.prepConfig,propsToDiff:rc,renderLegend:this.renderLegend})}}Ui.contextType=ae.bb;const Qo=({data:K,alignedData:_,seriesIdx:se,datapointIdx:xe,timeZone:Fe,onAnnotationAdd:He})=>{const Ge=(0,rt.l4)();if(!K||xe==null)return null;const tt=_.fields[se],ct=[],ht=new Set;if(tt.getLinks){const _t=tt.values.get(xe),vn=tt.display?tt.display(_t):{text:`${_t}`,numeric:+_t};tt.getLinks({calculatedValue:vn,valueRowIndex:xe}).forEach(dn=>{const Dn=`${dn.title}/${dn.href}`;ht.has(Dn)||(ct.push(dn),ht.add(Dn))})}const mt=_.fields[0],yt=mt.display||(0,as.U)({field:mt,timeZone:Fe,theme:Ge}),Dt=tt.state?.origin,bt=tt.display||(0,as.U)({field:tt,timeZone:Fe,theme:Ge}),$t=tt.values.get(xe),Vt=bt($t),Yt=Dt?(0,xa.C)(K[Dt.frameIndex].fields[Dt.fieldIndex],K[Dt.frameIndex],K):null,It=(0,Rn.iK)(tt,xe);let Ut;It&&(Ut=mt.values.get(It));const wt=mt.values.get(xe);let zt=null,cn=null;if(Ut){const _t=Ut&&(0,Rn.Y)(Ut-wt);cn=b.createElement(b.Fragment,null,b.createElement("br",null),b.createElement("strong",null,"Duration:")," ",_t),zt=b.createElement(b.Fragment,null," to"," ",b.createElement("strong",null,yt(mt.values.get(It)).text))}return b.createElement("div",null,b.createElement("div",{style:{fontSize:Ge.typography.bodySmall.fontSize}},Yt,b.createElement("br",null),b.createElement(bo.V,{label:Vt.text,color:Vt.color||qn.R,isActive:!0}),"From ",b.createElement("strong",null,yt(mt.values.get(xe)).text),zt,cn),b.createElement("div",{style:{margin:Ge.spacing(1,-1,-1,-1),borderTop:`1px solid ${Ge.colors.border.weak}`}},He&&b.createElement(Fo.s,{label:"Add annotation",icon:"comment-alt",onClick:He}),ct.length>0&&ct.map((_t,vn)=>b.createElement(Fo.s,{key:vn,icon:"external-link-alt",target:_t.target,label:_t.title,url:_t.href,onClick:_t.onClick}))))};Qo.displayName="StateTimelineTooltip";const Zo=10,Wu=({data:K,timeRange:_,timeZone:se,options:xe,width:Fe,height:He,replaceVariables:Ge,onChangeTimeRange:tt})=>{const ct=(0,rt.l4)(),ht=(0,b.useRef)(void 0),mt=(0,b.useRef)(!1),[yt,Dt]=(0,b.useState)(void 0),[bt,$t]=(0,b.useState)(null),[Vt,Yt]=(0,b.useState)(null),[It,Ut]=(0,b.useState)(null),[wt,zt]=(0,b.useState)(!1),[cn,_t]=(0,b.useState)(!1),{sync:vn,canAddAnnotations:dn}=(0,ae.R9)(),Dn=()=>{mt.current=!1,$t(null),_t(!1)},Nn=()=>{mt.current=!mt.current,_t(mt.current)},{frames:Ln,warn:Qn}=(0,b.useMemo)(()=>(0,Rn.AR)(K?.series,xe.mergeValues??!0,_,ct),[K,xe.mergeValues,_,ct]),Aa=(0,b.useMemo)(()=>(0,Rn.SA)(Ln,xe.legend,ct),[Ln,xe.legend,ct]),ra=(0,b.useMemo)(()=>hi(xe.timezone,se),[xe.timezone,se]),ln=(0,b.useCallback)((ea,ja,$a,Qa)=>{const os=Ln??[],Ia=os.reduce((Wn,sn)=>Wn+sn.fields.filter(ua=>ua.type!==zn.fS.time).length,0);return ja===null||$a===null||!ea.meta?.transformations?.length&&ea.fields.length-1!==Ia||!ea.fields[ja]?null:b.createElement(b.Fragment,null,cn&&b.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},b.createElement(Mn.P,{onClick:Dn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),b.createElement(Qo,{data:os,alignedData:ea,seriesIdx:ja,datapointIdx:$a,timeZone:se,onAnnotationAdd:Qa}))},[se,Ln,cn]);if(!Ln||Qn)return b.createElement("div",{className:"panel-empty"},b.createElement("p",null,Qn??"No data found in response"));if(Ln.length===1){const ea=(0,zs.MB)(Ln[0])}const kn=Boolean(dn&&dn());return b.createElement(Ui,{theme:ct,frames:Ln,structureRev:K.structureRev,timeRange:_,timeZone:ra,width:Fe,height:He,legendItems:Aa,...xe,mode:Rn.KN.Changes},(ea,ja)=>(ht.current!==ea&&(ht.current=nn({config:ea,onUPlotClick:Nn,setFocusedSeriesIdx:Yt,setFocusedPointIdx:Ut,setCoords:$t,setHover:Dt,isToolTipOpen:mt,isActive:wt,setIsActive:zt,sync:vn})),b.createElement(b.Fragment,null,b.createElement(No.R,{config:ea,onZoom:tt}),b.createElement(Hr,{config:ea,onChangeTimeRange:tt}),K.annotations&&b.createElement(mi,{annotations:K.annotations,config:ea,timeZone:se}),kn?b.createElement(eo,{data:ja,timeZone:se,config:ea},({startAnnotating:$a})=>xe.tooltip.mode===Tt.f3.None||It===null||!wt&&vn&&vn()===Ht.m.Crosshair?null:b.createElement(St.h_,null,yt&&bt&&Vt&&b.createElement(Bt.S,{position:{x:bt.viewport.x,y:bt.viewport.y},offset:{x:Zo,y:Zo},allowPointerEvents:mt.current},ln(ja,Vt,It,()=>{$a({coords:{plotCanvas:bt.canvas,viewport:bt.viewport}}),Dn()})))):b.createElement(St.h_,null,xe.tooltip.mode!==Tt.f3.None&&yt&&bt&&b.createElement(Bt.S,{position:{x:bt.viewport.x,y:bt.viewport.y},offset:{x:Zo,y:Zo},allowPointerEvents:mt.current},ln(ja,Vt,It))))))};var oc=e(26031);const $u=(K,_,se)=>{let xe=K.options??{};if(_==="natel-discrete-panel"&&se.angular){const Fe=se.angular,He=K.fieldConfig??{defaults:{},overrides:[]};Fe.units&&(He.defaults.unit=Fe.units);const Ge={fillOpacity:100,lineWidth:0};He.defaults.custom=Ge,xe.mergeValues=!0;const tt={type:oc.H.ValueToText,options:{}};if(He.defaults.mappings=[tt],(0,A.isArray)(Fe.colorMaps))for(const ct of Fe.colorMaps){const ht=ct.color;ht&&(tt.options[ct.text]={color:ht})}if((0,A.isArray)(Fe.valueMaps))for(const ct of Fe.valueMaps){const ht=ct.text,mt=ct.value;if(ht&&mt){let yt=tt.options[mt];yt?yt.text=ht:tt.options[mt]={text:ht}}}if((0,A.isArray)(Fe.rangeMaps))for(const ct of Fe.rangeMaps){let ht=+ct.from,mt=+ct.to;const yt=ct.text;yt&&He.defaults.mappings.push({type:oc.H.RangeToText,options:{from:ht,to:mt,result:{text:yt}}})}K.fieldConfig=He}return xe},uf=Object.freeze([0,0]),Jo={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:Tt.Jp.Auto},ic={fillOpacity:70,lineWidth:0};class Ku{getSuggestionsForData(_){const{dataSummary:se}=_;if(!se.hasData||!se.hasTimeField||!se.hasStringField&&!se.hasNumberField||se.numberFieldCount>=30||se.preferredVisualisationType==="logs")return;_.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Oa.y.StateTimeline})}}const Vu=new fe.c(Wu).setPanelChangeHandler($u).useFieldConfig({standardOptions:{[ns.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:qn.S.ContinuousGrYlRd}}},useCustomConfig:K=>{K.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:ic.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:ic.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:Ni.c,override:Ni.c,shouldApply:_=>_.type!==zn.fS.time,process:Ws.kG})}}).setPanelOptions(K=>{K.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:Jo.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Tt.Jp.Auto,label:"Auto"},{value:Tt.Jp.Always,label:"Always"},{value:Tt.Jp.Never,label:"Never"}]},defaultValue:Jo.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:Jo.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:Jo.rowHeight}),Ms.J(K,!1),Ys.L(K,!0)}).setSuggestionsSupplier(new Ku).setDataSupport({annotations:!0}),lc=({data:K,alignedData:_,seriesIdx:se,datapointIdx:xe,timeZone:Fe})=>{const He=(0,rt.l4)();if(!K||xe==null)return null;const Ge=_.fields[se],tt=[],ct=new Set;if(Ge.getLinks){const Yt=Ge.values.get(xe),It=Ge.display?Ge.display(Yt):{text:`${Yt}`,numeric:+Yt};Ge.getLinks({calculatedValue:It,valueRowIndex:xe}).forEach(Ut=>{const wt=`${Ut.title}/${Ut.href}`;ct.has(wt)||(tt.push(Ut),ct.add(wt))})}const ht=_.fields[0],mt=ht.display||(0,as.U)({field:ht,timeZone:Fe,theme:He}),yt=Ge.state?.origin,Dt=Ge.display||(0,as.U)({field:Ge,timeZone:Fe,theme:He}),bt=Ge.values.get(xe),$t=Dt(bt),Vt=yt?(0,xa.C)(K[yt.frameIndex].fields[yt.fieldIndex],K[yt.frameIndex],K):null;return b.createElement("div",null,b.createElement("div",{style:{fontSize:He.typography.bodySmall.fontSize}},b.createElement("strong",null,mt(ht.values.get(xe)).text),b.createElement("br",null),b.createElement(bo.V,{label:$t.text,color:$t.color||qn.R,isActive:!0}),Vt),tt.length>0&&b.createElement("div",{style:{margin:He.spacing(1,-1,-1,-1),borderTop:`1px solid ${He.colors.border.weak}`}},tt.map((Yt,It)=>b.createElement(Fo.s,{key:It,icon:"external-link-alt",target:Yt.target,label:Yt.title,url:Yt.href,onClick:Yt.onClick}))))};lc.displayName="StatusHistoryTooltip";const cc=10,zu=({data:K,timeRange:_,timeZone:se,options:xe,width:Fe,height:He,onChangeTimeRange:Ge})=>{const tt=(0,rt.l4)(),ct=(0,b.useRef)(void 0),ht=(0,b.useRef)(!1),[mt,yt]=(0,b.useState)(void 0),[Dt,bt]=(0,b.useState)(null),[$t,Vt]=(0,b.useState)(null),[Yt,It]=(0,b.useState)(null),[Ut,wt]=(0,b.useState)(!1),[zt,cn]=(0,b.useState)(!1),{sync:_t}=(0,ae.R9)(),vn=()=>{ht.current=!1,bt(null),cn(!1)},dn=()=>{ht.current=!ht.current,cn(ht.current)},{frames:Dn,warn:Nn}=(0,b.useMemo)(()=>(0,Rn.AR)(K?.series,!1,_,tt),[K,_,tt]),Ln=(0,b.useMemo)(()=>(0,Rn.SA)(Dn,xe.legend,tt),[Dn,xe.legend,tt]),Qn=(0,b.useCallback)((ln,kn,ea)=>{const ja=Dn??[],$a=ja.reduce((Qa,os)=>Qa+os.fields.filter(Ia=>Ia.type!==zn.fS.time).length,0);return kn===null||ea===null||!ln.meta?.transformations?.length&&ln.fields.length-1!==$a||!ln.fields[kn]?null:b.createElement(b.Fragment,null,zt&&b.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},b.createElement(Mn.P,{onClick:vn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),b.createElement(lc,{data:ja,alignedData:ln,seriesIdx:kn,datapointIdx:ea,timeZone:se}))},[se,Dn,zt]),Aa=ln=>xe.tooltip.mode===Tt.f3.None||Yt===null||!Ut&&_t&&_t()===Ht.m.Crosshair?null:b.createElement(St.h_,null,mt&&Dt&&$t&&b.createElement(Bt.S,{position:{x:Dt.viewport.x,y:Dt.viewport.y},offset:{x:cc,y:cc},allowPointerEvents:ht.current},Qn(ln,$t,Yt))),ra=(0,b.useMemo)(()=>hi(xe.timezone,se),[xe.timezone,se]);return!Dn||Nn?b.createElement("div",{className:"panel-empty"},b.createElement("p",null,Nn??"No data found in response")):Dn[0].length>Fe/2?b.createElement("div",{className:"panel-empty"},b.createElement("p",null,"Too many points to visualize properly. ",b.createElement("br",null),"Update the query to return fewer points. ",b.createElement("br",null),"(",Dn[0].length," points received)")):b.createElement(Ui,{theme:tt,frames:Dn,structureRev:K.structureRev,timeRange:_,timeZone:ra,width:Fe,height:He,legendItems:Ln,...xe,mode:Rn.KN.Samples},(ln,kn)=>(ct.current!==ln&&(ct.current=nn({config:ln,onUPlotClick:dn,setFocusedSeriesIdx:Vt,setFocusedPointIdx:It,setCoords:bt,setHover:yt,isToolTipOpen:ht,isActive:Ut,setIsActive:wt})),b.createElement(b.Fragment,null,b.createElement(No.R,{config:ln,onZoom:Ge}),Aa(kn),b.createElement(Hr,{config:ln,onChangeTimeRange:Ge}))))},mf=Object.freeze([0,0]),Hu={colWidth:.9,showValue:Tt.Jp.Auto},Fi={fillOpacity:70,lineWidth:1};class Wi{getSuggestionsForData(_){const{dataSummary:se}=_;if(!se.hasData||!se.hasTimeField||!se.hasStringField&&!se.hasNumberField||se.numberFieldCount>=30||se.rowCountMax>100||se.preferredVisualisationType==="logs")return;_.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:qn.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:Fe=>{Fe.options.colWidth=.7}}}).append({name:Oa.y.StatusHistory})}}const ku=new fe.c(zu).useFieldConfig({standardOptions:{[ns.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:qn.S.Thresholds}}},useCustomConfig:K=>{K.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Fi.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Fi.fillOpacity,settings:{min:0,max:100,step:1}})}}).setPanelOptions(K=>{K.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Tt.Jp.Auto,label:"Auto"},{value:Tt.Jp.Always,label:"Always"},{value:Tt.Jp.Never,label:"Never"}]},defaultValue:Tt.Jp.Auto}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),Ms.J(K,!1),Ys.L(K,!0)}).setSuggestionsSupplier(new Wi);var Gu=e(35363),Yu=e(44727);function ju({onChange:K,value:_,context:se}){const xe=Fe=>{Fe?.currentTarget.checked&&(se.options.footer.show=!1),K(Fe?.currentTarget.checked)};return b.createElement(Yu.r,{value:Boolean(_),onChange:xe})}const Qu=[{value:Tt.QH.Basic,label:"Basic"},{value:Tt.QH.Gradient,label:"Gradient"},{value:Tt.QH.Lcd,label:"Retro LCD"}],Zu=({cellOptions:K,onChange:_})=>{const se=xe=>{K.mode=xe.value,_(K)};return b.createElement(Lr.Lh,null,b.createElement(lr.g,{label:"Gauge Display Mode"},b.createElement(Et.Ph,{value:K?.mode,onChange:se,options:Qu})))},Ju=[{value:Tt.v7.Basic,label:"Basic"},{value:Tt.v7.Gradient,label:"Gradient"}],Xu=({cellOptions:K,onChange:_})=>{const se=xe=>{K.mode=xe.value,_(K)};return b.createElement(Lr.Lh,null,b.createElement(lr.g,{label:"Background display mode"},b.createElement(Et.Ph,{value:K?.mode,onChange:se,options:Ju})))},dc=({value:K,onChange:_})=>{const se=K.type,xe=uc.find(ct=>ct.value.type===se);let[Fe,He]=(0,b.useState)({});const Ge=ct=>{ct.value!==void 0&&(K=ct.value,Fe[K.type]!==void 0&&Object.keys(Fe[K.type]).length>1&&(K=(0,A.merge)(K,Fe[K.type])),_(K))},tt=ct=>{Fe[K.type]=(0,A.merge)(K,ct),He(Fe),_(Fe[K.type])};return b.createElement(b.Fragment,null,b.createElement(lr.g,null,b.createElement(Et.Ph,{options:uc,value:xe,onChange:Ge})),se===Tt.h2.Gauge&&b.createElement(Zu,{cellOptions:K,onChange:tt}),se===Tt.h2.ColorBackground&&b.createElement(Xu,{cellOptions:K,onChange:tt}))},uc=[{value:{type:Tt.h2.Auto},label:"Auto"},{value:{type:Tt.h2.ColorText},label:"Colored text"},{value:{type:Tt.h2.ColorBackground},label:"Colored background"},{value:{type:Tt.h2.Gauge},label:"Gauge"},{value:{type:Tt.h2.JSONView},label:"JSON View"},{value:{type:Tt.h2.Image},label:"Image"}];var So=e(24177);const Xo=K=>(!K.pluginVersion&&K.columns&&console.log("Was angular table",K),K.options),mc={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},Oo={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},$i={cell:"color-background",row:"color-background",value:"color-text"},Ki=(K,_)=>[-1/0,...K].map((se,xe)=>({color:_[xe],value:(0,A.isNumber)(se)?se:parseInt(se,10)})),fc=(K,_)=>{const se=K.transformations??[];if(Object.keys(mc).includes(_.transform)){const xe={reducers:[]};_.transform==="timeseries_aggregations"&&(xe.includeTimeField=!1,xe.reducers=_.columns.map(Fe=>Oo[Fe.value])),se.push({id:mc[_.transform],options:xe})}return se},Vi=K=>{const se={matcher:{id:/^\/.*\/$/.test(K.pattern)?_a.mi.byRegexp:_a.mi.byName,options:K.pattern},properties:[]};return K.alias&&se.properties.push({id:"displayName",value:K.alias}),K.unit&&se.properties.push({id:"unit",value:K.unit}),K.decimals&&se.properties.push({id:"decimals",value:K.decimals}),K.type==="date"&&se.properties.push({id:"unit",value:`time: ${K.dateFormat}`}),K.link&&se.properties.push({id:"links",value:[{title:(0,A.defaultTo)(K.linkTooltip,""),url:(0,A.defaultTo)(K.linkUrl,""),targetBlank:(0,A.defaultTo)(K.linkTargetBlank,!1)}]}),K.colorMode&&se.properties.push({id:"custom.displayMode",value:$i[K.colorMode]}),K.align&&se.properties.push({id:"custom.align",value:K.align==="auto"?null:K.align}),K.thresholds?.length&&se.properties.push({id:"thresholds",value:{mode:So.H.Absolute,steps:Ki(K.thresholds,K.colors)}}),se},gc=K=>{let _={custom:{}};if(K&&(_=(0,A.omitBy)({unit:K.unit,decimals:K.decimals,displayName:K.alias,custom:{align:K.align==="auto"?null:K.align,displayMode:$i[K.colorMode]}},A.isNil),K.thresholds.length)){const se={mode:So.H.Absolute,steps:Ki(K.thresholds,K.colors)};_.thresholds=se}return _},_u=(K,_,se)=>{if(_==="table-old"&&se.angular){const xe=se.angular,Fe=fc(K,xe),He=xe.styles.find(ct=>ct.pattern==="/.*/"),Ge=gc(He),tt=xe.styles.filter(ct=>ct.pattern!=="/.*/").map(Vi);K.transformations=Fe,K.fieldConfig={defaults:Ge,overrides:tt}}return{}},ff=Object.freeze([1,0]),zi={frameIndex:0,showHeader:!0,showTypeIcons:!1,footer:{show:!1,reducer:[],countRows:!1}},To={align:"auto",cellOptions:{type:Tt.h2.Auto},inspect:!1};class qu{getSuggestionsForData(_){const se=_.getListAppender({name:Oa.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:xe=>{xe.fieldConfig.defaults.custom.minWidth=50}}});_.dataSummary.fieldCount===0?se.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):se.append({})}}const Io="Table footer",pc=["Cell Options"],hc=new fe.c(Vl).setPanelChangeHandler(_u).setMigrationHandler(Xo).useFieldConfig({useCustomConfig:K=>{K.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:To.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:To.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:To.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell Type",editor:dc,override:dc,defaultValue:To.cellOptions,process:Ws.kG,category:pc,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:pc,showIf:_=>_.cellOptions.type===Tt.h2.Auto||_.cellOptions.type===Tt.h2.JSONView||_.cellOptions.type===Tt.h2.ColorText||_.cellOptions.type===Tt.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:To.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(K=>{K.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:zi.showHeader}).addBooleanSwitch({path:"footer.show",category:[Io],name:"Show table footer",defaultValue:zi.footer?.show}).addCustomEditor({id:"footer.reducer",category:[Io],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:Gu.S.get("stats-picker").editor,defaultValue:[Ps.gz.sum],showIf:_=>_.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[Io],name:"Count rows",description:"Display a single count for all data rows",defaultValue:zi.footer?.countRows,showIf:_=>_.footer?.reducer?.length===1&&_.footer?.reducer[0]===Ps.gz.count}).addMultiSelect({path:"footer.fields",category:[Io],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async _=>{const se=[];if(_&&_.data&&_.data.length>0){const xe=_.data[0];for(const Fe of xe.fields)if(Fe.type===zn.fS.number){const He=(0,xa.C)(Fe,xe,_.data),Ge=Fe.name;se.push({value:Ge,label:He})}}return se}},defaultValue:"",showIf:_=>_.footer?.show&&!_.footer?.countRows||_.footer?.reducer?.length===1&&_.footer?.reducer[0]!==Ps.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:ju})}).setSuggestionsSupplier(new qu);var em=e(54391),tm=e(70197),nm=e(41959);const vc=Object.freeze([0,0]);var Us=(K=>(K.Code="code",K.HTML="html",K.Markdown="markdown",K))(Us||{}),_o=(K=>(K.Go="go",K.Html="html",K.Json="json",K.Markdown="markdown",K.Plaintext="plaintext",K.Sql="sql",K.Typescript="typescript",K.Xml="xml",K.Yaml="yaml",K))(_o||{});const gf="plaintext",qo={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},Ro={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function am(K){const _=(0,rt.wW)(sm),[se,xe]=(0,b.useState)({mode:K.options.mode,content:Ec(K.options,K.replaceVariables,j.ZP.disableSanitizeHtml)});if((0,tm.Z)(()=>{const{options:Fe,replaceVariables:He}=K,Ge=Ec(Fe,He,j.ZP.disableSanitizeHtml);(Ge!==se.content||Fe.mode!==se.mode)&&xe({mode:Fe.mode,content:Ge})},100,[K]),se.mode===Us.Code){const Fe=K.options.code??qo;return b.createElement(Qs.p,{key:`${Fe.showLineNumbers}/${Fe.showMiniMap}`,value:se.content,language:Fe.language??qo.language,width:K.width,height:K.height,containerStyles:_.codeEditorContainer,showMiniMap:Fe.showMiniMap,showLineNumbers:Fe.showLineNumbers,readOnly:!0})}return b.createElement(qe.$,{autoHeightMin:"100%"},b.createElement(em.Z,{html:se.content,className:_.markdown,"data-testid":"TextPanel-converted-content"}))}function Ec(K,_,se){let{mode:xe,content:Fe}=K;if(!Fe)return"";switch(Fe=_(Fe,{},K.code?.language==="json"?"json":"html"),xe){case Us.Code:break;case Us.HTML:se||(Fe=hl.QX.sanitizeTextPanelContent(Fe));break;case Us.Markdown:default:Fe=(0,nm.x)(Fe,{noSanitize:se})}return Fe}const sm=K=>({codeEditorContainer:D.css`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${K.colors.background.primary};
    }
  `,markdown:(0,D.cx)("markdown-html",D.css`
      height: 100%;
    `)});var yc=e(89050),Hi=e(82586);const rm=({value:K,onChange:_,context:se})=>{const xe=(0,b.useMemo)(()=>se.options?.mode??Us.Markdown,[se]),Fe=(0,rt.wW)(ki),He=()=>se.getSuggestions?se.getSuggestions().map(Ge=>(0,Hi.T)(Ge)):[];return b.createElement("div",{className:(0,D.cx)(Fe.editorBox)},b.createElement(yc.Z,{disableHeight:!0},({width:Ge})=>Ge===0?null:b.createElement(Qs.p,{value:K,onBlur:_,onSave:_,language:xe,width:Ge,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:He})))},ki=K=>({editorBox:D.css`
    label: editorBox;
    border: 1px solid ${K.colors.border.medium};
    border-radius: ${K.shape.borderRadius(1)};
    margin: ${K.spacing(.5)} 0;
    width: 100%;
  `}),Pc=K=>{const _=parseFloat(K.pluginVersion||"6.1");let se=K.options;if(K.hasOwnProperty("content")&&K.hasOwnProperty("mode")){const Fe=K,He=Fe.content,Ge=Fe.mode;delete Fe.content,delete Fe.mode,_<7.1&&(se={content:He,mode:Ge})}return[Us.Code,Us.HTML,Us.Markdown].find(Fe=>Fe===se.mode)||(se={...se,mode:Us.Markdown}),se},om=new fe.c(am).setPanelOptions(K=>{K.addRadio({path:"mode",name:"Mode",settings:{options:[{value:Us.Markdown,label:"Markdown"},{value:Us.HTML,label:"HTML"},{value:Us.Code,label:"Code"}]},defaultValue:Ro.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(_o).map(_=>({value:_,label:_}))},defaultValue:qo.language,showIf:_=>_.mode===Us.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:qo.showLineNumbers,showIf:_=>_.mode===Us.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:qo.showMiniMap,showIf:_=>_.mode===Us.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:rm,defaultValue:Ro.content})}).setMigrationHandler(Pc);var im=e(12272);const lm=({data:K,timeRange:_,timeZone:se,width:xe,height:Fe,options:He,fieldConfig:Ge,onChangeTimeRange:tt,replaceVariables:ct,id:ht})=>{const{sync:mt,canAddAnnotations:yt,onThresholdsChange:Dt,canEditThresholds:bt,showThresholds:$t,onSplitOpen:Vt}=(0,ae.R9)(),Yt=(zt,cn)=>(0,qr.a)({field:zt,rowIndex:cn,splitOpenFn:Vt,range:_}),It=(0,b.useMemo)(()=>Sl(K.series,j.vc.theme2,_),[K,_]),Ut=(0,b.useMemo)(()=>hi(He.timezone,se),[He.timezone,se]);if(!It)return b.createElement(Z.Z,{panelId:ht,fieldConfig:Ge,data:K,needsTimeField:!0,needsNumberField:!0});const wt=Boolean(yt&&yt());return b.createElement(ii.p,{frames:It,structureRev:K.structureRev,timeRange:_,timeZone:Ut,width:xe,height:Fe,legend:He.legend,options:He},(zt,cn)=>(cn.fields.filter(_t=>_t.config.links!==void 0&&_t.config.links.length>0).length>0&&(cn=Sd(cn,It,ct,se)),b.createElement(b.Fragment,null,b.createElement(im.C,{config:zt}),b.createElement(No.R,{config:zt,onZoom:tt}),He.tooltip.mode===Tt.f3.None||b.createElement(qt.i,{frames:It,data:cn,config:zt,mode:He.tooltip.mode,sortOrder:He.tooltip.sort,sync:mt,timeZone:se}),K.annotations&&b.createElement(mi,{annotations:K.annotations,config:zt,timeZone:se}),wt?b.createElement(eo,{data:cn,timeZone:se,config:zt},({startAnnotating:_t})=>b.createElement(Ba,{data:cn,config:zt,timeZone:se,replaceVariables:ct,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(vn,dn)=>{dn&&_t({coords:dn.coords})}}]}]})):b.createElement(Ba,{data:cn,frames:It,config:zt,timeZone:se,replaceVariables:ct,defaultItems:[]}),K.annotations&&b.createElement(xl,{visibleSeries:Cd(zt,It),config:zt,exemplars:K.annotations,timeZone:se,getFieldLinks:Yt}),(bt&&Dt||$t)&&b.createElement(pi,{config:zt,fieldConfig:Ge,onThresholdsChange:bt?Dt:void 0}),b.createElement(Hr,{config:zt,onChangeTimeRange:tt}))))};var Gi=e(38306),Cc=e(68172);const cm=({value:K,onChange:_})=>{const se=(0,rt.wW)(dm);(!K||K.length<1)&&(K=[""]);const xe=()=>{_([...K,Gi.RQ.default])},Fe=Ge=>{const tt=K.slice();tt.splice(Ge,1),_(tt)},He=(Ge,tt)=>{const ct=K.slice();ct[Ge]=tt??Gi.RQ.default,ct.length===0||ct.length===1&&ct[0]===""?_(void 0):_(ct)};return b.createElement("div",null,K.map((Ge,tt)=>b.createElement("div",{className:se.wrapper,key:`${tt}.${Ge}`},b.createElement("span",{className:se.first},b.createElement(Cc.O,{onChange:ct=>He(tt,ct),includeInternal:!0,value:Ge??Gi.RQ.default})),tt===K.length-1?b.createElement(zr.h,{ariaLabel:"Add timezone",name:"plus",onClick:xe}):b.createElement(zr.h,{ariaLabel:"Remove timezone",name:"times",onClick:()=>Fe(tt)}))))},dm=K=>({wrapper:D.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:D.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),um=(K,_,se,xe)=>{if(_==="graph"&&se.angular){const{fieldConfig:Fe,options:He}=xc({...se.angular,fieldConfig:xe});return K.fieldConfig=Fe,K.alert=se.angular.alert,He}return fm(K),{}};function xc(K){const _=K.fieldConfig?.overrides??[],se=K.yaxes??[];let xe=Dc(se[0]);K.fieldConfig?.defaults&&(xe={...K.fieldConfig?.defaults,...xe});const Fe={fill:K.dashes?"dash":"solid",dash:[K.dashLength??10,K.spaceLength??10]};if(K.aliasColors)for(const mt of Object.keys(K.aliasColors)){const yt=K.aliasColors[mt];yt&&_.push({matcher:{id:_a.mi.byName,options:mt},properties:[{id:ns.qb.Color,value:{mode:qn.S.Fixed,fixedColor:yt}}]})}let He=!1;if(K.seriesOverrides?.length)for(const mt of K.seriesOverrides){if(!mt.alias)continue;const Dt={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(mt.alias)?_a.mi.byRegexp:_a.mi.byName,options:mt.alias},properties:[]};let bt;for(const $t of Object.keys(mt)){const Vt=mt[$t];switch($t){case"alias":case"$$hashKey":break;case"yaxis":if(Vt===2){const Yt=Dc(se[1]);mm(xe,Yt,Dt.properties)}break;case"fill":Dt.properties.push({id:"custom.fillOpacity",value:Vt*10});break;case"fillBelowTo":He=!0,Dt.properties.push({id:"custom.fillBelowTo",value:Vt});break;case"fillGradient":Vt&&(Dt.properties.push({id:"custom.fillGradient",value:"opacity"}),Dt.properties.push({id:"custom.fillOpacity",value:Vt*10}));break;case"points":Dt.properties.push({id:"custom.showPoints",value:Vt?Tt.Jp.Always:Tt.Jp.Never});break;case"bars":Vt?(Dt.properties.push({id:"custom.drawStyle",value:Tt.l8.Bars}),Dt.properties.push({id:"custom.fillOpacity",value:100})):Dt.properties.push({id:"custom.drawStyle",value:Tt.l8.Line});break;case"lines":Dt.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":Dt.properties.push({id:"custom.lineWidth",value:Vt});break;case"pointradius":Dt.properties.push({id:"custom.pointSize",value:2+Vt*2});break;case"dashLength":case"spaceLength":case"dashes":switch(bt||(bt={fill:Fe.fill,dash:[...Fe.dash]}),$t){case"dashLength":bt.dash[0]=Vt;break;case"spaceLength":bt.dash[1]=Vt;break;case"dashes":bt.fill=Vt?"dash":"solid";break}break;case"stack":Dt.properties.push({id:"custom.stacking",value:{mode:Tt.o0.Normal,group:Vt}});break;case"color":Dt.properties.push({id:"color",value:{fixedColor:Vt,mode:qn.S.Fixed}});break;case"transform":Dt.properties.push({id:"custom.transform",value:Vt==="negative-Y"?Tt.pR.NegativeY:Tt.pR.Constant});break;default:console.log("Ignore override migration:",mt.alias,$t,Vt)}}bt&&Dt.properties.push({id:"custom.lineStyle",value:bt}),Dt.properties.length&&_.push(Dt)}const Ge=xe.custom??{};Ge.drawStyle=K.bars?Tt.l8.Bars:K.lines?Tt.l8.Line:Tt.l8.Points,K.points?(Ge.showPoints=Tt.Jp.Always,(0,A.isNumber)(K.pointradius)&&(Ge.pointSize=2+K.pointradius*2)):Ge.drawStyle!==Tt.l8.Points&&(Ge.showPoints=Tt.Jp.Never),Ge.lineWidth=K.linewidth,Fe.fill!=="solid"&&(Ge.lineStyle=Fe),He?Ge.fillOpacity=35:(0,A.isNumber)(K.fill)&&(Ge.fillOpacity=K.fill*10),(0,A.isNumber)(K.fillGradient)&&K.fillGradient>0&&(Ge.gradientMode=Tt.FI.Opacity,Ge.fillOpacity=K.fillGradient*10),Ge.spanNulls=K.nullPointMode===Kl.Gl.Ignore,K.steppedLine&&(Ge.lineInterpolation=Tt.KC.StepAfter),Ge.drawStyle===Tt.l8.Bars&&(Ge.fillOpacity=100),K.stack&&(Ge.stacking={mode:Tt.o0.Normal,group:_r.r.stacking.group}),xe.custom=(0,A.omitBy)(Ge,A.isNil),xe.nullValueMode=K.nullPointMode;const tt={legend:{displayMode:Tt.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:Tt.f3.Single,sort:Tt.As.None}},ct=K.legend;if(ct){if(ct.show?tt.legend.displayMode=ct.alignAsTable?Tt.jK.Table:Tt.jK.List:tt.legend.showLegend=!1,ct.rightSide&&(tt.legend.placement="right"),K.legend.values){const mt=(0,A.pickBy)(K.legend);tt.legend.calcs=bc(mt)}K.legend.sideWidth&&(tt.legend.width=K.legend.sideWidth)}const ht=K.tooltip;if(ht&&(ht.shared!==void 0&&(tt.tooltip.mode=ht.shared?Tt.f3.Multi:Tt.f3.Single),ht.sort!==void 0&&ht.shared))switch(ht.sort){case 1:tt.tooltip.sort=Tt.As.Ascending;break;case 2:tt.tooltip.sort=Tt.As.Descending;break;default:tt.tooltip.sort=Tt.As.None}if(K.thresholds&&K.thresholds.length>0){let mt=[],yt=!1,Dt=!1;const bt=K.thresholds.sort((Vt,Yt)=>Vt.value>Yt.value?1:-1);for(let Vt=0;Vt<bt.length;Vt++){const Yt=bt[Vt],It=bt.length>Vt+1?bt[Vt+1]:null;Yt.fill&&(yt=!0),Yt.line&&(Dt=!0),Yt.op==="gt"&&mt.push({value:Yt.value,color:Yi(Yt)}),Yt.op==="lt"&&(mt.length===0&&mt.push({value:-1/0,color:Yi(Yt)}),It&&It.op==="gt"&&It.value>Yt.value?mt.push({value:Yt.value,color:"transparent"}):It&&It.op==="lt"?mt.push({value:Yt.value,color:Yi(It)}):mt.push({value:Yt.value,color:"transparent"}))}mt.length>0&&mt[0].value!==-1/0&&mt.unshift({color:"transparent",value:-1/0});let $t=yt?Tt.i3.Area:Tt.i3.Line;Dt&&yt&&($t=Tt.i3.LineAndArea),xe.custom.thresholdsStyle={mode:$t},xe.thresholds={mode:So.H.Absolute,steps:mt}}return K.xaxis&&K.xaxis.show===!1&&K.xaxis.mode==="time"&&_.push({matcher:{id:_a.mi.byType,options:zn.fS.time},properties:[{id:"custom.axisPlacement",value:Tt.LB.Hidden}]}),{fieldConfig:{defaults:(0,A.omitBy)(xe,A.isNil),overrides:_},options:tt}}function Yi(K){return K.colorMode==="critical"?"red":K.colorMode==="warning"?"orange":K.colorMode==="custom"?K.fillColor||K.lineColor:"red"}function Dc(K){if(!K)return{};const _={axisPlacement:K.show?Tt.LB.Auto:Tt.LB.Hidden};if(K.label&&(_.axisLabel=K.label),K.logBase){const se=K.logBase;(se===2||se===10)&&(_.scaleDistribution={type:Tt.wf.Log,log:se})}return(0,A.omitBy)({unit:K.format,decimals:ji(K.decimals),min:ji(K.min),max:ji(K.max),custom:_},A.isNil)}function mm(K,_,se){for(const He of Object.keys(_)){const Ge=_[He];He!=="custom"&&Ge!==K[He]&&se.push({id:He,value:Ge})}const xe=K.custom??{},Fe=_.custom??{};for(const He of Object.keys(Fe)){const Ge=Fe[He];Ge!==xe[He]&&se.push({id:`custom.${He}`,value:Ge})}}function ji(K){if((0,A.isNumber)(K))return K;if((0,A.isString)(K)){const _=Number(K);if(!isNaN(_))return _}}function bc(K){const _=[];for(const se of Object.keys(K)){const xe=Ps.TB.getIfExists(se);xe&&_.push(xe.id)}return _}function fm(K){K.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(K.fieldConfig.defaults.custom.hideFrom.viz=K.fieldConfig.defaults.custom.hideFrom.graph,delete K.fieldConfig.defaults.custom.hideFrom.graph),K.fieldConfig?.overrides&&(K.fieldConfig.overrides=K.fieldConfig.overrides.map(_=>(_.properties=_.properties.map(se=>(se.id==="custom.hideFrom"&&se.value.graph&&(se.value.viz=se.value.graph,delete se.value.graph),se)),_)))}class gm{getSuggestionsForData(_){const{dataSummary:se}=_;if(!se.hasTimeField||!se.hasNumberField||se.rowCountTotal<2)return;const xe=_.getListAppender({name:Oa.y.LineChart,pluginId:"timeseries",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:He=>{He.options.legend.showLegend=!1,He.fieldConfig?.defaults.custom?.drawStyle!==Tt.l8.Bars&&(He.fieldConfig.defaults.custom.lineWidth=Math.max(He.fieldConfig.defaults.custom.lineWidth??1,2))}}}),Fe=100;if(xe.append({name:Oa.y.LineChart}),se.rowCountMax<200&&xe.append({name:Oa.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:Tt.KC.Smooth}},overrides:[]}}),se.numberFieldCount===1){xe.append({name:Oa.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),xe.append({name:Oa.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:qn.S.ContinuousGrYlRd},custom:{gradientMode:Tt.FI.Scheme,lineInterpolation:Tt.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),se.rowCountMax<Fe&&(xe.append({name:Oa.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:Tt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Tt.FI.Hue}},overrides:[]}}),xe.append({name:Oa.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:qn.S.ContinuousGrYlRd},custom:{drawStyle:Tt.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:Tt.FI.Scheme}},overrides:[]}}));return}xe.append({name:Oa.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Tt.o0.Normal,group:"A"}}},overrides:[]}}),xe.append({name:Oa.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Tt.o0.Percent,group:"A"}}},overrides:[]}}),se.rowCountTotal/se.numberFieldCount<Fe&&(xe.append({name:Oa.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:Tt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Tt.FI.Hue,stacking:{mode:Tt.o0.Normal,group:"A"}}},overrides:[]}}),xe.append({name:Oa.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:Tt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Tt.FI.Hue,stacking:{mode:Tt.o0.Percent,group:"A"}}},overrides:[]}}))}}const pm=new fe.c(lm).setPanelChangeHandler(um).useFieldConfig((0,_r.F)(_r.r)).setPanelOptions(K=>{Ys.L(K),Ms.J(K),K.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:cm,defaultValue:void 0})}).setSuggestionsSupplier(new gm).setDataSupport({annotations:!0,alertStates:!0});var hm=e(21435),vm=e(21903),Em=e(77213),Mc=e(14530),Sc=e(75151),Qi=e(335);const Zi={wrapper:D.css`
    height: 100%;
    overflow: scroll;
  `},ym=({data:K})=>{const _=(0,b.createRef)(),se=(0,b.useMemo)(()=>(0,Qi.N)(K.series[0]),[K.series]),{search:xe,setSearch:Fe,spanFindMatches:He}=(0,Sc.R)(se?.spans),[Ge,tt]=(0,b.useState)(""),[ct,ht]=(0,b.useState)(""),mt=(0,Tn.Z)(async()=>await(0,Em.F)().get(K.request?.targets[0].datasource?.uid)),yt=document.getElementsByClassName(Zi.wrapper)[0],Dt=mt&&mt.value?mt.value.type:"unknown";return!K||!K.series.length||!se?b.createElement("div",{className:"panel-empty"},b.createElement("p",null,"No data found in response")):b.createElement("div",{className:Zi.wrapper},b.createElement("div",{ref:_}),K.series[0]?.meta?.preferredVisualisationType==="trace"?b.createElement(hm.Z,{navigable:!0,searchValue:xe,setSearch:Fe,spanFindMatches:He,searchBarSuffix:ct,setSearchBarSuffix:ht,focusedSpanIdForSearch:Ge,setFocusedSpanIdForSearch:tt,datasourceType:Dt}):null,b.createElement(Mc.m,{dataFrames:K.series,scrollElement:yt,traceProp:se,spanFindMatches:He,search:xe,focusedSpanIdForSearch:Ge,queryResponse:K,datasource:mt.value,topOfViewRef:_,topOfViewRefType:vm.l4.Panel}))},Pm=new fe.c(ym),Cm=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],xm=()=>{const K=(0,rt.wW)(Oc);return b.createElement("div",{className:K.container},b.createElement("h1",{className:K.title},"Welcome to Grafana"),b.createElement("div",{className:K.help},b.createElement("h3",{className:K.helpText},"Need help?"),b.createElement("div",{className:K.helpLinks},Cm.map((_,se)=>b.createElement("a",{key:`${_.label}-${se}`,className:K.helpLink,href:`${_.href}?utm_source=grafana_gettingstarted`},_.label)))))},Oc=K=>({container:D.css`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${K.spacing(3)};

      ${K.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${K.breakpoints.down("sm")} {
        padding: 0 ${K.spacing(1)};
      }
    `,title:D.css`
      margin-bottom: 0;

      ${K.breakpoints.down("lg")} {
        margin-bottom: ${K.spacing(1)};
      }

      ${K.breakpoints.down("md")} {
        font-size: ${K.typography.h2.fontSize};
      }
      ${K.breakpoints.down("sm")} {
        font-size: ${K.typography.h3.fontSize};
      }
    `,help:D.css`
      display: flex;
      align-items: baseline;
    `,helpText:D.css`
      margin-right: ${K.spacing(2)};
      margin-bottom: 0;

      ${K.breakpoints.down("md")} {
        font-size: ${K.typography.h4.fontSize};
      }

      ${K.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:D.css`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:D.css`
      margin-right: ${K.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${K.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),Dm=new fe.c(xm).setNoPadding();var Tc=(K=>(K[K.NoData=0]="NoData",K[K.BadFrameSelection=1]="BadFrameSelection",K[K.XNotFound=2]="XNotFound",K))(Tc||{});function so(K){return K.type===zn.fS.number}function bm(K,_){if(!_||!_.length)return{error:0};K||(K={frame:0});let se=_[K.frame??0];if(!se)return{error:1};let xe=-1;for(let tt=0;tt<se.fields.length;tt++){const ct=se.fields[tt];if(K.x&&K.x===(0,xa.C)(ct,se,_)){xe=tt;break}if(so(ct)&&!K.x){xe=tt;break}}let Fe=!1;const He=se.fields[xe],Ge=[He];for(const tt of se.fields)if(tt.type===zn.fS.time&&(Fe=!0),!(tt===He||!so(tt))){if(K.exclude){const ct=(0,xa.C)(tt,se,_);if(K.exclude.includes(ct))continue}Ge.push(tt)}return{x:He,fields:{x:Ic(He),y:Rc(He)},frame:{...se,fields:Ge},hasData:se.fields.length>0,hasTime:Fe}}function Ic(K){return K?_=>K===_||!!(K.state&&K.state===_.state):()=>!1}function Rc(K){if(!K)return()=>!1;const _=Ic(K);return se=>!_(se,void 0,void 0)}const Mm=({value:K,onChange:_,context:se})=>{const xe=(0,b.useMemo)(()=>se?.data?.length?se.data.map((tt,ct)=>({value:ct,label:(0,xa.n)(tt,ct)})):[{value:0,label:"First result"}],[se.data]),Fe=(0,b.useMemo)(()=>bm(K,se.data),[se.data,K]),He=(0,b.useMemo)(()=>{const tt={label:"?",value:void 0},ct={numberFields:[tt],yFields:[],xAxis:K?.x?{label:`${K.x} (Not found)`,value:K.x}:tt},ht=se.data?se.data[K?.frame??0]:void 0;if(ht){const mt=Fe.x?(0,xa.C)(Fe.x,Fe.frame,se.data):void 0;for(let yt of ht.fields)if(so(yt)){const Dt=(0,xa.C)(yt,ht,se.data),bt={label:Dt,value:Dt};ct.numberFields.push(bt),tt.label==="?"&&(tt.label=`${Dt} (First)`),K?.x&&Dt===K.x&&(ct.xAxis=bt),mt!==Dt&&ct.yFields.push({label:Dt,value:K?.exclude?.includes(Dt)})}}return ct},[Fe,se.data,K]),Ge=(0,rt.wW)(Sm);return se.data?b.createElement("div",null,b.createElement(lr.g,{label:"Data"},b.createElement(Et.Ph,{options:xe,value:xe.find(tt=>tt.value===K?.frame)??xe[0],onChange:tt=>{_({...K,frame:tt.value})}})),b.createElement(lr.g,{label:"X Field"},b.createElement(Et.Ph,{options:He.numberFields,value:He.xAxis,onChange:tt=>{_({...K,x:tt.value})}})),b.createElement(lr.g,{label:"Y Fields"},b.createElement("div",null,He.yFields.map(tt=>b.createElement("div",{key:tt.label,className:Ge.row},b.createElement(zr.h,{name:tt.value?"eye-slash":"eye",onClick:()=>{const ct=K?.exclude?[...K.exclude]:[];let ht=ct.indexOf(tt.label);ht<0?ct.push(tt.label):ct.splice(ht,1),_({...K,exclude:ct})}}),tt.label))))):b.createElement("div",null,"No data...")},Sm=K=>({sorter:D.css`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:D.css`
    padding: ${K.spacing(.5,1)};
    border-radius: ${K.shape.borderRadius(1)};
    background: ${K.colors.background.secondary};
    min-height: ${K.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${K.components.input.borderColor};
  `});var Om=e(93022),Ac=e(54643);const pf=Object.freeze([0,0]);var Lc=(K=>(K.Auto="auto",K.Manual="manual",K))(Lc||{}),Ir=(K=>(K.Lines="lines",K.Points="points",K.PointsAndLines="points+lines",K))(Ir||{});const Bc={exclude:[]},wc={label:Tt.Jp.Auto,show:"points"},hf={series:[]},ei={...wc},Nc=({value:K,onChange:_,context:se})=>{const[xe,Fe]=(0,b.useState)(0),He=(0,rt.wW)(Tm),Ge=(mt,yt,Dt)=>{_(K.map((bt,$t)=>$t===yt?{...bt,[Dt]:mt}:bt))},tt=()=>{_([...K,{pointColor:{},pointSize:ei.pointSize}]),Fe(K.length)};(0,b.useEffect)(()=>{K?.length||tt()},[]);const ct=mt=>{_(K.filter((yt,Dt)=>Dt!==mt))},ht=mt=>mt===xe?`${He.row} ${He.sel}`:He.row;return b.createElement(b.Fragment,null,b.createElement(je.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:tt,className:He.marginBot},"Add series"),b.createElement("div",{className:He.marginBot},K.map((mt,yt)=>b.createElement("div",{key:`series/${yt}`,className:ht(yt),onMouseDown:()=>Fe(yt)},b.createElement(Om.X,{name:mt.name??`Series ${yt+1}`,onChange:Dt=>Ge(Dt,yt,"name")}),b.createElement(zr.h,{name:"trash-alt",title:"remove",className:(0,D.cx)(He.actionIcon),onClick:()=>ct(yt)})))),xe>=0&&K[xe]&&b.createElement(b.Fragment,null,b.createElement("div",{key:`series/${xe}`},b.createElement(lr.g,{label:"X Field"},b.createElement(jr.b,{value:K[xe].x??"",context:se,onChange:mt=>Ge(mt,xe,"x"),item:{}})),b.createElement(lr.g,{label:"Y Field"},b.createElement(jr.b,{value:K[xe].y??"",context:se,onChange:mt=>Ge(mt,xe,"y"),item:{}})),b.createElement(lr.g,{label:"Point color"},b.createElement(Ac.Lm,{value:K[xe].pointColor,context:se,onChange:mt=>Ge(mt,xe,"pointColor"),item:{}})),b.createElement(lr.g,{label:"Point size"},b.createElement(Ac.cL,{value:K[xe].pointSize,context:se,onChange:mt=>Ge(mt,xe,"pointSize"),item:{settings:{min:1,max:100}}})))))},Tm=K=>({marginBot:D.css`
    margin-bottom: 20px;
  `,row:D.css`
    padding: ${K.spacing(.5,1)};
    border-radius: ${K.shape.borderRadius(1)};
    background: ${K.colors.background.secondary};
    min-height: ${K.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${K.components.input.borderColor};
    &:hover {
      border: 1px solid ${K.components.input.borderHover};
    }
  `,sel:D.css`
    border: 1px solid ${K.colors.primary.border};
    &:hover {
      border: 1px solid ${K.colors.primary.border};
    }
  `,actionIcon:D.css`
    color: ${K.colors.text.secondary};
    &:hover {
      color: ${K.colors.text};
    }
  `});var Uc=e(54291),Fc=(K=>(K.Points="points",K.Lines="lines",K.PointsAndLines="points+lines",K))(Fc||{}),Ji=(K=>(K.Auto="auto",K.Manual="manual",K))(Ji||{});const Im={show:"points",lineWidth:1,lineStyle:{fill:"solid"},pointSize:{fixed:5,min:1,max:20},axisPlacement:Tt.LB.Auto},Xi=({allSeries:K,data:_,manualSeriesConfigs:se,seriesMapping:xe,rowIndex:Fe,hoveredPointIndex:He,options:Ge,range:tt})=>{const ct=(0,rt.wW)(Rm),{onSplitOpen:ht}=(0,ae.R9)();if(!K||Fe==null)return null;const mt=K[He],yt=mt.frame(_),Dt=mt.x(yt),bt=mt.y(yt),$t=(0,qr.a)({field:bt,splitOpenFn:ht,rowIndex:Fe,range:tt});let Vt=null,Yt=null;if(xe===Ji.Manual&&se){const It=se[He].pointColor?.field??"",Ut=se[He].pointSize?.field??"",wt=It?yt.fields.find(cn=>cn.name===It):void 0,zt=Ut?yt.fields.find(cn=>cn.name===Ut):void 0;Yt={colorFacetFieldName:It,sizeFacetFieldName:Ut,colorFacetValue:wt?.values.get(Fe),sizeFacetValue:zt?.values.get(Fe)}}return Vt={name:(0,xa.C)(bt,yt),val:bt.values.get(Fe),field:bt,color:mt.pointColor(yt)},b.createElement(b.Fragment,null,b.createElement("table",{className:ct.infoWrap},b.createElement("tr",null,b.createElement("th",{colSpan:2,style:{backgroundColor:Vt.color}})),b.createElement("tbody",null,b.createElement("tr",null,b.createElement("th",null,Dt.name),b.createElement("td",null,Wc(yt.fields[0],Dt.values.get(Fe)))),b.createElement("tr",null,b.createElement("th",null,Vt.name,":"),b.createElement("td",null,Wc(Vt.field,Vt.val))),Yt!==null&&Yt.colorFacetFieldName&&b.createElement("tr",null,b.createElement("th",null,Yt.colorFacetFieldName,":"),b.createElement("td",null,Yt.colorFacetValue)),Yt!==null&&Yt.sizeFacetFieldName&&b.createElement("tr",null,b.createElement("th",null,Yt.sizeFacetFieldName,":"),b.createElement("td",null,Yt.sizeFacetValue)),$t.length>0&&b.createElement("tr",null,b.createElement("td",{colSpan:2},b.createElement(Lr.wc,null,$t.map((It,Ut)=>b.createElement(je.Qj,{key:Ut,icon:"external-link-alt",target:It.target,href:It.href,onClick:It.onClick,fill:"text",style:{width:"100%"}},It.title))))))))};function Wc(K,_){return K.display?(0,On.zc)(K.display(_)):`${_}`}const Rm=K=>({infoWrap:D.css`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${K.typography.fontWeightMedium};
      padding: ${K.spacing(.25,2)};
    }
  `,highlight:D.css`
    background: ${K.colors.action.hover};
  `,xVal:D.css`
    font-weight: ${K.typography.fontWeightBold};
  `,icon:D.css`
    margin-right: ${K.spacing(1)};
    vertical-align: middle;
  `});function Am(K,_,se,xe,Fe,He){let Ge,tt;try{Ge=Lm(K,_()),tt=Bm(_,Ge,se,xe,Fe,He)}catch(ct){let ht="Unknown error in prepScatter";return typeof ct=="string"?ht=ct:ct instanceof Error&&(ht=ct.message),{error:ht,series:[]}}return{series:Ge,builder:tt}}function $c(K,_,se,xe,Fe,He){const Ge=_[se],tt=Ge.fields[Fe];let ct=tt.state??{};ct.seriesIndex=K,tt.state=ct;let ht=He.pointColorFixed?Ke.v.theme2.visualization.getColorByName(He.pointColorFixed):(0,Fn.YO)(tt,Ke.v.theme2).color,mt=()=>ht;const yt={...ei,...tt.config.custom};let Dt=Fn.WO.get(qn.S.PaletteClassic);if(He.pointColorIndex){const It=_[se].fields[He.pointColorIndex];if(It){const Ut=It.display??(0,as.U)({field:It,theme:Ke.v.theme2});if(Dt=(0,Fn.fD)(tt),Dt.isByValue){const wt=He.pointColorIndex;mt=zt=>zt.fields[wt].values.toArray().map(cn=>Ut(cn).color)}else ht=Dt.getCalculator(It,Ke.v.theme2)(It.values.get(0),1),mt=()=>ht}}let bt=He.pointSizeConfig,$t=He.pointSizeConfig?.fixed??tt.config.custom?.pointSize?.fixed??5,Vt=()=>$t;He.pointSizeIndex?Vt=It=>{const Ut=(0,Cs.getScaledDimensionForField)(It.fields[He.pointSizeIndex],He.pointSizeConfig,Cs.ScaleDimensionMode.Quadratic),wt=Array(It.length);for(let zt=0;zt<It.length;zt++)wt[zt]=Ut.get(zt);return wt}:bt={fixed:$t,min:$t,max:$t};const Yt=(0,xa.C)(tt,Ge,_);return{name:Yt,frame:It=>It[se],x:It=>It.fields[xe],y:It=>It.fields[Fe],legend:()=>[{label:Yt,color:ht,getItemKey:()=>Yt,yAxis:Fe}],showLine:yt.show!==Ir.Points,lineWidth:yt.lineWidth??2,lineStyle:yt.lineStyle,lineColor:()=>ht,showPoints:yt.show!==Ir.Lines?Tt.Jp.Always:Tt.Jp.Never,pointSize:Vt,pointColor:mt,pointSymbol:(It,Ut)=>"circle",label:Tt.Jp.Never,labelValue:()=>"",show:!Ge.fields[Fe].config.custom.hideFrom?.viz,hints:{pointSize:bt,pointColor:{mode:Dt}}}}function Lm(K,_){let se=0;if(!_.length)throw"Missing data";if(K.seriesMapping==="manual"){if(!K.series?.length)throw"Missing series config";const ct=[];for(const ht of K.series){if(!ht?.x)throw"Select X dimension";if(!ht?.y)throw"Select Y dimension";for(let mt=0;mt<_.length;mt++){const yt=_[mt],Dt=(0,Cs.findFieldIndex)(yt,ht.x);if(Dt!=null){const bt=(0,Cs.findFieldIndex)(yt,ht.y);if(bt==null)throw"Y must be in the same frame as X";const $t={pointColorFixed:ht.pointColor?.fixed,pointColorIndex:(0,Cs.findFieldIndex)(yt,ht.pointColor?.field),pointSizeConfig:ht.pointSize,pointSizeIndex:(0,Cs.findFieldIndex)(yt,ht.pointSize?.field)};ct.push($c(se++,_,mt,Dt,bt,$t))}}}return ct}const xe=K.dims??{},Fe=xe.frame??0,He=_[Fe],Ge=[];let tt=(0,Cs.findFieldIndex)(He,xe.x);for(let ct=0;ct<He.fields.length;ct++)if(so(He.fields[ct])){if(tt==null||ct===tt){tt=ct;continue}if(xe.exclude&&xe.exclude.includes((0,xa.C)(He.fields[ct],He,_)))continue;Ge.push(ct)}if(tt==null)throw"Missing X dimension";if(!Ge.length)throw"No Y values";return Ge.map(ct=>$c(se++,_,Fe,tt,ct,{}))}const Bm=(K,_,se,xe,Fe,He)=>{let Ge,tt;function ct(It){return(wt,zt,cn,_t)=>(jn.Z.orient(wt,zt,(vn,dn,Dn,Nn,Ln,Qn,Aa,ra,ln,kn,ea,ja,$a,Qa,os)=>{const Ia=_[zt-1];let Wn=wt.data[zt],sn=Ia.showLine,ua=Ia.showPoints===Tt.Jp.Always;!ua&&Ia.showPoints===Tt.Jp.Auto&&(ua=Wn[0].length<1e3),!ua&&!sn&&(sn=!0);let Ua=1;wt.ctx.save(),wt.ctx.rect(wt.bbox.left,wt.bbox.top,wt.bbox.width,wt.bbox.height),wt.ctx.clip(),wt.ctx.fillStyle=vn.fill(),wt.ctx.strokeStyle=vn.stroke(),wt.ctx.lineWidth=Ua;let na=2*Math.PI,Da=Nn.key,da=Ln.key,gn=Ia.hints.pointSize;const yn=Ia.hints.pointColor.mode.isByValue;let an=(gn.max??gn.fixed)*devicePixelRatio,Un=wt.posToVal(-an/2,Da),Hn=wt.posToVal(wt.bbox.width/devicePixelRatio+an/2,Da),ma=wt.posToVal(wt.bbox.height/devicePixelRatio+an/2,da),aa=wt.posToVal(-an/2,da),bs=It.disp.size.values(wt,zt),vs=It.disp.color.values(wt,zt),hr=It.disp.color.alpha(wt,zt),Ss=sn?new Path2D:null;for(let Ls=0;Ls<Wn[0].length;Ls++){let ar=Wn[0][Ls],Rr=Wn[1][Ls],Os=bs[Ls]*devicePixelRatio;if(ar>=Un&&ar<=Hn&&Rr>=ma&&Rr<=aa){let fr=Qn(ar,Nn,kn,ra),vr=Aa(Rr,Ln,ea,ln);sn&&Ss.lineTo(fr,vr),ua&&(wt.ctx.moveTo(fr+Os/2,vr),wt.ctx.beginPath(),wt.ctx.arc(fr,vr,Os/2,0,na),yn&&(wt.ctx.fillStyle=hr[Ls],wt.ctx.strokeStyle=vs[Ls]),wt.ctx.fill(),wt.ctx.stroke(),It.each(wt,zt,Ls,fr-Os/2-Ua/2,vr-Os/2-Ua/2,Os+Ua,Os+Ua))}}if(sn){let Ls=Ia.frame(K());wt.ctx.strokeStyle=Ia.lineColor(Ls),wt.ctx.lineWidth=Ia.lineWidth*devicePixelRatio;const{lineStyle:ar}=Ia;ar&&ar.fill!=="solid"&&(ar.fill==="dot"&&(wt.ctx.lineCap="round"),wt.ctx.setLineDash(ar.dash??[10,10])),wt.ctx.stroke(Ss)}wt.ctx.restore()}),null)}let ht=ct({disp:{size:{values:(It,Ut)=>It.data[Ut][2]},color:{values:(It,Ut)=>It.data[Ut][3],alpha:(It,Ut)=>It.data[Ut][4]}},each:(It,Ut,wt,zt,cn,_t,vn)=>{zt-=It.bbox.left,cn-=It.bbox.top,Ge.add({x:zt,y:cn,w:_t,h:vn,sidx:Ut,didx:wt})}});const mt=new Cr.U;mt.setCursor({drag:{setScale:!0},dataIdx:(It,Ut)=>{if(Ut===1){tt=null;let wt=1/0,zt=It.cursor.left*devicePixelRatio,cn=It.cursor.top*devicePixelRatio;Ge.get(zt,cn,1,1,_t=>{if((0,tr.Pn)(zt,cn,_t.x,_t.y,_t.x+_t.w,_t.y+_t.h)){let vn=_t.x+_t.w/2,dn=_t.y+_t.h/2,Dn=vn-zt,Nn=dn-cn,Ln=Math.sqrt(Dn**2+Nn**2);Ln<=_t.w/2&&Ln<=wt&&(wt=Ln,tt=_t)}})}return tt&&Ut===tt.sidx?tt.didx:null},points:{size:(It,Ut)=>tt&&Ut===tt.sidx?tt.w/devicePixelRatio:0,fill:(It,Ut)=>"rgba(255,255,255,0.4)"}});const yt=()=>{He.current&&(xe(void 0),Fe&&Fe())};let Dt=null;mt.addHook("init",(It,Ut)=>{It.over.style.overflow="hidden",Dt=It.root.parentElement,Fe&&Dt?.addEventListener("click",Fe)}),mt.addHook("destroy",It=>{Fe&&(Dt?.removeEventListener("click",Fe),yt())});let bt;mt.addHook("syncRect",(It,Ut)=>{bt=Ut}),mt.addHook("setLegend",It=>{if(It.cursor.idxs!=null)for(let Ut=0;Ut<It.cursor.idxs.length;Ut++){const wt=It.cursor.idxs[Ut];if(wt!=null&&!He.current){xe({scatterIndex:Ut-1,xIndex:wt,pageX:bt.left+It.cursor.left,pageY:bt.top+It.cursor.top});return}}He.current||xe(void 0)}),mt.addHook("drawClear",It=>{yt(),Ge=Ge||new tr.lW(0,0,It.bbox.width,It.bbox.height),Ge.clear(),It.series.forEach((Ut,wt)=>{wt>0&&(Ut._paths=null)})}),mt.setMode(2);const $t=K();let Vt=_[0].x(_[0].frame($t));mt.addScale({scaleKey:"x",isTime:!1,orientation:Tt.wN.Horizontal,direction:Tt.bQ.Right,min:Vt.config.min,max:Vt.config.max});let Yt=Vt.config.custom.axisLabel;return mt.addAxis({scaleKey:"x",placement:Vt.config.custom?.axisPlacement!==Tt.LB.Hidden?Tt.LB.Bottom:Tt.LB.Hidden,show:Vt.config.custom?.axisPlacement!==Tt.LB.Hidden,theme:se,label:Yt==null||Yt===""?(0,xa.C)(Vt,_[0].frame($t),$t):Yt}),_.forEach((It,Ut)=>{let wt=It.frame($t),zt=It.y(wt);const cn=It.lineColor(wt),_t=Nm(wt,It.pointColor);let vn=zt.config.unit??"y";if(mt.addScale({scaleKey:vn,orientation:Tt.wN.Vertical,direction:Tt.bQ.Up,max:zt.config.max,min:zt.config.min}),zt.config.custom?.axisPlacement!==Tt.LB.Hidden){let dn=zt.config.custom?.axisLabel;mt.addAxis({scaleKey:vn,theme:se,placement:zt.config.custom?.axisPlacement,label:dn==null||dn===""?(0,xa.C)(zt,_[Ut].frame($t),$t):dn,values:(Dn,Nn)=>Nn.map(Ln=>zt.display(Ln).text)})}mt.addSeries({facets:[{scale:"x",auto:!0},{scale:vn,auto:!0}],pathBuilder:ht,theme:se,scaleKey:"",lineColor:cn,fillColor:(0,xs.alpha)(_t,.5),show:!zt.config.custom.hideFrom?.viz})}),mt};function _i(K,_,se){return K.error||!_.length?[null]:[null,...K.series.map((xe,Fe)=>{const He=xe.frame(_);let Ge,tt;const ct=xe.pointColor(He);return Array.isArray(ct)?(Ge=ct,tt=ct.map(ht=>(0,xs.alpha)(ht,.5))):(Ge=Array(He.length).fill(ct),tt=Array(He.length).fill((0,xs.alpha)(ct,.5))),[xe.x(He).values.toArray(),xe.y(He).values.toArray(),wm(He,xe.pointSize),Ge,tt]})]}function wm(K,_){const se=_(K);return Array.isArray(se)?se:Array(K.length).fill(se)}function Nm(K,_){const se=_(K);return Array.isArray(se)?se[0]:se}const Kc=10,Vc=K=>{const[_,se]=(0,b.useState)(),[xe,Fe]=(0,b.useState)([]),[He,Ge]=(0,b.useState)(),[tt,ct]=(0,b.useState)(),[ht,mt]=(0,b.useState)(),[yt,Dt]=(0,b.useState)(!1),bt=(0,b.useRef)(!1),$t=(0,Uc.Z)(K.options),Vt=(0,Uc.Z)(K.data),Yt=()=>{bt.current=!1,Dt(!1),Ut(void 0)},It=()=>{bt.current=!bt.current,Dt(bt.current)},Ut=_t=>{mt(_t)},wt=(0,b.useCallback)(()=>{const _t=()=>K.data.series,vn=Am(K.options,_t,Ke.v.theme2,Ut,It,bt);vn.error?se(vn.error):vn.series.length&&K.data.series&&(Ge(vn.builder),Fe(vn.series),ct(()=>_i(vn,K.data.series)),se(void 0))},[K.data.series,K.options]),zt=(0,b.useCallback)(()=>{ct(()=>_i({error:_,series:xe},K.data.series))},[K.data.series,_,xe]);(0,b.useEffect)(()=>{$t!==K.options||Vt?.structureRev!==K.data.structureRev?wt():Vt!==K.data&&zt()},[K]);const cn=()=>{const _t=[],vn=Nn=>Nn==null?"-":Nn.toFixed(1),dn=Ke.v.theme2;for(let Nn=0;Nn<xe.length;Nn++){const Ln=xe[Nn],Qn=Ln.frame(K.data.series);if(Qn)for(const Aa of Ln.legend())Aa.getDisplayValues=()=>{const ra=K.options.legend.calcs;if(!ra?.length)return[];const ln=Ln.y(Qn),kn=ln.display??vn;let ea=null;const ja=(0,Ps.Kx)({field:ln,reducers:ra});return ra.map($a=>{const Qa=Ps.TB.get($a);let os=kn;return Qa.id===Ps.gz.diffperc&&(os=(0,as.U)({field:{...ln,config:{...ln.config,unit:"percent"}},theme:dn})),(Qa.id===Ps.gz.count||Qa.id===Ps.gz.changeCount||Qa.id===Ps.gz.distinctCount)&&(ea||(ea=(0,as.U)({field:{...ln,config:{...ln.config,unit:"none"}},theme:dn})),os=ea),{...os(ja[$a]),title:Qa.name,description:Qa.description}})},Aa.disabled=!(Ln.show??!0),K.options.seriesMapping===Ji.Manual&&(Aa.label=K.options.series?.[Nn]?.name??`Series ${Nn+1}`),_t.push(Aa)}if(!K.options.legend.showLegend)return null;const Dn={flexStart:D.css`
        div {
          justify-content: flex-start !important;
        }
      `};return b.createElement(et.AY.Legend,{placement:K.options.legend.placement,width:K.options.legend.width},b.createElement(ot.l,{className:Dn.flexStart,placement:K.options.legend.placement,items:_t,displayMode:K.options.legend.displayMode}))};return _||!He||!tt?b.createElement("div",{className:"panel-empty"},b.createElement("p",null,_)):b.createElement(b.Fragment,null,b.createElement(et.AY,{width:K.width,height:K.height,legend:cn()},(_t,vn)=>b.createElement(Ul.N,{config:He,data:tt,width:_t,height:vn,timeRange:K.timeRange})),b.createElement(St.h_,null,ht&&K.options.tooltip.mode!==Tt.f3.None&&b.createElement(Bt.S,{position:{x:ht.pageX,y:ht.pageY},offset:{x:Kc,y:Kc},allowPointerEvents:bt.current},yt&&b.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},b.createElement(Mn.P,{onClick:Yt,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),b.createElement(Xi,{options:K.options.tooltip,allSeries:xe,manualSeriesConfigs:K.options.series,seriesMapping:K.options.seriesMapping,rowIndex:ht.xIndex,hoveredPointIndex:ht.scatterIndex,data:K.data.series,range:K.timeRange}))))};var qi=e(66683);function vf(K){return{standardOptions:{[ns.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:qn.S.PaletteClassic}}},useCustomConfig:_=>{_.addRadio({path:"show",name:"Show",defaultValue:K.show,settings:{options:[{label:"Points",value:Ir.Points},{label:"Lines",value:Ir.Lines},{label:"Both",value:Ir.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:K.pointSize?.fixed,settings:{min:1,max:100,step:1},showIf:se=>se.show!==Ir.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:se=>se.show!==Ir.Points,editor:qi.j,override:qi.j,process:Ws.kG,shouldApply:se=>se.type===zn.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:K.lineWidth,settings:{min:0,max:10,step:1},showIf:se=>se.show!==Ir.Points}),_s.r(_,K),qs.B(_)}}}const Ef=new fe.c(Vc).useFieldConfig(vf(ei)).setPanelOptions(K=>{K.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:Mm,showIf:_=>_.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:Nc,showIf:_=>_.seriesMapping==="manual"}),Ys.L(K),Ms.J(K)}),zm={"app/plugins/datasource/graphite/module":async()=>await e.e(7494).then(e.bind(e,86069)),"app/plugins/datasource/cloudwatch/module":async()=>await Promise.all([e.e(7421),e.e(8831)]).then(e.bind(e,17421)),"app/plugins/datasource/dashboard/module":async()=>await e.e(2557).then(e.bind(e,14642)),"app/plugins/datasource/elasticsearch/module":async()=>await Promise.all([e.e(7725),e.e(4601),e.e(9897)]).then(e.bind(e,14601)),"app/plugins/datasource/opentsdb/module":async()=>await e.e(3168).then(e.bind(e,80808)),"app/plugins/datasource/grafana/module":async()=>await Promise.all([e.e(7e3),e.e(7537)]).then(e.bind(e,37e3)),"app/plugins/datasource/influxdb/module":async()=>await e.e(5783).then(e.bind(e,90836)),"app/plugins/datasource/loki/module":async()=>await Promise.all([e.e(1899),e.e(4254),e.e(3348),e.e(9619),e.e(3320),e.e(1598)]).then(e.bind(e,33320)),"app/plugins/datasource/jaeger/module":async()=>await Promise.all([e.e(4053),e.e(890)]).then(e.bind(e,94053)),"app/plugins/datasource/zipkin/module":async()=>await e.e(4023).then(e.bind(e,86098)),"app/plugins/datasource/mixed/module":async()=>await e.e(2001).then(e.bind(e,40336)),"app/plugins/datasource/mysql/module":async()=>await Promise.all([e.e(4993),e.e(4251)]).then(e.bind(e,51735)),"app/plugins/datasource/postgres/module":async()=>await Promise.all([e.e(4993),e.e(534)]).then(e.bind(e,50992)),"app/plugins/datasource/mssql/module":async()=>await Promise.all([e.e(4993),e.e(5032)]).then(e.bind(e,32320)),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([e.e(897),e.e(1899),e.e(4254),e.e(7725),e.e(9619),e.e(7004)]).then(e.bind(e,47465)),"app/plugins/datasource/testdata/module":async()=>await e.e(319).then(e.bind(e,50747)),"app/plugins/datasource/cloud-monitoring/module":async()=>await Promise.all([e.e(2773),e.e(3549)]).then(e.bind(e,43737)),"app/plugins/datasource/grafana-azure-monitor-datasource/module":async()=>await Promise.all([e.e(6957),e.e(2364)]).then(e.bind(e,76957)),"app/plugins/datasource/tempo/module":async()=>await Promise.all([e.e(3663),e.e(6752),e.e(295)]).then(e.bind(e,6752)),"app/plugins/datasource/alertmanager/module":async()=>await e.e(6795).then(e.bind(e,98548)),"app/plugins/datasource/phlare/module":async()=>await Promise.all([e.e(1899),e.e(4254),e.e(9704)]).then(e.bind(e,75885)),"app/plugins/datasource/parca/module":async()=>await e.e(2015).then(e.bind(e,96907)),"app/plugins/panel/text/module":E,"app/plugins/panel/timeseries/module":P,"app/plugins/panel/state-timeline/module":a,"app/plugins/panel/status-history/module":v,"app/plugins/panel/candlestick/module":m,"app/plugins/panel/graph/module":async()=>await e.e(1260).then(e.bind(e,35155)),"app/plugins/panel/xychart/module":S,"app/plugins/panel/geomap/module":async()=>await Promise.all([e.e(3973),e.e(8096)]).then(e.bind(e,17632)),"app/plugins/panel/canvas/module":async()=>await Promise.all([e.e(7638),e.e(8528),e.e(3330)]).then(e.bind(e,91942)),"app/plugins/panel/icon/module":async()=>await Promise.all([e.e(8528),e.e(53)]).then(e.bind(e,10529)),"app/plugins/panel/dashlist/module":f,"app/plugins/panel/alertlist/module":n,"app/plugins/panel/annolist/module":u,"app/plugins/panel/heatmap/module":async()=>await e.e(6987).then(e.bind(e,28975)),"app/plugins/panel/table/module":C,"app/plugins/panel/table-old/module":async()=>await e.e(6784).then(e.bind(e,8414)),"app/plugins/panel/news/module":p,"app/plugins/panel/live/module":c,"app/plugins/panel/stat/module":Fu,"app/plugins/panel/debug/module":o,"app/plugins/panel/flamegraph/module":l,"app/plugins/panel/gettingstarted/module":r,"app/plugins/panel/gauge/module":jd,"app/plugins/panel/piechart/module":h,"app/plugins/panel/bargauge/module":i,"app/plugins/panel/barchart/module":s,"app/plugins/panel/logs/module":g,"app/plugins/panel/traces/module":x,"app/plugins/panel/welcome/module":M,"app/plugins/panel/nodeGraph/module":y,"app/plugins/panel/histogram/module":d,"app/plugins/panel/alertGroups/module":t};var zc=e(49168),$f=e(89377),Kf=e(4027),Vf=e(59554),zf=e(65103),Hf=e(85095),kf=e(28844),Gf=e(26189),Yf=e(47825),jf=e(7540);const Ao=te;Ao.PanelPlugin=fe.c,Ao.DataSourcePlugin=me.hf,Ao.AppPlugin=ce.k8,Ao.DataSourceApi=me.MF,Ee.i3.registry.set("plugin-loader",Ee.i3.newModule({locate:zc.hf})),Ee.i3.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js",css:"vendor/plugin-css/css.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"}}});function ga(K,_){Ee.i3.registerDynamic(K,[],!0,(se,xe,Fe)=>{Fe.exports=_})}ga("@grafana/data",ie),ga("@grafana/ui",Ao),ga("@grafana/runtime",J),ga("lodash",N()),ga("moment",I()),ga("jquery",w()),ga("d3",R),ga("rxjs",ee),ga("rxjs/operators",ue),ga("react-router-dom",H),ga("prismjs",V()),ga("slate",q.ZP),ga("slate-react",De.ZP),ga("@grafana/slate-react",De.ZP),ga("slate-plain-serializer",ge.Z),ga("react",b),ga("react-dom",X),ga("react-redux",k),ga("redux",Y),ga("emotion",D),ga("@emotion/css",D),ga("@emotion/react",T),ga("app/features/dashboard/impression_store",{impressions:Qe.Z,__esModule:!0}),ga("app/core/services/backend_srv",{BackendSrv:Le.y$,getBackendSrv:Le.i}),ga("app/core/utils/datemath",re),ga("app/core/utils/flatten",de),ga("app/core/utils/kbn",Be.Z),ga("app/core/utils/ticks",Ve),ga("app/core/config",j.ZP),ga("app/core/time_series",Ye.Z),ga("app/core/time_series2",Ye.Z),ga("app/core/table_model",ne.Z),ga("app/core/app_events",be.h$),ga("app/core/core",{appEvents:be.h$,contextSrv:be.Vt,__esModule:!0});const Hm=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const K of Hm)ga(K,{fakeDep:1});async function ni(K,_){_&&(0,zc.Vf)({path:K,version:_});const se=zm[K];return se?typeof se=="function"?await se():se:Ee.i3.import(K)}function Hc(K){return ni(K.module,K.info?.version).then(_=>{if(_.plugin){const se=_.plugin;return se.meta=K,se}if(_.Datasource){const se=new me.hf(_.Datasource);return se.setComponentsFromLegacyExports(_),se.meta=K,se}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function km(K){return ni(K.module,K.info?.version).then(_=>{const se=_.plugin?_.plugin:new ce.k8;return se.init(K),se.meta=K,se.setComponentsFromLegacyExports(_),se})}},55111:(G,O,e)=>{"use strict";e.d(O,{O:()=>m,d:()=>f});var t=e(24699),n=e(93003),u=e(38490),s=e(13011),i=e(92885);async function m(o){const l=await(0,s.a)(o);let r;if(l.type===t.zV.app&&(r=await(0,i.Av)(l)),l.type===t.zV.datasource&&(r=await(0,i.nL)(l)),l.type===t.zV.panel&&(r=await(0,u._2)(l)),l.type===t.zV.renderer&&(r={meta:l}),!r)throw new Error("Unknown Plugin type: "+l.type);return r}function f(o,l,r){if(!n.v.featureToggles.topnav)return l??void 0;let d={...o},c;function g(p,y){return!y.startsWith(p.url??"")||c&&(c.url?.length??0)>(p.url?.length??0)?p:(c&&(c.active=!1),c={...p,active:!0},c)}return d.children=(d?.children??[]).map(p=>{if(p.children){const y=p.children.map(h=>g(h,r));return{...g(p,r),children:y}}return g(p,r)}),{main:d,node:c??d}}},19360:(G,O,e)=>{"use strict";e.d(O,{h:()=>r});var t=e(47214);async function n(d){try{await(0,t.i)().put("/api/user/password",d)}catch(c){console.error(c)}}function u(){return(0,t.i)().get("/api/user")}function s(){return(0,t.i)().get("/api/user/teams")}function i(){return(0,t.i)().get("/api/user/orgs")}function m(){return(0,t.i)().get("/api/user/auth-tokens")}async function f(d){await(0,t.i)().post("/api/user/revoke-auth-token",{authTokenId:d})}async function o(d){await(0,t.i)().post("/api/user/using/"+d.orgId,{})}async function l(d){try{await(0,t.i)().put("/api/user",d)}catch(c){console.error(c)}}const r={changePassword:n,revokeUserSession:f,loadUser:u,loadSessions:m,loadOrgs:i,loadTeams:s,setUserOrg:o,updateUserProfile:l}},54294:(G,O,e)=>{"use strict";e.d(O,{$S:()=>p,Ns:()=>y,PL:()=>a,Uk:()=>E,YT:()=>d,ZP:()=>T,aw:()=>v,p$:()=>C,qD:()=>h,rf:()=>r,z0:()=>P,zW:()=>c,zc:()=>g});var t=e(32557),n=e(82897),u=e.n(n),s=e(38849),i=e(46519),m=e(47694),f=e(77582);const o={orgId:m.ZP.bootData.user.orgId,timeZone:m.ZP.bootData.user.timezone,weekStart:m.ZP.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},l=(0,t.oM)({name:"user/profile",initialState:o,reducers:{updateTimeZone:(R,L)=>{R.timeZone=L.payload.timeZone},updateWeekStart:(R,L)=>{R.weekStart=L.payload.weekStart},updateFiscalYearStartMonth:(R,L)=>{R.fiscalYearStartMonth=L.payload.fiscalYearStartMonth},setUpdating:(R,L)=>{R.isUpdating=L.payload.updating},userLoaded:(R,L)=>{R.user=L.payload.user},initLoadTeams:(R,L)=>{R.teamsAreLoading=!0},teamsLoaded:(R,L)=>{R.teams=L.payload.teams,R.teamsAreLoading=!1},initLoadOrgs:(R,L)=>{R.orgsAreLoading=!0},orgsLoaded:(R,L)=>{R.orgs=L.payload.orgs,R.orgsAreLoading=!1},initLoadSessions:(R,L)=>{R.sessionsAreLoading=!0},sessionsLoaded:(R,L)=>{const w=L.payload.sessions.sort((A,N)=>Number(N.isActive)-Number(A.isActive));R.sessions=w.map(A=>({id:A.id,isActive:A.isActive,seenAt:(0,s.E8)(A.seenAt),createdAt:A.createdAt,clientIp:A.clientIp,browser:A.browser,browserVersion:A.browserVersion,os:A.os,osVersion:A.osVersion,device:A.device})),R.sessionsAreLoading=!1},userSessionRevoked:(R,L)=>{R.sessions=R.sessions.filter(w=>w.id!==L.payload.tokenId),R.isUpdating=!1}}}),r=R=>async L=>{(0,n.set)(f.Vt,"user.fiscalYearStartMonth",R),L(S({fiscalYearStartMonth:R}))},d=R=>async L=>{(!(0,n.isString)(R)||(0,n.isEmpty)(R))&&(R=m.ZP?.bootData?.user?.timezone),(0,n.set)(f.Vt,"user.timezone",R),L(x({timeZone:R}))},c=R=>async L=>{(!(0,n.isString)(R)||(0,n.isEmpty)(R))&&(R=m.ZP?.bootData?.user?.weekStart),(0,n.set)(f.Vt,"user.weekStart",R),L(M({weekStart:R})),(0,i.Ls)(R)},{setUpdating:g,initLoadOrgs:p,orgsLoaded:y,initLoadTeams:h,teamsLoaded:a,userLoaded:v,userSessionRevoked:C,initLoadSessions:E,sessionsLoaded:P,updateTimeZone:x,updateWeekStart:M,updateFiscalYearStartMonth:S}=l.actions,D=l.reducer,T={user:l.reducer}},25405:(G,O,e)=>{"use strict";e.d(O,{Z:()=>t,i:()=>n});const t=u=>u.timeZone,n=u=>u.fiscalYearStartMonth},9386:(G,O,e)=>{"use strict";e.d(O,{S:()=>n,f:()=>u});class t{constructor(){this.extraRenderActions=[]}addExtraRenderAction(i){this.extraRenderActions=this.extraRenderActions.concat(i)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new t,u=new t},36584:(G,O,e)=>{"use strict";e.d(O,{x:()=>b,t:()=>k});var t=e(9085),n=e.n(t),u=e(82897),s=e(64681),i=e.n(s),m=e(68404),f=e(40400),o=e(94929),l=e(85081),r=e(49922),d=e(16911),c=e(25318),g=e(68183),p=e(37210),y=e(77213),h=e(68884),a=e(90701),v=e(78758),C=e(19117),E=e(1029),P=e(67254),x=e(19349),M=e(96161),S=e(9386),D=e(52423),T=e(2248),R=e(29516),L=e(81697),w=e(25474),A=e(69556);const N=H=>{const{query:Y,queries:ee,onClick:ue,onChange:q,collapsedText:ge,renderExtras:De,disabled:fe}=H,me=(0,R.wW)(I),[ce,ie]=(0,m.useState)(!1),[re,Ee]=(0,m.useState)(null),J=Qe=>{ie(!0)},te=Qe=>{if(ie(!1),re){Ee(null);return}Y.refId!==Qe&&q({...Y,refId:Qe})},ne=Qe=>{const Ye=Qe.currentTarget.value.trim();if(Ye.length===0){Ee("An empty query name is not allowed");return}for(const de of ee)if(de!==Y&&Ye===de.refId){Ee("Query name already exists");return}re&&Ee(null)},j=Qe=>{te(Qe.currentTarget.value.trim())},be=Qe=>{Qe.key==="Enter"&&te(Qe.target.value)},Le=Qe=>{Qe.target.select()};return m.createElement(m.Fragment,null,m.createElement("div",{className:me.wrapper},!ce&&m.createElement("button",{className:me.queryNameWrapper,"aria-label":g.wl.components.QueryEditorRow.title(Y.refId),title:"Edit query name",onClick:J,"data-testid":"query-name-div",type:"button"},m.createElement("span",{className:me.queryName},Y.refId),m.createElement(L.J,{name:"pen",className:me.queryEditIcon,size:"sm"})),ce&&m.createElement(m.Fragment,null,m.createElement(w.I,{type:"text",defaultValue:Y.refId,onBlur:j,autoFocus:!0,onKeyDown:be,onFocus:Le,invalid:re!==null,onChange:ne,className:me.queryNameInput,"data-testid":"query-name-input"}),re&&m.createElement(A.S,{horizontal:!0},re)),W(H,me),De&&m.createElement("div",{className:me.itemWrapper},De()),fe&&m.createElement("em",{className:me.contextInfo},"Disabled")),ge&&m.createElement("div",{className:me.collapsedText,onClick:ue},ge))},W=(H,Y)=>{const{alerting:ee,dataSource:ue,onChangeDataSource:q}=H;return q?m.createElement("div",{className:Y.itemWrapper},m.createElement(T.q,{variables:!0,alerting:ee,current:ue.name,onChange:q})):m.createElement("em",{className:Y.contextInfo},"(",ue.name,")")},I=H=>({wrapper:D.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${H.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:D.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${H.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${H.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${H.colors.action.hover};
        border: 1px dashed ${H.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${H.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:D.css`
      font-weight: ${H.typography.fontWeightMedium};
      color: ${H.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${H.spacing(.5)};
    `,queryEditIcon:(0,D.cx)(D.css`
        margin-left: ${H.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:D.css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:D.css`
      font-weight: ${H.typography.fontWeightRegular};
      font-size: ${H.typography.bodySmall.fontSize};
      color: ${H.colors.text.secondary};
      padding-left: ${H.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:D.css`
      font-size: ${H.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${H.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:D.css`
      display: flex;
      margin-left: 4px;
    `});function F({error:H}){const Y=(0,R.wW)(V),ee=H?.message??H?.data?.message??"Query error";return m.createElement("div",{className:Y.wrapper},m.createElement("div",{className:Y.icon},m.createElement(L.J,{name:"exclamation-triangle"})),m.createElement("div",{className:Y.message},ee))}const V=H=>({wrapper:(0,D.css)({marginTop:H.spacing(.5),background:H.colors.background.secondary,display:"flex"}),icon:(0,D.css)({background:H.colors.error.main,color:H.colors.error.contrastText,padding:H.spacing(1)}),message:(0,D.css)({fontSize:H.typography.bodySmall.fontSize,fontFamily:H.typography.fontFamilyMonospace,padding:H.spacing(1)})});class b extends m.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const Y=(0,p.w)(),ee='<plugin-component type="query-ctrl" />',ue={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=Y.load(this.element,ue,ee),this.angularScope=ue.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:Y,onChange:ee,queries:ue,onRunQuery:q,onAddQuery:ge,app:De=f.zj.PanelEditor,history:fe}=this.props,{datasource:me,data:ce}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(me?.components?.QueryCtrl)return m.createElement("div",{ref:ie=>this.element=ie});if(me){let ie=this.getReactQueryEditor(me);if(ie)return m.createElement(o.n,{instanceSettings:this.props.dataSource},m.createElement(ie,{key:me?.name,query:Y,datasource:me,onChange:ee,onRunQuery:q,onAddQuery:ge,data:ce,range:(0,x.$t)().timeRange(),queries:ue,app:De,history:fe}))}return m.createElement("div",null,"Data source plugin does not export any Query Editor component")},this.onToggleEditMode=(Y,ee)=>{Y.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),ee.isOpen||ee.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:Y,query:ee,onQueryRemoved:ue}=this.props;Y(ee),ue&&ue()},this.onCopyQuery=()=>{const{query:Y,onAddQuery:ee,onQueryCopied:ue}=this.props,q=(0,u.cloneDeep)(Y);ee(q),ue&&ue()},this.onDisableQuery=()=>{const{query:Y,onChange:ee,onRunQuery:ue,onQueryToggled:q}=this.props;ee({...Y,hide:!Y.hide}),ue(),q&&q(Y.hide)},this.onToggleHelp=()=>{this.setState(Y=>({showingHelp:!Y.showingHelp}))},this.onClickExample=Y=>{Y.datasource===void 0&&(Y.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...Y,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:Y,query:ee}=this.props,q=(k(Y,ee.refId)?.series??[]).reduce((me,ce)=>{if(!ce.meta?.notices)return me;const ie=(0,u.filter)(ce.meta.notices,{severity:"warning"})??[];return me.concat(ie)},[]),ge=(0,u.uniqBy)(q,"text");if(!(ge.length>0))return null;const fe=ge.map(me=>me.text).join(`
`);return m.createElement(h.C,{color:"orange",icon:"exclamation-triangle",text:m.createElement(m.Fragment,null,ge.length," ",i()("warning",ge.length)),tooltip:fe})},this.renderExtraActions=()=>{const{query:Y,queries:ee,data:ue,onAddQuery:q,dataSource:ge}=this.props,De=S.f.getAllExtraRenderAction().map((fe,me)=>fe({query:Y,queries:ee,timeRange:ue.timeRange,onAddQuery:q,dataSource:ge,key:me})).filter(Boolean);return De.push(this.renderWarnings()),De},this.renderActions=Y=>{const{query:ee,hideDisableQuery:ue=!1}=this.props,{hasTextEditMode:q,datasource:ge,showingHelp:De}=this.state,fe=ee.hide,me=ge?.components?.QueryEditorHelp;return m.createElement(a.Lh,{width:"auto"},me&&m.createElement(E.y,{title:"Toggle data source help",icon:"question-circle",onClick:this.onToggleHelp,active:De}),q&&m.createElement(E.y,{title:"Toggle text edit mode",icon:"pen",onClick:ce=>{this.onToggleEditMode(ce,Y)}}),this.renderExtraActions(),m.createElement(E.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),ue?null:m.createElement(E.y,{title:"Disable/enable query",icon:fe?"eye-slash":"eye",active:fe,onClick:this.onDisableQuery}),m.createElement(E.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=Y=>{const{alerting:ee,query:ue,dataSource:q,onChangeDataSource:ge,onChange:De,queries:fe,renderHeaderExtras:me}=this.props;return m.createElement(N,{query:ue,queries:fe,onChangeDataSource:ge,dataSource:q,disabled:ue.hide,onClick:ce=>this.onToggleEditMode(ce,Y),onChange:De,collapsedText:Y.isOpen?null:this.renderCollapsedText(),renderExtras:me,alerting:ee})}}componentDidMount(){const{data:Y,query:ee,id:ue}=this.props,q=k(Y,ee.refId);this.id=(0,u.uniqueId)(ue+"_"),this.setState({data:q}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:Y,queries:ee}=this.props,{datasource:ue}=this.state,q=new M.r({targets:ee}),ge={},De=this;return{datasource:ue,target:Y,panel:q,dashboard:ge,refresh:()=>{Y.hide!==De.props.query.hide&&(Y.hide=De.props.query.hide),this.props.onChange(Y),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new l.F,range:(0,x.$t)().timeRange()}}getQueryDataSourceIdentifier(){const{query:Y,dataSource:ee}=this.props;return Y.datasource?.uid??ee.uid}async loadDatasource(){const Y=(0,y.F)();let ee;const ue=this.getQueryDataSourceIdentifier();try{ee=await Y.get(ue)}catch{ee=await Y.get()}this.setState({datasource:ee,loadedDataSourceIdentifier:ue,hasTextEditMode:(0,u.has)(ee,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(Y){const{datasource:ee,loadedDataSourceIdentifier:ue}=this.state,{data:q,query:ge}=this.props;if(Y.id!==this.props.id&&(this.id=(0,u.uniqueId)(this.props.id+"_")),q!==Y.data){const De=k(q,ge.refId);this.setState({data:De}),this.angularScope&&(this.angularScope.range=(0,x.$t)().timeRange()),this.angularQueryEditor&&De&&X(this.angularScope,De,this.angularQueryEditor)}if(ee&&ue!==this.getQueryDataSourceIdentifier()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(Y){if(Y)switch(this.props.app){case f.zj.Explore:return Y.components?.ExploreMetricsQueryField||Y.components?.ExploreLogsQueryField||Y.components?.ExploreQueryField||Y.components?.QueryEditor;case f.zj.PanelEditor:case f.zj.Dashboard:default:return Y.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.props.dataSource.uid!==this.state.loadedDataSourceIdentifier}renderCollapsedText(){const{datasource:Y}=this.state;return Y?.getQueryDisplayText?Y.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:Y,index:ee,visualization:ue}=this.props,{datasource:q,showingHelp:ge,data:De}=this.state,fe=Y.hide,me=n()("query-editor-row",{"query-editor-row--disabled":fe,"gf-form-disabled":fe});if(!q)return null;const ce=this.renderPluginEditor(),ie=q.components?.QueryEditorHelp;return m.createElement("div",{"aria-label":g.wl.components.QueryEditorRows.rows},m.createElement(P.t,{id:this.id,draggable:!0,index:ee,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},m.createElement("div",{className:me,id:this.id},m.createElement(v.z4,null,ge&&ie&&m.createElement(C.h,null,m.createElement(ie,{onClickExample:re=>this.onClickExample(re),query:this.props.query,datasource:q})),ce),De?.error&&De.error.refId===Y.refId&&m.createElement(F,{error:De.error}),ue)))}}function X(H,Y,ee){if(Y.state===r.Gu.Done){const ue=Y.series.map(q=>(0,d.Zr)(q));H.events.emit(c.Kh.dataReceived,ue)}else Y.state===r.Gu.Error&&H.events.emit(c.Kh.dataError,Y.error);setTimeout(ee.digest)}function k(H,Y){const ee=H.series.filter(De=>De.refId===Y);if(H.state!==r.Gu.Loading&&H.error&&!H.series.length)return{...H,state:r.Gu.Error};let ue=H.state;const q=H.error&&H.error.refId===Y?H.error:void 0;q?ue=r.Gu.Error:!q&&H.state===r.Gu.Error&&(ue=r.Gu.Done);const ge=H.timeRange;return{...H,state:ue,series:ee,error:q,timeRange:ge}}},87865:(G,O,e)=>{"use strict";e.d(O,{Tl:()=>re,kt:()=>me});var t=e(16527),n=e(96209),u=e(95484),s=e(16313),i=e(4561),m=e(2101),f=e(67305),o=e(15562),l=e(38581),r=e(97218),d=e(44962),c=e(7356),g=e(1821),p=e(47694),y=e(82897);function h(Ee){let J=[];const te=(0,y.partition)(Ee,"id"),ne=(0,y.groupBy)(te[0],"id");return J=(0,y.map)(ne,j=>j.length>1&&!(0,y.every)(j,a)?(0,y.find)(j,be=>be.eventType!=="panel-alert"):(0,y.head)(j)),J=(0,y.concat)(J,te[1]),J}function a(Ee){return Ee.eventType==="panel-alert"}var v=e(19349),C=e(85526),E=e(94514),P=e(47214),x=e(55197);class M{canWork({dashboard:J,range:te}){return!(!J.id||te.raw.to!=="now"||!J.panels.find(ne=>!!ne.alert))}work(J){if(!this.canWork(J))return(0,x.H_)();const{dashboard:te}=J;return(0,C.D)((0,P.i)().get("/api/alerts/states-for-dashboard",{dashboardId:te.id},`dashboard-query-runner-alert-states-${te.id}`)).pipe((0,m.U)(ne=>({alertStates:ne,annotations:[]})),(0,E.K)(x.Rc))}}var S=e(53786),D=e(98356),T=e(14542),R=e(77213),L=e(45984),w=e(17424),A=e(86953);class N{canRun(J){return J?Boolean(!J.annotationQuery||J.annotations):!1}run({annotation:J,datasource:te,dashboard:ne,range:j}){if(!this.canRun(te))return(0,S.of)([]);const be={};return(0,A.r)({dashboard:ne,range:j,panel:be},te,J).pipe((0,m.U)(Le=>Le.events??[]),(0,E.K)(x.h1))}}var W=e(66228);class I{canRun(J){return J?(0,W.yr)(J)?!0:Boolean(J.annotationQuery&&!J.annotations):!1}run({annotation:J,datasource:te,dashboard:ne,range:j}){return this.canRun(te)?(0,C.D)(te.annotationQuery({range:j,rangeRaw:j.raw,annotation:J,dashboard:ne})).pipe((0,E.K)(x.h1)):(0,S.of)([])}}class F{constructor(J=[new I,new N]){this.runners=J}canWork({dashboard:J}){const te=J.annotations.list.find(F.getAnnotationsToProcessFilter);return Boolean(te)}work(J){if(!this.canWork(J))return(0,x.H_)();const{dashboard:te,range:ne}=J;let j=te.annotations.list.filter(F.getAnnotationsToProcessFilter);te.meta.publicDashboardAccessToken&&j.length>0&&(j=[j[0]]);const be=j.map(Le=>{let Qe;if((0,p.iE)().isPublicDashboardView){const Ye=new w.lh(w.Qi);Qe=(0,S.of)(Ye).pipe((0,E.K)(x.hs))}else Qe=(0,C.D)((0,R.F)().get(Le.datasource)).pipe((0,E.K)(x.hs));return Qe.pipe((0,D.z)(Ye=>{const de=this.runners.find(Be=>Be.canRun(Ye));return de?(te.events.publish(new L.z(Le)),de.run({annotation:Le,datasource:Ye,dashboard:te,range:ne}).pipe((0,f.R)(me().cancellations().pipe((0,T.h)(Be=>Be===Le))),(0,m.U)(Be=>(te.snapshot&&(Le.snapshotData=(0,y.cloneDeep)(Be)),te.meta.publicDashboardAccessToken?Be:(0,x.pG)(Le,Be))),(0,r.x)(()=>{te.events.publish(new L.RB(Le))}))):(0,S.of)([])}))});return(0,s.T)(be).pipe((0,o.J)(),(0,l.u)((Le,Qe)=>Le.concat(Qe)),(0,m.U)(Le=>({annotations:Le,alertStates:[]})))}static getAnnotationsToProcessFilter(J){return J.enable&&!Boolean(J.snapshotData)}}var V=e(56422),b=e(23309),X=e(82002),k=e(37190),H=e(79662),Y=e(81168),ee=e(46063);class ue{constructor(){this.hasAlertRules={}}canWork({dashboard:J,range:te}){return!(!J.uid||J.meta.publicDashboardAccessToken||te.raw.to!=="now"||this.hasAlertRules[J.uid]===!1||!(X.Vt.hasPermission(Y.AccessControlAction.AlertingRuleRead)&&X.Vt.hasPermission(Y.AccessControlAction.AlertingRuleExternalRead)))}work(J){if(!this.canWork(J))return(0,x.H_)();const{dashboard:te}=J;return(0,C.D)((0,P.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:te.uid},`dashboard-query-runner-unified-alert-states-${te.id}`)).pipe((0,m.U)(ne=>{if(ne.status==="success"){this.hasAlertRules[te.uid]=!1;const j={};return ne.data.groups.forEach(be=>be.rules.forEach(Le=>{if((0,H.x_)(Le)&&Le.annotations&&Le.annotations[k.q6.panelID]){this.hasAlertRules[te.uid]=!0;const Qe=Number(Le.annotations[k.q6.panelID]),Ye=q(Le.state);j[Qe]?Ye===b.Z.Alerting&&j[Qe].state!==b.Z.Alerting?j[Qe].state=b.Z.Alerting:Ye===b.Z.Pending&&j[Qe].state!==b.Z.Alerting&&j[Qe].state!==b.Z.Pending&&(j[Qe].state=b.Z.Pending):j[Qe]={state:Ye,id:Object.keys(j).length,panelId:Qe,dashboardId:te.id}}})),{alertStates:Object.values(j),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,E.K)(x.Rc))}}function q(Ee){return Ee===ee.x_.Firing?b.Z.Alerting:Ee===ee.x_.Pending?b.Z.Pending:b.Z.OK}class ge{constructor(J,te=(0,v.$t)(),ne=[p.vc.unifiedAlertingEnabled?new ue:new M,new V.g,new F]){this.dashboard=J,this.timeSrv=te,this.workers=ne,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new t.t(1),this.runs=new n.x,this.cancellationStream=new n.x,this.runsSubscription=this.runs.subscribe(j=>this.executeRun(j)),this.eventsSubscription=J.events.subscribe(g.U5,j=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(J){this.runs.next(J)}getResult(J){return this.results.asObservable().pipe((0,m.U)(te=>{const ne=(0,x.tD)(te.annotations,J),j=te.alertStates.find(be=>Boolean(J)&&be.panelId===J);return{annotations:h(ne),alertState:j}}))}executeRun(J){const ne=this.workers.filter(Ye=>Ye.canWork(J)).map(Ye=>Ye.work(J)),j=new u.w0,be=(0,s.T)(ne).pipe((0,f.R)(this.runs.asObservable()),(0,o.J)(),(0,l.u)((Ye,de)=>(Ye.annotations=Ye.annotations.concat(de.annotations),Ye.alertStates=Ye.alertStates.concat(de.alertStates),Ye)),(0,r.x)(()=>{j.unsubscribe()}),(0,d.B)()),Le=new u.w0,Qe=(0,i.H)(200).pipe((0,c.h)({annotations:[],alertStates:[]}),(0,f.R)(be),(0,r.x)(()=>{Le.unsubscribe()}));Le.add(Qe.subscribe(Ye=>{this.results.next(Ye)})),j.add(be.subscribe(Ye=>{this.results.next(Ye)}))}cancel(J){this.cancellationStream.next(J)}cancellations(){return this.cancellationStream.asObservable().pipe((0,d.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let De;function fe(Ee){De&&De.destroy(),De=Ee}function me(){if(!De)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return De}let ce;function ie(Ee){ce=Ee}function re(Ee){ce||(ce=({dashboard:te,timeSrv:ne,workers:j})=>new ge(te,ne,j));const J=ce(Ee);return fe(J),J}},56422:(G,O,e)=>{"use strict";e.d(O,{g:()=>u});var t=e(53786),n=e(55197);class u{canWork({dashboard:i}){return i?.annotations?.list?.some(m=>m.enable&&Boolean(m.snapshotData))}work(i){if(!this.canWork(i))return(0,n.H_)();const m=this.getAnnotationsFromSnapshot(i.dashboard);return(0,t.of)({annotations:m,alertStates:[]})}getAnnotationsFromSnapshot(i){return(i?.annotations?.list?.filter(l=>l.enable)).filter(l=>Boolean(l.snapshotData)).reduce((l,r)=>l.concat((0,n.pG)(r,r.snapshotData)),[])}getAnnotationsInSnapshot(i,m){const f=this.getAnnotationsFromSnapshot(i);return(0,n.tD)(f,m)}}},55197:(G,O,e)=>{"use strict";e.d(O,{H_:()=>c,Rc:()=>g,em:()=>a,h1:()=>r,hs:()=>d,pG:()=>h,tD:()=>y});var t=e(82897),n=e.n(t),u=e(53786),s=e(50235),i=e(91896),m=e(93003),f=e(3153),o=e(60499),l=e(98864);function r(v){return v.cancelled?(0,u.of)([]):(p("AnnotationQueryRunner failed",v),(0,u.of)([]))}function d(v){return p("Failed to retrieve datasource",v),(0,u.of)(void 0)}const c=()=>(0,u.of)({annotations:[],alertStates:[]});function g(v){return v.cancelled||p("DashboardQueryRunner failed",v),c()}function p(v,C){const E=(0,i.P)(C);console.error("handleAnnotationQueryRunnerError",E);const P=(0,o.t_)(v,E.message);(0,f.WI)((0,l.$l)(P))}function y(v,C){return v.filter(E=>C!==void 0&&E.panelId&&E.source?.type==="dashboard"?E.panelId===C:!0)}function h(v,C){v.snapshotData&&(v=(0,t.cloneDeep)(v),delete v.snapshotData);for(const E of C)switch(E.source=v,E.color=m.v.theme2.visualization.getColorByName(v.iconColor),E.type=v.name,E.isRegion=Boolean(E.timeEnd&&E.time!==E.timeEnd),E.newState?.toLowerCase()){case"pending":E.color="yellow";break;case"alerting":E.color="red";break;case"ok":E.color="green";break;case"normal":E.color="green";break;case"no_data":E.color="gray";break;case"nodata":E.color="gray";break}return C}function a(v){if(!v||!v.length)return[];const C=[];for(const E of v){const P=new s.U(E);for(let x=0;x<E.length;x++){const M=(0,t.cloneDeep)(P.get(x));C.push(M)}}return C}},78800:(G,O,e)=>{"use strict";e.d(O,{o:()=>L,t:()=>R});var t=e(82897),n=e(53786),u=e(16527),s=e(98356),i=e(2101),m=e(79720),f=e(49922),o=e(16911),l=e(69311),r=e(36998),d=e(38067),c=e(40400),g=e(33180),p=e(69934),y=e(91896),h=e(9800),a=e(14035),v=e(91162),C=e(53693),E=e(17424),P=e(87865),x=e(86680),M=e(71398);function S(A,N){return(0,x.a)([A,N]).pipe((0,s.z)(W=>{const[I,F]=W;if(Boolean(F.annotations?.length)||Boolean(F.alertState)){I.annotations||(I.annotations=[]);const V=I.annotations.concat(new M.i(F.annotations)),b=F.alertState;return(0,n.of)({...I,annotations:V,alertState:b})}return(0,n.of)(I)}))}var D=e(75434);let T=100;function R(){return"Q"+T++}class L{constructor(N){this.getTransformationsStream=W=>I=>I.pipe((0,s.z)(F=>{if(!W)return(0,n.of)(F);const V=this.dataConfigSource.getTransformations();if(!V||V.length===0)return(0,n.of)(F);const b={interpolate:X=>(0,p.J)().replace(X,F?.request?.scopedVars)};return(0,m.H)(V,F.series,b).pipe((0,i.U)(X=>({...F,series:X})))})),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new u.t(1),this.dataConfigSource=N}getData(N){const{withFieldConfig:W,withTransforms:I}=N;let F=1,V=[],b=!0,X=-1;if(this.dataConfigSource.snapshotData){const k={state:f.Gu.Done,series:this.dataConfigSource.snapshotData.map(H=>(0,o.g0)(H)),timeRange:(0,l.JK)()};return(0,n.of)(k)}return this.subject.pipe(this.getTransformationsStream(I),(0,i.U)(k=>{let H=k,Y=!1;if(W&&k.series?.length){if(X===this.dataConfigSource.configRev){const ue=k.series.find(q=>(0,a.iL)(q));ue&&!ue.packetInfo.schemaChanged&&V[0].fields.length===ue.fields.length&&(H={...H,series:V.map((q,ge)=>({...q,length:k.series[ge].length,fields:q.fields.map((De,fe)=>({...De,values:k.series[ge].fields[fe].values,state:{...De.state,calcs:void 0,range:void 0}}))}))},Y=!0)}let ee=this.dataConfigSource.getFieldOverrideOptions();ee!=null&&(b||!Y)&&(X=this.dataConfigSource.configRev,H={...H,series:(0,r.SM)({timeZone:k.request?.timezone??"browser",data:H.series,...ee})},b=!1)}return!Y&&!(0,d.nl)(V,H.series,d.Ch)&&F++,V=H.series,{...H,structureRev:F}}))}async run(N){const{queries:W,timezone:I,datasource:F,panelId:V,dashboardId:b,dashboardUID:X,publicDashboardAccessToken:k,timeRange:H,timeInfo:Y,cacheTimeout:ee,maxDataPoints:ue,scopedVars:q,minInterval:ge,app:De}=N;if((0,C.yl)(F)){this.pipeToSubject((0,C.AK)(N,W[0]),V);return}const fe={app:De??c.zj.Dashboard,requestId:R(),timezone:I,panelId:V,dashboardId:b,dashboardUID:X,publicDashboardAccessToken:k,range:H,timeInfo:Y,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(W),maxDataPoints:ue,scopedVars:q||{},cacheTimeout:ee,startTime:Date.now(),rangeRaw:H.raw};try{const me=await w(F,fe.scopedVars,k),ce=me.meta?.mixed;fe.targets=fe.targets.map(Ee=>{const J=Ee.datasource?.type===h.hr.type;return(!Ee.datasource||Ee.datasource.uid!==me.uid&&!ce&&!J)&&(Ee.datasource=me.getRef()),Ee});const ie=ge?(0,p.J)().replace(ge,fe.scopedVars):me.interval,re=g.calculateInterval(H,ue,ie);fe.scopedVars=Object.assign({},fe.scopedVars,{__interval:{text:re.interval,value:re.interval},__interval_ms:{text:re.intervalMs.toString(),value:re.intervalMs}}),fe.interval=re.interval,fe.intervalMs=re.intervalMs,this.lastRequest=fe,this.pipeToSubject((0,D.v7)(me,fe),V)}catch(me){this.pipeToSubject((0,n.of)({state:f.Gu.Error,error:(0,y.P)(me),series:[],timeRange:fe.range}),V)}}pipeToSubject(N,W){this.subscription&&this.subscription.unsubscribe();let I=N;const F=this.dataConfigSource.getDataSupport();if(F.alertStates||F.annotations){const V=this.dataConfigSource;I=S(N,(0,P.kt)().getResult(V.id))}this.subscription=I.subscribe({next:V=>{this.lastResult=(0,D.zR)(V,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===f.Gu.Loading&&this.subject.next({...this.lastResult,state:f.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new u.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(N){this.lastResult=N.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(N){this.lastResult=N}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function w(A,N,W){if(!W&&A&&typeof A=="object"&&"query"in A)return A;const I=await(0,v.ak)().get(A,N);return W?new E.lh(I):I}},13204:(G,O,e)=>{"use strict";e.d(O,{V:()=>n});var t=e(97218);function n(u,s){return(0,t.x)(()=>{s&&u.resolveCancelerIfExists(s)})}},59584:(G,O,e)=>{"use strict";e.d(O,{C:()=>n});var t=e(38067);const n=(u,s)=>{let i=1;return s?.structureRev&&s.series&&(i=s.structureRev,(0,t.nl)(u.series,s.series,t.Ch)||i++),u.structureRev=i,u}},75434:(G,O,e)=>{"use strict";e.d(O,{zR:()=>F,v7:()=>A});var t=e(82897),n=e(53786),u=e(16313),s=e(4561),i=e(85526),m=e(2101),f=e(94514),o=e(29236),l=e(44962),r=e(7356),d=e(67305),c=e(49922),g=e(62163),p=e(21053),y=e(40400),h=e(16911),a=e(91896),v=e(9800),C=e(29930),E=e(99822),P=e(47471),x=e(13204),M=e(27677),S=e(66799),D=e(77274),T=e(9398);function R(V){let b=!1;return H=>{if(!H.request||b||M.Cj.getUrlSearchParams().editPanel!=null||H.state!==c.Gu.Done&&H.state!==c.Gu.Error)return;const ee={eventName:S.ct.DataRequest,source:H.request.app,datasourceName:V.name,datasourceId:V.id,datasourceUid:V.uid,datasourceType:V.type,dataSize:0,duration:H.request.endTime-H.request.startTime};H.request.app===y.zj.Explore||H.request.app===y.zj.Correlations?X(ee,H):k(ee,H),H.series&&H.series.length>0&&(ee.dataSize=H.series.length),(0,D.r_)(ee),b=!0};function X(H,Y){const ee=Object.keys(Y.series).length;H.totalQueries=ee}function k(H,Y){const ee={};for(let De=0;De<Y.series.length;De++){const fe=Y.series[De].refId;fe&&!ee[fe]&&(ee[fe]=Y.series[De].meta?.isCachedResponse??!1)}const ue=Object.keys(ee).length,q=Object.values(ee).filter(De=>De===!0).length;H.panelId=Y.request.panelId,H.dashboardId=Y.request.dashboardId,H.totalQueries=ue,H.cachedQueries=q;const ge=(0,T.h4)().getCurrent();ge&&(H.dashboardId=ge.id,H.dashboardName=ge.title,H.dashboardUid=ge.uid,H.folderName=ge.meta.folderTitle),Y.error&&(H.error=Y.error.message)}}function L(V,b){const X=b.panelData.request,k={...b.packets},H=V.key??V.data?.[0]?.refId??"A";k[H]=V;let Y=V.state||c.Gu.Done,ee;const ue=[],q=[];for(const fe in k){const me=k[fe];if(me.error&&(Y=c.Gu.Error,ee=me.error),me.data&&me.data.length)for(const ce of me.data){if(ce.meta?.dataTopic===g.w5.Annotations){q.push(ce);continue}ue.push(ce)}}const ge=w(X,Y);return{packets:k,panelData:{state:Y,series:ue,annotations:q,error:ee,request:X,timeRange:ge}}}function w(V,b){const X=V.range;return!(0,t.isString)(X.raw.from)||b!==c.Gu.Streaming?X:{...X,from:p.parse(X.raw.from,!1),to:p.parse(X.raw.to,!0)}}function A(V,b,X){let k={panelData:{state:c.Gu.Loading,series:[],request:b,timeRange:b.range},packets:{}};if(!b.targets.length)return b.endTime=Date.now(),k.panelData.state=c.Gu.Done,(0,n.of)(k.panelData);const H=N(V,b,X).pipe((0,m.U)(Y=>{if(!(0,t.map)(Y.data))throw new Error(`Expected response data to be array, got ${typeof Y.data}.`);return b.endTime=Date.now(),k=L(Y,k),k.panelData}),(0,f.K)(Y=>{const ee=typeof Y=="string"?Y:JSON.stringify(Y);return console.error("runRequest.catchError",ee),(0,n.of)({...k.panelData,state:c.Gu.Error,error:(0,a.P)(Y)})}),(0,o.b)(R(V)),(0,x.V)(C.ae,b.requestId),(0,l.B)());return(0,u.T)((0,s.H)(200).pipe((0,r.h)(k.panelData),(0,d.R)(H)),H)}function N(V,b,X){if(b.targets=b.targets.map(H=>(0,E.vH)(H)?{...V?.getDefaultQuery?.(y.zj.PanelEditor),...H}:H),V.type==="public-ds")return(0,i.D)(V.query(b));for(const H of b.targets)if((0,v.Pr)(H.datasource))return P.mV.query(b);const k=X?X(b):V.query(b);return(0,i.D)(k)}function W(V){const b=(0,h.SX)((0,h.g0)(V));if(b.fields&&b.fields.length)for(const X of b.fields)X.state=null;return b}function I(V){return!V||!(0,t.map)(V)?[]:V.map(b=>W(b))}function F(V,b){const{series:X,annotations:k}=V;if(V.state===c.Gu.Loading&&X.length===0)return b||(b=V),{...b,state:c.Gu.Loading,request:V.request};const H=performance.now(),Y=X.map(q=>W(q)),ee=I(k),ue=performance.now();return{...V,series:Y,annotations:ee,timings:{dataProcessingTime:ue-H}}}},43993:(G,O,e)=>{"use strict";e.d(O,{K:()=>C,A:()=>v});var t=e(52423),n=e(68404),u=e(95148),s=e(11979),i=e(68183),m=e(29516),f=e(81697),o=e(36012),l=e(97635),r=e(29930),d=e(9085),c=e.n(d),g=e(40008);function p({className:P,imageHeight:x,imageWidth:M,item:S,lastUpdated:D,onClick:T}){const R=(0,m.l4)(),[L,w]=(0,n.useState)(!0),A=v(S.uid,R.isLight),N=y(R,x,M),W=S.folderTitle||"General";return n.createElement("a",{className:c()(P,N.card),key:S.uid,href:S.url,onClick:T},n.createElement("div",{className:N.imageContainer},L?n.createElement("img",{loading:"lazy",alt:"Dashboard preview",className:N.image,src:A,onLoad:()=>w(!0),onError:()=>w(!1)}):n.createElement("div",{className:N.imagePlaceholder},S.icon?n.createElement(u.Z,{src:S.icon,width:36,height:36,title:S.title}):n.createElement(f.J,{name:"apps",size:"xl"}))),n.createElement("div",{className:N.info},n.createElement("div",{className:N.infoHeader},n.createElement("div",{className:N.titleContainer},n.createElement("div",null,S.title),n.createElement("div",{className:N.folder},n.createElement(f.J,{name:"folder"}),W)),D!==null&&n.createElement("div",{className:N.updateContainer},n.createElement("div",null,"Last updated"),D?n.createElement("div",{className:N.update},D):n.createElement(g.$,null))),n.createElement("div",null,n.createElement(o.P,{className:N.tagList,tags:S.tags}))))}const y=(P,x,M)=>{const S=P.spacing(4);return{card:t.css`
      background-color: ${P.colors.background.secondary};
      border: 1px solid ${P.colors.border.medium};
      border-radius: 4px;
      box-shadow: ${P.shadows.z3};
      display: flex;
      flex-direction: column;
      height: 100%;
      max-width: calc(${M}px + (${S} * 2))};
      width: 100%;
    `,folder:t.css`
      align-items: center;
      color: ${P.colors.text.secondary};
      display: flex;
      font-size: ${P.typography.size.sm};
      gap: ${P.spacing(.5)};
    `,image:t.css`
      box-shadow: ${P.shadows.z2};
      height: ${x}px;
      margin: ${P.spacing(1)} calc(${S} - 1px) 0;
      width: ${M}px;
    `,imageContainer:t.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${P.spacing(1)} calc(${S} - 1px) 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:t.css`
      align-items: center;
      color: ${P.colors.text.secondary};
      display: flex;
      height: ${x}px;
      justify-content: center;
      margin: ${P.spacing(1)} ${S} 0;
      width: ${M}px;
    `,info:t.css`
      background-color: ${P.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      flex-direction: column;
      min-height: ${P.spacing(7)};
      gap: ${P.spacing(1)};
      padding: ${P.spacing(1)} ${P.spacing(2)};
      z-index: 1;
    `,infoHeader:t.css`
      display: flex;
      gap: ${P.spacing(1)};
      justify-content: space-between;
    `,tagList:t.css`
      justify-content: flex-start;
    `,titleContainer:t.css`
      display: flex;
      flex-direction: column;
      gap: ${P.spacing(.5)};
    `,updateContainer:t.css`
      align-items: flex-end;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      font-size: ${P.typography.bodySmall.fontSize};
      gap: ${P.spacing(.5)};
    `,update:t.css`
      color: ${P.colors.text.secondary};
      text-align: right;
    `}};var h=e(84638);const a=500;function v(P,x){return`/api/dashboards/uid/${P}/img/thumb/${x?"light":"dark"}`}function C({editable:P,item:x,onTagSelected:M,onToggleChecked:S,onClick:D}){const[T,R]=(0,n.useState)(!0),[L,w]=(0,n.useState)(null),[A,N]=(0,n.useState)(!1),W=(0,n.useRef)(null),I=(0,n.useCallback)(({placement:ie,reference:re,popper:Ee})=>{let J=[0,0];return ie==="bottom"||ie==="top"?J=[0,-(re.height+Ee.height)/2]:(ie==="left"||ie==="right")&&(J=[-(re.width+Ee.width)/2,0]),J},[]),[F,V]=n.useState(null),[b,X]=n.useState(null),{styles:k,attributes:H}=(0,s.D)(F,b,{modifiers:[{name:"offset",options:{offset:I}}]}),Y=(0,m.l4)(),ee=v(x.uid,Y.isLight),ue=E(Y,F?.getBoundingClientRect().width,b?.getBoundingClientRect().width),q=async()=>{if(N(!0),x.uid&&!L){const ie=await r.ae.getDashboardByUid(x.uid),{updated:re}=ie.meta;w(re?new Date(re).toLocaleString():null)}},ge=()=>{W.current=window.setTimeout(q,a)},De=()=>{W.current&&window.clearTimeout(W.current),W.current=window.setTimeout(q,a)},fe=()=>{W.current&&window.clearTimeout(W.current),N(!1)},me=ie=>{ie.stopPropagation(),ie.preventDefault(),S?.(x)},ce=(ie,re)=>{re.stopPropagation(),re.preventDefault(),M?.(ie)};return n.createElement("a",{"data-testid":i.wl.components.Search.dashboardCard(x.title),className:ue.card,key:x.uid,href:x.url,ref:ie=>V(ie),onMouseEnter:ge,onMouseLeave:fe,onMouseMove:De,onClick:D},n.createElement("div",{className:ue.imageContainer},n.createElement(h.R,{className:ue.checkbox,"aria-label":`Select dashboard ${x.title}`,editable:P,checked:x.checked,onClick:me}),T?n.createElement("img",{loading:"lazy",className:ue.image,src:ee,alt:"Dashboard preview",onError:()=>R(!1)}):n.createElement("div",{className:ue.imagePlaceholder},x.icon?n.createElement(u.Z,{src:x.icon,width:36,height:36,title:x.title}):n.createElement(f.J,{name:"apps",size:"xl"}))),n.createElement("div",{className:ue.info},n.createElement("div",{className:ue.title},x.title),n.createElement(o.P,{displayMax:1,tags:x.tags,onClick:ce})),A&&n.createElement(l.h_,{className:ue.portal},n.createElement("div",{ref:X,style:k.popper,...H.popper},n.createElement(p,{className:ue.expandedView,imageHeight:240,imageWidth:320,item:x,lastUpdated:L,onClick:D}))))}const E=(P,x=0,M=0)=>{const S=P.spacing(4);return{card:t.css`
      background-color: ${P.colors.background.secondary};
      border: 1px solid ${P.colors.border.medium};
      border-radius: 4px;
      display: flex;
      flex-direction: column;

      &:hover {
        background-color: ${P.colors.emphasize(P.colors.background.secondary,.03)};
      }
    `,checkbox:t.css`
      left: 0;
      margin: ${P.spacing(1)};
      position: absolute;
      top: 0;
    `,expandedView:t.css`
      @keyframes expand {
        0% {
          transform: scale(${x/M});
        }
        100% {
          transform: scale(1);
        }
      }

      animation: expand ${P.transitions.duration.shortest}ms ease-in-out 0s 1 normal;
      background-color: ${P.colors.emphasize(P.colors.background.secondary,.03)};
    `,image:t.css`
      aspect-ratio: 4 / 3;
      box-shadow: ${P.shadows.z1};
      margin: ${P.spacing(1)} ${S} 0;
      width: calc(100% - (2 * ${S}));
    `,imageContainer:t.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${P.spacing(1)} ${S} 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:t.css`
      align-items: center;
      aspect-ratio: 4 / 3;
      color: ${P.colors.text.secondary};
      display: flex;
      justify-content: center;
      margin: ${P.spacing(1)} ${S} 0;
      width: calc(100% - (2 * ${S}));
    `,info:t.css`
      align-items: center;
      background-color: ${P.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      height: ${P.spacing(7)};
      gap: ${P.spacing(1)};
      padding: 0 ${P.spacing(2)};
      z-index: 1;
    `,portal:t.css`
      pointer-events: none;
    `,title:t.css`
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `}}},84638:(G,O,e)=>{"use strict";e.d(O,{R:()=>u});var t=e(68404),n=e(94338);const u=(0,t.memo)(({onClick:s,className:i,checked:m=!1,editable:f=!1,"aria-label":o})=>f?t.createElement("div",{onClick:s,className:i},t.createElement(n.X,{value:m,"aria-label":o})):null);u.displayName="SearchCheckbox"},81029:(G,O,e)=>{"use strict";e.d(O,{T:()=>c});var t=e(52423),n=e(68404),u=e(68183),s=e(29516),i=e(66208),m=e(81697),f=e(36012),o=e(10216),l=e(84638);const r=u.wl.components.Search,d=(p="")=>{const y=new Map([["errors","info-circle"],["views","eye"]]);return y.has(p)?y.get(p):"sort-amount-down"},c=({item:p,editable:y,onToggleChecked:h,onTagSelected:a,onClickItem:v})=>{const C=(0,s.wW)(g),E=(0,n.useCallback)((M,S)=>{S.stopPropagation(),S.preventDefault(),a(M)},[a]),P=(0,n.useCallback)(M=>{M.stopPropagation(),M.preventDefault(),h&&h(p)},[p,h]),x=p.folderTitle||"General";return n.createElement(i.Z,{"data-testid":r.dashboardItem(p.title),href:p.url,style:{minHeight:o.CN},className:C.container,onClick:v},n.createElement(i.Z.Heading,null,p.title),n.createElement(i.Z.Figure,{align:"center",className:C.checkbox},n.createElement(l.R,{"aria-label":"Select dashboard",editable:y,checked:p.checked,onClick:P})),n.createElement(i.Z.Meta,{separator:""},n.createElement("span",{className:C.metaContainer},n.createElement(m.J,{name:"folder","aria-hidden":!0}),x),p.sortMetaName&&n.createElement("span",{className:C.metaContainer},n.createElement(m.J,{name:d(p.sortMetaName)}),p.sortMeta," ",p.sortMetaName)),n.createElement(i.Z.Tags,null,n.createElement(f.P,{tags:p.tags,onClick:E,getAriaLabel:M=>`Filter by tag "${M}"`})))},g=p=>({container:t.css`
      margin-bottom: ${p.spacing(.75)};
      padding: ${p.spacing(1)} ${p.spacing(2)};
    `,metaContainer:t.css`
      display: flex;
      align-items: center;
      margin-right: ${p.spacing(1)};

      svg {
        margin-right: ${p.spacing(.5)};
      }
    `,checkbox:t.css`
      margin-right: 0;
    `})},10216:(G,O,e)=>{"use strict";e.d(O,{CN:()=>u,E_:()=>g,YQ:()=>o,fy:()=>l,pW:()=>f,qi:()=>m,rh:()=>d,to:()=>r,xb:()=>c,yw:()=>i});var t=e(1037);const n=null,u=58,s=8,i={label:"A\u2013Z",value:"alpha-asc"},m="search.sections",f=0,o="general",l="General",r="grafana.search.include.panels",d="grafana.search.layout",c={dashboard:t.o.DashDB,folder:t.o.DashFolder,home:t.o.DashHome},g=1e3},54350:(G,O,e)=>{"use strict";e.d(O,{A:()=>i,v:()=>m});var t=e(68404),n=e(96209),u=e(83383),s=e(57388);function i(){const f=(0,t.useRef)(new n.x);return{keyboardEvents:f.current,onKeyDown:o=>{switch(o.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":f.current.next(o);default:}}}}function m(f,o,l){const r=(0,t.useRef)({x:0,y:-1}),[d,c]=(0,t.useState)({x:0,y:-1}),g=(0,t.useRef)();return(0,t.useEffect)(()=>{g.current=l.view.fields.url,r.current.x=0,r.current.y=-1,c({...r.current})},[l]),(0,t.useEffect)(()=>{const p=f.subscribe({next:y=>{switch(y?.code){case"ArrowDown":{r.current.y++,c({...r.current});break}case"ArrowUp":r.current.y=Math.max(0,r.current.y-1),c({...r.current});break;case"ArrowRight":{o>0&&(r.current.x=Math.min(o,r.current.x+1),c({...r.current}));break}case"ArrowLeft":{o>0&&(r.current.x=Math.max(0,r.current.x-1),c({...r.current}));break}case"Enter":if(!g.current)break;const h=r.current.x*o+r.current.y;if(h<0){r.current.x=0,r.current.y=0,c({...r.current});break}const a=g.current.values?.get(h);a&&s.E1.push(u.u.stripBaseFromUrl(a))}}});return()=>p.unsubscribe()},[f,o]),d}},30506:(G,O,e)=>{"use strict";e.d(O,{T:()=>t.T,_:()=>S});var t=e(81029),n=e(68404),u=e(93003),s=e(70356),i=e(57388);function m(){const D=(0,s.TH)();return[new URLSearchParams(D.search),(L,w)=>{i.E1.partial(L,w)}]}var f=e(52423),o=e(29516),l=e(20017),r=e(82385),d=e(54350),c=e(71897),g=e(66757);function p({}){const D=(0,o.wW)(y),T=(0,g.hD)(),R=T.useState();(0,n.useEffect)(()=>T.initStateFromUrl(),[T]);const{onKeyDown:L,keyboardEvents:w}=(0,d.A)();return n.createElement("div",{className:D.overlay},n.createElement("div",{className:D.container},n.createElement("div",{className:D.searchField},n.createElement("div",null,n.createElement("input",{type:"text",autoFocus:!0,placeholder:R.includePanels?"Search dashboards and panels by name":"Search dashboards by name",value:R.query??"",onChange:A=>T.onQueryChange(A.currentTarget.value),onKeyDown:L,spellCheck:!1,className:D.input})),n.createElement("div",{className:D.closeBtn},n.createElement(l.h,{name:"times",onClick:T.onCloseSearch,size:"xxl",tooltip:"Close search"}))),n.createElement("div",{className:D.search},n.createElement(c.Z,{showManage:!1,keyboardEvents:w}))))}const y=(0,r.B)(D=>({overlay:f.css`
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      z-index: ${D.zIndex.sidemenu};
      position: fixed;
      background: ${D.colors.background.canvas};
      padding: ${D.spacing(1)};

      ${D.breakpoints.up("md")} {
        left: ${D.components.sidemenu.width}px;
        z-index: ${D.zIndex.navbarFixed+1};
        padding: ${D.spacing(2)};
      }
    `,container:f.css`
      display: flex;
      flex-direction: column;
      max-width: 1400px;
      margin: 0 auto;
      padding: ${D.spacing(1)};
      background: ${D.colors.background.primary};
      border: 1px solid ${D.components.panel.borderColor};
      height: 100%;

      ${D.breakpoints.up("md")} {
        padding: ${D.spacing(3)};
      }
    `,closeBtn:f.css`
      right: -5px;
      top: 2px;
      z-index: 1;
      position: absolute;
    `,searchField:f.css`
      position: relative;
    `,search:f.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${D.spacing(2,0,3,0)};
    `,input:f.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 2px solid ${D.v1.colors.border1};
      font-size: 20px;
      line-height: 38px;
      width: 100%;

      &::placeholder {
        color: ${D.v1.colors.textWeak};
      }
    `}));var h=e(99510),a=e(81699),v=e(6665),C=e(22163);const E=200;function P({isOpen:D}){const T=(0,o.wW)(M),R=(0,o.wW)(H=>x(H,E)),L=(0,g.hD)(),w=L.useState(),A=(0,n.useRef)(null),N=(0,n.useRef)(null),[W,I]=(0,n.useState)(!1),{overlayProps:F,underlayProps:V}=(0,v.Ir)({isOpen:D,onClose:L.onCloseSearch},A),{dialogProps:b}=(0,h.R)({},A),{onKeyDown:X,keyboardEvents:k}=(0,d.A)();return(0,n.useEffect)(()=>L.initStateFromUrl(),[L]),n.createElement(v.Xj,null,n.createElement(C.Z,{nodeRef:N,appear:!0,in:!0,timeout:E,classNames:R.underlay},n.createElement("div",{ref:N,onClick:L.onCloseSearch,className:T.underlay,...V})),n.createElement(C.Z,{nodeRef:A,onEntered:()=>I(!0),appear:!0,in:!0,timeout:E,classNames:R.overlay},n.createElement("div",{ref:A,className:T.overlay,...F,...b},n.createElement(a.MT,{contain:!0,autoFocus:!0},n.createElement("div",{className:T.searchField},n.createElement("div",null,n.createElement("input",{type:"text",placeholder:w.includePanels?"Search dashboards and panels by name":"Search dashboards by name",value:w.query??"",onChange:H=>L.onQueryChange(H.currentTarget.value),onKeyDown:X,tabIndex:0,spellCheck:!1,className:T.input})),n.createElement("div",{className:T.closeBtn},n.createElement(l.h,{name:"times",onClick:L.onCloseSearch,size:"xl",tooltip:"Close search"}))),W&&n.createElement("div",{className:T.search},n.createElement(c.Z,{showManage:!1,keyboardEvents:k}))))))}const x=(D,T)=>{const R={transitionDuration:`${T}ms`,transitionTimingFunction:D.transitions.easing.easeInOut},L={[D.breakpoints.up("md")]:{...R,transitionProperty:"opacity"}},w={[D.breakpoints.up("md")]:{opacity:0}},A={[D.breakpoints.up("md")]:{opacity:1}},N={[D.breakpoints.up("md")]:{...R,transitionProperty:"height, width",overflow:"hidden"}},W={height:"100%",width:"100%",[D.breakpoints.up("md")]:{height:"32px",width:"50%"}},I={height:"100%",width:"100%",[D.breakpoints.up("md")]:{height:"90%",width:"75%"}};return{overlay:{appear:(0,f.css)(W),appearActive:(0,f.css)(N,I),appearDone:(0,f.css)(I)},underlay:{appear:(0,f.css)(w),appearActive:(0,f.css)(L,A),appearDone:(0,f.css)(A)}}},M=D=>({underlay:f.css`
      background-color: ${D.components.overlay.background};
      backdrop-filter: blur(1px);
      bottom: 0;
      left: 0;
      padding: 0;
      position: fixed;
      right: 0;
      top: 0;
      z-index: ${D.zIndex.modalBackdrop};
    `,overlay:f.css`
      background: ${D.colors.background.primary};
      border: 1px solid ${D.components.panel.borderColor};
      display: flex;
      flex-direction: column;
      margin: 0 auto;
      padding: ${D.spacing(1)};
      position: fixed;
      height: 100%;
      z-index: ${D.zIndex.modal};

      ${D.breakpoints.up("md")} {
        border-radius: ${D.shape.borderRadius(2)};
        box-shadow: ${D.shadows.z3};
        left: 0;
        margin: ${D.spacing(.5,"auto",0)};
        padding: ${D.spacing(1)};
        right: 0;
      }
    `,closeBtn:f.css`
      right: -5px;
      top: 0px;
      z-index: 1;
      position: absolute;
    `,searchField:f.css`
      position: relative;
    `,search:f.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${D.spacing(2,0,3,0)};
    `,input:f.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 1px solid ${D.colors.border.medium};
      font-size: 16px;
      line-height: 30px;
      width: 100%;

      &::placeholder {
        color: ${D.colors.text.disabled};
      }
    `}),S=(0,n.memo)(()=>{const[D]=m(),T=D.get("search")==="open",R=u.v.featureToggles.topnav;return T?R?n.createElement(P,{isOpen:T}):n.createElement(p,null):null});S.displayName="SearchWrapper"},16526:(G,O,e)=>{"use strict";e.d(O,{Q:()=>Y});var t=e(52423),n=e(68404),u=e(91742),s=e(75478),i=e(47535),m=e(29516),f=e(85563),o=e(26192),l=e(54350),r=e(14582),d=e(36512),c=e(89890),g=e(20112),p=e(93003),y=e(77213),h=e(20017),a=e(94338),v=e(81697),C=e(36012),E=e(97063),P=e(48996),x=e(45984),M=e(33716),S=e(6694),D=e(51142),T=e(57172),R=e(19942);const L=[{label:"Score",value:"score"},{label:"Fields",value:"fields"},{label:"Allowed actions",value:"allowed_actions"}];function w({name:q,explain:ge,frame:De,row:fe}){const[me,ce]=(0,n.useState)(!0),[ie,re]=(0,n.useState)("score"),Ee=n.createElement(M.H,{title:q,icon:"info",tabs:L,activeTab:ie,onChangeTab:J=>{re(J.value)}});return n.createElement(S.u,{title:Ee,isOpen:me,onDismiss:()=>ce(!1),closeOnBackdropClick:!0,closeOnEscape:!0},n.createElement(D.I,null,ie===L[0].value&&n.createElement(T.p,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!0,value:JSON.stringify(ge,null,2),readOnly:!1}),ie===L[1].value&&n.createElement("div",null,n.createElement(R.H,{data:De,rowIndex:fe})),ie===L[2].value&&n.createElement(T.p,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!1,value:(()=>{const J=De.fields.find(ne=>ne.name==="allowed_actions")?.values?.get(fe),te=De.fields.find(ne=>ne.name==="ds_uid")?.values?.get(fe);return JSON.stringify({dsUids:te??[],allowedActions:J??[]},null,2)})(),readOnly:!1})))}const A=175,N=200,W=(q,ge,De,fe,me,ce,ie,re,Ee)=>{const J=[],te=q.view.fields,ne=te.uid,j=te.kind;let be=0;const Le=te[q.view.dataFrame.meta?.custom?.sortBy];Le&&(be=175,Le.type===r.fS.time&&(be+=25),ge-=be),te.explain&&te.score&&(ge-=100);let Qe=50;De&&fe&&(Qe=30,J.push({id:"column-checkbox",width:Qe,Header:()=>De("*","*")?n.createElement("div",{className:ce.checkboxHeader},n.createElement(h.h,{name:"check-square",onClick:me})):n.createElement("div",{className:ce.checkboxHeader},n.createElement(a.X,{checked:!1,onChange:Be=>{Be.stopPropagation(),Be.preventDefault();const{view:Ve}=q,$e=Math.min(Ve.length,50);for(let We=0;We<$e;We++){const Ke=Ve.get(We);Ke.uid&&Ke.kind&&(De(Ke.kind,Ke.uid)||fe(Ke.kind,Ke.uid))}}})),Cell:Be=>{const Ve=ne.values.get(Be.row.index),$e=j?j.values.get(Be.row.index):"dashboard",We=De($e,Ve),Ke=Ve!=null;return n.createElement("div",{...Be.cellProps},n.createElement("div",{className:ce.checkbox},n.createElement(a.X,{disabled:!Ke,value:We&&Ke,onChange:qe=>{fe($e,Ve)}})))},field:ne}),ge-=Qe),Qe=Math.max(ge*.2,300),J.push({Cell:Be=>{let Ve=(0,t.cx)(ce.nameCellStyle),$e=te.name.values.get(Be.row.index);return $e?.length||($e=Be.row.index>=q.view.dataFrame.length?"Loading...":"Missing title",Ve+=" "+ce.missingTitleText),n.createElement("a",{...Be.cellProps,href:Be.userProps.href,onClick:Be.userProps.onClick,className:Ve,title:$e},$e)},id:"column-name",field:te.name,Header:()=>n.createElement("div",{className:ce.headerNameStyle},"Name"),width:Qe}),ge-=Qe,Qe=A,J.push(b(te.kind,te.panel_type,Qe,ce)),ge-=Qe,te.ds_uid&&re&&(Qe=Math.min(ge/2.5,N),J.push(V(te.ds_uid,Qe,ce.typeIcon,ce.datasourceItem,ce.invalidDatasourceItem,re)),ge-=Qe);const Ye=!Ee||F(q.view.fields.tags),de=q.view.dataFrame.meta?.custom;if(de?.locationInfo&&ge>0&&(Qe=Ye?Math.max(ge/1.75,300):ge,ge-=Qe,J.push({Cell:Be=>{const Ve=(te.location?.values.get(Be.row.index)??"").split("/");return n.createElement("div",{...Be.cellProps,className:(0,t.cx)(ce.locationCellStyle)},Ve.map($e=>{const We=de.locationInfo[$e];return We?n.createElement("a",{key:$e,href:We.url,className:ce.locationItem},n.createElement(v.J,{name:I(We.kind)})," ",We.name):n.createElement("span",{key:$e},$e)}))},id:"column-location",field:te.location??te.url,Header:"Location",width:Qe})),ge>0&&Ye&&J.push(X(te.tags,ge,ce.tagList,ie)),Le&&be){const Be=Le.display??(0,d.U)({field:Le,theme:p.v.theme2});J.push({Header:()=>n.createElement("div",{className:ce.sortedHeader},(0,c.C)(Le)),Cell:Ve=>n.createElement("div",{...Ve.cellProps,className:ce.sortedItems},k({sortField:Le,getDisplay:Be,index:Ve.row.index,kind:te.kind})),id:"column-sort-field",field:Le,width:be})}if(te.explain&&te.score){const Be=te.score.values,Ve=$e=>{E.Z.publish(new x.Dn({component:w,props:{name:te.name.values.get($e),explain:te.explain.values.get($e),frame:q.view.dataFrame,row:$e}}))};J.push({Header:()=>n.createElement("div",{className:ce.sortedHeader},"Score"),Cell:$e=>n.createElement("div",{...$e.cellProps,className:ce.explainItem,onClick:()=>Ve($e.row.index)},Be.get($e.row.index)),id:"column-score-field",field:te.score,width:100})}return J};function I(q){return q==="dashboard"?"apps":q==="folder"?"folder":"question-circle"}function F(q){for(let ge=0;ge<q.values.length;ge++)if(q.values.get(ge)!=null)return!0;return!1}function V(q,ge,De,fe,me,ce){const ie=(0,y.F)();return{id:"column-datasource",field:q,Header:"Data source",Cell:re=>{const Ee=q.values.get(re.row.index);return Ee?.length?n.createElement("div",{...re.cellProps,className:(0,t.cx)(fe)},Ee.map((J,te)=>{const ne=ie.getInstanceSettings(J),j=ne?.meta?.info?.logos?.small;return j?n.createElement("span",{key:te,onClick:be=>{be.stopPropagation(),be.preventDefault(),ce(ne.uid)}},n.createElement("img",{src:j,alt:"",width:14,height:14,title:ne.type,className:De}),ne.name):n.createElement("span",{className:me,key:te},J)})):null},width:ge}}function b(q,ge,De,fe){return{id:"column-type",field:q??ge,Header:"Type",Cell:me=>{const ce=me.row.index,ie=q?.values.get(ce)??"dashboard";let re="apps",Ee="Dashboard";if(ie)switch(Ee=ie,Ee){case"dashboard":Ee="Dashboard";break;case"folder":re="folder",Ee="Folder";break;case"panel":re=`${P.Co.panel}`;const J=ge.values.get(ce);if(J){Ee=J;const te=p.v.panels[Ee];if(te?.name)Ee=te.name;else switch(J){case"row":Ee="Row",re="bars";break;case"singlestat":Ee="Singlestat";break;default:re="question-circle"}}break}return n.createElement("div",{...me.cellProps,className:fe.typeText},n.createElement(v.J,{name:re,size:"sm",title:Ee,className:fe.typeIcon}),Ee)},width:De}}function X(q,ge,De,fe){return{Cell:me=>{const ce=q.values.get(me.row.index);return ce?n.createElement("div",{...me.cellProps},n.createElement(C.P,{className:De,tags:ce,onClick:fe})):null},id:"column-tags",field:q,Header:"Tags",width:ge}}function k({kind:q,sortField:ge,index:De,getDisplay:fe}){const me=ge.values.get(De);return["folder","panel"].includes(q.values.get(De))&&me===0?"-":(0,g.zc)(fe(me))}const H=36,Y=n.memo(({response:q,width:ge,height:De,selection:fe,selectionToggle:me,clearSelection:ce,onTagSelected:ie,onDatasourceChange:re,onClickItem:Ee,keyboardEvents:J})=>{const te=(0,m.wW)(ee),ne=(0,m.wW)(ue),j=(0,m.wW)(o.V),be=(0,n.useRef)(null),[Le,Qe]=(0,n.useState)(null),Ye=(0,l.v)(J,0,q),de=(0,n.useMemo)(()=>q?.view?.dataFrame.fields.length?Array(q.totalRows).fill(0):[],[q]);(0,n.useEffect)(()=>{be.current&&be.current.resetloadMoreItemsCache(),Le&&Le.scrollTo(0)},[de,Le]);const Be=(0,n.useMemo)(()=>W(q,ge,fe,me,ce,ne,ie,re,q.view?.length>=q.totalRows),[q,ge,ne,fe,me,ce,ie,re]),Ve=(0,n.useMemo)(()=>({columns:Be,data:de}),[Be,de]),{getTableProps:$e,getTableBodyProps:We,headerGroups:Ke,rows:qe,prepareRow:Xe}=(0,u.useTable)(Ve,u.useAbsoluteLayout),at=(0,n.useCallback)(({index:Ze,style:lt})=>{const nt=qe[Ze];Xe(nt);const _e=q.view.fields.url?.values.get(Ze);let ut=te.rowContainer;return Ze===Ye.y&&(ut+=" "+te.selectedRow),n.createElement("div",{...nt.getRowProps({style:lt}),className:ut},nt.cells.map((rt,je)=>n.createElement(f.p,{key:je,tableStyles:j,cell:rt,columnIndex:je,columnCount:nt.cells.length,userProps:{href:_e,onClick:Ee}})))},[qe,Xe,q.view.fields.url?.values,Ye,te,j,Ee]);return qe.length?n.createElement("div",{...$e(),"aria-label":"Search results table",role:"table"},n.createElement("div",null,Ke.map(Ze=>{const{key:lt,...nt}=Ze.getHeaderGroupProps();return n.createElement("div",{key:lt,...nt,className:te.headerRow},Ze.headers.map(_e=>{const{key:ut,...rt}=_e.getHeaderProps();return n.createElement("div",{key:ut,...rt,role:"columnheader",className:te.headerCell},_e.render("Header"))}))})),n.createElement("div",{...We()},n.createElement(i.Z,{ref:be,isItemLoaded:q.isItemLoaded,itemCount:qe.length,loadMoreItems:q.loadMoreItems},({onItemsRendered:Ze,ref:lt})=>n.createElement(s.t7,{ref:nt=>{lt(nt),Qe(nt)},onItemsRendered:Ze,height:De-H,itemCount:qe.length,itemSize:j.rowHeight,width:"100%",style:{overflow:"hidden auto"}},at)))):n.createElement("div",{className:te.noData},"No data")});Y.displayName="SearchResultsTable";const ee=q=>{const ge=q.colors.emphasize(q.colors.background.primary,.03);return{noData:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,headerCell:t.css`
      padding: ${q.spacing(1)};
    `,headerRow:t.css`
      background-color: ${q.colors.background.secondary};
      height: ${H}px;
      align-items: center;
    `,selectedRow:t.css`
      background-color: ${ge};
      box-shadow: inset 3px 0px ${q.colors.primary.border};
    `,rowContainer:t.css`
      label: row;
      &:hover {
        background-color: ${ge};
      }

      &:not(:hover) div[role='cell'] {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    `}},ue=q=>({nameCellStyle:t.css`
      border-right: none;
      padding: ${q.spacing(1)} ${q.spacing(1)} ${q.spacing(1)} ${q.spacing(2)};
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      &:hover {
        box-shadow: none;
      }
    `,headerNameStyle:t.css`
      padding-left: ${q.spacing(1)};
    `,typeIcon:t.css`
      margin-left: 5px;
      margin-right: 9.5px;
      vertical-align: middle;
      display: inline-block;
      margin-bottom: ${q.v1.spacing.xxs};
      fill: ${q.colors.text.secondary};
    `,datasourceItem:t.css`
      span {
        &:hover {
          color: ${q.colors.text.link};
        }
      }
    `,missingTitleText:t.css`
      color: ${q.colors.text.disabled};
      font-style: italic;
    `,invalidDatasourceItem:t.css`
      color: ${q.colors.error.main};
      text-decoration: line-through;
    `,typeText:t.css`
      color: ${q.colors.text.secondary};
      padding-top: ${q.spacing(1)};
    `,locationItem:t.css`
      color: ${q.colors.text.secondary};
      margin-right: 12px;
    `,sortedHeader:t.css`
      text-align: right;
      padding-right: ${q.spacing(2)};
    `,sortedItems:t.css`
      text-align: right;
      padding: ${q.spacing(1)} ${q.spacing(3)} ${q.spacing(1)} ${q.spacing(1)};
    `,explainItem:t.css`
      text-align: right;
      padding: ${q.spacing(1)} ${q.spacing(3)} ${q.spacing(1)} ${q.spacing(1)};
      cursor: pointer;
    `,locationCellStyle:t.css`
      padding-top: ${q.spacing(1)};
      padding-right: ${q.spacing(1)};
    `,checkboxHeader:t.css`
      margin-left: 2px;
    `,checkbox:t.css`
      margin-left: 10px;
      margin-right: 10px;
      margin-top: 5px;
    `,tagList:t.css`
      padding-top: ${q.spacing(.5)};
      justify-content: flex-start;
      flex-wrap: nowrap;
    `})},71897:(G,O,e)=>{"use strict";e.d(O,{Z:()=>Xe});var t=e(52423),n=e(68404),u=e(70197),s=e(89050),i=e(29516),m=e(40008),f=e(90723),o=e(69142),l=e(93003),r=e(2323);const d=({text:Ze})=>n.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},Ze),c=({requiredImageRendererPluginVersion:Ze})=>Ze?n.createElement(n.Fragment,null,"You must update the ",n.createElement(d,{text:"Grafana image renderer plugin"})," to version"," ",Ze," to enable dashboard previews. Please contact your Grafana administrator to update the plugin."):n.createElement(n.Fragment,null,"You must install the ",n.createElement(d,{text:"Grafana image renderer plugin"})," to enable dashboard previews. Please contact your Grafana administrator to install the plugin."),g=({showPreviews:Ze,onRemove:lt,topSpacing:nt,bottomSpacing:_e})=>{const ut=(0,i.wW)(p),rt=l.v.featureToggles.dashboardPreviews,je=l.v.rendererAvailable,{systemRequirements:{met:dt,requiredImageRendererPluginVersion:oe},thumbnailsExist:Se}=l.v.dashboardPreviews,ve=rt&&Ze&&!(je&&dt||Se),Te=oe?"Image renderer plugin needs to be updated":"Image renderer plugin not installed";return n.createElement(n.Fragment,null,ve&&n.createElement("div",{className:ut.wrapper},n.createElement(r.b,{className:ut.alert,topSpacing:nt,bottomSpacing:_e,severity:"info",title:Te,onRemove:lt},n.createElement(c,{requiredImageRendererPluginVersion:oe}))))},p=()=>({wrapper:t.css`
      display: flex;
      justify-content: center;
    `,alert:t.css`
      max-width: 800px;
    `});var y=e(64823),h=e(66757),a=e(1037);function v(){const Ze=new Map;return{items:Ze,isSelected:(nt,_e)=>Boolean(Ze.get(nt)?.has(_e))}}function C(Ze,lt,nt,_e){const ut=Ze.items;if(_e.length){const rt=ut.get(nt);if(rt){for(const je of _e)lt?rt.add(je):rt.delete(je);rt.size<1&&ut.delete(nt)}else lt&&ut.set(nt,new Set(_e))}return{items:ut,isSelected:(rt,je)=>{if(je==="*"){if(rt==="*"){for(const dt of ut.keys())if(ut.get(dt)?.size)return!0;return!1}return Boolean(ut.get(rt)?.size)}return Boolean(ut.get(rt)?.has(je))}}}var E=e(90701),P=e(94338),x=e(318),M=e(79979),S=e(24357);const D=[{value:a.A.Folders,icon:"folder",ariaLabel:"View by folders"},{value:a.A.List,icon:"list-ul",ariaLabel:"View as list"}];l.v.featureToggles.dashboardPreviews&&D.push({value:a.A.Grid,icon:"apps",ariaLabel:"Grid view"});function T(Ze){const lt=Ze.layout??a.A.Folders;return lt===a.A.Folders&&(Ze.query||Ze.sort||Ze.starred)||lt===a.A.Grid&&!l.v.featureToggles.dashboardPreviews?a.A.List:lt}const R=({onLayoutChange:Ze,onSortChange:lt,onStarredFilterChange:nt=()=>{},onTagFilterChange:_e,getTagOptions:ut,getSortOptions:rt,sortPlaceholder:je,onDatasourceChange:dt,onSetIncludePanels:oe,state:Se,showStarredFilter:Re,hideLayout:ze})=>{const ve=(0,i.wW)(L),Te=T(Se),he=Se.query?[a.A.Folders]:[];return n.createElement("div",{className:ve.actionRow},n.createElement(E.Lh,{spacing:"md",width:"auto"},n.createElement(S.D,{isClearable:!1,tags:Se.tag,tagOptions:ut,onChange:_e}),l.v.featureToggles.panelTitleSearch&&n.createElement(P.X,{"data-testid":"include-panels",disabled:Te===a.A.Folders,value:Se.includePanels,onChange:()=>oe(!Se.includePanels),label:"Include panels"}),Re&&n.createElement("div",{className:ve.checkboxWrapper},n.createElement(P.X,{label:"Starred",onChange:nt,value:Se.starred})),Se.datasource&&n.createElement(f.zx,{icon:"times",variant:"secondary",onClick:()=>dt(void 0)},"Datasource: ",Se.datasource)),n.createElement("div",{className:ve.rowContainer},n.createElement(E.Lh,{spacing:"md",width:"auto"},!ze&&n.createElement(x.S,{options:D,disabledOptions:he,onChange:Ze,value:Te}),n.createElement(M.P,{onChange:lt,value:Se.sort?.value,getSortOptions:rt,placeholder:je,isClearable:!0}))))};R.displayName="ActionRow";const L=Ze=>({actionRow:t.css`
      display: none;

      ${Ze.breakpoints.up("md")} {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: ${Ze.spacing(2)};
        width: 100%;
      }
    `,rowContainer:t.css`
      margin-right: ${Ze.v1.spacing.md};
    `,checkboxWrapper:t.css`
      label {
        line-height: 1.2;
      }
    `});var w=e(24664),A=e(22350),N=e(68183),W=e(66208),I=e(53535),F=e(81697),V=e(63053),b=e(56991),X=e(30506);const k=({section:Ze,selectionToggle:lt,onClickItem:nt,onTagSelected:_e,selection:ut,renderStandaloneBody:rt,tags:je})=>{const dt=lt!=null,oe=(0,i.wW)((0,n.useCallback)(Ne=>H(Ne,Ze.selected,dt),[Ze.selected,dt])),[Se,Re]=(0,w.Z)((0,V.tT)(Ze.title),!1),ze=(0,A.Z)(async()=>{if(!Se&&!rt)return Promise.resolve([]);let Ne=Ze.uid,Me=Ze.title,Ae={query:"*",kind:["dashboard"],location:Ze.uid,sort:"name_sort",limit:1e3};Ze.itemsUIDs&&(Ae={uid:Ze.itemsUIDs},Ne=void 0,Me=void 0);const we=await(0,y.getGrafanaSearcher)().search({...Ae,tags:je});return we.view.map(st=>({uid:st.uid,title:st.name,url:st.url,uri:st.url,type:st.kind==="folder"?a.o.DashFolder:a.o.DashDB,id:666,isStarred:!1,tags:st.tags??[],folderUid:Ne||st.location,folderTitle:Me||we.view.dataFrame.meta?.custom?.locationInfo[st.location].name}))},[Se,je]),ve=()=>{Re(!Se)},Te=Ne=>{if(Ne.preventDefault(),Ne.stopPropagation(),lt&&ut){const Me=!ut(Ze.kind,Ze.uid);lt(Ze.kind,Ze.uid);const Ae=ze.value??[];for(const we of Ae)ut("dashboard",we.uid)!==Me&&lt("dashboard",we.uid)}},pe=`section-header-label-${(0,b.L)()}`;let ye=Ze.icon;ye||(ye=Se?"folder-open":"folder");const Oe=()=>{if(ze.value){if(ze.value.length===0&&!ze.loading)return n.createElement(W.Z,null,n.createElement(W.Z.Heading,null,"No results found"))}else return null;return ze.value.map(Ne=>{if(ut&&lt){const Me=Ne.type===a.o.DashFolder?"folder":"dashboard";Ne={...Ne,checked:ut(Me,Ne.uid)}}return n.createElement(X.T,{key:Ne.uid,item:Ne,onTagSelected:_e,onToggleChecked:Me=>{lt&&lt("dashboard",Me.uid)},editable:Boolean(ut!=null),onClickItem:nt})})};return rt?n.createElement("div",{className:oe.folderViewResults},!ze.value?.length&&ze.loading?n.createElement(m.$,{className:oe.spinner}):Oe()):n.createElement(I.s,{headerDataTestId:N.wl.components.Search.folderHeader(Ze.title),contentDataTestId:N.wl.components.Search.folderContent(Ze.title),isOpen:Se??!1,onToggle:ve,className:oe.wrapper,contentClassName:oe.content,loading:ze.loading,labelId:pe,label:n.createElement(n.Fragment,null,lt&&ut&&n.createElement("div",{className:oe.checkbox,onClick:Te},n.createElement(P.X,{value:ut(Ze.kind,Ze.uid),"aria-label":"Select folder"})),n.createElement("div",{className:oe.icon},n.createElement(F.J,{name:ye})),n.createElement("div",{className:oe.text},n.createElement("span",{id:pe},Ze.title),Ze.url&&Ze.uid!=="general"&&n.createElement("a",{href:Ze.url,className:oe.link},n.createElement("span",{className:oe.separator},"|")," ",n.createElement(F.J,{name:"folder-upload"})," Go to folder")))},ze.value&&n.createElement("ul",{className:oe.sectionItems},Oe()))},H=(Ze,lt=!1,nt)=>{const _e=Ze.spacing(1);return{wrapper:(0,t.cx)(t.css`
        align-items: center;
        font-size: ${Ze.typography.size.base};
        padding: 12px;
        border-bottom: none;
        color: ${Ze.colors.text.secondary};
        z-index: 1;

        &:hover,
        &.selected {
          color: ${Ze.colors.text};
        }

        &:hover,
        &:focus-visible,
        &:focus-within {
          a {
            opacity: 1;
          }
        }
      `,"pointer",{selected:lt}),sectionItems:t.css`
      margin: 0 24px 0 32px;
    `,checkbox:t.css`
      padding: 0 ${_e} 0 0;
    `,icon:t.css`
      padding: 0 ${_e} 0 ${nt?0:_e};
    `,folderViewResults:t.css`
      overflow: auto;
    `,text:t.css`
      flex-grow: 1;
      line-height: 24px;
    `,link:t.css`
      padding: 2px 10px 0;
      color: ${Ze.colors.text.secondary};
      opacity: 0;
      transition: opacity 150ms ease-in-out;
    `,separator:t.css`
      margin-right: 6px;
    `,content:t.css`
      padding-top: 0px;
      padding-bottom: 0px;
    `,spinner:t.css`
      display: grid;
      place-content: center;
      padding-bottom: 1rem;
    `}};var Y=e(47214),ee=e(82002),ue=e(13019),q=e(10216);const ge=({selection:Ze,selectionToggle:lt,onTagSelected:nt,tags:_e,hidePseudoFolders:ut,onClickItem:rt})=>{const je=(0,i.wW)(De),dt=(0,A.Z)(async()=>{const Se=[];if(!ut){if(ee.Vt.isSignedIn){const Te=await(0,Y.i)().get("api/user/stars");Te.length>0&&Se.push({title:"Starred",icon:"star",kind:"query-star",uid:"__starred",itemsUIDs:Te})}const ve=await ue.Z.getDashboardOpened();ve.length&&Se.push({title:"Recent",icon:"clock-nine",kind:"query-recent",uid:"__recent",itemsUIDs:ve})}Se.push({title:"General",url:"/dashboards",kind:"folder",uid:q.YQ});const Re=(0,y.getGrafanaSearcher)(),ze=await Re.search({query:"*",kind:["folder"],sort:Re.getFolderViewSort(),limit:1e3});for(const ve of ze.view)Se.push({title:ve.name,url:ve.url,uid:ve.uid,kind:ve.kind});return Se},[]),oe=()=>dt.loading?n.createElement(m.$,{className:je.spinner}):dt.value?dt.value.map(Se=>n.createElement("div",{"data-testid":N.wl.components.Search.sectionV2,className:je.section,key:Se.title},Se.title&&n.createElement(k,{selection:Ze,selectionToggle:lt,onTagSelected:nt,section:Se,tags:_e,onClickItem:rt}))):n.createElement(r.b,{className:je.error,title:dt.error?dt.error.message:"Something went wrong"});return n.createElement("div",{className:je.wrapper},oe())},De=Ze=>({wrapper:t.css`
      display: flex;
      flex-direction: column;
      overflow: auto;

      > ul {
        list-style: none;
      }

      border: solid 1px ${Ze.v1.colors.border2};
    `,section:t.css`
      display: flex;
      flex-direction: column;
      background: ${Ze.v1.colors.panelBg};

      &:not(:last-child) {
        border-bottom: solid 1px ${Ze.v1.colors.border2};
      }
    `,spinner:t.css`
      align-items: center;
      display: flex;
      justify-content: center;
      min-height: 100px;
    `,error:t.css`
      margin: ${Ze.spacing(4)} auto;
    `});var fe=e(20017),me=e(81202),ce=e(50946);const ie=({results:Ze,onDeleteItems:lt,isOpen:nt,onDismiss:_e})=>{const ut=(0,i.wW)(re),rt=Array.from(Ze.get("dashboard")??[]),je=Array.from(Ze.get("folder")??[]),dt=je.length,oe=rt.length;let Se="Do you want to delete the ",Re;const ze=oe===1?"":"s",ve=dt===1?"":"s";dt>0&&oe>0?(Se+=`selected folder${ve} and dashboard${ze}?
`,Re=`All dashboards and alerts of the selected folder${ve} will also be deleted`):dt>0?Se+=`selected folder${ve} and all ${dt===1?"its":"their"} dashboards and alerts?`:Se+=`${oe} selected dashboard${ze}?`;const Te=()=>{(0,ce.Fd)(je,rt).then(()=>{lt(),_e()})};return nt?n.createElement(me.s,{isOpen:nt,title:"Delete",body:n.createElement(n.Fragment,null,Se," ",Re&&n.createElement("div",{className:ut.subtitle},Re)),confirmText:"Delete",onConfirm:Te,onDismiss:_e}):null},re=Ze=>({subtitle:t.css`
    font-size: ${Ze.typography.fontSize}px;
    padding-top: ${Ze.spacing(2)};
  `});var Ee=e(6694),J=e(79658),te=e(60499);const ne=({results:Ze,onMoveItems:lt,isOpen:nt,onDismiss:_e})=>{const[ut,rt]=(0,n.useState)(null),je=(0,i.wW)(j),dt=(0,te.iG)(),oe=Array.from(Ze.get("dashboard")??[]),[Se,Re]=(0,n.useState)(!1),ze=()=>{if(ut&&oe.length){const ve=ut.title??"General";Re(!0),(0,ce.ct)(oe,ut).then(Te=>{if(Te.successCount>0){const he=Te.successCount===1?"":"s",pe=`Dashboard${he} Moved`,ye=`${Te.successCount} dashboard${he} moved to ${ve}`;dt.success(pe,ye)}Te.totalCount===Te.alreadyInFolderCount?dt.error("Error",`Dashboard already belongs to folder ${ve}`):lt(),Re(!1),_e()})}};return nt?n.createElement(Ee.u,{className:je.modal,title:"Choose Dashboard Folder",icon:"folder-plus",isOpen:nt,onDismiss:_e},n.createElement(n.Fragment,null,n.createElement("div",{className:je.content},n.createElement("p",null,"Move the ",oe.length," selected dashboard",oe.length===1?"":"s"," to the following folder:"),n.createElement(J.Es,{onChange:ve=>rt(ve)})),n.createElement(E.Lh,{justify:"center"},n.createElement(f.zx,{icon:Se?"fa fa-spinner":void 0,variant:"primary",onClick:ze},"Move"),n.createElement(f.zx,{variant:"secondary",onClick:_e},"Cancel")))):null},j=Ze=>({modal:t.css`
      width: 500px;
    `,content:t.css`
      margin-bottom: ${Ze.spacing(3)};
    `});function be({items:Ze,folder:lt,onChange:nt,clearSelection:_e}){const ut=(0,i.wW)(L),rt=lt?.canSave,je=lt?rt:ee.Vt.hasEditPermissionInFolders,dt=je,Se=Array.from(Ze.get("folder")??[]).find(Oe=>Oe===q.YQ),Re=je&&!Se,[ze,ve]=(0,n.useState)(!1),[Te,he]=(0,n.useState)(!1),pe=()=>{ve(!0)},ye=()=>{he(!0)};return n.createElement("div",{className:ut.actionRow,"data-testid":"manage-actions"},n.createElement("div",{className:ut.rowContainer},n.createElement(E.Lh,{spacing:"md",width:"auto"},n.createElement(fe.h,{name:"check-square",onClick:_e,title:"Uncheck everything"}),n.createElement(f.zx,{disabled:!dt,onClick:pe,icon:"exchange-alt",variant:"secondary"},"Move"),n.createElement(f.zx,{disabled:!Re,onClick:ye,icon:"trash-alt",variant:"destructive"},"Delete"))),n.createElement(ie,{onDeleteItems:nt,results:Ze,isOpen:Te,onDismiss:()=>he(!1)}),n.createElement(ne,{onMoveItems:nt,results:Ze,isOpen:ze,onDismiss:()=>ve(!1)}))}var Le=e(75478),Qe=e(47535),Ye=e(81029),de=e(54350);const Be=n.memo(({response:Ze,width:lt,height:nt,selection:_e,selectionToggle:ut,onTagSelected:rt,keyboardEvents:je,onClickItem:dt})=>{const oe=(0,i.wW)(Ve),Se=(0,n.useRef)(null),[Re,ze]=(0,n.useState)(null),ve=(0,de.v)(je,0,Ze);(0,n.useEffect)(()=>{Se.current&&Se.current.resetloadMoreItemsCache(),Re&&Re.scrollTo(0)},[Ze,Re]);const Te=(0,n.useCallback)(({index:he,style:pe})=>{const ye=Ze.view.dataFrame.meta?.custom;let Oe="";he===ve.y&&(Oe+=" "+oe.selectedRow);const Ne=Ze.view.get(he);let Me={uid:Ne.uid,title:Ne.name,url:Ne.url,uri:Ne.url,type:Ne.kind==="folder"?a.o.DashFolder:a.o.DashDB,id:666,isStarred:!1,tags:Ne.tags??[]};if(Ne.location){const Ae=Ne.location.split("/")[0],we=ye.locationInfo[Ae];we&&(Me.folderUid=Ne.location,Me.folderTitle=we.name)}if(_e&&ut){const Ae=Me.type===a.o.DashFolder?"folder":"dashboard";Me={...Me,checked:_e(Ae,Me.uid)}}return n.createElement("div",{style:pe,key:Ne.uid,className:Oe,role:"row"},n.createElement(Ye.T,{item:Me,onTagSelected:rt,onToggleChecked:Ae=>{ut&&ut("dashboard",Ae.uid)},editable:Boolean(_e!=null),onClickItem:dt}))},[Ze.view,ve,oe,rt,_e,ut,dt]);return Ze.totalRows?n.createElement("div",{"aria-label":"Search results list",style:{width:lt},role:"list"},n.createElement(Qe.Z,{ref:Se,isItemLoaded:Ze.isItemLoaded,itemCount:Ze.totalRows,loadMoreItems:Ze.loadMoreItems},({onItemsRendered:he,ref:pe})=>n.createElement(Le.t7,{ref:ye=>{pe(ye),ze(ye)},onItemsRendered:he,height:nt,itemCount:Ze.totalRows,itemSize:72,width:"100%",style:{overflow:"hidden auto"}},Te))):n.createElement("div",{className:oe.noData,style:{width:lt}},"No data")});Be.displayName="SearchResultsCards";const Ve=Ze=>({noData:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,selectedRow:t.css`
      border-left: 3px solid ${Ze.colors.primary.border};
    `});var $e=e(43993);const We=({response:Ze,width:lt,height:nt,selection:_e,selectionToggle:ut,onTagSelected:rt,onClickItem:je,keyboardEvents:dt})=>{const oe=(0,i.wW)(Ke),Se={editable:_e!=null,onToggleChecked:Oe=>{const Ne=Oe,Me=Ne.type===a.o.DashFolder?"folder":"dashboard";ut&&ut(Me,Ne.uid)},onTagSelected:rt,onClick:je},Re=Ze.totalRows??Ze.view.length,ze=Ze.view,ve=Math.ceil(lt/320),Te=lt/ve,he=(Te-64)*.75+56+8,pe=Math.ceil(Re/ve),ye=(0,de.v)(dt,ve,Ze);return n.createElement(Qe.Z,{isItemLoaded:Ze.isItemLoaded,itemCount:Re,loadMoreItems:Ze.loadMoreItems},({onItemsRendered:Oe,ref:Ne})=>n.createElement(Le.Ym,{ref:Ne,onItemsRendered:Me=>{Oe({visibleStartIndex:Me.visibleRowStartIndex*ve,visibleStopIndex:Me.visibleRowStopIndex*ve,overscanStartIndex:Me.overscanRowStartIndex*ve,overscanStopIndex:Me.overscanColumnStopIndex*ve})},columnCount:ve,columnWidth:Te,rowCount:pe,rowHeight:he,className:oe.wrapper,innerElementType:"ul",height:nt,width:lt-2},({columnIndex:Me,rowIndex:Ae,style:we})=>{const ke=Ae*ve+Me;if(ke>=ze.length)return null;const st=ze.get(ke),Et=st.kind??"dashboard",Pt={uid:st.uid,title:st.name,url:st.url,uri:st.url,type:Et==="folder"?a.o.DashFolder:a.o.DashDB,id:666,isStarred:!1,tags:st.tags??[],checked:_e?_e(Et,st.uid):!1};if(Et==="panel"){const Ct=st.panel_type;if(Pt.icon="public/img/icons/unicons/graph-bar.svg",Ct){const Ot=l.v.panels[Ct];if(Ot?.name){const Ft=Ot.info?.logos.small;Ft&&Ft.endsWith(".svg")&&(Pt.icon=Ft)}}}let gt=oe.virtualizedGridItemWrapper;return Ae===ye.y&&Me===ye.x&&(gt+=" "+oe.selectedItem),st?n.createElement("li",{style:we,className:gt},n.createElement($e.K,{key:st.uid,...Se,item:Pt})):null}))},Ke=Ze=>({virtualizedGridItemWrapper:t.css`
    padding: 4px;
  `,wrapper:t.css`
    display: flex;
    flex-direction: column;

    > ul {
      list-style: none;
    }
  `,selectedItem:t.css`
    box-shadow: inset 1px 1px 3px 3px ${Ze.colors.primary.border};
  `});var qe=e(16526);const Xe=({showManage:Ze,folderDTO:lt,hidePseudoFolders:nt,keyboardEvents:_e})=>{const ut=(0,i.wW)(at),rt=(0,h.hD)(),je=rt.useState(),[dt,oe]=(0,n.useState)(v()),Se=T(je),Re=Se===a.A.Folders,[ze,ve]=(0,n.useState)(Date.now());(0,u.Z)(rt.onReportSearchUsage,1e3,[]);const Te=(0,n.useCallback)(()=>{dt.items.clear(),oe({...dt})},[dt]),he=(0,n.useCallback)((Oe,Ne)=>{const Me=dt.isSelected(Oe,Ne);oe(C(dt,!Me,Oe,[Ne]))},[dt]),pe=async()=>{Te(),ve(Date.now()),rt.onQueryChange(je.query)},ye=()=>{const Oe=je.result;if((!Oe||!Oe.totalRows)&&!Re)return je.loading&&!Oe?n.createElement(m.$,null):n.createElement("div",{className:ut.noResults},n.createElement("div",null,"No results found for your query."),n.createElement("br",null),n.createElement(f.zx,{variant:"secondary",onClick:()=>{je.query&&rt.onQueryChange(""),je.tag?.length&&rt.onTagFilterChange([]),je.datasource&&rt.onDatasourceChange(void 0)}},"Clear search and filters"));const Ne=Ze?dt.isSelected:void 0;return Se===a.A.Folders?lt?n.createElement(k,{section:{uid:lt.uid,kind:"folder",title:lt.title},selection:Ne,selectionToggle:he,onTagSelected:rt.onAddTag,renderStandaloneBody:!0,tags:je.tag,key:ze,onClickItem:rt.onSearchItemClicked}):n.createElement(ge,{key:ze,selection:Ne,selectionToggle:he,tags:je.tag,onTagSelected:rt.onAddTag,hidePseudoFolders:nt,onClickItem:rt.onSearchItemClicked}):n.createElement("div",{style:{height:"100%",width:"100%"}},n.createElement(s.Z,null,({width:Me,height:Ae})=>{const we={response:Oe,selection:Ne,selectionToggle:he,clearSelection:Te,width:Me,height:Ae,onTagSelected:rt.onAddTag,keyboardEvents:_e,onDatasourceChange:je.datasource?rt.onDatasourceChange:void 0,onClickItem:rt.onSearchItemClicked};return Se===a.A.Grid?n.createElement(We,{...we}):Me<800?n.createElement(Be,{...we}):n.createElement(qe.Q,{...we})}))};return lt&&!je.loading&&!je.result?.totalRows&&!rt.hasSearchFilters()?n.createElement(o.Z,{title:"This folder doesn't have any dashboards yet",buttonIcon:"plus",buttonTitle:"Create Dashboard",buttonLink:`dashboard/new?folderUid=${lt.uid}`,proTip:"Add/move dashboards to your folder at ->",proTipLink:"dashboards",proTipLinkTitle:"Manage dashboards",proTipTarget:""}):n.createElement(n.Fragment,null,Boolean(dt.items.size>0)?n.createElement(be,{items:dt.items,onChange:pe,clearSelection:Te}):n.createElement(R,{onLayoutChange:rt.onLayoutChange,showStarredFilter:nt,onStarredFilterChange:nt?rt.onStarredFilterChange:void 0,onSortChange:rt.onSortChange,onTagFilterChange:rt.onTagFilterChange,getTagOptions:rt.getTagOptions,getSortOptions:(0,y.getGrafanaSearcher)().getSortOptions,sortPlaceholder:(0,y.getGrafanaSearcher)().sortPlaceholder,onDatasourceChange:rt.onDatasourceChange,state:je,includePanels:je.includePanels,onSetIncludePanels:rt.onSetIncludePanels}),Se===a.A.Grid&&n.createElement(g,{bottomSpacing:3,showPreviews:!0,onRemove:()=>rt.onLayoutChange(a.A.List)}),ye())},at=Ze=>({searchInput:t.css`
    margin-bottom: 6px;
    min-height: ${Ze.spacing(4)};
  `,unsupported:t.css`
    padding: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    font-size: 18px;
  `,noResults:t.css`
    padding: ${Ze.v1.spacing.md};
    background: ${Ze.v1.colors.bg2};
    font-style: italic;
    margin-top: ${Ze.v1.spacing.md};
  `})},72809:(G,O,e)=>{"use strict";e.d(O,{Jy:()=>m,Nw:()=>o,OY:()=>i,Qw:()=>s,TP:()=>f});var t=e(77274),n=e(93003),u=e(1037);const s=(r,d)=>{(0,t.ff)(`${r}_viewed`,l(d))},i=(r,d)=>{(0,t.ff)(`${r}_result_clicked`,l(d))},m=(r,d)=>{(0,t.ff)(`${r}_query_submitted`,l(d))},f=(r,{error:d,...c})=>{(0,t.ff)(`${r}_query_failed`,{...l(c),error:d})},o=(r,d,c)=>{(0,t.ff)(`grafana_panel_inspect_${r}_${d}_clicked`,c)},l=r=>{const d=r.layout===u.A.Grid;return{previews:Boolean(n.v.featureToggles.panelTitleSearch)?d?"on":"off":"feature_disabled",layout:r.layout,starredFilter:r.starred??!1,sort:r.sortValue??"",tagCount:r.tagCount??0,queryLength:r.query?.length??0,includePanels:r.includePanels??!1}}},64823:(G,O,e)=>{"use strict";e.d(O,{getGrafanaSearcher:()=>A});var t=e(93003),n=e(50235),u=e(16911),s=e(36512),i=e(47214),m=e(9398);async function f(N){return N.query&&N.query.indexOf("folder:current")>=0&&(N={...N,location:await o(),query:N.query.replace("folder:current","").trim()},N.query?.length||(N.query="*")),Promise.resolve(N)}async function o(){try{let N=(0,m.h4)().getCurrent();return N||(await l(500),N=(0,m.h4)().getCurrent()),Promise.resolve(N?.meta?.folderUid)}catch(N){console.error(N)}}function l(N){return new Promise(W=>setTimeout(W,N))}const r="Loading",d="api/search-v2",c="name_sort";class g{constructor(W){this.fallbackSearcher=W}async search(W){if(W.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(W)}async starred(W){if(W.facet?.length)throw new Error("facets not supported!");const I=await(0,i.i)().get("api/user/stars");return I?.length?this.doSearchQuery({uid:I,query:W.query??"*"}):{view:new n.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(F,V)=>{},isItemLoaded:F=>!0}}async tags(W){const I={...W,query:W.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},V=(await(0,i.i)().post(d,I)).frames.map(b=>(0,u.g0)(b));if(V[0]?.name===r)return this.fallbackSearcher.tags(W);for(const b of V)if(b.fields[0].name==="tag")return h(b);return[]}getSortOptions(){const W=[{value:c,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.v.licenseInfo.enabledFeatures.analytics){for(const I of a)W.push({value:`-${I.name}`,label:`${I.display} (most)`}),W.push({value:`${I.name}`,label:`${I.display} (least)`});for(const I of v)W.push({value:`-${I.name}`,label:`${I.display} (recent)`}),W.push({value:`${I.name}`,label:`${I.display} (oldest)`})}return Promise.resolve(W)}async doSearchQuery(W){W=await f(W);const I={...W,query:W.query??"*",limit:W.limit??p},V=(await(0,i.i)().post(d,I)).frames.map(ue=>(0,u.g0)(ue)),b=V.length?(0,u.g0)(V[0]):{fields:[],length:0};if(b.name===r)return this.fallbackSearcher.search(W);for(const ue of b.fields)ue.display=(0,s.U)({field:ue,theme:t.v.theme2});b.meta?.custom||(b.meta={...b.meta,custom:{count:b.length,max_score:1}});const X=b.meta.custom;if(X.locationInfo||(X.locationInfo={}),X.sortBy?.length){const ue=b.fields.find(q=>q.name===X.sortBy);if(ue){const q=C(ue.name);X.sortBy=q,ue.name=q}}let k=0,H;const Y=async()=>{for(;k>ee.dataFrame.length;){const ue=ee.dataFrame.length;if(ue>=X.count)return;const q=await(0,i.i)().post(d,{...I??{},from:ue,limit:y}),ge=(0,u.g0)(q.frames[0]);if(!ge){console.log("no results",ge);return}if(ge.fields.length!==ee.dataFrame.fields.length){console.log("invalid shape",ge,ee.dataFrame);return}const De=ge.length+ee.dataFrame.length;for(let me=0;me<ge.fields.length;me++)ee.dataFrame.fields[me].values.buffer.push(...ge.fields[me].values.toArray());ee.dataFrame.length=De;const fe=ge.meta?.custom;if(fe?.locationInfo&&X)for(const[me,ce]of Object.entries(fe.locationInfo))X.locationInfo[me]=ce}H=void 0},ee=new n.U(b);return{totalRows:X.count??b.length,view:ee,loadMoreItems:async(ue,q)=>(k=Math.max(k,q),H||(H=Y()),H),isItemLoaded:ue=>ue<ee.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const p=50,y=100;function h(N){const W=N.fields[0].values,I=N.fields[1].values,F=[];for(let V=0;V<N.length;V++)F.push({term:W.get(V),count:I.get(V)});return F}const a=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],v=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function C(N){for(const W of a)if(W.name===N)return W.display;for(const W of v)if(W.name===N)return W.display;return N}var E=e(12398),P=e(19695);class x{constructor(W){this.parent=W,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(W){if(W.facet?.length)throw new Error("facets not supported!");if(W.sort!=null)throw new Error("custom sorting is not supported yet");if(W.tags?.length||W.ds_uid?.length)return this.parent.search(W);const F=(await this.getCache(W.kind)).search(W.query);return{isItemLoaded:()=>!0,loadMoreItems:async(V,b)=>{},totalRows:F.length,view:F}}async getCache(W){const I=W?W.sort().join(","):"*",F=this.cache.get(I);if(F)try{return await F}catch{return this.cache.delete(I),new M(new n.U({name:"error",fields:[],length:0}))}const V=this.parent.search({kind:W,limit:5e3}).then(b=>new M(b.view));return this.cache.set(I,V),V}async starred(W){return this.parent.starred(W)}async getSortOptions(){return this.parent.getSortOptions()}async tags(W){return this.parent.tags(W)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class M{constructor(W){this.full=W,this.ufuzzy=new E.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values.toArray(),this.empty=new n.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(I=>({...I,values:new P.G([])})),length:0})}search(W){if(!W?.length||W==="*")return this.full;const I=this.full.dataFrame.fields,F=this.names,V=I.map(H=>[]),b=new Set,X=this.ufuzzy.split(W);return E.Z.permute(X).map(H=>H.join(" ")).forEach(H=>{let Y=this.ufuzzy.filter(F,H),ee=this.ufuzzy.info(Y,F,H),ue=this.ufuzzy.sort(ee,F,H);for(let q=0;q<ue.length;q++){let ge=ee.idx[ue[q]];if(!b.has(ge)){b.add(ge);for(let De=0;De<I.length;De++)V[De].push(I[De].values.get(ge))}}}),this.empty.dataFrame.fields.forEach((H,Y)=>{H.values=new P.G(V[Y])}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var S=e(14582),D=e(29930),T=e(10216),R=e(1037);class L{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(W,I){const F=await f(I);if(F.query==="*"?F.kind?.length===1&&T.xb[F.kind[0]]&&(W.type=T.xb[F.kind[0]]):F.query?.length&&(W.query=F.query),F.uid)W.dashboardUID=F.uid;else if(F.location?.length){let V=this.locationInfo[F.location];V||(await this.doAPIQuery({type:R.o.DashFolder,limit:999}),V=this.locationInfo[F.location]),W.folderIds=[V?.folderId??0]}return W}async search(W){if(W.facet?.length)throw new Error("facets not supported!");const I=await this.composeQuery({limit:W.limit??T.E_,tag:W.tags,sort:W.sort},W);return this.doAPIQuery(I)}async starred(W){if(W.facet?.length)throw new Error("facets not supported!");const I=await this.composeQuery({limit:W.limit??T.E_,tag:W.tags,sort:W.sort,starred:W.starred},W);return this.doAPIQuery(I)}async getSortOptions(){return(await D.ae.get("/api/search/sorting")).sortOptions.map(I=>({value:I.name,label:I.displayName}))}async tags(W){return(await D.ae.get("/api/dashboards/tags")).sort((F,V)=>V.count-F.count)}async doAPIQuery(W){const I=await D.ae.get("/api/search",W),F=[],V=[],b=[],X=[],k=[],H=[],Y=[];let ee;for(let ge of I){const De=ge.type==="dash-folder"?"folder":"dashboard";F.push(De),V.push(ge.title),b.push(ge.uid),X.push(ge.url),k.push(ge.tags),Y.push(ge.sortMeta);let fe=ge.folderUid;!fe&&De==="dashboard"&&(fe="general"),H.push(fe),ge.sortMetaName?.length&&(ee=ge.sortMetaName),ge.folderUid&&ge.folderTitle?this.locationInfo[ge.folderUid]={kind:"folder",name:ge.folderTitle,url:ge.folderUrl,folderId:ge.folderId}:De==="folder"&&(this.locationInfo[ge.uid]={kind:De,name:ge.title,url:ge.url,folderId:ge.id})}const ue={fields:[{name:"kind",type:S.fS.string,config:{},values:new P.G(F)},{name:"name",type:S.fS.string,config:{},values:new P.G(V)},{name:"uid",type:S.fS.string,config:{},values:new P.G(b)},{name:"url",type:S.fS.string,config:{},values:new P.G(X)},{name:"tags",type:S.fS.other,config:{},values:new P.G(k)},{name:"location",type:S.fS.string,config:{},values:new P.G(H)}],length:V.length,meta:{custom:{count:V.length,max_score:1,locationInfo:this.locationInfo}}};ee?.length&&Y.length&&(ue.meta.custom.sortBy=ee,ue.fields.push({name:ee,type:S.fS.number,config:{},values:new P.G(Y)}));for(const ge of ue.fields)ge.display=(0,s.U)({field:ge,theme:t.v.theme2});const q=new n.U(ue);return{totalRows:ue.length,view:q,loadMoreItems:async(ge,De)=>{},isItemLoaded:ge=>!0}}}let w;function A(){if(!w){const N=new L,W=t.v.featureToggles.panelTitleSearch;w=W?new g(N):N,W&&location.search.includes("do-frontend-query")&&(w=new x(w))}return w}},66757:(G,O,e)=>{"use strict";e.d(O,{hD:()=>y});var t=e(82897),n=e.n(t),u=e(57388),s=e(38535),i=e(58379),m=e(10216),f=e(72809),o=e(64823),l=e(1037),r=e(63053);const d={query:"",tag:[],sort:null,starred:!1,layout:l.A.Folders,prevSort:null,eventTrackingNamespace:"dashboard_search"},c={sort:null,starred:null,query:null,tag:null,layout:null};class g extends s.b{constructor(){super(...arguments),this.updateLocation=(0,t.debounce)(a=>u.E1.partial(a,!0),300),this.doSearchWithDebounce=(0,t.debounce)(()=>this.doSearch(),300),this.onCloseSearch=()=>{this.updateLocation({search:null,folder:null,...c})},this.onQueryChange=a=>{this.setStateAndDoSearch({query:a})},this.onRemoveTag=a=>{this.setStateAndDoSearch({tag:this.state.tag.filter(v=>v!==a)})},this.onTagFilterChange=a=>{this.setStateAndDoSearch({tag:a})},this.onAddTag=a=>{this.state.tag&&this.state.tag.includes(a)||this.setStateAndDoSearch({tag:[...this.state.tag,a]})},this.onDatasourceChange=a=>{this.setStateAndDoSearch({datasource:a})},this.onStarredFilterChange=a=>{const v=a.currentTarget.checked;this.setStateAndDoSearch({starred:v})},this.onClearStarred=()=>{this.setStateAndDoSearch({starred:!1})},this.onSortChange=a=>{this.state.layout===l.A.Folders?this.setStateAndDoSearch({sort:a,layout:l.A.List}):this.setStateAndDoSearch({sort:a})},this.onLayoutChange=a=>{localStorage.setItem(m.rh,a),this.state.sort&&a===l.A.Folders?this.setStateAndDoSearch({layout:a,prevSort:this.state.sort,sort:null}):this.setStateAndDoSearch({layout:a,sort:this.state.prevSort})},this.onSetIncludePanels=a=>{this.setStateAndDoSearch({includePanels:a}),i.Z.set(m.to,a)},this.getTagOptions=()=>(0,o.getGrafanaSearcher)().tags(this.lastQuery),this.onSearchItemClicked=a=>{!a.altKey&&!a.ctrlKey&&!a.metaKey&&this.setState({tag:[],starred:!1,sort:null,query:"",folderUid:void 0}),(0,f.OY)(this.state.eventTrackingNamespace,{layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort?.value,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels})},this.onReportSearchUsage=()=>{(0,f.Qw)(this.state.eventTrackingNamespace,{layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort?.value,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels})}}initStateFromUrl(a){const v=(0,r.vj)(u.E1.getSearchObject());p.setState({...v,folderUid:a,eventTrackingNamespace:a?"manage_dashboards":"dashboard_search"}),this.doSearch()}setStateAndDoSearch(a){this.setState(a),this.updateLocation({query:this.state.query.length===0?null:this.state.query,tag:this.state.tag,datasource:this.state.datasource,starred:this.state.starred?this.state.starred:null,sort:this.state.sort}),this.doSearchWithDebounce()}hasSearchFilters(){return this.state.query||this.state.tag.length||this.state.starred}getSearchQuery(){const a={query:this.state.query,tags:this.state.tag,ds_uid:this.state.datasource,location:this.state.folderUid,sort:this.state.sort?.value,explain:this.state.explain,withAllowedActions:this.state.explain,starred:this.state.starred};return a.sort?.length&&!a.sort.includes("name")&&(a.kind=["dashboard","folder"]),a.query?.length||(a.query="*",a.location||(a.kind=["dashboard","folder"])),!this.state.includePanels&&!a.kind&&(a.kind=["dashboard","folder"]),a.query==="*"&&!a.sort?.length&&(a.sort="name_sort"),a}doSearch(){const a={layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort?.value,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels};(0,f.Jy)(this.state.eventTrackingNamespace,a),this.lastQuery=this.getSearchQuery(),this.setState({loading:!0}),this.state.starred?(0,o.getGrafanaSearcher)().starred(this.lastQuery).then(v=>this.setState({result:v,loading:!1})).catch(v=>{(0,f.TP)(this.state.eventTrackingNamespace,{...a,error:v?.message}),this.setState({loading:!1})}):(0,o.getGrafanaSearcher)().search(this.lastQuery).then(v=>this.setState({result:v,loading:!1})).catch(v=>{(0,f.TP)(this.state.eventTrackingNamespace,{...a,error:v?.message}),this.setState({loading:!1})})}}let p;function y(){if(!p){const a=localStorage.getItem(m.rh)??d.layout;let v=i.Z.getBool(m.to,!0);v&&(v=!1),p=new g({...d,layout:a,includePanels:v})}return p}},1037:(G,O,e)=>{"use strict";e.d(O,{A:()=>n,o:()=>t});var t=(u=>(u.DashDB="dash-db",u.DashHome="dash-home",u.DashFolder="dash-folder",u))(t||{}),n=(u=>(u.List="list",u.Folders="folders",u.Grid="grid",u))(n||{})},63053:(G,O,e)=>{"use strict";e.d(O,{L:()=>n,tT:()=>u,vj:()=>s});var t=e(10216);const n=i=>i?Boolean(i.query||i.tag?.length>0||i.starred||i.sort):!1,u=(i="General")=>`${t.qi}.${i.toLowerCase()}`,s=i=>{const m=Object.entries(i).reduce((f,[o,l])=>{if(l){if(o==="tag"&&!Array.isArray(l))return{...f,tag:[l]};if(o==="sort")return{...f,sort:{value:l}}}else return f;return{...f,[o]:l}},{});if(i.folder){const f=`folder:${i.folder}`;return{...m,query:`${f} ${(m.query??"").replace(f,"")}`}}return{...m}}},45003:(G,O,e)=>{"use strict";e.d(O,{Dn:()=>h,LA:()=>l,M4:()=>E,P4:()=>m,Ub:()=>y,ZP:()=>x,aj:()=>P,cB:()=>a,dt:()=>p,e7:()=>f,gl:()=>v,pN:()=>g,s3:()=>o});var t=e(32557),n=e(81168);const u={serviceAccount:{},isLoading:!0,tokens:[]},s=(0,t.oM)({name:"serviceaccount",initialState:u,reducers:{serviceAccountFetchBegin:M=>({...M,isLoading:!0}),serviceAccountFetchEnd:M=>({...M,isLoading:!1}),serviceAccountLoaded:(M,S)=>({...M,serviceAccount:S.payload,isLoading:!1}),serviceAccountTokensLoaded:(M,S)=>({...M,tokens:S.payload,isLoading:!1})}}),i=s.reducer,{serviceAccountLoaded:m,serviceAccountTokensLoaded:f,serviceAccountFetchBegin:o,serviceAccountFetchEnd:l}=s.actions,r={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:n.ServiceAccountStateFilter.All,apiKeysMigrated:!1,showApiKeysMigrationInfo:!1},d=(0,t.oM)({name:"serviceaccounts",initialState:r,reducers:{serviceAccountsFetched:(M,S)=>{const{totalCount:D,perPage:T,...R}=S.payload,L=Math.ceil(D/T);return{...M,...R,totalPages:L,perPage:T,showPaging:L>1,isLoading:!1}},serviceAccountsFetchBegin:M=>({...M,isLoading:!0}),serviceAccountsFetchEnd:M=>({...M,isLoading:!1}),acOptionsLoaded:(M,S)=>({...M,roleOptions:S.payload}),apiKeysMigrationStatusLoaded:(M,S)=>({...M,apiKeysMigrated:S.payload}),showApiKeysMigrationInfoLoaded:(M,S)=>({...M,showApiKeysMigrationInfo:S.payload}),queryChanged:(M,S)=>({...M,query:S.payload,page:0}),pageChanged:(M,S)=>({...M,page:S.payload}),stateFilterChanged:(M,S)=>({...M,serviceAccountStateFilter:S.payload})}}),c=d.reducer,{serviceAccountsFetchBegin:g,serviceAccountsFetchEnd:p,serviceAccountsFetched:y,acOptionsLoaded:h,apiKeysMigrationStatusLoaded:a,showApiKeysMigrationInfoLoaded:v,pageChanged:C,stateFilterChanged:E,queryChanged:P}=d.actions,x={serviceAccountProfile:i,serviceAccounts:c}},63163:(G,O,e)=>{"use strict";e.d(O,{$:()=>l,J:()=>f});var t=e(70006),n=e(36512),u=e(47214),s=e(93003),i=e(29930);class m{constructor(){}async get(d){const c=`api/storage/read/${d}`.replace("//","/");return(0,u.i)().get(c)}async list(d){let c="api/storage/list/";d&&(c+=d+"/");const g=await(0,u.i)().get(c);if(g?.data){const p=(0,t.vP)(g);for(const y of p.fields)y.display=(0,n.U)({field:y,theme:s.v.theme2});return p}}async createFolder(d){const c=await(0,u.i)().post("/api/storage/createFolder",JSON.stringify({path:d}));return c.success?{}:{error:c.message??"unknown error"}}async deleteFolder(d){const c=await(0,u.i)().post("/api/storage/deleteFolder",JSON.stringify(d));return c.success?{}:{error:c.message??"unknown error"}}async deleteFile(d){const c=await(0,u.i)().post(`/api/storage/delete/${d.path}`);return c.success?{}:{error:c.message??"unknown error"}}async delete(d){return d.isFolder?this.deleteFolder({path:d.path,force:!0}):this.deleteFile({path:d.path})}async upload(d,c,g){const p=new FormData;p.append("folder",d),p.append("file",c),p.append("overwriteExistingFile",String(g));const y=await fetch("/api/storage/upload",{method:"POST",body:p});let h=await y.json();return h||(h={}),h.status=y.status,h.statusText=y.statusText,y.status!==200&&!h.err&&(h.err=!0),h}async getDashboard(d){if(!s.v.featureToggles.dashboardsFromStorage)return Promise.reject("Dashboards from storage is not enabled");d.endsWith(".json")||(d+=".json"),d.startsWith("content/")||(d=`content/${d}`);const c=await i.ae.get(`/api/storage/read/${d}`);return c.uid=d,delete c.id,{meta:{uid:d,slug:d,canEdit:!0,canSave:!0,canStar:!1},dashboard:c}}async write(d,c){return i.ae.post(`/api/storage/write/${d}`,c)}async getConfig(){return(0,u.i)().get("/api/storage/config")}async getOptions(d){return(0,u.i)().get(`/api/storage/options/${d}`)}}function f(r,d){const g=r.toLowerCase().trim();return d.map(y=>y.trim().toLowerCase()).includes(g)}let o;function l(){return o||(o=new m),o}},7968:(G,O,e)=>{"use strict";e.d(O,{c:()=>n,i:()=>t});var t=(u=>(u.Data="data",u.Config="config",u.Perms="perms",u.History="history",u.AddRoot="add",u))(t||{}),n=(u=>(u.Save="save",u.PR="pr",u.Push="push",u))(n||{})},62295:(G,O,e)=>{"use strict";e.d(O,{Ii:()=>i,UW:()=>l,ZP:()=>g,cD:()=>f,fT:()=>d,ik:()=>o,ki:()=>m,rI:()=>r,rW:()=>s});var t=e(32557);const n={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},u=(0,t.oM)({name:"supportBundles",initialState:n,reducers:{supportBundlesLoaded:(p,y)=>({...p,supportBundles:y.payload,isLoading:!1}),fetchBegin:p=>({...p,isLoading:!0}),fetchEnd:p=>({...p,isLoading:!1}),collectorsFetchBegin:p=>({...p,createBundlePageLoading:!0}),collectorsFetchEnd:p=>({...p,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(p,y)=>({...p,supportBundleCollectors:y.payload,createBundlePageLoading:!1}),setLoadBundleError:(p,y)=>({...p,loadBundlesError:y.payload,supportBundleCollectors:[]}),setCreateBundleError:(p,y)=>({...p,createBundleError:y.payload})}}),{supportBundlesLoaded:s,fetchBegin:i,fetchEnd:m,supportBundleCollectorsLoaded:f,collectorsFetchBegin:o,collectorsFetchEnd:l,setLoadBundleError:r,setCreateBundleError:d}=u.actions,g={supportBundles:u.reducer}},97189:(G,O,e)=>{"use strict";e.d(O,{PJ:()=>m,PL:()=>s,UD:()=>g,ZP:()=>y,aj:()=>i,iI:()=>d,n2:()=>c,p3:()=>n,y$:()=>r});var t=e(32557);const n={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},u=(0,t.oM)({name:"teams",initialState:n,reducers:{teamsLoaded:(h,a)=>{const{totalCount:v,perPage:C,...E}=a.payload,P=Math.ceil(v/C);return{...h,...E,totalPages:P,perPage:C,hasFetched:!0}},queryChanged:(h,a)=>({...h,page:1,query:a.payload}),pageChanged:(h,a)=>({...h,page:a.payload})}}),{teamsLoaded:s,queryChanged:i,pageChanged:m}=u.actions,f=u.reducer,o={team:{},members:[],groups:[],searchMemberQuery:""},l=(0,t.oM)({name:"team",initialState:o,reducers:{teamLoaded:(h,a)=>({...h,team:a.payload}),teamMembersLoaded:(h,a)=>({...h,members:a.payload}),setSearchMemberQuery:(h,a)=>({...h,searchMemberQuery:a.payload}),teamGroupsLoaded:(h,a)=>({...h,groups:a.payload})}}),{teamLoaded:r,teamGroupsLoaded:d,teamMembersLoaded:c,setSearchMemberQuery:g}=l.actions,p=l.reducer,y={teams:f,team:p}},98639:(G,O,e)=>{"use strict";e.d(O,{J:()=>v});var t=e(82897),n=e(99227),u=e(77213),s=e(69934),i=e(71208),m=e(40705),f=e(22323),o=e(82253),l=e(15546),r=e(87095),d=e(92624);class c{constructor(E,P,x){this.state={name:E.name,value:P,text:x,type:E.type}}getValue(E){let{value:P}=this.state;return P==="string"||P==="number"||P==="boolean"?P:String(P)}getValueText(){const{value:E,text:P}=this.state;return typeof P=="string"?E===o.r2?o.xk:P:Array.isArray(P)?P.join(" + "):(console.log("value",P),String(P))}}let g;function p(C,E,P){return g?(g.state.name=C.name,g.state.type=C.type,g.state.value=E,g.state.text=P):g=new c(C,E,P),g}const y={getFilteredVariables:r.Q4,getVariables:r.ng,getVariableWithName:r._K};class h{constructor(E=y){this.dependencies=E,this.regex=d.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this.fieldAccessorCache={},this._variables=[]}init(E,P){this._variables=E,this.timeRange=P,this.updateIndex()}get variables(){return(0,n.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){const E=P=>P||P==="";if(this.index=this._variables.reduce((P,x)=>(x.current&&(x.current.isNone||E(x.current.value))&&(P[x.name]=x),P),{}),this.timeRange){const P=this.timeRange.from.valueOf().toString(),x=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:P,text:P}},__to:{current:{value:x,text:x}}}}}updateTimeRange(E){this.timeRange=E,this.updateIndex()}variableInitialized(E){this.index[E.name]=E}getAdhocFilters(E){let P=[],x=(0,u.F)().getInstanceSettings(E);if(!x)return[];for(const M of this.getAdHocVariables()){const S=M.datasource?.uid;(S===x.uid||S?.indexOf("$")===0&&this.replace(S)===E)&&(P=P.concat(M.filters))}return P}formatValue(E,P,x,M){if(x=x||{},E==null||(0,l.Kn)(x)&&P!==i.Q.queryParam)return"";if(!Array.isArray(E)&&typeof E=="object"&&(E=`${E}`),typeof P=="function")return P(E,x,this.formatValue);P||(P=i.Q.glob);let S=P.split(":");S.length>1?(P=S[0],S=S.slice(1)):S=[];let D=i.V.getIfExists(P);D||(console.error(`Variable format ${P} not found. Using glob format as fallback.`),D=i.V.get(i.Q.glob));const T=p(x,E,M??E);return D.formatter(E,S,T)}setGrafanaVariable(E,P){this.grafanaVariables.set(E,P)}setGlobalVariable(E,P){(0,n.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[E]:{current:P}}}getVariableName(E){this.regex.lastIndex=0;const P=this.regex.exec(E);return P?P.slice(1).find(M=>M!==void 0):null}containsTemplate(E){if(!E)return!1;const P=this.getVariableName(E),x=P&&this.getVariableAtIndex(P);return x!=null}variableExists(E){return(0,n.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(E)}highlightVariablesAsHtml(E){return!E||!(0,t.isString)(E)?E:(E=(0,t.escape)(E),this.regex.lastIndex=0,E.replace(this.regex,(P,x,M,S,D)=>this.getVariableAtIndex(x||M||D)?'<span class="template-variable">'+P+"</span>":P))}getAllValue(E){if(E.allValue)return E.allValue;const P=[];for(let x=1;x<E.options.length;x++)P.push(E.options[x].value);return P}getFieldAccessor(E){const P=this.fieldAccessorCache[E];return P||(this.fieldAccessorCache[E]=(0,t.property)(E))}getVariableValue(E,P,x){const M=x[E];return M?P?this.getFieldAccessor(P)(M.value):M.value:null}getVariableText(E,P,x){const M=x[E];return M?M.value===P||typeof P!="string"?M.text:P:null}replace(E,P,x){return P&&P.__sceneObject?m.ep.interpolate(P.__sceneObject.value,E,P,x):E?(this.regex.lastIndex=0,E.replace(this.regex,(M,S,D,T,R,L,w)=>{const A=S||D||R,N=this.getVariableAtIndex(A),W=T||w||x;if(P){const X=this.getVariableValue(A,L,P),k=this.getVariableText(A,X,P);if(X!=null)return this.formatValue(X,W,N,k)}if(!N)return M;if(W===i.Q.queryParam||(0,l.Kn)(N)){const X=f.z.get(N.type).getValueForUrl(N),k=(0,l.Kn)(N)?N.id:N.current.text;return this.formatValue(X,W,N,k)}const I=this.grafanaVariables.get(N.current.value);if(I)return this.formatValue(I,W,N);let F=N.current.value,V=N.current.text;if(this.isAllValue(F)&&(F=this.getAllValue(N),V=o.xk,N.allValue&&W!==i.Q.text))return this.replace(F);if(L){const X=this.getVariableValue(A,L,{[A]:{value:F,text:V}});if(X!=null)return this.formatValue(X,W,N,V)}return this.formatValue(F,W,N,V)})):E??""}isAllValue(E){return E===o.r2||Array.isArray(E)&&E[0]===o.r2}replaceWithText(E,P){return(0,n.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(E,P,"text")}getVariableAtIndex(E){if(E)return this.index[E]?this.index[E]:this.dependencies.getVariableWithName(E)}getAdHocVariables(){return this.dependencies.getFilteredVariables(l.Kn)}}const a=new h;(0,s.l)(a);const v=()=>a},90024:(G,O,e)=>{"use strict";e.d(O,{J:()=>d});var t=e(40538),n=e(23084),u=e(35585),s=e(68404),i=e(90701),m=e(318),f=e(25474);const o=[{label:"Size",value:u.k.Size,description:"Split the buckets based on size"},{label:"Count",value:u.k.Count,description:"Split the buckets based on count"}],l=[{label:"Split",value:u.k.Size,description:"Split the buckets based on size"}],r=({value:c,onChange:g,item:p})=>s.createElement(i.Lh,null,s.createElement(m.S,{value:c?.mode||u.k.Size,options:c?.scale?.type===t.wf.Log?l:o,onChange:y=>{g({...c,mode:y})}}),s.createElement(f.I,{value:c?.value??"",placeholder:"Auto",onChange:y=>{g({...c,value:y.currentTarget.value})}}));function d(c,g,p,y){g.addCustomEditor({id:"xBuckets",path:`${c}xBuckets`,name:"X Bucket",editor:r,category:y,defaultValue:{mode:u.k.Size}}),g.addCustomEditor({id:"yBuckets",path:`${c}yBuckets`,name:"Y Bucket",editor:r,category:y,defaultValue:{mode:u.k.Size}}),g.addCustomEditor({id:"yBuckets-scale",path:`${c}yBuckets.scale`,name:"Y Bucket scale",category:y,editor:n.Y,defaultValue:{type:t.wf.Linear}})}},77564:(G,O,e)=>{"use strict";e.d(O,{xf:()=>X,Oy:()=>A,qJ:()=>F,d8:()=>I,Cj:()=>V});var t=e(2101),n=e(17130),u=e(14582),s=e(89890),i=e(20112),m=e(88432),f=e(19695),o=e(37556),l=e(15128),r=e(40538),d=e(35585),c=e(43211);const{abs:g,pow:p}=Math,y=new Map;function h(Y,ee,ue,q){let ge=[],De=q.map(c.d);for(let fe=ee;fe<ue;fe++){let me=g(fe),ce=(0,c.O)(p(Y,fe),me);for(let ie=0;ie<q.length;ie++){let re=q[ie]*ce,Ee=(re>=0&&fe>=0?0:me)+(fe>=De[ie]?0:De[ie]),J=(0,c.O)(re,Ee);ge.push(J),y.set(J,Ee)}}return ge}const a=Y=>Y%1===0,v=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],C=h(10,-16,0,v),E=h(10,0,16,v),P=E.filter(a),x=C.concat(E),M=C.concat(P),S=1*1e3,D=60*S,T=60*D,R=24*T,L=365*R,w=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,S,2*S,4*S,5*S,10*S,15*S,20*S,30*S,D,2*D,4*D,5*D,10*D,15*D,20*D,30*D,T,2*T,4*T,6*T,8*T,12*T,18*T,R,2*R,3*R,4*R,5*R,6*R,7*R,10*R,15*R,30*R,45*R,60*R,90*R,180*R,L,2*L,3*L,4*L,5*L,6*L,7*L,8*L,9*L,10*L],A={id:n.W.heatmap,name:"Create heatmap",description:"calculate heatmap from source data",defaultOptions:{},operator:(Y,ee)=>ue=>ue.pipe((0,t.U)(q=>A.transformer(Y,ee)(q))),transformer:Y=>ee=>{const ue=X(ee,Y);return Y.keepOriginalData?[ue,...ee]:[ue]}};function N(Y){return Y==="+Inf"?1/0:Y==="-Inf"?-1/0:+(Y??0)}function W(Y,ee){return N(Y)-N(ee)}function I(Y){return Y?.meta?.custom??{}}function F(Y){let ee=!1;for(let ue of Y.fields)switch(ue.name){case"y":case"yMin":case"yMax":if(ee)return!1;ee=!0}return ee}function V(Y){const ee=Y.frame.fields[0],ue=ee.values.toArray(),q=Y.frame.fields.filter((te,ne)=>te.type===u.fS.number&&ne>0),ge=ue.length*q.length,De=new Array(ge),fe=new Array(ge),me=new Array(ge),ce=q.map(te=>te.values.toArray().slice());ce.forEach((te,ne)=>{for(let j=0;j<te.length;j++)me[ce.length*j+ne]=te[j]});const ie=Array.from({length:q.length},(te,ne)=>ne);for(let te=0,ne=0,j=0;te<ge;ne=++te%ie.length)fe[te]=ie[ne],ne===0&&te>=ie.length&&j++,De[te]=ue[j];let re=q[0].labels?.le!=null?"yMax":"y";switch(Y.layout){case d.D.le:re="yMax";break;case d.D.ge:re="yMin";break;case d.D.unknown:re="y";break}const Ee={yOrdinalDisplay:q.map(te=>(0,s.C)(te,Y.frame)),yMatchWithLabel:Object.keys(q[0].labels??{})[0]};if(Ee.yMatchWithLabel&&(Ee.yOrdinalLabel=q.map(te=>te.labels?.[Ee.yMatchWithLabel]??""),Ee.yMatchWithLabel==="le"&&(Ee.yMinDisplay="0.0")),Y.unit?.length||Y.decimals!=null){const te=(0,i.Cf)(Y.unit??"short");Ee.yMinDisplay&&(Ee.yMinDisplay=(0,i.zc)(te(0,Y.decimals))),Ee.yOrdinalDisplay=Ee.yOrdinalDisplay.map(ne=>{let j=+ne;return Number.isNaN(j)?ne:(0,i.zc)(te(j,Y.decimals))})}const J={...q[0].config};return J.displayNameFromDS&&delete J.displayNameFromDS,{length:De.length,refId:Y.frame.refId,meta:{type:m.P.HeatmapCells,custom:Ee},fields:[{name:"xMax",type:ee.type,values:new f.G(De),config:ee.config},{name:re,type:u.fS.number,values:new f.G(fe),config:{unit:"short"}},{name:Y.value?.length?Y.value:"Value",type:u.fS.number,values:new f.G(me),config:J,display:q[0].display}]}}function b(Y){Y=Y.slice(),Y.sort((ue,q)=>W(ue.name,q.name));const ee=Y.map(ue=>ue.fields[1].values.toArray().slice());return ee.reverse(),ee.forEach((ue,q)=>{if(q<ee.length-1)for(let ge=0;ge<ue.length;ge++)ue[ge]-=ee[q+1][ge]}),ee.reverse(),Y.map((ue,q)=>({...ue,fields:[ue.fields[0],{...ue.fields[1],values:new ArrayVector(ee[q])}]}))}function X(Y,ee){let ue,q,ge=0;for(let te of Y)te.fields.find(j=>j.type===u.fS.time)&&(ge+=te.length);let De=Array(ge),fe=Array(ge),me=0;for(let te of Y){const ne=te.fields.find(be=>be.type===u.fS.time);if(!ne)continue;ue||(ue=ne);const j=ne.values.toArray();for(let be of te.fields)if(be!==ne&&be.type===u.fS.number){const Le=be.values.toArray();for(let Qe=0;Qe<j.length;Qe++,me++)De[me]=j[Qe],fe[me]=Le[Qe];q||(q=be)}}if(!ue||!q)throw"no heatmap fields found";if(!De.length||!fe.length)throw"no values found";const ce=ee.xBuckets??{},ie=ee.yBuckets??{};if(ce.scale?.type===r.wf.Log)throw"X axis only supports linear buckets";const re=ee.yBuckets?.scale??{type:r.wf.Linear},Ee=k(De,fe,{xSorted:!0,xTime:ue.type===u.fS.time,xMode:ce.mode,xSize:ce.mode===d.k.Size?(0,o.iX)((0,o.RA)(ce.value??"")):ce.value?+ce.value:void 0,yMode:ie.mode,ySize:ie.value?+ie.value:void 0,yLog:re?.type===r.wf.Log?re?.log:void 0});return{length:Ee.x.length,name:(0,s.C)(q),meta:{type:m.P.HeatmapCells},fields:[{name:"xMin",type:ue.type,values:new f.G(Ee.x),config:ue.config},{name:"yMin",type:u.fS.number,values:new f.G(Ee.y),config:{...q.config,custom:{scaleDistribution:re}}},{name:"Count",type:u.fS.number,values:new f.G(Ee.count),config:{unit:"short"}}]}}function k(Y,ee,ue){let q=Y.length,ge=ue?.xSorted??!1,De=ue?.ySorted??!1,fe=ge?Y[0]:1/0,me=De?ee[0]:1/0,ce=ge?Y[q-1]:-1/0,ie=De?ee[q-1]:-1/0,re=ue?.yLog;for(let qe=0;qe<q;qe++)ge||(fe=Math.min(fe,Y[qe]),ce=Math.max(ce,Y[qe])),De||(!re||ee[qe]>0)&&(me=Math.min(me,ee[qe]),ie=Math.max(ie,ee[qe]));let Ee=ue?.xSize??0,J=ue?.ySize??0,te=ue?.xMode,ne=ue?.yMode;if((!Number.isFinite(Ee)||Ee<=0)&&(te=d.k.Count,Ee=20),(!Number.isFinite(J)||J<=0)&&(ne=d.k.Count,J=10),te===d.k.Count){let qe=(ce-fe)/Math.max(Ee-1,1),Xe=ue?.xTime?w:M,at=Xe.findIndex(Ze=>Ze>qe)-1;Ee=Xe[Math.max(at,0)]}if(ne===d.k.Count){let qe=(ie-me)/Math.max(J-1,1),Xe=ue?.yTime?w:M,at=Xe.findIndex(Ze=>Ze>qe)-1;J=Xe[Math.max(at,0)]}let j=ue?.xCeil?qe=>(0,l.UO)(qe,Ee):qe=>(0,l.mB)(qe,Ee),be=ue?.yCeil?qe=>(0,l.UO)(qe,J):qe=>(0,l.mB)(qe,J);if(re){J=1/(ue?.ySize??1);let qe=re===2?Math.log2:Math.log10;be=ue?.yCeil?Xe=>(0,l.UO)(qe(Xe),J):Xe=>(0,l.mB)(qe(Xe),J)}let Le=j(fe),Qe=j(ce),Ye=be(me),de=be(ie),Be=Math.round((Qe-Le)/Ee)+1,Ve=Math.round((de-Ye)/J)+1,[$e,We,Ke]=H(Be,Ve,Le,Ee,Ye,J,re);for(let qe=0;qe<q;qe++){if(re&&ee[qe]<=0)continue;const Xe=(j(Y[qe])-Le)/Ee,at=(be(ee[qe])-Ye)/J,Ze=Xe*Ve+at;Ke[Ze]++}return{x:$e,y:We,count:Ke}}function H(Y,ee,ue,q,ge,De,fe){const me=Y*ee,ce=new Array(me),ie=new Array(me),re=new Array(me);for(let Ee=0,J=0,te=ue;Ee<me;J=++Ee%ee)re[Ee]=0,fe?ie[Ee]=fe**(ge+J*De):ie[Ee]=ge+J*De,J===0&&Ee>=ee&&(te+=q),ce[Ee]=te;return[ce,ie,re]}},35585:(G,O,e)=>{"use strict";e.d(O,{D:()=>n,k:()=>t});var t=(u=>(u.Size="size",u.Count="count",u))(t||{}),n=(u=>(u.le="le",u.ge="ge",u.unknown="unknown",u.auto="auto",u))(n||{})},96366:(G,O,e)=>{"use strict";e.d(O,{Ii:()=>u,JJ:()=>n,ac:()=>s});var t=e(40538),n=(m=>(m.Prepare="prepare",m.Calculate="calculate",m.Modify="modify",m))(n||{}),u=(m=>(m.Heading="heading",m.Distance="distance",m.Area="area",m))(u||{}),s=(m=>(m.AsLine="asLine",m.LineBuilder="lineBuilder",m))(s||{});const i={action:"prepare",source:{mode:t.q1.Auto}}},14573:(G,O,e)=>{"use strict";e.d(O,{Lb:()=>d,Lp:()=>l,N7:()=>g});var t=e(68208),n=e(54428),u=e(18788),s=e(61331),i=e(12527),m=e(14582),f=e(19695),o=e(96366);function l(p){const y=[];for(const h of p.values.toArray())h&&y.push(d(h));return new n.Z(y)}function r(p){const y=new Array(p.length);if(p.length>1){let h=c(p[0]);for(let a=1;a<p.length;a++){let v=c(p[a]);if(h&&v){let C=Math.atan2(v[0]-h[0],v[1]-h[1])*180/Math.PI;C<0&&(C+=360),y[a-1]=y[a]=C}}}else y.fill(0);return y}function d(p){return p instanceof u.Z?p.getCoordinates():(0,t.qg)(p.getExtent())}function c(p){if(p)return(0,s.bU)(d(p))}function g(p,y){const h=p.values.toArray(),a=new Array(p.values.length),v=y.calc??o.Ii.Heading,C=y.field??v;switch(v){case o.Ii.Area:{for(let E=0;E<h.length;E++){const P=h[E];P&&(a[E]=(0,i.bg)(P))}return{name:C,type:m.fS.number,config:{unit:"areaM2"},values:new f.G(a)}}case o.Ii.Distance:{for(let E=0;E<h.length;E++){const P=h[E];P&&(a[E]=(0,i.xA)(P))}return{name:C,type:m.fS.number,config:{unit:"lengthm"},values:new f.G(a)}}case o.Ii.Heading:default:return{name:C,type:m.fS.number,config:{unit:"degree"},values:new f.G(r(h))}}}},46002:(G,O,e)=>{"use strict";e.d(O,{PJ:()=>r,ZP:()=>c,eT:()=>f,k7:()=>l,tZ:()=>o,w4:()=>i});var t=e(32557),n=e(47694);const u={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,canInvite:!n.ZP.externalUserMngLinkName,externalUserMngInfo:n.ZP.externalUserMngInfo,externalUserMngLinkName:n.ZP.externalUserMngLinkName,externalUserMngLinkUrl:n.ZP.externalUserMngLinkUrl,isLoading:!1},s=(0,t.oM)({name:"users",initialState:u,reducers:{usersLoaded:(g,p)=>{const{totalCount:y,perPage:h,page:a,orgUsers:v}=p.payload,C=Math.ceil(y/h);return{...g,isLoading:!0,users:v,perPage:h,page:a,totalPages:C}},searchQueryChanged:(g,p)=>({...g,searchQuery:p.payload,page:u.page}),setUsersSearchPage:(g,p)=>({...g,page:p.payload}),pageChanged:(g,p)=>({...g,page:p.payload}),usersFetchBegin:g=>({...g,isLoading:!0}),usersFetchEnd:g=>({...g,isLoading:!1})}}),{searchQueryChanged:i,setUsersSearchPage:m,usersLoaded:f,usersFetchBegin:o,usersFetchEnd:l,pageChanged:r}=s.actions,c={users:s.reducer}},22323:(G,O,e)=>{"use strict";e.d(O,{z:()=>n});var t=e(64140);const n=new t.B},30002:(G,O,e)=>{"use strict";e.d(O,{KJ:()=>h,M6:()=>p,Ue:()=>a,Z$:()=>v,ku:()=>y,m2:()=>g});var t=e(82897),n=e.n(t),u=e(91162),s=e(50678),i=e(15546),m=e(85803),f=e(7240),o=e(87095),l=e(92990),r=e(92624),d=e(79134);const c="Filters",g=P=>async(x,M)=>{let S=E(P,M());if(!S&&(x(C(P)),S=E(P,M()),!S))return;const D=S.filters.findIndex(R=>R.key===P.key&&R.value===P.value);if(D===-1){const{value:R,key:L,operator:w}=P,A={value:R,key:L,operator:w,condition:""};return await x(h((0,r.yQ)(S),A))}const T={...S.filters[D],operator:P.operator};return await x(p((0,r.yQ)(S),{index:D,filter:T}))},p=(P,x)=>async(M,S)=>{const D=(0,o.E0)(P,S());M((0,f.mb)(P.rootStateKey,(0,d.e_)((0,r.Y6)(D,x)))),await M((0,m.MB)((0,r.yQ)(D),!0))},y=(P,x)=>async(M,S)=>{const D=(0,o.E0)(P,S());M((0,f.mb)(P.rootStateKey,(0,d.DO)((0,r.Y6)(D,x)))),await M((0,m.MB)((0,r.yQ)(D),!0))},h=(P,x)=>async(M,S)=>{const D=(0,o.E0)(P,S());M((0,f.mb)(P.rootStateKey,(0,d.QL)((0,r.Y6)(D,x)))),await M((0,m.MB)((0,r.yQ)(D),!0))},a=(P,x)=>async(M,S)=>{const D=(0,o.E0)(P,S());M((0,f.mb)(P.rootStateKey,(0,d.aM)((0,r.Y6)(D,x)))),await M((0,m.MB)((0,r.yQ)(D),!0))},v=(P,x)=>async(M,S)=>{const D=(0,o.E0)(P,S());M((0,f.mb)(P.rootStateKey,(0,l.Pl)((0,r.Y6)(D,{propName:"datasource",propValue:x}))));const R=(await(0,u.ak)().get(x))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";M((0,f.mb)(P.rootStateKey,(0,s.z7)({infoText:R})))},C=P=>(x,M)=>{const S=(0,o.S_)(M()),D={...(0,t.cloneDeep)(d.Js),datasource:P.datasource,name:c,id:c,rootStateKey:S},T=!1,R=(0,o.Eo)(S,M()),L={type:"adhoc",id:D.id,rootStateKey:S};x((0,f.mb)(S,(0,l.VN)((0,r.Y6)(L,{global:T,model:D,index:R}))))},E=(P,x)=>{const M=(0,o.S_)(x),S=(0,o.AE)(M,x);return Object.values(S.variables).find(D=>(0,i.Kn)(D)&&D.datasource?.uid===P.datasource.uid)}},44847:(G,O,e)=>{"use strict";e.d(O,{F:()=>E});var t=e(68404),n=e(75154),u=e(29822),s=e(81697),i=e(91162);const m=90,f=({datasource:P,onChange:x,disabled:M,filterKey:S,getTagKeysOptions:D})=>{const T=()=>d(P,D),R=()=>c(P,D);return S===null?t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},t.createElement(u.V,{disabled:M,className:"query-segment-key",Component:r,value:S,onChange:x,loadOptions:T,inputMinWidth:m})):t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},t.createElement(u.V,{disabled:M,className:"query-segment-key",value:S,onChange:x,loadOptions:R,inputMinWidth:m}))},o="-- remove filter --",l={label:o,value:o},r=t.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},t.createElement(s.J,{name:"plus"})),d=async(P,x)=>{const M=await(0,i.ak)().get(P);return!M||!M.getTagKeys?[]:(await M.getTagKeys(x)).map(D=>({label:D.text,value:D.text}))},c=async(P,x)=>{const M=await d(P,x);return[l,...M]},g=({datasource:P,disabled:x,onChange:M,filterKey:S,filterValue:D,placeHolder:T})=>{const R=()=>p(P,S);return t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},t.createElement(u.V,{className:"query-segment-value",disabled:x,placeholder:T,value:D,onChange:M,loadOptions:R}))},p=async(P,x)=>{const M=await(0,i.ak)().get(P);return!M||!M.getTagValues?[]:(await M.getTagValues({key:x})).map(D=>({label:D.text,value:D.text}))},y=["=","!=","<",">","=~","!~"].map(P=>({label:P,value:P})),h=({value:P,disabled:x,onChange:M})=>t.createElement(n.X,{className:"query-segment-operator",value:P,disabled:x,options:y,onChange:M}),a=({datasource:P,filter:{key:x,operator:M,value:S},onKeyChange:D,onOperatorChange:T,onValueChange:R,placeHolder:L,getTagKeysOptions:w,disabled:A})=>t.createElement(t.Fragment,null,t.createElement(f,{disabled:A,datasource:P,filterKey:x,onChange:D,getTagKeysOptions:w}),t.createElement("div",{className:"gf-form"},t.createElement(h,{disabled:A,value:M,onChange:T})),t.createElement(g,{disabled:A,datasource:P,filterKey:x,filterValue:S,onChange:R,placeHolder:L})),v=({datasource:P,appendBefore:x,onCompleted:M,getTagKeysOptions:S})=>{const[D,T]=(0,t.useState)(null),[R,L]=(0,t.useState)("="),w=(0,t.useCallback)(W=>{if(W.value!==o){T(W.value??"");return}T(null)},[T]),A=(0,t.useCallback)(W=>L(W.value??""),[L]),N=(0,t.useCallback)(W=>{M({value:W.value??"",operator:R,condition:"",key:D}),T(null),L("=")},[M,R,D]);return D===null?t.createElement(f,{datasource:P,filterKey:D,onChange:w,getTagKeysOptions:S}):t.createElement(t.Fragment,{key:"filter-builder"},x,t.createElement(a,{datasource:P,filter:{key:D,value:"",operator:R,condition:""},placeHolder:"select value",onKeyChange:w,onOperatorChange:A,onValueChange:N,getTagKeysOptions:S}))},C=({label:P})=>t.createElement("div",{className:"gf-form"},t.createElement("span",{className:"gf-form-label query-keyword"},P));class E extends t.PureComponent{constructor(){super(...arguments),this.onChange=(x,M)=>S=>{const{filters:D}=this.props,{value:T}=S;return S.value===o?this.props.removeFilter(x):this.props.changeFilter(x,{...D[x],[M]:T})},this.appendFilterToVariable=x=>{this.props.addFilter(x)}}render(){const{filters:x,disabled:M}=this.props;return t.createElement("div",{className:"gf-form-inline"},this.renderFilters(x,M),!M&&t.createElement(v,{datasource:this.props.datasource,appendBefore:x.length>0?t.createElement(C,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,getTagKeysOptions:this.props.getTagKeysOptions}))}renderFilters(x,M){return x.length===0&&M?t.createElement(n.X,{disabled:M,value:"No filters",options:[],onChange:()=>{}}):x.reduce((S,D,T)=>(S.length>0&&S.push(t.createElement(C,{label:"AND",key:`condition-${T}`})),S.push(this.renderFilterSegments(D,T,M)),S),[])}renderFilterSegments(x,M,S){return t.createElement(t.Fragment,{key:`filter-${M}`},t.createElement(a,{disabled:S,datasource:this.props.datasource,filter:x,onKeyChange:this.onChange(M,"key"),onOperatorChange:this.onChange(M,"operator"),onValueChange:this.onChange(M,"value"),getTagKeysOptions:this.props.getTagKeysOptions}))}}},79134:(G,O,e)=>{"use strict";e.d(O,{DO:()=>o,Js:()=>i,QL:()=>f,aM:()=>r,e_:()=>l,jo:()=>d});var t=e(32557),n=e(10672),u=e(87095),s=e(63510);const i={...n.Eg,type:"adhoc",datasource:null,filters:[]},m=(0,t.oM)({name:"templating/adhoc",initialState:s.s,reducers:{filterAdded:(c,g)=>{const p=(0,u.ir)(c,g.payload.id);p.type==="adhoc"&&p.filters.push(g.payload.data)},filterRemoved:(c,g)=>{const p=(0,u.ir)(c,g.payload.id);if(p.type!=="adhoc")return;const y=g.payload.data;p.filters.splice(y,1)},filterUpdated:(c,g)=>{const p=(0,u.ir)(c,g.payload.id);if(p.type!=="adhoc")return;const{filter:y,index:h}=g.payload.data;p.filters[h]=y},filtersRestored:(c,g)=>{const p=(0,u.ir)(c,g.payload.id);p.type==="adhoc"&&(p.filters=g.payload.data)}}}),{filterAdded:f,filterRemoved:o,filterUpdated:l,filtersRestored:r}=m.actions,d=m.reducer},82253:(G,O,e)=>{"use strict";e.d(O,{BH:()=>s,QX:()=>i,UY:()=>t,r2:()=>u,xk:()=>n});const t="00000000-0000-0000-0000-000000000000",n="All",u="$__all",s="None",i=""},95125:(G,O,e)=>{"use strict";e.d(O,{R:()=>o,z:()=>f});var t=e(42066),n=e(68404),u=e(68183),s=e(29516),i=e(79090),m=e(49993);const f="Grafana-LegacyVariableQueryEditor",o=({onChange:l,query:r})=>{const d=(0,s.wW)(m.w),[c,g]=(0,n.useState)(r),p=a=>{g(a.currentTarget.value)},y=(0,n.useCallback)(a=>{l(a.currentTarget.value,a.currentTarget.value)},[l]),h=(0,t.Me)();return n.createElement(i.K,{id:h,rows:2,value:c,onChange:p,onBlur:y,placeholder:"Metric name or tags query",required:!0,"aria-label":u.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:d.textarea})};o.displayName=f},41624:(G,O,e)=>{"use strict";e.d(O,{e:()=>i});var t=e(52423),n=e(68404),u=e(29516),s=e(78107);function i({className:f,...o}){const l=(0,u.wW)(m);return n.createElement(s.D,{...o,className:(0,t.cx)(l.legend,f)})}function m(f){return{legend:(0,t.css)({marginTop:f.spacing(3),marginBottom:f.spacing(1)})}}},83704:(G,O,e)=>{"use strict";e.d(O,{u:()=>f});var t=e(52423),n=e(68404),u=e(29516),s=e(74955),i=e(46739),m=e(56991);function f({name:l,description:r,value:d,options:c,onChange:g,testId:p,width:y}){const h=(0,u.wW)(o),a=(0,m.L)(),v=`variable-select-input-${l}-${a}`;return n.createElement(s.g,{label:l,description:r,htmlFor:v},n.createElement("div",{"data-testid":p},n.createElement(i.Ph,{inputId:v,onChange:g,value:d,width:y??30,options:c,className:h.selectContainer})))}function o(l){return{selectContainer:t.css`
      margin-right: ${l.spacing(.5)};
    `}}},49993:(G,O,e)=>{"use strict";e.d(O,{W:()=>f,w:()=>o});var t=e(52423),n=e(42066),u=e(68404),s=e(29516),i=e(74955),m=e(79090);function f({value:l,name:r,description:d,placeholder:c,onChange:g,onBlur:p,ariaLabel:y,required:h,width:a,testId:v}){const C=(0,s.wW)(o),E=(0,n.Me)();return u.createElement(i.g,{label:r,description:d,htmlFor:E},u.createElement(m.K,{id:E,rows:2,value:l,onChange:g,onBlur:p,placeholder:c,required:h,"aria-label":y,cols:a,className:C.textarea,"data-testid":v}))}function o(l){return{textarea:t.css`
      white-space: pre-wrap;
      min-height: ${l.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${l.spacing(.75,1)};
      width: inherit;
    `}}},57052:(G,O,e)=>{"use strict";e.d(O,{V:()=>i});var t=e(42066),n=e(68404),u=e(74955),s=e(25474);function i({value:m,name:f,placeholder:o="",onChange:l,testId:r,width:d,required:c,onBlur:g,grow:p,description:y,invalid:h,error:a,maxLength:v}){const C=(0,t.Me)(f);return n.createElement(u.g,{label:f,description:y,invalid:h,error:a,htmlFor:C},n.createElement(s.I,{type:"text",id:C,placeholder:o,value:m,onChange:l,onBlur:g,width:p?void 0:d??30,"data-testid":r,maxLength:v,required:c}))}},50678:(G,O,e)=>{"use strict";e.d(O,{PF:()=>n,PV:()=>d,QR:()=>c,Sg:()=>r,Yo:()=>i,gl:()=>s,qe:()=>o,wJ:()=>f,y8:()=>m,z7:()=>l});var t=e(32557);const n={id:"",isValid:!0,errors:{},name:"",extended:null},u=(0,t.oM)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(g,p)=>{g.name=p.payload.name,g.id=p.payload.id},variableEditorUnMounted:(g,p)=>n,changeVariableNameSucceeded:(g,p)=>{g.name=p.payload.data.newName,delete g.errors.name,g.isValid=Object.keys(g.errors).length===0},changeVariableNameFailed:(g,p)=>{g.name=p.payload.newName,g.errors.name=p.payload.errorText,g.isValid=Object.keys(g.errors).length===0},addVariableEditorError:(g,p)=>{g.errors[p.payload.errorProp]=p.payload.errorText,g.isValid=Object.keys(g.errors).length===0},removeVariableEditorError:(g,p)=>{delete g.errors[p.payload.errorProp],g.isValid=Object.keys(g.errors).length===0},changeVariableEditorExtended:(g,p)=>{g.extended={...g.extended,...p.payload}},cleanEditorState:()=>n}}),s=u.reducer,{changeVariableNameSucceeded:i,changeVariableNameFailed:m,variableEditorMounted:f,variableEditorUnMounted:o,changeVariableEditorExtended:l,addVariableEditorError:r,removeVariableEditorError:d,cleanEditorState:c}=u.actions},69155:(G,O,e)=>{"use strict";e.d(O,{c:()=>u});var t=e(69934),n=e(22323);function u(s){const i={},m=(0,t.J)().getVariables();for(let f=0;f<m.length;f++){const o=m[f];if(s&&s[o.name]!==void 0){if(s[o.name].skipUrlSync)continue;i["var-"+o.name]=s[o.name].value}else{if(o.skipUrlSync)continue;i["var-"+o.name]=n.z.get(o.type).getValueForUrl(o)}}return i}},15546:(G,O,e)=>{"use strict";e.d(O,{$7:()=>y,Ju:()=>d,Kn:()=>s,Kr:()=>o,NX:()=>p,R:()=>r,U4:()=>m,VC:()=>i,X7:()=>g,Xh:()=>u,d7:()=>c,eL:()=>f});var t=e(59670),n=e(95125);const u=h=>h.type==="query",s=h=>h.type==="adhoc",i=h=>h.type==="constant",m=h=>"multi"in h,f=h=>"options"in h,o=h=>"current"in h;function l(h){return h===null?!1:typeof h=="string"}const r=h=>Boolean(h.metricFindQuery)&&!Boolean(h.variables),d=h=>{if(!h.variables||h.variables.getType()!==t.j2.Standard)return!1;const a=h.variables;return"toDataQuery"in a&&Boolean(a.toDataQuery)},c=h=>{if(!h.variables||h.variables.getType()!==t.j2.Custom)return!1;const a=h.variables;return"query"in a&&"editor"in a&&Boolean(a.query)&&Boolean(a.editor)},g=h=>h.variables?h.variables.getType()===t.j2.Datasource:!1;function p(h,a){return h?h.displayName===n.z||r(a):!1}function y(h,a){return h?h.displayName!==n.z&&(g(a)||d(a)||c(a)):!1}},37737:(G,O,e)=>{"use strict";e.d(O,{Kf:()=>n,iV:()=>s,j4:()=>i});var t=e(32557);const n={usages:[],usagesNetwork:[]},u=(0,t.oM)({name:"templating/inspect",initialState:n,reducers:{initInspect:(m,f)=>{const{usages:o,usagesNetwork:l}=f.payload;m.usages=o,m.usagesNetwork=l}}}),s=u.reducer,{initInspect:i}=u.actions},19248:(G,O,e)=>{"use strict";e.d(O,{MJ:()=>d,GQ:()=>l,V:()=>h,Of:()=>r,PQ:()=>C,dH:()=>T,Yg:()=>a,Rv:()=>S,vI:()=>x});var t=e(89029);function n(R,L){const w=new Set;for(const A of R)w.add(L(A));return w}var u=e(96161),s=e(55935),i=e(86899),m=e(22323),f=e(15546),o=e(92624);const l=R=>{const L=[];for(const w of R)L.push({id:w.id,label:`${w.id}`});return L},r=(R,L)=>R.filter(w=>L.some(A=>A.from===w.id||A.to===w.id)),d=R=>{const L=[];for(const w of R)for(const A of R){if(w===A)continue;m.z.get(w.type).dependsOn(w,A)&&L.push({from:w.id,to:A.id})}return L};function c(R){const L=(0,o.a9)(R);return L?L.slice(1).find(A=>A!==void 0):void 0}const g=(R,L)=>{o.J7.lastIndex=0;const w=[],N=(0,s.Xh)(L,2).match(o.J7);if(!N)return w;for(const W of N){if(!W||W.indexOf("$__")!==-1||W.indexOf("${__")!==-1||W.indexOf("$hashKey")!==-1)continue;const I=c(W);R.some(F=>F.id===I)||w.find(F=>F===I)||I&&w.push(I)}return w},p={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},y=(R,L,w)=>{const A=Object.keys(L.value).reduce((W,I)=>{const F=L.value[I];if(!F||typeof F!="string")return W;const V=p[I]?p[I].find(X=>X.test(R)):void 0;let b=(0,o.QI)(F,R);return I==="repeat"&&F===R&&(b=!0),!V&&b&&(W={...W,[I]:F}),W},{}),N=Object.keys(L.value).reduce((W,I)=>{const F=L.value[I];if(F&&typeof F=="object"&&Object.keys(F).length){let V=F.title||F.name||F.id||I;Array.isArray(L.value)&&L.key==="panels"&&(V=`${V}[${F.id}]`);const b=y(R,{key:I,value:F},{});Object.keys(b).length&&(W={...W,[V]:b})}return W},{});return(Object.keys(A).length||Object.keys(N).length)&&(w={...w,...A,...N}),w},h=(R,L)=>{if(!L)return{unUsed:[],usages:[]};const w=[];let A=[];const N=L.getSaveModelClone();for(const W of R){const I=W.id,F=y(I,{key:"model",value:N},{});!Object.keys(F).length&&!(0,f.Kn)(W)&&w.push(W),Object.keys(F).length&&A.push({variable:W,tree:F})}return{unUsed:w,usages:A}};async function a(R,L){return new Promise((w,A)=>{setTimeout(()=>{try{const N=v(R,L);w(x(N))}catch(N){A(N)}},200)})}function v(R,L){if(!L)return[];let w=[];const A=L.getSaveModelClone(),N=g(R,A);for(const W of N){const I=y(W,{key:"model",value:A},{});if(Object.keys(I).length){const F={id:W,name:W};w.push({variable:F,tree:I})}}return w}function C(R,L,w){const A=n(L.descendants(R),W=>W.name);A.add(t.W.includeVars);for(const W of R)A.add(W);return E([...A],w)}function E(R,L){const w=[];for(const A of R)L[A]&&w.push(...L[A]);return new Set(w)}const P=(R,L)=>{const{id:w,value:A}=L,{nodes:N,edges:W}=R;if(A&&typeof A=="string"){const I=`${L.id}-${A}`;return N.push({id:I,label:A}),W.push({from:I,to:w}),R}if(A&&typeof A=="object"){const I=Object.keys(A);for(const F of I){const V=`${L.id}-${F}`;N.push({id:V,label:F}),W.push({from:V,to:w}),R=P(R,{id:V,value:A[F]})}return R}return R},x=R=>{const L=[];for(const w of R){const{variable:A,tree:N}=w,W={variable:A,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};L.push(P(W,{id:"dashboard",value:N}))}return L},M=R=>Object.values(R).reduce((w,A)=>typeof A=="object"?w+M(A):w+1,0),S=(R,L)=>{const w=L.find(A=>A.variable.id===R);return w?M(w.tree):0};function D(R){const L=[];for(const w of R)L.push(w),w.panels?.length&&L.push(...D(w.panels.map(A=>new PanelModel(A))));return L}function T(R){const L={};for(const w of R){const A=(0,u.J)(w),N=[...A.matchAll(/"repeat":"([^"]+)"/g)].map(F=>F[1]),W=A.match(o.J7)?.map(F=>c(F))??[],I=[...N,...W];for(const F of I)F in L?L[F].add(w.id):L[F]=new Set([w.id])}return L}},85972:(G,O,e)=>{"use strict";e.d(O,{XJ:()=>M,nn:()=>a,yy:()=>f,Ew:()=>v,cv:()=>S,aN:()=>h,iQ:()=>C,_M:()=>y,ss:()=>P,wF:()=>x,Ug:()=>E});var t=e(32557),n=e(82897);const u=(D,...T)=>T.reduce((R,L)=>L(R),D);var s=e(82253),i=e(15546),m=e(92624);const f={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},o=1e3,l=D=>Array.isArray(D)?D.reduce((T,R)=>((0,n.isString)(R.value)&&(T[R.value]=R),T),{}):{},r=D=>{if(!Array.isArray(D.options))return D.options=[],D;const T=l(D.selectedValues);return D.selectedValues=Object.values(T),D.options=D.options.map(R=>{if(!(0,n.isString)(R.value))return R;const L=!!T[R.value];return R.selected===L?R:{...R,selected:L}}),D.options=d(D.options),D},d=D=>Array.isArray(D)?D.length<=o?D:D.slice(0,o):[],c=D=>{const{options:T,selectedValues:R}=D;return T.length===0||R.length>0||!T[0]||T[0].value!==s.r2||(D.selectedValues=[{...T[0],selected:!0}]),D},g=D=>{const{selectedValues:T}=D;return T.length>1&&(D.selectedValues=T.filter(R=>R.value!==s.r2)),D},p=(0,t.oM)({name:"templating/optionsPicker",initialState:f,reducers:{showOptions:(D,T)=>{const{query:R,options:L}=T.payload;if(D.highlightIndex=-1,D.options=(0,n.cloneDeep)(L),D.id=T.payload.id,D.queryValue="",D.multi=!1,(0,i.U4)(T.payload)&&(D.multi=T.payload.multi??!1),(0,i.Xh)(T.payload)){const{queryValue:w}=T.payload,A=(0,m.bf)(R);D.queryValue=A&&w?w:""}return D.selectedValues=D.options.filter(w=>w.selected),u(D,c,r)},hideOptions:(D,T)=>({...f}),toggleOption:(D,T)=>{const{option:R,clearOthers:L,forceSelect:w}=T.payload,{multi:A,selectedValues:N}=D;if(R){const W=!N.find(I=>I.value===R.value&&I.text===R.text);if(R.value===s.r2||!A||L)return W||w?D.selectedValues=[{...R,selected:!0}]:D.selectedValues=[],u(D,c,g,r);if(w||W)return D.selectedValues.push({...R,selected:!0}),u(D,c,g,r);D.selectedValues=N.filter(I=>I.value!==R.value&&I.text!==R.text)}else D.selectedValues=[];return u(D,c,g,r)},moveOptionsHighlight:(D,T)=>{let R=D.highlightIndex+T.payload;return R<0?R=-1:R>=D.options.length&&(R=D.options.length-1),{...D,highlightIndex:R}},toggleAllOptions:(D,T)=>D.selectedValues.length>0?(D.selectedValues=[],u(D,r)):(D.selectedValues=D.options.filter(R=>R.value!==s.r2).map(R=>({...R,selected:!0})),u(D,r)),updateSearchQuery:(D,T)=>(D.queryValue=T.payload,D),updateOptionsAndFilter:(D,T)=>{const R=(0,n.trim)((D.queryValue??"").toLowerCase());return D.options=T.payload.filter(L=>{const w=L.text??"";return(Array.isArray(w)?w.toString():w).toLowerCase().indexOf(R)!==-1}),D.highlightIndex=-1,u(D,c,r)},updateOptionsFromSearch:(D,T)=>(D.options=T.payload,D.highlightIndex=0,u(D,c,r)),cleanPickerState:()=>f}}),{toggleOption:y,showOptions:h,hideOptions:a,moveOptionsHighlight:v,toggleAllOptions:C,updateSearchQuery:E,updateOptionsAndFilter:P,updateOptionsFromSearch:x,cleanPickerState:M}=p.actions,S=p.reducer},96188:(G,O,e)=>{"use strict";e.d(O,{x:()=>t});const t=(s,i)=>s&&(i&&!Array.isArray(s.value)?{...s,value:u(s.value),text:u(s.text)}:!i&&Array.isArray(s.value)?{...s,value:n(s.value),text:n(s.text)}:s),n=s=>Array.isArray(s)?s.length>0?s[0]:"":s,u=s=>Array.isArray(s)?s:[s]},85803:(G,O,e)=>{"use strict";e.d(O,{Ci:()=>Y,DU:()=>fe,Fz:()=>q,LX:()=>Ee,MB:()=>De,Rk:()=>j,Z7:()=>I,wX:()=>ne,xQ:()=>ue,xs:()=>ce});var t=e(82897),n=e.n(t),u=e(49922),s=e(5916),i=e(57388),m=e(659),f=e(82002),o=e(19349),l=e(3153),r=e(60499),d=e(77582),c=e(29930),g=e(28630),p=e(91162),y=e(98639),h=e(22323),a=e(82253),v=e(50678),C=e(15546),E=e(19248),P=e(85972),x=e(96188),M=e(10672),S=e(92624),D=e(7240),T=e(87095),R=e(92990),L=e(75138),w=e(6942);const A=(de,Be)=>(Ve,$e)=>{let We=0;const Ke=Be.templating.list;for(let Xe=0;Xe<Ke.length;Xe++){const at=N(Ke[Xe]);at.rootStateKey=de,h.z.getIfExists(at.type)&&Ve((0,D.mb)(de,(0,R.VN)((0,S.Y6)(at,{global:!1,index:We++,model:at}))))}(0,y.J)().updateTimeRange((0,o.$t)().timeRange());const qe=(0,T.gt)(de,$e());for(const Xe of qe)Ve((0,D.mb)(de,(0,R.Mn)((0,S.Y6)(Xe))))};function N(de){if(!(0,C.eL)(de))return de;let Be=!1;for(const Ve of de.options)if(Ve.selected=!1,Array.isArray(de.current.value))for(const $e of de.current.value)Ve.value===$e&&(Ve.selected=Be=!0);else Ve.value===de.current.value&&(Ve.selected=Be=!0);return!Be&&de.options.length&&(de.options[0].selected=!0),de}const W=(de,Be)=>Ve=>{const $e={...M.Eg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:M.bU.hideVariable,current:{value:{name:Be.title,uid:Be.uid,toString:()=>Be.title}}};Ve((0,D.mb)(de,(0,R.VN)((0,S.Y6)($e,{global:$e.global,index:$e.index,model:$e}))));const We={...M.Eg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:M.bU.hideVariable,current:{value:{name:f.Vt.user.orgName,id:f.Vt.user.orgId,toString:()=>f.Vt.user.orgId.toString()}}};Ve((0,D.mb)(de,(0,R.VN)((0,S.Y6)(We,{global:We.global,index:We.index,model:We}))));const Ke={...M.Eg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:M.bU.hideVariable,current:{value:{login:f.Vt.user.login,id:f.Vt.user.id,email:f.Vt.user.email,toString:()=>f.Vt.user.id.toString()}}};Ve((0,D.mb)(de,(0,R.VN)((0,S.Y6)(Ke,{global:Ke.global,index:Ke.index,model:Ke}))))},I=(de,Be)=>(Ve,$e)=>{const{rootStateKey:We}=de,Ke=(0,T.E0)(de,$e());if(!(0,C.U4)(Ke))return;const qe=(0,x.x)(Ke.current,Be);Ve((0,D.mb)(We,(0,R.Pl)((0,S.Y6)(de,{propName:"multi",propValue:Be})))),Ve((0,D.mb)(We,(0,R.Pl)((0,S.Y6)(de,{propName:"current",propValue:qe}))))},F=async(de,Be)=>{if(!de.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${de.id}`);if(V(de,Be))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const Ve=b(de,Be);X(de.rootStateKey,Ve,Be)&&await new Promise($e=>{const We=l.h.subscribe(()=>{if(!de.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${de.id}`);X(de.rootStateKey,Ve,l.h.getState())||(We(),$e())})})},V=(de,Be,Ve=new Set)=>Ve.has(de.id)?!0:(Ve=new Set([...Ve,de.id]),b(de,Be).some($e=>V($e,Be,Ve))),b=(de,Be)=>{if(!de.rootStateKey)return[];const Ve=[];for(const $e of(0,T.gt)(de.rootStateKey,Be))de!==$e&&h.z.getIfExists(de.type)&&h.z.get(de.type).dependsOn(de,$e)&&Ve.push($e);return Ve},X=(de,Be,Ve)=>{if(Be.length===0)return!1;const $e=(0,T.gt)(de,Ve);return Be.filter(Ke=>$e.some(qe=>qe.id===Ke.id&&(qe.state===u.Gu.NotStarted||qe.state===u.Gu.Loading))).length>0},k=(de,Be)=>async(Ve,$e)=>{const We=(0,T.E0)(de,$e());await F(We,$e());const Ke=Be["var-"+We.name];if(Ke!==void 0){const qe=(0,S.Hi)(Ke);await h.z.get(We.type).setValueFromUrl(We,qe);return}if(We.hasOwnProperty("refresh")){const qe=We;if(qe.refresh===M.Bd.onDashboardLoad||qe.refresh===M.Bd.onTimeRangeChanged){await Ve(j((0,S.yQ)(qe)));return}}Ve(Le(de))},H=de=>async(Be,Ve)=>{const $e=i.E1.getSearchObject(),We=(0,T.gt)(de,Ve()).map(async Ke=>await Be(k((0,S.yQ)(Ke),$e)));await Promise.all(We)},Y=(de,Be)=>async(Ve,$e)=>{const We=(0,S.Hi)(Be),Ke=(0,T.E0)(de,$e());(0,S.iD)(Ke)!==M.Bd.never&&await Ve(j((0,S.yQ)(Ke)));const qe=(0,T.E0)((0,S.yQ)(Ke),$e());if(!(0,C.eL)(qe))return;if(!qe)throw new Error(`Couldn't find variable with name: ${Ke.name}`);let Xe=qe.options.find(at=>at.text===We||at.value===We);if(!Xe&&(0,C.U4)(qe)&&qe.allValue&&We===qe.allValue&&(Xe={text:a.xk,value:a.r2,selected:!1}),!Xe){let at=We;const Ze=We;Array.isArray(We)&&(at=We.reduce((lt,nt)=>{const _e=qe.options.find(ut=>ut.value===nt);return _e?[].concat(lt,[_e.text]):[].concat(lt,[nt])},[])),Xe={text:at,value:Ze,selected:!1}}(0,C.U4)(qe)&&(Xe=(0,x.x)({text:(0,t.castArray)(Xe.text),value:(0,t.castArray)(Xe.value),selected:!1},qe.multi)),await h.z.get(Ke.type).setValue(qe,Xe)},ee=de=>{let Be,Ve,$e,We;const Ke=[];for(Be=0;Be<de.options.length;Be++)if(We={...de.options[Be]},We.selected=!1,Array.isArray(de.current.value))for(Ve=0;Ve<de.current.value.length;Ve++)$e=de.current.value[Ve],We.value===$e&&(We.selected=!0,Ke.push(We));else We.value===de.current.value&&(We.selected=!0,Ke.push(We));return Ke},ue=(de,Be)=>(Ve,$e)=>{const We=(0,T.E0)(de,$e());if(!(0,C.eL)(We))return Promise.resolve();const Ke=We.current||{},qe=h.z.get(We.type).setValue;if(Array.isArray(Ke.value)){const Ze=ee(We);if(Ze.length===0){const nt=We.options[0];return qe(We,nt)}const lt={value:Ze.map(nt=>nt.value),text:Ze.map(nt=>nt.text),selected:!0};return qe(We,lt)}let Xe=null;const at=(0,S.Tt)(We);if(Xe=We.options?.find(Ze=>Ze.text===at),Xe||Be&&(Xe=We.options?.find(Ze=>Ze.text===Be),Xe))return qe(We,Xe);if(We.options){const Ze=We.options[0];if(Ze)return qe(We,Ze)}return Promise.resolve()},q=(de,Be,Ve)=>async $e=>{const{rootStateKey:We}=de;return $e((0,D.mb)(We,(0,R.Q8)((0,S.Y6)(de,{option:Be})))),await $e(De(de,Ve))},ge=de=>{const Be=new g.kJ;return de.forEach(Ve=>{Be.createNode(Ve.name)}),de.forEach(Ve=>{de.forEach($e=>{Ve!==$e&&h.z.get(Ve.type).dependsOn(Ve,$e)&&Be.link(Ve.name,$e.name)})}),Be},De=(de,Be,Ve=d.h$)=>async($e,We)=>{const Ke=We(),{rootStateKey:qe}=de,Xe=(0,T.E0)(de,Ke);if((0,T.AE)(qe,Ke).transaction.status===M.LN.Fetching)return(0,S.iD)(Xe)===M.Bd.never&&(await $e(Qe((0,S.yQ)(Xe))),$e(Le(de))),Promise.resolve();const at=(0,T.gt)(qe,Ke),Ze=ge(at),lt=Ke.dashboard?.getModel()?.panels??[],nt=(0,E.dH)(lt),_e=(0,C.Kn)(Xe)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,E.PQ)([Xe.id],Ze,nt))},ut=Ze.getNode(Xe.name);let rt=[];return ut&&(rt=ut.getOptimizedInputEdges().map(je=>{const dt=at.find(oe=>oe.name===je.inputNode?.name);return dt?$e(j((0,S.yQ)(dt))):Promise.resolve()})),Promise.all(rt).then(()=>{Be&&(Ve.publish(new M.x9(_e)),i.E1.partial(re(qe,We)))})},fe=(de,Be,Ve={templateSrv:(0,y.J)(),events:d.h$})=>async($e,We)=>{Ve.templateSrv.updateTimeRange(Be);const Ke=(0,T.gt)(de,We()).filter(at=>at.hasOwnProperty("refresh")&&at.hasOwnProperty("options")?at.refresh===M.Bd.onTimeRangeChanged:!1),qe=Ke.map(at=>at.id),Xe=Ke.map(at=>$e(me((0,S.yQ)(at))));try{await Promise.all(Xe),Ve.events.publish(new M.eq({variableIds:qe}))}catch(at){console.error(at),$e((0,m.$l)(be("Template variable service failed",at)))}},me=de=>async(Be,Ve)=>{const $e=(0,T.E0)(de,Ve());if(!(0,C.eL)($e))return;const We=$e.options.slice();await Be(j((0,S.yQ)($e),!0));const Ke=(0,T.E0)(de,Ve());if(!(0,C.eL)(Ke))return;const qe=Ke.options;JSON.stringify(We)!==JSON.stringify(qe)&&Ve().dashboard.getModel()?.templateVariableValueUpdated()},ce=(de,Be,Ve=d.h$)=>async($e,We)=>{const Ke=[],qe=We().dashboard.getModel(),Xe=(0,T.gt)(de,We());for(const _e of Xe){const ut=`var-${_e.name}`;if(!Be.hasOwnProperty(ut)||!ie(_e,Be[ut].value))continue;let rt=Be[ut].value;if(Be[ut].removed){const dt=qe?.templating.list.find(oe=>oe.name===_e.name);dt&&(0,C.Kr)(dt)&&(rt=dt.current.value),dt&&(0,C.VC)(dt)&&(rt=dt.query)}const je=h.z.get(_e.type).setValueFromUrl(_e,rt);Ke.push(je)}const at=Xe.filter(_e=>{const ut=`var-${_e.name}`;return Be.hasOwnProperty(ut)&&ie(_e,Be[ut].value)&&!(0,C.Kn)(_e)}),Ze=ge(Xe),lt=(0,E.dH)(qe?.panels??[]),nt=(0,E.PQ)(at.map(_e=>_e.id),Ze,lt);Ke.length&&(await Promise.all(Ke),Ve.publish(new M.Wy({refreshAll:nt.size===0,panelIds:Array.from(nt)})))};function ie(de,Be){const Ve=h.z.get(de.type).getValueForUrl(de);let $e=(0,S.Hi)(Be);return Array.isArray(Ve)&&!Array.isArray($e)&&($e=[$e]),!(0,t.isEqual)(Ve,$e)}const re=(de,Be)=>{const Ve=i.E1.getSearchObject(),$e=Object.keys(Ve).filter(We=>We.indexOf("var-")===-1).reduce((We,Ke)=>(We[Ke]=Ve[Ke],We),{});for(const We of(0,T.gt)(de,Be())){if(We.skipUrlSync)continue;const Ke=h.z.get(We.type);$e["var-"+We.name]=Ke.getValueForUrl(We)}return $e},Ee=(de,Be)=>async(Ve,$e)=>{try{const We=(0,S.mn)(de),Ke=$e(),qe=(0,T.cp)(Ke);qe&&(0,T.AE)(qe,Ke).transaction.status===M.LN.Fetching&&Ve(ne(qe)),Ve((0,D.mb)(We,(0,L.Z9)({uid:We}))),Ve(W(We,Be)),Ve(A(We,Be)),Ve(J(We)),await Ve(H(We)),Ve((0,D.mb)(We,(0,L.iv)({uid:We})))}catch(We){Ve((0,m.$l)(be("Templating init failed",We))),console.error(We)}};function J(de,Be=p.ak){return(Ve,$e)=>{const We=(0,T.gt)(de,$e());for(const Ke of We){if(!(0,C.Kn)(Ke)&&!(0,C.Xh)(Ke))continue;const{datasource:qe}=Ke;if((0,s.cv)(qe))continue;const Xe=Be().getInstanceSettings(qe),at=Xe?(0,s.iU)(Xe):{uid:qe};Ve((0,D.mb)(de,(0,R.Pl)((0,S.Y6)(Ke,{propName:"datasource",propValue:at}))))}}}const te=de=>Be=>{Be((0,D.mb)(de,(0,w.S)())),Be((0,D.mb)(de,(0,v.QR)())),Be((0,D.mb)(de,(0,P.XJ)())),Be((0,D.mb)(de,(0,L.p3)()))},ne=(de,Be={getBackendSrv:c.i})=>Ve=>{Be.getBackendSrv().cancelAllInFlightRequests(),Ve(te(de))},j=(de,Be=!1)=>async(Ve,$e)=>{const{rootStateKey:We}=de;try{if(!(0,S.A3)(We,$e()))return;const Ke=(0,T.E0)(de,$e());Ve((0,D.mb)(We,(0,R.$M)((0,S.Y6)(Ke)))),await Ve(Qe((0,S.yQ)(Ke))),await h.z.get(Ke.type).updateOptions(Ke),Ve(Le(de))}catch(Ke){if(Ve((0,D.mb)(We,(0,R.Le)((0,S.Y6)(de,{error:Ke})))),Be||(console.error(Ke),Ve((0,m.$l)(be("Error updating options:",Ke,de)))),Be)throw Ke}},be=(de,Be,Ve)=>(0,r.t_)(`${Ve?`Templating [${Ve.id}]`:"Templating"}`,`${de} ${Be.message}`),Le=de=>(Be,Ve)=>{const{rootStateKey:$e}=de;if(!(0,S.A3)($e,Ve()))return;const We=(0,T.E0)(de,Ve());We.state!==u.Gu.Done&&Be((0,D.mb)(de.rootStateKey,(0,R.qQ)((0,S.Y6)(We))))};function Qe(de,Be=p.ak){return async function(Ve,$e){const{id:We,rootStateKey:Ke}=de;if(!(0,S.A3)(Ke,$e()))return;const qe=(0,T.E0)(de,$e());if(qe.type==="query")try{const Xe=await Be().get(qe.datasource??"");if((0,C.R)(Xe)||!(0,C.Ju)(Xe)||Ye(qe.query))return;const at={refId:`${Xe.name}-${We}-Variable-Query`,query:qe.query};Ve((0,D.mb)(Ke,(0,R.Pl)((0,S.Y6)(de,{propName:"query",propValue:at}))))}catch(Xe){Ve((0,m.$l)(be("Failed to upgrade legacy queries",Xe))),console.error(Xe)}}}function Ye(de){return de?de.hasOwnProperty("refId")&&typeof de.refId=="string":!1}},7240:(G,O,e)=>{"use strict";e.d(O,{ZP:()=>l,mb:()=>m,qM:()=>s});var t=e(92624),n=e(51511),u=e(75138);const s={keys:{}},i=r=>({type:`templating/keyed/${r.action.type.replace(/^templating\//,"")}`,payload:r});function m(r,d){const c=(0,t.mn)(r);return i({key:c,action:d})}const f=r=>typeof r.type=="string"&&r.type.startsWith("templating/keyed")&&"payload"in r&&typeof r.payload.key=="string";function o(r=s,d){if(f(d)){const{key:c,action:g}=d.payload,p=(0,t.mn)(c),y=u.Z9.match(g)?p:r.lastKey,h=(0,n.Q)(),a=r.keys[p],v=h(a,g);return{...r,lastKey:y,keys:{...r.keys,[p]:v}}}return r}const l={templating:o}},51511:(G,O,e)=>{"use strict";e.d(O,{L:()=>r,Q:()=>l});var t=e(31259),n=e(50678),u=e(37737),s=e(85972),i=e(75138),m=e(63510),f=e(6942);let o;function l(){return o||(o=(0,t.combineReducers)({editor:n.gl,variables:f.L,optionsPicker:s.cv,transaction:i.vw,inspect:u.iV})),o}function r(){return{editor:n.PF,variables:m.s,optionsPicker:s.yy,transaction:i.xO,inspect:u.Kf}}},87095:(G,O,e)=>{"use strict";e.d(O,{AE:()=>f,E0:()=>i,Eo:()=>c,IV:()=>r,Q4:()=>a,QT:()=>g,S_:()=>h,_K:()=>C,cp:()=>y,gt:()=>o,ir:()=>E,ng:()=>v,xD:()=>d});var t=e(58635),n=e(3153),u=e(92624),s=e(51511);function i(P,x=(0,n.y0)(),M=!0){const{id:S,rootStateKey:D}=P,R=f(D,x).variables[S];if(!R){if(M)throw new Error(`Couldn't find variable with id:${S}`);return}return R}function m(P,x,M=(0,n.y0)()){return Object.values(f(x,M).variables).filter(P).sort((S,D)=>S.index-D.index)}function f(P,x=(0,n.y0)()){return x.templating.keys[(0,u.mn)(P)]??(0,s.L)()}function o(P,x=(0,n.y0)()){return m(l,P,x)}function l(P){return P.type!=="system"}const r=(0,t.Z)((P,x)=>o(P,(0,n.y0)())),d=(P,x)=>o(P,x);function c(P,x=(0,n.y0)()){return g(Object.values(f(P,x).variables))}function g(P){const x=P.filter(l).sort((M,S)=>M.index-S.index);return x.length>0?x[x.length-1].index+1:0}function p(P,x=getState()){return f(P,x).transaction.isDirty}function y(P=(0,n.y0)()){return P.templating?.lastKey}function h(P=(0,n.y0)()){if(!P.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return P.templating.lastKey}function a(P,x=(0,n.y0)()){const M=y(x);return M?m(P,M,x):[]}function v(P=(0,n.y0)()){const x=y(P);return x?o(x,P):[]}function C(P,x=(0,n.y0)()){const M=y(x);if(M)return i({id:P,rootStateKey:M,type:"query"},x,!1)}function E(P,x){return P[x]}},92990:(G,O,e)=>{"use strict";e.d(O,{$M:()=>P,Be:()=>C,Le:()=>M,Mn:()=>E,Pl:()=>y,Q8:()=>v,VN:()=>p,Y9:()=>a,b5:()=>c,gE:()=>h,mZ:()=>g,qQ:()=>x});var t=e(32557),n=e(82897),u=e.n(n),s=e(49922),i=e(22323),m=e(50678),f=e(15546),o=e(92624),l=e(87095),r=e(63510);const d=(0,t.oM)({name:"templating/shared",initialState:r.s,reducers:{addVariable:(S,D)=>{const T=D.payload.id??D.payload.data.model.name,R=i.z.get(D.payload.type),L=(0,n.cloneDeep)(R.initialState),w=R.beforeAdding?R.beforeAdding(D.payload.data.model):(0,n.cloneDeep)(D.payload.data.model),A={...(0,n.defaults)({},w,L),id:T,index:D.payload.data.index,global:D.payload.data.global};S[T]=A},variableStateNotStarted:(S,D)=>{const T=(0,l.ir)(S,D.payload.id);T.state=s.Gu.NotStarted,T.error=null},variableStateFetching:(S,D)=>{const T=(0,l.ir)(S,D.payload.id);T.state=s.Gu.Loading,T.error=null},variableStateCompleted:(S,D)=>{const T=(0,l.ir)(S,D.payload.id);T&&(T.state=s.Gu.Done,T.error=null)},variableStateFailed:(S,D)=>{const T=(0,l.ir)(S,D.payload.id);T&&(T.state=s.Gu.Error,T.error=D.payload.data.error)},removeVariable:(S,D)=>{if(delete S[D.payload.id],!D.payload.data.reIndex)return;const T=Object.values(S).sort((R,L)=>R.index-L.index);for(let R=0;R<T.length;R++)T[R].index=R},duplicateVariable:(S,D)=>{const T=(0,n.cloneDeep)(S[D.payload.id]),R=`copy_of_${T.name}`,L=D.payload.data?.newId??R,w=(0,l.QT)(Object.values(S));S[L]={...(0,n.cloneDeep)(i.z.get(D.payload.type).initialState),...T,id:L,name:R,index:w}},changeVariableOrder:(S,D)=>{const{toIndex:T,fromIndex:R}=D.payload.data,L=Object.values(S);for(let w=0;w<L.length;w++){const A=L[w];A.index===R?A.index=T:A.index>R&&A.index<=T?A.index--:A.index<R&&A.index>=T&&A.index++}},changeVariableType:(S,D)=>{const{id:T}=D.payload,{label:R,name:L,index:w,description:A,rootStateKey:N}=S[T];S[T]={...(0,n.cloneDeep)(i.z.get(D.payload.data.newType).initialState),id:T,rootStateKey:N,label:R,name:L,index:w,description:A}},setCurrentVariableValue:(S,D)=>{if(!D.payload.data.option)return;const T=(0,l.ir)(S,D.payload.id);if(!(0,f.eL)(T))return;const{option:R}=D.payload.data,L={...R,text:(0,o.Hi)(R?.text),value:(0,o.Hi)(R?.value)};T.current=L,T.options=T.options.map(w=>{w.value=(0,o.Hi)(w.value),w.text=(0,o.Hi)(w.text);let A=!1;if(Array.isArray(L.value))for(let N=0;N<L.value.length;N++){const W=L.value[N];if(w.value===W){A=!0;break}}else w.value===L.value&&(A=!0);return w.selected=A,w})},changeVariableProp:(S,D)=>{const T=(0,l.ir)(S,D.payload.id);T[D.payload.data.propName]=D.payload.data.propValue}},extraReducers:S=>S.addCase(m.Yo,(D,T)=>{const R=(0,l.ir)(D,T.payload.id);R.name=T.payload.data.newName})}),c=d.reducer,{removeVariable:g,addVariable:p,changeVariableProp:y,changeVariableOrder:h,duplicateVariable:a,setCurrentVariableValue:v,changeVariableType:C,variableStateNotStarted:E,variableStateFetching:P,variableStateCompleted:x,variableStateFailed:M}=d.actions},75138:(G,O,e)=>{"use strict";e.d(O,{Z9:()=>f,iv:()=>l,p3:()=>o,vw:()=>r,xO:()=>s});var t=e(32557),n=e(10672),u=e(92990);const s={uid:null,status:n.LN.NotStarted,isDirty:!1},i=(0,t.oM)({name:"templating/transaction",initialState:s,reducers:{variablesInitTransaction:(d,c)=>{d.uid=c.payload.uid,d.status=n.LN.Fetching},variablesCompleteTransaction:(d,c)=>{d.uid===c.payload.uid&&(d.status=n.LN.Completed)},variablesClearTransaction:(d,c)=>{d.uid=null,d.status=n.LN.NotStarted,d.isDirty=!1}},extraReducers:d=>d.addMatcher(m,(c,g)=>{c.status===n.LN.Completed&&(c.isDirty=!0)})});function m(d){return u.mZ.match(d)||u.VN.match(d)||u.Pl.match(d)||u.gE.match(d)||u.Y9.match(d)||u.Be.match(d)}const{variablesInitTransaction:f,variablesClearTransaction:o,variablesCompleteTransaction:l}=i.actions,r=i.reducer},63510:(G,O,e)=>{"use strict";e.d(O,{s:()=>t});const t={}},6942:(G,O,e)=>{"use strict";e.d(O,{L:()=>m,S:()=>i});var t=e(32557),n=e(22323),u=e(92990),s=e(63510);const i=(0,t.PH)("templating/cleanVariables"),m=(f=s.s,o)=>{if(i.match(o)){const l=Object.values(f).filter(d=>d.global);return l?l.reduce((d,c)=>(d[c.id]=c,d),{}):s.s}return o?.payload?.type&&n.z.getIfExists(o?.payload?.type)?n.z.get(o.payload.type).reducer((0,u.b5)(f,o),o):f}},10672:(G,O,e)=>{"use strict";e.d(O,{$U:()=>t.$U,Bd:()=>t.Bd,Eg:()=>m,LN:()=>i,Wy:()=>l,bU:()=>t.bU,eq:()=>o,x9:()=>f});var t=e(22107),n=e(49922),u=e(62316),s=e(82253),i=(r=>(r.NotStarted="Not started",r.Fetching="Fetching",r.Completed="Completed",r))(i||{});const m={id:s.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.bU.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class f extends u.R{}f.type="variables-changed";class o extends u.R{}o.type="variables-time-range-process-done";class l extends u.R{}l.type="variables-changed-in-url"},92624:(G,O,e)=>{"use strict";e.d(O,{A3:()=>R,AQ:()=>P,HY:()=>a,Hi:()=>T,J7:()=>d,N9:()=>C,QI:()=>h,Tt:()=>v,Y6:()=>A,_6:()=>y,a9:()=>c,bf:()=>p,bi:()=>M,gR:()=>E,iD:()=>x,mn:()=>L,xT:()=>D,yQ:()=>w});var t=e(82897),n=e.n(t),u=e(69934),s=e(55935),i=e(3153),m=e(19349),f=e(22323),o=e(82253),l=e(87095),r=e(10672);const d=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,c=N=>(d.lastIndex=0,d.exec(N)),g="__searchFilter",p=N=>N&&typeof N=="string"?N.indexOf(g)!==-1:!1,y=N=>{const{query:W,wildcardChar:I}=N;if(!p(W))return{};let{options:F}=N;return F=F||{searchFilter:""},{__searchFilter:{value:F.searchFilter?`${F.searchFilter}${I}`:`${I}`,text:""}}};function h(...N){const W=N[N.length-1];N[0]=typeof N[0]=="string"?N[0]:(0,s.Xh)(N[0]);const F=N.slice(0,-1).join(" ").match(d);return!!(F!==null?F.find(b=>{const X=c(b);return X!==null&&X.indexOf(W)>-1}):!1)}const a=N=>{if(!N||!N.current)return!1;if(N.current.value){const W=Array.isArray(N.current.value);if(W&&N.current.value.length&&N.current.value[0]===o.r2||!W&&N.current.value===o.r2)return!0}if(N.current.text){const W=Array.isArray(N.current.text);if(W&&N.current.text.length&&N.current.text[0]===o.xk||!W&&N.current.text===o.xk)return!0}return!1},v=N=>!N||!N.current||!N.current.text?"":Array.isArray(N.current.text)?N.current.text.toString():typeof N.current.text!="string"?"":N.current.text,C=N=>!N||!N.current||N.current.value===void 0||N.current.value===null?null:Array.isArray(N.current.value)?N.current.value.toString():typeof N.current.value!="string"?null:N.current.value;function E(N,W=(0,u.J)()){return!N||!N.regex?"":W.replace(N.regex,{},"regex")}function P(N,W,I=(0,m.$t)()){const F={range:void 0,variable:N,searchFilter:W};return(N.refresh===r.Bd.onTimeRangeChanged||N.refresh===r.Bd.onDashboardLoad)&&(F.range=I.timeRange()),F}function x(N){if(!N||!N.hasOwnProperty("refresh"))return r.Bd.never;const W=N;return W.refresh!==r.Bd.onTimeRangeChanged&&W.refresh!==r.Bd.onDashboardLoad&&W.refresh!==r.Bd.never?r.Bd.never:W.refresh}function M(){return f.z.list().filter(N=>N.id!=="system").map(({id:N,name:W,description:I})=>({label:W,value:N,description:I}))}function S(N){return(0,t.isArray)(N)&&(N.length===0?N=void 0:N.length===1&&(N=N[0])),N}function D(N,W){let I=0;const F={};for(const V in N){if(!V.startsWith("var-"))continue;let b=S(W[V]),X=S(N[V]);(0,t.isEqual)(X,b)||(F[V]={value:N[V]},I++)}for(const V in W){if(!V.startsWith("var-"))continue;const b=W[V];(0,t.isArray)(b)&&b.length===0||N.hasOwnProperty(V)||(F[V]={value:"",removed:!0},I++)}return I?F:void 0}function T(N){return Array.isArray(N)?N.map(String):N==null?"":typeof N=="number"?N.toString(10):typeof N=="string"?N:typeof N=="boolean"?N.toString():""}function R(N,W=(0,i.y0)()){return(0,l.AE)(N,W).transaction.status!==r.LN.NotStarted}function L(N){return String(N)}const w=N=>{if(!N.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${N.id}`);return{type:N.type,id:N.id,rootStateKey:N.rootStateKey}};function A(N,W){return{type:N.type,id:N.id,data:W}}},4012:(G,O,e)=>{"use strict";var t=e(32478),n=e(86169),u=e(17103),s=e(44032),i=e(63073),m=e(3574),f=e(21256),o=e(91162),l=e(87449),r=e(9398),d=e(134),c=e(66157),g=e(99714),p=e(36182),y=e(82897),h=e.n(y),a=e(68404),v=e(97394),C=e(46519),E=e(99919),P=e(35363),x=e(20256),M=e(87442),S=e(83383),D=e(47214),T=e(48078),R=e(57388),L=e(40483),w=e(69945),A=e(77213),N=e(96293),W=e(68711),I=e(73274),F=e(65212),V=e(94150),b=e(47694),X=e(79378),k=e(52423),H=e(14582),Y=e(3249),ee=e(85854),ue=e(89890),q=e(17130),ge=e(74940),De=e(86789),fe=e(318),me=e(90723),ce=e(82385),ie=e(46739),re=e(64140),Ee=e(25474);function J(B,U){switch(U.type){case H.fS.boolean:return(0,y.isUndefined)(B)?!1:te(B);case H.fS.number:return isNaN(B)?0:parseFloat(B);case H.fS.string:return B?String(B):"";default:return B}}const te=B=>(0,y.isString)(B)?!(B[0]==="F"||B[0]==="f"||B[0]==="0"):!!B;function ne(B){return function({options:z,onChange:Q,field:le}){const{validator:Ce,converter:Ie=J}=B,{value:Je}=z,[it,pt]=(0,a.useState)(!Ce(Je)),vt=(0,a.useCallback)(Nt=>{pt(!Ce(Nt.currentTarget.value))},[pt,Ce]),Mt=(0,a.useCallback)(Nt=>{if(it)return;const{value:Kt}=Nt.currentTarget;Q({...z,value:Ie(Kt,le)})},[z,Q,it,le,Ie]);return a.createElement(Ee.I,{className:"flex-grow-1",invalid:it,defaultValue:String(z.value),placeholder:"Value",onChange:vt,onBlur:Mt})}}const j=()=>[{name:"Is greater",id:ee.mE.greater,component:ne({validator:B=>!isNaN(B)})},{name:"Is greater or equal",id:ee.mE.greaterOrEqual,component:ne({validator:B=>!isNaN(B)})},{name:"Is lower",id:ee.mE.lower,component:ne({validator:B=>!isNaN(B)})},{name:"Is lower or equal",id:ee.mE.lowerOrEqual,component:ne({validator:B=>!isNaN(B)})},{name:"Is equal",id:ee.mE.equal,component:ne({validator:()=>!0})},{name:"Is not equal",id:ee.mE.notEqual,component:ne({validator:()=>!0})},{name:"Regex",id:ee.mE.regex,component:ne({validator:()=>!0,converter:B=>String(B)})}],be=()=>null,Le=()=>[{name:"Is null",id:ee.mE.isNull,component:be},{name:"Is not null",id:ee.mE.isNotNull,component:be}];function Qe(B){return function({options:z,onChange:Q,field:le}){const{validator:Ce}=B,[Ie,Je]=(0,a.useState)({from:!Ce(z.from),to:!Ce(z.to)}),it=(0,a.useCallback)((vt,Mt)=>{Je({...Ie,[Mt]:!Ce(vt.currentTarget.value)})},[Je,Ce,Ie]),pt=(0,a.useCallback)((vt,Mt)=>{if(Ie[Mt])return;const{value:Nt}=vt.currentTarget;Q({...z,[Mt]:J(Nt,le)})},[z,Q,Ie,le]);return a.createElement(a.Fragment,null,a.createElement(Ee.I,{className:"flex-grow-1 gf-form-spacing",invalid:Ie.from,defaultValue:String(z.from),placeholder:"From",onChange:vt=>it(vt,"from"),onBlur:vt=>pt(vt,"from")}),a.createElement("div",{className:"gf-form-label"},"and"),a.createElement(Ee.I,{className:"flex-grow-1",invalid:Ie.to,defaultValue:String(z.to),placeholder:"To",onChange:vt=>it(vt,"to"),onBlur:vt=>pt(vt,"to")}))}}const Ye=()=>[{name:"Is between",id:ee.mE.between,component:Qe({validator:B=>!isNaN(B)})}],de=new re.B(()=>[...j(),...Le(),...Ye()]),Be=B=>{const{onDelete:U,onChange:z,filter:Q,fieldsInfo:le}=B,{fieldsAsOptions:Ce,fieldByDisplayName:Ie}=le,Je=We(Q,Ce)??"",it=Ie[Je],pt=it?Ve(it):[],vt=$e(Q,pt),Mt=de.getIfExists(vt),Nt=(0,a.useCallback)(en=>{en?.value&&z({...Q,fieldName:en.value})},[z,Q]),Kt=(0,a.useCallback)(en=>{if(!en?.value)return;const pn=en.value,un=Y.U8.get(pn).getDefaultOptions(it);z({...Q,config:{id:pn,options:un}})},[z,Q,it]),Gt=(0,a.useCallback)(en=>{z({...Q,config:{...Q.config,options:en}})},[z,Q]);return!it||!Mt||!Mt.component?null:a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form-spacing"},a.createElement("div",{className:"gf-form-label width-7"},"Field"),a.createElement(ie.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:Ce,value:Q.fieldName,onChange:Nt})),a.createElement("div",{className:"gf-form gf-form-spacing"},a.createElement("div",{className:"gf-form-label"},"Match"),a.createElement(ie.Ph,{className:"width-12",placeholder:"Select test",options:pt,value:vt,onChange:Kt})),a.createElement("div",{className:"gf-form gf-form--grow gf-form-spacing"},a.createElement("div",{className:"gf-form-label"},"Value"),a.createElement(Mt.component,{field:it,options:Q.config.options??{},onChange:Gt})),a.createElement("div",{className:"gf-form"},a.createElement(me.zx,{icon:"times",onClick:U,variant:"secondary"})))},Ve=B=>{const U=[];for(const z of Y.U8.list())!z.isApplicable(B)||!de.getIfExists(z.id)||U.push({value:z.id,label:z.name,description:z.description});return U},$e=(B,U)=>{const z=U.find(Q=>Q.value===B.config.id);if(z&&z.value)return z.value;if(U[0]?.value)return U[0]?.value},We=(B,U)=>{const z=U.find(Q=>Q.value===B.fieldName);if(z&&z.value)return z.value;if(U[0]?.value)return U[0]?.value},Ke=[{label:"Include",value:De.PQ.include},{label:"Exclude",value:De.PQ.exclude}],qe=[{label:"Match all",value:De.ER.all},{label:"Match any",value:De.ER.any}],Xe=B=>{const{input:U,options:z,onChange:Q}=B,le=Ze(),Ce=lt(U),Ie=(0,a.useCallback)(()=>{const Mt=U[0],Nt=Mt.fields.find(en=>en.type!==H.fS.time);if(!Nt)return;const Kt=(0,y.cloneDeep)(z.filters),Gt=Y.U8.get(ee.mE.greater);Kt.push({fieldName:(0,ue.C)(Nt,Mt,U),config:{id:Gt.id,options:Gt.getDefaultOptions(Nt)}}),Q({...z,filters:Kt})},[Q,z,U]),Je=(0,a.useCallback)(Mt=>{let Nt=(0,y.cloneDeep)(z.filters);Nt.splice(Mt,1),Q({...z,filters:Nt})},[z,Q]),it=(0,a.useCallback)((Mt,Nt)=>{let Kt=(0,y.cloneDeep)(z.filters);Kt[Nt]=Mt,Q({...z,filters:Kt})},[z,Q]),pt=(0,a.useCallback)(Mt=>{Q({...z,type:Mt??De.PQ.include})},[z,Q]),vt=(0,a.useCallback)(Mt=>{Q({...z,match:Mt??De.ER.all})},[z,Q]);return a.createElement("div",null,a.createElement("div",{className:"gf-form gf-form-inline"},a.createElement("div",{className:"gf-form-label width-8"},"Filter type"),a.createElement("div",{className:"width-15"},a.createElement(fe.S,{options:Ke,value:z.type,onChange:pt,fullWidth:!0}))),a.createElement("div",{className:"gf-form gf-form-inline"},a.createElement("div",{className:"gf-form-label width-8"},"Conditions"),a.createElement("div",{className:"width-15"},a.createElement(fe.S,{options:qe,value:z.match,onChange:vt,fullWidth:!0}))),a.createElement("div",{className:le.conditions},z.filters.map((Mt,Nt)=>a.createElement(Be,{key:Nt,filter:Mt,fieldsInfo:Ce,onChange:Kt=>it(Kt,Nt),onDelete:()=>Je(Nt)})),a.createElement("div",{className:"gf-form"},a.createElement(me.zx,{icon:"plus",size:"sm",onClick:Ie,variant:"secondary"},"Add condition"))))},at={id:q.W.filterByValue,editor:Xe,transformation:ge.Y.filterByValueTransformer,name:ge.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source."},Ze=(0,ce.B)(()=>({conditions:k.css`
    padding-left: 16px;
  `})),lt=B=>(0,a.useMemo)(()=>{const U={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(B)?B.reduce((z,Q)=>Q.fields.reduce((le,Ce)=>{const Ie=(0,ue.C)(Ce,Q,B);return le.fieldByDisplayName[Ie]||(le.fieldsAsOptions.push({label:Ie,value:Ie,type:Ce.type}),le.fieldByDisplayName[Ie]=Ce),le},z),U):U},[B]);var nt=e(24699),_e=e(91171),ut=e(91752),rt=e(57054),je=e(13505);function dt(B,U){const z={data:B.input,options:B.options},Q=new ut.j({id:"root",title:"root"}),le=Ie=>{if(Ie?.length){const Je=Ie[0];let it=Q.categories.find(pt=>pt.props.id===Je);return it||(it=new ut.j({id:Je,title:Je}),Q.categories.push(it)),it}return Q},Ce={getValue:Ie=>(0,y.get)(B.options,Ie),onChange:(Ie,Je)=>{B.onChange((0,je.hs)(B.options,Ie,Je))}};return(0,rt.HZ)(U,Ce,le,z),Q}function oe(B){const U={data:[],options:{}},z={},Q=new _e.rt;B(Q,U);for(const le of Q.getItems())le.defaultValue!=null&&(0,y.set)(z,le.path,le.defaultValue);return z}var Se=e(90024),Re=e(77564);const ze=(B,U)=>{const z=U.options??{};(0,Se.J)("",B,z)},ve=B=>{(0,a.useEffect)(()=>{if(!B.options.xBuckets?.mode){const z=oe(ze);B.onChange({...z,...B.options}),console.log("geometry useEffect",z)}});const U=dt(B,ze);return a.createElement("div",null,a.createElement("div",null,U.items.map(z=>z.render())))},Te={id:Re.Oy.id,editor:ve,transformation:Re.Oy,name:Re.Oy.name,description:Re.Oy.description,state:nt.BV.alpha};var he=e(29516),pe=e(46090),ye=e(9274),Oe=e(71210),Ne=e(21760),Me=e(68858),Ae=e(66926),we=e(63279),ke=e(24177),st=e(26031);function Et(B,U,z){const Q={},le={};for(const Ce of B.fields){const Ie=(0,ue.C)(Ce,B),it=z.index[Ie].handler;if(!it)continue;const pt=Ce.values.get(U);if(pt==null)continue;const vt=it.processor(pt,Q,le);vt!=null&&(Q[it.targetProperty??it.key]=vt)}return le.mappingValues&&(Q.mappings=Ct(le)),Q}var Pt=(B=>(B.Name="field.name",B.Value="field.value",B.Label="field.label",B.Ignore="__ignore",B))(Pt||{});const gt=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:jt},{key:"min",processor:jt},{key:"unit",processor:B=>B.toString()},{key:"decimals",processor:jt},{key:"displayName",name:"Display name",processor:B=>B.toString()},{key:"color",processor:B=>({fixedColor:B,mode:Ae.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(B,U)=>{const z=(0,we.I)(B);if(!isNaN(z))return U.thresholds||(U.thresholds={mode:ke.H.Absolute,steps:[{value:-1/0,color:"green"}]}),U.thresholds.steps.push({value:z,color:"red"}),U.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:Ne.gz.allValues,processor:(B,U,z)=>{if((0,y.isArray)(B))return z.mappingValues=B,U.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:Ne.gz.allValues,processor:(B,U,z)=>{if((0,y.isArray)(B))return z.mappingColors=B,U.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:Ne.gz.allValues,processor:(B,U,z)=>{if((0,y.isArray)(B))return z.mappingTexts=B,U.mappings}}];function Ct(B){const U={type:st.H.ValueToText,options:{}};if(!B.mappingValues)return[];for(let z=0;z<B.mappingValues.length;z++){const Q=B.mappingValues[z];Q!=null&&(U.options[Q.toString()]={color:B.mappingColors&&B.mappingColors[z],text:B.mappingTexts&&B.mappingTexts[z],index:z})}return[U]}let Ot=null;function Ft(){if(Ot===null){Ot={};for(const B of gt)Ot[B.key]=B}return Ot}function jt(B){const U=(0,we.I)(B);if(!isNaN(U))return U}function En(B,U){for(const z of U)if(B===z.fieldName)return z.handlerKey;return B.toLowerCase()}function xn(B){return B?Ft()[B]:null}function Cn(B,U,z){const Q={index:{}};let le=U.find(Ie=>Ie.handlerKey==="field.name"),Ce=U.find(Ie=>Ie.handlerKey==="field.value");for(const Ie of B.fields){const Je=(0,ue.C)(Ie,B),it=U.find(Mt=>Mt.fieldName===Je),pt=it?it.handlerKey:Je.toLowerCase();let vt=xn(pt);z&&(vt?(vt.key==="field.name"&&(Q.nameField=Ie),vt.key==="field.value"&&(Q.valueField=Ie)):it||(!Q.nameField&&!le&&Ie.type===H.fS.string&&(Q.nameField=Ie,vt=xn("field.name")),!Q.valueField&&!Ce&&Ie.type===H.fS.number&&(Q.valueField=Ie,vt=xn("field.value")))),!vt&&z&&(vt=xn("field.label")),Q.index[Je]={automatic:!it,handler:vt,reducerId:it?.reducerId??vt?.defaultReducer??Ne.gz.lastNotNull}}return Q}function bn({frame:B,mappings:U,onChange:z,withReducers:Q,withNameAndValue:le}){const Ce=(0,he.wW)(Bn),Ie=Tn(B,U,le),Je=gt.map(vt=>Zn(vt,!1)),it=(vt,Mt)=>{const Nt=U.findIndex(Kt=>Kt.fieldName===vt.fieldName);if(Mt)if(Nt!==-1){const Kt=[...U];Kt.splice(Nt,1,{...U[Nt],handlerKey:Mt.value}),z(Kt)}else z([...U,{fieldName:vt.fieldName,handlerKey:Mt.value}]);else z(Nt!==-1?U.filter((Kt,Gt)=>Gt!==Nt):[...U,{fieldName:vt.fieldName,handlerKey:"__ignore"}])},pt=(vt,Mt)=>{const Nt=U.findIndex(Kt=>Kt.fieldName===vt.fieldName);if(Nt!==-1){const Kt=[...U];Kt.splice(Nt,1,{...U[Nt],reducerId:Mt}),z(Kt)}else z([...U,{fieldName:vt.fieldName,handlerKey:vt.handlerKey,reducerId:Mt}])};return a.createElement("table",{className:Ce.table},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Field"),a.createElement("th",null,"Use as"),Q&&a.createElement("th",null,"Select"))),a.createElement("tbody",null,Ie.map(vt=>a.createElement("tr",{key:vt.fieldName},a.createElement("td",{className:Ce.labelCell},vt.fieldName),a.createElement("td",{className:Ce.selectCell,"data-testid":`${vt.fieldName}-config-key`},a.createElement(ie.Ph,{options:Je,value:vt.configOption,placeholder:vt.placeholder,isClearable:!0,onChange:Mt=>it(vt,Mt)})),Q&&a.createElement("td",{"data-testid":`${vt.fieldName}-reducer`,className:Ce.selectCell},a.createElement(Me.m,{stats:[vt.reducerId],defaultStat:vt.reducerId,onChange:Mt=>pt(vt,Mt[0])}))))))}function Tn(B,U,z){const Q=[],le=Cn(B,U??[],z);for(const Ce of B.fields){const Ie=(0,ue.C)(Ce,B),Je=le.index[Ie],it=Zn(Je.handler,Je.automatic);Q.push({fieldName:Ie,configOption:Je.automatic?null:it,placeholder:Je.automatic?it?.label:"Choose",handlerKey:Je.handler?.key??null,reducerId:Je.reducerId})}for(const Ce of U)if(!Q.find(Ie=>Ie.fieldName===Ce.fieldName)){const Ie=xn(Ce.handlerKey);Q.push({fieldName:Ce.fieldName,handlerKey:Ce.handlerKey,configOption:Zn(Ie,!1),missingInFrame:!0,reducerId:Ce.reducerId??Ne.gz.lastNotNull})}return Object.values(Q)}function Zn(B,U){if(!B)return null;let z=B.name??(0,y.capitalize)(B.key);return U&&(z=`${z} (auto)`),{label:z,value:B.key}}const Bn=B=>({table:k.css`
    margin-top: ${B.spacing(1)};

    td,
    th {
      border-right: 4px solid ${B.colors.background.primary};
      border-bottom: 4px solid ${B.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${B.typography.bodySmall.fontSize};
      line-height: ${B.spacing(4)};
      padding: ${B.spacing(0,1)};
    }
  `,labelCell:k.css`
    font-size: ${B.typography.bodySmall.fontSize};
    background: ${B.colors.background.secondary};
    padding: ${B.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:k.css`
    padding: 0;
    min-width: 161px;
  `});var Sn=e(2101),wn=e(19695);function $n(B,U){let z=null;for(const Je of U)if(Je.refId===B.configRefId){z=Je;break}if(!z)return U;const Q={fields:[],length:1},le=Cn(z,B.mappings??[],!1);for(const Je of z.fields){const it={...Je},pt=(0,ue.C)(Je,z),vt=le.index[pt],Mt=(0,Ne.Kx)({field:Je,reducers:[vt.reducerId]});it.values=new wn.G([Mt[vt.reducerId]]),Q.fields.push(it)}const Ce=[],Ie=(0,Y.sq)(B.applyTo||{id:ee.mi.numeric});for(const Je of U){if(Je===z&&U.length>1)continue;const it={fields:[],length:Je.length};for(const pt of Je.fields)if(Ie(pt,Je,U)){const vt=Et(Q,0,le);it.fields.push({...pt,config:{...pt.config,...vt}})}else it.fields.push(pt);Ce.push(it)}return Ce}const Xn={id:q.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data",defaultOptions:{configRefId:"config",mappings:[]},operator:B=>U=>U.pipe((0,Sn.U)(z=>$n(B,z)))};function ba({input:B,onChange:U,options:z}){const Q=(0,he.wW)(Kn),le=B.map(Kt=>Kt.refId).filter(Kt=>Kt!=null).map(Kt=>({label:Kt,value:Kt})),Ce=z.configRefId||"config",Ie=z.applyTo??{id:ee.mi.byType,options:"number"},Je=pe.i.get(Ie.id),it=B.find(Kt=>Kt.refId===Ce),pt=Kt=>{U({...z,configRefId:Kt.value||"config"})},vt=Kt=>{U({...z,applyTo:{id:Kt.value}})},Mt=Kt=>{U({...z,applyTo:{id:Ie.id,options:Kt}})},Nt=pe.i.list().filter(Kt=>!Kt.excludeFromPicker).map(Kt=>({label:Kt.name,value:Kt.id,description:Kt.description}));return a.createElement(a.Fragment,null,a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Config query",labelWidth:20},a.createElement(ie.Ph,{onChange:pt,options:le,value:Ce,width:30}))),a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Apply to",labelWidth:20},a.createElement(ie.Ph,{onChange:vt,options:Nt,value:Ie.id,width:30}))),a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Apply to options",labelWidth:20,className:Q.matcherOptions},a.createElement(Je.component,{matcher:Je.matcher,data:B,options:Ie.options,onChange:Mt}))),a.createElement(ye.Z,null,it&&a.createElement(bn,{frame:it,mappings:z.mappings,onChange:Kt=>U({...z,mappings:Kt}),withReducers:!0})))}const hn={id:Xn.id,editor:ba,transformation:Xn,name:Xn.name,description:Xn.description,state:nt.BV.beta,help:`
### Use cases

This transformation allows you select one query and from it extract standard options such as
**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.
This enables dynamic query driven visualization configuration.

### Options

- **Config query**: Selet the query that returns the data you want to use as configuration.
- **Apply to**: Select what fields or series to apply the configuration to.
- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.

### Field mapping table

Below the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.

## Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now also has a maximum
configuration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.
in the panel editor options pane.

## Value mappings

You can also transform a query result into value mappings. This is is a bit different because every
row in the configuration query result is used to define a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Ciolor | All values |

Grafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.
`},Kn=B=>({matcherOptions:k.css`
    min-width: 404px;
  `});var ta=e(53786),La=e(98082),oa=e(89984),ha=e(90701),ia=e(1140),Rt=e(89014);const Lt=[{value:oa.ie.BinaryOperation,label:"Binary operation"},{value:oa.ie.ReduceRow,label:"Reduce row"}],At=new Set([H.fS.time,H.fS.number,H.fS.string]);class kt extends a.PureComponent{constructor(U){super(U),this.onToggleReplaceFields=()=>{const{options:z}=this.props;this.props.onChange({...z,replaceFields:!z.replaceFields})},this.onModeChanged=z=>{const{options:Q,onChange:le}=this.props,Ce=z.value??oa.ie.BinaryOperation;le({...Q,mode:Ce})},this.onAliasChanged=z=>{const{options:Q}=this.props;this.props.onChange({...Q,alias:z.target.value})},this.updateReduceOptions=z=>{const{options:Q,onChange:le}=this.props;le({...Q,mode:oa.ie.ReduceRow,reduce:z})},this.onFieldToggle=z=>{const{selected:Q}=this.state;Q.indexOf(z)>-1?this.onChange(Q.filter(le=>le!==z)):this.onChange([...Q,z])},this.onChange=z=>{this.setState({selected:z});const{reduce:Q}=this.props.options;this.updateReduceOptions({...Q,include:z})},this.onStatsChange=z=>{const Q=z.length?z[0]:Ne.gz.sum,{reduce:le}=this.props.options;this.updateReduceOptions({...le,reducer:Q})},this.updateBinaryOptions=z=>{const{options:Q,onChange:le}=this.props;le({...Q,mode:oa.ie.BinaryOperation,binary:z})},this.onBinaryLeftChanged=z=>{const{binary:Q}=this.props.options;this.updateBinaryOptions({...Q,left:z.value})},this.onBinaryRightChanged=z=>{const{binary:Q}=this.props.options;this.updateBinaryOptions({...Q,right:z.value})},this.onBinaryOperationChanged=z=>{const{binary:Q}=this.props.options;this.updateBinaryOptions({...Q,operator:z.value})},this.state={include:U.options?.reduce?.include||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(U){this.props.input!==U.input&&this.initOptions()}initOptions(){const{options:U}=this.props,z=U?.reduce?.include||[],Q={interpolate:Ce=>Ce},le=(0,ta.of)(this.props.input).pipe(ge.Y.ensureColumnsTransformer.operator(null,Q),this.extractAllNames(),this.extractNamesAndSelected(z)).subscribe(({selected:Ce,names:Ie})=>{this.setState({names:Ie,selected:Ce},()=>le.unsubscribe())})}extractAllNames(){return U=>U.pipe((0,Sn.U)(z=>{const Q=[],le={};for(const Ce of z)for(const Ie of Ce.fields){if(!At.has(Ie.type))continue;const Je=(0,ue.C)(Ie,Ce,z);le[Je]||(le[Je]=!0,Q.push(Je))}return Q}))}extractNamesAndSelected(U){return z=>z.pipe((0,Sn.U)(Q=>{if(!U.length)return{names:Q,selected:[]};const le=[],Ce=[];for(const Ie of Q)U.includes(Ie)&&Ce.push(Ie),le.push(Ie);return{names:le,selected:Ce}}))}renderReduceRow(U){const{names:z,selected:Q}=this.state;return U=(0,y.defaults)(U,{reducer:Ne.gz.sum}),a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Field name"),a.createElement(ha.Lh,{spacing:"xs",align:"flex-start",wrap:!0},z.map((le,Ce)=>a.createElement(ia.B,{key:`${le}/${Ce}`,onClick:()=>{this.onFieldToggle(le)},label:le,selected:Q.indexOf(le)>-1}))))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Calculation"),a.createElement(Me.m,{allowMultiple:!1,className:"width-18",stats:[U.reducer],onChange:this.onStatsChange,defaultStat:Ne.gz.sum}))))}renderBinaryOperation(U){U=(0,y.defaults)(U,{reducer:Ne.gz.sum});let z=!U?.left,Q=!U?.right;const le=this.state.names.map(it=>(it===U?.left&&(z=!0),it===U?.right&&(Q=!0),{label:it,value:it})),Ce=z?le:[...le,{label:U?.left,value:U?.left}],Ie=Q?le:[...le,{label:U?.right,value:U?.right}],Je=La.n.list().map(it=>({label:it.id,value:it.id}));return a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Operation")),a.createElement("div",{className:"gf-form"},a.createElement(ie.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:Ce,className:"min-width-18 gf-form-spacing",value:U?.left,onChange:this.onBinaryLeftChanged}),a.createElement(ie.Ph,{className:"width-8 gf-form-spacing",options:Je,value:U.operator??Je[0].value,onChange:this.onBinaryOperationChanged}),a.createElement(ie.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:Ie,value:U?.right,onChange:this.onBinaryRightChanged})))}render(){const{options:U}=this.props,z=U.mode??oa.ie.BinaryOperation;return a.createElement("div",null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Mode"),a.createElement(ie.Ph,{className:"width-18",options:Lt,value:Lt.find(Q=>Q.value===z),onChange:this.onModeChanged}))),z===oa.ie.BinaryOperation&&this.renderBinaryOperation(U.binary),z===oa.ie.ReduceRow&&this.renderReduceRow(U.reduce),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Alias"),a.createElement(Ee.I,{className:"width-18",value:U.alias??"",placeholder:(0,oa.h)(U),onChange:this.onAliasChanged}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Rt.LegacyForms.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!U.replaceFields,onChange:this.onToggleReplaceFields}))))}}const Zt={id:q.W.calculateField,editor:kt,transformation:ge.Y.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field"};var Qt=e(42074);const Jt=[{value:Qt.HO.FieldName,label:"Copy frame name to field name"},{value:Qt.HO.Label,label:"Add a label with the frame name"},{value:Qt.HO.Drop,label:"Ignore the frame name"}];class rn extends a.PureComponent{constructor(U){super(U),this.onModeChanged=z=>{const{options:Q,onChange:le}=this.props,Ce=z.value??Qt.HO.FieldName;le({...Q,frameNameMode:Ce})},this.onLabelChanged=z=>{const{options:Q}=this.props;this.props.onChange({...Q,frameNameLabel:z.target.value})}}render(){const{options:U}=this.props,z=U.frameNameMode??Qt.HO.FieldName;return a.createElement("div",null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Name"),a.createElement(ie.Ph,{className:"width-18",options:Jt,value:Jt.find(Q=>Q.value===z),onChange:this.onModeChanged}))),z===Qt.HO.Label&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Label"),a.createElement(Ee.I,{className:"width-18",value:U.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged}))))}}const mn={id:q.W.concatenate,editor:rn,transformation:ge.Y.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length."};var Xt=e(98206);const fn={settings:{width:24}},In=({input:B,options:U,onChange:z})=>{const Q=[{value:H.fS.number,label:"Numeric"},{value:H.fS.string,label:"String"},{value:H.fS.time,label:"Time"},{value:H.fS.boolean,label:"Boolean"},{value:H.fS.other,label:"JSON"}],le=(0,a.useCallback)(pt=>vt=>{const Mt=U.conversions;Mt[pt]={...Mt[pt],targetField:vt??""},z({...U,conversions:Mt})},[z,U]),Ce=(0,a.useCallback)(pt=>vt=>{const Mt=U.conversions;Mt[pt]={...Mt[pt],destinationType:vt.value},z({...U,conversions:Mt})},[z,U]),Ie=(0,a.useCallback)(pt=>vt=>{const Mt=U.conversions;Mt[pt]={...Mt[pt],dateFormat:vt.currentTarget.value},z({...U,conversions:Mt})},[z,U]),Je=(0,a.useCallback)(()=>{z({...U,conversions:[...U.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[z,U]),it=(0,a.useCallback)(pt=>{const vt=U.conversions;vt.splice(pt,1),z({...U,conversions:vt})},[z,U]);return a.createElement(a.Fragment,null,U.conversions.map((pt,vt)=>a.createElement(ye.Z,{key:`${pt.targetField}-${vt}`},a.createElement(Oe._,{label:"Field"},a.createElement(Xt.b,{context:{data:B},value:pt.targetField??"",onChange:le(vt),item:fn})),a.createElement(Oe._,{label:"as"},a.createElement(ie.Ph,{options:Q,value:pt.destinationType,placeholder:"Type",onChange:Ce(vt),width:18})),pt.destinationType===H.fS.time&&a.createElement(Oe._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},a.createElement(Ee.I,{value:pt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:Ie(vt),width:24})),a.createElement(me.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>it(vt),"aria-label":"Remove convert field type transformer"}))),a.createElement(me.zx,{size:"sm",icon:"plus",onClick:Je,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},Yn={id:q.W.convertFieldType,editor:In,transformation:ge.Y.convertFieldTypeTransformer,name:ge.Y.convertFieldTypeTransformer.name,description:ge.Y.convertFieldTypeTransformer.description};var Vn=e(29076),_n=e(74955);class va extends a.PureComponent{constructor(U){super(U),this.onFieldToggle=z=>{const{selected:Q}=this.state;Q.indexOf(z)>-1?this.onChange(Q.filter(le=>le!==z)):this.onChange([...Q,z])},this.onChange=z=>{const{regex:Q,isRegexValid:le}=this.state,Ce={...this.props.options,include:{names:z}};Q&&le&&(Ce.include=Ce.include??{},Ce.include.pattern=Q),this.setState({selected:z},()=>{this.props.onChange(Ce)})},this.onInputBlur=z=>{const{selected:Q,regex:le}=this.state;let Ce=!0;try{le&&(0,Vn.jO)(le)}catch{Ce=!1}Ce?this.props.onChange({...this.props.options,include:{pattern:le}}):this.props.onChange({...this.props.options,include:{names:Q}}),this.setState({isRegexValid:Ce})},this.state={include:U.options.include?.names||[],regex:U.options.include?.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(U){this.props.input!==U.input&&this.initOptions()}initOptions(){const{input:U,options:z}=this.props,Q=Array.from(z.include?.names??[]),le=[],Ce={};for(const Ie of U)for(const Je of Ie.fields){const it=(0,ue.C)(Je,Ie,U);let pt=Ce[it];pt||(pt=Ce[it]={name:it,count:0},le.push(pt)),pt.count++}if(z.include?.pattern)try{const Ie=(0,Vn.jO)(z.include.pattern);for(const Je of le)Ie.test(Je.name)&&Q.push(Je.name)}catch(Ie){console.error(Ie)}if(Q.length){const Ie=le.filter(Je=>Q.includes(Je.name));this.setState({options:le,selected:Ie.map(Je=>Je.name),regex:z.include?.pattern})}else this.setState({options:le,selected:le.map(Ie=>Ie.name),regex:z.include?.pattern})}render(){const{options:U,selected:z,isRegexValid:Q}=this.state;return a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Identifier"),a.createElement(ha.Lh,{spacing:"xs",align:"flex-start",wrap:!0},a.createElement(_n.g,{invalid:!Q,error:Q?void 0:"Invalid pattern",className:k.css`
                margin-bottom: 0;
              `},a.createElement(Ee.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:le=>this.setState({regex:le.currentTarget.value}),onBlur:this.onInputBlur,width:25})),U.map((le,Ce)=>{const Ie=`${le.name}${le.count>1?" ("+le.count+")":""}`,Je=z.indexOf(le.name)>-1;return a.createElement(ia.B,{key:`${le.name}/${Ce}`,onClick:()=>{this.onFieldToggle(le.name)},label:Ie,selected:Je})}))))}}const Fa={id:q.W.filterFieldsByName,editor:va,transformation:ge.Y.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive."};class Ea extends a.PureComponent{constructor(U){super(U),this.onFieldToggle=z=>{const{selected:Q}=this.state;Q.indexOf(z)>-1?this.onChange(Q.filter(le=>le!==z)):this.onChange([...Q,z])},this.onChange=z=>{this.setState({selected:z}),this.props.onChange({...this.props.options,include:z.join("|")})},this.state={include:U.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(U){this.props.input!==U.input&&this.initOptions()}initOptions(){const{input:U,options:z}=this.props,Q=z.include?z.include.split("|"):[],le=[],Ce={};for(const Ie of U)if(Ie.refId){let Je=Ce[Ie.refId];Je||(Je=Ce[Ie.refId]={refId:Ie.refId,count:0},le.push(Je)),Je.count++}if(Q.length){const Ie=[],Je=[];for(const it of le)Q.includes(it.refId)&&Je.push(it),Ie.push(it);this.setState({options:Ie,selected:Je.map(it=>it.refId)})}else this.setState({options:le,selected:[]})}render(){const{options:U,selected:z}=this.state;return a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Series refId"),a.createElement(ha.Lh,{spacing:"xs",align:"flex-start",wrap:!0},U.map((Q,le)=>{const Ce=`${Q.refId}${Q.count>1?" ("+Q.count+")":""}`,Ie=z.indexOf(Q.refId)>-1;return a.createElement(ia.B,{key:`${Q.refId}/${le}`,onClick:()=>{this.onFieldToggle(Q.refId)},label:Ce,selected:Ie})}))))}}const Ma={id:q.W.filterByRefId,editor:Ea,transformation:ge.Y.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel."};var Za=e(88861);function ca(B){return(0,a.useMemo)(()=>Array.isArray(B)?Object.keys(B.reduce((U,z)=>!z||!Array.isArray(z.fields)?U:z.fields.reduce((Q,le)=>{const Ce=(0,ue.C)(le,z,B);return Q[Ce]=!0,Q},U),{})):[],[B])}function Ja(B){const U=new Set;for(const z of B)for(const Q of z.fields)if(Q.labels)for(const le of Object.keys(Q.labels))U.add(le);return U}const qa=({input:B,options:U,onChange:z})=>{const Q=ca(B),le=(0,a.useCallback)(Ce=>Ie=>{z({...U,fields:{...U.fields,[Ce]:Ie}})},[z]);return a.createElement("div",null,Q.map(Ce=>a.createElement(Xa,{onConfigChange:le(Ce),fieldName:Ce,config:U.fields[Ce],key:Ce})))},Va=[{label:"Group by",value:Za.x.groupBy},{label:"Calculate",value:Za.x.aggregate}],Xa=({fieldName:B,config:U,onConfigChange:z})=>{const Q=fs(),le=(0,a.useCallback)(Ce=>{z({aggregations:U?.aggregations??[],operation:Ce?.value??null})},[U,z]);return a.createElement("div",{className:(0,k.cx)("gf-form-inline",Q.row)},a.createElement("div",{className:(0,k.cx)("gf-form",Q.fieldName)},a.createElement("div",{className:(0,k.cx)("gf-form-label",Q.rowSpacing)},B)),a.createElement("div",{className:(0,k.cx)("gf-form",Q.cell)},a.createElement("div",{className:(0,k.cx)("gf-form-spacing",Q.rowSpacing)},a.createElement(ie.Ph,{className:"width-12",options:Va,value:U?.operation,placeholder:"Ignored",onChange:le,isClearable:!0}))),U?.operation===Za.x.aggregate&&a.createElement("div",{className:(0,k.cx)("gf-form","gf-form--grow",Q.calculations)},a.createElement(Me.m,{className:(0,k.cx)("flex-grow-1",Q.rowSpacing),placeholder:"Select Stats",allowMultiple:!0,stats:U.aggregations,onChange:Ce=>{z({...U,aggregations:Ce})}})))},fs=(0,ce.B)(()=>{const B=k.css`
    display: table-cell;
  `;return{row:k.css`
      display: table-row;
    `,cell:B,rowSpacing:k.css`
      margin-bottom: 4px;
    `,fieldName:k.css`
      ${B}
      min-width: 250px;
      white-space: nowrap;
    `,calculations:k.css`
      ${B}
      width: 99%;
    `}}),ls={id:q.W.groupBy,editor:qa,transformation:ge.Y.groupByTransformer,name:ge.Y.groupByTransformer.name,description:ge.Y.groupByTransformer.description};var cs=e(16217);const gs=({input:B,options:U,onChange:z})=>{const Q=ca(B).map(pt=>({label:pt,value:pt})),le=(0,a.useCallback)(pt=>{z({...U,columnField:pt?.value})},[z,U]),Ce=(0,a.useCallback)(pt=>{z({...U,rowField:pt?.value})},[z,U]),Ie=(0,a.useCallback)(pt=>{z({...U,valueField:pt?.value})},[z,U]),Je=[{label:"Null",value:cs.U.Null,description:"Null value"},{label:"True",value:cs.U.True,description:"Boolean true value"},{label:"False",value:cs.U.False,description:"Boolean false value"},{label:"Empty",value:cs.U.Empty,description:"Empty string"}],it=(0,a.useCallback)(pt=>{z({...U,emptyValue:pt?.value})},[z,U]);return a.createElement(a.Fragment,null,a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Column",labelWidth:8},a.createElement(ie.Ph,{options:Q,value:U.columnField,onChange:le,isClearable:!0})),a.createElement(Oe._,{label:"Row",labelWidth:8},a.createElement(ie.Ph,{options:Q,value:U.rowField,onChange:Ce,isClearable:!0})),a.createElement(Oe._,{label:"Cell Value",labelWidth:10},a.createElement(ie.Ph,{options:Q,value:U.valueField,onChange:Ie,isClearable:!0})),a.createElement(Oe._,{label:"Empty Value"},a.createElement(ie.Ph,{options:Je,value:U.emptyValue,onChange:it,isClearable:!0}))))},ya={id:q.W.groupingToMatrix,editor:gs,transformation:ge.Y.groupingToMatrixTransformer,name:"Grouping to matrix",description:"Takes a three fields combination and produces a Matrix"};var za=e(15128),Pa=e(44727),Jn=e(45458);const ps=({input:B,options:U,onChange:z})=>{const le=(0,a.useCallback)(Je=>{z({...U,bucketSize:Je})},[z,U]),Ce=(0,a.useCallback)(Je=>{z({...U,bucketOffset:Je})},[z,U]),Ie=(0,a.useCallback)(()=>{z({...U,combine:!U.combine})},[z,U]);return a.createElement("div",null,a.createElement(ye.Z,null,a.createElement(Oe._,{labelWidth:18,label:za.py.bucketSize.name,tooltip:za.py.bucketSize.description},a.createElement(Jn.Y,{value:U.bucketSize,placeholder:"auto",onChange:le,min:0}))),a.createElement(ye.Z,null,a.createElement(Oe._,{labelWidth:18,label:za.py.bucketOffset.name,tooltip:za.py.bucketOffset.description},a.createElement(Jn.Y,{value:U.bucketOffset,placeholder:"none",onChange:Ce,min:0}))),a.createElement(ye.Z,null,a.createElement(Oe._,{labelWidth:18,label:za.py.combine.name,tooltip:za.py.combine.description},a.createElement(Pa.x,{value:U.combine??!1,onChange:Ie}))))},Ha={id:q.W.histogram,editor:ps,transformation:ge.Y.histogramTransformer,name:ge.Y.histogramTransformer.name,description:ge.Y.histogramTransformer.description};var fa=e(75176),Bs=e(94338);const Ca=[{value:fa.c.outer,label:"OUTER",description:"Keep all rows from any table with a value"},{value:fa.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables"}];function Sa({input:B,options:U,onChange:z}){(0,a.useEffect)(()=>{U.fields&&!Object.keys(U.fields).length&&B.length&&B[0].refId&&(U.fields[B[0].refId]=B[0].fields[0].name,z({...U}))},[z,U,B]);const Q=(0,a.useCallback)(Ie=>{if(Ie.refId){if(U.fields)if(Ie.refId in U.fields){if(Object.keys(U.fields).length===1)return;delete U.fields[Ie.refId]}else U.fields[Ie.refId]=Ie.fields[0].name;z({...U})}},[z,U]),le=(0,a.useCallback)((Ie,Je)=>{Ie&&Je.value&&z({...U,fields:{...U.fields,[Ie]:Je.value}})},[z,U]),Ce=(0,a.useCallback)(Ie=>{z({...U,mode:Ie?.value||fa.c.outer})},[z,U]);return a.createElement(a.Fragment,null,a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Mode",labelWidth:8,grow:!0},a.createElement(ie.Ph,{options:Ca,value:U.mode,onChange:Ce}))),B.map(Ie=>a.createElement("div",{className:"gf-form-inline",key:Ie.refId},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},Ie.refId," (",Ie.name,")"),a.createElement(ha.Lh,null,a.createElement(Bs.X,{value:!!Ie.refId&&U.fields&&Ie.refId in U.fields,onChange:()=>Q(Ie)}),a.createElement(ie.Ph,{options:Ie.fields.map(Je=>({label:Je.name,value:Je.name})),value:Ie.refId?(U.fields||{})[Ie.refId]:Ie.fields[0].name,onChange:Je=>le(Ie.refId,Je)}))))))}const is={id:q.W.joinByField,aliasIds:[q.W.seriesToColumns],editor:Sa,transformation:ge.Y.joinByFieldTransformer,name:ge.Y.joinByFieldTransformer.name,description:ge.Y.joinByFieldTransformer.description};var An=e(1052),ds=e(26418);const ws=[{value:An.k.Columns,label:"Columns"},{value:An.k.Rows,label:"Rows"}],ks=({input:B,options:U,onChange:z})=>{const{labelNames:le,selected:Ce}=(0,a.useMemo)(()=>{let it=[],pt={};for(const Mt of B)for(const Nt of Mt.fields)if(Nt.labels)for(const Kt of Object.keys(Nt.labels))pt[Kt]||(it.push({value:Kt,label:Kt}),pt[Kt]=!0);const vt=new Set(U.keepLabels?.length?U.keepLabels:Object.keys(pt));return{labelNames:it,selected:vt}},[U.keepLabels,B]),Ie=it=>{z({...U,valueLabel:it?.value})},Je=it=>{if(Ce.has(it)?Ce.delete(it):Ce.add(it),Ce.size===le.length||!Ce.size){const{keepLabels:pt,...vt}=U;z(vt)}else z({...U,keepLabels:[...Ce]})};return a.createElement("div",null,a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Mode",labelWidth:20},a.createElement(fe.S,{options:ws,value:U.mode??An.k.Columns,onChange:it=>z({...U,mode:it})}))),a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Labels",labelWidth:20},a.createElement(ds.Stack,{gap:1,wrap:!0},le.map((it,pt)=>{const vt=it.label;return a.createElement(ia.B,{key:`${vt}/${pt}`,onClick:()=>Je(vt),label:vt,selected:Ce.has(vt)})})))),U.mode!==An.k.Rows&&a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},a.createElement(ie.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:le,value:U?.valueLabel,onChange:Ie,className:"min-width-16"}))))},Ns={id:q.W.labelsToFields,editor:ks,transformation:ge.Y.labelsToFieldsTransformer,name:"Labels to fields",description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column`},rr=({options:B,onChange:U})=>{const z=(0,a.useCallback)(Q=>{U({...B,limitField:Number(Q.currentTarget.value)})},[U,B]);return a.createElement(a.Fragment,null,a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Limit",labelWidth:8},a.createElement(Ee.I,{placeholder:"Limit count",pattern:"[0-9]*",value:B.limitField,onChange:z,width:25}))))},or={id:q.W.limit,editor:rr,transformation:ge.Y.limitTransformer,name:"Limit",description:"Limit the number of items displayed."};var Gs=e(69556);const Wt=({input:B,options:U,onChange:z})=>B.length<=1?a.createElement(Gs.S,null,"Merge has no effect when applied on a single frame."):null,Zs={id:q.W.merge,editor:Wt,transformation:ge.Y.mergeTransformer,name:"Merge",description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`};var Js=e(19677),Xs=e(7582),sa=e(81697),es=e(20017);const ts=B=>{const{options:U,input:z,onChange:Q}=B,{indexByName:le,excludeByName:Ce,renameByName:Ie}=U,Je=ca(z),it=(0,a.useMemo)(()=>xa(Je,le),[Je,le]),pt=(0,a.useCallback)((Nt,Kt)=>{Q({...U,excludeByName:{...Ce,[Nt]:Kt}})},[Q,U,Ce]),vt=(0,a.useCallback)(Nt=>{if(!Nt||!Nt.destination)return;const Kt=Nt.source.index,Gt=Nt.destination.index;Kt!==Gt&&Q({...U,indexByName:Ws(Je,Kt,Gt)})},[Q,U,Je]),Mt=(0,a.useCallback)((Nt,Kt)=>{Q({...U,renameByName:{...U.renameByName,[Nt]:Kt}})},[Q,U]);return z.length>1?a.createElement(Gs.S,null,"Organize fields only works with a single frame. Consider applying a join transformation first."):a.createElement(Js.Z5,{onDragEnd:vt},a.createElement(Js.bK,{droppableId:"sortable-fields-transformer",direction:"vertical"},Nt=>a.createElement("div",{ref:Nt.innerRef,...Nt.droppableProps},it.map((Kt,Gt)=>a.createElement(ns,{fieldName:Kt,renamedFieldName:Ie[Kt],index:Gt,onToggleVisibility:pt,onRenameField:Mt,visible:!Ce[Kt],key:Kt})),Nt.placeholder)))};ts.displayName="OrganizeFieldsTransformerEditor";const ns=({fieldName:B,renamedFieldName:U,index:z,visible:Q,onToggleVisibility:le,onRenameField:Ce})=>{const Ie=(0,he.wW)(qn);return a.createElement(Js._l,{draggableId:B,index:z},Je=>a.createElement("div",{className:"gf-form-inline",ref:Je.innerRef,...Je.draggableProps},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},a.createElement(sa.J,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:Ie.draggable,...Je.dragHandleProps}),a.createElement(es.h,{className:Ie.toggle,size:"md",name:Q?"eye":"eye-slash",onClick:()=>le(B,Q)}),a.createElement("span",{className:Ie.name,title:B},B)),a.createElement(Ee.I,{className:"flex-grow-1",defaultValue:U||"",placeholder:`Rename ${B}`,onBlur:it=>Ce(B,it.currentTarget.value)}))))};ns.displayName="DraggableFieldName";const qn=B=>({toggle:k.css`
    margin: 0 8px;
    color: ${B.colors.text.secondary};
  `,draggable:k.css`
    opacity: 0.4;
    &:hover {
      color: ${B.colors.text.maxContrast};
    }
  `,name:k.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${B.typography.bodySmall.fontSize};
    font-weight: ${B.typography.fontWeightMedium};
  `}),Ws=(B,U,z)=>{const Q=Array.from(B),[le]=Q.splice(U,1);return Q.splice(z,0,le),Q.reduce((Ce,Ie,Je)=>(Ce[Ie]=Je,Ce),{})},xa=(B,U={})=>{if(!U||Object.keys(U).length===0)return B;const z=(0,Xs.$)(U);return B.sort(z)},ka={id:q.W.organize,editor:ts,transformation:ge.Y.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data."};var zn=e(4157),Tt=e(68183);const Is=({options:B,onChange:U})=>{const z=[{label:"Series to rows",value:zn.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:zn.AL.ReduceFields,description:"Collapse each field into a single value"}],Q=(0,a.useCallback)(Ie=>{const Je=Ie.value;U({...B,mode:Je,includeTimeField:Je===zn.AL.ReduceFields?!!B.includeTimeField:!1})},[U,B]),le=(0,a.useCallback)(()=>{U({...B,includeTimeField:!B.includeTimeField})},[U,B]),Ce=(0,a.useCallback)(()=>{U({...B,labelsToFields:!B.labelsToFields})},[U,B]);return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8","aria-label":Tt.wl.components.Transforms.Reduce.modeLabel},"Mode"),a.createElement(ie.Ph,{options:z,value:z.find(Ie=>Ie.value===B.mode)||z[0],onChange:Q,className:"flex-grow-1"}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8","aria-label":Tt.wl.components.Transforms.Reduce.calculationsLabel},"Calculations"),a.createElement(Me.m,{className:"flex-grow-1",placeholder:"Choose Stat",allowMultiple:!0,stats:B.reducers||[],onChange:Ie=>{U({...B,reducers:Ie})}}))),B.mode===zn.AL.ReduceFields&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Rt.LegacyForms.Switch,{label:"Include time",labelClass:"width-8",checked:!!B.includeTimeField,onChange:le}))),B.mode!==zn.AL.ReduceFields&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Rt.LegacyForms.Switch,{label:"Labels to fields",labelClass:"width-8",checked:!!B.labelsToFields,onChange:Ce}))))},_s={id:q.W.reduce,editor:Is,transformation:ge.Y.reduceTransformer,name:ge.Y.reduceTransformer.name,description:ge.Y.reduceTransformer.description};class qs extends a.PureComponent{constructor(U){super(U),this.handleRegexChange=z=>{const Q=z.currentTarget.value;let le=!0;if(Q)try{Q&&(0,Vn.jO)(Q)}catch{le=!1}this.setState(Ce=>({...Ce,regex:Q,isRegexValid:le}))},this.handleRenameChange=z=>{const Q=z.currentTarget.value;this.setState(le=>({...le,renamePattern:Q}))},this.handleRegexBlur=z=>{const Q=z.currentTarget.value;let le=!0;try{Q&&(0,Vn.jO)(Q)}catch{le=!1}this.setState({isRegexValid:le},()=>{le&&this.props.onChange({...this.props.options,regex:Q})})},this.handleRenameBlur=z=>{const Q=z.currentTarget.value;this.setState({renamePattern:Q},()=>this.props.onChange({...this.props.options,renamePattern:Q}))},this.state={regex:U.options.regex,renamePattern:U.options.renamePattern,isRegexValid:!0}}render(){const{regex:U,renamePattern:z,isRegexValid:Q}=this.state;return a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Match"),a.createElement(_n.g,{invalid:!Q,error:Q?void 0:"Invalid pattern",className:k.css`
                margin-bottom: 0;
              `},a.createElement(Ee.I,{placeholder:"Regular expression pattern",value:U||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Replace"),a.createElement(_n.g,{className:k.css`
                margin-bottom: 0;
              `},a.createElement(Ee.I,{placeholder:"Replacement pattern",value:z||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))))}}const Ys={id:q.W.renameByRegex,editor:qs,transformation:ge.Y.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders."},Ms=({input:B,options:U,onChange:z})=>null,ir={id:q.W.seriesToRows,editor:Ms,transformation:ge.Y.seriesToRowsTransformer,name:"Series to rows",description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`},Pr=({input:B,options:U,onChange:z})=>{const Q=ca(B).map(Ie=>({label:Ie,value:Ie})),le=(0,a.useCallback)((Ie,Je)=>{z({...U,sort:[Je]})},[z,U]),Ce=U.sort?.length?U.sort:[{}];return a.createElement("div",null,Ce.map((Ie,Je)=>a.createElement(ye.Z,{key:`${Ie.field}/${Je}`},a.createElement(Oe._,{label:"Field",labelWidth:10,grow:!0},a.createElement(ie.Ph,{options:Q,value:Ie.field,placeholder:"Select field",onChange:it=>{le(Je,{...Ie,field:it.value})}})),a.createElement(Oe._,{label:"Reverse"},a.createElement(Pa.x,{value:!!Ie.desc,onChange:()=>{le(Je,{...Ie,desc:!Ie.desc})}})))))},er={id:q.W.sortBy,editor:Pr,transformation:ge.Y.sortByTransformer,name:ge.Y.sortByTransformer.name,description:ge.Y.sortByTransformer.description};function Z({options:B,onChange:U}){const[z,Q]=(0,a.useState)(B),le=ae(),Ce=Pe(),Ie=()=>{z.push({path:""}),Q([...z]),pt()},Je=vt=>{z&&(z.splice(vt,1),Q([...z]),pt())},it=(vt,Mt,Nt)=>{z&&(Nt==="alias"?z[Mt].alias=vt.currentTarget.value??"":z[Mt].path=vt.currentTarget.value??"",Q([...z]))},pt=()=>{U(z)};return a.createElement("ol",{className:(0,k.cx)(Ce.list)},z&&z.map((vt,Mt)=>a.createElement("li",{key:Mt},a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Field",tooltip:le.field,grow:!0},a.createElement(Ee.I,{onBlur:pt,onChange:Nt=>it(Nt,Mt,"path"),value:vt.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),a.createElement(Oe._,{label:"Alias",tooltip:le.alias},a.createElement(Ee.I,{width:12,value:vt.alias,onBlur:pt,onChange:Nt=>it(Nt,Mt,"alias")})),a.createElement(Oe._,{className:(0,k.cx)(Ce.removeIcon)},a.createElement(es.h,{onClick:()=>Je(Mt),name:"trash-alt"}))))),a.createElement(Oe._,null,a.createElement(me.zx,{icon:"plus",onClick:()=>Ie(),variant:"secondary"},"Add path")))}const ae=()=>{const B=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:a.createElement("div",null,"A valid path of an json object.",a.createElement("div",null,a.createElement("strong",null,"JSON Value:")),a.createElement("pre",null,a.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),a.createElement("strong",null,"Valid Paths:"),B.map((U,z)=>a.createElement("p",{key:z},a.createElement("code",null,U.path),a.createElement("i",null,U.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function Pe(){return{list:k.css`
      margin-left: 20px;
    `,removeIcon:k.css`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var Ue=e(16911),et=e(25532),ot=(B=>(B.JSON="json",B.KeyValues="kvp",B.Auto="auto",B))(ot||{});const ft={id:ot.JSON,name:"JSON",description:"Parse JSON string",parse:B=>JSON.parse(B)};function xt(B){const U=[];let z="",Q="";const le={};for(let Ce=0;Ce<B.length;Ce++){let Ie=B[Ce];Ie===z&&(z="",Ie=B[++Ce]);const Je=Ie==="\\";if(Je&&(Ie=B[++Ce]),Je||z.length){U.push(Ie);continue}switch((Ie==='"'||Ie==="'")&&(z=Ie),Ie){case":":case"=":U.length&&(Q&&(le[Q]=""),Q=U.join(""),U.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:U.length&&Q===""&&(le[U.join("")]="",U.length=0);case",":case";":case"&":case"{":case"}":if(U.length){const it=U.join("");Q.length?(le[Q]=it,Q=""):Q=it,U.length=0}break;default:U.push(Ie),Ce===B.length-1&&Q===""&&U.length&&(le[U.join("")]="",U.length=0)}}return Q.length&&(le[Q]=U.join("")),le}const St={id:ot.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:xt},Bt=[ft,St],Ht={id:ot.Auto,name:"Auto",description:"parse new fields automatically",parse:B=>{for(const U of Bt)try{const z=U.parse(B);if(z!=null)return z}catch{}}},qt=new re.B(()=>[...Bt,Ht]),nn={id:q.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(B,U)=>z=>z.pipe((0,Sn.U)(Q=>nn.transformer(B,U)(Q))),transformer:B=>U=>U.map(z=>Mn(z,B))};function Mn(B,U){if(!U.source)return B;const z=(0,et.findField)(B,U.source);if(!z)return B;const Q=qt.getIfExists(U.format??ot.Auto);if(!Q)throw new Error("unkonwn extractor");const le=B.length,Ce=[],Ie=new Map;for(let it=0;it<le;it++){let pt=z.values.get(it);if((0,y.isString)(pt))try{pt=Q.parse(pt)}catch{pt={}}if(U.format===ot.JSON&&U.jsonPaths&&U.jsonPaths?.length>0){const vt={},Mt=U.jsonPaths.filter(Nt=>Nt.path);Mt.length>0&&(Mt.forEach(Nt=>{const Kt=Nt.alias&&Nt.alias.length>0?Nt.alias:Nt.path;vt[Kt]=(0,y.get)(pt,Nt.path)??"Not Found"}),pt=vt)}for(const[vt,Mt]of Object.entries(pt)){let Nt=Ie.get(vt);Nt==null&&(Nt=new Array(le),Ie.set(vt,Nt),Ce.push(vt)),Nt[it]=Mt}}const Je=Ce.map(it=>{const pt=Ie.get(it);return{name:it,values:new wn.G(pt),type:pt?(0,Ue.DP)(pt.find(vt=>vt!=null)):H.fS.other,config:{}}});if(U.keepTime){const it=(0,et.findField)(B,"Time")||(0,et.findField)(B,"time");it&&Je.unshift(it)}return U.replace||Je.unshift(...B.fields),{...B,fields:Je}}const Rn={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},Pn=({input:B,options:U,onChange:z})=>{const Q=pt=>{z({...U,source:pt})},le=pt=>{z({...U,format:pt?.value})},Ce=pt=>{z({...U,jsonPaths:pt})},Ie=()=>{U.replace&&(U.keepTime=!1),z({...U,replace:!U.replace})},Je=()=>{z({...U,keepTime:!U.keepTime})},it=qt.selectOptions(U.format?[U.format]:void 0);return a.createElement("div",null,a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Source",labelWidth:16},a.createElement(Xt.b,{context:{data:B},value:U.source??"",onChange:Q,item:Rn}))),a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Format",labelWidth:16},a.createElement(ie.Ph,{value:it.current[0],options:it.options,onChange:le,width:24,placeholder:"Auto"}))),U.format==="json"&&a.createElement(Z,{options:U.jsonPaths??[],onChange:Ce}),a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Replace all fields",labelWidth:16},a.createElement(Pa.x,{value:U.replace??!1,onChange:Ie}))),U.replace&&a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Keep time",labelWidth:16},a.createElement(Pa.x,{value:U.keepTime??!1,onChange:Je}))))},jn={id:q.W.extractFields,editor:Pn,transformation:nn,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc)"};var On=e(2323),Fn=e(4955);const hs={id:q.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels",defaultOptions:{},operator:(B,U)=>z=>z.pipe((0,Sn.U)(Q=>hs.transformer(B,U)(Q))),transformer:B=>U=>!U||!U.length?U:[Ra(B,U)]};function Ra(B,U){if(!B.value?.length)return as("No value labele configured");const z=Ja(U);if(z.size<1)return as("No labels in result");if(!z.has(B.value))return as("Value label not found");let Q=B.join?.length?B.join:Array.from(z);Q=Q.filter(Mt=>Mt!==B.value);const le=new Set,Ce=new Map,Ie={};for(const Mt of U)for(const Nt of Mt.fields)if(Nt.labels&&Nt.type!==H.fS.time){const Kt=Q.map(Ta=>Nt.labels[Ta]),Gt=Kt.join(",");let en=Ce.get(Gt);en||(en={keys:Kt,values:{}},Ce.set(Gt,en));const pn=Nt.labels[B.value],un=Nt.values.toArray(),Gn=en.values[pn];Gn?en.values[pn]=Gn.concat(un):en.values[pn]=un,Ie[pn]||(Ie[pn]=Nt),le.add(pn)}const Je=Array.from(le),it=Q.map(()=>[]),pt=Je.map(()=>[]);for(const Mt of Ce.values()){let Nt=-1,Kt=!1;for(;!Kt;){Nt++,Kt=!0;for(let Gt=0;Gt<Q.length;Gt++)it[Gt].push(Mt.keys[Gt]);for(let Gt=0;Gt<Je.length;Gt++){const en=Je[Gt],pn=Mt.values[en]??[];pt[Gt].push(pn[Nt]),pn.length>Nt+1&&(Kt=!1)}}}const vt={fields:[],length:pt[0].length};for(let Mt=0;Mt<Q.length;Mt++)vt.fields.push({name:Q[Mt],config:{},type:H.fS.string,values:new wn.G(it[Mt])});for(let Mt=0;Mt<Je.length;Mt++){const Nt=Ie[Je[Mt]];vt.fields.push({name:Je[Mt],config:{},type:Nt.type??H.fS.number,values:new wn.G(pt[Mt])})}return vt}function as(B){return{meta:{notices:[{severity:"error",text:B}]},fields:[{name:"Error",type:H.fS.string,config:{},values:new wn.G([B])}],length:0}}function Ps({input:B,options:U,onChange:z}){const Q=(0,a.useMemo)(()=>{let it;const pt=Ja(B),vt=Array.from(pt).map(pn=>({label:pn,value:pn}));let Mt=vt.find(pn=>pn.value===U.value);!Mt&&U.value&&(Mt={label:`${U.value} (not found)`,value:U.value},vt.push(Mt)),B.length?pt.size===0&&(it=a.createElement(On.b,{title:"No labels found"},"The input does not contain any labels")):it=a.createElement(On.b,{title:"No input found"},"No input (or labels) found"),pt.delete(U.value);const Nt=Array.from(pt).map(pn=>({label:pn,value:pn}));let Kt=Nt;const Gt=Boolean(U.join?.length);let en="Join";return Gt?Kt=Nt.filter(pn=>!U.join.includes(pn.value)):en=Nt.map(pn=>pn.value).join(", "),{warn:it,valueOptions:vt,valueOption:Mt,joinOptions:Nt,addOptions:Kt,addText:en,hasJoin:Gt,key:Date.now()}},[U,B]),le=(it,pt)=>{if(!U.join)return;const vt=U.join.slice();if(pt)vt[it]=pt;else if(vt.splice(it,1),!vt.length){z({...U,join:void 0});return}const Mt=new Set(vt);U.value&&Mt.delete(U.value),z({...U,join:Array.from(Mt)})},Ce=it=>{const pt=it?.value;if(!pt)return;const vt=U.join?U.join.slice():[];vt.push(pt),z({...U,join:vt})},Ie=10,Je="No labels found";return a.createElement("div",null,Q.warn,a.createElement(ye.Z,null,a.createElement(Oe._,{error:"required",invalid:!Boolean(U.value?.length),label:"Value",labelWidth:Ie,tooltip:"Select the label indicating the values name"},a.createElement(ie.Ph,{options:Q.valueOptions,value:Q.valueOption,onChange:it=>z({...U,value:it.value}),noOptionsMessage:Je}))),Q.hasJoin?U.join.map((it,pt)=>a.createElement(ye.Z,{key:it+pt},a.createElement(Oe._,{label:"Join",labelWidth:Ie,error:"Unable to join by the value label",invalid:it===U.value},a.createElement(ha.Lh,null,a.createElement(ie.Ph,{options:Q.joinOptions,value:Q.joinOptions.find(vt=>vt.value===it),isClearable:!0,onChange:vt=>le(pt,vt?.value),noOptionsMessage:Je}),Boolean(Q.addOptions.length&&pt===U.join.length-1)&&a.createElement(Fn.b,{icon:"plus",label:"",options:Q.addOptions,onChange:Ce,variant:"secondary"}))))):a.createElement(a.Fragment,null,Boolean(Q.addOptions.length)&&a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Join",labelWidth:Ie},a.createElement(ie.Ph,{options:Q.addOptions,placeholder:Q.addText,onChange:Ce,noOptionsMessage:Je})))))}const Cr={id:hs.id,editor:Ps,transformation:hs,name:hs.name,description:hs.description,state:nt.BV.beta};var ss=e(74311),Cs=e(98356),xs=e(85526),Rs=e(73063);const tr={id:q.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:B=>U=>U.pipe((0,Cs.z)(z=>(0,xs.D)(Wa(z,B))))};async function Wa(B,U){const z=Y.Ls.get(ee.mi.byName).get(U?.lookupField),Q=await(0,Rs.so)(U?.gazetteer??Rs.LI);return Q.frame?Jr(B,Q,z):Promise.reject("missing frame in gazetteer")}function Jr(B,U,z){const Q=U.frame()?.fields;return Q?B.map(le=>{const Ce=le.length,Ie=[];for(const Je of le.fields)if(Ie.push(Je),z(Je,le,B)){const it=Je.values.toArray(),pt=[];for(const vt of Q){const Mt=new Array(Ce);pt.push(Mt),Ie.push({...vt,values:new wn.G(Mt)})}for(let vt=0;vt<pt.length;vt++){const Mt=U.find(it[vt]);if(Mt?.index!=null)for(let Nt=0;Nt<Q.length;Nt++)pt[Nt][vt]=Q[Nt].values.get(Mt.index)}}return{...le,fields:Ie}}):B}const la={settings:{width:30,filter:B=>B.type===H.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},us={settings:{}},io=({input:B,options:U,onChange:z})=>{const Q=(0,a.useCallback)(Ce=>{z({...U,lookupField:Ce})},[z,U]),le=(0,a.useCallback)(Ce=>{z({...U,gazetteer:Ce})},[z,U]);return a.createElement("div",null,a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Field",labelWidth:12},a.createElement(Xt.b,{context:{data:B},value:U?.lookupField??"",onChange:Q,item:la}))),a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Lookup",labelWidth:12},a.createElement(ss.Q,{value:U?.gazetteer??"",context:{data:B},item:us,onChange:le}))))},Bo={id:q.W.fieldLookup,editor:io,transformation:tr,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source.  This currently supports spatial data, but will eventually support more formats",state:nt.BV.alpha};var lo=e(74067),Zc=e(84931),Jc=e(21398);const rl=(B,U,z=[])=>(U===0?z.push(B):B.forEach(Q=>{rl(Q,U-1,z)}),z);function Xc(B){const U=B[0].length,z=B.length,Q=new Map;for(let le=0;le<U;le++){let Ce=Q;for(let Ie=0;Ie<z;Ie++){let Je=B[Ie][le],it=Ce.get(Je);it==null&&(it=Ie===z-1?[]:new Map,Ce.set(Je,it)),Ce=it}Ce.push(le)}return rl(Q,z)}const _c={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function nf(B,U,z){return U.map((Q,le)=>B.withNames?`${Q}${B.separator1}${z[le]}`:z[le]).join(B.separator2)}function Sr(B,U){const z={};return B.forEach((Q,le)=>{z[Q]=String(U[le])}),z}const co={id:q.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:(B,U)=>z=>z.pipe((0,Sn.U)(Q=>co.transformer(B,U)(Q))),transformer:(B,U)=>{const z=(0,Zc.f)({names:B.fields});if(!z)return Jc.d.transformer({},U);const Q=(0,Y.sq)(z);return le=>{if(!le.length)return le;const Ce=le[0],Ie=Ce.fields.filter(vt=>Q(vt,Ce,le)),Je=Ie.map(vt=>vt.values.toArray()),it=Ie.map(vt=>vt.name),pt={..._c,...B.naming};return Xc(Je).map(vt=>{let Mt=Ce.name,Nt={};if(pt.asLabels)Nt=Sr(it,Ie.map((Gt,en)=>Je[en][vt[0]]));else{let Gt=nf(pt,it,Ie.map((en,pn)=>Je[pn][vt[0]]));B.naming?.append&&Ce.name&&(Gt=`${Ce.name} ${Gt}`),Mt=Gt}let Kt=Ce.fields;if(!B.keepFields){const Gt=new Set(it);Kt=Ce.fields.filter(en=>!Gt.has(en.name))}return{...Ce,name:Mt,length:vt.length,fields:Kt.map(Gt=>{const en=Gt.values.toArray(),pn=Array(vt.length);for(let un=0;un<vt.length;un++)pn[un]=en[vt[un]];return{...Gt,labels:{...Gt.labels,...Nt},state:void 0,values:new wn.G(pn)}})}})}}};function qc({input:B,options:U,onChange:z}){const Q=(0,lo.IX)(B),le=(0,lo.nw)(Q),Ce=(0,a.useMemo)(()=>{const pt=new Set(U.fields);return pt.size<1?le:le.filter(vt=>!pt.has(vt.value))},[le,U]),Ie=(0,a.useCallback)(pt=>{if(!pt.value)return;const vt=new Set(U.fields);vt.add(pt.value),z({...U,fields:[...vt]})},[z,U]),Je=(0,a.useCallback)(pt=>{if(!pt)return;const vt=new Set(U.fields);vt.delete(pt),z({...U,fields:[...vt]})},[z,U]);if(B.length>1)return a.createElement(Gs.S,null,"Partition by values only works with a single frame.");const it=[...new Set(U.fields)];return a.createElement("div",null,a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Field",labelWidth:10,grow:!0},a.createElement(ha.Lh,null,it.map(pt=>a.createElement(me.zx,{key:pt,icon:"times",variant:"secondary",size:"md",onClick:()=>Je(pt)},pt)),Ce.length&&a.createElement(Fn.b,{variant:"secondary",size:"md",options:Ce,onChange:Ie,label:"Select field",icon:"plus"})))))}const ed={id:q.W.partitionByValues,editor:qc,transformation:co,name:co.name,description:co.description,state:nt.BV.alpha};var Xr=e(88432),td=e(38685),ol=e(98234),$r=(B=>(B.TimeSeriesWide="wide",B.TimeSeriesMany="many",B.TimeSeriesLong="long",B.TimeSeriesMulti="multi",B))($r||{});function il(B){if(!Array.isArray(B)||B.length===0)return B;const U=[];for(const z of nd(B)){const Q=z.fields[0];if(!Q||Q.type!==H.fS.time)continue;const le=[],Ce=[];for(const Ie of z.fields)switch(Ie.type){case H.fS.number:case H.fS.boolean:le.push(Ie);break;case H.fS.string:Ce.push(Ie);break}for(const Ie of le)if(Ce.length){const Je=new Map;for(let it=0;it<z.length;it++){const pt=Q.values.get(it),vt=Ie.values.get(it);if(vt===void 0||pt==null)continue;const Mt=Ce.map(Kt=>Kt.values.get(it)).join("/");let Nt=Je.get(Mt);if(!Nt){Nt={key:Mt,time:[],value:[],labels:{}};for(const Kt of Ce)Nt.labels[Kt.name]=Kt.values.get(it);Je.set(Mt,Nt)}Nt.time.push(pt),Nt.value.push(vt)}for(const it of Je.values())U.push({name:z.name,refId:z.refId,meta:{...z.meta,type:Xr.P.TimeSeriesMulti},fields:[{...Q,values:new wn.G(it.time)},{...Ie,values:new wn.G(it.value),labels:it.labels}],length:it.time.length})}else U.push({name:z.name,refId:z.refId,meta:{...z.meta,type:Xr.P.TimeSeriesMulti},fields:[Q,Ie],length:z.length})}return U}function nd(B){if(!Array.isArray(B)||B.length===0)return B;const U=[];for(const z of B){let Q;const le=[],Ce={},Ie={},Je={},it={};for(let Gt=0;Gt<z.fields.length;Gt++){const en=z.fields[Gt];switch(en.type){case H.fS.string:case H.fS.boolean:en.name in it||(it[en.name]=Gt,Ie[en.name]=!0);break;case H.fS.time:if(!Q){Q=en;break}default:if(en.name in Ce){const Gn=Ce[en.name];if(en.type!==Gn)continue}else Ce[en.name]=en.type,le.push(en.name);const pn=JSON.stringify(en.labels),un=Je[pn];if(un!==void 0?un.push(Gt):Je[pn]=[Gt],en.labels!=null)for(const Gn in en.labels)Ie[Gn]=!0}}if(!Q)continue;const pt=[],vt=[],Mt=[],Nt=[];for(let Gt=0;Gt<z.length;Gt++)pt.push({time:Q.values.get(Gt),wideRowIndex:Gt});for(const Gt in Je)vt.push(Gt);for(const Gt in Ie)Mt.push(Gt);for(const Gt in it)Nt.push(Gt);pt.sort((Gt,en)=>Gt.time-en.time),vt.sort(),Mt.sort(),le.sort();const Kt=new td.v({...z,meta:{...z.meta,type:Xr.P.TimeSeriesLong},fields:[{name:Q.name,type:Q.type}]});for(const Gt of le)Kt.addField({name:Gt,type:Ce[Gt]});for(const Gt of Mt)Kt.addField({name:Gt,type:H.fS.string});for(const Gt of pt){const{time:en,wideRowIndex:pn}=Gt;for(const un of vt){const Gn={};for(const Fs of Nt)Gn[Fs]=z.fields[it[Fs]].values.get(pn);let Ta=0;for(const Fs of Je[un]){const sr=z.fields[Fs];if(Ta++===0&&sr.labels!=null)for(const br in sr.labels)Gn[br]=sr.labels[br];Gn[sr.name]=sr.values.get(pn)}Gn[Q.name]=en,Kt.add(Gn)}}U.push(Kt)}return U}const uo={id:q.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(B,U)=>z=>z.pipe((0,Sn.U)(Q=>uo.transformer(B,U)(Q))),transformer:B=>{const U=B?.format??"wide";return il}},Lr={label:"Wide time series",value:$r.TimeSeriesWide,description:"Creates a single frame joined by time",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is shared time field"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"Multiple value fields of any type"))},ad={label:"Multi-frame time series",value:$r.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:a.createElement("ul",null,a.createElement("li",null,"Multiple frames"),a.createElement("li",null,"Each frame has two fields: time, value"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"String values are represented as labels"),a.createElement("li",null,"All values are numeric"))},sd={label:"Long time series",value:$r.TimeSeriesLong,description:"Convert each frame to long format",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is time field"),a.createElement("li",null,"Time in ascending order, but may have duplictes"),a.createElement("li",null,"String values are represented as separate fields rather than as labels"),a.createElement("li",null,"Multiple value fields may exist"))},Kr=[Lr,ad,sd];function rd(B){const{options:U,onChange:z}=B,Q=(0,he.wW)(Oa),le=(0,a.useCallback)(Ce=>{z({...U,format:Ce.value})},[z,U]);return a.createElement(a.Fragment,null,a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Format",labelWidth:12},a.createElement(ie.Ph,{width:35,options:Kr,value:Kr.find(Ce=>Ce.value===$r.TimeSeriesMulti&&U.format===$r.TimeSeriesMany?!0:Ce.value===U.format)||Kr[0],onChange:le,className:"flex-grow-1"}))),a.createElement(ye.Z,null,a.createElement(Oe._,{label:"Info",labelWidth:12},a.createElement("div",{className:Q.info},(Kr.find(Ce=>Ce.value===U.format)||Kr[0]).info))))}const Oa=B=>({info:k.css`
    margin-left: 20px;
  `}),od={id:uo.id,editor:rd,transformation:uo,name:uo.name,description:uo.description,help:`
  ### Use cases

  This takes query results and transforms them into a predictable timeseries format.
  This transformer may be especially useful when using old panels that only expect the
  many-frame timeseries format.
  `},wo={id:q.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config",defaultOptions:{},operator:B=>U=>U.pipe((0,Sn.U)(z=>z.map(Q=>id(B,Q))))};function id(B,U){const z=Cn(U,B.mappings??[],!0),{nameField:Q,valueField:le}=z;if(!Q||!le)return U;const Ce=[];for(let Ie=0;Ie<Q.values.length;Ie++){const Je=Q.values.get(Ie),it=le.values.get(Ie),pt=Et(U,Ie,z),vt=ll(U,Ie,z),Mt={name:`${Je}`,type:le.type,values:new wn.G([it]),config:pt,labels:vt};Ce.push(Mt)}return{fields:Ce,length:1}}function ll(B,U,z){const Q={...z.nameField.labels};for(let le=0;le<B.fields.length;le++){const Ce=B.fields[le],Ie=(0,ue.C)(Ce,B),Je=z.index[Ie];if(Je.handler&&Je.handler.key!==Pt.Label)continue;const it=Ce.values.get(U);it!=null&&(Q[Ie]=it)}return Q}function oi({input:B,options:U,onChange:z}){return B.length===0?null:a.createElement("div",null,a.createElement(bn,{frame:B[0],mappings:U.mappings??[],onChange:Q=>z({...U,mappings:Q}),withNameAndValue:!0}))}const ld={id:wo.id,editor:oi,transformation:wo,name:wo.name,description:wo.description,state:nt.BV.beta,help:`
### Use cases 

This transforms rows into separate fields. This can be useful as fields can be styled and configured 
individually, something rows cannot. It can also use additional fields as sources for dynamic field 
configuration or map them to field labels. The additional labels can then be used to define better 
display names for the resulting fields.

Useful when visualization data in:
- Gauge
- Stat
- Pie chart

## Example

Input:

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

Output:

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max 
config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field 
configuration and if set like this will be used by the visualization instead of any options manually 
configured in the panel editor options pane.

`};var cl=e(40538),dl=e(71575),Es=e(96366),ul=e(50466),mo=e(43524),_r=e(14573);const fo={id:q.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results",defaultOptions:{},operator:B=>U=>U.pipe((0,Cs.z)(z=>(0,xs.D)(No(z,B))))};function ii(B){return B.action===Es.JJ.Modify&&B.modify?.op===Es.ac.LineBuilder}async function No(B,U){const z=await(0,mo.cJ)(U.source);if(ii(U)){const Q=await(0,mo.cJ)(U.modify?.target);return B.map(le=>{const Ce=(0,mo.g6)(le,z),Ie=(0,mo.g6)(le,Q);if(Ce.field&&Ie.field){const Je=[...le.fields],it=(0,ul.Fh)(Ce.field,Ie.field),pt=Je[0];return pt.type===H.fS.geo&&pt!==Ce.field&&pt!==Ie.field?Je[0]=(0,ul.EK)(pt,it):Je.unshift(it),{...le,fields:Je}}return le})}return B.map(Q=>{let le=(0,mo.g6)(Q,z);if(le.field){if(U.action===Es.JJ.Modify){switch(U.modify?.op){case Es.ac.AsLine:let Ie=le.field.name;return(!Ie||Ie==="Point")&&(Ie="Line"),{...Q,length:1,fields:[{...le.field,name:Ie,type:H.fS.geo,values:new wn.G([(0,_r.Lp)(le.field)])}]}}return Q}const Ce=le.derived?[le.field,...Q.fields]:Q.fields.slice(0);if(U.action===Es.JJ.Calculate&&(Ce.push((0,_r.N7)(le.field,U.calculate??{})),le.derived=!0),le.derived)return{...Q,fields:Ce}}return Q})}const qr=(B,U)=>{const z=U.options??{};B.addSelect({path:"action",name:"Action",description:"",defaultValue:Es.JJ.Prepare,settings:{options:[{value:Es.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:Es.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:Es.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),z.action===Es.JJ.Calculate?B.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:Es.Ii.Heading,settings:{options:[{value:Es.Ii.Heading,label:"Heading"},{value:Es.Ii.Area,label:"Area"},{value:Es.Ii.Distance,label:"Distance"}]}}):z.action===Es.JJ.Modify&&B.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:Es.ac.AsLine,settings:{options:[{value:Es.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:Es.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),ii(z)?(B.addNestedOptions({category:["Source"],path:"source",build:(Q,le)=>{const Ce=z.source??{};Ce.mode||(Ce.mode=cl.q1.Auto),(0,dl.C)("Point","",Q,Ce)}}),B.addNestedOptions({category:["Target"],path:"modify",build:(Q,le)=>{const Ce=z.modify?.target??{};Ce.mode||(Ce.mode=cl.q1.Auto),(0,dl.C)("Point","target.",Q,Ce)}})):(0,dl.C)("Location","source.",B,z.source)},cd=B=>{(0,a.useEffect)(()=>{if(!B.options.source?.mode){const Q=oe(qr);B.onChange({...Q,...B.options}),console.log("geometry useEffect",Q)}},[]);const U=Uo((0,he.l4)()),z=dt(B,qr);return a.createElement("div",null,a.createElement("div",null,z.items.map(Q=>Q.render())),a.createElement("div",null,z.categories.map(Q=>a.createElement("div",{key:Q.props.id,className:U.wrap},a.createElement("h5",null,Q.props.title),a.createElement("div",{className:U.item},Q.items.map(le=>le.render()))))))},Uo=B=>({wrap:k.css`
      margin-bottom: 20px;
    `,item:k.css`
      border-left: 4px solid ${B.colors.border.strong};
      padding-left: 10px;
    `}),li={id:q.W.spatial,editor:cd,transformation:fo,name:fo.name,description:fo.description,state:nt.BV.alpha},ml=()=>[_s,Fa,Ys,Ma,at,ka,is,ir,mn,Zt,Ns,ls,er,Zs,Ha,ld,hn,od,Yn,li,Bo,jn,Te,ya,or,Cr,ed],go=(window.__grafana_public_path__??"public/")+"lib/monaco/min/vs",dd=[[`${go}/language/kusto/bridge.min.js`],[`${go}/language/kusto/kusto.javascript.client.min.js`,`${go}/language/kusto/newtonsoft.json.min.js`,`${go}/language/kusto/Kusto.Language.Bridge.min.js`]];function ud(B){return new Promise((U,z)=>{let Q;typeof B=="string"?(Q=document.createElement("script"),Q.src=B):Q=B,Q.onload=()=>U(),Q.onerror=le=>z(le),document.body.appendChild(Q)})}const lr=()=>new Promise(B=>{window.__monacoKustoResolvePromise=B;const U=document.createElement("script");return U.innerHTML=`require(['vs/language/kusto/monaco.contribution'], function() {
      window.__monacoKustoResolvePromise();
    });`,document.body.appendChild(U)});async function md(){let B=Promise.resolve();for(const U of dd){await B;const z=U.filter(Q=>!document.querySelector(`script[src="${Q}"]`)).map(Q=>ud(Q));await Promise.all(z)}await lr()}function fd(){return[{id:"kusto",name:"kusto",init:md}]}var $s=e(55560),mr=e(36635),Ds=e(70356),Ga=e(93003),Vr=e(77274),fl=e(78758),eo=e(88561),ci=e(49483),gl=e(97635),pl=e(30506),gr=e(31953),Ks=e(79396);function hl(){return a.createElement(Ks.T,{navId:"not-found"},a.createElement(Ks.T.Contents,null,a.createElement("div",{className:"page-container page-body"},a.createElement("div",{className:"panel-container error-container"},a.createElement("div",{className:"error-column graph-box"},a.createElement("div",{className:"error-row"},a.createElement("div",{className:"error-column error-space-between graph-percentage"},a.createElement("p",null,"100%"),a.createElement("p",null,"80%"),a.createElement("p",null,"60%"),a.createElement("p",null,"40%"),a.createElement("p",null,"20%"),a.createElement("p",null,"0%")),a.createElement("div",{className:"error-column image-box"},a.createElement("img",{src:"public/img/graph404.svg",width:"100%",alt:"graph"}),a.createElement("div",{className:"error-row error-space-between"},a.createElement("p",{className:"graph-text"},"Then"),a.createElement("p",{className:"graph-text"},"Now"))))),a.createElement("div",{className:"error-column info-box"},a.createElement("div",{className:"error-row current-box"},a.createElement("p",{className:"current-text"},"current")),a.createElement("div",{className:"error-row",style:{flex:1}},a.createElement(sa.J,{name:"minus-circle",className:"error-minus"}),a.createElement("div",{className:"error-column error-space-between error-full-width"},a.createElement("div",{className:"error-row error-space-between"},a.createElement("p",null,"Chances you are on the page you are looking for."),a.createElement("p",{className:"left-margin"},"0%")),a.createElement("div",null,a.createElement("h3",null,"Sorry for the inconvenience"),a.createElement("p",null,"Please go back to your"," ",a.createElement("a",{href:Ga.v.appSubUrl,className:"error-link"},"home dashboard")," ","and try again."),a.createElement("p",null,"If the error persists, seek help on the"," ",a.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"error-link"},"community site"),".")))))))))}const zr=hl;var di=e(36578),gd=e(24901),vl=e(86824),pd=e(5080),ui=e(80472),El=e(66847);const hd=()=>{const B=!!b.ZP.oauth;return{saml:{bgColor:"#464646",enabled:b.ZP.samlEnabled,name:b.ZP.samlName||El.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:B&&Boolean(b.ZP.oauth.google),name:"Google",icon:"google"},azuread:{bgColor:"#2f2f2f",enabled:B&&Boolean(b.ZP.oauth.azuread),name:"Microsoft",icon:"microsoft"},github:{bgColor:"#464646",enabled:B&&Boolean(b.ZP.oauth.github),name:"GitHub",icon:"github"},gitlab:{bgColor:"#fc6d26",enabled:B&&Boolean(b.ZP.oauth.gitlab),name:"GitLab",icon:"gitlab"},grafanacom:{bgColor:"#262628",enabled:B&&Boolean(b.ZP.oauth.grafana_com),name:"Grafana.com",icon:"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:B&&Boolean(b.ZP.oauth.okta),name:b.ZP.oauth?.okta?.name||"Okta",icon:b.ZP.oauth?.okta?.icon??"okta"},oauth:{bgColor:"#262628",enabled:B&&Boolean(b.ZP.oauth.generic_oauth),name:b.ZP.oauth?.generic_oauth?.name||"OAuth",icon:b.ZP.oauth?.generic_oauth?.icon??"signin",hrefName:"generic_oauth"}}},yl=B=>({button:k.css`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:k.css`
      position: absolute;
      left: ${B.spacing(1)};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:k.css`
        color: ${B.colors.text};
        display: flex;
        margin-bottom: ${B.spacing(1)};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:k.css`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${B.colors.text};
      `}}),mi=()=>{const B=(0,he.wW)(yl);return a.createElement(a.Fragment,null,a.createElement("div",{className:B.divider.base},a.createElement("div",null,a.createElement("div",{className:B.divider.line})),a.createElement("div",null,a.createElement("span",null,!b.ZP.disableLoginForm&&a.createElement("span",null,"or"))),a.createElement("div",null,a.createElement("div",{className:B.divider.line}))),a.createElement("div",{className:"clearfix"}))};function vd(B,U,z){return(0,k.cx)(U.button,k.css`
      background-color: ${B.bgColor};
      color: ${z.colors.getContrastText(B.bgColor)};

      &:hover {
        background-color: ${z.colors.emphasize(B.bgColor,.15)};
        box-shadow: ${z.shadows.z1};
      }
    `)}const Ed=()=>{const B=(0,y.pickBy)(hd(),le=>le.enabled),U=Object.keys(B).length>0,z=(0,he.l4)(),Q=(0,he.wW)(yl);return U?a.createElement(ha.wc,null,a.createElement(mi,null),Object.entries(B).map(([le,Ce])=>a.createElement(me.Qj,{key:le,className:vd(Ce,Q,z),href:`login/${Ce.hrefName?Ce.hrefName:le}`,target:"_self",fullWidth:!0},a.createElement(sa.J,{className:Q.buttonIcon,name:Ce.icon}),"Sign in with ",Ce.name))):null},yd=()=>{const B=(0,b.iE)().verifyEmailEnabled?`${(0,b.iE)().appSubUrl}/verify`:`${(0,b.iE)().appSubUrl}/signup`,U=(0,k.css)({paddingTop:"16px"});return a.createElement(ha.wc,null,a.createElement("div",{className:U},"New to Grafana?"),a.createElement(me.Qj,{className:k.css`
          width: 100%;
          justify-content: center;
        `,href:B,variant:"secondary",fill:"outline"},"Sign up"))},Fo=k.css`
  padding: 0;
  margin-top: 4px;
`,Pd=()=>(document.title=di.c.AppTitle,a.createElement(ui.dd,null,a.createElement(vl.Z,null,({loginHint:B,passwordHint:U,disableLoginForm:z,disableUserSignUp:Q,login:le,isLoggingIn:Ce,changePassword:Ie,skipPasswordChange:Je,isChangingPassword:it})=>a.createElement(a.Fragment,null,!it&&a.createElement(ui.$s,null,!z&&a.createElement(pd.U,{onSubmit:le,loginHint:B,passwordHint:U,isLoggingIn:Ce},a.createElement(ha.Lh,{justify:"flex-end"},a.createElement(me.Qj,{className:Fo,fill:"text",href:`${b.ZP.appSubUrl}/user/password/send-reset-email`},"Forgot your password?"))),a.createElement(Ed,null),!Q&&a.createElement(yd,null)),it&&a.createElement(ui.$s,null,a.createElement(gd.G,{onSubmit:Ie,onSkip:()=>Je()}))))));var Ba=e(82002),Pl=e(14876),Ya=e(77582),on=e(81168),Cl=e(38849);const xl="dddd YYYY-MM-DD HH:mm zz",Cd="/admin/ldap";class xd extends a.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:U,user:z}=this.props,le=U&&U.nextSync?(0,Cl.dq)(U.nextSync,{format:xl}):"",Ce=`${Cd}?user=${z&&z.login}`,Ie=Ya.Vt.hasPermission(on.AccessControlAction.LDAPUsersRead),Je=Ya.Vt.hasPermission(on.AccessControlAction.LDAPUsersSync);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"External sync"),a.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),a.createElement("td",null,a.createElement("span",{className:"label label-tag"},"LDAP"))),a.createElement("tr",null,U.enabled?a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},le)):a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},"Not enabled")))))),a.createElement("div",{className:"gf-form-button-row"},Je&&a.createElement(me.zx,{variant:"secondary",onClick:this.onUserSync},"Sync user"),Ie&&a.createElement(me.Qj,{variant:"secondary",href:Ce},"Debug LDAP Mapping"))))}}var po=e(91252),Hr=e(6694),kr=e(48756),Dl=e(66226),fi=e(11630),bl=e(671),Wo=e(29930);function Dd({onSelected:B,className:U,inputId:z,autoFocus:Q,excludeOrgs:le}){(0,a.useEffect)(()=>{Q&&z&&document.getElementById(z)?.focus()},[Q,z]);const[Ce,Ie]=(0,bl.Z)(async()=>{const it=(await(0,Wo.i)().get("/api/orgs")).map(pt=>({value:{id:pt.id,name:pt.name},label:pt.name}));if(le){let pt=le.map(Mt=>Mt.orgId);return it.filter(Mt=>!pt.includes(Mt.value.id))}else return it});return a.createElement(ie.qb,{inputId:z,className:U,isLoading:Ce.loading,defaultOptions:!0,isSearchable:!1,loadOptions:Ie,onChange:B,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var gi=e(65135);class pi extends a.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=a.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:U,orgs:z,isExternalUser:Q,onOrgRoleChange:le,onOrgRemove:Ce,onOrgAdd:Ie}=this.props,{showAddOrgModal:Je}=this.state,it=k.css`
      margin-top: 0.8rem;
    `,pt=Ya.Vt.hasPermission(on.AccessControlAction.OrgUsersAdd)&&!Q;return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Organizations"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,z.map((vt,Mt)=>a.createElement(Md,{key:`${vt.orgId}-${Mt}`,isExternalUser:Q,user:U,org:vt,onOrgRoleChange:le,onOrgRemove:Ce}))))),a.createElement("div",{className:it},pt&&a.createElement(me.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),a.createElement(hi,{user:U,userOrgs:z,isOpen:Je,onOrgAdd:Ie,onDismiss:this.dismissOrgAddModal})))}}const Ml=(0,ce.B)(B=>({removeButton:k.css`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${B.v1.palette.blue95};
    `,label:k.css`
      font-weight: 500;
    `,disabledTooltip:k.css`
      display: flex;
    `,tooltipItem:k.css`
      margin-left: 5px;
    `,tooltipItemLink:k.css`
      color: ${B.v1.palette.blue95};
    `,rolePickerWrapper:k.css`
      display: flex;
    `,rolePicker:k.css`
      flex: auto;
      margin-right: ${B.spacing(1)};
    `}));class bd extends a.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:U}=this.props;this.props.onOrgRemove(U.orgId)},this.onChangeRoleClick=()=>{const{org:U}=this.props;this.setState({isChangingRole:!0,currentRole:U.role})},this.onOrgRoleChange=U=>{this.setState({currentRole:U})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=U=>{this.props.onOrgRoleChange(this.props.org.orgId,U)}}componentDidMount(){Ya.Vt.licensedAccessControlEnabled()&&Ya.Vt.hasPermission(on.AccessControlAction.ActionRolesList)&&(0,fi.ul)(this.props.org.orgId).then(U=>this.setState({roleOptions:U})).catch(U=>console.error(U))}render(){const{user:U,org:z,isExternalUser:Q,theme:le}=this.props,{currentRole:Ce,isChangingRole:Ie}=this.state,Je=Ml(le),it=(0,k.cx)("width-16",Je.label),pt=Ya.Vt.hasPermission(on.AccessControlAction.OrgUsersWrite),vt=Ya.Vt.hasPermission(on.AccessControlAction.OrgUsersRemove),Mt=Q||!pt,Nt=`${z.name}-input`;return a.createElement("tr",null,a.createElement("td",{className:it},a.createElement("label",{htmlFor:Nt},z.name)),Ya.Vt.licensedAccessControlEnabled()?a.createElement("td",null,a.createElement("div",{className:Je.rolePickerWrapper},a.createElement("div",{className:Je.rolePicker},a.createElement(Dl.R,{userId:U?.id||0,orgId:z.orgId,basicRole:z.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:Mt})),Q&&a.createElement(nr,null))):a.createElement(a.Fragment,null,Ie?a.createElement("td",null,a.createElement(gi.A,{inputId:Nt,value:Ce,onChange:this.onOrgRoleChange,autoFocus:!0})):a.createElement("td",{className:"width-25"},z.role),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},pt&&a.createElement(af,{isExternalUser:Q,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},vt&&a.createElement(po.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const Md=(0,he.HE)(bd),Sl=(0,ce.B)(()=>({modal:k.css`
    width: 500px;
  `,buttonRow:k.css`
    text-align: center;
  `,modalContent:k.css`
    overflow: visible;
  `}));class hi extends a.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:on.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=U=>{const z=this.props.userOrgs.find(Q=>Q.orgId===U.value?.id);this.setState({selectedOrg:U.value,role:z?.role||on.OrgRole.Viewer}),Ya.Vt.licensedAccessControlEnabled()&&Ya.Vt.hasPermission(on.AccessControlAction.ActionRolesList)&&(0,fi.ul)(U.value?.id).then(Q=>this.setState({roleOptions:Q})).catch(Q=>console.error(Q))},this.onOrgRoleChange=U=>{this.setState({role:U})},this.onAddUserToOrg=async()=>{const{selectedOrg:U,role:z}=this.state;this.props.onOrgAdd(U.id,z),Ya.Vt.licensedAccessControlEnabled()&&Ya.Vt.hasPermission(on.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,fi.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.state.pendingOrgId=null,this.state.pendingRoles=[],this.state.pendingUserId=null)},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(U,z,Q)=>{this.setState({pendingRoles:U,pendingOrgId:Q,pendingUserId:z})}}render(){const{isOpen:U,user:z,userOrgs:Q}=this.props,{role:le,roleOptions:Ce,selectedOrg:Ie}=this.state,Je=Sl();return a.createElement(Hr.u,{className:Je.modal,contentClassName:Je.modalContent,title:"Add to an organization",isOpen:U,onDismiss:this.onCancel},a.createElement(_n.g,{label:"Organization"},a.createElement(Dd,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:Q,autoFocus:!0})),a.createElement(_n.g,{label:"Role",disabled:Ie===null},Ya.Vt.accessControlEnabled()?a.createElement(Dl.R,{userId:z?.id||0,orgId:Ie?.id,basicRole:le,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:Ce,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles}):a.createElement(gi.A,{inputId:"new-org-role-input",value:le,onChange:this.onOrgRoleChange})),a.createElement(Hr.u.ButtonRow,null,a.createElement(ha.Lh,{spacing:"md",justify:"center"},a.createElement(me.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),a.createElement(me.zx,{variant:"primary",disabled:Ie===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const Sd=B=>({disabledTooltip:k.css`
    display: flex;
  `,tooltipItemLink:k.css`
    color: ${B.v1.palette.blue95};
  `});function af({onChangeRoleClick:B,isExternalUser:U,onOrgRoleSave:z,onCancelClick:Q}){const le=(0,he.wW)(Sd);return a.createElement("div",{className:le.disabledTooltip},a.createElement(po.p,{confirmText:"Save",onClick:B,onCancel:Q,onConfirm:z,disabled:U},"Change role"),U&&a.createElement(kr.u,{placement:"right-end",content:a.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:le.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement(sa.J,{name:"question-circle"})))}const nr=()=>{const B=(0,he.wW)($o);return a.createElement("div",{className:B.disabledTooltip},a.createElement(kr.u,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:B.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement(sa.J,{name:"question-circle"})))},$o=B=>({disabledTooltip:k.css`
    display: flex;
  `,tooltipItemLink:k.css`
    color: ${B.v1.palette.blue95};
  `}),Br=[{label:"Yes",value:!0},{label:"No",value:!1}];function Ko({isGrafanaAdmin:B,onGrafanaAdminChange:U}){const[z,Q]=(0,a.useState)(!1),[le,Ce]=(0,a.useState)(B),Ie=()=>Q(!0),Je=()=>{Q(!1),Ce(B)},it=()=>U(le),pt=Ya.Vt.hasPermission(on.AccessControlAction.UsersPermissionsUpdate);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Permissions"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Grafana Admin"),z?a.createElement("td",{colSpan:2},a.createElement(fe.S,{options:Br,value:le,onChange:Ce,autoFocus:!0})):a.createElement("td",{colSpan:2},B?a.createElement(a.Fragment,null,a.createElement(sa.J,{name:"shield"})," Yes"):a.createElement(a.Fragment,null,"No")),a.createElement("td",null,pt&&a.createElement(po.p,{onClick:Ie,onConfirm:it,onCancel:Je,confirmText:"Change"},"Change"))))))))}var xr=e(81202),wr=e(70640);function Od({user:B,onUserUpdate:U,onUserDelete:z,onUserDisable:Q,onUserEnable:le,onPasswordChange:Ce}){const[Ie,Je]=(0,a.useState)(!1),[it,pt]=(0,a.useState)(!1),vt=(0,a.useRef)(null),Mt=yr=>()=>{Je(yr),!yr&&vt.current&&vt.current.focus()},Nt=(0,a.useRef)(null),Kt=yr=>()=>{pt(yr),!yr&&Nt.current&&Nt.current.focus()},Gt=()=>z(B.id),en=()=>Q(B.id),pn=()=>le(B.id),un=yr=>{U({...B,name:yr})},Gn=yr=>{U({...B,email:yr})},Ta=yr=>{U({...B,login:yr})},Fs=B.authLabels?.length&&B.authLabels[0],sr=Fs?`Synced via ${Fs}`:"",br=B.isExternal||!Ya.Vt.hasPermissionInMetadata(on.AccessControlAction.UsersWrite,B),Qr=B.isExternal||!Ya.Vt.hasPermissionInMetadata(on.AccessControlAction.UsersPasswordUpdate,B),ri=Ya.Vt.hasPermissionInMetadata(on.AccessControlAction.UsersDelete,B),Mr=Ya.Vt.hasPermissionInMetadata(on.AccessControlAction.UsersDisable,B),tf=Ya.Vt.hasPermissionInMetadata(on.AccessControlAction.UsersEnable,B);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"User information"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement(Gr,{label:"Name",value:B.name,locked:br,lockMessage:sr,onChange:un}),a.createElement(Gr,{label:"Email",value:B.email,locked:br,lockMessage:sr,onChange:Gn}),a.createElement(Gr,{label:"Username",value:B.login,locked:br,lockMessage:sr,onChange:Ta}),a.createElement(Gr,{label:"Password",value:"********",inputType:"password",locked:Qr,lockMessage:sr,onChange:Ce})))),a.createElement("div",{className:vi.buttonRow},ri&&a.createElement(a.Fragment,null,a.createElement(me.zx,{variant:"destructive",onClick:Mt(!0),ref:vt},"Delete user"),a.createElement(xr.s,{isOpen:Ie,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:Gt,onDismiss:Mt(!1)})),B.isDisabled&&tf&&a.createElement(me.zx,{variant:"secondary",onClick:pn},"Enable user"),!B.isDisabled&&Mr&&a.createElement(a.Fragment,null,a.createElement(me.zx,{variant:"secondary",onClick:Kt(!0),ref:Nt},"Disable user"),a.createElement(xr.s,{isOpen:it,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:en,onDismiss:Kt(!1)})))))}const vi={buttonRow:k.css`
    margin-top: 0.8rem;
    > * {
      margin-right: 16px;
    }
  `};class Gr extends a.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=U=>{this.inputElem=U},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(U,z)=>{z!==wr.G.Invalid&&this.setState({value:U.target.value})},this.onInputBlur=(U,z)=>{z!==wr.G.Invalid&&this.setState({value:U.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:U,locked:z,lockMessage:Q,inputType:le}=this.props,{value:Ce}=this.state,Ie=(0,k.cx)("width-16",k.css`
        font-weight: 500;
      `);if(z)return a.createElement(Td,{label:U,value:Ce,lockMessage:Q});const Je=`${U}-input`;return a.createElement("tr",null,a.createElement("td",{className:Ie},a.createElement("label",{htmlFor:Je},U)),a.createElement("td",{className:"width-25",colSpan:2},this.state.editing?a.createElement(Ee.I,{id:Je,type:le,defaultValue:Ce,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):a.createElement("span",null,this.props.value)),a.createElement("td",null,a.createElement(po.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}Gr.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const Td=({label:B,value:U,lockMessage:z})=>{const Q=k.css`
    font-style: italic;
    margin-right: 0.6rem;
  `,le=(0,k.cx)("width-16",k.css`
      font-weight: 500;
    `);return a.createElement("tr",null,a.createElement("td",{className:le},B),a.createElement("td",{className:"width-25",colSpan:2},U),a.createElement("td",null,a.createElement("span",{className:Q},z)))};var wa=e(35287);class Id extends a.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=a.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=U=>()=>{this.props.onSessionRevoke(U)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:U}=this.props,{showLogoutModal:z}=this.state,Q=k.css`
      margin-top: 0.8rem;
    `,le=Ya.Vt.hasPermission(on.AccessControlAction.UsersLogout);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Sessions"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Last seen"),a.createElement("th",null,"Logged on"),a.createElement("th",null,"IP address"),a.createElement("th",{colSpan:2},"Browser and OS"))),a.createElement("tbody",null,U&&U.map((Ce,Ie)=>a.createElement("tr",{key:`${Ce.id}-${Ie}`},a.createElement("td",null,Ce.isActive?"Now":Ce.seenAt),a.createElement("td",null,(0,wa.$q)(Ce.createdAt,{dateStyle:"long"})),a.createElement("td",null,Ce.clientIp),a.createElement("td",null,`${Ce.browser} on ${Ce.os} ${Ce.osVersion}`),a.createElement("td",null,a.createElement("div",{className:"pull-right"},le&&a.createElement(po.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(Ce.id),autoFocus:!0},"Force logout")))))))),a.createElement("div",{className:Q},le&&U.length>0&&a.createElement(me.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),a.createElement(xr.s,{isOpen:z,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const Rd=Id;var As=e(37592);const Ad=["OAuth"];class Ld extends a.PureComponent{constructor(){super(...arguments),this.onUserUpdate=U=>{this.props.updateUser(U)},this.onPasswordChange=U=>{const{user:z,setUserPassword:Q}=this.props;z&&Q(z.id,U)},this.onUserDelete=U=>{this.props.deleteUser(U)},this.onUserDisable=U=>{this.props.disableUser(U)},this.onUserEnable=U=>{this.props.enableUser(U)},this.onGrafanaAdminChange=U=>{const{user:z,updateUserPermissions:Q}=this.props;z&&Q(z.id,U)},this.onOrgRemove=U=>{const{user:z,deleteOrgUser:Q}=this.props;z&&Q(z.id,U)},this.onOrgRoleChange=(U,z)=>{const{user:Q,updateOrgUserRole:le}=this.props;Q&&le(Q.id,U,z)},this.onOrgAdd=(U,z)=>{const{user:Q,addOrgUser:le}=this.props;Q&&le(Q,U,z)},this.onSessionRevoke=U=>{const{user:z,revokeSession:Q}=this.props;z&&Q(U,z.id)},this.onAllSessionsRevoke=()=>{const{user:U,revokeAllSessions:z}=this.props;U&&z(U.id)},this.onUserSync=()=>{const{user:U,syncLdapUser:z}=this.props;U&&z(U.id)}}async componentDidMount(){const{match:U,loadAdminUserPage:z}=this.props;z(parseInt(U.params.id,10))}render(){const{user:U,orgs:z,sessions:Q,ldapSyncInfo:le,isLoading:Ce}=this.props,Ie=U?.isExternal&&U?.authLabels?.includes("LDAP"),Je=U?.authLabels?.includes("JWT"),it=Ya.Vt.hasPermission(on.AccessControlAction.UsersAuthTokenList),pt=Ya.Vt.hasPermission(on.AccessControlAction.LDAPStatusRead),vt=U?.isExternal&&U?.authLabels?.some(Fs=>Ad.includes(Fs)),Mt=U?.isExternal&&U?.authLabels?.includes("SAML"),Nt=U?.isExternal&&U?.authLabels?.includes("Google"),Kt=U?.isExternal&&U?.authLabels?.includes("GitHub"),Gt=U?.isExternal&&U?.authLabels?.includes("GitLab"),en=U?.isExternal&&U?.authLabels?.includes("Auth Proxy"),pn=U?.isExternal&&U?.authLabels?.includes("AzureAD"),un=U?.isExternal&&U?.authLabels?.includes("grafana.com"),Gn=!b.ZP.auth.DisableSyncLock&&(U?.isExternal&&!(en||Nt||Gt||vt||Mt||Ie||Kt||pn||Je||un)||!b.ZP.auth.OAuthSkipOrgRoleUpdateSync&&vt||!b.ZP.auth.SAMLSkipOrgRoleSync&&Mt||!b.ZP.auth.LDAPSkipOrgRoleSync&&Ie||!b.ZP.auth.JWTAuthSkipOrgRoleSync&&Je||!b.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!b.ZP.auth.GrafanaComSkipOrgRoleSync&&un||!b.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!b.ZP.auth.GithubSkipOrgRoleSync&&Kt||!b.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!b.ZP.auth.AzureADSkipOrgRoleSync&&pn||!b.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!b.ZP.auth.GitLabSkipOrgRoleSync&&Gt||!b.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!b.ZP.auth.GoogleSkipOrgRoleSync&&Nt),Ta={text:U?.login??"",icon:"shield",breadcrumbs:[{title:"Users",url:"admin/users"}],subTitle:"Manage settings for an individual user."};return a.createElement(Ks.T,{navId:"global-users",pageNav:Ta},a.createElement(Ks.T.Contents,{isLoading:Ce},U&&a.createElement(a.Fragment,null,a.createElement(Od,{user:U,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),!b.ZP.auth.LDAPSkipOrgRoleSync&&Ie&&(0,Pl.v)("ldapsync")&&le&&pt&&a.createElement(xd,{ldapSyncInfo:le,user:U,onUserSync:this.onUserSync}),a.createElement(Ko,{isGrafanaAdmin:U.isGrafanaAdmin,onGrafanaAdminChange:this.onGrafanaAdminChange})),z&&a.createElement(pi,{user:U,orgs:z,isExternalUser:Gn,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),Q&&it&&a.createElement(Rd,{sessions:Q,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})))}}const ho=B=>({user:B.userAdmin.user,sessions:B.userAdmin.sessions,orgs:B.userAdmin.orgs,ldapSyncInfo:B.ldap.syncInfo,isLoading:B.userAdmin.isLoading,error:B.userAdmin.error}),Bd={loadAdminUserPage:As.PK,updateUser:As.Nq,setUserPassword:As.tQ,disableUser:As.B9,enableUser:As.Dx,deleteUser:As.h8,updateUserPermissions:As.Xx,addOrgUser:As.bN,updateOrgUserRole:As.Jk,deleteOrgUser:As.uV,revokeSession:As._1,revokeAllSessions:As.Fm,syncLdapUser:As.CP},wd=(0,mr.connect)(ho,Bd)(Ld);var Nd=e(86245);const vo=({ldapConnectionInfo:B})=>a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Connection"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Host"),a.createElement("th",{colSpan:2},"Port"))),a.createElement("tbody",null,B&&B.map((U,z)=>a.createElement("tr",{key:z},a.createElement("td",null,U.host),a.createElement("td",null,U.port),a.createElement("td",null,U.available?a.createElement(sa.J,{name:"check",className:"pull-right"}):a.createElement(sa.J,{name:"exclamation-triangle",className:"pull-right"}))))))),a.createElement("div",{className:"gf-form-group"},a.createElement(Yr,{ldapConnectionInfo:B})))),Yr=({ldapConnectionInfo:B})=>{if(!B.some(le=>le.error))return null;const z=[];B.forEach(le=>{le.error&&z.push(le)});const Q=z.map((le,Ce)=>a.createElement("div",{key:Ce},a.createElement("span",{style:{fontWeight:500}},le.host,":",le.port,a.createElement("br",null)),a.createElement("span",null,le.error),Ce!==z.length-1&&a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement("br",null))));return a.createElement(On.b,{title:"Connection error",severity:on.AppNotificationSeverity.Error},Q)};var Ol=e(40008);const Ud="dddd YYYY-MM-DD HH:mm zz";class Fd extends a.PureComponent{constructor(){super(...arguments),this.state={isSyncing:!1},this.handleSyncClick=()=>{this.setState({isSyncing:!this.state.isSyncing})}}render(){const{ldapSyncInfo:U}=this.props,{isSyncing:z}=this.state,Q=(0,Cl.dq)(U.nextSync,{format:Ud});return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation",a.createElement(me.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0},a.createElement("span",{className:"btn-title"},"Bulk-sync now"),z&&a.createElement(Ol.$,{inline:!0}))),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"Active synchronisation"),a.createElement("td",{colSpan:2},U.enabled?"Enabled":"Disabled")),a.createElement("tr",null,a.createElement("td",null,"Scheduled"),a.createElement("td",null,U.schedule)),a.createElement("tr",null,a.createElement("td",null,"Next scheduled synchronisation"),a.createElement("td",null,Q)))))))}}const Wd=({groups:B,showAttributeMapping:U})=>{const z=U?B:B.filter(Q=>Q.orgRole);return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,U&&a.createElement("th",null,"LDAP Group"),a.createElement("th",null,"Organization",a.createElement(kr.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(sa.J,{name:"info-circle"})))),a.createElement("th",null,"Role"))),a.createElement("tbody",null,z.map((Q,le)=>a.createElement("tr",{key:`${Q.orgId}-${le}`},U&&a.createElement("td",null,Q.groupDN),Q.orgName&&Q.orgRole?a.createElement("td",null,Q.orgName):a.createElement("td",null),Q.orgRole?a.createElement("td",null,Q.orgRole):a.createElement("td",null,a.createElement("span",{className:"text-warning"},"No match",a.createElement(kr.u,{placement:"top",content:"No matching groups found",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(sa.J,{name:"info-circle"})))))))))))},$d=({info:B,showAttributeMapping:U})=>a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{colSpan:2},"User information"),U&&a.createElement("th",null,"LDAP attribute"))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"First name"),a.createElement("td",null,B.name.ldapValue),U&&a.createElement("td",null,B.name.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Surname"),a.createElement("td",null,B.surname.ldapValue),U&&a.createElement("td",null,B.surname.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Username"),a.createElement("td",null,B.login.ldapValue),U&&a.createElement("td",null,B.login.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Email"),a.createElement("td",null,B.email.ldapValue),U&&a.createElement("td",null,B.email.cfgAttrValue)))))),Kd=({permissions:B})=>a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{colSpan:1},"Permissions"))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"}," Grafana admin"),a.createElement("td",null,B.isGrafanaAdmin?a.createElement(a.Fragment,null,a.createElement(sa.J,{name:"shield"})," Yes"):"No")),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Status"),a.createElement("td",null,B.isDisabled?a.createElement(a.Fragment,null,a.createElement(sa.J,{name:"times"})," Inactive"):a.createElement(a.Fragment,null,a.createElement(sa.J,{name:"check"})," Active"))))))),Vd=({teams:B,showAttributeMapping:U})=>{const z=U?B:B.filter(Q=>Q.teamName);return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,U&&a.createElement("th",null,"LDAP Group"),a.createElement("th",null,"Organisation"),a.createElement("th",null,"Team"))),a.createElement("tbody",null,z.map((Q,le)=>a.createElement("tr",{key:`${Q.teamName}-${le}`},U&&a.createElement(a.Fragment,null,a.createElement("td",null,Q.groupDN),!Q.orgName&&a.createElement(a.Fragment,null,a.createElement("td",null),a.createElement("td",null,a.createElement("div",{className:"text-warning"},"No match",a.createElement(kr.u,{placement:"top",content:"No matching teams found",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(sa.J,{name:"info-circle"}))))))),Q.orgName&&a.createElement(a.Fragment,null,a.createElement("td",null,Q.orgName),a.createElement("td",null,Q.teamName))))))))},zd=({ldapUser:B,showAttributeMapping:U})=>a.createElement(a.Fragment,null,a.createElement($d,{info:B.info,showAttributeMapping:U}),a.createElement(Kd,{permissions:B.permissions}),B.roles&&B.roles.length>0&&a.createElement(Wd,{groups:B.roles,showAttributeMapping:U}),B.teams&&B.teams.length>0?a.createElement(Vd,{teams:B.teams,showAttributeMapping:U}):a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"No teams found via LDAP"))))))),{FormField:Ei}=Rt.LegacyForms;class Hd extends a.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0},this.search=U=>{U.preventDefault();const z=U.target.elements.username.value;z&&this.fetchUserMapping(z)},this.onClearUserError=()=>{this.props.clearUserError()}}async componentDidMount(){const{clearUserMappingInfo:U,queryParams:z}=this.props;await U(),await this.fetchLDAPStatus(),z.username&&await this.fetchUserMapping(z.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:U,loadLdapSyncStatus:z}=this.props;return Promise.all([U(),z()])}async fetchUserMapping(U){const{loadUserMapping:z}=this.props;return await z(U)}render(){const{ldapUser:U,userError:z,ldapError:Q,ldapSyncInfo:le,ldapConnectionInfo:Ce,navModel:Ie,queryParams:Je}=this.props,{isLoading:it}=this.state,pt=Ya.Vt.hasPermission(on.AccessControlAction.LDAPUsersRead);return a.createElement(Ks.T,{navModel:Ie},a.createElement(Ks.T.Contents,{isLoading:it},a.createElement(a.Fragment,null,Q&&Q.title&&a.createElement("div",{className:"gf-form-group"},a.createElement(On.b,{title:Q.title,severity:on.AppNotificationSeverity.Error},Q.body)),a.createElement(vo,{ldapConnectionInfo:Ce}),(0,Pl.v)("ldapsync")&&le&&a.createElement(Fd,{ldapSyncInfo:le}),pt&&a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Test user mapping"),a.createElement("div",{className:"gf-form-group"},a.createElement("form",{onSubmit:this.search,className:"gf-form-inline"},a.createElement(Ei,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:Je.username}),a.createElement(me.zx,{type:"submit"},"Run"))),z&&z.title&&a.createElement("div",{className:"gf-form-group"},a.createElement(On.b,{title:z.title,severity:on.AppNotificationSeverity.Error,onRemove:this.onClearUserError},z.body)),U&&a.createElement(zd,{ldapUser:U,showAttributeMapping:!0})))))}}const kd=B=>({navModel:(0,Nd.ht)(B.navIndex,"ldap"),ldapConnectionInfo:B.ldap.connectionInfo,ldapUser:B.ldap.user,ldapSyncInfo:B.ldap.syncInfo,userError:B.ldap.userError,ldapError:B.ldap.ldapError}),Gd={loadLdapState:As.Y3,loadLdapSyncStatus:As.j4,loadUserMapping:As.b_,clearUserError:As.V0,clearUserMappingInfo:As.IS},Yd=(0,mr.connect)(kd,Gd)(Hd);var pa=e(74020);const tn=B=>a.lazy(B);var Vs=e(97953);const Tl=[],Il=[...Tl,{path:"/alerting",component:()=>b.vc.featureToggles.topnav?a.createElement(gr.G,{navId:"alerting"}):a.createElement(Ds.l_,{to:"/alerting/list"})},{path:"/alerting/list",component:tn(()=>Promise.all([e.e(1899),e.e(4259),e.e(5048),e.e(2461)]).then(e.bind(e,65007)))},{path:"/alerting/ng/list",component:tn(()=>e.e(4286).then(e.bind(e,65007)))},{path:"/alerting/notifications",roles:b.vc.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:tn(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:tn(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:tn(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:tn(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:tn(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:tn(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notification/new",component:tn(()=>e.e(476).then(e.bind(e,13915)))},{path:"/alerting/notification/:id/edit",component:tn(()=>e.e(7384).then(e.bind(e,81137)))}],Rl=[...Tl,b.vc.featureToggles.topnav?{path:"/alerting",component:tn(()=>e.e(6034).then(e.bind(e,90237)))}:{path:"/alerting/home",component:tn(()=>e.e(6034).then(e.bind(e,90237)))},{path:"/alerting/list",roles:(0,Vs.ql)([on.AccessControlAction.AlertingRuleRead,on.AccessControlAction.AlertingRuleExternalRead],[pa.B.Viewer,pa.B.Editor,pa.B.Admin]),component:tn(()=>Promise.all([e.e(1899),e.e(4259),e.e(5048),e.e(2461)]).then(e.bind(e,67376)))},{path:"/alerting/routes",roles:(0,Vs.ql)([on.AccessControlAction.AlertingNotificationsRead,on.AccessControlAction.AlertingNotificationsExternalRead],[pa.B.Editor,pa.B.Admin]),component:tn(()=>e.e(8648).then(e.bind(e,2979)))},{path:"/alerting/routes/mute-timing/new",roles:(0,Vs.ql)([on.AccessControlAction.AlertingNotificationsWrite,on.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:tn(()=>e.e(9355).then(e.bind(e,91631)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,Vs.ql)([on.AccessControlAction.AlertingNotificationsWrite,on.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:tn(()=>e.e(9355).then(e.bind(e,91631)))},{path:"/alerting/silences",roles:(0,Vs.ql)([on.AccessControlAction.AlertingInstanceRead,on.AccessControlAction.AlertingInstancesExternalRead],["Viewer","Editor","Admin"]),component:tn(()=>e.e(1783).then(e.bind(e,8572)))},{path:"/alerting/silence/new",roles:(0,Vs.ql)([on.AccessControlAction.AlertingInstanceCreate,on.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:tn(()=>e.e(1783).then(e.bind(e,8572)))},{path:"/alerting/silence/:id/edit",roles:(0,Vs.ql)([on.AccessControlAction.AlertingInstanceUpdate,on.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:tn(()=>e.e(1783).then(e.bind(e,8572)))},{path:"/alerting/notifications",roles:(0,Vs.ql)([on.AccessControlAction.AlertingNotificationsRead,on.AccessControlAction.AlertingNotificationsExternalRead],["Editor","Admin"]),component:tn(()=>e.e(6618).then(e.bind(e,55983)))},{path:"/alerting/notifications/:type/new",roles:(0,Vs.ql)([on.AccessControlAction.AlertingNotificationsWrite,on.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:tn(()=>e.e(6618).then(e.bind(e,55983)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,Vs.ql)([on.AccessControlAction.AlertingNotificationsWrite,on.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:tn(()=>e.e(6618).then(e.bind(e,55983)))},{path:"/alerting/notifications/:type",roles:(0,Vs.ql)([on.AccessControlAction.AlertingNotificationsWrite,on.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:tn(()=>e.e(6618).then(e.bind(e,55983)))},{path:"/alerting/groups/",roles:(0,Vs.ql)([on.AccessControlAction.AlertingInstanceRead,on.AccessControlAction.AlertingInstancesExternalRead],[pa.B.Viewer,pa.B.Editor,pa.B.Admin]),component:tn(()=>e.e(2415).then(e.bind(e,71884)))},{path:"/alerting/new",pageClass:"page-alerting",roles:(0,Vs.ql)([on.AccessControlAction.AlertingRuleCreate,on.AccessControlAction.AlertingRuleExternalWrite],[pa.B.Viewer,pa.B.Editor,pa.B.Admin]),component:tn(()=>e.e(5372).then(e.bind(e,85670)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,Vs.ql)([on.AccessControlAction.AlertingRuleUpdate,on.AccessControlAction.AlertingRuleExternalWrite],[pa.B.Viewer,pa.B.Editor,pa.B.Admin]),component:tn(()=>e.e(5372).then(e.bind(e,85670)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,Vs.ql)([on.AccessControlAction.AlertingRuleRead,on.AccessControlAction.AlertingRuleExternalRead],[pa.B.Viewer,pa.B.Editor,pa.B.Admin]),component:tn(()=>Promise.all([e.e(1899),e.e(4259),e.e(4679)]).then(e.bind(e,77110)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,Vs.ql)([on.AccessControlAction.AlertingRuleRead,on.AccessControlAction.AlertingRuleExternalRead],[pa.B.Viewer,pa.B.Editor,pa.B.Admin]),component:tn(()=>e.e(7918).then(e.bind(e,81471)))},{path:"/alerting/admin",roles:()=>["Admin"],component:tn(()=>Promise.all([e.e(897),e.e(7680)]).then(e.bind(e,74460)))}];function jd(B=b.vc){return B.unifiedAlertingEnabled?Rl:B.alertingEnabled?Il:(0,y.uniq)([...Il,...Rl].map(z=>z.path)).map(z=>({path:z,component:tn(()=>e.e(1333).then(e.bind(e,39597)))}))}var Qd=e(86475);function Al(){return b.vc.featureToggles.dataConnectionsConsole?[{path:`/${Qd.D}`,exact:!1,component:tn(()=>Promise.all([e.e(897),e.e(3795),e.e(1821),e.e(5981)]).then(e.bind(e,66040)))}]:[]}var Eo=e(3597),Ll=e(84532);const Bl=[{path:"/live",component:tn(()=>e.e(2120).then(e.bind(e,11828)))},{path:"/live/pipeline",component:tn(()=>e.e(2651).then(e.bind(e,44654)))},{path:"/live/cloud",component:tn(()=>e.e(5310).then(e.bind(e,223)))}];function Zd(B=b.vc){return(0,Ll.bO)()?B.featureToggles["live-pipeline"]?Bl:Bl.map(U=>({...U,component:tn(()=>e.e(7586).then(e.bind(e,13909)))})):[]}var to=e(48996);const Jd=[{path:"/plugins",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:to.cd.Home,component:tn(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/browse",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:to.cd.Browse,component:tn(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:to.cd.Details,component:tn(()=>Promise.all([e.e(897),e.e(3795),e.e(2417)]).then(e.bind(e,5793)))},{path:"/admin/plugins/*",navId:"admin-plugins",component:()=>a.createElement(Ds.l_,{to:"/plugins"})}];function Xd(){return Jd}var Nr=e(32557),Vo=e(88706),no=e(25318),_d=e(96093);class wl{constructor(){this.navItems=b.ZP.bootData.navTree}getCfgNode(){return this.navItems.find(U=>U.id==="cfg")}getNav(...U){let z=this.navItems;const Q={breadcrumbs:[]};for(const le of U){if(typeof le=="number"){Q.main=Q.breadcrumbs[le];break}const Ce=z.find(Ie=>Ie.id===le);Ce&&(Q.breadcrumbs.push(Ce),Q.node=Ce,Q.main=Ce,z=Ce.children??[])}if(Q.main?.children)for(const le of Q.main.children)le.active=le.url===Q.node?.url;return Q}getNotFoundNav(){return yi()}}function of(B){return console.error(B),yo("Exception thrown","See console for details")}function yi(){return yo("Page not found","404 Error")}function yo(B,U){const z={text:B,subTitle:U,icon:"exclamation-triangle"};return{node:z,main:z}}_d.ZP.service("navModelSrv",wl);var Nl=e(2555),qd=e(13011),Pi=e(92885),eu=e(55111);const Ci=a.createContext(js());Ci.displayName="PluginPageContext";function js(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function Ul(B){return{sectionNav:B??js().sectionNav}}const tu={loading:!0,pluginNav:null,plugin:null};function xi({pluginId:B,pluginNavSection:U}){const z=(0,Ds.$B)(),Q=(0,Ds.TH)(),[le,Ce]=(0,a.useReducer)(ao.reducer,tu),Ie=(0,a.useMemo)(()=>(0,Vo.oD)(),[]),Je=Ga.v.appSubUrl+Q.pathname+Q.search,{plugin:it,loading:pt,pluginNav:vt}=le,Mt=(0,eu.d)(U,vt,Je),Nt=(0,a.useMemo)(()=>(0,R.Ox)(Q.search),[Q.search]),Kt=(0,a.useMemo)(()=>Ul(Mt),[Mt]);(0,a.useEffect)(()=>{nu(B,Ce)},[B]);const Gt=(0,a.useCallback)(pn=>Ce(ao.actions.changeNav(pn)),[]);if(!it||B!==it.meta.id)return a.createElement(Ks.T,{navModel:Mt},pt&&a.createElement(Nl.Z,null));if(!it.root)return a.createElement(Ks.T,{navModel:Mt??yo("Plugin load error")},a.createElement("div",null,"No root app page component found"));const en=it.root&&a.createElement(it.root,{meta:it.meta,basename:z.url,onNavChanged:Gt,query:Nt,path:Q.pathname});return Ga.v.featureToggles.topnav&&!vt?a.createElement(Ci.Provider,{value:Kt},en):a.createElement(a.Fragment,null,a.createElement(Vo.Nq,{node:Ie},en),Mt?a.createElement(Ks.T,{navModel:Mt,pageNav:vt?.node},a.createElement(Ks.T.Contents,{isLoading:pt},a.createElement(Vo.t0,{node:Ie}))):a.createElement(Ks.T,null,a.createElement(Vo.t0,{node:Ie})))}const ao=(0,Nr.oM)({name:"prom-builder-container",initialState:tu,reducers:{setState:(B,U)=>{Object.assign(B,U.payload)},changeNav:(B,U)=>{let z=U.payload;z&&z.node.children&&(z={...z,node:{...z.main,hideFromBreadcrumbs:Ga.v.featureToggles.topnav}}),B.pluginNav=z}}});async function nu(B,U){try{const z=await(0,qd.a)(B).then(Q=>{const le=au(Q);return le?(Ya.h$.emit(no.SI.alertError,[le]),U(ao.actions.setState({pluginNav:yo(le)})),null):(0,Pi.Av)(Q)});U(ao.actions.setState({plugin:z,loading:!1,pluginNav:null}))}catch{U(ao.actions.setState({plugin:null,loading:!1,pluginNav:yi()}))}}function au(B){return B?B.type!==nt.zV.app?"Plugin must be an app":B.enabled?null:"Application Not Enabled":"Unknown Plugin"}const Di=xi;var Na=e(3153);function su(){const B=(0,Na.y0)(),{navIndex:U}=B,z=Ce=>Ce.startsWith("standalone-plugin-page-/"),Q=Ce=>"pluginId"in Ce&&"id"in Ce;return[...Object.values(U).filter(Q).map(Ce=>{const Ie=(0,Nd.vw)(Ce),Je=`/a/${Ce.pluginId}`;return{path:z(Ce.id)&&Ce.url||Je,exact:!1,component:()=>a.createElement(Di,{pluginId:Ce.pluginId,pluginNavSection:Ie})}}),{path:"/a/:pluginId",exact:!1,component:({match:Ce})=>a.createElement(Di,{pluginId:Ce.params.pluginId,pluginNavSection:U.home})}]}const Fl=[{path:"/profile",component:tn(()=>e.e(7323).then(e.bind(e,87807)))},{path:"/profile/password",component:tn(()=>e.e(5771).then(e.bind(e,75771)))},{path:"/profile/select-org",component:tn(()=>e.e(1456).then(e.bind(e,90779)))},{path:"/profile/notifications",component:tn(()=>e.e(743).then(e.bind(e,86992)))}];function ru(B=b.vc){return B.profileEnabled?Fl:(0,y.uniq)(Fl.map(z=>z.path)).map(z=>({path:z,component:tn(()=>e.e(3395).then(e.bind(e,92080)))}))}function zo(){return b.vc.featureToggles.queryLibrary?[{path:"/query-library",exact:!0,component:tn(()=>e.e(1715).then(e.bind(e,72108)))}]:[]}const ou=()=>b.vc.featureToggles.publicDashboards?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:on.DashboardRoutes.Public,component:tn(()=>e.e(1344).then(e.bind(e,10429)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:on.DashboardRoutes.Public,chromeless:!0,component:tn(()=>Promise.all([e.e(3189),e.e(7638),e.e(6173),e.e(6571),e.e(5200),e.e(2613)]).then(e.bind(e,15522)))}]:[],cr=[];function bi(){const B=b.ZP.featureToggles.topnav?[{path:"/apps",component:()=>a.createElement(gr.G,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>a.createElement(gr.G,{navId:"alerts-and-incidents"})},{path:"/monitoring",component:()=>a.createElement(gr.G,{navId:"monitoring"})},{path:"/admin/general",component:()=>a.createElement(gr.G,{navId:"admin/general"})},{path:"/admin/plugins",component:()=>a.createElement(gr.G,{navId:"admin/plugins"})},{path:"/admin/access",component:()=>a.createElement(gr.G,{navId:"admin/access"})}]:[];return[...su(),{path:"/",pageClass:"page-dashboard",routeName:on.DashboardRoutes.Home,component:tn(()=>Promise.all([e.e(897),e.e(1899),e.e(3189),e.e(7638),e.e(6173),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(9649),e.e(8016),e.e(5048),e.e(5296)]).then(e.bind(e,53860)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:on.DashboardRoutes.Normal,component:tn(()=>Promise.all([e.e(897),e.e(1899),e.e(3189),e.e(7638),e.e(6173),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(9649),e.e(8016),e.e(5048),e.e(5296)]).then(e.bind(e,53860)))},{path:"/dashboard/new",roles:()=>Ba.Vt.evaluatePermission(()=>["Editor","Admin"],[on.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:on.DashboardRoutes.New,component:tn(()=>Promise.all([e.e(897),e.e(1899),e.e(3189),e.e(7638),e.e(6173),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(9649),e.e(8016),e.e(5048),e.e(5296)]).then(e.bind(e,66959)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>Ba.Vt.evaluatePermission(()=>["Editor","Admin"],[on.AccessControlAction.DashboardsCreate]),component:tn(()=>Promise.all([e.e(897),e.e(1899),e.e(3189),e.e(7638),e.e(6173),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(9649),e.e(8016),e.e(5048),e.e(5296)]).then(e.bind(e,81704)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:on.DashboardRoutes.Normal,component:tn(()=>Promise.all([e.e(897),e.e(1899),e.e(3189),e.e(7638),e.e(6173),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(9649),e.e(8016),e.e(5048),e.e(5296)]).then(e.bind(e,53860)))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:on.DashboardRoutes.Normal,chromeless:!0,component:tn(()=>Promise.all([e.e(6173),e.e(1034)]).then(e.bind(e,30237)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:on.DashboardRoutes.Normal,chromeless:!0,component:tn(()=>Promise.all([e.e(6173),e.e(1034)]).then(e.bind(e,30237)))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:on.DashboardRoutes.Normal,chromeless:!0,component:tn(()=>Promise.all([e.e(6173),e.e(1034)]).then(e.bind(e,30237)))},{path:"/dashboard/import",roles:()=>Ba.Vt.evaluatePermission(()=>["Editor","Admin"],[on.AccessControlAction.DashboardsCreate]),component:tn(()=>e.e(8808).then(e.bind(e,26440)))},{path:Eo.n.List,component:tn(()=>Promise.all([e.e(897),e.e(4620)]).then(e.bind(e,85292)))},{path:Eo.n.Edit,component:tn(()=>Promise.all([e.e(897),e.e(1821),e.e(1477)]).then(e.bind(e,72443)))},{path:Eo.n.Dashboards,component:tn(()=>Promise.all([e.e(897),e.e(2929)]).then(e.bind(e,46144)))},{path:Eo.n.New,component:tn(()=>Promise.all([e.e(897),e.e(4253)]).then(e.bind(e,70594)))},{path:"/datasources/correlations",component:tn(()=>b.ZP.featureToggles.correlations?e.e(413).then(e.bind(e,89234)):e.e(2093).then(e.bind(e,91598)))},{path:"/dashboards",component:tn(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/dashboards/folder/new",roles:()=>Ba.Vt.evaluatePermission(()=>["Editor","Admin"],[on.AccessControlAction.FoldersCreate]),component:tn(()=>e.e(8932).then(e.bind(e,94883)))},{path:"/dashboards/f/:uid/:slug/permissions",component:b.ZP.rbacEnabled&&Ba.Vt.hasPermission(on.AccessControlAction.FoldersPermissionsRead)?tn(()=>e.e(8431).then(e.bind(e,42524))):tn(()=>e.e(8431).then(e.bind(e,45663)))},{path:"/dashboards/f/:uid/:slug/settings",component:tn(()=>e.e(4827).then(e.bind(e,90315)))},{path:"/dashboards/f/:uid/:slug",component:tn(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/dashboards/f/:uid",component:tn(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/explore",pageClass:"page-explore",roles:()=>Ba.Vt.evaluatePermission(()=>b.ZP.viewersCanEdit?[]:["Editor","Admin"],[on.AccessControlAction.DataSourcesExplore]),component:tn(()=>b.ZP.exploreEnabled?Promise.all([e.e(897),e.e(3663),e.e(9649),e.e(9782)]).then(e.bind(e,52547)):e.e(172).then(e.bind(e,20750)))},...B,{path:"/org",component:tn(()=>e.e(529).then(e.bind(e,23242)))},{path:"/org/new",component:tn(()=>e.e(950).then(e.bind(e,72040)))},{path:"/org/users",component:tn(()=>e.e(8039).then(e.bind(e,71221)))},{path:"/org/users/invite",component:tn(()=>e.e(7707).then(e.bind(e,40509)))},{path:"/org/apikeys",roles:()=>Ba.Vt.evaluatePermission(()=>["Admin"],[on.AccessControlAction.ActionAPIKeysRead]),component:tn(()=>e.e(3082).then(e.bind(e,60277)))},{path:"/org/serviceaccounts",roles:()=>Ba.Vt.evaluatePermission(()=>["Admin"],[on.AccessControlAction.ServiceAccountsRead,on.AccessControlAction.ServiceAccountsCreate]),component:tn(()=>e.e(1337).then(e.bind(e,50951)))},{path:"/org/serviceaccounts/create",component:tn(()=>e.e(9738).then(e.bind(e,36497)))},{path:"/org/serviceaccounts/:id",component:tn(()=>e.e(687).then(e.bind(e,66446)))},{path:"/org/teams",roles:()=>Ba.Vt.evaluatePermission(()=>b.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[on.AccessControlAction.ActionTeamsRead,on.AccessControlAction.ActionTeamsCreate]),component:tn(()=>e.e(9671).then(e.bind(e,17721)))},{path:"/org/teams/new",roles:()=>Ba.Vt.evaluatePermission(()=>b.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[on.AccessControlAction.ActionTeamsCreate]),component:tn(()=>e.e(8715).then(e.bind(e,39874)))},{path:"/org/teams/edit/:id/:page?",roles:()=>Ba.Vt.evaluatePermission(()=>b.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[on.AccessControlAction.ActionTeamsRead,on.AccessControlAction.ActionTeamsCreate]),component:tn(()=>e.e(8612).then(e.bind(e,59582)))},{path:"/admin",component:()=>b.ZP.featureToggles.topnav?a.createElement(gr.G,{navId:"cfg"}):a.createElement(Ds.l_,{to:"/admin/users"})},{path:"/admin/access",component:()=>b.ZP.featureToggles.topnav?a.createElement(gr.G,{navId:"admin/access"}):a.createElement(Ds.l_,{to:"/admin/users"})},{path:"/admin/config",component:()=>b.ZP.featureToggles.topnav?a.createElement(gr.G,{navId:"admin/config"}):a.createElement(Ds.l_,{to:"/admin/org"})},{path:"/admin/settings",component:tn(()=>e.e(9603).then(e.bind(e,55486)))},{path:"/admin/upgrading",component:tn(()=>e.e(2446).then(e.bind(e,62446)))},{path:"/admin/users",component:b.ZP.featureToggles.topnav?tn(()=>e.e(7497).then(e.bind(e,21038))):tn(()=>e.e(8580).then(e.bind(e,68082)))},{path:"/admin/users/create",component:tn(()=>e.e(2508).then(e.bind(e,49562)))},{path:"/admin/users/edit/:id",component:wd},{path:"/admin/orgs",component:tn(()=>e.e(3798).then(e.bind(e,61608)))},{path:"/admin/orgs/edit/:id",component:tn(()=>e.e(2721).then(e.bind(e,29209)))},{path:"/admin/storage/k8s",roles:()=>["Admin"],component:tn(()=>e.e(1218).then(e.bind(e,6897)))},{path:"/admin/storage/export",roles:()=>["Admin"],component:tn(()=>e.e(8426).then(e.bind(e,39892)))},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:tn(()=>e.e(7675).then(e.bind(e,17102)))},{path:"/admin/stats",component:tn(()=>e.e(7641).then(e.bind(e,97629)))},{path:"/admin/ldap",component:Yd},{path:"/login",component:Pd,pageClass:"login-page sidemenu-hidden",chromeless:!0},{path:"/invite/:code",component:tn(()=>e.e(7429).then(e.bind(e,62887))),pageClass:"sidemenu-hidden",chromeless:!0},{path:"/verify",component:b.ZP.verifyEmailEnabled?tn(()=>e.e(7583).then(e.bind(e,27583))):()=>a.createElement(Ds.l_,{to:"/signup"}),pageClass:"login-page sidemenu-hidden",chromeless:!0},{path:"/signup",component:b.ZP.disableUserSignUp?()=>a.createElement(Ds.l_,{to:"/login"}):tn(()=>e.e(615).then(e.bind(e,40615))),pageClass:"sidemenu-hidden login-page",chromeless:!0},{path:"/user/password/send-reset-email",pageClass:"sidemenu-hidden",chromeless:!0,component:tn(()=>e.e(133).then(e.bind(e,37673)))},{path:"/user/password/reset",component:tn(()=>e.e(6848).then(e.bind(e,18310))),pageClass:"sidemenu-hidden login-page",chromeless:!0},{path:"/dashboard/snapshots",component:tn(()=>e.e(5295).then(e.bind(e,11155)))},{path:"/playlists",component:tn(()=>e.e(9218).then(e.bind(e,21977)))},{path:"/playlists/play/:uid",component:tn(()=>e.e(3090).then(e.bind(e,48579)))},{path:"/playlists/new",component:tn(()=>e.e(9975).then(e.bind(e,29666)))},{path:"/playlists/edit/:uid",component:tn(()=>e.e(2341).then(e.bind(e,58809)))},{path:"/sandbox/benchmarks",component:tn(()=>e.e(4908).then(e.bind(e,65708)))},{path:"/sandbox/test",component:tn(()=>Promise.all([e.e(8016),e.e(8595)]).then(e.bind(e,42594)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:tn(()=>Promise.all([e.e(3189),e.e(3778)]).then(e.bind(e,42029)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>Ba.Vt.evaluatePermission(()=>["Viewer","Editor","Admin"],[on.AccessControlAction.AlertingRuleRead]),component:tn(()=>e.e(1324).then(e.bind(e,30097)))},{path:"/library-panels",component:tn(()=>Promise.all([e.e(3189),e.e(7878)]).then(e.bind(e,45407)))},{path:"/notifications",component:tn(()=>e.e(743).then(e.bind(e,86992)))},...Wl(),...lu(),...Xd(),...iu(),...Zd(),...jd(),...ru(),...zo(),...cr,...ou(),...Al(),{path:"/*",component:zr}]}function Wl(B=b.ZP){return B.featureToggles.dashboardsFromStorage?[{path:"/g/:slug*.json",pageClass:"page-dashboard",routeName:on.DashboardRoutes.Path,component:tn(()=>Promise.all([e.e(897),e.e(1899),e.e(3189),e.e(7638),e.e(6173),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(9649),e.e(8016),e.e(5048),e.e(5296)]).then(e.bind(e,53860)))},{path:"/g/:slug*",component:tn(()=>e.e(6092).then(e.bind(e,60265)))}]:[]}function iu(B=b.ZP){return B.featureToggles.supportBundles?[{path:"/support-bundles",component:tn(()=>e.e(9939).then(e.bind(e,57906)))},{path:"/support-bundles/create",component:tn(()=>e.e(539).then(e.bind(e,46190)))}]:[]}function lu(B=b.ZP){return B.featureToggles.scenes?[{path:"/scenes",component:tn(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,13190)))},{path:"/scenes/dashboard/:uid",component:tn(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,64178)))},{path:"/scenes/embedded/:name",component:tn(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,50940)))},{path:"/scenes/:name",component:tn(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,23192)))}]:[]}const $l=a.forwardRef((B,U)=>a.createElement("div",{id:"ngRoot",ref:U,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));$l.displayName="AngularRoot";var Kl=e(37210);async function Mi(){if(Ga.v.angularSupportEnabled){const{AngularApp:B}=await Promise.all([e.e(2773),e.e(6738),e.e(4704)]).then(e.bind(e,6738)),U=new B;U.init(),U.bootstrap()}else(0,Kl.W)({load:(B,U,z)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})})}var Ho=e(34177),Qs=e(24844),zs=e(45984),_a=e(97063),cu=e(25337),Vl=e(22350),Po=e(49938),zl=e(19360);function du({onDismiss:B}){const{value:U=[]}=(0,Vl.Z)(()=>zl.h.loadOrgs(),[]),z=Ba.Vt.user.orgId,Q=(0,k.css)({display:"flex",maxHeight:"calc(85vh - 42px)"}),le=async Ce=>{await zl.h.setUserOrg(Ce),window.location.href=`${b.ZP.appSubUrl}${b.ZP.appSubUrl.endsWith("/")?"":"/"}?orgId=${Ce.orgId}`};return a.createElement(Hr.u,{title:"Switch Organization",icon:"arrow-random",onDismiss:B,isOpen:!0,contentClassName:Q},a.createElement(Po.$,{autoHeightMin:"100%"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Name"),a.createElement("th",null,"Role"),a.createElement("th",null))),a.createElement("tbody",null,U.map(Ce=>a.createElement("tr",{key:Ce.orgId},a.createElement("td",null,Ce.name),a.createElement("td",null,Ce.role),a.createElement("td",{className:"text-right"},Ce.orgId===z?a.createElement(me.zx,{size:"sm"},"Current"):a.createElement(me.zx,{variant:"secondary",size:"sm",onClick:()=>le(Ce)},"Switch to"))))))))}var Hl=e(41197);const kl="search",Dr="navbar-menu-portal-container",lf=()=>document.getElementById(Dr)??document.body,Si=(B,U)=>{const{isSignedIn:z,user:Q}=Ba.Vt,le=()=>{_a.Z.publish(new zs.Dn({component:Hl.B}))},Ce=()=>{_a.Z.publish(new zs.Dn({component:du}))};if(!Ga.v.featureToggles.topnav&&Q&&Q.orgCount>1){const Ie=B.find(Je=>Je.id==="profile");Ie&&(Ie.showOrgSwitcher=!0,Ie.subTitle=`Organization: ${Q?.orgName}`)}if(!z&&!Ga.v.featureToggles.topnav){const Ie=S.u.getUrlForPartial(U,{forceLogin:"true"});B.unshift({icon:"signout",id:"sign-in",section:Qs.yV.Config,target:"_self",text:(0,wa.t)("nav.sign-in","Sign in"),url:Ie})}return B.forEach(Ie=>{let Je=Ie.children||[];Ie.id==="help"&&(Ie.children=[...(0,cu.dP)(),...uu(),{id:"keyboard-shortcuts",text:(0,wa.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:le}]),!Ga.v.featureToggles.topnav&&Ie.showOrgSwitcher&&(Ie.children=[...Je,{id:"switch-organization",text:(0,wa.t)("nav.profile/switch-org","Switch organization"),icon:"arrow-random",onClick:Ce}])}),B};let uu=(B=Ga.v)=>{const U=Ba.Vt.hasAccess(on.AccessControlAction.ActionSupportBundlesCreate,Ba.Vt.isGrafanaAdmin)||Ba.Vt.hasAccess(on.AccessControlAction.ActionSupportBundlesRead,Ba.Vt.isGrafanaAdmin);return!B.supportBundlesEnabled||!U?[]:[{target:"_self",id:"support-bundle",text:(0,wa.t)("nav.help/support-bundle","Support Bundles"),icon:"question-circle",url:"/support-bundles"}]};const rs=(B,U)=>{const z=B.onClick;return B.onClick=()=>{(0,Vr.ff)("grafana_navigation_item_clicked",{path:B.url??B.id,state:U?"expanded":"collapsed"}),z?.()},B.children&&(B.children=B.children.map(Q=>rs(Q,U))),B},Ur=(B,U)=>Boolean(B===U||Oi(B,U)),Oi=(B,U)=>Boolean(B.children?.some(z=>z===U?!0:Oi(z,U))),ko=B=>B?.split("?")[0]??"",Gl=(B,U)=>{const z=ko(U?.url),Q=ko(B.url);return Q&&Q.length>z?.length},Ti=(B,U,z)=>{const Q="/dashboards";for(const le of B){const Ce=ko(le.url),Ie=S.u.stripBaseFromUrl(Ce);if(Ie)if(Ie===U){z=le;break}else if(Ie!=="/"&&U.startsWith(Ie))Gl(le,z)&&(z=le);else if(Ie==="/alerting/list"&&U.startsWith("/alerting/notification/")){z=le;break}else Ie===Q&&U.startsWith("/d/")&&Gl(le,z)&&(z=le);if(le.children&&(z=Ti(le.children,U,z)),ko(z?.url)===U)return z}return z},mu=B=>new URLSearchParams(B.search).get("search")==="open";function Yl(B){return B.id??B.text}var Go=e(99510),Co=e(81699),pr=e(6665),Yo=e(22163),Fr=e(13211),Ii=e(84666),dr=e(14617),jo=e(90031);function Ri({children:B,icon:U,isActive:z,isChild:Q,onClick:le,target:Ce,url:Ie}){const Je=(0,he.l4)(),it=fu(Je,z,Q),pt=a.createElement("div",{className:it.linkContent},U&&a.createElement(sa.J,{"data-testid":"dropdown-child-icon",name:U}),a.createElement("div",{className:it.linkText},B),Ce==="_blank"&&a.createElement(sa.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:it.externalLinkIcon}));let vt=a.createElement("button",{className:(0,k.cx)(it.button,it.element),onClick:le},pt);return Ie&&(vt=!Ce&&Ie.startsWith("/")?a.createElement(jo.r,{className:it.element,href:Ie,target:Ce,onClick:le},pt):a.createElement("a",{href:Ie,target:Ce,className:it.element,onClick:le},pt)),a.createElement("li",{className:it.listItem},vt)}Ri.displayName="NavBarMenuItem";const fu=(B,U,z)=>({button:(0,k.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,k.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,k.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,k.css)({color:B.colors.text.secondary}),element:(0,k.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:U?B.colors.text.primary:B.colors.text.secondary,padding:B.spacing(1,1,1,z?5:0),...z&&{borderRadius:B.shape.borderRadius()},width:"100%","&:hover, &:focus-visible":{...z&&{background:B.colors.emphasize(B.colors.background.primary,.03)},textDecoration:"underline",color:B.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${B.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:U?"block":"none",content:'" "',height:B.spacing(3),position:"absolute",left:B.spacing(1),top:"50%",transform:"translateY(-50%)",width:B.spacing(.5),borderRadius:B.shape.borderRadius(1),backgroundImage:B.colors.gradients.brandVertical}}),listItem:(0,k.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%",...z&&{padding:B.spacing(0,2)}})});var jl=e(24664);function xo({link:B}){const U=(0,he.l4)(),z=gu(U);if(B.icon==="grafana")return a.createElement(di.c.MenuLogo,{className:z.img});if(B.icon){const Q=(0,Ii.toIconName)(B.icon);return a.createElement(sa.J,{name:Q??"link",size:"xl"})}else return a.createElement("img",{className:(0,k.cx)(z.img,B.roundIcon&&z.round),src:B.img,alt:""})}function gu(B){return{img:(0,k.css)({height:B.spacing(3),width:B.spacing(3)}),round:(0,k.css)({borderRadius:"50%"})}}const jr=({children:B})=>{const U=(0,he.wW)(pu);return a.createElement("div",null,B,a.createElement("span",{className:U.highlight}))},pu=B=>({highlight:k.css`
      background-color: ${B.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function Ql({link:B,activeItem:U,children:z,className:Q,onClose:le}){const Ce=(0,he.wW)(hu),Ie=B.highlightText?jr:a.Fragment,Je=B===U,it=Oi(B,U),[pt,vt]=(0,jl.Z)(`grafana.navigation.expanded[${B.text}]`,!1)??Boolean(it);return a.createElement(a.Fragment,null,a.createElement("div",{className:(0,k.cx)(Ce.collapsibleSectionWrapper,Q)},a.createElement(Ri,{isActive:B===U,onClick:()=>{B.onClick?.(),le?.()},target:B.target,url:B.url},a.createElement("div",{className:(0,k.cx)(Ce.labelWrapper,{[Ce.isActive]:Je,[Ce.hasActiveChild]:it})},a.createElement(Ie,null,a.createElement(xo,{link:B})),(0,dr.Y)(B.id)??B.text)),z&&a.createElement(me.zx,{"aria-label":`${pt?"Collapse":"Expand"} section`,variant:"secondary",fill:"text",className:Ce.collapseButton,onClick:()=>vt(!pt)},a.createElement(sa.J,{name:pt?"angle-up":"angle-down",size:"xl"}))),pt&&z)}const hu=B=>({collapsibleSectionWrapper:(0,k.css)({alignItems:"center",display:"flex"}),collapseButton:(0,k.css)({color:B.colors.text.disabled,padding:B.spacing(0,.5),marginRight:B.spacing(1)}),collapseWrapperActive:(0,k.css)({backgroundColor:B.colors.action.disabledBackground}),collapseContent:(0,k.css)({padding:0}),labelWrapper:(0,k.css)({display:"grid",fontSize:B.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${B.spacing(7)} auto`,placeItems:"center",fontWeight:B.typography.fontWeightMedium}),isActive:(0,k.css)({color:B.colors.text.primary,"&::before":{display:"block",content:'" "',height:B.spacing(3),position:"absolute",left:B.spacing(1),top:"50%",transform:"translateY(-50%)",width:B.spacing(.5),borderRadius:B.shape.borderRadius(1),backgroundImage:B.colors.gradients.brandVertical}}),hasActiveChild:(0,k.css)({color:B.colors.text.primary})});function vu({link:B,activeItem:U,onClose:z}){const Q=(0,he.wW)(Eu);if(B.emptyMessageId&&!Zl(B)){const le=(0,dr.Y)(B.emptyMessageId);return a.createElement(Ql,{link:B},a.createElement("ul",{className:Q.children},a.createElement("div",{className:Q.emptyMessage},le)))}return a.createElement(Ql,{onClose:z,link:B,activeItem:U},Zl(B)&&a.createElement("ul",{className:Q.children},B.children.map(le=>{const Ce=le.icon?(0,Ii.toIconName)(le.icon):void 0;return!le.isCreateAction&&a.createElement(Ri,{key:`${B.text}-${le.text}`,isActive:Ur(le,U),isChild:!0,icon:le.showIconInNavbar?Ce:void 0,onClick:()=>{le.onClick?.(),z()},target:le.target,url:le.url},(0,dr.Y)(le.id)??le.text)})))}const Eu=B=>({children:(0,k.css)({display:"flex",flexDirection:"column"}),flex:(0,k.css)({display:"flex"}),itemWithoutMenu:(0,k.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,k.css)({height:"100%",width:"100%"}),iconContainer:(0,k.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,k.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${B.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,k.css)({fontSize:B.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,k.css)({color:B.colors.text.secondary,fontStyle:"italic",padding:B.spacing(1,1.5,1,7)})});function Zl(B){return Boolean(B.children&&B.children.length>0)}const Ai="350px";function Jl({activeItem:B,navItems:U,searchBarHidden:z,onClose:Q}){const le=(0,he.l4)(),Ce=yu(le,z),Ie=le.transitions.duration.shortest,Je=Pu(le,Ie),{chrome:it}=(0,Ho.p)(),pt=it.useState(),vt=(0,a.useRef)(null),Mt=(0,a.useRef)(null),{dialogProps:Nt}=(0,Go.R)({},vt),[Kt,Gt]=(0,a.useState)(!1),en=()=>Gt(!1),{overlayProps:pn,underlayProps:un}=(0,pr.Ir)({isDismissable:!0,isOpen:!0,onClose:en},vt);return(0,a.useEffect)(()=>{pt.megaMenuOpen&&Gt(!0)},[pt.megaMenuOpen]),a.createElement(pr.Xj,null,a.createElement(Yo.Z,{nodeRef:vt,in:Kt,unmountOnExit:!0,classNames:Je.overlay,timeout:{enter:Ie,exit:0},onExited:Q},a.createElement("div",{"data-testid":"navbarmenu",ref:vt,...pn,...Nt,className:Ce.container},a.createElement(Co.MT,{contain:!0,autoFocus:!0},a.createElement("div",{className:Ce.mobileHeader},a.createElement(sa.J,{name:"bars",size:"xl"}),a.createElement(es.h,{"aria-label":"Close navigation menu",name:"times",onClick:en,size:"xl",variant:"secondary"})),a.createElement("nav",{className:Ce.content},a.createElement(Po.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},a.createElement("ul",{className:Ce.itemList},U.map(Gn=>a.createElement(vu,{link:Gn,onClose:en,activeItem:B,key:Gn.text})))))))),a.createElement(Yo.Z,{nodeRef:Mt,in:Kt,unmountOnExit:!0,classNames:Je.backdrop,timeout:{enter:Ie,exit:0}},a.createElement("div",{ref:Mt,className:Ce.backdrop,...un})))}Jl.displayName="NavBarMenu";const yu=(B,U)=>{const z=(U?Fr.$:Fr.$*2)+1;return{backdrop:(0,k.css)({backdropFilter:"blur(1px)",backgroundColor:B.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:U?0:Fr.$,zIndex:B.zIndex.modalBackdrop,[B.breakpoints.up("md")]:{top:z}}),container:(0,k.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:B.spacing(1.5),right:0,zIndex:B.zIndex.modal,position:"fixed",top:U?0:Fr.$,backgroundColor:B.colors.background.primary,boxSizing:"content-box",[B.breakpoints.up("md")]:{borderRight:`1px solid ${B.colors.border.weak}`,right:"unset",top:z}}),content:(0,k.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,k.css)({display:"flex",justifyContent:"space-between",padding:B.spacing(1,2),[B.breakpoints.up("md")]:{display:"none"}}),itemList:(0,k.css)({display:"grid",gridAutoRows:`minmax(${B.spacing(6)}, auto)`,gridTemplateColumns:`minmax(${Ai}, auto)`,minWidth:Ai})}},Pu=(B,U)=>{const z={transitionDuration:`${U}ms`,transitionTimingFunction:B.transitions.easing.easeInOut,[B.breakpoints.down("md")]:{overflow:"hidden"}},Q={...z,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},le={...z,transitionProperty:"opacity"},Ce={width:"100%",[B.breakpoints.up("md")]:{boxShadow:B.shadows.z3,width:Ai}},Ie={boxShadow:"none",width:0},Je={opacity:1},it={opacity:0};return{backdrop:{enter:(0,k.css)(it),enterActive:(0,k.css)(le,Je),enterDone:(0,k.css)(Je)},overlay:{enter:(0,k.css)(Ie),enterActive:(0,k.css)(Q,Ce),enterDone:(0,k.css)(Ce)}}},Xl=a.memo(({onClose:B,searchBarHidden:U})=>{const z=(0,on.useSelector)(Mt=>Mt.navBarTree),Q=(0,he.l4)(),le=Cu(Q),Ce=(0,Ds.TH)(),Ie=(0,y.cloneDeep)(z),Je=Ie.filter(Mt=>Mt.section===Qs.yV.Core||Mt.section===Qs.yV.Plugin).map(Mt=>rs(Mt,!0)),it=Si(Ie.filter(Mt=>Mt.section===Qs.yV.Config&&Mt&&Mt.id!=="help"&&Mt.id!=="profile"),Ce).map(Mt=>rs(Mt,!0)),pt=[...Je,...it],vt=Ti(pt,Ce.pathname);return a.createElement("div",{className:le.menuWrapper},a.createElement(Jl,{activeItem:vt,navItems:pt,onClose:B,searchBarHidden:U}))});Xl.displayName="MegaMenu";const Cu=B=>({menuWrapper:(0,k.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:B.zIndex.sidemenu})});var Do=e(42879),Or=e(26408),bo=e(14393);function xu({href:B,isCurrent:U,text:z}){const Q=(0,he.wW)(Du);return a.createElement("li",{className:Q.breadcrumbWrapper},U?a.createElement("span",{"data-testid":Do.z.Breadcrumbs.breadcrumb(z),className:Q.breadcrumb,"aria-current":"page"},z):a.createElement(a.Fragment,null,a.createElement("a",{"data-testid":Do.z.Breadcrumbs.breadcrumb(z),className:(0,k.cx)(Q.breadcrumb,Q.breadcrumbLink),href:B},z),a.createElement("div",{className:Q.separator,"aria-hidden":!0},a.createElement(sa.J,{name:"angle-right"}))))}const Du=B=>{const U=(0,k.css)({color:B.colors.text.secondary});return{breadcrumb:(0,k.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:B.spacing(0,.5),whiteSpace:"nowrap",color:B.colors.text.secondary}),breadcrumbLink:(0,k.css)({color:B.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,k.css)({alignItems:"center",color:B.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[B.breakpoints.down("md")]:{display:"none","&:nth-last-child(2)":{display:"flex",flexDirection:"row-reverse",[`.${U}`]:{transform:"rotate(180deg)"}},"&:first-child&:last-child":{display:"flex",[`.${U}`]:{display:"none"}}}}),separator:U}};function bu({breadcrumbs:B,className:U}){const z=(0,he.wW)(cf);return a.createElement("nav",{"aria-label":"Breadcrumbs",className:U},a.createElement("ol",{className:z.breadcrumbs},B.map((Q,le)=>a.createElement(xu,{...Q,isCurrent:le===B.length-1,key:le}))))}const cf=B=>({breadcrumbs:(0,k.css)({display:"flex",alignItems:"center",flexWrap:"nowrap"})});var Tr=e(67345),ur=e(89097);function Wr({actions:B,searchBarHidden:U,sectionNav:z,pageNav:Q,onToggleMegaMenu:le,onToggleSearchBar:Ce,onToggleKioskMode:Ie}){const Je=(0,on.useSelector)(vt=>vt.navIndex)[bo.Qz],it=(0,he.wW)(df),pt=(0,Tr.t)(z,Q,Je);return a.createElement("div",{"data-testid":Do.z.NavToolbar.container,className:it.pageToolbar},a.createElement("div",{className:it.menuButton},a.createElement(es.h,{name:"bars",tooltip:"Toggle menu",tooltipPlacement:"bottom",size:"xl",onClick:le})),a.createElement(bu,{breadcrumbs:pt,className:it.breadcrumbs}),a.createElement("div",{className:it.actions},B,B&&a.createElement(ur.M,null),U&&a.createElement(Or.h,{onClick:Ie,narrow:!0,title:"Enable kiosk mode",icon:"monitor"}),a.createElement(Or.h,{onClick:Ce,narrow:!0,title:"Toggle top search bar"},a.createElement(sa.J,{name:U?"angle-down":"angle-up",size:"xl"}))))}const df=B=>({breadcrumbs:(0,k.css)({maxWidth:"50%"}),pageToolbar:(0,k.css)({height:Fr.$,display:"flex",padding:B.spacing(0,1,0,2),alignItems:"center",justifyContent:"space-between"}),menuButton:(0,k.css)({display:"flex",alignItems:"center",marginRight:B.spacing(1)}),actions:(0,k.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:B.spacing(1),flexGrow:1,gap:B.spacing(.5),minWidth:0})});var _l=e(26639),ql=e(86253),ec=e(55461),Mu=e(6981),tc=e(89050),nc=e(90090),Su=e(53764),Ou=e(13724);function Tu({feedUrl:B}){const U=(0,he.wW)(Iu),{state:z,getNews:Q}=(0,Ou.j)(B);return(0,a.useEffect)(()=>{Q()},[Q]),z.loading||z.error?a.createElement("div",{className:U.innerWrapper},z.loading&&a.createElement(nc.u,{text:"Loading..."}),z.error&&z.error.message):z.value?a.createElement(tc.Z,null,({width:le})=>a.createElement("div",{style:{width:`${le}px`}},z.value.map((Ce,Ie)=>a.createElement(Su.S,{key:Ie,index:Ie,showImage:!0,width:le,data:z.value})))):null}const Iu=B=>({innerWrapper:k.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `});function Ru({className:B}){const[U,z]=(0,ql.Z)(!1),Q=()=>{z(!0)};return a.createElement(a.Fragment,null,a.createElement(Or.h,{className:B,onClick:Q,iconOnly:!0,icon:"rss","aria-label":"News"}),U&&a.createElement(ec.d,{title:(0,wa.t)("news.title","Latest from the blog"),scrollableContent:!0,onClose:z},a.createElement(Tu,{feedUrl:Mu.k})))}function Mo({breakpoint:B,onChange:U}){(0,a.useEffect)(()=>{const z=window.matchMedia(`(max-width: ${B}px)`),Q=le=>U(le);return z.addEventListener("change",Q),()=>z.removeEventListener("change",Q)},[B,U])}var Li=e(2183);function ac({orgs:B,onSelectChange:U}){const z=(0,he.wW)(Bi);return a.createElement(Fn.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:z.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:B.map(Q=>({label:Q.name,description:Q.role,value:Q})),onChange:U,icon:"building"})}const Bi=B=>({buttonCss:(0,k.css)({color:B.colors.text.secondary,"&:hover":{color:B.colors.text.primary}})});function Au({orgs:B,onSelectChange:U}){const z=(0,he.wW)(Lu),{orgName:Q,orgId:le,orgRole:Ce}=Ba.Vt.user,[Ie,Je]=(0,a.useState)(()=>({label:Q,value:{role:Ce,orgId:le,name:Q},description:Ce})),it=pt=>{Je(pt),U(pt)};return a.createElement(ie.Ph,{"aria-label":"Change organization",width:"auto",value:Ie,prefix:a.createElement(sa.J,{className:"prefix-icon",name:"building"}),className:z.select,options:B.map(pt=>({label:pt.name,description:pt.role,value:pt})),onChange:it})}const Lu=B=>({select:(0,k.css)({border:"none",background:"none",color:B.colors.text.secondary,"&:hover":{color:B.colors.text.primary,"& .prefix-icon":(0,k.css)({color:B.colors.text.primary})}})});function Bu(){const B=(0,he.l4)(),U=(0,on.useDispatch)(),z=(0,on.useSelector)(it=>it.organization.userOrgs),Q=it=>{it.value&&((0,Li.Q$)(it.value.orgId),R.E1.partial({orgId:it.value.orgId},!0),window.location.reload())};(0,a.useEffect)(()=>{Ba.Vt.isSignedIn&&U((0,Li.JE)())},[U]);const le=B.breakpoints.values.sm,[Ce,Ie]=(0,a.useState)(window.matchMedia(`(max-width: ${le}px)`).matches);if(Mo({breakpoint:le,onChange:it=>{Ie(it.matches)}}),z?.length<=1)return null;const Je=Ce?ac:Au;return a.createElement(Je,{orgs:z,onSelectChange:Q})}var wi=e(63346);function sc(B){const U=[];for(const z of B)z.isCreateAction&&U.push(z),z.children&&U.push(...sc(z.children));return U}const wu=({})=>{const B=(0,he.wW)(Nu),U=(0,he.l4)(),z=(0,on.useSelector)(it=>it.navBarTree),Q=U.breakpoints.values.sm,[le,Ce]=(0,a.useState)(window.matchMedia(`(max-width: ${Q}px)`).matches),Ie=(0,a.useMemo)(()=>sc(z),[z]);Mo({breakpoint:Q,onChange:it=>{Ce(it.matches)}});const Je=()=>a.createElement(wi.v,null,Ie.map((it,pt)=>a.createElement(wi.v.Item,{key:pt,url:it.url,label:it.text})));return Ie.length>0?a.createElement(a.Fragment,null,a.createElement(_l.L,{overlay:Je,placement:"bottom-end"},it=>le?a.createElement(Or.h,{iconOnly:!0,icon:"plus-circle","aria-label":"New"}):a.createElement(Or.h,{iconOnly:!0,icon:"plus",isOpen:it,"aria-label":"New"})),a.createElement(ur.M,{className:B.separator})):null},Nu=B=>({buttonContent:(0,k.css)({alignItems:"center",display:"flex"}),buttonText:(0,k.css)({[B.breakpoints.down("md")]:{display:"none"}}),separator:(0,k.css)({[B.breakpoints.down("sm")]:{display:"none"}})});function Uu(){const B=(0,Ds.TH)(),U=(0,he.wW)(Fu),z=S.u.getUrlForPartial(B,{forceLogin:"true"});return a.createElement("a",{className:U.link,href:z,target:"_self"},"Sign in")}const Fu=()=>({link:(0,k.css)({whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var Ni=e(87302);function rc({node:B}){const U=(0,he.wW)(Ui),z=(0,Ds.TH)(),Q=Si([(0,y.cloneDeep)(B)],z),le=rs(Q[0],!1);return le?a.createElement(wi.v,{header:a.createElement("div",{onClick:Ce=>Ce.stopPropagation(),className:U.header},a.createElement("div",null,(0,dr.Y)(le.id)??le.text),le.subTitle&&a.createElement("div",{className:U.subTitle},le.subTitle))},le.children?.map(Ce=>{const Ie=(0,dr.Y)(Ce.id)??Ce.text,Je=/^https?:\/\//.test(Ce.url||"");return Ce.url?a.createElement(Ni.s,{url:Ce.url,label:Ie,icon:Je?"external-link-alt":void 0,target:Ce.target,key:Ce.id}):a.createElement(Ni.s,{icon:Ce.icon,onClick:Ce.onClick,label:Ie,key:Ce.id})})):null}const Ui=B=>({header:(0,k.css)({fontSize:B.typography.h5.fontSize,fontWeight:B.typography.h5.fontWeight,padding:B.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,k.css)({color:B.colors.text.secondary,fontSize:B.typography.bodySmall.fontSize})});function Qo({children:B,align:U="left"}){const z=(0,he.wW)(Zo),le=(0,he.l4)().breakpoints.values.sm,[Ce,Ie]=(0,a.useState)(window.matchMedia(`(max-width: ${le}px)`).matches);return Mo({breakpoint:le,onChange:Je=>{Ie(Je.matches)}}),Ce?a.createElement(a.Fragment,null,B):a.createElement("div",{"data-test-id":"wrapper",className:(0,k.cx)(z.wrapper,{[z[U]]:U==="right"})},B)}const Zo=B=>({wrapper:(0,k.css)({display:"flex",gap:B.spacing(.5),alignItems:"center"}),right:(0,k.css)({justifyContent:"flex-end"}),left:(0,k.css)({}),center:(0,k.css)({})});var Wu=e(19253),oc=e(43226);function $u(){const B=(0,he.l4)(),{query:U}=(0,$s.useKBar)(Ie=>({kbarSearchQuery:Ie.searchQuery,kbarIsOpen:Ie.visualState===$s.VisualState.showing})),z=B.breakpoints.values.sm,[Q,le]=(0,a.useState)(window.matchMedia(`(max-width: ${z}px)`).matches);Mo({breakpoint:z,onChange:Ie=>{le(Ie.matches)}});const Ce=()=>{U.toggle()};return Q?a.createElement(Or.h,{iconOnly:!0,icon:"search","aria-label":(0,wa.t)("nav.search.placeholder","Search Grafana"),onClick:Ce}):a.createElement(uf,{onClick:Ce})}function uf({onClick:B}){const U=(0,he.wW)(Jo),z=(0,a.useMemo)(()=>(0,oc.vl)(),[]);return a.createElement("div",{className:U.wrapper},a.createElement("div",{className:U.inputWrapper},a.createElement("div",{className:U.prefix},a.createElement(sa.J,{name:"search"})),a.createElement("button",{className:U.fakeInput,onClick:B},(0,wa.t)("nav.search.placeholder","Search Grafana")),a.createElement("div",{className:U.suffix},a.createElement(sa.J,{name:"keyboard"}),a.createElement("span",{className:U.shortcut},z,"+k"))))}const Jo=B=>{const U=(0,Ee.H)({theme:B});return{wrapper:U.wrapper,inputWrapper:U.inputWrapper,prefix:U.prefix,suffix:(0,k.css)([U.suffix,{display:"flex",gap:B.spacing(.5)}]),shortcut:(0,k.css)({fontSize:B.typography.bodySmall.fontSize}),fakeInput:(0,k.css)([U.input,{textAlign:"left",paddingLeft:28,color:B.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":k.css`
          ${(0,Wu.focusCss)(B)}
        `}]),button:(0,k.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};var ic=e(79230),Ku=e(66757);function Vu(){const B=(0,he.l4)(),U=(0,Ku.hD)(),z=U.useState(),Q=B.breakpoints.values.sm,[le,Ce]=(0,a.useState)(window.matchMedia(`(max-width: ${Q}px)`).matches);Mo({breakpoint:Q,onChange:it=>{Ce(it.matches)}});const Ie=()=>{R.E1.partial({search:"open"})},Je=it=>{U.onQueryChange(it),it&&Ie()};return le?a.createElement(Or.h,{iconOnly:!0,icon:"search","aria-label":"Search Grafana",onClick:Ie}):a.createElement(ic.H,{onClick:Ie,placeholder:(0,wa.t)("nav.search.placeholder","Search Grafana"),value:z.query??"",onChange:Je})}function lc(){const B=(0,he.wW)(cc),U=(0,on.useSelector)(Ce=>Ce.navIndex),z=U.help,Q=U.profile,le=b.vc.featureToggles.commandPalette&&b.vc.featureToggles.topNavCommandPalette?a.createElement($u,null):a.createElement(Vu,null);return a.createElement("div",{className:B.layout},a.createElement(Qo,null,a.createElement("a",{className:B.logo,href:"/",title:"Go to home"},a.createElement(di.c.MenuLogo,{className:B.img})),a.createElement(Bu,null)),a.createElement(Qo,null,le),a.createElement(Qo,{align:"right"},a.createElement(wu,null),z&&a.createElement(_l.L,{overlay:()=>a.createElement(rc,{node:z}),placement:"bottom-end"},a.createElement(Or.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),a.createElement(Ru,{className:B.newsButton}),!Ya.Vt.user.isSignedIn&&a.createElement(Uu,null),Q&&a.createElement(_l.L,{overlay:()=>a.createElement(rc,{node:Q}),placement:"bottom-end"},a.createElement(Or.h,{className:B.profileButton,imgSrc:Ya.Vt.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}const cc=B=>({layout:(0,k.css)({height:Fr.$,display:"flex",gap:B.spacing(1),alignItems:"center",padding:B.spacing(0,1,0,2),borderBottom:`1px solid ${B.colors.border.weak}`,justifyContent:"space-between",[B.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(200px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,k.css)({height:B.spacing(3),width:B.spacing(3)}),logo:(0,k.css)({display:"flex"}),profileButton:(0,k.css)({padding:B.spacing(0,.25),img:{borderRadius:"50%",height:"24px",marginRight:0,width:"24px"}}),newsButton:(0,k.css)({[B.breakpoints.down("sm")]:{display:"none"}})});function zu({children:B}){const U=(0,he.wW)(mf),{chrome:z}=(0,Ho.p)(),Q=z.useState();if(!Ga.v.featureToggles.topnav)return a.createElement("main",{className:"main-view"},B);const le=Q.searchBarHidden||Q.kioskMode===on.KioskMode.TV,Ce=(0,k.cx)({[U.content]:!0,[U.contentNoSearchBar]:le,[U.contentChromeless]:Q.chromeless});return a.createElement("main",{className:"main-view"},!Q.chromeless&&a.createElement("div",{className:(0,k.cx)(U.topNav)},!le&&a.createElement(lc,null),a.createElement(Wr,{searchBarHidden:le,sectionNav:Q.sectionNav,pageNav:Q.pageNav,actions:Q.actions,onToggleSearchBar:z.onToggleSearchBar,onToggleMegaMenu:z.onToggleMegaMenu,onToggleKioskMode:z.onToggleKioskMode})),a.createElement("div",{className:Ce},B),!Q.chromeless&&a.createElement(Xl,{searchBarHidden:le,onClose:()=>z.setMegaMenu(!1)}))}const mf=B=>{const U=B.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 0.6px 1.5px rgb(0 0 0 / 8%), 0 2px 4px rgb(0 0 0 / 6%), 0 5px 10px rgb(0 0 0 / 5%)";return{content:(0,k.css)({display:"flex",flexDirection:"column",paddingTop:Fr.$*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,k.css)({paddingTop:Fr.$}),contentChromeless:(0,k.css)({paddingTop:0}),topNav:(0,k.css)({display:"flex",position:"fixed",zIndex:B.zIndex.navbarFixed,left:0,right:0,boxShadow:U,background:B.colors.background.primary,flexDirection:"column"})}};var Hu=e(659),Fi=e(98864),Wi=e(60499),ku=e(58252);function Gu({appNotification:B,onClearNotification:U}){const z=(0,he.wW)(Yu);(0,ku.Z)(()=>{setTimeout(()=>{U(B.id)},on.timeoutMap[B.severity])});const Q=Ga.v.featureToggles.tracing&&B.traceId;return a.createElement(On.b,{severity:B.severity,title:B.title,onRemove:()=>U(B.id),elevated:!0},a.createElement("div",{className:z.wrapper},a.createElement("span",null,B.component||B.text),Q&&a.createElement("span",{className:z.trace},"Trace ID: ",B.traceId)))}function Yu(B){return{wrapper:(0,k.css)({display:"flex",flexDirection:"column"}),trace:(0,k.css)({fontSize:B.typography.pxToRem(10)})}}const ju=(B,U)=>({appNotifications:(0,Fi.vo)(B.appNotifications)}),Qu={notifyApp:Hu.$l,hideAppNotification:Hu.ad},Zu=(0,mr.connect)(ju,Qu);class Ju extends a.PureComponent{constructor(){super(...arguments),this.onClearAppNotification=U=>{this.props.hideAppNotification(U)}}componentDidMount(){const{notifyApp:U}=this.props;_a.Z.on(no.SI.alertWarning,z=>U((0,Wi.ZR)(...z))),_a.Z.on(no.SI.alertSuccess,z=>U((0,Wi.AT)(...z))),_a.Z.on(no.SI.alertError,z=>U((0,Wi.t_)(...z)))}render(){const{appNotifications:U}=this.props;return a.createElement("div",{className:"page-alert-list"},a.createElement(ha.wc,null,U.map((z,Q)=>a.createElement(Gu,{key:`${z.id}-${Q}`,appNotification:z,onClearNotification:le=>this.onClearAppNotification(le)}))))}}const Xu=Zu(Ju);var dc=e(96694),uc=e(96244),So=e(9815),Xo=e(42066),mc=e(92183),Oo=e(35853);const $i=(0,a.createContext)({menuHasFocus:!1,onClose:()=>{},onLeft:()=>{}});function Ki(){return(0,a.useContext)($i)}const fc=(0,a.createContext)({menuIdOpen:void 0,setMenuIdOpen:()=>{}});function Vi(){return(0,a.useContext)(fc)}function gc({item:B,state:U,onNavigate:z}){const{onClose:Q,onLeft:le}=Ki(),{setMenuIdOpen:Ce}=Vi(),{key:Ie,rendered:Je}=B,it=(0,a.useRef)(null),pt=U.disabledKeys.has(Ie),[vt,Mt]=(0,a.useState)(!1),{focusProps:Nt}=(0,Oo.KK)({onFocusChange:Mt,isDisabled:pt}),Kt=(0,he.l4)(),Gt=B.value.menuItemType==="section",en=_u(Kt,vt,Gt),pn=()=>{Ce(void 0),z(B.value),Q()};let{menuItemProps:un}=(0,So.iX)({isDisabled:pt,"aria-label":B["aria-label"],key:Ie,closeOnSelect:!0,onClose:Q,onAction:pn},U,it);const{keyboardProps:Gn}=(0,Oo.v5)({onKeyDown:Ta=>{Ta.key==="ArrowLeft"&&le(),Ta.continuePropagation()}});return a.createElement(a.Fragment,null,a.createElement("li",{...(0,Xo.dG)(un,Nt,Gn),ref:it,className:en.menuItem},Je))}function _u(B,U,z){let Q="transparent";return U?Q=B.colors.action.hover:z&&(Q=B.colors.background.secondary),{menuItem:k.css`
      background-color: ${Q};
      color: ${B.colors.text.primary};

      &:focus-visible {
        background-color: ${B.colors.action.hover};
        box-shadow: none;
        color: ${B.colors.text.primary};
        outline: 2px solid ${B.colors.primary.main};
        outline-offset: -2px;
        transition: none;
      }
    `}}function ff(B){const{reverseMenuDirection:U,adjustHeightForBorder:z,disabledKeys:Q,onNavigate:le,...Ce}=B,Ie=Ki(),Je={...(0,Xo.dG)(Ie,Ce)},{menuHasFocus:it,menuProps:pt={}}=Ie,vt=(0,he.l4)(),Mt=zi(vt,U),Nt=(0,mc.D)({...Ce,disabledKeys:Q}),Kt=(0,a.useRef)(null),{menuProps:Gt}=(0,So.H9)(Je,{...Nt},Kt),en=[...Nt.collection],pn=en.filter(Mr=>Mr.value.menuItemType===Qs.VO.Item),un=en.find(Mr=>Mr.value.menuItemType===Qs.VO.Section);if((0,a.useEffect)(()=>{it&&!Nt.selectionManager.isFocused?(Nt.selectionManager.setFocusedKey(un?.key??""),Nt.selectionManager.setFocused(!0)):it||(Nt.selectionManager.setFocused(!1),Nt.selectionManager.setFocusedKey(""),Nt.selectionManager.clearSelection())},[it,Nt.selectionManager,U,un?.key]),!un)return null;const Gn=un.value.subTitle,Ta=a.createElement(gc,{key:un.key,item:un,state:Nt,onNavigate:le}),Fs=pn.map(Mr=>a.createElement(gc,{key:Yl(Mr.value),item:Mr,state:Nt,onNavigate:le}));if(Fs.length===0&&un.value.emptyMessageId){const Mr=(0,dr.Y)(un.value.emptyMessageId);Fs.push(a.createElement("div",{key:"empty-message",className:Mt.emptyMessage},Mr))}const sr=Gn&&a.createElement("li",{key:Gn,className:Mt.subtitle},Gn),br=[Fs,sr],Qr=a.createElement(Po.$,{hideHorizontalTrack:!0,hideVerticalTrack:!0,showScrollIndicators:!0,key:"scrollContainer"},U?br.reverse():br),ri=[Ta,Qr];return a.createElement("ul",{className:Mt.menu,ref:Kt,...(0,Xo.dG)(Gt,pt),tabIndex:-1},U?ri.reverse():ri)}function zi(B,U){return{menu:k.css`
      background-color: ${B.colors.background.primary};
      border: 1px solid ${B.components.panel.borderColor};
      box-shadow: ${B.shadows.z3};
      display: flex;
      flex-direction: column;
      list-style: none;
      max-height: 400px;
      max-width: 300px;
      min-width: 140px;
      transition: ${B.transitions.create("opacity")};
      z-index: ${B.zIndex.sidemenu};
    `,subtitle:k.css`
      background-color: transparent;
      border-${U?"bottom":"top"}: 1px solid ${B.colors.border.weak};
      color: ${B.colors.text.secondary};
      font-size: ${B.typography.bodySmall.fontSize};
      font-weight: ${B.typography.bodySmall.fontWeight};
      padding: ${B.spacing(1)} ${B.spacing(2)} ${B.spacing(1)};
      text-align: left;
      white-space: nowrap;
    `,emptyMessage:k.css`
      font-style: italic;
      padding: ${B.spacing(.5,2)};
    `}}var To=e(35210),qu=e(91053);const Io="navbar-menu-portal-container",pc=()=>document.getElementById(Io)??document.body,hc=()=>{const B=(0,he.l4)(),U=em(B);return a.createElement("div",{className:U.menuPortalContainer,id:Io})};hc.displayName="NavBarMenuPortalContainer";const em=B=>({menuPortalContainer:(0,k.css)({left:0,position:"fixed",right:0,top:0,zIndex:B.zIndex.sidemenu})});function tm(B){const{item:U,isActive:z,label:Q,children:le,reverseMenuDirection:Ce,...Ie}=B,[Je,it]=(0,a.useState)(!1),{menuIdOpen:pt,setMenuIdOpen:vt}=Vi(),Mt=(0,he.l4)(),Nt=nm(Mt,z),Kt=(0,qu.W)({...Ie}),Gt=a.useRef(null),{menuTriggerProps:en,menuProps:pn}=(0,So.u4)({},Kt,Gt);(0,a.useEffect)(()=>{U.highlightId&&(0,Vr.SZ)(`feature-highlights-${U.highlightId}-nav`,"test","")},[U.highlightId]);const{hoverProps:un}=(0,Oo.XI)({onHoverChange:Zr=>{Zr?(Kt.open(),vt(U.id)):(Kt.close(),vt(void 0))}});(0,a.useEffect)(()=>{pt!==U.id?(Kt.close(),it(!1)):Kt.open()},[pt,Kt,U.id]);const{keyboardProps:Gn}=(0,Oo.v5)({onKeyDown:Zr=>{switch(Zr.key){case"ArrowRight":Kt.isOpen||(Kt.open(),vt(U.id)),it(!0);break;case"Tab":vt(void 0);break;default:break}}}),{buttonProps:Ta}=(0,To.U)(en,Gt),Fs=U.highlightText?jr:a.Fragment,sr=a.createElement(Fs,null,a.createElement("span",{className:Nt.icon},a.createElement(xo,{link:U})));let br=a.createElement("button",{className:Nt.element,...Ta,...Gn,...un,ref:Gt,onClick:U?.onClick,"aria-label":Q},sr);U?.url&&(br=!U.target&&U.url.startsWith("/")?a.createElement(jo.r,{...Ta,...Gn,...un,ref:Gt,href:U.url,target:U.target,onClick:U?.onClick,className:Nt.element,"aria-label":Q},sr):a.createElement("a",{href:U.url,target:U.target,onClick:U?.onClick,...Ta,...Gn,...un,ref:Gt,className:Nt.element,"aria-label":Q},sr));const Qr=a.useRef(null),{dialogProps:ri}=(0,Go.R)({},Qr),{overlayProps:Mr}=(0,pr.Ir)({onClose:()=>{Kt.close(),vt(void 0)},isOpen:Kt.isOpen,isDismissable:!0},Qr);let{overlayProps:tf}=(0,pr.tN)({targetRef:Gt,overlayRef:Qr,placement:Ce?"right bottom":"right top",isOpen:Kt.isOpen});const{focusWithinProps:yr}=(0,Oo.L_)({onFocusWithin:Zr=>{Zr.target.id===Gt.current?.id&&(vt(U.id),Kt.open()),Zr.target.scrollIntoView?.({block:"nearest"})},onBlurWithin:Zr=>{Zr.target?.getAttribute("role")==="menuitem"&&!Qr.current?.contains(Zr.relatedTarget)&&vt(void 0)}});return a.createElement("div",{className:(0,k.cx)(Nt.element,"dropdown"),...yr},br,Kt.isOpen&&a.createElement(pr.Xj,{portalContainer:pc()},a.createElement($i.Provider,{value:{menuProps:pn,menuHasFocus:Je,onClose:()=>Kt.close(),onLeft:()=>{it(!1),Gt.current?.focus()}}},a.createElement(Co.MT,{restoreFocus:!0},a.createElement("div",{...Mr,...tf,...ri,...un,ref:Qr},a.createElement(pr.U4,{onDismiss:()=>Kt.close()}),le,a.createElement(pr.U4,{onDismiss:()=>Kt.close()}))))))}const nm=(B,U)=>({element:(0,k.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"grid",padding:0,placeContent:"center",height:B.spacing(6),width:B.spacing(7),"&::before":{display:U?"block":"none",content:'" "',position:"absolute",left:B.spacing(1),top:B.spacing(1.5),bottom:B.spacing(1.5),width:B.spacing(.5),borderRadius:B.shape.borderRadius(1),backgroundImage:B.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:B.colors.action.hover,boxShadow:"none",color:B.colors.text.primary,outline:`${B.shape.borderRadius(1)} solid ${B.colors.primary.main}`,outlineOffset:`-${B.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,k.css)({height:"100%",width:"100%"})});function vc({label:B,children:U,url:z,target:Q,isActive:le=!1,onClick:Ce,highlightText:Ie,className:Je,elClassName:it}){const pt=(0,he.l4)(),vt=Us(pt,le),Mt=Ie?a.createElement(jr,null,a.createElement("div",{className:vt.icon},U)):a.createElement("div",{className:vt.icon},U),Nt=(0,k.cx)(vt.element,it),Kt=()=>z?!Q&&z.startsWith("/")?a.createElement(jo.r,{className:Nt,href:z,target:Q,"aria-label":B,onClick:Ce,"aria-haspopup":"true"},Mt):a.createElement("a",{href:z,target:Q,className:Nt,onClick:Ce,"aria-label":B},Mt):a.createElement("button",{className:Nt,onClick:Ce,"aria-label":B},Mt);return a.createElement("div",{className:(0,k.cx)(vt.container,Je)},Kt())}function Us(B,U){return{container:(0,k.css)({position:"relative",color:U?B.colors.text.primary:B.colors.text.secondary,display:"grid","&:hover":{backgroundColor:B.colors.action.hover,color:B.colors.text.primary}}),element:(0,k.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"block",padding:0,overflowWrap:"anywhere","&::before":{display:U?"block":"none",content:"' '",position:"absolute",left:B.spacing(1),top:B.spacing(1.5),bottom:B.spacing(1.5),width:B.spacing(.5),borderRadius:B.shape.borderRadius(1),backgroundImage:B.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:B.colors.action.hover,boxShadow:"none",color:B.colors.text.primary,outline:`${B.shape.borderRadius(1)} solid ${B.colors.primary.main}`,outlineOffset:`-${B.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,k.css)({height:"100%",width:"100%"})}}function _o({icon:B,isActive:U,isDivider:z,onClick:Q,styleOverrides:le,target:Ce,text:Ie,url:Je,isMobile:it=!1}){const pt=(0,he.l4)(),vt=gf(pt,U),Mt=(0,k.cx)(vt.element,le),Nt=a.createElement("div",{className:vt.linkContent},B&&a.createElement(sa.J,{"data-testid":"dropdown-child-icon",name:B}),a.createElement("div",{className:vt.linkText},Ie),Ce==="_blank"&&a.createElement(sa.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:vt.externalLinkIcon}));let Kt=a.createElement("button",{className:Mt,onClick:Q,tabIndex:-1},Nt);return Je&&(Kt=!Ce&&Je.startsWith("/")?a.createElement(jo.r,{className:Mt,href:Je,target:Ce,onClick:Q,tabIndex:it?0:-1},Nt):a.createElement("a",{href:Je,target:Ce,className:Mt,onClick:Q,tabIndex:it?0:-1},Nt)),it?z?a.createElement("div",{"data-testid":"dropdown-child-divider",className:vt.divider,tabIndex:-1,"aria-disabled":!0}):a.createElement("li",{className:vt.listItem},Kt):z?a.createElement("div",{"data-testid":"dropdown-child-divider",className:vt.divider,tabIndex:-1,"aria-disabled":!0}):a.createElement("div",{style:{position:"relative"}},Kt)}_o.displayName="NavBarMenuItem";const gf=(B,U)=>({linkContent:(0,k.css)({alignItems:"center",display:"flex",gap:"0.5rem",width:"100%"}),linkText:(0,k.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,k.css)({color:B.colors.text.secondary,gridColumnStart:3}),element:(0,k.css)({alignItems:"center",background:"none",border:"none",color:U?B.colors.text.primary:B.colors.text.secondary,display:"flex",flex:1,fontSize:"inherit",height:"100%",overflowWrap:"anywhere",padding:B.spacing(.5,2),textAlign:"left",width:"100%","&:hover, &:focus-visible":{backgroundColor:B.colors.action.hover,color:B.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${B.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:U?"block":"none",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:B.spacing(.5),borderRadius:B.shape.borderRadius(1),backgroundImage:B.colors.gradients.brandVertical}}),listItem:(0,k.css)({position:"relative",display:"flex",alignItems:"center","&:hover, &:focus-within":{color:B.colors.text.primary,"> *:first-child::after":{backgroundColor:B.colors.action.hover}}}),divider:(0,k.css)({borderBottom:`1px solid ${B.colors.border.weak}`,height:"1px",margin:`${B.spacing(1)} 0`,overflow:"hidden"})}),Ro=({isActive:B=!1,className:U,reverseMenuDirection:z=!1,link:Q})=>{const le=(0,he.l4)(),Ce=Q.children??[],{menuIdOpen:Ie}=Vi(),it=(z?[...Ce].reverse():Ce).filter(en=>!en.hideFromMenu).map(en=>({...en,menuItemType:Qs.VO.Item})),pt=it.length===0,vt=am(le,pt,B),Mt={...Q,children:it,menuItemType:Qs.VO.Section},Nt=[Mt].concat(it),Kt=en=>{const{url:pn,target:un,onClick:Gn}=en;Gn?.(),pn&&(!un&&pn.startsWith("/")?R.E1.push(S.u.stripBaseFromUrl(pn)):window.open(pn,un))},Gt=(0,dr.Y)(Q.id)??Q.text;return a.createElement("li",{className:(0,k.cx)(vt.container,{[vt.containerHover]:Mt.id===Ie},U)},a.createElement(tm,{item:Mt,isActive:B,label:Gt,reverseMenuDirection:z},a.createElement(ff,{items:Nt,reverseMenuDirection:z,adjustHeightForBorder:pt,disabledKeys:["divider","subtitle"],"aria-label":Mt.text,onNavigate:Kt},en=>{const pn=(0,dr.Y)(en.id)??en.text,un=en.menuItemType===Qs.VO.Section,Gn=en.icon?(0,Ii.toIconName)(en.icon):void 0,Ta=en.showIconInNavbar&&!un?Gn:void 0;return a.createElement(uc.ck,{key:Yl(en),textValue:en.text},a.createElement(_o,{isDivider:!un&&en.divider,icon:Ta,target:en.target,text:pn,url:en.url,onClick:en.onClick,styleOverrides:(0,k.cx)(vt.primaryText,{[vt.header]:un})}))})))},am=(B,U,z)=>({...Us(B,z),containerHover:(0,k.css)({backgroundColor:B.colors.action.hover,color:B.colors.text.primary}),primaryText:(0,k.css)({color:B.colors.text.primary}),header:(0,k.css)({height:`calc(${B.spacing(6)} - ${U?2:1}px)`,fontSize:B.typography.h4.fontSize,fontWeight:B.typography.h4.fontWeight,padding:`${B.spacing(1)} ${B.spacing(2)}`,whiteSpace:"nowrap",width:"100%"})});var Ec=e(53535),sm=e(9085),yc=e.n(sm);const Hi=({className:B,isExpanded:U,onClick:z})=>{const Q=(0,he.l4)(),le=rm(Q);return a.createElement(es.h,{"aria-label":U?"Close navigation menu":"Open navigation menu",name:U?"angle-left":"angle-right",className:yc()(B,le.icon),size:"xl",onClick:z})};Hi.displayName="NavBarToggle";const rm=B=>({icon:(0,k.css)({backgroundColor:B.colors.background.secondary,border:`1px solid ${B.colors.border.weak}`,borderRadius:"50%",marginRight:0,zIndex:B.zIndex.sidemenu+1,[B.breakpoints.down("md")]:{display:"none"}})}),ki="350px";function Pc({activeItem:B,isOpen:U,navItems:z,onClose:Q,setMenuAnimationInProgress:le}){const Ce=(0,he.l4)(),Ie=om(Ce),Je=Ce.transitions.duration.standard,it=im(Ce,Je),pt=(0,a.useRef)(null),vt=(0,a.useRef)(null),{dialogProps:Mt}=(0,Go.R)({},pt),{overlayProps:Nt,underlayProps:Kt}=(0,pr.Ir)({isDismissable:!0,isOpen:U,onClose:Q},pt);return a.createElement(pr.Xj,null,a.createElement(Co.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},a.createElement(Yo.Z,{nodeRef:pt,onEnter:()=>le(!0),onExited:()=>le(!1),appear:U,in:U,classNames:it.overlay,timeout:Je},a.createElement("div",{"data-testid":"navbarmenu",ref:pt,...Nt,...Mt,className:Ie.container},a.createElement("div",{className:Ie.mobileHeader},a.createElement(sa.J,{name:"bars",size:"xl"}),a.createElement(es.h,{"aria-label":"Close navigation menu",name:"times",onClick:Q,size:"xl",variant:"secondary"})),a.createElement(Hi,{className:Ie.menuCollapseIcon,isExpanded:U,onClick:()=>{(0,Vr.ff)("grafana_navigation_collapsed"),Q()}}),a.createElement("nav",{className:Ie.content},a.createElement(Po.$,{hideHorizontalTrack:!0},a.createElement("ul",{className:Ie.itemList},z.map(Gt=>a.createElement(lm,{link:Gt,onClose:Q,activeItem:B,key:Gt.text})))))))),a.createElement(Yo.Z,{nodeRef:vt,appear:U,in:U,classNames:it.backdrop,timeout:Je},a.createElement("div",{className:Ie.backdrop,...Kt,ref:vt})))}Pc.displayName="NavBarMenu";const om=B=>({backdrop:(0,k.css)({backdropFilter:"blur(1px)",backgroundColor:B.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:0,zIndex:B.zIndex.modalBackdrop}),container:(0,k.css)({display:"flex",bottom:0,flexDirection:"column",left:0,paddingTop:B.spacing(1),marginRight:B.spacing(1.5),right:0,zIndex:B.zIndex.modal,position:"fixed",top:0,boxSizing:"content-box",[B.breakpoints.up("md")]:{borderRight:`1px solid ${B.colors.border.weak}`,right:"unset"}}),content:(0,k.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,k.css)({borderBottom:`1px solid ${B.colors.border.weak}`,display:"flex",justifyContent:"space-between",padding:B.spacing(1,2,2),[B.breakpoints.up("md")]:{display:"none"}}),itemList:(0,k.css)({display:"grid",gridAutoRows:`minmax(${B.spacing(6)}, auto)`,minWidth:ki}),menuCollapseIcon:(0,k.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"})}),im=(B,U)=>{const z={transitionDuration:`${U}ms`,transitionTimingFunction:B.transitions.easing.easeInOut,[B.breakpoints.down("md")]:{overflow:"hidden"}},Q={...z,transitionProperty:"background-color, box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},le={...z,transitionProperty:"opacity"},Ce={backgroundColor:B.colors.background.canvas,boxShadow:B.shadows.z3,width:"100%",[B.breakpoints.up("md")]:{width:ki}},Ie={boxShadow:"none",width:0,[B.breakpoints.up("md")]:{backgroundColor:B.colors.background.primary,width:B.spacing(7)}},Je={opacity:1},it={opacity:0};return{backdrop:{appear:(0,k.css)(it),appearActive:(0,k.css)(le,Je),appearDone:(0,k.css)(Je),exit:(0,k.css)(Je),exitActive:(0,k.css)(le,it)},overlay:{appear:(0,k.css)(Ie),appearActive:(0,k.css)(Q,Ce),appearDone:(0,k.css)(Ce),exit:(0,k.css)(Ce),exitActive:(0,k.css)(Q,Ie)}}};function lm({link:B,activeItem:U,onClose:z}){const Q=(0,he.wW)(Gi);if(dm(B))return a.createElement(Cc,{onClose:z,link:B,isActive:Ur(B,U)},a.createElement("ul",{className:Q.children},B.children.map(le=>{const Ce=le.icon?(0,Ii.toIconName)(le.icon):void 0;return!le.divider&&a.createElement(_o,{key:`${B.text}-${le.text}`,isActive:U===le,isDivider:le.divider,icon:le.showIconInNavbar?Ce:void 0,onClick:()=>{le.onClick?.(),z()},styleOverrides:Q.item,target:le.target,text:(0,dr.Y)(le.id)??le.text,url:le.url,isMobile:!0})})));if(B.emptyMessageId){const le=(0,dr.Y)(B.emptyMessageId);return a.createElement(Cc,{onClose:z,link:B,isActive:Ur(B,U)},a.createElement("ul",{className:Q.children},a.createElement("div",{className:Q.emptyMessage},le)))}else{const le=B.highlightText?jr:a.Fragment;return a.createElement("li",{className:Q.flex},a.createElement(vc,{className:Q.itemWithoutMenu,elClassName:Q.fullWidth,label:B.text,url:B.url,target:B.target,onClick:()=>{B.onClick?.(),z()},isActive:B===U},a.createElement("div",{className:Q.itemWithoutMenuContent},a.createElement("div",{className:Q.iconContainer},a.createElement(le,null,a.createElement(xo,{link:B}))),a.createElement("span",{className:Q.linkText},(0,dr.Y)(B.id)??B.text))))}}const Gi=B=>({children:(0,k.css)({display:"flex",flexDirection:"column"}),item:(0,k.css)({padding:`${B.spacing(1)} ${B.spacing(1.5)}`,width:`calc(100% - ${B.spacing(3)})`,"&::before":{display:"none"}}),flex:(0,k.css)({display:"flex"}),itemWithoutMenu:(0,k.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,k.css)({height:"100%",width:"100%"}),iconContainer:(0,k.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,k.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${B.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,k.css)({fontSize:B.typography.pxToRem(14),justifySelf:"start",padding:B.spacing(.5,4.25,.5,.5)}),emptyMessage:(0,k.css)({color:B.colors.text.secondary,fontStyle:"italic",padding:B.spacing(1,1.5)})});function Cc({link:B,isActive:U,children:z,className:Q,onClose:le}){const Ce=(0,he.wW)(cm),[Ie,Je]=(0,jl.Z)(`grafana.navigation.expanded[${B.text}]`,!1),it=B.highlightText?jr:a.Fragment;return a.createElement("li",{className:(0,k.cx)(Ce.menuItem,Q)},a.createElement(vc,{isActive:U,label:B.text,url:B.url,target:B.target,onClick:()=>{B.onClick?.(),le()},className:Ce.collapsibleMenuItem,elClassName:Ce.collapsibleIcon},a.createElement(it,null,a.createElement(xo,{link:B}))),a.createElement("div",{className:Ce.collapsibleSectionWrapper},a.createElement(Ec.s,{isOpen:Boolean(Ie),onToggle:pt=>Je(pt),className:Ce.collapseWrapper,contentClassName:Ce.collapseContent,label:a.createElement("div",{className:(0,k.cx)(Ce.labelWrapper,{[Ce.primary]:U})},a.createElement("span",{className:Ce.linkText},(0,dr.Y)(B.id)??B.text))},z)))}const cm=B=>({menuItem:(0,k.css)({position:"relative",display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${B.spacing(7)} minmax(calc(${ki} - ${B.spacing(7)}), auto)`}),collapsibleMenuItem:(0,k.css)({height:B.spacing(6),width:B.spacing(7),display:"grid"}),collapsibleIcon:(0,k.css)({display:"grid",placeContent:"center"}),collapsibleSectionWrapper:(0,k.css)({display:"flex",flexGrow:1,alignSelf:"start",flexDirection:"column"}),collapseWrapper:(0,k.css)({paddingLeft:B.spacing(.5),paddingRight:B.spacing(4.25),minHeight:B.spacing(6),overflowWrap:"anywhere",alignItems:"center",color:B.colors.text.secondary,"&:hover, &:focus-within":{backgroundColor:B.colors.action.hover,color:B.colors.text.primary},"&:focus-within":{boxShadow:"none",outline:`2px solid ${B.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),collapseContent:(0,k.css)({padding:0}),labelWrapper:(0,k.css)({fontSize:"15px"}),primary:(0,k.css)({color:B.colors.text.primary}),linkText:(0,k.css)({fontSize:B.typography.pxToRem(14),justifySelf:"start"})});function dm(B){return Boolean(B.children&&B.children.length>0)}const um=()=>{R.E1.partial({search:"open"})},xc=a.memo(()=>{const B=(0,on.useSelector)(un=>un.navBarTree),U=(0,he.l4)(),z=Dc(U),Q=(0,Ds.TH)(),[le,Ce]=(0,a.useState)(!1),[Ie,Je]=(0,a.useState)(!1),[it,pt]=(0,a.useState)(void 0),vt=rs({id:kl,onClick:um,text:"Search dashboards",icon:"search"},le),Mt=rs({id:"home",text:"Home",url:Ga.v.bootData.user.isSignedIn?Ga.v.appSubUrl||"/":"/login",icon:"grafana"},le),Nt=(0,y.cloneDeep)(B).filter(un=>un.hideFromMenu!==!0),Kt=Nt.filter(un=>un.section===Qs.yV.Core).map(un=>rs(un,le)),Gt=Nt.filter(un=>un.section===Qs.yV.Plugin).map(un=>rs(un,le)),en=Si(Nt.filter(un=>un.section===Qs.yV.Config),Q).map(un=>rs(un,le)),pn=mu(Q)?vt:Ti(Nt,Q.pathname);return Yi(Q)?null:a.createElement("div",{className:z.navWrapper},a.createElement("nav",{className:(0,k.cx)(z.sidemenu,"sidemenu"),"data-testid":"sidemenu","aria-label":"Main menu"},a.createElement(fc.Provider,{value:{menuIdOpen:it,setMenuIdOpen:pt}},a.createElement(Co.MT,null,a.createElement("div",{className:z.mobileSidemenuLogo,key:"hamburger"},a.createElement(es.h,{name:"bars",tooltip:"Toggle menu",tooltipPlacement:"bottom",size:"xl",onClick:()=>Ce(!le)})),a.createElement(Hi,{className:z.menuExpandIcon,isExpanded:le,onClick:()=>{(0,Vr.ff)("grafana_navigation_expanded"),Ce(!0)}}),a.createElement(hc,null),a.createElement(vc,{elClassName:z.grafanaLogoInner,label:Mt.text,className:z.grafanaLogo,url:Mt.url,onClick:Mt.onClick},a.createElement(xo,{link:Mt})),a.createElement(Po.$,{hideHorizontalTrack:!0,hideVerticalTrack:!0,showScrollIndicators:!0},a.createElement("ul",{className:z.itemList},a.createElement(Ro,{className:z.search,isActive:pn===vt,link:vt}),Kt.map((un,Gn)=>a.createElement(Ro,{key:`${un.id}-${Gn}`,isActive:Ur(un,pn),link:{...un,subTitle:void 0}})),Gt.length>0&&Gt.map((un,Gn)=>a.createElement(Ro,{key:`${un.id}-${Gn}`,isActive:Ur(un,pn),link:un})),en.map((un,Gn)=>a.createElement(Ro,{key:`${un.id}-${Gn}`,isActive:Ur(un,pn),reverseMenuDirection:!0,link:un,className:(0,k.cx)({[z.verticalSpacer]:Gn===0})}))))))),(le||Ie)&&a.createElement("div",{className:z.menuWrapper},a.createElement(Pc,{activeItem:pn,isOpen:le,setMenuAnimationInProgress:Je,navItems:[Mt,vt,...Kt,...Gt,...en],onClose:()=>Ce(!1)})))});function Yi(B){const U=(0,R.Ox)(B.search);return!!((0,dc.U)(U)||B.pathname.indexOf("/d/")===0&&U.editview||U.editPanel)}xc.displayName="NavBar";const Dc=B=>({navWrapper:(0,k.css)({position:"relative",display:"flex",".sidemenu-hidden &":{display:"none"}}),sidemenu:(0,k.css)({label:"sidemenu",display:"flex",flexDirection:"column",backgroundColor:B.colors.background.primary,zIndex:B.zIndex.sidemenu,padding:`${B.spacing(1)} 0`,position:"relative",width:B.components.sidemenu.width,borderRight:`1px solid ${B.colors.border.weak}`,[B.breakpoints.down("md")]:{height:B.spacing(7),position:"fixed",paddingTop:"0px",backgroundColor:"inherit",borderRight:0}}),mobileSidemenuLogo:(0,k.css)({alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:B.spacing(2),[B.breakpoints.up("md")]:{display:"none"}}),itemList:(0,k.css)({backgroundColor:"inherit",display:"flex",flexDirection:"column",height:"100%",[B.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogo:(0,k.css)({alignItems:"stretch",display:"flex",flexShrink:0,height:B.spacing(6),justifyContent:"stretch",[B.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogoInner:(0,k.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%","> div":{height:"auto",width:"auto"}}),search:(0,k.css)({display:"none",marginTop:0,[B.breakpoints.up("md")]:{display:"grid"}}),verticalSpacer:(0,k.css)({marginTop:"auto"}),hideFromMobile:(0,k.css)({[B.breakpoints.down("md")]:{display:"none"}}),menuWrapper:(0,k.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:B.zIndex.sidemenu}),menuExpandIcon:(0,k.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"}),menuPortalContainer:(0,k.css)({zIndex:B.zIndex.sidemenu})});var mm=e(13426),ji=e.n(mm),bc=e(56065);function fm({error:B,errorInfo:U}){const z=(0,Ds.TH)(),Q=B?.name==="ChunkLoadError";return(0,a.useEffect)(()=>{Q&&z.search.indexOf("chunkNotFound")===-1&&(window.location.href=S.u.getUrlForPartial(z,{chunkNotFound:!0}))},[z,Q]),a.createElement(Ks.T,{navId:"error",layout:Qs.Qz.Canvas},a.createElement("div",{className:gm()},Q&&a.createElement("div",null,a.createElement("h2",null,"Unable to find application file"),a.createElement("br",null),a.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),a.createElement("br",null),a.createElement("div",{className:"gf-form-group"},a.createElement(me.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload")),a.createElement(bc.X,{title:"Error details",error:B,errorInfo:U})),!Q&&a.createElement(bc.X,{title:"An unexpected error happened",error:B,errorInfo:U})))}const gm=(0,ce.B)(()=>k.css`
    width: 500px;
    margin: 64px auto;
  `);function pm(){const B=(0,he.wW)(hm);return a.createElement("div",{className:B.loadingPage},a.createElement(nc.u,{text:"Loading..."}))}const hm=()=>({loadingPage:(0,k.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function vm(B){const{chrome:U,keybindings:z}=(0,Ho.p)();return U.setMatchedRoute(B.route),(0,a.useLayoutEffect)(()=>{z.clearAndInitGlobalBindings()},[z]),(0,a.useEffect)(()=>(Mc(B.route),Sc(),(0,R.GQ)("GrafanaRoute",!1,"Mounted",B.match),()=>{(0,R.GQ)("GrafanaRoute",!1,"Unmounted",B.route),Mc(B.route,!0)}),[]),(0,a.useEffect)(()=>{Sc(),(0,Vr.sm)(),(0,R.GQ)("GrafanaRoute",!1,"Updated",B)}),(0,R.GQ)("GrafanaRoute",!1,"Rendered",B.route),a.createElement(fl.SV,null,({error:Q,errorInfo:le})=>Q?a.createElement(fm,{error:Q,errorInfo:le}):a.createElement(a.Suspense,{fallback:a.createElement(pm,null)},a.createElement(B.route.component,{...B,queryParams:(0,R.Ox)(B.location.search)})))}function Em(B){return B.pageClass?B.pageClass.split(" "):[]}function Mc(B,U=!1){for(const z of Em(B))U?document.body.classList.remove(z):document.body.classList.add(z)}function Sc(){document.body.classList.remove("sidemenu-open--xs");const B=document.getElementById("tooltip");B?.parentElement?.removeChild(B);const U=document.querySelectorAll(".tooltip");for(let z=0;z<U.length;z++){const Q=U[z];Q.parentElement?.removeChild(Q)}for(const z of ji().drops)z.destroy()}var Qi=e(92973);const Zi=a.forwardRef(({action:B,active:U,currentRootActionId:z},Q)=>{const le=a.useMemo(()=>{if(!z)return B.ancestors;const Je=B.ancestors.findIndex(it=>it.id===z);return B.ancestors.slice(Je+1)},[B.ancestors,z]),Ce=(0,he.wW)(ym);let Ie=B.name;return B.children&&!B.command?.perform&&!Ie.endsWith("...")&&(Ie+="..."),a.createElement("div",{ref:Q,className:(0,k.cx)(Ce.row,U&&Ce.activeRow)},a.createElement("div",{className:Ce.actionContainer},B.icon,a.createElement("div",{className:Ce.textContainer},a.createElement("div",null,le.length>0&&le.map(Je=>a.createElement(a.Fragment,{key:Je.id},a.createElement("span",{className:Ce.breadcrumbAncestor},Je.name),a.createElement("span",{className:Ce.breadcrumbAncestor},"\u203A"))),a.createElement("span",null,Ie))),B.subtitle&&a.createElement("span",{className:Ce.subtitleText},B.subtitle)))});Zi.displayName="ResultItem";const ym=B=>({row:(0,k.css)({padding:B.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:B.shape.borderRadius(2),margin:B.spacing(0,1)}),activeRow:(0,k.css)({color:B.colors.text.maxContrast,background:B.colors.emphasize(B.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:B.spacing(.5),borderRadius:B.shape.borderRadius(2),backgroundImage:B.colors.gradients.brandVertical}}),actionContainer:(0,k.css)({display:"flex",gap:B.spacing(1),alignItems:"center",fontSize:B.typography.fontSize}),textContainer:(0,k.css)({display:"flex",flexDirection:"column"}),shortcut:(0,k.css)({padding:B.spacing(0,1),background:B.colors.background.secondary,borderRadius:B.shape.borderRadius(),fontSize:B.typography.fontSize}),breadcrumbAncestor:(0,k.css)({marginRight:B.spacing(1),color:B.colors.text.secondary}),subtitleText:(0,k.css)({fontSize:B.typography.fontSize-2}),shortcutContainer:(0,k.css)({display:"grid",gridAutoFlow:"column",gap:B.spacing(1)})});var Pm=e(99151),Cm=e.n(Pm),xm=e(13019),Oc=e(64823);const Dm=4,Tc=3,so=2,bm=1,Ic=100,Rc=5,Mm=Cm()(Om,200);async function Sm(){const B=(await xm.Z.getDashboardOpened()).slice(0,Rc),z=(await(0,Oc.getGrafanaSearcher)().search({kind:["dashboard"],limit:Rc,uid:B})).view.toArray();return z.sort((le,Ce)=>{const Ie=B.indexOf(le.uid),Je=B.indexOf(Ce.uid);return Ie-Je}),z.map(le=>{const{url:Ce,name:Ie}=le;return{id:`recent-dashboards${Ce}`,name:`${Ie}`,section:(0,wa.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:Dm,perform:()=>{R.E1.push(S.u.stripBaseFromUrl(Ce))}}})}async function Om(B){return B.length===0?[]:(await(0,Oc.getGrafanaSearcher)().search({kind:["dashboard"],query:B,limit:Ic})).view.map(Q=>{const{url:le,name:Ce}=Q;return{id:`go/dashboard${le}`,name:`${Ce}`,section:(0,wa.t)("command-palette.section.dashboard-search-results","Dashboards"),priority:bm,perform:()=>{R.E1.push(S.u.stripBaseFromUrl(le))}}})}function Ac(B,U){const[z,Q]=(0,a.useState)([]),[le,Ce]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{U&&B.length>0?(Ce(!0),Mm(B).then(Ie=>{Q(Ie),Ce(!1)})):Q([])},[U,B]),{dashboardResults:z,isFetchingDashboardResults:le}}var pf=e(36328),Lc=e(1821),Ir=e(42454);async function Bc(B,U){const z=(0,pf.j)({colors:{mode:B}});if(z.flags.topnav=b.vc.featureToggles.topnav,_a.Z.publish(new Lc.hD(z)),b.vc.theme2.isDark=z.isDark,U)return;const Q=document.createElement("link");if(Q.rel="stylesheet",Q.href=b.vc.bootData.themePaths[z.colors.mode],Q.onload=()=>{const Ie=document.getElementsByTagName("link");for(let Je=0;Je<Ie.length;Je++){const it=Ie[Je];it.href&&it.href.includes(`build/grafana.${z.isDark?"light":"dark"}`)&&it.remove()}},document.body.appendChild(Q),!Ya.Vt.isSignedIn)return;const le=new Ir.y("user"),Ce=await le.load();await le.update({...Ce,theme:z.colors.mode})}async function wc(B){const U=b.vc.theme2;Bc(U.isDark?"light":"dark",B)}const hf=()=>(0,wa.t)("command-palette.section.pages","Pages");function ei(B){return"navModel."+B.id}function Nc(B,U){const z=[];for(const Q of B){const{url:le,text:Ce,isCreateAction:Ie,children:Je}=Q,it=Boolean(Je?.length);if(!(le||it))continue;const pt=Ie?(0,wa.t)("command-palette.section.actions","Actions"):hf(),vt={id:ei(Q),name:Ce,section:pt,perform:le?()=>R.E1.push(S.u.stripBaseFromUrl(le)):void 0,parent:U&&ei(U),priority:Tc};if(z.push(vt),Je?.length){const Mt=Nc(Je,Q);z.push(...Mt)}}return z}const Tm=B=>{const U=[{id:"preferences/theme",name:(0,wa.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,wa.t)("command-palette.section.preferences","Preferences"),priority:so},{id:"preferences/dark-theme",name:(0,wa.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>Bc("dark"),parent:"preferences/theme",priority:so},{id:"preferences/light-theme",name:(0,wa.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>Bc("light"),parent:"preferences/theme",priority:so}];Ga.v.featureToggles.topNavCommandPalette||U.unshift({id:"go/search",name:(0,wa.t)("command-palette.action.search","Search"),keywords:"navigate",perform:()=>R.E1.push("?search=open"),section:(0,wa.t)("command-palette.section.pages","Pages"),priority:Tc});const z=Nc(B);return[...U,...z]};function Uc(B){const[U,z]=(0,a.useState)([]),[Q,le]=(0,a.useState)([]),{navBarTree:Ce}=(0,on.useSelector)(Ie=>({navBarTree:Ie.navBarTree}));return(0,a.useEffect)(()=>{const Ie=Tm(Ce);z(Ie)},[Ce]),(0,a.useEffect)(()=>{B?le([]):Sm().then(Ie=>le(Ie)).catch(Ie=>{console.error("Error loading recent dashboard actions",Ie)})},[B]),[...Q,...U]}var Fc=e(12398),Ji=e(15346);const Im={name:"none",priority:$s.Priority.NORMAL};function Xi(B,U){return U.priority-B.priority}function Wc(){const{search:B,actions:U,rootActionId:z}=(0,$s.useKBar)(vt=>({search:vt.searchQuery,actions:vt.actions,rootActionId:vt.currentRootActionId})),Q=a.useMemo(()=>Object.keys(U).reduce((vt,Mt)=>{const Nt=U[Mt];if(!Nt.parent&&!z&&vt.push(Nt),Nt.id===z)for(let Kt=0;Kt<Nt.children.length;Kt++)vt.push(Nt.children[Kt]);return vt},[]).sort(Xi),[U,z]),le=a.useCallback(vt=>{let Mt=[];for(let Nt=0;Nt<vt.length;Nt++)Mt.push(vt[Nt]);return function Nt(Kt,Gt=Mt){for(let en=0;en<Kt.length;en++)if(Kt[en].children.length>0){let pn=Kt[en].children;for(let un=0;un<pn.length;un++)Gt.push(pn[un]);Nt(Kt[en].children,Gt)}return Gt}(vt)},[]),Ce=!B,Ie=a.useMemo(()=>Ce?Q:le(Q),[le,Q,Ce]),Je=Rm(Ie,B),it=a.useMemo(()=>{let vt={},Mt=[],Nt=[];for(let Gt=0;Gt<Je.length;Gt++){const en=Je[Gt],pn=en.action,un=en.score||$s.Priority.NORMAL,Gn={name:typeof pn.section=="string"?pn.section:pn.section?.name||Im.name,priority:typeof pn.section=="string"?un:pn.section?.priority||0+un};vt[Gn.name]||(vt[Gn.name]=[],Mt.push(Gn)),vt[Gn.name].push({priority:pn.priority+un,action:pn})}Nt=Mt.sort(Xi).map(Gt=>({name:Gt.name,actions:vt[Gt.name].sort(Xi).map(en=>en.action)}));let Kt=[];for(let Gt=0;Gt<Nt.length;Gt++){let en=Nt[Gt];en.name!==Im.name&&Kt.push(en.name);for(let pn=0;pn<en.actions.length;pn++)Kt.push(en.actions[pn])}return Kt},[Je]),pt=a.useMemo(()=>z,[it]);return a.useMemo(()=>({results:it,rootActionId:pt}),[pt,it])}function Rm(B,U){const z=$c(),Q=a.useMemo(()=>({filtered:B,search:U}),[B,U]),{filtered:le,search:Ce}=(0,Ji.useThrottledValue)(Q);return a.useMemo(()=>{if(Ce.trim()==="")return le.map(it=>({score:0,action:it}));const Ie=le.map(it=>[it.name,it.keywords,it.subtitle].join(" ").toLowerCase()),Je=[];if(Ce.length>Am){const it=Ce.toLowerCase();for(let pt=0;pt<Ie.length;pt++){const Mt=Ie[pt].toLowerCase().indexOf(it);if(Mt>-1){const Nt=Ie.length-Mt,Kt=le[pt];Je.push({score:Nt,action:Kt})}}}else{const it=new Set,pt=z.split(Ce),vt=pt.length<5?Fc.Z.permute(pt).map(Mt=>Mt.join(" ")):[Ce];for(const Mt of vt){const Nt=z.filter(Ie,Mt),Kt=z.info(Nt,Ie,Mt),Gt=z.sort(Kt,Ie,Mt);for(let en=0;en<Gt.length;en++){const pn=Gt[en];if(!it.has(pn)){it.add(pn);const un=Gt.length-en,Gn=le[Kt.idx[pn]];Je.push({score:un,action:Gn})}}}}return Je},[le,Ce,z])}const Am=25;function $c(){const B=a.useRef();return B.current||(B.current=new Fc.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1})),B.current}const Lm=()=>{const B=(0,he.wW)(_i),{query:U,showing:z,searchQuery:Q}=(0,$s.useKBar)(vt=>({showing:vt.visualState===$s.VisualState.showing,searchQuery:vt.searchQuery})),le=Uc(Q);(0,$s.useRegisterActions)(le,[le]);const{dashboardResults:Ce,isFetchingDashboardResults:Ie}=Ac(Q,z),Je=(0,a.useRef)(null),{overlayProps:it}=(0,pr.Ir)({isOpen:z,onClose:()=>U.setVisualState($s.VisualState.animatingOut)},Je),{dialogProps:pt}=(0,Go.R)({},Je);return(0,a.useEffect)(()=>{z&&(0,Vr.ff)("command_palette_opened")},[z]),le.length>0?a.createElement($s.KBarPortal,null,a.createElement($s.KBarPositioner,{className:B.positioner},a.createElement($s.KBarAnimator,{className:B.animator},a.createElement(Co.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement("div",{...it,...pt},a.createElement("div",{className:B.searchContainer},Ie?a.createElement(Ol.$,{className:B.spinner}):a.createElement(sa.J,{name:"search",size:"md"}),a.createElement($s.KBarSearch,{defaultPlaceholder:(0,wa.t)("command-palette.search-box.placeholder","Search Grafana"),className:B.search})),a.createElement("div",{className:B.resultsContainer},a.createElement(Bm,{dashboardResults:Ce}))))))):null},Bm=({dashboardResults:B})=>{const{results:U,rootActionId:z}=Wc(),Q=(0,he.wW)(_i),le=(0,wa.t)("command-palette.section.dashboard-search-results","Dashboards"),Ce=(0,a.useMemo)(()=>B.map(Je=>new $s.ActionImpl(Je,{store:{}})),[B]),Ie=(0,a.useMemo)(()=>Ce.length>0?[...U,le,...Ce]:U,[U,le,Ce]);return a.createElement($s.KBarResults,{items:Ie,maxHeight:650,onRender:({item:Je,active:it})=>{const pt=Ie[0]===Je;return typeof Je=="string"?a.createElement("div",{className:(0,k.cx)(Q.sectionHeader,pt&&Q.sectionHeaderFirst)},Je):a.createElement(Zi,{action:Je,active:it,currentRootActionId:z})}})},_i=B=>{const U=Boolean(Ga.v.featureToggles.topNavCommandPalette);return{positioner:(0,k.css)({zIndex:B.zIndex.portal,marginTop:"0px",paddingTop:U?"4px !important":void 0,"&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:B.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,k.css)({maxWidth:B.breakpoints.values.md,width:"100%",background:B.colors.background.primary,color:B.colors.text.primary,borderRadius:B.shape.borderRadius(2),border:`1px solid ${B.colors.border.weak}`,overflow:"hidden",boxShadow:B.shadows.z3}),searchContainer:(0,k.css)({alignItems:"center",background:B.components.input.background,borderBottom:`1px solid ${B.colors.border.weak}`,display:"flex",gap:B.spacing(1),padding:B.spacing(1,2)}),search:(0,k.css)({fontSize:B.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:B.components.input.text}),spinner:(0,k.css)({height:"22px"}),resultsContainer:(0,k.css)({paddingBottom:B.spacing(1)}),sectionHeader:(0,k.css)({padding:B.spacing(1.5,2,1,2),fontSize:B.typography.bodySmall.fontSize,fontWeight:B.typography.fontWeightMedium,color:B.colors.text.primary,borderTop:`1px solid ${B.colors.border.weak}`,marginTop:B.spacing(1)}),sectionHeaderFirst:(0,k.css)({borderTop:"none",marginTop:0})}};var wm=e(72274);class Nm extends a.PureComponent{constructor(){super(...arguments),this.styles=Kc(Ga.v.theme2),this.state={},this.initListener=()=>{const U=(0,wm.gj)();U&&(this.subscription=U.getConnectionState().subscribe({next:z=>{this.setState({show:!z})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:U}=this.state;return U?!Ba.Vt.isSignedIn||!Ga.v.liveEnabled||Ba.Vt.user.orgRole===""?null:a.createElement("div",{className:this.styles.foot},a.createElement(On.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const Kc=(0,ce.B)(B=>({foot:k.css`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:k.css`
      border: 2px solid ${B.colors.warning.main};
      max-width: 400px;
      margin: auto;
      height: 3em;
    `}));let Vc=[],qi=[];function vf(B){Vc.push(B)}function Ef(B){qi.push(B)}class yf extends a.Component{constructor(U){super(U),this.renderRoute=z=>{const Q=z.roles?z.roles():[];return a.createElement(Ds.AW,{exact:z.exact===void 0?!0:z.exact,path:z.path,key:z.path,render:le=>((0,R.GQ)("AppWrapper",!1,"Rendering route",z,"with match",le.location),Q?.length&&!Q.some(Ce=>Ba.Vt.hasRole(Ce))?a.createElement(Ds.l_,{to:"/"}):a.createElement(vm,{...le,route:z}))})},this.state={}}async componentDidMount(){await Mi(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return a.createElement(Ds.rs,null,bi().map(U=>this.renderRoute(U)))}renderNavBar(){return Ga.v.isPublicDashboardView||!this.state.ready||Ga.v.featureToggles.topnav?null:a.createElement(xc,null)}commandPaletteEnabled(){const U=R.E1.getLocation().pathname==="/login";return Ga.v.featureToggles.commandPalette&&!Ga.v.isPublicDashboardView&&!U}searchBarEnabled(){return!Ga.v.isPublicDashboardView}render(){const{app:U}=this.props,{ready:z}=this.state;(0,R.GQ)("AppWrapper",!1,"rendering");const Q=le=>{(0,Vr.ff)("command_palette_action_selected",{actionId:le.id,actionName:le.name})};return a.createElement(a.StrictMode,null,a.createElement(mr.Provider,{store:Na.h},a.createElement(fl.z4,{style:"page"},a.createElement(Ho.h.Provider,{value:U.context},a.createElement(Qi.f,{value:Ga.v.theme2},a.createElement($s.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:Q}}},a.createElement(eo.$i,null,a.createElement(ci.n,null),this.commandPaletteEnabled()&&a.createElement(Lm,null),a.createElement("div",{className:"grafana-app"},a.createElement(Ds.F0,{history:R.E1.getHistory()},this.renderNavBar(),a.createElement(zu,null,qi.map((le,Ce)=>a.createElement(le,{key:Ce.toString()})),a.createElement($l,null),a.createElement(Xu,null),this.searchBarEnabled()&&a.createElement(pl._,null),z&&this.renderRoutes(),Vc.map((le,Ce)=>a.createElement(le,{key:Ce.toString()}))))),a.createElement(Nm,null),a.createElement(eo.Y0,null),a.createElement(gl.lO,null))))))))}}var Pf=e(3499),Cf=e(63479),Um=e(58379);function xf(B,U){if(B===U)return!0;if(!(B instanceof Object)||!(U instanceof Object))return!1;const z=Object.keys(B),Q=z.length;for(let le=0;le<Q;le++)if(!(z[le]in U))return!1;for(let le=0;le<Q;le++)if(B[z[le]]!==U[z[le]])return!1;return Q===Object.keys(U).length}class Df{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.state=new Cf.X({chromeless:!0,sectionNav:{text:(0,wa.t)("nav.home.title","Home")},searchBarHidden:Um.Z.getBool(this.searchBarStorageKey,!1),kioskMode:null}),this.onToggleMegaMenu=()=>{this.update({megaMenuOpen:!this.state.getValue().megaMenuOpen})},this.setMegaMenu=U=>{this.update({megaMenuOpen:U})},this.onToggleSearchBar=()=>{const U=!this.state.getValue().searchBarHidden;Um.Z.set(this.searchBarStorageKey,U),this.update({searchBarHidden:U})},this.onToggleKioskMode=()=>{const U=this.getNextKioskMode();this.update({kioskMode:U}),R.E1.partial({kiosk:this.getKioskUrlValue(U)})}}setMatchedRoute(U){this.currentRoute!==U&&(this.currentRoute=U,this.routeChangeHandled=!1)}update(U){const z=this.state.getValue(),Q={...z};this.routeChangeHandled||(Q.actions=void 0,Q.pageNav=void 0,Q.sectionNav={text:(0,wa.t)("nav.home.title","Home")},Q.chromeless=this.currentRoute?.chromeless,this.routeChangeHandled=!0),Object.assign(Q,U),Q.chromeless=Q.kioskMode===on.KioskMode.Full||this.currentRoute?.chromeless,xf(z,Q)||this.state.next(Q)}useState(){return(0,Pf.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),R.E1.partial({kiosk:null})}setKioskModeFromUrl(U){switch(U){case"tv":this.update({kioskMode:on.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:on.KioskMode.Full})}}getKioskUrlValue(U){switch(U){case on.KioskMode.TV:return"tv";case on.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:U,searchBarHidden:z}=this.state.getValue();return z||U===on.KioskMode.TV?(_a.Z.emit(no.SI.alertSuccess,[(0,wa.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),on.KioskMode.Full):U?null:on.KioskMode.TV}}var Fm=e(52974);function bf({actions:B,children:U,info:z,pageNav:Q,layout:le,renderTitle:Ce,subTitle:Ie}){const Je=(0,a.useContext)(Ci);return a.createElement(Ks.T,{navModel:Je.sectionNav,pageNav:Q,layout:le,actions:B,renderTitle:Ce,info:z,subTitle:Ie},a.createElement(Ks.T.Contents,null,U))}var Mf=e(27677);function Sf(B){const U=Of(B.target);if(!(B.ctrlKey||B.metaKey||B.defaultPrevented)&&U){let z=U.getAttribute("href");const Q=U.getAttribute("target");if(z&&!Q){const le=Mf.Cj.parseKeyValue(z.split("?")[1]),Ce=le.orgId&&Number(le.orgId)!==b.vc.bootData.user.orgId;if((0,R.GQ)("utils",!1,"intercepting link click",B),B.preventDefault(),z=S.u.stripBaseFromUrl(z),z[0]!=="/"||Ce)if(z.indexOf("://")>0||z.indexOf("mailto:")===0||Ce){window.location.href=z;return}else if(z.indexOf("#")===0){window.location.hash=z;return}else z=`/${z}`;R.E1.push(z)}}}function Of(B){for(;B!==null&&B.tagName;){if(B.tagName.toUpperCase()==="A")return B;B=B.parentNode}return null}var Tf=e(8928),If=e(2476);function Rf(B,...U){const z=(0,mr.connect)(...U)(B);return Q=>a.createElement(z,{...Q,store:Na.h})}function Af(B,...U){const z=(0,mr.connect)(...U)(B);return Q=>a.createElement(mr.Provider,{store:Na.h},a.createElement(z,{...Q,store:Na.h}))}const Wm=Af(B=>a.createElement(a.Fragment,null,a.createElement(eo.$i,{...B},a.createElement(eo.Y0,null))));class Lf{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.onReactModalDismiss=()=>{v.unmountComponentAtNode(this.reactModalNode),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){_a.Z.subscribe(zs.VJ,U=>this.showConfirmModal(U.payload)),_a.Z.subscribe(zs.Dn,U=>this.showModalReact(U.payload)),_a.Z.subscribe(Lc.EK,U=>(0,If.bY)(U.payload))}showModalReact(U){const{component:z,props:Q}=U,le={component:z,props:{...Q,isOpen:!0,onDismiss:this.onReactModalDismiss}},Ce=a.createElement((0,Qi.E)(Wm,Ga.v.theme2),le);this.reactModalRoot.appendChild(this.reactModalNode),v.render(Ce,this.reactModalNode)}showConfirmModal(U){const{confirmText:z,onConfirm:Q=()=>{},onDismiss:le,text2:Ce,altActionText:Ie,onAltAction:Je,noText:it,text:pt,text2htmlBind:vt,yesText:Mt="Yes",icon:Nt,title:Kt="Confirm",yesButtonVariant:Gt}=U,en={confirmText:Mt,confirmButtonVariant:Gt,confirmationText:z,icon:Nt,title:Kt,body:pt,description:Ce&&vt?Tf.QX.sanitize(Ce):Ce,isOpen:!0,dismissText:it,onConfirm:()=>{Q(),this.onReactModalDismiss()},onDismiss:()=>{le?.(),this.onReactModalDismiss()},onAlternative:Je?()=>{Je(),this.onReactModalDismiss()}:void 0,alternativeText:Ie},pn={component:xr.s,props:en},un=a.createElement((0,Qi.E)(Wm,Ga.v.theme2),pn);this.reactModalRoot.appendChild(this.reactModalNode),v.render(un,this.reactModalNode)}}var Bf=e(62009),wf=e(76804);function $m(B){return B.externalUserId.length?B.externalUserId:B.email}function el(B,U=!1){return new Promise(z=>{const Q=document.createElement("script");Q.onload=z,Q.src=B,Q.async=U,document.head.appendChild(Q)})}const Km=(0,Bf.h)("EchoSrv"),Vm=Km.logger;(0,wf.x)("echo",void 0,Km);class Nf{constructor(U){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const z of this.backends)z.flush()},this.addBackend=z=>{Vm("Adding backend",!1,z),this.backends.push(z)},this.addEvent=(z,Q)=>{const le=this.getMeta(),Ce={...z,meta:{...le,...Q}};for(const Ie of this.backends)(Ie.supportedEvents.length===0||Ie.supportedEvents.indexOf(Ce.type)>-1)&&Ie.addEvent(Ce);Vm("Reporting event",!1,Ce)},this.getMeta=()=>({sessionId:"",userId:Ba.Vt.user.id,userLogin:Ba.Vt.user.login,userSignedIn:Ba.Vt.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),url:window.location.href}),this.config={...this.config,...U},setInterval(this.flush,this.config.flushInterval)}}const Uf=(B,U)=>{(0,N.RP)().addEvent({type:N.ee.Performance,payload:{name:B,value:U}})},Eg=B=>captureException(B);class Ff{constructor(U){this.options=U,this.buffer=[],this.supportedEvents=[N.ee.Performance],this.addEvent=z=>{this.buffer.push(z.payload)},this.flush=()=>{this.buffer.length!==0&&(Wo.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var ti=e(66799);class Wf{constructor(U){this.options=U,this.supportedEvents=[N.ee.Pageview,N.ee.Interaction],this.addEvent=le=>{window.applicationInsights&&((0,ti.Si)(le)&&window.applicationInsights.trackPageView?.(),(0,ti.fV)(le)&&window.applicationInsights.trackEvent?.({name:le.payload.interactionName,properties:le.payload.properties}))},this.flush=()=>{};const z={config:{connectionString:U.connectionString,endpointUrl:U.endpointUrl}};el("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const le=new window.Microsoft.ApplicationInsights.ApplicationInsights(z);window.applicationInsights=le.loadAppInsights()})}}class zm{constructor(U){this.options=U,this.supportedEvents=[N.ee.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=le=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:le.payload.page})},this.flush=()=>{};const z=`https://www.googletagmanager.com/gtag/js?id=${U.googleAnalyticsId}`;el(z,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const Q={page_path:window.location.pathname};U.user&&(Q.user_id=$m(U.user)),this.googleAnalytics4SendManualPageViews=U.googleAnalytics4SendManualPageViews,window.gtag("config",U.googleAnalyticsId,Q)}}class zc{constructor(U){this.options=U,this.supportedEvents=[N.ee.Pageview],this.trackedUserId=null,this.addEvent=le=>{if(!window.ga)return;window.ga("set",{page:le.payload.page}),window.ga("send","pageview");const{userSignedIn:Ce,userId:Ie}=le.meta;Ce&&Ie!==this.trackedUserId&&(this.trackedUserId=Ie,window.ga("set","userId",Ie))},this.flush=()=>{};const z=`https://www.google-analytics.com/analytics${U.debug?"_debug":""}.js`;el(z);const Q=window.ga=window.ga||function(){(Q.q=Q.q||[]).push(arguments)};Q.l=+new Date,Q("create",U.googleAnalyticsId,"auto"),Q("set","anonymizeIp",!0)}}class $f{constructor(U){this.options=U,this.supportedEvents=[N.ee.Pageview,N.ee.Interaction,N.ee.ExperimentView],this.addEvent=Ce=>{window.rudderanalytics&&((0,ti.Si)(Ce)&&window.rudderanalytics.page?.(),(0,ti.fV)(Ce)&&window.rudderanalytics.track?.(Ce.payload.interactionName,Ce.payload.properties),(0,ti.mR)(Ce)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:Ce.payload.experimentId,experiment_group:Ce.payload.experimentGroup,experiment_variant:Ce.payload.experimentVariant}))},this.flush=()=>{};const z=U.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";el(z);const Q=window.rudderanalytics=[],le=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let Ce=0;Ce<le.length;Ce++){const Ie=le[Ce];Q[Ie]=function(Je){return function(){Q.push([Je].concat(Array.prototype.slice.call(arguments)))}}(Ie)}if(window.rudderanalytics?.load?.(U.writeKey,U.dataPlaneUrl,{configUrl:U.configUrl}),U.user){const Ce=$m(U.user);window.rudderanalytics?.identify?.(Ce,{email:U.user.email,orgId:U.user.orgId,language:U.user.language})}}}var Kf=e(64331),Vf=e(43252),zf=e(29723),Hf=e(93886),kf=e(45305),Gf=e(94810),Yf=e(66952);class jf extends Yf.d{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=Ga.v.buildInfo.version}send(U){(0,N.RP)().addEvent({type:N.ee.GrafanaJavascriptAgent,payload:U})}getIgnoreUrls(){return[]}}class Ao{constructor(U){this.options=U,this.supportedEvents=[N.ee.GrafanaJavascriptAgent],this.addEvent=le=>{this.transports.forEach(Ce=>Ce.send(le.payload))},this.flush=()=>{};const z=[];this.transports=[],U.customEndpoint&&this.transports.push(new Kf.V({url:U.customEndpoint,apiKey:U.apiKey})),U.errorInstrumentalizationEnabled&&z.push(new Vf.w),U.consoleInstrumentalizationEnabled&&z.push(new zf.J),U.webVitalsInstrumentalizationEnabled&&z.push(new Hf.P);const Q={globalObjectKey:U.globalObjectKey||"faro",preventGlobalExposure:U.preventGlobalExposure||!1,app:{version:U.buildInfo.version,environment:U.buildInfo.env},instrumentations:z,transports:[new jf],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],metas:[...kf.i,{session:{id:(Math.random()+1).toString(36).substring(2)}}]};this.faroInstance=(0,Gf.p)(Q),U.user&&this.faroInstance.api.setUser({id:U.user.id,attributes:{orgId:String(U.user.orgId)||""}})}}var ga=e(37916),Hm=e(81534),ni=e(34785),Hc=e(48606),km=e(51401),K=e(51499),_=e(76501),se=e(28466),xe=e(3469);const Fe=3,He=5e3;class Ge{constructor(U){this.options=U,this._disabledUntil=new Date(Date.now()),this._buffer=(0,km.x)(U.maxConcurrentRequests??Fe)}sendEvent(U){if(new Date(Date.now())<this._disabledUntil){const le="Dropping frontend event due to too many requests.";return console.warn(le),Promise.resolve({event:U,reason:le,status:"skipped"})}const z={body:JSON.stringify({...U,level:U.level??(U.exception?Hc.z.Error:Hc.z.Info),exception:U.exception?{values:U.exception.values?.map(le=>({...le,value:ct(le.value)}))}:U.exception,breadcrumbs:U.breadcrumbs?.map(le=>({...le,timestamp:tt(le.timestamp)})),timestamp:tt(U.timestamp)}),url:this.options.endpoint},Q={body:z.body,headers:{"Content-Type":"application/json"},method:"POST",referrerPolicy:(0,K.hv)()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(Q,this.options.fetchParameters),this._buffer.add(()=>new _.cW((le,Ce)=>{window.fetch(z.url,Q).then(Ie=>{if(Ie.status===200){le({status:"success"});return}if(Ie.status===429){const Je=Date.now(),it=Ie.headers.get("Retry-After");it?this._disabledUntil=new Date(Je+(0,se.JY)(it,Je)):this._disabledUntil=new Date(Je+He),xe.kg.warn(`Too many requests, backing off till: ${this._disabledUntil}`)}Ce(Ie)}).catch(Ce)})).then(void 0,le=>{if(le.message==="Not adding Promise due to buffer limit reached."){const Ce="Dropping frontend log event due to too many requests in flight.";return console.warn(Ce),{event:U,reason:Ce,status:"skipped"}}throw le})}}function tt(B){return B?new Date(B*1e3).toISOString():new Date().toISOString()}function ct(B){return typeof B=="string"||B===void 0?B:B&&typeof B=="object"&&Object.keys(B).length===0?"":String(B)}class ht extends ni.d8{sendEvent(U){return(0,N.RP)().addEvent({type:N.ee.Sentry,payload:U}),Promise.resolve({status:"success",event:U})}sendSession(U){return Promise.resolve({status:"skipped"})}_sendRequest(U,z){throw new Error("should not happen")}}class mt{constructor(U){this.options=U,this.supportedEvents=[N.ee.Sentry],this.addEvent=Q=>{this.transports.forEach(le=>le.sendEvent(Q.payload))},this.flush=()=>{},this.transports=[],U.dsn&&this.transports.push(new ni.Vh({dsn:U.dsn},fetch)),U.customEndpoint&&this.transports.push(new Ge({endpoint:U.customEndpoint}));const z={release:U.buildInfo.version,environment:U.buildInfo.env,dsn:U.dsn||"https://examplePublicKey@o0.ingest.sentry.io/0",sampleRate:U.sampleRate,transport:ht,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"]};U.user&&(0,ga.av)({email:U.user.email,id:String(U.user.id)}),(0,Hm.S1)(z)}}var yt=e(35582),Dt=e.n(yt),bt=e(76767),$t=e(93013),Vt=e(55935),Yt=e(7196),It=e(18262),Ut=e(19349);function wt(B){return()=>{const U=document.querySelectorAll(":hover");for(let z=U.length-1;z>0;z--){const Q=U[z];Q instanceof HTMLElement&&Q.dataset?.panelid&&B(parseInt(Q.dataset?.panelid,10))}}}class zt{constructor(U,z){this.locationService=U,this.chromeService=z}clearAndInitGlobalBindings(){Dt().reset(),this.locationService.getLocation().pathname!=="/login"&&(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("g e",this.goToExplore),this.bind("s o",this.openSearch),this.bind("t a",this.makeAbsoluteTime),this.bind("f",this.openSearch),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>wc(!1)),this.bind("c r",()=>wc(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const z=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(z&&z instanceof HTMLElement&&(z.nodeName==="INPUT"||z.nodeName==="TEXTAREA"||z.hasAttribute("data-slate-editor"))){z.blur();return}this.exit()}}toggleNav(){window.location.href=Ga.v.appSubUrl+S.u.getUrlForPartial(this.locationService.getLocation(),{"__feature.topnav":(!Ga.v.featureToggles.topnav).toString()})}openSearch(){this.locationService.partial({search:"open"})}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}makeAbsoluteTime(){_a.Z.publish(new zs.QI)}showHelpModal(){_a.Z.publish(new zs.Dn({component:Hl.B}))}exit(){const U=this.locationService.getSearchObject();if(U.editview){this.locationService.partial({editview:null,editIndex:null});return}if(U.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(U.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(U.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:z}=this.chromeService.state.getValue();z&&this.chromeService.exitKioskMode(),U.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(U,z){Dt().bind(U,Q=>{Q.preventDefault(),Q.stopPropagation(),Q.returnValue=!1,z.call(this)},"keydown")}bindGlobal(U,z){Dt().bindGlobal(U,Q=>{Q.preventDefault(),Q.stopPropagation(),Q.returnValue=!1,z.call(this)},"keydown")}unbind(U,z){Dt().unbind(U,z)}bindWithPanelId(U,z){this.bind(U,wt(z))}setupTimeRangeBindings(U=!0){this.bind("t z",()=>{_a.Z.publish(new zs.p8({scale:2,updateUrl:U}))}),this.bind("ctrl+z",()=>{_a.Z.publish(new zs.p8({scale:2,updateUrl:U}))}),this.bind("t left",()=>{_a.Z.publish(new zs.Qt({direction:zs.Im.Left,updateUrl:U}))}),this.bind("t right",()=>{_a.Z.publish(new zs.Qt({direction:zs.Im.Right,updateUrl:U}))})}setupDashboardBindings(U){this.bind("mod+o",()=>{U.graphTooltip=(U.graphTooltip+1)%3,U.events.publish(new no.oi),U.startRefresh()}),this.bind("mod+s",()=>{U.meta.canSave&&_a.Z.publish(new zs.Dn({component:Yt.d,props:{dashboard:U}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",z=>{if(U.canEditPanelById(z)){const Q=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:Q?null:z})}}),this.bindWithPanelId("v",z=>{const Q=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:Q?null:z})}),this.bindWithPanelId("p l",z=>{const Q=U.getPanelById(z),le={...Q.options};le.legend.showLegend?le.legend.showLegend=!1:le.legend.showLegend=!0,Q.updateOptions(le)}),this.bindWithPanelId("i",z=>{this.locationService.partial({inspect:z})}),Ya.Vt.hasAccessToExplore()&&this.bindWithPanelId("x",async z=>{const Q=U.getPanelById(z),le=await(0,Vt.H6)({panel:Q,datasourceSrv:(0,o.ak)(),timeSrv:(0,Ut.$t)()});if(le){const Ce=S.u.stripBaseFromUrl(le);Ce&&this.locationService.push(Ce)}}),this.bindWithPanelId("p r",z=>{U.canEditPanelById(z)&&!(U.panelInView||U.panelInEdit)&&_a.Z.publish(new zs.Eb(z))}),this.bindWithPanelId("p d",z=>{if(U.canEditPanelById(z)){const Q=U.getPanelInfoById(z).index;U.duplicatePanel(U.panels[Q])}}),this.bindWithPanelId("p s",z=>{const Q=U.getPanelInfoById(z);_a.Z.publish(new zs.Dn({component:It.ShareModal,props:{dashboard:U,panel:Q?.panel}}))}),this.bind("d l",()=>{U.toggleLegendsForAll()}),this.bind("d shift+c",()=>{U.collapseRows()}),this.bind("d shift+e",()=>{U.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{U.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const Q=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+Q})}}async function cn(){if(window.location.search.indexOf("why-render")!==-1){const{default:B}=await e.e(2182).then(e.t.bind(e,62182,23));B(React,{trackAllPureComponents:!0})}}var _t=e(51927),vn=e(98141),dn=e(38490);async function Dn(B=[]){await Promise.all(B.map(Nn))}async function Nn(B){const{path:U,version:z}=B;try{await(0,Pi.N$)(U,z)}catch(Q){console.error(`Failed to load plugin: ${U} (version: ${z})`,Q)}}var Ln=e(16527),Qn=e(43464),Aa=e(40400),ra=e(33180),ln=e(49922),kn=e(69934),ea=e(78800),ja=e(59584),$a=e(75434);class Qa{constructor(){this.subject=new Ln.t(1)}get(){return this.subject.asObservable()}run(U){const{queries:z,timezone:Q,datasource:le,panelId:Ce,app:Ie,dashboardId:Je,timeRange:it,timeInfo:pt,cacheTimeout:vt,maxDataPoints:Mt,scopedVars:Nt,minInterval:Kt}=U;this.subscription&&this.subscription.unsubscribe();const Gt={app:Ie??Aa.zj.Unknown,requestId:(0,ea.t)(),timezone:Q,panelId:Ce,dashboardId:Je,range:it,timeInfo:pt,interval:"",intervalMs:0,targets:(0,y.cloneDeep)(z),maxDataPoints:Mt,scopedVars:Nt||{},cacheTimeout:vt,startTime:Date.now()};Gt.rangeRaw=it.raw,(0,xs.D)(os(le,Gt.scopedVars)).pipe((0,Qn.P)()).subscribe({next:en=>{Gt.targets=Gt.targets.map(Gn=>(Gn.datasource||(Gn.datasource=en.getRef()),Gn));const pn=Kt?(0,kn.J)().replace(Kt,Gt.scopedVars):en.interval,un=ra.calculateInterval(it,Mt,pn);Gt.scopedVars=Object.assign({},Gt.scopedVars,{__interval:{text:un.interval,value:un.interval},__interval_ms:{text:un.intervalMs.toString(),value:un.intervalMs}}),Gt.interval=un.interval,Gt.intervalMs=un.intervalMs,this.subscription=(0,$a.v7)(en,Gt).subscribe({next:Gn=>{const Ta=(0,$a.zR)(Gn,this.lastResult);this.lastResult=(0,ja.C)(Ta,this.lastResult),this.subject.next(this.lastResult)}})},error:en=>console.error("PanelQueryRunner Error",en)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===ln.Gu.Loading&&this.subject.next({...this.lastResult,state:ln.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function os(B,U){return B&&"query"in B?B:(0,o.ak)().get(B,U)}function Ia(){window.grafanaRuntime={getDashboardSaveModel:()=>{const B=(0,r.h4)().getCurrent();if(B)return B.getSaveModelClone()},getDashboardTimeRange:()=>{const B=(0,Ut.$t)().timeRange();return{from:B.from.valueOf(),to:B.to.valueOf(),raw:B.raw}},getPanelData:()=>{const B=(0,r.h4)().getCurrent();if(B)return B.panels.reduce((U,z)=>(U[z.id]=z.getQueryRunner().getLastResult(),U),{})}}}var Wn=e(22323),sn=e(92624),ua=e(5916),Ua=e(2248),na=e(41624),Da=e(50678);function da(B){return B.extended&&"infoText"in B.extended?B.extended:null}function gn(B){return B.extended&&"dataSourceTypes"in B.extended?B.extended:null}function yn(B){return B.extended&&"dataSource"in B.extended?B.extended:null}var an=e(87095),Un=e(30002);const Hn=(B,U)=>{const{rootStateKey:z}=U.variable;if(!z)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:da(Da.PF)};const{editor:Q}=(0,an.AE)(z,B);return{extended:da(Q)}},ma={changeVariableDatasource:Un.Z$},aa=(0,mr.connect)(Hn,ma);class bs extends a.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=U=>{this.props.changeVariableDatasource((0,sn.yQ)(this.props.variable),(0,ua.iU)(U))}}componentDidMount(){const{rootStateKey:U}=this.props.variable;if(!U){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:U,extended:z}=this.props,Q=z?.infoText??null;return a.createElement(a.Fragment,null,a.createElement(na.e,null,"Ad-hoc options"),a.createElement(_n.g,{label:"Data source",htmlFor:"data-source-picker"},a.createElement(Ua.q,{current:U.datasource,onChange:this.onDatasourceChanged,width:30,noDefault:!0})),Q?a.createElement(On.b,{title:Q,severity:"info"}):null)}}const vs=aa(bs);var hr=e(44847);const Ss={addFilter:Un.KJ,removeFilter:Un.ku,changeFilter:Un.M6},Ls=(0,mr.connect)(null,Ss);class ar extends a.PureComponent{constructor(){super(...arguments),this.addFilter=U=>{this.props.addFilter((0,sn.yQ)(this.props.variable),U)},this.removeFilter=U=>{this.props.removeFilter((0,sn.yQ)(this.props.variable),U)},this.changeFilter=(U,z)=>{this.props.changeFilter((0,sn.yQ)(this.props.variable),{index:U,filter:z})}}render(){const{filters:U,datasource:z}=this.props.variable;return a.createElement(hr.F,{datasource:z,filters:U,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Rr=Ls(ar);Rr.displayName="AdHocPicker";var Os=e(79134);const fr=B=>B.map(U=>tl(U).map(Hs).join("|")),vr=B=>{if((0,y.isArray)(B))return B.map(Qf).filter(yg);const U=Qf(B);return U===null?[]:[U]};function Hs(B){return B==null?"":/\|/g[Symbol.replace](B,"__gfp__")}function Lo(B){return B==null?"":/__gfp__/g[Symbol.replace](B,"|")}function tl(B){return[B.key,B.operator,B.value]}function Qf(B){if(!(0,y.isString)(B)||B.length===0)return null;const U=B.split("|").map(Lo);return{key:U[0],operator:U[1],value:U[2],condition:""}}function yg(B){return B!==null&&(0,y.isString)(B.value)}const Zf=async()=>{},Pg=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:Os.Js,reducer:Os.jo,picker:Rr,editor:vs,dependsOn:()=>!1,setValue:Zf,setValueFromUrl:async(B,U)=>{const z=vr(U);await(0,Na.WI)((0,Un.Ue)((0,sn.yQ)(B),z))},updateOptions:Zf,getSaveModel:B=>{const{index:U,id:z,state:Q,global:le,rootStateKey:Ce,...Ie}=(0,y.cloneDeep)(B);return Ie},getValueForUrl:B=>{const U=B?.filters??[];return fr(U)}});var Jf=e(31259),Cg=e(57319),ms=e(15546),Gm=e(96209),Xf=e(37537),xg=e(16313),kc=e(14542),Dg=e(89689),bg=e(67305),Mg=e(94514),Sg=e(97218),Og=e(44288),_f=e(69311),ys=e(10672),Ts=e(85803),Ka=e(7240),Er=e(82253),ai=e(63510);const Tg={...ys.Eg,type:"query",datasource:null,query:"",regex:"",sort:ys.$U.disabled,refresh:ys.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},Ig=(B,U)=>{if(U===ys.$U.disabled)return B;const z=Math.ceil(U/2),Q=U%2===0;return z===1?B=(0,y.sortBy)(B,"text"):z===2?B=(0,y.sortBy)(B,le=>{if(!le.text)return-1;const Ce=le.text.match(/.*?(\d+).*/);return!Ce||Ce.length<2?-1:parseInt(Ce[1],10)}):z===3&&(B=(0,y.sortBy)(B,le=>(0,y.toLower)(le.text))),Q&&(B=B.reverse()),B},Rg=(B,U)=>{const z=[];let Q=null;U.lastIndex=0;do Q=U.exec(B),Q&&z.push(Q);while(U.global&&Q&&Q[0]!==""&&Q[0]!==void 0);return z},Ag=(B,U,z)=>{let Q,le=[];B&&(Q=(0,Vn.jO)(B));for(let Ce=0;Ce<z.length;Ce++){const Ie=z[Ce];let Je=Ie.text===void 0||Ie.text===null?Ie.value:Ie.text,it=Ie.value===void 0||Ie.value===null?Ie.text:Ie.value;if((0,y.isNumber)(it)&&(it=it.toString()),(0,y.isNumber)(Je)&&(Je=Je.toString()),Q){const pt=Rg(it,Q);if(!pt.length)continue;const vt=pt.find(Gt=>Gt.groups&&Gt.groups.value),Mt=pt.find(Gt=>Gt.groups&&Gt.groups.text),Nt=pt.find(Gt=>Gt.length>1),Kt=pt.length>1&&Nt;if(vt||Mt)it=vt?.groups?.value??Mt?.groups?.text,Je=Mt?.groups?.text??vt?.groups?.value;else if(Kt){for(let Gt=0;Gt<pt.length;Gt++){const en=pt[Gt];le.push({text:en[1],value:en[1],selected:!1})}continue}else Nt&&(Je=Nt[1],it=Nt[1])}le.push({text:Je,value:it,selected:!1})}return le=(0,y.uniqBy)(le,"value"),Ig(le,U)},qf=(0,Nr.oM)({name:"templating/query",initialState:ai.s,reducers:{updateVariableOptions:(B,U)=>{const{results:z,templatedRegex:Q}=U.payload.data,le=(0,an.ir)(B,U.payload.id);if(le.type!=="query")return;const{includeAll:Ce,sort:Ie}=le,Je=Ag(Q,Ie,z);Ce&&Je.unshift({text:Er.xk,value:Er.r2,selected:!1}),Je.length||Je.push({text:Er.BH,value:Er.QX,isNone:!0,selected:!1}),le.options=Je}}}),Lg=qf.reducer,{updateVariableOptions:Bg}=qf.actions;function wg(){return B=>B.pipe((0,Sn.U)(U=>{const z=U.series;if(!z||!z.length)return[];if(Fg(z))return z;const Q=(0,Ue.F9)(z),le=[];let Ce=-1,Ie=-1,Je=-1,it=-1;for(const pt of Q)for(let vt=0;vt<pt.fields.length;vt++){const Mt=pt.fields[vt],Nt=(0,ue.C)(Mt,pt,z).toLowerCase();Mt.type===H.fS.string&&Je===-1&&(Je=vt),Nt==="text"&&Mt.type===H.fS.string&&Ie===-1&&(Ie=vt),Nt==="value"&&Mt.type===H.fS.string&&Ce===-1&&(Ce=vt),Nt==="expandable"&&(Mt.type===H.fS.boolean||Mt.type===H.fS.number)&&it===-1&&(it=vt)}if(Je===-1)throw new Error("Couldn't find any field of type string in the results.");for(const pt of z)for(let vt=0;vt<pt.length;vt++){const Mt=it!==-1?pt.fields[it].values.get(vt):void 0,Nt=pt.fields[Je].values.get(vt),Kt=Ie!==-1?pt.fields[Ie].values.get(vt):null,Gt=Ce!==-1?pt.fields[Ce].values.get(vt):null;if(Ce===-1&&Ie===-1){le.push({text:Nt,value:Nt,expandable:Mt});continue}if(Ce===-1&&Ie!==-1){le.push({text:Kt,value:Kt,expandable:Mt});continue}if(Ce!==-1&&Ie===-1){le.push({text:Gt,value:Gt,expandable:Mt});continue}le.push({text:Kt,value:Gt,expandable:Mt})}return le}))}function Ng(B){return U=>U.pipe((0,Sn.U)(z=>{const{variable:Q,dispatch:le,getTemplatedRegexFunc:Ce}=B;if(!Q.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const Ie=Ce(Q),Je=(0,sn.Y6)(Q,{results:z,templatedRegex:Ie});le((0,Ka.mb)(Q.rootStateKey,Bg(Je)))}))}function Ug(B){return U=>U.pipe((0,Cs.z)(()=>{const{dispatch:z,variable:Q,searchFilter:le}=B;return le?(0,ta.of)():(0,xs.D)(z((0,Ts.xQ)((0,sn.yQ)(Q))))}))}function Fg(B){if(!B)return!1;if(!B.length)return!0;const U=B[0];if((0,Ue.aY)(U))return!1;for(const z in U){if(!U.hasOwnProperty(z)||U[z]!==null&&typeof U[z]!="string"&&typeof U[z]!="number")continue;const Q=z.toLowerCase();if(Q==="text"||Q==="value")return!0}return!1}var Gc=e(59670);class Wg{constructor(){this.runners=[new $g,new Kg,new Vg,new Hg]}getRunnerForDatasource(U){const z=this.runners.find(Q=>Q.canRun(U));if(z)return z;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class $g{constructor(){this.type=Gc.j2.Legacy}canRun(U){return(0,ms.R)(U)}getTarget({datasource:U,variable:z}){if((0,ms.R)(U))return z.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:U,variable:z,searchFilter:Q,timeSrv:le},Ce){if(!(0,ms.R)(U))return nl();const Ie=(0,sn.AQ)(z,Q,le);return(0,xs.D)(U.metricFindQuery(z.query,Ie)).pipe((0,Cs.z)(Je=>{if(!Je||!Je.length)return nl();const it=Je;return(0,ta.of)({series:it,state:ln.Gu.Done,timeRange:Ie.range})}))}}class Kg{constructor(){this.type=Gc.j2.Standard}canRun(U){return(0,ms.Ju)(U)}getTarget({datasource:U,variable:z}){if((0,ms.Ju)(U))return U.variables.toDataQuery(z.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:U,runRequest:z},Q){return(0,ms.Ju)(U)?U.variables.query?z(U,Q,U.variables.query):z(U,Q):nl()}}class Vg{constructor(){this.type=Gc.j2.Custom}canRun(U){return(0,ms.d7)(U)}getTarget({datasource:U,variable:z}){if((0,ms.d7)(U))return z.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:U,runRequest:z},Q){return(0,ms.d7)(U)?z(U,Q,U.variables.query):nl()}}const zg="variable-query";class Hg{constructor(){this.type=Gc.j2.Datasource}canRun(U){return(0,ms.X7)(U)}getTarget({datasource:U,variable:z}){if((0,ms.X7)(U))return{...z.query,refId:z.query.refId??zg};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:U,runRequest:z},Q){return(0,ms.X7)(U)?z(U,Q):nl()}}function nl(){return(0,ta.of)({state:ln.Gu.Done,series:[],timeRange:(0,_f.JK)()})}class kg{constructor(U={dispatch:Na.WI,getState:Na.y0,getVariable:an.E0,getTemplatedRegex:sn.gR,getTimeSrv:Ut.$t,queryRunners:new Wg,runRequest:$a.v7}){this.dependencies=U,this.updateOptionsRequests=new Gm.x,this.updateOptionsResults=new Gm.x,this.cancelRequests=new Gm.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(U){this.updateOptionsRequests.next(U)}getResponse(U){return this.updateOptionsResults.asObservable().pipe((0,kc.h)(z=>z.identifier===U))}cancelRequest(U){this.cancelRequests.next({identifier:U})}destroy(){this.subscription.unsubscribe()}onNewRequest(U){const{datasource:z,identifier:Q,searchFilter:le}=U;try{const{dispatch:Ce,runRequest:Ie,getTemplatedRegex:Je,getVariable:it,queryRunners:pt,getTimeSrv:vt,getState:Mt}=this.dependencies,Nt=(0,an.S_)(Mt());this.updateOptionsResults.next({identifier:Q,state:ln.Gu.Loading});const Kt=it(Q,Mt());if(Kt.type!=="query")return;const Gt=vt(),en={variable:Kt,datasource:z,searchFilter:le,timeSrv:Gt,runRequest:Ie},pn=pt.getRunnerForDatasource(z),un=pn.getTarget({datasource:z,variable:Kt}),Gn=this.getRequest(Kt,U,un);pn.runRequest(en,Gn).pipe((0,kc.h)(()=>{const Ta=(0,an.S_)(Mt());return Nt===Ta}),(0,kc.h)(Ta=>Ta.state===ln.Gu.Done||Ta.state===ln.Gu.Error),(0,Dg.q)(1),(0,Cs.z)(Ta=>Ta.state===ln.Gu.Error?(0,Xf._)(()=>Ta.error):(0,ta.of)(Ta)),wg(),Ng({variable:Kt,dispatch:Ce,getTemplatedRegexFunc:Je}),Ug({variable:Kt,dispatch:Ce,searchFilter:le}),(0,bg.R)((0,xg.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,kc.h)(Ta=>{let Fs=!1;return Ta.identifier.id===Q.id&&(Fs=!0,this.updateOptionsResults.next({identifier:Q,state:ln.Gu.Loading,cancelled:Fs})),Fs}))),(0,Mg.K)(Ta=>Ta.cancelled?(0,ta.of)({}):(this.updateOptionsResults.next({identifier:Q,state:ln.Gu.Error,error:Ta}),(0,Xf._)(()=>Ta))),(0,Sg.x)(()=>{this.updateOptionsResults.next({identifier:Q,state:ln.Gu.Done})})).subscribe()}catch(Ce){this.updateOptionsResults.next({identifier:Q,state:ln.Gu.Error,error:Ce})}}getRequest(U,z,Q){const{searchFilter:le}=z,Ce={variable:{text:U.current.text,value:U.current.value}},it={...le?{searchFilter:{text:le,value:le}}:{},...Ce},pt=U.refresh===ys.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,_f.JK)();return{app:Aa.zj.Dashboard,requestId:(0,Og.Z)(),timezone:"",range:pt,interval:"",intervalMs:0,targets:[Q],scopedVars:it,startTime:Date.now()}}}let eg;function Gg(B){eg=B}function Ym(){return eg}const Yg=B=>{if(!jg(B))return B.name;const{current:U}=B;return Array.isArray(U.text)?U.text.join(" + "):U.text},jg=B=>Array.isArray(B?.options)||typeof B?.current=="object";var ro=(B=>(B[B.moveUp=38]="moveUp",B[B.moveDown=40]="moveDown",B[B.select=32]="select",B[B.cancel=27]="cancel",B[B.selectAndClose=13]="selectAndClose",B))(ro||{});class Qg extends a.PureComponent{constructor(){super(...arguments),this.onKeyDown=U=>{if(ro[U.keyCode]&&!(U.keyCode===ro.select&&this.props.currenthighlightindex===-1)){const z=U.ctrlKey||U.metaKey||U.shiftKey;this.props.onNavigate(U.keyCode,z),U.preventDefault()}},this.onChange=U=>{this.props.onChange(U.target.value)}}render(){const{value:U,id:z,onNavigate:Q,...le}=this.props;return a.createElement("input",{...le,ref:Ce=>{Ce&&(Ce.focus(),Ce.setAttribute("style",`width:${Math.max(Ce.width,150)}px`))},type:"text",className:"gf-form-input",value:U??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,wa.t)("variable.picker.input","Enter variable value")})}}const Zg=({loading:B,disabled:U,onClick:z,text:Q,onCancel:le,id:Ce})=>{const Ie=(0,he.wW)(ng),Je=(0,a.useCallback)(it=>{it.stopPropagation(),it.preventDefault(),z()},[z]);return B?a.createElement("div",{className:Ie.container,"data-testid":Tt.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${Q}`),title:Q,id:Ce},a.createElement(tg,{text:Q}),a.createElement(Jg,{onCancel:le})):a.createElement("button",{onClick:Je,className:Ie.container,"data-testid":Tt.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${Q}`),"aria-expanded":!1,"aria-controls":`options-${Ce}`,id:Ce,title:Q,disabled:U},a.createElement(tg,{text:Q}),a.createElement(sa.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},tg=({text:B})=>{const U=(0,he.wW)(ng);return a.createElement("span",{className:U.textAndTags},B===Er.xk?(0,wa.t)("variable.picker.link-all","All"):B)},Jg=({onCancel:B})=>{const U=(0,a.useCallback)(z=>{z.preventDefault(),B()},[B]);return a.createElement(kr.u,{content:"Cancel query"},a.createElement(sa.J,{className:"spin-clockwise",name:"sync",size:"xs",onClick:U,"aria-label":Tt.wl.components.LoadingIndicator.icon}))},ng=B=>({container:k.css`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${B.spacing(1)};
    background-color: ${B.components.input.background};
    border: 1px solid ${B.components.input.borderColor};
    border-radius: ${B.shape.borderRadius(1)};
    display: flex;
    align-items: center;
    color: ${B.colors.text};
    height: ${B.spacing(B.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${B.colors.action.disabledBackground};
      color: ${B.colors.action.disabledText};
      border: 1px solid ${B.colors.action.disabledBackground};
    }
  `,textAndTags:k.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${B.spacing(.25)};
    user-select: none;
  `});class Xg extends a.PureComponent{constructor(){super(...arguments),this.onToggle=U=>z=>{const Q=z.shiftKey||z.ctrlKey||z.metaKey;this.handleEvent(z),this.props.onToggle(U,Q)},this.onToggleAll=U=>{this.handleEvent(U),this.props.onToggleAll()}}handleEvent(U){U.preventDefault(),U.stopPropagation()}render(){const{multi:U,values:z,highlightIndex:Q,selectedValues:le,onToggle:Ce,onToggleAll:Ie,...Je}=this.props;return a.createElement("div",{className:`${U?"variable-value-dropdown multi":"variable-value-dropdown single"}`},a.createElement("div",{className:"variable-options-wrapper"},a.createElement("ul",{className:_g,"aria-label":Tt.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...Je},this.renderMultiToggle(),z.map((it,pt)=>this.renderOption(it,pt)))))}renderOption(U,z){const{highlightIndex:Q,theme:le}=this.props,Ce=U.selected?"variable-option pointer selected":"variable-option pointer",Ie=z===Q?`${Ce} highlighted`:Ce,Je=U.value===Er.r2;return a.createElement("li",{key:`${U.value}`},a.createElement("button",{role:"checkbox",type:"button","aria-checked":U.selected,className:yc()(Ie,(0,me.gN)(le),ag),onClick:this.onToggle(U)},a.createElement("span",{className:"variable-option-icon"}),a.createElement("span",{"data-testid":Tt.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${U.text}`)},Je?(0,wa.t)("variable.picker.option-all","All"):U.text)))}renderMultiToggle(){const{multi:U,selectedValues:z,theme:Q}=this.props;if(!U)return null;const le=()=>a.createElement(wa.cC,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return a.createElement(kr.u,{content:le,placement:"top"},a.createElement("button",{className:`${z.length>1?"variable-options-column-header many-selected":"variable-options-column-header"} ${ag} ${(0,me.gN)(Q)}`,role:"checkbox","aria-checked":z.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},a.createElement("span",{className:"variable-option-icon"}),a.createElement(wa.cC,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",z.length,")"))}}const _g=(0,k.cx)("variable-options-column",k.css`
    list-style-type: none;
  `),ag=k.css`
  width: 100%;
  text-align: left;
`,qg=(0,he.HE)(Xg);var oo=e(92990),Ar=e(85972);const ep=(B,U,z)=>async(Q,le)=>{if(U===ro.cancel)return await Q(Yc(B));if(U===ro.select)return Q(sg(B,z));if(U===ro.selectAndClose)return Q(sg(B,z,!0)),await Q(Yc(B));if(U===ro.moveDown)return Q((0,Ka.mb)(B,(0,Ar.Ew)(1)));if(U===ro.moveUp)return Q((0,Ka.mb)(B,(0,Ar.Ew)(-1)))},tp=(B,U="")=>async(z,Q)=>{const{rootStateKey:le}=B,{id:Ce,queryValue:Ie}=(0,an.AE)(le,Q()).optionsPicker,Je={id:Ce,rootStateKey:le,type:"query"},it=(0,an.E0)(Je,Q());if(!(0,ms.eL)(it))return;const{query:pt,options:vt}=it;if(z((0,Ka.mb)(le,(0,Ar.Ug)(U))),(0,y.trim)(Ie)!==(0,y.trim)(U))return(0,sn.bf)(pt)?rp(z,Q,U,le):z((0,Ka.mb)(le,(0,Ar.ss)(vt)))},np=async B=>{await Wn.z.get(B.type).setValue(B,B.current,!0)},Yc=(B,U)=>async(z,Q)=>{const le=(0,an.AE)(B,Q()).optionsPicker,Ce={id:le.id,rootStateKey:B,type:"query"},Ie=(0,an.E0)(Ce,Q());if(!(0,ms.eL)(Ie))return;const Je={option:op(le)},it={propName:"queryValue",propValue:le.queryValue};z((0,Ka.mb)(B,(0,oo.Q8)((0,sn.Y6)(Ie,Je)))),z((0,Ka.mb)(B,(0,oo.Pl)((0,sn.Y6)(Ie,it))));const pt=(0,an.E0)(Ce,Q());if((0,ms.eL)(pt)&&(z((0,Ka.mb)(B,(0,Ar.nn)())),(0,sn.N9)(Ie)!==(0,sn.N9)(pt)))return U?U(pt):await np(pt)},ap=(B,U)=>async(z,Q)=>{const{id:le,rootStateKey:Ce}=B,Ie=(0,an.AE)(Ce,Q()).optionsPicker;Ie.id&&Ie.id!==le&&await z(Yc(Ce,U));const Je=(0,an.E0)(B,Q());(0,ms.eL)(Je)&&z((0,Ka.mb)(Ce,(0,Ar.aN)(Je)))},sg=(B,U,z=!1)=>(Q,le)=>{const{highlightIndex:Ce,options:Ie}=(0,an.AE)(B,le()).optionsPicker,Je=Ie[Ce];Q((0,Ka.mb)(B,(0,Ar._M)({option:Je,forceSelect:z,clearOthers:U})))},sp=async(B,U,z,Q)=>{try{const{id:le}=(0,an.AE)(Q,U()).optionsPicker,Ce={id:le,rootStateKey:Q,type:"query"},Ie=(0,an.E0)(Ce,U());if(!(0,ms.eL)(Ie))return;await Wn.z.get(Ie.type).updateOptions(Ie,z);const it=(0,an.E0)(Ce,U());if(!(0,ms.eL)(it))return;B((0,Ka.mb)(Q,(0,Ar.wF)(it.options)))}catch(le){console.error(le)}},rp=(0,y.debounce)(sp,500);function op(B){const{options:U,selectedValues:z,queryValue:Q,multi:le}=B;if(U.length===0&&Q&&Q.length>0)return{text:Q,value:Q,selected:!1};if(!le)return z.find(Je=>Je.selected);const Ce=[],Ie=[];for(const Je of z)Je.selected&&(Ce.push(Je.text.toString()),Ie.push(Je.value.toString()));return{value:Ie,text:Ce,selected:!0}}const al=()=>{const B=Ce=>({...(0,Jf.bindActionCreators)({openOptions:ap,commitChangesToVariable:Yc,navigateOptions:ep},Ce),filterOrSearchOptions:(Ie,Je="")=>{Ce(tp(Ie,Je))},toggleAllOptions:Ie=>Ce((0,Ka.mb)(Ie.rootStateKey,(0,Ar.iQ)())),toggleOption:(Ie,Je,it,pt)=>Ce((0,Ka.mb)(Ie.rootStateKey,(0,Ar._M)({option:Je,clearOthers:it,forceSelect:pt})))}),U=(Ce,Ie)=>{const{rootStateKey:Je}=Ie.variable;return Je?{picker:(0,an.AE)(Je,Ce).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:Ar.yy})},z=(0,mr.connect)(U,B);class Q extends a.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,sn.yQ)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(Ie,Je)=>{((0,ms.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(Ie,Je)},this.onToggleSingleValueVariable=(Ie,Je)=>{this.props.toggleOption((0,sn.yQ)(this.props.variable),Ie,Je,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(Ie,Je)=>{this.props.toggleOption((0,sn.yQ)(this.props.variable),Ie,Je,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,sn.yQ)(this.props.variable))},this.onFilterOrSearchOptions=Ie=>{this.props.filterOrSearchOptions((0,sn.yQ)(this.props.variable),Ie)},this.onNavigate=(Ie,Je)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,Ie,Je)},this.onCancel=()=>{Ym().cancelRequest((0,sn.yQ)(this.props.variable))}}render(){const{variable:Ie,picker:Je}=this.props,it=Je.id===Ie.id;return a.createElement("div",{className:"variable-link-wrapper"},it?this.renderOptions(Je):this.renderLink(Ie))}renderLink(Ie){const Je=Yg(Ie),it=Ie.state===ln.Gu.Loading;return a.createElement(Zg,{id:`var-${Ie.id}`,text:Je,onClick:this.onShowOptions,loading:it,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(Ie){const{id:Je}=this.props.variable;return a.createElement(Cg.L,{onClick:this.onHideOptions},a.createElement(Qg,{id:`var-${Je}`,value:Ie.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${Je}`,currenthighlightindex:Ie.highlightIndex}),a.createElement(qg,{values:Ie.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:Ie.highlightIndex,multi:Ie.multi,selectedValues:Ie.selectedValues,id:`options-${Je}`}))}}const le=z(Q);return le.displayName="OptionsPicker",le};var si=e(57052);class ip extends a.PureComponent{constructor(){super(...arguments),this.onChange=U=>{this.props.onPropChange({propName:"query",propValue:U.currentTarget.value})},this.onBlur=U=>{this.props.onPropChange({propName:"query",propValue:U.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(a.Fragment,null,a.createElement(na.e,null,"Constant options"),a.createElement(si.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:Tt.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}}const lp={...ys.Eg,type:"constant",hide:ys.bU.hideVariable,query:"",current:{},options:[]},rg=(0,Nr.oM)({name:"templating/constant",initialState:ai.s,reducers:{createConstantOptionsFromQuery:(B,U)=>{const z=(0,an.ir)(B,U.payload.id);z.type==="constant"&&(z.options=[{text:z.query.trim(),value:z.query.trim(),selected:!1}])}}}),cp=rg.reducer,{createConstantOptionsFromQuery:dp}=rg.actions,up=B=>async U=>{const{rootStateKey:z}=B;await U((0,Ka.mb)(z,dp((0,sn.Y6)(B)))),await U((0,Ts.xQ)(B))},mp=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:lp,reducer:cp,picker:al(),editor:ip,dependsOn:()=>!1,setValue:async(B,U,z=!1)=>{await(0,Na.WI)((0,Ts.Fz)((0,sn.yQ)(B),U,z))},setValueFromUrl:async(B,U)=>{await(0,Na.WI)((0,Ts.Ci)((0,sn.yQ)(B),U))},updateOptions:async B=>{await(0,Na.WI)(up((0,sn.yQ)(B)))},getSaveModel:B=>{const{index:U,id:z,state:Q,global:le,current:Ce,options:Ie,rootStateKey:Je,...it}=(0,y.cloneDeep)(B);return it},getValueForUrl:B=>B.current.value,beforeAdding:B=>{const{current:U,options:z,query:Q,...le}=(0,y.cloneDeep)(B),Ce={selected:!0,text:Q,value:Q};return{...le,current:Ce,options:[Ce],query:Q}}});function jm({value:B,name:U,description:z,onChange:Q,ariaLabel:le}){const Ce=(0,Xo.Me)();return a.createElement(Bs.X,{id:Ce,label:U,description:z,value:B,onChange:Q,"aria-label":le})}const jc=({onMultiChanged:B,onPropChange:U,variable:z})=>{const Q=(0,a.useCallback)(Ie=>{B((0,sn.yQ)(z),Ie.target.checked)},[B,z]),le=(0,a.useCallback)(Ie=>{U({propName:"includeAll",propValue:Ie.target.checked})},[U]),Ce=(0,a.useCallback)(Ie=>{U({propName:"allValue",propValue:Ie.currentTarget.value})},[U]);return a.createElement(ha.wc,{spacing:"md",height:"inherit"},a.createElement(jm,{value:z.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:Q}),a.createElement(jm,{value:z.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:le}),z.includeAll&&a.createElement(si.V,{value:z.allValue??"",onChange:Ce,name:"Custom all value",placeholder:"blank = auto",testId:Tt.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2}))};jc.displayName="SelectionOptionsEditor";var og=e(49993);class fp extends a.PureComponent{constructor(){super(...arguments),this.onChange=U=>{this.props.onPropChange({propName:"query",propValue:U.currentTarget.value})},this.onSelectionOptionsChange=async({propName:U,propValue:z})=>{this.props.onPropChange({propName:U,propValue:z,updateOptions:!0})},this.onBlur=U=>{this.props.onPropChange({propName:"query",propValue:U.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(a.Fragment,null,a.createElement(na.e,null,"Custom options"),a.createElement(og.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:Tt.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),a.createElement(na.e,null,"Selection options"),a.createElement(jc,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const gp=(B,U)=>({}),pp={changeVariableMultiValue:Ts.Z7},hp=Rf(fp,gp,pp),vp={...ys.Eg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},ig=(0,Nr.oM)({name:"templating/custom",initialState:ai.s,reducers:{createCustomOptionsFromQuery:(B,U)=>{const z=(0,an.ir)(B,U.payload.id);if(z.type!=="custom")return;const{includeAll:Q,query:le}=z,Ie=(le.match(/(?:\\,|[^,])+/g)??[]).map(Je=>{Je=Je.replace(/\\,/g,",");const it=/^(.+)\s:\s(.+)$/g.exec(Je)??[];if(it.length===3){const[,pt,vt]=it;return{text:pt.trim(),value:vt.trim(),selected:!1}}else return{text:Je.trim(),value:Je.trim(),selected:!1}});Q&&Ie.unshift({text:Er.xk,value:Er.r2,selected:!1}),z.options=Ie}}}),Ep=ig.reducer,{createCustomOptionsFromQuery:yp}=ig.actions,Pp=B=>async U=>{const{rootStateKey:z}=B;await U((0,Ka.mb)(z,yp((0,sn.Y6)(B)))),await U((0,Ts.xQ)(B))},Cp=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:vp,reducer:Ep,picker:al(),editor:hp,dependsOn:()=>!1,setValue:async(B,U,z=!1)=>{await(0,Na.WI)((0,Ts.Fz)((0,sn.yQ)(B),U,z))},setValueFromUrl:async(B,U)=>{await(0,Na.WI)((0,Ts.Ci)((0,sn.yQ)(B),U))},updateOptions:async B=>{await(0,Na.WI)(Pp((0,sn.yQ)(B)))},getSaveModel:B=>{const{index:U,id:z,state:Q,global:le,rootStateKey:Ce,...Ie}=(0,y.cloneDeep)(B);return Ie},getValueForUrl:B=>(0,sn.HY)(B)?Er.xk:B.current.value});var Qm=e(83704);const xp={...ys.Eg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:ys.Bd.onDashboardLoad},lg=(0,Nr.oM)({name:"templating/datasource",initialState:ai.s,reducers:{createDataSourceOptions:(B,U)=>{const{sources:z,regex:Q}=U.payload.data,le=[],Ce=(0,an.ir)(B,U.payload.id);if(Ce.type==="datasource"){for(let Ie=0;Ie<z.length;Ie++){const Je=z[Ie];Je.meta.id===Ce.query&&(Dp(Je,Q)&&le.push({text:Je.name,value:Je.name,selected:!1}),bp(Je,Q)&&le.push({text:"default",value:"default",selected:!1}))}le.length===0&&le.push({text:"No data sources found",value:"",selected:!1}),Ce.includeAll&&le.unshift({text:Er.xk,value:Er.r2,selected:!1}),Ce.options=le}}}});function Dp(B,U){return U?U.exec(B.name):!0}function bp(B,U){return B.isDefault?U?U.exec("default"):!0:!1}const Mp=lg.reducer,{createDataSourceOptions:Sp}=lg.actions,Op=(B,U={getDatasourceSrv:o.ak})=>async(z,Q)=>{const{rootStateKey:le}=B,Ce=U.getDatasourceSrv().getList({metrics:!0,variables:!1}),Ie=(0,an.E0)(B,Q());if(Ie.type!=="datasource")return;let Je;Ie.regex&&(Je=(0,kn.J)().replace(Ie.regex,void 0,"regex"),Je=(0,Vn.jO)(Je)),z((0,Ka.mb)(le,Sp((0,sn.Y6)(B,{sources:Ce,regex:Je})))),await z((0,Ts.xQ)(B))},Tp=(B,U={getDatasourceSrv:o.ak})=>z=>{const Q=U.getDatasourceSrv().getList({metrics:!0,variables:!0}),le=(0,y.chain)(Q).uniqBy("meta.id").map(Ce=>({text:Ce.meta.name,value:Ce.meta.id})).value();le.unshift({text:"",value:""}),z((0,Ka.mb)(B,(0,Da.z7)({dataSourceTypes:le})))},Ip=(B,U)=>{const{variable:{rootStateKey:z}}=U;if(!z)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:gn(Da.PF)};const{editor:Q}=(0,an.AE)(z,B);return{extended:gn(Q)}},Rp={initDataSourceVariableEditor:Tp,changeVariableMultiValue:Ts.Z7},Ap=(0,mr.connect)(Ip,Rp);class Lp extends a.PureComponent{constructor(){super(...arguments),this.onRegExChange=U=>{this.props.onPropChange({propName:"regex",propValue:U.currentTarget.value})},this.onRegExBlur=U=>{this.props.onPropChange({propName:"regex",propValue:U.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:U,propName:z})=>{this.props.onPropChange({propName:z,propValue:U,updateOptions:!0})},this.getSelectedDataSourceTypeValue=()=>{const{extended:U}=this.props;if(!U?.dataSourceTypes.length)return"";const z=U.dataSourceTypes.find(le=>le.value===this.props.variable.query);return(z?z.value:U.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=U=>{this.props.onPropChange({propName:"query",propValue:U.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:U}=this.props.variable;if(!U){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(U)}render(){const{variable:U,extended:z,changeVariableMultiValue:Q}=this.props,le=z?.dataSourceTypes?.length?z.dataSourceTypes?.map(Ie=>({value:Ie.value??"",label:Ie.text})):[],Ce=le.find(Ie=>Ie.value===U.query)??le[0];return a.createElement(a.Fragment,null,a.createElement(na.e,null,"Data source options"),a.createElement(Qm.u,{name:"Type",value:Ce,options:le,onChange:this.onDataSourceTypeChanged,testId:Tt.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),a.createElement(si.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:a.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",a.createElement("br",null),a.createElement("br",null),"Example: ",a.createElement("code",null,"/^prod/"))}),a.createElement(na.e,null,"Selection options"),a.createElement(jc,{variable:U,onPropChange:this.onSelectionOptionsChange,onMultiChanged:Q}))}}const Bp=Ap(Lp),wp=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:xp,reducer:Mp,picker:al(),editor:Bp,dependsOn:(B,U)=>B.regex?(0,sn.QI)(B.regex,U.name):!1,setValue:async(B,U,z=!1)=>{await(0,Na.WI)((0,Ts.Fz)((0,sn.yQ)(B),U,z))},setValueFromUrl:async(B,U)=>{await(0,Na.WI)((0,Ts.Ci)((0,sn.yQ)(B),U))},updateOptions:async B=>{await(0,Na.WI)(Op((0,sn.yQ)(B)))},getSaveModel:B=>{const{index:U,id:z,state:Q,global:le,rootStateKey:Ce,...Ie}=(0,y.cloneDeep)(B);return{...Ie,options:[]}},getValueForUrl:B=>(0,sn.HY)(B)?Er.xk:B.current.value});var Np=e(69155);const Zm=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(B=>({label:`${B}`,value:B})),cg=a.memo(({onPropChange:B,variable:U})=>{const z=pt=>{B({propName:"auto",propValue:pt.target.checked,updateOptions:!0})},Q=pt=>{B({propName:"query",propValue:pt.currentTarget.value})},le=pt=>{B({propName:"query",propValue:pt.currentTarget.value,updateOptions:!0})},Ce=pt=>{B({propName:"auto_count",propValue:pt.value,updateOptions:!0})},Ie=pt=>{B({propName:"auto_min",propValue:pt.currentTarget.value,updateOptions:!0})},Je=Zm.find(pt=>pt.value===U.auto_count)??Zm[0],it=(0,he.wW)(Up);return a.createElement(a.Fragment,null,a.createElement(na.e,null,"Interval options"),a.createElement(si.V,{value:U.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:Q,onBlur:le,testId:Tt.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),a.createElement(jm,{value:U.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:z}),U.auto&&a.createElement("div",{className:it.autoFields},a.createElement(Qm.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:Je,options:Zm,onChange:Ce,width:9}),a.createElement(si.V,{value:U.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:Ie,width:11})))});cg.displayName="IntervalVariableEditor";function Up(B){return{autoFields:(0,k.css)({marginTop:B.spacing(2),display:"flex",flexDirection:"column"})}}var Fp=e(98639);const Wp={...ys.Eg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:ys.Bd.onTimeRangeChanged,current:{}},dg=(0,Nr.oM)({name:"templating/interval",initialState:ai.s,reducers:{createIntervalOptions:(B,U)=>{const z=(0,an.ir)(B,U.payload.id);if(z.type!=="interval")return;const Q=(0,y.map)(z.query.match(/(["'])(.*?)\1|\w+/g),le=>(le=le.replace(/["']+/g,""),{text:le.trim(),value:le.trim(),selected:!1}));z.auto&&Q.length&&Q[0].text!=="auto"&&Q.unshift({text:"auto",value:"$__auto_interval_"+z.name,selected:!1}),z.options=Q}}}),$p=dg.reducer,{createIntervalOptions:Kp}=dg.actions,Vp=B=>async U=>{const{rootStateKey:z}=B;await U((0,Ka.mb)(z,Kp((0,sn.Y6)(B)))),await U(Jm(B)),await U((0,Ts.xQ)(B))},Jm=(B,U={calculateInterval:ra.calculateInterval,getTimeSrv:Ut.$t,templateSrv:(0,Fp.J)()})=>(z,Q)=>{const le=(0,an.E0)(B,Q());if(le.type==="interval"&&le.auto){const Ce=U.calculateInterval(U.getTimeSrv().timeRange(),le.auto_count,le.auto_min);U.templateSrv.setGrafanaVariable("$__auto_interval_"+le.name,Ce.interval),U.templateSrv.setGrafanaVariable("$__auto_interval",Ce.interval)}},zp=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:Wp,reducer:$p,picker:al(),editor:cg,dependsOn:()=>!1,setValue:async(B,U,z=!1)=>{await(0,Na.WI)(Jm((0,sn.yQ)(B))),await(0,Na.WI)((0,Ts.Fz)((0,sn.yQ)(B),U,z))},setValueFromUrl:async(B,U)=>{await(0,Na.WI)(Jm((0,sn.yQ)(B))),await(0,Na.WI)((0,Ts.Ci)((0,sn.yQ)(B),U))},updateOptions:async B=>{await(0,Na.WI)(Vp((0,sn.yQ)(B)))},getSaveModel:B=>{const{index:U,id:z,state:Q,global:le,rootStateKey:Ce,...Ie}=(0,y.cloneDeep)(B);return Ie},getValueForUrl:B=>B.current.value});var ug=e(22107);const Xm=[{label:"On dashboard load",value:ug.Bd.onDashboardLoad},{label:"On time range change",value:ug.Bd.onTimeRangeChanged}];function Hp({onChange:B,refresh:U}){const z=(0,a.useMemo)(()=>Xm.find(Q=>Q.value===U)?.value??Xm[0].value,[U]);return a.createElement(_n.g,{label:"Refresh",description:"When to update the values of this variable"},a.createElement(fe.S,{options:Xm,onChange:B,value:z}))}const _m=[{label:"Disabled",value:ys.$U.disabled},{label:"Alphabetical (asc)",value:ys.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:ys.$U.alphabeticalDesc},{label:"Numerical (asc)",value:ys.$U.numericalAsc},{label:"Numerical (desc)",value:ys.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:ys.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:ys.$U.alphabeticalCaseInsensitiveDesc}];function kp({onChange:B,sort:U}){const z=(0,a.useMemo)(()=>_m.find(Q=>Q.value===U)??_m[0],[U]);return a.createElement(Qm.u,{name:"Sort",description:"How to sort the values of this variable",value:z,options:_m,onChange:B,testId:Tt.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var Gp=e(95484),Yp=e(91896),mg=e(95125);async function jp(B,U=Pi.nL){if((0,ms.d7)(B))return B.variables.editor;if((0,ms.X7)(B)){const z=await U(B.meta);if(!z.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return z.components.QueryEditor??null}return(0,ms.Ju)(B)?Qp:(0,ms.R)(B)?(await U(B.meta)).components.VariableQueryEditor??mg.R:null}function Qp({datasource:B,query:U,onChange:z}){const Q=(0,a.useCallback)(le=>{z({refId:"StandardVariableQuery",query:le})},[z]);return a.createElement(mg.R,{query:U.query,onChange:Q,datasource:B,templateSrv:(0,kn.J)()})}function Zp(B,U,z){return{next:le=>{if(le.state===ln.Gu.Error){z.unsubscribe(),U(le.error);return}if(le.state===ln.Gu.Done){z.unsubscribe(),B();return}},error:le=>{z.unsubscribe(),U(le)},complete:()=>{z.unsubscribe(),B()}}}const Jp=(B,U)=>async(z,Q)=>{try{const{rootStateKey:le}=B;if(!(0,sn.A3)(le,Q()))return;const Ce=(0,an.E0)(B,Q());if(Ce.type!=="query")return;(0,an.AE)(le,Q()).editor.id===Ce.id&&z((0,Ka.mb)(le,(0,Da.PV)({errorProp:"update"})));const Ie=await(0,A.F)().get(Ce.datasource??"");await new Promise((Je,it)=>{const pt=new Gp.w0,vt=Zp(Je,it,pt),Mt=Ym().getResponse(B).subscribe(vt);pt.add(Mt),Ym().queueRequest({identifier:B,datasource:Ie,searchFilter:U})})}catch(le){if(le instanceof Error){const Ce=(0,Yp.P)(le),{rootStateKey:Ie}=B;throw(0,an.AE)(Ie,Q()).editor.id===B.id&&z((0,Ka.mb)(Ie,(0,Da.Sg)({errorProp:"update",errorText:Ce.message}))),Ce}}},Xp=B=>async(U,z)=>{const Q=(0,an.E0)(B,z());Q.type==="query"&&await U(fg((0,sn.yQ)(Q),Q.datasource))},fg=(B,U)=>async(z,Q)=>{try{const{rootStateKey:le}=B,{editor:Ce}=(0,an.AE)(le,Q()),Je=yn(Ce)?.dataSource,it=await(0,A.F)().get(U??"");Je&&Je.type!==it?.type&&z((0,Ka.mb)(le,(0,oo.Pl)((0,sn.Y6)(B,{propName:"query",propValue:""}))));const pt=await jp(it);z((0,Ka.mb)(le,(0,Da.z7)({dataSource:it,VariableQueryEditor:pt})))}catch(le){console.error(le)}},_p=(B,U,z)=>async(Q,le)=>{const{rootStateKey:Ce}=B,Ie=(0,an.E0)(B,le());if(Ie.type==="query"){if(qp(Ie.name,U)){const Je="Query cannot contain a reference to itself. Variable: $"+Ie.name;Q((0,Ka.mb)(Ce,(0,Da.Sg)({errorProp:"query",errorText:Je})));return}Q((0,Ka.mb)(Ce,(0,Da.PV)({errorProp:"query"}))),Q((0,Ka.mb)(Ce,(0,oo.Pl)((0,sn.Y6)(B,{propName:"query",propValue:U})))),z?Q((0,Ka.mb)(Ce,(0,oo.Pl)((0,sn.Y6)(B,{propName:"definition",propValue:z})))):typeof U=="string"&&Q((0,Ka.mb)(Ce,(0,oo.Pl)((0,sn.Y6)(B,{propName:"definition",propValue:U})))),await Q((0,Ts.Rk)(B))}};function qp(B,U){if(typeof U=="string"&&U.match(new RegExp("\\$"+B+"(/| |$)")))return!0;const z=gg(U);for(let Q in z)if(z.hasOwnProperty(Q)){const le=z[Q];if(typeof le=="string"&&le.match(new RegExp("\\$"+B+"(/| |$)")))return!0}return!1}function gg(B){return typeof B!="object"||B===null?{query:B}:Object.keys(B).reduce((Q,le)=>{const Ce=B[le];if(typeof Ce!="object"||Ce===null)return Q[le]=Ce,Q;const Ie=gg(Ce);for(let Je in Ie)Ie.hasOwnProperty(Je)&&(Q[`${le}_${Je}`]=Ie[Je]);return Q},{})}const eh=(B,U)=>{const{rootStateKey:z}=U.variable;if(!z)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:yn(Da.PF)};const{editor:Q}=(0,an.AE)(z,B);return{extended:yn(Q)}},th={initQueryVariableEditor:Xp,changeQueryVariableDataSource:fg,changeQueryVariableQuery:_p,changeVariableMultiValue:Ts.Z7},nh=(0,mr.connect)(eh,th);class ah extends a.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=U=>{this.props.onPropChange({propName:"datasource",propValue:U.isDefault?null:(0,ua.iU)(U)})},this.onLegacyQueryChange=async(U,z)=>{this.props.variable.query!==U&&this.props.changeQueryVariableQuery((0,sn.yQ)(this.props.variable),U,z)},this.onQueryChange=async U=>{if(this.props.variable.query!==U){let z="";U&&U.hasOwnProperty("query")&&typeof U.query=="string"&&(z=U.query),this.props.changeQueryVariableQuery((0,sn.yQ)(this.props.variable),U,z)}},this.onRegExChange=U=>{this.setState({regex:U.currentTarget.value})},this.onRegExBlur=async U=>{const z=U.currentTarget.value;this.props.variable.regex!==z&&this.props.onPropChange({propName:"regex",propValue:z,updateOptions:!0})},this.onRefreshChange=U=>{this.props.onPropChange({propName:"refresh",propValue:U})},this.onSortChange=async U=>{this.props.onPropChange({propName:"sort",propValue:U.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:U,propName:z})=>{this.props.onPropChange({propName:z,propValue:U,updateOptions:!0})},this.renderQueryEditor=()=>{const{extended:U,variable:z}=this.props;if(!U||!U.dataSource||!U.VariableQueryEditor)return null;const Q=z.query,le=U.dataSource,Ce=U.VariableQueryEditor;if((0,ms.NX)(Ce,le))return a.createElement(_n.g,{label:"Query"},a.createElement(Ce,{datasource:le,query:Q,templateSrv:(0,kn.J)(),onChange:this.onLegacyQueryChange}));const Ie=(0,Ut.$t)().timeRange();return(0,ms.$7)(Ce,le)?a.createElement(_n.g,{label:"Query"},a.createElement(Ce,{datasource:le,query:Q,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:ln.Gu.Done,timeRange:Ie},range:Ie,onBlur:()=>{},history:[]})):null}}async componentDidMount(){await this.props.initQueryVariableEditor((0,sn.yQ)(this.props.variable))}componentDidUpdate(U){U.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,sn.yQ)(this.props.variable),this.props.variable.datasource)}render(){return a.createElement(a.Fragment,null,a.createElement(na.e,null,"Query options"),a.createElement(_n.g,{label:"Data source",htmlFor:"data-source-picker"},a.createElement(Ua.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})),this.renderQueryEditor(),a.createElement(og.W,{value:this.state.regex??this.props.variable.regex,name:"Regex",description:a.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",a.createElement("br",null),"Named capture groups can be used to separate the display text and value (",a.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:Tt.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),a.createElement(kp,{onChange:this.onSortChange,sort:this.props.variable.sort}),a.createElement(Hp,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),a.createElement(na.e,null,"Selection options"),a.createElement(jc,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const sh=nh(ah),rh=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:Tg,reducer:Lg,picker:al(),editor:sh,dependsOn:(B,U)=>(0,sn.QI)(B.query,B.datasource?.uid,B.regex,U.name),setValue:async(B,U,z=!1)=>{await(0,Na.WI)((0,Ts.Fz)((0,sn.yQ)(B),U,z))},setValueFromUrl:async(B,U)=>{await(0,Na.WI)((0,Ts.Ci)((0,sn.yQ)(B),U))},updateOptions:async(B,U)=>{await(0,Na.WI)(Jp((0,sn.yQ)(B),U))},getSaveModel:B=>{const{index:U,id:z,state:Q,global:le,queryValue:Ce,rootStateKey:Ie,...Je}=(0,y.cloneDeep)(B);return B.refresh!==ys.Bd.never?{...Je,options:[]}:Je},getValueForUrl:B=>(0,sn.HY)(B)?Er.xk:B.current.value}),oh=()=>({id:"system",description:"",name:"system",initialState:{...ys.Eg,type:"system",hide:ys.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:ln.Gu.Done},reducer:(B,U)=>B,picker:null,editor:null,dependsOn:()=>!1,setValue:async(B,U,z=!1)=>{},setValueFromUrl:async(B,U)=>{},updateOptions:async B=>{},getSaveModel:B=>({}),getValueForUrl:B=>""});function ih({onPropChange:B,variable:{query:U}}){const z=(0,a.useCallback)((Ce,Ie)=>{Ce.preventDefault(),B({propName:"originalQuery",propValue:Ce.currentTarget.value,updateOptions:!1}),B({propName:"query",propValue:Ce.currentTarget.value,updateOptions:Ie})},[B]),Q=(0,a.useCallback)(Ce=>z(Ce,!1),[z]),le=(0,a.useCallback)(Ce=>z(Ce,!0),[z]);return a.createElement(a.Fragment,null,a.createElement(na.e,null,"Text options"),a.createElement(si.V,{value:U,name:"Default value",placeholder:"default value, if any",onChange:Q,onBlur:le,width:30,testId:Tt.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function lh({variable:B,onVariableChange:U,readOnly:z}){const Q=(0,on.useDispatch)(),[le,Ce]=(0,a.useState)(B.current.value);(0,a.useEffect)(()=>{Ce(B.current.value)},[B]);const Ie=(0,a.useCallback)(()=>{if(!B.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(B.current.value!==le){if(Q((0,Ka.mb)(B.rootStateKey,(0,oo.Pl)((0,sn.Y6)({id:B.id,type:B.type},{propName:"query",propValue:le})))),U){U({...B,current:{...B.current,value:le}});return}Wn.z.get(B.type).updateOptions(B)}},[B,le,Q,U]),Je=(0,a.useCallback)(vt=>Ce(vt.target.value),[Ce]),it=vt=>Ie(),pt=vt=>{vt.keyCode===13&&(vt.preventDefault(),Ie())};return a.createElement(Ee.I,{type:"text",value:le,onChange:Je,onBlur:it,disabled:z,onKeyDown:pt,placeholder:"Enter variable value",id:`var-${B.id}`})}const ch={...ys.Eg,type:"textbox",query:"",current:{},options:[],originalQuery:null},pg=(0,Nr.oM)({name:"templating/textbox",initialState:ai.s,reducers:{createTextBoxOptions:(B,U)=>{const z=(0,an.ir)(B,U.payload.id);if(z.type!=="textbox")return;const Q={text:z.query.trim(),value:z.query.trim(),selected:!1};z.options=[Q],z.current=Q}}}),dh=pg.reducer,{createTextBoxOptions:uh}=pg.actions,mh=B=>async(U,z)=>{const{rootStateKey:Q,type:le}=B;U((0,Ka.mb)(Q,uh((0,sn.Y6)(B))));const Ce=(0,an.E0)(B,z());Ce.type==="textbox"&&await Wn.z.get(le).setValue(Ce,Ce.options[0],!0)},fh=(B,U)=>async(z,Q)=>{const{rootStateKey:le}=B,Ce=(0,an.E0)(B,Q());if(Ce.type!=="textbox")return;const Ie=(0,sn.Hi)(U);z((0,Ka.mb)(le,(0,oo.Pl)((0,sn.Y6)(Ce,{propName:"query",propValue:Ie})))),await z((0,Ts.Ci)((0,sn.yQ)(Ce),Ie))},gh=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:ch,reducer:dh,picker:lh,editor:ih,dependsOn:(B,U)=>!1,setValue:async(B,U,z=!1)=>{await(0,Na.WI)((0,Ts.Fz)((0,sn.yQ)(B),U,z))},setValueFromUrl:async(B,U)=>{await(0,Na.WI)(fh((0,sn.yQ)(B),U))},updateOptions:async B=>{await(0,Na.WI)(mh((0,sn.yQ)(B)))},getSaveModel:(B,U)=>{const{index:z,id:Q,state:le,global:Ce,originalQuery:Ie,rootStateKey:Je,...it}=(0,y.cloneDeep)(B);if(B.query!==Ie&&!U){const pt=Ie??"",vt={selected:!1,text:pt,value:pt};return{...it,query:pt,current:vt,options:[vt]}}return it},getValueForUrl:B=>B.current.value,beforeAdding:B=>({...(0,y.cloneDeep)(B),originalQuery:B.query})});var qm=e(10655),ph=e(61962);const hh={navBarTree:ph.V4,navIndex:bo.G4,appNotifications:Fi.VW};var vh=e(66114),Eh=e(11626),yh=e(56777),Ph=e(36281),Ch=e(58790),xh=e(71128),Dh=e(48197),bh=e(15932),Mh=e(75804),Sh=e(24693),Oh=e(17283),Th=e(46732),Ih=e(66552),Rh=e(54294),Ah=e(45003),Lh=e(62295),Bh=e(97189),wh=e(46002),ef=e(29427),Nh=e(70431);const Uh={...hh,...Eh.ZP,...Bh.ZP,...yh.ZP,...bh.ZP,...Ch.ZP,...Dh.ZP,...xh.ZP,...wh.ZP,...Ah.ZP,...Rh.ZP,...Mh.ZP,...Oh.ZP,...vh.ZP,...Sh.ZP,...Ph.ZP,...Th.ZP,...Ka.ZP,...Lh.ZP,plugins:Ih.I6,[ef.C.reducerPath]:ef.C.reducer,[qm.Rh.reducerPath]:qm.Rh.reducer},hg={},Gh=B=>{Object.assign(hg,B)},Fh=()=>{const B=(0,Jf.combineReducers)({...Uh,...hg});return(U,z)=>{if(z.type!==Nh.e.type)return B(U,z);const{cleanupAction:Q}=z.payload;return Q(U),B(U,z)}};function Yh(B){addReducer(B)}function Wh(B){const U=(0,Nr.xC)({reducer:Fh(),middleware:z=>z({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(ef.C.middleware,qm.Rh.middleware),devTools:!1,preloadedState:{navIndex:(0,bo.Cu)(),...B}});return(0,Na.PQ)(U),U}h().move=X.R;const vg=e(72866),Qc=vg.keys().map(B=>vg(B));class $h{async init(){try{parent.postMessage("GrafanaAppInit","*");const U=(0,wa.uC)(b.ZP.bootData.user.language);(0,D.jW)(Wo.ae),zh(),Hh(),(0,C.i_)(b.ZP.bootData.user.locale),(0,C.Ls)(b.ZP.bootData.user.weekStart),(0,I.L)(vn.$),(0,F.t)(bf),(0,W.$)(_t.Z),(0,T.x)(R.E1),(0,E.K)(()=>b.ZP.bootData.user.timezone),Kh(),Wh(),Vh(),P.S.setInit(Fm.u),P.N.setInit(Fm.l),x.Z.setInit(ml),Wn.z.setInit(()=>[rh(),Cp(),gh(),mp(),wp(),zp(),Pg(),oh()]),M.F.setInit(fd),(0,L.pD)(()=>new Qa),Gg(new kg),(0,L.Iw)($a.v7),(0,w.Qf)({importPanelPlugin:dn.Ub,getPanelPluginFromCache:dn.q1}),S.u.initialize({config:b.ZP,getTimeRangeForUrl:(0,Ut.$t)().timeRangeForUrl,getVariablesUrlParams:Np.c}),document.addEventListener("click",Sf);const z=new o.ND;z.init(b.ZP.datasources,b.ZP.defaultDatasource),(0,A.w)(z),Ia(),new Lf().init(),await Promise.all([U,await Dn(b.ZP.pluginsToPreload)]);const le=R.E1.getSearchObject(),Ce=new Df,Ie=new zt(R.E1,Ce);Ce.setKioskModeFromUrl(le.kiosk),this.context={backend:Wo.ae,location:R.E1,chrome:Ce,keybindings:Ie,config:b.ZP},v.render(a.createElement(yf,{app:this}),document.getElementById("reactRoot"))}catch(U){console.error("Failed to start Grafana",U),window.__grafana_load_failed()}}}function Kh(){Qc.length>0&&Qc[0].addExtensionReducers()}function Vh(){Qc.length>0&&Qc[0].init()}function zh(){(0,N.tz)(new Nf({debug:!1})),window.addEventListener("load",B=>{const U="frontend_boot_load_time_seconds",z="frontend_boot_js_done_time_seconds",Q="frontend_boot_css_time_seconds";performance&&(performance.mark(U),sl("first-paint","frontend_boot_","_time_seconds"),sl("first-contentful-paint","frontend_boot_","_time_seconds"),sl(U),sl(z),sl(Q))}),Ba.Vt.user.orgRole!==""&&(0,N.e6)(new Ff({})),b.ZP.sentry.enabled&&(0,N.e6)(new mt({...b.ZP.sentry,user:b.ZP.bootData.user,buildInfo:b.ZP.buildInfo})),b.ZP.grafanaJavascriptAgent.enabled&&(0,N.e6)(new Ao({...b.ZP.grafanaJavascriptAgent,app:{version:b.ZP.buildInfo.version,environment:b.ZP.buildInfo.env},buildInfo:b.ZP.buildInfo,user:{id:String(b.ZP.bootData.user?.id),email:b.ZP.bootData.user?.email}})),b.ZP.googleAnalyticsId&&(0,N.e6)(new zc({googleAnalyticsId:b.ZP.googleAnalyticsId})),b.ZP.googleAnalytics4Id&&(0,N.e6)(new zm({googleAnalyticsId:b.ZP.googleAnalytics4Id,googleAnalytics4SendManualPageViews:b.ZP.googleAnalytics4SendManualPageViews})),b.ZP.rudderstackWriteKey&&b.ZP.rudderstackDataPlaneUrl&&(0,N.e6)(new $f({writeKey:b.ZP.rudderstackWriteKey,dataPlaneUrl:b.ZP.rudderstackDataPlaneUrl,user:b.ZP.bootData.user,sdkUrl:b.ZP.rudderstackSdkUrl,configUrl:b.ZP.rudderstackConfigUrl})),b.ZP.applicationInsightsConnectionString&&(0,N.e6)(new Wf({connectionString:b.ZP.applicationInsightsConnectionString,endpointUrl:b.ZP.applicationInsightsEndpointUrl}))}function Hh(){(0,V.n)()>0&&document.body.classList.add("no-overlay-scrollbar")}function sl(B,U="",z=""){const Q=h().first(performance.getEntriesByName(B));if(Q){const le=Q.name.replace(/-/g,"_");Uf(`${U}${le}${z}`,Math.round(Q.startTime)/1e3)}}const kh=new $h;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,kh.init()},39031:(G,O,e)=>{"use strict";e.d(O,{As:()=>t,TE:()=>s,Z9:()=>n,_M:()=>u,sK:()=>i});var t=(m=>(m.Active="active",m.Expired="expired",m.Pending="pending",m))(t||{}),n=(m=>(m.Unprocessed="unprocessed",m.Active="active",m.Suppressed="suppressed",m))(n||{}),u=(m=>(m.equal="=",m.notEqual="!=",m.regex="=~",m.notRegex="!~",m))(u||{}),s=(m=>(m.Internal="internal",m.External="external",m.All="all",m))(s||{}),i=(m=>(m.cortex="cortex",m.mimir="mimir",m.prometheus="prometheus",m))(i||{})},2868:(G,O,e)=>{"use strict";e.d(O,{$5:()=>t,KB:()=>u,MQ:()=>n,wf:()=>s});var t=(i=>(i[i.Search=0]="Search",i[i.Query=1]="Query",i))(t||{}),n=(i=>(i[i.Builder=0]="Builder",i[i.Code=1]="Code",i))(n||{}),u=(i=>(i.Scheduled="Scheduled",i.Running="Running",i.Complete="Complete",i.Failed="Failed",i.Cancelled="Cancelled",i.Timeout="Timeout",i))(u||{}),s=(i=>(i.Regions="regions",i.Namespaces="namespaces",i.Metrics="metrics",i.DimensionKeys="dimensionKeys",i.DimensionValues="dimensionValues",i.EBSVolumeIDs="ebsVolumeIDs",i.EC2InstanceAttributes="ec2InstanceAttributes",i.ResourceArns="resourceARNs",i.Statistics="statistics",i.LogGroups="logGroups",i.Accounts="accounts",i))(s||{})},53693:(G,O,e)=>{"use strict";e.d(O,{hD:()=>A,yl:()=>f,AK:()=>o});var t=e(46060),n=e(62163),u=e(49922),s=e(69311),i=e(9398);const m="-- Dashboard --";function f(W){return W?typeof W=="string"?W===m:"meta"in W&&W.meta.name===m||W.uid===m:!1}function o(W,I){return new t.y(F=>{const V=(0,i.h4)().getCurrent(),b=l(W.queries);if(!b){F.next(r("Missing panel reference ID"));return}const X=V?.getPanelById(b);if(!X){F.next(r("Unknown Panel: "+b));return}const k=X.getQueryRunner(),H=k.getData({withTransforms:Boolean(I?.withTransforms),withFieldConfig:!1}).subscribe({next:Y=>{I?.topic===n.w5.Annotations&&(Y={...Y,series:Y.annotations??[],annotations:void 0}),F.next(Y)}});if(!X.isInView){const{datasource:Y,targets:ee}=X,ue={...W,datasource:Y,panelId:b,queries:ee};k.run(ue)}return()=>{H.unsubscribe()}})}function l(W){if(!(!W||!W.length))return W[0].panelId}function r(W){return{state:u.Gu.Error,series:[],request:{},error:{message:W},timeRange:(0,s.JK)()}}var d=e(52423),c=e(42066),g=e(64681),p=e.n(g),y=e(68404),h=e(22350),a=e(29516),v=e(74955),C=e(46739),E=e(40008),P=e(90701),x=e(81697),M=e(44727),S=e(318),D=e(47694),T=e(91162),R=e(36584);function L(W){return JSON.stringify(W)}const w=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function A({panelData:W,queries:I,onChange:F,onRunQueries:V}){const{value:b}=(0,h.Z)(()=>(0,T.ak)().get()),X=I[0],k=(0,y.useMemo)(()=>(0,i.h4)().getCurrent()?.getPanelById(X.panelId??-124134),[X.panelId]),{value:H,loading:Y}=(0,h.Z)(async()=>{if(!k)return[];const te=await(0,T.ak)().get(k.datasource);return Promise.all(k.targets.map(async ne=>{const j=ne.datasource?await(0,T.ak)().get(ne.datasource):te,be=j.getQueryDisplayText||L,Le=(0,R.t)(W,ne.refId)??W;return{refId:ne.refId,query:be(ne),img:j.meta.info.logos.small,data:Le.series,error:Le.error}}))},[W,k]),ee=(0,y.useCallback)(te=>{F([te]),V()},[F,V]),ue=(0,y.useCallback)(te=>{ee({...X,panelId:te})},[X,ee]),q=(0,y.useCallback)(()=>{ee({...X,withTransforms:!X.withTransforms})},[X,ee]),ge=(0,y.useCallback)(te=>{ee({...X,topic:te?n.w5.Annotations:void 0})},[X,ee]),De=(0,y.useCallback)(te=>{const ne=te.datasource??b,j=(0,T.ak)().getInstanceSettings(ne)?.name,be=te.targets.length;return`${be} ${p()("query",be)} to ${j}`},[b]),fe=(0,i.h4)().getCurrent(),me=(0,y.useMemo)(()=>fe?.panels.filter(te=>D.ZP.panels[te.type]&&te.targets&&te.id!==fe.panelInEdit?.id&&te.datasource?.uid!==m).map(te=>({value:te.id,label:te.title??"Panel "+te.id,description:De(te),imgUrl:D.ZP.panels[te.type].info.logos.small}))??[],[fe,De]),ce=(0,a.wW)(N),ie=(0,c.Me)();if(!fe)return null;if(me.length<1)return y.createElement("p",{className:ce.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const re=me.find(te=>te.value===X.panelId),Ee=`d/${fe.uid}/${fe.title}?&editPanel=${X.panelId}`,J=Boolean(X.withTransforms||k?.transformations?.length);return y.createElement(y.Fragment,null,y.createElement(v.g,{label:"Source",description:"Use the same results as panel"},y.createElement(C.Ph,{inputId:ie,placeholder:"Choose panel",isSearchable:!0,options:me,value:re,onChange:te=>ue(te.value)})),Y?y.createElement(E.$,null):y.createElement(y.Fragment,null,H&&Boolean(H.length)&&y.createElement(v.g,{label:"Queries"},y.createElement(P.wc,{spacing:"sm"},H.map((te,ne)=>y.createElement("div",{className:ce.queryEditorRowHeader,key:`DashboardQueryRow-${ne}`},y.createElement("div",null,y.createElement("img",{src:te.img,alt:"",width:16}),y.createElement("span",{className:ce.refId},te.refId,":")),y.createElement("div",null,y.createElement("a",{href:Ee},te.query,"\xA0",y.createElement(x.J,{name:"external-link-alt"})))))))),J&&y.createElement(v.g,{label:"Transform",description:"Apply panel transformations from the source panel"},y.createElement(M.r,{value:Boolean(X.withTransforms),onChange:q})),y.createElement(v.g,{label:"Data"},y.createElement(S.S,{options:w,value:X.topic===n.w5.Annotations,onChange:ge})))}function N(W){return{results:(0,d.css)({padding:W.spacing(2)}),noQueriesText:(0,d.css)({padding:W.spacing(1.25)}),refId:(0,d.css)({padding:W.spacing(1.25)}),queryEditorRowHeader:d.css`
      label: queryEditorRowHeader;
      display: flex;
      padding: 4px 8px;
      flex-flow: row wrap;
      background: ${W.colors.background.secondary};
      align-items: center;
    `}}},83977:(G,O,e)=>{"use strict";e.d(O,{k:()=>V,e:()=>b});var t=e(82897),n=e(85526),u=e(53786),s=e(16313),i=e(2101),m=e(70006),f=e(49922),o=e(62626),l=e(38685),r=e(50235),d=e(16911),c=e(9800),g=e(69934),p=e(72274),y=e(47214),h=e(77213),a=e(7592),v=e(9398),C=e(52423),E=e(68404),P=e(65587),x=e(74955),M=e(46739),S=e(44727),D=e(24357),T=e(70659),R=e(7832);const L="Enabling this returns annotations that match any of the tags specified below",w=E.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),A=[{label:"Dashboard",value:R._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:R._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],N=[10,50,100,200,300,500,1e3,2e3].map(X=>({label:String(X),value:X}));function W({query:X,onChange:k}){const H=X,{limit:Y,matchAny:ee,tags:ue,type:q}=H,ge=I(),De=ie=>k({...H,type:ie.value}),fe=ie=>k({...H,limit:ie.value}),me=ie=>k({...H,matchAny:ie.target.checked}),ce=ie=>k({...H,tags:ie});return E.createElement(P.C,{className:ge.container},E.createElement(x.g,{label:"Filter by"},E.createElement(M.Ph,{inputId:"grafana-annotations__filter-by",options:A,value:q,onChange:De})),E.createElement(x.g,{label:"Max limit"},E.createElement(M.Ph,{inputId:"grafana-annotations__limit",width:16,options:N,value:Y,onChange:fe})),q===R._$.Tags&&E.createElement(E.Fragment,null,E.createElement(x.g,{label:"Match any",description:L},E.createElement(S.r,{id:"grafana-annotations__match-any",value:ee,onChange:me})),E.createElement(x.g,{label:"Tags",description:w},E.createElement(D.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:ce,tagOptions:T.lK,tags:ue??[]}))))}const I=()=>({container:C.css`
      max-width: 600px;
    `});let F=100;class V extends c.CK{constructor(k){super(k),this.annotations={QueryEditor:W,prepareAnnotation(H){return H.target=H.target??{type:H.type??R._$.Dashboard,limit:H.limit??100,tags:H.tags??[],matchAny:H.matchAny??!1},H},prepareQuery(H){let Y;if((0,t.isString)(H.datasource)){const ee=(0,a.p)(H.datasource,{returnDefaultAsNull:!1});ee&&(Y=ee)}else Y=H.datasource;return{...H,refId:H.name,queryType:R.hR.Annotations,datasource:Y}}}}query(k){const H=[],Y=[],ee=(0,g.J)();for(const ue of k.targets){if(ue.queryType===R.hR.Annotations)return(0,n.D)(this.getAnnotations({range:k.range,rangeRaw:k.range.raw,annotation:ue,dashboard:(0,v.h4)().getCurrent()}));if(!ue.hide){if(ue.queryType===R.hR.Snapshot){H.push((0,u.of)({data:(ue.snapshot??[]).map(q=>(0,m.vP)(q)),state:f.Gu.Done}));continue}if(ue.queryType===R.hR.LiveMeasurements){let q=ee.replace(ue.channel,k.scopedVars);const{filter:ge}=ue,De=(0,o.H7)(q);if(!(0,o.nU)(De))continue;const fe={maxLength:k.maxDataPoints??500};ue.buffer?(fe.maxDelta=ue.buffer,fe.maxLength=fe.maxLength*2):k.rangeRaw?.to==="now"&&(fe.maxDelta=k.range.to.valueOf()-k.range.from.valueOf()),H.push((0,p.gj)().getDataStream({key:`${k.requestId}.${F++}`,addr:De,filter:ge,buffer:fe}))}else ue.queryType||(ue.queryType=R.hR.RandomWalk),Y.push(ue)}}return Y.length&&H.push(super.query({...k,targets:Y})),H.length?H.length===1?H[0]:(0,s.T)(...H):(0,u.of)()}listFiles(k){return this.query({targets:[{refId:"A",queryType:R.hR.List,path:k}]}).pipe((0,i.U)(H=>{const Y=H.data[0]??new l.v;return new r.U(Y)}))}metricFindQuery(k){return Promise.resolve([])}async getAnnotations(k){const H=(0,g.J)(),Y=k.annotation,ee=Y.target,ue={from:k.range.from.valueOf(),to:k.range.to.valueOf(),limit:ee.limit,tags:ee.tags,matchAny:ee.matchAny};if(ee.type===R._$.Dashboard){if(!k.dashboard.uid)return Promise.resolve({data:[]});ue.dashboardUID=k.dashboard.uid,delete ue.tags}else{if(!Array.isArray(ee.tags)||ee.tags.length===0)return Promise.resolve({data:[]});const ge="__delimiter__",De=[];for(const fe of ue.tags){const me=H.replace(fe,{},ce=>typeof ce=="string"?ce:ce.join(ge));for(const ce of me.split(ge))De.push(ce)}ue.tags=De}const q=await(0,y.i)().get("/api/annotations",ue,`grafana-data-source-annotations-${Y.name}-${k.dashboard?.uid}`);return{data:[(0,d.g0)(q)]}}testDatasource(){return Promise.resolve()}}async function b(){return await(0,h.F)().get("-- Grafana --")}},7832:(G,O,e)=>{"use strict";e.d(O,{_$:()=>u,hR:()=>t,wi:()=>n});var t=(s=>(s.LiveMeasurements="measurements",s.Annotations="annotations",s.Snapshot="snapshot",s.RandomWalk="randomWalk",s.List="list",s.Read="read",s.Search="search",s))(t||{});const n={refId:"A",queryType:"randomWalk"};var u=(s=>(s.Dashboard="dashboard",s.Tags="tags",s))(u||{})},56991:(G,O,e)=>{"use strict";e.d(O,{L:()=>s});var t=e(82897),n=e.n(t),u=e(68404);function s(){const i=(0,u.useRef)(null);return i.current==null&&(i.current=(0,t.uniqueId)()),i.current}},63496:(G,O,e)=>{"use strict";e.d(O,{D:()=>h,w:()=>a});var t=e(82897),n=e.n(t),u=e(53786),s=e(85526),i=e(74687),m=e(98356),f=e(2101),o=e(73273),l=e(94514),r=e(15562),d=e(38581),c=e(7238),g=e(49922),p=e(77213),y=e(91896);const h="-- Mixed --";class a extends c.MF{constructor(E){super(E)}query(E){const P=E.targets.filter(S=>S.datasource?.uid!==h);if(!P.length)return(0,u.of)({data:[]});const x=(0,t.groupBy)(P,"datasource.uid"),M=[];for(const S in x){const D=x[S];M.push({datasource:(0,p.F)().get(D[0].datasource,E.scopedVars),targets:D})}return M.length?this.batchQueries(M,E):(0,u.of)({data:[]})}batchQueries(E,P){const x=E.filter(this.isQueryable).map((M,S)=>(0,s.D)(M.datasource).pipe((0,m.z)(D=>{const T=(0,t.cloneDeep)(P);return T.requestId=`mixed-${S}-${T.requestId||""}`,T.targets=M.targets,(0,s.D)(D.query(T)).pipe((0,f.U)(R=>({...R,data:R.data||[],state:g.Gu.Loading,key:`mixed-${S}-${R.key||""}`})),(0,o.q)(),(0,l.K)(R=>(R=(0,y.P)(R),R.message=`${D.name}: ${R.message}`,(0,u.of)([{data:[],state:g.Gu.Error,error:R,key:`mixed-${S}-${T.requestId||""}`}]))))})));return(0,i.D)(x).pipe(v(),(0,f.U)(this.finalizeResponses),(0,r.J)())}testDatasource(){return Promise.resolve({})}getQueryDisplayText(E){const P=(0,t.omit)(E,["key","refId","datasource"]),x=JSON.stringify(P);return`${E.datasource?.type?`${E.datasource?.type}: `:""}${x}`}isQueryable(E){return E&&Array.isArray(E.targets)&&E.targets.length>0}finalizeResponses(E){const{length:P}=E;if(P===0)return E;const x=E.find(M=>M.state===g.Gu.Error);return x?E.push(x):E[P-1].state=g.Gu.Done,E}}function v(){return(0,d.u)((C,E)=>E.reduce((P,x)=>(P.push.apply(P,x),P),C),[])}},40286:(G,O,e)=>{"use strict";e.d(O,{As:()=>t,LM:()=>u,kx:()=>n,wO:()=>s});var t=(i=>(i[i.AlphaAsc=1]="AlphaAsc",i[i.AlphaDesc=2]="AlphaDesc",i[i.Importance=3]="Importance",i[i.TimeAsc=4]="TimeAsc",i[i.TimeDesc=5]="TimeDesc",i))(t||{}),n=(i=>(i.Current="current",i.RecentChanges="changes",i))(n||{}),u=(i=>(i.Default="default",i.Custom="custom",i))(u||{}),s=(i=>(i.List="list",i.Stat="stat",i))(s||{})},28586:(G,O,e)=>{"use strict";e.d(O,{Gj:()=>n,Qm:()=>m});var t=e(43211);const n=1,u=2,s=3,i=(f,o,l,r)=>(0,t.O)(o+f*(l+r),6);function m(f,o,l,r,d){let c=1-o,g=l===n?c/(f-1):l===u?c/f:l===s?c/(f+1):0;(isNaN(g)||g===1/0)&&(g=0);let p=l===n?0:l===u?g/2:l===s?g:0,y=o/f,h=(0,t.O)(y,6);if(r==null)for(let a=0;a<f;a++)d(a,i(a,p,y,g),h);else d(r,i(r,p,y,g),h)}},60892:(G,O,e)=>{"use strict";e.d(O,{Pn:()=>u,kK:()=>i,lW:()=>m,zZ:()=>s});const t=10,n=4;function u(f,o,l,r,d,c){return f>=l&&f<=d&&o>=r&&o<=c}function s(f,o,l){let r;if(f.o.length&&(r=f.o.find(d=>d.sidx===o&&d.didx===l)),r==null&&f.q)for(let d=0;d<f.q.length&&(r=s(f.q[d],o,l),!r);d++);return r}function i(f,o){return f.x<=o.x+o.w&&f.x+f.w>=o.x&&f.y+f.h>=o.y&&f.y<=o.y+o.h}class m{constructor(o,l,r,d,c=0){this.x=o,this.y=l,this.w=r,this.h=d,this.l=c,this.o=[],this.q=null}split(){let o=this,l=o.x,r=o.y,d=o.w/2,c=o.h/2,g=o.l+1;o.q=[new m(l+d,r,d,c,g),new m(l,r,d,c,g),new m(l,r+c,d,c,g),new m(l+d,r+c,d,c,g)]}quads(o,l,r,d,c){let g=this,p=g.q,y=g.x+g.w/2,h=g.y+g.h/2,a=l<h,v=o<y,C=o+r>y,E=l+d>h;a&&C&&c(p[0]),v&&a&&c(p[1]),v&&E&&c(p[2]),C&&E&&c(p[3])}add(o){let l=this;if(l.q!=null)l.quads(o.x,o.y,o.w,o.h,r=>{r.add(o)});else{let r=l.o;if(r.push(o),r.length>t&&l.l<n){l.split();for(let d=0;d<r.length;d++){let c=r[d];l.quads(c.x,c.y,c.w,c.h,g=>{g.add(c)})}l.o.length=0}}}get(o,l,r,d,c){let g=this,p=g.o;for(let y=0;y<p.length;y++)c(p[y]);g.q!=null&&g.quads(o,l,r,d,y=>{y.get(o,l,r,d,c)})}clear(){this.o.length=0,this.q=null}}},63992:(G,O,e)=>{"use strict";e.d(O,{M:()=>r,l:()=>d});var t=e(82897),n=e.n(t),u=e(68404),s=e(20251),i=e(17128),m=e(87462),f=e(67591),o=e(3652),l=e(47694);class r extends u.PureComponent{constructor(){super(...arguments),this.renderComponent=(g,p)=>{const{options:y,fieldConfig:h}=this.props,{value:a,alignmentFactors:v,orientation:C,width:E,height:P,count:x}=g,{field:M,display:S,view:D,colIndex:T}=a,{openMenu:R,targetClassName:L}=p;let w;return D&&(0,t.isNumber)(T)&&(w=D.getFieldDisplayProcessor(T)),u.createElement(m.xf,{value:d(x,h.defaults,S),width:E,height:P,orientation:C,field:M,text:y.text,display:w,theme:l.vc.theme2,itemSpacing:this.getItemSpacing(),displayMode:y.displayMode,onClick:R,className:L,alignmentFactors:x>1?v:void 0,showUnfilled:y.showUnfilled})},this.renderValue=g=>{const{value:p,orientation:y}=g,{hasLinks:h,getLinks:a}=p;return h&&a?u.createElement("div",{style:{width:"100%",display:y===s.wm.Vertical?"flex":"initial"}},u.createElement(f.V,{links:a},v=>this.renderComponent(g,v))):this.renderComponent(g,{})},this.getValues=()=>{const{data:g,options:p,replaceVariables:y,fieldConfig:h,timeZone:a}=this.props;return(0,i.nG)({fieldConfig:h,reduceOptions:p.reduceOptions,replaceVariables:y,theme:l.vc.theme2,data:g.series,timeZone:a})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}render(){const{height:g,width:p,options:y,data:h,renderCounter:a}=this.props;return u.createElement(o.Q,{source:h,getAlignmentFactors:i.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:a,width:p,height:g,minVizWidth:y.minVizWidth,minVizHeight:y.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:y.orientation})}}function d(c,g,p){return c===1&&!g.displayName?{...p,title:void 0}:p}},35450:(G,O,e)=>{"use strict";e.d(O,{Z:()=>Qe});var t=e(52423),n=e(68404),u=e(11041),s=e(50235),i=e(40400),m=e(29516);const f=22*window.devicePixelRatio,o=10*window.devicePixelRatio,l=.5*window.devicePixelRatio,r=20*window.devicePixelRatio,d=.5*window.devicePixelRatio,c=4*window.devicePixelRatio,g=800,p=120;var y=e(12398),h=e(14582),a=e(36512),v=e(36328),C=(Ye=>(Ye.Bytes="bytes",Ye.Short="short",Ye.Nanoseconds="ns",Ye))(C||{}),E=(Ye=>(Ye.Symbol="Symbol",Ye.Self="Self",Ye.Total="Total",Ye))(E||{}),P=(Ye=>(Ye.TopTable="topTable",Ye.FlameGraph="flameGraph",Ye.Both="both",Ye))(P||{}),x=e(48756);const M=({tooltipRef:Ye,tooltipData:de,showTooltip:Be})=>{const Ve=(0,m.wW)(D);return n.createElement("div",{ref:Ye,className:Ve.tooltip},de&&Be&&n.createElement(x.u,{content:n.createElement("div",null,n.createElement("p",null,de.name),n.createElement("p",{className:Ve.lastParagraph},de.unitTitle,n.createElement("br",null),"Total: ",n.createElement("b",null,de.unitValue)," (",de.percentValue,"%)",n.createElement("br",null),"Self: ",n.createElement("b",null,de.unitSelf)," (",de.percentSelf,"%)",n.createElement("br",null),"Samples: ",n.createElement("b",null,de.samples))),placement:"right",show:!0},n.createElement("span",null)))},S=(Ye,de,Be,Ve,$e)=>{let We,Ke;const qe=(0,a.U)({field:Ye,theme:(0,v.j)()}),Xe=qe(Be),at=qe(Ve),Ze=Math.round(1e4*(Be/$e))/100,lt=Math.round(1e4*(Ve/$e))/100;let nt=Xe.text+Xe.suffix,_e=at.text+at.suffix;switch(Ye.config.unit){case C.Bytes:We="% of total",Ke="RAM";break;case C.Nanoseconds:We="% of total time",Ke="Time";break;default:We="% of total",Ke="Count",Xe.suffix||(nt=Xe.text),at.suffix||(_e=at.text);break}return{name:de,percentTitle:We,percentValue:Ze,percentSelf:lt,unitTitle:Ke,unitValue:nt,unitSelf:_e,samples:Be.toLocaleString()}},D=()=>({tooltip:t.css`
    position: fixed;
  `,lastParagraph:t.css`
    margin-bottom: 0;
  `,name:t.css`
    margin-bottom: 10px;
  `}),T=M;var R=e(1301);function L(Ye,de,Be,Ve,$e,We){const Ke=[];for(let qe=0;qe<Ye.length;qe+=1){const Xe=Ye[qe],at=A(Xe.start,Be,Ve,$e);let Ze=Xe.value;const lt=Ze*$e<=o;if(lt)for(;qe<Ye.length-1&&Xe.start+Ze===Ye[qe+1].start&&Ye[qe+1].value*$e<=o;)qe+=1,Ze+=Ye[qe].value;const nt=We(Xe.value);let _e=nt.suffix?nt.text+nt.suffix:nt.text;const ut=Ze*$e-(lt?0:d*2);Ke.push({width:ut,height:f,x:at,y:de*f,collapsed:lt,ticks:Ze,label:Xe.label,unitLabel:_e})}return Ke}function w(Ye,de,Be,Ve,$e,We,Ke,qe,Xe){if(de.width<l)return;Ye.beginPath(),Ye.rect(de.x+(de.collapsed?0:d),de.y,de.width,de.height);const at=Math.min(1,de.ticks/Be/($e-Ve)),Ze=50-50*at,lt=65+7*at,nt=de.label,_e=Xe.filter([nt],We),ut=We&&_e.length>0;de.collapsed?Ye.fillStyle=ut?N(Ze,lt):R.O9[55]:(Ye.stroke(),We?Ye.fillStyle=ut?N(Ze,lt):R.O9[55]:Ye.fillStyle=Ke>qe-1?N(Ze,lt):N(Ze,lt+15)),Ye.fill(),!de.collapsed&&de.width>=r&&(Ye.save(),Ye.clip(),Ye.fillStyle="#222",Ye.fillText(`${nt} (${de.unitLabel})`,Math.max(de.x,0)+c,de.y+f/2),Ye.restore())}function A(Ye,de,Be,Ve){return(Ye-de*Be)*Ve}function N(Ye,de){return`hsl(${Ye}, 100%, ${de}%)`}const W=({data:Ye,app:de,flameGraphHeight:Be,levels:Ve,topLevelIndex:$e,rangeMin:We,rangeMax:Ke,search:qe,setTopLevelIndex:Xe,setRangeMin:at,setRangeMax:Ze,selectedView:lt})=>{const nt=I(lt,de,Be),_e=Ye.fields[1].values.get(0),ut=Ye.fields.find(pe=>pe.name==="value")??Ye.fields.find(pe=>pe.type===h.fS.number);if(!ut)throw new Error("Malformed dataFrame: value field of type number is not in the query response");const[rt,{width:je}]=(0,u.Z)(),dt=(0,n.useRef)(null),oe=(0,n.useRef)(null),[Se,Re]=(0,n.useState)(),[ze,ve]=(0,n.useState)(!1),Te=(0,n.useCallback)((pe,ye,Oe)=>{const Ne=Math.floor(ye/(f/window.devicePixelRatio)),Me=F(pe,Ve[Ne],Oe,_e,We);return{levelIndex:Ne,barIndex:Me}},[Ve,_e,We]),he=(0,n.useCallback)(pe=>{if(!Ve.length)return;const ye=dt.current?.getContext("2d"),Oe=dt.current,Ne=f*Ve.length;Oe.width=Math.round(je*window.devicePixelRatio),Oe.height=Math.round(Ne*window.devicePixelRatio),Oe.style.width=`${je}px`,Oe.style.height=`${Ne}px`,ye.textBaseline="middle",ye.font=12*window.devicePixelRatio+"px monospace",ye.strokeStyle="white";const Me=(0,a.U)({field:ut,theme:(0,v.j)()}),Ae=new y.Z({intraMode:0,intraIns:0});for(let we=0;we<Ve.length;we++){const ke=Ve[we],st=L(ke,we,_e,We,pe,Me);for(const Et of st)w(ye,Et,_e,We,Ke,qe,we,$e,Ae)}},[Ve,je,ut,_e,We,Ke,qe,$e]);return(0,n.useEffect)(()=>{if(dt.current){const pe=je*window.devicePixelRatio/_e/(Ke-We);he(pe),dt.current.onclick=ye=>{const Oe=dt.current.clientWidth/_e/(Ke-We),{levelIndex:Ne,barIndex:Me}=Te(ye.offsetX,ye.offsetY,Oe);Me!==-1&&!isNaN(Ne)&&!isNaN(Me)&&(Xe(Ne),at(Ve[Ne][Me].start/_e),Ze((Ve[Ne][Me].start+Ve[Ne][Me].value)/_e))},dt.current.onmousemove=ye=>{if(oe.current){ve(!1);const Oe=dt.current.clientWidth/_e/(Ke-We),{levelIndex:Ne,barIndex:Me}=Te(ye.offsetX,ye.offsetY,Oe);if(Me!==-1&&!isNaN(Ne)&&!isNaN(Me)){oe.current.style.left=ye.clientX+10+"px",oe.current.style.top=ye.clientY+"px";const Ae=Ve[Ne][Me],we=S(ut,Ae.label,Ae.value,Ae.self,_e);Re(we),ve(!0)}}},dt.current.onmouseleave=()=>{ve(!1)}}},[he,Te,Ve,We,Ke,$e,_e,je,Xe,at,Ze,lt,ut]),n.createElement("div",{className:nt.graph,ref:rt},n.createElement("canvas",{ref:dt,"data-testid":"flameGraph"}),n.createElement(T,{tooltipRef:oe,tooltipData:Se,showTooltip:ze}))},I=(Ye,de,Be)=>({graph:t.css`
    cursor: pointer;
    float: left;
    overflow: scroll;
    width: ${Ye===P.FlameGraph?"100%":"50%"};
    ${de!==i.zj.Explore?`height: calc(${Be}px - 44px)`:""}; // 44px to adjust for header pushing content down
  `}),F=(Ye,de,Be,Ve,$e)=>{if(de){let We=0,Ke=de.length-1;for(;We<=Ke;){const qe=We+Ke>>1,Xe=A(de[qe].start,Ve,$e,Be),at=A(de[qe].start+de[qe].value,Ve,$e,Be);if(Xe<=Ye&&at>=Ye)return qe;Xe>Ye?Ke=qe-1:We=qe+1}}return-1},V=W;function b(Ye){const de=[];let Be=0;for(let Ve=0;Ve<Ye.length;Ve++){const $e={...Ye.get(Ve)},We=Ve>0?{...Ye.get(Ve-1)}:void 0;if(de[$e.level]=de[$e.level]||[],We&&We.level>=$e.level){const qe=de[$e.level][de[$e.level].length-1];Be=qe.start+qe.value}const Ke={...$e,start:Be};de[$e.level].push(Ke)}return de}var X=e(25474),k=e(90723),H=e(318);const Y=({app:Ye,search:de,setTopLevelIndex:Be,setRangeMin:Ve,setRangeMax:$e,setSearch:We,selectedView:Ke,setSelectedView:qe,containerWidth:Xe})=>{const at=(0,m.wW)(lt=>ee(lt,Ye));let Ze=[{value:P.TopTable,label:"Top Table",description:"Only show top table"},{value:P.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return Xe>=g&&Ze.push({value:P.Both,label:"Both",description:"Show both the top table and flame graph"}),n.createElement("div",{className:at.header},n.createElement("div",{className:at.leftContainer},n.createElement("div",{className:at.inputContainer},n.createElement(X.I,{value:de||"",onChange:lt=>{We(lt.currentTarget.value)},placeholder:"Search..",width:24})),n.createElement(k.zx,{type:"button",variant:"secondary",size:"md",onClick:()=>{Be(0),Ve(0),$e(1),We("")}},"Reset View")),n.createElement("div",{className:at.rightContainer},n.createElement(H.S,{options:Ze,value:Ke,onChange:lt=>{qe(lt)}})))},ee=(Ye,de)=>({header:t.css`
    display: flow-root;
    width: 100%;
    background: ${Ye.colors.background.primary};
    top: 0;
    height: 50px;
    z-index: ${Ye.zIndex.navbarFixed};
    ${de===i.zj.Explore?"position: sticky; margin-bottom: 8px; padding-top: 9px":""};
  `,inputContainer:t.css`
    float: left;
    margin-right: 20px;
  `,leftContainer:t.css`
    float: left;
  `,rightContainer:t.css`
    float: right;
  `}),ue=Y;var q=e(89050),ge=e(91742),De=e(75478),fe=e(81697),me=e(49938);const ce=({width:Ye,height:de,data:Be,search:Ve,setSearch:$e,setTopLevelIndex:We,setRangeMin:Ke,setRangeMax:qe})=>{const Xe=(0,m.wW)(oe=>Ee(oe)),at=(oe,Se,Re)=>oe.values[Re].localeCompare(Se.values[Re]),Ze=(oe,Se,Re)=>oe.values[Re].value.toString().localeCompare(Se.values[Re].value.toString(),"en",{numeric:!0}),lt=(0,n.useMemo)(()=>[{accessor:E.Symbol.toLowerCase(),header:E.Symbol,cell:ie,sortType:at,width:Ye-p*2},{accessor:E.Self.toLowerCase(),header:E.Self,cell:re,sortType:Ze,width:p},{accessor:E.Total.toLowerCase(),header:E.Total,cell:re,sortType:Ze,width:p}],[Ye]),nt=(0,n.useMemo)(()=>({columns:lt,data:Be,initialState:{sortBy:[{id:E.Self.toLowerCase(),desc:!0}]}}),[lt,Be]),_e=(0,n.useCallback)(oe=>{Ve===oe?$e(""):($e(oe),We(0),Ke(0),qe(1))},[Ve,qe,Ke,$e,We]),{headerGroups:ut,rows:rt,prepareRow:je}=(0,ge.useTable)(nt,ge.useSortBy,ge.useAbsoluteLayout),dt=n.useCallback(({index:oe,style:Se})=>{let Re=rt[oe];je(Re);const ze=Re.values[E.Symbol.toLowerCase()],ve=(0,t.cx)(ze===Ve&&Xe.matchedRow,Xe.row);return n.createElement("div",{...Re.getRowProps({style:Se}),className:ve,onClick:()=>{_e(ze)}},Re.cells.map(Te=>{const{key:he,...pe}=Te.getCellProps();return pe.style&&(pe.style.minWidth=pe.style.width),n.createElement("div",{key:he,className:Xe.cell,...pe},Te.render("cell"))}))},[rt,je,Ve,Xe.matchedRow,Xe.row,Xe.cell,_e]);return n.createElement("div",{className:Xe.table(de),"data-testid":"topTable"},ut.map(oe=>{const{key:Se,...Re}=oe.getHeaderGroupProps();return n.createElement("div",{key:Se,className:Xe.header,...Re},oe.headers.map(ze=>{const{key:ve,...Te}=ze.getHeaderProps(ze.canSort?ze.getSortByToggleProps():void 0);return n.createElement("div",{key:ve,className:Xe.headerCell,...Te},ze.render("header"),ze.isSorted&&n.createElement(fe.J,{name:ze.isSortedDesc?"arrow-down":"arrow-up"}))}))}),rt.length>0?n.createElement(me.$,{hideVerticalTrack:!0},n.createElement(De.t7,{height:de,itemCount:rt.length,itemSize:38,width:"100%",style:{overflow:"hidden auto"}},dt)):n.createElement("div",{style:{height:de},className:Xe.noData},"No data"))},ie=({cell:{value:Ye}})=>n.createElement("div",null,Ye),re=({cell:{value:Ye}})=>n.createElement("div",null,Ye.unitValue),Ee=Ye=>({table:de=>t.css`
      background-color: ${Ye.colors.background.primary};
      height: ${de}px;
      overflow: scroll;
      display: flex;
      flex-direction: column;
      width: 100%;
    `,header:t.css`
    height: 38px;

    & > :nth-child(2),
    & > :nth-child(3) {
      text-align: right;
    }

    // needed to keep header row height fixed so header row does not resize with browser
    & > :nth-child(3) {
      position: relative !important;
    }
  `,headerCell:t.css`
    background-color: ${Ye.colors.background.secondary};
    color: ${Ye.colors.primary.text};
    padding: ${Ye.spacing(1)};
  `,matchedRow:t.css`
    & > :nth-child(1),
    & > :nth-child(2),
    & > :nth-child(3) {
      background-color: ${Ye.colors.background.secondary} !important;
    }
  `,row:t.css`
    border-top: 1px solid ${Ye.components.panel.borderColor};

    &:hover {
      background-color: ${Ye.colors.emphasize(Ye.colors.background.primary,.03)};
    }
    & > :nth-child(2),
    & > :nth-child(3) {
      text-align: right;
    }
    & > :nth-child(3) {
      border-right: none;
    }
  `,cell:t.css`
    border-right: 1px solid ${Ye.components.panel.borderColor};
    padding: ${Ye.spacing(1)};

    div {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    &:hover {
      overflow: visible;
      width: auto !important;
      box-shadow: 0 0 2px ${Ye.colors.primary.main};
      background-color: ${Ye.colors.emphasize(Ye.colors.background.primary,.03)};
      z-index: 1;
    }
  `,noData:t.css`
    align-items: center;
    display: flex;
    justify-content: center;
  `}),J=ce,te=({data:Ye,app:de,totalLevels:Be,selectedView:Ve,search:$e,setSearch:We,setTopLevelIndex:Ke,setRangeMin:qe,setRangeMax:Xe})=>{const at=(0,m.wW)(()=>ne(Ve,de)),[Ze,lt]=(0,n.useState)(),nt=Ye.fields.find(je=>je.name==="value")??Ye.fields.find(je=>je.type===h.fS.number),_e=Ye.fields.find(je=>je.name==="self")??Ye.fields.find(je=>je.type===h.fS.number),ut=(0,n.useCallback)(()=>{let je,dt,oe,Se={};if(Ye.fields.length===4){const Re=Ye.fields[1].values,ze=Ye.fields[2].values,ve=Ye.fields[3].values;for(let Te=0;Te<Re.length;Te++)oe=Re.get(Te),dt=ze.get(Te),je=ve.get(Te),Se[je]=Se[je]||{},Se[je].self=Se[je].self?Se[je].self+dt:dt,Se[je].total=Se[je].total?Se[je].total+oe:oe}return Se},[Ye.fields]),rt=(je,dt)=>{const Se=(0,a.U)({field:je,theme:(0,v.j)()})(dt);let Re=Se.text+Se.suffix;switch(je.config.unit){case C.Bytes:break;case C.Nanoseconds:break;default:Se.suffix||(Re=Se.text);break}return Re};return(0,n.useEffect)(()=>{const je=ut();let dt=[];for(let oe in je){const Se=rt(_e,je[oe].self),Re=rt(nt,je[oe].total);dt.push({symbol:oe,self:{value:je[oe].self,unitValue:Se},total:{value:je[oe].total,unitValue:Re}})}lt(dt)},[Ye.fields,_e,ut,nt]),n.createElement(n.Fragment,null,Ze&&n.createElement("div",{className:at.topTableContainer},n.createElement(q.Z,{style:{width:"100%",height:f*Be+"px"}},({width:je,height:dt})=>n.createElement(J,{width:je,height:dt,data:Ze,search:$e,setSearch:We,setTopLevelIndex:Ke,setRangeMin:qe,setRangeMax:Xe}))))},ne=(Ye,de)=>{const Be="20px";return{topTableContainer:t.css`
      cursor: pointer;
      float: left;
      margin-right: ${Be};
      width: ${Ye===P.TopTable?"100%":`calc(50% - ${Be})`};
      ${de!==i.zj.Explore?"height: calc(100% - 44px)":""}; // 44px to adjust for header pushing content down
    `}},j=te,be=Ye=>{const[de,Be]=(0,n.useState)(0),[Ve,$e]=(0,n.useState)(0),[We,Ke]=(0,n.useState)(1),[qe,Xe]=(0,n.useState)(""),[at,Ze]=(0,n.useState)(P.Both),[lt,{width:nt}]=(0,u.Z)(),_e=(0,n.useMemo)(()=>{if(!Ye.data)return[];const rt=new s.U(Ye.data);return b(rt)},[Ye.data]),ut=(0,m.wW)(()=>Le(Ye.app,f*_e.length));return(0,n.useEffect)(()=>{nt>0&&nt<g&&at===P.Both&&Ze(P.FlameGraph)},[at,Ze,nt]),(0,n.useEffect)(()=>{Be(0),$e(0),Ke(1)},[Ye.data]),n.createElement("div",{ref:lt,className:ut.container},n.createElement(ue,{app:Ye.app,setTopLevelIndex:Be,setRangeMin:$e,setRangeMax:Ke,search:qe,setSearch:Xe,selectedView:at,setSelectedView:Ze,containerWidth:nt}),at!==P.FlameGraph&&n.createElement(j,{data:Ye.data,app:Ye.app,totalLevels:_e.length,selectedView:at,search:qe,setSearch:Xe,setTopLevelIndex:Be,setRangeMin:$e,setRangeMax:Ke}),at!==P.TopTable&&n.createElement(V,{data:Ye.data,app:Ye.app,flameGraphHeight:Ye.flameGraphHeight,levels:_e,topLevelIndex:de,rangeMin:Ve,rangeMax:We,search:qe,setTopLevelIndex:Be,setRangeMin:$e,setRangeMax:Ke,selectedView:at}))},Le=(Ye,de)=>({container:t.css`
    height: ${Ye===i.zj.Explore?de+"px":"100%"};
  `}),Qe=be},7149:(G,O,e)=>{"use strict";e.r(O),e.d(O,{plugin:()=>E});var t=e(48513),n=e(96003),u=e(30383),s=e(936);const i=P=>(0,s.rD)(P),m=(P,x,M)=>{const S=(0,s.ZH)(P,x,M);if(x==="singlestat"&&M.angular){const D=M.angular.gauge;D&&(S.showThresholdMarkers=D.thresholdMarkers,S.showThresholdLabels=D.thresholdLabels)}return S};var f=e(68404),o=e(17128),l=e(51874),r=e(67591),d=e(3652),c=e(47694),g=e(63992);class p extends f.PureComponent{constructor(){super(...arguments),this.renderComponent=(x,M)=>{const{options:S,fieldConfig:D}=this.props,{width:T,height:R,count:L,value:w}=x,{field:A,display:N}=w,{openMenu:W,targetClassName:I}=M;return f.createElement(l.a,{value:(0,g.l)(L,D.defaults,N),width:T,height:R,field:A,text:S.text,showThresholdLabels:S.showThresholdLabels,showThresholdMarkers:S.showThresholdMarkers,theme:c.vc.theme2,onClick:W,className:I})},this.renderValue=x=>{const{value:M}=x,{getLinks:S,hasLinks:D}=M;return D&&S?f.createElement(r.V,{links:S,style:{flexGrow:1}},T=>this.renderComponent(x,T)):this.renderComponent(x,{})},this.getValues=()=>{const{data:x,options:M,replaceVariables:S,fieldConfig:D,timeZone:T}=this.props;return(0,o.nG)({fieldConfig:D,reduceOptions:M.reduceOptions,replaceVariables:S,theme:c.vc.theme2,data:x.series,timeZone:T})}}render(){const{height:x,width:M,data:S,renderCounter:D,options:T}=this.props;return f.createElement(d.Q,{getValues:this.getValues,renderValue:this.renderValue,width:M,height:x,source:S,autoGrid:!0,renderCounter:D,orientation:T.orientation})}}const y=Object.freeze([0,0]),h={showThresholdLabels:!1,showThresholdMarkers:!0};var a=e(24177),v=e(26410);class C{getSuggestionsForData(x){const{dataSummary:M}=x;if(!M.hasData||!M.hasNumberField||M.numberFieldCount>=50)return;const S=x.getListAppender({name:v.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:a.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:D=>{D.options.reduceOptions.values&&(D.options.reduceOptions.limit=2)}}});M.hasStringField&&M.frameCount===1&&M.rowCountTotal<10?(S.append({name:v.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),S.append({name:v.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(S.append({name:v.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),S.append({name:v.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const E=new t.c(p).useFieldConfig({useCustomConfig:P=>{P.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(P=>{(0,u.j)(P),(0,u.h)(P),P.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:h.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:h.showThresholdMarkers}),n.Z(P)}).setPanelChangeHandler(m).setSuggestionsSupplier(new C).setMigrationHandler(i)},19942:(G,O,e)=>{"use strict";e.d(O,{H:()=>r});var t=e(52423),n=e(68404),u=e(89890),s=e(20112),i=e(76553),m=e(40538),f=e(29516),o=e(90701),l=e(90723);const r=({data:c,rowIndex:g,columnIndex:p,sortOrder:y,mode:h,header:a=void 0})=>{const v=(0,f.wW)(d);if(!c||g==null)return null;const C=c.fields.filter(T=>!Boolean(T.config.custom?.hideFrom?.tooltip)),E=C.find(T=>T.name==="traceID")||c.fields[0],P=[E,...C.filter(T=>E!==T)];if(P.length===0)return null;const x=[],M=[],S=new Set;for(const T of P){const R=T.values.get(g),L=T.display?T.display(R):{text:`${R}`,numeric:+R};T.getLinks&&T.getLinks({calculatedValue:L,valueRowIndex:g}).forEach(w=>{const A=`${w.title}/${w.href}`;S.has(A)||(M.push(w),S.add(A))}),x.push([(0,u.C)(T,c),R,(0,s.zc)(L)])}y&&y!==m.As.None&&x.sort((T,R)=>i.sortValues(y)(T[1],R[1]));const D=()=>M.length>0&&n.createElement("tr",null,n.createElement("td",{colSpan:2},n.createElement(o.wc,null,M.map((T,R)=>n.createElement(l.Qj,{key:R,icon:"external-link-alt",target:T.target,href:T.href,onClick:T.onClick,fill:"text",style:{width:"100%"}},T.title)))));return n.createElement("div",{className:v.wrapper},a&&n.createElement("div",{className:v.header},n.createElement("span",{className:v.title},a)),n.createElement("table",{className:v.infoWrap},n.createElement("tbody",null,(h===m.f3.Multi||h==null)&&x.map((T,R)=>n.createElement("tr",{key:`${R}/${g}`,className:R===p?v.highlight:""},n.createElement("th",null,T[0],":"),n.createElement("td",null,T[2]))),h===m.f3.Single&&p&&n.createElement("tr",{key:`${p}/${g}`},n.createElement("th",null,x[p][0],":"),n.createElement("td",null,x[p][2])),D())))},d=c=>{const g=c.isDark?c.v1.palette.dark2:c.v1.palette.white,p=c.isDark?c.v1.palette.dark9:c.v1.palette.gray5,y=c.isDark?c.v1.palette.dark3:c.v1.palette.gray6;return{wrapper:t.css`
      background: ${g};
      border: 1px solid ${p};
      border-radius: ${c.shape.borderRadius(2)};
    `,header:t.css`
      background: ${p};
      padding: 6px 10px;
      display: flex;
    `,title:t.css`
      font-weight: ${c.typography.fontWeightMedium};
      padding-right: ${c.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:t.css`
      padding: 8px;
      th {
        font-weight: ${c.typography.fontWeightMedium};
        padding: ${c.spacing(.25,2)};
      }
      tr {
        background-color: ${c.colors.background.primary};
        &:nth-child(even) {
          background-color: ${y};
        }
      }
    `,highlight:t.css`
      background: ${c.colors.action.hover};
    `}}},53764:(G,O,e)=>{"use strict";e.d(O,{S:()=>m});var t=e(52423),n=e(68404),u=e(8928),s=e(38849),i=e(29516);function m({width:o,showImage:l,data:r,index:d}){const c=(0,i.wW)(f),g=o>600,p=r.get(d);return n.createElement("article",{className:(0,t.cx)(c.item,g&&c.itemWide)},l&&p.ogImage&&n.createElement("a",{tabIndex:-1,href:u.QX.sanitizeUrl(p.link),target:"_blank",rel:"noopener noreferrer",className:(0,t.cx)(c.socialImage,g&&c.socialImageWide),"aria-hidden":!0},n.createElement("img",{src:p.ogImage,alt:p.title})),n.createElement("div",{className:c.body},n.createElement("time",{className:c.date,dateTime:(0,s.dq)(p.date,{format:"MMM DD"})},(0,s.dq)(p.date,{format:"MMM DD"})," "),n.createElement("a",{className:c.link,href:u.QX.sanitizeUrl(p.link),target:"_blank",rel:"noopener noreferrer"},n.createElement("h3",{className:c.title},p.title)),n.createElement("div",{className:c.content,dangerouslySetInnerHTML:{__html:u.QX.sanitize(p.content)}})))}const f=o=>({container:t.css`
    height: 100%;
  `,item:t.css`
    display: flex;
    padding: ${o.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${o.spacing(1)};
    border-bottom: 2px solid ${o.colors.border.weak};
    background: ${o.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:t.css`
    flex-direction: row;
  `,body:t.css`
    display: flex;
    flex-direction: column;
  `,socialImage:t.css`
    display: flex;
    align-items: center;
    margin-bottom: ${o.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${o.shape.borderRadius(2)} ${o.shape.borderRadius(2)} 0 0;
    }
  `,socialImageWide:t.css`
    margin-right: ${o.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${o.shape.borderRadius()};
    }
  `,link:t.css`
    color: ${o.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${o.colors.text.link};
      text-decoration: underline;
    }
  `,title:t.css`
    font-size: 16px;
    margin-bottom: ${o.spacing(.5)};
  `,content:t.css`
    p {
      margin-bottom: 4px;
      color: ${o.colors.text};
    }
  `,date:t.css`
    margin-bottom: ${o.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 3px;
    color: ${o.colors.text.secondary};
  `})},6981:(G,O,e)=>{"use strict";e.d(O,{k:()=>t});const t="https://grafana.com/blog/news.xml"},13724:(G,O,e)=>{"use strict";e.d(O,{j:()=>g});var t=e(671),n=e(50235);function u(p){const h=new DOMParser().parseFromString(p,"text/xml");return{items:Array.from(h.querySelectorAll("entry")).map(v=>({title:f(v,"title"),link:v.querySelector("link")?.getAttribute("href")??"",content:f(v,"content"),pubDate:f(v,"published"),ogImage:v.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function s(p){const h=new DOMParser().parseFromString(p,"text/xml");return{items:Array.from(h.querySelectorAll("item")).map(v=>({title:f(v,"title"),link:f(v,"link"),content:f(v,"description"),pubDate:f(v,"pubDate"),ogImage:v.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function i(p){return await(await fetch(p)).text()}function m(p){return new DOMParser().parseFromString(p,"text/xml").querySelector("feed")!==null}function f(p,y){return p.querySelector(y)?.textContent??""}async function o(p){const y=await i(p);return m(y)?u(y):s(y)}var l=e(19695),r=e(46519),d=e(14582);function c(p){const y=new l.G([]),h=new l.G([]),a=new l.G([]),v=new l.G([]),C=new l.G([]);for(const E of p.items){const P=(0,r.CQ)(E.pubDate);try{if(y.buffer.push(P.valueOf()),h.buffer.push(E.title),a.buffer.push(E.link),C.buffer.push(E.ogImage),E.content){const x=E.content.replace(/<\/?[^>]+(>|$)/g,"");v.buffer.push(x)}}catch(x){console.warn("Error reading news item:",x,E)}}return{fields:[{name:"date",type:d.fS.time,config:{displayName:"Date"},values:y},{name:"title",type:d.fS.string,config:{},values:h},{name:"link",type:d.fS.string,config:{},values:a},{name:"content",type:d.fS.string,config:{},values:v},{name:"ogImage",type:d.fS.string,config:{},values:C}],length:y.length}}function g(p){const[y,h]=(0,t.Z)(async()=>{const a=await o(p),v=c(a);return new n.U(v)},[p],{loading:!0});return{state:y,getNews:h}}},74538:(G,O,e)=>{"use strict";e.d(O,{E:()=>rt});var t=e(52423),n=e(9085),u=e.n(n),s=e(68404),i=e(10025),m=e(29516),f=e(40008),o=e(81697),l=e(68545);const r=(0,s.memo)(function(Te){const{edge:he,onClick:pe,onMouseEnter:ye,onMouseLeave:Oe,hovering:Ne}=Te,{source:Me,target:Ae}=he,we=(0,l.dM)({x1:Me.x,y1:Me.y,x2:Ae.x,y2:Ae.y},90);return s.createElement("g",{onClick:ke=>pe(ke,he),style:{cursor:"pointer"},"aria-label":`Edge from: ${Me.id} to: ${Ae.id}`},s.createElement("line",{strokeWidth:Ne?2:1,stroke:"#999",x1:we.x1,y1:we.y1,x2:we.x2,y2:we.y2,markerEnd:"url(#triangle)"}),s.createElement("line",{stroke:"transparent",x1:we.x1,y1:we.y1,x2:we.x2,y2:we.y2,strokeWidth:20,onMouseEnter:()=>{ye(he.id)},onMouseLeave:()=>{Oe(he.id)}}))});function d(){return s.createElement("defs",null,s.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto"},s.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})))}const c=ve=>({mainGroup:t.css`
      pointer-events: none;
      font-size: 8px;
    `,background:t.css`
      fill: ${ve.components.tooltip.background};
    `,text:t.css`
      fill: ${ve.components.tooltip.text};
    `}),g=(0,s.memo)(function(Te){const{edge:he}=Te,{source:pe,target:ye}=he,Oe=(0,l.dM)({x1:pe.x,y1:pe.y,x2:ye.x,y2:ye.y},90),Ne={x:Oe.x1+(Oe.x2-Oe.x1)/2,y:Oe.y1+(Oe.y2-Oe.y1)/2},Me=(0,m.wW)(c);return s.createElement("g",{className:Me.mainGroup},s.createElement("rect",{className:Me.background,x:Ne.x-40,y:Ne.y-15,width:"80",height:"30",rx:"5"}),s.createElement("text",{className:Me.text,x:Ne.x,y:Ne.y-5,textAnchor:"middle"},he.mainStat),s.createElement("text",{className:Me.text,x:Ne.x,y:Ne.y+10,textAnchor:"middle"},he.secondaryStat))});var p=e(82897),y=e(66926),h=e(40538),a=e(21987),v=e(11507);function C(){return{item:t.css`
      label: LegendItem;
      flex-grow: 0;
    `,legend:t.css`
      label: Legend;
      pointer-events: all;
    `}}const E=function(Te){const{nodes:he,onSort:pe,sort:ye,sortable:Oe}=Te,Ne=(0,m.l4)(),Me=(0,m.wW)(C),Ae=P(he,Ne),we=(0,s.useCallback)(ke=>{pe({field:ke.data.field,ascending:ke.data.field===ye?.field?!ye?.ascending:!1})},[ye,pe]);return s.createElement(a.l,{className:Me.legend,displayMode:h.jK.List,placement:"bottom",items:Ae,itemRenderer:ke=>s.createElement(s.Fragment,null,s.createElement(v.e,{item:ke,className:Me.item,onLabelClick:Oe?we:void 0}),Oe&&(ye?.field===ke.data.field?s.createElement(o.J,{name:ye.ascending?"arrow-up":"arrow-down"}):""))})};function P(ve,Te){if(!ve.length)return[];const he=[ve[0].mainStat,ve[0].secondaryStat].filter(p.identity),pe=ve.find(ye=>ye.arcSections.length>0);return pe&&pe.arcSections[0].config?.color?.mode===y.S.Fixed&&he.push(...new Set(ve.map(ye=>ye.arcSections).flat())),ve[0].color&&he.push(ve[0].color),he.map(ye=>{const Oe={label:ye.config.displayName||ye.name,yAxis:0,data:{field:ye}};return ye.config.color?.mode===y.S.Fixed&&ye.config.color?.fixedColor?Oe.color=Te.visualization.getColorByName(ye.config.color?.fixedColor||""):ye.config.color?.mode&&(Oe.gradient=ye.config.color?.mode),Oe.color||Oe.gradient||(Oe.color=Te.visualization.getColorByName("")),Oe})}const x=40,M=ve=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:t.css`
    fill: ${ve.components.panel.background};
    stroke: ${ve.colors.border.strong};
  `,text:t.css`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),S=(0,s.memo)(function(Te){const{marker:he,onClick:pe}=Te,{node:ye}=he,Oe=(0,m.wW)(M);return ye.x!==void 0&&ye.y!==void 0?s.createElement("g",{"data-node-id":ye.id,className:Oe.mainGroup,onClick:Ne=>{pe?.(Ne,he)},"aria-label":`Hidden nodes marker: ${ye.id}`},s.createElement("circle",{className:Oe.mainCircle,r:x,cx:ye.x,cy:ye.y}),s.createElement("g",null,s.createElement("foreignObject",{x:ye.x-25,y:ye.y-25,width:"50",height:"50"},s.createElement("div",{className:Oe.text},s.createElement("span",null,he.count>100?">100":he.count," nodes"))))):null});var D=e(35008),T=e.n(D),R=e(425);const L=40,w=(ve,Te)=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${Te==="inactive"?.5:1};
  `,mainCircle:t.css`
    fill: ${ve.components.panel.background};
  `,hoverCircle:t.css`
    opacity: 0.5;
    fill: transparent;
    stroke: ${ve.colors.primary.text};
  `,text:t.css`
    fill: ${ve.colors.text.primary};
  `,titleText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${T()(ve.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 100px;
  `,statsText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:t.css`
    width: 200px;
    & span {
      background-color: ${T()(ve.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `}),A=(0,s.memo)(function(Te){const{node:he,onMouseEnter:pe,onMouseLeave:ye,onClick:Oe,hovering:Ne}=Te,Me=(0,m.l4)(),Ae=w(Me,Ne),we=Ne==="active";return he.x!==void 0&&he.y!==void 0?s.createElement("g",{"data-node-id":he.id,className:Ae.mainGroup,onMouseEnter:()=>{pe(he.id)},onMouseLeave:()=>{ye(he.id)},onClick:ke=>{Oe(ke,he)},"aria-label":`Node: ${he.title}`},s.createElement("circle",{className:Ae.mainCircle,r:L,cx:he.x,cy:he.y}),we&&s.createElement("circle",{className:Ae.hoverCircle,r:L-3,cx:he.x,cy:he.y,strokeWidth:2}),s.createElement(N,{node:he}),s.createElement("g",{className:Ae.text},s.createElement("foreignObject",{x:he.x-(we?100:35),y:he.y-15,width:we?"200":"70",height:"40"},s.createElement("div",{className:u()(Ae.statsText,we&&Ae.textHovering)},s.createElement("span",null,he.mainStat&&(0,l.Ew)(he.mainStat.config,he.mainStat.values.get(he.dataFrameRowIndex))),s.createElement("br",null),s.createElement("span",null,he.secondaryStat&&(0,l.Ew)(he.secondaryStat.config,he.secondaryStat.values.get(he.dataFrameRowIndex))))),s.createElement("foreignObject",{x:he.x-(we?100:50),y:he.y+L+5,width:we?"200":"100",height:"40"},s.createElement("div",{className:u()(Ae.titleText,we&&Ae.textHovering)},s.createElement("span",null,he.title),s.createElement("br",null),s.createElement("span",null,he.subTitle))))):null});function N(ve){const{node:Te}=ve,he=Te.arcSections.find(Ne=>Ne.values.get(Te.dataFrameRowIndex)>=1),pe=(0,m.l4)();if(he)return s.createElement("circle",{fill:"none",stroke:pe.visualization.getColorByName(he.config.color?.fixedColor||""),strokeWidth:2,r:L,cx:Te.x,cy:Te.y});const ye=Te.arcSections.filter(Ne=>Ne.values.get(Te.dataFrameRowIndex)!==0);if(ye.length===0)return s.createElement("circle",{fill:"none",stroke:Te.color?I(Te.color,Te.dataFrameRowIndex,pe):"gray",strokeWidth:2,r:L,cx:Te.x,cy:Te.y});const{elements:Oe}=ye.reduce((Ne,Me)=>{const Ae=Me.config.color?.fixedColor||"",we=Me.values.get(Te.dataFrameRowIndex),ke=s.createElement(W,{key:Ae,r:L,x:Te.x,y:Te.y,startPercent:Ne.percent,percent:we+Ne.percent>1?1-Ne.percent:we,color:pe.visualization.getColorByName(Ae),strokeWidth:2});return Ne.elements.push(ke),Ne.percent=Ne.percent+we,Ne},{elements:[],percent:0});return s.createElement(s.Fragment,null,Oe)}function W({r:ve,x:Te,y:he,startPercent:pe,percent:ye,color:Oe,strokeWidth:Ne=2}){const Me=pe+ye,Ae=Te+Math.sin(2*Math.PI*pe)*ve,we=he-Math.cos(2*Math.PI*pe)*ve,ke=Te+Math.sin(2*Math.PI*Me)*ve,st=he-Math.cos(2*Math.PI*Me)*ve,Et=ye>.5?"1":"0";return s.createElement("path",{fill:"none",d:`M ${Ae} ${we} A ${ve} ${ve} 0 ${Et} 1 ${ke} ${st}`,stroke:Oe,strokeWidth:Ne})}function I(ve,Te,he){return ve.config.color?(0,R.fD)(ve).getCalculator(ve,he)(0,ve.values.get(Te)):ve.values.get(Te)}var F=e(90701),V=e(90723);function b(){return{wrapper:t.css`
      label: wrapper;
      pointer-events: all;
    `}}function X(ve){const{config:Te,onConfigChange:he,onPlus:pe,onMinus:ye,disableZoomOut:Oe,disableZoomIn:Ne}=ve,[Me,Ae]=(0,s.useState)(!1),we=!1,ke=(0,m.wW)(b);return s.createElement("div",{className:ke.wrapper},s.createElement(F.wc,{spacing:"sm"},s.createElement(F.Lh,{spacing:"xs"},s.createElement(V.zx,{icon:"plus-circle",onClick:pe,size:"md",title:"Zoom in",variant:"secondary",disabled:Ne}),s.createElement(V.zx,{icon:"minus-circle",onClick:ye,size:"md",title:"Zoom out",variant:"secondary",disabled:Oe})),s.createElement(F.Lh,{spacing:"xs"},s.createElement(V.zx,{icon:"code-branch",onClick:()=>he({...Te,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!Te.gridLayout}),s.createElement(V.zx,{icon:"apps",onClick:()=>he({...Te,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:Te.gridLayout}))),we&&s.createElement(V.zx,{size:"xs",fill:"text",onClick:()=>Ae(st=>!st)},Me?"Hide config":"Show config"),we&&Me&&Object.keys(Te).filter(st=>st!=="show").map(st=>s.createElement("div",{key:st},st,s.createElement("input",{style:{width:50},type:"number",value:Te[st],onChange:Et=>{he({...Te,[st]:parseFloat(Et.target.value)})}}))))}var k=e(77303),H=e(98136),Y=e(77410);const ee=()=>new Y.q(new URL(e.p+e.u(7190),e.b));function ue(ve,Te,he,pe,ye){const[Oe,Ne]=(0,s.useMemo)(()=>{if(!(ve.length&&Te.length))return[{},{}];const Me=Te.reduce((we,ke)=>(we[ke.source.id]=[...we[ke.source.id]??[],ke],we[ke.target.id]=[...we[ke.target.id]??[],ke],we),{}),Ae=ve.reduce((we,ke)=>(we[ke.id]=ke,we),{});return[Me,Ae]},[Te,ve]);return(0,s.useMemo)(()=>ve.length<=he?{nodes:ve,edges:Te}:pe.gridLayout?ge(ve,he,ye):q(ve,Te,Ne,Oe,he,ye),[Te,Oe,he,ve,Ne,ye,pe.gridLayout])}function q(ve,Te,he,pe,ye,Oe){let Ne;Oe?Ne=[he[Oe]]:(Ne=ve.filter(Et=>Et.incoming===0),Ne.length||(Ne=[ve[0]]));const{visibleNodes:Me,markers:Ae}=De(ye,Ne,he,pe),we=fe(Ae,Me,he,pe),ke=(0,p.fromPairs)(we.map(Et=>[Et.node.id,Et]));for(const Et of we)Et.count===1&&(delete ke[Et.node.id],Me[Et.node.id]=Et.node);const st=Te.filter(Et=>(Me[Et.source.id]||ke[Et.source.id])&&(Me[Et.target.id]||ke[Et.target.id]));return{nodes:Object.values(Me),edges:st,markers:Object.values(ke)}}function ge(ve,Te,he){let pe=0,ye=Te,Oe=[];if(he){const Ne=ve.findIndex(we=>we.id===he),Me=Math.floor(Te/2);let Ae=Me;pe=Ne-Me,pe<0&&(Ae+=Math.abs(pe),pe=0),ye=Ne+Ae+1,ye>ve.length&&(pe>0&&(pe=Math.max(0,pe-(ye-ve.length))),ye=ve.length),pe>1&&Oe.push({node:ve[pe-1],count:pe}),ve.length-ye>1&&Oe.push({node:ve[ye],count:ve.length-ye})}else ve.length-Te>1&&(Oe=[{node:ve[Te],count:ve.length-Te}]);return{nodes:ve.slice(pe,ye),edges:[],markers:Oe}}function De(ve,Te,he,pe){const ye={};let Oe=[...Te];for(;Object.keys(ye).length<ve&&Oe.length>0;){let Me=Oe.shift();if(ye[Me.id])continue;ye[Me.id]=Me;const we=(pe[Me.id]||[]).map(ke=>{const st=ke.source.id===Me.id?ke.target.id:ke.source.id;return he[st]});Oe=Oe.concat(we)}const Ne=(0,p.uniq)(Oe.filter(Me=>!ye[Me.id]));return{visibleNodes:ye,markers:Ne}}function fe(ve,Te,he,pe){return ve.map(ye=>{const Oe={};let Ne=0,Me=[ye];for(;Me.length>0&&Ne<=101;){let Ae=Me.shift();if(Te[Ae.id]||Oe[Ae.id])continue;Oe[Ae.id]||Ne++,Oe[Ae.id]=Ae;const ke=(pe[Ae.id]||[]).map(st=>{const Et=st.source.id===Ae.id?st.target.id:st.source.id;return he[Et]});Me=Me.concat(ke)}return{node:ye,count:Ne}})}const me={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function ce(ve,Te,he=me,pe,ye,Oe){const[Ne,Me]=(0,s.useState)([]),[Ae,we]=(0,s.useState)([]),[ke,st]=(0,s.useState)(!1),Et=(0,H.default)(),Pt=(0,s.useRef)();(0,k.Z)(()=>{Pt.current&&Pt.current()}),(0,s.useEffect)(()=>{if(ve.length===0){Me([]),we([]),st(!1);return}st(!0);const xn=ie(ve,Te,({nodes:Cn,edges:bn})=>{Et()&&(Me(Cn),we(bn),st(!1))});return Pt.current=xn,xn},[ve,Te,Et]);const[gt,Ct]=(0,s.useMemo)(()=>{if(ve.length===0)return[[],[]];const xn=ve.map(bn=>({...bn})),Cn=Te.map(bn=>({...bn}));return re(xn,ye,he.sort),[xn,Cn]},[he.sort,ve,Te,ye]),{nodes:Ot,edges:Ft,markers:jt}=ue(he.gridLayout?gt:Ne,he.gridLayout?Ct:Ae,pe,he,Oe),En=(0,s.useMemo)(()=>(0,l.Tz)([...Ot,...(jt||[]).map(xn=>xn.node)]),[Ot,jt]);return{nodes:Ot,edges:Ft,markers:jt,bounds:En,hiddenNodesCount:ve.length-Ot.length,loading:ke}}function ie(ve,Te,he){const pe=ee();return pe.onmessage=ye=>{for(let Oe=0;Oe<ve.length;Oe++)ye.data.nodes[Oe]={...ve[Oe],...ye.data.nodes[Oe]};he(ye.data)},pe.postMessage({nodes:ve.map(ye=>({id:ye.id,incoming:ye.incoming})),edges:Te,config:me}),()=>{pe.terminate()}}function re(ve,Te,he){const Ne=Math.min(Math.floor((Te-120)/140),ve.length),Me=Math.floor((Ne-1)*120/2);he&&ve.sort((Ae,we)=>{const ke=he.field.values.get(Ae.dataFrameRowIndex),st=he.field.values.get(we.dataFrameRowIndex);return he.ascending?ke-st:st-ke});for(const[Ae,we]of ve.entries()){const ke=Math.floor(Ae/Ne),st=Ae%Ne;we.x=st*120-Me,we.y=-60+ke*140}}var Ee=e(85506),J=e(67303),te=e(75182),ne=e(87302);function j(ve,Te,he,pe,ye,Oe){const[Ne,Me]=(0,s.useState)(void 0),Ae=(0,s.useCallback)((ke,st)=>{const[Et,Pt]=pe.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],gt=[{label:Et,onClick:Ft=>{Oe(Ft.id),ye({...pe,gridLayout:Pt}),Me(void 0)}}],Ct=Te?ve(Te,st.dataFrameRowIndex):[],Ot=Le(Ct,st,gt);Ot&&Me(be(s.createElement(de,{node:st,nodes:Te}),Ot,ke,Me))},[pe,Te,ve,Me,ye,Oe]);return{onEdgeOpen:(0,s.useCallback)((ke,st)=>{if(!he)return;const Et=ve(he,st.dataFrameRowIndex),Pt=Le(Et,st);Pt&&Me(be(s.createElement(Be,{edge:st,edges:he}),Pt,ke,Me))},[he,ve,Me]),onNodeOpen:Ae,MenuComponent:Ne}}function be(ve,Te,he,pe){return s.createElement(J.x,{renderHeader:()=>ve,renderMenuItems:Te,onClose:()=>pe(void 0),x:he.pageX,y:he.pageY})}function Le(ve,Te,he){if(!(ve.length||he?.length))return;const pe=Ye(ve);return()=>{let ye=pe?.map((Oe,Ne)=>s.createElement(te.k,{key:`${Oe.label}${Ne}`,label:Oe.label},(Oe.items||[]).map(Qe(Te))));return he&&(ye=[...he.map(Qe(Te)),...ye]),ye}}function Qe(ve){return function(he){return s.createElement(ne.s,{key:he.label,url:he.url,label:he.label,ariaLabel:he.ariaLabel,onClick:he.onClick?pe=>{pe?.ctrlKey||pe?.metaKey||pe?.shiftKey||(pe?.preventDefault(),pe?.stopPropagation(),he.onClick?.(ve))}:void 0,target:"_self"})}}function Ye(ve){const Te="Open in Explore",he=ve.reduce((pe,ye)=>{let Oe,Ne;return ye.title.indexOf("/")!==-1?(Oe=ye.title.split("/")[0],Ne=ye.title.split("/")[1],pe[Oe]=pe[Oe]||[],pe[Oe].push({l:ye,newTitle:Ne})):(pe[Te]=pe[Te]||[],pe[Te].push({l:ye})),pe},{});return Object.keys(he).map(pe=>({label:pe,ariaLabel:pe,items:he[pe].map(ye=>({label:ye.newTitle||ye.l.title,ariaLabel:ye.newTitle||ye.l.title,url:ye.l.href,onClick:ye.l.onClick}))}))}function de({node:ve,nodes:Te}){const he=ve.dataFrameRowIndex;if(Te){const pe=(0,l.F)(Te);return s.createElement("div",null,pe.title&&s.createElement(Ve,{label:pe.title.config.displayName||pe.title.name,value:pe.title.values.get(he)||""}),pe.subTitle&&s.createElement(Ve,{label:pe.subTitle.config.displayName||pe.subTitle.name,value:pe.subTitle.values.get(he)||""}),pe.details.map(ye=>s.createElement(Ve,{key:ye.name,label:ye.config.displayName||ye.name,value:ye.values.get(he)||""})))}else return s.createElement("div",null,ve.title&&s.createElement(Ve,{label:"Title",value:ve.title}),ve.subTitle&&s.createElement(Ve,{label:"Subtitle",value:ve.subTitle}))}function Be(ve){const Te=ve.edge.dataFrameRowIndex,he=$e((0,m.l4)()),pe=(0,l.lr)(ve.edges),ye=pe.source?.values.get(Te)||"",Oe=pe.target?.values.get(Te)||"";return s.createElement("div",null,pe.source&&pe.target&&s.createElement("div",{className:he.label},s.createElement("div",null,"Source \u2192 Target"),s.createElement("span",{className:he.value},ye," \u2192 ",Oe)),pe.details.map(Ne=>s.createElement(Ve,{key:Ne.name,label:Ne.config.displayName||Ne.name,value:Ne.values.get(Te)||""})))}function Ve({label:ve,value:Te}){const he=(0,m.wW)($e);return s.createElement("div",{className:he.label},s.createElement("div",null,ve),s.createElement("span",{className:he.value},Te))}const $e=ve=>({label:t.css`
      label: Label;
      line-height: 1.25;
      margin-bottom: ${ve.spacing(.5)};
      padding-left: ${ve.spacing(.25)};
      color: ${ve.colors.text.disabled};
      font-size: ${ve.typography.size.sm};
      font-weight: ${ve.typography.fontWeightMedium};
    `,value:t.css`
      label: Value;
      font-size: ${ve.typography.size.sm};
      font-weight: ${ve.typography.fontWeightMedium};
      color: ${ve.colors.text.primary};
      margin-top: ${ve.spacing(.25)};
      display: block;
    `});var We=e(64076);function Ke(ve,Te,he){const pe=(0,We.Z)(ve.gridLayout);let ye;if(pe===!0&&!ve.gridLayout&&he){const Oe=Te.find(Ne=>Ne.id===he);Oe&&(ye={x:-Oe.x,y:-Oe.y})}return ye}function qe(ve){const[Te,he]=(0,s.useState)(),pe=(0,H.default)();return(0,s.useEffect)(()=>{ve&&(he(ve),setTimeout(()=>{pe()&&he(void 0)},500))},[ve,pe]),Te}function Xe({scale:ve=1,bounds:Te,focus:he}={}){const pe=(0,H.default)(),ye=(0,s.useRef)(!1),Oe=(0,s.useRef)(0),Ne=(0,s.useRef)(null),Me={x:0,y:0},Ae=(0,s.useMemo)(()=>({right:Te?-Te.left:1/0,left:Te?-Te.right:-1/0,bottom:Te?-Te.top:-1/0,top:Te?-Te.bottom:1/0}),[Te]),we=(0,s.useRef)(Me),ke=(0,s.useRef)(Me),st=(0,s.useRef)(Me),[Et,Pt]=(0,s.useState)({isPanning:!1,position:Me});(0,s.useEffect)(()=>{const Ot=Tn=>{!ye.current&&pe()&&(ye.current=!0,we.current=Ze(Tn),ke.current={...st.current},Pt(Zn=>({...Zn,isPanning:!0})),En())},Ft=()=>{ye.current&&pe()&&(ye.current=!1,Pt(Tn=>({...Tn,isPanning:!1})),xn())},jt=Tn=>{Ot(Tn),Cn(Tn)},En=()=>{document.addEventListener("mousemove",Cn),document.addEventListener("mouseup",Ft),document.addEventListener("touchmove",Cn),document.addEventListener("touchend",Ft)},xn=()=>{document.removeEventListener("mousemove",Cn),document.removeEventListener("mouseup",Ft),document.removeEventListener("touchmove",Cn),document.removeEventListener("touchend",Ft)},Cn=Tn=>{cancelAnimationFrame(Oe.current);const Zn=Ze(Tn);Oe.current=requestAnimationFrame(()=>{if(pe()&&Ne.current){let Bn=Zn.x-we.current.x,Sn=Zn.y-we.current.y;st.current={x:at(ke.current.x+Bn/ve,Ae.left,Ae.right),y:at(ke.current.y+Sn/ve,Ae.top,Ae.bottom)},Pt(wn=>({...wn,position:{...st.current}}))}})},bn=Ne.current;return bn&&(bn.addEventListener("mousedown",jt),bn.addEventListener("touchstart",jt)),()=>{bn&&(bn.removeEventListener("mousedown",jt),bn.removeEventListener("touchstart",jt))}},[ve,Ae,pe]);const gt=(0,We.Z)(he);(0,s.useEffect)(()=>{if(he&&gt?.x!==he.x&&gt?.y!==he.y){const Ot={x:at(he.x,Ae.left,Ae.right),y:at(he.y,Ae.top,Ae.bottom)};Pt({position:Ot,isPanning:!1}),st.current=Ot,ke.current=Ot}},[he,gt,Ae,st,ke]);let Ct=Et.position;return he&&gt?.x!==he.x&&gt?.y!==he.y&&(Ct=he),{state:{...Et,position:{x:at(Ct.x,Ae.left,Ae.right),y:at(Ct.y,Ae.top,Ae.bottom)}},ref:Ne}}function at(ve,Te,he){return Math.min(Math.max(ve,Te??-1/0),he??1/0)}function Ze(ve){if(ve.changedTouches){const Te=ve;return{x:Te.changedTouches[0].clientX,y:Te.changedTouches[0].clientY}}else{const Te=ve;return{x:Te.clientX,y:Te.clientY}}}const lt={stepDown:ve=>ve/1.5,stepUp:ve=>ve*1.5,min:.13,max:2.25};function nt({stepUp:ve,stepDown:Te,min:he,max:pe}=lt){const ye=(0,s.useRef)(null),[Oe,Ne]=(0,s.useState)(1),Me=(0,s.useCallback)(()=>{Oe<(pe??1/0)&&Ne(ve(Oe))},[Oe,ve,pe]),Ae=(0,s.useCallback)(()=>{Oe>(he??-1/0)&&Ne(Te(Oe))},[Oe,Te,he]),we=(0,s.useCallback)(function(ke){if(ke.ctrlKey||ke.metaKey){if(ke.preventDefault(),Ne(Math.min(Math.max(he??-1/0,Oe+Math.min(ke.deltaY,2)*-.01),pe??1/0)),ke.deltaY<0){const st=Oe+Math.max(ke.deltaY,-4)*-.015;Ne(Math.max(he??-1/0,st))}else if(ke.deltaY>0){const st=Oe+Math.min(ke.deltaY,4)*-.015;Ne(Math.min(pe??1/0,st))}}},[he,pe,Oe]);return(0,s.useEffect)(()=>{if(!ye.current)return;const ke=ye.current;return ke.addEventListener("wheel",we,{passive:!1}),()=>{ke&&ke.removeEventListener("wheel",we)}},[we]),{onStepUp:Me,onStepDown:Ae,scale:Math.max(Math.min(Oe,pe??1/0),he??-1/0),isMax:Oe>=(pe??1/0),isMin:Oe<=(he??-1/0),ref:ye}}const _e=ve=>({wrapper:t.css`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:t.css`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:t.css`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${ve.typography.h4.fontSize};
    color: ${ve.colors.text.secondary};
  `,mainGroup:t.css`
    label: mainGroup;
    will-change: transform;
  `,viewControls:t.css`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:t.css`
    label: legend;
    background: ${ve.colors.background.secondary};
    box-shadow: ${ve.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:t.css`
    margin-left: auto;
  `,alert:t.css`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${ve.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${ve.colors.warning.main};
    color: ${ve.colors.warning.contrastText};
  `,loadingWrapper:t.css`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),ut=200;function rt({getLinks:ve,dataFrames:Te,nodeLimit:he}){const pe=he||ut,{edges:ye,nodes:Oe}=(0,Ee.Y)(Te),[Ne,{width:Me,height:Ae}]=(0,i.Z)(),[we,ke]=(0,s.useState)(me),st=Oe[0],Et=ye[0],Pt=(0,s.useMemo)(()=>(0,l.HB)(st,Et),[Et,st]),{nodeHover:gt,setNodeHover:Ct,clearNodeHover:Ot,edgeHover:Ft,setEdgeHover:jt,clearEdgeHover:En}=ze(),[xn,Cn]=(0,s.useState)([]);(0,s.useEffect)(()=>{let Xt=[];gt?Xt=(0,l.uX)(Pt.nodes,Pt.edges,gt):Ft&&(Xt=(0,l.MP)(Pt.nodes,Pt.edges,Ft)),Cn(Xt)},[gt,Ft,Pt]);const[bn,Tn]=(0,s.useState)(),Zn=(0,s.useCallback)((Xt,fn)=>Tn(fn.node.id),[Tn]),{nodes:Bn,edges:Sn,markers:wn,bounds:$n,hiddenNodesCount:Xn,loading:ba}=ce(Pt.nodes,Pt.edges,we,pe,Me,bn),hn=Ke(we,Bn,bn),{panRef:Kn,zoomRef:ta,onStepUp:La,onStepDown:oa,isPanning:ha,position:ia,scale:Rt,isMaxZoom:Lt,isMinZoom:At}=Re($n,hn),{onEdgeOpen:kt,onNodeOpen:Zt,MenuComponent:Qt}=j(ve,st,Et,we,ke,Tn),Jt=(0,m.wW)(_e),rn=(0,s.useCallback)(Xt=>{Ne(Xt),ta.current=Xt},[Ne,ta]),mn=qe(bn);return s.createElement("div",{ref:rn,className:Jt.wrapper},ba?s.createElement("div",{className:Jt.loadingWrapper},"Computing layout\xA0",s.createElement(f.$,null)):null,Te.length&&Pt.nodes.length?s.createElement("svg",{ref:Kn,viewBox:`${-(Me/2)} ${-(Ae/2)} ${Me} ${Ae}`,className:u()(Jt.svg,ha&&Jt.svgPanning)},s.createElement("g",{className:Jt.mainGroup,style:{transform:`scale(${Rt}) translate(${Math.floor(ia.x)}px, ${Math.floor(ia.y)}px)`}},s.createElement(d,null),!we.gridLayout&&s.createElement(oe,{edges:Sn,nodeHoveringId:gt,edgeHoveringId:Ft,onClick:kt,onMouseEnter:jt,onMouseLeave:En}),s.createElement(je,{nodes:Bn,onMouseEnter:Ct,onMouseLeave:Ot,onClick:Zt,hoveringIds:xn||[mn]}),s.createElement(dt,{markers:wn||[],onClick:Zn}),!we.gridLayout&&s.createElement(Se,{edges:Sn,nodeHoveringId:gt,edgeHoveringId:Ft}))):s.createElement("div",{className:Jt.noDataMsg},"No data"),s.createElement("div",{className:Jt.viewControls},Bn.length?s.createElement("div",{className:Jt.legend},s.createElement(E,{sortable:we.gridLayout,nodes:Bn,sort:we.sort,onSort:Xt=>{ke({...we,sort:Xt})}})):null,s.createElement("div",{className:Jt.viewControlsWrapper},s.createElement(X,{config:we,onConfigChange:Xt=>{Xt.gridLayout!==we.gridLayout&&Tn(void 0),ke(Xt)},onMinus:oa,onPlus:La,scale:Rt,disableZoomIn:Lt,disableZoomOut:At}))),Xn>0&&s.createElement("div",{className:Jt.alert,"aria-label":"Nodes hidden warning"},s.createElement(o.J,{size:"sm",name:"info-circle"})," ",Xn," nodes are hidden for performance reasons."),Qt)}const je=(0,s.memo)(function(Te){return s.createElement(s.Fragment,null,Te.nodes.map(he=>s.createElement(A,{key:he.id,node:he,onMouseEnter:Te.onMouseEnter,onMouseLeave:Te.onMouseLeave,onClick:Te.onClick,hovering:!Te.hoveringIds||Te.hoveringIds.length===0?"default":Te.hoveringIds?.includes(he.id)?"active":"inactive"})))}),dt=(0,s.memo)(function(Te){return s.createElement(s.Fragment,null,Te.markers.map(he=>s.createElement(S,{key:"marker-"+he.node.id,marker:he,onClick:Te.onClick})))}),oe=(0,s.memo)(function(Te){return s.createElement(s.Fragment,null,Te.edges.map(he=>s.createElement(r,{key:he.id,edge:he,hovering:he.source.id===Te.nodeHoveringId||he.target.id===Te.nodeHoveringId||Te.edgeHoveringId===he.id,onClick:Te.onClick,onMouseEnter:Te.onMouseEnter,onMouseLeave:Te.onMouseLeave})))}),Se=(0,s.memo)(function(Te){return s.createElement(s.Fragment,null,Te.edges.map((he,pe)=>{const ye=he.source.id===Te.nodeHoveringId||he.target.id===Te.nodeHoveringId||Te.edgeHoveringId===he.id,Oe=he.mainStat||he.secondaryStat;return ye&&Oe&&s.createElement(g,{key:he.id,edge:he})}))});function Re(ve,Te){const{scale:he,onStepDown:pe,onStepUp:ye,ref:Oe,isMax:Ne,isMin:Me}=nt(),{state:Ae,ref:we}=Xe({scale:he,bounds:ve,focus:Te}),{position:ke,isPanning:st}=Ae;return{zoomRef:Oe,panRef:we,position:ke,isPanning:st,scale:he,onStepDown:pe,onStepUp:ye,isMaxZoom:Ne,isMinZoom:Me}}function ze(){const[ve,Te]=(0,s.useState)(void 0),he=(0,s.useCallback)(()=>Te(void 0),[Te]),[pe,ye]=(0,s.useState)(void 0),Oe=(0,s.useCallback)(()=>ye(void 0),[ye]);return{nodeHover:ve,setNodeHover:Te,clearNodeHover:he,edgeHover:pe,setEdgeHover:ye,clearEdgeHover:Oe}}},85506:(G,O,e)=>{"use strict";e.d(O,{Y:()=>n});var t=e(68404);function n(u){return(0,t.useMemo)(()=>u.reduce((s,i)=>(i.fields.filter(f=>f.name==="source").length?s.edges.push(i):s.nodes.push(i),s),{edges:[],nodes:[]}),[u])}},68545:(G,O,e)=>{"use strict";e.d(O,{Ee:()=>S,Ew:()=>a,F:()=>f,HB:()=>r,MP:()=>T,Tz:()=>M,dM:()=>m,lr:()=>o,uX:()=>R});var t=e(71895),n=e(5367),u=e(14582),s=e(19695),i=e(66926);function m(L,w){const A=L.x2-L.x1,N=L.y2-L.y1,W=Math.sqrt(A*A+N*N),I=Math.max((W-w)/W,0),F=A*I,V=N*I,b=A-F,X=N-V,k=L.x1+b/2,H=L.y1+X/2;return{x1:k,y1:H,x2:k+F,y2:H+V}}function f(L){const w={...L,fields:L.fields.map(N=>({...N,name:N.name.toLowerCase()}))},A=new t.N(w);return{id:A.getFieldByName(n.z.id.toLowerCase()),title:A.getFieldByName(n.z.title.toLowerCase()),subTitle:A.getFieldByName(n.z.subTitle.toLowerCase()),mainStat:A.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:A.getFieldByName(n.z.secondaryStat.toLowerCase()),arc:l(L,n.z.arc),details:l(L,n.z.detail),color:A.getFieldByName(n.z.color)}}function o(L){const w={...L,fields:L.fields.map(N=>({...N,name:N.name.toLowerCase()}))},A=new t.N(w);return{id:A.getFieldByName(n.z.id.toLowerCase()),source:A.getFieldByName(n.z.source.toLowerCase()),target:A.getFieldByName(n.z.target.toLowerCase()),mainStat:A.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:A.getFieldByName(n.z.secondaryStat.toLowerCase()),details:l(L,n.z.detail.toLowerCase())}}function l(L,w){return L.fields.filter(A=>A.name.match(new RegExp("^"+w)))}function r(L,w){if(!(w||L))return{nodes:[],edges:[]};if(L){const A=f(L);if(!A.id)throw new Error("id field is required for nodes data frame.");const N={};for(let I=0;I<A.id.values.length;I++){const F=A.id.values.get(I);N[F]=h(F,A,I)}let W=w?d(w,o(w)):[];for(const I of W)N[I.target].incoming++;return{nodes:Object.values(N),edges:W,legend:A.arc.map(I=>({color:I.config.color?.fixedColor??"",name:I.config.displayName||I.name}))}}else{w=w;const A={},N=o(w);let W=d(w,N);for(let F=0;F<W.length;F++){const V=W[F],{source:b,target:X}=p(N,F);A[X.id]=A[X.id]||X,A[b.id]=A[b.id]||b,c(N.mainStat)&&(A[X.id].mainStatNumeric=(A[X.id].mainStatNumeric??0)+N.mainStat.values.get(F)),c(N.secondaryStat)&&(A[X.id].secondaryStatNumeric=(A[X.id].secondaryStatNumeric??0)+N.secondaryStat.values.get(F)),A[V.target].incoming++}return{nodes:g(A,N),edges:W}}}function d(L,w){if(!w.id)throw new Error("id field is required for edges data frame.");return w.id.values.toArray().map((A,N)=>{const W=w.target?.values.get(N),I=w.source?.values.get(N);return{id:A,dataFrameRowIndex:N,source:I,target:W,mainStat:w.mainStat?a(w.mainStat.config,w.mainStat.values.get(N)):"",secondaryStat:w.secondaryStat?a(w.secondaryStat.config,w.secondaryStat.values.get(N)):""}})}function c(L){return L&&L.type===u.fS.number}function g(L,w){const A=new s.G,N=new s.G,W=c(w.secondaryStat)?{...w.secondaryStat,values:A}:void 0,I=c(w.mainStat)?{...w.mainStat,values:N}:void 0;return Object.values(L).map((F,V)=>{if(I||W){const b={...F};return I&&(b.mainStat=I,N.add(F.mainStatNumeric),b.dataFrameRowIndex=V),W&&(b.secondaryStat=W,A.add(F.secondaryStatNumeric),b.dataFrameRowIndex=V),b}return F})}function p(L,w){const A=L.target?.values.get(w),N=L.source?.values.get(w);return{target:y(A,w),source:y(N,w)}}function y(L,w){return{id:L,title:L,subTitle:"",dataFrameRowIndex:w,incoming:0,arcSections:[]}}function h(L,w,A){return{id:L,title:w.title?.values.get(A)||"",subTitle:w.subTitle?w.subTitle.values.get(A):"",dataFrameRowIndex:A,incoming:0,mainStat:w.mainStat,secondaryStat:w.secondaryStat,arcSections:w.arc,color:w.color}}function a(L,w){if(typeof w=="string")return w;{const A=L.decimals||2;return Number.isFinite(w)?w.toFixed(A)+(L.unit?" "+L.unit:""):""}}function v(L){const w=E();for(let A=0;A<L;A++)w.add(C(A));return w}function C(L){return{id:L.toString(),title:`service:${L}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5}}function E(){const L={[NodeGraphDataFrameFieldNames.id]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:new ArrayVector,type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:new ArrayVector,type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:new ArrayVector,type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}}};return new MutableDataFrame({name:"nodes",fields:Object.keys(L).map(w=>({...L[w],name:w}))})}function P(L){const w=x();for(const A of L)w.add({id:A.source+"--"+A.target,...A});return w}function x(){const L={[NodeGraphDataFrameFieldNames.id]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:new ArrayVector,type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(L).map(w=>({...L[w],name:w}))})}function M(L){if(L.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const w=L.reduce((W,I)=>(I.x>W.right&&(W.right=I.x),I.x<W.left&&(W.left=I.x),I.y>W.bottom&&(W.bottom=I.y),I.y<W.top&&(W.top=I.y),W),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),A=w.top+(w.bottom-w.top)/2,N=w.left+(w.right-w.left)/2;return{...w,center:{x:N,y:A}}}function S(L,w){let A=L.filter(N=>!!(N.meta?.preferredVisualisationType==="nodeGraph"||N.name==="nodes"||N.name==="edges"||N.refId==="nodes"||N.refId==="edges"||new t.N(N).getFieldByName(n.z.id)));return w&&(A=D(A,w)),A}const D=(L,w)=>L.map(A=>{if(new t.N(A).getFieldByName(n.z.source.toLowerCase())){if(w?.edges?.mainStatUnit){const W=A.fields.find(I=>I.name.toLowerCase()===n.z.mainStat);W&&(W.config={...W.config,unit:w.edges.mainStatUnit})}if(w?.edges?.secondaryStatUnit){const W=A.fields.find(I=>I.name.toLowerCase()===n.z.secondaryStat);W&&(W.config={...W.config,unit:w.edges.secondaryStatUnit})}}else{if(w?.nodes?.mainStatUnit){const W=A.fields.find(I=>I.name.toLowerCase()===n.z.mainStat);W&&(W.config={...W.config,unit:w.nodes.mainStatUnit})}if(w?.nodes?.secondaryStatUnit){const W=A.fields.find(I=>I.name.toLowerCase()===n.z.secondaryStat);W&&(W.config={...W.config,unit:w.nodes.secondaryStatUnit})}if(w?.nodes?.arcs?.length)for(const W of w.nodes.arcs){const I=A.fields.find(F=>F.name.toLowerCase()===W.field);I&&W.color&&(I.config={...I.config,color:{fixedColor:W.color,mode:i.S.Fixed}})}}return A}),T=(L,w,A)=>{const N=w.find(W=>W.id===A);return N?[...new Set(L.filter(W=>N.source===W.id||N.target===W.id).map(W=>W.id))]:[]},R=(L,w,A)=>{const N=L.find(W=>W.id===A);if(N){const W=w.filter(I=>I.source===N.id||I.target===N.id);return[...new Set(W.flatMap(I=>L.filter(F=>I.source===F.id||I.target===F.id).map(F=>F.id)))]}return[]}},30383:(G,O,e)=>{"use strict";e.d(O,{h:()=>f,j:()=>m});var t=e(35363),n=e(21760),u=e(89890),s=e(29076),i=e(40538);function m(o,l=!0){const r=["Value options"];o.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:r,defaultValue:!1}),o.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:r,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:d=>d.reduceOptions.values===!0}),o.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:r,editor:t.S.get("stats-picker").editor,defaultValue:[n.gz.lastNotNull],showIf:d=>d.reduceOptions.values===!1}),l&&o.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:r,settings:{allowCustomValue:!0,options:[],getOptions:async d=>{const c=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(d&&d.data)for(const g of d.data)for(const p of g.fields){const y=(0,u.C)(p,g,d.data),h=`/^${(0,s.GE)(y)}$/`;c.push({value:h,label:y})}return Promise.resolve(c)}},defaultValue:""})}function f(o,l){o.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:l,settings:{options:[{value:i.wm.Auto,label:"Auto"},{value:i.wm.Horizontal,label:"Horizontal"},{value:i.wm.Vertical,label:"Vertical"}]},defaultValue:i.wm.Auto})}},98967:(G,O,e)=>{"use strict";e.r(O),e.d(O,{plugin:()=>x});var t=e(48513),n=e(40538),u=e(96003),s=e(936),i=e(66926);const m=(M,S,D)=>{const T=(0,s.ZH)(M,S,D);if(D.angular&&(S==="singlestat"||S==="grafana-singlestat-panel")){const R=D.angular;if(T.graphMode=n.IG.None,R.sparkline&&R.sparkline.show&&(T.graphMode=n.IG.Area),R.colorBackground)T.colorMode=n.pc.Background;else if(R.colorValue)T.colorMode=n.pc.Value;else if(T.colorMode=n.pc.None,R.sparkline?.lineColor&&T.graphMode===n.IG.Area){const L=M.fieldConfig??{};L.defaults.color={mode:i.S.Fixed,fixedColor:R.sparkline.lineColor},M.fieldConfig=L}R.valueName==="name"&&(T.textMode=n.jG.Name)}return T};var f=e(82897),o=e(68404),l=e(14582),r=e(17128),d=e(36998),c=e(11003),g=e(67591),p=e(3652),y=e(47694);class h extends o.PureComponent{constructor(){super(...arguments),this.renderComponent=(S,D)=>{const{timeRange:T,options:R}=this.props,{value:L,alignmentFactors:w,width:A,height:N,count:W,orientation:I}=S,{openMenu:F,targetClassName:V}=D;let b=L.sparkline;return b&&(b.timeRange=T),o.createElement(c.w6,{value:L.display,count:W,sparkline:b,colorMode:R.colorMode,graphMode:R.graphMode,justifyMode:R.justifyMode,textMode:this.getTextMode(),alignmentFactors:w,parentOrientation:I,text:R.text,width:A,height:N,theme:y.vc.theme2,onClick:F,className:V})},this.renderValue=S=>{const{value:D}=S,{getLinks:T,hasLinks:R}=D;return R&&T?o.createElement(g.V,{links:T},L=>this.renderComponent(S,L)):this.renderComponent(S,{})},this.getValues=()=>{const{data:S,options:D,replaceVariables:T,fieldConfig:R,timeZone:L}=this.props;let w;for(let A of S.series)for(let N of A.fields){let{config:W}=N;if(N.type===l.fS.number){if(N.state?.range)continue;!w&&(!(0,f.isNumber)(W.min)||!(0,f.isNumber)(W.max))&&(w=(0,d.Xu)(S.series));const I=W.min??w.min,F=W.max??w.max;N.state=N.state??{},N.state.range={min:I,max:F,delta:F-I}}}return(0,r.nG)({fieldConfig:R,reduceOptions:D.reduceOptions,replaceVariables:T,theme:y.vc.theme2,data:S.series,sparkline:D.graphMode!==n.IG.None,timeZone:L})}}getTextMode(){const{options:S,fieldConfig:D,title:T}=this.props;return S.textMode===n.jG.Auto&&(D.defaults.displayName||!T)?n.jG.ValueAndName:S.textMode}render(){const{height:S,options:D,width:T,data:R,renderCounter:L}=this.props;return o.createElement(p.Q,{getValues:this.getValues,getAlignmentFactors:r.sg,renderValue:this.renderValue,width:T,height:S,source:R,itemSpacing:3,renderCounter:L,autoGrid:!0,orientation:D.orientation})}}var a=e(30383);const v=Object.freeze([0,0]),C={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,textMode:n.jG.Auto};var E=e(26410);class P{getSuggestionsForData(S){const{dataSummary:D}=S;if(!D.hasData)return;const T=S.getListAppender({name:E.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:R=>{R.options.reduceOptions.values&&(R.options.reduceOptions.limit=1)}}});D.hasStringField&&D.hasNumberField&&D.frameCount===1&&D.rowCountTotal<10&&(T.append({name:E.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),T.append({name:E.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.Background}})),D.stringFieldCount===1&&D.frameCount===1&&D.rowCountTotal<10&&D.fieldCount===1&&T.append({name:E.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.None}}),D.hasNumberField&&D.hasTimeField&&(T.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),T.append({name:E.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.IG.None,colorMode:n.pc.Background}}))}}const x=new t.c(h).useFieldConfig().setPanelOptions(M=>{const S=["Stat styles"];(0,a.j)(M),(0,a.h)(M,S),u.Z(M),M.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:S,settings:{options:[{value:n.jG.Auto,label:"Auto"},{value:n.jG.Value,label:"Value"},{value:n.jG.ValueAndName,label:"Value and name"},{value:n.jG.Name,label:"Name"},{value:n.jG.None,label:"None"}]},defaultValue:C.textMode}),M.addRadio({path:"colorMode",name:"Color mode",defaultValue:n.pc.Value,category:S,settings:{options:[{value:n.pc.None,label:"None"},{value:n.pc.Value,label:"Value"},{value:n.pc.Background,label:"Background"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:S,defaultValue:C.graphMode,settings:{options:[{value:n.IG.None,label:"None"},{value:n.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:C.justifyMode,category:S,settings:{options:[{value:n.ap.Auto,label:"Auto"},{value:n.ap.Center,label:"Center"}]}})}).setNoPadding().setPanelChangeHandler(m).setSuggestionsSupplier(new P).setMigrationHandler(s.rD)},66683:(G,O,e)=>{"use strict";e.d(O,{j:()=>l});var t=e(68404),n=e(90701),u=e(318),s=e(46739),i=e(20017);const m=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],f=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(d=>({label:d,value:d})),o=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(d=>({label:d,value:d})),l=({value:d,onChange:c})=>{const g=(0,t.useMemo)(()=>d?.fill==="dash"?f:o,[d]),p=(0,t.useMemo)(()=>{if(!d?.dash?.length)return g[0];const y=d.dash?.join(", "),h=g.find(a=>a.value===y);return h||{label:y,value:y}},[d,g]);return t.createElement(n.Lh,null,t.createElement(u.S,{value:d?.fill||"solid",options:m,onChange:y=>{let h;y==="dot"?h=r(o[0].value):y==="dash"&&(h=r(f[0].value)),c({...d,fill:y,dash:h})}}),d?.fill&&d?.fill!=="solid"&&t.createElement(t.Fragment,null,t.createElement(s.Ph,{allowCustomValue:!0,options:g,value:p,width:20,onChange:y=>{c({...d,dash:r(y.value??"")})},formatCreateLabel:y=>`Segments: ${r(y).join(", ")}`}),t.createElement("div",null,"\xA0",t.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},t.createElement(i.h,{name:"question-circle"})))))};function r(d){const c=[];for(const g of d.split(/(?:,| )+/)){const p=Number.parseInt(g,10);isNaN(p)||c.push(p)}return c}},49616:(G,O,e)=>{"use strict";e.d(O,{c:()=>f});var t=e(68404),n=e(33180),u=e(90701),s=e(318),i=e(25474);const m=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],f=({value:o,onChange:l})=>{const r=typeof o=="number",d=r?n.secondsToHms(o/1e3):void 0;m[2].value=r?o:36e5;const c=y=>{let h=!1;if(y)try{h=n.intervalToSeconds(y)*1e3}catch(a){console.warn("ERROR",a)}l(h)},g=y=>{y.key==="Enter"&&c(y.target.value)},p=y=>{c(y.target.value)};return t.createElement(u.Lh,null,t.createElement(s.S,{value:o,options:m,onChange:l}),r&&t.createElement(i.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:d,onKeyDown:g,onBlur:p,prefix:t.createElement("div",null,"<"),spellCheck:!1}))}},74855:(G,O,e)=>{"use strict";e.d(O,{F:()=>u});var t=e(68404),n=e(46739);const u=({item:s,value:i,onChange:m,id:f})=>{const o=(0,t.useCallback)(l=>{m({mode:l.value})},[m]);return t.createElement(n.Ph,{inputId:f,value:i.mode,options:s.settings.options,onChange:o})}},56703:(G,O,e)=>{"use strict";e.d(O,{F:()=>y,r:()=>g});var t=e(68061),n=e(66926),u=e(14582),s=e(78798),i=e(40538),m=e(85885),f=e(35321),o=e(23084),l=e(71464),r=e(66683),d=e(49616),c=e(74855);const g={drawStyle:i.l8.Line,lineInterpolation:i.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:i.FI.None,barAlignment:i.pu.Center,stacking:{mode:i.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1},p=["Graph styles"];function y(h){return{standardOptions:{[t.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:n.S.PaletteClassic}}},useCustomConfig:a=>{a.addRadio({path:"drawStyle",name:"Style",category:p,defaultValue:h.drawStyle,settings:{options:m.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:p,defaultValue:h.lineInterpolation,settings:{options:m.q.lineInterpolation},showIf:v=>v.drawStyle===i.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:p,defaultValue:h.barAlignment,settings:{options:m.q.barAlignment},showIf:v=>v.drawStyle===i.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:p,defaultValue:h.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:v=>v.drawStyle!==i.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:p,defaultValue:h.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:v=>v.drawStyle!==i.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:p,defaultValue:m.q.fillGradient[0].value,settings:{options:m.q.fillGradient},showIf:v=>v.drawStyle!==i.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:p,hideFromDefaults:!0,settings:{filter:v=>v.type===u.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:p,showIf:v=>v.drawStyle===i.l8.Line,editor:r.j,override:r.j,process:s.kG,shouldApply:v=>v.type===u.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:p,defaultValue:!1,editor:d.c,override:d.c,showIf:v=>v.drawStyle===i.l8.Line,shouldApply:v=>v.type!==u.fS.time,process:s.kG}).addRadio({path:"showPoints",name:"Show points",category:p,defaultValue:m.q.showPoints[0].value,settings:{options:m.q.showPoints},showIf:v=>v.drawStyle!==i.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:p,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:v=>v.showPoints!==i.Jp.Never||v.drawStyle===i.l8.Points}),f.V(a,h.stacking,p),a.addSelect({category:p,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:i.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:i.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),o.r(a,h),l.B(a),a.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:i.i3.Off},settings:{options:m.q.thresholdsDisplayModes},editor:c.F,override:c.F,process:s.kG,shouldApply:()=>!0})}}}},63073:()=>{"use strict";let G=window.matchMedia;window.matchMedia=O=>{let e=G(O);return e.addEventListener||(e.addEventListener=(t,n)=>{e.addListener(n)},e.removeEventListener=(t,n)=>{e.removeListener(n)}),e}},3153:(G,O,e)=>{"use strict";e.d(O,{PQ:()=>u,WI:()=>i,h:()=>n,y0:()=>s});var t=e(7240);let n;function u(m){n=m}function s(){return!n||!n.getState?{templating:{...t.qM,lastKey:"key"}}:n.getState()}function i(m){if(!(!n||!n.getState))return n.dispatch(m)}},73757:(G,O,e)=>{"use strict";e.d(O,{pC:()=>m,B5:()=>n,V5:()=>u,bf:()=>s,hw:()=>t,BL:()=>o,vT:()=>l,eL:()=>r});var t=(d=>(d[d.Admin=4]="Admin",d[d.Editor=2]="Editor",d[d.Member=0]="Member",d[d.Viewer=1]="Viewer",d))(t||{}),n=(d=>(d.Viewer="Viewer",d.Editor="Editor",d.Admin="Admin",d))(n||{}),u=(d=>(d[d.View=1]="View",d[d.Edit=2]="Edit",d[d.Admin=4]="Admin",d))(u||{}),s=(d=>(d.View="View",d.Edit="Edit",d.Admin="Admin",d))(s||{}),i=(d=>(d[d.Query=1]="Query",d[d.Admin=2]="Admin",d))(i||{}),m=(d=>(d.Team="Team",d.User="User",d.Viewer="Viewer",d.Editor="Editor",d))(m||{});const f=[{value:1,label:"Query",description:"Can query data source."}],o=[{value:"Team",label:"Team"},{value:"User",label:"User"},{value:"Viewer",label:"Everyone With Viewer Role"},{value:"Editor",label:"Everyone With Editor Role"}],l=[{value:1,label:"View",description:"Can view dashboards."},{value:2,label:"Edit",description:"Can add, edit and delete dashboards."},{value:4,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}],r=[{value:t.Member,label:"Member",description:"Is team member"},{value:t.Admin,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},20352:()=>{"use strict"},47622:()=>{"use strict"},18285:()=>{"use strict"},56968:()=>{"use strict"},45984:(G,O,e)=>{"use strict";e.d(O,{Ai:()=>i,Dn:()=>M,Eb:()=>E,GL:()=>o,GT:()=>p,Im:()=>a,Jd:()=>D,OW:()=>S,QI:()=>C,Qt:()=>v,RB:()=>R,VJ:()=>x,Wj:()=>d,Xw:()=>r,Yr:()=>w,_B:()=>c,_z:()=>y,hS:()=>g,le:()=>P,nq:()=>m,p8:()=>h,pO:()=>l,xF:()=>L,xt:()=>f,z:()=>T});var t=e(39253),n=e(62316);const u=(0,t.X)("ds-request-response"),s=(0,t.X)("ds-request-error"),i=(0,t.X)("toggle-sidemenu-hidden"),m=(0,t.X)("template-variable-value-updated"),f=(0,t.X)("graph-click"),o=(0,t.X)("threshold-changed");class l extends n.m{}l.type="panel-queries-changed";class r extends n.m{}r.type="panel-transformations-changed";class d extends n.m{}d.type="panels-options-changed";class c extends n.m{}c.type="dashboard-panels-changed";class g extends n.m{}g.type="dashboard-meta-changed";class p extends n.m{}p.type="panel-directive-ready";class y extends n.m{}y.type="render";class h extends n.R{}h.type="zoom-out";var a=(A=>(A[A.Left=-1]="Left",A[A.Right=1]="Right",A))(a||{});class v extends n.R{}v.type="shift-time";class C extends n.m{}C.type="absolute-time";class E extends n.R{}E.type="remove-panel";class P extends n.R{}P.type="show-modal";class x extends n.R{}x.type="show-confirm-modal";class M extends n.R{}M.type="show-react-modal";class S extends n.m{}S.type="hide-modal";class D extends n.m{}D.type="dashboard-saved";class T extends n.R{}T.type="annotation-query-started";class R extends n.R{}R.type="annotation-query-finished";class L extends n.R{}L.type="panel-edit-started";class w extends n.R{}w.type="panel-edit-finished"},3032:(G,O,e)=>{"use strict";e.d(O,{Kd:()=>t,f0:()=>n,zN:()=>s,zQ:()=>u});var t=(i=>(i.left="left",i.right="right",i))(t||{});const n=["lines","bars","points","stacked_lines","stacked_bars"];var u=(i=>(i.table="table",i.raw="raw",i))(u||{});const s=["table","raw"]},59784:()=>{"use strict"},81168:(G,O,e)=>{"use strict";e.d(O,{AccessControlAction:()=>R,AppNotificationSeverity:()=>y,AppNotificationTimeout:()=>h,CoreEvents:()=>L,DashboardInitPhase:()=>m,DashboardRoutes:()=>i,EXPLORE_GRAPH_STYLES:()=>v.f0,ExploreId:()=>v.Kd,KioskMode:()=>f,OrgRole:()=>o.B5,PermissionLevelString:()=>o.bf,ServiceAccountStateFilter:()=>d,TABLE_RESULTS_STYLE:()=>v.zQ,TeamPermissionLevel:()=>o.hw,createAsyncThunk:()=>M,teamsPermissionLevels:()=>o.eL,timeoutMap:()=>a,useDispatch:()=>P,useSelector:()=>x});var t=e(28317),n=e(20352),u=e(88391),s=e(59784),i=(w=>(w.Home="home-dashboard",w.New="new-dashboard",w.Normal="normal-dashboard",w.Path="path-dashboard",w.Scripted="scripted-dashboard",w.Public="public-dashboard",w))(i||{}),m=(w=>(w.NotStarted="Not started",w.Fetching="Fetching",w.Services="Services",w.Failed="Failed",w.Completed="Completed",w))(m||{}),f=(w=>(w.TV="tv",w.Full="full",w))(f||{}),o=e(73757),l=e(47622),r=e(26945),d=(w=>(w.All="All",w.WithExpiredTokens="WithExpiredTokens",w.Disabled="Disabled",w))(d||{}),c=e(56968),g=e(89040),p=e(81146),y=(w=>(w.Success="success",w.Warning="warning",w.Error="error",w.Info="info",w))(y||{}),h=(w=>(w[w.Success=3e3]="Success",w[w.Warning=5e3]="Warning",w[w.Error=7e3]="Error",w))(h||{});const a={success:3e3,warning:5e3,error:7e3,info:3e3};var v=e(3032),C=e(32557),E=e(36635);const P=E.useDispatch,x=E.useSelector,M=(w,A,N)=>(0,C.hg)(w,A,N);var S=e(51904),D=e(18285),T=e(49400),R=(w=>(w.UsersRead="users:read",w.UsersWrite="users:write",w.UsersAuthTokenList="users.authtoken:read",w.UsersAuthTokenUpdate="users.authtoken:write",w.UsersPasswordUpdate="users.password:write",w.UsersDelete="users:delete",w.UsersCreate="users:create",w.UsersEnable="users:enable",w.UsersDisable="users:disable",w.UsersPermissionsUpdate="users.permissions:write",w.UsersLogout="users:logout",w.UsersQuotasList="users.quotas:read",w.UsersQuotasUpdate="users.quotas:write",w.ServiceAccountsRead="serviceaccounts:read",w.ServiceAccountsCreate="serviceaccounts:create",w.ServiceAccountsWrite="serviceaccounts:write",w.ServiceAccountsDelete="serviceaccounts:delete",w.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",w.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",w.OrgsRead="orgs:read",w.OrgsPreferencesRead="orgs.preferences:read",w.OrgsWrite="orgs:write",w.OrgsPreferencesWrite="orgs.preferences:write",w.OrgsCreate="orgs:create",w.OrgsDelete="orgs:delete",w.OrgUsersRead="org.users:read",w.OrgUsersAdd="org.users:add",w.OrgUsersRemove="org.users:remove",w.OrgUsersWrite="org.users:write",w.LDAPUsersRead="ldap.user:read",w.LDAPUsersSync="ldap.user:sync",w.LDAPStatusRead="ldap.status:read",w.DataSourcesExplore="datasources:explore",w.DataSourcesRead="datasources:read",w.DataSourcesCreate="datasources:create",w.DataSourcesWrite="datasources:write",w.DataSourcesDelete="datasources:delete",w.DataSourcesPermissionsRead="datasources.permissions:read",w.DataSourcesCachingRead="datasources.caching:read",w.DataSourcesInsightsRead="datasources.insights:read",w.ActionServerStatsRead="server.stats:read",w.ActionTeamsCreate="teams:create",w.ActionTeamsDelete="teams:delete",w.ActionTeamsRead="teams:read",w.ActionTeamsWrite="teams:write",w.ActionTeamsPermissionsRead="teams.permissions:read",w.ActionTeamsPermissionsWrite="teams.permissions:write",w.ActionRolesList="roles:read",w.ActionTeamsRolesList="teams.roles:read",w.ActionTeamsRolesAdd="teams.roles:add",w.ActionTeamsRolesRemove="teams.roles:remove",w.ActionUserRolesList="users.roles:read",w.ActionUserRolesAdd="users.roles:add",w.ActionUserRolesRemove="users.roles:remove",w.DashboardsRead="dashboards:read",w.DashboardsWrite="dashboards:write",w.DashboardsDelete="dashboards:delete",w.DashboardsCreate="dashboards:create",w.DashboardsPermissionsRead="dashboards.permissions:read",w.DashboardsPermissionsWrite="dashboards.permissions:write",w.DashboardsPublicWrite="dashboards.public:write",w.FoldersRead="folders:read",w.FoldersWrite="folders:write",w.FoldersDelete="folders:delete",w.FoldersCreate="folders:create",w.FoldersPermissionsRead="folders.permissions:read",w.FoldersPermissionsWrite="folders.permissions:write",w.ActionSupportBundlesCreate="support.bundles:create",w.ActionSupportBundlesRead="support.bundles:read",w.ActionSupportBundlesDelete="support.bundles:delete",w.AlertingRuleCreate="alert.rules:create",w.AlertingRuleRead="alert.rules:read",w.AlertingRuleUpdate="alert.rules:write",w.AlertingRuleDelete="alert.rules:delete",w.AlertingInstanceCreate="alert.instances:create",w.AlertingInstanceUpdate="alert.instances:write",w.AlertingInstanceRead="alert.instances:read",w.AlertingNotificationsRead="alert.notifications:read",w.AlertingNotificationsWrite="alert.notifications:write",w.AlertingRuleExternalWrite="alert.rules.external:write",w.AlertingRuleExternalRead="alert.rules.external:read",w.AlertingInstancesExternalWrite="alert.instances.external:write",w.AlertingInstancesExternalRead="alert.instances.external:read",w.AlertingNotificationsExternalWrite="alert.notifications.external:write",w.AlertingNotificationsExternalRead="alert.notifications.external:read",w.ActionAPIKeysRead="apikeys:read",w.ActionAPIKeysCreate="apikeys:create",w.ActionAPIKeysDelete="apikeys:delete",w.PluginsInstall="plugins:install",w.PluginsWrite="plugins:write",w))(R||{}),L=e(45984)},51904:()=>{"use strict"},88391:()=>{"use strict"},81146:()=>{"use strict"},89040:()=>{"use strict"},49400:()=>{"use strict"},26410:(G,O,e)=>{"use strict";e.d(O,{y:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n))(t||{})},28317:()=>{"use strict"},46063:(G,O,e)=>{"use strict";e.d(O,{ED:()=>m,I9:()=>u,T8:()=>o,Yb:()=>s,bj:()=>n,g0:()=>l,pz:()=>f,x_:()=>t});var t=(r=>(r.Firing="firing",r.Inactive="inactive",r.Pending="pending",r))(t||{}),n=(r=>(r.Normal="Normal",r.Alerting="Alerting",r.Pending="Pending",r.NoData="NoData",r.Error="Error",r))(n||{});function u(r){return Object.values(t).includes(r)}function s(r){return Object.values(n).some(d=>d===r)}function i(r){return r!==null&&typeof r<"u"&&!Object.values(t).includes(r)}function m(r){return i(r)?r.split(" ")[0]:r}var f=(r=>(r.Alerting="alerting",r.Recording="recording",r))(f||{}),o=(r=>(r.Cortex="Cortex",r.Mimir="Mimir",r.Prometheus="Prometheus",r.Thanos="Thanos",r))(o||{}),l=(r=>(r.Alerting="Alerting",r.NoData="NoData",r.KeepLastState="KeepLastState",r.OK="OK",r.Error="Error",r))(l||{})},26945:()=>{"use strict"},26189:()=>{(function(G){var O={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(m){if(!m)n.x=-1;else{var f=t.p2c(m);n.x=Math.max(0,Math.min(f.left,t.width())),n.y=Math.max(0,Math.min(f.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(m){m&&t.setCrosshair(m),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function u(i){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function s(i){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var m=t.offset();n.x=Math.max(0,Math.min(i.pageX-m.left,t.width())),n.y=Math.max(0,Math.min(i.pageY-m.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(i,m){i.getOptions().crosshair.mode&&(m.mouseout(u),m.mousemove(s))}),t.hooks.drawOverlay.push(function(i,m){var f=i.getOptions().crosshair;if(f.mode){var o=i.getPlotOffset();if(m.save(),m.translate(o.left,o.top),n.x!=-1){var l=i.getOptions().crosshair.lineWidth%2?.5:0;if(m.strokeStyle=f.color,m.lineWidth=f.lineWidth,m.lineJoin="round",m.beginPath(),f.mode.indexOf("x")!=-1){var r=Math.floor(n.x)+l;m.moveTo(r,0),m.lineTo(r,i.height())}if(f.mode.indexOf("y")!=-1){var d=Math.floor(n.y)+l;m.moveTo(0,d),m.lineTo(i.width(),d)}m.stroke()}m.restore()}}),t.hooks.shutdown.push(function(i,m){m.unbind("mouseout",u),m.unbind("mousemove",s)})}G.plot.plugins.push({init:e,options:O,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(G){function O(e){e.hooks.processDatapoints.push(function(t,n,u){n.dashes.show&&t.hooks.draw.push(function(s,i){var m=s.getPlotOffset(),f=n.xaxis,o=n.yaxis;function l(g,p){var y=u.points,h=u.pointsize,a=null,v=null,C=0,E=!0,P,x;n.dashes.dashLength[0]?(P=n.dashes.dashLength[0],n.dashes.dashLength[1]?x=n.dashes.dashLength[1]:x=P):x=P=n.dashes.dashLength,i.beginPath();for(var M=h;M<y.length;M+=h){let F=function(V){var b=Math.sqrt(Math.pow(A-L,2)+Math.pow(N-w,2));if(b<=V)return{deltaX:A-L,deltaY:N-w,distance:b,remainder:V-b};var X=A>L?1:-1,k=N>w?1:-1;return{deltaX:X*Math.sqrt(Math.pow(V,2)/(1+Math.pow((N-w)/(A-L),2))),deltaY:k*Math.sqrt(Math.pow(V,2)-Math.pow(V,2)/(1+Math.pow((N-w)/(A-L),2))),distance:V,remainder:0}};var I=F,S=y[M-h],D=y[M-h+1],T=y[M],R=y[M+1];if(!(S==null||T==null)){if(D<=R&&D<o.min){if(R<o.min)continue;S=(o.min-D)/(R-D)*(T-S)+S,D=o.min}else if(R<=D&&R<o.min){if(D<o.min)continue;T=(o.min-D)/(R-D)*(T-S)+S,R=o.min}if(D>=R&&D>o.max){if(R>o.max)continue;S=(o.max-D)/(R-D)*(T-S)+S,D=o.max}else if(R>=D&&R>o.max){if(D>o.max)continue;T=(o.max-D)/(R-D)*(T-S)+S,R=o.max}if(S<=T&&S<f.min){if(T<f.min)continue;D=(f.min-S)/(T-S)*(R-D)+D,S=f.min}else if(T<=S&&T<f.min){if(S<f.min)continue;R=(f.min-S)/(T-S)*(R-D)+D,T=f.min}if(S>=T&&S>f.max){if(T>f.max)continue;D=(f.max-S)/(T-S)*(R-D)+D,S=f.max}else if(T>=S&&T>f.max){if(S>f.max)continue;R=(f.max-S)/(T-S)*(R-D)+D,T=f.max}(S!=a||D!=v)&&i.moveTo(f.p2c(S)+g,o.p2c(D)+p);var L=f.p2c(S)+g,w=o.p2c(D)+p,A=f.p2c(T)+g,N=o.p2c(R)+p,W;do W=F(C>0?C:E?P:x),(W.deltaX!=0||W.deltaY!=0)&&(E?i.lineTo(L+W.deltaX,w+W.deltaY):i.moveTo(L+W.deltaX,w+W.deltaY)),E=!E,C=W.remainder,L+=W.deltaX,w+=W.deltaY;while(W.distance>0);a=T,v=R}}i.stroke()}i.save(),i.translate(m.left,m.top),i.lineJoin="round";var r=n.dashes.lineWidth,d=n.shadowSize;if(r>0&&d>0){i.lineWidth=d,i.strokeStyle="rgba(0,0,0,0.1)";var c=Math.PI/18;l(Math.sin(c)*(r/2+d/2),Math.cos(c)*(r/2+d/2)),i.lineWidth=d/2,l(Math.sin(c)*(r/2+d/4),Math.cos(c)*(r/2+d/4))}i.lineWidth=r,i.strokeStyle=n.color,r>0&&l(0,0),i.restore()})})}G.plot.plugins.push({init:O,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(G){"use strict";var O={series:{fillBelowTo:null}};function e(t){function n(i,m){var f;for(f=0;f<m.length;++f)if(m[f].id===i.fillBelowTo)return m[f];return null}function u(i,m,f,o,l,r,d,c){var g,p,y,h,a,v;return g=f-i,p=o-m,y=d-l,h=c-r,a=(-p*(i-l)+g*(m-r))/(-y*p+g*h),v=(y*(m-r)-h*(i-l))/(-y*p+g*h),a>=0&&a<=1&&v>=0&&v<=1?[i+v*g,m+v*p]:null}function s(i,m,f){if(f.fillBelowTo===null)return;var o,l,r,d,c,g,p;function y(x,M){m.beginPath(),m.moveTo(f.xaxis.p2c(x)+g.left,f.yaxis.p2c(M)+g.top)}function h(){m.closePath(),m.fill()}function a(){if(r.length/l!==c.length/d)return console.error("Refusing to graph inconsistent number of points"),!1;var x;for(x=0;x<r.length/l;x++)if(r[x*l]!==null&&c[x*d]!==null&&r[x*l]!==c[x*d])return console.error("Refusing to graph points without matching value"),!1;return!0}function v(x,M){console.assert(M>x,"expects the end index to be greater than the start index");var S=x===0||r[x-1]===null||c[x-1]===null,D=!1,T,R;for(T=x;T<M;T++)if(r[T*l+1]===null||c[T*l+1]===null)D=!1,S=!0;else if(r[T*l+1]===c[T*d+1])D=!0,S=!1;else if(r[T*l+1]>c[T*d+1]){S?y(r[T*l],r[T*l+1]):D?y(r[(T-1)*l],r[(T-1)*l+1]):(R=C(T),y(R[0],R[1])),P(T,M);return}else S=!1,D=!1}function C(x){console.assert(x>0,"expects the second point in the series line segment");var M,S;for(M=1;M<c.length/d;M++)if(S=u(r[(x-1)*l],r[(x-1)*l+1],r[x*l],r[x*l+1],c[(M-1)*d],c[(M-1)*d+1],c[M*d],c[M*d+1]),S!==null)return S;console.error("intersectionPoint() should only be called when an intersection happens")}function E(x,M){console.assert(x>=M,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var S;for(S=x;S>=M;S--)m.lineTo(o.xaxis.p2c(c[S*d])+g.left,o.yaxis.p2c(c[S*d+1])+g.top);h()}function P(x,M){console.assert(x<=M,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var S,D;for(S=x;S<M;S++)if(r[S*l+1]===null&&S>x){E(S-1,x),v(S,M);return}else if(r[S*l+1]===c[S*d+1]){E(S,x),v(S,M);return}else if(r[S*l+1]<c[S*d+1]){D=C(S),m.lineTo(f.xaxis.p2c(D[0])+g.left,f.yaxis.p2c(D[1])+g.top),E(S,x),v(S,M);return}else m.lineTo(f.xaxis.p2c(r[S*l])+g.left,f.yaxis.p2c(r[S*l+1])+g.top);E(M,x)}o=n(f,i.getData()),o&&(l=f.datapoints.pointsize,r=f.datapoints.points,d=o.datapoints.pointsize,c=o.datapoints.points,g=i.getPlotOffset(),a()&&(p=G.color.parse(f.color),p.a=.4,p.normalize(),m.fillStyle=p.toString(),v(0,r.length/l)))}t.hooks.drawSeries.push(s)}G.plot.plugins.push({init:e,options:O,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(G){var O=function(){var f,o,l,r,d,c,g=function(x,M){f=M,o=x.getPlaceholder(),l=x.getOptions(),r=l.series.gauges,d=x.getData(),c=e(r.debug)};g.prototype.calculateLayout=function(){var x=o.width(),M=o.height(),S=Math.min(d.length,r.layout.columns),D=Math.ceil(d.length/S),T=r.layout.margin,R=r.layout.hMargin,L=r.layout.vMargin,w=(x-T*2-R*(S-1))/S,A=(M-T*2-L*(D-1))/D;if(r.layout.square){var N=Math.min(w,A);w=N,A=N}p(r,w);var W=r.cell.margin,I=0,F=0;r.label.show&&(I=r.label.margin,F=r.label.font.size);var V=0,b=0;r.value.show&&(V=r.value.margin,b=r.value.font.size);var X=0;r.threshold.show&&(X=r.threshold.width);var k=0,H=0;r.threshold.label.show&&(k=r.threshold.label.margin,H=r.threshold.label.font.size);for(var Y=w/2-W-X-k*2-H,ee=r.gauge.startAngle,ue=r.gauge.endAngle,q=(ue-ee)/100,ge=-1,De=ee;De<ue;De+=q)ge=Math.max(ge,Math.sin(u(De)));ge=Math.max(ge,Math.sin(u(ue)));var fe=(A-W*2-I*2-F)/(1+ge);fe*ge<V+b/2&&(fe=A-W*2-I*2-F-V-b/2);var me=fe-k*2-H-X,ce=Math.min(Y,me),ie=r.gauge.width;ie>=ce&&(ie=Math.max(3,ce/3));var re=k*2+H+X+ce,Ee=Math.max(re*(1+ge),re+V+b/2);return{canvasWidth:x,canvasHeight:M,margin:T,hMargin:R,vMargin:L,columns:S,rows:D,cellWidth:w,cellHeight:A,cellMargin:W,labelMargin:I,labelFontSize:F,valueMargin:V,valueFontSize:b,width:ie,radius:ce,thresholdWidth:X,thresholdLabelMargin:k,thresholdLabelFontSize:H,gaugeOuterHeight:Ee}};function p(x,M){x.gauge.width==="auto"&&(x.gauge.width=Math.max(5,M/8)),x.label.margin==="auto"&&(x.label.margin=Math.max(1,M/20)),x.label.font.size==="auto"&&(x.label.font.size=Math.max(5,M/8)),x.value.margin==="auto"&&(x.value.margin=Math.max(1,M/30)),x.value.font.size==="auto"&&(x.value.font.size=Math.max(5,M/9)),x.threshold.width==="auto"&&(x.threshold.width=Math.max(3,M/100)),x.threshold.label.margin==="auto"&&(x.threshold.label.margin=Math.max(3,M/40)),x.threshold.label.font.size==="auto"&&(x.threshold.label.font.size=Math.max(5,M/15))}g.prototype.calculateAutoValues=p,g.prototype.calculateCellLayout=function(x,M,S){var D=t(M.columns,S),T=n(M.columns,S),R=M.margin+(M.cellWidth+M.hMargin)*D,L=M.margin+(M.cellHeight+M.vMargin)*T,w=R+M.cellWidth/2,A=L+M.cellMargin+M.labelMargin*2+M.labelFontSize+M.thresholdWidth+M.thresholdLabelFontSize+M.thresholdLabelMargin*2+M.radius,N=M.cellHeight-M.cellMargin*2-M.labelMargin*2-M.labelFontSize-M.gaugeOuterHeight,W=0;return x.cell.vAlign==="middle"?W=N/2:x.cell.vAlign==="bottom"&&(W=N),A+=W,{col:D,row:T,x:R,y:L,offsetY:W,cellWidth:M.cellWidth,cellHeight:M.cellHeight,cellMargin:M.cellMargin,cx:w,cy:A}},g.prototype.drawBackground=function(x){r.frame.show&&(f.save(),f.strokeStyle=l.grid.borderColor,f.lineWidth=l.grid.borderWidth,f.strokeRect(0,0,x.canvasWidth,x.canvasHeight),l.grid.backgroundColor&&(f.fillStyle=l.grid.backgroundColor,f.fillRect(0,0,x.canvasWidth,x.canvasHeight)),f.restore())},g.prototype.drawCellBackground=function(x,M){f.save(),x.cell.border&&x.cell.border.show&&x.cell.border.color&&x.cell.border.width&&(f.strokeStyle=x.cell.border.color,f.lineWidth=x.cell.border.width,f.strokeRect(M.x,M.y,M.cellWidth,M.cellHeight)),x.cell.background&&x.cell.background.color&&(f.fillStyle=x.cell.background.color,f.fillRect(M.x,M.y,M.cellWidth,M.cellHeight)),f.restore()},g.prototype.drawGauge=function(x,M,S,D,T){var R=x.gauge.shadow.show?x.gauge.shadow.blur:0,L=a(x,T),w=y(x,M,T);C(S.cx,S.cy,M.radius,M.width,u(x.gauge.startAngle),u(x.gauge.endAngle),x.gauge.border.color,x.gauge.border.width,x.gauge.background.color,R),C(S.cx,S.cy,M.radius-1,M.width-2,u(w.a1),u(w.a2),L,1,L,R),x.gauge.neutralValue!=null&&h(x,M,S,L)};function y(x,M,S){let D={};var T=x.gauge.neutralValue;return T!=null?S<T?(D.a1=v(x,M,S),D.a2=v(x,M,T)):(D.a1=v(x,M,T),D.a2=v(x,M,S)):(D.a1=x.gauge.startAngle,D.a2=v(x,M,S)),D}function h(x,M,S,D){var T=(x.gauge.max-x.gauge.min)/600;s(f,S.cx,S.cy,M.radius-2,M.width-4,u(v(x,M,x.gauge.neutralValue-T)),u(v(x,M,x.gauge.neutralValue+T)),D,2,x.gauge.background.color)}function a(x,M){for(var S,D=0;D<x.threshold.values.length;D++){var T=x.threshold.values[D];if(S=T.color,M<T.value)break}return S}function v(x,M,S){var D=x.gauge.startAngle+(x.gauge.endAngle-x.gauge.startAngle)*((S-x.gauge.min)/(x.gauge.max-x.gauge.min));return D<x.gauge.startAngle?D=x.gauge.startAngle:D>x.gauge.endAngle&&(D=x.gauge.endAngle),D}g.prototype.drawThreshold=function(x,M,S){for(var D=x.gauge.startAngle,T=0;T<x.threshold.values.length;T++){var R=x.threshold.values[T];c1=R.color,a2=v(x,M,R.value),s(f,S.cx,S.cy,M.radius+M.thresholdWidth,M.thresholdWidth-2,u(D),u(a2),c1,1,c1),D=a2}};function C(x,M,S,D,T,R,L,w,A,N){T!==R&&(f.save(),s(f,x,M,S,D,T,R,L,w,A),N&&(s(f,x,M,S,D,T,R),f.clip(),f.shadowOffsetX=0,f.shadowOffsetY=0,f.shadowBlur=10,f.shadowColor="gray",s(f,x,M,S+1,D+2,T,R,L,1)),f.restore())}g.prototype.drawLable=function(x,M,S,D,T){P(S.cx,S.y+S.cellMargin+M.labelMargin+S.offsetY,"flotGaugeLabel"+D,x.label.formatter?x.label.formatter(T.label,T.data[0][1]):text,x.label)},g.prototype.drawValue=function(x,M,S,D,T){P(S.cx,S.cy-x.value.font.size/2,"flotGaugeValue"+D,x.value.formatter?x.value.formatter(T.label,T.data[0][1]):text,x.value)},g.prototype.drawThresholdValues=function(x,M,S,D){E(x,M,S,"Min"+D,x.gauge.min,x.gauge.startAngle),E(x,M,S,"Max"+D,x.gauge.max,x.gauge.endAngle);for(var T=0;T<x.threshold.values.length;T++){var R=x.threshold.values[T];if(R.value>x.gauge.min&&R.value<x.gauge.max){var L=v(x,M,R.value);E(x,M,S,D+"_"+T,R.value,L)}}var w=x.gauge.neutralValue;w!=null&&w>x.gauge.min&&w<x.gauge.max&&E(x,M,S,"Neutral"+D,w,v(x,M,w))};function E(x,M,S,D,T,R){P(S.cx+(M.thresholdLabelMargin+M.thresholdLabelFontSize/2+M.radius)*Math.cos(u(R)),S.cy+(M.thresholdLabelMargin+M.thresholdLabelFontSize/2+M.radius)*Math.sin(u(R)),"flotGaugeThresholdValue"+D,x.threshold.label.formatter?x.threshold.label.formatter(T):T,x.threshold.label,R)}function P(x,M,S,D,T,R){var L=G(o).find("#"+S),w=L.length;w||(L=G("<span></span>"),L.attr("id",S),L.attr("class","flot-temp-elem"),o.append(L)),L.css("position","absolute"),L.css("top",M+"px"),L.css("white-space","nowrap"),T.font.size&&L.css("font-size",T.font.size+"px"),T.font.family&&L.css("font-family",T.font.family),T.color&&L.css("color",T.color),T.background.color&&L.css("background-color",T.background.color),T.background.opacity&&L.css("opacity",T.background.opacity),L.text(D),L.css("left",x+"px"),L.css("left",parseInt(L.css("left"))-L.width()/2+"px"),!w&&R&&(L.css("top",parseInt(L.css("top"))-L.height()/2+"px"),L.css("transform","rotate("+(180*R+90)+"deg)"))}return g}();function e(f){return typeof Logger<"u"?new Logger(f):null}function t(f,o){return o%f}function n(f,o){return Math.floor(o/f)}function u(f){return f*Math.PI}function s(f,o,l,r,d,c,g,p,y,h){if(c!==g){var a=!1;f.save(),f.beginPath(),f.arc(o,l,r,c,g,a),f.lineTo(o+(r-d)*Math.cos(g),l+(r-d)*Math.sin(g)),f.arc(o,l,r-d,g,c,!a),f.closePath(),y&&(f.lineWidth=y),p&&(f.strokeStyle=p,f.stroke()),h&&(f.fillStyle=h,f.fill()),f.restore()}}function i(f){f.hooks.processOptions.push(function(o,l){var r=e(l.series.gauges.debug);l.series.gauges.show&&(l.grid.show=!1,l.legend.show=!1);var d=l.series.gauges.threshold.values;d.sort(function(c,g){return c.value<g.value?-1:c.value>g.value?1:0})}),f.hooks.draw.push(function(o,l){var r=o.getOptions(),d=r.series.gauges,c=e(d.debug);if(d.show){var g=o.getData();if(!(!g||!g.length)){var p=new O(o,l),y=p.calculateLayout();d.debug.layout,p.drawBackground(y);for(var h=0;h<g.length;h++){var a=g[h],v=G.extend({},d,a.gauges);a.gauges&&p.calculateAutoValues(v,y.cellWidth);var C=p.calculateCellLayout(v,y,h);p.drawCellBackground(v,C),v.debug.layout,v.label.show&&p.drawLable(v,y,C,h,a),p.drawGauge(v,y,C,a.label,a.data[0][1]),v.threshold.show&&p.drawThreshold(v,y,C),v.threshold.label.show&&p.drawThresholdValues(v,y,C,h),v.value.show&&p.drawValue(v,y,C,h,a)}}}})}var m={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(f,o){return f}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(f,o){return parseInt(o)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(f){return f}},values:[]}}}};G.plot.plugins.push({init:i,options:m,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(G){G.color={},G.color.make=function(e,t,n,u){var s={};return s.r=e||0,s.g=t||0,s.b=n||0,s.a=u??1,s.add=function(i,m){for(var f=0;f<i.length;++f)s[i.charAt(f)]+=m;return s.normalize()},s.scale=function(i,m){for(var f=0;f<i.length;++f)s[i.charAt(f)]*=m;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function i(m,f,o){return f<m?m:f>o?o:f}return s.r=i(0,parseInt(s.r),255),s.g=i(0,parseInt(s.g),255),s.b=i(0,parseInt(s.b),255),s.a=i(0,s.a,1),s},s.clone=function(){return G.color.make(s.r,s.b,s.g,s.a)},s.normalize()},G.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!G.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),G.color.parse(n)},G.color.parse=function(e){var t,n=G.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var u=G.trim(e).toLowerCase();return u=="transparent"?n(255,255,255,0):(t=O[u]||[0,0,0],n(t[0],t[1],t[2]))};var O={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(G){var O=Object.prototype.hasOwnProperty;G.fn.detach||(G.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(u,s){var i=s.children("."+u)[0];if(i==null&&(i=document.createElement("canvas"),i.className=u,G(i).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!i.getContext))if(window.G_vmlCanvasManager)i=window.G_vmlCanvasManager.initElement(i);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=i;var m=this.context=i.getContext("2d"),f=window.devicePixelRatio||1,o=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;this.pixelRatio=f/o,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(u,s){if(u<=0||s<=0)throw new Error("Invalid dimensions for plot, width = "+u+", height = "+s);var i=this.element,m=this.context,f=this.pixelRatio;this.width!=u&&(i.width=u*f,i.style.width=u+"px",this.width=u),this.height!=s&&(i.height=s*f,i.style.height=s+"px",this.height=s),m.restore(),m.save(),m.scale(f,f)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var u=this._textCache;for(var s in u)if(O.call(u,s)){var i=this.getTextLayer(s),m=u[s];i.hide();for(var f in m)if(O.call(m,f)){var o=m[f];for(var l in o)if(O.call(o,l)){for(var r=o[l].positions,d=0,c;c=r[d];d++)c.active?c.rendered||(i.append(c.element),c.rendered=!0):(r.splice(d--,1),c.rendered&&c.element.detach());r.length==0&&delete o[l]}}i.show()}},e.prototype.getTextLayer=function(u){var s=this.text[u];return s==null&&(this.textContainer==null&&(this.textContainer=G("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[u]=G("<div></div>").addClass(u).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},e.prototype.getTextInfo=function(u,s,i,m,f){var o,l,r,d;if(s=""+s,typeof i=="object"?o=i.style+" "+i.variant+" "+i.weight+" "+i.size+"px/"+i.lineHeight+"px "+i.family:o=i,l=this._textCache[u],l==null&&(l=this._textCache[u]={}),r=l[o],r==null&&(r=l[o]={}),d=r[s],d==null){var c=G("<div></div>").html(s).css({position:"absolute","max-width":f,top:-9999}).appendTo(this.getTextLayer(u));typeof i=="object"?c.css({font:o,color:i.color}):typeof i=="string"&&c.addClass(i),d=r[s]={element:c,positions:[]};var g=this._textSizeCache[s];g?(d.width=g.width,d.height=g.height):(d.width=c.outerWidth(!0),d.height=c.outerHeight(!0),this._textSizeCache[s]={width:d.width,height:d.height}),c.detach()}return d},e.prototype.addText=function(u,s,i,m,f,o,l,r,d){var c=this.getTextInfo(u,m,f,o,l),g=c.positions;r=="center"?s-=c.width/2:r=="right"&&(s-=c.width),d=="middle"?i-=c.height/2:d=="bottom"&&(i-=c.height);for(var p=0,y;y=g[p];p++)if(y.x==s&&y.y==i){y.active=!0;return}y={active:!0,rendered:!1,element:g.length?c.element.clone():c.element,x:s,y:i},g.push(y),y.element.css({top:Math.round(i),left:Math.round(s),"text-align":r})},e.prototype.removeText=function(u,s,i,m,f,o){if(m==null){var l=this._textCache[u];if(l!=null){for(var r in l)if(O.call(l,r)){var d=l[r];for(var c in d)if(O.call(d,c))for(var g=d[c].positions,p=0,y;y=g[p];p++)y.active=!1}}}else for(var g=this.getTextInfo(u,m,f,o).positions,p=0,y;y=g[p];p++)y.x==s&&y.y==i&&(y.active=!1)};function t(u,s,i,m){var f=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},l=null,r=null,d=null,c=null,g=null,p=[],y=[],h={left:0,right:0,top:0,bottom:0},a=0,v=0,C={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},E=this;E.setData=S,E.setupGrid=ee,E.draw=me,E.getPlaceholder=function(){return u},E.getCanvas=function(){return l.element},E.getPlotOffset=function(){return h},E.width=function(){return a},E.height=function(){return v},E.offset=function(){var oe=d.offset();return oe.left+=h.left,oe.top+=h.top,oe},E.getData=function(){return f},E.getAxes=function(){var oe={},Se;return G.each(p.concat(y),function(Re,ze){ze&&(oe[ze.direction+(ze.n!=1?ze.n:"")+"axis"]=ze)}),oe},E.getXAxes=function(){return p},E.getYAxes=function(){return y},E.c2p=L,E.p2c=w,E.getOptions=function(){return o},E.highlight=nt,E.unhighlight=_e,E.triggerRedrawOverlay=Ze,E.pointOffset=function(oe){return{left:parseInt(p[T(oe,"x")-1].p2c(+oe.x)+h.left,10),top:parseInt(y[T(oe,"y")-1].p2c(+oe.y)+h.top,10)}},E.shutdown=V,E.destroy=function(){V(),u.removeData("plot").empty(),f=[],o=null,l=null,r=null,d=null,c=null,g=null,p=[],y=[],C=null,de=[],E=null},E.resize=function(){var oe=u.width(),Se=u.height();l.resize(oe,Se),r.resize(oe,Se)},E.hooks=C,x(E),M(i),I(),S(s),ee(),me(),F();function P(oe,Se){Se=[E].concat(Se);for(var Re=0;Re<oe.length;++Re)oe[Re].apply(this,Se)}function x(){for(var oe={Canvas:e},Se=0;Se<m.length;++Se){var Re=m[Se];Re.init(E,oe),Re.options&&G.extend(!0,o,Re.options)}}function M(oe){G.extend(!0,o,oe),oe&&oe.colors&&(o.colors=oe.colors),o.xaxis.color==null&&(o.xaxis.color=G.color.parse(o.grid.color).scale("a",.22).toString()),o.yaxis.color==null&&(o.yaxis.color=G.color.parse(o.grid.color).scale("a",.22).toString()),o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color),o.yaxis.tickColor==null&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color),o.grid.borderColor==null&&(o.grid.borderColor=o.grid.color),o.grid.tickColor==null&&(o.grid.tickColor=G.color.parse(o.grid.color).scale("a",.22).toString());var Se,Re,ze,ve=u.css("font-size"),Te=ve?+ve.replace("px",""):13,he={style:u.css("font-style"),size:Math.round(.8*Te),variant:u.css("font-variant"),weight:u.css("font-weight"),family:u.css("font-family")};for(ze=o.xaxes.length||1,Se=0;Se<ze;++Se)Re=o.xaxes[Se],Re&&!Re.tickColor&&(Re.tickColor=Re.color),Re=G.extend(!0,{},o.xaxis,Re),o.xaxes[Se]=Re,Re.font&&(Re.font=G.extend({},he,Re.font),Re.font.color||(Re.font.color=Re.color),Re.font.lineHeight||(Re.font.lineHeight=Math.round(Re.font.size*1.15)));for(ze=o.yaxes.length||1,Se=0;Se<ze;++Se)Re=o.yaxes[Se],Re&&!Re.tickColor&&(Re.tickColor=Re.color),Re=G.extend(!0,{},o.yaxis,Re),o.yaxes[Se]=Re,Re.font&&(Re.font=G.extend({},he,Re.font),Re.font.color||(Re.font.color=Re.color),Re.font.lineHeight||(Re.font.lineHeight=Math.round(Re.font.size*1.15)));for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.noTicks),o.x2axis&&(o.xaxes[1]=G.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",o.x2axis.min==null&&(o.xaxes[1].min=null),o.x2axis.max==null&&(o.xaxes[1].max=null)),o.y2axis&&(o.yaxes[1]=G.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",o.y2axis.min==null&&(o.yaxes[1].min=null),o.y2axis.max==null&&(o.yaxes[1].max=null)),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&G.extend(!0,o.series.lines,o.lines),o.points&&G.extend(!0,o.series.points,o.points),o.bars&&G.extend(!0,o.series.bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),o.highlightColor!=null&&(o.series.highlightColor=o.highlightColor),Se=0;Se<o.xaxes.length;++Se)A(p,Se+1).options=o.xaxes[Se];for(Se=0;Se<o.yaxes.length;++Se)A(y,Se+1).options=o.yaxes[Se];for(var pe in C)o.hooks[pe]&&o.hooks[pe].length&&(C[pe]=C[pe].concat(o.hooks[pe]));P(C.processOptions,[o])}function S(oe){f=D(oe),N(),W()}function D(oe){for(var Se=[],Re=0;Re<oe.length;++Re){var ze=G.extend(!0,{},o.series);oe[Re].data!=null?(ze.data=oe[Re].data,delete oe[Re].data,G.extend(!0,ze,oe[Re]),oe[Re].data=ze.data):ze.data=oe[Re],Se.push(ze)}return Se}function T(oe,Se){var Re=oe[Se+"axis"];return typeof Re=="object"&&(Re=Re.n),typeof Re!="number"&&(Re=1),Re}function R(){return G.grep(p.concat(y),function(oe){return oe})}function L(oe){var Se={},Re,ze;for(Re=0;Re<p.length;++Re)ze=p[Re],ze&&(Se["x"+ze.n]=ze.c2p(oe.left));for(Re=0;Re<y.length;++Re)ze=y[Re],ze&&(Se["y"+ze.n]=ze.c2p(oe.top));return Se.x1!==void 0&&(Se.x=Se.x1),Se.y1!==void 0&&(Se.y=Se.y1),Se}function w(oe){var Se={},Re,ze,ve;for(Re=0;Re<p.length;++Re)if(ze=p[Re],ze&&ze.used&&(ve="x"+ze.n,oe[ve]==null&&ze.n==1&&(ve="x"),oe[ve]!=null)){Se.left=ze.p2c(oe[ve]);break}for(Re=0;Re<y.length;++Re)if(ze=y[Re],ze&&ze.used&&(ve="y"+ze.n,oe[ve]==null&&ze.n==1&&(ve="y"),oe[ve]!=null)){Se.top=ze.p2c(oe[ve]);break}return Se}function A(oe,Se){return oe[Se-1]||(oe[Se-1]={n:Se,direction:oe==p?"x":"y",options:G.extend(!0,{},oe==p?o.xaxis:o.yaxis)}),oe[Se-1]}function N(){var oe=f.length,Se=-1,Re;for(Re=0;Re<f.length;++Re){var ze=f[Re].color;ze!=null&&(oe--,typeof ze=="number"&&ze>Se&&(Se=ze))}oe<=Se&&(oe=Se+1);var ve,Te=[],he=o.colors,pe=he.length,ye=0;for(Re=0;Re<oe;Re++)ve=G.color.parse(he[Re%pe]||"#666"),Re%pe==0&&Re&&(ye>=0?ye<.5?ye=-ye-.2:ye=0:ye=-ye),Te[Re]=ve.scale("rgb",1+ye);var Oe=0,Ne;for(Re=0;Re<f.length;++Re){if(Ne=f[Re],Ne.color==null?(Ne.color=Te[Oe].toString(),++Oe):typeof Ne.color=="number"&&(Ne.color=Te[Ne.color].toString()),Ne.lines.show==null){var Me,Ae=!0;for(Me in Ne)if(Ne[Me]&&Ne[Me].show){Ae=!1;break}Ae&&(Ne.lines.show=!0)}Ne.lines.zero==null&&(Ne.lines.zero=!!Ne.lines.fill),Ne.xaxis=A(p,T(Ne,"x")),Ne.yaxis=A(y,T(Ne,"y"))}}function W(){var oe=Number.POSITIVE_INFINITY,Se=Number.NEGATIVE_INFINITY,Re=Number.MAX_VALUE,ze,ve,Te,he,pe,ye,Oe,Ne,Me,Ae,we,ke,st,Et,Pt,gt;function Ct(Zn,Bn,Sn){Bn<Zn.datamin&&Bn!=-Re&&(Zn.datamin=Bn),Sn>Zn.datamax&&Sn!=Re&&(Zn.datamax=Sn)}for(G.each(R(),function(Zn,Bn){Bn.datamin=oe,Bn.datamax=Se,Bn.used=!1}),ze=0;ze<f.length;++ze)ye=f[ze],ye.datapoints={points:[]},P(C.processRawData,[ye,ye.data,ye.datapoints]);for(ze=0;ze<f.length;++ze){if(ye=f[ze],Pt=ye.data,gt=ye.datapoints.format,!gt){if(gt=[],gt.push({x:!0,number:!0,required:!0}),gt.push({y:!0,number:!0,required:!0}),ye.stack||ye.bars.show||ye.lines.show&&ye.lines.fill){var Ot=!!(ye.bars.show&&ye.bars.zero||ye.lines.show&&ye.lines.zero);gt.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:Ot}),ye.bars.horizontal&&(delete gt[gt.length-1].y,gt[gt.length-1].x=!0)}ye.datapoints.format=gt}if(ye.datapoints.pointsize==null){ye.datapoints.pointsize=gt.length,Ne=ye.datapoints.pointsize,Oe=ye.datapoints.points;var Ft=ye.lines.show&&ye.lines.steps;for(ye.xaxis.used=ye.yaxis.used=!0,ve=Te=0;ve<Pt.length;++ve,Te+=Ne){Et=Pt[ve];var jt=Et==null;if(!jt)for(he=0;he<Ne;++he)ke=Et[he],st=gt[he],st&&(st.number&&ke!=null&&(ke=+ke,isNaN(ke)?ke=null:ke==1/0?ke=Re:ke==-1/0&&(ke=-Re)),ke==null&&(st.required&&(jt=!0),st.defaultValue!=null&&(ke=st.defaultValue))),Oe[Te+he]=ke;if(jt)for(he=0;he<Ne;++he)ke=Oe[Te+he],ke!=null&&(st=gt[he],st.autoscale!==!1&&(st.x&&Ct(ye.xaxis,ke,ke),st.y&&Ct(ye.yaxis,ke,ke))),Oe[Te+he]=null;if(Ft&&Te>0&&(!jt||Oe[Te-Ne]!=null)){for(he=0;he<Ne;++he)Oe[Te+Ne+he]=Oe[Te+he];Oe[Te+1]=Oe[Te-Ne+1]||0,jt&&(Oe[Te]=Et[0]),Te+=Ne}}}}for(ze=0;ze<f.length;++ze){if(ye=f[ze],Oe=ye.datapoints.points,Ne=ye.datapoints.pointsize,ye.transform==="negative-Y")for(ve=0;ve<Oe.length;ve+=Ne)Oe[ve]!=null&&(ke=Oe[ve+1],Oe[ve+1]=-ke);P(C.processDatapoints,[ye,ye.datapoints])}for(ze=0;ze<f.length;++ze){ye=f[ze],Oe=ye.datapoints.points,Ne=ye.datapoints.pointsize,gt=ye.datapoints.format;var En=oe,xn=oe,Cn=Se,bn=Se;for(ve=0;ve<Oe.length;ve+=Ne)if(Oe[ve]!=null)for(he=0;he<Ne;++he)ke=Oe[ve+he],st=gt[he],!(!st||st.autoscale===!1||ke==Re||ke==-Re)&&(st.x&&(ke<En&&(En=ke),ke>Cn&&(Cn=ke)),st.y&&(ke<xn&&(xn=ke),ke>bn&&(bn=ke)));if(ye.bars.show){var Tn;switch(ye.bars.align){case"left":Tn=0;break;case"right":Tn=-ye.bars.barWidth;break;default:Tn=-ye.bars.barWidth/2}ye.bars.horizontal?(xn+=Tn,bn+=Tn+ye.bars.barWidth):(En+=Tn,Cn+=Tn+ye.bars.barWidth)}Ct(ye.xaxis,En,Cn),Ct(ye.yaxis,xn,bn)}G.each(R(),function(Zn,Bn){Bn.datamin==oe&&(Bn.datamin=null),Bn.datamax==Se&&(Bn.datamax=null)})}function I(){u.find(".flot-temp-elem").remove(),u.css("position")=="static"&&u.css("position","relative"),l=new e("flot-base",u),r=new e("flot-overlay",u),c=l.context,g=r.context,d=G(r.element).unbind();var oe=u.data("plot");oe&&(oe.shutdown(),r.clear()),u.data("plot",E)}function F(){o.grid.hoverable&&(d.mousemove($e),d.bind("mouseleave",We),G(document).bind("touchend",qe)),o.grid.clickable&&d.click(Ke),P(C.bindEvents,[d])}function V(){Be&&clearTimeout(Be),d.unbind("mousemove",$e),d.unbind("mouseleave",We),d.unbind("click",Ke),G(document).unbind("touchend",qe),P(C.shutdown,[d])}function b(oe){function Se(he){return he}var Re,ze,ve=oe.options.transform||Se,Te=oe.options.inverseTransform;oe.direction=="x"?(Re=oe.scale=a/Math.abs(ve(oe.max)-ve(oe.min)),ze=Math.min(ve(oe.max),ve(oe.min))):(Re=oe.scale=v/Math.abs(ve(oe.max)-ve(oe.min)),Re=-Re,ze=Math.max(ve(oe.max),ve(oe.min))),ve==Se?oe.p2c=function(he){return(he-ze)*Re}:oe.p2c=function(he){return(ve(he)-ze)*Re},Te?oe.c2p=function(he){return Te(ze+he/Re)}:oe.c2p=function(he){return ze+he/Re}}function X(oe){for(var Se=oe.options,Re=oe.ticks||[],ze=Se.labelWidth||0,ve=Se.labelHeight||0,Te=ze||(oe.direction=="x"?Math.floor(l.width/(Re.length||1)):null),he=oe.direction+"Axis "+oe.direction+oe.n+"Axis",pe="flot-"+oe.direction+"-axis flot-"+oe.direction+oe.n+"-axis "+he,ye=Se.font||"flot-tick-label tickLabel",Oe=0;Oe<Re.length;++Oe){var Ne=Re[Oe];if(Ne.label){var Me=l.getTextInfo(pe,Ne.label,ye,null,Te);ze=Math.max(ze,Me.width+1),ve=Math.max(ve,Me.height)}}oe.labelWidth=Se.labelWidth||ze,oe.labelHeight=Se.labelHeight||ve}function k(oe){var Se=oe.labelWidth,Re=oe.labelHeight,ze=oe.options.position,ve=oe.direction==="x",Te=oe.options.tickLength,he=o.grid.axisMargin,pe=o.grid.labelMargin,ye=o.grid.eventSectionHeight,Oe=!0,Ne=!0,Me=!0,Ae=!1;G.each(ve?p:y,function(we,ke){ke&&(ke.show||ke.reserveSpace)&&(ke===oe?Ae=!0:ke.options.position===ze&&(Ae?Ne=!1:Oe=!1),Ae||(Me=!1))}),Ne&&(he=0),Te==null&&(Te=Me?"full":5),isNaN(+Te)||(pe+=+Te),ve?(Re+=pe,Re+=ye,ze=="bottom"?(h.bottom+=Re+he,oe.box={top:l.height-h.bottom,height:Re}):(oe.box={top:h.top+he,height:Re},h.top+=Re+he)):(Se+=pe,ze=="left"?(oe.box={left:h.left+he,width:Se},h.left+=Se+he):(h.right+=Se+he,oe.box={left:l.width-h.right,width:Se})),oe.position=ze,oe.tickLength=Te,oe.box.padding=pe,oe.box.eventSectionPadding=ye,oe.innermost=Oe}function H(oe){oe.direction=="x"?(oe.box.left=h.left-oe.labelWidth/2,oe.box.width=l.width-h.left-h.right+oe.labelWidth):(oe.box.top=h.top-oe.labelHeight/2,oe.box.height=l.height-h.bottom-h.top+oe.labelHeight)}function Y(){var oe=o.grid.minBorderMargin,Se,Re;if(oe==null)for(oe=0,Re=0;Re<f.length;++Re)oe=Math.max(oe,2*(f[Re].points.radius+f[Re].points.lineWidth/2));var ze={left:oe,right:oe,top:oe,bottom:oe};G.each(R(),function(ve,Te){Te.reserveSpace&&Te.ticks&&Te.ticks.length&&(Te.direction==="x"?(ze.left=Math.max(ze.left,Te.labelWidth/2),ze.right=Math.max(ze.right,Te.labelWidth/2)):(ze.bottom=Math.max(ze.bottom,Te.labelHeight/2),ze.top=Math.max(ze.top,Te.labelHeight/2)))}),h.left=Math.ceil(Math.max(ze.left,h.left)),h.right=Math.ceil(Math.max(ze.right,h.right)),h.top=Math.ceil(Math.max(ze.top,h.top)),h.bottom=Math.ceil(Math.max(ze.bottom,h.bottom))}function ee(){var oe,Se=R(),Re=o.grid.show;for(var ze in h){var ve=o.grid.margin||0;h[ze]=typeof ve=="number"?ve:ve[ze]||0}P(C.processOffset,[h]);for(var ze in h)typeof o.grid.borderWidth=="object"?h[ze]+=Re?o.grid.borderWidth[ze]:0:h[ze]+=Re?o.grid.borderWidth:0;if(G.each(Se,function(pe,ye){var Oe=ye.options;ye.show=Oe.show==null?ye.used:Oe.show,ye.reserveSpace=Oe.reserveSpace==null?ye.show:Oe.reserveSpace,ue(ye)}),P(C.processRange,[]),Re){for(var Te=G.grep(Se,function(pe){return pe.show||pe.reserveSpace}),he=!1,oe=0;oe<2&&(G.each(Te,function(ye,Oe){ge(Oe),De(Oe),he=fe(Oe,Oe.ticks)||he,X(Oe)}),he&&C.processRange.length>0);oe++)P(C.processRange,[]),he=!1;for(oe=Te.length-1;oe>=0;--oe)k(Te[oe]);Y(),G.each(Te,function(pe,ye){H(ye)})}a=l.width-h.left-h.right,v=l.height-h.bottom-h.top,G.each(Se,function(pe,ye){b(ye)}),Re&&Ee(),Ye()}function ue(oe){var Se=oe.options,Re=+(Se.min!=null?Se.min:oe.datamin),ze=+(Se.max!=null?Se.max:oe.datamax),ve=ze-Re;if(ve==0){var Te=.25,he=Math.abs(ze==0?1:ze*Te);Se.min==null&&(Re-=he),(Se.max==null||Se.min!=null)&&(ze+=he)}else{var pe=Se.autoscaleMargin;pe!=null&&(Se.min==null&&(Re-=ve*pe,Re<0&&oe.datamin!=null&&oe.datamin>=0&&(Re=0)),Se.max==null&&(ze+=ve*pe,ze>0&&oe.datamax!=null&&oe.datamax<=0&&(ze=0)))}oe.min=Re,oe.max=ze}function q(oe){if(oe=Math.abs(String(oe).replace(".","")),oe==0)return 0;for(;oe!=0&&oe%10==0;)oe/=10;return Math.floor(Math.log(oe)/Math.LN10)+1}function ge(oe){var Se=oe.options,Re;typeof Se.ticks=="number"&&Se.ticks>0?Re=Se.ticks:Re=.3*Math.sqrt(oe.direction=="x"?l.width:l.height);var ze=(oe.max-oe.min)/Re,ve=-Math.floor(Math.log(ze)/Math.LN10),Te=Se.tickDecimals;Te!=null&&ve>Te&&(ve=Te);var he=Math.pow(10,-ve),pe=ze/he,ye;if(pe<1.5?ye=1:pe<3?(ye=2,pe>2.25&&(Te==null||ve+1<=Te)&&(ye=2.5,++ve)):pe<7.5?ye=5:ye=10,ye*=he,Se.minTickSize!=null&&ye<Se.minTickSize&&(ye=Se.minTickSize),oe.delta=ze,oe.tickDecimals=Math.max(0,Te??ve),oe.tickSize=Se.tickSize||ye,Se.mode=="time"&&!oe.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(oe.tickGenerator||(oe.tickGenerator=function(we){var ke=[],st=n(we.min,we.tickSize),Et=0,Pt=Number.NaN,gt;do gt=Pt,Pt=st+Et*we.tickSize,ke.push(Pt),++Et;while(Pt<we.max&&Pt!=gt);return ke},oe.tickFormatter=function(we,ke){var st=ke.tickDecimals?Math.pow(10,ke.tickDecimals):1,Et=""+Math.round(we*st)/st;if(ke.tickDecimals!=null){var Pt=Et.indexOf("."),gt=Pt==-1?0:Et.length-Pt-1;if(gt<ke.tickDecimals)return(gt?Et:Et+".")+(""+st).substr(1,ke.tickDecimals-gt)}return Et}),G.isFunction(Se.tickFormatter)&&(oe.tickFormatter=function(we,ke){return""+Se.tickFormatter(we,ke)}),Se.alignTicksWithAxis!=null){var Oe=(oe.direction=="x"?p:y)[Se.alignTicksWithAxis-1];if(Oe&&Oe.used&&Oe!=oe){var Ne=oe.tickGenerator(oe);if(Ne.length>0&&(Se.min==null&&(oe.min=Math.min(oe.min,Ne[0])),Se.max==null&&Ne.length>1&&(oe.max=Math.max(oe.max,Ne[Ne.length-1]))),oe.tickGenerator=function(we){var ke=[],st,Et;for(Et=0;Et<Oe.ticks.length;++Et)st=(Oe.ticks[Et].v-Oe.min)/(Oe.max-Oe.min),st=we.min+st*(we.max-we.min),ke.push(st);return ke},!oe.mode&&Se.tickDecimals==null){var Me=Math.max(0,-Math.floor(Math.log(oe.delta)/Math.LN10)+1),Ae=oe.tickGenerator(oe);Ae.length>1&&/\..*0$/.test((Ae[1]-Ae[0]).toFixed(Me))||(oe.tickDecimals=Me)}}}}function De(oe){var Se=oe.options.ticks,Re=[];Se==null||typeof Se=="number"&&Se>0?Re=oe.tickGenerator(oe):Se&&(G.isFunction(Se)?Re=Se(oe):Re=Se);var ze,ve;for(oe.ticks=[],ze=0;ze<Re.length;++ze){var Te=null,he=Re[ze];typeof he=="object"?(ve=+he[0],he.length>1&&(Te=he[1])):ve=+he,Te==null&&(Te=oe.tickFormatter(ve,oe)),isNaN(ve)||oe.ticks.push({v:ve,label:Te})}}function fe(oe,Se){var Re=!1;return oe.options.autoscaleMargin&&Se.length>0&&(oe.options.min==null&&(oe.min=Math.min(oe.min,Se[0].v),Re=!0),oe.options.max==null&&Se.length>1&&(oe.max=Math.max(oe.max,Se[Se.length-1].v),Re=!0)),Re}function me(){l.clear(),P(C.drawBackground,[c]);var oe=o.grid;oe.show&&oe.backgroundColor&&ie(),oe.show&&!oe.aboveData&&re();for(var Se=0;Se<f.length;++Se)P(C.drawSeries,[c,f[Se]]),te(f[Se]);P(C.draw,[c]),oe.show&&oe.aboveData&&re(),l.render(),Ze()}function ce(oe,Se){for(var Re,ze,ve,Te,he=R(),pe=0;pe<he.length;++pe)if(Re=he[pe],Re.direction==Se&&(Te=Se+Re.n+"axis",!oe[Te]&&Re.n==1&&(Te=Se+"axis"),oe[Te])){ze=oe[Te].from,ve=oe[Te].to;break}if(oe[Te]||(Re=Se=="x"?p[0]:y[0],ze=oe[Se+"1"],ve=oe[Se+"2"]),ze!=null&&ve!=null&&ze>ve){var ye=ze;ze=ve,ve=ye}return{from:ze,to:ve,axis:Re}}function ie(){c.save(),c.translate(h.left,h.top),c.fillStyle=dt(o.grid.backgroundColor,v,0,"rgba(255, 255, 255, 0)"),c.fillRect(0,0,a,v),c.restore()}function re(){var oe,Se,Re,ze;c.save(),c.translate(h.left,h.top);var ve=o.grid.markings;if(ve)for(G.isFunction(ve)&&(Se=E.getAxes(),Se.xmin=Se.xaxis.min,Se.xmax=Se.xaxis.max,Se.ymin=Se.yaxis.min,Se.ymax=Se.yaxis.max,ve=ve(Se)),oe=0;oe<ve.length;++oe){var Te=ve[oe],he=ce(Te,"x"),pe=ce(Te,"y");if(he.from==null&&(he.from=he.axis.min),he.to==null&&(he.to=he.axis.max),pe.from==null&&(pe.from=pe.axis.min),pe.to==null&&(pe.to=pe.axis.max),!(he.to<he.axis.min||he.from>he.axis.max||pe.to<pe.axis.min||pe.from>pe.axis.max)){he.from=Math.max(he.from,he.axis.min),he.to=Math.min(he.to,he.axis.max),pe.from=Math.max(pe.from,pe.axis.min),pe.to=Math.min(pe.to,pe.axis.max);var ye=he.from===he.to,Oe=pe.from===pe.to;if(!(ye&&Oe))if(he.from=Math.floor(he.axis.p2c(he.from)),he.to=Math.floor(he.axis.p2c(he.to)),pe.from=Math.floor(pe.axis.p2c(pe.from)),pe.to=Math.floor(pe.axis.p2c(pe.to)),ye||Oe){var Ne=Te.lineWidth||o.grid.markingsLineWidth,Me=Ne%2?.5:0;c.beginPath(),c.strokeStyle=Te.color||o.grid.markingsColor,c.lineWidth=Ne,ye?(c.moveTo(he.to+Me,pe.from),c.lineTo(he.to+Me,pe.to)):(c.moveTo(he.from,pe.to+Me),c.lineTo(he.to,pe.to+Me)),c.stroke()}else c.fillStyle=Te.color||o.grid.markingsColor,c.fillRect(he.from,pe.to,he.to-he.from,pe.from-pe.to)}}Se=R(),Re=o.grid.borderWidth;for(var Ae=0;Ae<Se.length;++Ae){var we=Se[Ae],ke=we.box,st=we.tickLength,Et,Pt,gt,Ct;if(!(!we.show||we.ticks.length==0)){for(c.lineWidth=1,we.direction=="x"?(Et=0,st=="full"?Pt=we.position=="top"?0:v:Pt=ke.top-h.top+(we.position=="top"?ke.height:0)):(Pt=0,st=="full"?Et=we.position=="left"?0:a:Et=ke.left-h.left+(we.position=="left"?ke.width:0)),we.innermost||(c.strokeStyle=we.options.color,c.beginPath(),gt=Ct=0,we.direction=="x"?gt=a+1:Ct=v+1,c.lineWidth==1&&(we.direction=="x"?Pt=Math.floor(Pt)+.5:Et=Math.floor(Et)+.5),c.moveTo(Et,Pt),c.lineTo(Et+gt,Pt+Ct),c.stroke()),c.strokeStyle=we.options.tickColor,c.beginPath(),oe=0;oe<we.ticks.length;++oe){var Ot=we.ticks[oe].v;gt=Ct=0,!(isNaN(Ot)||Ot<we.min||Ot>we.max||st=="full"&&(typeof Re=="object"&&Re[we.position]>0||Re>0)&&(Ot==we.min||Ot==we.max))&&(we.direction=="x"?(Et=we.p2c(Ot),Ct=st=="full"?-v:st,we.position=="top"&&(Ct=-Ct)):(Pt=we.p2c(Ot),gt=st=="full"?-a:st,we.position=="left"&&(gt=-gt)),c.lineWidth==1&&(we.direction=="x"?Et=Math.floor(Et)+.5:Pt=Math.floor(Pt)+.5),c.moveTo(Et,Pt),c.lineTo(Et+gt,Pt+Ct))}c.stroke()}}Re&&(ze=o.grid.borderColor,typeof Re=="object"||typeof ze=="object"?(typeof Re!="object"&&(Re={top:Re,right:Re,bottom:Re,left:Re}),typeof ze!="object"&&(ze={top:ze,right:ze,bottom:ze,left:ze}),Re.top>0&&(c.strokeStyle=ze.top,c.lineWidth=Re.top,c.beginPath(),c.moveTo(0-Re.left,0-Re.top/2),c.lineTo(a,0-Re.top/2),c.stroke()),Re.right>0&&(c.strokeStyle=ze.right,c.lineWidth=Re.right,c.beginPath(),c.moveTo(a+Re.right/2,0-Re.top),c.lineTo(a+Re.right/2,v),c.stroke()),Re.bottom>0&&(c.strokeStyle=ze.bottom,c.lineWidth=Re.bottom,c.beginPath(),c.moveTo(a+Re.right,v+Re.bottom/2),c.lineTo(0,v+Re.bottom/2),c.stroke()),Re.left>0&&(c.strokeStyle=ze.left,c.lineWidth=Re.left,c.beginPath(),c.moveTo(0-Re.left/2,v+Re.bottom),c.lineTo(0-Re.left/2,0),c.stroke())):(c.lineWidth=Re,c.strokeStyle=o.grid.borderColor,c.strokeRect(-Re/2,-Re/2,a+Re,v+Re))),c.restore()}function Ee(){G.each(R(),function(oe,Se){var Re=Se.box,ze=Se.direction+"Axis "+Se.direction+Se.n+"Axis",ve="flot-"+Se.direction+"-axis flot-"+Se.direction+Se.n+"-axis "+ze,Te=Se.options.font||"flot-tick-label tickLabel",he,pe,ye,Oe,Ne;if(l.removeText(ve),!(!Se.show||Se.ticks.length==0))for(var Me=0;Me<Se.ticks.length;++Me)he=Se.ticks[Me],!(!he.label||he.v<Se.min||he.v>Se.max)&&(Se.direction=="x"?(Oe="center",pe=h.left+Se.p2c(he.v),Se.position=="bottom"?ye=Re.top+Re.padding+Re.eventSectionPadding:(ye=Re.top+Re.height-Re.padding,Ne="bottom")):(Ne="middle",ye=h.top+Se.p2c(he.v),Se.position=="left"?(pe=Re.left+Re.width-Re.padding,Oe="right"):pe=Re.left+Re.padding),l.addText(ve,pe,ye,he.label,Te,null,null,Oe,Ne))})}function J(oe){for(var Se=[],Re=null,ze=null,ve=oe.datapoints,Te=[],he=0;he<ve.pointsize-2;he++)Te.push(0);for(var pe=0;pe<ve.points.length;pe+=ve.pointsize){var ye=ve.points[pe],Oe=ve.points[pe+1];pe===ve.points.length-ve.pointsize?ze=null:ze=ve.points[pe+ve.pointsize],ye!==null&&Oe!==null&&Re===null&&ze===null&&(Se.push(ye),Se.push(Oe),Se.push.apply(Se,Te)),Re=ye}var Ne=ve.points;ve.points=Se,oe.points.radius=oe.lines.lineWidth/2,j(oe),ve.points=Ne}function te(oe){oe.lines.show&&(ne(oe),!oe.points.show&&!oe.bars.show&&J(oe)),oe.bars.show&&Le(oe),oe.points.show&&j(oe)}function ne(oe){function Se(pe,ye,Oe,Ne,Me){var Ae=pe.points,we=pe.pointsize,ke=null,st=null;c.beginPath();for(var Et=we;Et<Ae.length;Et+=we){var Pt=Ae[Et-we],gt=Ae[Et-we+1],Ct=Ae[Et],Ot=Ae[Et+1];if(!(Pt==null||Ct==null)){if(gt<=Ot&&gt<Me.min){if(Ot<Me.min)continue;Pt=(Me.min-gt)/(Ot-gt)*(Ct-Pt)+Pt,gt=Me.min}else if(Ot<=gt&&Ot<Me.min){if(gt<Me.min)continue;Ct=(Me.min-gt)/(Ot-gt)*(Ct-Pt)+Pt,Ot=Me.min}if(gt>=Ot&&gt>Me.max){if(Ot>Me.max)continue;Pt=(Me.max-gt)/(Ot-gt)*(Ct-Pt)+Pt,gt=Me.max}else if(Ot>=gt&&Ot>Me.max){if(gt>Me.max)continue;Ct=(Me.max-gt)/(Ot-gt)*(Ct-Pt)+Pt,Ot=Me.max}if(Pt<=Ct&&Pt<Ne.min){if(Ct<Ne.min)continue;gt=(Ne.min-Pt)/(Ct-Pt)*(Ot-gt)+gt,Pt=Ne.min}else if(Ct<=Pt&&Ct<Ne.min){if(Pt<Ne.min)continue;Ot=(Ne.min-Pt)/(Ct-Pt)*(Ot-gt)+gt,Ct=Ne.min}if(Pt>=Ct&&Pt>Ne.max){if(Ct>Ne.max)continue;gt=(Ne.max-Pt)/(Ct-Pt)*(Ot-gt)+gt,Pt=Ne.max}else if(Ct>=Pt&&Ct>Ne.max){if(Pt>Ne.max)continue;Ot=(Ne.max-Pt)/(Ct-Pt)*(Ot-gt)+gt,Ct=Ne.max}(Pt!=ke||gt!=st)&&c.moveTo(Ne.p2c(Pt)+ye,Me.p2c(gt)+Oe),ke=Ct,st=Ot,c.lineTo(Ne.p2c(Ct)+ye,Me.p2c(Ot)+Oe)}}c.stroke()}function Re(pe,ye,Oe){for(var Ne=pe.points,Me=pe.pointsize,Ae=Math.min(Math.max(0,Oe.min),Oe.max),we=0,ke,st=!1,Et=1,Pt=0,gt=0;!(Me>0&&we>Ne.length+Me);){we+=Me;var Ct=Ne[we-Me],Ot=Ne[we-Me+Et],Ft=Ne[we],jt=Ne[we+Et];if(st){if(Me>0&&Ct!=null&&Ft==null){gt=we,Me=-Me,Et=2;continue}if(Me<0&&we==Pt+Me){c.fill(),st=!1,Me=-Me,Et=1,we=Pt=gt+Me;continue}}if(!(Ct==null||Ft==null)){if(Ct<=Ft&&Ct<ye.min){if(Ft<ye.min)continue;Ot=(ye.min-Ct)/(Ft-Ct)*(jt-Ot)+Ot,Ct=ye.min}else if(Ft<=Ct&&Ft<ye.min){if(Ct<ye.min)continue;jt=(ye.min-Ct)/(Ft-Ct)*(jt-Ot)+Ot,Ft=ye.min}if(Ct>=Ft&&Ct>ye.max){if(Ft>ye.max)continue;Ot=(ye.max-Ct)/(Ft-Ct)*(jt-Ot)+Ot,Ct=ye.max}else if(Ft>=Ct&&Ft>ye.max){if(Ct>ye.max)continue;jt=(ye.max-Ct)/(Ft-Ct)*(jt-Ot)+Ot,Ft=ye.max}if(st||(c.beginPath(),c.moveTo(ye.p2c(Ct),Oe.p2c(Ae)),st=!0),Ot>=Oe.max&&jt>=Oe.max){c.lineTo(ye.p2c(Ct),Oe.p2c(Oe.max)),c.lineTo(ye.p2c(Ft),Oe.p2c(Oe.max));continue}else if(Ot<=Oe.min&&jt<=Oe.min){c.lineTo(ye.p2c(Ct),Oe.p2c(Oe.min)),c.lineTo(ye.p2c(Ft),Oe.p2c(Oe.min));continue}var En=Ct,xn=Ft;Ot<=jt&&Ot<Oe.min&&jt>=Oe.min?(Ct=(Oe.min-Ot)/(jt-Ot)*(Ft-Ct)+Ct,Ot=Oe.min):jt<=Ot&&jt<Oe.min&&Ot>=Oe.min&&(Ft=(Oe.min-Ot)/(jt-Ot)*(Ft-Ct)+Ct,jt=Oe.min),Ot>=jt&&Ot>Oe.max&&jt<=Oe.max?(Ct=(Oe.max-Ot)/(jt-Ot)*(Ft-Ct)+Ct,Ot=Oe.max):jt>=Ot&&jt>Oe.max&&Ot<=Oe.max&&(Ft=(Oe.max-Ot)/(jt-Ot)*(Ft-Ct)+Ct,jt=Oe.max),Ct!=En&&c.lineTo(ye.p2c(En),Oe.p2c(Ot)),c.lineTo(ye.p2c(Ct),Oe.p2c(Ot)),c.lineTo(ye.p2c(Ft),Oe.p2c(jt)),Ft!=xn&&(c.lineTo(ye.p2c(Ft),Oe.p2c(jt)),c.lineTo(ye.p2c(xn),Oe.p2c(jt)))}}}c.save(),c.translate(h.left,h.top),c.lineJoin="round";var ze=oe.lines.lineWidth,ve=oe.shadowSize;if(ze>0&&ve>0){c.lineWidth=ve,c.strokeStyle="rgba(0,0,0,0.1)";var Te=Math.PI/18;Se(oe.datapoints,Math.sin(Te)*(ze/2+ve/2),Math.cos(Te)*(ze/2+ve/2),oe.xaxis,oe.yaxis),c.lineWidth=ve/2,Se(oe.datapoints,Math.sin(Te)*(ze/2+ve/4),Math.cos(Te)*(ze/2+ve/4),oe.xaxis,oe.yaxis)}c.lineWidth=ze,c.strokeStyle=oe.color;var he=Qe(oe.lines,oe.color,0,v);he&&(c.fillStyle=he,Re(oe.datapoints,oe.xaxis,oe.yaxis)),ze>0&&Se(oe.datapoints,0,0,oe.xaxis,oe.yaxis),c.restore()}function j(oe){function Se(pe,ye,Oe,Ne,Me,Ae,we,ke){for(var st=pe.points,Et=pe.pointsize,Pt=0;Pt<st.length;Pt+=Et){var gt=st[Pt],Ct=st[Pt+1];gt==null||gt<Ae.min||gt>Ae.max||Ct<we.min||Ct>we.max||(c.beginPath(),gt=Ae.p2c(gt),Ct=we.p2c(Ct)+Ne,ke=="circle"?c.arc(gt,Ct,ye,0,Me?Math.PI:Math.PI*2,!1):ke(c,gt,Ct,ye,Me),c.closePath(),Oe&&(c.fillStyle=Oe,c.fill()),c.stroke())}}c.save(),c.translate(h.left,h.top);var Re=oe.points.lineWidth,ze=oe.shadowSize,ve=oe.points.radius,Te=oe.points.symbol;if(Re==0&&(Re=1e-4),Re>0&&ze>0){var he=ze/2;c.lineWidth=he,c.strokeStyle="rgba(0,0,0,0.1)",Se(oe.datapoints,ve,null,he+he/2,!0,oe.xaxis,oe.yaxis,Te),c.strokeStyle="rgba(0,0,0,0.2)",Se(oe.datapoints,ve,null,he/2,!0,oe.xaxis,oe.yaxis,Te)}c.lineWidth=Re,c.strokeStyle=oe.color,Se(oe.datapoints,ve,Qe(oe.points,oe.color),0,!1,oe.xaxis,oe.yaxis,Te),c.restore()}function be(oe,Se,Re,ze,ve,Te,he,pe,ye,Oe,Ne){var Me,Ae,we,ke,st,Et,Pt,gt,Ct;Oe?(gt=Et=Pt=!0,st=!1,Me=Re,Ae=oe,ke=Se+ze,we=Se+ve,Ae<Me&&(Ct=Ae,Ae=Me,Me=Ct,st=!0,Et=!1)):(st=Et=Pt=!0,gt=!1,Me=oe+ze,Ae=oe+ve,we=Re,ke=Se,ke<we&&(Ct=ke,ke=we,we=Ct,gt=!0,Pt=!1)),!(Ae<he.min||Me>he.max||ke<pe.min||we>pe.max)&&(Me<he.min&&(Me=he.min,st=!1),Ae>he.max&&(Ae=he.max,Et=!1),we<pe.min&&(we=pe.min,gt=!1),ke>pe.max&&(ke=pe.max,Pt=!1),Me=he.p2c(Me),we=pe.p2c(we),Ae=he.p2c(Ae),ke=pe.p2c(ke),Te&&(ye.fillStyle=Te(we,ke),ye.fillRect(Me,ke,Ae-Me,we-ke)),Ne>0&&(st||Et||Pt||gt)&&(ye.beginPath(),ye.moveTo(Me,we),st?ye.lineTo(Me,ke):ye.moveTo(Me,ke),Pt?ye.lineTo(Ae,ke):ye.moveTo(Ae,ke),Et?ye.lineTo(Ae,we):ye.moveTo(Ae,we),gt?ye.lineTo(Me,we):ye.moveTo(Me,we),ye.stroke()))}function Le(oe){function Se(ve,Te,he,pe,ye,Oe){for(var Ne=ve.points,Me=ve.pointsize,Ae=0;Ae<Ne.length;Ae+=Me)Ne[Ae]!=null&&be(Ne[Ae],Ne[Ae+1],Ne[Ae+2],Te,he,pe,ye,Oe,c,oe.bars.horizontal,oe.bars.lineWidth)}c.save(),c.translate(h.left,h.top),c.lineWidth=oe.bars.lineWidth,c.strokeStyle=oe.color;var Re;switch(oe.bars.align){case"left":Re=0;break;case"right":Re=-oe.bars.barWidth;break;default:Re=-oe.bars.barWidth/2}var ze=oe.bars.fill?function(ve,Te){return Qe(oe.bars,oe.color,ve,Te)}:null;Se(oe.datapoints,Re,Re+oe.bars.barWidth,ze,oe.xaxis,oe.yaxis),c.restore()}function Qe(oe,Se,Re,ze){var ve=oe.fill;if(!ve)return null;if(oe.fillColor)return dt(oe.fillColor,Re,ze,Se);var Te=G.color.parse(Se);return Te.a=typeof ve=="number"?ve:.4,Te.normalize(),Te.toString()}function Ye(){if(o.legend.container!=null?G.find(o.legend.container).html(""):u.find(".legend").remove(),!!o.legend.show){for(var oe=[],Se=[],Re=!1,ze=o.legend.labelFormatter,ve,Te,he=0;he<f.length;++he)ve=f[he],ve.label&&(Te=ze?ze(ve.label,ve):ve.label,Te&&Se.push({label:Te,color:ve.color}));if(o.legend.sorted)if(G.isFunction(o.legend.sorted))Se.sort(o.legend.sorted);else if(o.legend.sorted=="reverse")Se.reverse();else{var pe=o.legend.sorted!="descending";Se.sort(function(Et,Pt){return Et.label==Pt.label?0:Et.label<Pt.label!=pe?1:-1})}for(var he=0;he<Se.length;++he){var ye=Se[he];he%o.legend.noColumns==0&&(Re&&oe.push("</tr>"),oe.push("<tr>"),Re=!0),oe.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+ye.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+ye.label+"</td>")}if(Re&&oe.push("</tr>"),oe.length!=0){var Oe='<table style="font-size:smaller;color:'+o.grid.color+'">'+oe.join("")+"</table>";if(o.legend.container!=null)G(o.legend.container).html(Oe);else{var Ne="",Me=o.legend.position,Ae=o.legend.margin;Ae[0]==null&&(Ae=[Ae,Ae]),Me.charAt(0)=="n"?Ne+="top:"+(Ae[1]+h.top)+"px;":Me.charAt(0)=="s"&&(Ne+="bottom:"+(Ae[1]+h.bottom)+"px;"),Me.charAt(1)=="e"?Ne+="right:"+(Ae[0]+h.right)+"px;":Me.charAt(1)=="w"&&(Ne+="left:"+(Ae[0]+h.left)+"px;");var we=G('<div class="legend">'+Oe.replace('style="','style="position:absolute;'+Ne+";")+"</div>").appendTo(u);if(o.legend.backgroundOpacity!=0){var ke=o.legend.backgroundColor;ke==null&&(ke=o.grid.backgroundColor,ke&&typeof ke=="string"?ke=G.color.parse(ke):ke=G.color.extract(we,"background-color"),ke.a=1,ke=ke.toString());var st=we.children();G('<div style="position:absolute;width:'+st.width()+"px;height:"+st.height()+"px;"+Ne+"background-color:"+ke+';"> </div>').prependTo(we).css("opacity",o.legend.backgroundOpacity)}}}}}var de=[],Be=null;function Ve(oe,Se,Re){var ze=o.grid.mouseActiveRadius,ve=ze*ze+1,Te=null,he=!1,pe,ye,Oe;for(pe=f.length-1;pe>=0;--pe)if(Re(f[pe])){var Ne=f[pe],Me=Ne.xaxis,Ae=Ne.yaxis,we=Ne.datapoints.points,ke=Me.c2p(oe),st=Ae.c2p(Se),Et=ze/Me.scale,Pt=ze/Ae.scale;if(Oe=Ne.datapoints.pointsize,Me.options.inverseTransform&&(Et=Number.MAX_VALUE),Ae.options.inverseTransform&&(Pt=Number.MAX_VALUE),Ne.lines.show||Ne.points.show)for(ye=0;ye<we.length;ye+=Oe){var gt=we[ye],Ct=we[ye+1];if(gt!=null&&!(gt-ke>Et||gt-ke<-Et||Ct-st>Pt||Ct-st<-Pt)){var Ot=Math.abs(Me.p2c(gt)-oe),Ft=Math.abs(Ae.p2c(Ct)-Se),jt=Ot*Ot+Ft*Ft;jt<ve&&(ve=jt,Te=[pe,ye/Oe])}}if(Ne.bars.show&&!Te){var En,xn;switch(Ne.bars.align){case"left":En=0;break;case"right":En=-Ne.bars.barWidth;break;default:En=-Ne.bars.barWidth/2}for(xn=En+Ne.bars.barWidth,ye=0;ye<we.length;ye+=Oe){var gt=we[ye],Ct=we[ye+1],Cn=we[ye+2];gt!=null&&(f[pe].bars.horizontal?ke<=Math.max(Cn,gt)&&ke>=Math.min(Cn,gt)&&st>=Ct+En&&st<=Ct+xn:ke>=gt+En&&ke<=gt+xn&&st>=Math.min(Cn,Ct)&&st<=Math.max(Cn,Ct))&&(Te=[pe,ye/Oe])}}}return Te?(pe=Te[0],ye=Te[1],Oe=f[pe].datapoints.pointsize,{datapoint:f[pe].datapoints.points.slice(ye*Oe,(ye+1)*Oe),dataIndex:ye,series:f[pe],seriesIndex:pe}):null}function $e(oe){o.grid.hoverable&&at("plothover",oe,function(Se){return Se.hoverable!=!1})}function We(oe){o.grid.hoverable&&at("plothover",oe,function(Se){return!1})}function Ke(oe){E.isSelecting||at("plotclick",oe,function(Se){return Se.clickable!=!1})}function qe(oe){if(oe.cancelable){if(!d.is(oe.target)&&d.has(oe.target).length===0){at("plotleave",oe,function(Se){});return}$e(Xe(oe)),oe.preventDefault()}}function Xe(oe){if(!oe||!oe.originalEvent||oe.pageX&&oe.pageY)return oe;var Se=oe.originalEvent;if(Se.changedTouches.length===0)return oe;var Re=Se.changedTouches[0];return oe.pageX=Re.pageX,oe.pageY=Re.pageY,oe}function at(oe,Se,Re){var ze=d.offset(),ve=Se.pageX-ze.left-h.left,Te=Se.pageY-ze.top-h.top,he=L({left:ve,top:Te});he.pageX=Se.pageX,he.pageY=Se.pageY,he.ctrlKey=Se.ctrlKey,he.metaKey=Se.metaKey;var pe=Ve(ve,Te,Re);if(pe&&(pe.pageX=parseInt(pe.series.xaxis.p2c(pe.datapoint[0])+ze.left+h.left,10),pe.pageY=parseInt(pe.series.yaxis.p2c(pe.datapoint[1])+ze.top+h.top,10)),o.grid.autoHighlight){for(var ye=0;ye<de.length;++ye){var Oe=de[ye];Oe.auto==oe&&!(pe&&Oe.series==pe.series&&Oe.point[0]==pe.datapoint[0]&&Oe.point[1]==pe.datapoint[1])&&_e(Oe.series,Oe.point)}pe&&nt(pe.series,pe.datapoint,oe)}u.trigger(oe,[he,pe])}function Ze(){var oe=o.interaction.redrawOverlayInterval;if(oe==-1){lt();return}Be||(Be=setTimeout(lt,oe))}function lt(){Be=null,g.save(),r.clear(),g.translate(h.left,h.top);var oe,Se;for(oe=0;oe<de.length;++oe)Se=de[oe],Se.series.bars.show?je(Se.series,Se.point):rt(Se.series,Se.point);g.restore(),P(C.drawOverlay,[g])}function nt(oe,Se,Re){if(typeof oe=="number"&&(oe=f[oe]),typeof Se=="number"){var ze=oe.datapoints.pointsize;Se=oe.datapoints.points.slice(ze*Se,ze*(Se+1))}var ve=ut(oe,Se);ve==-1?(de.push({series:oe,point:Se,auto:Re}),Ze()):Re||(de[ve].auto=!1)}function _e(oe,Se){if(oe==null&&Se==null){de=[],Ze();return}if(typeof oe=="number"&&(oe=f[oe]),typeof Se=="number"){var Re=oe.datapoints.pointsize;Se=oe.datapoints.points.slice(Re*Se,Re*(Se+1))}var ze=ut(oe,Se);ze!=-1&&(de.splice(ze,1),Ze())}function ut(oe,Se){for(var Re=0;Re<de.length;++Re){var ze=de[Re];if(ze.series==oe&&ze.point[0]==Se[0]&&ze.point[1]==Se[1])return Re}return-1}function rt(oe,Se){var Re=Se[0],ze=Se[1],ve=oe.xaxis,Te=oe.yaxis,he=typeof oe.highlightColor=="string"?oe.highlightColor:G.color.parse(oe.color).scale("a",.5).toString();if(!(Re<ve.min||Re>ve.max||ze<Te.min||ze>Te.max)){var pe=oe.points.radius+oe.points.lineWidth/2;g.lineWidth=pe,g.strokeStyle=he;var ye=1.5*pe;Re=ve.p2c(Re),ze=Te.p2c(ze),g.beginPath(),oe.points.symbol=="circle"?g.arc(Re,ze,ye,0,2*Math.PI,!1):oe.points.symbol(g,Re,ze,ye,!1),g.closePath(),g.stroke()}}function je(oe,Se){var Re=typeof oe.highlightColor=="string"?oe.highlightColor:G.color.parse(oe.color).scale("a",.5).toString(),ze=Re,ve;switch(oe.bars.align){case"left":ve=0;break;case"right":ve=-oe.bars.barWidth;break;default:ve=-oe.bars.barWidth/2}g.lineWidth=oe.bars.lineWidth,g.strokeStyle=Re,be(Se[0],Se[1],Se[2]||0,ve,ve+oe.bars.barWidth,function(){return ze},oe.xaxis,oe.yaxis,g,oe.bars.horizontal,oe.bars.lineWidth)}function dt(oe,Se,Re,ze){if(typeof oe=="string")return oe;for(var ve=c.createLinearGradient(0,Re,0,Se),Te=0,he=oe.colors.length;Te<he;++Te){var pe=oe.colors[Te];if(typeof pe!="string"){var ye=G.color.parse(ze);pe.brightness!=null&&(ye=ye.scale("rgb",pe.brightness)),pe.opacity!=null&&(ye.a*=pe.opacity),pe=ye.toString()}ve.addColorStop(Te/(he-1),pe)}return ve}}G.plot=function(u,s,i){var m=new t(G(u),s,i,G.plot.plugins);return m},G.plot.version="0.8.3",G.plot.plugins=[],G.fn.plot=function(u,s){return this.each(function(){G.plot(this,u,s)})};function n(u,s){return s*Math.floor(u/s)}}(jQuery)},4027:()=>{(function(G){function O(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},u=null;function s(h){t.active&&(d(h),e.getPlaceholder().trigger("plotselecting",[f()]))}function i(h){h.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),r(t.first,h),t.active=!0,u=function(a){m(a)},G(document).one("mouseup",u))}function m(h){return u=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,d(h),y()?o(h):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function f(){if(!y()||!t.show)return null;var h={},a=t.first,v=t.second,C=e.getAxes(),E=!0;return G.each(C,function(P,x){x.used&&(anyUsed=!1)}),G.each(C,function(P,x){if(x.used||E){var M=x.c2p(a[x.direction]),S=x.c2p(v[x.direction]);h[P]={from:Math.min(M,S),to:Math.max(M,S)}}}),h}function o(h){var a=f();a.ctrlKey=h.ctrlKey,a.metaKey=h.metaKey,e.getPlaceholder().trigger("plotselected",[a]),a.xaxis&&a.yaxis&&e.getPlaceholder().trigger("selected",[{x1:a.xaxis.from,y1:a.yaxis.from,x2:a.xaxis.to,y2:a.yaxis.to}])}function l(h,a,v){return a<h?h:a>v?v:a}function r(h,a){var v=e.getOptions(),C=e.getPlaceholder().offset(),E=e.getPlotOffset();h.x=l(0,a.pageX-C.left-E.left,e.width()),h.y=l(0,a.pageY-C.top-E.top,e.height()),v.selection.mode=="y"&&(h.x=h==t.first?0:e.width()),v.selection.mode=="x"&&(h.y=h==t.first?0:e.height())}function d(h){h.pageX!=null&&(r(t.second,h),y()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):c(!0))}function c(h){t.show&&(t.show=!1,e.triggerRedrawOverlay(),h||e.getPlaceholder().trigger("plotunselected",[]))}function g(h,a){var v,C,E,P,x=e.getAxes();for(var M in x)if(v=x[M],v.direction==a&&(P=a+v.n+"axis",!h[P]&&v.n==1&&(P=a+"axis"),h[P])){C=h[P].from,E=h[P].to;break}if(h[P]||(v=a=="x"?e.getXAxes()[0]:e.getYAxes()[0],C=h[a+"1"],E=h[a+"2"]),C!=null&&E!=null&&C>E){var S=C;C=E,E=S}return{from:C,to:E,axis:v}}function p(h,a){var v,C,E=e.getOptions();E.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(C=g(h,"x"),t.first.x=C.axis.p2c(C.from),t.second.x=C.axis.p2c(C.to)),E.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(C=g(h,"y"),t.first.y=C.axis.p2c(C.from),t.second.y=C.axis.p2c(C.to)),t.show=!0,e.triggerRedrawOverlay(),!a&&y()&&o()}function y(){var h=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=h&&Math.abs(t.second.y-t.first.y)>=h}e.clearSelection=c,e.setSelection=p,e.getSelection=f,e.hooks.bindEvents.push(function(h,a){var v=h.getOptions();v.selection.mode!=null&&(a.mousemove(s),a.mousedown(i))}),e.hooks.drawOverlay.push(function(h,a){if(t.show&&y()){var v=h.getPlotOffset(),C=h.getOptions();a.save(),a.translate(v.left,v.top);var E=G.color.parse(C.selection.color);a.strokeStyle=E.scale("a",.8).toString(),a.lineWidth=1,a.lineJoin=C.selection.shape,a.fillStyle=E.scale("a",.4).toString();var P=Math.min(t.first.x,t.second.x)+.5,x=Math.min(t.first.y,t.second.y)+.5,M=Math.abs(t.second.x-t.first.x)-1,S=Math.abs(t.second.y-t.first.y)-1;a.fillRect(P,x,M,S),a.strokeRect(P,x,M,S),a.restore()}}),e.hooks.shutdown.push(function(h,a){a.unbind("mousemove",s),a.unbind("mousedown",i),u&&(G(document).unbind("mouseup",u),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}G.plot.plugins.push({init:O,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(G){var O={series:{stack:null}};function e(t){function n(s,i){for(var m=null,f=0;f<i.length&&s!=i[f];++f)i[f].stack==s.stack&&(m=i[f]);return m}function u(s,i,m){if(!(i.stack==null||i.stack===!1)){var f=n(i,s.getData());if(f){for(var o=m.pointsize,l=m.points,r=f.datapoints.pointsize,d=f.datapoints.points,c=[],g,p,y,h,a,v,C=i.lines.show,E=i.bars.horizontal,P=o>2&&(E?m.format[2].x:m.format[2].y),x=C&&i.lines.steps,M=E?1:0,S=E?0:1,D=0,T=0,R,L;!(D>=l.length&&T>=d.length);){if(R=c.length,D<l.length&&l[D]==null){for(L=0;L<o;++L)c.push(l[D+L]);D+=o}else if(D>=l.length){for(L=0;L<o;++L)c.push(d[T+L]);P&&(c[R+2]=d[T+S]),T+=r}else if(T>=d.length){for(L=0;L<o;++L)c.push(l[D+L]);D+=o}else if(T<d.length&&d[T]==null)T+=r;else{if(g=l[D+M],p=l[D+S],h=d[T+M],a=d[T+S],v=0,g==h){for(L=0;L<o;++L)c.push(l[D+L]);c[R+S]+=a,v=a,D+=o,T+=r}else if(g>h){if(D==0){for(L=0;L<o;++L)c.push(d[T+L]);v=a}if(D>0&&l[D-o]!=null){for(y=0,c.push(h),c.push(y+a),L=2;L<o;++L)c.push(l[D+L]);v=a}T+=r}else{for(L=0;L<o;++L)c.push(l[D+L]);T>0&&d[T-r]!=null&&(v=0),c[R+S]+=v,D+=o}fromgap=!1,R!=c.length&&P&&(c[R+2]=v)}if(x&&R!=c.length&&R>0&&c[R]!=null&&c[R]!=c[R-o]&&c[R+1]!=c[R-o+1]){for(L=0;L<o;++L)c[R+o+L]=c[R+L];c[R+1]=c[R-o+1]}}m.points=c}}}t.hooks.processDatapoints.push(u)}G.plot.plugins.push({init:e,options:O,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(G){var O={series:{stackpercent:null}};function e(t){var n={},u=!1,s={};function i(o,l,r,d){if(u||(u=!0,s=m(o.getData())),l.stackpercent==!0){var c=r.length;l.percents=[];var g=0,p=1;l.bars&&l.bars.horizontal&&l.bars.horizontal===!0&&(g=1,p=0);for(var y=0;y<c;y++){var h=s[r[y][g]+""];h>0?l.percents.push(r[y][p]*100/h):l.percents.push(0)}}}function m(o){var l=o.length,r={};if(l>0){for(var d=0;d<l;d++)if(o[d].stackpercent){var c=0,g=1;o[d].bars&&o[d].bars.horizontal&&o[d].bars.horizontal===!0&&(c=1,g=0);for(var p=o[d].data.length,y=0;y<p;y++){var h=0;o[d].data[y][1]!=null&&(h=o[d].data[y][g]),r[o[d].data[y][c]+""]?r[o[d].data[y][c]+""]+=h:r[o[d].data[y][c]+""]=h}}}return r}function f(o,l,r){if(l.stackpercent){u||(s=m(o.getData()));var d=[],c=0,g=1;l.bars&&l.bars.horizontal&&l.bars.horizontal===!0&&(c=1,g=0);for(var p=0;p<r.points.length;p+=3)n[r.points[p+c]]||(n[r.points[p+c]]=0),d[p+c]=r.points[p+c],d[p+g]=r.points[p+g]+n[r.points[p+c]],d[p+2]=n[r.points[p+c]],n[r.points[p+c]]+=r.points[p+g],s[d[p+c]+""]>0?(d[p+g]=d[p+g]*100/s[d[p+c]+""],d[p+2]=d[p+2]*100/s[d[p+c]+""]):(d[p+g]=0,d[p+2]=0);r.points=d}}t.hooks.processRawData.push(i),t.hooks.processDatapoints.push(f)}G.plot.plugins.push({init:e,options:O,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(G){var O={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(l,r){return r*Math.floor(l/r)}function t(l,r,d,c){if(typeof l.strftime=="function")return l.strftime(r);var g=function(P,x){return P=""+P,x=""+(x??"0"),P.length==1?x+P:P},p=[],y=!1,h=l.getHours(),a=h<12;d==null&&(d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),c==null&&(c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var v;h>12?v=h-12:h==0?v=12:v=h;for(var C=0;C<r.length;++C){var E=r.charAt(C);if(y){switch(E){case"a":E=""+c[l.getDay()];break;case"b":E=""+d[l.getMonth()];break;case"d":E=g(l.getDate(),"");break;case"e":E=g(l.getDate()," ");break;case"h":case"H":E=g(h);break;case"I":E=g(v);break;case"l":E=g(v," ");break;case"m":E=g(l.getMonth()+1,"");break;case"M":E=g(l.getMinutes());break;case"q":E=""+(Math.floor(l.getMonth()/3)+1);break;case"S":E=g(l.getSeconds());break;case"y":E=g(l.getFullYear()%100);break;case"Y":E=""+l.getFullYear();break;case"p":E=a?"am":"pm";break;case"P":E=a?"AM":"PM";break;case"w":E=""+l.getDay();break}p.push(E),y=!1}else E=="%"?y=!0:p.push(E)}return p.join("")}function n(l){function r(p,y,h,a){p[y]=function(){return h[a].apply(h,arguments)}}var d={date:l};l.strftime!=null&&r(d,"strftime",l,"strftime"),r(d,"getTime",l,"getTime"),r(d,"setTime",l,"setTime");for(var c=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],g=0;g<c.length;g++)r(d,"get"+c[g],l,"getUTC"+c[g]),r(d,"set"+c[g],l,"setUTC"+c[g]);return d}function u(l,r){if(r.timezone=="browser")return new Date(l);if(!r.timezone||r.timezone=="utc")return n(new Date(l));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var d=new timezoneJS.Date;return d.setTimezone(r.timezone),d.setTime(l),d}else return n(new Date(l))}var s={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},i=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],m=i.concat([[3,"month"],[6,"month"],[1,"year"]]),f=i.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function o(l){l.hooks.processOptions.push(function(r,d){G.each(r.getAxes(),function(c,g){var p=g.options;p.mode=="time"&&(g.tickGenerator=function(y){var h=[],a=u(y.min,p),v=0,C=p.tickSize&&p.tickSize[1]==="quarter"||p.minTickSize&&p.minTickSize[1]==="quarter"?f:m;p.minTickSize!=null&&(typeof p.tickSize=="number"?v=p.tickSize:v=p.minTickSize[0]*s[p.minTickSize[1]]);for(var E=0;E<C.length-1&&!(y.delta<(C[E][0]*s[C[E][1]]+C[E+1][0]*s[C[E+1][1]])/2&&C[E][0]*s[C[E][1]]>=v);++E);var P=C[E][0],x=C[E][1];if(x=="year"){if(p.minTickSize!=null&&p.minTickSize[1]=="year")P=Math.floor(p.minTickSize[0]);else{var M=Math.pow(10,Math.floor(Math.log(y.delta/s.year)/Math.LN10)),S=y.delta/s.year/M;S<1.5?P=1:S<3?P=2:S<7.5?P=5:P=10,P*=M}P<1&&(P=1)}y.tickSize=p.tickSize||[P,x];var D=y.tickSize[0];x=y.tickSize[1];var T=D*s[x];x=="second"?a.setSeconds(e(a.getSeconds(),D)):x=="minute"?a.setMinutes(e(a.getMinutes(),D)):x=="hour"?a.setHours(e(a.getHours(),D)):x=="month"?a.setMonth(e(a.getMonth(),D)):x=="quarter"?a.setMonth(3*e(a.getMonth()/3,D)):x=="year"&&a.setFullYear(e(a.getFullYear(),D)),a.setMilliseconds(0),T>=s.minute&&a.setSeconds(0),T>=s.hour&&a.setMinutes(0),T>=s.day&&a.setHours(0),T>=s.day*4&&a.setDate(1),T>=s.month*2&&a.setMonth(e(a.getMonth(),3)),T>=s.quarter*2&&a.setMonth(e(a.getMonth(),6)),T>=s.year&&a.setMonth(0);var R=0,L=Number.NaN,w;do if(w=L,L=a.getTime(),h.push(L),x=="month"||x=="quarter")if(D<1){a.setDate(1);var A=a.getTime();a.setMonth(a.getMonth()+(x=="quarter"?3:1));var N=a.getTime();a.setTime(L+R*s.hour+(N-A)*D),R=a.getHours(),a.setHours(0)}else a.setMonth(a.getMonth()+D*(x=="quarter"?3:1));else x=="year"?a.setFullYear(a.getFullYear()+D):a.setTime(L+T);while(L<y.max&&L!=w);return h},g.tickFormatter=function(y,h){var a=u(y,h.options);if(p.timeformat!=null)return t(a,p.timeformat,p.monthNames,p.dayNames);var v=h.options.tickSize&&h.options.tickSize[1]=="quarter"||h.options.minTickSize&&h.options.minTickSize[1]=="quarter",C=h.tickSize[0]*s[h.tickSize[1]],E=h.max-h.min,P=p.twelveHourClock?" %p":"",x=p.twelveHourClock?"%I":"%H",M;C<s.minute?M=x+":%M:%S"+P:C<s.day?E<2*s.day?M=x+":%M"+P:M="%b %d "+x+":%M"+P:C<s.month?M="%b %d":v&&C<s.quarter||!v&&C<s.year?E<s.year?M="%b":M="%b %Y":v&&C<s.year?E<s.year?M="Q%q":M="Q%q %Y":M="%Y";var S=t(a,M,p.monthNames,p.dayNames);return S})})})}G.plot.plugins.push({init:o,options:O,name:"time",version:"1.0"}),G.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=4012.8d9be01ec9b322432896.js.map