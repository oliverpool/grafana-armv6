/*! For license information please see 5893.109a2a405cf7c8a04a9d.js.LICENSE.txt */
(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5893],{"./packages/grafana-data/src/dataframe/ArrayDataFrame.ts":(e,t,a)=>{"use strict";a.d(t,{i:()=>c});var s=a("./packages/grafana-data/src/vector/vectorToArray.ts"),n=a("./packages/grafana-data/src/dataframe/processDataFrame.ts"),r=a("./packages/grafana-data/src/vector/FunctionalVector.ts");function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const o=e=>e;class l{constructor(e,t){i(this,"converter",o),this.source=e,this.prop=t}get length(){return this.source.length}get(e){return this.converter(this.source[e][this.prop])}toArray(){return(0,s.n)(this)}toJSON(){return(0,s.n)(this)}}class c extends r.G{constructor(e,t){super(),i(this,"name",void 0),i(this,"refId",void 0),i(this,"meta",void 0),i(this,"fields",[]),i(this,"length",0),this.source=e,this.length=e.length;const a=e.length?e[0]:{};t?this.fields=t.map((t=>({name:t,type:(0,n._m)(t,a[t]),config:{},values:new l(e,t)}))):this.setFieldsFromObject(a)}setFieldsFromObject(e){this.fields=Object.keys(e).map((t=>({name:t,type:(0,n._m)(t,e[t]),config:{},values:new l(this.source,t)})))}setFieldType(e,t,a){let s=this.fields.find((t=>t.name===e));return s?s.type=t:(s={name:e,type:t,config:{},values:new l(this.source,e)},this.fields.push(s)),s.values.converter=null!=a?a:o,s}get(e){return this.source[e]}toJSON(){return(0,n.og)(this)}}},"./packages/grafana-data/src/dataframe/DataFrameJSON.ts":(e,t,a)=>{"use strict";a.d(t,{Jy:()=>l,vP:()=>d,Y:()=>u});var s=a("./packages/grafana-data/src/types/index.ts"),n=a("./packages/grafana-data/src/vector/index.ts"),r=a("./packages/grafana-data/src/dataframe/processDataFrame.ts");const i=["values"];const o={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function l(e,t){if(e&&t)for(const a in e){const s=o[a];for(const n of e[a])n<t.length&&(t[n]=s)}}function c(e,t){for(const a of t)if(null!=a)return(0,r._m)(e,a);return s.fS.other}function d(e){const{schema:t,data:a}=e;if(!t||!t.fields)throw new Error("JSON needs a fields definition");const s=a?a.values.reduce(((e,t)=>Math.max(e,t.length)),0):0,r=t.fields.map(((e,t)=>{var r,i,o;let d,u=a?a.values[t]:[],p=u.length;return p!==s&&(u.length=s,u.fill(void 0,p)),(d=a&&a.entities&&a.entities[t])&&l(d,u),Object.assign({},e,{type:null!==(r=e.type)&&void 0!==r?r:c(e.name,u),config:null!==(i=e.config)&&void 0!==i?i:{},values:new n.Gt(u),entities:null!==(o=d)&&void 0!==o?o:{}})}));return Object.assign({},t,{fields:r,length:s})}function u(e){const t={values:[]};return{schema:{refId:e.refId,meta:e.meta,name:e.name,fields:e.fields.map((e=>{const{values:a}=e,s=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,i);return t.values.push(a.toArray()),s}))},data:t}}},"./packages/grafana-data/src/dataframe/DataFrameView.ts":(e,t,a)=>{"use strict";a.d(t,{U:()=>r});var s=a("./packages/grafana-data/src/vector/FunctionalVector.ts");function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r extends s.G{constructor(e){super(),n(this,"index",0),n(this,"obj",void 0),this.data=e;const t={};for(let a=0;a<e.fields.length;a++){const s=e.fields[a],n=()=>s.values.get(this.index);t.hasOwnProperty(s.name)||Object.defineProperty(t,s.name,{enumerable:!0,get:n}),t.hasOwnProperty(a.toString())||Object.defineProperty(t,a,{enumerable:!1,get:n})}this.obj=t}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(e){if(!this.dataFrame||!this.dataFrame.fields)return;const t=this.dataFrame.fields[e];return t&&t.display?t.display:void 0}get(e){return this.index=e,this.obj}toArray(){return new Array(this.data.length).fill(0).map(((e,t)=>Object.assign({},this.get(t))))}}},"./packages/grafana-data/src/dataframe/MutableDataFrame.ts":(e,t,a)=>{"use strict";a.d(t,{Y:()=>d,v:()=>u});var s=a("./packages/grafana-data/src/types/dataFrame.ts"),n=a("./packages/grafana-data/src/dataframe/processDataFrame.ts"),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),i=a("./packages/grafana-data/src/utils/fieldParser.ts"),o=a("./packages/grafana-data/src/vector/ArrayVector.ts"),l=a("./packages/grafana-data/src/vector/FunctionalVector.ts");function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d=void 0;class u extends l.G{constructor(e,t){if(super(),c(this,"name",void 0),c(this,"refId",void 0),c(this,"meta",void 0),c(this,"fields",[]),c(this,"first",new o.G),c(this,"creator",void 0),c(this,"parsers",void 0),this.creator=t||(e=>new o.G(e)),e){const{name:t,refId:a,meta:s,fields:n}=e;if(t&&(this.name=t),a&&(this.refId=a),s&&(this.meta=s),n)for(const e of n)this.addField(e)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(e,t){return this.addField({name:t||"",type:(0,n.LI)(e)})}addField(e,t){let a;e.values&&(a=Array.isArray(e.values)?e.values:e.values.toArray());let r=e.type;r||"time"!==e.name&&"Time"!==e.name?(!r&&a&&a.length&&(r=(0,n.LI)(a[0])),r||(r=s.fS.other)):r=s.fS.time;let i=e.name;i||(i=`Field ${this.fields.length+1}`);const o=Object.assign({},e,{name:i,type:r,config:e.config||{},values:this.creator(a)});if(r===s.fS.other&&(r=(0,n.fu)(o),r&&(o.type=r)),this.fields.push(o),this.first=this.fields[0].values,t)for(;o.values.length<t;)o.values.add(d);else this.validate();return o}validate(){const e=this.fields.reduce(((e,t)=>Math.max(e,t.values.length)),0);for(const t of this.fields)for(;t.values.length!==e;)t.values.add(d)}reverse(){for(const e of this.fields)e.values.reverse()}setParser(e,t){return this.parsers||(this.parsers=new Map),this.parsers.set(e,t),t}parseValue(e,t){var a;let s=null===(a=this.parsers)||void 0===a?void 0:a.get(e);return s||(s=this.setParser(e,(0,i.d)(t,e))),s(t)}appendRow(e){for(let t=this.fields.length;t<e.length;t++)this.addField({name:`Field ${t+1}`,type:(0,n.LI)(e[t])});if(this.length<1)for(let t=0;t<this.fields.length;t++){const a=this.fields[t];a.type&&a.type!==s.fS.other||(a.type=(0,n.LI)(e[t]))}for(let t=0;t<this.fields.length;t++){const a=this.fields[t];let n=e[t];a.type!==s.fS.string&&(0,r.isString)(n)&&(n=this.parseValue(a,n)),a.values.add(n)}}add(e){const t=e;for(const e of this.fields){let a=t[e.name];e.type!==s.fS.string&&(0,r.isString)(a)&&(a=this.parseValue(e,a)),void 0===a&&(a=d),e.values.add(a)}}set(e,t){if(e>this.length)throw new Error("Unable ot set value beyond current length");const a=t||{};for(const t of this.fields)t.values.set(e,a[t.name])}get(e){const t={};for(const a of this.fields)t[a.name]=a.values.get(e);return t}toJSON(){return(0,n.og)(this)}}},"./packages/grafana-data/src/dataframe/dimensions.ts":(e,t,a)=>{"use strict";a.d(t,{q2:()=>s,GV:()=>n,$q:()=>r,jC:()=>i,r7:()=>o,YP:()=>l});const s=(e,t)=>({name:e,columns:t}),n=e=>e.columns,r=(e,t)=>e.columns[t],i=(e,t,a)=>e.columns[t].values.get(a),o=(e,t,a)=>e.columns.map((e=>e.values.get(a))),l=(e,t)=>e[t]},"./packages/grafana-data/src/dataframe/frameComparisons.ts":(e,t,a)=>{"use strict";function s(e,t,a){var s,n;if(e===t)return!0;if((null==e||null===(s=e.fields)||void 0===s?void 0:s.length)!==(null==t||null===(n=t.fields)||void 0===n?void 0:n.length))return!1;if(e.name!==t.name)return!1;for(let s=0;s<e.fields.length;s++){const n=e.fields[s],r=t.fields[s];if(n.type!==r.type||n.name!==r.name)return!1;if(a)continue;if(n.labels&&r.labels&&!i(n.labels,r.labels))return!1;const o=n.config,l=r.config;let c=Object.keys(o),d=Object.keys(l);if(c.length!==d.length)return!1;for(const e of c){if(!(e in l))return!1;if("interval"!==e)if("custom"===e){if(!i(o[e],l[e]))return!1}else if(o[e]!==l[e])return!1}}return!0}function n(e,t,a){if(e===t)return!0;if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return!1;for(let s=0;s<e.length;s++)if(!a(e[s],t[s]))return!1;return!0}a.d(t,{Ch:()=>s,nl:()=>n,Vv:()=>i});const r=(e,t)=>e===t;function i(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;if(e===t)return!0;const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(let n of s)if(!a(e[n],t[n]))return!1;return!0}},"./packages/grafana-data/src/dataframe/index.ts":(e,t,a)=>{"use strict";a.d(t,{iB:()=>p.i,a2:()=>c,US:()=>s.U,N:()=>i,Yi:()=>o.Y,vA:()=>o.v,m$:()=>g.m$,nl:()=>m.nl,Ch:()=>m.Ch,q2:()=>u.q2,vP:()=>h.vP,Y:()=>h.Y,Jy:()=>h.Jy,r7:()=>u.r7,$q:()=>u.$q,GV:()=>u.GV,fh:()=>d.fh,YP:()=>u.YP,DP:()=>d.DP,sV:()=>d.sV,jC:()=>u.jC,fu:()=>d.fu,_m:()=>d._m,LI:()=>d.LI,SX:()=>d.SX,aY:()=>d.aY,Ji:()=>d.Ji,Y6:()=>d.Y6,Vv:()=>m.Vv,aK:()=>d.aK,g0:()=>d.g0,og:()=>d.og,Aw:()=>d.Aw,Zr:()=>d.Zr});var s=a("./packages/grafana-data/src/dataframe/DataFrameView.ts"),n=a("./packages/grafana-data/src/index.ts");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class i{constructor(e){r(this,"fields",[]),r(this,"fieldByName",{}),r(this,"fieldByType",{}),this.fields=e.fields.map(((e,t)=>Object.assign({},e,{index:t})));for(let t=0;t<e.fields.length;t++){const a=e.fields[t];if(a.type===n.FieldType.other){const e=(0,n.guessFieldTypeForField)(a);e&&(a.type=e)}this.fieldByType[a.type]||(this.fieldByType[a.type]=[]),this.fieldByType[a.type].push(Object.assign({},a,{index:t})),this.fieldByName[a.name]?console.warn("Duplicate field names in DataFrame: ",a.name):this.fieldByName[a.name]=Object.assign({},a,{index:t})}}getFields(e){if(!e)return[...this.fields];const t=this.fieldByType[e];return t?[...t]:[]}hasFieldOfType(e){const t=this.fieldByType[e];return t&&t.length>0}getFirstFieldOfType(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.fieldByType[e].find((e=>{var a;return t||!(null!==(a=e.config.custom)&&void 0!==a&&a.hidden)}))}hasFieldNamed(e){return!!this.fieldByName[e]}hasFieldWithNameAndType(e,t){return!!this.fieldByName[e]&&this.fieldByType[t].filter((t=>t.name===e)).length>0}getFieldByName(e){return this.fieldByName[e]}getFieldsByLabel(e,t){return Object.values(this.fieldByName).filter((a=>a.labels&&a.labels[e]===t))}}var o=a("./packages/grafana-data/src/dataframe/MutableDataFrame.ts"),l=a("./packages/grafana-data/src/vector/CircularVector.ts");class c extends o.v{constructor(e){super(void 0,(t=>new l.d(Object.assign({},e,{buffer:t}))))}}var d=a("./packages/grafana-data/src/dataframe/processDataFrame.ts"),u=a("./packages/grafana-data/src/dataframe/dimensions.ts"),p=a("./packages/grafana-data/src/dataframe/ArrayDataFrame.ts"),h=a("./packages/grafana-data/src/dataframe/DataFrameJSON.ts"),m=a("./packages/grafana-data/src/dataframe/frameComparisons.ts"),g=a("./packages/grafana-data/src/dataframe/utils.ts")},"./packages/grafana-data/src/dataframe/processDataFrame.ts":(e,t,a)=>{"use strict";a.d(t,{_m:()=>b,DP:()=>v,LI:()=>x,fu:()=>y,SX:()=>w,Ji:()=>j,aY:()=>C,g0:()=>k,Zr:()=>S,aK:()=>T,Y6:()=>O,fh:()=>_,og:()=>N,Aw:()=>I,sV:()=>P});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/types/index.ts"),r=a("./packages/grafana-data/src/datetime/moment_wrapper.ts"),i=a("./packages/grafana-data/src/vector/ArrayVector.ts"),o=a("./packages/grafana-data/src/dataframe/MutableDataFrame.ts"),l=a("./packages/grafana-data/src/vector/SortedVector.ts"),c=a("./packages/grafana-data/src/dataframe/ArrayDataFrame.ts"),d=a("./packages/grafana-data/src/field/fieldState.ts"),u=a("./packages/grafana-data/src/field/fieldComparers.ts"),p=a("./packages/grafana-data/src/vector/vectorToArray.ts"),h=a("./packages/grafana-data/src/dataframe/DataFrameJSON.ts");const m=["text","type"];function g(e){const t=e.columns.map((e=>{const t=e,{text:a,type:s}=t,r=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(t,m);return{name:null!=a&&a.length?a:e,config:r||{},values:new i.G,type:s&&Object.values(n.fS).includes(s)?s:n.fS.other}}));if(!(0,s.isArray)(e.rows))throw new Error(`Expected table rows to be array, got ${typeof e.rows}.`);for(const a of e.rows)for(let e=0;e<t.length;e++)t[e].values.buffer.push(a[e]);for(const e of t)if(e.type===n.fS.other){const t=y(e);t&&(e.type=t)}return{fields:t,refId:e.refId,meta:e.meta,name:e.name,length:e.rows.length}}const f=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function b(e,t){return!e||"date"!==(e=e.toLowerCase())&&"time"!==e?x(t):n.fS.time}function v(e){return e instanceof Date||(0,r.v9)(e)?n.fS.time:(0,s.isNumber)(e)?n.fS.number:(0,s.isString)(e)?n.fS.string:(0,s.isBoolean)(e)?n.fS.boolean:n.fS.other}function x(e){return e instanceof Date||(0,r.v9)(e)?n.fS.time:(0,s.isNumber)(e)?n.fS.number:(0,s.isString)(e)?f.test(e)?n.fS.number:"true"===e||"TRUE"===e||"True"===e||"false"===e||"FALSE"===e||"False"===e?n.fS.boolean:n.fS.string:(0,s.isBoolean)(e)?n.fS.boolean:n.fS.other}function y(e){if(e.name){const t=e.name.toLowerCase();if("date"===t||"time"===t)return n.fS.time}for(let t=0;t<e.values.length;t++){const a=e.values.get(t);if(null!=a)return x(a)}}const w=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const a of e.fields)if(!a.type||a.type===n.fS.other||t)return Object.assign({},e,{fields:e.fields.map((e=>e.type&&e.type!==n.fS.other&&!t?e:Object.assign({},e,{type:y(e)||n.fS.other})))});return e},j=e=>e&&e.hasOwnProperty("columns"),C=e=>e&&e.hasOwnProperty("fields");function k(e){var t,a;if("fields"in e)return"length"in e&&null!==(t=e.fields[0])&&void 0!==t&&null!==(a=t.values)&&void 0!==a&&a.get?e:new o.v(e);if(e.hasOwnProperty("type")&&"docs"===e.type)return function(e){const t=[{name:e.target,type:n.fS.other,labels:e.tags,config:{unit:e.unit,filterable:e.filterable},values:new i.G}];for(const a of e.datapoints)t[0].values.buffer.push(a);return{name:e.target,refId:e.target,meta:{json:!0},fields:t,length:e.datapoints.length}}(e);if(e.hasOwnProperty("datapoints")||e.hasOwnProperty("points"))return function(e){const t=[],a=[],s=e.datapoints||e.points;for(const e of s)a.push(e[0]),t.push(e[1]);const r=[{name:n.Ls,type:n.fS.time,config:{},values:new i.G(t)},{name:n.M5,type:n.fS.number,config:{unit:e.unit},values:new i.G(a),labels:e.tags}];return e.title&&(r[1].config.displayNameFromDS=e.title),{name:e.target||e.name,refId:e.refId,meta:e.meta,fields:r,length:a.length}}(e);if(e.hasOwnProperty("data"))return e.hasOwnProperty("schema")?(0,h.vP)(e):function(e){const t=new i.G,a=new i.G;for(let s=0;s<e.data.length;s++){const n=e.data[s];t.buffer.push(n[1]),a.buffer.push(n[0])}return{name:e.label,fields:[{name:e.label||n.M5,type:n.fS.number,config:{},values:t},{name:n.Ls,type:n.fS.time,config:{unit:"dateTimeAsIso"},values:a}],length:t.buffer.length}}(e);if(e.hasOwnProperty("columns"))return g(e);if(Array.isArray(e))return new c.i(e);throw console.warn("Can not convert",e),new Error("Unsupported data format")}const S=e=>{const{fields:t}=e,a=e.length,s=[];if(2===t.length){const{timeField:n,timeIndex:r}=P(e);if(n){const n=t[0===r?1:0],i=t[r];for(let e=0;e<a;e++)s.push([n.values.get(e),i.values.get(e)]);return{alias:e.name,target:(0,d.C)(n,e),datapoints:s,unit:t[0].config?t[0].config.unit:void 0,refId:e.refId,meta:e.meta}}}for(let e=0;e<a;e++){const a=[];for(let s=0;s<t.length;s++)a.push(t[s].values.get(e));s.push(a)}return e.meta&&e.meta.json?{alias:t[0].name||e.name,target:t[0].name||e.name,datapoints:t[0].values.toArray(),filterable:t[0].config?t[0].config.filterable:void 0,type:"docs"}:{columns:t.map((e=>{const{name:t,config:a}=e;if(a){const e=Object.assign({},a);return e.text=t,e}return{text:t}})),type:"table",refId:e.refId,meta:e.meta,rows:s}};function T(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=e.fields[t];if(!s)return e;const n=[];for(let t=0;t<e.length;t++)n.push(t);const r=(0,u.Mo)(s,a);return n.sort(r),Object.assign({},e,{fields:e.fields.map((e=>Object.assign({},e,{values:new l.o(e.values,n)})))})}function O(e){return Object.assign({},e,{fields:e.fields.map((e=>{const t=[...e.values.toArray()];return t.reverse(),Object.assign({},e,{values:new i.G(t)})}))})}function _(e,t){const a=[];for(const s of e.fields)a.push(s.values.get(t));return a}function N(e){return I(e)}function I(e,t){return{fields:(t?e.fields.filter(t):e.fields).map((e=>{let t=e.values.toArray();return t instanceof Float64Array&&(t=(0,p.n)(e.values)),{name:e.name,type:e.type,config:e.config,values:t,labels:e.labels}})),refId:e.refId,meta:e.meta,name:e.name}}const P=e=>{for(let t=0;t<e.fields.length;t++)if(e.fields[t].type===n.fS.time)return{timeField:e.fields[t],timeIndex:t};return{}}},"./packages/grafana-data/src/dataframe/utils.ts":(e,t,a)=>{"use strict";a.d(t,{hZ:()=>r,m$:()=>i});var s=a("./packages/grafana-data/src/types/dataFrame.ts"),n=a("./packages/grafana-data/src/dataframe/processDataFrame.ts");function r(e){return!e.find((e=>!function(e){return!(e.fields.length>2)&&Boolean(e.fields.find((e=>e.type===s.fS.time)))}(e)))}function i(e){for(let t=0;t<e.length;t++){const a=(0,n.sV)(e[t]);if(void 0!==a.timeField&&void 0!==a.timeIndex)return!0}return!1}},"./packages/grafana-data/src/datetime/common.ts":(e,t,a)=>{"use strict";a.d(t,{K:()=>r,Z:()=>i});var s=a("./packages/grafana-data/src/types/time.ts");let n=()=>s.Ys;const r=e=>{n=null!=e?e:n},i=e=>{var t,a;return null!==(t=null!==(a=null==e?void 0:e.timeZone)&&void 0!==a?a:n())&&void 0!==t?t:s.Ys}},"./packages/grafana-data/src/datetime/datemath.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{isMathString:()=>i,parse:()=>o,isValid:()=>l,parseDateMath:()=>c,roundToFiscal:()=>d});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/datetime/moment_wrapper.ts");const r=["y","M","w","d","h","m","s","Q"];function i(e){return!!e&&!("string"!=typeof e||"now"!==e.substring(0,3)&&!e.includes("||"))}function o(e,t,a,r){if(e){if("string"!=typeof e)return(0,n.v9)(e)?e:(0,s.isDate)(e)?(0,n.CQ)(e):void 0;{let s,i,o,l="";return"now"===e.substring(0,3)?(s=(0,n.GY)(a),l=e.substring("now".length)):(i=e.indexOf("||"),-1===i?(o=e,l=""):(o=e.substring(0,i),l=e.substring(i+2)),s=(0,n.CQ)(o,n.VJ)),l.length?c(l,s,t,r):s}}}function l(e){const t=o(e);return!!t&&(!!(0,n.v9)(t)&&t.isValid())}function c(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=e.replace(/\s/g,""),o=t;let l=0;const c=i.length;for(;l<c;){const e=i.charAt(l++);let t,c,u,p=!1;if("/"===e)t=0;else if("+"===e)t=1;else{if("-"!==e)return;t=2}if(isNaN(parseInt(i.charAt(l),10)))c=1;else if(2===i.length)c=parseInt(i.charAt(l),10);else{const e=l;for(;!isNaN(parseInt(i.charAt(l),10));)if(l++,l>10)return;c=parseInt(i.substring(e,l),10)}if(0===t&&1!==c)return;if(u=i.charAt(l++),"f"===u&&(u=i.charAt(l++),p=!0),!(0,s.includes)(r,u))return;0===t?a?p?d(n,o,u,a):o.endOf(u):p?d(n,o,u,a):o.startOf(u):1===t?o.add(c,u):2===t&&o.subtract(c,u)}return o}function d(e,t,a,s){switch(a){case"y":return s?d(e,t,a,!1).add(11,"M").endOf("M"):t.subtract((t.month()-e+12)%12,"M").startOf("M"),t;case"Q":return s?d(e,t,a,!1).add(2,"M").endOf("M"):t.subtract((t.month()-e+3)%3,"M").startOf("M"),t;default:return}}},"./packages/grafana-data/src/datetime/formats.ts":(e,t,a)=>{"use strict";function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{zf:()=>r,Ji:()=>i,U6:()=>o});const n="YYYY-MM-DD HH:mm:ss";class r{constructor(){s(this,"fullDate",n),s(this,"interval",{second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"})}update(e){this.fullDate=e.fullDate,this.interval=e.interval,e.useBrowserLocale&&this.useBrowserLocale()}get fullDateMS(){return this.fullDate.replace("ss","ss.SSS")}useBrowserLocale(){this.fullDate=i({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.interval.second=i({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=i({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=i({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=i({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=i({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(e){return`time:${e?this.fullDateMS:this.fullDate}`}}function i(e,t,a){if(l())return null!=a?a:n;!t&&navigator&&(t=[...navigator.languages]);const s=new Intl.DateTimeFormat(t||void 0,e),r=s.formatToParts(new Date),i={year:"YYYY",month:"MM",day:"DD",hour:s.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return r.map((e=>i[e.type]||e.value)).join("")}const o=new r,l=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},"./packages/grafana-data/src/datetime/formatter.ts":(e,t,a)=>{"use strict";a.d(t,{dq:()=>o,lf:()=>l,E8:()=>c,Fm:()=>d,Hk:()=>u});var s=a("../../opt/drone/yarncache/moment-timezone-npm-0.5.34-e4fe2d01f6-12a1d3d52e.zip/node_modules/moment-timezone/index.js"),n=a.n(s),r=a("./packages/grafana-data/src/datetime/formats.ts"),i=a("./packages/grafana-data/src/datetime/common.ts");const o=(e,t)=>h(e,(0,i.Z)(t)).format(p(t)),l=(e,t)=>h(e,(0,i.Z)(t)).format(),c=(e,t)=>h(e,(0,i.Z)(t)).fromNow(),d=(e,t)=>h(e,(0,i.Z)(t)).format(`${r.U6.fullDate} z`),u=(e,t)=>h(e,(0,i.Z)(t)).format("z"),p=e=>{var t,a;return null!=e&&e.defaultWithMS?null!==(a=null==e?void 0:e.format)&&void 0!==a?a:r.U6.fullDateMS:null!==(t=null==e?void 0:e.format)&&void 0!==t?t:r.U6.fullDate},h=(e,t)=>{const a=e,s=n().tz.zone(t);return s&&s.name?n().utc(a).tz(s.name):"utc"===t?n().utc(a):n().utc(a).local()}},"./packages/grafana-data/src/datetime/index.ts":(e,t,a)=>{"use strict";a.d(t,{Nz:()=>c.DateTimeOptions,VJ:()=>r.VJ,RQ:()=>d,zf:()=>x.zf,qb:()=>c.TimeZoneResolver,Ks:()=>O,Rn:()=>s,CQ:()=>r.CQ,C_:()=>r.C_,GY:()=>r.GY,dq:()=>y.dq,lf:()=>y.lf,E8:()=>y.E8,Fm:()=>y.Fm,J:()=>w.J,iX:()=>_,Kd:()=>r.Kd,k4:()=>r.k4,Ze:()=>c.Z,$8:()=>m,Pr:()=>p,ZV:()=>h,ig:()=>r.ig,vT:()=>S,v9:()=>r.v9,AI:()=>N,jO:()=>I,IA:()=>P,Ji:()=>x.Ji,RA:()=>T,cT:()=>n,i_:()=>r.i_,K7:()=>c.K,Ls:()=>r.Ls,U6:()=>x.U6,Hk:()=>y.Hk,Vs:()=>u,np:()=>r.Ks,zh:()=>r.zh});var s=a("./packages/grafana-data/src/datetime/datemath.ts"),n=a("./packages/grafana-data/src/datetime/rangeutil.ts"),r=a("./packages/grafana-data/src/datetime/moment_wrapper.ts"),i=a("../../opt/drone/yarncache/moment-timezone-npm-0.5.34-e4fe2d01f6-12a1d3d52e.zip/node_modules/moment-timezone/index.js"),o=a.n(i),l=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),c=a("./packages/grafana-data/src/datetime/common.ts");let d;!function(e){e.default="",e.localBrowserTime="browser",e.utc="utc"}(d||(d={}));const u=e=>{switch((0,c.Z)({timeZone:e})){case"browser":return"Local browser time";case"utc":return"UTC";default:return e}},p=(e,t)=>{const a=g(e,t);return a||f(e,t)},h=(0,l.memoize)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[];return!0===e?t.push(d.default,d.localBrowserTime,d.utc):e&&t.push(...e),o().tz.names().reduce(((e,t)=>{const a=v[t];return Array.isArray(a)&&0!==a.length?(e.push(t),e):e}),t)})),m=(0,l.memoize)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=h(e),a=t.reduce(((e,t)=>{var a;const s=t.indexOf("/");if(-1===s){var n;const a="";return e[a]=null!==(n=e[a])&&void 0!==n?n:[],e[a].push(t),e}const r=t.substr(0,s);return e[r]=null!==(a=e[r])&&void 0!==a?a:[],e[r].push(t),e}),{});return Object.keys(a).map((e=>({name:e,zones:a[e]})))})),g=(e,t)=>{switch(e){case d.utc:return{name:"Coordinated Universal Time",ianaName:"UTC",zone:e,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case d.default:{var a,s;const n=(0,c.Z)(),r=null!==(a="browser"===n||"utc"===n?g(n,t):f(n,t))&&void 0!==a?a:{};return Object.assign({countries:null!==(s=v[n])&&void 0!==s?s:[],abbreviation:"",offsetInMins:0},r,{ianaName:r.ianaName,name:"Default",zone:e})}case d.localBrowserTime:{var n,r;const a=o().tz.guess(!0),s=null!==(n=f(a,t))&&void 0!==n?n:{};return Object.assign({countries:null!==(r=v[a])&&void 0!==r?r:[],abbreviation:"Your local time",offsetInMins:(new Date).getTimezoneOffset()},s,{name:"Browser Time",ianaName:s.ianaName,zone:e})}default:return}},f=(e,t)=>{var a;const s=o().tz.zone(e);var n;if(s)return{name:e,ianaName:s.name,zone:e,countries:null!==(a=v[e])&&void 0!==a?a:[],abbreviation:(n=s.abbr(t),/^(\+|\-).+/.test(n)?"":n),offsetInMins:s.utcOffset(t)}},b={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory (Occupied)",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},v=o().tz.countries().reduce(((e,t)=>o().tz.zonesForCountry(t).reduce(((e,a)=>{e[a]||(e[a]=[]);const s=b[t];return s?(e[a].push({code:t,name:s}),e):e}),e)),{});var x=a("./packages/grafana-data/src/datetime/formats.ts"),y=a("./packages/grafana-data/src/datetime/formatter.ts"),w=a("./packages/grafana-data/src/datetime/parser.ts"),j=a("../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/intervalToDuration/index.js"),C=a("../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/add/index.js");const k={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function S(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=(0,j.Z)(e);return Object.entries(a).reduce(((e,a)=>{let[s,n]=a;if(n&&0!==n&&("seconds"!==s||t||!e)){return e+`${""!==e?" ":""}${n}${k[s][0]}`}return e}),"")}function T(e){return e.split(" ").reduce(((e,t)=>{const a=t.match(/(\d+)(.+)/),s=null==a?void 0:a[1],n=null==a?void 0:a[2];if(!s||!n)return e;const r=Object.entries(k).find((e=>{let[t,s]=e;return null==s?void 0:s.includes(a[2])})),i=parseInt(s,10);return r?Object.assign({},e,{[r[0]]:i}):e}),{})}function O(e,t){return(0,C.Z)(e,t)}function _(e){const t=new Date;return O(t,e).getTime()-t.getTime()}function N(e){return!isNaN(Date.parse(e))}function I(e){for(const a of e.trim().split(" ")){var t;const e=a.match(/(\d+)(.+)/);if(null===e||3!==e.length)return!1;if(!(null===(t=Object.entries(k).find((t=>{let[a,s]=t;return null==s?void 0:s.includes(e[2])})))||void 0===t?void 0:t[0]))return!1}return!0}function P(e){const t=["h","m","s","ms","us","µs","ns"];for(const a of e.trim().split(" ")){const e=a.match(/([0-9]*[.]?[0-9]+)(.+)/);if(null===e||3!==e.length)return!1;if(!t.includes(e[2]))return!1}return!0}},"./packages/grafana-data/src/datetime/moment_wrapper.ts":(e,t,a)=>{"use strict";a.d(t,{VJ:()=>r,i_:()=>i,Kd:()=>o,k4:()=>l,v9:()=>c,zh:()=>d,Ks:()=>u,CQ:()=>p,C_:()=>h,GY:()=>m,ig:()=>g,Ls:()=>f});var s=a("../../opt/drone/yarncache/moment-npm-2.29.2-7e4b405a08-ee850b5776.zip/node_modules/moment/moment.js"),n=a.n(s);const r=n().ISO_8601,i=e=>{n().locale(e)},o=()=>n().locale(),l=()=>n().localeData(),c=e=>n().isMoment(e),d=(e,t)=>n().utc(e,t),u=(e,t)=>n().duration(e,t),p=(e,t)=>n()(e,t),h=e=>p(e),m=(e,t,a)=>"utc"===e?d(t,a):p(t,a),g=e=>n().weekdays().findIndex((t=>t.toLowerCase()===e.toLowerCase())),f=e=>{const t="-weekStart",a=o().replace(t,""),s=e?g(e):-1;-1!==s?n().locale(a+t,{parentLocale:a,week:{dow:s}}):i(a)}},"./packages/grafana-data/src/datetime/rangeutil.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{describeTextRange:()=>d,describeTimeRange:()=>u,isValidTimeSpan:()=>p,describeTimeRangeAbbreviation:()=>h,convertRawToRange:()=>m,isFiscal:()=>f,isRelativeTimeRange:()=>b,secondsToHms:()=>v,msRangeToTimeString:()=>x,calculateInterval:()=>y,describeInterval:()=>C,intervalToSeconds:()=>k,intervalToMs:()=>S,roundInterval:()=>T,timeRangeToRelative:()=>O,relativeToTimeRange:()=>_});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/datetime/datemath.ts"),r=a("./packages/grafana-data/src/datetime/moment_wrapper.ts"),i=a("./packages/grafana-data/src/datetime/formatter.ts"),o=a("./packages/grafana-data/src/datetime/parser.ts");const l={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},c={};function d(e){const t=0!==e.indexOf("+");-1===e.indexOf("now")&&(e=(t?"now-":"now")+e);let a=c[e+" to now"];if(a)return a;a=t?{from:e,to:"now"}:{from:"now",to:e};const s=/^now([-+])(\d+)(\w)/.exec(e);if(s){const e=s[3],n=parseInt(s[2],10),r=l[e];r&&(a.display=t?"Last ":"Next ",a.display+=n+" "+r.display,a.section=r.section,n>1&&(a.display+="s"))}else a.display=a.from+" to "+a.to,a.invalid=!0;return a}function u(e,t){const a=c[e.from.toString()+" to "+e.to.toString()];if(a)return a.display;const s={timeZone:t};if((0,r.v9)(e.from)&&(0,r.v9)(e.to))return(0,i.dq)(e.from,s)+" to "+(0,i.dq)(e.to,s);if((0,r.v9)(e.from)){const t=n.parse(e.to,!0,"utc");return t?(0,i.dq)(e.from,s)+" to "+(0,i.E8)(t,s):""}if((0,r.v9)(e.to)){const t=n.parse(e.from,!1,"utc");return t?(0,i.E8)(t,s)+" to "+(0,i.dq)(e.to,s):""}if("now"===e.to.toString()){return d(e.from).display}return e.from.toString()+" to "+e.to.toString()}(0,s.each)([{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],(e=>{c[e.from+" to "+e.to]=e})),(0,s.each)([{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],(e=>{c[e.from+" to "+e.to]=e}));const p=e=>{if(0===e.indexOf("$")||0===e.indexOf("+$"))return!0;return!0!==d(e).invalid},h=(e,t)=>{if((0,r.v9)(e.from))return(0,i.Hk)(e.from,{timeZone:t});const a=n.parse(e.from,!0);return a?(0,i.Hk)(a,{timeZone:t}):""},m=(e,t,a)=>{const s=(0,o.J)(e.from,{roundUp:!1,timeZone:t,fiscalYearStartMonth:a}),r=(0,o.J)(e.to,{roundUp:!0,timeZone:t,fiscalYearStartMonth:a});return n.isMathString(e.from)||n.isMathString(e.to)?{from:s,to:r,raw:e}:{from:s,to:r,raw:{from:s,to:r}}};function g(e){return"string"==typeof e&&e.indexOf("now")>=0}function f(e){return"string"==typeof e.raw.from&&e.raw.from.indexOf("f")>0||"string"==typeof e.raw.to&&e.raw.to.indexOf("f")>0}function b(e){return g(e.from)||g(e.to)}function v(e){const t=Math.floor(e/31536e3);if(t)return t+"y";const a=Math.floor(e%31536e3/86400);if(a)return a+"d";const s=Math.floor(e%31536e3%86400/3600);if(s)return s+"h";const n=Math.floor(e%31536e3%86400%3600/60);if(n)return n+"m";const r=Math.floor(e%31536e3%86400%3600%60);if(r)return r+"s";const i=Math.floor(1e3*e);return i?i+"ms":"less than a millisecond"}function x(e){const t=Number((e/1e3).toFixed()),a=Math.floor(t/60/60),s=Math.floor(t/60)-60*a,n=Number((t%60).toFixed());let r=a?a+"h":"",i=s?s+"min":"",o=n?n+"sec":"";return r&&i?r+=" ":r=r,(i||r)&&o?i+=" ":i=i,r+i+o||"less than 1sec"}function y(e,t,a){let s=1;a&&(s=S(a));let n=T((e.to.valueOf()-e.from.valueOf())/t);return s>n&&(n=s),{intervalMs:n,interval:v(n/1e3)}}const w=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,j={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function C(e){if(Number(e))return{sec:j.s,type:"s",count:parseInt(e,10)};const t=e.match(w);if(!t||!(0,s.has)(j,t[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(j).join(", ")}"`);return{sec:j[t[2]],type:t[2],count:parseInt(t[1],10)}}function k(e){const t=C(e);return t.sec*t.count}function S(e){const t=C(e);return 1e3*t.sec*t.count}function T(e){switch(!0){case e<15:return 10;case e<35:return 20;case e<75:return 50;case e<150:return 100;case e<350:return 200;case e<750:return 500;case e<1500:return 1e3;case e<3500:return 2e3;case e<7500:return 5e3;case e<12500:return 1e4;case e<17500:return 15e3;case e<25e3:return 2e4;case e<45e3:return 3e4;case e<9e4:return 6e4;case e<21e4:return 12e4;case e<45e4:return 3e5;case e<75e4:return 6e5;case e<105e4:return 9e5;case e<15e5:return 12e5;case e<27e5:return 18e5;case e<54e5:return 36e5;case e<9e6:return 72e5;case e<162e5:return 108e5;case e<324e5:return 216e5;case e<864e5:return 432e5;case e<6048e5:return 864e5;case e<18144e5:return 6048e5;case e<36288e5:return 2592e6;default:return 31536e6}}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.CQ)();const a=t.unix()-e.from.unix(),s=t.unix()-e.to.unix();return{from:a,to:s}}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.CQ)();const a=(0,r.CQ)(t).subtract(e.from,"s"),s=0===e.to?(0,r.CQ)(t):(0,r.CQ)(t).subtract(e.to,"s");return{from:a,to:s,raw:{from:a,to:s}}}},"./packages/grafana-data/src/field/displayProcessor.ts":(e,t,a)=>{"use strict";a.d(t,{U:()=>u,g:()=>h});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/types/dataFrame.ts"),r=a("./packages/grafana-data/src/valueFormats/valueFormats.ts"),i=a("./packages/grafana-data/src/utils/valueMappings.ts"),o=a("./packages/grafana-data/src/datetime/index.ts"),l=a("./packages/grafana-data/src/field/scale.ts"),c=a("./packages/grafana-data/src/utils/anyToNumber.ts");const d={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function u(e){var t;if(!e||(0,s.isEmpty)(e)||!e.field)return p;const a=e.field,u=null!==(t=a.config)&&void 0!==t?t:{};let h=u.unit,m=h&&(d[h]||h.startsWith("time:")),g=!1;if(a.type!==n.fS.time||m)a.type===n.fS.boolean&&((0,r.br)(h)||(h="bool"));else if(h="dateTimeAsSystem",m=!0,a.values&&a.values.length>1){let e=a.values.get(0),t=a.values.get(a.values.length-1);"string"==typeof e?(e=(0,o.J)(e).unix(),t=(0,o.J)(t).unix()):(e/=1e3,t/=1e3),g=t-e<60}const f=(0,r.Cf)(h||"none"),b=(0,l.NI)(a,e.theme);return t=>{const{mappings:a}=u,n="string"===h;m&&"string"==typeof t&&(t=(0,o.zh)(t).valueOf());let r,l,d,p,v,x,y=n?NaN:(0,c.I)(t);if(a&&a.length>0){const s=(0,i.vh)(a,t);s&&(null!=s.text&&(r=s.text),null!=s.color&&(p=e.theme.visualization.getColorByName(s.color)),null!=s.icon&&(v=s.icon))}if(!isNaN(y)){if(null==r&&!(0,s.isBoolean)(t)){const t=f(y,u.decimals,null,e.timeZone,g);r=t.text,d=t.suffix,l=t.prefix}if(null==p){const e=b(y);p=e.color,x=e.percent}}if(null==r&&(0,s.isArray)(t)&&(r=(0,s.join)(t,", ")),null==r&&(r=(0,s.toString)(t),r||(r=u.noValue?u.noValue:"")),!p){const e=b(-1/0);p=e.color,x=e.percent}const w={text:r,numeric:y,prefix:l,suffix:d,color:p};return null!=v&&(w.icon=v),null!=x&&(w.percent=x),w}}function p(e){return{text:(0,s.toString)(e),numeric:(0,c.I)(e)}}function h(){return e=>({text:`${e}`,numeric:null})}},"./packages/grafana-data/src/field/fieldColor.ts":(e,t,a)=>{"use strict";a.d(t,{WO:()=>d,fD:()=>p,QY:()=>h,YO:()=>m});var s=a("./packages/grafana-data/src/types/index.ts"),n=a("./packages/grafana-data/src/utils/Registry.ts"),r=a("../../opt/drone/yarncache/d3-interpolate-npm-1.4.0-694efcdd27-d98988bd1e.zip/node_modules/d3-interpolate/src/rgb.js"),i=a("./packages/grafana-data/src/field/thresholds.ts"),o=a("./packages/grafana-data/src/field/scale.ts"),l=a("./packages/grafana-data/src/transformations/fieldReducer.ts");function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const d=new n.B((()=>[{id:s.Sc.Fixed,name:"Single color",description:"Set a specific color",getCalculator:g},{id:s.Sc.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(e,t)=>(e,a,s)=>{const n=null!=s?s:i.yM;return t.visualization.getColorByName(n.color)}},new u({id:s.Sc.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:e=>e.visualization.palette}),new u({id:"continuous-GrYlRd",name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:e=>["green","yellow","red"]}),new u({id:"continuous-RdYlGr",name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:e=>["red","yellow","green"]}),new u({id:"continuous-BlYlRd",name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:e=>["dark-blue","super-light-yellow","dark-red"]}),new u({id:"continuous-YlRd",name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:e=>["super-light-yellow","dark-red"]}),new u({id:"continuous-BlPu",name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:e=>["blue","purple"]}),new u({id:"continuous-YlBl",name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:e=>["super-light-yellow","dark-blue"]}),new u({id:"continuous-blues",name:"Blues",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-blue"]}),new u({id:"continuous-reds",name:"Reds",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-red"]}),new u({id:"continuous-greens",name:"Greens",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-green"]}),new u({id:"continuous-purples",name:"Purples",isContinuous:!0,isByValue:!0,getColors:e=>["panel-bg","dark-purple"]})]));class u{constructor(e){c(this,"id",void 0),c(this,"name",void 0),c(this,"description",void 0),c(this,"isContinuous",void 0),c(this,"isByValue",void 0),c(this,"colorCache",void 0),c(this,"colorCacheTheme",void 0),c(this,"interpolator",void 0),c(this,"getNamedColors",void 0),this.id=e.id,this.name=e.name,this.description=e.description,this.getNamedColors=e.getColors,this.isContinuous=e.isContinuous,this.isByValue=e.isByValue}getColors(e){return this.getNamedColors?(this.colorCache&&this.colorCacheTheme===e||(this.colorCache=this.getNamedColors(e).map(e.visualization.getColorByName),this.colorCacheTheme=e),this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,r.hD)(this.colorCache)),this.interpolator}getCalculator(e,t){const a=this.getColors(t);return this.isByValue?this.isContinuous?(e,t,a)=>this.getInterpolator()(t):(e,t,s)=>a[t*(a.length-1)]:(t,s,n)=>{var r,i;const o=null!==(r=null===(i=e.state)||void 0===i?void 0:i.seriesIndex)&&void 0!==r?r:0;return a[o%a.length]}}}function p(e){var t,a;return d.get(null!==(t=null===(a=e.config.color)||void 0===a?void 0:a.mode)&&void 0!==t?t:s.Sc.Thresholds)}function h(e){return d.get(null!=e?e:s.Sc.Thresholds)}function m(e,t){var a,s,n;const r=p(e);if(!r.isByValue)return{color:r.getCalculator(e,t)(0,0),threshold:i.yM,percent:1};const c=(0,o.NI)(e,t),d=null!==(a=null===(s=e.config.color)||void 0===s?void 0:s.seriesBy)&&void 0!==a?a:"last";return c(null!==(n=(0,l.Kx)({field:e,reducers:[d]})[d])&&void 0!==n?n:0)}function g(e,t){return()=>{var a,n;return t.visualization.getColorByName(null!==(a=null===(n=e.config.color)||void 0===n?void 0:n.fixedColor)&&void 0!==a?a:s.R3)}}},"./packages/grafana-data/src/field/fieldOverrides.ts":(e,t,a)=>{"use strict";a.d(t,{SM:()=>x,Of:()=>T,Xu:()=>v,gb:()=>k});var s=a("./packages/grafana-data/src/types/index.ts"),n=a("./packages/grafana-data/src/transformations/index.ts"),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),i=a("./packages/grafana-data/src/field/displayProcessor.ts"),o=a("./packages/grafana-data/src/dataframe/index.ts"),l=a("./packages/grafana-data/src/field/standardFieldConfigEditorRegistry.ts"),c=a("./packages/grafana-data/src/utils/index.ts"),d=a("./packages/grafana-data/src/valueFormats/index.ts"),u=a("./packages/grafana-data/src/field/getFieldDisplayValuesProxy.ts"),p=a("./packages/grafana-data/src/field/fieldState.ts"),h=a("./packages/grafana-data/src/dataframe/processDataFrame.ts"),m=a("./packages/grafana-data/src/utils/dataLinks.ts"),g=a("./packages/grafana-data/src/utils/labels.ts");function f(e,t,a){return new Proxy({},{get:(s,n,r)=>"name"===n?e.name:"displayName"===n?(0,p.C)(e,t,a):"labels"===n||"formattedLabels"===n?e.labels?Object.assign({},e.labels,{__values:Object.values(e.labels).sort().join(", "),toString:()=>(0,g.aA)(e.labels,"",!0)}):"":void 0})}var b=a("./packages/grafana-data/src/themes/colorManipulator.ts");function v(e){var t,a;let r=null,i=null;const o=[n.gz.min,n.gz.max];for(const t of e)for(const e of t.fields)if(e.type===s.fS.number){const t=(0,n.Kx)({field:e,reducers:o}),a=t[n.gz.min],s=t[n.gz.max];(null===r||a<r)&&(r=a),(null===i||s>i)&&(i=s)}return{min:r,max:i,delta:(null!==(t=i)&&void 0!==t?t:0)-(null!==(a=r)&&void 0!==a?a:0)}}function x(e){var t;if(!e.data)return[];const a=e.fieldConfig;if(!a)return e.data;const c=null!==(t=e.fieldConfigRegistry)&&void 0!==t?t:l.N;let d,u=0;const h=[];if(a.overrides)for(const e of a.overrides){const t=n.Ls.get(e.matcher.id);t&&h.push({match:t.get(e.matcher.options),properties:e.properties})}return e.data.map(((t,n)=>{const l=Object.assign({},t);l.fields=l.fields.map((e=>Object.assign({},e,{config:(0,r.cloneDeep)(e.config),state:Object.assign({},e.state)})));const m={__series:{text:"Series",value:{name:(0,p.n)(l,n)}}};for(const t of l.fields){const p=t.config;t.state.scopedVars=Object.assign({},m,{__field:{text:"Field",value:f(t,l,e.data)}});const x={field:t,data:e.data,dataFrameIndex:n,replaceVariables:e.replaceVariables,fieldConfigRegistry:c};j(p,a.defaults,x);for(const a of h)if(a.match(t,l,e.data))for(const e of a.properties)w(p,e,x);let C,k=t.type;if(!k||k===s.fS.other){const e=(0,o.fu)(t);e&&(k=e)}if(t.type===s.fS.number){var g,b;d||(0,r.isNumber)(p.min)&&(0,r.isNumber)(p.max)||(d=v(e.data));const t=null!==(g=p.min)&&void 0!==g?g:d.min,a=null!==(b=p.max)&&void 0!==b?b:d.max;C={min:t,max:a,delta:a-t}}t.state.seriesIndex=u,t.state.range=C,t.type=k,t.type!==s.fS.time&&u++,t.display=(0,i.U)({field:t,theme:e.theme,timeZone:e.timeZone}),"dateTimeFromNow"!==t.config.unit&&(t.display=y(t.display,2500)),t.getLinks=S(l,t,t.state.scopedVars,x.replaceVariables,e.timeZone)}return l}))}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;const a=new Map;return s=>{let n=a.get(s);return n||(a.size===t&&a.clear(),n=e(s),n.color&&(n.color=(0,b.asHexString)(n.color)),a.set(s,n)),n}}function w(e,t,a){const s=a.fieldConfigRegistry.getIfExists(t.id);if(!s)return;const n=s.process(t.value,a,s.settings);null==n?s.isCustom&&e.custom?(0,r.unset)(e.custom,s.path):(0,r.unset)(e,s.path):s.isCustom?(e.custom||(e.custom={}),(0,r.set)(e.custom,s.path,n)):(0,r.set)(e,s.path,n)}function j(e,t,a){for(const s of a.fieldConfigRegistry.list())s.isCustom&&!e.custom&&(e.custom={}),C(s.isCustom?e.custom:e,s.isCustom?t.custom:t,s,a);k(e)}function C(e,t,a,s){const n=(0,r.get)(e,a.path);if(null==n){const n=s.fieldConfigRegistry.getIfExists(a.id);if(!n)return;if(n&&n.shouldApply(s.field)){const a=n.process((0,r.get)(t,n.path),s,n.settings);null!=a&&(0,r.set)(e,n.path,a)}}}function k(e){const{thresholds:t}=e;if(e.color?e.color.mode||delete e.color:t&&(e.color={mode:s.Sc.Thresholds}),e.hasOwnProperty("min")&&e.hasOwnProperty("max")&&e.min>e.max){const t=e.max;e.max=e.min,e.min=t}}const S=(e,t,a,s,n)=>r=>{if(!t.config.links||0===t.config.links.length)return[];const i=c.uT.getTimeRangeUrlParams(),{timeField:o}=(0,h.sV)(e);return t.config.links.map((l=>{const p=c.uT.getVariablesUrlParams();let h={},g={};if(void 0===r.valueRowIndex||isNaN(r.valueRowIndex))r.calculatedValue&&(g={raw:r.calculatedValue.numeric,numeric:r.calculatedValue.numeric,text:(0,d.zc)(r.calculatedValue)});else{const a=(0,u.z)({frame:e,rowIndex:r.valueRowIndex,timeZone:n});g={raw:t.values.get(r.valueRowIndex),numeric:a[t.name].numeric,text:a[t.name].text,time:o?o.values.get(r.valueRowIndex):void 0},h={__data:{value:{name:e.name,refId:e.refId,fields:a},text:"Data"}}}const f=Object.assign({},a,{__value:{text:"Value",value:g}},h,{[c.WC.keepTime]:{text:i,value:i},[c.WC.includeVars]:{text:p,value:p}});if(l.onClick)return{href:l.url,title:s(l.title||"",f),target:l.targetBlank?"_blank":void 0,onClick:(e,a)=>{l.onClick({origin:null!=a?a:t,e,replaceVariables:e=>s(e,f)})},origin:t};if(l.internal)return(0,m._)({link:l,internalLink:l.internal,scopedVars:f,field:t,range:{},replaceVariables:s});let b=c.uT.assureBaseUrl(l.url.replace(/\n/g,""));b=s(b,f,encodeURIComponent),b=c.uT.processUrl(b);return{href:b,title:s(l.title||"",f),target:l.targetBlank?"_blank":void 0,origin:t}}))};function T(e){if(!e||0===e.length)return[];const t=[...e],a=(0,i.g)();for(let e=0;e<t.length;e++){const s=Object.assign({},t[e]),n=[...s.fields];for(let e=0;e<n.length;e++)n[e]=Object.assign({},n[e],{display:a});t[e]=Object.assign({},s,{fields:n})}return t}},"./packages/grafana-data/src/field/getFieldDisplayValuesProxy.ts":(e,t,a)=>{"use strict";a.d(t,{z:()=>i});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/valueFormats/index.ts"),r=a("./packages/grafana-data/src/field/displayProcessor.ts");function i(e){return new Proxy({},{get:(t,a)=>{var i;let o=e.frame.fields.find((e=>a===e.name));if(!o){const t=(0,s.toNumber)(a);o=e.frame.fields[t]}if(o||(o=e.frame.fields.find((e=>a===e.config.displayName))),o||(o=e.frame.fields.find((e=>!!e.labels&&a===e.labels.name))),!o)return;const l=(null!==(i=o.display)&&void 0!==i?i:(0,r.U)())(o.values.get(e.rowIndex));return l.toString=()=>(0,n.zc)(l),l}})}},"./packages/grafana-data/src/field/index.ts":(e,t,a)=>{"use strict";a.d(t,{cB:()=>b,WI:()=>T.FieldColorMode,ZD:()=>O.Z,pZ:()=>g,dE:()=>f,E1:()=>m,n_:()=>h,HU:()=>p,SM:()=>N.SM,Of:()=>N.Of,W4:()=>S.W4,NN:()=>S.NN,W0:()=>S.W0,WO:()=>T.WO,m1:()=>_.m1,U_:()=>n.U,sg:()=>C,QY:()=>T.QY,fD:()=>T.fD,xD:()=>P.xD,CZ:()=>u.C,nG:()=>v,zv:()=>I.z,YO:()=>T.YO,nf:()=>u.n,gE:()=>n.g,NI:()=>P.NI,gG:()=>j,kG:()=>S.kG,Oh:()=>S.Oh,AE:()=>S.AE,bP:()=>_.bP,SO:()=>k.S,N6:()=>k.N,op:()=>S.op,ZN:()=>S.ZN,VB:()=>S.VB,gb:()=>N.gb,uj:()=>S.uj});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/field/displayProcessor.ts"),r=a("./packages/grafana-data/src/types/index.ts"),i=a("./packages/grafana-data/src/dataframe/DataFrameView.ts"),o=a("./packages/grafana-data/src/transformations/fieldReducer.ts"),l=a("./packages/grafana-data/src/dataframe/processDataFrame.ts"),c=a("./packages/grafana-data/src/transformations/index.ts"),d=a("./packages/grafana-data/src/transformations/matchers/ids.ts"),u=a("./packages/grafana-data/src/field/fieldState.ts");const p="__series.name",h="__field.displayName",m="__field.labels",g="__calc",f="__cell_",b=25,v=e=>{var t;const{replaceVariables:a,reduceOptions:p,timeZone:h,theme:m}=e,v=p.calcs.length?p.calcs:[o.gz.last],C=[],k=(0,c.sq)(p.fields?{id:d.mi.byRegexp,options:p.fields}:{id:d.mi.numeric}),S=null!==(t=e.data)&&void 0!==t?t:[],T=p.limit?p.limit:b,O={};let _=!1;for(let t=0;t<S.length&&!_;t++){const r=S[t],{timeField:c}=(0,l.sV)(r),d=new i.U(r);for(let t=0;t<r.fields.length&&!_;t++){var N,I,P;const i=r.fields[t],l=i.getLinks;if(!k(i,r,S))continue;let b=i.config;var M;if(null!==(N=i.state)&&void 0!==N&&N.range)b=Object.assign({},b,null===(M=i.state)||void 0===M?void 0:M.range);const A=null!==(I=i.config.displayName)&&void 0!==I?I:"",D=null!==(P=i.display)&&void 0!==P?P:(0,n.U)({field:i,theme:e.theme,timeZone:h});if(p.values){const n=A.indexOf(f)>=0;for(let o=0;o<i.values.length;o++){if(n)for(let e=0;e<r.fields.length;e++){const t=r.fields[e].values.get(o);O[f+e]={value:t,text:(0,s.toString)(t)}}i.state=y(i,C.length);const c=D(i.values.get(o)),u=x(r,i,o,a,O),p=w(u,e.fieldConfig,m);if(C.push({name:"",field:b,display:Object.assign({},c,{title:u,color:null!=p?p:c.color}),view:d,colIndex:t,rowIndex:o,getLinks:l?()=>l({valueRowIndex:o}):()=>[],hasLinks:j(i)}),C.length>=T){_=!0;break}}}else{const s=(0,o.Kx)({field:i,reducers:v});for(const n of v){O[g]={value:n,text:n};const p=D(s[n]);var F;if(""!==A)p.title=a(A,Object.assign({},null===(F=i.state)||void 0===F?void 0:F.scopedVars,O));else p.title=(0,u.C)(i,r,S);let h;e.sparkline&&(h={y:r.fields[t],x:c},n===o.gz.last?h.highlightIndex=h.y.values.length-1:n===o.gz.first&&(h.highlightIndex=0)),C.push({name:n,field:b,display:p,sparkline:h,view:d,colIndex:t,getLinks:l?()=>l({calculatedValue:p}):()=>[],hasLinks:j(i)})}}}}return 0===C.length&&C.push(function(e){var t,a;const i="No data",{fieldConfig:o,timeZone:l}=e,{defaults:c}=o,d=(0,n.U)({field:{type:r.fS.other,config:c},theme:e.theme,timeZone:l})(null),u=function(e,t){if(!e||(0,s.isEmpty)(e.text))return t;return e.text}(d,i);return{name:i,field:Object.assign({},c,{max:null!==(t=c.max)&&void 0!==t?t:0,min:null!==(a=c.min)&&void 0!==a?a:0}),display:{text:u,numeric:0,color:d.color},hasLinks:!1}}(e)),C};function x(e,t,a,s,n){let i=[],o=0;var l;if(t.config.displayName)return s(t.config.displayName,Object.assign({},null===(l=t.state)||void 0===l?void 0:l.scopedVars,n));for(const s of e.fields)if(s!==t)if(s.type===r.fS.string){var c;const e=null!==(c=s.values.get(a))&&void 0!==c?c:"",t=s.display?s.display(e).text:e;t.length>0&&i.push(t)}else s.type===r.fS.number&&o++;return(o||0===i.length)&&i.push((0,u.C)(t,e)),i.join(" ")}function y(e,t){return Object.assign({},e.state,{seriesIndex:t})}function w(e,t,a){for(const s of t.overrides)if("byName"===s.matcher.id&&s.matcher.options===e)for(const e of s.properties)if("color"===e.id&&e.value)return a.visualization.getColorByName(e.value.fixedColor);return null}function j(e){var t,a;return!(null===(t=e.config)||void 0===t||null===(a=t.links)||void 0===a||!a.length)&&e.config.links.length>0}function C(e){const t={title:"",text:""};let a=0,s=0;for(let n=0;n<e.length;n++){const r=e[n].display;r.text&&r.text.length>t.text.length&&(t.text=r.text),r.title&&r.title.length>t.title.length&&(t.title=r.title),r.prefix&&r.prefix.length>a&&(t.prefix=r.prefix,a=r.prefix.length),r.suffix&&r.suffix.length>s&&(t.suffix=r.suffix,s=r.suffix.length)}return t}var k=a("./packages/grafana-data/src/field/standardFieldConfigEditorRegistry.ts"),S=a("./packages/grafana-data/src/field/overrides/processors.ts"),T=a("./packages/grafana-data/src/field/fieldColor.ts"),O=a("./packages/grafana-data/src/field/FieldConfigOptionsRegistry.tsx"),_=a("./packages/grafana-data/src/field/thresholds.ts"),N=a("./packages/grafana-data/src/field/fieldOverrides.ts"),I=a("./packages/grafana-data/src/field/getFieldDisplayValuesProxy.ts"),P=a("./packages/grafana-data/src/field/scale.ts")},"./packages/grafana-data/src/field/overrides/processors.ts":(e,t,a)=>{"use strict";a.d(t,{kG:()=>s,Oh:()=>n,W0:()=>r,NN:()=>i,uj:()=>o,AE:()=>l,op:()=>c,ZN:()=>d,VB:()=>u,W4:()=>p});const s=(e,t,a)=>e,n=(e,t,a)=>{if(null!=e)return parseFloat(e)},r=(e,t,a)=>{var s,n;return null===(s=t.field)||void 0===s||(null===(n=s.state)||void 0===n||delete n.displayName),c(e,t,a)},i=(e,t,a)=>e,o=(e,t,a)=>e,l=(e,t,a)=>e,c=(e,t,a)=>null==e?e:a&&a.expandTemplateVars&&t.replaceVariables?t.replaceVariables(e,t.field.state.scopedVars):`${e}`,d=(e,t,a)=>e,u=(e,t,a)=>e,p=(e,t,a)=>e},"./packages/grafana-data/src/field/scale.ts":(e,t,a)=>{"use strict";a.d(t,{NI:()=>l,dz:()=>c,xD:()=>d});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/transformations/fieldReducer.ts"),r=a("./packages/grafana-data/src/types/index.ts"),i=a("./packages/grafana-data/src/field/fieldColor.ts"),o=a("./packages/grafana-data/src/field/thresholds.ts");function l(e,t){var a,s;if(e.type===r.fS.boolean)return function(e,t){const a={color:t.visualization.getColorByName("green"),percent:1,threshold:void 0},s={color:t.visualization.getColorByName("red"),percent:0,threshold:void 0},n=(0,i.fD)(e);if(n.isContinuous&&n.getColors){const e=n.getColors(t);a.color=e[e.length-1],s.color=e[0]}return e=>Boolean(e)?a:s}(e,t);const n=(0,i.fD)(e).getCalculator(e,t),l=null!==(a=null===(s=e.state)||void 0===s?void 0:s.range)&&void 0!==a?a:c(e);return t=>{let a=0;t!==-1/0&&(a=(t-l.min)/l.delta,Number.isNaN(a)&&(a=0));const s=(0,o.pD)(e,t,a);return{percent:a,threshold:s,color:n(t,a,s)}}}function c(e){if(e.type!==r.fS.number)return{min:0,max:100,delta:100};let t=e.config.min,a=e.config.max;if(!(0,s.isNumber)(t)||!(0,s.isNumber)(a))if(e.values&&e.values.length){const r=(0,n.Kx)({field:e,reducers:[n.gz.min,n.gz.max]});(0,s.isNumber)(t)||(t=r[n.gz.min]),(0,s.isNumber)(a)||(a=r[n.gz.max])}else t=0,a=100;return{min:t,max:a,delta:a-t}}function d(e,t){var a;const{config:n}=e;let{min:r,max:i}=n;return(0,s.isNumber)(r)&&(0,s.isNumber)(i)?n:t||null===(a=e.state)||void 0===a||!a.range?Object.assign({},n,c(e)):Object.assign({},n,e.state.range)}},"./packages/grafana-data/src/field/standardFieldConfigEditorRegistry.ts":(e,t,a)=>{"use strict";a.d(t,{N:()=>n,S:()=>r});var s=a("./packages/grafana-data/src/utils/Registry.ts");const n=new(a("./packages/grafana-data/src/field/FieldConfigOptionsRegistry.tsx").Z),r=new s.B},"./packages/grafana-data/src/field/thresholds.ts":(e,t,a)=>{"use strict";a.d(t,{yM:()=>n,m1:()=>r,pD:()=>i,bP:()=>o});var s=a("./packages/grafana-data/src/types/index.ts");const n={value:0,color:s.R3};function r(e,t){if(!t||0===t.length)return n;let a=t[0];for(const s of t){if(!(e>=s.value))break;a=s}return a}function i(e,t,a){const{thresholds:n}=e.config;return(null==n?void 0:n.mode)===s.H3.Percentage?r(100*a,null==n?void 0:n.steps):r(t,null==n?void 0:n.steps)}function o(e){return e.sort(((e,t)=>e.value-t.value))}},"./packages/grafana-data/src/index.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{AbstractLabelOperator:()=>i.K2,AlertState:()=>i.Z9,AnnotationChangeEvent:()=>O,AnnotationEventFieldSource:()=>i.Lj,AppEvents:()=>i.SI,AppPlugin:()=>i.k8,AppendedVectors:()=>o.l$,ArrayDataFrame:()=>l.iB,ArrayVector:()=>o.Gt,AsNumberVector:()=>o.sq,BasicValueMatcherOptions:()=>P.hM,BinaryOperationID:()=>r.LH,BinaryOperationVector:()=>o.rM,BuildInfo:()=>i.SP,BusEventBase:()=>g.m,BusEventWithPayload:()=>g.R,ByNamesMatcherMode:()=>c.Ys,ByNamesMatcherOptions:()=>c.VC,CSVHeaderStyle:()=>r.x5,CSVReader:()=>r.QM,CircularDataFrame:()=>l.a2,CircularVector:()=>o.dV,ConstantVector:()=>o.uI,CoreApp:()=>i.zj,CustomVariableSupport:()=>i.Mg,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>h.cB,DEFAULT_SAML_NAME:()=>i.bm,DashboardCursorSync:()=>i.mQ,DataFrameType:()=>i.Pz,DataFrameView:()=>l.US,DataHoverClearEvent:()=>S,DataHoverEvent:()=>k,DataLinkBuiltInVars:()=>r.WC,DataQueryErrorType:()=>i.eA,DataSelectEvent:()=>T,DataSourceApi:()=>i.MF,DataSourcePlugin:()=>i.hf,DataSourceVariableSupport:()=>i.gv,DataTopic:()=>i.w5,DataTransformerID:()=>c.Wk,DateTimeOptions:()=>d.Nz,DefaultTimeZone:()=>i.Ys,DocsId:()=>r.xV,EventBusSrv:()=>w,ExploreMode:()=>i.Ru,FALLBACK_COLOR:()=>i.R3,FeatureState:()=>i.CQ,FeatureToggles:()=>i.uv,FieldCache:()=>l.N,FieldColorMode:()=>h.WI,FieldColorModeId:()=>i.Sc,FieldConfigEditorBuilder:()=>r.vo,FieldConfigOptionsRegistry:()=>h.ZD,FieldConfigProperty:()=>i.qb,FieldMatcherID:()=>c.mi,FieldType:()=>i.fS,FormattedVector:()=>o.$Y,FrameGeometrySourceMode:()=>I,FrameMatcherID:()=>c.E4,GAUGE_DEFAULT_MAXIMUM:()=>i.Z3,GAUGE_DEFAULT_MINIMUM:()=>i.Hx,GrafanaConfig:()=>i.Nm,GrafanaPlugin:()=>i.Sg,GrafanaTheme2:()=>_.So,GrafanaThemeType:()=>i.Qu,ISO_8601:()=>d.VJ,IndexVector:()=>o.rm,InternalTimeZones:()=>d.RQ,LanguageProvider:()=>i.iL,LayoutMode:()=>s.LayoutMode,LayoutModes:()=>M,LegacyBaseMap:()=>r.Iw,LegacyGraphHoverClearEvent:()=>i.oi,LegacyGraphHoverEvent:()=>i.IA,LegacyMappingType:()=>r.HU,LegacyRangeMap:()=>r.ZH,LegacyValueMap:()=>r.e0,LegacyValueMapping:()=>r.GG,LicenseInfo:()=>i.TO,LiveChannelConnectionState:()=>i.yS,LiveChannelEventType:()=>i.FU,LiveChannelScope:()=>i.z,LiveChannelType:()=>i.SK,LoadingState:()=>i.Gu,LogLevel:()=>i.in,LogsDedupDescription:()=>i.Uv,LogsDedupStrategy:()=>i.Y4,LogsMetaKind:()=>i.Ku,LogsParsers:()=>r.bA,LogsSortOrder:()=>i.UV,MISSING_VALUE:()=>l.Yi,MappingType:()=>i.Hi,MatcherID:()=>c.Ff,MutableDataFrame:()=>l.vA,NavMenuItemType:()=>i.VO,NavSection:()=>i.yV,NodeGraphDataFrameFieldNames:()=>r.zG,NullValueMode:()=>i.Gl,OrgRole:()=>i.B5,PanelEvents:()=>i.Kh,PanelOptionsEditorBuilder:()=>r.rt,PanelPlugin:()=>z,PluginErrorCode:()=>i.w2,PluginIncludeType:()=>i.$_,PluginSignatureStatus:()=>i.Xy,PluginSignatureType:()=>i._Z,PluginState:()=>i.BV,PluginType:()=>i.zV,PreloadPlugin:()=>i.V7,QueryRunner:()=>V.r,QueryRunnerOptions:()=>V.z,RangeValueMatcherOptions:()=>P.qE,ReducerID:()=>c.gz,RegexpOrNamesMatcherOptions:()=>c.Py,Registry:()=>r.Bz,RenameByRegexTransformerOptions:()=>c.ao,SetFieldConfigOptionsArgs:()=>n.SetFieldConfigOptionsArgs,SortedVector:()=>o.oH,SpecialValueMatch:()=>i.eE,StandardOptionConfig:()=>n.StandardOptionConfig,StandardVariableSupport:()=>i.v6,SystemDateFormatsState:()=>d.zf,TIME_FORMAT:()=>i.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>i.rN,TIME_SERIES_TIME_FIELD_NAME:()=>i.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>i.M5,TextDisplayOptions:()=>B.VizTextDisplayOptions,ThemeBreakpoints:()=>_.v,ThemeBreakpointsKey:()=>_.Zs,ThemeColors:()=>_.aG,ThemeRichColor:()=>_.yl,ThemeShadows:()=>_.ly,ThemeShape:()=>_.wB,ThemeSpacing:()=>_.EQ,ThemeTransitions:()=>_.v$,ThemeTypography:()=>_.zc,ThemeTypographyVariant:()=>_.XZ,ThemeVisualizationColors:()=>_.Z2,ThemeVizColor:()=>_.Nz,ThemeVizHue:()=>_.h8,ThemeZIndices:()=>_.Kh,ThresholdsMode:()=>i.H3,TimeZoneResolver:()=>d.qb,TransformerRegistryItem:()=>c.xr,TransformerUIProps:()=>c.fb,UrlQueryMap:()=>r.Vq,UrlQueryValue:()=>r.yw,VAR_CALC:()=>h.pZ,VAR_CELL_PREFIX:()=>h.dE,VAR_FIELD_LABELS:()=>h.E1,VAR_FIELD_NAME:()=>h.n_,VAR_SERIES_NAME:()=>h.HU,ValueMatcherID:()=>c.mE,ValueMatcherOptions:()=>P.m8,VariableOrigin:()=>i.L8,VariableSuggestionsScope:()=>i.o3,VariableSupportBase:()=>i.Tq,VariableSupportType:()=>i.j2,VisualizationSuggestionScore:()=>i._,VisualizationSuggestionsBuilder:()=>i.mi,VisualizationSuggestionsListAppender:()=>i.sf,VizOrientation:()=>i.wm,WithLoadingIndicatorOptions:()=>r.rm,addDurationToDate:()=>d.Ks,addLogLevelToSeries:()=>r.Ar,anySeriesWithTimeField:()=>l.m$,anyToNumber:()=>r.IX,applyFieldOverrides:()=>h.SM,applyRawFieldOverrides:()=>h.Of,arrayUtils:()=>r.sq,binaryOperators:()=>r.nk,booleanOverrideProcessor:()=>h.W4,booleanValueFormatter:()=>p.IR,buildHistogram:()=>c.gY,calculateFieldStats:()=>r.zd,calculateLogsLabelStats:()=>r.lL,calculateStats:()=>r.i6,checkLogsError:()=>r.Mi,classicColors:()=>r.ZC,colorManipulator:()=>_.r8,compareArrayValues:()=>l.nl,compareDataFrameStructures:()=>l.Ch,convertOldAngularValueMappings:()=>r.Jb,createDimension:()=>l.q2,createFieldConfigRegistry:()=>L,createTheme:()=>_.jG,dataFrameFromJSON:()=>l.vP,dataFrameToJSON:()=>l.Y,dataLinksOverrideProcessor:()=>h.NN,dateMath:()=>d.Rn,dateTime:()=>d.CQ,dateTimeAsMoment:()=>d.C_,dateTimeForTimeZone:()=>d.GY,dateTimeFormat:()=>d.dq,dateTimeFormatISO:()=>d.lf,dateTimeFormatTimeAgo:()=>d.E8,dateTimeFormatWithAbbrevation:()=>d.Fm,dateTimeParse:()=>d.J,decodeFieldValueEntities:()=>l.Jy,deprecationWarning:()=>r.d9,displayNameOverrideProcessor:()=>h.W0,doStandardCalcs:()=>c.uP,durationToMilliseconds:()=>d.iX,ensureTimeField:()=>c.J_,escapeStringForRegex:()=>u.GE,escapeUnescapedString:()=>r.l3,eventFactory:()=>m.X,fieldColorModeRegistry:()=>h.WO,fieldMatchers:()=>c.Ls,fieldReducers:()=>c.TB,findCommonLabels:()=>r.FT,findHighlightChunksInText:()=>u.Xt,findMatchesInText:()=>u.lu,findUniqueLabels:()=>r.IU,formatLabels:()=>r.aA,formattedValueToString:()=>p.zc,frameMatchers:()=>c.Ac,getActiveThreshold:()=>h.m1,getAllValuesFromDimension:()=>l.r7,getColorForTheme:()=>r.L6,getColorFromHexRgbOrName:()=>r.eR,getColumnFromDimension:()=>l.$q,getColumnsFromDimension:()=>l.GV,getDataFrameRow:()=>l.fh,getDataSourceRef:()=>r.iU,getDataSourceUID:()=>r.BT,getDefaultRelativeTimeRange:()=>i.Rr,getDefaultTimeRange:()=>i.JK,getDimensionByName:()=>l.YP,getDisplayProcessor:()=>h.U_,getDisplayValueAlignmentFactors:()=>h.sg,getFieldColorMode:()=>h.QY,getFieldColorModeForField:()=>h.fD,getFieldConfigWithMinMax:()=>h.xD,getFieldDisplayName:()=>h.CZ,getFieldDisplayValues:()=>h.nG,getFieldDisplayValuesProxy:()=>h.zv,getFieldMatcher:()=>c.sq,getFieldSeriesColor:()=>h.YO,getFieldTypeFromValue:()=>l.DP,getFlotPairs:()=>r.k8,getFlotPairsConstant:()=>r.HE,getFrameDisplayName:()=>h.nf,getFrameMatchers:()=>c.b9,getHistogramFields:()=>c.qr,getLocale:()=>d.Kd,getLocaleData:()=>d.k4,getLogLevel:()=>r.ZO,getLogLevelFromKey:()=>r.jx,getMappedValue:()=>r.GR,getParser:()=>r.MT,getRawDisplayProcessor:()=>h.gE,getScaleCalculator:()=>h.NI,getSeriesTimeStep:()=>r.e4,getTimeField:()=>l.sV,getTimeZone:()=>d.Ze,getTimeZoneGroups:()=>d.$8,getTimeZoneInfo:()=>d.Pr,getTimeZones:()=>d.ZV,getValueFormat:()=>p.Cf,getValueFormats:()=>p.QW,getValueFormatterIndex:()=>p.Td,getValueFromDimension:()=>l.jC,getValueMatcher:()=>c.IG,getWeekdayIndex:()=>d.ig,guessFieldTypeForField:()=>l.fu,guessFieldTypeFromNameAndValue:()=>l._m,guessFieldTypeFromValue:()=>l.LI,guessFieldTypes:()=>l.SX,hasLinks:()=>h.gG,hasLogsContextSupport:()=>i.Q4,hasLogsVolumeSupport:()=>i.On,hasMsResolution:()=>r.fp,hasQueryExportSupport:()=>i.p,hasQueryImportSupport:()=>i.CZ,histogramBucketSizes:()=>c.Zi,histogramFieldInfo:()=>c.py,histogramFieldsToFrame:()=>c.zM,histogramFrameBucketMaxFieldName:()=>c.cO,histogramFrameBucketMinFieldName:()=>c.wL,histogramTransformer:()=>c.Op,identityOverrideProcessor:()=>h.kG,intervalToAbbreviatedDurationString:()=>d.vT,isBooleanUnit:()=>p.br,isDataFrame:()=>l.aY,isDataSourceRef:()=>r.cv,isDateTime:()=>d.v9,isLiveChannelJoinEvent:()=>i.mx,isLiveChannelLeaveEvent:()=>i.gH,isLiveChannelMessageEvent:()=>i.RL,isLiveChannelStatusEvent:()=>i.se,isSystemOverride:()=>i.v3,isSystemOverrideWithRef:()=>i.kf,isTableData:()=>l.Ji,isUnsignedPluginSignature:()=>i.xA,isValidDate:()=>d.AI,isValidDuration:()=>d.jO,isValidGoDuration:()=>d.IA,isValidLiveChannelAddress:()=>i.nU,localTimeFormat:()=>d.Ji,locale:()=>p.SP,locationUtil:()=>r.uT,makeClassES5Compatible:()=>r.s2,mapInternalLinkToExplore:()=>r._N,matchAllLabels:()=>r.VS,monacoLanguageRegistry:()=>N,numberOverrideProcessor:()=>h.Oh,objRemoveUndefined:()=>r.Hh,onUpdateDatasourceJsonDataOption:()=>r._R,onUpdateDatasourceJsonDataOptionChecked:()=>r.hz,onUpdateDatasourceJsonDataOptionSelect:()=>r.nx,onUpdateDatasourceOption:()=>r.z_,onUpdateDatasourceResetOption:()=>r.HD,onUpdateDatasourceSecureJsonDataOption:()=>r.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>r.TX,outerJoinDataFrames:()=>c.JP,parseDuration:()=>d.RA,parseFlags:()=>u.TL,parseLabels:()=>r.J8,parseLiveChannelAddress:()=>i.H7,rangeUtil:()=>d.cT,readCSV:()=>r.uP,reduceField:()=>c.Kx,renderMarkdown:()=>u.ap,renderTextPanelMarkdown:()=>u.xH,reverseDataFrame:()=>l.Y6,scaledUnits:()=>p.Qj,selectOverrideProcessor:()=>h.AE,serializeStateToUrlParam:()=>r.S,setLocale:()=>d.i_,setTimeZoneResolver:()=>d.K7,setWeekStart:()=>d.Ls,shallowCompare:()=>l.Vv,simpleCountUnit:()=>p.SR,sortDataFrame:()=>l.aK,sortInAscendingOrder:()=>r.DA,sortInDescendingOrder:()=>r.$8,sortLogRows:()=>r.$u,sortLogsResult:()=>r.j0,sortThresholds:()=>h.bP,standardEditorsRegistry:()=>h.SO,standardFieldConfigEditorRegistry:()=>h.N6,standardTransformers:()=>c.YR,standardTransformersRegistry:()=>c.Ze,stringFormater:()=>p.vb,stringOverrideProcessor:()=>h.op,stringStartsAsRegEx:()=>u.oH,stringToJsRegex:()=>u.jO,stringToMs:()=>u.e0,systemDateFormats:()=>d.U6,textUtil:()=>u.QX,thresholdsOverrideProcessor:()=>h.ZN,timeZoneAbbrevation:()=>d.Hk,timeZoneFormatUserFriendly:()=>d.Vs,toCSV:()=>r.MJ,toDataFrame:()=>l.g0,toDataFrameDTO:()=>l.og,toDuration:()=>d.np,toFilteredDataFrameDTO:()=>l.Aw,toFixed:()=>p.FH,toFixedScaled:()=>p.bn,toFixedUnit:()=>p.q2,toFloatOrUndefined:()=>u.dz,toIntegerOrUndefined:()=>u.By,toLegacyResponseData:()=>l.Zr,toLiveChannelId:()=>i.Aj,toNumberString:()=>u.PF,toOption:()=>r.Er,toPascalCase:()=>u.Mh,toUtc:()=>d.zh,transformDataFrame:()=>c.Hz,unEscapeStringFromRegex:()=>u.x6,unitOverrideProcessor:()=>h.VB,updateDatasourcePluginJsonDataOption:()=>r.tp,updateDatasourcePluginOption:()=>r.fd,updateDatasourcePluginResetOption:()=>r.Mf,updateDatasourcePluginSecureJsonDataOption:()=>r.uw,urlUtil:()=>r.Cj,validateFieldConfig:()=>h.gb,valueMappingsOverrideProcessor:()=>h.uj,valueMatchers:()=>c.U8,vectorator:()=>o.sD,withLoadingIndicator:()=>r.xc});var s={};a.r(s),a.d(s,{l:()=>M});var n={};a.r(n),a.d(n,{c:()=>z});var r=a("./packages/grafana-data/src/utils/index.ts"),i=a("./packages/grafana-data/src/types/index.ts"),o=a("./packages/grafana-data/src/vector/index.ts"),l=a("./packages/grafana-data/src/dataframe/index.ts"),c=a("./packages/grafana-data/src/transformations/index.ts"),d=a("./packages/grafana-data/src/datetime/index.ts"),u=a("./packages/grafana-data/src/text/index.ts"),p=a("./packages/grafana-data/src/valueFormats/index.ts"),h=a("./packages/grafana-data/src/field/index.ts"),m=a("./packages/grafana-data/src/events/eventFactory.ts"),g=a("./packages/grafana-data/src/events/types.ts"),f=a("../../opt/drone/yarncache/eventemitter3-npm-4.0.7-7afcdd74ae-1875311c42.zip/node_modules/eventemitter3/index.js"),b=a.n(f),v=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Observable.js"),x=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/filter.js");function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class w{constructor(){y(this,"emitter",void 0),this.emitter=new(b())}publish(e){this.emitter.emit(e.type,e)}subscribe(e,t){return this.getStream(e).subscribe({next:t})}getStream(e){return new v.y((t=>{const a=e=>{t.next(e)};return this.emitter.on(e.type,a),()=>{this.emitter.off(e.type,a)}}))}newScopedBus(e,t){return new j([e],this,t)}emit(e,t){"string"==typeof e?this.emitter.emit(e,{type:e,payload:t}):this.emitter.emit(e.name,{type:e.name,payload:t})}on(e,t,a){if(t.wrapper=e=>{t(e.payload)},"string"==typeof e?this.emitter.on(e,t.wrapper):this.emitter.on(e.name,t.wrapper),a){const s=a.$on("$destroy",(()=>{this.off(e,t),s()}))}}off(e,t){"string"!=typeof e?this.emitter.off(e.name,t.wrapper):this.emitter.off(e,t.wrapper)}removeAllListeners(){this.emitter.removeAllListeners()}}class j{constructor(e,t,a){y(this,"filterConfig",void 0),y(this,"filter",(e=>!this.filterConfig.onlyLocal||e.origin===this)),this.path=e,this.eventBus=t,this.filterConfig=null!=a?a:{onlyLocal:!1}}publish(e){e.origin||(e.origin=this),this.eventBus.publish(e)}getStream(e){return this.eventBus.getStream(e).pipe((0,x.h)(this.filter))}subscribe(e,t){return this.getStream(e).subscribe({next:t})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(e,t){return new j([...this.path,e],this,t)}}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class k extends g.R{}C(k,"type","data-hover");class S extends g.m{}C(S,"type","data-hover-clear");class T extends g.R{}C(T,"type","data-select");class O extends g.R{}C(O,"type","annotation-event");var _=a("./packages/grafana-data/src/themes/index.ts");const N=new(a("./packages/grafana-data/src/utils/Registry.ts").B);let I;!function(e){e.Auto="auto",e.Geohash="geohash",e.Coords="coords",e.Lookup="lookup"}(I||(I={}));var P=a("./packages/grafana-data/src/transformations/matchers/valueMatchers/types.ts");let M;!function(e){e.Grid="grid",e.List="list"}(M||(M={}));var F=a("./packages/grafana-data/src/utils/OptionsUIBuilders.ts"),A=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),D=a("./packages/grafana-data/src/field/FieldConfigOptionsRegistry.tsx"),$=a("./packages/grafana-data/src/field/standardFieldConfigEditorRegistry.ts");function L(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const a=new D.Z,s=$.N.list(),n={};if(e.useCustomConfig){const t=new F.vo;e.useCustomConfig(t);for(const e of t.getRegistry().list())if(e.isCustom=!0,e.id="custom."+e.id,R(e,s)){var r;const t=null!==(r=n[e.category[0]])&&void 0!==r?r:[];t.push(e),n[e.category[0]]=t}else a.register(e)}for(let t of s){if(e.disableStandardOptions){if(e.disableStandardOptions.indexOf(t.id)>-1)continue}if(e.standardOptions){var i,o;const a=null===(i=e.standardOptions[t.id])||void 0===i?void 0:i.defaultValue,s=null===(o=e.standardOptions[t.id])||void 0===o?void 0:o.settings;a&&(t=Object.assign({},t,{defaultValue:a})),s&&(t=Object.assign({},t,{settings:t.settings?Object.assign({},t.settings,s):s}))}if(a.register(t),t.category&&n[t.category[0]])for(let e of n[t.category[0]])a.register(e)}for(const e of a.list())if(e.path.indexOf("[")>0)throw new Error(`[${t}] Field config paths do not support arrays: ${e.id}`);return a}function R(e,t){return Boolean(t.find((t=>e.category&&t.category&&e.category[0]===t.category[0])))}function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class z extends i.Sg{constructor(e){super(),E(this,"_defaults",void 0),E(this,"_fieldConfigDefaults",{defaults:{},overrides:[]}),E(this,"_fieldConfigRegistry",void 0),E(this,"_initConfigRegistry",(()=>new h.ZD)),E(this,"optionsSupplier",void 0),E(this,"suggestionsSupplier",void 0),E(this,"panel",void 0),E(this,"editor",void 0),E(this,"onPanelMigration",void 0),E(this,"onPanelTypeChanged",void 0),E(this,"noPadding",void 0),E(this,"dataSupport",{annotations:!1,alertStates:!1}),E(this,"angularPanelCtrl",void 0),this.panel=e}get defaults(){let e=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const t=new F.rt;this.optionsSupplier(t,{data:[]});for(const a of t.getItems())null!=a.defaultValue&&(0,A.set)(e,a.path,a.defaultValue)}return e}get fieldConfigDefaults(){const e=this._fieldConfigDefaults.defaults;e.custom={};for(const t of this.fieldConfigRegistry.list())void 0!==t.defaultValue&&(0,A.set)(e,t.id,t.defaultValue);return{defaults:Object.assign({},e),overrides:this._fieldConfigDefaults.overrides}}setDefaults(e){return(0,r.d9)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=e,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(e){return(0,r.d9)("PanelPlugin","setEditor","setPanelOptions"),this.editor=e,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(e){return this.onPanelMigration=e,this}setPanelChangeHandler(e){return this.onPanelTypeChanged=e,this}setPanelOptions(e){return this.optionsSupplier=e,this}getPanelOptionsSupplier(){var e;return null!==(e=this.optionsSupplier)&&void 0!==e?e:()=>{}}setDataSupport(e){return this.dataSupport=Object.assign({},this.dataSupport,e),this}useFieldConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._initConfigRegistry=()=>L(e,this.meta.name),this}setSuggestionsSupplier(e){return this.suggestionsSupplier=e,this}getSuggestionsSupplier(){return this.suggestionsSupplier}}var V=a("./packages/grafana-data/src/types/queryRunner.ts"),B=a("./packages/grafana-schema/src/index.ts")},"./packages/grafana-data/src/text/index.ts":(e,t,a)=>{"use strict";a.d(t,{GE:()=>s.GE,Xt:()=>d.Xt,lu:()=>d.lu,TL:()=>d.TL,ap:()=>l,xH:()=>c,oH:()=>s.oH,jO:()=>s.jO,e0:()=>s.e0,QX:()=>u,dz:()=>s.dz,By:()=>s.By,PF:()=>s.PF,Mh:()=>s.Mh,x6:()=>s.x6});var s=a("./packages/grafana-data/src/text/string.ts"),n=a("../../opt/drone/yarncache/marked-npm-4.0.10-7e4da27560-46cd8ef1a7.zip/node_modules/marked/lib/marked.esm.js"),r=a("./packages/grafana-data/src/text/sanitize.ts");let i=!1;const o={pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1};function l(e,t){i||(n.TU.setOptions(Object.assign({},o)),i=!0);const a=(0,n.TU)(e||"");return null!=t&&t.noSanitize?a:(0,r.Nw)(a)}function c(e,t){i||(n.TU.setOptions(Object.assign({},o)),i=!0);const a=(0,n.TU)(e||"");return null!=t&&t.noSanitize?a:(0,r.he)(a)}var d=a("./packages/grafana-data/src/text/text.ts");const u={escapeHtml:r.Xv,hasAnsiCodes:r.oT,sanitize:r.Nw,sanitizeTextPanelContent:r.he,sanitizeUrl:r.Nm}},"./packages/grafana-data/src/text/string.ts":(e,t,a)=>{"use strict";a.d(t,{GE:()=>o,x6:()=>l,oH:()=>c,jO:()=>d,e0:()=>u,PF:()=>p,By:()=>h,dz:()=>m,Mh:()=>g});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");const n="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",r=new RegExp(n,"g"),i=new RegExp("(\\\\)"+n,"g"),o=e=>e?e.replace(r,"\\$1"):e,l=e=>e?e.replace(i,"$2"):e;function c(e){return!!e&&"/"===e[0]}function d(e){if(!c(e))return new RegExp(`^${e}$`);const t=e.match(new RegExp("^/(.*?)/(g?i?m?y?)$"));if(!t)throw new Error(`'${e}' is not a valid regular expression.`);return new RegExp(t[1],t[2])}function u(e){if(!e)return 0;const t=parseInt(e,10),a=e.substr(String(t).length),s=36e5;switch(a){case"s":return 1e3*t;case"m":return 6e4*t;case"h":return t*s;case"d":return 864e5*t;default:if(!a)return isNaN(t)?0:t;throw new Error("Not supported unit: "+a)}}function p(e){return null!=e&&Number.isFinite(e)?e.toString():""}function h(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function m(e){if(!e)return;const t=parseFloat(e);return isNaN(t)?void 0:t}const g=e=>{const t=(0,s.camelCase)(e);return t.charAt(0).toUpperCase()+t.substring(1)}},"./packages/grafana-data/src/text/text.ts":(e,t,a)=>{"use strict";function s(e){let{searchWords:t,textToHighlight:a}=e;const s=[];for(const e of t)s.push(...n(a,e));return s}a.d(t,{Xt:()=>s,lu:()=>n,TL:()=>i});function n(e,t){if(!e||!t)return[];const a=[],{cleaned:s,flags:n}=i((e=>e.replace(/[[{(][\w,.-?:*+]+$/,""))(t));let r;try{r=new RegExp(`(?:${s})`,n)}catch(e){return a}return e.replace(r,(function(e){if(e){var t;const s=(t=(arguments.length<=1?0:arguments.length-1)-2+1)<1||arguments.length<=t?void 0:arguments[t];a.push({text:e,start:s,length:e.length,end:s+e.length})}return""})),a}const r=/\(\?([ims-]+)\)/g;function i(e){const t=new Set(["g"]);return{cleaned:e.replace(r,((e,a)=>{const s=a.startsWith("-");for(let e=0;e<a.length;++e){const n=a.charAt(e);s||"-"===a.charAt(e-1)?t.delete(n):"-"!==n&&t.add(n)}return""})),flags:Array.from(t).join("")}}},"./packages/grafana-data/src/themes/breakpoints.ts":(e,t,a)=>{"use strict";function s(){const e="px",t={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};return{values:t,up:function(e){return`@media (min-width:${"number"==typeof e?e:t[e]}px)`},down:function(e){return`@media (max-width:${("number"==typeof e?e:t[e])-.05}px)`},keys:["xs","sm","md","lg","xl","xxl"],unit:e}}a.d(t,{_:()=>s})},"./packages/grafana-data/src/themes/colorManipulator.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{hexToRgb:()=>i,rgbToHex:()=>o,asHexString:()=>l,hslToRgb:()=>c,decomposeColor:()=>d,recomposeColor:()=>u,getContrastRatio:()=>p,getLuminance:()=>h,emphasize:()=>m,alpha:()=>g,darken:()=>f,lighten:()=>b});var s=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),n=a.n(s);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),a)}function i(e){e=e.substr(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let a=e.match(t);return a&&1===a[0].length&&(a=a.map((e=>e+e))),a?`rgb${4===a.length?"a":""}(${a.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}function o(e){if(0===e.indexOf("#"))return e;const{values:t}=d(e);return`#${t.map((e=>function(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}(e))).join("")}`}function l(e){if("#"===e[0])return e;const t=n()(e);return 1===t.getAlpha()?t.toHexString():t.toHex8String()}function c(e){const t=d(e),{values:a}=t,s=a[0],n=a[1]/100,r=a[2]/100,i=n*Math.min(r,1-r),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+s/30)%12;return r-i*Math.max(Math.min(t-3,9-t,1),-1)};let l="rgb";const c=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===t.type&&(l+="a",c.push(a[3])),u({type:l,values:c})}function d(e){if("string"!=typeof e)return e;if("#"===e.charAt(0))return d(i(e));const t=e.indexOf("("),a=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(a))throw new Error(`Unsupported '${e}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let s,n=e.substring(t+1,e.length-1);if("color"===a){if(n=n.split(" "),s=n.shift(),4===n.length&&"/"===n[3].charAt(0)&&(n[3]=n[3].substr(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s))throw new Error(`Unsupported ${s} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else n=n.split(",");return n=n.map((e=>parseFloat(e))),{type:a,values:n,colorSpace:s}}function u(e){const{type:t,colorSpace:a}=e;let s=e.values;return-1!==t.indexOf("rgb")?s=s.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),s=-1!==t.indexOf("color")?`${a} ${s.join(" ")}`:`${s.join(", ")}`,`${t}(${s})`}function p(e,t,a){const s=h(e),n=h(t,a);return(Math.max(s,n)+.05)/(Math.min(s,n)+.05)}function h(e,t){const a=d(e);let s="hsl"===a.type?d(c(e)).values:a.values;if(t&&"rgba"===a.type){const e=d(t),a=s[3];s[0]=s[0]*a+e.values[0]*(1-a),s[1]=s[1]*a+e.values[1]*(1-a),s[2]=s[2]*a+e.values[2]*(1-a)}const n=s.map((e=>("color"!==a.type&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)));return Number((.2126*n[0]+.7152*n[1]+.0722*n[2]).toFixed(3))}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return h(e)>.5?f(e,t):b(e,t)}function g(e,t){if(""===e)return"#000000";if(t=r(t),"#"===e[0]){if(9===e.length)e=e.substring(0,7);else if(e.length<=5){let t="#";for(let a=1;a<4;a++)t+=e[a]+e[a];e=t}return e+Math.round(255*t).toString(16).padStart(2,"0")}if("("===e[3])return e.replace(")",`, ${t})`);if("("===e[4])return e.substring(0,e.lastIndexOf(","))+`, ${t})`;const a=d(e);return"color"===a.type?a.values[3]=`/${t}`:a.values[3]=t,u(a)}function f(e,t){const a=d(e);if(t=r(t),-1!==a.type.indexOf("hsl"))a.values[2]*=1-t;else if(-1!==a.type.indexOf("rgb")||-1!==a.type.indexOf("color"))for(let e=0;e<3;e+=1)a.values[e]*=1-t;return u(a)}function b(e,t){const a=d(e);if(t=r(t),-1!==a.type.indexOf("hsl"))a.values[2]+=(100-a.values[2])*t;else if(-1!==a.type.indexOf("rgb"))for(let e=0;e<3;e+=1)a.values[e]+=(255-a.values[e])*t;else if(-1!==a.type.indexOf("color"))for(let e=0;e<3;e+=1)a.values[e]+=(1-a.values[e])*t;return u(a)}},"./packages/grafana-data/src/themes/createColors.ts":(e,t,a)=>{"use strict";a.d(t,{i:()=>d});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/themes/colorManipulator.ts"),r=a("./packages/grafana-data/src/themes/palette.ts");const i=["primary","secondary","info","warning","success","error","tonalOffset","hoverFactor","contrastThreshold"];function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l{constructor(){o(this,"mode","dark"),o(this,"whiteBase","204, 204, 220"),o(this,"border",{weak:`rgba(${this.whiteBase}, 0.07)`,medium:`rgba(${this.whiteBase}, 0.15)`,strong:`rgba(${this.whiteBase}, 0.25)`}),o(this,"text",{primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:r.D.blueDarkText,maxContrast:r.D.white}),o(this,"primary",{main:r.D.blueDarkMain,text:r.D.blueDarkText,border:r.D.blueDarkText}),o(this,"secondary",{main:`rgba(${this.whiteBase}, 0.16)`,shade:`rgba(${this.whiteBase}, 0.20)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:this.border.strong}),o(this,"info",this.primary),o(this,"error",{main:r.D.redDarkMain,text:r.D.redDarkText}),o(this,"success",{main:r.D.greenDarkMain,text:r.D.greenDarkText}),o(this,"warning",{main:r.D.orangeDarkMain,text:r.D.orangeDarkText}),o(this,"background",{canvas:r.D.gray05,primary:r.D.gray10,secondary:r.D.gray15}),o(this,"action",{hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38}),o(this,"gradients",{brandHorizontal:" linear-gradient(270deg, #F55F3E 0%, #FF8833 100%);",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%);"}),o(this,"contrastThreshold",3),o(this,"hoverFactor",.03),o(this,"tonalOffset",.15)}}class c{constructor(){o(this,"mode","light"),o(this,"blackBase","36, 41, 46"),o(this,"primary",{main:r.D.blueLightMain,border:r.D.blueLightText,text:r.D.blueLightText}),o(this,"text",{primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:r.D.black}),o(this,"border",{weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`}),o(this,"secondary",{main:`rgba(${this.blackBase}, 0.16)`,shade:`rgba(${this.blackBase}, 0.20)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.strong}),o(this,"info",{main:r.D.blueLightMain,text:r.D.blueLightText}),o(this,"error",{main:r.D.redLightMain,text:r.D.redLightText,border:r.D.redLightText}),o(this,"success",{main:r.D.greenLightMain,text:r.D.greenLightText}),o(this,"warning",{main:r.D.orangeLightMain,text:r.D.orangeLightText}),o(this,"background",{canvas:r.D.gray90,primary:r.D.white,secondary:r.D.gray100}),o(this,"action",{hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38}),o(this,"gradients",{brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%);",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%);"}),o(this,"contrastThreshold",3),o(this,"hoverFactor",.03),o(this,"tonalOffset",.2)}}function d(e){var t;const a=new l,r=new c,o="dark"===(null!==(t=e.mode)&&void 0!==t?t:"dark")?a:r,{primary:d=o.primary,secondary:u=o.secondary,info:p=o.info,warning:h=o.warning,success:m=o.success,error:g=o.error,tonalOffset:f=o.tonalOffset,hoverFactor:b=o.hoverFactor,contrastThreshold:v=o.contrastThreshold}=e,x=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,i);function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;const s=(0,n.getContrastRatio)(a.text.maxContrast,e,o.background.primary)>=t?a.text.maxContrast:r.text.maxContrast;return s}const w=e=>{let{color:t,name:a}=e;if(t=Object.assign({},t,{name:a}),!t.main)throw new Error(`Missing main color for ${a}`);return t.text||(t.text=t.main),t.border||(t.border=t.text),t.shade||(t.shade="light"===o.mode?(0,n.darken)(t.main,f):(0,n.lighten)(t.main,f)),t.transparent||(t.transparent="light"===o.mode?(0,n.alpha)(t.main,.08):(0,n.alpha)(t.main,.15)),t.contrastText||(t.contrastText=y(t.main)),t};return(0,s.merge)(Object.assign({},o,{primary:w({color:d,name:"primary"}),secondary:w({color:u,name:"secondary"}),info:w({color:p,name:"info"}),error:w({color:g,name:"error"}),success:w({color:m,name:"success"}),warning:w({color:h,name:"warning"}),getContrastText:y,emphasize:(e,t)=>(0,n.emphasize)(e,null!=t?t:b)}),x)}},"./packages/grafana-data/src/themes/createShadows.ts":(e,t,a)=>{"use strict";function s(e){return"dark"===e.mode?{z1:"0px 1px 2px rgba(24, 26, 27, 0.75)",z2:"0px 4px 8px rgba(24, 26, 27, 0.75)",z3:"0px 8px 24px rgb(1,4,9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}a.d(t,{G:()=>s})},"./packages/grafana-data/src/themes/createShape.ts":(e,t,a)=>{"use strict";function s(e){var t;const a=null!==(t=e.borderRadius)&&void 0!==t?t:2;return{borderRadius:e=>`${(null!=e?e:1)*a}px`}}a.d(t,{r:()=>s})},"./packages/grafana-data/src/themes/createSpacing.ts":(e,t,a)=>{"use strict";function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gridSize:t=8}=e,a=e=>"string"==typeof e?e:e*t,s=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return 0===t.length&&(t[0]=1),t.map((e=>{const t=a(e);return"number"==typeof t?`${t}px`:t})).join(" ")};return s.gridSize=t,s}a.d(t,{_:()=>s})},"./packages/grafana-data/src/themes/createTransitions.ts":(e,t,a)=>{"use strict";a.d(t,{ig:()=>l});const s={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},n={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:a=n.standard,easing:r=s.easeInOut,delay:i=0}=t;return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof a?a:o(a)} ${r} ${"string"==typeof i?i:o(i)}`)).join(",")}function i(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function o(e){return`${Math.round(e)}ms`}function l(){return{create:r,duration:n,easing:s,getAutoHeightDuration:i}}},"./packages/grafana-data/src/themes/createTypography.ts":(e,t,a)=>{"use strict";a.d(t,{f:()=>r});const s='"Roboto", "Helvetica", "Arial", sans-serif',n="'Roboto Mono', monospace";function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{fontFamily:a=s,fontFamilyMonospace:r=n,fontSize:o=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:d=500,fontWeightBold:u=500,htmlFontSize:p=14}=t;const h=o/14,m=e=>e/p*h+"rem",g=(e,t,n,r,o)=>Object.assign({fontFamily:a,fontWeight:e,fontSize:m(t),lineHeight:n},a===s?{letterSpacing:`${i(r/t)}em`}:{},o),f={h1:g(l,28,1.167,-.25),h2:g(l,24,1.2,0),h3:g(c,21,1.167,0),h4:g(c,18,1.235,.25),h5:g(c,16,1.334,0),h6:g(d,14,1.6,.15),body:g(c,14,1.5,.15),bodySmall:g(c,12,1.5,.15)},b={base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"};return Object.assign({htmlFontSize:p,pxToRem:m,fontFamily:a,fontFamilyMonospace:r,fontSize:o,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:d,fontWeightBold:u,size:b},f)}function i(e){return Math.round(1e5*e)/1e5}},"./packages/grafana-data/src/themes/createVisualizationColors.ts":(e,t,a)=>{"use strict";a.d(t,{x:()=>n});var s=a("./packages/grafana-data/src/types/index.ts");function n(e){let t=[];"dark"===e.mode?t=[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]:"light"===e.mode&&(t=[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]);const a={};for(const e of t)for(const t of e.shades)if(a[t.name]=t.color,t.aliases)for(const e of t.aliases)a[e]=t.color;a.transparent="rgba(0,0,0,0)",a["panel-bg"]=e.background.primary,a.text=e.text.primary;return{hues:t,palette:["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],getColorByName:e=>{if(!e)return s.R3;const t=a[e];if(t)return t;if("#"===e[0])return e;if(e.indexOf("rgb")>-1)return e;const n=r[e.toLowerCase()];return n?(a[e]=n,n):e}}}const r={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},"./packages/grafana-data/src/themes/index.ts":(e,t,a)=>{"use strict";a.d(t,{jG:()=>s.j,yl:()=>n.y,So:()=>n.S,aG:()=>r.ThemeColors,v:()=>i.ThemeBreakpoints,Zs:()=>i.ThemeBreakpointsKey,ly:()=>o.ThemeShadows,wB:()=>l.ThemeShape,zc:()=>c.ThemeTypography,XZ:()=>c.ThemeTypographyVariant,v$:()=>d.ThemeTransitions,EQ:()=>u.ThemeSpacing,Kh:()=>p.ThemeZIndices,Z2:()=>h.ThemeVisualizationColors,Nz:()=>h.ThemeVizColor,h8:()=>h.ThemeVizHue,r8:()=>m});var s=a("./packages/grafana-data/src/themes/createTheme.ts"),n=a("./packages/grafana-data/src/themes/types.ts"),r=a("./packages/grafana-data/src/themes/createColors.ts"),i=a("./packages/grafana-data/src/themes/breakpoints.ts"),o=a("./packages/grafana-data/src/themes/createShadows.ts"),l=a("./packages/grafana-data/src/themes/createShape.ts"),c=a("./packages/grafana-data/src/themes/createTypography.ts"),d=a("./packages/grafana-data/src/themes/createTransitions.ts"),u=a("./packages/grafana-data/src/themes/createSpacing.ts"),p=a("./packages/grafana-data/src/themes/zIndex.ts"),h=a("./packages/grafana-data/src/themes/createVisualizationColors.ts"),m=a("./packages/grafana-data/src/themes/colorManipulator.ts")},"./packages/grafana-data/src/themes/types.ts":()=>{},"./packages/grafana-data/src/themes/zIndex.ts":(e,t,a)=>{"use strict";a.d(t,{W:()=>s});const s={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061}},"./packages/grafana-data/src/transformations/index.ts":(e,t,a)=>{"use strict";a.d(t,{Ys:()=>W.Ys,VC:()=>W.ByNamesMatcherOptions,Wk:()=>i.W,mi:()=>r.mi,E4:()=>r.E4,Ff:()=>r.Ff,gz:()=>E.gz,Py:()=>W.RegexpOrNamesMatcherOptions,ao:()=>s.RenameByRegexTransformerOptions,xr:()=>n.TransformerRegistryItem,fb:()=>n.TransformerUIProps,mE:()=>r.mE,gY:()=>I.gY,uP:()=>E.uP,J_:()=>L,Ls:()=>o.Ls,TB:()=>E.TB,Ac:()=>o.Ac,sq:()=>o.sq,b9:()=>o.b9,qr:()=>I.qr,IG:()=>o.IG,Zi:()=>I.Zi,py:()=>I.py,zM:()=>I.zM,cO:()=>I.cO,wL:()=>I.wL,Op:()=>I.Op,JP:()=>G.JP,Kx:()=>E.Kx,YR:()=>R,Ze:()=>B,Hz:()=>q,U8:()=>o.U8});var s={};a.r(s),a.d(s,{J:()=>O});var n={};a.r(n),a.d(n,{Z:()=>B});var r=a("./packages/grafana-data/src/transformations/matchers/ids.ts"),i=a("./packages/grafana-data/src/transformations/transformers/ids.ts"),o=a("./packages/grafana-data/src/transformations/matchers.ts"),l=a("./packages/grafana-data/src/transformations/transformers/reduce.ts"),c=a("./packages/grafana-data/src/transformations/transformers/concat.ts"),d=a("./packages/grafana-data/src/transformations/transformers/calculateField.ts"),u=a("./packages/grafana-data/src/transformations/transformers/filter.ts"),p=a("./packages/grafana-data/src/transformations/transformers/filterByName.ts"),h=a("./packages/grafana-data/src/transformations/transformers/noop.ts"),m=a("./packages/grafana-data/src/transformations/transformers/filterByRefId.ts"),g=a("./packages/grafana-data/src/transformations/transformers/order.ts"),f=a("./packages/grafana-data/src/transformations/transformers/organize.ts"),b=a("./packages/grafana-data/src/transformations/transformers/seriesToColumns.ts"),v=a("./packages/grafana-data/src/transformations/transformers/seriesToRows.ts"),x=a("./packages/grafana-data/src/transformations/transformers/rename.ts"),y=a("./packages/grafana-data/src/transformations/transformers/labelsToFields.ts"),w=a("./packages/grafana-data/src/transformations/transformers/ensureColumns.ts"),j=a("./packages/grafana-data/src/transformations/transformers/groupBy.ts"),C=a("./packages/grafana-data/src/transformations/transformers/sortBy.ts"),k=a("./packages/grafana-data/src/transformations/transformers/merge.ts"),S=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),T=a("./packages/grafana-data/src/field/fieldState.ts");const O={id:i.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:e=>t=>t.pipe((0,S.U)((t=>Array.isArray(t)&&0!==t.length?t.map(_(e)):t)))},_=e=>t=>{const a=new RegExp(e.regex),s=t.fields.map((s=>{const n=(0,T.C)(s,t);if(!a.test(n))return s;const r=n.replace(a,e.renamePattern);return Object.assign({},s,{config:Object.assign({},s.config,{displayName:r}),state:Object.assign({},s.state,{displayName:r})})}));return Object.assign({},t,{fields:s})};var N=a("./packages/grafana-data/src/transformations/transformers/filterByValue.ts"),I=a("./packages/grafana-data/src/transformations/transformers/histogram.ts"),P=a("./packages/grafana-data/src/types/dataFrame.ts"),M=a("./packages/grafana-data/src/datetime/index.ts"),F=a("./packages/grafana-data/src/vector/index.ts");const A={id:i.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:e=>t=>t.pipe((0,S.U)((t=>A.transformer(e)(t)))),transformer:e=>t=>{if(!Array.isArray(t)||0===t.length)return t;const a=function(e,t){if(!e.conversions.length)return t;const a=t.map((e=>Object.assign({},e)));for(const t of e.conversions){if(!t.targetField)continue;const e=o.Ls.get(r.mi.byName).get(t.targetField);for(const s of a)s.fields=s.fields.map((n=>e(n,s,a)?D(n,t):n))}return a}(e,t);return a||[]}};function D(e,t){switch(t.destinationType){case P.fS.time:return L(e,t.dateFormat);case P.fS.number:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++){const a=+t[e];t[e]=Number.isFinite(a)?a:null}return Object.assign({},e,{type:P.fS.number,values:new F.Gt(t)})}(e);case P.fS.string:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)t[e]=`${t[e]}`;return Object.assign({},e,{type:P.fS.string,values:new F.Gt(t)})}(e);case P.fS.boolean:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)t[e]=Boolean(!!t[e]);return Object.assign({},e,{type:P.fS.boolean,values:new F.Gt(t)})}(e);case P.fS.other:return function(e){const t=e.values.toArray().slice();for(let e=0;e<t.length;e++)try{t[e]=JSON.parse(t[e])}catch{t[e]=null}return Object.assign({},e,{type:P.fS.other,values:new F.Gt(t)})}(e);default:return e}}const $=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3})?Z$/;function L(e,t){const a="number"==typeof e.values.get(0);return e.type===P.fS.time&&a?e:a?Object.assign({},e,{type:P.fS.time}):function(e,t){let a=t?{format:t}:void 0;const s=e.values.toArray().slice();let n=s.find((e=>null!=e)),r="string"==typeof n&&$.test(n);for(let e=0;e<s.length;e++)if(s[e]){let t=r?Date.parse(s[e]):(0,M.J)(s[e],a).valueOf();s[e]=Number.isFinite(t)?t:null}else s[e]=null;return Object.assign({},e,{type:P.fS.time,values:new F.Gt(s)})}(e,t)}const R={noopTransformer:h.d,filterFieldsTransformer:u.P,filterFieldsByNameTransformer:p.w,filterFramesTransformer:u.u,filterFramesByRefIdTransformer:m.J,filterByValueTransformer:N.JA,orderFieldsTransformer:g.t,organizeFieldsTransformer:f.u,reduceTransformer:l.mf,concatenateTransformer:c.aE,calculateFieldTransformer:d.U,seriesToColumnsTransformer:b.u,seriesToRowsTransformer:v.D,renameFieldsTransformer:x.M,labelsToFieldsTransformer:y.r,ensureColumnsTransformer:w.W,groupByTransformer:j.i,sortByTransformer:C.t,mergeTransformer:k.R,renameByRegexTransformer:O,histogramTransformer:I.Op,convertFieldTypeTransformer:A};var E=a("./packages/grafana-data/src/transformations/fieldReducer.ts"),z=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),V=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");const B=new(a("./packages/grafana-data/src/utils/Registry.ts").B),U=e=>t=>{var a;const s=B.get(e.id);if(!s)return t;const n=null!==(a=s.transformation.defaultOptions)&&void 0!==a?a:{},r=Object.assign({},n,e.options);return t.pipe((0,V.z)((e=>(0,z.of)(e).pipe(s.transformation.operator(r),H(e,s)))))},H=(e,t)=>a=>a.pipe((0,S.U)((a=>{if(a===e)return a;for(const e of a)e.meta||(e.meta={}),e.meta.transformations?e.meta.transformations=[...e.meta.transformations,t.id]:e.meta.transformations=[t.id];return a})));function q(e,t){const a=(0,z.of)(t);if(!e.length)return a;const s=[];for(let t=0;t<e.length;t++){const a=e[t];a.disabled||s.push(U(a))}return a.pipe.apply(a,s)}var W=a("./packages/grafana-data/src/transformations/matchers/nameMatcher.ts"),G=a("./packages/grafana-data/src/transformations/transformers/joinDataFrames.ts")},"./packages/grafana-data/src/transformations/matchers.ts":(e,t,a)=>{"use strict";a.d(t,{Ls:()=>m,Ac:()=>g,U8:()=>f,sq:()=>b,b9:()=>v,IG:()=>x});var s=a("./packages/grafana-data/src/transformations/matchers/predicates.ts"),n=a("./packages/grafana-data/src/transformations/matchers/nameMatcher.ts"),r=a("./packages/grafana-data/src/transformations/matchers/fieldTypeMatcher.ts"),i=a("./packages/grafana-data/src/transformations/matchers/refIdMatcher.ts"),o=a("./packages/grafana-data/src/utils/Registry.ts"),l=a("./packages/grafana-data/src/transformations/matchers/valueMatchers/nullMatchers.ts"),c=a("./packages/grafana-data/src/transformations/matchers/valueMatchers/numericMatchers.ts"),d=a("./packages/grafana-data/src/transformations/matchers/valueMatchers/equalMatchers.ts"),u=a("./packages/grafana-data/src/transformations/matchers/valueMatchers/rangeMatchers.ts"),p=a("./packages/grafana-data/src/transformations/matchers/simpleFieldMatcher.ts"),h=a("./packages/grafana-data/src/transformations/matchers/valueMatchers/regexMatchers.ts");const m=new o.B((()=>[...(0,s.Ty)(),...(0,r.N)(),...(0,n.Lk)(),...(0,p.z)()])),g=new o.B((()=>[...(0,s.fX)(),...(0,n.cC)(),...(0,i.n)()])),f=new o.B((()=>[...(0,l.a)(),...(0,c.H)(),...(0,d.T)(),...(0,u.G)(),...(0,h.G)()]));function b(e){const t=m.get(e.id);if(!t)throw new Error("Unknown field matcher: "+e.id);return t.get(e.options)}function v(e){const t=g.get(e.id);if(!t)throw new Error("Unknown frame matcher: "+e.id);return t.get(e.options)}function x(e){const t=f.get(e.id);if(!t)throw new Error("Unknown value matcher: "+e.id);return t.get(e.options)}},"./packages/grafana-data/src/transformations/matchers/nameMatcher.ts":(e,t,a)=>{"use strict";a.d(t,{Ys:()=>i,Lk:()=>m,cC:()=>g});var s=a("./packages/grafana-data/src/transformations/matchers/ids.ts"),n=a("./packages/grafana-data/src/text/string.ts"),r=a("./packages/grafana-data/src/field/fieldState.ts");let i;!function(e){e.exclude="exclude",e.include="include"}(i||(i={}));const o={id:s.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:e=>(t,a,s)=>e===t.name||(0,r.C)(t,a,s)===e,getOptionsDisplayText:e=>`Field name: ${e}`},l={id:s.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:i.include,names:[]},get:e=>{const{names:t,mode:a=i.include}=e,s=new Set(null!=t?t:[]),n=(e,t,a)=>s.has(e.name)||s.has((0,r.C)(e,t,a));return a===i.exclude?(e,t,a)=>!n(e,t,a):n},getOptionsDisplayText:e=>{const{names:t,mode:a}=e,s=(null!=t?t:[]).join(", ");return a===i.exclude?`All except: ${s}`:`All of: ${s}`}},c={id:s.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:e=>{const t=p(e);return(e,a,s)=>{const n=(0,r.C)(e,a,s);return!!t&&t.test(n)}},getOptionsDisplayText:e=>`Field name by pattern: ${e}`},d={id:s.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:e=>(t,a,s)=>a.refId===e,getOptionsDisplayText:e=>`Math all fields returned by query with reference ID: ${e}`},u={id:s.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:e=>{var t;const a=c.get((null==e?void 0:e.pattern)||""),s=l.get({mode:i.include,names:null!==(t=null==e?void 0:e.names)&&void 0!==t?t:[]});return(e,t,n)=>s(e,t,n)||a(e,t,n)},getOptionsDisplayText:e=>{var t,a,s;return`Field name by pattern: ${null!==(t=null==e?void 0:e.pattern)&&void 0!==t?t:""} or names: ${null!==(a=null==e||null===(s=e.names)||void 0===s?void 0:s.join(","))&&void 0!==a?a:""}`}},p=e=>{if(e)try{return(0,n.jO)(e)}catch(e){return void console.error(e)}},h={id:s.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:e=>{const t=(0,n.jO)(e);return e=>t.test(e.name||"")},getOptionsDisplayText:e=>`Frame name: ${e}`};function m(){return[o,c,l,u,d]}function g(){return[h]}},"./packages/grafana-data/src/transformations/matchers/valueMatchers/types.ts":()=>{},"./packages/grafana-data/src/transformations/transformers/calculateField.ts":(e,t,a)=>{"use strict";a.d(t,{ie:()=>v,U:()=>w,h:()=>C});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=a("./packages/grafana-data/src/types/index.ts"),r=a("./packages/grafana-data/src/transformations/transformers/ids.ts"),i=a("./packages/grafana-data/src/transformations/fieldReducer.ts"),o=a("./packages/grafana-data/src/transformations/matchers.ts"),l=a("./packages/grafana-data/src/transformations/matchers/ids.ts"),c=a("./packages/grafana-data/src/vector/RowVector.ts"),d=a("./packages/grafana-data/src/vector/index.ts"),u=a("./packages/grafana-data/src/vector/AsNumberVector.ts"),p=a("./packages/grafana-data/src/dataframe/processDataFrame.ts"),h=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),m=a("./packages/grafana-data/src/utils/binaryOperators.ts"),g=a("./packages/grafana-data/src/transformations/transformers/ensureColumns.ts"),f=a("./packages/grafana-data/src/field/index.ts"),b=a("./packages/grafana-data/src/transformations/transformers/noop.ts");let v;!function(e){e.ReduceRow="reduceRow",e.BinaryOperation="binary"}(v||(v={}));const x={reducer:i.gz.sum},y={left:"",operator:m.L.Add,right:""},w={id:r.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:v.ReduceRow,reduce:{reducer:i.gz.sum}},operator:e=>t=>{const a=e&&!1!==e.timeSeries?g.W.operator(null):b.d.operator({});return t.pipe(a,(0,s.U)((t=>{var a;const s=null!==(a=e.mode)&&void 0!==a?a:v.ReduceRow;let r;return s===v.ReduceRow?r=function(e,t){var a;let s=(0,o.sq)({id:l.mi.numeric});e.include&&e.include.length&&(s=(0,o.sq)({id:l.mi.byNames,options:{names:e.include}}));const r=i.TB.get(e.reducer);if(!r)throw new Error(`Unknown reducer: ${e.reducer}`);const u=null!==(a=r.reduce)&&void 0!==a?a:i.uP,p=e.nullValueMode===n.Gl.Ignore,h=e.nullValueMode===n.Gl.AsZero;return a=>{const r=[];for(const e of a.fields)s(e,a,t)&&r.push(e.values);const i=new c.C(r),o={name:"temp",values:i,type:n.fS.number,config:{}},l=[];for(let t=0;t<a.length;t++){i.rowIndex=t;const a=u(o,p,h)[e.reducer];l.push(a)}return new d.Gt(l)}}((0,h.defaults)(e.reduce,x),t):s===v.BinaryOperation&&(r=function(e,t){const a=m.n.getIfExists(e.operator);return s=>{const n=j(s,e.left,t),r=j(s,e.right,t);if(n&&r&&a)return new d.rM(n,r,a.operation)}}((0,h.defaults)(e.binary,y),t)),r?t.map((t=>{const a=r(t);if(!a)return t;const s={name:C(e),type:n.fS.number,config:{},values:a};let i=[];if(e.replaceFields){const{timeField:a}=(0,p.sV)(t);i=a&&!1!==e.timeSeries?[a,s]:[s]}else i=[...t.fields,s];return Object.assign({},t,{fields:i})})):t})))}};function j(e,t,a){if(!t)return;for(const s of e.fields)if(t===(0,f.CZ)(s,e,a))return s.type===n.fS.boolean?new u.s(s.values):s.values;const s=parseFloat(t);return isNaN(s)?void 0:new d.uI(s,e.length)}function C(e){var t;if(null!==(t=e.alias)&&void 0!==t&&t.length)return e.alias;if(e.mode===v.BinaryOperation){var a,s,n;const{binary:t}=e;return`${null!==(a=null==t?void 0:t.left)&&void 0!==a?a:""} ${null!==(s=null==t?void 0:t.operator)&&void 0!==s?s:""} ${null!==(n=null==t?void 0:t.right)&&void 0!==n?n:""}`}if(e.mode===v.ReduceRow){var r;const t=i.TB.getIfExists(null===(r=e.reduce)||void 0===r?void 0:r.reducer);if(t)return t.name}return"math"}},"./packages/grafana-data/src/transformations/transformers/concat.ts":(e,t,a)=>{"use strict";a.d(t,{HO:()=>o,aE:()=>l});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=a("./packages/grafana-data/src/transformations/transformers/ids.ts"),r=a("./packages/grafana-data/src/types/dataFrame.ts"),i=a("./packages/grafana-data/src/vector/index.ts");let o;!function(e){e.Drop="drop",e.FieldName="field",e.Label="label"}(o||(o={}));const l={id:n.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:o.FieldName,frameNameLabel:"frame"},operator:e=>t=>t.pipe((0,s.U)((t=>!Array.isArray(t)||t.length<2?t:[c(t,e)])))};function c(e,t){var a;let s=!0,n=e[0].length;const l=null!==(a=t.frameNameLabel)&&void 0!==a?a:"frame";let c=[];for(const a of e){n!==a.length&&(s=!1,n=Math.max(n,a.length));for(const e of a.fields){const s=Object.assign({},e);s.state=void 0,a.name&&(t.frameNameMode===o.Drop||(t.frameNameMode===o.Label?(s.labels=Object.assign({},e.labels),s.labels[l]=a.name):s.name&&s.name!==r.M5?s.name=`${a.name} · ${e.name}`:s.name=a.name)),c.push(s)}}return s||(c=c.map((e=>{if(e.values.length===n)return e;const t=e.values.toArray();return t.length=n,Object.assign({},e,{values:new i.Gt(t)})}))),{fields:c,length:n}}},"./packages/grafana-data/src/transformations/transformers/filterByValue.ts":(e,t,a)=>{"use strict";a.d(t,{PQ:()=>c,ER:()=>d,JA:()=>u});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=a("./packages/grafana-data/src/transformations/transformers/noop.ts"),r=a("./packages/grafana-data/src/transformations/transformers/ids.ts"),i=a("./packages/grafana-data/src/field/fieldState.ts"),o=a("./packages/grafana-data/src/transformations/matchers.ts"),l=a("./packages/grafana-data/src/vector/ArrayVector.ts");let c,d;!function(e){e.exclude="exclude",e.include="include"}(c||(c={})),function(e){e.all="all",e.any="any"}(d||(d={}));const u={id:r.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:c.include,match:d.any},operator:e=>t=>{const a=e.filters,r=e.match===d.all,i=e.type===c.include;return Array.isArray(a)&&0!==a.length?t.pipe((0,s.U)((e=>{if(!Array.isArray(e)||0===e.length)return e;const t=new Set;for(const s of e){const n=h(s,e),i=p(a,n);for(let a=0;a<s.length;a++){if(t.has(a))continue;let n=!0;for(const t of i){const i=t(a,s,e);if(!r&&i){n=!0;break}if(r&&!i){n=!1;break}n=i}n&&t.add(a)}}const s=[],n=i?t.size:e[0].length-t.size;for(const a of e){const e=[];for(const s of a.fields){const n=[];for(let e=0;e<a.length;e++)i&&t.has(e)?n.push(s.values.get(e)):i||t.has(e)||n.push(s.values.get(e));e.push(Object.assign({},s,{values:new l.G(n),state:{}}))}s.push(Object.assign({},a,{fields:e,length:n}))}return s}))):t.pipe(n.d.operator({}))}},p=(e,t)=>{const a=()=>!1;return e.map((e=>{var s;const n=null!==(s=t[e.fieldName])&&void 0!==s?s:-1;if(n<0)return console.warn(`[FilterByValue] Could not find index for field name: ${e.fieldName}`),a;const r=(0,o.IG)(e.config);return(e,t,a)=>r(e,t.fields[n],t,a)}))},h=(e,t)=>e.fields.reduce(((a,s,n)=>(a[(0,i.C)(s,e,t)]=n,a)),{})},"./packages/grafana-data/src/transformations/transformers/groupBy.ts":(e,t,a)=>{"use strict";a.d(t,{x:()=>d,i:()=>u});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=a("./packages/grafana-data/src/transformations/transformers/ids.ts"),r=a("./packages/grafana-data/src/types/dataFrame.ts"),i=a("./packages/grafana-data/src/field/fieldState.ts"),o=a("./packages/grafana-data/src/vector/ArrayVector.ts"),l=a("./packages/grafana-data/src/dataframe/processDataFrame.ts"),c=a("./packages/grafana-data/src/transformations/fieldReducer.ts");let d;!function(e){e.aggregate="aggregate",e.groupBy="groupby"}(d||(d={}));const u={id:n.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group",defaultOptions:{fields:{}},operator:e=>t=>t.pipe((0,s.U)((t=>{if(!Object.keys(e.fields).find((t=>e.fields[t].operation===d.groupBy)))return t;const a=[];for(const n of t){const t=[];for(const a of n.fields)p(a,e)&&t.push(a);if(0===t.length)continue;const l=new Map;for(let e=0;e<n.length;e++){var s;const a=String(t.map((t=>t.values.get(e)))),r=null!==(s=l.get(a))&&void 0!==s?s:{};l.has(a)||l.set(a,r);for(let t of n.fields){const a=(0,i.C)(t);r[a]||(r[a]={name:a,type:t.type,config:Object.assign({},t.config),values:new o.G}),r[a].values.add(t.values.get(e))}}const d=[];for(const e of t){const t=new o.G,a=(0,i.C)(e);l.forEach((e=>{t.add(e[a].values.get(0))})),d.push({name:e.name,type:e.type,config:Object.assign({},e.config),values:t})}for(const t of n.fields){if(!h(t,e))continue;const a=(0,i.C)(t),s=e.fields[a].aggregations,n={};l.forEach((e=>{const t=e[a],r=(0,c.Kx)({field:t,reducers:s});for(const e of s)Array.isArray(n[e])||(n[e]=[]),n[e].push(r[e])}));for(const e of s){const s={name:`${a} (${e})`,values:new o.G(n[e]),type:r.fS.other,config:{}};s.type=m(e,t,s),d.push(s)}}a.push({fields:d,length:l.size})}return a})))},p=(e,t)=>{var a;const s=(0,i.C)(e);return(null==t||null===(a=t.fields[s])||void 0===a?void 0:a.operation)===d.groupBy},h=(e,t)=>{var a;const s=(0,i.C)(e);return(null==t||null===(a=t.fields[s])||void 0===a?void 0:a.operation)===d.aggregate&&Array.isArray(null==t?void 0:t.fields[s].aggregations)&&(null==t?void 0:t.fields[s].aggregations.length)>0},m=(e,t,a)=>{var s;switch(e){case c.gz.allIsNull:return r.fS.boolean;case c.gz.last:case c.gz.lastNotNull:case c.gz.first:case c.gz.firstNotNull:return t.type;default:return null!==(s=(0,l.fu)(a))&&void 0!==s?s:r.fS.string}}},"./packages/grafana-data/src/transformations/transformers/histogram.ts":(e,t,a)=>{"use strict";a.d(t,{Zi:()=>d,py:()=>h,Op:()=>m,wL:()=>g,cO:()=>f,qr:()=>b,gY:()=>v,zM:()=>y});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=a("./packages/grafana-data/src/transformations/transformers/ids.ts"),r=a("./packages/grafana-data/src/types/dataFrame.ts"),i=a("./packages/grafana-data/src/vector/ArrayVector.ts"),o=a("./packages/grafana-data/src/transformations/transformers/joinDataFrames.ts"),l=a("./packages/grafana-data/src/field/index.ts"),c=a("./packages/grafana-data/src/themes/index.ts");const d=[1e-9,2e-9,2.5e-9,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],u=[null],p=(e,t)=>e-t,h={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},m={id:n.W.histogram,name:"Histogram",description:"Calculate a histogram from input data",defaultOptions:{fields:{}},operator:e=>t=>t.pipe((0,s.U)((t=>m.transformer(e)(t)))),transformer:e=>t=>{if(!Array.isArray(t)||0===t.length)return t;const a=v(t,e);return null==a?[]:[y(a)]}},g="BucketMin",f="BucketMax";function b(e){let t,a;const s=[];for(const n of e.fields)n.name===g?t=n:n.name===f?a=n:n.type===r.fS.number&&s.push(n);if(t&&a&&s.length)return{bucketMin:t,bucketMax:a,counts:s}}function v(e,t){var a,s;let n=null==t?void 0:t.bucketSize,l=null!==(a=null==t?void 0:t.bucketOffset)&&void 0!==a?a:0;if(!n||n<0){let t=[];for(const a of e)for(const e of a.fields)e.type===r.fS.number&&(t=t.concat(e.values.toArray().map((t=>{var a;return Number(t.toFixed(null!==(a=e.config.decimals)&&void 0!==a?a:0))}))));t.sort(((e,t)=>e-t));let a=1/0;if(1===t.length)a=1;else for(let e=1;e<t.length;e++){let s=t[e]-t[e-1];0!==s&&(a=Math.min(a,s))}let s=t[0];const i=(t[t.length-1]-s)/20;for(let e=0;e<d.length;e++){let t=d[e];if(i<t&&t>=a){n=t;break}}}const c=e=>{return t=e-l,a=n,Math.floor(t/a)*a+l;var t,a};let h,m=[],b=[];for(const t of e)for(const e of t.fields)if(e.type===r.fS.number){let t=x(e.values.toArray(),c,u,p);m.push(t),b.push(Object.assign({},e,{config:Object.assign({},e.config,{unit:void 0})})),!h&&Object.keys(e.config).length&&(h=e.config)}if(!b.length)return null;let v=(0,o.v_)(m);for(let e=1;e<v.length;e++){let t=v[e];for(let e=0;e<t.length;e++)null==t[e]&&(t[e]=0)}const y={name:g,values:new i.G(v[0]),type:r.fS.number,state:void 0,config:null!==(s=h)&&void 0!==s?s:{}},w=Object.assign({},y,{name:f,values:new i.G(v[0].map((e=>e+n)))});if(null!=t&&t.combine){const e=new Array(v[0].length).fill(0);for(let t=1;t<v.length;t++)for(let a=0;a<e.length;a++)e[a]+=v[t][a];b=[Object.assign({},b[0],{name:"Count",values:new i.G(e),type:r.fS.number,state:void 0})]}else b.forEach(((e,t)=>{e.values=new i.G(v[t+1])}));return{bucketMin:y,bucketMax:w,counts:b}}function x(e,t,a,s){let n=new Map;for(let a=0;a<e.length;a++){let s=e[a];null!=s&&(s=t(s));let r=n.get(s);r?r.count++:n.set(s,{value:s,count:1})}a&&a.forEach((e=>n.delete(e)));let r=[...n.values()];s&&r.sort(((e,t)=>s(e.value,t.value)));let i=Array(r.length),o=Array(r.length);for(let e=0;e<r.length;e++)i[e]=r[e].value,o[e]=r[e].count;return[i,o]}function y(e,t){if(!e.bucketMin.display){const a=(0,l.U_)({field:e.bucketMin,theme:null!=t?t:(0,c.jG)()});e.bucketMin.display=a,e.bucketMax.display=a}return{fields:[e.bucketMin,e.bucketMax,...e.counts],length:e.bucketMin.values.length}}},"./packages/grafana-data/src/transformations/transformers/labelsToFields.ts":(e,t,a)=>{"use strict";a.d(t,{k:()=>l,r:()=>c});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=a("./packages/grafana-data/src/types/index.ts"),r=a("./packages/grafana-data/src/transformations/transformers/ids.ts"),i=a("./packages/grafana-data/src/vector/index.ts"),o=a("./packages/grafana-data/src/index.ts");let l;!function(e){e.Columns="columns",e.Rows="rows"}(l||(l={}));const c={id:r.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:e=>t=>t.pipe((0,s.U)((t=>c.transformer(e)(t)))),transformer:e=>t=>{var a;if(e.mode===l.Rows)return function(e,t){const a=[];for(const s of e)for(const r of s.fields)if(r.labels){const l=[],c=[];if(t)for(const e of t)l.push(e),c.push(r.labels[e]);else for(const[e,t]of Object.entries(r.labels))l.push(e),c.push(t);c.length&&a.push(Object.assign({},s,{name:(0,o.getFieldDisplayName)(r,s,e),fields:[{name:"label",type:n.fS.string,config:{},values:new i.Gt(l)},{name:"value",type:n.fS.string,config:{},values:new i.Gt(c)}],length:c.length}))}return a}(t,e.keepLabels);const s=[],r=null!==(a=e.keepLabels)&&void 0!==a&&a.length?new Set(e.keepLabels):void 0;for(const a of t){const t=[],o={};for(const s of a.fields){if(!s.labels){t.push(s);continue}const a=Object.assign({},s,{config:Object.assign({},s.config,{displayName:void 0,displayNameFromDS:void 0}),labels:void 0});t.push(a);for(const t of Object.keys(s.labels)){var c;if(r&&!r.has(t))continue;if(e.valueLabel===t){a.name=s.labels[t];continue}(null!==(c=o[t])&&void 0!==c?c:o[t]=new Set).add(s.labels[t])}}for(const e in o)for(const s of o[e]){const r=new Array(a.length).fill(s);t.push({name:e,type:n.fS.string,values:new i.Gt(r),config:{}})}s.push({fields:t,length:a.length})}return s}}},"./packages/grafana-data/src/transformations/transformers/order.ts":(e,t,a)=>{"use strict";a.d(t,{t:()=>i,$:()=>o});var s=a("./packages/grafana-data/src/transformations/transformers/ids.ts"),n=a("./packages/grafana-data/src/field/fieldState.ts"),r=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js");const i={id:s.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:e=>t=>t.pipe((0,r.U)((t=>{const a=l(e.indexByName);return Array.isArray(t)&&0!==t.length?t.map((e=>Object.assign({},e,{fields:a(e.fields,t,e)}))):t})))},o=e=>(t,a)=>c(t,e)-c(a,e),l=e=>(t,a,s)=>{if(!Array.isArray(t)||0===t.length)return t;if(!e||0===Object.keys(e).length)return t;const r=o(e);return t.sort(((e,t)=>r((0,n.C)(e,s,a),(0,n.C)(t,s,a))))},c=(e,t)=>Number.isInteger(t[e])?t[e]:Number.MAX_SAFE_INTEGER},"./packages/grafana-data/src/transformations/transformers/reduce.ts":(e,t,a)=>{"use strict";a.d(t,{AL:()=>p,mf:()=>h});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),n=a("./packages/grafana-data/src/transformations/transformers/ids.ts"),r=a("./packages/grafana-data/src/transformations/fieldReducer.ts"),i=a("./packages/grafana-data/src/transformations/matchers/predicates.ts"),o=a("./packages/grafana-data/src/types/dataFrame.ts"),l=a("./packages/grafana-data/src/vector/ArrayVector.ts"),c=a("./packages/grafana-data/src/dataframe/processDataFrame.ts"),d=a("./packages/grafana-data/src/transformations/matchers.ts"),u=a("./packages/grafana-data/src/field/index.ts");let p;!function(e){e.SeriesToRows="seriesToRows",e.ReduceFields="reduceFields"}(p||(p={}));const h={id:n.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last",defaultOptions:{reducers:[r.gz.max]},operator:e=>t=>t.pipe((0,s.U)((t=>{var a;if(null==e||null===(a=e.reducers)||void 0===a||!a.length)return t;const s=e.fields?(0,d.sq)(e.fields):e.includeTimeField&&e.mode===p.ReduceFields?i.m3:i.Qw;if(e.mode===p.ReduceFields)return function(e,t,a){const s=r.TB.list(a).map((e=>e.id)),n=[];for(const a of e){const i=[];for(const n of a.fields)if(t(n,a,e)){const e=(0,r.Kx)({field:n,reducers:s});for(const t of s){const a=e[t],o=Object.assign({},n,{values:new l.G([a])});o.state=void 0,s.length>1&&(o.labels||(o.labels={}),o.labels.reducer=r.TB.get(t).name),i.push(o)}}i.length&&n.push(Object.assign({},a,{fields:i,length:1}))}return n}(t,s,e.reducers);const n=function(e,t,a,s){const n=r.TB.list(a),i=n.map((e=>e.id)),d=[],p=s?function(e){const t=new Set;for(const a of e)for(const e of a.fields)if(e.labels)for(const a of Object.keys(e.labels))t.add(a);return[...t]}(e):[];for(const a of e){const h=a.fields.filter((s=>t(s,a,e))),m=h.length,g=[],f=new l.G(new Array(m));g.push({name:"Field",type:o.fS.string,values:f,config:{}});const b={};if(s)for(const e of p)b[e]=new l.G(new Array(m)),g.push({name:e,type:o.fS.string,values:b[e],config:{}});const v={};for(const e of n)v[e.id]=new l.G(new Array(m)),g.push({name:e.name,type:o.fS.other,values:v[e.id],config:{}});for(let t=0;t<h.length;t++){const o=h[t],l=(0,r.Kx)({field:o,reducers:i});if(s){if(f.buffer[t]=o.name,o.labels)for(const e of Object.keys(o.labels))b[e].set(t,o.labels[e])}else f.buffer[t]=(0,u.CZ)(o,a,e);for(const e of n){const a=l[e.id];v[e.id].buffer[t]=a}}for(const e of g)if(e.type===o.fS.other){const t=(0,c.fu)(e);t&&(e.type=t)}d.push(Object.assign({},a,{fields:g,length:m}))}return function(e){if(null==e||!e.length)return;const t=e[0];for(let a=1;a<e.length;a++){const s=e[a];for(let e=0;e<t.fields.length;e++){const a=t.fields[e];for(let t=0;t<s.fields.length;t++){const n=s.fields[t],r=0===e&&0===t,i=a.type===n.type&&a.name===n.name;if(r||i){const e=a.values.toArray(),t=n.values.toArray();a.values.buffer=e.concat(t)}}}}return t.name=void 0,t.length=t.fields[0].values.length,t}(d)}(t,s,e.reducers,e.labelsToFields);return n?[n]:[]})))}},"./packages/grafana-data/src/types/config.ts":(e,t,a)=>{"use strict";let s;a.d(t,{e:()=>s}),function(e){e.OpenSource="Open Source",e.Pro="Pro",e.Enterprise="Enterprise"}(s||(s={}))},"./packages/grafana-data/src/types/constants.ts":(e,t,a)=>{"use strict";a.d(t,{Hx:()=>s,Z3:()=>n,bm:()=>r});const s=0,n=100,r="SAML"},"./packages/grafana-data/src/types/featureToggles.gen.ts":()=>{},"./packages/grafana-data/src/types/index.ts":(e,t,a)=>{"use strict";a.d(t,{K2:()=>u,Z9:()=>Se,Lj:()=>m,SI:()=>ae,k8:()=>$,SP:()=>Ce.BuildInfo,zj:()=>P,Mg:()=>ye,bm:()=>s.bm,mQ:()=>c,Pz:()=>i,eA:()=>B,MF:()=>z,hf:()=>E,gv:()=>we,w5:()=>d,Ys:()=>x.Ys,Ru:()=>V,R3:()=>K.R,CQ:()=>M,uv:()=>ke.u,Sc:()=>K.S,qb:()=>k,fS:()=>r.fS,Z3:()=>s.Z3,Hx:()=>s.Hx,Nm:()=>Ce.GrafanaConfig,Sg:()=>A,Qu:()=>Y.Q,iL:()=>U,oi:()=>re,IA:()=>ne,TO:()=>Ce.LicenseInfo,yS:()=>le,FU:()=>ce,z:()=>ie,SK:()=>oe,Gu:()=>n.G,in:()=>g.in,Uv:()=>g.Uv,Y4:()=>g.Y4,Ku:()=>g.Ku,UV:()=>g.UV,Hi:()=>w.H,VO:()=>v,yV:()=>b,Gl:()=>n.S,B5:()=>J,Kh:()=>se,w2:()=>N,$_:()=>I,Xy:()=>O,_Z:()=>_,BV:()=>S,zV:()=>T,V7:()=>Ce.PreloadPlugin,eE:()=>w.e,v6:()=>xe,T_:()=>x.T_,rN:()=>r.rN,Ls:()=>r.Ls,M5:()=>r.M5,H3:()=>y.H,L8:()=>o,o3:()=>l,Tq:()=>ve,j2:()=>de,_:()=>G,mi:()=>Z,sf:()=>Q,wm:()=>W,Rr:()=>x.Rr,JK:()=>x.JK,Q4:()=>g.Q4,On:()=>f.O,p:()=>h,CZ:()=>p,mx:()=>pe,gH:()=>he,RL:()=>me,se:()=>ue,v3:()=>C,kf:()=>j,xA:()=>je,nU:()=>fe,H7:()=>ge,Aj:()=>be});var s=a("./packages/grafana-data/src/types/constants.ts"),n=a("./packages/grafana-data/src/types/data.ts"),r=a("./packages/grafana-data/src/types/dataFrame.ts");let i,o,l,c,d,u;!function(e){e.TimeSeriesWide="timeseries-wide",e.TimeSeriesLong="timeseries-long",e.TimeSeriesMany="timeseries-many"}(i||(i={})),function(e){e.Series="series",e.Field="field",e.Fields="fields",e.Value="value",e.BuiltIn="built-in",e.Template="template"}(o||(o={})),function(e){e.Values="values"}(l||(l={})),function(e){e[e.Off=0]="Off",e[e.Crosshair=1]="Crosshair",e[e.Tooltip=2]="Tooltip"}(c||(c={})),function(e){e.Annotations="annotations"}(d||(d={})),function(e){e.Equal="Equal",e.NotEqual="NotEqual",e.EqualRegEx="EqualRegEx",e.NotEqualRegEx="NotEqualRegEx"}(u||(u={}));const p=e=>void 0!==e.importFromAbstractQueries,h=e=>void 0!==e.exportToAbstractQueries;let m;!function(e){e.Field="field",e.Text="text",e.Skip="skip"}(m||(m={}));var g=a("./packages/grafana-data/src/types/logs.ts"),f=a("./packages/grafana-data/src/types/logsVolume.ts");let b,v;!function(e){e.Core="core",e.Plugin="plugin",e.Config="config"}(b||(b={})),function(e){e.Section="section",e.Item="item"}(v||(v={}));var x=a("./packages/grafana-data/src/types/time.ts"),y=a("./packages/grafana-data/src/types/thresholds.ts"),w=a("./packages/grafana-data/src/types/valueMapping.ts");function j(e){return t=>t.__systemRef===e}const C=e=>"string"==typeof(null==e?void 0:e.__systemRef);let k,S,T,O,_,N,I,P,M;function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e){e.Unit="unit",e.Min="min",e.Max="max",e.Decimals="decimals",e.DisplayName="displayName",e.NoValue="noValue",e.Thresholds="thresholds",e.Mappings="mappings",e.Links="links",e.Color="color"}(k||(k={})),function(e){e.alpha="alpha",e.beta="beta",e.stable="stable",e.deprecated="deprecated"}(S||(S={})),function(e){e.panel="panel",e.datasource="datasource",e.app="app",e.renderer="renderer"}(T||(T={})),function(e){e.internal="internal",e.valid="valid",e.invalid="invalid",e.modified="modified",e.missing="missing"}(O||(O={})),function(e){e.grafana="grafana",e.commercial="commercial",e.community="community",e.private="private",e.core="core"}(_||(_={})),function(e){e.missingSignature="signatureMissing",e.invalidSignature="signatureInvalid",e.modifiedSignature="signatureModified"}(N||(N={})),function(e){e.dashboard="dashboard",e.page="page",e.panel="panel",e.datasource="datasource"}(I||(I={}));class A{addConfigPage(e){return this.configPages||(this.configPages=[]),this.configPages.push(e),this}setChannelSupport(e){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){F(this,"meta",void 0),F(this,"loadError",void 0),F(this,"angularConfigCtrl",void 0),F(this,"configPages",void 0),this.meta={}}}function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e){e.CloudAlerting="cloud-alerting",e.UnifiedAlerting="unified-alerting",e.Dashboard="dashboard",e.Explore="explore",e.Unknown="unknown",e.PanelEditor="panel-editor",e.PanelViewer="panel-viewer"}(P||(P={}));class $ extends A{constructor(){super(...arguments),D(this,"root",void 0),D(this,"rootNav",void 0)}init(e){}setRootPage(e,t){return this.root=e,this.rootNav=t,this}setComponentsFromLegacyExports(e){if(e.ConfigCtrl&&(this.angularConfigCtrl=e.ConfigCtrl),this.meta&&this.meta.includes)for(const t of this.meta.includes)if(t.type===I.page&&t.component){if(!e[t.component]){console.warn("App Page uses unknown component: ",t.component,this.meta);continue}}}}!function(e){e.alpha="alpha",e.beta="beta"}(M||(M={}));var L=a("./packages/grafana-data/src/utils/makeClassES5Compatible.ts");function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class E extends A{constructor(e){super(),R(this,"components",{}),this.DataSourceClass=e}setConfigEditor(e){return this.components.ConfigEditor=e,this}setConfigCtrl(e){return this.angularConfigCtrl=e,this}setQueryCtrl(e){return this.components.QueryCtrl=e,this}setAnnotationQueryCtrl(e){return this.components.AnnotationsQueryCtrl=e,this}setQueryEditor(e){return this.components.QueryEditor=e,this}setExploreQueryField(e){return this.components.ExploreQueryField=e,this}setExploreMetricsQueryField(e){return this.components.ExploreMetricsQueryField=e,this}setExploreLogsQueryField(e){return this.components.ExploreLogsQueryField=e,this}setQueryEditorHelp(e){return this.components.QueryEditorHelp=e,this}setExploreStartPage(e){return this.setQueryEditorHelp(e)}setVariableQueryEditor(e){return this.components.VariableQueryEditor=e,this}setMetadataInspector(e){return this.components.MetadataInspector=e,this}setComponentsFromLegacyExports(e){this.angularConfigCtrl=e.ConfigCtrl,this.components.QueryCtrl=e.QueryCtrl,this.components.AnnotationsQueryCtrl=e.AnnotationsQueryCtrl,this.components.ExploreQueryField=e.ExploreQueryField,this.components.QueryEditor=e.QueryEditor,this.components.QueryEditorHelp=e.QueryEditorHelp,this.components.VariableQueryEditor=e.VariableQueryEditor}}class z{constructor(e){R(this,"name",void 0),R(this,"id",void 0),R(this,"type",void 0),R(this,"uid",void 0),R(this,"interval",void 0),R(this,"init",void 0),R(this,"getLogRowContext",void 0),R(this,"components",void 0),R(this,"meta",void 0),R(this,"languageProvider",void 0),R(this,"annotations",void 0),R(this,"variables",void 0),this.name=e.name,this.id=e.id,this.type=e.type,this.meta=e.meta,this.uid=e.uid}getRef(){return{type:this.type,uid:this.uid}}}let V,B;!function(e){e.Logs="Logs",e.Metrics="Metrics",e.Tracing="Tracing"}(V||(V={})),function(e){e.Cancelled="cancelled",e.Timeout="timeout",e.Unknown="unknown"}(B||(B={}));class U{constructor(){R(this,"datasource",void 0),R(this,"request",void 0),R(this,"start",void 0),R(this,"startTask",void 0)}}U=(0,L.s)(U),z=(0,L.s)(z);var H=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let W,G;!function(e){e.Auto="auto",e.Vertical="vertical",e.Horizontal="horizontal"}(W||(W={})),function(e){e[e.Best=100]="Best",e[e.Good=70]="Good",e[e.OK=50]="OK"}(G||(G={}));class Z{constructor(e,t){q(this,"data",void 0),q(this,"panel",void 0),q(this,"dataSummary",void 0),q(this,"list",[]),this.data=e,this.panel=t,this.dataSummary=this.computeDataSummary()}getListAppender(e){return new Q(this.list,e)}computeDataSummary(){var e;const t=(null===(e=this.data)||void 0===e?void 0:e.series)||[];let a,s=0,n=0,i=0,o=0,l=0,c=0;for(const e of t){var d;o+=e.length,null!==(d=e.meta)&&void 0!==d&&d.preferredVisualisationType&&(a=e.meta.preferredVisualisationType);for(const t of e.fields)switch(c++,t.type){case r.fS.number:s+=1;break;case r.fS.time:n+=1;break;case r.fS.string:i+=1}e.length>l&&(l=e.length)}return{numberFieldCount:s,timeFieldCount:n,stringFieldCount:i,rowCountTotal:o,rowCountMax:l,fieldCount:c,preferredVisualisationType:a,frameCount:t.length,hasData:o>0,hasTimeField:n>0,hasNumberField:s>0,hasStringField:i>0}}getList(){return this.list}}class Q{constructor(e,t){this.list=e,this.defaults=t}append(e){this.list.push((0,H.defaultsDeep)(e,this.defaults))}}var K=a("./packages/grafana-data/src/types/fieldColor.ts"),Y=a("./packages/grafana-data/src/types/theme.ts");let J;!function(e){e.Admin="Admin",e.Editor="Editor",e.Viewer="Viewer"}(J||(J={}));var X=a("./packages/grafana-data/src/events/eventFactory.ts"),ee=a("./packages/grafana-data/src/events/types.ts");function te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ae={alertSuccess:(0,X.X)("alert-success"),alertWarning:(0,X.X)("alert-warning"),alertError:(0,X.X)("alert-error")},se={refresh:(0,X.X)("refresh"),componentDidMount:(0,X.X)("component-did-mount"),dataReceived:(0,X.X)("data-received"),dataError:(0,X.X)("data-error"),dataFramesReceived:(0,X.X)("data-frames-received"),dataSnapshotLoad:(0,X.X)("data-snapshot-load"),editModeInitialized:(0,X.X)("init-edit-mode"),initPanelActions:(0,X.X)("init-panel-actions"),initialized:(0,X.X)("panel-initialized"),panelTeardown:(0,X.X)("panel-teardown"),render:(0,X.X)("render")};class ne extends ee.R{}te(ne,"type","graph-hover");class re extends ee.m{constructor(){super(...arguments),te(this,"payload",{point:{}})}}let ie,oe,le,ce,de;function ue(e){return e.type===ce.Status}function pe(e){return e.type===ce.Join}function he(e){return e.type===ce.Leave}function me(e){return e.type===ce.Message}function ge(e){if(null!=e&&e.length){let t=e.trim().split("/");if(t.length>=3)return{scope:t[0],namespace:t[1],path:t.slice(2).join("/")}}}function fe(e){return!!(null!=e&&e.path&&e.namespace&&e.scope)}function be(e){if(!e.scope)return"";let t=e.scope;return e.namespace?(t+="/"+e.namespace,e.path?t+"/"+e.path:t):t}te(re,"type","graph-hover-clear"),function(e){e.DataSource="ds",e.Plugin="plugin",e.Grafana="grafana",e.Stream="stream"}(ie||(ie={})),function(e){e.DataStream="stream",e.DataFrame="frame",e.JSON="json"}(oe||(oe={})),function(e){e.Pending="pending",e.Connected="connected",e.Disconnected="disconnected",e.Shutdown="shutdown",e.Invalid="invalid"}(le||(le={})),function(e){e.Status="status",e.Join="join",e.Leave="leave",e.Message="message"}(ce||(ce={})),function(e){e.Legacy="legacy",e.Standard="standard",e.Custom="custom",e.Datasource="datasource"}(de||(de={}));class ve{}class xe extends ve{getType(){return de.Standard}}class ye extends ve{constructor(){var e,t,a;super(...arguments),a=void 0,(t="editor")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}getType(){return de.Custom}}class we extends ve{getType(){return de.Datasource}}function je(e){return e&&e!==O.valid&&e!==O.internal}var Ce=a("./packages/grafana-data/src/types/config.ts"),ke=a("./packages/grafana-data/src/types/featureToggles.gen.ts");let Se;!function(e){e.NoData="no_data",e.Paused="paused",e.Alerting="alerting",e.OK="ok",e.Pending="pending",e.Unknown="unknown"}(Se||(Se={}))},"./packages/grafana-data/src/types/logs.ts":(e,t,a)=>{"use strict";let s,n,r,i,o;a.d(t,{in:()=>s,Ku:()=>n,UV:()=>r,Y4:()=>i,Uv:()=>o,Q4:()=>l}),function(e){e.emerg="critical",e.fatal="critical",e.alert="critical",e.crit="critical",e.critical="critical",e.warn="warning",e.warning="warning",e.err="error",e.eror="error",e.error="error",e.info="info",e.information="info",e.informational="info",e.notice="info",e.dbug="debug",e.debug="debug",e.trace="trace",e.unknown="unknown"}(s||(s={})),function(e){e[e.Number=0]="Number",e[e.String=1]="String",e[e.LabelsMap=2]="LabelsMap",e[e.Error=3]="Error"}(n||(n={})),function(e){e.Descending="Descending",e.Ascending="Ascending"}(r||(r={})),function(e){e.none="none",e.exact="exact",e.numbers="numbers",e.signature="signature"}(i||(i={})),function(e){e.none="No de-duplication",e.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",e.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",e.signature="De-duplication of successive lines that have identical punctuation and whitespace."}(o||(o={}));const l=e=>{if(!e)return!1;const t=e;return void 0!==t.getLogRowContext&&void 0!==t.showContextToggle}},"./packages/grafana-data/src/types/logsVolume.ts":(e,t,a)=>{"use strict";a.d(t,{O:()=>s});const s=e=>void 0!==e.getLogsVolumeDataProvider},"./packages/grafana-data/src/types/queryRunner.ts":()=>{},"./packages/grafana-data/src/types/time.ts":(e,t,a)=>{"use strict";a.d(t,{Ys:()=>n,T_:()=>r,JK:()=>i,Rr:()=>o});var s=a("./packages/grafana-data/src/datetime/moment_wrapper.ts");const n="browser",r="YYYY-MM-DD HH:mm:ss";function i(){const e=(0,s.CQ)();return{from:(0,s.CQ)(e).subtract(6,"hour"),to:e,raw:{from:"now-6h",to:"now"}}}function o(){return{from:600,to:0}}},"./packages/grafana-data/src/utils/OptionsUIBuilders.ts":(e,t,a)=>{"use strict";a.d(t,{vo:()=>o,rt:()=>d,j:()=>c});var s=a("./packages/grafana-data/src/utils/Registry.ts");class n{constructor(){var e,t,a;a=[],(t="properties")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}addCustomEditor(e){return this.properties.push(e),this}getRegistry(){return new s.B((()=>this.properties))}getItems(){return this.properties}}var r=a("./packages/grafana-data/src/field/index.ts");function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o extends n{addNumberInput(e){var t;return this.addCustomEditor(Object.assign({},e,{id:e.path,override:r.SO.get("number").editor,editor:r.SO.get("number").editor,process:r.Oh,shouldApply:null!==(t=e.shouldApply)&&void 0!==t?t:()=>!0,settings:e.settings||{}}))}addSliderInput(e){var t;return this.addCustomEditor(Object.assign({},e,{id:e.path,override:r.SO.get("slider").editor,editor:r.SO.get("slider").editor,process:r.Oh,shouldApply:null!==(t=e.shouldApply)&&void 0!==t?t:()=>!0,settings:e.settings||{}}))}addTextInput(e){var t;return this.addCustomEditor(Object.assign({},e,{id:e.path,override:r.SO.get("text").editor,editor:r.SO.get("text").editor,process:r.op,shouldApply:null!==(t=e.shouldApply)&&void 0!==t?t:()=>!0,settings:e.settings||{}}))}addSelect(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,override:r.SO.get("select").editor,editor:r.SO.get("select").editor,process:r.AE,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{options:[]}}))}addRadio(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,override:r.SO.get("radio").editor,editor:r.SO.get("radio").editor,process:r.AE,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{options:[]}}))}addBooleanSwitch(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("boolean").editor,override:r.SO.get("boolean").editor,process:r.W4,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}addColorPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("color").editor,override:r.SO.get("color").editor,process:r.kG,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}addUnitPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("unit").editor,override:r.SO.get("unit").editor,process:r.VB,shouldApply:e.shouldApply?e.shouldApply:()=>!0,settings:e.settings||{}}))}}class l{constructor(e){i(this,"path",""),i(this,"category",void 0),i(this,"defaultValue",void 0),i(this,"id","nested-panel-options"),i(this,"name","nested"),i(this,"editor",(()=>null)),i(this,"getBuilder",(()=>this.cfg.build)),i(this,"getNestedValueAccess",(e=>{const t=this.cfg.values;return t?t(e):{getValue:t=>e.getValue(`${this.path}.${t}`),onChange:(t,a)=>e.onChange(`${this.path}.${t}`,a)}})),this.cfg=e,this.path=e.path,this.category=e.category,this.defaultValue=e.defaultValue}}function c(e){return"nested-panel-options"===e.id}class d extends n{addNestedOptions(e){const t=new l(e);return this.addCustomEditor(t)}addNumberInput(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("number").editor}))}addSliderInput(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("slider").editor}))}addTextInput(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("text").editor}))}addStringArray(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("strings").editor}))}addSelect(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("select").editor}))}addMultiSelect(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("multi-select").editor}))}addRadio(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("radio").editor}))}addBooleanSwitch(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("boolean").editor}))}addColorPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("color").editor,settings:e.settings||{}}))}addTimeZonePicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("timezone").editor,settings:e.settings||{}}))}addUnitPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("unit").editor}))}addFieldNamePicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("field-name").editor}))}addDashboardPicker(e){return this.addCustomEditor(Object.assign({},e,{id:e.path,editor:r.SO.get("dashboard-uid").editor}))}}},"./packages/grafana-data/src/utils/dataLinks.ts":(e,t,a)=>{"use strict";a.d(t,{W:()=>r,_:()=>i});var s=a("./packages/grafana-data/src/utils/location.ts"),n=a("./packages/grafana-data/src/utils/url.ts");const r={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function i(e){var t,a;const{onClickFn:s,replaceVariables:n,link:r,scopedVars:i,range:c,field:d,internalLink:u}=e,p=l(null===(t=r.internal)||void 0===t?void 0:t.query,i,n),h=l(null===(a=r.internal)||void 0===a?void 0:a.panelsState,i,n);return{title:n(r.title?r.title:u.datasourceName,i),href:o(u.datasourceName,p,c,h),onClick:s?()=>{s({datasourceUid:u.datasourceUid,query:p,panelsState:h,range:c})}:void 0,target:"_self",origin:d}}function o(e,t,a,r){return s.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.S)({range:a.raw,datasource:e,queries:[t],panelsState:r}))}`)}function l(e,t,a){let s="";try{s=JSON.stringify(e||{})}catch(e){console.error(e)}s=a(s,t);let n={};try{n=JSON.parse(s)}catch(e){console.error(s,e)}return n}},"./packages/grafana-data/src/utils/index.ts":(e,t,a)=>{"use strict";a.d(t,{LH:()=>ue.L,x5:()=>A,QM:()=>L,WC:()=>ye.W,xV:()=>we,vo:()=>me.vo,Iw:()=>Se.LegacyBaseMap,HU:()=>Se.HU,ZH:()=>Se.LegacyRangeMap,e0:()=>Se.LegacyValueMap,GG:()=>Se.LegacyValueMapping,bA:()=>Q,zG:()=>pe,rt:()=>me.rt,Bz:()=>l.B,Vq:()=>xe.UrlQueryMap,yw:()=>xe.UrlQueryValue,rm:()=>ke.WithLoadingIndicatorOptions,Ar:()=>Z,IX:()=>Ce.I,sq:()=>s,nk:()=>ue.n,zd:()=>K,lL:()=>Y,i6:()=>J,Mi:()=>re,ZC:()=>ce.ZC,Jb:()=>Se.Jb,d9:()=>S,l3:()=>ie,FT:()=>oe.FT,IU:()=>oe.IU,aA:()=>oe.aA,L6:()=>ce.L6,eR:()=>ce.eR,iU:()=>d,BT:()=>p,k8:()=>fe,HE:()=>be,ZO:()=>W,jx:()=>G,GR:()=>Se.GR,MT:()=>ee,e4:()=>de.e,fp:()=>de.f,cv:()=>u,uT:()=>ve.u,s2:()=>je.s,_N:()=>ye._,VS:()=>oe.VS,Hh:()=>le.H,_R:()=>m,hz:()=>b,nx:()=>f,z_:()=>h,HD:()=>x,fi:()=>g,TX:()=>v,J8:()=>oe.J8,uP:()=>D,S:()=>xe.S,DA:()=>te,$8:()=>ae,$u:()=>ne,j0:()=>se,MJ:()=>B,Er:()=>he.E,tp:()=>w,fd:()=>y,Mf:()=>C,uw:()=>j,Cj:()=>xe.Cj,xc:()=>ke.x});var s={};a.r(s),a.d(s,{moveItemImmutably:()=>r,sortValues:()=>o});var n=a("./packages/grafana-schema/src/index.ts");function r(e,t,a){const s=[...e];return Array.prototype.splice.call(s,a,0,Array.prototype.splice.call(s,t,1)[0]),s}const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function o(e){return(t,a)=>t===a?0:null==a||"string"==typeof a&&""===a.trim()?-1:null==t||"string"==typeof t&&""===(null==t?void 0:t.trim())?1:e===n.As.Descending?i.compare(a,t):i.compare(t,a)}var l=a("./packages/grafana-data/src/utils/Registry.ts"),c=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function d(e){return{uid:e.uid,type:e.type}}function u(e){return"object"==typeof e&&("string"==typeof(null==e?void 0:e.uid)||void 0===(null==e?void 0:e.uid))}function p(e){return u(e)?e.uid:(0,c.isString)(e)?e:void 0}const h=(e,t)=>a=>{y(e,t,a.currentTarget.value)},m=(e,t)=>a=>{w(e,t,a.currentTarget.value)},g=(e,t)=>a=>{j(e,t,a.currentTarget.value)},f=(e,t)=>a=>{w(e,t,a.value)},b=(e,t)=>a=>{w(e,t,a.currentTarget.checked)},v=(e,t)=>a=>{j(e,t,a.value)},x=(e,t)=>a=>{C(e,t)};function y(e,t,a){const s=e.options;e.onOptionsChange(Object.assign({},s,{[t]:a}))}const w=(e,t,a)=>{const s=e.options;e.onOptionsChange(Object.assign({},s,{jsonData:Object.assign({},s.jsonData,{[t]:a})}))},j=(e,t,a)=>{const s=e.options;e.onOptionsChange(Object.assign({},s,{secureJsonData:Object.assign({},s.secureJsonData?s.secureJsonData:{},{[t]:a})}))},C=(e,t)=>{const a=e.options;e.onOptionsChange(Object.assign({},a,{secureJsonData:Object.assign({},a.secureJsonData?a.secureJsonData:{},{[t]:""}),secureJsonFields:Object.assign({},a.secureJsonFields,{[t]:!1})}))},k={},S=(e,t,a)=>{let s=`[Deprecation warning] ${e}: ${t} is deprecated`;a&&(s+=`. Use ${a} instead`);const n=Date.now(),r=k[s];(!r||n-r>1e4)&&(console.warn(s),k[s]=n)};var T=a("../../opt/drone/yarncache/papaparse-npm-5.3.1-8c9c1adec8-3431917bb4.zip/node_modules/papaparse/papaparse.min.js"),O=a.n(T),_=a("./packages/grafana-data/src/types/index.ts"),N=a("./packages/grafana-data/src/dataframe/processDataFrame.ts"),I=a("./packages/grafana-data/src/dataframe/MutableDataFrame.ts"),P=a("./packages/grafana-data/src/field/index.ts"),M=a("./packages/grafana-data/src/valueFormats/index.ts");function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let A;function D(e,t){return new L(t).readCSV(e)}var $;!function(e){e[e.full=0]="full",e[e.name=1]="name",e[e.none=2]="none"}(A||(A={})),function(e){e[e.Starting=0]="Starting",e[e.InHeader=1]="InHeader",e[e.ReadingRows=2]="ReadingRows"}($||($={}));class L{constructor(e){F(this,"config",void 0),F(this,"callback",void 0),F(this,"state",void 0),F(this,"data",void 0),F(this,"current",void 0),F(this,"chunk",((e,t)=>{for(let t=0;t<e.data.length;t++){const a=e.data[t];if(a.length<1)continue;const s=a[0];if(s){if(s.startsWith("#")){const e=s.indexOf("#",2);if(e>0){const t=s.substr(1,e-1),n="name"===t,r={unit:"#"};if(n||r.hasOwnProperty(t)){this.state===$.ReadingRows&&(this.current=new I.v({fields:[]}),this.data.push(this.current));const r=s.substr(e+1);if(n){this.current.addFieldFor(void 0,r);for(let e=1;e<a.length;e++)this.current.addFieldFor(void 0,a[e])}else{const{fields:e}=this.current;for(let s=0;s<e.length;s++){e[s].config||(e[s].config={});e[s].config[t]=0===s?r:a[s]}}this.state=$.InHeader;continue}}else if(this.state===$.Starting){this.state=$.InHeader;continue}continue}if(this.state===$.Starting){if((0,N.LI)(s)===_.fS.string){for(const e of a)this.current.addFieldFor(void 0,e);this.state=$.InHeader;continue}this.state=$.InHeader}}if(this.state,$.ReadingRows,this.state=$.ReadingRows,a.length>this.current.fields.length){const{fields:e}=this.current;for(let t=e.length;t<a.length;t++)this.current.addFieldFor(a[t]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(a),this.callback&&this.callback.onRow(a)}})),e||(e={}),this.config=e.config||{},this.callback=e.callback,this.current=new I.v({fields:[]}),this.state=$.Starting,this.data=[]}readCSV(e){this.current=new I.v({fields:[]}),this.data=[this.current];const t=Object.assign({},this.config,{dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk});return O().parse(e,t),this.data}}function R(e,t){const a=e.toString();return a.includes('"')?t.quoteChar+a.replace(/"/gi,'""')+t.quoteChar:a.includes("\n")||a.includes(t.delimiter)?t.quoteChar+a+t.quoteChar:a}function E(e,t){return e.display?a=>{const s=e.display(a);return R((0,M.zc)(s),t)}:e=>R(e,t)}function z(e,t,a){const s="name"===e,n="type"===e;for(const r of t){const i=r.config;if(s||n||i&&i.hasOwnProperty(e)){let r="#"+e+"#";for(let i=0;i<t.length;i++){i>0&&(r+=a.delimiter);let o=t[i].name;n?o=t[i].type:s||(o=t[i].config[e]),o&&(r+=R(o,a))}return r+a.newline}}return""}function V(){const e=["x","y"];return e.toLocaleString?e.toLocaleString().charAt(1):","}function B(e,t){if(!e)return"";let a=(t=(0,c.defaults)(t,{delimiter:V(),newline:"\r\n",quoteChar:'"',encoding:"",headerStyle:A.name,useExcelHeader:!1})).useExcelHeader?`sep=${t.delimiter}${t.newline}`:"";for(const s of e){const{fields:e}=s;if(0===e.length)continue;if(t.headerStyle===A.full)a=a+z("name",e,t)+z("type",e,t)+z("unit",e,t)+z("dateFormat",e,t);else if(t.headerStyle===A.name){for(let n=0;n<e.length;n++)n>0&&(a+=t.delimiter),a+=`"${(0,P.CZ)(e[n],s).replace(/"/g,'""')}"`;a+=t.newline}const n=e[0].values.length;if(n>0){const s=e.map((e=>E(e,t)));for(let r=0;r<n;r++){for(let n=0;n<e.length;n++){n>0&&(a+=t.delimiter);const i=e[n].values.get(r);null!==i&&(a+=s[n](i))}a+=t.newline}}a+=t.newline}return a}var U=a("./packages/grafana-data/src/types/logs.ts"),H=a("./packages/grafana-data/src/vector/ArrayVector.ts");const q=/(?:^|\s)([\w\(\)\[\]\{\}]+)=(""|(?:".*?[^\\]"|[^"\s]\S*))/;function W(e){if(!e)return U.in.unknown;let t,a=U.in.unknown;for(const s of Object.keys(U.in)){const n=new RegExp(`\\b${s}\\b`,"i").exec(e);n&&(void 0===t||n.index<t)&&(a=U.in[s],t=n.index)}return a}function G(e){const t=U.in[e.toString().toLowerCase()];return t||U.in.unknown}function Z(e,t){const a=new H.G,s=e.fields[t];for(let e=0;e<s.values.length;e++){const e=s.values.get(t);a.buffer.push(W(e))}return Object.assign({},e,{fields:[...e.fields,{name:"LogLevel",type:_.fS.string,values:a,config:{}}]})}const Q={JSON:{buildMatcher:e=>new RegExp(`(?:{|,)\\s*"${e}"\\s*:\\s*"?([\\d\\.]+|[^"]*)"?`),getFields:e=>{try{const t=JSON.parse(e);return Object.keys(t).map((e=>`"${e}":${JSON.stringify(t[e])}`))}catch{}return[]},getLabelFromField:e=>(e.match(/^"([^"]+)"\s*:/)||[])[1],getValueFromField:e=>(e.match(/:\s*(.*)$/)||[])[1],test:e=>{let t;try{t=JSON.parse(e)}catch(e){}return"object"==typeof t}},logfmt:{buildMatcher:e=>new RegExp(`(?:^|\\s)${(0,c.escapeRegExp)(e)}=("[^"]*"|\\S+)`),getFields:e=>{const t=[];return e.replace(new RegExp(q,"g"),(e=>(t.push(e.trim()),""))),t},getLabelFromField:e=>(e.match(q)||[])[1],getValueFromField:e=>(e.match(q)||[])[2],test:e=>q.test(e)}};function K(e,t){const a=e.filter((e=>t.test(e.entry))),s=a.length,n=(0,c.countBy)(a,(e=>{const a=e.entry.match(t);return a?a[1]:null}));return X(n,s)}function Y(e,t){const a=e.filter((e=>void 0!==e.labels[t])),s=a.length,n=(0,c.countBy)(a,(e=>e.labels[t]));return X(n,s)}function J(e){const t=e.filter((e=>null!=e)),a=(0,c.countBy)(t);return X(a,t.length)}const X=(e,t)=>(0,c.chain)(e).map(((e,a)=>({count:e,value:a,proportion:e/t}))).sortBy("count").reverse().value();function ee(e){let t;try{Q.JSON.test(e)&&(t=Q.JSON)}catch(e){}return!t&&Q.logfmt.test(e)&&(t=Q.logfmt),t}const te=(e,t)=>e.timeEpochMs<t.timeEpochMs?-1:e.timeEpochMs>t.timeEpochMs?1:e.timeEpochNs<t.timeEpochNs?-1:e.timeEpochNs>t.timeEpochNs?1:0,ae=(e,t)=>e.timeEpochMs>t.timeEpochMs?-1:e.timeEpochMs<t.timeEpochMs?1:e.timeEpochNs>t.timeEpochNs?-1:e.timeEpochNs<t.timeEpochNs?1:0,se=(e,t)=>{const a=e?ne(e.rows,t):[];return e?Object.assign({},e,{rows:a}):{hasUniqueLabels:!1,rows:a}},ne=(e,t)=>t===U.UV.Ascending?e.sort(te):e.sort(ae),re=e=>e.labels.__error__?{hasError:!0,errorMessage:e.labels.__error__}:{hasError:!1},ie=e=>e.replace(/\\r\\n|\\n|\\t|\\r/g,(e=>"t"===e.slice(1)?"\t":"\n"));var oe=a("./packages/grafana-data/src/utils/labels.ts"),le=a("./packages/grafana-data/src/utils/object.ts"),ce=a("./packages/grafana-data/src/utils/namedColorsPalette.ts"),de=a("./packages/grafana-data/src/utils/series.ts"),ue=a("./packages/grafana-data/src/utils/binaryOperators.ts");let pe;!function(e){e.id="id",e.title="title",e.subTitle="subTitle",e.mainStat="mainStat",e.secondaryStat="secondaryStat",e.source="source",e.target="target",e.detail="detail__",e.arc="arc__",e.color="color"}(pe||(pe={}));var he=a("./packages/grafana-data/src/utils/selectUtils.ts"),me=a("./packages/grafana-data/src/utils/OptionsUIBuilders.ts"),ge=a("./packages/grafana-data/src/types/data.ts");function fe(e){let{xField:t,yField:a,nullValueMode:s}=e;const n=t.values,r=a.values,i=n.length;if(r.length!==i)throw new Error("Unexpected field length");const o=s===ge.S.Ignore,l=s===ge.S.AsZero,c=[];for(let e=0;e<i;e++){const t=n.get(e);let a=r.get(e);if(null===a){if(o)continue;l&&(a=0)}null!==t&&c.push([t,a])}return c}function be(e,t){if(!t.from||!t.to||!e||0===e.length)return[];const a=t.from.valueOf(),s=t.to.valueOf(),n=e[0][1];return[[a,n],[s,n]]}var ve=a("./packages/grafana-data/src/utils/location.ts"),xe=a("./packages/grafana-data/src/utils/url.ts"),ye=a("./packages/grafana-data/src/utils/dataLinks.ts");let we;!function(e){e[e.Transformations=0]="Transformations",e[e.FieldConfig=1]="FieldConfig",e[e.FieldConfigOverrides=2]="FieldConfigOverrides"}(we||(we={}));var je=a("./packages/grafana-data/src/utils/makeClassES5Compatible.ts"),Ce=a("./packages/grafana-data/src/utils/anyToNumber.ts"),ke=a("./packages/grafana-data/src/utils/withLoadingIndicator.ts"),Se=a("./packages/grafana-data/src/utils/valueMappings.ts")},"./packages/grafana-data/src/utils/labels.ts":(e,t,a)=>{"use strict";a.d(t,{J8:()=>n,FT:()=>r,IU:()=>i,VS:()=>o,aA:()=>l});const s=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(e){const t={};return e.replace(s,((e,a,s,n)=>(t[a]=n,""))),t}function r(e){return e.reduce(((e,t)=>{if(!t)throw new Error("Need parsed labels to find common labels.");return e?(Object.keys(t).forEach((a=>{void 0!==e[a]&&e[a]===t[a]||delete e[a]})),Object.keys(e).forEach((a=>{void 0===t[a]&&delete e[a]}))):e=Object.assign({},t),e}),void 0)}function i(e,t){const a=Object.assign({},e);return Object.keys(t).forEach((e=>{delete a[e]})),a}function o(e,t){if(!e)return!0;for(const[a,s]of Object.entries(e))if(!t||t[a]!==s)return!1;return!0}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;if(!e||0===Object.keys(e).length)return t;const s=Object.keys(e).sort(),n=s.map((t=>`${t}="${e[t]}"`)).join(", ");return a?n:["{",n,"}"].join("")}},"./packages/grafana-data/src/utils/location.ts":(e,t,a)=>{"use strict";a.d(t,{u:()=>c});var s=a("./packages/grafana-data/src/utils/url.ts"),n=a("./packages/grafana-data/src/text/index.ts");let r,i,o={appSubUrl:""};const l=e=>{var t;const a=null!==(t=o.appSubUrl)&&void 0!==t?t:"",s=a.endsWith("/")?1:0,n=e.startsWith("http");let r=a;return e.startsWith("/")&&!n||(r=`${window.location.origin}${a}`),e.length>0&&0===e.indexOf(r)?e.slice(r.length-s):e},c={initialize:e=>{o=e.config,r=e.getTimeRangeForUrl,i=e.getVariablesUrlParams},stripBaseFromUrl:l,assureBaseUrl:e=>e.startsWith("/")?`${o.appSubUrl}${l(e)}`:e,updateSearchParams:(e,t)=>{const a=new URLSearchParams(t);try{const t=new URL(e);return a.forEach(((e,a)=>t.searchParams.set(a,e))),t.href}catch{const t=new URLSearchParams(e);return a.forEach(((e,a)=>{t.set(a,e)})),"?"+t.toString()}},getTimeRangeUrlParams:()=>r?s.Cj.toUrlParams(r()):null,getVariablesUrlParams:e=>{if(!i)return null;const t=i(e);return s.Cj.toUrlParams(t)},processUrl:e=>o.disableSanitizeHtml?e:n.QX.sanitizeUrl(e)}},"./packages/grafana-data/src/utils/namedColorsPalette.ts":(e,t,a)=>{"use strict";function s(e,t){return t.visualization.getColorByName(e)}function n(e,t){return"gray"}a.d(t,{L6:()=>s,eR:()=>n,ZC:()=>r});const r=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]},"./packages/grafana-data/src/utils/object.ts":(e,t,a)=>{"use strict";a.d(t,{H:()=>s});const s=e=>Object.keys(e).reduce(((t,a)=>(void 0!==e[a]&&(t[a]=e[a]),t)),{})},"./packages/grafana-data/src/utils/selectUtils.ts":(e,t,a)=>{"use strict";a.d(t,{E:()=>s});const s=e=>({label:e,value:e})},"./packages/grafana-data/src/utils/series.ts":(e,t,a)=>{"use strict";a.d(t,{e:()=>s,f:()=>n});const s=e=>{let t,a=Number.MAX_VALUE;for(let s=0;s<e.values.length;s++){const n=e.values.get(s);if(void 0!==t){const e=n-t;a=e,e<a&&(a=e)}t=n}return a},n=e=>{for(let t=0;t<e.values.length;t++){const a=e.values.get(t);if(null!=a){const e=a.toString();if(13===e.length&&e%1e3!=0)return!0}}return!1}},"./packages/grafana-data/src/utils/url.ts":(e,t,a)=>{"use strict";function s(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function n(e){const t=[],a=/\[\]$/,n=e=>"[object Array]"===Object.prototype.toString.call(e),r=(e,a)=>{if("boolean"!=typeof(a="function"==typeof a?a():null==a?"":a))t[t.length]=s(e,!0)+"="+s(a,!0);else{const n=a?"":"="+s("false",!0);t[t.length]=s(e,!0)+n}},i=(e,s)=>{let o,l,c;if(e)if(n(s))for(o=0,l=s.length;o<l;o++)a.test(e)?r(e,s[o]):i(e,s[o]);else if(s&&"[object Object]"===String(s))for(c in s)i(e+"["+c+"]",s[c]);else r(e,s);else if(n(s))for(o=0,l=s.length;o<l;o++)r(s[o].name,s[o].value);else for(c in s)i(c,s[c]);return t};return i("",e).join("&")}function r(e){try{return decodeURIComponent(e)}catch(e){return}}a.d(t,{Cj:()=>i,S:()=>o});const i={renderUrl:function(e,t){return t&&Object.keys(t).length>0&&(e+="?"+n(t)),e},toUrlParams:n,appendQueryToUrl:function(e,t){if(null!=t&&""!==t){const a=e.indexOf("?");-1!==a?e.length-a>1&&(e+="&"):e+="?",e+=t}return e},getUrlSearchParams:function(){const e=window.location.search.substring(1).split("&"),t={};for(const a of e){const e=a.split("=");if(e.length>1){const a=decodeURIComponent(e[0]),s=decodeURIComponent(e[1]);t[a]=a in t?[...t[a],s]:[s]}else if(1===e.length){t[decodeURIComponent(e[0])]=!0}}return t},parseKeyValue:function(e){var t={};const a=(e||"").split("&");for(let e of a){let a,s,n;if(e&&(s=e=e.replace(/\+/g,"%20"),a=e.indexOf("="),-1!==a&&(s=e.substring(0,a),n=e.substring(a+1)),s=r(s),void 0!==s)){let e;n=void 0===n||r(n),e="string"==typeof n&&""!==n&&("true"===n||"false"===n)?"true"===n:n,t.hasOwnProperty(s)?Array.isArray(t[s])?t[s].push(n):t[s]=[t[s],isNaN(e)?n:e]:t[s]=isNaN(e)?n:e}}return t}};function o(e,t){return void 0!==t&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(e)}},"./packages/grafana-data/src/utils/valueMappings.ts":(e,t,a)=>{"use strict";a.d(t,{vh:()=>i,HU:()=>o,GR:()=>l,Jb:()=>c});var s=a("./packages/grafana-data/src/types/index.ts"),n=a("./packages/grafana-data/src/field/index.ts"),r=a("./packages/grafana-data/src/text/string.ts");function i(e,t){for(const a of e)switch(a.type){case s.Hi.ValueToText:if(null==t)continue;const e=a.options[t];if(e)return e;break;case s.Hi.RangeToText:if(null==t)continue;const n=parseFloat(t);if(isNaN(n))continue;if(!isNaN(a.options.from)&&n<a.options.from)continue;if(!isNaN(a.options.to)&&n>a.options.to)continue;return a.options.result;case s.Hi.RegexToText:if(null==t)continue;if("string"!=typeof t)continue;const i=(0,r.jO)(a.options.pattern);if(t.match(i)){const e=Object.assign({},a.options.result);return null!=e.text&&(e.text=t.replace(i,a.options.result.text||"")),e}case s.Hi.SpecialValue:switch(a.options.match){case s.eE.Null:if(null==t)return a.options.result;break;case s.eE.NaN:if(isNaN(t))return a.options.result;break;case s.eE.NullAndNaN:if(isNaN(t)||null==t)return a.options.result;break;case s.eE.True:if(!0===t||"true"===t)return a.options.result;break;case s.eE.False:if(!1===t||"false"===t)return a.options.result;break;case s.eE.Empty:if(""===t)return a.options.result}}return null}let o;function l(e,t){var a,s;const n={type:o.ValueToText,value:"",text:"",from:"",to:"",id:0};if(null==e||!e.length)return n;const r=[];for(const t of e)u(t)?r.push(t):r.push(d(t));if(null==r||!r.length)return n;const l=i(r,t);return l?{type:o.ValueToText,value:l.text,text:null!==(a=l.text)&&void 0!==a?a:"",from:"",to:"",id:null!==(s=l.index)&&void 0!==s?s:0}:n}function c(e,t){const a=[];let n=e.mappingType;if(e.mappingType||(e.valueMaps&&e.valueMaps.length?n=1:e.rangeMaps&&e.rangeMaps.length&&(n=2)),1===n)for(let n=0;n<e.valueMaps.length;n++){var r,i;const o=e.valueMaps[n];a.push(d(Object.assign({},o,{id:n,type:s.Hi.ValueToText}),(null===(r=e.fieldConfig)||void 0===r||null===(i=r.defaults)||void 0===i?void 0:i.thresholds)||t))}else if(2===n)for(let n=0;n<e.rangeMaps.length;n++){var o,l;const r=e.rangeMaps[n];a.push(d(Object.assign({},r,{id:n,type:s.Hi.RangeToText}),(null===(o=e.fieldConfig)||void 0===o||null===(l=o.defaults)||void 0===l?void 0:l.thresholds)||t))}return a}function d(e,t){const a={type:s.Hi.ValueToText,options:{}},r=[];let i;const l=parseFloat(e.text);if(t&&!isNaN(l)){const e=(0,n.m1)(l,t.steps);e&&e.color&&(i=e.color)}switch(e.type){case o.ValueToText:case s.Hi.ValueToText:null!=e.value&&("null"===e.value?r.push({type:s.Hi.SpecialValue,options:{match:s.eE.Null,result:{text:e.text,color:i}}}):a.options[String(e.value)]={text:e.text,color:i});break;case o.RangeToText:case s.Hi.RangeToText:"null"===e.from||"null"===e.to?r.push({type:s.Hi.SpecialValue,options:{match:s.eE.Null,result:{text:e.text,color:i}}}):r.push({type:s.Hi.RangeToText,options:{from:+e.from,to:+e.to,result:{text:e.text,color:i}}})}return Object.keys(a.options).length>0&&r.unshift(a),r[0]}function u(e){return!!e&&(e.hasOwnProperty("options")&&"object"==typeof e.options)}!function(e){e[e.ValueToText=1]="ValueToText",e[e.RangeToText=2]="RangeToText"}(o||(o={}))},"./packages/grafana-data/src/utils/withLoadingIndicator.ts":(e,t,a)=>{"use strict";a.d(t,{x:()=>o});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/merge.js"),n=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/timer.js"),r=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/mapTo.js"),i=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");function o(e){let{whileLoading:t,source:a}=e;return(0,s.T)((0,n.H)(200).pipe((0,r.h)(t),(0,i.R)(a)),a)}},"./packages/grafana-data/src/valueFormats/index.ts":(e,t,a)=>{"use strict";a.d(t,{IR:()=>s.IR,zc:()=>s.zc,Cf:()=>s.Cf,QW:()=>s.QW,Td:()=>s.Td,br:()=>s.br,SP:()=>s.SP,Qj:()=>s.Qj,SR:()=>s.SR,vb:()=>s.vb,FH:()=>s.FH,bn:()=>s.bn,q2:()=>s.q2});var s=a("./packages/grafana-data/src/valueFormats/valueFormats.ts")},"./packages/grafana-data/src/valueFormats/valueFormats.ts":(e,t,a)=>{"use strict";a.d(t,{zc:()=>i,FH:()=>d,bn:()=>u,q2:()=>p,br:()=>h,IR:()=>m,Qj:()=>g,SP:()=>f,SR:()=>b,vb:()=>v,Cf:()=>y,Td:()=>w,QW:()=>j});var s=a("./packages/grafana-data/src/valueFormats/categories.ts"),n=a("./packages/grafana-data/src/valueFormats/dateTimeFormatters.ts"),r=a("./packages/grafana-data/src/valueFormats/symbolFormatters.ts");function i(e){var t,a;return`${null!==(t=e.prefix)&&void 0!==t?t:""}${e.text}${null!==(a=e.suffix)&&void 0!==a?a:""}`}let o=[];const l={};let c=!1;function d(e,t){if(null===e)return"";if(e===Number.NEGATIVE_INFINITY||e===Number.POSITIVE_INFINITY)return e.toLocaleString();null==t&&(t=function(e){let t=1-Math.floor(Math.log(Math.abs(e))/Math.LN10);const a=Math.pow(10,-t);e/a>2.25&&++t;e%1==0&&(t=0);return Math.max(0,t)}(e));const a=t?Math.pow(10,Math.max(0,t)):1,s=String(Math.round(e*a)/a);if(-1!==s.indexOf("e")||0===e)return s;const n=s.indexOf("."),r=-1===n?0:s.length-n-1;return r<t?(r?s:s+".")+String(a).substr(1,t-r):s}function u(e,t,a){return{text:d(e,t),suffix:a}}function p(e,t){return(a,s)=>{if(null===a)return{text:""};const n=d(a,s);return e?t?{text:n,prefix:e}:{text:n,suffix:" "+e}:{text:n}}}function h(e){return e&&e.startsWith("bool")}function m(e,t){return a=>({text:a?e:t})}function g(e,t){return(a,s,n)=>{if(null===a)return{text:""};if(a===Number.NEGATIVE_INFINITY||a===Number.POSITIVE_INFINITY||isNaN(a))return{text:a.toLocaleString()};let r=0;const i=t.length;for(;Math.abs(a)>=e;)if(r++,a/=e,r>=i)return{text:"NA"};return{text:d(a,s),suffix:t[r]}}}function f(e,t){return null==e?{text:""}:{text:e.toLocaleString(void 0,{maximumFractionDigits:t})}}function b(e){const t=g(1e3,["","K","M","B","T"]);return(a,s,n)=>{if(null===a)return{text:""};const r=t(a,s,n);return r.suffix+=" "+e,r}}function v(e){return{text:`${e}`}}function x(){o=(0,s.C)();for(const e of o)for(const t of e.formats)l[t.id]=t.fn;[{from:"farenheit",to:"fahrenheit"}].forEach((e=>{const t=l[e.to];t&&(l[e.from]=t)})),c=!0}function y(e){if(!e)return p("");c||x();const t=l[e];if(!t&&e){let t=e.indexOf(":");if(t>0){const a=e.substring(0,t),s=e.substring(t+1);if("prefix"===a)return p(s,!0);if("suffix"===a)return p(s,!1);if("time"===a)return(0,n.cN)(s);if("si"===a){const e=(0,r.dT)(s.charAt(0)),t=0===e?s:s.substring(1);return(0,r.i7)(t,e)}if("count"===a)return b(s);if("currency"===a)return(0,r.Aq)(s);if("bool"===a){if(t=s.indexOf("/"),t>=0){return m(s.substring(0,t),s.substring(t+1))}return m(s,"-")}}return p(e)}return t}function w(){return c||x(),l}function j(){return c||x(),o.map((e=>({text:e.name,submenu:e.formats.map((e=>({text:e.name,value:e.id})))})))}},"./packages/grafana-data/src/vector/AppendedVectors.ts":(e,t,a)=>{"use strict";a.d(t,{l:()=>r});var s=a("./packages/grafana-data/src/vector/vectorToArray.ts");function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;n(this,"length",0),n(this,"source",[]),this.length=e}setLength(e){if(e>this.length)this.length=e;else if(e<this.length){const t=[];for(const a of this.source)if(t.push(a),a.end>e){a.end=e;break}this.source=t,this.length=e}}append(e){const t={start:this.length,end:this.length+e.length,values:e};return this.length=t.end,this.source.push(t),t}get(e){for(let t=0;t<this.source.length;t++){const a=this.source[t];if(e>=a.start&&e<a.end)return a.values.get(e-a.start)}}toArray(){return(0,s.n)(this)}toJSON(){return(0,s.n)(this)}}},"./packages/grafana-data/src/vector/CircularVector.ts":(e,t,a)=>{"use strict";a.d(t,{d:()=>i});var s=a("./packages/grafana-data/src/vector/vectorToArray.ts"),n=a("./packages/grafana-data/src/vector/FunctionalVector.ts");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class i extends n.G{constructor(e){super(),r(this,"buffer",void 0),r(this,"index",void 0),r(this,"capacity",void 0),r(this,"tail",void 0),r(this,"add",void 0),this.buffer=e.buffer||[],this.capacity=this.buffer.length,this.tail="head"!==e.append,this.index=0,this.add=this.getAddFunction(),e.capacity&&this.setCapacity(e.capacity)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?e=>{this.buffer.push(e),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:e=>{this.buffer.unshift(e),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?e=>{this.buffer[this.index]=e,this.index=(this.index+1)%this.buffer.length}:e=>{let t=this.index-1;t<0&&(t=this.buffer.length-1),this.buffer[t]=e,this.index=t}}setCapacity(e){if(this.capacity===e)return;const t=this.toArray();if(e>this.length)this.buffer=t;else if(e<this.capacity){const a=this.length-e;this.tail?this.buffer=t.slice(a,t.length):this.buffer=t.slice(0,t.length-a)}this.capacity=e,this.index=0,this.add=this.getAddFunction()}setAppendMode(e){const t="head"!==e;t!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=t,this.add=this.getAddFunction())}reverse(){this.buffer.reverse()}get(e){return this.buffer[(e+this.index)%this.buffer.length]}set(e,t){this.buffer[(e+this.index)%this.buffer.length]=t}get length(){return this.buffer.length}toArray(){return(0,s.n)(this)}toJSON(){return(0,s.n)(this)}}},"./packages/grafana-data/src/vector/FunctionalVector.ts":(e,t,a)=>{"use strict";a.d(t,{G:()=>n,s:()=>r});var s=a("./packages/grafana-data/src/vector/vectorToArray.ts");class n{*iterator(){for(let e=0;e<this.length;e++)yield this.get(e)}[Symbol.iterator](){return this.iterator()}forEach(e){return r(this).forEach(e)}map(e){return r(this).map(e)}filter(e){return r(this).filter(e)}toArray(){return(0,s.n)(this)}toJSON(){return this.toArray()}}function r(e){return{*[Symbol.iterator](){for(let t=0;t<e.length;t++)yield e.get(t)},forEach(t){for(let a=0;a<e.length;a++)t(e.get(a))},map(t){const a=[];for(let s=0;s<e.length;s++)a.push(t(e.get(s),s));return a},filter(e){const t=[];for(const a of this)e(a)&&t.push(a);return t}}}},"./packages/grafana-data/src/vector/index.ts":(e,t,a)=>{"use strict";a.d(t,{l$:()=>s.l,Gt:()=>n.G,sq:()=>m.s,rM:()=>o.r,dV:()=>r.d,uI:()=>i.u,$Y:()=>u,rm:()=>h,oH:()=>l.o,sD:()=>d.s});var s=a("./packages/grafana-data/src/vector/AppendedVectors.ts"),n=a("./packages/grafana-data/src/vector/ArrayVector.ts"),r=a("./packages/grafana-data/src/vector/CircularVector.ts"),i=a("./packages/grafana-data/src/vector/ConstantVector.ts"),o=a("./packages/grafana-data/src/vector/BinaryOperationVector.ts"),l=a("./packages/grafana-data/src/vector/SortedVector.ts"),c=a("./packages/grafana-data/src/valueFormats/index.ts"),d=a("./packages/grafana-data/src/vector/FunctionalVector.ts");class u extends d.G{constructor(e,t){super(),this.source=e,this.formatter=t}get length(){return this.source.length}get(e){const t=this.source.get(e);return(0,c.zc)(this.formatter(t))}}var p=a("./packages/grafana-data/src/types/index.ts");class h extends d.G{constructor(e){super(),this.len=e}get length(){return this.len}get(e){return e}static newField(e){return{name:"",values:new h(e),type:p.fS.number,config:{min:0,max:e-1}}}}var m=a("./packages/grafana-data/src/vector/AsNumberVector.ts")},"./packages/grafana-e2e-selectors/src/index.ts":(e,t,a)=>{"use strict";a.d(t,{wl:()=>n});const s={TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:e=>`${e} menu`,MenuGroup:e=>`${e} menu group`,MenuItem:e=>`${e} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:e=>`data-testid Panel header ${e}`,headerItems:e=>`Panel header item ${e}`,containerByTitle:e=>`${e} panel`,headerCornerInfo:e=>`Panel header ${e}`},Visualization:{Graph:{VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:e=>`gpl alias ${e}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:e=>`VizLegend series ${e}`},Drawer:{General:{title:e=>`Drawer title ${e}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:e=>`${e} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"panel editor apply",toggleVizPicker:"toggle-viz-picker",toggleVizOptions:"toggle-viz-options",toggleTableView:"toggle-table-view"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:e=>`Tab ${e}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",addQuery:"Query editor add query button"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:e=>`${e} query operation action`,title:e=>`Query editor row title ${e}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:e=>`Alert ${e}`,alertV2:e=>`data-testid Alert ${e}`},TransformTab:{content:"Transform editor tab content",newTransform:e=>`New transform ${e}`,transformationEditor:e=>`Transformation editor ${e}`,transformationEditorDebugger:e=>`Transformation editor debugger ${e}`},Transforms:{card:e=>`New transform ${e}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},searchInput:"search transformations"},PageToolbar:{container:()=>".page-toolbar",item:e=>`${e}`},QueryEditorToolbarItem:{button:e=>`QueryEditor toolbar item button ${e}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:e=>e?`Options group ${e}`:"Options group",toggle:e=>e?`Options group ${e} toggle`:"Options group toggle"},PluginVisualization:{item:e=>`Plugin visualization item ${e}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:()=>'[data-test-id="SpanBar--wrapper"]'},QueryField:{container:"Query field"},ValuePicker:{button:e=>`Value picker button ${e}`,select:e=>`Value picker select ${e}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:e=>`data-testid Collapse folder ${e}`,expandFolder:e=>`data-testid Expand folder ${e}`,dashboardItem:e=>`${s.Search.dashboardItems} ${e}`,dashboardCard:e=>`data-testid Search card ${e}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:e=>`Call to action button ${e}`,buttonV2:e=>`data-testid Call to action button ${e}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:e=>`data-testid suggestion-${e}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:e=>`data-testid dashboard-row-title-${e}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"}},n={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:e=>`Data source list item ${e}`},AddDataSource:{url:"/datasources/new",dataSourcePlugins:e=>`Data source plugin item ${e}`,dataSourcePluginsV2:e=>`Add data source ${e}`},ConfirmModal:{delete:"Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:e=>`/d/${e}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:e=>`data-testid Dashboard template variables submenu Label ${e}`,submenuItemValueDropDownValueLinkTexts:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`},Settings:{General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:e=>`Dashboard settings section item ${e}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Dashboard settings page title"},Annotations:{List:{addAnnotationCTA:s.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:s.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"}},Variables:{List:{addVariableCTA:s.CallToActionCard.button("Add variable"),addVariableCTAV2:s.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:e=>`Variable editor Table Name field ${e}`,tableRowDefinitionFields:e=>`Variable editor Table Definition field ${e}`,tableRowArrowUpButtons:e=>`Variable editor Table ArrowUp button ${e}`,tableRowArrowDownButtons:e=>`Variable editor Table ArrowDown button ${e}`,tableRowDuplicateButtons:e=>`Variable editor Table Duplicate button ${e}`,tableRowRemoveButtons:e=>`Variable editor Table Remove button ${e}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button"},QueryVariable:{queryOptionsDataSourceSelect:s.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field"}}}}},Dashboards:{url:"/dashboards",dashboards:e=>`Dashboard search item ${e}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollBar:()=>".scrollbar-view"}},SoloPanel:{url:e=>`/d-solo/${e}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemRow:"Playlist item row",itemIdType:"Playlist item dashboard by ID type",itemTagType:"Playlist item dashboard by Tag type",itemMoveUp:"Move playlist item order up",itemMoveDown:"Move playlist item order down",itemDelete:"Delete playlist item"}},components:s}},"./packages/grafana-runtime/src/components/PanelDataErrorView.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>n,$:()=>r});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");let n=e=>{let{message:t}=e;return(0,s.jsxs)("div",{children:["Unable to render data: ",t,"."]})};function r(e){n=e}},"./packages/grafana-runtime/src/components/PanelRenderer.tsx":(e,t,a)=>{"use strict";a.d(t,{$:()=>r,L:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");let r=()=>s||(s=(0,n.jsx)("div",{children:"PanelRenderer can only be used after Grafana instance has been started."}));function i(e){r=e}},"./packages/grafana-runtime/src/config.ts":(e,t,a)=>{"use strict";a.d(t,{O:()=>i,v:()=>c});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/index.ts");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class i{constructor(e){r(this,"datasources",{}),r(this,"panels",{}),r(this,"minRefreshInterval",""),r(this,"appUrl",""),r(this,"appSubUrl",""),r(this,"windowTitlePrefix",""),r(this,"buildInfo",{}),r(this,"newPanelTitle",""),r(this,"bootData",void 0),r(this,"externalUserMngLinkUrl",""),r(this,"externalUserMngLinkName",""),r(this,"externalUserMngInfo",""),r(this,"allowOrgCreate",!1),r(this,"disableLoginForm",!1),r(this,"defaultDatasource",""),r(this,"alertingEnabled",!1),r(this,"alertingErrorOrTimeout",""),r(this,"alertingNoDataOrNullValues",""),r(this,"alertingMinInterval",1),r(this,"authProxyEnabled",!1),r(this,"exploreEnabled",!1),r(this,"ldapEnabled",!1),r(this,"sigV4AuthEnabled",!1),r(this,"samlEnabled",!1),r(this,"samlName",""),r(this,"autoAssignOrg",!0),r(this,"verifyEmailEnabled",!1),r(this,"oauth",void 0),r(this,"disableUserSignUp",!1),r(this,"loginHint",void 0),r(this,"passwordHint",void 0),r(this,"loginError",void 0),r(this,"navTree",void 0),r(this,"viewersCanEdit",!1),r(this,"editorsCanAdmin",!1),r(this,"disableSanitizeHtml",!1),r(this,"liveEnabled",!0),r(this,"theme",void 0),r(this,"theme2",void 0),r(this,"pluginsToPreload",[]),r(this,"featureToggles",{}),r(this,"licenseInfo",{}),r(this,"rendererAvailable",!1),r(this,"rendererVersion",""),r(this,"http2Enabled",!1),r(this,"dateFormats",void 0),r(this,"sentry",{enabled:!1,dsn:"",customEndpoint:"",sampleRate:1}),r(this,"pluginCatalogURL","https://grafana.com/grafana/plugins/"),r(this,"pluginAdminEnabled",!0),r(this,"pluginAdminExternalManageEnabled",!1),r(this,"pluginCatalogHiddenPlugins",[]),r(this,"expressionsEnabled",!1),r(this,"customTheme",void 0),r(this,"awsAllowedAuthProviders",[]),r(this,"awsAssumeRoleEnabled",!1),r(this,"azure",{managedIdentityEnabled:!1}),r(this,"caching",{enabled:!1}),r(this,"geomapDefaultBaseLayerConfig",void 0),r(this,"geomapDisableCustomBaseLayer",void 0),r(this,"unifiedAlertingEnabled",!1),r(this,"applicationInsightsConnectionString",void 0),r(this,"applicationInsightsEndpointUrl",void 0),r(this,"recordedQueries",{enabled:!0}),r(this,"featureHighlights",{enabled:!1}),r(this,"reporting",{enabled:!0});const t=e.bootData.user.lightTheme?"light":"dark";this.theme2=(0,n.createTheme)({colors:{mode:t}}),this.theme=this.theme2.v1;(0,s.merge)(this,{datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"v1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1},e),this.dateFormats&&n.systemDateFormats.update(this.dateFormats)}}const o=window.grafanaBootData||{settings:{},user:{},navTree:[]},l=o.settings;l.bootData=o;const c=new i(l)},"./packages/grafana-runtime/src/index.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{BackendDataSourceResponse:()=>_.BackendDataSourceResponse,CopyPanelEvent:()=>i.EK,DataResponse:()=>_.DataResponse,DataSourcePicker:()=>B,DataSourcePickerProps:()=>r.DataSourcePickerProps,DataSourcePickerState:()=>r.DataSourcePickerState,DataSourceWithBackend:()=>O.CK,EchoEventType:()=>i.ee,GrafanaBootConfig:()=>o.O,HealthCheckResult:()=>O.HealthCheckResult,HealthCheckResultDetails:()=>O.HealthCheckResultDetails,HealthStatus:()=>O.QO,HistoryWrapper:()=>i._i,MetaAnalyticsEventName:()=>l,PanelDataErrorView:()=>I.Z,PanelDataErrorViewProps:()=>I.PanelDataErrorViewProps,PanelRenderer:()=>N.$,PanelRendererProps:()=>N.PanelRendererProps,PluginCssOptions:()=>s.PluginCssOptions,QueryRunnerFactory:()=>n.QueryRunnerFactory,RefreshEvent:()=>i.U5,StreamOptionsProvider:()=>O.StreamOptionsProvider,StreamingFrameAction:()=>i.T0,SystemJS:()=>h,ThemeChangedEvent:()=>i.hD,TimeRangeUpdatedEvent:()=>i.md,config:()=>o.v,createQueryRunner:()=>A,featureEnabled:()=>y,frameToMetricFindValue:()=>_.S9,getAngularLoader:()=>i.wi,getAppEvents:()=>i.N$,getBackendSrv:()=>i.i,getDataSourceSrv:()=>i.FC,getEchoSrv:()=>i.RP,getGrafanaLiveSrv:()=>i.gj,getLegacyAngularInjector:()=>i.VH,getLocationSrv:()=>i.Yn,getTemplateSrv:()=>i.JL,isExperimentViewEvent:()=>u,isInteractionEvent:()=>d,isPageviewEvent:()=>c,loadPluginCss:()=>m,locationSearchToObject:()=>i.Ox,locationService:()=>i.E1,logDebug:()=>S,logError:()=>T,logInfo:()=>C,logWarning:()=>k,navigationLogger:()=>i.GQ,registerEchoBackend:()=>i.e6,reportExperimentView:()=>x,reportInteraction:()=>v,reportMetaAnalytics:()=>f,reportPageview:()=>b,setAngularLoader:()=>i.WZ,setAppEvents:()=>i.Xw,setBackendSrv:()=>i.jW,setDataSourceSrv:()=>i.wS,setEchoSrv:()=>i.tz,setGrafanaLiveSrv:()=>i.cA,setLegacyAngularInjector:()=>i.tA,setLocationService:()=>i.ZG,setLocationSrv:()=>i.x_,setQueryRunnerFactory:()=>F,setTemplateSrv:()=>i.lD,toDataQueryError:()=>P.P,toDataQueryResponse:()=>_.z1});var s={};a.r(s),a.d(s,{i:()=>h,Y:()=>m});var n={};a.r(n),a.d(n,{A:()=>A,p:()=>F});var r={};a.r(r),a.d(r,{q:()=>B});var i=a("./packages/grafana-runtime/src/services/index.ts"),o=a("./packages/grafana-runtime/src/config.ts");let l;!function(e){e.DashboardView="dashboard-view",e.DataRequest="data-request"}(l||(l={}));const c=e=>Boolean(e.payload.page),d=e=>Boolean(e.payload.interactionName),u=e=>Boolean(e.payload.experimentId);var p=a("../../opt/drone/yarncache/systemjs-npm-0.20.19-d39d6378eb-4b5a404be7.zip/node_modules/systemjs/dist/system.js");const h=a.n(p)();function m(e){const t=o.v.bootData.user.lightTheme?e.light:e.dark;return h.import(`${t}!css`)}var g=a("./packages/grafana-runtime/src/services/EchoSrv.ts");const f=e=>{(0,g.RP)().addEvent({type:g.ee.MetaAnalytics,payload:e})},b=()=>{var e;const t=i.E1.getLocation(),a=`${null!==(e=o.v.appSubUrl)&&void 0!==e?e:""}${t.pathname}${t.search}${t.hash}`;(0,g.RP)().addEvent({type:g.ee.Pageview,payload:{page:a}})},v=(e,t)=>{(0,g.RP)().addEvent({type:g.ee.Interaction,payload:{interactionName:e,properties:t}})},x=(e,t,a)=>{(0,g.RP)().addEvent({type:g.ee.ExperimentView,payload:{experimentId:e,experimentGroup:t,experimentVariant:a}})},y=e=>{const{enabledFeatures:t}=o.v.licenseInfo;return t&&t[e]};var w=a("../../opt/drone/yarncache/@sentry-minimal-npm-6.17.2-83c2a56c4a-4c1d63deee.zip/node_modules/@sentry/minimal/esm/index.js"),j=a("../../opt/drone/yarncache/@sentry-types-npm-6.17.2-0195e3c74c-0872f84ef9.zip/node_modules/@sentry/types/esm/severity.js");function C(e,t){(0,w.uT)(e,{level:j.z.Info,contexts:t})}function k(e,t){(0,w.uT)(e,{level:j.z.Warning,contexts:t})}function S(e,t){(0,w.uT)(e,{level:j.z.Debug,contexts:t})}function T(e,t){(0,w.Tb)(e,{contexts:t})}var O=a("./packages/grafana-runtime/src/utils/DataSourceWithBackend.ts"),_=a("./packages/grafana-runtime/src/utils/queryResponse.ts"),N=a("./packages/grafana-runtime/src/components/PanelRenderer.tsx"),I=a("./packages/grafana-runtime/src/components/PanelDataErrorView.tsx"),P=a("./packages/grafana-runtime/src/utils/toDataQueryError.ts");let M;const F=e=>{if(M)throw new Error("Runner should only be set when Grafana is starting.");M=e},A=()=>{if(!M)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return M()};var D=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),$=a("./packages/grafana-ui/src/index.ts"),L=a("./packages/grafana-data/src/index.ts"),R=a("./packages/grafana-e2e-selectors/src/index.ts"),E=a("./packages/grafana-runtime/src/services/dataSourceSrv.ts"),z=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class B extends D.PureComponent{constructor(e){super(e),V(this,"dataSourceSrv",(0,E.F)()),V(this,"state",{}),V(this,"onChange",((e,t)=>{if("clear"===t.action&&this.props.onClear)return void this.props.onClear();const a=this.dataSourceSrv.getInstanceSettings(e.value);a&&(this.props.onChange(a),this.setState({error:void 0}))}))}componentDidMount(){const{current:e}=this.props;this.dataSourceSrv.getInstanceSettings(e)||this.setState({error:"Could not find data source "+e})}getCurrentValue(){const{current:e,hideTextValue:t,noDefault:a}=this.props;if(!e&&a)return;const s=this.dataSourceSrv.getInstanceSettings(e);if(s)return{label:s.name.substr(0,37),value:s.uid,imgUrl:s.meta.info.logos.small,hideText:t,meta:s.meta};const n=(0,L.getDataSourceUID)(e);return{label:(null!=n?n:"no name")+" - not found",value:null!=n?n:void 0,imgUrl:"",hideText:t}}getDataSourceOptions(){const{alerting:e,tracing:t,metrics:a,mixed:s,dashboard:n,variables:r,annotations:i,pluginId:o,type:l,filter:c}=this.props;return this.dataSourceSrv.getList({alerting:e,tracing:t,metrics:a,dashboard:n,mixed:s,variables:r,annotations:i,pluginId:o,filter:c,type:l}).map((e=>({value:e.name,label:`${e.name}${e.isDefault?" (default)":""}`,imgUrl:e.meta.info.logos.small,meta:e.meta})))}render(){const{autoFocus:e,onBlur:t,onClear:a,openMenuOnFocus:s,placeholder:n,width:r,inputId:i}=this.props,{error:o}=this.state,l=this.getDataSourceOptions(),c=this.getCurrentValue(),d="function"==typeof a;return(0,z.jsx)("div",{"aria-label":R.wl.components.DataSourcePicker.container,children:(0,z.jsx)($.Select,{"aria-label":R.wl.components.DataSourcePicker.inputV2,inputId:i||"data-source-picker",menuShouldPortal:!0,className:"ds-picker select-container",isMulti:!1,isClearable:d,backspaceRemovesValue:!1,onChange:this.onChange,options:l,autoFocus:e,onBlur:t,width:r,openMenuOnFocus:s,maxMenuHeight:500,placeholder:n,noOptionsMessage:"No datasources found",value:null!=c?c:null,invalid:!!o,getOptionLabel:e=>e.meta&&(0,L.isUnsignedPluginSignature)(e.meta.signature)&&e!==c?(0,z.jsxs)($.HorizontalGroup,{align:"center",justify:"space-between",children:[(0,z.jsx)("span",{children:e.label})," ",(0,z.jsx)($.PluginSignatureBadge,{status:e.meta.signature})]}):e.label||""})})}}V(B,"defaultProps",{autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"})},"./packages/grafana-runtime/src/services/EchoSrv.ts":(e,t,a)=>{"use strict";let s,n;function r(e){n=e}function i(){return n}a.d(t,{ee:()=>s,tz:()=>r,RP:()=>i,e6:()=>o}),function(e){e.Performance="performance",e.MetaAnalytics="meta-analytics",e.Sentry="sentry",e.Pageview="pageview",e.Interaction="interaction",e.ExperimentView="experimentview"}(s||(s={}));const o=e=>{i().addBackend(e)}},"./packages/grafana-runtime/src/services/dataSourceSrv.ts":(e,t,a)=>{"use strict";let s;function n(e){s=e}function r(){return s}a.d(t,{w:()=>n,F:()=>r})},"./packages/grafana-runtime/src/services/index.ts":(e,t,a)=>{"use strict";let s;a.d(t,{EK:()=>D,ee:()=>h.ee,_i:()=>S,U5:()=>M,T0:()=>y.T0,hD:()=>F,md:()=>A,wi:()=>l,N$:()=>R,i:()=>r,FC:()=>c.F,RP:()=>h.RP,gj:()=>y.gj,VH:()=>x,Yn:()=>p,JL:()=>f,Ox:()=>T,E1:()=>O,GQ:()=>I,e6:()=>h.e6,WZ:()=>o,Xw:()=>L,jW:()=>n,wS:()=>c.w,tz:()=>h.tz,cA:()=>y.cA,tA:()=>v,ZG:()=>_,x_:()=>u,lD:()=>g});const n=e=>{s=e},r=()=>s;let i;function o(e){i=e}function l(){return i}var c=a("./packages/grafana-runtime/src/services/dataSourceSrv.ts");let d;function u(e){d=e}function p(){return d}var h=a("./packages/grafana-runtime/src/services/EchoSrv.ts");let m;const g=e=>{m=e},f=()=>m;let b;const v=e=>{b=e},x=()=>b;var y=a("./packages/grafana-runtime/src/services/live.ts"),w=a("./packages/grafana-data/src/index.ts"),j=a("../../opt/drone/yarncache/history-npm-4.10.1-ee217563ae-addd84bc46.zip/node_modules/history/esm/history.js"),C=a("./packages/grafana-ui/src/index.ts"),k=a("./packages/grafana-runtime/src/config.ts");class S{constructor(e){var t,a,s,n;n=void 0,(s="history")in(a=this)?Object.defineProperty(a,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[s]=n,this.history=e||j.lX({basename:null!==(t=k.v.appSubUrl)&&void 0!==t?t:"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(e,t){const a=this.history.location,s=this.getSearchObject();for(const t of Object.keys(e))null===e[t]||void 0===e[t]?delete s[t]:s[t]=e[t];const n=w.urlUtil.renderUrl(a.pathname,s);t?this.history.replace(n,this.history.location.state):this.history.push(n,this.history.location.state)}push(e){this.history.push(e)}replace(e){this.history.replace(e)}reload(){var e;const t=null===(e=this.history.location.state)||void 0===e?void 0:e.routeReloadCounter;this.history.replace(Object.assign({},this.history.location,{state:{routeReloadCounter:t?t+1:1}}))}getLocation(){return this.history.location}getSearchObject(){return T(this.history.location.search)}update(e){if((0,w.deprecationWarning)("LocationSrv","update","partial, push or replace"),e.partial&&e.query)this.partial(e.query,e.partial);else{const t={pathname:e.path};e.query&&(t.search=w.urlUtil.toUrlParams(e.query)),e.replace?this.replace(t):this.push(t)}}}function T(e){let t="number"==typeof e?String(e):e;return t.length>0?t.startsWith("?")?w.urlUtil.parseKeyValue(t.substring(1)):w.urlUtil.parseKeyValue(t):{}}let O=new S;const _=e=>{throw new Error("locationService can be only overriden in test environment")},N=(0,C.createLogger)("Router"),I=N.logger;function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}(0,C.attachDebugger)("location",O,N);class M extends w.BusEventBase{}P(M,"type","refresh");class F extends w.BusEventWithPayload{}P(F,"type","theme-changed");class A extends w.BusEventWithPayload{}P(A,"type","time-range-updated");class D extends w.BusEventWithPayload{}let $;function L(e){$=e}function R(){return $}P(D,"type","copy-panel")},"./packages/grafana-runtime/src/services/live.ts":(e,t,a)=>{"use strict";let s,n;a.d(t,{T0:()=>s,cA:()=>r,gj:()=>i}),function(e){e.Append="append",e.Replace="replace"}(s||(s={}));const r=e=>{n=e},i=()=>n},"./packages/grafana-runtime/src/utils/DataSourceWithBackend.ts":(e,t,a)=>{"use strict";a.d(t,{hr:()=>p,Pr:()=>h,QO:()=>g,B9:()=>b,PI:()=>v,CK:()=>f});var s=a("./packages/grafana-data/src/index.ts"),n=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),r=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/merge.js"),i=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),o=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),l=a("./packages/grafana-runtime/src/services/index.ts"),c=a("./packages/grafana-runtime/src/config.ts"),d=a("./packages/grafana-runtime/src/utils/queryResponse.ts");function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p=Object.freeze({type:"__expr__",uid:"__expr__"});function h(e){var t;if(!e)return!1;const a=null!==(t=e.type)&&void 0!==t?t:e;return a===p.type||"-100"===a}class m extends Error{constructor(e,t){super(e),u(this,"details",void 0),this.details=t,this.name="HealthCheckError"}}let g;!function(e){e.Unknown="UNKNOWN",e.OK="OK",e.Error="ERROR"}(g||(g={}));class f extends s.DataSourceApi{constructor(e){super(e),u(this,"streamOptionsProvider",v)}query(e){const{intervalMs:t,maxDataPoints:a,range:r,requestId:u}=e;let m=e.targets;this.filterQuery&&(m=m.filter((e=>this.filterQuery(e))));const g=m.map((n=>{let r=this.getRef(),i=this.id;if(h(n.datasource))return Object.assign({},n,{datasource:p});if(n.datasource){var o;const t=(0,l.FC)().getInstanceSettings(n.datasource,e.scopedVars);if(!t)throw new Error(`Unknown Datasource: ${JSON.stringify(n.datasource)}`);r=null!==(o=t.rawRef)&&void 0!==o?o:(0,s.getDataSourceRef)(t),i=t.id}return Object.assign({},this.applyTemplateVariables(n,e.scopedVars),{datasource:r,datasourceId:i,intervalMs:t,maxDataPoints:a})}));if(!g.length)return(0,n.of)({data:[]});const f={queries:g};return r&&(f.range=r,f.from=r.from.valueOf().toString(),f.to=r.to.valueOf().toString()),c.v.featureToggles.queryOverLive?(0,l.gj)().getQueryData({request:e,body:f}):(0,l.i)().fetch({url:"/api/ds/query",method:"POST",data:f,requestId:u}).pipe((0,i.w)((t=>{var a;const s=(0,d.z1)(t,g);return null!==(a=s.data)&&void 0!==a&&a.length&&s.data.find((e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.channel}))?b(s,e,this.streamOptionsProvider):(0,n.of)(s)})),(0,o.K)((e=>(0,n.of)((0,d.z1)(e)))))}interpolateVariablesInQueries(e,t){return e.map((e=>this.applyTemplateVariables(e,t)))}applyTemplateVariables(e,t){return e}async getResource(e,t){return(0,l.i)().get(`/api/datasources/${this.id}/resources/${e}`,t)}async postResource(e,t){return(0,l.i)().post(`/api/datasources/${this.id}/resources/${e}`,Object.assign({},t))}async callHealthCheck(){return(0,l.i)().request({method:"GET",url:`/api/datasources/${this.id}/health`,showErrorAlert:!1}).then((e=>e)).catch((e=>e.data))}async testDatasource(){return this.callHealthCheck().then((e=>{if(e.status===g.OK)return{status:"success",message:e.message};throw new m(e.message,e.details)}))}}function b(e,t,a){const i=(0,l.gj)();if(!i)return(0,n.of)(e);const o=[],c=[];for(const n of e.data){var d;const e=(0,s.parseLiveChannelAddress)(null===(d=n.meta)||void 0===d?void 0:d.channel);if(e){const r=n;c.push(i.getDataStream({addr:e,buffer:a(t,r),frame:(0,s.dataFrameToJSON)(n)}))}else o.push(n)}return o.length&&c.push((0,n.of)(Object.assign({},e,{data:o}))),1===c.length?c[0]:(0,r.T)(...c)}const v=(e,t)=>{var a,s;const n={maxLength:null!==(a=e.maxDataPoints)&&void 0!==a?a:500,action:l.T0.Append};return"now"===(null===(s=e.rangeRaw)||void 0===s?void 0:s.to)&&(n.maxDelta=e.range.to.valueOf()-e.range.from.valueOf()),n};f=(0,s.makeClassES5Compatible)(f)},"./packages/grafana-runtime/src/utils/queryResponse.ts":(e,t,a)=>{"use strict";a.d(t,{z1:()=>r,Gw:()=>i,S9:()=>o});var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-runtime/src/utils/toDataQueryError.ts");function r(e,t){var a;const r={data:[],state:s.LoadingState.Done};if(null!==(a=e.data)&&void 0!==a&&a.results){const a=e.data.results,n=null!=t&&t.length?t.map((e=>e.refId)):Object.keys(a),c=[];for(const e of n){const t=a[e];t&&(t.refId=e,c.push(t))}for(const e of c){var i,o,l;if(e.error&&(r.error||(r.error={refId:e.refId,message:e.error},r.state=s.LoadingState.Error)),null!==(i=e.frames)&&void 0!==i&&i.length)for(const t of e.frames){const a=(0,s.dataFrameFromJSON)(t);a.refId||(a.refId=e.refId),r.data.push(a)}else{if(null!==(o=e.series)&&void 0!==o&&o.length)for(const t of e.series)t.refId||(t.refId=e.refId),r.data.push((0,s.toDataFrame)(t));if(null!==(l=e.tables)&&void 0!==l&&l.length)for(const t of e.tables)t.refId||(t.refId=e.refId),r.data.push((0,s.toDataFrame)(t))}}}return e.status&&200!==e.status&&(r.state!==s.LoadingState.Error&&(r.state=s.LoadingState.Error),r.error||(r.error=(0,n.P)(e))),r}function i(e){var t,a,s,n;const i=r(e);var o,l;if(null!==(t=i.error)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.message)return{status:"error",message:i.error.data.message,details:null!==(o=i.error)&&void 0!==o&&null!==(l=o.data)&&void 0!==l&&l.error?{message:i.error.data.error}:void 0};if(null!==(s=i.error)&&void 0!==s&&s.refId&&null!==(n=i.error)&&void 0!==n&&n.message)return{status:"error",message:i.error.message};throw e}function o(e){if(!e||!e.length)return[];const t=[];let a=e.fields.find((e=>e.type===s.FieldType.string));if(a||(a=e.fields.find((e=>e.type!==s.FieldType.time))),a)for(let e=0;e<a.values.length;e++)t.push({text:""+a.values.get(e)});return t}},"./packages/grafana-schema/src/index.ts":(e,t,a)=>{"use strict";let s,n,r,i,o,l,c,d,u,p,h,m,g,f,b,v,x,y,w,j,C,k;a.d(t,{LB:()=>s,pu:()=>u,l8:()=>r,FI:()=>c,pR:()=>i,i3:()=>m,jK:()=>g,KC:()=>o,bQ:()=>h,wf:()=>l,wN:()=>p,As:()=>C,o0:()=>d,h2:()=>w,f3:()=>j,Jp:()=>n}),function(e){e.Auto="auto",e.Bottom="bottom",e.Hidden="hidden",e.Left="left",e.Right="right",e.Top="top"}(s||(s={})),function(e){e.Always="always",e.Auto="auto",e.Never="never"}(n||(n={})),function(e){e.Bars="bars",e.Line="line",e.Points="points"}(r||(r={})),function(e){e.Constant="constant",e.NegativeY="negative-Y"}(i||(i={})),function(e){e.Linear="linear",e.Smooth="smooth",e.StepAfter="stepAfter",e.StepBefore="stepBefore"}(o||(o={})),function(e){e.Linear="linear",e.Log="log",e.Ordinal="ordinal"}(l||(l={})),function(e){e.Hue="hue",e.None="none",e.Opacity="opacity",e.Scheme="scheme"}(c||(c={})),function(e){e.None="none",e.Normal="normal",e.Percent="percent"}(d||(d={})),function(e){e[e.After=1]="After",e[e.Before=-1]="Before",e[e.Center=0]="Center"}(u||(u={})),function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(p||(p={})),function(e){e[e.Down=-1]="Down",e[e.Left=-1]="Left",e[e.Right=1]="Right",e[e.Up=1]="Up"}(h||(h={})),function(e){e.Area="area",e.Line="line",e.LineAndArea="line+area",e.Off="off",e.Series="series"}(m||(m={})),function(e){e.Hidden="hidden",e.List="list",e.Table="table"}(g||(g={})),function(e){e.Auto="auto",e.Horizontal="horizontal",e.Vertical="vertical"}(f||(f={})),function(e){e.Background="background",e.None="none",e.Value="value"}(b||(b={})),function(e){e.Area="area",e.Line="line",e.None="none"}(v||(v={})),function(e){e.Auto="auto",e.Center="center"}(x||(x={})),function(e){e.Auto="auto",e.Name="name",e.None="none",e.Value="value",e.Value_and_name="value_and_name"}(y||(y={})),function(e){e.Auto="auto",e.BasicGauge="basic",e.ColorBackground="color-background",e.ColorBackgroundSolid="color-background-solid",e.ColorText="color-text",e.GradientGauge="gradient-gauge",e.Image="image",e.JSONView="json-view",e.LcdGauge="lcd-gauge"}(w||(w={})),function(e){e.Multi="multi",e.None="none",e.Single="single"}(j||(j={})),function(e){e.Ascending="asc",e.Descending="desc",e.None="none"}(C||(C={})),function(e){e.Basic="basic",e.Gradient="gradient",e.Lcd="lcd"}(k||(k={}));w.Auto},"./packages/grafana-ui/src/components/Alert/Alert.tsx":(e,t,a)=>{"use strict";a.d(t,{b:()=>h});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-e2e-selectors/src/index.ts"),i=a("./packages/grafana-ui/src/themes/index.ts"),o=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),l=a("./packages/grafana-ui/src/components/IconButton/IconButton.tsx"),c=a("./packages/grafana-ui/src/components/Button/Button.tsx"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u=["title","onRemove","children","buttonContent","elevated","bottomSpacing","className","severity"];function p(e){switch(e){case"error":case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check";default:return""}}const h=s.forwardRef(((e,t)=>{let{title:a,onRemove:s,children:h,buttonContent:g,elevated:f,bottomSpacing:b,className:v,severity:x="error"}=e,y=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,u);const w=(0,i.l4)(),j=m(w,x,f,b);return(0,d.jsxs)("div",Object.assign({ref:t,className:(0,n.cx)(j.alert,v),"data-testid":r.wl.components.Alert.alertV2(x)},y,{children:[(0,d.jsx)("div",{className:j.icon,children:(0,d.jsx)(o.J,{size:"xl",name:p(x)})}),(0,d.jsxs)("div",{className:j.body,role:"alert",children:[(0,d.jsx)("div",{className:j.title,children:a}),h&&(0,d.jsx)("div",{className:j.content,children:h})]}),s&&!g&&(0,d.jsx)("div",{className:j.close,children:(0,d.jsx)(l.h,{"aria-label":"Close alert",name:"times",onClick:s,size:"lg",type:"button"})}),s&&g&&(0,d.jsx)("div",{className:j.buttonWrapper,children:(0,d.jsx)(c.zx,{"aria-label":"Close alert",variant:"secondary",onClick:s,type:"button",children:g})})]}))}));h.displayName="Alert";const m=(e,t,a,s)=>{const r=e.colors[t],i=e.shape.borderRadius();return{alert:n.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${i};
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: ${e.colors.background.secondary};
      box-shadow: ${a?e.shadows.z3:e.shadows.z1};
      margin-bottom: ${e.spacing(null!=s?s:2)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${e.colors.background.primary};
        z-index: -1;
      }
    `,icon:n.css`
      padding: ${e.spacing(2,3)};
      background: ${r.main};
      border-radius: ${i} 0 0 ${i};
      color: ${r.contrastText};
      display: flex;
      align-items: center;
      justify-content: center;
    `,title:n.css`
      font-weight: ${e.typography.fontWeightMedium};
      color: ${e.colors.text.primary};
    `,body:n.css`
      color: ${e.colors.text.secondary};
      padding: ${e.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:n.css`
      color: ${e.colors.text.secondary};
      padding-top: ${e.spacing(1)};
      max-height: 50vh;
      overflow-y: scroll;
    `,buttonWrapper:n.css`
      padding: ${e.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
    `,close:n.css`
      padding: ${e.spacing(2,1)};
      background: none;
      display: flex;
    `}}},"./packages/grafana-ui/src/components/BigValue/BigValue.tsx":(e,t,a)=>{"use strict";a.d(t,{w6:()=>P,pc:()=>O,IG:()=>_,ap:()=>N,jG:()=>I});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),r=a.n(n),i=a("./packages/grafana-data/src/index.ts"),o=a("./packages/grafana-ui/src/utils/measureText.ts"),l=a("./packages/grafana-ui/src/utils/index.ts"),c=a("./packages/grafana-schema/src/index.ts"),d=a("./packages/grafana-ui/src/components/uPlot/config/UPlotConfigBuilder.ts"),u=a("./packages/grafana-ui/src/components/uPlot/Plot.tsx"),p=a("./packages/grafana-ui/src/components/uPlot/utils.ts"),h=a("./packages/grafana-ui/src/components/GraphNG/nullInsertThreshold.ts");function m(e,t){var a;const s=e.y.values.length,n=Object.assign({},e.y.config,t);return(0,h.w)({refId:"sparkline",fields:[null!==(a=e.x)&&void 0!==a?a:i.IndexVector.newField(s),Object.assign({},e.y,{config:n})],length:s})}var g=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),f=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const b={drawStyle:c.l8.Line,showPoints:c.Jp.Auto,axisPlacement:c.LB.Hidden};class v extends s.PureComponent{constructor(e){super(e);const t=m(e.sparkline,e.config);this.state={data:(0,p.k6)([t]),alignedDataFrame:t,configBuilder:this.prepareConfig(t)}}static getDerivedStateFromProps(e,t){const a=m(e.sparkline,e.config);return a?Object.assign({},t,{data:(0,p.k6)([a]),alignedDataFrame:a}):Object.assign({},t)}componentDidUpdate(e,t){const{alignedDataFrame:a}=this.state;if(!a)return;let s=!1;s=e.sparkline!==this.props.sparkline?!(0,i.compareDataFrameStructures)(this.state.alignedDataFrame,t.alignedDataFrame):!(0,g.isEqual)(e.config,this.props.config),s&&this.setState({configBuilder:this.prepareConfig(a)})}getYRange(e){var t,a,s;let{min:n,max:r}=null===(t=this.state.alignedDataFrame.fields[1].state)||void 0===t?void 0:t.range;return n===r&&(0===n?r=100:(n=0,r*=2)),[Math.max(n,null!==(a=e.config.min)&&void 0!==a?a:-1/0),Math.min(r,null!==(s=e.config.max)&&void 0!==s?s:1/0)]}prepareConfig(e){const{theme:t}=this.props,a=new d.U;a.setCursor({show:!1,x:!1,y:!1});const s=e.fields[0];a.addScale({scaleKey:"x",orientation:c.wN.Horizontal,direction:c.bQ.Right,isTime:!1,range:()=>{const{sparkline:e}=this.props;if(e.x){if(e.timeRange&&e.x.type===i.FieldType.time)return[e.timeRange.from.valueOf(),e.timeRange.to.valueOf()];const t=e.x.values;return[t.get(0),t.get(t.length-1)]}return[0,e.y.values.length-1]}}),a.addAxis({scaleKey:"x",theme:t,placement:c.LB.Hidden});for(let o=0;o<e.fields.length;o++){var n,r;const l=e.fields[o],d=l.config,u=Object.assign({},b,d.custom);if(l===s||l.type!==i.FieldType.number)continue;const p=d.unit||"__fixed";a.addScale({scaleKey:p,orientation:c.wN.Vertical,direction:c.bQ.Up,range:()=>this.getYRange(l)}),a.addAxis({scaleKey:p,theme:t,placement:c.LB.Hidden});const h=(0,i.getFieldColorModeForField)(l).getCalculator(l,t)(0,0),m=u.drawStyle===c.l8.Points?c.Jp.Always:u.showPoints;a.addSeries({pxAlign:!1,scaleKey:p,theme:t,drawStyle:u.drawStyle,lineColor:null!==(n=u.lineColor)&&void 0!==n?n:h,lineWidth:u.lineWidth,lineInterpolation:u.lineInterpolation,showPoints:m,pointSize:u.pointSize,fillOpacity:u.fillOpacity,fillColor:null!==(r=u.fillColor)&&void 0!==r?r:h})}return a}render(){const{data:e,configBuilder:t}=this.state,{width:a,height:s,sparkline:n}=this.props;return(0,f.jsx)(u.N,{data:e,config:t,width:a,height:s,timeRange:n.timeRange})}}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const y=1.2;class w{constructor(e){var t;x(this,"titleFontSize",void 0),x(this,"valueFontSize",void 0),x(this,"chartHeight",void 0),x(this,"chartWidth",void 0),x(this,"valueColor",void 0),x(this,"panelPadding",void 0),x(this,"justifyCenter",void 0),x(this,"titleToAlignTo",void 0),x(this,"valueToAlignTo",void 0),x(this,"maxTextWidth",void 0),x(this,"maxTextHeight",void 0),x(this,"textValues",void 0),this.props=e;const{width:a,height:s,value:n,text:r}=e;this.valueColor=null!==(t=n.color)&&void 0!==t?t:"gray",this.panelPadding=s>100?12:8,this.textValues=function(e){const{value:t,alignmentFactors:a,count:s}=e;let{textMode:n}=e;const r=a?a.title:t.title,o=(0,i.formattedValueToString)(a||t);n===I.Auto&&1===(null!=s?s:1)&&(n=I.Value);switch(n){case I.Name:return Object.assign({},t,{title:void 0,prefix:void 0,suffix:void 0,text:t.title||"",titleToAlignTo:void 0,valueToAlignTo:null!=r?r:"",tooltip:(0,i.formattedValueToString)(t)});case I.Value:return Object.assign({},t,{title:void 0,titleToAlignTo:void 0,valueToAlignTo:o,tooltip:t.title});case I.None:return{numeric:t.numeric,color:t.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${t.title}\nValue: ${(0,i.formattedValueToString)(t)}`};case I.ValueAndName:default:return Object.assign({},t,{titleToAlignTo:r,valueToAlignTo:o})}}(e),this.justifyCenter=function(e,t){if(e===N.Center)return!0;return 0===(null!=t?t:"").length}(e.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=14,this.valueFontSize=14,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=a-2*this.panelPadding,this.maxTextHeight=s-2*this.panelPadding,r&&(r.titleSize&&(this.titleFontSize=r.titleSize,this.titleToAlignTo=void 0),r.valueSize&&(this.valueFontSize=r.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const e={fontSize:`${this.titleFontSize}px`,lineHeight:y};return this.props.colorMode===O.Background&&(e.color=(0,l.Gc)(this.valueColor)),e}getValueStyles(){const e={fontSize:this.valueFontSize,fontWeight:500,lineHeight:y,position:"relative",zIndex:1};switch(this.justifyCenter&&(e.textAlign="center"),this.props.colorMode){case O.Value:e.color=this.valueColor;break;case O.Background:e.color=(0,l.Gc)(this.valueColor);break;case O.None:e.color=this.props.theme.colors.text.primary}return e}getValueAndTitleContainerStyles(){const e={display:"flex"};return this.justifyCenter&&(e.alignItems="center",e.justifyContent="center",e.flexGrow=1),e}getPanelStyles(){const{width:e,height:t,theme:a,colorMode:s}=this.props,n={width:`${e}px`,height:`${t}px`,padding:`${this.panelPadding}px`,borderRadius:"3px",position:"relative",display:"flex"},i=a.isDark?1:-.7;switch(s){case O.Background:const e=r()(this.valueColor).darken(15*i).spin(8).toRgbString(),t=r()(this.valueColor).darken(5*i).spin(-8).toRgbString();n.background=`linear-gradient(120deg, ${e}, ${t})`;break;case O.Value:n.background="transparent"}return this.justifyCenter&&(n.alignItems="center",n.flexDirection="row"),n}renderChart(){var e;const{sparkline:t,colorMode:a}=this.props;if(!t||(null===(e=t.y)||void 0===e?void 0:e.type)!==i.FieldType.number)return null;let s,n;switch(a){case O.Background:s="rgba(255,255,255,0.4)",n=r()(this.valueColor).brighten(40).toRgbString();break;case O.None:case O.Value:default:n=this.valueColor,s=r()(this.valueColor).setAlpha(.2).toRgbString()}const o={custom:{drawStyle:c.l8.Line,lineWidth:1,fillColor:s,lineColor:n}};return(0,f.jsx)("div",{style:this.getChartStyles(),children:(0,f.jsx)(v,{height:this.chartHeight,width:this.chartWidth,sparkline:t,config:o,theme:this.props.theme})})}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class j extends w{constructor(e){var t,a;super(e);const s=null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,o.MX)(this.valueToAlignTo,this.maxTextWidth*s,this.maxTextHeight,y)),null!==(a=this.titleToAlignTo)&&void 0!==a&&a.length&&(this.titleFontSize=(0,o.MX)(this.titleToAlignTo,.6*this.maxTextWidth,this.maxTextHeight,y,30),this.titleFontSize=Math.min(.7*this.valueFontSize,this.titleFontSize))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="row",e.alignItems="center",e.flexGrow=1,this.justifyCenter||(e.justifyContent="space-between"),e}renderChart(){return null}getPanelStyles(){const e=super.getPanelStyles();return e.alignItems="center",e}}class C extends w{constructor(e){var t;super(e);const{width:a,height:s}=e;this.chartWidth=a,this.chartHeight=.5*s,null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length&&(this.titleFontSize=(0,o.MX)(this.titleToAlignTo,.6*this.maxTextWidth,.4*this.maxTextHeight,y,30)),this.valueToAlignTo.length&&(this.valueFontSize=(0,o.MX)(this.valueToAlignTo,.4*this.maxTextWidth,.5*this.maxTextHeight,y))}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="row",e.flexGrow=1,this.justifyCenter||(e.justifyContent="space-between"),e}getPanelStyles(){const e=super.getPanelStyles();return e.flexDirection="row",e.justifyContent="space-between",e}}class k extends w{constructor(e){var t,a;super(e);const{width:s,height:n}=e;let r=0;this.chartHeight=.25*n,this.chartWidth=s,null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length&&(this.titleFontSize=(0,o.MX)(this.titleToAlignTo,this.maxTextWidth,.15*n,y,30)),r=this.titleFontSize*y,this.valueToAlignTo.length&&(this.valueFontSize=(0,o.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-r,y)),null!==(a=this.titleToAlignTo)&&void 0!==a&&a.length&&(this.titleFontSize=Math.min(.7*this.valueFontSize,this.titleFontSize)),this.chartHeight=n-this.titleFontSize*y-this.valueFontSize*y}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="column",e.justifyContent="center",e}getPanelStyles(){const e=super.getPanelStyles();return e.flexDirection="column",e}}class S extends w{constructor(e){var t;super(e);const{height:a}=e;let s=0;null!==(t=this.titleToAlignTo)&&void 0!==t&&t.length&&(this.titleFontSize=(0,o.MX)(this.titleToAlignTo,this.maxTextWidth,.15*a,y,30),s=this.titleFontSize*y),this.valueToAlignTo.length&&(this.valueFontSize=(0,o.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-s,y)),this.titleFontSize=Math.min(.7*this.valueFontSize,this.titleFontSize)}getValueAndTitleContainerStyles(){const e=super.getValueAndTitleContainerStyles();return e.flexDirection="column",e.flexGrow=1,e}getPanelStyles(){const e=super.getPanelStyles();return e.alignItems="center",e}}var T=a("./packages/grafana-ui/src/components/FormattedValueDisplay/FormattedValueDisplay.tsx");let O,_,N,I;!function(e){e.Value="value",e.Background="background",e.None="none"}(O||(O={})),function(e){e.None="none",e.Line="line",e.Area="area"}(_||(_={})),function(e){e.Auto="auto",e.Center="center"}(N||(N={})),function(e){e.Auto="auto",e.Value="value",e.ValueAndName="value_and_name",e.Name="name",e.None="none"}(I||(I={}));class P extends s.PureComponent{render(){const{onClick:e,className:t,hasLinks:a}=this.props,s=function(e){const{width:t,height:a,sparkline:s}=e;return t/a>2.5?a>50&&s?new C(e):new j(e):a>100&&s?new k(e):new S(e)}(this.props),n=s.getPanelStyles(),r=s.getValueAndTitleContainerStyles(),i=s.getValueStyles(),o=s.getTitleStyles(),l=s.textValues,c=a?void 0:l.tooltip;return(0,f.jsxs)("div",{className:t,style:n,onClick:e,title:c,children:[(0,f.jsxs)("div",{style:r,children:[l.title&&(0,f.jsx)("div",{style:o,children:l.title}),(0,f.jsx)(T.W,{value:l,style:i})]}),s.renderChart()]})}}var M,F,A;M=P,F="defaultProps",A={justifyMode:N.Auto},F in M?Object.defineProperty(M,F,{value:A,enumerable:!0,configurable:!0,writable:!0}):M[F]=A},"./packages/grafana-ui/src/components/Button/Button.tsx":(e,t,a)=>{"use strict";a.d(t,{zx:()=>m,Qj:()=>g,fW:()=>f,c9:()=>v});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/themes/index.ts"),i=a("./packages/grafana-ui/src/components/Forms/commonStyles.ts"),o=a("./packages/grafana-data/src/index.ts"),l=a("./packages/grafana-ui/src/themes/mixins.ts"),c=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u=["variant","size","fill","icon","fullWidth","children","className"],p=["variant","size","fill","icon","fullWidth","children","className","onBlur","onFocus","disabled"];function h(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}const m=s.forwardRef(((e,t)=>{let{variant:a="primary",size:s="md",fill:i="solid",icon:o,fullWidth:l,children:p,className:g}=e,b=h(e,u);const v=(0,r.l4)(),y=f({theme:v,size:s,variant:a,fill:i,fullWidth:l,iconOnly:!p});return x("link"===a,`${m.displayName}: Prop variant="link" is deprecated. Please use fill="text".`),(0,d.jsxs)("button",Object.assign({className:(0,n.cx)(y.button,g)},b,{ref:t,children:[o&&(0,d.jsx)(c.J,{name:o,size:s,className:y.icon}),p&&(0,d.jsx)("span",{className:y.content,children:p})]}))}));m.displayName="Button";const g=s.forwardRef(((e,t)=>{let{variant:a="primary",size:s="md",fill:i="solid",icon:o,fullWidth:l,children:u,className:m,disabled:b}=e,v=h(e,p);const y=(0,r.l4)(),w=f({theme:y,fullWidth:l,size:s,variant:a,fill:i,iconOnly:!u}),j=(0,n.cx)(w.button,{[(0,n.css)(w.disabled,{pointerEvents:"none"})]:b},m);return x("link"===a,`${g.displayName}: Prop variant="link" is deprecated. Please use fill="text".`),(0,d.jsxs)("a",Object.assign({className:j},v,{tabIndex:b?-1:0,ref:t,children:[o&&(0,d.jsx)(c.J,{name:o,size:s,className:w.icon}),u&&(0,d.jsx)("span",{className:w.content,children:u})]}))}));g.displayName="LinkButton";const f=e=>{const{theme:t,variant:a,fill:s="solid",size:r,iconOnly:o,fullWidth:c}=e,{height:d,padding:u,fontSize:p}=(0,i.iL)(r,t),h=v(t,a,s),m=function(e,t,a){const s={cursor:"not-allowed",boxShadow:"none",color:e.colors.text.disabled,transition:"none"};if("text"===a||"link"===t)return Object.assign({},s,{background:"transparent",border:"1px solid transparent"});if("outline"===a)return Object.assign({},s,{background:"transparent",border:`1px solid ${e.colors.action.disabledText}`});return Object.assign({},s,{background:e.colors.action.disabledBackground,border:"1px solid transparent"})}(t,a,s),g=(0,l.getFocusStyles)(t),f=t.spacing.gridSize*u-1;return{button:(0,n.css)(Object.assign({label:"button",display:"inline-flex",alignItems:"center",fontSize:p,fontWeight:t.typography.fontWeightMedium,fontFamily:t.typography.fontFamily,padding:`0 ${f}px`,height:t.spacing(d),lineHeight:t.spacing.gridSize*d-2+"px",verticalAlign:"middle",cursor:"pointer",borderRadius:t.shape.borderRadius(1),"&:focus":g,"&:focus-visible":g,"&:focus:not(:focus-visible)":(0,l.getMouseFocusStyles)(t)},c&&{flexGrow:1,justifyContent:"center"},h,{":disabled":m,"&[disabled]":m})),disabled:(0,n.css)(m),img:n.css`
      width: 16px;
      height: 16px;
      margin: ${t.spacing(0,1,0,.5)};
    `,icon:o?(0,n.css)({marginRight:t.spacing(-u/2),marginLeft:t.spacing(-u/2)}):(0,n.css)({marginRight:t.spacing(u/2)}),content:n.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      white-space: nowrap;
      height: 100%;
    `}};function b(e,t,a){return"outline"===a?{background:"transparent",color:t.text,border:`1px solid ${t.border}`,transition:e.transitions.create(["background-color","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{background:o.colorManipulator.alpha(t.main,e.colors.action.hoverOpacity),borderColor:e.colors.emphasize(t.border,.25),color:t.text}}:"text"===a?{background:"transparent",color:t.text,border:"1px solid transparent",transition:e.transitions.create(["background-color","color"],{duration:e.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:o.colorManipulator.alpha(t.shade,e.colors.action.hoverOpacity),textDecoration:"none"}}:{background:t.main,color:t.contrastText,border:"1px solid transparent",transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{background:t.shade,color:t.contrastText,boxShadow:e.shadows.z1}}}function v(e,t,a){const s="link"===t?"text":a;switch("link"===t?"primary":t){case"secondary":return b(e,e.colors.secondary,s);case"destructive":return b(e,e.colors.error,s);default:return b(e,e.colors.primary,s)}}function x(e,t){0}},"./packages/grafana-ui/src/components/Button/index.ts":(e,t,a)=>{"use strict";a.d(t,{zx:()=>s.zx,hE:()=>c,Qj:()=>s.Qj,hA:()=>x,RN:()=>k,fW:()=>s.fW});var s=a("./packages/grafana-ui/src/components/Button/Button.tsx"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./packages/grafana-ui/src/themes/index.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=["className","children"];const c=(0,n.forwardRef)(((e,t)=>{let{className:a,children:s}=e,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,l);const c=(0,i.wW)(d);return(0,o.jsx)("div",Object.assign({ref:t,className:(0,r.cx)("button-group",c.wrapper,a)},n,{children:s}))}));c.displayName="ButtonGroup";const d=e=>({wrapper:r.css`
    display: flex;

    > .button-group:not(:first-child) > button,
    > button:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    > .button-group:not(:last-child) > button,
    > button:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right-width: 0;
    }
  `});var u,p,h=a("./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx"),m=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),g=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),f=a("./packages/grafana-e2e-selectors/src/index.ts"),b=a("./packages/grafana-ui/src/themes/mixins.ts");const v=["tooltip","icon","className","children","imgSrc","imgAlt","fullWidth","isOpen","narrow","variant","iconOnly","aria-label","isHighlighted"];const x=(0,n.forwardRef)(((e,t)=>{let{tooltip:a,icon:s,className:n,children:l,imgSrc:c,imgAlt:d,fullWidth:g,isOpen:f,narrow:b,variant:x="default",iconOnly:C,"aria-label":k,isHighlighted:S}=e,T=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,v);const O=(0,i.wW)(j),_=(0,r.cx)("toolbar-button",{[O.button]:!0,[O.buttonFullWidth]:g,[O.narrow]:b},O[x],n),N=(0,r.cx)({[O.content]:!0,[O.contentWithIcon]:!!s,[O.contentWithRightIcon]:void 0!==f}),I=(0,o.jsxs)("button",Object.assign({ref:t,className:_,"aria-label":y(k,a),"aria-expanded":f},T,{children:[w(s),c&&(0,o.jsx)("img",{className:O.img,src:c,alt:null!=d?d:""}),l&&!C&&(0,o.jsx)("div",{className:N,children:l}),!1===f&&(u||(u=(0,o.jsx)(m.J,{name:"angle-down"}))),!0===f&&(p||(p=(0,o.jsx)(m.J,{name:"angle-up"}))),S&&(0,o.jsx)("div",{className:O.highlight})]}));return a?(0,o.jsx)(h.u,{content:a,placement:"bottom",children:I}):I}));function y(e,t){return e||(t?f.wl.components.PageToolbar.item(t):void 0)}function w(e){return e?(0,g.isString)(e)?(0,o.jsx)(m.J,{name:e,size:"lg"}):e:null}x.displayName="ToolbarButton";const j=e=>{const t=(0,s.c9)(e,"primary","solid"),a=(0,s.c9)(e,"destructive","solid");return{button:r.css`
      label: toolbar-button;
      position: relative;
      display: flex;
      align-items: center;
      height: ${e.spacing(e.components.height.md)};
      padding: ${e.spacing(0,1)};
      border-radius: ${e.shape.borderRadius()};
      line-height: ${e.components.height.md*e.spacing.gridSize-2}px;
      font-weight: ${e.typography.fontWeightMedium};
      border: 1px solid ${e.colors.border.weak};
      white-space: nowrap;
      transition: ${e.transitions.create(["background","box-shadow","border-color","color"],{duration:e.transitions.duration.short})};

      &:focus,
      &:focus-visible {
        ${(0,b.getFocusStyles)(e)}
        z-index: 1;
      }

      &:focus:not(:focus-visible) {
        ${(0,b.getMouseFocusStyles)(e)}
      }

      &:hover {
        box-shadow: ${e.shadows.z1};
      }

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        opacity: ${e.colors.action.disabledOpacity};
        background: ${e.colors.action.disabledBackground};
        box-shadow: none;

        &:hover {
          color: ${e.colors.text.disabled};
          background: ${e.colors.action.disabledBackground};
          box-shadow: none;
        }
      }
    `,default:r.css`
      color: ${e.colors.text.secondary};
      background-color: ${e.colors.background.primary};

      &:hover {
        color: ${e.colors.text.primary};
        background: ${e.colors.background.secondary};
      }
    `,active:r.css`
      color: ${e.v1.palette.orangeDark};
      border-color: ${e.v1.palette.orangeDark};
      background-color: transparent;

      &:hover {
        color: ${e.colors.text.primary};
        background: ${e.colors.emphasize(e.colors.background.canvas,.03)};
      }
    `,primary:(0,r.css)(t),destructive:(0,r.css)(a),narrow:r.css`
      padding: 0 ${e.spacing(.5)};
    `,img:r.css`
      width: 16px;
      height: 16px;
      margin-right: ${e.spacing(1)};
    `,buttonFullWidth:r.css`
      flex-grow: 1;
    `,content:r.css`
      flex-grow: 1;
    `,contentWithIcon:r.css`
      display: none;
      padding-left: ${e.spacing(1)};

      @media ${i.GU.mediaUp(e.v1.breakpoints.md)} {
        display: block;
      }
    `,contentWithRightIcon:r.css`
      padding-right: ${e.spacing(.5)};
    `,highlight:r.css`
      background-color: ${e.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      position: absolute;
      top: -3px;
      right: -3px;
      z-index: 1;
    `}},C=["className","children"];const k=(0,n.forwardRef)(((e,t)=>{let{className:a,children:s}=e,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,C);const l=(0,i.wW)(S);return(0,o.jsx)("div",Object.assign({ref:t,className:(0,r.cx)(l.wrapper,a)},n,{children:s}))}));k.displayName="ToolbarButtonRow";const S=e=>({wrapper:r.css`
    display: flex;

    > .button-group,
    > .toolbar-button {
      margin-left: ${e.spacing(1)};

      &:first-child {
        margin-left: 0;
      }
    }
  `})},"./packages/grafana-ui/src/components/Cascader/Cascader.tsx":(e,t,a)=>{"use strict";a.d(t,{v:()=>g});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),i=a("./.yarn/__virtual__/rc-cascader-virtual-ab2a58208b/3/opt/drone/yarncache/rc-cascader-npm-3.2.1-6292eb69ad-0f96d976ad.zip/node_modules/rc-cascader/es/index.js"),o=a("./packages/grafana-ui/src/components/Select/Select.tsx"),l=a("./packages/grafana-ui/src/components/Input/Input.tsx"),c=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),d=a("./packages/grafana-ui/src/components/Cascader/optionMappings.ts"),u=a("../../opt/drone/yarncache/memoize-one-npm-6.0.0-8b2a2cd020-f185ea69f7.zip/node_modules/memoize-one/dist/memoize-one.esm.js"),p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m=(0,c.css)("\n&:focus{\n  outline: none;\n}\n");class g extends n.PureComponent{constructor(e){var t;super(e),t=this,h(this,"flattenOptions",(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=[];for(const n of e){const e=[...a];e.push(n),n.items?s=[...s,...t.flattenOptions(n.items,e)]:s.push({singleLabel:e[e.length-1].label,label:e.map((e=>e.label)).join(t.props.separator||" / "),value:e.map((e=>e.value))})}return s})),h(this,"getSearchableOptions",(0,u.Z)((e=>this.flattenOptions(e)))),h(this,"onChange",((e,t)=>{this.setState({rcValue:e,focusCascade:!0,activeLabel:this.props.displayAllSelectedLevels?t.map((e=>e.label)).join(this.props.separator||"/"):t[t.length-1].label}),this.props.onSelect(t[t.length-1].value)})),h(this,"onSelect",(e=>{const t=e.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?e.label:e.singleLabel||"",rcValue:t,isSearching:!1}),this.props.onSelect(t[t.length-1])})),h(this,"onCreateOption",(e=>{this.setState({activeLabel:e,rcValue:[],isSearching:!1}),this.props.onSelect(e)})),h(this,"onBlur",(()=>{this.setState({isSearching:!1,focusCascade:!1}),""===this.state.activeLabel&&this.setState({rcValue:[]})})),h(this,"onBlurCascade",(()=>{this.setState({focusCascade:!1})})),h(this,"onInputKeyDown",(e=>{"ArrowDown"!==e.key&&"ArrowUp"!==e.key&&"Enter"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&this.setState({focusCascade:!1,isSearching:!0})}));const a=this.getSearchableOptions(e.options),{rcValue:s,activeLabel:n}=this.setInitialValue(a,e.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:s,activeLabel:n}}setInitialValue(e,t){if(!t)return{rcValue:[],activeLabel:""};for(const a of e){const e=a.value||[];if(e.indexOf(t)===e.length-1)return{rcValue:e,activeLabel:this.props.displayAllSelectedLevels?a.label:a.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:t}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:e,formatCreateLabel:t,placeholder:a,width:n,changeOnSelect:c,options:u}=this.props,{focusCascade:h,isSearching:g,rcValue:f,activeLabel:b}=this.state,v=this.getSearchableOptions(u);return(0,p.jsx)("div",{children:g?(0,p.jsx)(o.Ph,{menuShouldPortal:!0,allowCustomValue:e,placeholder:a,autoFocus:!h,onChange:this.onSelect,onBlur:this.onBlur,options:v,onCreateOption:this.onCreateOption,formatCreateLabel:t,width:n}):(0,p.jsx)(i.Z,{onChange:(0,d.K)(this.onChange),options:u,changeOnSelect:c,value:f.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,children:(0,p.jsx)("div",{className:m,children:(0,p.jsx)(l.I,{width:n,placeholder:a,onBlur:this.onBlurCascade,value:b,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:h?s||(s=(0,p.jsx)(r.J,{name:"angle-up"})):(0,p.jsx)(r.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})})})})})}}h(g,"defaultProps",{changeOnSelect:!0})},"./packages/grafana-ui/src/components/Cascader/optionMappings.ts":(e,t,a)=>{"use strict";a.d(t,{K:()=>s,p:()=>n});const s=e=>(t,a)=>{e&&e(t.map((e=>String(e))),r(a))},n=e=>t=>{e&&e(r(t))},r=e=>e.map(i),i=e=>{var t;return{value:null!==(t=e.value)&&void 0!==t?t:"",label:e.label}}},"./packages/grafana-ui/src/components/ClickOutsideWrapper/ClickOutsideWrapper.tsx":(e,t,a)=>{"use strict";a.d(t,{L:()=>i});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class i extends s.PureComponent{constructor(){super(...arguments),r(this,"myRef",(0,s.createRef)()),r(this,"state",{hasEventListener:!1}),r(this,"onOutsideClick",(e=>{const t=this.myRef.current;t&&t.contains(e.target)||this.props.onClick()}))}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return(0,n.jsx)("div",{ref:this.myRef,children:this.props.children})}}r(i,"defaultProps",{includeButtonPress:!0,parent:window,useCapture:!1})},"./packages/grafana-ui/src/components/ColorPicker/ColorPicker.tsx":(e,t,a)=>{"use strict";a.d(t,{zH:()=>g,sp:()=>f});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/components/Tooltip/PopoverController.tsx"),r=a("./packages/grafana-ui/src/components/Tooltip/Popover.tsx"),i=a("./packages/grafana-ui/src/components/ColorPicker/ColorPickerPopover.tsx"),o=a("./packages/grafana-ui/src/components/ColorPicker/SeriesColorPickerPopover.tsx"),l=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),c=a("./packages/grafana-ui/src/themes/index.ts"),d=a("./packages/grafana-ui/src/components/ColorPicker/ColorSwatch.tsx"),u=a("./packages/grafana-ui/src/utils/closePopover.ts"),p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m=function(e){var t,a;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ColorPicker";return a=t=class extends s.Component{constructor(){super(...arguments),h(this,"pickerTriggerRef",(0,s.createRef)()),h(this,"onColorChange",(e=>{const{onColorChange:t,onChange:a}=this.props;return(t||a)(e)}))}render(){const{theme:t,children:a}=this.props,i=b(t),o=s.createElement(e,Object.assign({},Object.assign({},this.props,{children:null}),{onChange:this.onColorChange}));return(0,p.jsx)(n.D,{content:o,hideAfter:300,children:(e,s,n)=>(0,p.jsxs)(p.Fragment,{children:[this.pickerTriggerRef.current&&(0,p.jsx)(r.J,Object.assign({},n,{referenceElement:this.pickerTriggerRef.current,wrapperClassName:i.colorPicker,onMouseLeave:s,onMouseEnter:e,onKeyDown:e=>(0,u.i)(e,s)})),a?a({ref:this.pickerTriggerRef,showColorPicker:e,hideColorPicker:s}):(0,p.jsx)(d.b,{ref:this.pickerTriggerRef,onClick:e,onMouseLeave:s,color:t.visualization.getColorByName(this.props.color||"#000000")})]})})}},h(t,"displayName",i),a},g=(0,c.HE)(m(i.h,"ColorPicker")),f=(0,c.HE)(m(o.jx,"SeriesColorPicker")),b=(0,c.Bb)((e=>({colorPicker:l.css`
      position: absolute;
      z-index: ${e.zIndex.tooltip};
      color: ${e.colors.text.primary};
      max-width: 400px;
      font-size: ${e.typography.size.sm};
      // !important because these styles are also provided to popper via .popper classes from Tooltip component
      // hope to get rid of those soon
      padding: 15px !important;
      & [data-placement^='top'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='bottom'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='left'] {
        padding-top: 0 !important;
      }
      & [data-placement^='right'] {
        padding-top: 0 !important;
      }
    `})))},"./packages/grafana-ui/src/components/ColorPicker/ColorPickerPopover.tsx":(e,t,a)=>{"use strict";a.d(t,{h:()=>M});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/components/ColorPicker/ColorSwatch.tsx"),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),i=a("./packages/grafana-ui/src/themes/ThemeContext.tsx"),o=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js");function l(e,t){const a=new Array(e.length);for(let s=0;s<e.length;s++){const n=e.length-1-s;a[s]=t(e[n],n,e)}return a}var c=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const d=["hue","selectedColor","onColorSelect"];const u=e=>{let{hue:t,selectedColor:a,onColorSelect:s}=e,o=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,d);const u=(0,r.upperFirst)(t.name),h=(0,i.wW)(p);return(0,c.jsxs)("div",{className:h.colorRow,children:[(0,c.jsx)("div",{className:h.colorLabel,children:u}),(0,c.jsx)("div",Object.assign({},o,{className:h.swatchRow,children:l(t.shades,(e=>(0,c.jsx)(n.b,{"aria-label":e.name,variant:e.primary?n.$.Large:n.$.Small,isSelected:e.name===a,color:e.color,onClick:()=>s(e.name)},e.name)))}))]})},p=e=>({colorRow:o.css`
      display: grid;
      grid-template-columns: 25% 1fr;
      grid-column-gap: ${e.spacing(2)};
      padding: ${e.spacing(.5,0)};

      &:hover {
        background: ${e.colors.background.secondary};
      }
    `,colorLabel:o.css`
      padding-left: ${e.spacing(2)};
      display: flex;
      align-items: center;
    `,swatchRow:o.css`
      display: flex;
      gap: ${e.spacing(1)};
      align-items: center;
      justify-content: space-around;
      flex-direction: row;
    `}),h=e=>{let{color:t,onChange:a}=e;const s=(0,i.l4)(),r=(0,i.wW)(m),o=[];for(const e of s.visualization.hues)o.push((0,c.jsx)(u,{selectedColor:t,hue:e,onColorSelect:a},e.name));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:r.swatches,children:o}),(0,c.jsxs)("div",{className:r.extraColors,children:[(0,c.jsx)(n.b,{isSelected:"transparent"===t,color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>a("transparent")}),(0,c.jsx)(n.b,{isSelected:"text"===t,color:s.colors.text.primary,label:"Text color",onClick:()=>a("text")})]})]})},m=e=>({container:o.css`
      display: flex;
      flex-direction: column;
    `,extraColors:o.css`
      display: flex;
      align-items: center;
      justify-content: space-around;
      gap: ${e.spacing(1)};
      padding: ${e.spacing(1,0)};
    `,swatches:o.css`
      display: grid;
      flex-grow: 1;
    `});var g=a("./.yarn/__virtual__/react-colorful-virtual-bd1e7fbf1d/3/opt/drone/yarncache/react-colorful-npm-5.5.1-284c645240-e608117817.zip/node_modules/react-colorful/dist/index.module.js"),f=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),b=a.n(f),v=a("./packages/grafana-ui/src/components/Input/Input.tsx"),x=a("./packages/grafana-ui/src/themes/index.ts");function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class w extends s.PureComponent{constructor(e){super(e),y(this,"updateColor",(e=>{this.props.onChange(e)})),y(this,"onChange",(e=>{const t=b()(e.currentTarget.value);this.setState({value:e.currentTarget.value}),t.isValid()&&this.updateColor(t.toString())})),y(this,"onBlur",(()=>{b()(this.state.value).isValid()||this.setState({value:this.props.color})})),this.state={previousColor:e.color,value:e.color},this.updateColor=(0,r.debounce)(this.updateColor,100)}static getDerivedStateFromProps(e,t){const a=b()(e.color);return a.isValid()&&e.color!==t.previousColor?Object.assign({},t,{previousColor:e.color,value:a.toString()}):t}render(){const{value:e}=this.state;return(0,c.jsx)(v.I,{className:this.props.className,value:e,onChange:this.onChange,onBlur:this.onBlur,addonBefore:(0,c.jsx)(C,{color:this.props.color})})}}const j=w,C=e=>{let{color:t}=e;const a=(0,x.wW)(k);return(0,c.jsx)("div",{className:(0,o.cx)(a,o.css`
          background-color: ${t};
        `)})},k=e=>o.css`
  height: 100%;
  width: ${4*e.spacing.gridSize}px;
  border-radius: ${e.shape.borderRadius()} 0 0 ${e.shape.borderRadius()};
  border: 1px solid ${e.colors.border.medium};
`;var S=a("./packages/grafana-data/src/index.ts"),T=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useThrottleFn.js");const O=e=>({wrapper:o.css`
    flex-grow: 1;
  `,root:o.css`
    &.react-colorful {
      width: auto;
    }

    .react-colorful {
      &__saturation {
        border-radius: ${e.v1.border.radius.sm} ${e.v1.border.radius.sm} 0 0;
      }
      &__alpha {
        border-radius: 0 0 ${e.v1.border.radius.sm} ${e.v1.border.radius.sm};
      }
      &__alpha,
      &__hue {
        height: ${e.spacing(2)};
        position: relative;
      }
      &__pointer {
        height: ${e.spacing(2)};
        width: ${e.spacing(2)};
      }
    }
  `,colorInput:o.css`
    margin-top: ${e.spacing(2)};
  `}),_=e=>{let{color:t,onChange:a}=e;const[n,r]=(0,s.useState)(t);(0,T.Z)((e=>{a(S.colorManipulator.asHexString(i.visualization.getColorByName(e)))}),500,[n]);const i=(0,x.l4)(),l=(0,x.wW)(O),d=(0,s.useMemo)((()=>n.startsWith("rgba")?n:b()(i.visualization.getColorByName(t)).toRgbString()),[n,i,t]);return(0,c.jsxs)("div",{className:l.wrapper,children:[(0,c.jsx)(g.ef,{className:(0,o.cx)(l.root),color:d,onChange:r}),(0,c.jsx)(j,{theme:i,color:d,onChange:r,className:l.colorInput})]})};var N=a("./.yarn/__virtual__/@react-aria-focus-virtual-d5af2f4276/3/opt/drone/yarncache/@react-aria-focus-npm-3.5.0-e819dae779-c03d4433bd.zip/node_modules/@react-aria/focus/dist/module.js");function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class P extends s.Component{constructor(e){super(e),I(this,"getTabClassName",(e=>{const{activePicker:t}=this.state;return`ColorPickerPopover__tab ${t===e&&"ColorPickerPopover__tab--active"}`})),I(this,"handleChange",(e=>{const{onColorChange:t,onChange:a,enableNamedColors:s,theme:n}=this.props,r=t||a;if(s)return r(e);r(S.colorManipulator.asHexString(n.visualization.getColorByName(e)))})),I(this,"onTabChange",(e=>()=>this.setState({activePicker:e}))),I(this,"renderPicker",(()=>{const{activePicker:e}=this.state,{color:t}=this.props;switch(e){case"spectrum":return(0,c.jsx)(_,{color:t,onChange:this.handleChange});case"palette":return(0,c.jsx)(h,{color:t,onChange:this.handleChange});default:return this.renderCustomPicker(e)}})),I(this,"renderCustomPicker",(e=>{const{customPickers:t,color:a,theme:n}=this.props;return t?s.createElement(t[e].tabComponent,{color:a,theme:n,onChange:this.handleChange}):null})),I(this,"renderCustomPickerTabs",(()=>{const{customPickers:e}=this.props;return e?(0,c.jsx)(c.Fragment,{children:Object.keys(e).map((t=>(0,c.jsx)("button",{className:this.getTabClassName(t),onClick:this.onTabChange(t),children:e[t].name},t)))}):null})),this.state={activePicker:"palette"},((e,t)=>{const{onColorChange:a}=t;a&&(0,S.deprecationWarning)(e,"onColorChange","onChange")})("ColorPickerPopover",e)}render(){const{theme:e}=this.props,t=F(e);return(0,c.jsx)(N.MT,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,c.jsxs)("div",{tabIndex:-1,className:t.colorPickerPopover,children:[(0,c.jsxs)("div",{className:t.colorPickerPopoverTabs,children:[(0,c.jsx)("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette"),children:"Colors"}),(0,c.jsx)("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum"),children:"Custom"}),this.renderCustomPickerTabs()]}),(0,c.jsx)("div",{className:t.colorPickerPopoverContent,children:this.renderPicker()})]})})}}const M=(0,x.HE)(P);M.displayName="ColorPickerPopover";const F=(0,x.Bb)((e=>({colorPickerPopover:o.css`
      border-radius: ${e.shape.borderRadius()};
      box-shadow: ${e.shadows.z3};
      background: ${e.colors.background.primary};
      border: 1px solid ${e.colors.border.medium};

      .ColorPickerPopover__tab {
        width: 50%;
        text-align: center;
        padding: ${e.spacing(1,0)};
        background: ${e.colors.background.secondary};
        color: ${e.colors.text.secondary};
        font-size: ${e.typography.bodySmall.fontSize};
        cursor: pointer;
        border: none;

        &:focus:not(:focus-visible) {
          outline: none;
          box-shadow: none;
        }

        :focus-visible {
          position: relative;
        }
      }

      .ColorPickerPopover__tab--active {
        color: ${e.colors.text.primary};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.background.primary};
      }
    `,colorPickerPopoverContent:o.css`
      width: 246px;
      font-size: ${e.typography.bodySmall.fontSize};
      min-height: 184px;
      padding: ${e.spacing(1)};
      display: flex;
      flex-direction: column;
    `,colorPickerPopoverTabs:o.css`
      display: flex;
      width: 100%;
      border-radius: ${e.shape.borderRadius()} ${e.shape.borderRadius()} 0 0;
    `})))},"./packages/grafana-ui/src/components/ColorPicker/ColorSwatch.tsx":(e,t,a)=>{"use strict";a.d(t,{$:()=>p,b:()=>h});var s=a("./.yarn/__virtual__/@react-aria-focus-virtual-d5af2f4276/3/opt/drone/yarncache/@react-aria-focus-npm-3.5.0-e819dae779-c03d4433bd.zip/node_modules/@react-aria/focus/dist/module.js"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),i=a.n(r),o=a("./packages/grafana-ui/src/themes/ThemeContext.tsx"),l=a("./packages/grafana-e2e-selectors/src/index.ts"),c=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u=["color","label","variant","isSelected","aria-label"];let p;!function(e){e.Small="small",e.Large="large"}(p||(p={}));const h=n.forwardRef(((e,t)=>{let{color:a,label:n,variant:r=p.Small,isSelected:i,"aria-label":c}=e,h=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,u);const g=(0,o.l4)(),{isFocusVisible:f,focusProps:b}=(0,s.Fx)(),v=m(g,r,a,f,i),x=!!n,y=`${c||n} color`;return(0,d.jsxs)("div",Object.assign({ref:t,className:v.wrapper,"data-testid":l.wl.components.ColorSwatch.name},h,{children:[x&&(0,d.jsx)("span",{className:v.label,children:n}),(0,d.jsx)("button",Object.assign({className:v.swatch},b,{"aria-label":y}))]}))})),m=(e,t,a,s,n)=>{const r=i()(a),o=t===p.Small?"16px":"32px";let l="none";return r.getAlpha()<.1&&(l=`2px solid ${e.colors.border.medium}`),{wrapper:(0,c.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,c.css)({marginRight:e.spacing(1)}),swatch:(0,c.css)({width:o,height:o,background:`${a}`,border:l,borderRadius:"50%",outlineOffset:"1px",outline:s?`2px solid  ${e.colors.primary.main}`:"none",boxShadow:n?`inset 0 0 0 2px ${a}, inset 0 0 0 4px ${e.colors.getContrastText(a)}`:"none",transition:e.transitions.create(["transform"],{duration:e.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"}})}};h.displayName="ColorSwatch"},"./packages/grafana-ui/src/components/ColorPicker/SeriesColorPickerPopover.tsx":(e,t,a)=>{"use strict";a.d(t,{jx:()=>d,qR:()=>u});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/components/ColorPicker/ColorPickerPopover.tsx"),r=a("./packages/grafana-ui/src/components/Forms/Legacy/Switch/Switch.tsx"),i=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),o=a("./packages/grafana-ui/src/themes/index.ts"),l=(a("./packages/grafana-ui/src/components/Button/index.ts"),a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js"));const c=["yaxis","onToggleAxis","color"];const d=e=>{const t=(0,o.yK)(p),{yaxis:a,onToggleAxis:s,color:i}=e,d=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,c),u=s?{yaxis:{name:"Y-Axis",tabComponent:()=>(0,l.jsx)(r.r,{label:"Use right y-axis",className:t.colorPickerAxisSwitch,labelClass:t.colorPickerAxisSwitchLabel,checked:2===a,onChange:()=>{s&&s()}},"yaxisSwitch")}}:void 0;return(0,l.jsx)(n.h,Object.assign({},d,{color:i||"#000000",customPickers:u}))};s.PureComponent;const u=(0,o.HE)(d),p=()=>({colorPickerAxisSwitch:i.css`
      width: 100%;
    `,colorPickerAxisSwitchLabel:i.css`
      display: flex;
      flex-grow: 1;
    `})},"./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx":(e,t,a)=>{"use strict";a.d(t,{$:()=>u,Z:()=>p});var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("../../opt/drone/yarncache/classnames-npm-2.3.1-f2ae0a8d3c-14db8889d5.zip/node_modules/classnames/index.js"),r=a.n(n),i=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),l=a("./.yarn/__virtual__/react-custom-scrollbars-2-virtual-5282b3fc85/3/opt/drone/yarncache/react-custom-scrollbars-2-npm-4.4.0-9310d8505e-4d79b36538.zip/node_modules/react-custom-scrollbars-2/lib/index.js"),c=a("./packages/grafana-ui/src/themes/index.ts"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u=e=>{let{autoHide:t=!1,autoHideTimeout:a=200,setScrollTop:s,className:n,autoHeightMin:u="0",autoHeightMax:p="100%",hideTracksWhenNotNeeded:m=!1,hideHorizontalTrack:g,hideVerticalTrack:f,scrollRefCallback:b,updateAfterMountMs:v,scrollTop:x,children:y}=e;const w=(0,o.useRef)(null);(0,o.useEffect)((()=>{w.current&&(null==b||b(w.current.view))}),[w,b]);const j=(0,c.wW)(h);function C(e,t,a){return a.style&&t&&(a.style.display="none"),(0,d.jsx)("div",Object.assign({},a,{className:e}))}(0,o.useEffect)((()=>{w.current&&!(0,i.isNil)(x)&&w.current.scrollTop(x)})),(0,o.useEffect)((()=>{v&&setTimeout((()=>{const e=w.current;null!=e&&e.update&&e.update()}),v)}),[v]);const k=(0,o.useCallback)((e=>C("track-horizontal",g,e)),[g]),S=(0,o.useCallback)((e=>C("track-vertical",f,e)),[f]),T=(0,o.useCallback)((e=>(0,d.jsx)("div",Object.assign({},e,{className:"thumb-horizontal"}))),[]),O=(0,o.useCallback)((e=>(0,d.jsx)("div",Object.assign({},e,{className:"thumb-vertical"}))),[]),_=(0,o.useCallback)((e=>(0,d.jsx)("div",Object.assign({},e,{className:"scrollbar-view"}))),[]),N=(0,o.useCallback)((()=>{w.current&&s&&s(w.current.getValues())}),[s]);return(0,d.jsx)(l.ZP,{ref:w,className:r()(j.customScrollbar,n),onScrollStop:N,autoHeight:!0,autoHide:t,autoHideTimeout:a,hideTracksWhenNotNeeded:m,autoHeightMax:p,autoHeightMin:u,renderTrackHorizontal:k,renderTrackVertical:S,renderThumbHorizontal:T,renderThumbVertical:O,renderView:_,children:y})},p=u,h=e=>({customScrollbar:s.css`
      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to
      // make scroll working it should fit outer container size (scroll appears only when inner container size is
      // greater than outer one).
      display: flex;
      flex-grow: 1;
      .scrollbar-view {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .track-vertical {
        border-radius: ${e.shape.borderRadius(2)};
        width: ${e.spacing(1)} !important;
        right: 0px;
        bottom: ${e.spacing(.25)};
        top: ${e.spacing(.25)};
      }
      .track-horizontal {
        border-radius: ${e.shape.borderRadius(2)};
        height: ${e.spacing(1)} !important;
        right: ${e.spacing(.25)};
        bottom: ${e.spacing(.25)};
        left: ${e.spacing(.25)};
      }
      .thumb-vertical {
        background: ${e.colors.action.focus};
        border-radius: ${e.shape.borderRadius(2)};
        opacity: 0;
      }
      .thumb-horizontal {
        background: ${e.colors.action.focus};
        border-radius: ${e.shape.borderRadius(2)};
        opacity: 0;
      }
      &:hover {
        .thumb-vertical,
        .thumb-horizontal {
          opacity: 1;
          transition: opacity 0.3s ease-in-out;
        }
      }
    `})},"./packages/grafana-ui/src/components/DataLinks/DataLinkInput.tsx":(e,t,a)=>{"use strict";a.d(t,{v:()=>N});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/usePrevious.js"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),o=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useClickAway.js"),l=a("./packages/grafana-ui/src/components/index.ts"),c=a("./packages/grafana-ui/src/themes/index.ts"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u=["suggestions"];const p=e=>({list:r.css`
      border-bottom: 1px solid ${e.colors.border.weak};
      &:last-child {
        border: none;
      }
    `,wrapper:r.css`
      background: ${e.colors.background.primary};
      width: 250px;
    `,item:r.css`
      background: none;
      padding: 2px 8px;
      color: ${e.colors.text.primary};
      cursor: pointer;
      &:hover {
        background: ${e.colors.action.hover};
      }
    `,label:r.css`
      color: ${e.colors.text.secondary};
    `,activeItem:r.css`
      background: ${e.colors.background.secondary};
      &:hover {
        background: ${e.colors.background.secondary};
      }
    `,itemValue:r.css`
      font-family: ${e.typography.fontFamilyMonospace};
      font-size: ${e.typography.size.sm};
    `}),h=e=>{let{suggestions:t}=e,a=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,u);const n=(0,s.useRef)(null);(0,o.Z)(n,(()=>{a.onClose&&a.onClose()}));const r=(0,s.useMemo)((()=>(0,i.groupBy)(t,(e=>e.origin))),[t]),l=(0,c.wW)(p);return(0,d.jsx)("div",{ref:n,className:l.wrapper,children:Object.keys(r).map(((e,t)=>{const n=0===t?0:Object.keys(r).reduce(((e,a,s)=>s>=t?e:e+r[a].length),0);return(0,s.createElement)(m,Object.assign({},a,{suggestions:r[e],label:`${(0,i.capitalize)(e)}`,activeIndex:a.activeIndex,activeIndexOffset:n,key:e}))}))})};h.displayName="DataLinkSuggestions";const m=s.memo((e=>{let{activeIndex:t,activeIndexOffset:a,label:s,onClose:n,onSuggestionSelect:i,suggestions:o,activeRef:u}=e;const h=(0,c.wW)(p);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(l.aVo,{className:h.list,items:o,renderItem:(e,n)=>{const o=n+a===t;return(0,d.jsx)("div",{className:(0,r.cx)(h.item,o&&h.activeItem),ref:o?u:void 0,onClick:()=>{i(e)},title:e.documentation,children:(0,d.jsxs)("span",{className:h.itemValue,children:[(0,d.jsx)("span",{className:h.label,children:s})," ",e.label]})})}})})}));m.displayName="DataLinkSuggestionsList";var g=a("./packages/grafana-ui/src/index.ts");class f{getBoundingClientRect(){const e=window.getSelection(),t=e&&e.anchorNode;if(t&&t.parentElement){return t.parentElement.getBoundingClientRect()}return{top:0,left:0,bottom:0,right:0,width:0,height:0}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}var b=a("../../opt/drone/yarncache/prismjs-npm-1.26.0-15be1ab06b-6de058930c.zip/node_modules/prismjs/prism.js"),v=a.n(b),x=a("./.yarn/__virtual__/@grafana-slate-react-virtual-047372596b/3/opt/drone/yarncache/@grafana-slate-react-npm-0.22.10-grafana-510bc0576d-3417c53d9d.zip/node_modules/@grafana/slate-react/lib/slate-react.es.js"),y=a("./.yarn/__virtual__/slate-plain-serializer-virtual-9906fec247/3/opt/drone/yarncache/slate-plain-serializer-npm-0.7.10-484f263cc0-0fe3f736cb.zip/node_modules/slate-plain-serializer/lib/slate-plain-serializer.es.js"),w=a("./.yarn/__virtual__/react-popper-virtual-0f6b5e2cc8/3/opt/drone/yarncache/react-popper-npm-2.2.5-6e86e4bf1e-915fcf08e1.zip/node_modules/react-popper/lib/esm/Popper.js"),j=a("./packages/grafana-ui/src/slate-plugins/index.ts"),C=a("./packages/grafana-ui/src/utils/slate.ts"),k=a("./packages/grafana-data/src/index.ts"),S=a("./packages/grafana-ui/src/components/Input/Input.tsx"),T=a("./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx");const O=[(0,j.Ze)({onlyIn:e=>"code_block"===e.type,getSyntax:()=>"links"},Object.assign({},v().languages,{links:{builtInVariable:{pattern:/(\${\S+?})/}}}))],_=e=>({input:(0,S.H)({theme:e,invalid:!1}).input,editor:r.css`
    .token.builtInVariable {
      color: ${e.colors.success.text};
    }
    .token.variable {
      color: ${e.colors.primary.text};
    }
  `,suggestionsWrapper:r.css`
    box-shadow: ${e.shadows.z2};
  `,wrapperOverrides:r.css`
    width: 100%;
    > .slate-query-field__wrapper {
      padding: 0;
      background-color: transparent;
      border: none;
    }
  `}),N=(0,s.memo)((e=>{let{value:t,onChange:a,suggestions:i,placeholder:o="http://your-grafana.com/d/000000010/annotations"}=e;const u=(0,s.useRef)(),p=(0,c.wW)(_),[m,b]=(0,s.useState)(!1),[v,j]=(0,s.useState)(0),[S,N]=(0,s.useState)((0,g.makeValue)(t)),I=(0,n.Z)(S),[P,M]=(0,s.useState)(0),F=(0,s.useRef)({showingSuggestions:m,suggestions:i,suggestionsIndex:v,linkUrl:S,onChange:a});F.current={showingSuggestions:m,suggestions:i,suggestionsIndex:v,linkUrl:S,onChange:a};const A=(0,s.useRef)(null);(0,s.useEffect)((()=>{var e,t,a;M((e=A.current,t=v,(null!==(a=null==e?void 0:e.clientHeight)&&void 0!==a?a:0)*t))}),[v]);const D=(0,s.useMemo)((()=>new f),[]),$=s.useCallback(((e,t)=>{if(!F.current.showingSuggestions)return"="===e.key||"$"===e.key||32===e.keyCode&&e.ctrlKey?b(!0):t();switch(e.key){case"Backspace":case"Escape":return b(!1),j(0);case"Enter":return e.preventDefault(),R(F.current.suggestions[F.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":e.preventDefault();const a="ArrowDown"===e.key?1:-1;return j((e=>{return t=e+a,s=F.current.suggestions.length,t-s*Math.floor(t/s);var t,s}));default:return t()}}),[]);(0,s.useEffect)((()=>{I&&I.selection.isFocused&&!S.selection.isFocused&&F.current.onChange(y.Z.serialize(S))}),[S,I]);const L=s.useCallback((e=>{let{value:t}=e;N(t)}),[]),R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.current;const a="$"!==y.Z.serialize(t.value).slice(-1);e.origin!==k.VariableOrigin.Template||e.value===k.DataLinkBuiltInVars.includeVars?t.insertText(`${a?"$":""}{${e.value}}`):t.insertText(`\${${e.value}:queryparam}`),N(t.value),b(!1),j(0),F.current.onChange(y.Z.serialize(t.value))};return(0,d.jsx)("div",{className:p.wrapperOverrides,children:(0,d.jsx)("div",{className:"slate-query-field__wrapper",children:(0,d.jsxs)("div",{className:"slate-query-field",children:[m&&(0,d.jsx)(l.h_i,{children:(0,d.jsx)(w.r,{referenceElement:D,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}],children:e=>{let{ref:t,style:a,placement:s}=e;return(0,d.jsx)("div",{ref:t,style:a,"data-placement":s,className:p.suggestionsWrapper,children:(0,d.jsx)(T.Z,{scrollTop:P,autoHeightMax:"300px",setScrollTop:e=>{let{scrollTop:t}=e;return M(t)},children:(0,d.jsx)(h,{activeRef:A,suggestions:F.current.suggestions,onSuggestionSelect:R,onClose:()=>b(!1),activeIndex:v})})})}})}),(0,d.jsx)(x.ML,{schema:C.Yi,ref:u,placeholder:o,value:F.current.linkUrl,onChange:L,onKeyDown:(e,t,a)=>$(e,a),plugins:O,className:(0,r.cx)(p.editor,p.input,r.css`
                  padding: 3px 8px;
                `)})]})})})}));N.displayName="DataLinkInput"},"./packages/grafana-ui/src/components/DataLinks/DataLinksInlineEditor/DataLinksInlineEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{d:()=>j});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/components/Button/Button.tsx"),i=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),o=a("./packages/grafana-ui/src/components/Modal/Modal.tsx"),l=a("./packages/grafana-ui/src/themes/index.ts"),c=a("./packages/grafana-ui/src/components/Layout/Layout.tsx"),d=a("./packages/grafana-ui/src/components/IconButton/IconButton.tsx"),u=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const p=e=>{let{link:t,onEdit:a,onRemove:s}=e;const r=(0,l.l4)(),i=h(r),{title:o="",url:p=""}=t,m=""!==o.trim(),g=""!==p.trim();return(0,u.jsx)("div",{className:i.wrapper,children:(0,u.jsxs)(c.wc,{spacing:"xs",children:[(0,u.jsxs)(c.Lh,{justify:"space-between",align:"flex-start",width:"100%",children:[(0,u.jsx)("div",{className:(0,n.cx)(i.title,!m&&i.notConfigured),children:m?o:"Data link title not provided"}),(0,u.jsxs)(c.Lh,{children:[(0,u.jsx)(d.h,{name:"pen",onClick:a}),(0,u.jsx)(d.h,{name:"times",onClick:s})]})]}),(0,u.jsx)("div",{className:(0,n.cx)(i.url,!g&&i.notConfigured),title:p,children:g?p:"Data link url not provided"})]})})},h=(0,l.Bb)((e=>({wrapper:n.css`
      margin-bottom: ${e.spacing(2)};
      width: 100%;
      &:last-child {
        margin-bottom: 0;
      }
    `,notConfigured:n.css`
      font-style: italic;
    `,title:n.css`
      color: ${e.colors.text.primary};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
    `,url:n.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 90%;
    `})));var m=a("./packages/grafana-ui/src/components/Switch/Switch.tsx"),g=a("./packages/grafana-ui/src/components/DataLinks/DataLinkInput.tsx"),f=a("./packages/grafana-ui/src/components/Forms/Field.tsx"),b=a("./packages/grafana-ui/src/components/Input/Input.tsx");const v=e=>({listItem:n.css`
    margin-bottom: ${e.spacing()};
  `,infoText:n.css`
    padding-bottom: ${e.spacing(2)};
    margin-left: 66px;
    color: ${e.colors.text.secondary};
  `}),x=s.memo((e=>{let{index:t,value:a,onChange:s,suggestions:n,isLast:r}=e;const i=(0,l.wW)(v);return(0,u.jsxs)("div",{className:i.listItem,children:[(0,u.jsx)(f.g,{label:"Title",children:(0,u.jsx)(b.I,{value:a.title,onChange:e=>{s(t,Object.assign({},a,{title:e.target.value}))},placeholder:"Show details"})}),(0,u.jsx)(f.g,{label:"URL",children:(0,u.jsx)(g.v,{value:a.url,onChange:(e,n)=>{s(t,Object.assign({},a,{url:e}),n)},suggestions:n})}),(0,u.jsx)(f.g,{label:"Open in new tab",children:(0,u.jsx)(m.r,{value:a.targetBlank||!1,onChange:()=>{s(t,Object.assign({},a,{targetBlank:!a.targetBlank}))}})}),r&&(0,u.jsx)("div",{className:i.infoText,children:"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."})]})}));x.displayName="DataLinkEditor";var y=a("./packages/grafana-ui/src/components/Button/index.ts");const w=e=>{let{link:t,index:a,getSuggestions:n,onSave:r,onCancel:i}=e;const[l,c]=(0,s.useState)(t);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(x,{value:l,index:a,isLast:!1,suggestions:n(),onChange:(e,t)=>{c(t)}}),(0,u.jsxs)(o.u.ButtonRow,{children:[(0,u.jsx)(y.zx,{variant:"secondary",onClick:()=>i(a),fill:"outline",children:"Cancel"}),(0,u.jsx)(y.zx,{onClick:()=>{r(a,l)},children:"Save"})]})]})},j=e=>{let{links:t,onChange:a,getSuggestions:n,data:c}=e;const d=(0,l.l4)(),[h,m]=(0,s.useState)(null),[g,f]=(0,s.useState)(!1),b=C(d),v=null!=t?t:[],x=null!==h,y=(e,t)=>{if(g){if(""===t.title.trim()&&""===t.url.trim())return f(!1),void m(null);m(null),f(!1)}const s=(0,i.cloneDeep)(v);s[e]=t,a(s),m(null)},j=e=>{g&&f(!1),m(null)};return(0,u.jsxs)(u.Fragment,{children:[v.length>0&&(0,u.jsx)("div",{className:b.wrapper,children:v.map(((e,t)=>(0,u.jsx)(p,{index:t,link:e,onChange:y,onEdit:()=>m(t),onRemove:()=>(e=>{const t=(0,i.cloneDeep)(v);t.splice(e,1),a(t)})(t),data:c},`${e.title}/${t}`)))}),x&&null!==h&&(0,u.jsx)(o.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{j()},children:(0,u.jsx)(w,{index:h,link:g?{title:"",url:""}:v[h],data:c,onSave:y,onCancel:j,getSuggestions:n})}),(0,u.jsx)(r.zx,{size:"sm",icon:"plus",onClick:()=>{let e=(0,i.cloneDeep)(v);m(e.length),f(!0)},variant:"secondary",children:"Add link"})]})},C=(0,l.Bb)((e=>({wrapper:n.css`
      margin-bottom: ${e.spacing(2)};
    `})))},"./packages/grafana-ui/src/components/FormattedValueDisplay/FormattedValueDisplay.tsx":(e,t,a)=>{"use strict";a.d(t,{W:()=>r});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const n=["value","className","style"];const r=e=>{var t,a;let{value:r,className:i,style:o}=e,l=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,n);const c=(null!==(t=r.prefix)&&void 0!==t?t:"").length>0,d=(null!==(a=r.suffix)&&void 0!==a?a:"").length>0;let u;if(o&&o.fontSize){const e=null==o?void 0:o.fontSize,t=function(e){return e<20?.9:e<26?.8:.6}(e);u={fontSize:e*t}}return(0,s.jsx)("div",Object.assign({className:i,style:o},l,{children:(0,s.jsxs)("div",{children:[c&&(0,s.jsx)("span",{children:r.prefix}),(0,s.jsx)("span",{children:r.text}),d&&(0,s.jsx)("span",{style:u,children:r.suffix})]})}))};r.displayName="FormattedDisplayValue"},"./packages/grafana-ui/src/components/Forms/Field.tsx":(e,t,a)=>{"use strict";a.d(t,{g:()=>p});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/components/Forms/Label.tsx"),r=a("./packages/grafana-ui/src/themes/index.ts"),i=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),o=a("./packages/grafana-ui/src/components/Forms/FieldValidationMessage.tsx"),l=a("./packages/grafana-ui/src/utils/reactUtils.ts"),c=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const d=["label","description","horizontal","invalid","loading","disabled","required","error","children","className","validationMessageHorizontalOverflow","htmlFor"];const u=(0,r.Bb)((e=>({field:i.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${e.spacing(2)};
    `,fieldHorizontal:i.css`
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;
    `,fieldValidationWrapper:i.css`
      margin-top: ${e.spacing(.5)};
    `,fieldValidationWrapperHorizontal:i.css`
      flex: 1 1 100%;
    `,validationMessageHorizontalOverflow:i.css`
      width: 0;
      overflow-x: visible;

      & > * {
        white-space: nowrap;
      }
    `}))),p=e=>{let{label:t,description:a,horizontal:p,invalid:h,loading:m,disabled:g,required:f,error:b,children:v,className:x,validationMessageHorizontalOverflow:y,htmlFor:w}=e,j=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,d);const C=(0,r.l4)(),k=u(C),S=null!=w?w:(0,l.getChildId)(v),T="string"==typeof t?(0,c.jsx)(n._,{htmlFor:S,description:a,children:`${t}${f?" *":""}`}):t;return(0,c.jsxs)("div",Object.assign({className:(0,i.cx)(k.field,p&&k.fieldHorizontal,x)},j,{children:[T,(0,c.jsxs)("div",{children:[s.cloneElement(v,{invalid:h,disabled:g,loading:m}),h&&b&&!p&&(0,c.jsx)("div",{className:(0,i.cx)(k.fieldValidationWrapper,{[k.validationMessageHorizontalOverflow]:!!y}),children:(0,c.jsx)(o.S,{children:b})})]}),h&&b&&p&&(0,c.jsx)("div",{className:(0,i.cx)(k.fieldValidationWrapper,k.fieldValidationWrapperHorizontal,{[k.validationMessageHorizontalOverflow]:!!y}),children:(0,c.jsx)(o.S,{children:b})})]}))}},"./packages/grafana-ui/src/components/Forms/FieldValidationMessage.tsx":(e,t,a)=>{"use strict";a.d(t,{A:()=>o,S:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),r=a("./packages/grafana-ui/src/themes/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=(0,r.Bb)((e=>{const t=`\n      font-size: ${e.typography.size.sm};\n      font-weight: ${e.typography.fontWeightMedium};\n      padding: ${e.spacing(.5,1)};\n      color: ${e.colors.error.contrastText};\n      background: ${e.colors.error.main};\n      border-radius: ${e.shape.borderRadius()};\n      position: relative;\n      display: inline-block;\n    `;return{vertical:s.css`
      ${t}
      margin: ${e.spacing(.5,0,0,0)};

      &:before {
        content: '';
        position: absolute;
        left: 9px;
        top: -5px;
        width: 0;
        height: 0;
        border-width: 0 4px 5px 4px;
        border-color: transparent transparent ${e.colors.error.main} transparent;
        border-style: solid;
      }
    `,horizontal:s.css`
      ${t}
      margin-left: 10px;

      &:before {
        content: '';
        position: absolute;
        left: -5px;
        top: 9px;
        width: 0;
        height: 0;
        border-width: 4px 5px 4px 0;
        border-color: transparent #e02f44 transparent transparent;
        border-style: solid;
      }
    `,fieldValidationMessageIcon:s.css`
      margin-right: ${e.spacing()};
    `}})),l=e=>{let{children:t,horizontal:a,className:l}=e;const c=(0,r.l4)(),d=o(c),u=(0,s.cx)(a?d.horizontal:d.vertical,l);return(0,i.jsxs)("div",{role:"alert",className:u,children:[(0,i.jsx)(n.J,{className:d.fieldValidationMessageIcon,name:"exclamation-triangle"}),t]})}},"./packages/grafana-ui/src/components/Forms/Label.tsx":(e,t,a)=>{"use strict";a.d(t,{F:()=>l,_:()=>c});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/themes/index.ts"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=["children","description","className","category"];const l=(0,s.Bb)((e=>({label:n.css`
      label: Label;
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
      line-height: 1.25;
      margin-bottom: ${e.spacing(.5)};
      color: ${e.colors.text.primary};
      max-width: 480px;
    `,labelContent:n.css`
      display: flex;
      align-items: center;
    `,description:n.css`
      label: Label-description;
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightRegular};
      margin-top: ${e.spacing(.25)};
      display: block;
    `,categories:n.css`
      label: Label-categories;
      display: inline-flex;
      align-items: center;
    `,chevron:n.css`
      margin: 0 ${e.spacing(.25)};
    `}))),c=e=>{let{children:t,description:a,className:c,category:d}=e,u=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,o);const p=(0,s.l4)(),h=l(p),m=null==d?void 0:d.map(((e,t)=>(0,i.jsxs)("span",{className:h.categories,children:[(0,i.jsx)("span",{children:e}),(0,i.jsx)(r.J,{name:"angle-right",className:h.chevron})]},`${e}/${t}`)));return(0,i.jsx)("div",{className:(0,n.cx)(h.label,c),children:(0,i.jsxs)("label",Object.assign({},u,{children:[(0,i.jsxs)("div",{className:h.labelContent,children:[m,t]}),a&&(0,i.jsx)("span",{className:h.description,children:a})]}))})}},"./packages/grafana-ui/src/components/Forms/Legacy/Input/Input.tsx":(e,t,a)=>{"use strict";a.d(t,{G:()=>d,I:()=>u});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/classnames-npm-2.3.1-f2ae0a8d3c-14db8889d5.zip/node_modules/classnames/index.js"),r=a.n(n),i=a("./packages/grafana-ui/src/utils/index.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=["validationEvents","className","hideErrorMessage","inputRef"];function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let d;!function(e){e.Invalid="invalid",e.Valid="valid"}(d||(d={}));class u extends s.PureComponent{constructor(){super(...arguments),c(this,"state",{error:null}),c(this,"validatorAsync",(e=>t=>{const a=(0,i.Gu)(t.target.value,e);this.setState((e=>Object.assign({},e,{error:a?a[0]:null})))})),c(this,"populateEventPropsWithStatus",((e,t)=>{const a=Object.assign({},e);return t?(Object.keys(i.JU).forEach((s=>{((0,i.z3)(s,t)||e[s])&&(a[s]=async a=>{a.persist(),(0,i.z3)(s,t)&&await this.validatorAsync(t[s]).apply(this,[a]),e[s]&&e[s].apply(null,[a,this.status])})})),a):a}))}get status(){return this.state.error?d.Invalid:d.Valid}get isInvalid(){return this.status===d.Invalid}render(){const e=this.props,{validationEvents:t,className:a,hideErrorMessage:s,inputRef:n}=e,i=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,l),{error:c}=this.state,d=r()("gf-form-input",{invalid:this.isInvalid},a),u=this.populateEventPropsWithStatus(i,t);return(0,o.jsxs)("div",{style:{flexGrow:1},children:[(0,o.jsx)("input",Object.assign({},u,{ref:n,className:d})),c&&!s&&(0,o.jsx)("span",{children:c})]})}}c(u,"defaultProps",{className:""})},"./packages/grafana-ui/src/components/Forms/Legacy/Select/IndicatorsContainer.tsx":(e,t,a)=>{"use strict";a.d(t,{B:()=>i,Z:()=>o});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),n=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/dist/index-c7a4d7ce.esm.js"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i=e=>{const t=e.selectProps.menuIsOpen;return(0,r.jsx)(n.c.IndicatorsContainer,Object.assign({},e,{children:(0,r.jsx)(s.J,{name:t?"angle-up":"angle-down",style:{marginTop:"7px"}})}))},o=i},"./packages/grafana-ui/src/components/Forms/Legacy/Select/NoOptionsMessage.tsx":(e,t,a)=>{"use strict";a.d(t,{P:()=>r,Z:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/dist/index-c7a4d7ce.esm.js"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const r=e=>{const{children:t}=e;return(0,n.jsx)(s.c.NoOptionsMessage,Object.assign({},e,{children:(0,n.jsx)("div",{className:"gf-form-select-box__desc-option",children:(0,n.jsx)("div",{className:"gf-form-select-box__desc-option__body",children:t})})}))},i=r},"./packages/grafana-ui/src/components/Forms/Legacy/Select/Select.tsx":(e,t,a)=>{"use strict";a.d(t,{qb:()=>k,Ph:()=>C});var s,n=a("../../opt/drone/yarncache/classnames-npm-2.3.1-f2ae0a8d3c-14db8889d5.zip/node_modules/classnames/index.js"),r=a.n(n),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),o=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/dist/react-select.esm.js"),l=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/dist/index-c7a4d7ce.esm.js"),c=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/creatable/dist/react-select.esm.js"),d=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/async/dist/react-select.esm.js"),u=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const h=e=>{const{children:t,isSelected:a,data:n}=e;return(0,p.jsx)(l.c.Option,Object.assign({},e,{children:(0,p.jsxs)("div",{className:"gf-form-select-box__desc-option",children:[n.imgUrl&&(0,p.jsx)("img",{className:"gf-form-select-box__desc-option__img",src:n.imgUrl}),(0,p.jsxs)("div",{className:"gf-form-select-box__desc-option__body",children:[(0,p.jsx)("div",{children:t}),n.description&&(0,p.jsx)("div",{className:"gf-form-select-box__desc-option__desc",children:n.description})]}),a&&(s||(s=(0,p.jsx)(u.J,{name:"check","aria-hidden":"true"})))]})}))};var m=a("./packages/grafana-ui/src/components/Select/SelectOptionGroup.tsx"),g=a("./packages/grafana-ui/src/components/Select/SingleValue.tsx"),f=a("./packages/grafana-ui/src/components/Forms/Legacy/Select/IndicatorsContainer.tsx"),b=a("./packages/grafana-ui/src/components/Forms/Legacy/Select/NoOptionsMessage.tsx"),v=a("./packages/grafana-ui/src/components/Select/resetSelectStyles.ts"),x=a("./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx"),y=a("./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx"),w=a("./packages/grafana-ui/src/themes/index.ts");function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class C extends i.PureComponent{render(){const{defaultValue:e,getOptionLabel:t,getOptionValue:a,onChange:s,options:n,placeholder:i,width:l,value:d,className:u,isDisabled:h,isLoading:m,isSearchable:g,isClearable:f,backspaceRemovesValue:b,isMulti:x,autoFocus:y,openMenuOnFocus:w,onBlur:j,maxMenuHeight:k,noOptionsMessage:T,isOpen:O,components:_,tooltipContent:N,tabSelectsValue:I,onCloseMenu:P,onOpenMenu:M,allowCustomValue:F,formatCreateLabel:A,"aria-label":D}=this.props;let $="";l&&($="width-"+l);let L=o.ZP;const R={};F&&(L=c.Z,R.formatCreateLabel=null!=A?A:e=>e);const E=r()("gf-form-input","gf-form-input--form-dropdown",$,u),z=Object.assign({},C.defaultProps.components,_);return(0,p.jsx)(S,{onCloseMenu:P,onOpenMenu:M,tooltipContent:N,isOpen:O,children:(r,o)=>(0,p.jsx)(L,Object.assign({captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:E,components:z,defaultValue:e,value:d,getOptionLabel:t,getOptionValue:a,menuShouldScrollIntoView:!1,isSearchable:g,onChange:s,options:n,placeholder:i||"Choose",styles:(0,v.Z)(this.context),isDisabled:h,isLoading:m,isClearable:f,autoFocus:y,onBlur:j,openMenuOnFocus:w,maxMenuHeight:k,noOptionsMessage:T,isMulti:x,backspaceRemovesValue:b,menuIsOpen:O,onMenuOpen:r,onMenuClose:o,tabSelectsValue:I,"aria-label":D},R))})}}j(C,"contextType",w.Ni),j(C,"defaultProps",{className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:h,SingleValue:g.P,IndicatorsContainer:f.Z,MenuList:e=>(0,p.jsx)(l.c.MenuList,Object.assign({},e,{children:(0,p.jsx)(x.$,{autoHide:!1,autoHeightMax:"inherit",children:e.children})})),Group:m.n}});class k extends i.PureComponent{render(){const{defaultValue:e,getOptionLabel:t,getOptionValue:a,onChange:s,placeholder:n,width:i,value:o,className:l,loadOptions:c,defaultOptions:u,isLoading:m,loadingMessage:x,noOptionsMessage:y,isDisabled:w,isSearchable:j,isClearable:C,backspaceRemovesValue:k,autoFocus:T,onBlur:O,openMenuOnFocus:_,maxMenuHeight:N,isMulti:I,tooltipContent:P,onCloseMenu:M,onOpenMenu:F,isOpen:A}=this.props;let D="";i&&(D="width-"+i);const $=r()("gf-form-input","gf-form-input--form-dropdown",D,l);return(0,p.jsx)(S,{onCloseMenu:M,onOpenMenu:F,tooltipContent:P,isOpen:A,children:(r,i)=>(0,p.jsx)(d.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:$,components:{Option:h,SingleValue:g.P,IndicatorsContainer:f.Z,NoOptionsMessage:b.Z},defaultValue:e,value:o,getOptionLabel:t,getOptionValue:a,menuShouldScrollIntoView:!1,onChange:s,loadOptions:c,isLoading:m,defaultOptions:u,placeholder:n||"Choose",styles:(0,v.Z)(),loadingMessage:()=>x,noOptionsMessage:y,isDisabled:w,isSearchable:j,isClearable:C,autoFocus:T,onBlur:O,openMenuOnFocus:_,maxMenuHeight:N,isMulti:I,backspaceRemovesValue:k})})}}j(k,"defaultProps",{className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300});class S extends i.PureComponent{constructor(){super(...arguments),j(this,"state",{isOpenInternal:!1}),j(this,"onOpenMenu",(()=>{const{onOpenMenu:e}=this.props;e&&e(),this.setState({isOpenInternal:!0})})),j(this,"onCloseMenu",(()=>{const{onCloseMenu:e}=this.props;e&&e(),this.setState({isOpenInternal:!1})}))}render(){const{children:e,isOpen:t,tooltipContent:a}=this.props,{isOpenInternal:s}=this.state;let n;return(s||t)&&(n=!1),a?(0,p.jsx)(y.u,{show:n,content:a,placement:"bottom",children:(0,p.jsx)("div",{children:e(this.onOpenMenu,this.onCloseMenu)})}):(0,p.jsx)("div",{children:e(this.onOpenMenu,this.onCloseMenu)})}}},"./packages/grafana-ui/src/components/Forms/Legacy/Switch/Switch.tsx":(e,t,a)=>{"use strict";a.d(t,{r:()=>d});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),i=a("./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx"),o=a("./packages/grafana-ui/src/components/index.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends n.PureComponent{constructor(){super(...arguments),c(this,"state",{id:(0,r.uniqueId)()}),c(this,"internalOnChange",(e=>{e.stopPropagation(),this.props.onChange(e)}))}render(){const{labelClass:e="",switchClass:t="",label:a,checked:n,transparent:r,className:c,tooltip:d,tooltipPlacement:u}=this.props,p=this.state.id,h=`gf-form-label ${e} ${r?"gf-form-label--transparent":""} pointer`,m=`gf-form-switch ${t} ${r?"gf-form-switch--transparent":""}`;return(0,l.jsx)("div",{className:"gf-form-switch-container-react",children:(0,l.jsxs)("label",{htmlFor:p,className:`gf-form gf-form-switch-container ${c||""}`,children:[a&&(0,l.jsxs)("div",{className:h,children:[a,d&&(0,l.jsx)(i.u,{placement:u||"auto",content:d,theme:"info",children:(0,l.jsx)("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal",children:(0,l.jsx)(o.JO$,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})})})]}),(0,l.jsxs)("div",{className:m,children:[(0,l.jsx)("input",{id:p,type:"checkbox",checked:n,onChange:this.internalOnChange}),s||(s=(0,l.jsx)("span",{className:"gf-form-switch__slider"}))]})]})})}}},"./packages/grafana-ui/src/components/Forms/RadioButtonGroup/RadioButtonGroup.tsx":(e,t,a)=>{"use strict";a.d(t,{S:()=>h});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),i=a("./packages/grafana-ui/src/themes/index.ts"),o=a("./packages/grafana-ui/src/components/Forms/commonStyles.ts"),l=a("./packages/grafana-ui/src/themes/mixins.ts"),c=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const d=s.forwardRef(((e,t)=>{let{children:a,active:s=!1,disabled:n=!1,size:r="md",onChange:o,onClick:l,id:d,name:p,description:h,fullWidth:m,"aria-label":g}=e;const f=(0,i.l4)(),b=u(f,r,m);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{type:"radio",className:b.radio,onChange:o,onClick:l,disabled:n,id:d,checked:s,name:p,"aria-label":g,ref:t}),(0,c.jsx)("label",{className:b.radioLabel,htmlFor:d,title:h,children:a})]})}));d.displayName="RadioButton";const u=(0,i.Bb)(((e,t,a)=>{const{fontSize:s,height:r,padding:i}=(0,o.iL)(t,e),c=e.colors.text.secondary,d=e.colors.text.primary,u=r*e.spacing.gridSize-4-2;return{radio:n.css`
      position: absolute;
      opacity: 0;
      z-index: -1000;

      &:checked + label {
        color: ${e.colors.text.primary};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.action.selected};
        z-index: 3;
      }

      &:focus + label,
      &:focus-visible + label {
        ${(0,l.getFocusStyles)(e)};
      }

      &:focus:not(:focus-visible) + label {
        ${(0,l.getMouseFocusStyles)(e)}
      }

      &:disabled + label {
        color: ${e.colors.text.disabled};
        cursor: not-allowed;
      }
    `,radioLabel:n.css`
      display: inline-block;
      position: relative;
      font-size: ${s};
      height: ${u}px;
      // Deduct border from line-height for perfect vertical centering on windows and linux
      line-height: ${u}px;
      color: ${c};
      padding: ${e.spacing(0,i)};
      border-radius: ${e.shape.borderRadius()};
      background: ${e.colors.background.primary};
      cursor: pointer;
      z-index: 1;
      flex: ${a?"1 0 0":"none"};
      text-align: center;
      user-select: none;
      white-space: nowrap;

      &:hover {
        color: ${d};
      }
    `}}));var p=a("./packages/grafana-ui/src/components/Icon/Icon.tsx");function h(e){let{options:t,value:a,onChange:o,onClick:l,disabled:u,disabledOptions:h,size:g="md",className:f,fullWidth:b=!1,autoFocus:v=!1}=e;const x=(0,s.useCallback)((e=>()=>{o&&o(e.value)}),[o]),y=(0,s.useCallback)((e=>()=>{l&&l(e.value)}),[l]),w=(0,r.uniqueId)("radiogroup-"),j=(0,s.useRef)(w),C=(0,i.wW)(m),k=(0,s.useRef)(null);return(0,s.useEffect)((()=>{v&&k.current&&k.current.focus()}),[v]),(0,c.jsx)("div",{className:(0,n.cx)(C.radioGroup,b&&C.fullWidth,f),children:t.map(((e,t)=>{const s=h&&e.value&&h.includes(e.value);return(0,c.jsxs)(d,{size:g,disabled:s||u,active:a===e.value,"aria-label":e.ariaLabel,onChange:x(e),onClick:y(e),id:`option-${e.value}-${w}`,name:j.current,description:e.description,fullWidth:b,ref:a===e.value?k:void 0,children:[e.icon&&(0,c.jsx)(p.J,{name:e.icon,className:C.icon}),e.imgUrl&&(0,c.jsx)("img",{src:e.imgUrl,alt:e.label,className:C.img}),e.label]},`o.label-${t}`)}))})}h.displayName="RadioButtonGroup";const m=e=>({radioGroup:(0,n.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${e.components.input.borderColor}`,borderRadius:e.shape.borderRadius(),padding:"2px"}),fullWidth:(0,n.css)({display:"flex"}),icon:n.css`
      margin-right: 6px;
    `,img:n.css`
      width: ${e.spacing(2)};
      height: ${e.spacing(2)};
      margin-right: ${e.spacing(1)};
    `})},"./packages/grafana-ui/src/components/Forms/commonStyles.ts":(e,t,a)=>{"use strict";a.d(t,{GL:()=>r,RK:()=>i,nf:()=>o,ht:()=>l,iL:()=>d});var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/themes/mixins.ts");const r=e=>s.css`
  &:focus {
    ${(0,n.focusCss)(e)}
  }
`,i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=t?e.colors.error.border:e.components.input.borderColor,n=t?e.colors.error.shade:e.components.input.borderHover,r=e.components.input.background,i=e.components.input.text,l=e.isDark?"#2e2f35":"#bab4ca";return(0,s.cx)(o(e),s.css`
      background: ${r};
      line-height: ${e.typography.body.lineHeight};
      font-size: ${e.typography.size.md};
      color: ${i};
      border: 1px solid ${a};

      &:-webkit-autofill,
      &:-webkit-autofill:hover {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${r}!important;
        -webkit-text-fill-color: ${i} !important;
        border-color: ${l};
      }

      &:-webkit-autofill:focus {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: 0 0 0 2px ${e.colors.background.primary}, 0 0 0px 4px ${e.colors.primary.main},
          inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${r}!important;
        -webkit-text-fill-color: ${i} !important;
      }

      &:hover {
        border-color: ${n};
      }

      &:focus {
        outline: none;
      }

      &:disabled {
        background-color: ${e.colors.action.disabledBackground};
        color: ${e.colors.action.disabledText};
        border: 1px solid ${e.colors.action.disabledBackground};

        &:hover {
          border-color: ${a};
        }
      }

      &::placeholder {
        color: ${e.colors.text.disabled};
        opacity: 1;
      }
    `)},o=e=>s.css`
    padding: ${e.spacing(0,1,0,1)};
  `,l=()=>({sm:s.css`
      width: ${c("sm")};
    `,md:s.css`
      width: ${c("md")};
    `,lg:s.css`
      width: ${c("lg")};
    `,auto:s.css`
      width: ${c("auto")};
    `}),c=e=>{switch(e){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";default:return"auto"}};function d(e,t){switch(e){case"sm":return{padding:1,fontSize:t.typography.size.sm,height:t.components.height.sm};case"lg":return{padding:3,fontSize:t.typography.size.lg,height:t.components.height.lg};default:return{padding:2,fontSize:t.typography.size.md,height:t.components.height.md}}}},"./packages/grafana-ui/src/components/GraphNG/GraphNG.tsx":(e,t,a)=>{"use strict";a.d(t,{j:()=>m,d:()=>g});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/components/uPlot/utils.ts"),r=a("./packages/grafana-data/src/index.ts"),i=a("./packages/grafana-ui/src/components/GraphNG/utils.ts"),o=a("./packages/grafana-ui/src/components/PanelChrome/PanelContext.ts"),l=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Subscription.js"),c=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/throttleTime.js"),d=a("./packages/grafana-ui/src/components/VizLayout/VizLayout.tsx"),u=a("./packages/grafana-ui/src/components/uPlot/Plot.tsx"),p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m="__fixed";class g extends s.Component{constructor(e){super(e),h(this,"panelContext",{}),h(this,"plotInstance",void 0),h(this,"subscription",new l.w0),h(this,"getTimeRange",(()=>this.props.timeRange)),this.state=this.prepState(e),this.plotInstance=s.createRef()}prepState(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=null;const{frames:s,fields:o,preparePlotFrame:l}=e,c=(l||i.R)(s,o||{x:r.fieldMatchers.get(r.FieldMatcherID.firstTimeField).get({}),y:r.fieldMatchers.get(r.FieldMatcherID.numeric).get({})},e.timeRange);if((0,n.Zp)("GraphNG",!1,"data aligned",c),c){var d;let s=null===(d=this.state)||void 0===d?void 0:d.config;t&&(s=e.prepConfig(c,this.props.frames,this.getTimeRange),(0,n.Zp)("GraphNG",!1,"config prepared",s)),a={alignedFrame:c,alignedData:s.prepData([c]),config:s},(0,n.Zp)("GraphNG",!1,"data prepared",a.alignedData)}return a}handleCursorUpdate(e){var t,a;const s=null===(t=e.payload)||void 0===t||null===(a=t.point)||void 0===a?void 0:a.time,r=this.plotInstance.current;if(r&&s){const e=r.valToPos(s,"x");let t;if(e&&(t=(0,n.ah)(r,r.posToIdx(e))),!t||!e)return;r.setCursor({left:e,top:t})}}componentDidMount(){this.panelContext=this.context;const{eventBus:e}=this.panelContext;this.subscription.add(e.getStream(r.DataHoverEvent).pipe((0,c.p)(50)).subscribe({next:t=>{e!==t.origin&&this.handleCursorUpdate(t)}})),this.subscription.add(e.getStream(r.LegacyGraphHoverEvent).pipe((0,c.p)(50)).subscribe({next:e=>this.handleCursorUpdate(e)})),this.subscription.add(e.getStream(r.DataHoverClearEvent).pipe((0,c.p)(50)).subscribe({next:()=>{var e;const t=null===(e=this.plotInstance)||void 0===e?void 0:e.current;t&&t.setCursor({left:-10,top:-10})}}))}componentDidUpdate(e){const{frames:t,structureRev:a,timeZone:s,propsToDiff:r}=this.props,i=!function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(const s of a)if("function"==typeof s){if(!s(e,t))return!1}else if(t[s]!==e[s])return!1;return!0}(e,this.props,r);if(t!==e.frames||i||s!==e.timeZone){let t=this.prepState(this.props,!1);if(t){(void 0===this.state.config||s!==e.timeZone||a!==e.structureRev||!a||i)&&(t.config=this.props.prepConfig(t.alignedFrame,this.props.frames,this.getTimeRange),t.alignedData=t.config.prepData([t.alignedFrame]),(0,n.Zp)("GraphNG",!1,"config recreated",t.config))}t&&this.setState(t)}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:e,height:t,children:a,timeRange:s,renderLegend:n}=this.props,{config:r,alignedFrame:i,alignedData:o}=this.state;return r?(0,p.jsx)(d.AY,{width:e,height:t,legend:n(r),children:(e,t)=>(0,p.jsx)(u.N,{config:r,data:o,width:e,height:t,timeRange:s,plotRef:e=>this.plotInstance.current=e,children:a?a(r,i):null})}):null}}h(g,"contextType",o.bb)},"./packages/grafana-ui/src/components/GraphNG/nullInsertThreshold.ts":(e,t,a)=>{"use strict";a.d(t,{w:()=>r});var s=a("./packages/grafana-data/src/index.ts");const n={threshold:(e,t,a)=>e+a,midpoint:(e,t,a)=>(e+t)/2,plusone:(e,t,a)=>e+1};function r(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.threshold;if(e.length<2)return e;const o=e.fields.find((e=>null!=t?e.name===t:e.type===s.FieldType.time));if(null==o)return e;const l=e.fields.map((e=>{var t,a,s;return null!==(t=null!==(a=null===(s=e.config.custom)||void 0===s?void 0:s.insertNulls)&&void 0!==a?a:o.config.interval)&&void 0!==t?t:null})),c=new Set(l);if(c.delete(null),0===c.size)return e;if(1===c.size){const t=c.values().next().value;if(t<=0)return e;const n=o.values.toArray(),l=e.fields.map((e=>e.values.toArray())),d=i(n,l,t,a,r);return d===l?e:Object.assign({},e,{length:d[0].length,fields:e.fields.map(((e,t)=>Object.assign({},e,{values:new s.ArrayVector(d[t])})))})}return e}function i(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4?arguments[4]:void 0;const r=e.length;let i=e[0];const o=[i];for(let t=1;t<r;t++){const s=e[t];s-i>a&&o.push(n(i,s,a)),o.push(s),i=s}null!=s&&i+a<=s&&o.push(n(i,s,a));const l=o.length;if(l===r)return t;const c=[];for(let a of t){let t;if(a!==e){t=Array(l);for(let s=0,n=0;s<l;s++)t[s]=e[n]===o[s]?a[n++]:null}else t=o;c.push(t)}return c}},"./packages/grafana-ui/src/components/GraphNG/utils.ts":(e,t,a)=>{"use strict";a.d(t,{z:()=>c,R:()=>l});var s=a("./packages/grafana-data/src/index.ts");function n(e,t,a){let s,n;for(let r=0;r<t.length;r++){if(null==t[r])null==n&&null!=s&&(n=r);else{if(null!=n){if(e[r]-s<a)for(;n<r;)t[n++]=void 0;n=null}s=e[r]}}return t}var r=a("./packages/grafana-ui/src/components/GraphNG/nullInsertThreshold.ts"),i=a("./packages/grafana-schema/src/index.ts"),o=a("./packages/grafana-ui/src/components/GraphNG/GraphNG.tsx");function l(e,t,a){let o=(0,s.outerJoinDataFrames)({frames:e.map((e=>{let t=(0,r.w)(e,null,null==a?void 0:a.to.valueOf());return t.fields.forEach((e=>{var t;e.type===s.FieldType.number&&(null===(t=e.config.custom)||void 0===t?void 0:t.drawStyle)===i.l8.Bars&&(e.config.custom=Object.assign({},e.config.custom,{spanNulls:-1}))})),t})),joinBy:t.x,keep:t.y,keepOriginIndices:!0});return o&&function(e){let t=e.fields.find((e=>e.type===s.FieldType.time)),a=null==t?void 0:t.values.toArray();for(let i=0;i<e.fields.length;i++){var r;let o=e.fields[i];if(o===t)continue;let l=null===(r=o.config.custom)||void 0===r?void 0:r.spanNulls;"number"==typeof l&&-1!==l&&(o.values=new s.ArrayVector(n(a,o.values.toArray(),l)))}return e}(o)}function c(e){var t,a,s,n,r,l,c;const d="na",u=`${void 0!==e.min?e.min:d}-${void 0!==e.max?e.max:d}`,p=`${void 0!==(null===(t=e.custom)||void 0===t?void 0:t.axisSoftMin)?e.custom.axisSoftMin:d}-${void 0!==(null===(a=e.custom)||void 0===a?void 0:a.axisSoftMax)?e.custom.axisSoftMax:d}`,h=`${void 0!==(null===(s=e.custom)||void 0===s?void 0:s.axisPlacement)?null===(n=e.custom)||void 0===n?void 0:n.axisPlacement:i.LB.Auto}`,m=null!==(r=e.unit)&&void 0!==r?r:o.j,g=null!==(l=e.custom)&&void 0!==l&&l.scaleDistribution?function(e){if(e.type===i.wf.Log)return`${e.type}${e.log}`;return e.type}(e.custom.scaleDistribution):i.wf.Linear;return`${m}/${u}/${p}/${h}/${g}/${Boolean(null===(c=e.custom)||void 0===c?void 0:c.axisLabel)?e.custom.axisLabel:d}`}},"./packages/grafana-ui/src/components/Icon/Icon.tsx":(e,t,a)=>{"use strict";a.d(t,{J:()=>la,B:()=>da});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/themes/stylesFactory.ts"),i=a("./packages/grafana-ui/src/themes/ThemeContext.tsx"),o=a("./.yarn/__virtual__/react-inlinesvg-virtual-f6307798ef/3/opt/drone/yarncache/react-inlinesvg-npm-2.3.0-9b0402e461-ea43f6ec06.zip/node_modules/react-inlinesvg/esm/index.js"),l=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/angle-double-down.svg"),c=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/angle-double-right.svg"),d=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/angle-down.svg"),u=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/angle-left.svg"),p=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/angle-right.svg"),h=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/angle-up.svg"),m=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/apps.svg"),g=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow.svg"),f=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow-down.svg"),b=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow-from-right.svg"),v=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow-left.svg"),x=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow-random.svg"),y=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow-right.svg"),w=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrow-up.svg"),j=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/arrows-h.svg"),C=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/backward.svg"),k=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/bars.svg"),S=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/bell.svg"),T=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/bell-slash.svg"),O=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/bolt.svg"),_=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/book.svg"),N=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/book-open.svg"),I=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/brackets-curly.svg"),P=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/bug.svg"),M=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/building.svg"),F=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/calculator-alt.svg"),A=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/calendar-alt.svg"),D=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/camera.svg"),$=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/channel-add.svg"),L=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/chart-line.svg"),R=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/check.svg"),E=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/check-circle.svg"),z=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/circle.svg"),V=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/clipboard-alt.svg"),B=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/clock-nine.svg"),U=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/cloud.svg"),H=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/cloud-download.svg"),q=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/code-branch.svg"),W=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/cog.svg"),G=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/columns.svg"),Z=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/comment-alt.svg"),Q=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/comment-alt-share.svg"),K=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/comments-alt.svg"),Y=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/compass.svg"),J=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/copy.svg"),X=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/cube.svg"),ee=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/dashboard.svg"),te=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/database.svg"),ae=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/document-info.svg"),se=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/download-alt.svg"),ne=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/draggabledots.svg"),re=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/edit.svg"),ie=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/ellipsis-v.svg"),oe=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/envelope.svg"),le=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/exchange-alt.svg"),ce=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/exclamation-triangle.svg"),de=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/external-link-alt.svg"),ue=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/eye.svg"),pe=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/eye-slash.svg"),he=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/file-alt.svg"),me=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/file-blank.svg"),ge=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/filter.svg"),fe=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/folder.svg"),be=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/folder-open.svg"),ve=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/folder-plus.svg"),xe=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/folder-upload.svg"),ye=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/forward.svg"),we=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/graph-bar.svg"),je=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/history.svg"),Ce=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/home-alt.svg"),ke=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/import.svg"),Se=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/info.svg"),Te=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/info-circle.svg"),Oe=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/key-skeleton-alt.svg"),_e=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/keyboard.svg"),Ne=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/link.svg"),Ie=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/list-ul.svg"),Pe=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/lock.svg"),Me=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/minus.svg"),Fe=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/minus-circle.svg"),Ae=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/mobile-android.svg"),De=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/monitor.svg"),$e=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/pause.svg"),Le=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/pen.svg"),Re=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/play.svg"),Ee=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/plug.svg"),ze=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/plus.svg"),Ve=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/plus-circle.svg"),Be=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/power.svg"),Ue=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/presentation-play.svg"),He=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/process.svg"),qe=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/question-circle.svg"),We=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/repeat.svg"),Ge=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/rocket.svg"),Ze=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/save.svg"),Qe=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/search.svg"),Ke=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/search-minus.svg"),Ye=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/search-plus.svg"),Je=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/share-alt.svg"),Xe=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/shield.svg"),et=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/signal.svg"),tt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/signin.svg"),at=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/signout.svg"),st=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/sitemap.svg"),nt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/slack.svg"),rt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/sliders-v-alt.svg"),it=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/sort-amount-down.svg"),ot=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/sort-amount-up.svg"),lt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/square-shape.svg"),ct=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/star.svg"),dt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/step-backward.svg"),ut=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/sync.svg"),pt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/table.svg"),ht=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/tag-alt.svg"),mt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/times.svg"),gt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/trash-alt.svg"),ft=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/unlock.svg"),bt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/upload.svg"),vt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/user.svg"),xt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/users-alt.svg"),yt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/wrap-text.svg"),wt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/cloud-upload.svg"),jt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/credit-card.svg"),Ct=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/file-copy-alt.svg"),kt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/fire.svg"),St=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/hourglass.svg"),Tt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/layer-group.svg"),Ot=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/line-alt.svg"),_t=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/list-ui-alt.svg"),Nt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/message.svg"),It=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/palette.svg"),Pt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/percentage.svg"),Mt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/shield-exclamation.svg"),Ft=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/plus-square.svg"),At=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/x.svg"),Dt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/capture.svg"),$t=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-grid.svg"),Lt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-landscape.svg"),Rt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-layout-simple.svg"),Et=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-portrait.svg"),zt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-bar-alignment-after.svg"),Vt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-bar-alignment-before.svg"),Bt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-bar-alignment-center.svg"),Ut=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-interpolation-linear.svg"),Ht=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-interpolation-smooth.svg"),qt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-interpolation-step-after.svg"),Wt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-interpolation-step-before.svg"),Gt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/custom/gf-logs.svg"),Zt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/mono/favorite.svg"),Qt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/mono/grafana.svg"),Kt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/mono/heart.svg"),Yt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/mono/heart-break.svg"),Jt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/mono/panel-add.svg"),Xt=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/mono/library-panel.svg"),ea=a("./.yarn/__virtual__/raw-loader-virtual-01b37c6b65/3/opt/drone/yarncache/raw-loader-npm-4.0.2-94da6c700d-51cc1b0d0e.zip/node_modules/raw-loader/dist/cjs.js!./public/img/icons/unicons/record-audio.svg");let ta=!1,aa="public/img/icons";function sa(e,t){o.V[aa+t]={content:e,status:"loaded",queue:[]}}var na=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const ra=["size","type","name","className","style","title"];const ia=["grafana","favorite","heart-break","heart","panel-add","library-panel"],oa=(0,r.B)((e=>({container:n.css`
      label: Icon;
      display: inline-block;
    `,icon:n.css`
      vertical-align: middle;
      display: inline-block;
      margin-bottom: ${e.spacing.xxs};
      fill: currentColor;
    `,orange:n.css`
      fill: ${e.palette.orange};
    `})));const la=s.forwardRef(((e,t)=>{let{size:a="md",type:s="default",name:r,className:la,style:ua,title:pa=""}=e,ha=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,ra);const ma=(0,i.Fg)();if(null!=r&&r.startsWith("fa fa-"))return(0,na.jsx)("i",Object.assign({className:ca(r,la)},ha,{style:ua}));"panel-add"===r&&(a="xl"),ta||function(){ta=!0;const e=window.__grafana_public_path__;e&&(aa=e+"img/icons/"),sa(l.Z,"unicons/angle-double-down.svg"),sa(c.Z,"unicons/angle-double-right.svg"),sa(d.Z,"unicons/angle-down.svg"),sa(u.Z,"unicons/angle-left.svg"),sa(p.Z,"unicons/angle-right.svg"),sa(h.Z,"unicons/angle-up.svg"),sa(m.Z,"unicons/apps.svg"),sa(g.Z,"unicons/arrow.svg"),sa(f.Z,"unicons/arrow-down.svg"),sa(b.Z,"unicons/arrow-from-right.svg"),sa(v.Z,"unicons/arrow-left.svg"),sa(x.Z,"unicons/arrow-random.svg"),sa(y.Z,"unicons/arrow-right.svg"),sa(w.Z,"unicons/arrow-up.svg"),sa(j.Z,"unicons/arrows-h.svg"),sa(C.Z,"unicons/backward.svg"),sa(k.Z,"unicons/bars.svg"),sa(S.Z,"unicons/bell.svg"),sa(T.Z,"unicons/bell-slash.svg"),sa(O.Z,"unicons/bolt.svg"),sa(_.Z,"unicons/book.svg"),sa(N.Z,"unicons/book-open.svg"),sa(I.Z,"unicons/brackets-curly.svg"),sa(P.Z,"unicons/bug.svg"),sa(M.Z,"unicons/building.svg"),sa(F.Z,"unicons/calculator-alt.svg"),sa(A.Z,"unicons/calendar-alt.svg"),sa(D.Z,"unicons/camera.svg"),sa($.Z,"unicons/channel-add.svg"),sa(L.Z,"unicons/chart-line.svg"),sa(R.Z,"unicons/check.svg"),sa(E.Z,"unicons/check-circle.svg"),sa(z.Z,"unicons/circle.svg"),sa(V.Z,"unicons/clipboard-alt.svg"),sa(B.Z,"unicons/clock-nine.svg"),sa(U.Z,"unicons/cloud.svg"),sa(H.Z,"unicons/cloud-download.svg"),sa(q.Z,"unicons/code-branch.svg"),sa(W.Z,"unicons/cog.svg"),sa(G.Z,"unicons/columns.svg"),sa(Z.Z,"unicons/comment-alt.svg"),sa(Q.Z,"unicons/comment-alt-share.svg"),sa(K.Z,"unicons/comments-alt.svg"),sa(Y.Z,"unicons/compass.svg"),sa(J.Z,"unicons/copy.svg"),sa(X.Z,"unicons/cube.svg"),sa(ee.Z,"unicons/dashboard.svg"),sa(te.Z,"unicons/database.svg"),sa(ae.Z,"unicons/document-info.svg"),sa(se.Z,"unicons/download-alt.svg"),sa(ne.Z,"unicons/draggabledots.svg"),sa(re.Z,"unicons/edit.svg"),sa(ie.Z,"unicons/ellipsis-v.svg"),sa(oe.Z,"unicons/envelope.svg"),sa(le.Z,"unicons/exchange-alt.svg"),sa(ce.Z,"unicons/exclamation-triangle.svg"),sa(de.Z,"unicons/external-link-alt.svg"),sa(ue.Z,"unicons/eye.svg"),sa(pe.Z,"unicons/eye-slash.svg"),sa(he.Z,"unicons/file-alt.svg"),sa(me.Z,"unicons/file-blank.svg"),sa(ge.Z,"unicons/filter.svg"),sa(fe.Z,"unicons/folder.svg"),sa(be.Z,"unicons/folder-open.svg"),sa(ve.Z,"unicons/folder-plus.svg"),sa(xe.Z,"unicons/folder-upload.svg"),sa(ye.Z,"unicons/forward.svg"),sa(we.Z,"unicons/graph-bar.svg"),sa(je.Z,"unicons/history.svg"),sa(Ce.Z,"unicons/home-alt.svg"),sa(ke.Z,"unicons/import.svg"),sa(Se.Z,"unicons/info.svg"),sa(Te.Z,"unicons/info-circle.svg"),sa(Oe.Z,"unicons/key-skeleton-alt.svg"),sa(_e.Z,"unicons/keyboard.svg"),sa(Ne.Z,"unicons/link.svg"),sa(Ie.Z,"unicons/list-ul.svg"),sa(Pe.Z,"unicons/lock.svg"),sa(Me.Z,"unicons/minus.svg"),sa(Fe.Z,"unicons/minus-circle.svg"),sa(Ae.Z,"unicons/mobile-android.svg"),sa(De.Z,"unicons/monitor.svg"),sa($e.Z,"unicons/pause.svg"),sa(Le.Z,"unicons/pen.svg"),sa(Re.Z,"unicons/play.svg"),sa(Ee.Z,"unicons/plug.svg"),sa(ze.Z,"unicons/plus.svg"),sa(Ve.Z,"unicons/plus-circle.svg"),sa(Be.Z,"unicons/power.svg"),sa(Ue.Z,"unicons/presentation-play.svg"),sa(He.Z,"unicons/process.svg"),sa(qe.Z,"unicons/question-circle.svg"),sa(We.Z,"unicons/repeat.svg"),sa(Ge.Z,"unicons/rocket.svg"),sa(Ze.Z,"unicons/save.svg"),sa(Qe.Z,"unicons/search.svg"),sa(Ke.Z,"unicons/search-minus.svg"),sa(Ye.Z,"unicons/search-plus.svg"),sa(Je.Z,"unicons/share-alt.svg"),sa(Xe.Z,"unicons/shield.svg"),sa(et.Z,"unicons/signal.svg"),sa(tt.Z,"unicons/signin.svg"),sa(at.Z,"unicons/signout.svg"),sa(st.Z,"unicons/sitemap.svg"),sa(nt.Z,"unicons/slack.svg"),sa(rt.Z,"unicons/sliders-v-alt.svg"),sa(it.Z,"unicons/sort-amount-down.svg"),sa(ot.Z,"unicons/sort-amount-up.svg"),sa(lt.Z,"unicons/square-shape.svg"),sa(ct.Z,"unicons/star.svg"),sa(dt.Z,"unicons/step-backward.svg"),sa(ut.Z,"unicons/sync.svg"),sa(pt.Z,"unicons/table.svg"),sa(ht.Z,"unicons/tag-alt.svg"),sa(mt.Z,"unicons/times.svg"),sa(gt.Z,"unicons/trash-alt.svg"),sa(ft.Z,"unicons/unlock.svg"),sa(bt.Z,"unicons/upload.svg"),sa(vt.Z,"unicons/user.svg"),sa(xt.Z,"unicons/users-alt.svg"),sa(yt.Z,"unicons/wrap-text.svg"),sa(wt.Z,"unicons/cloud-upload.svg"),sa(jt.Z,"unicons/credit-card.svg"),sa(Ct.Z,"unicons/file-copy-alt.svg"),sa(kt.Z,"unicons/fire.svg"),sa(St.Z,"unicons/hourglass.svg"),sa(Tt.Z,"unicons/layer-group.svg"),sa(Ot.Z,"unicons/line-alt.svg"),sa(_t.Z,"unicons/list-ui-alt.svg"),sa(Nt.Z,"unicons/message.svg"),sa(It.Z,"unicons/palette.svg"),sa(Pt.Z,"unicons/percentage.svg"),sa(Mt.Z,"unicons/shield-exclamation.svg"),sa(Ft.Z,"unicons/plus-square.svg"),sa(At.Z,"unicons/x.svg"),sa(Dt.Z,"unicons/capture.svg"),sa($t.Z,"custom/gf-grid.svg"),sa(Lt.Z,"custom/gf-landscape.svg"),sa(Rt.Z,"custom/gf-layout-simple.svg"),sa(Et.Z,"custom/gf-portrait.svg"),sa(zt.Z,"custom/gf-bar-alignment-after.svg"),sa(Vt.Z,"custom/gf-bar-alignment-before.svg"),sa(Bt.Z,"custom/gf-bar-alignment-center.svg"),sa(Ut.Z,"custom/gf-interpolation-linear.svg"),sa(Ht.Z,"custom/gf-interpolation-smooth.svg"),sa(qt.Z,"custom/gf-interpolation-step-after.svg"),sa(Wt.Z,"custom/gf-interpolation-step-before.svg"),sa(Gt.Z,"custom/gf-logs.svg"),sa(Zt.Z,"mono/favorite.svg"),sa(Qt.Z,"mono/grafana.svg"),sa(Kt.Z,"mono/heart.svg"),sa(Yt.Z,"mono/heart-break.svg"),sa(Jt.Z,"mono/panel-add.svg"),sa(Xt.Z,"mono/library-panel.svg"),sa(ea.Z,"unicons/record-audio.svg")}();const ga=oa(ma),fa=da(a),ba=fa,va=null!=r&&r.startsWith("gf-bar-align")?16:null!=r&&r.startsWith("gf-interp")?30:fa,xa=function(e,t){return null!=e&&e.startsWith("gf-")?"custom":ia.includes(e)?"mono":"default"===t?"unicons":"mono"}(r,s),ya=`${aa}${xa}/${r}.svg`;return(0,na.jsx)("div",Object.assign({className:ga.container},ha,{ref:t,children:(0,na.jsx)(o.Z,{src:ya,width:va,height:ba,title:pa,className:(0,n.cx)(ga.icon,la,"mono"===s?{[ga.orange]:"favorite"===r}:""),style:ua})}))}));function ca(e,t){return(0,n.cx)(e,{"fa-spin":"fa fa-spinner"===e},t)}la.displayName="Icon";const da=e=>{switch(e){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},"./packages/grafana-ui/src/components/IconButton/IconButton.tsx":(e,t,a)=>{"use strict";a.d(t,{h:()=>h});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),r=a("./packages/grafana-ui/src/themes/stylesFactory.ts"),i=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),o=a("./packages/grafana-ui/src/themes/ThemeContext.tsx"),l=a("./packages/grafana-data/src/index.ts"),c=a("./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx"),d=a("./packages/grafana-ui/src/themes/mixins.ts"),u=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const p=["name","size","iconType","tooltip","tooltipPlacement","ariaLabel","className","variant"];const h=s.forwardRef(((e,t)=>{let{name:a,size:s="md",iconType:r,tooltip:l,tooltipPlacement:d,ariaLabel:h,className:g,variant:f="secondary"}=e,b=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,p);const v=(0,o.l4)(),x=m(v,s,f),y="string"==typeof l?l:"",w=(0,u.jsx)("button",Object.assign({ref:t,"aria-label":h||y},b,{className:(0,i.cx)(x.button,g),children:(0,u.jsx)(n.J,{name:a,size:s,className:x.icon,type:r})}));return l?(0,u.jsx)(c.u,{content:l,placement:d,children:w}):w}));h.displayName="IconButton";const m=(0,r.B)(((e,t,a)=>{const s=(0,n.B)(t),r=Math.max(s/3,8);let o=e.colors.text.primary;return"primary"===a?o=e.colors.primary.text:"destructive"===a&&(o=e.colors.error.text),{button:i.css`
      width: ${s}px;
      height: ${s}px;
      background: transparent;
      border: none;
      color: ${o};
      padding: 0;
      margin: 0;
      outline: none;
      box-shadow: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: ${e.shape.borderRadius()};
      z-index: 0;
      margin-right: ${e.spacing(.5)};

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        color: ${e.colors.action.disabledText};
        opacity: 0.65;
        box-shadow: none;
      }

      &:before {
        content: '';
        display: block;
        opacity: 1;
        position: absolute;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        bottom: -${r}px;
        left: -${r}px;
        right: -${r}px;
        top: -${r}px;
        background: none;
        border-radius: 50%;
        box-sizing: border-box;
        transform: scale(0);
        transition-property: transform, opacity;
      }

      &:focus,
      &:focus-visible {
        ${(0,d.getFocusStyles)(e)}
      }

      &:focus:not(:focus-visible) {
        ${(0,d.getMouseFocusStyles)(e)}
      }

      &:hover {
        color: ${o};

        &:before {
          background-color: ${"secondary"===a?e.colors.action.hover:l.colorManipulator.alpha(o,.12)};
          border: none;
          box-shadow: none;
          opacity: 1;
          transform: scale(0.8);
        }
      }
    `,icon:i.css`
      margin-bottom: 0;
      vertical-align: baseline;
      display: flex;
    `}}))},"./packages/grafana-ui/src/components/Input/Input.tsx":(e,t,a)=>{"use strict";a.d(t,{I:()=>u,H:()=>p});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/components/Forms/commonStyles.ts"),i=a("./packages/grafana-ui/src/themes/index.ts"),o=a("./packages/grafana-ui/src/components/Spinner/Spinner.tsx"),l=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useMeasure.js"),c=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const d=["className","addonAfter","addonBefore","prefix","suffix","invalid","loading","width"];const u=s.forwardRef(((e,t)=>{const{className:a,addonAfter:s,addonBefore:r,prefix:u,suffix:h,invalid:m,loading:g,width:f=0}=e,b=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,d),[v,x]=(0,l.Z)(),[y,w]=(0,l.Z)(),j=(0,i.l4)(),C=p({theme:j,invalid:!!m,width:f});return(0,c.jsxs)("div",{className:(0,n.cx)(C.wrapper,a),children:[!!r&&(0,c.jsx)("div",{className:C.addon,children:r}),(0,c.jsxs)("div",{className:C.inputWrapper,children:[u&&(0,c.jsx)("div",{className:C.prefix,ref:v,children:u}),(0,c.jsx)("input",Object.assign({ref:t,className:C.input},b,{style:{paddingLeft:u?x.width+12:void 0,paddingRight:h||g?w.width+12:void 0}})),(h||g)&&(0,c.jsxs)("div",{className:C.suffix,ref:y,children:[g&&(0,c.jsx)(o.$,{className:C.loadingIndicator,inline:!0}),h]})]}),!!s&&(0,c.jsx)("div",{className:C.addon,children:s})]})}));u.displayName="Input";const p=(0,i.Bb)((e=>{let{theme:t,invalid:a=!1,width:s}=e;const i="28px",o=n.css`
    position: absolute;
    top: 0;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 0;
    flex-shrink: 0;
    font-size: ${t.typography.size.md};
    height: 100%;
    /* Min width specified for prefix/suffix classes used outside React component*/
    min-width: ${i};
    color: ${t.colors.text.secondary};
  `;return{wrapper:(0,n.cx)(n.css`
        label: input-wrapper;
        display: flex;
        width: ${s?`${t.spacing(s)}`:"100%"};
        height: ${t.spacing(t.components.height.md)};
        border-radius: ${t.shape.borderRadius()};
        &:hover {
          > .prefix,
          .suffix,
          .input {
            border-color: ${a?t.colors.error.border:t.colors.primary.border};
          }

          // only show number buttons on hover
          input[type='number'] {
            -moz-appearance: number-input;
            -webkit-appearance: number-input;
            appearance: textfield;
          }

          input[type='number']::-webkit-inner-spin-button,
          input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: inner-spin-button !important;
            opacity: 1;
          }
        }
      `),inputWrapper:n.css`
      label: input-inputWrapper;
      position: relative;
      flex-grow: 1;
      /* we want input to be above addons, especially for focused state */
      z-index: 1;

      /* when input rendered with addon before only*/
      &:not(:first-child):last-child {
        > input {
          border-left: none;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      /* when input rendered with addon after only*/
      &:first-child:not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      /* when rendered with addon before and after */
      &:not(:first-child):not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      input {
        /* paddings specified for classes used outside React component */
        &:not(:first-child) {
          padding-left: ${i};
        }
        &:not(:last-child) {
          padding-right: ${i};
        }
        &[readonly] {
          cursor: default;
        }
      }
    `,input:(0,n.cx)((0,r.GL)(t.v1),(0,r.RK)(t,a),n.css`
        label: input-input;
        position: relative;
        z-index: 0;
        flex-grow: 1;
        border-radius: ${t.shape.borderRadius()};
        height: 100%;
        width: 100%;
      `),inputDisabled:n.css`
      background-color: ${t.colors.action.disabledBackground};
      color: ${t.colors.action.disabledText};
      border: 1px solid ${t.colors.action.disabledBackground};
      &:focus {
        box-shadow: none;
      }
    `,addon:n.css`
      label: input-addon;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-grow: 0;
      flex-shrink: 0;
      position: relative;

      &:first-child {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        > :last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      &:last-child {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        > :first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }
      > *:focus {
        /* we want anything that has focus and is an addon to be above input */
        z-index: 2;
      }
    `,prefix:(0,n.cx)(o,n.css`
        label: input-prefix;
        padding-left: ${t.spacing(1)};
        padding-right: ${t.spacing(.5)};
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      `),suffix:(0,n.cx)(o,n.css`
        label: input-suffix;
        padding-left: ${t.spacing(1)};
        padding-right: ${t.spacing(1)};
        margin-bottom: -2px;
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        right: 0;
      `),loadingIndicator:n.css`
      & + * {
        margin-left: ${t.spacing(.5)};
      }
    `}}))},"./packages/grafana-ui/src/components/Layout/Layout.tsx":(e,t,a)=>{"use strict";a.d(t,{Ar:()=>c,Lh:()=>d,wc:()=>u,W2:()=>p});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/themes/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=["children","orientation","spacing","justify","align","wrap","width","height"];var l;!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(l||(l={}));const c=e=>{let{children:t,orientation:a=l.Horizontal,spacing:n="sm",justify:c="flex-start",align:d="normal",wrap:u=!1,width:p="100%",height:m="100%"}=e,g=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,o);const f=(0,r.Fg)(),b=h(f,a,n,c,d,u);return(0,i.jsx)("div",Object.assign({className:b.layout,style:{width:p,height:m}},g,{children:s.Children.toArray(t).filter(Boolean).map(((e,t)=>(0,i.jsx)("div",{className:b.childWrapper,children:e},t)))}))},d=e=>{let{children:t,spacing:a,justify:s,align:n="center",wrap:r,width:o,height:d}=e;return(0,i.jsx)(c,{spacing:a,justify:s,orientation:l.Horizontal,align:n,width:o,height:d,wrap:r,children:t})},u=e=>{let{children:t,spacing:a,justify:s,align:n,width:r,height:o}=e;return(0,i.jsx)(c,{spacing:a,justify:s,orientation:l.Vertical,align:n,width:r,height:o,children:t})},p=e=>{let{children:t,padding:a,margin:s,grow:o,shrink:l}=e;const c=(0,r.Fg)(),d=m(c,a,s);return(0,i.jsx)("div",{className:(0,n.cx)(d.wrapper,void 0!==o&&n.css`
            flex-grow: ${o};
          `,void 0!==l&&n.css`
            flex-shrink: ${l};
          `),children:t})},h=(0,r.Bb)(((e,t,a,s,r,i)=>{const o="none"!==a?e.spacing[a]:0,c=t===l.Horizontal&&!i||t===l.Vertical?0:`-${o}`,d=t===l.Vertical?"vertical-group":"horizontal-group";return{layout:n.css`
        label: ${d};
        display: flex;
        flex-direction: ${t===l.Vertical?"column":"row"};
        flex-wrap: ${i?"wrap":"nowrap"};
        justify-content: ${s};
        align-items: ${r};
        height: 100%;
        max-width: 100%;
        // compensate for last row margin when wrapped, horizontal layout
        margin-bottom: ${c};
      `,childWrapper:n.css`
        label: layoutChildrenWrapper;
        margin-bottom: ${t!==l.Horizontal||i?o:0};
        margin-right: ${t===l.Horizontal?o:0};
        display: flex;
        align-items: ${r};

        &:last-child {
          margin-bottom: ${t===l.Vertical&&0};
          margin-right: ${t===l.Horizontal&&0};
        }
      `}})),m=(0,r.Bb)(((e,t,a)=>{const s=t&&"none"!==t&&e.spacing[t]||0,r=a&&"none"!==a&&e.spacing[a]||0;return{wrapper:n.css`
      label: container;
      margin: ${r};
      padding: ${s};
    `}}))},"./packages/grafana-ui/src/components/List/AbstractList.tsx":(e,t,a)=>{"use strict";a.d(t,{L:()=>l});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/themes/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=(0,r.Bb)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{list:n.css`
    list-style-type: none;
    margin: 0;
    padding: 0;
  `,item:n.css`
    display: ${e?"inline-block":"block"};
  `}}));class l extends s.PureComponent{constructor(e){super(e)}render(){const{items:e,renderItem:t,getItemKey:a,className:s,inline:r}=this.props,l=o(r);return(0,i.jsx)("ul",{className:(0,n.cx)(l.list,s),children:e.map(((e,s)=>(0,i.jsx)("li",{className:l.item,children:t(e,s)},a?a(e):s)))})}}},"./packages/grafana-ui/src/components/List/List.tsx":(e,t,a)=>{"use strict";a.d(t,{a:()=>i});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/components/List/AbstractList.tsx"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");class i extends s.PureComponent{render(){return(0,r.jsx)(n.L,Object.assign({},this.props))}}},"./packages/grafana-ui/src/components/Logs/LogMessageAnsi.tsx":(e,t,a)=>{"use strict";a.d(t,{Q:()=>p});var s=a("./packages/grafana-data/src/index.ts"),n=a("../../opt/drone/yarncache/ansicolor-npm-1.1.95-545bc74c89-cf0341903e.zip/node_modules/ansicolor/build/ansicolor.mjs"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),i=a("./.yarn/__virtual__/react-highlight-words-virtual-d2265e757c/3/opt/drone/yarncache/react-highlight-words-npm-0.17.0-880b4a18ed-41b3d0e451.zip/node_modules/react-highlight-words/dist/main.js"),o=a.n(i),l=a("./packages/grafana-ui/src/themes/index.ts"),c=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function d(e,t){return t.split(/;\s*/).reduce(((t,a)=>{if("color:rgba(0,0,0,0.5)"===a)return{color:e.colors.text.secondary};const s=a.match(/([^:\s]+)\s*:\s*(.+)/);if(s&&s[1]&&s[2]){t[s[1].replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))]=s[2]}return t}),{})}class u extends r.PureComponent{constructor(){var e,t,a;super(...arguments),a={chunks:[],prevValue:""},(t="state")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}static getDerivedStateFromProps(e,t){if(e.value===t.prevValue)return null;return{chunks:n.ZP.parse(e.value).spans.map((t=>t.css?{style:d(e.theme,t.css),text:t.text}:{text:t.text})),prevValue:e.value}}render(){const{chunks:e}=this.state;return e.map(((e,t)=>{var a;const n=null!==(a=this.props.highlight)&&void 0!==a&&a.searchWords?(0,c.jsx)(o(),{textToHighlight:e.text,searchWords:this.props.highlight.searchWords,findChunks:s.findHighlightChunksInText,highlightClassName:this.props.highlight.highlightClassName}):e.text;return e.style?(0,c.jsx)("span",{style:e.style,"data-testid":"ansiLogLine",children:n},t):n}))}}const p=(0,l.HE)(u);p.displayName="LogMessageAnsi"},"./packages/grafana-ui/src/components/Logs/LogRowMessage.tsx":(e,t,a)=>{"use strict";a.d(t,{r:()=>_,n:()=>k});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),r=a.n(n),i=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),o=a("./packages/grafana-data/src/index.ts"),l=a("../../opt/drone/yarncache/memoize-one-npm-6.0.0-8b2a2cd020-f185ea69f7.zip/node_modules/memoize-one/dist/memoize-one.esm.js"),c=a("./.yarn/__virtual__/react-highlight-words-virtual-d2265e757c/3/opt/drone/yarncache/react-highlight-words-npm-0.17.0-880b4a18ed-41b3d0e451.zip/node_modules/react-highlight-words/dist/main.js"),d=a.n(c),u=a("./packages/grafana-ui/src/themes/index.ts"),p=a("./packages/grafana-ui/src/components/Logs/getLogRowStyles.ts"),h=a("./packages/grafana-ui/src/components/Alert/Alert.tsx"),m=a("./packages/grafana-ui/src/themes/ThemeContext.tsx"),g=a("./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx"),f=a("./packages/grafana-ui/src/components/List/List.tsx"),b=a("./packages/grafana-ui/src/components/ClickOutsideWrapper/ClickOutsideWrapper.tsx"),v=a("./packages/grafana-ui/src/components/Logs/LogMessageAnsi.tsx"),x=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const y=(e,t)=>{const a=t?i.css`
        top: -250px;
      `:i.css`
        margin-top: -250px;
        width: 75%;
      `,s=t?i.css`
        top: 100%;
      `:i.css`
        margin-top: 40px;
        width: 75%;
      `;return{commonStyles:i.css`
      position: absolute;
      height: 250px;
      z-index: ${e.zIndex.dropdown};
      overflow: hidden;
      background: ${e.colors.bg1};
      box-shadow: 0 0 10px ${e.colors.dropdownShadow};
      border: 1px solid ${e.colors.bg2};
      border-radius: ${e.border.radius.md};
      width: 100%;
    `,header:i.css`
      height: 30px;
      padding: 0 10px;
      display: flex;
      align-items: center;
      background: ${e.colors.bg2};
    `,logs:i.css`
      height: 220px;
      padding: 10px;
    `,afterContext:a,beforeContext:s}},w=e=>{let{row:t,rows:a,onLoadMoreContext:s,canLoadMoreRows:n}=e;const{header:r}=(0,m.yK)(y);return(0,x.jsxs)("div",{className:r,children:[(0,x.jsxs)("span",{className:i.css`
          opacity: 0.6;
        `,children:["Found ",a.length," rows."]}),(a.length>=10||a.length>10&&a.length%10!=0)&&n&&(0,x.jsx)("span",{className:i.css`
            margin-left: 10px;
            &:hover {
              text-decoration: underline;
              cursor: pointer;
            }
          `,onClick:s,children:"Load 10 more"})]})},j=e=>{let{row:t,rows:a,error:n,className:r,shouldScrollToBottom:l,canLoadMoreRows:c,onLoadMoreContext:d}=e;const{commonStyles:u,logs:p}=(0,m.yK)(y),[b,j]=(0,s.useState)(0),C=(0,s.useRef)();(0,s.useLayoutEffect)((()=>{l&&C.current&&j(C.current.offsetHeight)}),[l]);const k={row:t,rows:a,onLoadMoreContext:d,canLoadMoreRows:c};return(0,x.jsxs)("div",{className:(0,i.cx)(u,r),children:[l&&!n&&(0,x.jsx)(w,Object.assign({},k)),(0,x.jsx)("div",{className:p,children:(0,x.jsx)(g.$,{autoHide:!0,scrollTop:b,autoHeightMin:"210px",children:(0,x.jsxs)("div",{ref:C,children:[!n&&(0,x.jsx)(f.a,{items:a,renderItem:e=>(0,x.jsx)("div",{className:i.css`
                        padding: 5px 0;
                      `,children:"string"==typeof e&&o.textUtil.hasAnsiCodes(e)?(0,x.jsx)(v.Q,{value:e}):e})}),n&&(0,x.jsx)(h.b,{title:n})]})})}),!l&&!n&&(0,x.jsx)(w,Object.assign({},k))]})},C=e=>{let{row:t,context:a,errors:n,onOutsideClick:r,onLoadMoreContext:i,hasMoreContextRows:o,wrapLogMessage:l}=e;(0,s.useEffect)((()=>{const e=e=>{27===e.keyCode&&r()};return document.addEventListener("keydown",e,!1),()=>{document.removeEventListener("keydown",e,!1)}}),[r]);const c=(0,m.Fg)(),{afterContext:d,beforeContext:u}=y(c,l);return(0,x.jsx)(b.L,{onClick:r,children:(0,x.jsxs)("div",{onClick:e=>e.stopPropagation(),children:[a.after&&(0,x.jsx)(j,{rows:a.after,error:n&&n.after,row:t,className:d,shouldScrollToBottom:!0,canLoadMoreRows:!!o&&o.after,onLoadMoreContext:i}),a.before&&(0,x.jsx)(j,{onLoadMoreContext:i,canLoadMoreRows:!!o&&o.before,row:t,rows:a.before,error:n&&n.before,className:u})]})})};const k=1e5;function S(e,t,a,s){const n=a&&a.length>0&&a[0]&&a[0].length>0&&t.length<k,r=null!=a?a:[];if(e){const e=n?{searchWords:r,highlightClassName:s}:void 0;return(0,x.jsx)(v.Q,{value:t,highlight:e})}return n?(0,x.jsx)(d(),{textToHighlight:t,searchWords:r,findChunks:o.findHighlightChunksInText,highlightClassName:s}):t}const T=(0,l.Z)(((e,t)=>{if(t)try{return JSON.stringify(JSON.parse(e),void 0,2)}catch(t){return e}return e}));class O extends s.PureComponent{constructor(){var e,t,a;super(...arguments),a=e=>{e.stopPropagation(),this.props.onToggleContext()},(t="onContextToggle")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}render(){const{row:e,theme:t,errors:a,hasMoreContextRows:s,updateLimit:n,context:o,contextIsOpen:l,showContextToggle:c,wrapLogMessage:d,prettifyLogMessage:u,onToggleContext:h}=this.props,m=(0,p.h)(t,e.logLevel),{hasAnsi:g,raw:f}=e,b=T(f,u),v=(0,i.cx)([m.logsRowMatchHighLight]),y=(e=>{const t=r()(e.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:i.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:i.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${t};
    `,horizontalScroll:i.css`
      label: verticalScroll;
      white-space: pre;
    `,contextNewline:i.css`
      display: block;
      margin-left: 0px;
    `}})(t);return(0,x.jsx)("td",{className:m.logsRowMessage,children:(0,x.jsxs)("div",{className:(0,i.cx)({[y.positionRelative]:d},{[y.horizontalScroll]:!d}),children:[l&&o&&(0,x.jsx)(C,{row:e,context:o,errors:a,wrapLogMessage:d,hasMoreContextRows:s,onOutsideClick:h,onLoadMoreContext:()=>{n&&n()}}),(0,x.jsx)("span",{className:(0,i.cx)(y.positionRelative,{[y.rowWithContext]:l}),children:S(g,b,e.searchWords,v)}),(null==c?void 0:c(e))&&(0,x.jsxs)("span",{onClick:this.onContextToggle,className:(0,i.cx)("log-row-context",m.context,{[y.contextNewline]:!d}),children:[l?"Hide":"Show"," context"]})]})})}}const _=(0,u.HE)(O);_.displayName="LogRowMessage"},"./packages/grafana-ui/src/components/Logs/getLogRowStyles.ts":(e,t,a)=>{"use strict";a.d(t,{h:()=>i});var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./packages/grafana-ui/src/themes/index.ts");const i=(0,r.Bb)(((e,t)=>{let a=e.isLight?e.v1.palette.gray5:e.v1.palette.gray2;const i=r.GU.hoverColor(e.colors.background.primary,e);switch(t){case n.LogLevel.crit:case n.LogLevel.critical:a="#705da0";break;case n.LogLevel.error:case n.LogLevel.err:a="#e24d42";break;case n.LogLevel.warning:case n.LogLevel.warn:a=e.colors.warning.main;break;case n.LogLevel.info:a="#7eb26d";break;case n.LogLevel.debug:a="#1f78c1";break;case n.LogLevel.trace:a="#6ed0e0"}return{logsRowMatchHighLight:s.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${e.colors.warning.main};
      background-color: rgba(${e.colors.warning.main}, 0.1);
    `,logsRowMatchHighLightPreview:s.css`
      label: logs-row__match-highlight--preview;
      background-color: rgba(${e.colors.warning.main}, 0.2);
      border-bottom-style: dotted;
    `,logsRowsTable:s.css`
      label: logs-rows;
      font-family: ${e.typography.fontFamilyMonospace};
      font-size: ${e.typography.bodySmall.fontSize};
      width: 100%;
    `,context:s.css`
      label: context;
      visibility: hidden;
      white-space: nowrap;
      position: relative;
      margin-left: 10px;
    `,logsRow:s.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-context {
          visibility: visible;
          z-index: 1;
          text-decoration: underline;
          &:hover {
            color: ${e.colors.warning.main};
          }
        }
      }

      td:last-child {
        width: 100%;
      }

      > td {
        padding-right: ${e.spacing(1)};
        border-top: ${e.v1.border.width.sm} solid transparent;
        border-bottom: ${e.v1.border.width.sm} solid transparent;
        height: 100%;
      }

      &:hover {
        background: ${i};
      }
    `,logsRowDuplicates:s.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:s.css`
      label: logs-row__level;
      position: relative;
      max-width: 10px;
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: 4px;
        background-color: ${a};
      }
    `,logIconError:s.css`
      color: ${e.colors.warning.main};
    `,logsRowToggleDetails:s.css`
      label: logs-row-toggle-details__level;
      position: relative;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:s.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:s.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;
    `,logsRowMessage:s.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
    `,logDetailsContainer:s.css`
      label: logs-row-details-table;
      border: 1px solid ${e.colors.border.medium};
      padding: 0 ${e.spacing(1)} ${e.spacing(1)};
      border-radius: 3px;
      margin: 20px 8px 20px 16px;
      cursor: default;
    `,logDetailsTable:s.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:s.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${e.v1.palette.gray3};
      padding-top: 6px;
      padding-left: 6px;
    `,logDetailsLabel:s.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${e.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:s.css`
      label: logs-row-details__heading;
      font-weight: ${e.typography.fontWeightBold};
      padding: ${e.spacing(1)} 0 ${e.spacing(.5)};
    `,logDetailsValue:s.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${i};
      }
    `}}))},"./packages/grafana-ui/src/components/MatchersUI/FieldNamePicker.tsx":(e,t,a)=>{"use strict";a.d(t,{b:()=>o});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/components/Select/Select.tsx"),r=a("./packages/grafana-ui/src/components/MatchersUI/utils.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=e=>{var t,a;let{value:o,onChange:l,context:c,item:d}=e;const u=null!==(t=d.settings)&&void 0!==t?t:{},p=(0,r.IX)(c.data,null==u?void 0:u.filter),h=(0,r.nw)(p,o),m=(0,s.useCallback)((e=>{if(!e||(0,r.w3)(e.value,p))return l(null==e?void 0:e.value)}),[p,l]),g=h.find((e=>e.value===o));return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.Ph,{menuShouldPortal:!0,value:g,placeholder:null!==(a=u.placeholderText)&&void 0!==a?a:"Select field",options:h,onChange:m,noOptionsMessage:u.noFieldsMessage,width:u.width,isClearable:!0})})}},"./packages/grafana-ui/src/components/MatchersUI/utils.ts":(e,t,a)=>{"use strict";a.d(t,{w3:()=>i,IX:()=>o,nw:()=>l});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./packages/grafana-ui/src/types/index.ts");function i(e,t){return!!e&&(t.display.has(e)||t.raw.has(e))}function o(e,t){return(0,s.useMemo)((()=>function(e,t){const a={display:new Set,raw:new Set,fields:new Map};for(const s of e)for(const r of s.fields){if(t&&!t(r))continue;const i=(0,n.getFieldDisplayName)(r,s,e);a.display.add(i),a.fields.set(i,r),r.name&&i!==r.name&&(a.raw.add(r.name),a.fields.set(r.name,r))}return a}(e,t)),[e,t])}function l(e,t,a,n){return(0,s.useMemo)((()=>{let s=!1;const i=[];a&&i.push(a);for(const a of e.display){s||a!==t||(s=!0);const o=e.fields.get(a);n&&n!==(null==o?void 0:o.type)||i.push({value:a,label:a,icon:o?(0,r.e7)(o):void 0})}for(const a of e.raw)e.display.has(a)||(s||a!==t||(s=!0),i.push({value:a,label:`${a} (base field name)`}));return t&&!s&&i.push({value:t,label:`${t} (not found)`}),i}),[e,t,a,n])}},"./packages/grafana-ui/src/components/Modal/Modal.tsx":(e,t,a)=>{"use strict";a.d(t,{u:()=>m});var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./.yarn/__virtual__/@react-aria-focus-virtual-d5af2f4276/3/opt/drone/yarncache/@react-aria-focus-npm-3.5.0-e819dae779-c03d4433bd.zip/node_modules/@react-aria/focus/dist/module.js"),r=a("./.yarn/__virtual__/@react-aria-dialog-virtual-7978b78bbe/3/opt/drone/yarncache/@react-aria-dialog-npm-3.1.4-2a0ffc453b-968328a9b2.zip/node_modules/@react-aria/dialog/dist/module.js"),i=a("./.yarn/__virtual__/@react-aria-overlays-virtual-66213eeb57/3/opt/drone/yarncache/@react-aria-overlays-npm-3.7.3-408f244e82-3fffe82df9.zip/node_modules/@react-aria/overlays/dist/module.js"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),l=a("./packages/grafana-ui/src/themes/index.ts"),c=a("./packages/grafana-ui/src/components/IconButton/IconButton.tsx"),d=a("./packages/grafana-ui/src/components/Layout/Layout.tsx"),u=a("./packages/grafana-ui/src/components/Modal/getModalStyles.ts"),p=a("./packages/grafana-ui/src/components/Modal/ModalHeader.tsx"),h=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function m(e){const{title:t,children:a,isOpen:d=!1,closeOnEscape:p=!0,closeOnBackdropClick:m=!0,className:f,contentClassName:b,onDismiss:v,onClickBackdrop:x,trapFocus:y=!0}=e,w=(0,l.l4)(),j=(0,u.J)(w),C=(0,o.useRef)(null),{overlayProps:k,underlayProps:S}=(0,i.Ir)({isKeyboardDismissDisabled:p,isOpen:d,onClose:v},C),{dialogProps:T,titleProps:O}=(0,r.R)({},C);if(!d)return null;const _=(0,s.cx)(j.modalHeader,"string"!=typeof t&&j.modalHeaderWithTabs);return(0,h.jsxs)(i.Xj,{children:[(0,h.jsx)("div",Object.assign({className:j.modalBackdrop,onClick:x||(m?v:void 0)},S)),(0,h.jsx)(n.MT,{contain:y,autoFocus:!0,restoreFocus:!0,children:(0,h.jsxs)("div",Object.assign({className:(0,s.cx)(j.modal,f),ref:C},k,T,{children:[(0,h.jsxs)("div",{className:_,children:["string"==typeof t&&(0,h.jsx)(g,Object.assign({},e,{title:t,id:O.id})),"string"!=typeof t&&t,(0,h.jsx)("div",{className:j.modalHeaderClose,children:(0,h.jsx)(c.h,{"aria-label":"Close dialogue",surface:"header",name:"times",size:"xl",onClick:v})})]}),(0,h.jsx)("div",{className:(0,s.cx)(j.modalContent,b),children:a})]}))})]})}function g(e){let{icon:t,iconTooltip:a,title:s,id:n}=e;return(0,h.jsx)(p.x,{icon:t,iconTooltip:a,title:s,id:n})}m.ButtonRow=function(e){var t;let{leftItems:a,children:s}=e;const n=(0,l.l4)(),r=(0,u.J)(n);return a?(0,h.jsx)("div",{className:r.modalButtonRow,children:t||(t=(0,h.jsxs)(d.Lh,{justify:"space-between",children:[(0,h.jsx)(d.Lh,{justify:"flex-start",spacing:"md",children:a}),(0,h.jsx)(d.Lh,{justify:"flex-end",spacing:"md",children:s})]}))}):(0,h.jsx)("div",{className:r.modalButtonRow,children:(0,h.jsx)(d.Lh,{justify:"flex-end",spacing:"md",children:s})})}},"./packages/grafana-ui/src/components/Modal/ModalHeader.tsx":(e,t,a)=>{"use strict";a.d(t,{x:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/components/Modal/getModalStyles.ts"),n=a("./packages/grafana-ui/src/themes/index.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i=e=>{let{icon:t,iconTooltip:a,title:i,children:o,id:l}=e;const c=(0,n.wW)(s.J);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:c.modalHeaderTitle,id:l,children:i}),o]})}},"./packages/grafana-ui/src/components/Modal/getModalStyles.ts":(e,t,a)=>{"use strict";a.d(t,{J:()=>n});var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js");const n=(0,a("./packages/grafana-ui/src/themes/index.ts").Bb)((e=>{const t=e.shape.borderRadius(1);return{modal:s.css`
      position: fixed;
      z-index: ${e.zIndex.modal};
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      border-radius: ${t};
      border: 1px solid ${e.colors.border.weak};
      background-clip: padding-box;
      outline: none;
      width: 750px;
      max-width: 100%;
      left: 0;
      right: 0;
      margin-left: auto;
      margin-right: auto;
      top: 10%;
      max-height: 80%;
      display: flex;
      flex-direction: column;
    `,modalBackdrop:s.css`
      position: fixed;
      z-index: ${e.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: ${e.components.overlay.background};
      backdrop-filter: blur(1px);
    `,modalHeader:s.css`
      label: modalHeader;
      display: flex;
      align-items: center;
      min-height: 42px;
      margin: ${e.spacing(1,2,0,2)};
    `,modalHeaderWithTabs:s.css`
      border-bottom: 1px solid ${e.colors.border.weak};
    `,modalHeaderTitle:s.css`
      font-size: ${e.typography.size.lg};
      margin: ${e.spacing(0,4,0,1)};
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    `,modalHeaderIcon:s.css`
      margin-right: ${e.spacing(2)};
      font-size: inherit;
      &:before {
        vertical-align: baseline;
      }
    `,modalHeaderClose:s.css`
      height: 100%;
      display: flex;
      align-items: center;
      color: ${e.colors.text.secondary};
      flex-grow: 1;
      justify-content: flex-end;
    `,modalContent:s.css`
      overflow: auto;
      padding: ${e.spacing(3)};
      width: 100%;
    `,modalButtonRow:s.css`
      padding-top: ${e.spacing(3)};
    `}}))},"./packages/grafana-ui/src/components/OptionsUI/color.tsx":(e,t,a)=>{"use strict";a.d(t,{B:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/components/ColorPicker/ColorPicker.tsx"),n=a("./packages/grafana-ui/src/themes/index.ts"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./packages/grafana-ui/src/components/ColorPicker/ColorSwatch.tsx"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=e=>{let{value:t,onChange:a}=e;const r=(0,n.l4)(),l=(0,n.wW)(c);return(0,o.jsx)(s.zH,{color:null!=t?t:"",onChange:a,enableNamedColors:!0,children:e=>{let{ref:a,showColorPicker:s,hideColorPicker:n}=e;return(0,o.jsx)("div",{className:l.spot,children:(0,o.jsx)("div",{className:l.colorPicker,children:(0,o.jsx)(i.b,{ref:a,onClick:s,onMouseLeave:n,color:t?r.visualization.getColorByName(t):r.components.input.borderColor})})})}})},c=e=>({spot:r.css`
      color: ${e.colors.text};
      background: ${e.components.input.background};
      padding: 3px;
      height: ${e.v1.spacing.formInputHeight}px;
      border: 1px solid ${e.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      &:hover {
        border: 1px solid ${e.components.input.borderHover};
      }
    `,colorPicker:r.css`
      padding: 0 ${e.spacing(1)};
    `,colorText:r.css`
      cursor: pointer;
      flex-grow: 1;
    `,trashIcon:r.css`
      cursor: pointer;
      color: ${e.colors.text.secondary};
      &:hover {
        color: ${e.colors.text};
      }
    `})},"./packages/grafana-ui/src/components/PanelChrome/LoadingIndicator.tsx":(e,t,a)=>{"use strict";a.d(t,{T:()=>c});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-e2e-selectors/src/index.ts"),r=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),i=a("./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx"),o=a("./packages/grafana-ui/src/themes/index.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=e=>{let{onCancel:t,loading:a}=e;const c=(0,o.yK)(d);return a?(0,l.jsx)(i.u,{content:"Cancel query",children:(0,l.jsx)(r.J,{className:(0,s.cx)("spin-clockwise",{[c.clickable]:!!t}),name:"sync",size:"sm",onClick:t,"aria-label":n.wl.components.LoadingIndicator.icon})}):null},d=()=>({clickable:s.css`
      cursor: pointer;
    `})},"./packages/grafana-ui/src/components/PanelChrome/PanelContext.ts":(e,t,a)=>{"use strict";a.d(t,{bb:()=>r,_w:()=>i,R9:()=>o});var s=a("./packages/grafana-data/src/index.ts"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");const r=n.createContext({eventBus:new s.EventBusSrv}),i=r.Provider,o=()=>n.useContext(r)},"./packages/grafana-ui/src/components/Portal/Portal.tsx":(e,t,a)=>{"use strict";a.d(t,{h:()=>o});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/react-dom-virtual-93e2c4839c/3/opt/drone/yarncache/react-dom-npm-17.0.2-f551215af1-1c1eaa3bca.zip/node_modules/react-dom/index.js"),r=a("./packages/grafana-ui/src/themes/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function o(e){const{children:t,className:a,root:o=document.body,forwardedRef:l}=e,c=(0,r.l4)(),d=(0,s.useRef)(null);return d.current||(d.current=document.createElement("div"),a&&(d.current.className=a),d.current.style.position="relative",d.current.style.zIndex=`${c.zIndex.portal}`),(0,s.useLayoutEffect)((()=>(d.current&&o.appendChild(d.current),()=>{d.current&&o.removeChild(d.current)})),[o]),n.createPortal((0,i.jsx)("div",{ref:l,children:t}),d.current)}s.forwardRef(((e,t)=>(0,i.jsx)(o,Object.assign({},e,{forwardedRef:t})))).displayName="RefForwardingPortal"},"./packages/grafana-ui/src/components/Select/DropdownIndicator.tsx":(e,t,a)=>{"use strict";a.d(t,{m:()=>r});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const r=e=>{let{isOpen:t}=e;const a=t?"angle-up":"angle-down";return(0,n.jsx)(s.J,{name:a})}},"./packages/grafana-ui/src/components/Select/Select.tsx":(e,t,a)=>{"use strict";a.d(t,{M8:()=>q,qb:()=>H,NU:()=>U,Ph:()=>B,eI:()=>I,E0:()=>s.SelectContainerProps});var s={};a.r(s),a.d(s,{e:()=>I});var n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/dist/react-select.esm.js"),i=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/creatable/dist/react-select.esm.js"),o=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/async/dist/react-select.esm.js"),l=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/async-creatable/dist/react-select.esm.js"),c=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),d=a("./packages/grafana-ui/src/components/Spinner/Spinner.tsx"),u=a("./packages/grafana-ui/src/components/Select/resetSelectStyles.ts"),p=a("./packages/grafana-ui/src/themes/ThemeContext.tsx"),h=a("./packages/grafana-ui/src/components/Select/getSelectStyles.ts"),m=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),g=a("./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx"),f=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const b=e=>{let{children:t,maxHeight:a,innerRef:s,innerProps:n}=e;const r=(0,p.l4)(),i=(0,h.D)(r);return(0,f.jsx)("div",Object.assign({},n,{className:i.menu,style:{maxHeight:a},"aria-label":"Select options menu",children:(0,f.jsx)(g.$,{scrollRefCallback:s,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0,children:t})}))};b.displayName="SelectMenu";const v=e=>{let{children:t,data:a,innerProps:s,innerRef:n,isFocused:r,isSelected:i,renderOptionLabel:o}=e;const l=(0,p.l4)(),d=(0,h.D)(l);return(0,f.jsxs)("div",Object.assign({ref:n,className:(0,m.cx)(d.option,r&&d.optionFocused,i&&d.optionSelected,a.isDisabled&&d.optionDisabled)},s,{"aria-label":"Select option",children:[a.icon&&(0,f.jsx)(c.J,{name:a.icon,className:d.optionIcon}),a.imgUrl&&(0,f.jsx)("img",{className:d.optionImage,src:a.imgUrl,alt:a.label||a.value}),(0,f.jsxs)("div",{className:d.optionBody,children:[(0,f.jsx)("span",{children:o?o(a):t}),a.description&&(0,f.jsx)("div",{className:d.optionDescription,children:a.description}),a.component&&(0,f.jsx)(a.component,{})]})]}))};v.displayName="SelectMenuOptions";var x=a("./packages/grafana-ui/src/components/Input/Input.tsx");const y=n.forwardRef(((e,t)=>{const{children:a}=e,s=(0,p.l4)(),n=(0,x.H)({theme:s,invalid:!1});return(0,f.jsx)("div",{className:(0,m.cx)(n.suffix,m.css`
          position: relative;
        `),ref:t,children:a})}));y.displayName="IndicatorsContainer";class w extends n.Component{render(){const{children:e}=this.props,{selectProps:t}=this.props;if(t&&Array.isArray(e)&&Array.isArray(e[0])&&void 0!==t.maxVisibleValues&&(!t.showAllSelectedWhenOpen||!t.menuIsOpen)){const[a,...s]=e,n=a.slice(0,t.maxVisibleValues);return this.renderContainer([n,...s])}return this.renderContainer(e)}renderContainer(e){const{isMulti:t,theme:a}=this.props,s=(0,h.D)(a),n=(0,m.cx)(s.valueContainer,t&&s.valueContainerMulti);return(0,f.jsx)("div",{className:n,children:e})}}const j=(0,p.HE)(w);var C=a("./packages/grafana-ui/src/components/Forms/commonStyles.ts"),k=a("./packages/grafana-ui/src/themes/index.ts");const S=["focused","invalid","disabled","children","innerProps","prefix"];const T=(0,k.Bb)(((e,t,a,s,n)=>{const r=(0,x.H)({theme:e,invalid:t});return{input:(0,m.cx)((0,C.nf)(e),m.css`
          width: 100%;
          max-width: 100%;
          display: flex;
          flex-direction: row;
          align-items: center;
          flex-wrap: wrap;
          justify-content: space-between;
          padding-right: 0;
          position: relative;
          box-sizing: border-box;
        `,n&&m.css`
            padding-left: 0;
          `),prefix:(0,m.cx)(r.prefix,m.css`
          position: relative;
        `)}})),O=n.forwardRef((function(e,t){let{focused:a,invalid:s,disabled:n,children:r,innerProps:i,prefix:o}=e;!function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a])}(e,S);const l=(0,p.l4)(),c=T(l,s,a,n,!!o);return(0,f.jsxs)("div",Object.assign({className:c.input},i,{ref:t,children:[o&&(0,f.jsx)("div",{className:(0,m.cx)(c.prefix),children:o}),r]}))}));var _=a("./packages/grafana-ui/src/themes/mixins.ts"),N=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/dist/index-c7a4d7ce.esm.js");const I=e=>{const{isDisabled:t,isFocused:a,children:s}=e,n=(0,p.l4)(),r=P(n,a,t);return(0,f.jsx)(N.c.SelectContainer,Object.assign({},e,{className:(0,m.cx)(r.wrapper,e.className),children:s}))},P=(0,k.Bb)(((e,t,a)=>{const s=(0,x.H)({theme:e,invalid:!1});return{wrapper:(0,m.cx)(s.wrapper,(0,C.RK)(e,!1),t&&m.css`
          ${(0,_.focusCss)(e.v1)}
        `,a&&s.inputDisabled,m.css`
        position: relative;
        box-sizing: border-box;
        /* The display property is set by the styles prop in SelectBase because it's dependant on the width prop  */
        flex-direction: row;
        flex-wrap: wrap;
        align-items: stretch;
        justify-content: space-between;

        min-height: 32px;
        height: auto;
        max-width: 100%;

        /* Input padding is applied to the InputControl so the menu is aligned correctly */
        padding: 0;
        cursor: ${a?"not-allowed":"pointer"};
      `)}}));var M=a("./packages/grafana-ui/src/components/Select/DropdownIndicator.tsx"),F=a("./packages/grafana-ui/src/components/Select/SelectOptionGroup.tsx"),A=a("./packages/grafana-ui/src/components/Select/SingleValue.tsx"),D=a("./packages/grafana-ui/src/components/IconButton/IconButton.tsx");const $=e=>{let{innerProps:t,children:a}=e;const s=(0,k.l4)(),n=(0,h.D)(s);return(0,f.jsx)("div",Object.assign({},t,{className:n.multiValueContainer,children:a}))},L=e=>{let{children:t,innerProps:a}=e;const s=(0,k.l4)(),n=(0,h.D)(s);return(0,f.jsx)(D.h,Object.assign({},a,{name:"times",size:"sm",className:n.multiValueRemove}))},R=(e,t)=>{for(const a of t)if("options"in a){let t=R(e,a.options);if(t)return t}else if("value"in a&&a.value===e)return a;return null};var E;const z=e=>{const{children:t,innerProps:a,selectProps:{menuIsOpen:s,onMenuClose:r,onMenuOpen:i},isFocused:o,isMulti:l,getValue:c,innerRef:d}=e,u=e.selectProps;return u.renderControl?n.createElement(u.renderControl,{isOpen:s,value:l?c():c()[0],ref:d,onClick:s?r:i,onBlur:r,disabled:!!u.disabled,invalid:!!u.invalid}):(0,f.jsx)(O,{ref:d,innerProps:a,prefix:u.prefix,focused:o,invalid:!!u.invalid,disabled:!!u.disabled,children:t})};function V(e){var t;let{allowCustomValue:a=!1,allowCreateWhileLoading:s=!1,"aria-label":p,autoFocus:m=!1,backspaceRemovesValue:g=!0,cacheOptions:x,className:w,closeMenuOnSelect:C=!0,components:S,defaultOptions:T,defaultValue:O,disabled:_=!1,filterOption:N,formatCreateLabel:P,getOptionLabel:D,getOptionValue:V,inputValue:B,invalid:U,isClearable:H=!1,id:q,isLoading:W=!1,isMulti:G=!1,inputId:Z,isOpen:Q,isOptionDisabled:K,isSearchable:Y=!0,loadOptions:J,loadingMessage:X="Loading options...",maxMenuHeight:ee=300,minMenuHeight:te,maxVisibleValues:ae,menuPlacement:se="auto",menuPosition:ne,menuShouldPortal:re=!1,noOptionsMessage:ie="No options found",onBlur:oe,onChange:le,onCloseMenu:ce,onCreateOption:de,onInputChange:ue,onKeyDown:pe,onOpenMenu:he,openMenuOnFocus:me=!1,options:ge=[],placeholder:fe="Choose",prefix:be,renderControl:ve,showAllSelectedWhenOpen:xe=!0,tabSelectsValue:ye=!0,value:we,width:je,isValidNewOption:Ce}=e;const ke=(0,k.l4)(),Se=(0,h.D)(ke),Te=(0,n.useRef)(null),[Oe,_e]=(0,n.useState)(!1),Ne=(0,u.O)(ke,je);(0,n.useEffect)((()=>{if(J&&Q&&Te.current&&Te.current.controlRef&&"auto"===se){const e=window.innerHeight-Te.current.controlRef.getBoundingClientRect().bottom;_e(e<ee)}}),[ee,se,J,Q]);const Ie=(0,n.useCallback)(((e,t)=>{if(G&&null==e)return le([],t);le(e,t)}),[G,le]);let Pe=r.ZP;const Me={};let Fe,Ae={};if(G&&J)Fe=we;else if(G&&we&&Array.isArray(we)&&!J)Fe=we.map((e=>{var t;return R(null!==(t=e.value)&&void 0!==t?t:e,ge)}));else if(J){const e=O||we;Fe=e?[e]:[]}else Fe=((e,t)=>{if(Array.isArray(e)){const t=e.filter(Boolean);return null!=t&&t.length?t:void 0}if("object"==typeof e)return[e];if("string"==typeof e||"number"==typeof e){const a=R(e,t);if(a)return[a]}})(we,ge);const De={"aria-label":p,autoFocus:m,backspaceRemovesValue:g,captureMenuScroll:!1,closeMenuOnSelect:C,defaultValue:O,disabled:_,filterOption:N,getOptionLabel:D,getOptionValue:V,inputValue:B,invalid:U,isClearable:H,id:q,isDisabled:_,isLoading:W,isMulti:G,inputId:Z,isOptionDisabled:K,isSearchable:Y,maxMenuHeight:ee,minMenuHeight:te,maxVisibleValues:ae,menuIsOpen:Q,menuPlacement:"auto"===se&&Oe?"top":se,menuPosition:ne,menuShouldBlockScroll:!0,menuPortalTarget:re?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:oe,onChange:Ie,onInputChange:ue,onKeyDown:pe,onMenuClose:ce,onMenuOpen:he,openMenuOnFocus:me,options:ge,placeholder:fe,prefix:be,renderControl:ve,showAllSelectedWhenOpen:xe,tabSelectsValue:ye,value:G?Fe:null===(t=Fe)||void 0===t?void 0:t[0]};return a&&(Pe=i.Z,Me.allowCreateWhileLoading=s,Me.formatCreateLabel=null!=P?P:e=>`Create: ${e}`,Me.onCreateOption=de,Me.isValidNewOption=Ce),J&&(Pe=a?l.Z:o.Z,Ae={loadOptions:J,cacheOptions:x,defaultOptions:T}),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(Pe,Object.assign({ref:Te,components:Object.assign({MenuList:b,Group:F.n,ValueContainer:j,IndicatorsContainer(e){const{selectProps:t}=e,{value:a,showAllSelectedWhenOpen:s,maxVisibleValues:n,menuIsOpen:r}=t;if(void 0!==n){const t=a.length,i=[...e.children];return i.splice(-1,0,(e=>{const{maxVisibleValues:t,selectedValuesCount:a,menuIsOpen:s,showAllSelectedWhenOpen:n}=e;return!(void 0!==t&&a>t)||n&&s?null:(0,f.jsxs)("span",{id:"excess-values",children:["(+",a-t,")"]},"excess-values")})({maxVisibleValues:n,selectedValuesCount:t,showAllSelectedWhenOpen:s,menuIsOpen:r})),(0,f.jsx)(y,Object.assign({},e,{children:i}))}return(0,f.jsx)(y,Object.assign({},e))},IndicatorSeparator:()=>(0,f.jsx)(f.Fragment,{}),Control:z,Option:v,ClearIndicator(e){const{clearValue:t}=e;return(0,f.jsx)(c.J,{name:"times",role:"button","aria-label":"select-clear-value",className:Se.singleValueRemove,onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),t()}})},LoadingIndicator:e=>E||(E=(0,f.jsx)(d.$,{inline:!0})),LoadingMessage:e=>(0,f.jsx)("div",{className:Se.loadingMessage,children:X}),NoOptionsMessage:e=>(0,f.jsx)("div",{className:Se.loadingMessage,"aria-label":"No options provided",children:ie}),DropdownIndicator:e=>(0,f.jsx)(M.m,{isOpen:e.selectProps.menuIsOpen}),SingleValue:e=>(0,f.jsx)(A.P,Object.assign({},e,{disabled:_})),MultiValueContainer:$,MultiValueRemove:L,SelectContainer:I},S),styles:Ne,className:w},De,Me,Ae))})}function B(e){return(0,f.jsx)(V,Object.assign({},e))}function U(e){return(0,f.jsx)(V,Object.assign({},e,{isMulti:!0}))}function H(e){return(0,f.jsx)(V,Object.assign({},e))}function q(e){return(0,f.jsx)(V,Object.assign({},e,{isMulti:!0}))}},"./packages/grafana-ui/src/components/Select/SelectOptionGroup.tsx":(e,t,a)=>{"use strict";a.d(t,{n:()=>u});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/themes/index.ts"),i=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c=(0,r.Bb)((e=>({header:n.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      justify-items: center;
      cursor: pointer;
      padding: 7px 10px;
      width: 100%;
      border-bottom: 1px solid ${e.colors.bg2};

      &:hover {
        color: ${e.colors.textStrong};
      }
    `,label:n.css`
      flex-grow: 1;
    `,icon:n.css`
      padding-right: 2px;
    `})));class d extends s.PureComponent{constructor(){super(...arguments),l(this,"state",{expanded:!1}),l(this,"onToggleChildren",(()=>{this.setState((e=>({expanded:!e.expanded})))}))}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:e}=this.props.selectProps.value;e&&this.props.options.some((t=>t.value===e))&&this.setState({expanded:!0})}}componentDidUpdate(e){""!==e.selectProps.inputValue&&this.setState({expanded:!0})}render(){const{children:e,label:t,theme:a}=this.props,{expanded:s}=this.state,n=c(a);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:n.header,onClick:this.onToggleChildren,children:[(0,o.jsx)("span",{className:n.label,children:t}),(0,o.jsx)(i.J,{className:n.icon,name:s?"angle-up":"angle-down"})," "]}),s&&e]})}}const u=(0,r.Zz)(d)},"./packages/grafana-ui/src/components/Select/SingleValue.tsx":(e,t,a)=>{"use strict";a.d(t,{P:()=>m});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/dist/index-c7a4d7ce.esm.js");var i=a("./packages/grafana-ui/src/themes/index.ts"),o=a("./packages/grafana-ui/src/components/transitions/SlideOutTransition.tsx"),l=a("./packages/grafana-ui/src/components/transitions/FadeTransition.tsx"),c=a("./packages/grafana-ui/src/components/Spinner/Spinner.tsx"),d=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),u=a.n(d),p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const h=e=>({singleValue:n.css`
    label: singleValue;
    color: ${e.components.input.text};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    box-sizing: border-box;
    max-width: 100%;
    grid-area: 1 / 1 / 2 / 3;
  `,spinnerWrapper:n.css`
    width: 16px;
    height: 16px;
    display: inline-block;
    margin-right: 10px;
    position: relative;
    vertical-align: middle;
    overflow: hidden;
  `,spinnerIcon:n.css`
    width: 100%;
    height: 100%;
    position: absolute;
  `,disabled:n.css`
    color: ${u()(e.colors.text.disabled).setAlpha(.64).toString()};
  `}),m=e=>{var t;const{children:a,data:l,isDisabled:d}=e,u=(0,i.wW)(h),m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:a=250,delay:n=250}=t,[r,i]=(0,s.useState)(e),o=(0,s.useRef)();return(0,s.useEffect)((()=>{let t;if(e)t=setTimeout((()=>{o.current=new Date,i(e)}),n);else{const s=o.current?Date.now()-o.current.valueOf():0,n=()=>{o.current=void 0,i(e)};s>=a?n():t=setTimeout(n,a-s)}return()=>{t&&(clearTimeout(t),t=void 0)}}),[e,a,n]),r}(l.loading||!1,{delay:250,duration:750});return(0,p.jsxs)(r.c.SingleValue,Object.assign({},e,{className:(0,n.cx)(u.singleValue,d&&u.disabled),children:[l.imgUrl?(0,p.jsx)(g,{loading:m,imgUrl:l.imgUrl,styles:u,alt:null!==(t=l.label)&&void 0!==t?t:l.value}):(0,p.jsx)(o.R,{horizontal:!0,size:16,visible:m,duration:150,children:(0,p.jsx)("div",{className:u.spinnerWrapper,children:(0,p.jsx)(c.$,{className:u.spinnerIcon,inline:!0})})}),!l.hideText&&a]}))},g=e=>(0,p.jsxs)("div",{className:e.styles.spinnerWrapper,children:[(0,p.jsx)(l.n,{duration:150,visible:e.loading,children:(0,p.jsx)(c.$,{className:e.styles.spinnerIcon,inline:!0})}),(0,p.jsx)(l.n,{duration:150,visible:!e.loading,children:(0,p.jsx)("img",{className:e.styles.spinnerIcon,src:e.imgUrl,alt:e.alt})})]})},"./packages/grafana-ui/src/components/Select/getSelectStyles.ts":(e,t,a)=>{"use strict";a.d(t,{D:()=>r});var s=a("./packages/grafana-ui/src/themes/stylesFactory.ts"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js");const r=(0,s.B)((e=>({menu:n.css`
      label: grafana-select-menu;
      background: ${e.components.dropdown.background};
      box-shadow: ${e.shadows.z3};
      position: relative;
      min-width: 100%;
      z-index: 1;
    `,option:n.css`
      label: grafana-select-option;
      padding: 8px;
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;

      &:hover {
        background: ${e.colors.action.hover};
      }
    `,optionIcon:n.css`
      margin-right: ${e.spacing(1)};
    `,optionImage:n.css`
      label: grafana-select-option-image;
      width: 16px;
      margin-right: 10px;
    `,optionDescription:n.css`
      label: grafana-select-option-description;
      font-weight: normal;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.text.secondary};
      white-space: normal;
      line-height: ${e.typography.body.lineHeight};
    `,optionBody:n.css`
      label: grafana-select-option-body;
      display: flex;
      font-weight: ${e.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,optionFocused:n.css`
      label: grafana-select-option-focused;
      background: ${e.colors.action.focus};
    `,optionSelected:n.css`
      background: ${e.colors.action.selected};
    `,optionDisabled:n.css`
      label: grafana-select-option-disabled;
      background-color: ${e.colors.action.disabledBackground};
      color: ${e.colors.action.disabledText};
      cursor: not-allowed;
    `,singleValue:n.css`
      label: grafana-select-single-value;
      color: ${e.components.input.text};
      grid-area: 1 / 1 / 2 / 3;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
    `,valueContainer:n.css`
      label: grafana-select-value-container;
      align-items: center;
      display: grid;
      position: relative;
      box-sizing: border-box;
      flex: 1 1 0%;
      outline: none;
      overflow: hidden;
    `,valueContainerMulti:n.css`
      label: grafana-select-value-container-multi;
      flex-wrap: wrap;
      display: flex;
    `,loadingMessage:n.css`
      label: grafana-select-loading-message;
      padding: ${e.spacing(1)};
      text-align: center;
      width: 100%;
    `,multiValueContainer:n.css`
      label: grafana-select-multi-value-container;
      display: flex;
      align-items: center;
      line-height: 1;
      background: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius()};
      margin: ${e.spacing(.25,1,.25,0)};
      padding: ${e.spacing(.25,0,.25,1)};
      color: ${e.colors.text.primary};
      font-size: ${e.typography.size.sm};

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.secondary)};
      }
    `,multiValueRemove:n.css`
      label: grafana-select-multi-value-remove;
      margin: ${e.spacing(0,.5)};
      cursor: pointer;
      svg {
        margin-bottom: 0;
      }
    `,singleValueRemove:n.css`
      cursor: pointer;
      &:hover {
        color: ${e.colors.text.primary};
      }
    `})))},"./packages/grafana-ui/src/components/Select/resetSelectStyles.ts":(e,t,a)=>{"use strict";a.d(t,{Z:()=>n,O:()=>r});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");function n(e){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(e){return Object.assign({},e,{color:"inherit",margin:0,padding:0,zIndex:1})},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:e=>{let{maxHeight:t}=e;return{maxHeight:t}},multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:t=>Object.assign({},t,{color:e.colors.text.disabled}),singleValue:()=>({}),valueContainer:()=>({})}}function r(e,t){return(0,s.useMemo)((()=>Object.assign({},n(e),{menuPortal:t=>Object.assign({},t,{zIndex:e.zIndex.portal}),menu:t=>{let{top:a,bottom:s,position:n}=t;return{top:a,bottom:s,position:n,minWidth:"100%",zIndex:e.zIndex.dropdown}},container:()=>({width:t?e.spacing(t):"100%",display:"auto"===t?"inline-flex":"flex"}),option:(e,t)=>Object.assign({},e,{opacity:t.isDisabled?.5:1})})),[e,t])}},"./packages/grafana-ui/src/components/Spinner/Spinner.tsx":(e,t,a)=>{"use strict";a.d(t,{$:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/themes/index.ts"),r=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=(0,n.Bb)(((e,t)=>({wrapper:s.css`
      font-size: ${e}px;
      ${t?s.css`
            display: inline-block;
          `:""}
    `}))),l=e=>{const{className:t,inline:a=!1,iconClassName:n,style:l,size:c=16}=e,d=o(c,a);return(0,i.jsx)("div",{style:l,className:(0,s.cx)(d.wrapper,t),children:(0,i.jsx)(r.J,{className:(0,s.cx)("fa-spin",n),name:"fa fa-spinner"})})}},"./packages/grafana-ui/src/components/StatsPicker/StatsPicker.tsx":(e,t,a)=>{"use strict";a.d(t,{m:()=>c});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("./packages/grafana-ui/src/components/Select/Select.tsx"),i=a("./packages/grafana-data/src/index.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends s.PureComponent{constructor(){super(...arguments),l(this,"checkInput",(()=>{const{stats:e,allowMultiple:t,defaultStat:a,onChange:s}=this.props,r=i.fieldReducers.list(e);if(r.length!==e.length){const t=r.map((e=>e.id)),a=(0,n.difference)(e,t);console.warn("Unknown stats",a,e),s(r.map((e=>e.id)))}!t&&e.length>1&&(console.warn("Removing extra stat",e),s([e[0]])),a&&e.length<1&&s([a])})),l(this,"onSelectionChange",(e=>{const{onChange:t}=this.props;Array.isArray(e)?t(e.map((e=>e.value))):t(e&&e.value?[e.value]:[])}))}componentDidMount(){this.checkInput()}componentDidUpdate(e){this.checkInput()}render(){const{stats:e,allowMultiple:t,defaultStat:a,placeholder:s,className:n,menuPlacement:l,width:c,inputId:d}=this.props,u=i.fieldReducers.selectOptions(e);return(0,o.jsx)(r.Ph,{menuShouldPortal:!0,value:u.current,className:n,isClearable:!a,isMulti:t,width:c,isSearchable:!0,options:u.options,placeholder:s,onChange:this.onSelectionChange,menuPlacement:l,inputId:d})}}l(c,"defaultProps",{allowMultiple:!1})},"./packages/grafana-ui/src/components/Switch/Switch.tsx":(e,t,a)=>{"use strict";a.d(t,{r:()=>h,x:()=>m});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),i=a("./packages/grafana-data/src/index.ts"),o=a("./packages/grafana-ui/src/themes/index.ts"),l=a("./packages/grafana-ui/src/themes/mixins.ts"),c=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const d=["value","checked","disabled","onChange","id"],u=["transparent","showLabel","label","value","id"];function p(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}const h=s.forwardRef(((e,t)=>{let{value:a,checked:l,disabled:u,onChange:h,id:m}=e,f=p(e,d);l&&(0,i.deprecationWarning)("Switch","checked prop","value");const b=(0,o.l4)(),v=g(b),x=(0,s.useRef)(m||(0,r.uniqueId)("switch-"));return(0,c.jsxs)("div",{className:(0,n.cx)(v.switch),children:[(0,c.jsx)("input",Object.assign({type:"checkbox",disabled:u,checked:a,onChange:e=>{null==h||h(e)},id:x.current},f,{ref:t})),(0,c.jsx)("label",{htmlFor:x.current})]})}));h.displayName="Switch";const m=s.forwardRef(((e,t)=>{let{transparent:a,showLabel:s,label:r,value:i,id:l}=e,d=p(e,u);const m=(0,o.l4)(),f=g(m,a);return(0,c.jsxs)("div",{className:f.inlineContainer,children:[s&&(0,c.jsx)("label",{htmlFor:l,className:(0,n.cx)(f.inlineLabel,i&&f.inlineLabelEnabled,"inline-switch-label"),children:r}),(0,c.jsx)(h,Object.assign({},d,{id:l,label:r,ref:t,value:i}))]})}));m.displayName="Switch";const g=(0,o.Bb)(((e,t)=>({switch:n.css`
      width: 32px;
      height: 16px;
      position: relative;

      input {
        opacity: 0;
        left: -100vw;
        z-index: -1000;
        position: absolute;

        &:disabled + label {
          background: ${e.colors.action.disabledBackground};
          cursor: not-allowed;
        }

        &:checked + label {
          background: ${e.colors.primary.main};
          border-color: ${e.colors.primary.main};

          &:hover {
            background: ${e.colors.primary.shade};
          }

          &::after {
            transform: translate3d(18px, -50%, 0);
            background: ${e.colors.primary.contrastText};
          }
        }

        &:focus + label,
        &:focus-visible + label {
          ${(0,l.getFocusStyles)(e)}
        }

        &:focus:not(:focus-visible) + label {
          ${(0,l.getMouseFocusStyles)(e)}
        }
      }

      label {
        width: 100%;
        height: 100%;
        cursor: pointer;
        border: none;
        border-radius: 50px;
        background: ${e.components.input.background};
        border: 1px solid ${e.components.input.borderColor};
        transition: all 0.3s ease;

        &:hover {
          border-color: ${e.components.input.borderHover};
        }

        &::after {
          position: absolute;
          display: block;
          content: '';
          width: 12px;
          height: 12px;
          border-radius: 6px;
          background: ${e.colors.text.secondary};
          box-shadow: ${e.shadows.z1};
          top: 50%;
          transform: translate3d(2px, -50%, 0);
          transition: transform 0.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
      }
    `,inlineContainer:n.css`
      padding: ${e.spacing(0,1)};
      height: ${e.spacing(e.components.height.md)};
      display: inline-flex;
      align-items: center;
      background: ${t?"transparent":e.components.input.background};
      border: 1px solid ${t?"transparent":e.components.input.borderColor};
      border-radius: ${e.shape.borderRadius()};

      &:hover {
        border: 1px solid ${t?"transparent":e.components.input.borderHover};

        .inline-switch-label {
          color: ${e.colors.text.primary};
        }
      }
    `,inlineLabel:n.css`
      cursor: pointer;
      padding-right: ${e.spacing(1)};
      color: ${e.colors.text.secondary};
      white-space: nowrap;
    `,inlineLabelEnabled:n.css`
      color: ${e.colors.text.primary};
    `})))},"./packages/grafana-ui/src/components/Table/types.ts":(e,t,a)=>{"use strict";a.d(t,{h2:()=>s.h2,PT:()=>n,tE:()=>r});var s=a("./packages/grafana-schema/src/index.ts");const n="=",r="!="},"./packages/grafana-ui/src/components/Tabs/Counter.tsx":(e,t,a)=>{"use strict";a.d(t,{A:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/themes/index.ts"),r=a("./packages/grafana-data/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=(0,n.Bb)((e=>({counter:s.css`
      label: counter;
      margin-left: ${e.spacing(1)};
      border-radius: ${e.spacing(3)};
      background-color: ${e.colors.action.hover};
      padding: ${e.spacing(.25,1)};
      color: ${e.colors.text.secondary};
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.size.sm};
    `}))),l=e=>{let{value:t}=e;const a=(0,n.wW)(o);return(0,i.jsx)("span",{className:a.counter,children:(0,r.locale)(t,0).text})}},"./packages/grafana-ui/src/components/Tabs/Tab.tsx":(e,t,a)=>{"use strict";a.d(t,{O:()=>p});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-e2e-selectors/src/index.ts"),i=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),o=a("./packages/grafana-ui/src/themes/index.ts"),l=a("./packages/grafana-ui/src/components/Tabs/Counter.tsx"),c=a("./packages/grafana-ui/src/themes/mixins.ts"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u=["label","active","icon","onChangeTab","counter","suffix","className","href"];const p=s.forwardRef(((e,t)=>{var a,s;let{label:c,active:p,icon:m,onChangeTab:g,counter:f,suffix:b,href:v}=e,x=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,u);const y=(0,o.l4)(),w=h(y),j=(0,n.cx)(w.link,p?w.activeStyle:w.notActive);return(0,d.jsx)("li",{className:w.item,children:(0,d.jsx)("a",Object.assign({href:v,className:j},x,{onClick:g,"aria-label":x["aria-label"]||r.wl.components.Tab.title(c),ref:t,children:(0,d.jsxs)(d.Fragment,{children:[m&&(a||(a=(0,d.jsx)(i.J,{name:m}))),c,"number"==typeof f&&(s||(s=(0,d.jsx)(l.A,{value:f}))),b&&(0,d.jsx)(b,{className:w.suffix})]})}))})}));p.displayName="Tab";const h=(0,o.Bb)((e=>({item:n.css`
      list-style: none;
      position: relative;
      display: flex;
    `,link:n.css`
      color: ${e.colors.text.secondary};
      padding: ${e.spacing(1.5,2,1)};
      display: block;
      height: 100%;
      svg {
        margin-right: ${e.spacing(1)};
      }

      &:focus-visible {
+        ${(0,c.getFocusStyles)(e)}
      }
    `,notActive:n.css`
      a:hover,
      &:hover,
      &:focus {
        color: ${e.colors.text.primary};

        &::before {
          display: block;
          content: ' ';
          position: absolute;
          left: 0;
          right: 0;
          height: 4px;
          border-radius: 2px;
          bottom: 0px;
          background: ${e.colors.action.hover};
        }
      }
    `,activeStyle:n.css`
      label: activeTabStyle;
      color: ${e.colors.text.primary};
      overflow: hidden;
      font-weight: ${e.typography.fontWeightMedium};

      a {
        color: ${e.colors.text.primary};
      }

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 4px;
        border-radius: 2px;
        bottom: 0px;
        background-image: ${e.colors.gradients.brandHorizontal} !important;
      }
    `,suffix:n.css`
      margin-left: ${e.spacing(1)};
    `})))},"./packages/grafana-ui/src/components/Tooltip/Popover.tsx":(e,t,a)=>{"use strict";a.d(t,{J:()=>u});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/react-popper-virtual-0f6b5e2cc8/3/opt/drone/yarncache/react-popper-npm-2.2.5-6e86e4bf1e-915fcf08e1.zip/node_modules/react-popper/lib/esm/Manager.js"),r=a("./.yarn/__virtual__/react-popper-virtual-0f6b5e2cc8/3/opt/drone/yarncache/react-popper-npm-2.2.5-6e86e4bf1e-915fcf08e1.zip/node_modules/react-popper/lib/esm/Popper.js"),i=a("./packages/grafana-ui/src/components/Portal/Portal.tsx"),o=a("./.yarn/__virtual__/react-transition-group-virtual-8df824fae8/3/opt/drone/yarncache/react-transition-group-npm-4.4.2-5052c30656-b67bf5b3e8.zip/node_modules/react-transition-group/esm/Transition.js"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},d={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class u extends s.PureComponent{render(){const{content:e,show:t,placement:a,onMouseEnter:u,onMouseLeave:p,className:h,wrapperClassName:m,renderArrow:g,referenceElement:f,onKeyDown:b}=this.props;return(0,l.jsx)(n.dK,{children:(0,l.jsx)(o.ZP,{in:t,timeout:100,mountOnEnter:!0,unmountOnExit:!0,children:t=>(0,l.jsx)(i.h,{children:(0,l.jsx)(r.r,{placement:a,referenceElement:f,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}],children:a=>{let{ref:n,style:r,placement:i,arrowProps:o,update:f}=a;return(0,l.jsx)("div",{onMouseEnter:u,onMouseLeave:p,onKeyDown:b,ref:n,style:Object.assign({},r,c,d[t]),"data-placement":i,className:`${m}`,children:(0,l.jsxs)("div",{className:h,children:["string"==typeof e&&e,s.isValidElement(e)&&s.cloneElement(e),"function"==typeof e&&e({updatePopperPosition:f}),g&&g({arrowProps:o,placement:i})]})})}})})})})}}},"./packages/grafana-ui/src/components/Tooltip/PopoverController.tsx":(e,t,a)=>{"use strict";a.d(t,{D:()=>r});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r extends s.Component{constructor(){super(...arguments),n(this,"hideTimeout",void 0),n(this,"state",{show:!1}),n(this,"showPopper",(()=>{clearTimeout(this.hideTimeout),this.setState({show:!0})})),n(this,"hidePopper",(()=>{this.hideTimeout=setTimeout((()=>{this.setState({show:!1})}),this.props.hideAfter)}))}render(){const{children:e,content:t,placement:a="auto"}=this.props,{show:s}=this.state;return e(this.showPopper,this.hidePopper,{show:s,placement:a,content:t})}}},"./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx":(e,t,a)=>{"use strict";a.d(t,{u:()=>c});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/components/Tooltip/Popover.tsx"),r=a("./packages/grafana-ui/src/components/Tooltip/PopoverController.tsx"),i=a("./packages/grafana-ui/src/utils/closePopover.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=["children","theme"];const c=s.memo((e=>{let{children:t,theme:a}=e,c=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,l);const d=(0,s.createRef)(),u="popper__background"+(a?" popper__background--"+a:"");return(0,o.jsx)(r.D,Object.assign({},c,{children:(e,a,r)=>{const l=Object.assign({},r,{show:void 0!==c.show?c.show:r.show});return(0,o.jsxs)(o.Fragment,{children:[d.current&&c.content&&(0,o.jsx)(n.J,Object.assign({},l,{onMouseEnter:e,onMouseLeave:a,referenceElement:d.current,wrapperClassName:"popper",className:u,renderArrow:e=>{let{arrowProps:t,placement:a}=e;return(0,o.jsx)("div",Object.assign({className:"popper__arrow","data-placement":a},t))}})),s.cloneElement(t,{ref:d,onMouseEnter:e,onMouseLeave:a,onKeyDown:e=>(0,i.i)(e,a),onFocus:e,onBlur:a})]})}}))}));c.displayName="Tooltip"},"./packages/grafana-ui/src/components/Typeahead/PartialHighlighter.tsx":(e,t,a)=>{"use strict";a.d(t,{H:()=>r});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const r=e=>{let{highlightParts:t,text:a,highlightClassName:r}=e;if(null==t||!t.length)return null;let i=[],o=function(e,t){const a=[];return e.forEach((e=>{a.push(e.start,e.end+1)})),0!==a[0]&&a.unshift(0),a[a.length-1]!==t&&a.push(t),a}(t,a.length),l=0===t[0].start;for(let e=1;e<o.length;e++){let t=o[e-1],n=o[e];i.push((0,s.createElement)(l?"mark":"span",{key:e-1,className:l?r:void 0},a.substring(t,n))),l=!l}return(0,n.jsx)("div",{children:i})}},"./packages/grafana-ui/src/components/UnitPicker/UnitPicker.tsx":(e,t,a)=>{"use strict";a.d(t,{n:()=>l});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/components/Cascader/Cascader.tsx"),r=a("./packages/grafana-data/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function o(e){return`Custom unit: ${e}`}class l extends s.PureComponent{constructor(){var e,t,a;super(...arguments),a=e=>{this.props.onChange(e.value)},(t="onChange")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}render(){const{value:e,width:t}=this.props;let a;const s=(0,r.getValueFormats)().map((t=>{const s=t.submenu.map((t=>{const s={label:t.text,value:t.value};return t.value===e&&(a=s),s}));return{label:t.text,value:t.text,items:s}}));return e&&!a&&(a={value:e,label:e}),(0,i.jsx)(n.v,{width:t,initialValue:a&&a.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:o,options:s,placeholder:"Choose",onSelect:this.props.onChange})}}},"./packages/grafana-ui/src/components/VizLayout/VizLayout.tsx":(e,t,a)=>{"use strict";a.d(t,{AY:()=>c});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useMeasure.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx"),i=a("./packages/grafana-ui/src/themes/mixins.ts"),o=a("./packages/grafana-ui/src/themes/ThemeContext.tsx"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=e=>{var t,a;let{width:n,height:i,legend:c,children:u}=e;const p=(0,o.wW)(d),h={display:"flex",width:`${n}px`,height:`${i}px`},[m,g]=(0,s.Z)();if(!c)return(0,l.jsx)("div",{tabIndex:0,style:h,className:p.viz,children:u(n,i)});const{placement:f,maxHeight:b="35%",maxWidth:v="60%"}=c.props;let x=null;const y={};switch(f){case"bottom":h.flexDirection="column",y.maxHeight=b,g&&(x={width:n,height:i-g.height});break;case"right":h.flexDirection="row",y.maxWidth=v,g&&(x={width:n-g.width,height:i})}return 0===(null===(t=x)||void 0===t?void 0:t.width)&&(x.width=n),0===(null===(a=x)||void 0===a?void 0:a.height)&&(x.height=i),(0,l.jsxs)("div",{style:h,children:[(0,l.jsx)("div",{tabIndex:0,className:p.viz,children:x&&u(x.width,x.height)}),(0,l.jsx)("div",{style:y,ref:m,children:(0,l.jsx)(r.$,{hideHorizontalTrack:!0,children:c})})]})},d=e=>({viz:(0,n.css)({flexGrow:2,borderRadius:e.shape.borderRadius(1),"&:focus-visible":(0,i.getFocusStyles)(e)})});c.Legend=e=>{let{children:t}=e;return(0,l.jsx)(l.Fragment,{children:t})}},"./packages/grafana-ui/src/components/VizLegend/SeriesIcon.tsx":(e,t,a)=>{"use strict";a.d(t,{F:()=>l});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/themes/index.ts"),r=a("./packages/grafana-data/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=["color","className","gradient"];const l=s.forwardRef(((e,t)=>{let{color:a,className:s,gradient:l}=e,c=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,o);const d=(0,n.l4)();let u;if(l){var p,h;const e=null===(p=(h=r.fieldColorModeRegistry.get(l)).getColors)||void 0===p?void 0:p.call(h,d);u=null!=e&&e.length?`linear-gradient(90deg, ${e.join(", ")})`:d.visualization.getColorByName("")}else u=a;const m={background:u,width:"14px",height:"4px",borderRadius:"1px",display:"inline-block",marginRight:"8px"};return(0,i.jsx)("div",Object.assign({ref:t,className:s,style:m},c))}));l.displayName="SeriesIcon"},"./packages/grafana-ui/src/components/VizTooltip/index.tsx":(e,t,a)=>{"use strict";a.d(t,{cS:()=>x,Vb:()=>s.SeriesTableProps,Vt:()=>v,h:()=>s.SeriesTableRowProps,I5:()=>m,S$:()=>p});var s={};a.r(s),a.d(s,{c:()=>x,V:()=>v});var n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./packages/grafana-ui/src/components/Portal/Portal.tsx"),o=a("./packages/grafana-ui/src/themes/index.ts"),l=a("./packages/grafana-ui/src/themes/mixins.ts"),c=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useWindowSize.js");var d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u=["position","offset","children","allowPointerEvents","className"];const p=e=>{let{position:{x:t,y:a},offset:{x:s,y:i},children:l,allowPointerEvents:p=!1,className:m}=e,g=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,u);const f=(0,n.useRef)(null),[b,v]=(0,n.useState)({width:0,height:0}),{width:x,height:y}=(0,c.Z)(),[w,j]=(0,n.useState)({x:t+s,y:a+i}),C=(0,n.useMemo)((()=>new ResizeObserver((e=>{for(let t of e){const e=Math.floor(t.contentRect.width+16),a=Math.floor(t.contentRect.height+16);b.width===e&&b.height===a||v({width:Math.min(e,x),height:Math.min(a,y)})}}))),[b,x,y]);(0,n.useLayoutEffect)((()=>(f.current&&C.observe(f.current),()=>{C.disconnect()})),[C]),(0,n.useLayoutEffect)((()=>{if(f&&f.current){const{x:e,y:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=e,c=t;const d=Math.max(e+n+a-(i-n),0),u=Math.abs(Math.min(e-n-a-n,0)),p=d>0,h=u>0,m=Math.max(t+r+s-(o-r),0),g=Math.abs(Math.min(t-r-s-r,0)),f=m>0,b=g>0;return l=p&&h?d>u?n:i-n-a:p?e-n-a:e+n,c=f&&b?m>g?r:o-r-s:f?t-r-s:t+r,{x:l,y:c}}(t,a,b.width,b.height,s,i,x,y);j({x:e,y:n})}}),[x,y,t,s,a,i,b]);const k=(0,o.wW)(h);return(0,d.jsx)("div",Object.assign({ref:f,style:{position:"fixed",left:0,pointerEvents:p?"auto":"none",top:0,transform:`translate(${w.x}px, ${w.y}px)`,transition:"transform ease-out 0.1s"}},g,{className:(0,r.cx)(k.wrapper,m),children:l}))};p.displayName="VizTooltipContainer";const h=e=>({wrapper:r.css`
    ${(0,l.getTooltipContainerStyles)(e)}
  `}),m=e=>{let{content:t,position:a,offset:s}=e;const n=(0,o.yK)(g);return a?(0,d.jsx)(i.h,{className:n.portal,children:(0,d.jsx)(p,{position:a,offset:s||{x:0,y:0},children:t})}):null};m.displayName="VizTooltip";const g=()=>({portal:r.css`
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
    `});var f=a("./packages/grafana-ui/src/components/VizLegend/SeriesIcon.tsx");const b=e=>({icon:r.css`
      margin-right: ${e.spacing(1)};
      vertical-align: middle;
    `,seriesTable:r.css`
      display: table;
    `,seriesTableRow:r.css`
      display: table-row;
      font-size: ${e.typography.bodySmall.fontSize};
    `,seriesTableCell:r.css`
      display: table-cell;
    `,label:r.css`
      word-break: break-all;
    `,value:r.css`
      padding-left: ${e.spacing(2)};
    `,activeSeries:r.css`
      font-weight: ${e.typography.fontWeightBold};
      color: ${e.colors.text.maxContrast};
    `,timestamp:r.css`
      font-weight: ${e.typography.fontWeightBold};
      font-size: ${e.typography.bodySmall.fontSize};
    `}),v=e=>{let{color:t,label:a,value:s,isActive:n}=e;const i=(0,o.wW)(b);return(0,d.jsxs)("div",{className:(0,r.cx)(i.seriesTableRow,n&&i.activeSeries),children:[t&&(0,d.jsx)("div",{className:i.seriesTableCell,children:(0,d.jsx)(f.F,{color:t,className:i.icon})}),a&&(0,d.jsx)("div",{className:(0,r.cx)(i.seriesTableCell,i.label),children:a}),s&&(0,d.jsx)("div",{className:(0,r.cx)(i.seriesTableCell,i.value),children:s})]})},x=e=>{let{timestamp:t,series:a}=e;const s=(0,o.wW)(b);return(0,d.jsxs)(d.Fragment,{children:[t&&(0,d.jsx)("div",{className:s.timestamp,"aria-label":"Timestamp",children:t}),a.map(((e,t)=>(0,d.jsx)(v,{isActive:e.isActive,label:e.label,color:e.color,value:e.value},`${e.label}-${t}`)))]})}},"./packages/grafana-ui/src/components/index.ts":(e,t,a)=>{"use strict";a.d(t,{bZj:()=>Yi.b,Uxq:()=>Yi.AlertVariant,O5T:()=>xc,M8I:()=>Bt.M8,qbS:()=>Bt.qb,Cts:()=>cl,JVe:()=>j.BadgeColor,u8S:()=>j.BadgeProps,xfx:()=>yn,QHm:()=>xn,w6I:()=>Kr.w6,pcF:()=>Kr.pc,IGx:()=>Kr.IG,apN:()=>Kr.ap,jGm:()=>Kr.jG,dI4:()=>lh,zxk:()=>$.zx,OSz:()=>ie,hE2:()=>$.hE,sBP:()=>$.ButtonProps,doH:()=>Ve,Wu3:()=>$.ButtonVariant,_d:()=>el,Zbd:()=>Wu,_L7:()=>Vu,jUt:()=>O.CardContainerProps,dwY:()=>_.Props,vTp:()=>te.v,iNw:()=>te.CascaderOption,WTJ:()=>Gl,XZJ:()=>Md,LVf:()=>we.L,mUV:()=>X,pq4:()=>Ls,EGH:()=>p.MonacoOptions,L0D:()=>p.CodeEditorSuggestionItem,kwZ:()=>Ps,s2J:()=>so,UO1:()=>ao,zH8:()=>pe.zH,Bw9:()=>he.B,kp4:()=>he.ColorValueEditorProps,puI:()=>z,sm4:()=>xs,feC:()=>u.ConfirmModalProps,W20:()=>di.W2,xVl:()=>In,CMg:()=>h.ContextMenuProps,ybu:()=>to,ATJ:()=>Qr.A,$TT:()=>G.$,kuP:()=>ko,vmb:()=>nl.v,V5N:()=>Dn,dIl:()=>sl.d,E1E:()=>bc,Mtg:()=>Va,kse:()=>l.DatePickerProps,d2U:()=>qa,Qiu:()=>c.DatePickerWithInputProps,xZq:()=>Ya,m1X:()=>B,dys:()=>zc,msj:()=>Kd.m,isR:()=>T.DropzoneFile,jye:()=>Hp,KBh:()=>ge,SVk:()=>wl,z4Q:()=>jl,M_3:()=>C.ErrorBoundaryAlertProps,X2N:()=>vl,TZ:()=>Cp,jKV:()=>Pp.j,nTT:()=>yc.n,aXU:()=>ml,ZjK:()=>pl,gNt:()=>Ye.g,F26:()=>qd,Zjt:()=>Bo,C3N:()=>Ed,S0X:()=>El.S,YoT:()=>uu,A_i:()=>pu,G1O:()=>T.FileDropzoneProps,K$w:()=>lu,wEv:()=>S.FileListItemProps,p0f:()=>su,HSx:()=>eu,BmQ:()=>fs,l09:()=>od,YE$:()=>k.FormInputSize,WRj:()=>fn.W,fiX:()=>Ho,aCY:()=>ei,kJb:()=>bi,wvn:()=>hi,bpR:()=>mi,drZ:()=>Pp.d,aSI:()=>I.GraphNGLegendEvent,E2j:()=>Pp.GraphNGProps,UNL:()=>Ji,pK4:()=>y.GraphSeriesTogglerAPI,UAG:()=>Wi,LhK:()=>di.Lh,JO$:()=>P.J,hU:()=>M.h,gZk:()=>M.IconButtonVariant,vDh:()=>il,_9$:()=>Vl,Z6t:()=>Hl,cJ0:()=>Sl,W4p:()=>$l,mOU:()=>Bd,x$6:()=>tu.x,IIB:()=>Je.I,gs_:()=>ld,gwK:()=>Jn,uC:()=>Kn,Cmj:()=>Np,__J:()=>Od._,vw6:()=>dh,Gdq:()=>sc.G,DeQ:()=>Id,rUS:()=>Ld,Qjf:()=>$.Qj,aVo:()=>ts.a,u3Z:()=>de,c02:()=>n.LoadingPlaceholderProps,jwW:()=>oo,QNy:()=>lo.Q,w3v:()=>zo,JxD:()=>wp,v2r:()=>Oe,kSQ:()=>Fn,VO7:()=>m.MenuGroupProps,sNh:()=>Fe,T4d:()=>i.MenuItemProps,oOs:()=>m.MenuItemsGroup,ZyH:()=>r.MenuProps,u_l:()=>vs.u,xBx:()=>zs.x,Y0X:()=>Qs,QEF:()=>qs,Han:()=>Hs,JYt:()=>Ks,$iA:()=>Zs,d$d:()=>p.Monaco,rEm:()=>p.MonacoEditor,NUq:()=>Bt.NU,Ytm:()=>ad,wYs:()=>Yc,k8K:()=>d.OnTagClick,XDu:()=>Ys,tlE:()=>cs,fmR:()=>Ni,qbG:()=>yi,QEv:()=>f.ErrorIndicatorProps,E3Q:()=>xi.T,oP_:()=>xi.LoadingIndicatorProps,vIs:()=>b.PanelChromeProps,swS:()=>v.PanelChromeType,QPw:()=>Oi.PanelContext,_wC:()=>Oi._w,bbH:()=>Oi.bb,jX4:()=>b.PanelPadding,lNn:()=>xp,isz:()=>Ip.PlotSelection,xyZ:()=>Ip.PlotTooltipInterpolator,oDb:()=>cp,bvM:()=>N.PluginSignatureBadgeProps,J2e:()=>q.J,yky:()=>U.PopoverContent,Dh5:()=>H.D,h_i:()=>W.h,qjJ:()=>Os,SYO:()=>Jd.S,U2U:()=>qc,VR_:()=>Is,dPd:()=>qe,xpf:()=>Fu,wf3:()=>ai.wf,fqL:()=>G.ScrollbarPosition,XX7:()=>kc,VXm:()=>Nc,Xrl:()=>Fc,fT$:()=>Dc,VBk:()=>Tc,PhF:()=>Bt.Ph,eI2:()=>Bt.eI,E0:()=>Bt.E0,Y3l:()=>ed,spA:()=>pe.sp,jx7:()=>me.jx,qRd:()=>me.qR,FiV:()=>ui.F,cS8:()=>si.cS,VbF:()=>si.Vb,VtB:()=>si.Vt,ha2:()=>si.h,YvT:()=>vi,R8q:()=>_i,FOj:()=>on,U_X:()=>w.SingleStatBaseOptions,R9v:()=>wc.R,iRW:()=>Hc,pn$:()=>Jc,$jN:()=>le.$,mMX:()=>ve.m,gQx:()=>Qc,Ai9:()=>Wc,rsf:()=>tu.r,sHf:()=>Ql,OK9:()=>Us.O,DJl:()=>s.TabConfig,I5H:()=>Zr,WLI:()=>K,iA_:()=>Lr,h2q:()=>un.h2,wtM:()=>Hr,JAu:()=>un.TableSortByFieldState,J_V:()=>Bs,Vp9:()=>ps,PST:()=>ms,B7H:()=>rs,Kx8:()=>Er,yAm:()=>Aa,K4x:()=>xu,XcI:()=>_a,WKf:()=>o.TimeRangePickerProps,pfI:()=>Ep,OkK:()=>Yt,hAV:()=>$.hA,RNy:()=>$.RN,ua7:()=>U.u,iiT:()=>Tp.i,gDA:()=>gp.gD,N$r:()=>fp.N,UBi:()=>mp.U,ffP:()=>mp.UPlotConfigPrepFn,nAu:()=>be.n,b59:()=>cd,wcK:()=>di.wc,AYi:()=>Ki.AY,C9i:()=>Ki.VizLayoutComponentType,Lxb:()=>Ki.VizLayoutLegendProps,wIc:()=>Ki.VizLayoutProps,ltB:()=>Hi,Jn8:()=>g.VizLegendItem,eMh:()=>zi,QBm:()=>Zi,M9j:()=>x.VizRepeaterRenderValueProps,I5C:()=>si.I5,S$u:()=>si.S$,zDr:()=>Ra,zH1:()=>Pn,K2:()=>yp,Rbc:()=>Sp,z12:()=>Mp.z,PRL:()=>Xo,o5O:()=>He,ivH:()=>Td,LyM:()=>op,SYZ:()=>Ad,HxM:()=>Je.H,hIY:()=>co.h,D1k:()=>Yd.D,qVi:()=>hp,sVu:()=>ii,mcr:()=>oi,NFT:()=>p.monacoTypes,RnT:()=>Mp.R,JpF:()=>Wd.Z,FMl:()=>Zd,RKV:()=>Fa.RK,rDf:()=>Yo,ZHc:()=>Ko,zrC:()=>Vp,R9P:()=>Oi.R9,ThK:()=>Es,PfY:()=>Cl});var s={};a.r(s),a.d(s,{W:()=>K});var n={};a.r(n),a.d(n,{u:()=>de});var r={};a.r(r),a.d(r,{v:()=>Oe});var i={};a.r(i),a.d(i,{s:()=>Fe});var o={};a.r(o),a.d(o,{sU:()=>Ta,Xc:()=>_a});var l={};a.r(l),a.d(l,{M:()=>Va});var c={};a.r(c),a.d(c,{d:()=>qa});var d={};a.r(d),a.d(d,{V:()=>ps});var u={};a.r(u),a.d(u,{s:()=>xs});var p={};a.r(p),a.d(p,{k:()=>Ps});var h={};a.r(h),a.d(h,{x:()=>In});var m={};a.r(m),a.d(m,{k:()=>Fn});var g={};a.r(g),a.d(g,{Y:()=>vi});var f={};a.r(f),a.d(f,{g:()=>yi});var b={};a.r(b),a.d(b,{f:()=>ji});var v={};a.r(v),a.d(v,{fm:()=>Ni,qb:()=>yi,QE:()=>f.ErrorIndicatorProps,E3:()=>xi.T,oP:()=>xi.LoadingIndicatorProps,vI:()=>b.PanelChromeProps,QP:()=>Oi.PanelContext,_w:()=>Oi._w,bb:()=>Oi.bb,jX:()=>b.PanelPadding,R8:()=>_i,R9:()=>Oi.R9});var x={};a.r(x),a.d(x,{Q:()=>Zi});var y={};a.r(y),a.d(y,{U:()=>Ji});var w={};a.r(w),a.d(w,{PR:()=>Xo,rD:()=>Yo,ZH:()=>Ko});var j={};a.r(j),a.d(j,{C:()=>cl});var C={};a.r(C),a.d(C,{SV:()=>wl,z4:()=>jl,Pf:()=>Cl});var k={};a.r(k);var S={};a.r(S),a.d(S,{K:()=>lu});var T={};a.r(T),a.d(T,{Y:()=>uu,A:()=>pu});var O={};a.r(O),a.d(O,{_:()=>Vu,$:()=>Bu});var _={};a.r(_),a.d(_,{Z:()=>Wu,L:()=>op});var N={};a.r(N),a.d(N,{o:()=>cp});var I={};a.r(I);var P=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),M=a("./packages/grafana-ui/src/components/IconButton/IconButton.tsx"),F=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),A=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),D=a("./packages/grafana-ui/src/themes/index.ts"),$=a("./packages/grafana-ui/src/components/Button/index.ts"),L=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class E extends F.PureComponent{constructor(){super(...arguments),R(this,"mainButtonRef",F.createRef()),R(this,"confirmButtonRef",F.createRef()),R(this,"state",{showConfirm:!1}),R(this,"onClickButton",(e=>{e&&e.preventDefault(),this.setState({showConfirm:!0},(()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()})),this.props.onClick&&this.props.onClick()})),R(this,"onClickCancel",(e=>{e&&e.preventDefault(),this.setState({showConfirm:!1},(()=>{var e;null===(e=this.mainButtonRef.current)||void 0===e||e.focus()})),this.props.onCancel&&this.props.onCancel()})),R(this,"onConfirm",(e=>{e&&e.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}))}render(){const{theme:e,className:t,size:a,disabled:s,confirmText:n,confirmVariant:r,children:i}=this.props,o=V(e),l=(0,A.cx)(t,this.state.showConfirm?o.buttonHide:o.buttonShow,s&&o.buttonDisabled),c=(0,A.cx)(o.confirmButton,this.state.showConfirm?o.confirmButtonShow:o.confirmButtonHide),d=s?()=>{}:this.onClickButton;return(0,L.jsxs)("span",{className:o.buttonContainer,children:["string"==typeof i?(0,L.jsx)("span",{className:l,children:(0,L.jsx)($.zx,{size:a,fill:"text",onClick:d,ref:this.mainButtonRef,children:i})}):(0,L.jsx)("span",{className:l,onClick:d,children:i}),(0,L.jsxs)("span",{className:c,children:[(0,L.jsx)($.zx,{size:a,variant:r,onClick:this.onConfirm,ref:this.confirmButtonRef,children:n}),(0,L.jsx)($.zx,{size:a,fill:"text",onClick:this.onClickCancel,children:"Cancel"})]})]})}}const z=(0,D.Zz)(E),V=(0,D.Bb)((e=>({buttonContainer:A.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
    `,buttonDisabled:A.css`
      text-decoration: none;
      color: ${e.colors.text};
      opacity: 0.65;
      cursor: not-allowed;
      pointer-events: none;
    `,buttonShow:A.css`
      opacity: 1;
      transition: opacity 0.1s ease;
      z-index: 2;
    `,buttonHide:A.css`
      opacity: 0;
      transition: opacity 0.1s ease, visibility 0 0.1s;
      visibility: hidden;
      z-index: 0;
    `,confirmButton:A.css`
      align-items: flex-start;
      background: ${e.colors.bg1};
      display: flex;
      position: absolute;
      pointer-events: none;
    `,confirmButtonShow:A.css`
      z-index: 1;
      opacity: 1;
      transition: opacity 0.08s ease-out, transform 0.1s ease-out;
      transform: translateX(0);
      pointer-events: all;
    `,confirmButtonHide:A.css`
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s;
      transform: translateX(100px);
    `})));z.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},z.displayName="ConfirmButton";const B=e=>{let{size:t,disabled:a,onConfirm:s,"aria-label":n}=e;return(0,L.jsx)(z,{confirmText:"Delete",confirmVariant:"destructive",size:t||"md",disabled:a,onConfirm:s,children:(0,L.jsx)($.zx,{"aria-label":n,variant:"destructive",icon:"times",size:t||"sm"})})};var U=a("./packages/grafana-ui/src/components/Tooltip/Tooltip.tsx"),H=a("./packages/grafana-ui/src/components/Tooltip/PopoverController.tsx"),q=a("./packages/grafana-ui/src/components/Tooltip/Popover.tsx"),W=a("./packages/grafana-ui/src/components/Portal/Portal.tsx"),G=a("./packages/grafana-ui/src/components/CustomScrollbar/CustomScrollbar.tsx"),Z=a("./packages/grafana-ui/src/index.ts");const Q=(0,D.Bb)((e=>({container:A.css`
      height: 100%;
    `,tabContent:A.css`
      padding: ${e.spacing(2)};
      background-color: ${e.colors.background.primary};
      height: 100%;
    `,close:A.css`
      position: absolute;
      right: 16px;
      top: 5px;
      cursor: pointer;
      font-size: ${e.typography.size.lg};
    `,tabs:A.css`
      padding-top: ${e.spacing(1)};
      border-color: ${e.colors.border.weak};
      ul {
        margin-left: ${e.spacing(2)};
      }
    `})));function K(e){var t,a;const[s,n]=(0,F.useState)(e.tabs.some((t=>t.value===e.defaultTab))?e.defaultTab:null===(t=e.tabs)||void 0===t?void 0:t[0].value),{tabs:r,onClose:i,closeIconTooltip:o}=e,l=(0,D.l4)(),c=Q(l);return(0,L.jsxs)("div",{className:c.container,children:[(0,L.jsxs)(Z.TabsBar,{className:c.tabs,children:[r.map((e=>(0,L.jsx)(Z.Tab,{label:e.label,active:e.value===s,onChangeTab:()=>{n(e.value)},icon:e.icon},e.value))),(0,L.jsx)(Z.IconButton,{className:c.close,onClick:i,name:"times",title:null!=o?o:"Close"})]}),(0,L.jsx)(Z.CustomScrollbar,{autoHeightMin:"100%",children:(0,L.jsx)(Z.TabContent,{className:c.tabContent,children:null===(a=r.find((e=>e.value===s)))||void 0===a?void 0:a.content})})]})}const Y=["onClipboardCopy","onClipboardError","children","getText"];const J=()=>{};function X(e){let{onClipboardCopy:t,onClipboardError:a,children:s,getText:n}=e,r=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Y);const i=(0,F.useRef)(null),o=(0,F.useCallback)((async()=>{const e=n(),s={action:"copy",clearSelection:J,text:e,trigger:i.current};try{await ee(e,i),null==t||t(s)}catch{null==a||a(s)}}),[n,t,a]);return(0,L.jsx)($.zx,Object.assign({onClick:o},r,{ref:i,children:s}))}const ee=async(e,t)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);{var a;const s=document.createElement("input");null===(a=t.current)||void 0===a||a.appendChild(s),s.value=e,s.focus(),s.select(),document.execCommand("copy"),s.remove()}};var te=a("./packages/grafana-ui/src/components/Cascader/Cascader.tsx"),ae=a("./.yarn/__virtual__/rc-cascader-virtual-ab2a58208b/3/opt/drone/yarncache/rc-cascader-npm-3.2.1-6292eb69ad-0f96d976ad.zip/node_modules/rc-cascader/es/index.js"),se=a("./packages/grafana-ui/src/components/Cascader/optionMappings.ts");const ne=["onChange","className","loadData","icon","buttonProps","hideDownIcon","variant","disabled"];const re=(0,D.Bb)((e=>({popup:A.css`
      label: popup;
      z-index: ${e.zIndex.dropdown};
    `,icons:{right:A.css`
        margin: 1px 0 0 4px;
      `,left:A.css`
        margin: -1px 4px 0 0;
      `}}))),ie=e=>{const{onChange:t,loadData:a,icon:s,buttonProps:n,hideDownIcon:r,variant:i,disabled:o}=e,l=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,ne),c=(0,D.l4)(),d=re(c);let u=e.children;return r||(u=[e.children,(0,L.jsx)(P.J,{name:"angle-down",className:d.icons.right},"down-icon")]),(0,L.jsx)(ae.Z,Object.assign({onChange:(0,se.K)(t),loadData:(0,se.p)(a),popupClassName:d.popup},l,{expandIcon:null,children:(0,L.jsx)($.zx,Object.assign({icon:s,disabled:o,variant:i},null!=n?n:{},{children:u}))}))};ie.displayName="ButtonCascader";var oe,le=a("./packages/grafana-ui/src/components/Spinner/Spinner.tsx");const ce=["text","className"];const de=e=>{let{text:t,className:a}=e,s=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,ce);const n=(0,D.yK)(ue);return(0,L.jsxs)("div",Object.assign({className:(0,A.cx)(n.container,a)},s,{children:[t," ",oe||(oe=(0,L.jsx)(le.$,{inline:!0}))]}))},ue=e=>({container:A.css`
      margin-bottom: ${e.spacing.xl};
    `});var pe=a("./packages/grafana-ui/src/components/ColorPicker/ColorPicker.tsx"),he=a("./packages/grafana-ui/src/components/OptionsUI/color.tsx"),me=a("./packages/grafana-ui/src/components/ColorPicker/SeriesColorPickerPopover.tsx");const ge=e=>{let{children:t}=e;const a=(0,D.wW)(fe);return(0,L.jsx)("div",{className:a.container,children:t})},fe=e=>({container:A.css`
      border-left: 3px solid ${e.colors.info.main};
      background-color: ${e.colors.background.secondary};
      padding: ${e.spacing(2)};
      min-width: 350px;
      border-radius: ${e.shape.borderRadius(2)};
      margin-bottom: ${e.spacing(4)};
    `});var be=a("./packages/grafana-ui/src/components/UnitPicker/UnitPicker.tsx"),ve=a("./packages/grafana-ui/src/components/StatsPicker/StatsPicker.tsx"),xe=a("../../opt/drone/yarncache/date-fns-npm-2.28.0-c19c5add1b-a0516b2e4f.zip/node_modules/date-fns/esm/formatDuration/index.js"),ye=a("./packages/grafana-data/src/index.ts"),we=a("./packages/grafana-ui/src/components/ClickOutsideWrapper/ClickOutsideWrapper.tsx"),je=a("./packages/grafana-ui/src/themes/ThemeContext.tsx"),Ce=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useEffectOnce.js");const ke=(e,t)=>(e%t+t)%t,Se=e=>{let{localRef:t,isMenuOpen:a,openedWithArrow:s,setOpenedWithArrow:n,close:r,onOpen:i,onClose:o,onKeyDown:l}=e;const[c,d]=(0,F.useState)(-1);(0,F.useEffect)((()=>{a&&s&&(d(0),null==n||n(!1))}),[a,s,n]),(0,F.useEffect)((()=>{var e,a;const s=null==t||null===(e=t.current)||void 0===e?void 0:e.querySelectorAll('[data-role="menuitem"]');null==s||null===(a=s[c])||void 0===a||a.focus(),null==s||s.forEach(((e,t)=>{e.tabIndex=t===c?0:-1}))}),[t,c]),(0,Ce.Z)((()=>{var e;const a=null==t||null===(e=t.current)||void 0===e?void 0:e.querySelector('[data-role="menuitem"]');a&&(a.tabIndex=0),null==i||i(d)}));return[e=>{var a,s,n;const i=null==t||null===(a=t.current)||void 0===a?void 0:a.querySelectorAll('[data-role="menuitem"]'),u=null!==(s=null==i?void 0:i.length)&&void 0!==s?s:0;switch(e.key){case"ArrowUp":e.preventDefault(),e.stopPropagation(),d(ke(c-1,u));break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),d(ke(c+1,u));break;case"ArrowLeft":e.preventDefault(),e.stopPropagation(),d(-1),null==r||r();break;case"Home":e.preventDefault(),e.stopPropagation(),d(0);break;case"End":e.preventDefault(),e.stopPropagation(),d(u-1);break;case"Enter":e.preventDefault(),e.stopPropagation(),null==i||null===(n=i[c])||void 0===n||n.click();break;case"Escape":e.preventDefault(),e.stopPropagation(),null==o||o();break;case"Tab":null==o||o()}null==l||l(e)},()=>{-1===c&&d(0)}]},Te=["header","children","ariaLabel","onOpen","onClose","onKeyDown"];const Oe=F.forwardRef(((e,t)=>{let{header:a,children:s,ariaLabel:n,onOpen:r,onClose:i,onKeyDown:o}=e,l=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Te);const c=(0,D.wW)(_e),d=(0,F.useRef)(null);(0,F.useImperativeHandle)(t,(()=>d.current));const[u,p]=Se({localRef:d,onOpen:r,onClose:i,onKeyDown:o});return(0,L.jsxs)("div",Object.assign({},l,{ref:d,className:c.wrapper,role:"menu","aria-label":n,onKeyDown:u,onFocus:p,children:[a&&(0,L.jsx)("div",{className:c.header,children:a}),s]}))}));Oe.displayName="Menu";const _e=e=>({header:A.css`
      padding: ${e.spacing(.5,.5,1,.5)};
      border-bottom: 1px solid ${e.colors.border.weak};
    `,wrapper:A.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      display: inline-block;
      border-radius: ${e.shape.borderRadius()};
    `});var Ne=a("./packages/grafana-e2e-selectors/src/index.ts");const Ie=F.memo((e=>{let{items:t,isOpen:a,openedWithArrow:s,setOpenedWithArrow:n,close:r}=e;const i=(0,D.wW)(Pe),o=(0,F.useRef)(null),[l]=Se({localRef:o,isMenuOpen:a,openedWithArrow:s,setOpenedWithArrow:n,close:r});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:i.iconWrapper,"aria-label":Ne.wl.components.Menu.SubMenu.icon,children:(0,L.jsx)(P.J,{name:"angle-right",className:i.icon,"aria-hidden":!0})}),a&&(0,L.jsx)("div",{ref:o,className:i.subMenu(o.current),"aria-label":Ne.wl.components.Menu.SubMenu.container,children:(0,L.jsx)("div",{className:i.itemsWrapper,role:"menu",onKeyDown:l,children:t})})]})}));Ie.displayName="SubMenu";const Pe=e=>({iconWrapper:A.css`
      display: flex;
      flex: 1;
      justify-content: end;
    `,icon:A.css`
      opacity: 0.7;
      margin-left: 10px;
      color: ${e.colors.text.secondary};
    `,itemsWrapper:A.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      display: inline-block;
      border-radius: ${e.shape.borderRadius()};
    `,subMenu:t=>A.css`
      position: absolute;
      top: 0;
      z-index: ${e.zIndex.dropdown};
      ${(e=>{if(!e)return"left";const t=e.parentElement.getBoundingClientRect(),a=e.getBoundingClientRect();return 0===a.width?"left":t.right+a.width+10>window.innerWidth?"right":"left"})(t)}: 100%;
    `});var Me=a("./packages/grafana-ui/src/themes/mixins.ts");const Fe=F.memo(F.forwardRef(((e,t)=>{const{url:a,icon:s,label:n,ariaLabel:r,ariaChecked:i,target:o,onClick:l,className:c,active:d,childItems:u,role:p="menuitem",tabIndex:h=-1}=e,m=(0,D.wW)(Ae),[g,f]=(0,F.useState)(d),[b,v]=(0,F.useState)(!1),[x,y]=(0,F.useState)(!1),w=(0,F.useCallback)((()=>{v(!0),f(!0)}),[]),j=(0,F.useCallback)((()=>{v(!1),f(!1)}),[]),C=(0,F.useMemo)((()=>u&&u.length>0),[u]),k=C?"div":void 0===a?"button":"a",S=(0,A.cx)({[m.item]:!0,[m.activeItem]:g},c),T=(0,F.useRef)(null);(0,F.useImperativeHandle)(t,(()=>T.current));return(0,L.jsxs)(k,{target:o,className:S,rel:"_blank"===o?"noopener noreferrer":void 0,href:a,onClick:l?e=>{e.ctrlKey||e.metaKey||e.shiftKey||!l||(e.preventDefault(),e.stopPropagation(),l(e))}:void 0,onMouseEnter:w,onMouseLeave:j,onKeyDown:e=>{if("ArrowRight"===e.key)e.preventDefault(),e.stopPropagation(),C&&(v(!0),y(!0),f(!0))},role:void 0===a?p:void 0,"data-role":"menuitem",ref:T,"aria-label":r,"aria-checked":i,tabIndex:h,children:[s&&(0,L.jsx)(P.J,{name:s,className:m.icon,"aria-hidden":!0}),n,C&&(0,L.jsx)(Ie,{items:u,isOpen:b,openedWithArrow:x,setOpenedWithArrow:y,close:()=>{var e;v(!1),f(!1),null==T||null===(e=T.current)||void 0===e||e.focus()}})]})})));Fe.displayName="MenuItem";const Ae=e=>({item:A.css`
      background: none;
      cursor: pointer;
      white-space: nowrap;
      color: ${e.colors.text.primary};
      display: flex;
      padding: 5px 12px 5px 10px;
      margin: 0;
      border: none;
      width: 100%;
      position: relative;

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${e.colors.action.hover};
        color: ${e.colors.text.primary};
        text-decoration: none;
      }

      &:focus-visible {
        ${(0,Me.getFocusStyles)(e)}
      }
    `,activeItem:A.css`
      background: ${e.colors.action.selected};
    `,icon:A.css`
      opacity: 0.7;
      margin-right: 10px;
      color: ${e.colors.text.secondary};
    `});var De=a("./.yarn/__virtual__/@react-aria-focus-virtual-d5af2f4276/3/opt/drone/yarncache/@react-aria-focus-npm-3.5.0-e819dae779-c03d4433bd.zip/node_modules/@react-aria/focus/dist/module.js"),$e=a("./.yarn/__virtual__/@react-stately-menu-virtual-620edadc79/3/opt/drone/yarncache/@react-stately-menu-npm-3.2.3-01bbc6859e-4950f40881.zip/node_modules/@react-stately/menu/dist/module.js"),Le=a("./.yarn/__virtual__/@react-aria-menu-virtual-ef252193f9/3/opt/drone/yarncache/@react-aria-menu-npm-3.3.0-483609e77b-f4ff3fd23f.zip/node_modules/@react-aria/menu/dist/module.js"),Re=a("./.yarn/__virtual__/@react-aria-button-virtual-45cb941004/3/opt/drone/yarncache/@react-aria-button-npm-3.3.4-1ae267b236-c67f2097bb.zip/node_modules/@react-aria/button/dist/module.js");const Ee=["className","options","value","onChange","narrow","variant"];const ze=e=>{const{className:t,options:a,value:s,onChange:n,narrow:r,variant:i}=e,o=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Ee),l=(0,je.wW)(Be),c=(0,$e.W)({}),d=F.useRef(null),{menuTriggerProps:u,menuProps:p}=(0,Le.u4)({},c,d),{buttonProps:h}=(0,Re.U)(u,d);return(0,L.jsxs)($.hE,{className:l.wrapper,children:[(0,L.jsx)($.hA,Object.assign({className:t,isOpen:c.isOpen,narrow:r,variant:i,ref:d},h,o,{children:(null==s?void 0:s.label)||(null==s?void 0:s.value)})),c.isOpen&&(0,L.jsx)("div",{className:l.menuWrapper,children:(0,L.jsx)(we.L,{onClick:c.close,parent:document,includeButtonPress:!1,children:(0,L.jsx)(De.MT,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,L.jsx)(Oe,Object.assign({tabIndex:-1,onClose:c.close},p,{children:a.map((e=>(0,L.jsx)(Fe,{label:e.label||e.value,onClick:()=>(e=>{n(e),c.close()})(e),active:e.value===(null==s?void 0:s.value),ariaChecked:e.value===(null==s?void 0:s.value),ariaLabel:e.ariaLabel||e.label,role:"menuitemradio"},`${e.value}`)))}))})})})]})};ze.displayName="ButtonSelect";const Ve=F.memo(ze),Be=e=>({wrapper:A.css`
      position: relative;
      display: inline-flex;
    `,menuWrapper:A.css`
      position: absolute;
      z-index: ${e.zIndex.dropdown};
      top: ${e.spacing(4)};
      right: 0;
    `});function Ue(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const He=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];class qe extends F.PureComponent{constructor(e){super(e),Ue(this,"onChangeSelect",(e=>{const{onIntervalChanged:t}=this.props;t&&t(e.value)}))}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":"default"}render(){const{onRefresh:e,intervals:t,tooltip:a,value:s,text:n,isLoading:r,noIntervalPicker:i,width:o}=this.props,l=s||"",c=this.getVariant(),d=function(){let{intervals:e=He}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(e||He).map((e=>{const t=(0,ye.parseDuration)(e);return{label:e,value:e,ariaLabel:(0,xe.Z)(t)}}));return t.unshift(qe.offOption),t}({intervals:t}),u=d.find((e=>{let{value:t}=e;return t===l}));let p=u||qe.offOption;return p.label===qe.offOption.label&&(p={value:""}),(0,L.jsxs)($.hE,{className:"refresh-picker",children:[(0,L.jsx)($.hA,{tooltip:a,onClick:e,variant:c,icon:r?"fa fa-spinner":"sync",style:o?{width:o}:void 0,"data-testid":Ne.wl.components.RefreshPicker.runButtonV2,children:n}),!i&&(0,L.jsx)(Ve,{value:p,options:d,onChange:this.onChangeSelect,variant:c,"data-testid":Ne.wl.components.RefreshPicker.intervalButtonV2,"aria-label":""===p.value?"Auto refresh turned off. Choose refresh time interval":`Choose refresh time interval with current interval ${p.ariaLabel} selected`})]})}}Ue(qe,"offOption",{label:"Off",value:"",ariaLabel:"Turn off auto refresh"}),Ue(qe,"liveOption",{label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"}),Ue(qe,"isLive",(e=>e===qe.liveOption.value));var We=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useMedia.js");const Ge=(e,t)=>ye.rangeUtil.convertRawToRange({from:e.from,to:e.to},t),Ze=(0,D.Bb)((e=>({text:A.css`
      font-size: ${e.typography.size.md};
      font-weight: ${e.typography.weight.semibold};
      color: ${e.colors.formLabel};
      margin: 0;
      display: flex;
    `}))),Qe=(0,F.memo)((e=>{let{children:t}=e;const a=(0,D.Fg)(),s=Ze(a);return(0,L.jsx)("h3",{className:s.text,children:t})}));Qe.displayName="TimePickerTitle";var Ke,Ye=a("./packages/grafana-ui/src/components/Forms/Field.tsx"),Je=a("./packages/grafana-ui/src/components/Input/Input.tsx");function Xe(e){let{onClose:t}=e;const a=(0,D.wW)(et);return(0,L.jsxs)("div",{className:a.container,children:[Ke||(Ke=(0,L.jsx)(Qe,{children:"Select a time range"})),(0,L.jsx)($.zx,{"aria-label":Ne.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:t})]})}Xe.displayName="Header";const et=e=>({container:A.css`
      background-color: ${e.colors.background.primary};
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px;
    `});var tt,at,st=a("./.yarn/__virtual__/@react-aria-dialog-virtual-7978b78bbe/3/opt/drone/yarncache/@react-aria-dialog-npm-3.1.4-2a0ffc453b-968328a9b2.zip/node_modules/@react-aria/dialog/dist/module.js"),nt=a("./.yarn/__virtual__/@react-aria-overlays-virtual-66213eeb57/3/opt/drone/yarncache/@react-aria-overlays-npm-3.7.3-408f244e82-3fffe82df9.zip/node_modules/@react-aria/overlays/dist/module.js"),rt=a("./.yarn/__virtual__/react-calendar-virtual-6221a1cca7/3/opt/drone/yarncache/react-calendar-npm-3.6.0-8b9fe8ca09-4499e26a5d.zip/node_modules/react-calendar/dist/esm/index.js");function it(e){let{onChange:t,from:a,to:s,timeZone:n}=e;const r=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const s=e.toDate(),n=t.toDate(),r=(0,ye.dateTime)(s).isValid()?s:a,i=(0,ye.dateTime)(n).isValid()?n:a;if(r>i)return[i,r];return[r,i]}(a,s),i=function(e,t){return(0,F.useCallback)((a=>{if(!Array.isArray(a))return console.error("onCalendarChange: should be run in selectRange={true}");const s=(0,ye.dateTimeParse)(ot(a[0]),{timeZone:t}),n=(0,ye.dateTimeParse)(ot(a[1]),{timeZone:t});e(s,n)}),[e,t])}(t,n),o=(0,D.wW)(lt);return(0,L.jsx)(rt.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:o.body,tileClassName:o.title,value:r,nextLabel:tt||(tt=(0,L.jsx)(P.J,{name:"angle-right"})),prevLabel:at||(at=(0,L.jsx)(P.J,{name:"angle-left"})),onChange:i,locale:"en"})}function ot(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]}it.displayName="Body";const lt=e=>({title:A.css`
      color: ${e.colors.text};
      background-color: ${e.colors.background.primary};
      font-size: ${e.typography.size.md};
      border: 1px solid transparent;

      &:hover {
        position: relative;
      }
    `,body:A.css`
      z-index: ${e.zIndex.modal};
      background-color: ${e.colors.background.primary};
      width: 268px;

      .react-calendar__navigation {
        display: flex;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation__arrow,
      .react-calendar__navigation {
        padding-top: 4px;
        background-color: inherit;
        color: ${e.colors.text};
        border: 0;
        font-weight: ${e.typography.fontWeightMedium};
      }

      .react-calendar__month-view__weekdays {
        background-color: inherit;
        text-align: center;
        color: ${e.colors.primary.text};

        abbr {
          border: 0;
          text-decoration: none;
          cursor: default;
          display: block;
          padding: 4px 0 4px 0;
        }
      }

      .react-calendar__month-view__days {
        background-color: inherit;
      }

      .react-calendar__tile,
      .react-calendar__tile--now {
        margin-bottom: 4px;
        background-color: inherit;
        height: 26px;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation > button:focus,
      .time-picker-calendar-tile:focus {
        outline: 0;
      }

      .react-calendar__tile--active,
      .react-calendar__tile--active:hover {
        color: ${e.colors.primary.contrastText};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.primary.main};
        box-shadow: none;
        border: 0px;
      }

      .react-calendar__tile--rangeEnd,
      .react-calendar__tile--rangeStart {
        padding: 0;
        border: 0px;
        color: ${e.colors.primary.contrastText};
        font-weight: ${e.typography.fontWeightMedium};
        background: ${e.colors.primary.main};

        abbr {
          background-color: ${e.colors.primary.main};
          border-radius: 100px;
          display: block;
          padding-top: 2px;
          height: 26px;
        }
      }

      .react-calendar__tile--rangeStart {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      .react-calendar__tile--rangeEnd {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    `});function ct(e){let{onClose:t,onApply:a}=e;const s=(0,D.wW)(dt);return(0,L.jsxs)("div",{className:s.container,children:[(0,L.jsx)($.zx,{className:s.apply,onClick:a,children:"Apply time range"}),(0,L.jsx)($.zx,{variant:"secondary",onClick:t,children:"Cancel"})]})}ct.displayName="Footer";const dt=e=>({container:A.css`
      background-color: ${e.colors.background.primary};
      display: flex;
      justify-content: center;
      padding: 10px;
      align-items: stretch;
    `,apply:A.css`
      margin-right: 4px;
      width: 100%;
      justify-content: center;
    `}),ut=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{container:A.css`
      top: -1px;
      position: absolute;
      ${t?"left":"right"}: 544px;
      box-shadow: ${e.shadows.z3};
      background-color: ${e.colors.background.primary};
      z-index: -1;
      border: 1px solid ${e.colors.border.weak};
      border-radius: 2px 0 0 2px;

      &:after {
        display: block;
        background-color: ${e.colors.background.primary};
        width: 19px;
        height: 100%;
        content: ${t?"":" "};
        position: absolute;
        top: 0;
        right: -19px;
        border-left: 1px solid ${e.colors.border.weak};
      }
    `,modal:A.css`
      position: fixed;
      top: 20%;
      left: 25%;
      width: 100%;
      z-index: ${e.zIndex.modal};
    `,content:A.css`
      margin: 0 auto;
      width: 268px;
    `,backdrop:A.css`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: #202226;
      opacity: 0.7;
      z-index: ${e.zIndex.modalBackdrop};
      text-align: center;
    `}},pt=e=>e.stopPropagation();function ht(e){const t=(0,D.l4)(),a=ut(t,e.isReversed),{isOpen:s,isFullscreen:n,onClose:r}=e,i=F.createRef(),{dialogProps:o}=(0,st.R)({"aria-label":Ne.wl.components.TimePicker.calendar.label},i),{overlayProps:l}=(0,nt.Ir)({isDismissable:!0,isOpen:s,onClose:r},i);return s?n?(0,L.jsx)(De.MT,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,L.jsxs)("section",Object.assign({className:a.container,onClick:pt,ref:i},l,o,{children:[(0,L.jsx)(Xe,Object.assign({},e)),(0,L.jsx)(it,Object.assign({},e))]}))}):(0,L.jsxs)(nt.Xj,{children:[(0,L.jsx)(De.MT,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,L.jsx)("section",Object.assign({className:a.modal,onClick:pt,ref:i},l,o,{children:(0,L.jsxs)("div",{className:a.content,"aria-label":Ne.wl.components.TimePicker.calendar.label,children:[(0,L.jsx)(Xe,Object.assign({},e)),(0,L.jsx)(it,Object.assign({},e)),(0,L.jsx)(ct,Object.assign({},e))]})}))}),(0,L.jsx)("div",{className:a.backdrop,onClick:pt})]}):null}const mt=(0,F.memo)(ht);var gt;ht.displayName="TimePickerCalendar";const ft='Please enter a past date or "now"',bt='"From" can\'t be after "To"',vt=e=>{const{value:t,isFullscreen:a=!1,timeZone:s,onApply:n,isReversed:r,fiscalYearStartMonth:i}=e,[o,l]=xt(t.raw.from,t.raw.to,s),c=(0,Z.useStyles2)(jt),[d,u]=(0,F.useState)(o),[p,h]=(0,F.useState)(l),[m,g]=(0,F.useState)(!1);(0,F.useEffect)((()=>{const[e,a]=xt(t.raw.from,t.raw.to,s);u(e),h(a)}),[t.raw.from,t.raw.to,s]);const f=(0,F.useCallback)((e=>{e.preventDefault(),g(!0)}),[g]),b=(0,F.useCallback)((e=>{if(e.preventDefault(),p.invalid||d.invalid)return;const t={from:d.value,to:p.value},a=ye.rangeUtil.convertRawToRange(t,s,i);n(a)}),[d.invalid,d.value,n,s,p.invalid,p.value,i]),v=(0,F.useCallback)(((e,t)=>{const[a,n]=xt(e,t,s);u(a),h(n)}),[s]),x=ye.rangeUtil.convertRawToRange({from:"now/fy",to:"now/fy"},s,i),y=(0,L.jsx)("div",{className:c.tooltip,children:ye.rangeUtil.isFiscal(t)?(0,L.jsx)(U.u,{content:`Fiscal year: ${x.from.format("MMM-DD")} - ${x.to.format("MMM-DD")}`,children:gt||(gt=(0,L.jsx)(P.J,{name:"info-circle"}))}):null}),w=(0,L.jsx)($.zx,{"aria-label":Ne.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",onClick:f});return(0,L.jsxs)("div",{children:[(0,L.jsxs)("div",{className:c.fieldContainer,children:[(0,L.jsx)(Ye.g,{label:"From",invalid:d.invalid,error:d.errorMessage,children:(0,L.jsx)(Je.I,{onClick:e=>e.stopPropagation(),onChange:e=>v(e.currentTarget.value,p.value),addonAfter:w,"aria-label":Ne.wl.components.TimePicker.fromField,value:d.value})}),y]}),(0,L.jsxs)("div",{className:c.fieldContainer,children:[(0,L.jsx)(Ye.g,{label:"To",invalid:p.invalid,error:p.errorMessage,children:(0,L.jsx)(Je.I,{onClick:e=>e.stopPropagation(),onChange:e=>v(d.value,e.currentTarget.value),addonAfter:w,"aria-label":Ne.wl.components.TimePicker.toField,value:p.value})}),y]}),(0,L.jsx)($.zx,{"data-testid":Ne.wl.components.TimePicker.applyTimeRange,onClick:b,children:"Apply time range"}),(0,L.jsx)(mt,{isFullscreen:a,isOpen:m,from:(0,ye.dateTimeParse)(d.value),to:(0,ye.dateTimeParse)(p.value),onApply:b,onClose:()=>g(!1),onChange:v,timeZone:s,isReversed:r})]})};function xt(e,t,a){const s=yt(e,a),n=yt(t,a),r=!wt(s,!1,a),i=!wt(n,!0,a),o=function(e,t,a){const s={from:e,to:t},n=ye.rangeUtil.convertRawToRange(s,a);return!(n.from.isSame(n.to)||n.from.isBefore(n.to))}(s,n,a)&&!i;return[{value:s,invalid:r||o,errorMessage:o&&!r?bt:ft},{value:n,invalid:i,errorMessage:ft}]}function yt(e,t){return(0,ye.isDateTime)(e)?(0,ye.dateTimeFormat)(e,{timeZone:t}):e}function wt(e,t,a){if((0,ye.isDateTime)(e))return e.isValid();if(ye.dateMath.isMathString(e))return ye.dateMath.isValid(e);return(0,ye.dateTimeParse)(e,{roundUp:t,timeZone:a}).isValid()}function jt(e){return{fieldContainer:A.css`
      display: flex;
    `,tooltip:A.css`
      padding-left: ${e.spacing(1)};
      padding-top: ${e.spacing(3)};
    `}}var Ct=a("../../opt/drone/yarncache/uuid-npm-8.3.2-eca0baba53-5575a8a75c.zip/node_modules/uuid/dist/esm-browser/v4.js");const kt=e=>({container:A.css`
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: 7px 9px 7px 9px;

      &:hover {
        background: ${e.colors.action.hover};
        cursor: pointer;
      }
    `,selected:A.css`
      background: ${e.colors.action.selected};
      font-weight: ${e.typography.fontWeightMedium};
    `,radio:A.css`
      opacity: 0;

      &:focus-visible + label {
        ${(0,Me.getFocusStyles)(e)};
      }
    `,label:A.css`
      cursor: pointer;
    `}),St=(0,F.memo)((e=>{let{value:t,onSelect:a,selected:s=!1,name:n}=e;const r=(0,je.wW)(kt),i=(0,Ct.Z)();return(0,L.jsxs)("li",{onClick:()=>a(t),className:(0,A.cx)(r.container,s&&r.selected),children:[(0,L.jsx)("input",{className:r.radio,checked:s,name:n,type:"checkbox",id:i,onChange:()=>a(t)}),(0,L.jsx)("label",{className:r.label,htmlFor:i,children:t.display})]})}));St.displayName="TimeRangeOption";const Tt=(0,D.Bb)((()=>({title:A.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px 5px 9px;
    `}))),Ot=(0,D.Bb)((()=>({grow:A.css`
      flex-grow: 1;
      align-items: flex-start;
    `}))),_t=e=>{const t=Tt(),{title:a,options:s,placeholderEmpty:n}=e;return void 0!==n&&s.length<=0?(0,L.jsx)(L.Fragment,{children:n}):a?(0,L.jsx)("section",{"aria-label":a,children:(0,L.jsxs)("fieldset",{children:[(0,L.jsx)("div",{className:t.title,children:(0,L.jsx)(Qe,{children:a})}),(0,L.jsx)(Nt,Object.assign({},e))]})}):(0,L.jsx)(Nt,Object.assign({},e))},Nt=e=>{let{options:t,value:a,onChange:s,title:n}=e;const r=Ot();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("ul",{"aria-roledescription":"Time range selection",children:t.map(((e,t)=>(0,L.jsx)(St,{value:e,selected:It(e,a),onSelect:s,name:null!=n?n:"Time ranges"},function(e,t){return`${e.from}-${e.to}-${t}`}(e,t))))}),(0,L.jsx)("div",{className:r.grow})]})};function It(e,t){return!(!t||!e)&&(t.from===e.from&&t.to===e.to)}const Pt=e=>{let{title:t}=e;const a=(0,D.Fg)(),s=Mt(a);return t?(0,L.jsx)("span",{className:s.title,children:t}):null},Mt=(0,D.Bb)((e=>({title:A.css`
      font-weight: ${e.typography.weight.regular};
      text-overflow: ellipsis;
    `}))),Ft=e=>{let{info:t}=e;const a=(0,D.Fg)(),s=Dt(a),n=At(t);return t?(0,L.jsx)("div",{className:s.description,children:n}):null},At=e=>(0,F.useMemo)((()=>{const t=[];if(!e)return"";if(e.countries.length>0){const a=e.countries[0];t.push(a.name)}return e.abbreviation&&t.push(e.abbreviation),t.join(", ")}),[e]),Dt=(0,D.Bb)((e=>({description:A.css`
      font-weight: normal;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
      white-space: normal;
      text-overflow: ellipsis;
    `})));var $t=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");const Lt=e=>{const t=(0,D.Fg)(),{timestamp:a,timeZone:s,className:n}=e,r=Et(t);return(0,$t.isString)(s)?(0,L.jsx)(L.Fragment,{children:(0,L.jsx)("span",{className:(0,A.cx)(r.offset,n),children:Rt(a,s)})}):null},Rt=(e,t)=>{const a=(0,ye.dateTimeFormat)(e,{timeZone:t,format:"Z"});return"+00:00"===a?"UTC":`UTC${a}`},Et=(0,D.Bb)((e=>{const t=A.css`
    font-weight: normal;
    font-size: ${e.typography.size.sm};
    color: ${e.colors.textWeak};
    white-space: normal;
  `;return{offset:A.css`
      ${t};
      color: ${e.colors.text};
      background: ${e.colors.bg2};
      padding: 2px 5px;
      border-radius: 2px;
      margin-left: 4px;
    `}}));var zt,Vt,Bt=a("./packages/grafana-ui/src/components/Select/Select.tsx"),Ut=a("./packages/grafana-ui/src/themes/stylesFactory.ts");const Ht="tz-utc-offset",qt=(e,t)=>{const{children:a,innerProps:s,data:n,isSelected:r,isFocused:i}=e,o=(0,je.l4)(),l=Gt(o),c=Date.now(),d=(0,A.cx)(l.container,i&&l.containerFocused);if(!(0,$t.isString)(n.value))return null;const u=(0,ye.getTimeZoneInfo)(n.value,c);return(0,L.jsx)("div",Object.assign({className:d},s,{"aria-label":"Select option",children:(0,L.jsxs)("div",{className:(0,A.cx)(l.leftColumn,l.row),children:[(0,L.jsxs)("div",{className:(0,A.cx)(l.leftColumn,l.wideRow),children:[(0,L.jsx)(Pt,{title:a}),(0,L.jsx)("div",{className:l.spacer}),(0,L.jsx)(Ft,{info:u})]}),(0,L.jsxs)("div",{className:l.rightColumn,children:[(0,L.jsx)(Lt,{timeZone:(null==u?void 0:u.ianaName)||n.value,timestamp:c,className:Ht}),r&&(zt||(zt=(0,L.jsx)("span",{children:(0,L.jsx)(P.J,{name:"check"})})))]})]})}))},Wt=(e,t)=>{const{children:a,innerProps:s,data:n,isSelected:r,isFocused:i}=e,o=(0,je.l4)(),l=Gt(o),c=Date.now(),d=(0,A.cx)(l.container,i&&l.containerFocused);if(!(0,$t.isString)(n.value))return null;const u=(0,ye.getTimeZoneInfo)(n.value,c);return(0,L.jsx)("div",Object.assign({className:d},s,{"aria-label":"Select option",children:(0,L.jsxs)("div",{className:l.body,children:[(0,L.jsxs)("div",{className:l.row,children:[(0,L.jsx)("div",{className:l.leftColumn,children:(0,L.jsx)(Pt,{title:a})}),(0,L.jsx)("div",{className:l.rightColumn,children:r&&(Vt||(Vt=(0,L.jsx)("span",{children:(0,L.jsx)(P.J,{name:"check"})})))})]}),(0,L.jsxs)("div",{className:l.row,children:[(0,L.jsx)("div",{className:l.leftColumn,children:(0,L.jsx)(Ft,{info:u})}),(0,L.jsx)("div",{className:l.rightColumn,children:(0,L.jsx)(Lt,{timestamp:c,timeZone:(null==u?void 0:u.ianaName)||n.value,className:Ht})})]})]})}))},Gt=(0,Ut.B)((e=>({container:A.css`
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      padding: 6px 8px 4px;

      &:hover {
        background: ${e.colors.action.hover};
      }
    `,containerFocused:A.css`
      background: ${e.colors.action.hover};
    `,body:A.css`
      display: flex;
      font-weight: ${e.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,row:A.css`
      display: flex;
      flex-direction: row;
    `,leftColumn:A.css`
      flex-grow: 1;
      text-overflow: ellipsis;
    `,rightColumn:A.css`
      justify-content: flex-end;
      align-items: center;
    `,wideRow:A.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
    `,spacer:A.css`
      margin-left: 6px;
    `}))),Zt=e=>e.stopPropagation(),Qt=e=>{const t=(0,D.Fg)(),{children:a,label:s}=e,n=Kt(t);return s?(0,L.jsxs)("div",{onClick:Zt,children:[(0,L.jsx)("div",{className:n.header,children:(0,L.jsx)("span",{className:n.label,children:s})}),a]}):(0,L.jsx)("div",{onClick:Zt,children:a})},Kt=(0,D.Bb)((e=>({header:A.css`
      padding: 7px 10px;
      width: 100%;
      border-top: 1px solid ${e.colors.border1};
      text-transform: capitalize;
    `,label:A.css`
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
      font-weight: ${e.typography.weight.semibold};
    `}))),Yt=e=>{const{onChange:t,width:a,autoFocus:s=!1,onBlur:n,value:r,includeInternal:i=!1,disabled:o=!1,inputId:l}=e,c=Jt(i),d=Xt(c,r),u=ta(),p=a&&a<=45?Wt:qt,h=(0,F.useCallback)((e=>{if(!e||!(0,$t.isString)(e.value))return t(r);t(e.value)}),[t,r]);return(0,L.jsx)(Bt.Ph,{inputId:l,value:d,placeholder:"Type to search (country, city, abbreviation)",autoFocus:s,openMenuOnFocus:!0,width:a,filterOption:u,options:c,onChange:h,onBlur:n,components:{Option:p,Group:Qt},disabled:o,"aria-label":"Time zone picker"})},Jt=e=>{const t=Date.now();return(0,ye.getTimeZoneGroups)(e).map((e=>{const a=e.zones.reduce(((e,a)=>{const s=(0,ye.getTimeZoneInfo)(a,t);return s?(e.push({label:s.name,value:s.zone,searchIndex:aa(s,t)}),e):e}),[]);return{label:e.name,options:a}}))},Xt=(e,t)=>(0,F.useMemo)((()=>{if(void 0===t)return;const a=(0,$t.toLower)(t),s=e.find((e=>e.label?a.startsWith((0,$t.toLower)(e.label)):ea(a)));return null==s?void 0:s.options.find((e=>(0,$t.isEmpty)(a)?e.value===ye.InternalTimeZones.default:(0,$t.toLower)(e.value)===a))}),[e,t]),ea=e=>{switch(e){case ye.InternalTimeZones.default:case ye.InternalTimeZones.localBrowserTime:case ye.InternalTimeZones.utc:return!0;default:return!1}},ta=()=>(0,F.useCallback)(((e,t)=>!(t&&e.data&&e.data.searchIndex)||e.data.searchIndex.indexOf((0,$t.toLower)(t))>-1),[]),aa=(e,t)=>{const a=[(0,$t.toLower)(e.name),(0,$t.toLower)(e.abbreviation),(0,$t.toLower)(Rt(t,e.zone))];for(const t of e.countries)a.push((0,$t.toLower)(t.name)),a.push((0,$t.toLower)(t.code));return a.join("|")},sa=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],na=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}],ra=e=>{const{timeZone:t,fiscalYearStartMonth:a,timestamp:s=Date.now(),onChangeTimeZone:n,onChangeFiscalYearStartMonth:r}=e,[i,o]=(0,F.useState)(!1),[l,c]=(0,F.useState)("tz"),d=(0,F.useCallback)((e=>{e&&e.stopPropagation(),o(!i)}),[i,o]),u=(0,D.l4)(),p=ia(u);if(!(0,$t.isString)(t))return null;const h=(0,ye.getTimeZoneInfo)(t,s);return h?(0,L.jsxs)("div",{children:[(0,L.jsxs)("section",{"aria-label":"Time zone selection",className:p.container,children:[(0,L.jsxs)("div",{className:p.timeZoneContainer,children:[(0,L.jsxs)("div",{className:p.timeZone,children:[(0,L.jsx)(Pt,{title:h.name}),(0,L.jsx)("div",{className:p.spacer}),(0,L.jsx)(Ft,{info:h})]}),(0,L.jsx)(Lt,{timeZone:t,timestamp:s})]}),(0,L.jsx)("div",{className:p.spacer}),(0,L.jsx)($.zx,{variant:"secondary",onClick:d,size:"sm",children:"Change time settings"})]}),i?(0,L.jsxs)("div",{className:p.editContainer,children:[(0,L.jsx)("div",{children:(0,L.jsx)(Jd.S,{value:l,options:[{label:"Time Zone",value:"tz"},{label:"Fiscal year",value:"fy"}],onChange:c})}),"tz"===l?(0,L.jsx)("section",{"data-testid":Ne.wl.components.TimeZonePicker.containerV2,className:(0,A.cx)(p.timeZoneContainer,p.timeSettingContainer),children:(0,L.jsx)(Yt,{includeInternal:!0,onChange:e=>{d(),(0,$t.isString)(e)&&n(e)},onBlur:d})}):(0,L.jsx)("section",{"aria-label":Ne.wl.components.TimeZonePicker.containerV2,className:(0,A.cx)(p.timeZoneContainer,p.timeSettingContainer),children:(0,L.jsx)(Ye.g,{className:p.fiscalYearField,label:"Fiscal year start month",children:(0,L.jsx)(Bt.Ph,{value:a,options:na,onChange:e=>{var t;r&&r(null!==(t=e.value)&&void 0!==t?t:0)}})})})]}):null]}):null},ia=(0,D.Bb)((e=>({container:A.css`
      border-top: 1px solid ${e.colors.border.weak};
      padding: 11px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,editContainer:A.css`
      border-top: 1px solid ${e.colors.border.weak};
      padding: 11px;
      justify-content: space-between;
      align-items: center;
      padding: 7px;
    `,spacer:A.css`
      margin-left: 7px;
    `,timeSettingContainer:A.css`
      padding-top: ${e.spacing(1)};
    `,fiscalYearField:A.css`
      margin-bottom: 0px;
    `,timeZoneContainer:A.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      flex-grow: 1;
    `,timeZone:A.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
      flex-grow: 1;
    `})));var oa,la,ca,da,ua;const pa=e=>{const{quickOptions:t=[],isReversed:a,isFullscreen:s,hideQuickRanges:n,timeZone:r,fiscalYearStartMonth:i,value:o,onChange:l,history:c,showHistory:d,className:u,hideTimeZone:p,onChangeTimeZone:h,onChangeFiscalYearStartMonth:m}=e,g=!(null!=c&&c.length),f=s&&d||!s&&(d&&!g||!n),b=(0,D.l4)(),v=va(b,a,n,f),x=function(e,t){if(!Array.isArray(e)||0===e.length)return[];return e.slice(e.length-4).map((e=>((e,t)=>{const a=(0,ye.dateTimeFormat)(e.from,{timeZone:t}),s=(0,ye.dateTimeFormat)(e.to,{timeZone:t});return{from:a,to:s,display:`${a} to ${s}`}})(e,t)))}(c,r),y=ba(o.raw,t),[w,j]=(0,F.useState)(""),C=t.filter((e=>e.display.toLowerCase().includes(w.toLowerCase())));return(0,L.jsxs)("div",{id:"TimePickerContent",className:(0,A.cx)(v.container,u),children:[(0,L.jsxs)("div",{className:v.body,children:[(!s||!n)&&(0,L.jsxs)("div",{className:v.rightSide,children:[(0,L.jsx)("div",{className:v.timeRangeFilter,children:(0,L.jsx)(eu,{width:0,autoFocus:!0,value:w,onChange:j,placeholder:"Search quick ranges"})}),(0,L.jsxs)(G.$,{children:[!s&&(0,L.jsx)(ma,Object.assign({},e,{historyOptions:x})),!n&&(0,L.jsx)(_t,{options:C,onChange:e=>l(Ge(e)),value:y})]})]}),s&&(0,L.jsx)("div",{className:v.leftSide,children:(0,L.jsx)(ga,Object.assign({},e,{historyOptions:x}))})]}),!p&&s&&(0,L.jsx)(ra,{timeZone:r,fiscalYearStartMonth:i,onChangeTimeZone:h,onChangeFiscalYearStartMonth:m})]})},ha=e=>{const t=(0,D.l4)(),a=(0,We.Z)(`(min-width: ${t.breakpoints.values.lg}px)`);return(0,L.jsx)(pa,Object.assign({},e,{isFullscreen:a}))},ma=e=>{const{value:t,hideQuickRanges:a,onChange:s,timeZone:n,historyOptions:r=[],showHistory:i}=e,o=(0,D.l4)(),l=xa(o),c=(0,ye.isDateTime)(t.raw.from)||(0,ye.isDateTime)(t.raw.to),[d,u]=(0,F.useState)(!c),p=!a&&d;return(0,L.jsxs)("fieldset",{children:[(0,L.jsx)("div",{className:l.header,children:(0,L.jsxs)("button",{type:"button",className:l.expandButton,onClick:()=>{a||u(!p)},"data-testid":Ne.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!p,"aria-controls":"expanded-timerange",children:[oa||(oa=(0,L.jsx)(Qe,{children:"Absolute time range"})),!a&&(0,L.jsx)(P.J,{name:p?"angle-down":"angle-up"})]})}),!p&&(0,L.jsxs)("div",{className:l.body,id:"expanded-timerange",children:[(0,L.jsx)("div",{className:l.form,children:(0,L.jsx)(vt,{value:t,onApply:s,timeZone:n,isFullscreen:!1})}),i&&(0,L.jsx)(_t,{title:"Recently used absolute ranges",options:r,onChange:e=>s(Ge(e)),placeholderEmpty:null})]})]})},ga=e=>{const{onChange:t,value:a,timeZone:s,fiscalYearStartMonth:n,isReversed:r,historyOptions:i}=e,o=(0,D.l4)(),l=ya(o,e.hideQuickRanges);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:l.container,children:[(0,L.jsx)("div",{className:l.title,"data-testid":Ne.wl.components.TimePicker.absoluteTimeRangeTitle,children:la||(la=(0,L.jsx)(Qe,{children:"Absolute time range"}))}),(0,L.jsx)(vt,{value:a,timeZone:s,fiscalYearStartMonth:n,onApply:t,isFullscreen:!0,isReversed:r})]}),e.showHistory&&(0,L.jsx)("div",{className:l.recent,children:(0,L.jsx)(_t,{title:"Recently used absolute ranges",options:i||[],onChange:e=>t(Ge(e)),placeholderEmpty:ca||(ca=(0,L.jsx)(fa,{}))})})]})},fa=(0,F.memo)((()=>{const e=(0,D.l4)(),t=wa(e);return(0,L.jsxs)("div",{className:t.container,children:[da||(da=(0,L.jsx)("div",{children:(0,L.jsx)("span",{children:"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here."})})),(0,L.jsxs)("div",{children:[(0,L.jsx)("a",{className:t.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new",children:"Read the documentation"}),ua||(ua=(0,L.jsx)("span",{children:" to find out more about how to enter custom time ranges."}))]})]})}));fa.displayName="EmptyRecentList";const ba=(e,t)=>(0,F.useMemo)((()=>{if(ye.rangeUtil.isRelativeTimeRange(e))return t.find((t=>t.from===e.from&&t.to===e.to))}),[e,t]),va=(0,D.Bb)(((e,t,a,s)=>({container:A.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      position: absolute;
      z-index: ${e.zIndex.dropdown};
      width: 546px;
      top: 116%;
      border-radius: 2px;
      border: 1px solid ${e.colors.border.weak};
      ${t?"left":"right"}: 0;

      @media only screen and (max-width: ${e.breakpoints.values.lg}px) {
        width: 262px;
      }
    `,body:A.css`
      display: flex;
      flex-direction: row-reverse;
      height: ${s?"381px":"217px"};
    `,leftSide:A.css`
      display: flex;
      flex-direction: column;
      border-right: ${t?"none":`1px solid ${e.colors.border.weak}`};
      width: ${a?"100%":"60%"};
      overflow: hidden;
      order: ${t?1:0};
    `,rightSide:A.css`
      width: 40% !important;
      border-right: ${t?`1px solid ${e.colors.border.weak}`:"none"};
      display: flex;
      flex-direction: column;
      @media only screen and (max-width: ${e.breakpoints.values.lg}px) {
        width: 100% !important;
      }
    `,timeRangeFilter:A.css`
      padding: ${e.spacing(1)};
    `,spacing:A.css`
      margin-top: 16px;
    `}))),xa=(0,D.Bb)((e=>({header:A.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid ${e.colors.border.weak};
      padding: 7px 9px 7px 9px;
    `,expandButton:A.css`
      background-color: transparent;
      border: none;
      display: flex;
      width: 100%;

      &:focus-visible {
        ${(0,Me.getFocusStyles)(e)}
      }
    `,body:A.css`
      border-bottom: 1px solid ${e.colors.border.weak};
    `,form:A.css`
      padding: 7px 9px 7px 9px;
    `}))),ya=(0,D.Bb)(((e,t)=>({container:A.css`
      padding-top: 9px;
      padding-left: 11px;
      padding-right: ${t?"11px":"20%"};
    `,title:A.css`
      margin-bottom: 11px;
    `,recent:A.css`
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-top: ${e.spacing(1)};
    `}))),wa=(0,D.Bb)((e=>({container:A.css`
      padding: 12px;
      margin: 12px;

      a,
      span {
        font-size: 13px;
      }
    `,link:A.css`
      color: ${e.colors.text.link};
    `})));var ja,Ca;const ka=()=>(0,L.jsxs)(L.Fragment,{children:["Time range zoom out ",ja||(ja=(0,L.jsx)("br",{}))," CTRL+Z"]}),Sa=e=>{let{timeRange:t,timeZone:a}=e;const s=(0,je.Fg)(),n=Ia(s);return(0,L.jsxs)(L.Fragment,{children:[(0,ye.dateTimeFormat)(t.from,{timeZone:a}),Ca||(Ca=(0,L.jsx)("div",{className:"text-center",children:"to"})),(0,ye.dateTimeFormat)(t.to,{timeZone:a}),(0,L.jsx)("div",{className:"text-center",children:(0,L.jsx)("span",{className:n.utc,children:(0,ye.timeZoneFormatUserFriendly)(a)})})]})},Ta=(0,F.memo)((e=>{let{hideText:t,value:a,timeZone:s}=e;const n=(0,je.Fg)(),r=Ia(n);return t?null:(0,L.jsxs)("span",{className:r.container,children:[(0,L.jsx)("span",{children:Oa(a,s)}),(0,L.jsx)("span",{className:r.utc,children:ye.rangeUtil.describeTimeRangeAbbreviation(a,s)})]})}));Ta.displayName="TimePickerButtonLabel";const Oa=(e,t)=>{const a={to:ye.dateMath.isMathString(e.raw.to)?e.raw.to:e.to,from:ye.dateMath.isMathString(e.raw.from)?e.raw.from:e.from};return ye.rangeUtil.describeTimeRange(a,t)},_a=(0,je.Zz)((function(e){const[t,a]=(0,F.useState)(!1),{value:s,onMoveBackward:n,onMoveForward:r,onZoom:i,timeZone:o,fiscalYearStartMonth:l,timeSyncButton:c,isSynced:d,theme:u,history:p,onChangeTimeZone:h,onChangeFiscalYearStartMonth:m,hideQuickRanges:g}=e,f=(0,F.createRef)(),{overlayProps:b}=(0,nt.Ir)({onClose:()=>{a(!1)},isDismissable:!0,isOpen:t},f),{dialogProps:v}=(0,st.R)({},f),x=Na(u),y=(0,ye.isDateTime)(s.raw.from)||(0,ye.isDateTime)(s.raw.to),w=d?"active":"default";return(0,L.jsxs)($.hE,{className:x.container,children:[y&&(0,L.jsx)($.hA,{"aria-label":"Move time range backwards",variant:w,onClick:n,icon:"angle-left",narrow:!0}),(0,L.jsx)(U.u,{content:(0,L.jsx)(Sa,{timeRange:s,timeZone:o}),placement:"bottom",children:(0,L.jsx)($.hA,{"data-testid":Ne.wl.components.TimePicker.openButton,"aria-label":`Time range picker with current time range ${Oa(s,o)} selected`,"aria-controls":"TimePickerContent",onClick:e=>{e.stopPropagation(),e.preventDefault(),a(!t)},icon:"clock-nine",isOpen:t,variant:w,children:(0,L.jsx)(Ta,Object.assign({},e))})}),t&&(0,L.jsx)(De.MT,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,L.jsx)("section",Object.assign({ref:f},b,v,{children:(0,L.jsx)(ha,{timeZone:o,fiscalYearStartMonth:l,value:s,onChange:t=>{e.onChange(t),a(!1)},quickOptions:sa,history:p,showHistory:!0,onChangeTimeZone:h,onChangeFiscalYearStartMonth:m,hideQuickRanges:g})}))}),c,y&&(0,L.jsx)($.hA,{"aria-label":"Move time range forwards",onClick:r,icon:"angle-right",narrow:!0,variant:w}),(0,L.jsx)(U.u,{content:ka,placement:"bottom",children:(0,L.jsx)($.hA,{"aria-label":"Zoom out time range",onClick:i,icon:"search-minus",variant:w})})]})})),Na=(0,Ut.B)((e=>({container:A.css`
      position: relative;
      display: flex;
      vertical-align: middle;
    `}))),Ia=(0,Ut.B)((e=>({container:A.css`
      display: flex;
      align-items: center;
      white-space: nowrap;
    `,utc:A.css`
      color: ${e.palette.orange};
      font-size: ${e.typography.size.sm};
      padding-left: 6px;
      line-height: 28px;
      vertical-align: bottom;
      font-weight: ${e.typography.weight.semibold};
    `})));var Pa,Ma=a("./.yarn/__virtual__/rc-time-picker-virtual-0961fa1b01/3/opt/drone/yarncache/rc-time-picker-npm-3.7.3-0eb473aed2-9069ae590f.zip/node_modules/rc-time-picker/es/index.js"),Fa=a("./packages/grafana-ui/src/components/Forms/commonStyles.ts");const Aa=e=>{let{minuteStep:t=1,showHour:a=!0,showSeconds:s=!1,onChange:n,value:r,size:i="auto",disabled:o}=e;const l=(0,Z.useStyles)($a);return(0,L.jsx)(Ma.Z,{className:(0,A.cx)((0,Fa.ht)()[i],l.input),popupClassName:l.picker,defaultValue:(0,ye.dateTimeAsMoment)(),onChange:e=>n((0,ye.dateTime)(e)),allowEmpty:!1,showSecond:s,value:(0,ye.dateTimeAsMoment)(r),showHour:a,minuteStep:t,inputIcon:(0,L.jsx)(Da,{wrapperStyle:l.caretWrapper}),disabled:o})},Da=e=>{let{wrapperStyle:t=""}=e;return(0,L.jsx)("div",{className:t,children:Pa||(Pa=(0,L.jsx)(Z.Icon,{name:"angle-down"}))})},$a=(0,D.Bb)((e=>{const t=e.colors.formInputBg,a=e.colors.dropdownShadow,s=e.colors.dropdownOptionHoverBg,n=e.border.radius.sm,r=e.colors.formInputBorder;return{caretWrapper:A.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${e.colors.textWeak};
    `,picker:A.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${t};
        border-color: ${r};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${e.palette.orange};
            border-radius: ${n};
          }

          &:hover {
            background: ${s};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${a};
        background-color: ${t};
        border-color: ${r};
        border-radius: ${n};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${t};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:A.css`
      .rc-time-picker-input {
        background-color: ${t};
        border-radius: ${n};
        border-color: ${r};
        height: ${e.spacing.formInputHeight}px;

        &:focus {
          ${(0,Me.focusCss)(e)}
        }

        &:disabled {
          background-color: ${e.colors.formInputBgDisabled};
          color: ${e.colors.formInputDisabledText};
          border: 1px solid ${e.colors.formInputBgDisabled};
          &:focus {
            box-shadow: none;
          }
        }
      }
    `}})),La=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],Ra=e=>{var t;const{onChange:a,width:s,autoFocus:n=!1,onBlur:r,value:i,disabled:o=!1,inputId:l}=e,c=(0,F.useCallback)((e=>{void 0!==e.value&&a(e.value)}),[a]);return(0,L.jsx)(Bt.Ph,{inputId:l,value:null===(t=La.find((e=>e.value===i)))||void 0===t?void 0:t.value,placeholder:Ne.wl.components.WeekStartPicker.placeholder,autoFocus:n,openMenuOnFocus:!0,width:s,options:La,onChange:c,onBlur:r,disabled:o,menuShouldPortal:!0})};var Ea,za;const Va=(0,F.memo)((e=>{const t=(0,D.wW)(Ua),{isOpen:a,onClose:s}=e;return a?(0,L.jsx)(we.L,{useCapture:!0,includeButtonPress:!1,onClick:s,children:(0,L.jsx)("div",{className:t.modal,"data-testid":"date-picker",children:(0,L.jsx)(Ba,Object.assign({},e))})}):null}));Va.displayName="DatePicker";const Ba=(0,F.memo)((e=>{let{value:t,onChange:a}=e;const s=(0,D.wW)(lt);return(0,L.jsx)(rt.ZP,{className:s.body,tileClassName:s.title,value:t||new Date,nextLabel:Ea||(Ea=(0,L.jsx)(P.J,{name:"angle-right"})),prevLabel:za||(za=(0,L.jsx)(P.J,{name:"angle-left"})),onChange:e=>{Array.isArray(e)||a(e)},locale:"en"})}));Ba.displayName="Body";const Ua=e=>({modal:A.css`
      z-index: ${e.zIndex.modal};
      position: absolute;
      box-shadow: ${e.shadows.z3};
      background-color: ${e.colors.background.primary};
      border: 1px solid ${e.colors.border.weak};
      border-radius: 2px 0 0 2px;
    `}),Ha=["value","onChange","closeOnSelect","placeholder"];const qa=e=>{let{value:t,onChange:a,closeOnSelect:s,placeholder:n="Date"}=e,r=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Ha);const[i,o]=F.useState(!1),l=(0,D.yK)(Wa);return(0,L.jsxs)("div",{className:l.container,children:[(0,L.jsx)(Je.I,Object.assign({type:"text",autoComplete:"off",placeholder:n,value:t?(c=t,(0,ye.dateTime)(c).format("L")):t,onClick:()=>o(!0),onChange:e=>{""===e.target.value&&a("")},className:l.input},r)),(0,L.jsx)(Va,{isOpen:i,value:t&&"string"!=typeof t?t:(0,ye.dateTime)().toDate(),onChange:e=>{a(e),s&&o(!1)},onClose:()=>o(!1)})]});var c},Wa=()=>({container:A.css`
      position: relative;
    `,input:A.css`
    /* hides the native Calendar picker icon given when using type=date */
    input[type='date']::-webkit-inner-spin-button,
    input[type='date']::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
    `});function Ga(e,t,a){if((0,ye.isDateTime)(e))return e.isValid();if(ye.dateMath.isMathString(e))return ye.dateMath.isValid(e);return(0,ye.dateTimeParse)(e,{roundUp:t,timeZone:a}).isValid()}var Za,Qa;const Ka=e=>e.stopPropagation(),Ya=e=>{let{date:t,maxDate:a,label:s,onChange:n}=e;const[r,i]=(0,F.useState)(!1),o=(0,D.l4)(),l=(0,We.Z)(`(min-width: ${o.breakpoints.values.lg}px)`),c=(0,D.wW)(ut),d=(0,D.wW)(es),u=(0,F.useCallback)((e=>{i(!1),n(e)}),[n]),p=(0,F.useCallback)((e=>{e.preventDefault(),i(!0)}),[i]);return(0,L.jsxs)("div",{"data-testid":"date-time-picker",style:{position:"relative"},children:[(0,L.jsx)(Ja,{date:t,onChange:n,isFullscreen:l,onOpen:p,label:s}),r?l?(0,L.jsx)(we.L,{onClick:()=>i(!1),children:(0,L.jsx)(Xa,{date:t,onChange:u,isFullscreen:!0,onClose:()=>i(!1),maxDate:a})}):(0,L.jsx)(W.h,{children:(0,L.jsxs)(we.L,{onClick:()=>i(!1),children:[(0,L.jsx)("div",{className:d.modal,onClick:Ka,children:(0,L.jsx)(Xa,{date:t,onChange:u,isFullscreen:!1,onClose:()=>i(!1)})}),(0,L.jsx)("div",{className:c.backdrop,onClick:Ka})]})}):null]})},Ja=e=>{let{date:t,label:a,onChange:s,isFullscreen:n,onOpen:r}=e;const[i,o]=(0,F.useState)((()=>({value:t?(0,ye.dateTimeFormat)(t):(0,ye.dateTimeFormat)((0,ye.dateTime)()),invalid:!1})));(0,F.useEffect)((()=>{t&&o({invalid:!Ga((0,ye.dateTimeFormat)(t)),value:(0,ye.isDateTime)(t)?(0,ye.dateTimeFormat)(t):t})}),[t]);const l=(0,F.useCallback)((e=>{const t=!Ga(e.currentTarget.value);o({value:e.currentTarget.value,invalid:t})}),[]),c=(0,F.useCallback)((e=>{n&&r(e)}),[n,r]),d=(0,F.useCallback)((()=>{(0,ye.isDateTime)(i.value)&&s((0,ye.dateTime)(i.value))}),[i.value,s]),u=(0,L.jsx)($.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:r});return(0,L.jsx)(Vl,{label:a,onClick:Ka,invalid:!(!i.value||!i.invalid),className:A.css`
        margin-bottom: 0;
      `,children:(0,L.jsx)(Je.I,{onClick:Ka,onChange:l,addonAfter:u,value:i.value,onFocus:c,onBlur:d,"data-testid":"date-time-input",placeholder:"Select date/time"})})},Xa=e=>{let{date:t,onClose:a,onChange:s,isFullscreen:n,maxDate:r}=e;const i=(0,D.wW)(lt),o=(0,D.wW)(es),[l,c]=(0,F.useState)((()=>t&&t.isValid()?t.toDate():new Date)),d=(0,F.useCallback)((e=>{Array.isArray(e)||c((t=>(e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e)))}),[]),u=(0,F.useCallback)((e=>{c(e.toDate())}),[]);return(0,L.jsxs)("div",{className:(0,A.cx)(o.container,{[o.fullScreen]:n}),onClick:Ka,children:[(0,L.jsx)(rt.ZP,{next2Label:null,prev2Label:null,value:l,nextLabel:Za||(Za=(0,L.jsx)(P.J,{name:"angle-right"})),nextAriaLabel:"Next month",prevLabel:Qa||(Qa=(0,L.jsx)(P.J,{name:"angle-left"})),prevAriaLabel:"Previous month",onChange:d,locale:"en",className:i.body,tileClassName:i.title,maxDate:r}),(0,L.jsx)("div",{className:o.time,children:(0,L.jsx)(Aa,{showSeconds:!0,onChange:u,value:(0,ye.dateTime)(l)})}),(0,L.jsxs)(di.Lh,{children:[(0,L.jsx)($.zx,{type:"button",onClick:()=>s((0,ye.dateTime)(l)),children:"Apply"}),(0,L.jsx)($.zx,{variant:"secondary",type:"button",onClick:a,children:"Cancel"})]})]})},es=e=>({container:A.css`
    padding: ${e.spacing(1)};
    border: 1px ${e.colors.border.weak} solid;
    border-radius: ${e.shape.borderRadius(1)};
    background-color: ${e.colors.background.primary};
    z-index: ${e.zIndex.modal};
  `,fullScreen:A.css`
    position: absolute;
  `,time:A.css`
    margin-bottom: ${e.spacing(2)};
  `,modal:A.css`
    position: fixed;
    top: 25%;
    left: 25%;
    width: 100%;
    z-index: ${e.zIndex.modal};
    max-width: 280px;
  `});var ts=a("./packages/grafana-ui/src/components/List/List.tsx"),as=a("./packages/grafana-ui/src/utils/index.ts");const ss=(0,D.Bb)((e=>{let{theme:t,name:a}=e;const{color:s,borderColor:n}=(0,as.Bx)(a),r=t.spacing.formInputHeight-8;return{itemStyle:A.css`
      display: flex;
      align-items: center;
      height: ${r}px;
      line-height: ${r-2}px;
      background-color: ${s};
      color: ${t.palette.white};
      border: 1px solid ${n};
      border-radius: 3px;
      padding: 0 ${t.spacing.xs};
      margin-right: 3px;
      white-space: nowrap;
      text-shadow: none;
      font-weight: 500;
      font-size: ${t.typography.size.sm};
    `,nameStyle:A.css`
      margin-right: 3px;
    `,buttonStyles:A.css`
      margin: 0;
      &:hover::before {
        display: none;
      }
    `}})),ns=e=>{let{name:t,disabled:a,onRemove:s}=e;const n=(0,D.Fg)(),r=ss({theme:n,name:t});return(0,L.jsxs)("div",{className:r.itemStyle,children:[(0,L.jsx)("span",{className:r.nameStyle,children:t}),(0,L.jsx)(M.h,{name:"times",size:"lg",disabled:a,ariaLabel:`Remove ${t}`,onClick:()=>s(t),type:"button",className:r.buttonStyles})]})},rs=e=>{let{placeholder:t="New tag (enter key to add)",tags:a=[],onChange:s,width:n,className:r,disabled:i,addOnBlur:o,invalid:l,id:c}=e;const[d,u]=(0,F.useState)(""),p=(0,je.yK)(is),h=(0,je.l4)(),m=e=>{s(a.filter((t=>t!==e)))},g=e=>{null==e||e.preventDefault(),a.includes(d)||s(a.concat(d)),u("")};return(0,L.jsxs)("div",{className:(0,A.cx)(p.wrapper,r,n?(0,A.css)({width:h.spacing(n)}):""),children:[(0,L.jsx)("div",{className:null!=a&&a.length?p.tags:void 0,children:null==a?void 0:a.map(((e,t)=>(0,L.jsx)(ns,{name:e,onRemove:m,disabled:i},`${e}-${t}`)))}),(0,L.jsx)("div",{children:(0,L.jsx)(Je.I,{id:c,disabled:i,placeholder:t,onChange:e=>{u(e.target.value)},value:d,onKeyUp:e=>{e.preventDefault(),"Enter"===e.key&&""!==d&&(s(a.concat(d)),u(""))},onBlur:()=>{o&&d&&g()},invalid:l,suffix:d.length>0&&(0,L.jsx)($.zx,{fill:"text",className:p.addButtonStyle,onClick:g,size:"md",children:"Add"})})})]})},is=e=>({wrapper:A.css`
    min-height: ${e.spacing.formInputHeight}px;
    align-items: center;
    display: flex;
    flex-wrap: wrap;
  `,tags:A.css`
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
    margin-right: ${e.spacing.xs};
  `,addButtonStyle:A.css`
    margin: 0 -${e.spacing.sm};
  `});var os,ls;const cs=e=>{let{currentPage:t,numberOfPages:a,onNavigate:s,hideWhenSinglePage:n}=e;const r=ds(),i=[...new Array(a).keys()],o=a>8,l=(e,t)=>(0,L.jsx)("li",{className:r.item,children:(0,L.jsx)($.zx,{size:"sm",variant:t,onClick:()=>s(e),children:e})},e),c=i.reduce(((e,s)=>{const n=s+1,i=n===t?"primary":"secondary",c=a-8+1,d=c-8,u=d>-1&&t>=8&&t<=c;return o?1===n||n===a||t<8&&n<8||d>=0&&t>c&&n>c||d<0&&t>=8&&n>c||u&&n>=t-2&&n<=t+2?e.push(l(n,i)):(8===n&&t<8||n===c&&t>c||u&&(n===t-3||n===t+3))&&e.push((0,L.jsx)("li",{className:r.item,children:(0,L.jsx)(P.J,{className:r.ellipsis,name:"ellipsis-v"})},n)):e.push(l(n,i)),e}),[]);return n&&a<=1?null:(0,L.jsx)("div",{className:r.container,children:(0,L.jsxs)("ol",{children:[(0,L.jsx)("li",{className:r.item,children:(0,L.jsx)($.zx,{"aria-label":"previous",size:"sm",variant:"secondary",onClick:()=>s(t-1),disabled:1===t,children:os||(os=(0,L.jsx)(P.J,{name:"angle-left"}))})}),c,(0,L.jsx)("li",{className:r.item,children:(0,L.jsx)($.zx,{"aria-label":"next",size:"sm",variant:"secondary",onClick:()=>s(t+1),disabled:t===a,children:ls||(ls=(0,L.jsx)(P.J,{name:"angle-right"}))})})]})})},ds=(0,D.Bb)((()=>({container:A.css`
      float: right;
    `,item:A.css`
      display: inline-block;
      padding-left: 10px;
      margin-bottom: 5px;
    `,ellipsis:A.css`
      transform: rotate(90deg);
    `}))),us=["name","onClick","icon","className","colorIndex"];const ps=(0,F.forwardRef)(((e,t)=>{let{name:a,onClick:s,icon:n,className:r,colorIndex:i}=e,o=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,us);const l=(0,D.Fg)(),c=hs(l,a,i),d=(0,A.cx)(c.wrapper,r,{[c.hover]:void 0!==s});return s?(0,L.jsxs)("button",Object.assign({},o,{className:d,onClick:e=>{e.preventDefault(),e.stopPropagation(),null==s||s(a,e)},ref:t,children:[n&&(0,L.jsx)(P.J,{name:n}),a]})):(0,L.jsxs)("span",Object.assign({},o,{className:d,ref:t,children:[n&&(0,L.jsx)(P.J,{name:n}),a]}))}));ps.displayName="Tag";const hs=(e,t,a)=>{let s;return s=void 0===a?(0,as.Bx)(t):(0,as.vm)(a),{wrapper:A.css`
      appearance: none;
      border-style: none;
      font-weight: ${e.typography.weight.semibold};
      font-size: ${e.typography.size.sm};
      line-height: ${e.typography.lineHeight.xs};
      vertical-align: baseline;
      background-color: ${s.color};
      color: ${e.palette.gray98};
      white-space: nowrap;
      text-shadow: none;
      padding: 3px 6px;
      border-radius: ${e.border.radius.md};
    `,hover:A.css`
      &:hover {
        opacity: 0.85;
        cursor: pointer;
      }
    `}},ms=(0,F.memo)((0,F.forwardRef)(((e,t)=>{let{displayMax:a,tags:s,icon:n,onClick:r,className:i,getAriaLabel:o}=e;const l=(0,D.l4)(),c=gs(l,Boolean(a&&a>0)),d=s.length,u=a?s.slice(0,a):s;return(0,L.jsxs)("ul",{className:(0,A.cx)(c.wrapper,i),"aria-label":"Tags",ref:t,children:[u.map(((e,t)=>(0,L.jsx)("li",{className:c.li,children:(0,L.jsx)(ps,{name:e,icon:n,onClick:r,"aria-label":null==o?void 0:o(e,t),"data-tag-id":t})},e))),a&&a>0&&d-1>0&&(0,L.jsxs)("span",{className:c.moreTagsLabel,children:["+ ",d-1]})]})})));ms.displayName="TagList";const gs=(e,t)=>({wrapper:A.css`
      position: relative;
      align-items: ${t?"center":"unset"};
      display: flex;
      flex: 1 1 auto;
      flex-wrap: wrap;
      flex-shrink: ${t?0:1};
      justify-content: flex-end;
      gap: 6px;
    `,moreTagsLabel:A.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
    `,li:(0,A.css)({listStyle:"none"})}),fs=e=>{let{label:t,selected:a,onClick:s,icon:n="check"}=e;const r=(0,D.wW)(bs);return(0,L.jsxs)("div",{className:(0,A.cx)(r.wrapper,a&&r.selected),onClick:s,children:[(0,L.jsx)("span",{children:t}),a&&(0,L.jsx)(P.J,{name:n,className:r.icon})]})},bs=e=>({wrapper:A.css`
      padding: ${e.spacing(.25)} ${e.spacing(1)};
      background: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius(8)};
      padding: ${e.spacing(0,2)};
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.size.sm};
      color: ${e.colors.text.secondary};
      display: flex;
      align-items: center;
      height: 32px;
      cursor: pointer;

      &:hover {
        background: ${e.colors.action.hover};
        color: ${e.colors.text.primary};
      }
    `,selected:A.css`
      color: ${e.colors.text.primary};
      background: ${e.colors.action.selected};

      &:hover {
        background: ${e.colors.action.focus};
      }
    `,icon:A.css`
      margin-left: ${e.spacing(.5)};
    `});var vs=a("./packages/grafana-ui/src/components/Modal/Modal.tsx");const xs=e=>{let{isOpen:t,title:a,body:s,description:n,confirmText:r,confirmationText:i,dismissText:o="Cancel",alternativeText:l,icon:c="exclamation-triangle",onConfirm:d,onDismiss:u,onAlternative:p}=e;const[h,m]=(0,F.useState)(Boolean(i)),g=(0,D.wW)(ys),f=(0,F.useRef)(null);return(0,F.useEffect)((()=>{var e;t&&(null===(e=f.current)||void 0===e||e.focus())}),[t]),(0,L.jsxs)(vs.u,{className:g.modal,title:a,icon:c,isOpen:t,onDismiss:u,children:[(0,L.jsxs)("div",{className:g.modalText,children:[s,n?(0,L.jsx)("div",{className:g.modalDescription,children:n}):null,i?(0,L.jsx)("div",{className:g.modalConfirmationInput,children:(0,L.jsx)(di.Lh,{children:(0,L.jsx)(Je.I,{placeholder:`Type ${i} to confirm`,onChange:e=>{m(0!==(null==i?void 0:i.localeCompare(e.currentTarget.value)))}})})}):null]}),(0,L.jsxs)(vs.u.ButtonRow,{children:[(0,L.jsx)($.zx,{variant:"secondary",onClick:u,fill:"outline",children:o}),(0,L.jsx)($.zx,{variant:"destructive",onClick:d,disabled:h,ref:f,"aria-label":Ne.wl.pages.ConfirmModal.delete,children:r}),p?(0,L.jsx)($.zx,{variant:"primary",onClick:p,children:l}):null]})]})},ys=e=>({modal:A.css`
    width: 500px;
  `,modalText:(0,A.css)({fontSize:e.typography.h5.fontSize,color:e.colors.text.primary}),modalDescription:(0,A.css)({fontSize:e.typography.body.fontSize}),modalConfirmationInput:(0,A.css)({paddingTop:e.spacing(1)})});var ws=a("./.yarn/__virtual__/@grafana-slate-react-virtual-047372596b/3/opt/drone/yarncache/@grafana-slate-react-npm-0.22.10-grafana-510bc0576d-3417c53d9d.zip/node_modules/@grafana/slate-react/lib/slate-react.es.js"),js=a("./.yarn/__virtual__/slate-plain-serializer-virtual-9906fec247/3/opt/drone/yarncache/slate-plain-serializer-npm-0.7.10-484f263cc0-0fe3f736cb.zip/node_modules/slate-plain-serializer/lib/slate-plain-serializer.es.js"),Cs=a("../../opt/drone/yarncache/classnames-npm-2.3.1-f2ae0a8d3c-14db8889d5.zip/node_modules/classnames/index.js"),ks=a.n(Cs),Ss=a("./packages/grafana-ui/src/slate-plugins/index.ts");function Ts(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Os extends F.PureComponent{constructor(e,t){super(e,t),Ts(this,"plugins",void 0),Ts(this,"runOnChangeDebounced",void 0),Ts(this,"lastExecutedValue",null),Ts(this,"mounted",!1),Ts(this,"editor",null),Ts(this,"onChange",((e,t)=>{const a=e.document!==this.state.value.document,s=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(e),this.setState({value:e},(()=>{if(a){const a=js.Z.serialize(s)!==js.Z.serialize(e);a&&t&&this.runOnChangeAndRunQuery(),a&&!t&&this.runOnChangeDebounced()}}))})),Ts(this,"runOnChange",(()=>{const{onChange:e}=this.props,t=js.Z.serialize(this.state.value);e&&e(this.cleanText(t))})),Ts(this,"runOnRunQuery",(()=>{const{onRunQuery:e}=this.props;e&&(e(),this.lastExecutedValue=this.state.value)})),Ts(this,"runOnChangeAndRunQuery",(()=>{this.runOnChange(),this.runOnRunQuery()})),Ts(this,"handleBlur",((e,t,a)=>{const{onBlur:s}=this.props;if(s)s();else{(this.lastExecutedValue?js.Z.serialize(this.lastExecutedValue):null)!==js.Z.serialize(t.value)&&this.runOnChangeAndRunQuery()}return a()})),this.runOnChangeDebounced=(0,$t.debounce)(this.runOnChange,500);const{onTypeahead:a,cleanText:s,portalOrigin:n,onWillApplySuggestion:r}=e;this.plugins=[(0,Ss.bm)({onTypeahead:a,cleanText:s,portalOrigin:n,onWillApplySuggestion:r}),(0,Ss.dv)({handler:this.runOnChangeAndRunQuery}),(0,Ss.z2)(),(0,Ss.Gp)(),(0,Ss.$L)(),(0,Ss.Rc)(),(0,Ss.wl)(),...e.additionalPlugins||[]].filter((e=>e)),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,Z.makeValue)(e.query||"",e.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(e,t){const{query:a,syntax:s,syntaxLoaded:n}=this.props;if(!e.syntaxLoaded&&n&&this.editor){const e=this.editor.insertText(" ").deleteBackward(1);this.onChange(e.value,!0)}const{value:r}=this.state;a!==e.query&&a!==js.Z.serialize(r)&&this.setState({value:(0,Z.makeValue)(a||"",s)})}cleanText(e){return e.replace(/[\r]/g,"")}render(){const{disabled:e}=this.props,t=ks()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":e});return(0,L.jsx)("div",{className:t,children:(0,L.jsx)("div",{className:"slate-query-field","aria-label":Ne.wl.components.QueryField.container,children:(0,L.jsx)(ws.ML,{ref:e=>this.editor=e,schema:Z.SCHEMA,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:e=>{this.onChange(e.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})})})}}var _s=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsync.js");var Ns;const Is=e=>{const{loading:t,error:s,dependency:n}=(e=>{const t=(0,_s.Z)((async()=>await e));return Object.assign({},t,{dependency:t.value})})(a.e(2462).then(a.bind(a,"./packages/grafana-ui/src/components/Monaco/ReactMonacoEditor.tsx")));if(t)return Ns||(Ns=(0,L.jsx)(de,{text:""}));if(s)return(0,L.jsx)(vl,{title:"React Monaco Editor failed to load",error:s,errorInfo:{componentStack:(null==s?void 0:s.stack)||""}});const r=n.ReactMonacoEditor;return(0,L.jsx)(r,Object.assign({},e))};let Ps;function Ms(e,t,a,s){const n=[];for(const i of a){var r;t&&!i.label.startsWith(t)||n.push(Object.assign({},i,{kind:Fs(e,i.kind),range:s,insertText:null!==(r=i.insertText)&&void 0!==r?r:i.label}))}return n}function Fs(e,t){switch(t){case Ps.Method:return e.languages.CompletionItemKind.Method;case Ps.Field:return e.languages.CompletionItemKind.Field;case Ps.Property:return e.languages.CompletionItemKind.Property;case Ps.Constant:return e.languages.CompletionItemKind.Constant;case Ps.Text:return e.languages.CompletionItemKind.Text}return e.languages.CompletionItemKind.Text}function As(e,t,a){if(t&&a)return e.languages.registerCompletionItemProvider(t,{triggerCharacters:["$"],provideCompletionItems:(t,s,n)=>{const r={startLineNumber:s.lineNumber,endLineNumber:s.lineNumber,startColumn:s.column,endColumn:s.column};if("$"===n.triggerCharacter)return r.startColumn=s.column-1,{suggestions:Ms(e,"$",a(),r)};const i=t.getValueInRange({startLineNumber:s.lineNumber,startColumn:1,endLineNumber:s.lineNumber,endColumn:s.column}),{index:o,prefix:l}=function(e){for(let t=e.length-1;t>0;t--){const a=e.charAt(t);if("$"===a)return{index:t,prefix:e.substring(t)};if(" "===a||"\t"===a||'"'===a||"'"===a)return{index:t+1,prefix:e.substring(t+1)}}return{index:0,prefix:e}}(i);r.startColumn=o+1;const c=Ms(e,l,a(),r);return c.length?{suggestions:c}:void 0}})}function Ds(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e){e.Method="method",e.Field="field",e.Property="property",e.Constant="constant",e.Text="text"}(Ps||(Ps={}));class $s extends F.PureComponent{constructor(e){super(e),Ds(this,"completionCancel",void 0),Ds(this,"monaco",void 0),Ds(this,"loadCustomLanguage",(()=>{const{language:e}=this.props,t=ye.monacoLanguageRegistry.getIfExists(e);return t?t.init():Promise.resolve()})),Ds(this,"getEditorValue",(()=>"")),Ds(this,"onBlur",(()=>{const{onBlur:e}=this.props;e&&e(this.getEditorValue())})),Ds(this,"onSave",(()=>{const{onSave:e}=this.props;e&&e(this.getEditorValue())})),Ds(this,"handleBeforeMount",(e=>{this.monaco=e;const{language:t,getSuggestions:a,onBeforeEditorMount:s}=this.props;a&&(this.completionCancel=As(e,t,a)),null==s||s(e)})),Ds(this,"handleOnMount",((e,t)=>{const{onEditorDidMount:a}=this.props;this.getEditorValue=()=>e.getValue(),e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyS,this.onSave);const s=this.loadCustomLanguage();a&&s.then((()=>a(e,t)))}))}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(e){const{getSuggestions:t,language:a}=this.props,s=e.language!==a;if(e.getSuggestions!==t||s){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco)return void console.warn("Monaco instance not loaded yet");t&&(this.completionCancel=As(this.monaco,a,t))}s&&this.loadCustomLanguage()}render(){var e;const{theme:t,language:a,width:s,height:n,showMiniMap:r,showLineNumbers:i,readOnly:o,monacoOptions:l}=this.props,c=null!==(e=this.props.value)&&void 0!==e?e:"",d=c.length>100,u=Rs(t),p={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:d&&r,renderCharacters:!1},readOnly:o,lineNumbersMinChars:4,lineDecorationsWidth:1*t.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*t.spacing.gridSize,bottom:.5*t.spacing.gridSize},fixedOverflowWidgets:!0};return i||(p.glyphMargin=!1,p.folding=!1,p.lineNumbers="off",p.lineNumbersMinChars=0),(0,L.jsx)("div",{className:u.container,onBlur:this.onBlur,"aria-label":Ne.wl.components.CodeEditor.container,children:(0,L.jsx)(Is,{width:s,height:n,language:a,value:c,options:Object.assign({},p,null!=l?l:{}),beforeMount:this.handleBeforeMount,onMount:this.handleOnMount})})}}const Ls=(0,D.HE)($s),Rs=e=>({container:A.css`
      border-radius: ${e.shape.borderRadius()};
      border: 1px solid ${e.components.input.borderColor};
    `});function Es(e){const t="${"+e.value+"}",a=e.value===e.label?e.origin:`${e.label} / ${e.origin}`;return{label:t,kind:Ps.Property,detail:a,documentation:e.documentation}}var zs=a("./packages/grafana-ui/src/components/Modal/ModalHeader.tsx");const Vs=(0,D.Bb)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{tabsWrapper:!t&&A.css`
        border-bottom: 1px solid ${e.colors.border.weak};
      `,tabs:A.css`
      position: relative;
      display: flex;
      height: 41px;
    `}})),Bs=F.forwardRef(((e,t)=>{let{children:a,className:s,hideBorder:n}=e;const r=(0,D.l4)(),i=Vs(r,n);return(0,L.jsx)("div",{className:(0,A.cx)(i.tabsWrapper,s),ref:t,children:(0,L.jsx)("ul",{className:i.tabs,children:a})})}));Bs.displayName="TabsBar";var Us=a("./packages/grafana-ui/src/components/Tabs/Tab.tsx");const Hs=e=>{let{icon:t,title:a,tabs:s,activeTab:n,onChangeTab:r}=e;return(0,L.jsx)(zs.x,{icon:t,title:a,children:(0,L.jsx)(Bs,{hideBorder:!0,children:s.map(((e,t)=>(0,L.jsx)(Us.O,{label:e.label,icon:e.icon,suffix:e.tabSuffix,active:e.value===n,onChangeTab:()=>r(e)},`${e.value}-${t}`)))})})},qs=e=>{let{children:t}=e;return(0,L.jsx)("div",{className:"share-modal-body",children:(0,L.jsx)("div",{className:"share-modal-header",children:(0,L.jsx)("div",{className:"share-modal-content",children:t})})})};function Ws(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Gs=F.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class Zs extends F.Component{constructor(e){super(e),Ws(this,"showModal",((e,t)=>{this.setState({component:e,props:t})})),Ws(this,"hideModal",(()=>{this.setState({component:null,props:{}})})),this.state={component:e.component||null,props:e.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return(0,L.jsx)(Gs.Provider,{value:this.state,children:this.props.children})}}const Qs=()=>(0,L.jsx)(Gs.Consumer,{children:e=>{let{component:t,props:a}=e;return t?(0,L.jsx)(t,Object.assign({},a)):null}}),Ks=Gs.Consumer,Ys=F.memo((e=>{let{title:t,parent:a,pageIcon:s,onGoBack:n,children:r,titleHref:i,parentHref:o,leftItems:l,isFullscreen:c,className:d}=e;const u=(0,je.wW)(Js),p=(0,A.cx)("page-toolbar",u.toolbar,{"page-toolbar--fullscreen":c},d);return(0,L.jsxs)("div",{className:p,children:[s&&!n&&(0,L.jsx)("div",{className:u.pageIcon,children:(0,L.jsx)(P.J,{name:s,size:"lg","aria-hidden":!0})}),n&&(0,L.jsx)("div",{className:u.pageIcon,children:(0,L.jsx)(M.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl",surface:"dashboard","aria-label":Ne.wl.components.BackButton.backArrow,onClick:n})}),(0,L.jsxs)("nav",{"aria-label":"Search links",className:u.navElement,children:[a&&o&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(Ld,{"aria-label":`Search dashboard in the ${a} folder`,className:(0,A.cx)(u.titleText,u.parentLink,u.titleLink),href:o,children:[a," ",(0,L.jsx)("span",{className:u.parentIcon})]}),i&&(0,L.jsx)("span",{className:(0,A.cx)(u.titleText,u.titleDivider,u.parentLink),"aria-hidden":!0,children:"/"})]}),t&&i&&(0,L.jsx)("h1",{className:u.h1Styles,children:(0,L.jsx)(Ld,{"aria-label":"Search dashboard by name",className:(0,A.cx)(u.titleText,u.titleLink),href:i,children:t})}),t&&!i&&(0,L.jsx)("h1",{className:u.titleText,children:t})]}),null==l?void 0:l.map(((e,t)=>(0,L.jsx)("div",{className:u.leftActionItem,children:e},t))),(0,L.jsx)("div",{className:u.spacer}),F.Children.toArray(r).filter(Boolean).map(((e,t)=>(0,L.jsx)("div",{className:u.actionWrapper,children:e},t)))]})}));Ys.displayName="PageToolbar";const Js=e=>{const{spacing:t,typography:a}=e,s=(0,Me.getFocusStyles)(e),n=A.css`
    font-size: ${a.size.lg};
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin: 0;
    max-width: 240px;
    border-radius: 2px;

    @media ${D.GU.mediaUp(e.v1.breakpoints.xl)} {
      max-width: unset;
    }
  `;return{toolbar:A.css`
      align-items: center;
      background: ${e.colors.background.canvas};
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-end;
      padding: ${e.spacing(1.5,2)};
    `,spacer:A.css`
      flex-grow: 1;
    `,pageIcon:A.css`
      display: none;
      @media ${D.GU.mediaUp(e.v1.breakpoints.md)} {
        display: flex;
        padding-right: ${e.spacing(1)};
        align-items: center;
      }
    `,titleWrapper:A.css`
      display: flex;
      align-items: center;
      min-width: 0;
      overflow: hidden;
    `,navElement:A.css`
      display: flex;
    `,h1Styles:A.css`
      margin: 0;
      line-height: inherit;
      display: flex;
    `,parentIcon:A.css`
      margin-left: ${e.spacing(.5)};
    `,titleText:n,titleLink:A.css`
      &:focus-visible {
        ${s}
      }
    `,titleDivider:A.css`
      padding: ${t(0,.5,0,.5)};
    `,parentLink:A.css`
      display: none;
      @media ${D.GU.mediaUp(e.v1.breakpoints.md)} {
        display: unset;
      }
    `,actionWrapper:A.css`
      padding: ${t(.5,0,.5,1)};
    `,leftActionItem:A.css`
      display: none;
      @media ${D.GU.mediaUp(e.v1.breakpoints.md)} {
        align-items: center;
        display: flex;
        padding-left: ${t(.5)};
      }
    `}};var Xs=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Subject.js"),en=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),tn=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/never.js"),an=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/interval.js"),sn=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),nn=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/tap.js");function rn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class on extends F.PureComponent{constructor(e){super(e),rn(this,"propsSubject",void 0),rn(this,"subscription",void 0),this.propsSubject=new Xs.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,sn.w)((e=>qe.isLive(e.interval)?(0,en.of)({}):e.loading?tn.C:(0,an.F)((0,ye.stringToMs)(e.interval)))),(0,nn.b)((()=>this.props.func()))).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(e){qe.isLive(e.interval)&&qe.isLive(this.props.interval)||(0,$t.isEqual)(e,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}var ln=a("./.yarn/__virtual__/react-table-virtual-3932e42729/3/opt/drone/yarncache/react-table-npm-7.7.0-95e9357cd2-a679edecc7.zip/node_modules/react-table/index.js"),cn=a("./.yarn/__virtual__/react-window-virtual-0f9a8c6a67/3/opt/drone/yarncache/react-window-npm-1.8.6-4f5a230226-54ccf2b16c.zip/node_modules/react-window/dist/index.esm.js"),dn=a("../../opt/drone/yarncache/memoize-one-npm-6.0.0-8b2a2cd020-f185ea69f7.zip/node_modules/memoize-one/dist/memoize-one.esm.js"),un=a("./packages/grafana-ui/src/components/Table/types.ts"),pn=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),hn=a.n(pn);const mn=e=>{let{cell:t,field:a,tableStyles:s,onCellFilterAdded:n}=e;const r=(0,F.useCallback)((e=>n({key:a.name,operator:un.PT,value:t.value})),[t,a,n]),i=(0,F.useCallback)((e=>n({key:a.name,operator:un.tE,value:t.value})),[t,a,n]);return(0,L.jsxs)("div",{className:s.filterWrapper,children:[(0,L.jsx)("div",{className:s.filterItem,children:(0,L.jsx)(U.u,{content:"Filter for value",placement:"top",children:(0,L.jsx)(P.J,{name:"search-plus",onClick:r})})}),(0,L.jsx)("div",{className:s.filterItem,children:(0,L.jsx)(U.u,{content:"Filter out value",placement:"top",children:(0,L.jsx)(P.J,{name:"search-minus",onClick:i})})})]})},gn=e=>{const{field:t,cell:a,tableStyles:s,row:n,cellProps:r}=e,i=t.display(a.value);let o;o=F.isValidElement(a.value)?a.value:(0,ye.formattedValueToString)(i);const l=function(e,t,a){var s,n,r;if((null===(s=t.config.custom)||void 0===s?void 0:s.displayMode)===un.h2.ColorText)return e.buildCellContainerStyle(a.color);if((null===(n=t.config.custom)||void 0===n?void 0:n.displayMode)===un.h2.ColorBackgroundSolid){const t=hn()(a.color),s=(0,as.Gc)(a.color);return e.buildCellContainerStyle(s,t.toRgbString())}if((null===(r=t.config.custom)||void 0===r?void 0:r.displayMode)===un.h2.ColorBackground){const t=e.theme.isDark?1:-.7,s=hn()(a.color).darken(10*t).spin(5).toRgbString(),n=(0,as.Gc)(a.color);return e.buildCellContainerStyle(n,`linear-gradient(120deg, ${s}, ${a.color})`)}return e.cellContainer}(s,t,i),c=t.config.filterable,{link:d,onClick:u}=(0,as.iu)(t,n);return(0,L.jsxs)("div",Object.assign({},r,{className:l,children:[!d&&(0,L.jsx)("div",{className:s.cellText,children:o}),d&&(0,L.jsx)("a",{href:d.href,onClick:u,target:d.target,title:d.title,className:s.cellLink,children:o}),c&&void 0!==a.value&&(0,L.jsx)(mn,Object.assign({},e))]}))};var fn=a("./packages/grafana-ui/src/components/FormattedValueDisplay/FormattedValueDisplay.tsx"),bn=a("./packages/grafana-ui/src/utils/measureText.ts");const vn=1.5;let xn;!function(e){e.Basic="basic",e.Lcd="lcd",e.Gradient="gradient"}(xn||(xn={}));class yn extends F.PureComponent{render(){const{onClick:e,className:t}=this.props,{title:a}=this.props.value,s=function(e){const t={display:"flex",overflow:"hidden",width:"100%"},a=jn(e),s={fontSize:`${a.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};wn(e.orientation)?(t.flexDirection="column-reverse",s.textAlign="center"):"above"===a.placement?t.flexDirection="column":(t.flexDirection="row",s.width=`${a.width}px`,s.textAlign="right",s.paddingRight="10px");return{wrapper:t,title:s}}(this.props);return a?(0,L.jsxs)("div",{style:s.wrapper,onClick:e,className:t,children:[(0,L.jsx)("div",{style:s.title,children:a}),this.renderBarAndValue()]}):(0,L.jsx)("div",{style:s.wrapper,onClick:e,className:t,children:this.renderBarAndValue()})}renderBarAndValue(){return"lcd"===this.props.displayMode?this.renderRetroBars():this.renderBasicAndGradientBars()}renderBasicAndGradientBars(){const{value:e,showUnfilled:t}=this.props,a=function(e){var t,a;const{displayMode:s,field:n,value:r,alignmentFactors:i,orientation:o,theme:l,text:c}=e,{valueWidth:d,valueHeight:u,maxBarHeight:p,maxBarWidth:h}=Cn(e),m=null!==(t=n.min)&&void 0!==t?t:ye.GAUGE_DEFAULT_MINIMUM,g=null!==(a=n.max)&&void 0!==a?a:ye.GAUGE_DEFAULT_MAXIMUM,f=Sn(r.numeric,m,g),b=On(e),v=_n(i||r,b,d,u,o,c),x="basic"===s,y={display:"flex",flexGrow:1},w={borderRadius:"3px",position:"relative",zIndex:1},j={background:`rgba(${l.isDark?"255,255,255":"0,0,0"}, 0.07)`,flexGrow:1,display:"flex",borderRadius:"3px",position:"relative"};if(wn(o)){const t=Math.max(f*p,1);y.flexDirection="column",y.justifyContent="flex-end",w.transition="height 1s",w.height=`${t}px`,w.width=`${h}px`,j.bottom="-3px",j.width=`${d}px`,x?(w.background=`${hn()(b).setAlpha(.35).toRgbString()}`,w.borderTop=`2px solid ${b}`):w.background=Tn(e,p)}else{const t=Math.max(f*h,1);y.flexDirection="row-reverse",y.justifyContent="flex-end",y.alignItems="stretch",w.transition="width 1s",w.height=`${p}px`,w.width=`${t}px`,j.left="-3px",j.height=`${u}px`,x?(w.background=`${hn()(b).setAlpha(.35).toRgbString()}`,w.borderRight=`2px solid ${b}`):w.background=Tn(e,h)}return{wrapper:y,bar:w,value:v,emptyBar:j}}(this.props);return(0,L.jsxs)("div",{style:a.wrapper,children:[(0,L.jsx)(fn.W,{"data-testid":Ne.wl.components.Panels.Visualization.BarGauge.valueV2,value:e,style:a.value}),t&&(0,L.jsx)("div",{style:a.emptyBar}),(0,L.jsx)("div",{style:a.bar})]})}renderRetroBars(){var e,t;const{display:a,field:s,value:n,itemSpacing:r,alignmentFactors:i,orientation:o,lcdCellWidth:l,text:c}=this.props,{valueHeight:d,valueWidth:u,maxBarHeight:p,maxBarWidth:h,wrapperWidth:m,wrapperHeight:g}=Cn(this.props),f=null!==(e=s.min)&&void 0!==e?e:ye.GAUGE_DEFAULT_MINIMUM,b=null!==(t=s.max)&&void 0!==t?t:ye.GAUGE_DEFAULT_MAXIMUM,v=wn(o),x=b-f,y=v?p:h,w=r,j=Math.floor(y/l),C=Math.floor((y-w*j)/j),k=_n(i||n,On(this.props),u,d,o,c),S={width:`${m}px`,height:`${g}px`,display:"flex"};v?(S.flexDirection="column-reverse",S.alignItems="center"):(S.flexDirection="row",S.alignItems="center",k.justifyContent="flex-end");const T=[];for(let e=0;e<j;e++){const t=kn(f+x/j*e,n,a),s={borderRadius:"2px"};t.isLit?s.backgroundImage=`radial-gradient(${t.background} 10%, ${t.backgroundShade})`:s.backgroundColor=t.background,v?(s.height=`${C}px`,s.width=`${h}px`,s.marginTop=`${w}px`):(s.width=`${C}px`,s.height=`${p}px`,s.marginRight=`${w}px`),T.push((0,L.jsx)("div",{style:s},e.toString()))}return(0,L.jsxs)("div",{style:S,children:[T,(0,L.jsx)(fn.W,{"data-testid":Ne.wl.components.Panels.Visualization.BarGauge.valueV2,value:n,style:k})]})}}function wn(e){return e===ye.VizOrientation.Vertical}function jn(e){var t;const{height:a,width:s,alignmentFactors:n,orientation:r,text:i}=e,o=n?n.title:e.value.title;if(!o)return{fontSize:0,width:0,height:0,placement:"above"};if(wn(r)){var l;const e=null!==(l=null==i?void 0:i.titleSize)&&void 0!==l?l:14;return{fontSize:e,width:s,height:e*vn,placement:"below"}}if(a>40){if(null!=i&&i.titleSize)return{fontSize:null==i?void 0:i.titleSize,width:0,height:i.titleSize*vn,placement:"above"};const e=.45,t=Math.max(Math.min(a*e,50),17);return{fontSize:t/vn,width:0,height:t,placement:"above"}}const c=Math.max(.6*a,18)/vn,d=(0,bn.X1)(o,c),u=Math.min(d.width+15,.4*s);return{fontSize:null!==(t=null==i?void 0:i.titleSize)&&void 0!==t?t:c,height:0,width:u,placement:"left"}}function Cn(e){var t;const{height:a,width:s,orientation:n,text:r,alignmentFactors:i}=e,o=jn(e),l=null!=i?i:e.value,c=(0,ye.formattedValueToString)(l);let d=0,u=0,p=0,h=0,m=0,g=0;const f=null!==(t=null==r?void 0:r.valueSize)&&void 0!==t?t:Math.max(o.fontSize,12),b=(0,bn.X1)(c,f).width+20;return wn(n)?(p=null!=r&&r.valueSize?1*r.valueSize:Math.min(Math.max(.1*a,18),50),h=s,d=a-(o.height+p),u=s,m=s,g=a-o.height):(p=a-o.height,h=Math.max(Math.min(.2*s,150),b),d=a-o.height,u=s-h-o.width,"above"===o.placement?(m=s,g=a-o.height):(m=s-o.width,g=a)),{valueWidth:h,valueHeight:p,maxBarWidth:u,maxBarHeight:d,wrapperHeight:g,wrapperWidth:m}}function kn(e,t,a){if(null===e)return{background:ye.FALLBACK_COLOR,border:ye.FALLBACK_COLOR};const s=a?a(e).color:null;return s?null===t||isNaN(t.numeric)||null!==e&&e>t.numeric?{background:hn()(s).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:hn()(s).setAlpha(.95).toRgbString(),backgroundShade:hn()(s).setAlpha(.55).toRgbString(),border:hn()(s).setAlpha(.9).toRgbString(),isLit:!0}:{background:ye.FALLBACK_COLOR,border:ye.FALLBACK_COLOR}}function Sn(e,t,a){return Math.min((e-t)/(a-t),1)}function Tn(e,t){var a,s;const{field:n,value:r,orientation:i,theme:o}=e,l=wn(i)?"0deg":"90deg",c=n.min,d=n.max;let u="",p=0,h=(0,ye.getFieldColorMode)(null===(a=n.color)||void 0===a?void 0:a.mode);if(h.id===ye.FieldColorModeId.Thresholds){const a=n.thresholds;for(let s=0;s<a.steps.length;s++){const n=a.steps[s],i=e.theme.visualization.getColorByName(n.color),o=a.mode===ye.ThresholdsMode.Percentage?n.value/100:Sn(n.value,c,d),h=o*t,m=Math.round(h-(h-p)/2),g=a.mode===ye.ThresholdsMode.Percentage?c+(d-c)*o:n.value;if(""===u)u=`linear-gradient(${l}, ${i}, ${i}`;else{if(r.numeric<g)break;p=h,u+=` ${m}px, ${i}`}}return u+")"}if(h.isContinuous&&h.getColors){const e=h.getColors(o);for(let a=0;a<e.length;a++){const s=e[a];if(""===u)u=`linear-gradient(${l}, ${s} 0px`;else{u+=`, ${s} ${a/(e.length-1)*t}px`}}return u+")"}return null!==(s=r.color)&&void 0!==s?s:ye.FALLBACK_COLOR}function On(e){const{value:t}=e;return t.color?t.color:ye.FALLBACK_COLOR}function _n(e,t,a,s,n,r){const i={color:t,height:`${s}px`,width:`${a}px`,display:"flex",alignItems:"center",lineHeight:1};let o=a;const l=(0,ye.formattedValueToString)(e);var c,d;wn(n)?(i.fontSize=null!==(c=null==r?void 0:r.valueSize)&&void 0!==c?c:(0,bn.MX)(l,o,s,1),i.justifyContent="center"):(i.fontSize=null!==(d=null==r?void 0:r.valueSize)&&void 0!==d?d:(0,bn.MX)(l,o-20,s,1),i.justifyContent="flex-end",i.paddingLeft="10px",i.paddingRight="10px",o-=10);return i}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(yn,"defaultProps",{lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:xn.Gradient,orientation:ye.VizOrientation.Horizontal,field:{min:0,max:100,thresholds:{mode:ye.ThresholdsMode.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0});var Nn=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useClickAway.js");const In=F.memo((e=>{let{x:t,y:a,onClose:s,renderMenuItems:n,renderHeader:r}=e;const i=(0,F.useRef)(null),[o,l]=(0,F.useState)({});(0,F.useLayoutEffect)((()=>{const e=i.current;if(e){const s=e.getBoundingClientRect(),n=5,r={right:window.innerWidth<t+s.width,bottom:window.innerHeight<s.bottom+s.height+n};l({position:"fixed",left:r.right?t-s.width-n:t-n,top:r.bottom?a-s.height-n:a+n})}}),[t,a]),(0,Nn.Z)(i,(()=>{null==s||s()}));const c=null==r?void 0:r(),d=null==n?void 0:n();return(0,L.jsx)(W.h,{children:(0,L.jsx)(Oe,{header:c,ref:i,style:o,ariaLabel:Ne.wl.components.Menu.MenuComponent("Context"),onOpen:e=>{e(0)},onClick:s,onKeyDown:e=>{"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),null==s||s())},children:d})})}));In.displayName="ContextMenu";const Pn=e=>{let{children:t,renderMenuItems:a}=e;const[s,n]=(0,F.useState)(!1),[r,i]=(0,F.useState)({x:0,y:0});return(0,L.jsxs)(L.Fragment,{children:[t({openMenu:e=>{n(!0),i({x:e.pageX,y:e.pageY})}}),s&&(0,L.jsx)(In,{onClose:()=>n(!1),x:r.x,y:r.y,renderMenuItems:a})]})};var Mn=a("./packages/grafana-ui/src/utils/dataLinks.ts");const Fn=e=>{let{label:t,ariaLabel:a,children:s}=e;const n=(0,D.wW)(An),r=`group-label-${(0,$t.uniqueId)()}`;return(0,L.jsxs)("div",{role:"group","aria-labelledby":!a&&t?r:void 0,"aria-label":a,children:[t&&(0,L.jsx)("label",{id:r,className:n.groupLabel,"aria-hidden":!0,children:t}),s]})};Fn.displayName="MenuGroup";const An=e=>({groupLabel:A.css`
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.size.sm};
      padding: ${e.spacing(.5,1)};
    `}),Dn=e=>{let{children:t,links:a,config:s}=e;const n=s.links.length,r=[{items:(0,Mn.R)(a),label:"Data links"}],i=()=>r.map(((e,t)=>(0,L.jsx)(Fn,{label:e.label,children:(e.items||[]).map((e=>(0,L.jsx)(Fe,{url:e.url,label:e.label,target:e.target,icon:e.icon,active:e.active,onClick:e.onClick},e.label)))},`${e.label}${t}`))),o=A.css`
    cursor: context-menu;
  `;if(n>1)return(0,L.jsx)(Pn,{renderMenuItems:i,children:e=>{let{openMenu:a}=e;return t({openMenu:a,targetClassName:o})}});{const e=a()[0];return(0,L.jsx)("a",{href:e.href,onClick:e.onClick,target:e.target,title:e.title,style:{display:"flex",width:"100%"},"aria-label":Ne.wl.components.DataLinksContextMenu.singleLink,children:t({})})}},$n={mode:ye.ThresholdsMode.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},Ln=e=>{const{field:t,innerWidth:a,tableStyles:s,cell:n,cellProps:r,row:i}=e;let o=(0,ye.getFieldConfigWithMinMax)(t,!1);o.thresholds||(o=Object.assign({},o,{thresholds:$n}));const l=t.display(n.value);let c=xn.Gradient;t.config.custom&&t.config.custom.displayMode===un.h2.LcdGauge?c=xn.Lcd:t.config.custom&&t.config.custom.displayMode===un.h2.BasicGauge&&(c=xn.Basic);const d=()=>(0,$t.isFunction)(t.getLinks)?t.getLinks({valueRowIndex:i.index}):[],u=!!d().length;return(0,L.jsxs)("div",Object.assign({},r,{className:s.cellContainer,children:[u&&(0,L.jsx)(Dn,{links:d,config:o,children:e=>(e=>{const{openMenu:n,targetClassName:r}=e;return(0,L.jsx)(yn,{width:a,height:s.cellHeightInner,field:o,display:t.display,text:{valueSize:14},value:l,orientation:ye.VizOrientation.Horizontal,theme:s.theme,onClick:n,className:r,itemSpacing:1,lcdCellWidth:8,displayMode:c})})(e)}),!u&&(0,L.jsx)(yn,{width:a,height:s.cellHeightInner,field:o,display:t.display,text:{valueSize:14},value:l,orientation:ye.VizOrientation.Horizontal,theme:s.theme,itemSpacing:1,lcdCellWidth:8,displayMode:c})]}))};function Rn(e){return!!e&&"object"===typeof e}function En(e){if(void 0===e)return"";if(null===e)return"Object";if("object"==typeof e&&!e.constructor)return"Object";const t=/function ([^(]*)/.exec(e.constructor.toString());return t&&t.length>1?t[1]:""}function zn(e){return null===e?"null":typeof e}function Vn(e,t){const a=zn(e);return"null"===a||"undefined"===a?a:("string"===a&&(t='"'+(t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"')),"function"===a?e.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{…}":t)}function Bn(e){return`json-formatter-${e}`}function Un(e,t,a){const s=document.createElement(e);return t&&s.classList.add(Bn(t)),void 0!==a&&(a instanceof Node?s.appendChild(a):s.appendChild(document.createTextNode(String(a)))),s}function Hn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const qn=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,Wn=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,Gn=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,Zn=window.requestAnimationFrame||(e=>(e(),0)),Qn={animateOpen:!0,animateClose:!0};class Kn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qn,s=arguments.length>3?arguments[3]:void 0;Hn(this,"_isOpen",null),Hn(this,"element",null),Hn(this,"skipChildren",!1),this.json=e,this.open=t,this.config=a,this.key=s}get isOpen(){return null!==this._isOpen?this._isOpen:this.open>0}set isOpen(e){this._isOpen=e}get isDate(){return"string"===this.type&&(qn.test(this.json)||Gn.test(this.json)||Wn.test(this.json))}get isUrl(){return"string"===this.type&&0===this.json.indexOf("http")}get isArray(){return Array.isArray(this.json)}get isObject(){return Rn(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return void 0!==this.key}get constructorName(){return En(this.json)}get type(){return zn(this.json)}get keys(){return this.isObject?Object.keys(this.json).map((e=>e||'""')):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(Bn("open")))}openAtDepth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e<0||(this.open=e,this.isOpen=0!==e,this.element&&(this.removeChildren(!1),0===e?this.element.classList.remove(Bn("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(Bn("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,$t.isNumber)(this.json[0])||(0,$t.isNumber)(this.json[1]))}renderArray(){const e=Un("span");return e.appendChild(Un("span","bracket","[")),this.isNumberArray()?(this.json.forEach(((t,a)=>{a>0&&e.appendChild(Un("span","array-comma",",")),e.appendChild(Un("span","number",t))})),this.skipChildren=!0):e.appendChild(Un("span","number",this.json.length)),e.appendChild(Un("span","bracket","]")),e}render(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.element=Un("div","row");const t=Un("a","toggler-link"),a=Un("span","toggler");if(this.isObject&&t.appendChild(a),this.hasKey&&t.appendChild(Un("span","key",`${this.key}:`)),this.isObject){const e=Un("span","value"),a=Un("span"),s=Un("span","constructor-name",this.constructorName);if(a.appendChild(s),this.isArray){const e=this.renderArray();a.appendChild(e)}e.appendChild(a),t.appendChild(e)}else{const e=this.isUrl?Un("a"):Un("span");e.classList.add(Bn(this.type)),this.isDate&&e.classList.add(Bn("date")),this.isUrl&&(e.classList.add(Bn("url")),e.setAttribute("href",this.json));const a=Vn(this.json,this.json);e.appendChild(document.createTextNode(a)),t.appendChild(e)}const s=Un("div","children");return this.isObject&&s.classList.add(Bn("object")),this.isArray&&s.classList.add(Bn("array")),this.isEmpty&&s.classList.add(Bn("empty")),this.config&&this.config.theme&&this.element.classList.add(Bn(this.config.theme)),this.isOpen&&this.element.classList.add(Bn("open")),e||this.element.appendChild(t),this.skipChildren?t.removeChild(a):this.element.appendChild(s),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&t.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.element&&this.element.querySelector(`div.${Bn("children")}`);if(t&&!this.isEmpty)if(e){let e=0;const a=()=>{const s=this.keys[e],n=new Kn(this.json[s],this.open-1,this.config,s);t.appendChild(n.render()),e+=1,e<this.keys.length&&(e>10?a():Zn(a))};Zn(a)}else this.keys.forEach((e=>{const a=new Kn(this.json[e],this.open-1,this.config,e);t.appendChild(a.render())}))}removeChildren(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.element&&this.element.querySelector(`div.${Bn("children")}`);if(e){let e=0;const a=()=>{t&&t.children.length&&(t.removeChild(t.children[0]),e+=1,e>10?a():Zn(a))};Zn(a)}else t&&(t.innerHTML="")}}function Yn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Jn extends F.PureComponent{constructor(){super(...arguments),Yn(this,"wrapperRef",(0,F.createRef)()),Yn(this,"renderJson",(()=>{const{json:e,config:t,open:a,onDidRender:s}=this.props,n=this.wrapperRef.current,r=new Kn(e,a,t);n.hasChildNodes()?n.replaceChild(r.render(),n.lastChild):n.appendChild(r.render()),s&&s(r.json)}))}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:e}=this.props;return(0,L.jsx)("div",{className:e,ref:this.wrapperRef})}}function Xn(e){const{cell:t,tableStyles:a,cellProps:s,field:n,row:r}=e,i=A.css`
    cursor: pointer;
    font-family: monospace;
  `;let o=t.value,l=o;if((0,$t.isString)(o))try{o=JSON.parse(o)}catch{}else l=JSON.stringify(o,null," ");const c=(0,L.jsx)(er,{value:o}),{link:d,onClick:u}=(0,as.iu)(n,r);return(0,L.jsx)(U.u,{placement:"auto-start",content:c,theme:"info-alt",children:(0,L.jsxs)("div",Object.assign({},s,{className:a.cellContainer,children:[!d&&(0,L.jsx)("div",{className:(0,A.cx)(a.cellText,i),children:o}),d&&(0,L.jsx)("a",{href:d.href,onClick:u,target:d.target,title:d.title,className:a.cellLink,children:l})]}))})}function er(e){const t=(0,D.wW)(tr);return(0,L.jsx)("div",{className:t.container,children:(0,L.jsx)("div",{children:(0,L.jsx)(Jn,{json:e.value,open:4,className:t.json})})})}function tr(e){return{container:A.css`
      padding: ${e.spacing(.5)};
    `,json:A.css`
      width: fit-content;
      max-height: 70vh;
      overflow-y: auto;
    `}}Yn(Jn,"defaultProps",{open:3,config:{animateOpen:!0}});var ar=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/geom/Geometry.js"),sr=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/format/WKT.js");function nr(e){const{cell:t,tableStyles:a,cellProps:s}=e;let n="";return t.value instanceof ar.Z?n=(new sr.Z).writeGeometry(t.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):null!=t.value&&(n=`${t.value}`),(0,L.jsx)("div",Object.assign({},s,{className:a.cellContainer,children:(0,L.jsx)("div",{className:a.cellText,style:{fontFamily:"monospace"},children:n})}))}const rr=e=>{const{field:t,cell:a,tableStyles:s,row:n,cellProps:r}=e,i=t.display(a.value),{link:o,onClick:l}=(0,as.iu)(t,n);return(0,L.jsxs)("div",Object.assign({},r,{className:s.cellContainer,children:[!o&&(0,L.jsx)("img",{src:i.text,className:s.imageCell}),o&&(0,L.jsx)("a",{href:o.href,onClick:l,target:o.target,title:o.title,className:s.imageCellLink,children:(0,L.jsx)("img",{src:i.text,className:s.imageCell})})]}))},ir=e=>{const{colors:t}=e,a=e.colors.background.secondary,s=e.colors.border.weak,n=e.colors.primary.border,r=e.typography.body.lineHeight,i=12+14*r,o=e.colors.emphasize(e.colors.background.primary,.03),l=Math.max((0,as.np)(),6),c=(t,a)=>A.css`
      padding: ${6}px;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      border-right: 1px solid ${s};

      ${t?`color: ${t};`:""};
      ${a?`background: ${a};`:""};
      background-clip: padding-box;

      &:last-child:not(:only-child) {
        border-right: none;
        padding-right: ${l}px;
      }

      &:hover {
        overflow: visible;
        width: auto !important;
        box-shadow: 0 0 2px ${e.colors.primary.main};
        background: ${null!=a?a:o};
        z-index: 1;

        .cell-filter-actions  {
          display: inline-flex;
        }
      }
      a {
        color: inherit;
      }
    `;return{theme:e,cellHeight:i,buildCellContainerStyle:c,cellPadding:6,lastChildExtraPadding:l,cellHeightInner:14*r,rowHeight:i+2,table:A.css`
      height: 100%;
      width: 100%;
      overflow: auto;
      display: flex;
    `,thead:A.css`
      label: thead;
      height: ${i}px;
      overflow-y: auto;
      overflow-x: hidden;
      background: ${a};
      position: relative;
    `,tfoot:A.css`
      label: tfoot;
      height: ${i}px;
      overflow-y: auto;
      overflow-x: hidden;
      background: ${a};
      position: relative;
    `,headerCell:A.css`
      padding: ${6}px;
      overflow: hidden;
      white-space: nowrap;
      color: ${t.primary.text};
      border-right: 1px solid ${e.colors.border.weak};
      display: flex;

      &:last-child {
        border-right: none;
      }
    `,headerCellLabel:A.css`
      border: none;
      padding: 0;
      background: inherit;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: flex;
      margin-right: ${e.spacing(.5)};
    `,cellContainer:c(),cellText:A.css`
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
    `,cellLink:A.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      text-decoration: underline;
    `,imageCellLink:A.css`
      cursor: pointer;
      overflow: hidden;
      width: 100%;
      height: 100%;
    `,headerFilter:A.css`
      label: headerFilter;
      cursor: pointer;
    `,row:A.css`
      label: row;
      border-bottom: 1px solid ${s};

      &:hover {
        background-color: ${o};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,imageCell:A.css`
      height: 100%;
    `,resizeHandle:A.css`
      label: resizeHandle;
      cursor: col-resize !important;
      display: inline-block;
      background: ${n};
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      width: 8px;
      height: 100%;
      position: absolute;
      right: -4px;
      border-radius: 3px;
      top: 0;
      touch-action: none;

      &:hover {
        opacity: 1;
      }
    `,filterWrapper:(0,A.cx)(A.css`
        label: filterWrapper;
        display: none;
        justify-content: flex-end;
        flex-grow: 1;
        opacity: 0.6;
        padding-left: ${e.spacing(.25)};
      `,"cell-filter-actions"),filterItem:A.css`
      label: filterItem;
      cursor: pointer;
      padding: 0 ${e.spacing(.025)};
    `,typeIcon:A.css`
      margin-right: ${e.spacing(1)};
      color: ${e.colors.text.secondary};
    `,noData:A.css`
      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      width: 100%;
    `}};var or;const lr=e=>or||(or=(0,L.jsx)("span",{children:" "})),cr=["key"];const dr=e=>{const{totalColumnsWidth:t,footerGroups:a,height:s}=e,n=Ne.wl.components.Panels.Visualization.Table,r=(0,D.wW)(ir);return(0,L.jsx)("table",{style:{position:"absolute",width:t?`${t}px`:"100%",bottom:"0px"},children:a.map((e=>{const t=e.getFooterGroupProps(),{key:a}=t,i=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(t,cr);return(0,F.createElement)("tfoot",Object.assign({className:r.tfoot},i,{key:a,"data-testid":n.footer,style:s?{height:`${s}px`}:void 0}),(0,L.jsx)("tr",{children:e.headers.map(((e,t)=>function(e,t,a){var s;const n=e.getHeaderProps();if(!n)return null;n.style=null!==(s=n.style)&&void 0!==s?s:{},n.style.position="absolute",n.style.justifyContent=e.justifyContent,a&&(n.style.height=a);return(0,L.jsx)("th",Object.assign({className:t.headerCell},n,{children:e.render("Footer")}))}(e,r,s)))}))}))})};function ur(e,t){return void 0===t?lr:(e=>{const t=A.css`
    width: 100%;
    list-style: none;
  `,a=A.css`
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  `;return e.value&&!Array.isArray(e.value)?(0,L.jsx)("span",{children:e.value}):e.value&&Array.isArray(e.value)&&e.value.length>0?(0,L.jsx)("ul",{className:t,children:e.value.map(((e,t)=>{const s=Object.keys(e)[0];return(0,L.jsxs)("li",{className:a,children:[(0,L.jsxs)("span",{children:[s,":"]}),(0,L.jsx)("span",{children:e[s]})]},t)}))}):lr})({value:t[e]})}function pr(e){if(!e)return"flex-start";if(e.config.custom){switch(e.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}}return e.type===ye.FieldType.number?"flex-end":"flex-start"}function hr(e,t){switch(e){case un.h2.ColorText:case un.h2.ColorBackground:return gn;case un.h2.Image:return rr;case un.h2.LcdGauge:case un.h2.BasicGauge:case un.h2.GradientGauge:return Ln;case un.h2.JSONView:return Xn}return t.type===ye.FieldType.geo?nr:t.type===ye.FieldType.other?Xn:gn}function mr(e){return function(t,a,s){return 0===t.length?t:s&&e?t.filter((t=>{if(!t.values.hasOwnProperty(a))return!1;const n=gr(t,e);return void 0!==s.find((e=>e.value===n))})):t}}function gr(e,t){if(!t||!e)return"";const a=t.values.get(e.index),s=t.display?t.display(a):a;return t.display?(0,ye.formattedValueToString)(s):s}function fr(e,t){return void 0===e.label&&void 0===t.label?0:void 0===e.label&&void 0!==t.label?-1:void 0!==e.label&&void 0===t.label?1:e.label<t.label?-1:e.label>t.label?1:0}function br(e,t,a){return String(e.values[a]).localeCompare(String(t.values[a]),void 0,{sensitivity:"base"})}function vr(e,t,a){const s=xr(e.values[a]),n=xr(t.values[a]);return s===n?0:s>n?1:-1}function xr(e){return null==e||""===e||isNaN(e)?Number.NEGATIVE_INFINITY:"number"==typeof e?e:Number(e)}const yr=e=>{var t;let{cell:a,tableStyles:s,onCellFilterAdded:n,columnIndex:r,columnCount:i}=e;const o=a.getCellProps(),l=a.column.field;if(!l.display)return null;o.style&&(o.style.minWidth=o.style.width,o.style.justifyContent=a.column.justifyContent);let c=(null!==(t=a.column.width)&&void 0!==t?t:24)-2*s.cellPadding;return r===i-1&&(c-=s.lastChildExtraPadding),a.render("Cell",{field:l,tableStyles:s,onCellFilterAdded:n,cellProps:o,innerWidth:c})};var wr;const jr=e=>{let{options:t,values:a,caseSensitive:s,onChange:n}=e;const r=(0,D.l4)(),i=Cr(r),[o,l]=(0,F.useState)(""),c=(0,F.useMemo)((()=>new RegExp(o,s?void 0:"i")),[o,s]),d=(0,F.useMemo)((()=>t.filter((e=>void 0!==e.label&&c.test(e.label)))),[t,c]),u=r.spacing.gridSize,p=(0,F.useMemo)((()=>Math.min(28*d.length,140)+u),[u,d.length]),h=(0,F.useCallback)((e=>{l(e)}),[l]),m=(0,F.useCallback)((e=>t=>{const s=t.currentTarget.checked?a.concat(e):a.filter((t=>t.value!==e.value));n(s)}),[n,a]);return(0,L.jsxs)(di.wc,{spacing:"md",children:[(0,L.jsx)(eu,{placeholder:"Filter values",onChange:h,value:o}),!d.length&&(wr||(wr=(0,L.jsx)(Od._,{children:"No values"}))),d.length&&(0,L.jsx)(cn.t7,{height:p,itemCount:d.length,itemSize:28,width:"100%",className:i.filterList,children:e=>{let{index:t,style:s}=e;const n=d[t],{value:r,label:o}=n,l=void 0!==a.find((e=>e.value===r));return(0,L.jsx)("div",{className:i.filterListRow,style:s,title:o,children:(0,L.jsx)(Md,{value:l,label:o,onChange:m(n)})})}})]})},Cr=(0,D.Bb)((e=>({filterList:A.css`
    label: filterList;
  `,filterListRow:A.css`
    label: filterListRow;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: ${e.spacing(.5)};

    :hover {
      background-color: ${e.colors.action.hover};
    }
  `}))),kr=e=>{let{column:{preFilteredRows:t,filterValue:a,setFilter:s},onClose:n,field:r}=e;const i=(0,D.l4)(),o=(0,F.useMemo)((()=>function(e,t){if(!t||0===e.length)return{};const a={};for(let s=0;s<e.length;s++){const n=gr(e[s],t);a[n||"(Blanks)"]=n}return a}(t,r)),[t,r]),l=(0,F.useMemo)((()=>{return e=o,Object.keys(e).reduce(((t,a)=>t.concat({value:e[a],label:a})),[]).sort(fr);var e}),[o]),c=(0,F.useMemo)((()=>function(e,t){return t?e.filter((e=>t.some((t=>t.value===e.value)))):[]}(l,a)),[l,a]),[d,u]=(0,F.useState)(c),[p,h]=(0,F.useState)(!1),m=(0,F.useCallback)((e=>n()),[n]),g=(0,F.useCallback)((e=>{const t=d.length?d:void 0;s(t),n()}),[s,d,n]),f=(0,F.useCallback)((e=>{s(void 0),n()}),[s,n]),b=(0,F.useMemo)((()=>void 0!==a),[a]),v=(0,D.yK)(Sr);return(0,L.jsx)(we.L,{onClick:m,useCapture:!0,children:(0,L.jsx)("div",{className:(0,A.cx)(v.filterContainer),onClick:Tr,children:(0,L.jsxs)(di.wc,{spacing:"lg",children:[(0,L.jsxs)(di.wc,{spacing:"xs",children:[(0,L.jsxs)(di.Lh,{justify:"space-between",align:"center",children:[(0,L.jsx)(Od._,{className:v.label,children:"Filter by values:"}),(0,L.jsx)(M.h,{name:"text-fields",tooltip:"Match case",style:{color:p?i.colors.text.link:i.colors.text.disabled},onClick:()=>{h((e=>!e))}})]}),(0,L.jsx)("div",{className:(0,A.cx)(v.listDivider)}),(0,L.jsx)(jr,{onChange:u,values:d,options:l,caseSensitive:p})]}),(0,L.jsxs)(di.Lh,{spacing:"lg",children:[(0,L.jsxs)(di.Lh,{children:[(0,L.jsx)($.zx,{size:"sm",onClick:g,children:"Ok"}),(0,L.jsx)($.zx,{size:"sm",variant:"secondary",onClick:m,children:"Cancel"})]}),b&&(0,L.jsx)(di.Lh,{children:(0,L.jsx)($.zx,{fill:"text",size:"sm",onClick:f,children:"Clear filter"})})]})]})})})},Sr=(0,D.Bb)((e=>({filterContainer:A.css`
    label: filterContainer;
    width: 100%;
    min-width: 250px;
    height: 100%;
    max-height: 400px;
    background-color: ${e.colors.bg1};
    border: ${e.border.width.sm} solid ${e.colors.border2};
    padding: ${e.spacing.md};
    margin: ${e.spacing.sm} 0;
    box-shadow: 0px 0px 20px ${e.colors.dropdownShadow};
    border-radius: ${e.spacing.xs};
  `,listDivider:A.css`
    label: listDivider;
    width: 100%;
    border-top: ${e.border.width.sm} solid ${e.colors.border2};
    padding: ${e.spacing.xs} ${e.spacing.md};
  `,label:A.css`
    margin-bottom: 0;
  `}))),Tr=e=>{e.stopPropagation()};var Or;const _r=e=>{var t;let{column:a,field:s,tableStyles:n}=e;const r=(0,F.useRef)(null),[i,o]=(0,F.useState)(!1),l=(0,D.yK)(Nr),c=(0,F.useMemo)((()=>Boolean(a.filterValue)),[a.filterValue]),d=(0,F.useCallback)((()=>o(!0)),[o]),u=(0,F.useCallback)((()=>o(!1)),[o]);return s&&null!==(t=s.config.custom)&&void 0!==t&&t.filterable?(0,L.jsxs)("span",{className:(0,A.cx)(n.headerFilter,c?l.filterIconEnabled:l.filterIconDisabled),ref:r,onClick:d,children:[Or||(Or=(0,L.jsx)(P.J,{name:"filter"})),i&&r.current&&(0,L.jsx)(q.J,{content:(0,L.jsx)(kr,{column:a,tableStyles:n,field:s,onClose:u}),placement:"bottom-start",referenceElement:r.current,show:!0})]}):null},Nr=(0,D.Bb)((e=>({filterIconEnabled:A.css`
    label: filterIconEnabled;
    color: ${e.colors.textBlue};
  `,filterIconDisabled:A.css`
    label: filterIconDisabled;
    color: ${e.colors.textFaint};
  `})));var Ir,Pr,Mr=a("./packages/grafana-ui/src/types/index.ts");const Fr=["key"];const Ar=e=>{const{headerGroups:t,data:a,showTypeIcons:s}=e,n=Ne.wl.components.Panels.Visualization.Table,r=(0,D.wW)(ir);return(0,L.jsx)("div",{role:"rowgroup",children:t.map((e=>{const t=e.getHeaderGroupProps(),{key:i}=t,o=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(t,Fr);return(0,F.createElement)("div",Object.assign({className:r.thead},o,{key:i,"aria-label":n.header,role:"row"}),e.headers.map(((e,t)=>function(e,t,a,s){const n=e.getHeaderProps();e.canResize&&(n.style.userSelect=e.isResizing?"none":"auto");return n.style.position="absolute",n.style.justifyContent=e.justifyContent,(0,L.jsxs)("div",Object.assign({className:t.headerCell},n,{role:"columnheader",children:[e.canSort&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("button",Object.assign({},e.getSortByToggleProps(),{className:t.headerCellLabel,children:[s&&(0,L.jsx)(P.J,{name:(0,Mr.e7)(a),title:null==a?void 0:a.type,size:"sm",className:t.typeIcon}),(0,L.jsx)("div",{children:e.render("Header")}),(0,L.jsx)("div",{children:e.isSorted&&(e.isSortedDesc?Ir||(Ir=(0,L.jsx)(P.J,{name:"arrow-down"})):Pr||(Pr=(0,L.jsx)(P.J,{name:"arrow-up"})))})]})),e.canFilter&&(0,L.jsx)(_r,{column:e,tableStyles:t,field:a})]}),!e.canSort&&e.render("Header"),!e.canSort&&e.canFilter&&(0,L.jsx)(_r,{column:e,tableStyles:t,field:a}),e.canResize&&(0,L.jsx)("div",Object.assign({},e.getResizerProps(),{className:t.resizeHandle}))]}))}(e,r,a.fields[t],s))))}))})};const Dr=150;function $r(e,t){const a={};if(e){a.sortBy=[];for(const s of e)for(const e of t)e.Header===s.displayName&&a.sortBy.push({id:e.id,desc:s.desc})}return a}const Lr=(0,F.memo)((e=>{const{ariaLabel:t,data:a,height:s,onCellFilterAdded:n,width:r,columnMinWidth:i=Dr,noHeader:o,resizable:l=!0,initialSortBy:c,footerValues:d,showTypeIcons:u}=e,p=(0,D.wW)(ir),h=o?0:p.cellHeight,m=(0,F.useMemo)((()=>{let e=0;if(!d)return 0;for(const t of d)Array.isArray(t)&&t.length>e&&(e=t.length);return e>1?33*e:33}),[d]),g=(0,F.useMemo)((()=>a.fields.length?Array(a.length).fill(0):[]),[a]),f=(0,F.useMemo)((()=>function(e,t,a,s){const n=[];let r=0;for(const[o,l]of e.fields.entries()){var i;const c=l.config.custom||{};if(c.hidden)continue;c.width?t-=c.width:r++;const d=e=>{switch(e){case ye.FieldType.number:return"number";case ye.FieldType.time:return"basic";default:return"alphanumeric-insensitive"}},u=hr(c.displayMode,l);n.push({Cell:u,id:o.toString(),field:l,Header:(0,ye.getFieldDisplayName)(l,e),accessor:(e,t)=>l.values.get(t),sortType:d(l.type),width:c.width,minWidth:null!==(i=c.minWidth)&&void 0!==i?i:a,filter:(0,dn.Z)(mr(l)),justifyContent:pr(l),Footer:ur(o,s)})}let o=t/r;for(let e=r;e>0;e--)for(const e of n)!e.width&&e.minWidth>o&&(e.width=e.minWidth,r-=1,o=(t-=e.width)/r);for(const e of n)e.width||(e.width=o),e.minWidth=50;return n}(a,r,i,d)),[a,r,i,d]),b=function(e){let{onColumnResize:t,onSortByChange:a,data:s}=e;return(0,F.useCallback)(((e,n)=>{switch(n.type){case"columnDoneResizing":if(t){const a=e.columnResizing.headerIdWidths[0][0],n=parseInt(a,10),r=Math.round(e.columnResizing.columnWidths[a]),i=s.fields[n];if(!i)return e;const o=(0,ye.getFieldDisplayName)(i,s);t(o,r)}case"toggleSortBy":if(a){const t=[];for(const a of e.sortBy){const e=s.fields[parseInt(a.id,10)];e&&t.push({displayName:(0,ye.getFieldDisplayName)(e,s),desc:a.desc})}a(t)}}return e}),[s,t,a])}(e),v=(0,F.useMemo)((()=>({columns:f,data:g,disableResizing:!l,stateReducer:b,initialState:$r(c,f),sortTypes:{number:vr,"alphanumeric-insensitive":br}})),[c,f,g,l,b]),{getTableProps:x,headerGroups:y,rows:w,prepareRow:j,totalColumnsWidth:C,footerGroups:k}=(0,ln.useTable)(v,ln.useFilters,ln.useSortBy,ln.useAbsoluteLayout,ln.useResizeColumns),S=F.useCallback((e=>{let{index:t,style:a}=e;const s=w[t];return j(s),(0,L.jsx)("div",Object.assign({},s.getRowProps({style:a}),{className:p.row,children:s.cells.map(((e,t)=>(0,L.jsx)(yr,{tableStyles:p,cell:e,onCellFilterAdded:n,columnIndex:t,columnCount:s.cells.length},t)))}))}),[n,j,w,p]),T=s-(h+m);return(0,L.jsx)("div",Object.assign({},x(),{className:p.table,"aria-label":t,role:"table",children:(0,L.jsx)(G.$,{hideVerticalTrack:!0,children:(0,L.jsxs)("div",{style:{width:C?`${C}px`:"100%"},children:[!o&&(0,L.jsx)(Ar,{data:a,headerGroups:y,showTypeIcons:u}),w.length>0?(0,L.jsx)(cn.t7,{height:T,itemCount:w.length,itemSize:p.rowHeight,width:"100%",style:{overflow:"hidden auto"},children:S}):(0,L.jsx)("div",{style:{height:s-h},className:p.noData,children:"No data"}),d&&(0,L.jsx)(dr,{height:m,footerValues:d,footerGroups:k,totalColumnsWidth:C})]})})}))}));Lr.displayName="Table";const Rr=["invalid","className"];const Er=F.forwardRef(((e,t)=>{let{invalid:a,className:s}=e,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Rr);const r=(0,D.l4)(),i=zr(r,a);return(0,L.jsx)("textarea",Object.assign({},n,{className:(0,A.cx)(i.textarea,s),ref:t}))})),zr=(0,D.Bb)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{textarea:(0,A.cx)((0,Fa.RK)(e),(0,Fa.GL)(e.v1),A.css`
        border-radius: ${e.shape.borderRadius()};
        padding: ${e.spacing.gridSize/4}px ${e.spacing.gridSize}px;
        width: 100%;
        border-color: ${t?e.colors.error.border:e.components.input.borderColor};
      `)}}));var Vr;function Br(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Er.displayName="TextArea";class Ur extends F.PureComponent{constructor(e){super(e),Br(this,"readCSV",(0,$t.debounce)((()=>{const{config:e}=this.props,{text:t}=this.state;this.setState({data:(0,ye.readCSV)(t,{config:e})})}),150)),Br(this,"onTextChange",(e=>{this.setState({text:e.target.value})}));const{text:t,config:a}=e;this.state={text:t,data:(0,ye.readCSV)(t,{config:a})}}componentDidUpdate(e,t){const{text:a}=this.state;a===t.text&&this.props.config===e.config||this.readCSV(),this.props.text!==e.text&&this.props.text!==a&&this.setState({text:this.props.text}),this.state.data!==t.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:e,height:t,theme:a}=this.props,{data:s}=this.state,n=qr(a);return(0,L.jsxs)("div",{className:n.tableInputCsv,children:[(0,L.jsx)(Er,{style:{width:e,height:t},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:n.textarea}),s&&(0,L.jsx)("footer",{className:n.footer,children:s.map(((e,t)=>(0,L.jsxs)("span",{children:["Rows:",e.length,", Columns:",e.fields.length,"  ",Vr||(Vr=(0,L.jsx)(P.J,{name:"check-circle"}))]},t)))})]})}}const Hr=(0,D.Zz)(Ur);Hr.displayName="TableInputCSV";const qr=(0,D.Bb)((e=>({tableInputCsv:A.css`
      position: relative;
    `,textarea:A.css`
      height: 100%;
      width: 100%;
    `,footer:A.css`
      position: absolute;
      bottom: 15px;
      right: 15px;
      border: 1px solid #222;
      background: ${e.palette.online};
      padding: 1px ${e.spacing.xs};
      font-size: 80%;
    `}))),Wr=["children","className"];const Gr=(0,D.Bb)((e=>({tabContent:A.css`
      background: ${e.colors.background.primary};
    `}))),Zr=e=>{let{children:t,className:a}=e,s=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Wr);const n=(0,D.l4)(),r=Gr(n);return(0,L.jsx)("div",Object.assign({},s,{className:(0,A.cx)(r.tabContent,a),children:t}))};var Qr=a("./packages/grafana-ui/src/components/Tabs/Counter.tsx"),Kr=a("./packages/grafana-ui/src/components/BigValue/BigValue.tsx"),Yr=a("../../opt/drone/yarncache/jquery-npm-3.6.0-ca7872bdbb-8fd5fef4aa.zip/node_modules/jquery/dist/jquery-exposed.js"),Jr=a.n(Yr);function Xr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ei extends F.PureComponent{constructor(){super(...arguments),Xr(this,"canvasElement",void 0),Xr(this,"renderVisualization",(()=>{var e;const{width:t,value:a,height:s,onClick:n,text:r}=this.props,i=ti(t,s,a.title);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{style:{height:`${i.gaugeHeight}px`,width:"100%"},ref:e=>this.canvasElement=e,onClick:n}),i.showLabel&&(0,L.jsx)("div",{style:{textAlign:"center",fontSize:null!==(e=null==r?void 0:r.titleSize)&&void 0!==e?e:i.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"},children:a.title})]})}))}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}getFormattedThresholds(e){var t,a,s,n,r;const{field:i,theme:o,value:l}=this.props;var c,d;if((null===(t=i.color)||void 0===t?void 0:t.mode)!==ye.FieldColorModeId.Thresholds)return[{value:null!==(c=i.min)&&void 0!==c?c:ye.GAUGE_DEFAULT_MINIMUM,color:null!==(d=l.color)&&void 0!==d?d:ye.FALLBACK_COLOR}];const u=null!==(a=i.thresholds)&&void 0!==a?a:null===(s=ei.defaultProps.field)||void 0===s?void 0:s.thresholds,p=u.mode===ye.ThresholdsMode.Percentage,h=u.steps;let m=null!==(n=i.min)&&void 0!==n?n:ye.GAUGE_DEFAULT_MINIMUM,g=null!==(r=i.max)&&void 0!==r?r:ye.GAUGE_DEFAULT_MAXIMUM;p&&(m=0,g=100);const f=(0,ye.getActiveThreshold)(m,h),b=(0,ye.getActiveThreshold)(g,h),v=[];v.push({value:+m.toFixed(e),color:(0,ye.getColorForTheme)(f.color,o)});let x=!0;for(let e=0;e<h.length;e++){const t=h[e];if(x){f===t&&(x=!1);continue}const a=h[e-1];if(v.push({value:t.value,color:(0,ye.getColorForTheme)(a.color,o)}),t===b)break}return v.push({value:+g.toFixed(e),color:(0,ye.getColorForTheme)(b.color,o)}),v}draw(){var e,t,a,s,n;const{field:r,showThresholdLabels:i,showThresholdMarkers:o,width:l,height:c,theme:d,value:u}=this.props,p=ti(l,c,u.title),h=Math.min(l,p.gaugeHeight),m=d.colors.bg2,g=i?1.5:1,f=Math.min(h/5.5,40)/g,b=f/5,v=(0,ye.formattedValueToString)(u),x=.9*Math.min(l,1.3*h)-(2*(f+(o?b:0)+(i?10:0))+10),y=null!==(e=null===(t=this.props.text)||void 0===t?void 0:t.valueSize)&&void 0!==e?e:(0,bn.MX)(v,x,h,1,1.7*f),w=Math.max(y/2.5,12);let j=null!==(a=r.min)&&void 0!==a?a:ye.GAUGE_DEFAULT_MINIMUM,C=null!==(s=r.max)&&void 0!==s?s:ye.GAUGE_DEFAULT_MAXIMUM,k=u.numeric;(null===(n=r.thresholds)||void 0===n?void 0:n.mode)===ye.ThresholdsMode.Percentage&&(j=0,C=100,k=void 0===u.percent?(k-j)/(C-j)*100:100*u.percent);const S=void 0===r.decimals?2:r.decimals;o&&(j=+j.toFixed(S),C=+C.toFixed(S));const T={series:{gauges:{gauge:{min:j,max:C,background:{color:m},border:{color:null},shadow:{show:!1},width:f},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:this.getFormattedThresholds(S),label:{show:i,margin:b+1,font:{size:w}},show:o,width:b},value:{color:u.color,formatter:()=>v,font:{size:y,family:d.typography.fontFamily.sansSerif}},show:!0}}},O={data:[[0,k]],label:u.title};try{Jr().plot(this.canvasElement,[O],T)}catch(e){console.error("Gauge rendering error",e,T,u)}}render(){return(0,L.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className,children:this.renderVisualization()})}}function ti(e,t,a){const s=null!=a,n=Math.min(.15*e/1.5,20),r=s?t-1.5*n:t;return{showLabel:s,gaugeHeight:Math.min(r,e),titleFontSize:n}}Xr(ei,"defaultProps",{showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:{mode:ye.ThresholdsMode.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]}}});var ai=a("./packages/grafana-schema/src/index.ts"),si=a("./packages/grafana-ui/src/components/VizTooltip/index.tsx");const ni=e=>{let{dimensions:t,activeDimensions:a,timeZone:s}=e;if(null===a.yAxis||void 0===a.yAxis[1]||null===a.xAxis||void 0===a.xAxis[1])return null;const n=(0,ye.getValueFromDimension)(t.xAxis,a.xAxis[0],a.xAxis[1]),r=(0,ye.getColumnFromDimension)(t.xAxis,a.xAxis[0]),i=r.display?(0,ye.formattedValueToString)(r.display(n)):n,o=(0,ye.getColumnFromDimension)(t.yAxis,a.yAxis[0]),l=(0,ye.getValueFromDimension)(t.yAxis,a.yAxis[0],a.yAxis[1]),c=(0,o.display)(l);return(0,L.jsx)(si.cS,{series:[{color:c.color,label:(0,ye.getFieldDisplayName)(o),value:(0,ye.formattedValueToString)(c)}],timestamp:i})};ni.displayName="SingleModeGraphTooltip";const ri=(e,t)=>{let a,s=0,n=e.values.length-1;for(;;){if(s>n)return Math.max(n,0);a=Math.floor((s+n)/2);const r=e.values.get(a);if(r===t)return a;r&&r<t?s=a+1:n=a-1}},ii=(e,t)=>{var a,s;return(0,ye.dateTimeFormat)(e,{format:null==t||null===(a=t.options)||void 0===a?void 0:a.timeformat,timeZone:null==t||null===(s=t.options)||void 0===s?void 0:s.timezone})},oi=(e,t,a)=>{if(t&&a&&e){const s=a-t,n=s/e/1e3,r=86400010,i=31536e6;return n<=45?ye.systemDateFormats.interval.second:s<=r?ye.systemDateFormats.interval.minute:n<=8e4?ye.systemDateFormats.interval.hour:s<=i?ye.systemDateFormats.interval.day:n<=31536e3?ye.systemDateFormats.interval.month:ye.systemDateFormats.interval.year}return ye.systemDateFormats.interval.minute},li=e=>{let{dimensions:t,activeDimensions:a,pos:s,timeZone:n}=e,r=null;if(null===a.xAxis)return null;a.yAxis&&(r=a.yAxis[0]);const i=a.xAxis[1]?(0,ye.getValueFromDimension)(t.xAxis,a.xAxis[0],a.xAxis[1]):s.x,o=((e,t,a,s)=>{let n,r,i,o,l;const c=[];let d,u;for(n=0;n<e.length;n++){r=e[n];const s=t[n];i=ri(s,a),o=a-s.values.get(i),l=s.values.get(i),(void 0===d||o>=0&&(o<d||d<0)||o<0&&o>d)&&(d=o,u=s.display?(0,ye.formattedValueToString)(s.display(l)):l);const p=r.display(r.values.get(i));c.push({value:(0,ye.formattedValueToString)(p),datapointIndex:i,seriesIndex:n,color:p.color,label:(0,ye.getFieldDisplayName)(r),time:s.display?(0,ye.formattedValueToString)(s.display(l)):l})}return{results:c,time:u}})(t.yAxis.columns,t.xAxis.columns,i),l=o.time,c=o.results.map(((e,t)=>({color:e.color,label:e.label,value:e.value,isActive:r===t})));return(0,L.jsx)(si.cS,{series:c,timestamp:l})};li.displayName="MultiModeGraphTooltip";const ci=e=>{let{mode:t="single",dimensions:a,activeDimensions:s,pos:n,timeZone:r}=e;return s&&s.xAxis?"single"===t?(0,L.jsx)(ni,{dimensions:a,activeDimensions:s,timeZone:r}):(0,L.jsx)(li,{dimensions:a,activeDimensions:s,pos:n,timeZone:r}):null};ci.displayName="GraphTooltip";var di=a("./packages/grafana-ui/src/components/Layout/Layout.tsx"),ui=a("./packages/grafana-ui/src/components/VizLegend/SeriesIcon.tsx");const pi=["getContextMenuSource","timeZone","itemsGroup","dimensions","contextDimensions"];const hi=e=>{let{getContextMenuSource:t,timeZone:a,itemsGroup:s,dimensions:n,contextDimensions:r}=e,i=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,pi);const o=t(),l=s?s.map((e=>{var t;return Object.assign({},e,{items:null===(t=e.items)||void 0===t?void 0:t.filter((e=>e.label))})})):[];return(0,L.jsx)(In,Object.assign({},i,{renderMenuItems:()=>null==l?void 0:l.map(((e,t)=>(0,L.jsx)(Fn,{label:e.label,children:(e.items||[]).map((e=>(0,L.jsx)(Fe,{url:e.url,label:e.label,target:e.target,icon:e.icon,active:e.active,onClick:e.onClick},`${e.label}`)))},`${e.label}${t}`))),renderHeader:()=>{var e;if(!o)return null;let t;if(null!=n&&n.yAxis&&null!=r&&null!==(e=r.yAxis)&&void 0!==e&&e[1]){const e=(0,ye.getValueFromDimension)(n.yAxis,r.yAxis[0],r.yAxis[1]);t=(0,o.series.valueField.display)(e)}const s=(0,ye.dateTimeFormat)(o.datapoint[0],{defaultWithMS:o.series.hasMsResolution,timeZone:a});return(0,L.jsx)(mi,{timestamp:s,seriesColor:o.series.color,displayName:o.series.alias||o.series.label,displayValue:t})}}))},mi=e=>{let{timestamp:t,seriesColor:a,displayName:s,displayValue:n}=e;const r=(0,D.Fg)();return(0,L.jsxs)("div",{className:A.css`
        padding: ${r.spacing.xs} ${r.spacing.sm};
        font-size: ${r.typography.size.sm};
        z-index: ${r.zIndex.tooltip};
      `,children:[(0,L.jsx)("strong",{children:t}),(0,L.jsxs)(di.Lh,{children:[(0,L.jsxs)("div",{children:[(0,L.jsx)(ui.F,{color:a}),(0,L.jsx)("span",{className:A.css`
              white-space: nowrap;
              padding-left: ${r.spacing.xs};
            `,children:s})]}),n&&(0,L.jsx)(fn.W,{value:n})]})]})};var gi;function fi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class bi extends F.PureComponent{constructor(){super(...arguments),fi(this,"state",{isTooltipVisible:!1,isContextVisible:!1}),fi(this,"element",null),fi(this,"$element",void 0),fi(this,"onPlotSelected",((e,t)=>{const{onHorizontalRegionSelected:a}=this.props;a&&a(t.xaxis.from,t.xaxis.to)})),fi(this,"onPlotHover",((e,t,a)=>{this.setState({isTooltipVisible:!0,activeItem:a,pos:t})})),fi(this,"onPlotClick",((e,t,a)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:a,contextPos:t})})),fi(this,"renderTooltip",(()=>{const{children:e,series:t,timeZone:a}=this.props,{pos:s,activeItem:n,isTooltipVisible:r}=this.state;let i=null;if(!r||!s||0===t.length)return null;if(F.Children.forEach(e,(e=>{if(i)return;(e&&e.type&&(e.type.displayName||e.type.name))===si.I5.displayName&&(i=e)})),!i)return null;const o=i.props,l=o.mode||"single";if(!n&&"single"===l)return null;const c=o.tooltipComponent||ci,d={xAxis:[n?n.series.seriesIndex:0,n?n.dataIndex:void 0],yAxis:n?[n.series.seriesIndex,n.dataIndex]:null},u={dimensions:{xAxis:(0,ye.createDimension)("xAxis",t.map((e=>e.timeField))),yAxis:(0,ye.createDimension)("yAxis",t.map((e=>e.valueField)))},activeDimensions:d,pos:s,mode:o.mode||ai.f3.Single,timeZone:a},p=F.createElement(c,Object.assign({},u));return F.cloneElement(i,{content:p,position:{x:s.pageX,y:s.pageY},offset:{x:10,y:10}})})),fi(this,"renderContextMenu",(()=>{const{series:e}=this.props,{contextPos:t,contextItem:a,isContextVisible:s}=this.state;if(!s||!t||!a||0===e.length)return null;const n={xAxis:[a?a.series.seriesIndex:0,a?a.dataIndex:void 0],yAxis:a?[a.series.seriesIndex,a.dataIndex]:null},r={xAxis:(0,ye.createDimension)("xAxis",e.map((e=>e.timeField))),yAxis:(0,ye.createDimension)("yAxis",e.map((e=>e.valueField)))},i={x:t.pageX,y:t.pageY,onClose:()=>this.setState({isContextVisible:!1}),getContextMenuSource:()=>({datapoint:a.datapoint,dataIndex:a.dataIndex,series:a.series,seriesIndex:a.series.seriesIndex,pageX:t.pageX,pageY:t.pageY}),timeZone:this.props.timeZone,dimensions:r,contextDimensions:n};return(0,L.jsx)(hi,Object.assign({},i))})),fi(this,"getBarWidth",(()=>{const{series:e}=this.props;return Math.min(...e.map((e=>e.timeStep)))}))}componentDidUpdate(e,t){e!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=Jr()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(e){return 0===e.length?[{show:!0,min:-1,max:1}]:(0,$t.uniqBy)(e.map((e=>{const t=e.yAxis?e.yAxis.index:1;return{show:!0,index:t,position:1===t?"left":"right",min:e.yAxis&&!isNaN(e.yAxis.min)?e.yAxis.min:null,tickDecimals:e.yAxis&&!isNaN(e.yAxis.tickDecimals)?e.yAxis.tickDecimals:null}})),(e=>e.index))}draw(){if(null===this.element)return;const{width:e,series:t,timeRange:a,showLines:s,showBars:n,showPoints:r,isStacked:i,lineWidth:o,timeZone:l,onHorizontalRegionSelected:c}=this.props;if(!e)return;const d=e/100,u=a.from.valueOf(),p=a.to.valueOf(),h=this.getYAxes(t),m={legend:{show:!1},series:{stack:i,lines:{show:s,lineWidth:o,zero:!1},points:{show:r,fill:1,fillColor:!1,radius:2},bars:{show:n,fill:1,barWidth:n?this.getBarWidth()/1.5:1,zero:!1,lineWidth:o},shadowSize:0},xaxis:{timezone:l,show:!0,mode:"time",min:u,max:p,label:"Datetime",ticks:d,timeformat:oi(d,u,p),tickFormatter:ii},yaxes:h,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:c?"x":null,color:"#666"},crosshair:{mode:"x"}};try{Jr().plot(this.element,t.filter((e=>e.isVisible)),m)}catch(e){throw console.error("Graph rendering error",e,m,t),new Error("Error rendering panel")}}render(){const{ariaLabel:e,height:t,width:a,series:s}=this.props,n=0===s.length,r=this.renderTooltip(),i=this.renderContextMenu();return(0,L.jsxs)("div",{className:"graph-panel","aria-label":e,children:[(0,L.jsx)("div",{className:"graph-panel__chart",ref:e=>this.element=e,style:{height:t,width:a},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),n&&(gi||(gi=(0,L.jsx)("div",{className:"datapoints-warning",children:"No data"}))),r,i]})}}fi(bi,"defaultProps",{showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1});let vi;!function(e){e[e.Isolate=0]="Isolate",e[e.Hide=1]="Hide"}(vi||(vi={}));var xi=a("./packages/grafana-ui/src/components/PanelChrome/LoadingIndicator.tsx");const yi=e=>{let{error:t,onClick:a}=e;const s=(0,D.yK)(wi);return t?(0,L.jsx)(U.u,{theme:"error",content:t,children:(0,L.jsx)(P.J,{onClick:a,className:(0,A.cx)(s.icon,{[s.clickable]:!!a}),size:"sm",name:"exclamation-triangle"})}):null},wi=e=>({clickable:A.css`
      cursor: pointer;
    `,icon:A.css`
      color: ${e.palette.red88};
    `}),ji=e=>{let{title:t="",children:a,width:s,height:n,padding:r="md",leftItems:i=[]}=e;const o=(0,D.l4)(),l=(0,D.wW)(Ti),c=ki(o,t,i),{contentStyle:d,innerWidth:u,innerHeight:p}=Si(r,o,s,c,n),h={height:c},m={width:s,height:n};return(0,L.jsxs)("div",{className:l.container,style:m,children:[(0,L.jsxs)("div",{className:l.header,style:h,children:[(0,L.jsx)("div",{className:l.headerTitle,children:t}),Ci(i,(e=>(0,L.jsx)("div",{className:l.leftItems,children:e})))]}),(0,L.jsx)("div",{className:l.content,style:d,children:a(u,p)})]})},Ci=(e,t)=>{const a=F.Children.toArray(e).filter(Boolean);return a.length>0?t(a):null},ki=(e,t,a)=>t.length>0||a.length>0?e.spacing.gridSize*e.components.panel.headerHeight:0,Si=(e,t,a,s,n)=>{const r="md"===e?t.components.panel.padding:0;return{contentStyle:{padding:r},innerWidth:a-2*r-2,innerHeight:n-s-2*r-2}},Ti=e=>{const{padding:t,background:a,borderColor:s}=e.components.panel;return{container:A.css`
      label: panel-container;
      background-color: ${a};
      border: 1px solid ${s};
      position: relative;
      border-radius: 3px;
      height: 100%;
      display: flex;
      flex-direction: column;
      flex: 0 0 0;
    `,content:A.css`
      label: panel-content;
      width: 100%;
      flex-grow: 1;
    `,header:A.css`
      label: panel-header;
      display: flex;
      align-items: center;
    `,headerTitle:A.css`
      label: panel-header;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      padding-left: ${e.spacing(t)};
      flex-grow: 1;
      font-weight: ${e.typography.fontWeightMedium};
    `,leftItems:A.css`
      display: flex;
      padding-right: ${e.spacing(t)};
    `}};var Oi=a("./packages/grafana-ui/src/components/PanelChrome/PanelContext.ts");let _i;!function(e){e.ToggleSelection="select",e.AppendToSelection="append"}(_i||(_i={}));const Ni=ji;Ni.LoadingIndicator=xi.T,Ni.ErrorIndicator=yi;const Ii=e=>{let{seriesName:t,color:a,gradient:s,readonly:n}=e;const{onSeriesColorChange:r}=(0,Oi.R9)(),i=(0,F.useCallback)((e=>r(t,e)),[t,r]);return t&&r&&a&&!n?(0,L.jsx)(pe.sp,{color:a,onChange:i,enableNamedColors:!0,children:e=>{let{ref:t,showColorPicker:s,hideColorPicker:n}=e;return(0,L.jsx)(ui.F,{color:a,className:"pointer",ref:t,onClick:s,onMouseLeave:n})}}):(0,L.jsx)(ui.F,{color:a,gradient:s})};Ii.displayName="VizLegendSeriesIcon";const Pi=e=>{let{item:t,onLabelClick:a,onLabelMouseEnter:s,onLabelMouseOut:n,className:r,readonly:i}=e;const o=(0,je.wW)(Mi),l=(0,F.useCallback)((e=>{s&&s(t,e)}),[t,s]),c=(0,F.useCallback)((e=>{n&&n(t,e)}),[t,n]),d=(0,F.useCallback)((e=>{a&&a(t,e)}),[t,a]);return(0,L.jsxs)("tr",{className:(0,A.cx)(o.row,r),children:[(0,L.jsx)("td",{children:(0,L.jsxs)("span",{className:o.itemWrapper,children:[(0,L.jsx)(Ii,{color:t.color,seriesName:t.label,readonly:i}),(0,L.jsxs)("div",{onMouseEnter:l,onMouseOut:c,onClick:i?void 0:d,className:(0,A.cx)(o.label,t.disabled&&o.labelDisabled,!i&&o.clickable),children:[t.label," ",2===t.yAxis&&(0,L.jsx)("span",{className:o.yAxisLabel,children:"(right y-axis)"})]})]})}),t.getDisplayValues&&t.getDisplayValues().map(((e,t)=>(0,L.jsx)("td",{className:o.value,children:(0,ye.formattedValueToString)(e)},`${e.title}-${t}`)))]})};Pi.displayName="LegendTableItem";const Mi=e=>{const t=D.GU.hoverColor(e.colors.background.primary,e);return{row:A.css`
      label: LegendRow;
      font-size: ${e.v1.typography.size.sm};
      border-bottom: 1px solid ${e.colors.border.weak};
      td {
        padding: ${e.spacing(.25,1)};
        white-space: nowrap;
      }

      &:hover {
        background: ${t};
      }
    `,label:A.css`
      label: LegendLabel;
      white-space: nowrap;
    `,labelDisabled:A.css`
      label: LegendLabelDisabled;
      color: ${e.colors.text.disabled};
    `,clickable:A.css`
      label: LegendClickable;
      cursor: pointer;
    `,itemWrapper:A.css`
      display: flex;
      white-space: nowrap;
      align-items: center;
    `,value:A.css`
      text-align: left;
    `,yAxisLabel:A.css`
      color: ${e.colors.text.secondary};
    `}};var Fi;const Ai=e=>{let{items:t,sortBy:a,sortDesc:s,itemRenderer:n,className:r,onToggleSort:i,onLabelClick:o,onLabelMouseEnter:l,onLabelMouseOut:c,readonly:d}=e;const u=(0,je.wW)(Di),p={};for(const e of t)if(e.getDisplayValues)for(const t of e.getDisplayValues()){var h;p[null!==(h=t.title)&&void 0!==h?h:"?"]=t}const m=a?(0,$t.orderBy)(t,(e=>{if(e.getDisplayValues){const t=e.getDisplayValues().filter((e=>e.title===a))[0];return t&&t.numeric}}),s?"desc":"asc"):t;return n||(n=(e,t)=>(0,L.jsx)(Pi,{item:e,onLabelClick:o,onLabelMouseEnter:l,onLabelMouseOut:c,readonly:d},`${e.label}-${t}`)),(0,L.jsxs)("table",{className:(0,A.cx)(u.table,r),children:[(0,L.jsx)("thead",{children:(0,L.jsxs)("tr",{children:[Fi||(Fi=(0,L.jsx)("th",{})),Object.keys(p).map((e=>{const t=p[e];return(0,L.jsxs)("th",{title:t.description,className:(0,A.cx)(u.header,i&&u.headerSortable,{[u.withIcon]:a===e}),onClick:()=>{i&&i(e)},children:[e,a===e&&(0,L.jsx)(P.J,{size:"xs",name:s?"angle-down":"angle-up"})]},e)}))]})}),(0,L.jsx)("tbody",{children:m.map(n)})]})},Di=e=>({table:A.css`
    width: 100%;
    th:first-child {
      width: 100%;
      border-bottom: 1px solid ${e.colors.border.weak};
    }
  `,header:A.css`
    color: ${e.colors.primary.text};
    font-weight: ${e.typography.fontWeightMedium};
    border-bottom: 1px solid ${e.colors.border.weak};
    padding: ${e.spacing(.25,2,.25,1)};
    font-size: ${e.typography.bodySmall.fontSize};
    text-align: left;
    white-space: nowrap;
  `,withIcon:A.css`
    padding-right: 4px;
  `,headerSortable:A.css`
    cursor: pointer;
  `});var $i=a("./packages/grafana-ui/src/components/List/AbstractList.tsx");class Li extends F.PureComponent{render(){return(0,L.jsx)($i.L,Object.assign({inline:!0},this.props))}}const Ri=e=>{let{stats:t}=e;const a=(0,je.yK)(Ei);return 0===t.length?null:(0,L.jsx)(Li,{className:a.list,items:t,renderItem:e=>(0,L.jsxs)("div",{className:a.item,title:e.description,children:[e.title&&`${(0,$t.capitalize)(e.title)}:`," ",(0,ye.formattedValueToString)(e)]})})},Ei=()=>({list:A.css`
    flex-grow: 1;
    text-align: right;
  `,item:A.css`
    margin-left: 8px;
  `});Ri.displayName="VizLegendStatsList";const zi=e=>{let{item:t,onLabelClick:a,onLabelMouseEnter:s,onLabelMouseOut:n,className:r,readonly:i}=e;const o=(0,D.yK)(Vi),l=(0,F.useCallback)((e=>{s&&s(t,e)}),[t,s]),c=(0,F.useCallback)((e=>{n&&n(t,e)}),[t,n]),d=(0,F.useCallback)((e=>{a&&a(t,e)}),[t,a]);return(0,L.jsxs)("div",{className:(0,A.cx)(o.itemWrapper,t.disabled&&o.itemDisabled,r),"aria-label":Ne.wl.components.VizLegend.seriesName(t.label),children:[(0,L.jsx)(Ii,{seriesName:t.label,color:t.color,gradient:t.gradient,readonly:i}),(0,L.jsx)("div",{onMouseEnter:l,onMouseOut:c,onClick:i?void 0:d,className:(0,A.cx)(o.label,!i&&o.clickable),children:t.label}),t.getDisplayValues&&(0,L.jsx)(Ri,{stats:t.getDisplayValues()})]})};zi.displayName="VizLegendListItem";const Vi=e=>({label:A.css`
    label: LegendLabel;
    white-space: nowrap;
  `,clickable:A.css`
    label: LegendClickabel;
    cursor: pointer;
  `,itemDisabled:A.css`
    label: LegendLabelDisabled;
    color: ${e.colors.linkDisabled};
  `,itemWrapper:A.css`
    label: LegendItemWrapper;
    display: flex;
    white-space: nowrap;
    align-items: center;
    flex-grow: 1;
  `,value:A.css`
    text-align: right;
  `,yAxisLabel:A.css`
    color: ${e.palette.gray2};
  `}),Bi=e=>{var t;let{items:a,itemRenderer:s,onLabelMouseEnter:n,onLabelMouseOut:r,onLabelClick:i,placement:o,className:l,readonly:c}=e;const d=(0,D.yK)(Ui);s||(s=e=>(0,L.jsx)(zi,{item:e,onLabelClick:i,onLabelMouseEnter:n,onLabelMouseOut:r,readonly:c}));const u=e=>`${e.getItemKey?e.getItemKey():e.label}`;if("right"===o){const e=(e,t)=>(0,L.jsx)("span",{className:d.itemRight,children:s(e,t)});return(0,L.jsx)("div",{className:(0,A.cx)(d.rightWrapper,l),children:t||(t=(0,L.jsx)(ts.a,{items:a,renderItem:e,getItemKey:u}))})}{const e=(e,t)=>(0,L.jsx)("span",{className:d.itemBottom,children:s(e,t)});return(0,L.jsxs)("div",{className:(0,A.cx)(d.bottomWrapper,l),children:[(0,L.jsx)("div",{className:d.section,children:(0,L.jsx)(Li,{items:a.filter((e=>1===e.yAxis)),renderItem:e,getItemKey:u})}),(0,L.jsx)("div",{className:(0,A.cx)(d.section,d.sectionRight),children:(0,L.jsx)(Li,{items:a.filter((e=>1!==e.yAxis)),renderItem:e,getItemKey:u})})]})}};Bi.displayName="VizLegendList";const Ui=e=>{const t=A.css`
    padding-right: 10px;
    display: flex;
    font-size: ${e.typography.size.sm};
    white-space: nowrap;
  `;return{itemBottom:t,itemRight:(0,A.cx)(t,A.css`
        margin-bottom: ${e.spacing.xs};
      `),rightWrapper:A.css`
      padding-left: ${e.spacing.sm};
    `,bottomWrapper:A.css`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      width: 100%;
      padding-left: ${e.spacing.md};
    `,section:A.css`
      display: flex;
    `,sectionRight:A.css`
      justify-content: flex-end;
      flex-grow: 1;
    `}};function Hi(e){let{items:t,displayMode:a,sortBy:s,seriesVisibilityChangeBehavior:n=vi.Isolate,sortDesc:r,onLabelClick:i,onToggleSort:o,placement:l,className:c,itemRenderer:d,readonly:u}=e;const{eventBus:p,onToggleSeriesVisibility:h,onToggleLegendSort:m}=(0,Oi.R9)(),g=(0,F.useCallback)(((e,t)=>{null==p||p.publish({type:ye.DataHoverEvent.type,payload:{raw:t,x:0,y:0,dataId:e.label}})}),[p]),f=(0,F.useCallback)(((e,t)=>{null==p||p.publish({type:ye.DataHoverClearEvent.type,payload:{raw:t,x:0,y:0,dataId:e.label}})}),[p]),b=(0,F.useCallback)(((e,t)=>{i&&i(e,t),h&&h(e.label,n===vi.Hide?_i.AppendToSelection:function(e){return e.ctrlKey||e.metaKey||e.shiftKey?_i.AppendToSelection:_i.ToggleSelection}(t))}),[h,i,n]);switch(a){case ai.jK.Table:return(0,L.jsx)(Ai,{className:c,items:t,placement:l,sortBy:s,sortDesc:r,onLabelClick:b,onToggleSort:o||m,onLabelMouseEnter:g,onLabelMouseOut:f,itemRenderer:d,readonly:u});case ai.jK.List:return(0,L.jsx)(Bi,{className:c,items:t,placement:l,onLabelMouseEnter:g,onLabelMouseOut:f,onLabelClick:b,itemRenderer:d,readonly:u});default:return null}}Hi.displayName="Legend";const qi=(0,D.Bb)((e=>{let{placement:t}=e;return{wrapper:A.css`
    display: flex;
    flex-direction: ${"bottom"===t?"column":"row"};
  `,graphContainer:A.css`
    min-height: 65%;
    flex-grow: 1;
  `,legendContainer:A.css`
    padding: 10px 0;
    max-height: ${"bottom"===t?"35%":"none"};
  `}})),Wi=e=>{const{series:t,timeRange:a,width:s,height:n,showBars:r,showLines:i,showPoints:o,sortLegendBy:l,sortLegendDesc:c,legendDisplayMode:d,placement:u,onSeriesToggle:p,onToggleSort:h,hideEmpty:m,hideZero:g,isStacked:f,lineWidth:b,onHorizontalRegionSelected:v,timeZone:x,children:y,ariaLabel:w}=e,{graphContainer:j,wrapper:C,legendContainer:k}=qi(e),S=t.reduce(((e,t)=>function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=0===e.reduce(((e,t)=>e+(t[1]||0)),0),n=!e.reduce(((e,t)=>e&&null!==t[1]),!0);return t&&n||a&&s}(t.data,m,g)?e:e.concat([{label:t.label,color:t.color||"",disabled:!t.isVisible,yAxis:t.yAxis.index,getDisplayValues:()=>t.info||[]}])),[]);return(0,L.jsxs)("div",{className:C,"aria-label":w,children:[(0,L.jsx)("div",{className:j,children:(0,L.jsx)(bi,{series:t,timeRange:a,timeZone:x,showLines:i,showPoints:o,showBars:r,width:s,height:n,isStacked:f,lineWidth:b,onHorizontalRegionSelected:v,children:y})}),d!==ai.jK.Hidden&&(0,L.jsx)("div",{className:k,children:(0,L.jsx)(G.$,{hideHorizontalTrack:!0,children:(0,L.jsx)(Hi,{items:S,displayMode:d,placement:u,sortBy:l,sortDesc:c,onLabelClick:(e,t)=>{p&&p(e.label,t)},onToggleSort:h})})})]})};function Gi(e,t,a){const s=Math.ceil(Math.sqrt(a*e/t));return Math.floor(s*t/e)*s<a?t/Math.ceil(s*t/e):e/s}class Zi extends F.PureComponent{constructor(e){super(e),this.state={values:e.getValues()}}componentDidUpdate(e){const{renderCounter:t,source:a}=this.props;t===e.renderCounter&&a===e.source||this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:e,width:t,height:a}=this.props;return e===ye.VizOrientation.Auto?t>a?ye.VizOrientation.Vertical:ye.VizOrientation.Horizontal:e}renderGrid(){const{renderValue:e,height:t,width:a,itemSpacing:s,getAlignmentFactors:n,orientation:r}=this.props,{values:i}=this.state,o=((e,t,a,s)=>{const n=Gi(e,t,s),r=Gi(t,e,s),i=Math.max(n,r);let o=Math.floor(e/i),l=Math.ceil(s/o);o=Math.ceil(s/l);const c=o-(o*l-s);return{width:e/o-a+a/o,height:t/l-a+a/l,widthOnLastRow:e/c-a+a/c,xCount:o,yCount:l}})(a,t,s,i.length),l=n?n(i,o.width,o.height):{};let c=0,d=0,u=[];for(let t=0;t<i.length;t++){const a=i[t],n=d===o.yCount-1?o.widthOnLastRow:o.width,p=o.height,h={position:"absolute",left:c*n+s*c,top:d*p+s*d,width:`${n}px`,height:`${p}px`};u.push((0,L.jsx)("div",{style:h,children:e({value:a,width:n,height:p,alignmentFactors:l,orientation:r,count:i.length})},t)),c++,c===o.xCount&&(c=0,d++)}return(0,L.jsx)("div",{style:{position:"relative"},children:u})}render(){const{renderValue:e,height:t,width:a,itemSpacing:s,getAlignmentFactors:n,autoGrid:r,orientation:i,minVizHeight:o}=this.props,{values:l}=this.state;if(r&&i===ye.VizOrientation.Auto)return this.renderGrid();const c={display:"flex"},d={display:"flex",overflow:o?"hidden auto":"hidden"};let u=t,p=a,h=this.getOrientation();switch(h){case ye.VizOrientation.Horizontal:d.flexDirection="column",d.height=`${t}px`,c.marginBottom=`${s}px`,p=a,u=Math.max(t/l.length-s+s/l.length,null!=o?o:0);break;case ye.VizOrientation.Vertical:d.flexDirection="row",d.justifyContent="space-between",c.marginRight=`${s}px`,u=t,p=a/l.length-s+s/l.length}c.width=`${p}px`,c.height=`${u}px`;const m=n?n(l,p,u):{};return(0,L.jsx)("div",{style:d,children:l.map(((t,a)=>(0,L.jsx)("div",{style:Qi(c,a,l.length),children:e({value:t,width:p,height:u,alignmentFactors:m,orientation:h,count:l.length})},a)))})}}function Qi(e,t,a){return t===a-1?Object.assign({},e,{marginRight:0,marginBottom:0}):e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Zi,"defaultProps",{itemSpacing:8});var Ki=a("./packages/grafana-ui/src/components/VizLayout/VizLayout.tsx"),Yi=a("./packages/grafana-ui/src/components/Alert/Alert.tsx");class Ji extends F.Component{constructor(e){super(e),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:e.series}}componentDidUpdate(e){const{series:t}=this.props;(0,$t.isEqual)(e.series,t)||this.setState({hiddenSeries:[],toggledSeries:t})}onSeriesToggle(e,t){const{series:a,onHiddenSeriesChanged:s}=this.props,{hiddenSeries:n}=this.state;if(t.ctrlKey||t.metaKey||t.shiftKey){const t=n.indexOf(e)>-1?n.filter((t=>t!==e)):n.concat([e]),r=a.map((e=>Object.assign({},e,{isVisible:-1===t.indexOf(e.label)})));return void this.setState({hiddenSeries:t,toggledSeries:r},(()=>s?s(t):void 0))}const r=a.map((e=>e.label)),i=n.length+1===r.length?[]:(0,$t.difference)(r,[e]),o=a.map((e=>Object.assign({},e,{isVisible:-1===i.indexOf(e.label)})));this.setState({hiddenSeries:i,toggledSeries:o},(()=>s?s(i):void 0))}render(){const{children:e}=this.props,{toggledSeries:t}=this.state;return e({onSeriesToggle:this.onSeriesToggle,toggledSeries:t})}}const Xi=["isOpen","onToggle"];const eo=e=>({collapse:A.css`
    label: collapse;
    margin-bottom: ${e.spacing(1)};
  `,collapseBody:A.css`
    label: collapse__body;
    padding: ${e.spacing(e.components.panel.padding)};
    padding-top: 0;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  `,bodyContentWrapper:A.css`
    label: bodyContentWrapper;
    flex: 1;
    overflow: hidden;
  `,loader:A.css`
    label: collapse__loader;
    height: 2px;
    position: relative;
    overflow: hidden;
    background: none;
    margin: ${e.spacing(.5)};
  `,loaderActive:A.css`
    label: collapse__loader_active;
    &:after {
      content: ' ';
      display: block;
      width: 25%;
      top: 0;
      top: -50%;
      height: 250%;
      position: absolute;
      animation: loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms;
      animation-iteration-count: 100;
      left: -25%;
      background: ${e.colors.primary.main};
    }
    @keyframes loader {
      from {
        left: -25%;
        opacity: 0.1;
      }
      to {
        left: 100%;
        opacity: 1;
      }
    }
  `,header:A.css`
    label: collapse__header;
    padding: ${e.spacing(1,2,1,2)};
    display: flex;
    cursor: inherit;
    transition: all 0.1s linear;
    cursor: pointer;
  `,headerCollapsed:A.css`
    label: collapse__header--collapsed;
    padding: ${e.spacing(1,2,1,2)};
  `,headerLabel:A.css`
    label: collapse__header-label;
    font-weight: ${e.typography.fontWeightMedium};
    margin-right: ${e.spacing(1)};
    font-size: ${e.typography.size.md};
  `,icon:A.css`
    label: collapse__icon;
    margin: ${e.spacing(0,1,0,-1)};
  `}),to=e=>{let{isOpen:t,onToggle:a}=e,s=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Xi);const[n,r]=(0,F.useState)(t);return(0,L.jsx)(ao,Object.assign({isOpen:n,collapsible:!0},s,{onToggle:()=>{r(!n),a&&a(!n)}}))},ao=e=>{let{isOpen:t,label:a,loading:s,collapsible:n,onToggle:r,className:i,children:o}=e;const l=(0,je.wW)(eo),c=(0,A.cx)([l.collapse,"panel-container",i]),d=s?(0,A.cx)([l.loader,l.loaderActive]):(0,A.cx)([l.loader]),u=n?(0,A.cx)([l.header]):(0,A.cx)([l.headerCollapsed]);return(0,L.jsxs)("div",{className:c,children:[(0,L.jsxs)("div",{className:u,onClick:()=>{r&&r(!t)},children:[n&&(0,L.jsx)(P.J,{className:l.icon,name:t?"angle-down":"angle-right"}),(0,L.jsx)("div",{className:(0,A.cx)([l.headerLabel]),children:a})]}),t&&(0,L.jsxs)("div",{className:(0,A.cx)([l.collapseBody]),children:[(0,L.jsx)("div",{className:d}),(0,L.jsx)("div",{className:l.bodyContentWrapper,children:o})]})]})};ao.displayName="Collapse";const so=e=>{let{label:t,isOpen:a,onToggle:s,className:n,contentClassName:r,children:i,labelId:o,loading:l=!1}=e;const[c,d]=(0,F.useState)(a),u=(0,D.wW)(no),p="Click to "+(c?"collapse":"expand"),h=e=>{e.target instanceof HTMLElement&&"A"===e.target.tagName||(e.preventDefault(),e.stopPropagation(),null==s||s(!c),d(!c))},{current:m}=(0,F.useRef)((0,$t.uniqueId)()),g=null!=o?o:`collapse-label-${m}`;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{onClick:h,className:(0,A.cx)(u.header,n),title:p,children:[(0,L.jsx)("button",{id:`collapse-button-${m}`,className:u.button,onClick:h,"aria-expanded":c&&!l,"aria-controls":`collapse-content-${m}`,"aria-labelledby":g,children:l?(0,L.jsx)(le.$,{className:u.spinner}):(0,L.jsx)(P.J,{name:c?"angle-down":"angle-right",className:u.icon})}),(0,L.jsx)("div",{className:u.label,id:`collapse-label-${m}`,children:t})]}),c&&(0,L.jsx)("div",{id:`collapse-content-${m}`,className:(0,A.cx)(u.content,r),children:i})]})},no=e=>({header:(0,A.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:e.typography.size.lg,padding:`${e.spacing(.5)} 0`,"&:focus-within":(0,Me.getFocusStyles)(e)}),headerClosed:(0,A.css)({borderBottom:`1px solid ${e.colors.border.weak}`}),button:(0,A.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,A.css)({color:e.colors.text.secondary}),content:(0,A.css)({padding:`${e.spacing(2)} 0`}),spinner:(0,A.css)({display:"flex",alignItems:"center",width:e.v1.spacing.md}),label:(0,A.css)({display:"flex"})}),ro=["level","lvl","filename"],io=(0,D.Bb)((e=>({logsLabels:A.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${e.typography.size.xs};
    `,logsLabel:A.css`
      label: logs-label;
      display: flex;
      padding: 0 2px;
      background-color: ${e.colors.bg2};
      border-radius: ${e.border.radius};
      margin: 1px 4px 0 0;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:A.css`
      label: logs-label__value;
      display: inline-block;
      max-width: 20em;
      text-overflow: ellipsis;
      overflow: hidden;
    `}))),oo=(0,je.Zz)((e=>{let{labels:t,theme:a}=e;const s=io(a),n=Object.keys(t).filter((e=>!e.startsWith("_")&&!ro.includes(e)));return 0===n.length?(0,L.jsx)("span",{className:(0,A.cx)([s.logsLabels]),children:(0,L.jsx)("span",{className:(0,A.cx)([s.logsLabel]),children:"(no unique labels)"})}):(0,L.jsx)("span",{className:(0,A.cx)([s.logsLabels]),children:n.sort().map((e=>{const a=t[e];if(!a)return;const n=`${e}: ${a}`;return(0,L.jsx)("span",{className:(0,A.cx)([s.logsLabel]),children:(0,L.jsx)("span",{className:(0,A.cx)([s.logsLabelValue]),title:n,children:a})},e)}))})}));oo.displayName="LogLabels";var lo=a("./packages/grafana-ui/src/components/Logs/LogMessageAnsi.tsx"),co=a("./packages/grafana-ui/src/components/Logs/getLogRowStyles.ts"),uo=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useAsync.js");const po=e=>{let{getRowContext:t,row:a,children:s,logsSortOrder:n}=e;const[r,i]=(0,F.useState)(10),[o,l]=(0,F.useState)(null),[c,d]=(0,F.useState)({before:!0,after:!0}),{value:u}=(0,uo.Z)((async()=>await(async(e,t,a,s)=>{const n=[e(t,{limit:a}),e(t,{limit:a+1,direction:"FORWARD"})],r=await Promise.all(n.map((e=>e.catch((e=>e))))),i=r.map((e=>{const a=e;if(!a.data)return[];const n=[];for(let e=0;e<a.data.length;e++){const s=(0,ye.toDataFrame)(a.data[e]),r=new ye.FieldCache(s),i=r.getFieldByName("ts"),o=r.getFieldByName("id");for(let e=0;e<i.values.length;e++){if(o){if(o.values.get(e)===t.uid)continue}else if(parseInt(i.values.get(e),10)===t.timeEpochMs)continue;const a=s.fields.filter((e=>"line"===e.name))[0].values.get(e);n.push(a)}}return s===ye.LogsSortOrder.Ascending?n.reverse():n})),o=r.map((e=>{const t=e;return t.message?t.message:""}));return{data:s===ye.LogsSortOrder.Ascending?i.reverse():i,errors:s===ye.LogsSortOrder.Ascending?o.reverse():o}})(t,a,r,n)),[r]);return(0,F.useEffect)((()=>{u&&l((e=>{let t=!0,a=!0;const s=null==e?void 0:e.data[0],n=null==e?void 0:e.data[1],r=u.data[0],i=u.data[1];return!e||r&&s.length!==r.length||(t=!1),!e||i&&n.length!==i.length||(a=!1),d({before:t,after:a}),u}))}),[u]),s({result:{before:o?o.data[0]:[],after:o?o.data[1]:[]},errors:{before:o?o.errors[0]:void 0,after:o?o.errors[1]:void 0},hasMoreContextRows:c,updateLimit:()=>i(r+10),limit:r})};var ho=a("./packages/grafana-ui/src/components/Logs/LogRowMessage.tsx");const mo=(0,dn.Z)(ye.getParser),go=(0,dn.Z)(((e,t)=>{const a=fo(e.entry),s=[...bo(e,t),...a].reduce(((e,t)=>{const a=t.value.replace(/(^")|("$)/g,""),s=`${t.key}=${a}`;return e[s]?e[s].links=[...e[s].links||[],...t.links||[]]:e[s]=t,e}),{}),n=Object.values(s);return n.sort(vo),n})),fo=(0,dn.Z)((e=>{if(e.length>ho.n)return[];const t=mo(e);if(!t)return[];return t.getFields(e).map((e=>({key:t.getLabelFromField(e),value:t.getValueFromField(e)})))})),bo=(0,dn.Z)(((e,t)=>e.dataFrame.fields.map(((e,t)=>Object.assign({},e,{index:t}))).filter(((t,a)=>{var s;return!("id"===t.name||e.entryFieldIndex===a||null!==(s=t.config.custom)&&void 0!==s&&s.hidden)})).filter((t=>{const a=t.values.get(e.rowIndex);return null!=a})).map((a=>{const s=t?t(a,e.rowIndex):[];return{key:a.name,value:a.values.get(e.rowIndex).toString(),links:s,fieldIndex:a.index}}))));function vo(e,t){var a,s,n,r;return null===(a=e.links)||void 0===a||!a.length||null!==(s=t.links)&&void 0!==s&&s.length?null!==(n=e.links)&&void 0!==n&&n.length||null===(r=t.links)||void 0===r||!r.length?e.key>t.key?1:e.key<t.key?-1:0:1:-1}const xo=e=>({logsStatsRow:A.css`
    label: logs-stats-row;
    margin: ${parseInt(e.spacing.d,10)/1.75}px 0;
  `,logsStatsRowActive:A.css`
    label: logs-stats-row--active;
    color: ${e.colors.textBlue};
    position: relative;
  `,logsStatsRowLabel:A.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:A.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:A.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: 0.5em;
  `,logsStatsRowPercent:A.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: 0.5em;
    width: 3em;
  `,logsStatsRowBar:A.css`
    label: logs-stats-row__bar;
    height: 4px;
    overflow: hidden;
    background: ${e.colors.textFaint};
  `,logsStatsRowInnerBar:A.css`
    label: logs-stats-row__innerbar;
    height: 4px;
    overflow: hidden;
    background: ${e.colors.bgBlue1};
  `}),yo=e=>{let{active:t,count:a,proportion:s,value:n}=e;const r=(0,je.yK)(xo),i=`${Math.round(100*s)}%`,o={width:i},l=t?(0,A.cx)([r.logsStatsRow,r.logsStatsRowActive]):(0,A.cx)([r.logsStatsRow]);return(0,L.jsxs)("div",{className:l,children:[(0,L.jsxs)("div",{className:(0,A.cx)([r.logsStatsRowLabel]),children:[(0,L.jsx)("div",{className:(0,A.cx)([r.logsStatsRowValue]),title:n,children:n}),(0,L.jsx)("div",{className:(0,A.cx)([r.logsStatsRowCount]),children:a}),(0,L.jsx)("div",{className:(0,A.cx)([r.logsStatsRowPercent]),children:i})]}),(0,L.jsx)("div",{className:(0,A.cx)([r.logsStatsRowBar]),children:(0,L.jsx)("div",{className:(0,A.cx)([r.logsStatsRowInnerBar]),style:o})})]})};yo.displayName="LogLabelStatsRow";const wo=(0,D.Bb)((e=>({logsStats:A.css`
      label: logs-stats;
      column-span: 2;
      background: inherit;
      color: ${e.colors.text};
      word-break: break-all;
    `,logsStatsHeader:A.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${e.colors.border2};
      display: flex;
    `,logsStatsTitle:A.css`
      label: logs-stats__title;
      font-weight: ${e.typography.weight.semibold};
      padding-right: ${e.spacing.d};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:A.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:A.css`
      label: logs-stats__body;
      padding: 5px 0;
    `})));class jo extends F.PureComponent{render(){const{label:e,rowCount:t,stats:a,value:s,theme:n,isLabel:r}=this.props,i=wo(n),o=a.slice(0,5);let l=o.find((e=>e.value===s)),c=a.slice(5);const d=!l;d&&(l=c.find((e=>e.value===s)),c=c.filter((e=>e.value!==s)));const u=c.reduce(((e,t)=>e+t.count),0),p=o.reduce(((e,t)=>e+t.count),0)+u,h=u/p;return(0,L.jsxs)("td",{className:i.logsStats,"data-testid":"logLabelStats",children:[(0,L.jsx)("div",{className:i.logsStatsHeader,children:(0,L.jsxs)("div",{className:i.logsStatsTitle,children:[e,": ",p," of ",t," rows have that ",r?"label":"field"]})}),(0,L.jsxs)("div",{className:i.logsStatsBody,children:[o.map((e=>(0,L.jsx)(yo,Object.assign({},e,{active:e.value===s}),e.value))),d&&l&&(0,L.jsx)(yo,Object.assign({},l,{active:!0}),l.value),u>0&&(0,L.jsx)(yo,{count:u,value:"Other",proportion:h},"__OTHERS__")]})]})}}const Co=(0,D.Zz)(jo);function ko(e){let{link:t,buttonProps:a}=e;return(0,L.jsx)("a",{href:t.href,target:t.target,rel:"noreferrer",onClick:t.onClick?e=>{e.ctrlKey||e.metaKey||e.shiftKey||!t.onClick||(e.preventDefault(),t.onClick(e))}:void 0,children:(0,L.jsx)($.zx,Object.assign({icon:"external-link-alt",variant:"primary",size:"sm"},a,{children:t.title}))})}function So(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Co.displayName="LogLabelStats";class To extends F.PureComponent{constructor(){super(...arguments),So(this,"state",{showFieldsStats:!1,fieldCount:0,fieldStats:null}),So(this,"showField",(()=>{const{onClickShowDetectedField:e,parsedKey:t}=this.props;e&&e(t)})),So(this,"hideField",(()=>{const{onClickHideDetectedField:e,parsedKey:t}=this.props;e&&e(t)})),So(this,"filterLabel",(()=>{const{onClickFilterLabel:e,parsedKey:t,parsedValue:a}=this.props;e&&e(t,a)})),So(this,"filterOutLabel",(()=>{const{onClickFilterOutLabel:e,parsedKey:t,parsedValue:a}=this.props;e&&e(t,a)})),So(this,"showStats",(()=>{const{showFieldsStats:e}=this.state;if(!e){const e=this.props.getStats(),t=e?e.reduce(((e,t)=>e+t.count),0):0;this.setState({fieldStats:e,fieldCount:t})}this.toggleFieldsStats()}))}toggleFieldsStats(){this.setState((e=>({showFieldsStats:!e.showFieldsStats})))}render(){const{theme:e,parsedKey:t,parsedValue:a,isLabel:s,links:n,showDetectedFields:r,wrapLogMessage:i,onClickShowDetectedField:o,onClickHideDetectedField:l,onClickFilterLabel:c,onClickFilterOutLabel:d}=this.props,{showFieldsStats:u,fieldStats:p,fieldCount:h}=this.state,m=(e=>({noHoverBackground:A.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:A.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:A.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:A.css`
      color: ${e.colors.primary.text};
    `,wrapLine:A.css`
      label: wrapLine;
      white-space: pre-wrap;
    `}))(e),g=(0,co.h)(e),f=o&&l,b=c&&d,v=!s&&r&&r.includes(t)?(0,L.jsx)(M.h,{name:"eye",className:m.showingField,title:"Hide this field",onClick:this.hideField}):(0,L.jsx)(M.h,{name:"eye",title:"Show this field instead of the message",onClick:this.showField});return(0,L.jsxs)("tr",{className:(0,A.cx)(g.logDetailsValue,{[m.noHoverBackground]:u}),children:[(0,L.jsx)("td",{className:g.logsDetailsIcon,children:(0,L.jsx)(M.h,{name:"signal",title:"Ad-hoc statistics",onClick:this.showStats})}),b&&s&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("td",{className:g.logsDetailsIcon,children:(0,L.jsx)(M.h,{name:"search-plus",title:"Filter for value",onClick:this.filterLabel})}),(0,L.jsx)("td",{className:g.logsDetailsIcon,children:(0,L.jsx)(M.h,{name:"search-minus",title:"Filter out value",onClick:this.filterOutLabel})})]}),f&&!s&&(0,L.jsx)("td",{className:g.logsDetailsIcon,colSpan:2,children:v}),(0,L.jsx)("td",{className:g.logDetailsLabel,children:t}),(0,L.jsxs)("td",{className:(0,A.cx)(m.wordBreakAll,i&&m.wrapLine),children:[a,null==n?void 0:n.map((e=>(0,L.jsxs)("span",{children:[" ",(0,L.jsx)(ko,{link:e})]},e.title))),u&&(0,L.jsx)(Co,{stats:p,label:t,value:a,rowCount:h,isLabel:s})]})]})}}const Oo=(0,D.HE)(To);var _o,No;function Io(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Oo.displayName="LogDetailsRow";class Po extends F.PureComponent{constructor(){super(...arguments),Io(this,"getParser",(0,dn.Z)(ye.getParser)),Io(this,"getStatsForDetectedField",(e=>{const t=this.getParser(this.props.row.entry).buildMatcher(e);return(0,ye.calculateFieldStats)(this.props.getRows(),t)}))}render(){const{row:e,theme:t,hasError:a,onClickFilterOutLabel:s,onClickFilterLabel:n,getRows:r,showDuplicates:i,className:o,onClickShowDetectedField:l,onClickHideDetectedField:c,showDetectedFields:d,getFieldLinks:u,wrapLogMessage:p}=this.props,h=(0,co.h)(t,e.logLevel),m=(e=>({logsRowLevelDetails:A.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:A.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${e.colors.background.primary};
      }
    `}))(t),g=e.labels?e.labels:{},f=Object.keys(g).length>0,b=go(e,u),v=b&&b.length>0,x=(0,A.cx)(!a&&[h.logsRowLevel,m.logsRowLevelDetails]);return(0,L.jsxs)("tr",{className:(0,A.cx)(o,m.logDetails),children:[i&&(_o||(_o=(0,L.jsx)("td",{}))),(0,L.jsx)("td",{className:x,"aria-label":"Log level"}),(0,L.jsx)("td",{colSpan:4,children:(0,L.jsx)("div",{className:h.logDetailsContainer,children:(0,L.jsx)("table",{className:h.logDetailsTable,children:(0,L.jsxs)("tbody",{children:[f&&(0,L.jsx)("tr",{children:(0,L.jsx)("td",{colSpan:5,className:h.logDetailsHeading,"aria-label":"Log labels",children:"Log labels"})}),Object.keys(g).sort().map((e=>{const t=g[e];return(0,L.jsx)(Oo,{parsedKey:e,parsedValue:t,isLabel:!0,getStats:()=>(0,ye.calculateLogsLabelStats)(r(),e),onClickFilterOutLabel:s,onClickFilterLabel:n},`${e}=${t}`)})),v&&(0,L.jsx)("tr",{children:(0,L.jsxs)("td",{colSpan:5,className:h.logDetailsHeading,"aria-label":"Detected fields",children:["Detected fields",(0,L.jsx)(U.u,{content:"Fields that are parsed from log message and detected by Grafana.",children:(0,L.jsx)(P.J,{name:"question-circle",size:"xs",className:A.css`
                            margin-left: 4px;
                          `})})]})}),b.sort().map((t=>{const{key:a,value:s,links:n,fieldIndex:r}=t;return(0,L.jsx)(Oo,{parsedKey:a,parsedValue:s,links:n,onClickShowDetectedField:l,onClickHideDetectedField:c,getStats:()=>void 0===r?this.getStatsForDetectedField(a):(0,ye.calculateStats)(e.dataFrame.fields[r].values.toArray()),showDetectedFields:d,wrapLogMessage:p},`${a}=${s}`)})),!v&&!f&&(No||(No=(0,L.jsx)("tr",{children:(0,L.jsx)("td",{colSpan:5,"aria-label":"No details",children:"No details available"})})))]})})})})]})}}const Mo=(0,D.HE)(Po);Mo.displayName="LogDetails";class Fo extends F.PureComponent{render(){const{row:e,showDetectedFields:t,getFieldLinks:a,wrapLogMessage:s}=this.props,n=go(e,a),r=(0,A.cx)(s&&A.css`
          white-space: pre-wrap;
        `),i=t.map((e=>{const t=n.find((t=>{const{key:a}=t;return a===e}));return t?`${e}=${t.value}`:null})).filter((e=>null!==e)).join(" ");return(0,L.jsx)("td",{className:r,children:i})}}const Ao=(0,D.Zz)(Fo);function Do(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ao.displayName="LogRowMessageDetectedFields";class $o extends F.PureComponent{constructor(){super(...arguments),Do(this,"state",{showContext:!1,showDetails:!1}),Do(this,"toggleContext",(()=>{this.setState((e=>({showContext:!e.showContext})))})),Do(this,"toggleDetails",(()=>{this.props.enableLogDetails&&this.setState((e=>({showDetails:!e.showDetails})))}))}renderTimeStamp(e){return(0,ye.dateTimeFormat)(e,{timeZone:this.props.timeZone})}renderLogRow(e,t,a,s){const{getRows:n,onClickFilterLabel:r,onClickFilterOutLabel:i,onClickShowDetectedField:o,onClickHideDetectedField:l,enableLogDetails:c,row:d,showDuplicates:u,showContextToggle:p,showLabels:h,showTime:m,showDetectedFields:g,wrapLogMessage:f,prettifyLogMessage:b,theme:v,getFieldLinks:x,forceEscape:y,onLogRowHover:w}=this.props,{showDetails:j,showContext:C}=this.state,k=(0,co.h)(v,d.logLevel),S=(e=>({topVerticalAlign:A.css`
      label: topVerticalAlign;
      vertical-align: top;
      margin-top: -${e.spacing(.5)};
      margin-left: -${e.spacing(.25)};
    `,detailsOpen:A.css`
      &:hover {
        background-color: ${D.GU.hoverColor(e.colors.background.primary,e)};
      }
    `,errorLogRow:A.css`
      label: erroredLogRow;
      color: ${e.colors.text.secondary};
    `}))(v),{errorMessage:T,hasError:O}=(0,ye.checkLogsError)(d),_=(0,A.cx)(k.logsRow,{[S.errorLogRow]:O}),N=d.hasUnescapedContent&&y?Object.assign({},d,{entry:(0,ye.escapeUnescapedString)(d.entry),raw:(0,ye.escapeUnescapedString)(d.raw)}):d;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("tr",{className:_,onClick:this.toggleDetails,onMouseEnter:()=>{w&&w(d)},onMouseLeave:()=>{w&&w(void 0)},children:[u&&(0,L.jsx)("td",{className:k.logsRowDuplicates,children:N.duplicates&&N.duplicates>0?`${N.duplicates+1}x`:null}),(0,L.jsx)("td",{className:(0,A.cx)({[k.logsRowLevel]:!O}),children:O&&(0,L.jsx)(U.u,{content:`Error: ${T}`,placement:"right",theme:"error",children:(0,L.jsx)(P.J,{className:k.logIconError,name:"exclamation-triangle",size:"xs"})})}),c&&(0,L.jsx)("td",{title:j?"Hide log details":"See log details",className:k.logsRowToggleDetails,children:(0,L.jsx)(P.J,{className:S.topVerticalAlign,name:j?"angle-down":"angle-right"})}),m&&(0,L.jsx)("td",{className:k.logsRowLocalTime,children:this.renderTimeStamp(d.timeEpochMs)}),h&&N.uniqueLabels&&(0,L.jsx)("td",{className:k.logsRowLabels,children:(0,L.jsx)(oo,{labels:N.uniqueLabels})}),g&&g.length>0?(0,L.jsx)(Ao,{row:N,showDetectedFields:g,getFieldLinks:x,wrapLogMessage:f}):(0,L.jsx)(ho.r,{row:N,getRows:n,errors:t,hasMoreContextRows:a,updateLimit:s,context:e,contextIsOpen:C,showContextToggle:p,wrapLogMessage:f,prettifyLogMessage:b,onToggleContext:this.toggleContext})]}),this.state.showDetails&&(0,L.jsx)(Mo,{className:_,showDuplicates:u,getFieldLinks:x,onClickFilterLabel:r,onClickFilterOutLabel:i,onClickShowDetectedField:o,onClickHideDetectedField:l,getRows:n,row:N,wrapLogMessage:f,hasError:O,showDetectedFields:g})]})}render(){const{showContext:e}=this.state,{logsSortOrder:t,row:a,getRowContext:s}=this.props;return e?(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(po,{row:a,getRowContext:s,logsSortOrder:t,children:e=>{let{result:t,errors:a,hasMoreContextRows:s,updateLimit:n}=e;return(0,L.jsx)(L.Fragment,{children:this.renderLogRow(t,a,s,n)})}})}):this.renderLogRow()}}const Lo=(0,D.HE)($o);function Ro(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Lo.displayName="LogRow";class Eo extends F.PureComponent{constructor(){super(...arguments),Ro(this,"renderAllTimer",null),Ro(this,"state",{renderAll:!1}),Ro(this,"makeGetRows",(0,dn.Z)((e=>()=>e))),Ro(this,"sortLogs",(0,dn.Z)(((e,t)=>(0,ye.sortLogRows)(e,t))))}componentDidMount(){const{logRows:e,previewLimit:t}=this.props,a=(e?e.length:0)<=2*t;a?this.setState({renderAll:a}):this.renderAllTimer=window.setTimeout((()=>this.setState({renderAll:!0})),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:e,showContextToggle:t,showLabels:a,showTime:s,wrapLogMessage:n,prettifyLogMessage:r,logRows:i,deduplicatedRows:o,timeZone:l,onClickFilterLabel:c,onClickFilterOutLabel:d,theme:u,enableLogDetails:p,previewLimit:h,getFieldLinks:m,logsSortOrder:g,showDetectedFields:f,onClickShowDetectedField:b,onClickHideDetectedField:v,forceEscape:x,onLogRowHover:y}=this.props,{renderAll:w}=this.state,{logsRowsTable:j}=(0,co.h)(u),C=o||i,k=i&&i.length>0,S=C?C.reduce(((e,t)=>t.duplicates?e+t.duplicates:e),0):0,T=e!==ye.LogsDedupStrategy.none&&S>0,O=C||[],_=g?this.sortLogs(O,g):O,N=_.slice(0,h),I=_.slice(h,_.length),P=this.makeGetRows(_),M=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return(0,L.jsx)("table",{className:j,children:(0,L.jsxs)("tbody",{children:[k&&N.map(((e,i)=>(0,L.jsx)(Lo,{getRows:P,getRowContext:M,row:e,showContextToggle:t,showDuplicates:T,showLabels:a,showTime:s,showDetectedFields:f,wrapLogMessage:n,prettifyLogMessage:r,timeZone:l,enableLogDetails:p,onClickFilterLabel:c,onClickFilterOutLabel:d,onClickShowDetectedField:b,onClickHideDetectedField:v,getFieldLinks:m,logsSortOrder:g,forceEscape:x,onLogRowHover:y},e.uid))),k&&w&&I.map(((e,i)=>(0,L.jsx)(Lo,{getRows:P,getRowContext:M,row:e,showContextToggle:t,showDuplicates:T,showLabels:a,showTime:s,showDetectedFields:f,wrapLogMessage:n,prettifyLogMessage:r,timeZone:l,enableLogDetails:p,onClickFilterLabel:c,onClickFilterOutLabel:d,onClickShowDetectedField:b,onClickHideDetectedField:v,getFieldLinks:m,logsSortOrder:g,forceEscape:x,onLogRowHover:y},e.uid))),k&&!w&&(0,L.jsx)("tr",{children:(0,L.jsxs)("td",{colSpan:5,children:["Rendering ",_.length-h," rows..."]})})]})})}}Ro(Eo,"defaultProps",{previewLimit:100});const zo=(0,D.HE)(Eo);var Vo;function Bo(e){let{links:t}=e;const a=(0,D.yK)(Uo);if(1===t.length)return(0,L.jsx)(ko,{link:t[0]});const s=t.filter((e=>"_blank"===e.target)),n=t.filter((e=>"_self"===e.target));return(0,L.jsxs)(L.Fragment,{children:[n.map(((e,t)=>(0,L.jsx)(ko,{link:e},t))),(0,L.jsxs)("div",{className:a.wrapper,children:[(0,L.jsx)("p",{className:a.externalLinksHeading,children:"External links"}),s.map(((e,t)=>(0,L.jsxs)("a",{href:e.href,target:e.target,className:a.externalLink,children:[Vo||(Vo=(0,L.jsx)(P.J,{name:"external-link-alt"})),e.title]},t)))]})]})}zo.displayName="LogsRows";const Uo=e=>({wrapper:A.css`
    flex-basis: 150px;
    width: 100px;
    margin-top: ${e.spacing.sm};
  `,externalLinksHeading:A.css`
    color: ${e.colors.textWeak};
    font-weight: ${e.typography.weight.regular};
    font-size: ${e.typography.size.sm};
    margin: 0;
  `,externalLink:A.css`
    color: ${e.colors.linkExternal};
    font-weight: ${e.typography.weight.regular};
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover {
      text-decoration: underline;
    }

    div {
      margin-right: ${e.spacing.sm};
    }
  `}),Ho=e=>{let{className:t,children:a}=e;const s=qo();return(0,L.jsx)("div",{className:(0,A.cx)(s,t),children:a})},qo=(0,D.Bb)((()=>A.css`
    display: flex;

    button {
      flex-grow: 1;
      justify-content: center;
    }

    > * {
      flex-grow: 1;
    }

    label {
      flex-grow: 1;
      text-align: center;
    }
  `)),Wo=["override"],Go=["mappings"];function Zo(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}const Qo=["reduceOptions","orientation"];function Ko(e,t,a){let s=e.options;if(e.fieldConfig=e.fieldConfig||{defaults:{},overrides:[]},"singlestat"===t&&a.angular)return function(e,t){const a=t.angular,s=ye.fieldReducers.getIfExists(a.valueName),n={reduceOptions:{calcs:[s?s.id:ye.ReducerID.mean]},orientation:ye.VizOrientation.Horizontal},r={};a.format&&(r.unit=a.format);a.tableColumn&&(n.reduceOptions.fields=`/^${a.tableColumn}$/`);a.nullPointMode&&(r.nullValueMode=a.nullPointMode);a.nullText&&(r.noValue=a.nullText);(a.decimals||0===a.decimals)&&(r.decimals=a.decimals);if(a.thresholds&&a.colors){const e=a.thresholds.split(",").map((e=>Number(e.trim()))),t=[];for(const s of a.colors){const a=t.length-1;a>=0?t.push({value:e[a],color:s}):t.push({value:-1/0,color:s})}r.thresholds={mode:ye.ThresholdsMode.Absolute,steps:t}}const i=(0,ye.convertOldAngularValueMappings)(a,r.thresholds);i&&i.length&&(r.mappings=i);a.gauge&&a.gauge.show&&(r.min=a.gauge.minValue,r.max=a.gauge.maxValue);return e.fieldConfig.defaults=r,n}(e,a);for(const e of Qo)a.hasOwnProperty(e)&&(s[e]=(0,$t.cloneDeep)(a[e]));return s}function Yo(e){if(!e.options)return{};const t=parseFloat(e.pluginVersion||"6.1");let a=e.options;t<6.2&&(a=function(e){const{valueOptions:t}=e;if(!t)return e;const a={},s={};if(a.mappings=e.valueMappings,a.thresholds=e.thresholds,a.defaults=s,s.unit=t.unit,s.decimals=t.decimals,t.stat){const e=ye.fieldReducers.get(t.stat);e&&(a.calcs=[e.id])}s.min=e.minValue,s.max=e.maxValue;const n=Object.assign({},e,{fieldOptions:a});return(0,$t.omit)(n,"valueMappings","thresholds","valueOptions","minValue","maxValue")}(a)),t<6.3&&(a=function(e){const{fieldOptions:t}=e;if(!t)return e;const a=e.fieldOptions,{mappings:s}=a,n=Zo(a,Go);let r;e.thresholds&&(r={mode:ye.ThresholdsMode.Absolute,steps:Jo(e.thresholds)});return Object.assign({},e,{fieldOptions:Object.assign({},n,{defaults:Object.assign({},t.defaults,{mappings:s,thresholds:r})})})}(a));const{fieldOptions:s}=a;if(t<6.6&&s){var n;if(s&&s.override){const e=Zo(a.fieldOptions,Wo);a=Object.assign({},a,{fieldOptions:Object.assign({},e,{overrides:[]})})}let e=null==s||null===(n=s.defaults)||void 0===n?void 0:n.thresholds;e?delete s.defaults.thresholds:(e=null==s?void 0:s.thresholds,delete s.thresholds),e&&(s.defaults.thresholds={mode:ye.ThresholdsMode.Absolute,steps:e});const{defaults:t}=s;t.color&&"string"==typeof t.color&&(t.color={mode:ye.FieldColorModeId.Fixed,fixedColor:t.color}),(0,ye.validateFieldConfig)(t)}if(t<7&&(e.fieldConfig=e.fieldConfig||{defaults:{},overrides:[]},e.fieldConfig={defaults:s&&s.defaults?Object.assign({},e.fieldConfig.defaults,s.defaults):e.fieldConfig.defaults,overrides:s&&s.overrides?[...e.fieldConfig.overrides,...s.overrides]:e.fieldConfig.overrides},s&&(a.reduceOptions={values:s.values,limit:s.limit,calcs:s.calcs}),delete a.fieldOptions),t<7.1){const t=e.fieldConfig.defaults.title;null!=t&&(e.fieldConfig.defaults.displayName=t,delete e.fieldConfig.defaults.title)}if(t<8){var r;const t=null===(r=e.fieldConfig)||void 0===r?void 0:r.defaults;let a=null==t?void 0:t.unit;"percent"===a?((0,$t.isNumber)(t.min)||(t.min=0),(0,$t.isNumber)(t.max)||(t.max=100)):"percentunit"===a&&((0,$t.isNumber)(t.min)||(t.min=0),(0,$t.isNumber)(t.max)||(t.max=1))}return a}function Jo(e){if(!e||!e.length)return;const t=e.map((e=>({value:null===e.value?-1/0:e.value,color:e.color})));return(0,ye.sortThresholds)(t),t[0].value=-1/0,t}function Xo(e){return(0,ye.convertOldAngularValueMappings)(e)}const el=e=>{let{message:t,callToActionElement:a,footer:s,className:n}=e;const r=(0,je.wW)(tl);return(0,L.jsxs)("div",{className:(0,A.cx)([r.wrapper,n]),children:[t&&(0,L.jsx)("div",{className:r.message,children:t}),a,s&&(0,L.jsx)("div",{className:r.footer,children:s})]})},tl=e=>({wrapper:A.css`
    label: call-to-action-card;
    padding: ${e.spacing(3)};
    background: ${e.colors.background.secondary};
    border-radius: ${e.shape.borderRadius(2)};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
  `,message:A.css`
    margin-bottom: ${e.spacing(3)};
    font-style: italic;
  `,footer:A.css`
    margin-top: ${e.spacing(3)}};
  `});var al,sl=a("./packages/grafana-ui/src/components/DataLinks/DataLinksInlineEditor/DataLinksInlineEditor.tsx"),nl=a("./packages/grafana-ui/src/components/DataLinks/DataLinkInput.tsx");const rl=["title","className","children","branded","url","urlTitle","onDismiss","severity"];const il=F.memo(F.forwardRef(((e,t)=>{let{title:a,className:s,children:n,url:r,urlTitle:i,severity:o="info"}=e,l=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,rl);const c=(0,D.wW)(ol);return(0,L.jsxs)(Yi.b,Object.assign({severity:o,className:s},l,{ref:t,title:a,children:[(0,L.jsx)("div",{children:n}),r&&(0,L.jsxs)("a",{href:r,className:(0,A.cx)("external-link",c.docsLink),target:"_blank",rel:"noreferrer",children:[al||(al=(0,L.jsx)(P.J,{name:"book"}))," ",i||"Read more"]})]}))})));il.displayName="InfoBox";const ol=(0,D.Bb)((e=>({docsLink:A.css`
      display: inline-block;
      margin-top: ${e.spacing(2)};
    `}))),ll=["icon","color","text","tooltip","className"];const cl=F.memo((e=>{let{icon:t,color:a,text:s,tooltip:n,className:r}=e,i=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,ll);const o=(0,je.Fg)(),l=dl(o,a),c=(0,L.jsx)("div",Object.assign({className:(0,A.cx)(l.wrapper,r)},i,{children:(0,L.jsxs)(di.Lh,{align:"center",spacing:"xs",children:[t&&(0,L.jsx)(P.J,{name:t,size:"sm"}),(0,L.jsx)("span",{children:s})]})}));return n?(0,L.jsx)(U.u,{content:n,placement:"auto",children:c}):c}));cl.displayName="Badge";const dl=(0,Ut.B)(((e,t)=>{let a=(0,ye.getColorForTheme)(t,e),s="",n="",r="";return e.isDark?(n=hn()(a).setAlpha(.15).toString(),s=hn()(a).darken(30).toString(),r=hn()(a).lighten(15).toString()):(n=hn()(a).setAlpha(.15).toString(),s=hn()(a).lighten(20).toString(),r=hn()(a).darken(15).toString()),{wrapper:A.css`
      font-size: ${e.typography.size.sm};
      display: inline-flex;
      padding: 1px 4px;
      border-radius: 3px;
      background: ${n};
      border: 1px solid ${s};
      color: ${r};
      font-weight: ${e.typography.weight.regular};

      > span {
        position: relative;
        top: 1px;
        margin-left: 2px;
      }
    `}})),ul=["title","featureState"];const pl=F.memo(F.forwardRef(((e,t)=>{let{title:a,featureState:s}=e,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,ul);const r=(0,D.yK)(hl),i=s?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:r.badge,children:(0,L.jsx)(ml,{featureState:s})}),(0,L.jsx)("h3",{children:a})]}):(0,L.jsx)("h3",{children:a});return(0,L.jsx)(il,Object.assign({branded:!0,title:i,urlTitle:"Read documentation",ref:t},n))})));pl.displayName="FeatureInfoBox";const hl=(0,D.Bb)((e=>({badge:A.css`
      margin-bottom: ${e.spacing.sm};
    `}))),ml=e=>{let{featureState:t,tooltip:a}=e;const s=function(e){if(e===ye.FeatureState.alpha)return{text:"Alpha",icon:"exclamation-triangle",color:"orange"};return{text:"Beta",icon:"rocket",color:"blue"}}(t);return(0,L.jsx)(cl,{text:s.text,color:s.color,icon:s.icon,tooltip:a})};var gl,fl=a("../../opt/drone/yarncache/@sentry-minimal-npm-6.17.2-83c2a56c4a-4c1d63deee.zip/node_modules/@sentry/minimal/esm/index.js");const bl=(0,D.Bb)((()=>A.css`
    width: 500px;
    margin: 64px auto;
  `)),vl=e=>{let{error:t,errorInfo:a,title:s}=e;return(0,L.jsxs)("div",{className:bl(),children:[(0,L.jsx)("h2",{children:s}),(0,L.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[t&&t.toString(),gl||(gl=(0,L.jsx)("br",{})),a&&a.componentStack]})]})};var xl;function yl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}vl.displayName="ErrorWithStack";class wl extends F.PureComponent{constructor(){super(...arguments),yl(this,"state",{error:null,errorInfo:null})}componentDidCatch(e,t){(0,fl.Tb)(e,{contexts:{react:{componentStack:t.componentStack}}}),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e)}componentDidUpdate(e){const{dependencies:t,onRecover:a}=this.props;if(this.state.error&&t&&e.dependencies)for(let s=0;s<t.length;s++)if(t[s]!==e.dependencies[s]){this.setState({error:null,errorInfo:null}),a&&a();break}}render(){const{children:e}=this.props,{error:t,errorInfo:a}=this.state;return e({error:t,errorInfo:a})}}class jl extends F.PureComponent{render(){const{title:e,children:t,style:a,dependencies:s}=this.props;return(0,L.jsx)(wl,{dependencies:s,children:s=>{let{error:n,errorInfo:r}=s;return r?"alertbox"===a?(0,L.jsx)(Yi.b,{title:e||"",children:(0,L.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[n&&n.toString(),xl||(xl=(0,L.jsx)("br",{})),r.componentStack]})}):(0,L.jsx)(vl,{title:e||"",error:n,errorInfo:r}):t}})}}function Cl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=a=>(0,L.jsx)(jl,Object.assign({},t,{children:(0,L.jsx)(e,Object.assign({},a))}));return a.displayName="WithErrorBoundary",a}yl(jl,"defaultProps",{title:"An unexpected error happened",style:"alertbox"});const kl=["children","isFocused","isInvalid","className","htmlFor","tooltip","width"];const Sl=e=>{let{children:t,isFocused:a,isInvalid:s,className:n,htmlFor:r,tooltip:i,width:o}=e,l=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,kl);const c=ks()(n,`gf-form-label width-${o||"10"}`,{"gf-form-label--is-focused":a,"gf-form-label--is-invalid":s});return(0,L.jsxs)("label",Object.assign({className:c},l,{htmlFor:r,children:[t,i&&(0,L.jsx)(U.u,{placement:"top",content:i,theme:"info",children:(0,L.jsx)("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal",children:(0,L.jsx)(P.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})})})]}))},Tl=["label","tooltip","labelWidth","inputWidth","inputEl","className"];const Ol=e=>{let{label:t,tooltip:a,labelWidth:s,inputWidth:n,inputEl:r,className:i}=e,o=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Tl);const l=_l();return(0,L.jsxs)("div",{className:(0,A.cx)(l.formField,i),children:[(0,L.jsx)(Sl,{width:s,tooltip:a,children:t}),r||(0,L.jsx)("input",Object.assign({type:"text",className:"gf-form-input "+(n?`width-${n}`:"")},o))]})};Ol.displayName="FormField",Ol.defaultProps={labelWidth:6,inputWidth:12};const _l=()=>({formField:A.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
    `});var Nl=a("./packages/grafana-ui/src/components/Button/Button.tsx");const Il=["label","labelWidth","inputWidth","onReset","isConfigured","tooltip","placeholder"];const Pl=e=>{let{label:t="Password",labelWidth:a,inputWidth:s=12,onReset:n,isConfigured:r,tooltip:i,placeholder:o="Password"}=e,l=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Il);const c={noRadiusInput:A.css`
      border-bottom-right-radius: 0 !important;
      border-top-right-radius: 0 !important;
    `,noRadiusButton:A.css`
      border-bottom-left-radius: 0 !important;
      border-top-left-radius: 0 !important;
    `};return(0,L.jsx)(Ol,{label:t,tooltip:i,labelWidth:a,inputEl:r?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("input",Object.assign({type:"text",className:(0,A.cx)(`gf-form-input width-${s}`,c.noRadiusInput),disabled:!0,value:"configured"},(0,$t.omit)(l,"value"))),(0,L.jsx)(Nl.zx,{onClick:n,variant:"secondary",type:"button",children:"Reset"})]}):(0,L.jsx)("input",Object.assign({type:"password",className:`gf-form-input width-${s}`,placeholder:o},l))})};Pl.displayName="SecretFormField";const Ml=e=>{let{dataSourceConfig:t,onChange:a}=e;const s=t.secureJsonData?t.secureJsonData.basicAuthPassword:"";return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Z.InlineField,{children:(0,L.jsx)(Ol,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:t.basicAuthUser,onChange:e=>a(Object.assign({},t,{basicAuthUser:e.currentTarget.value}))})}),(0,L.jsx)(Z.InlineField,{children:(0,L.jsx)(Pl,{isConfigured:!!t.basicAuthPassword||!(!t.secureJsonFields||!t.secureJsonFields.basicAuthPassword),value:s||"",inputWidth:18,labelWidth:10,onReset:()=>{a(Object.assign({},t,{basicAuthPassword:"",secureJsonData:Object.assign({},t.secureJsonData,{basicAuthPassword:""}),secureJsonFields:Object.assign({},t.secureJsonFields,{basicAuthPassword:!1})}))},onChange:e=>{a(Object.assign({},t,{secureJsonData:Object.assign({},t.secureJsonData,{basicAuthPassword:e.currentTarget.value})}))}})})]})};var Fl=a("./packages/grafana-ui/src/components/Forms/Legacy/Switch/Switch.tsx");const Al=e=>{let{dataSourceConfig:t,onChange:a,showForwardOAuthIdentityOption:s=!0}=e;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:"gf-form-inline",children:[(0,L.jsx)(Fl.r,{label:"TLS Client Auth",labelClass:"width-13",checked:t.jsonData.tlsAuth||!1,onChange:e=>a(Object.assign({},t.jsonData,{tlsAuth:e.currentTarget.checked}))}),(0,L.jsx)(Fl.r,{label:"With CA Cert",labelClass:"width-13",checked:t.jsonData.tlsAuthWithCACert||!1,onChange:e=>a(Object.assign({},t.jsonData,{tlsAuthWithCACert:e.currentTarget.checked})),tooltip:"Needed for verifying self-signed TLS Certs"})]}),(0,L.jsx)("div",{className:"gf-form-inline",children:(0,L.jsx)(Fl.r,{label:"Skip TLS Verify",labelClass:"width-13",checked:t.jsonData.tlsSkipVerify||!1,onChange:e=>a(Object.assign({},t.jsonData,{tlsSkipVerify:e.currentTarget.checked}))})}),s&&(0,L.jsx)("div",{className:"gf-form-inline",children:(0,L.jsx)(Fl.r,{label:"Forward OAuth Identity",labelClass:"width-13",checked:t.jsonData.oauthPassThru||!1,onChange:e=>a(Object.assign({},t.jsonData,{oauthPassThru:e.currentTarget.checked})),tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along)."})})]})},Dl=["children","className","tooltip","width","transparent","as"];const $l=e=>{let{children:t,className:a,tooltip:s,width:n,transparent:r,as:i="label"}=e,o=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Dl);const l=(0,D.Fg)(),c=Ll(l,r,n);return(0,L.jsxs)(i,Object.assign({className:(0,A.cx)(c.label,a)},o,{children:[t,s&&(0,L.jsx)(U.u,{placement:"top",content:s,theme:"info",children:(0,L.jsx)(P.J,{name:"info-circle",size:"sm",className:c.icon})})]}))},Ll=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;return{label:A.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      padding: 0 ${e.spacing.sm};
      font-weight: ${e.typography.weight.semibold};
      font-size: ${e.typography.size.sm};
      background-color: ${t?"transparent":e.colors.bg2};
      height: ${e.height.md}px;
      line-height: ${e.height.md}px;
      margin-right: ${e.spacing.xs};
      border-radius: ${e.border.radius.md};
      border: none;
      width: ${a?"auto"!==a?8*a+"px":a:"100%"};
      color: ${e.colors.textHeading};
    `,icon:A.css`
      color: ${e.colors.textWeak};
      margin-left: 10px;

      :hover {
        color: ${e.colors.text};
      }
    `}};var Rl=a("./packages/grafana-ui/src/utils/reactUtils.ts"),El=a("./packages/grafana-ui/src/components/Forms/FieldValidationMessage.tsx");const zl=["children","label","tooltip","labelWidth","invalid","loading","disabled","className","htmlFor","grow","error","transparent"];const Vl=e=>{let{children:t,label:a,tooltip:s,labelWidth:n="auto",invalid:r,loading:i,disabled:o,className:l,htmlFor:c,grow:d,error:u,transparent:p}=e,h=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,zl);const m=(0,D.l4)(),g=Bl(m,d),f=null!=c?c:(0,Rl.getChildId)(t),b="string"==typeof a?(0,L.jsx)($l,{width:n,tooltip:s,htmlFor:f,transparent:p,children:a}):a;return(0,L.jsxs)("div",Object.assign({className:(0,A.cx)(g.container,l)},h,{children:[b,(0,L.jsxs)("div",{className:g.childContainer,children:[F.cloneElement(t,{invalid:r,disabled:o,loading:i}),r&&u&&(0,L.jsx)("div",{className:(0,A.cx)(g.fieldValidationWrapper),children:(0,L.jsx)(El.S,{children:u})})]})]}))};Vl.displayName="InlineField";const Bl=(e,t)=>({container:A.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${t?1:0} 0 auto;
      margin: 0 ${e.spacing(.5)} ${e.spacing(.5)} 0;
    `,childContainer:A.css`
      flex: ${t?1:0} 0 auto;
    `,fieldValidationWrapper:A.css`
      margin-top: ${e.spacing(.5)};
    `}),Ul=["children","className"];const Hl=e=>{let{children:t,className:a}=e,s=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Ul);const n=(0,D.yK)(ql);return(0,L.jsx)("div",Object.assign({className:(0,A.cx)(n.container,a)},s,{children:t}))},ql=e=>({container:A.css`
      label: InlineFieldRow;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: flex-start;
      row-gap: ${e.spacing.xs};
    `});var Wl;const Gl=e=>{let{hasCert:t,label:a,onChange:s,onClick:n,placeholder:r}=e;return(0,L.jsxs)(Hl,{children:[(0,L.jsx)(Vl,{label:a,labelWidth:14,disabled:t,children:t?Wl||(Wl=(0,L.jsx)(Je.I,{type:"text",value:"configured",width:24})):(0,L.jsx)(Er,{rows:7,onChange:s,placeholder:r,required:!0})}),t&&(0,L.jsx)($.zx,{variant:"secondary",onClick:n,style:{marginLeft:4},children:"Reset"})]})};var Zl;const Ql=e=>{let{dataSourceConfig:t,onChange:a}=e;const s=t.secureJsonFields&&t.secureJsonFields.tlsCACert,n=t.secureJsonFields&&t.secureJsonFields.tlsClientCert,r=t.secureJsonFields&&t.secureJsonFields.tlsClientKey,i=t.jsonData&&t.jsonData.serverName,o=e=>s=>{s.preventDefault();const n=Object.assign({},t.secureJsonFields);n[e]=!1,a(Object.assign({},t,{secureJsonFields:n}))},l=e=>s=>{const n=Object.assign({},t.secureJsonData);n[e]=s.currentTarget.value,a(Object.assign({},t,{secureJsonData:n}))};return(0,L.jsxs)("div",{className:"gf-form-group",children:[(0,L.jsxs)("div",{className:(0,A.cx)("gf-form",A.css`
            align-items: baseline;
          `),children:[Zl||(Zl=(0,L.jsx)("h6",{children:"TLS/SSL Auth Details"})),(0,L.jsx)(U.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info",children:(0,L.jsx)("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal",children:(0,L.jsx)(P.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})})})]}),(0,L.jsxs)("div",{children:[t.jsonData.tlsAuthWithCACert&&(0,L.jsx)(Gl,{hasCert:!!s,onChange:l("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:o("tlsCACert")}),t.jsonData.tlsAuth&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("div",{className:"gf-form",children:(0,L.jsx)(Ol,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:i&&t.jsonData.serverName,onChange:e=>{const s=Object.assign({},t.jsonData,{serverName:e.currentTarget.value});a(Object.assign({},t,{jsonData:s}))}})}),(0,L.jsx)(Gl,{hasCert:!!n,label:"Client Cert",onChange:l("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:o("tlsClientCert")}),(0,L.jsx)(Gl,{hasCert:!!r,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:l("tlsClientKey"),onClick:o("tlsClientKey")})]})]})]})};var Kl,Yl;function Jl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Xl=(0,D.Bb)((()=>({layout:A.css`
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      > * {
        margin-left: 4px;
        margin-bottom: 0;
        height: 100%;
        &:first-child,
        &:last-child {
          margin-left: 0;
        }
      }
    `}))),ec=e=>{let{header:t,onBlur:a,onChange:s,onRemove:n,onReset:r}=e;const i=Xl();return(0,L.jsxs)("div",{className:i.layout,children:[(0,L.jsx)(Ol,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:t.name||"",onChange:e=>s(Object.assign({},t,{name:e.target.value})),onBlur:a}),(0,L.jsx)(Pl,{label:"Value","aria-label":"Value",name:"value",isConfigured:t.configured,value:t.value,labelWidth:5,inputWidth:t.configured?11:12,placeholder:"Header Value",onReset:()=>r(t.id),onChange:e=>s(Object.assign({},t,{value:e.target.value})),onBlur:a}),(0,L.jsx)($.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:e=>n(t.id),children:Kl||(Kl=(0,L.jsx)(P.J,{name:"trash-alt"}))})]})};ec.displayName="CustomHeaderRow";class tc extends F.PureComponent{constructor(e){super(e),Jl(this,"state",{headers:[]}),Jl(this,"updateSettings",(()=>{const{headers:e}=this.state,t=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter((e=>{let[t,a]=e;return!t.startsWith("httpHeaderName")}))),a=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter((e=>{let[t,a]=e;return!t.startsWith("httpHeaderValue")})));for(const[s,n]of e.entries())t[`httpHeaderName${s+1}`]=n.name,n.configured||(a[`httpHeaderValue${s+1}`]=n.value);this.props.onChange(Object.assign({},this.props.dataSourceConfig,{jsonData:t,secureJsonData:a}))})),Jl(this,"onHeaderAdd",(()=>{this.setState((e=>({headers:[...e.headers,{id:(0,$t.uniqueId)(),name:"",value:"",configured:!1}]})))})),Jl(this,"onHeaderChange",((e,t)=>{this.setState((a=>{let{headers:s}=a;return{headers:s.map(((a,s)=>e!==s?a:Object.assign({},t)))}}))})),Jl(this,"onHeaderReset",(e=>{this.setState((t=>{let{headers:a}=t;return{headers:a.map(((t,a)=>t.id!==e?t:Object.assign({},t,{value:"",configured:!1})))}}))})),Jl(this,"onHeaderRemove",(e=>{this.setState((t=>{let{headers:a}=t;return{headers:a.filter((t=>t.id!==e))}}),this.updateSettings)}));const{jsonData:t,secureJsonData:a,secureJsonFields:s}=this.props.dataSourceConfig;this.state={headers:Object.keys(t).sort().filter((e=>e.startsWith("httpHeaderName"))).map(((e,n)=>({id:(0,$t.uniqueId)(),name:t[e],value:void 0!==a?a[e]:"",configured:s&&s[`httpHeaderValue${n+1}`]||!1})))}}render(){const{headers:e}=this.state;return(0,L.jsxs)("div",{className:"gf-form-group",children:[Yl||(Yl=(0,L.jsx)("div",{className:"gf-form",children:(0,L.jsx)("h6",{children:"Custom HTTP Headers"})})),(0,L.jsx)("div",{children:e.map(((e,t)=>(0,L.jsx)(ec,{header:e,onChange:e=>{this.onHeaderChange(t,e)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset},e.id)))}),(0,L.jsx)("div",{className:"gf-form",children:(0,L.jsx)($.zx,{variant:"secondary",icon:"plus",type:"button",onClick:e=>{this.onHeaderAdd()},children:"Add header"})})]})}}var ac,sc=a("./packages/grafana-ui/src/components/Forms/Legacy/Input/Input.tsx"),nc=a("../../opt/drone/yarncache/@grafana-aws-sdk-npm-0.0.31-84a489fe86-71258b4984.zip/node_modules/@grafana/aws-sdk/index.js");const rc=e=>{var t,a,s,n;const{dataSourceConfig:r,onChange:i}=e,o={onOptionsChange:e=>{var t,a,s,n;const o=Object.assign({},r,{jsonData:Object.assign({},r.jsonData,{sigV4AuthType:e.jsonData.authType,sigV4Profile:e.jsonData.profile,sigV4AssumeRoleArn:e.jsonData.assumeRoleArn,sigV4ExternalId:e.jsonData.externalId,sigV4Region:e.jsonData.defaultRegion,sigV4Endpoint:e.jsonData.endpoint}),secureJsonFields:{sigV4AccessKey:null===(t=e.secureJsonFields)||void 0===t?void 0:t.accessKey,sigV4SecretKey:null===(a=e.secureJsonFields)||void 0===a?void 0:a.secretKey},secureJsonData:{sigV4AccessKey:null===(s=e.secureJsonData)||void 0===s?void 0:s.accessKey,sigV4SecretKey:null===(n=e.secureJsonData)||void 0===n?void 0:n.secretKey}});i(o)},options:Object.assign({},r,{jsonData:Object.assign({},r.jsonData,{authType:r.jsonData.sigV4AuthType,profile:r.jsonData.sigV4Profile,assumeRoleArn:r.jsonData.sigV4AssumeRoleArn,externalId:r.jsonData.sigV4ExternalId,defaultRegion:r.jsonData.sigV4Region,endpoint:r.jsonData.sigV4Endpoint}),secureJsonFields:{accessKey:null===(t=r.secureJsonFields)||void 0===t?void 0:t.sigV4AccessKey,secretKey:null===(a=r.secureJsonFields)||void 0===a?void 0:a.sigV4SecretKey},secureJsonData:{accessKey:null===(s=r.secureJsonData)||void 0===s?void 0:s.sigV4AccessKey,secretKey:null===(n=r.secureJsonData)||void 0===n?void 0:n.sigV4SecretKey}})};return(0,L.jsxs)(L.Fragment,{children:[ac||(ac=(0,L.jsx)("div",{className:"gf-form",children:(0,L.jsx)("h6",{children:"SigV4 Auth Details"})})),(0,L.jsx)(nc.ConnectionConfig,Object.assign({},o,{skipHeader:!0,skipEndpoint:!0}))]})};var ic,oc,lc,cc,dc,uc,pc,hc;const mc=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],gc={label:"Server (default)",value:"proxy"},fc=()=>ic||(ic=(0,L.jsxs)("div",{className:"grafana-info-box m-t-2",children:[(0,L.jsxs)("p",{children:["Access mode controls how requests to the data source will be handled.",(0,L.jsxs)("strong",{children:[" ",(0,L.jsx)("i",{children:"Server"})]})," ","should be the preferred way if nothing else is stated."]}),(0,L.jsx)("div",{className:"alert-title",children:"Server access mode (Default):"}),(0,L.jsx)("p",{children:"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."}),(0,L.jsx)("div",{className:"alert-title",children:"Browser access mode:"}),(0,L.jsx)("p",{children:"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode."})]})),bc=e=>{const{defaultUrl:t,dataSourceConfig:a,onChange:s,showAccessOptions:n,sigV4AuthToggleEnabled:r,showForwardOAuthIdentityOption:i,azureAuthSettings:o}=e;let l;const[c,d]=(0,F.useState)(!1),u=(0,D.Fg)(),p=(0,F.useCallback)((e=>{s(Object.assign({},a,e))}),[a,s]);switch(a.access){case"direct":l=(0,L.jsxs)(L.Fragment,{children:["Your access method is ",oc||(oc=(0,L.jsx)("em",{children:"Browser"})),", this means the URL needs to be accessible from the browser."]});break;case"proxy":l=(0,L.jsxs)(L.Fragment,{children:["Your access method is ",lc||(lc=(0,L.jsx)("em",{children:"Server"})),", this means the URL needs to be accessible from the grafana backend/server."]});break;default:l="Specify a complete HTTP URL (for example http://your_server:8080)"}const h=(0,L.jsx)(Bt.Ph,{"aria-label":"Access",menuShouldPortal:!0,className:"width-20 gf-form-input",options:mc,value:mc.filter((e=>e.value===a.access))[0]||gc,onChange:e=>p({access:e.value})}),m=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(a.url),g=A.css`
    box-shadow: inset 0 0px 5px ${u.palette.red};
  `,f=(0,A.cx)({"width-20":!0,[g]:!m}),b=(0,L.jsx)(sc.I,{className:f,placeholder:t,value:a.url,"aria-label":Ne.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:e=>p({url:e.currentTarget.value})}),v=(null==o?void 0:o.azureAuthSupported)&&o.getAzureAuthEnabled(a)||!1;return(0,L.jsxs)("div",{className:"gf-form-group",children:[(0,L.jsxs)(L.Fragment,{children:[cc||(cc=(0,L.jsx)("h3",{className:"page-heading",children:"HTTP"})),(0,L.jsxs)("div",{className:"gf-form-group",children:[(0,L.jsx)("div",{className:"gf-form",children:(0,L.jsx)(Ol,{label:"URL",labelWidth:13,tooltip:l,inputEl:b})}),n&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:"gf-form-inline",children:[(0,L.jsx)("div",{className:"gf-form",children:(0,L.jsx)(Ol,{label:"Access",labelWidth:13,inputWidth:20,inputEl:h})}),(0,L.jsx)("div",{className:"gf-form",children:(0,L.jsxs)("label",{className:"gf-form-label query-keyword pointer",onClick:()=>d((e=>!e)),children:["Help ",(0,L.jsx)(P.J,{name:c?"angle-down":"angle-right",style:{marginBottom:0}})]})})]}),c&&(dc||(dc=(0,L.jsx)(fc,{})))]}),"proxy"===a.access&&(0,L.jsxs)("div",{className:"gf-form-group",children:[(0,L.jsxs)("div",{className:"gf-form",children:[uc||(uc=(0,L.jsx)(Sl,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",children:"Allowed cookies"})),(0,L.jsx)(rs,{tags:a.jsonData.keepCookies,width:40,onChange:e=>p({jsonData:Object.assign({},a.jsonData,{keepCookies:e})})})]}),(0,L.jsx)("div",{className:"gf-form",children:(0,L.jsx)(Ol,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:a.jsonData.timeout,onChange:e=>{p({jsonData:Object.assign({},a.jsonData,{timeout:parseInt(e.currentTarget.value,10)})})}})})]})]})]}),(0,L.jsxs)(L.Fragment,{children:[pc||(pc=(0,L.jsx)("h3",{className:"page-heading",children:"Auth"})),(0,L.jsxs)("div",{className:"gf-form-group",children:[(0,L.jsxs)("div",{className:"gf-form-inline",children:[(0,L.jsx)(Fl.r,{label:"Basic auth",labelClass:"width-13",checked:a.basicAuth,onChange:e=>{p({basicAuth:e.currentTarget.checked})}}),(0,L.jsx)(Fl.r,{label:"With Credentials",labelClass:"width-13",checked:a.withCredentials,onChange:e=>{p({withCredentials:e.currentTarget.checked})},tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests."})]}),(null==o?void 0:o.azureAuthSupported)&&(0,L.jsx)("div",{className:"gf-form-inline",children:(0,L.jsx)(Fl.r,{label:"Azure Authentication",labelClass:"width-13",checked:v,onChange:e=>{p(o.setAzureAuthEnabled(a,e.currentTarget.checked))},tooltip:"Use Azure authentication for Azure endpoint."})}),r&&(0,L.jsx)("div",{className:"gf-form-inline",children:(0,L.jsx)(Fl.r,{label:"SigV4 auth",labelClass:"width-13",checked:a.jsonData.sigV4Auth||!1,onChange:e=>{p({jsonData:Object.assign({},a.jsonData,{sigV4Auth:e.currentTarget.checked})})}})}),"proxy"===a.access&&(0,L.jsx)(Al,{dataSourceConfig:a,onChange:e=>p({jsonData:e}),showForwardOAuthIdentityOption:i})]}),a.basicAuth&&(0,L.jsxs)(L.Fragment,{children:[hc||(hc=(0,L.jsx)("h6",{children:"Basic Auth Details"})),(0,L.jsx)("div",{className:"gf-form-group",children:(0,L.jsx)(Ml,Object.assign({},e))})]}),(null==o?void 0:o.azureAuthSupported)&&v&&o.azureSettingsUI&&(0,L.jsx)(o.azureSettingsUI,{dataSourceConfig:a,onChange:s}),a.jsonData.sigV4Auth&&r&&(0,L.jsx)(rc,Object.assign({},e)),(a.jsonData.tlsAuth||a.jsonData.tlsAuthWithCACert)&&(0,L.jsx)(Ql,{dataSourceConfig:a,onChange:s}),"proxy"===a.access&&(0,L.jsx)(tc,{dataSourceConfig:a,onChange:s})]})]})};var vc;function xc(e){let{alertmanagerDataSources:t,options:a,onOptionsChange:s}=e;const n=(0,F.useMemo)((()=>t.map((e=>({label:e.name,value:e.uid,imgUrl:e.meta.info.logos.small,meta:e.meta})))),[t]);return(0,L.jsxs)(L.Fragment,{children:[vc||(vc=(0,L.jsx)("h3",{className:"page-heading",children:"Alerting"})),(0,L.jsxs)("div",{className:"gf-form-group",children:[(0,L.jsx)("div",{className:"gf-form-inline",children:(0,L.jsx)("div",{className:"gf-form",children:(0,L.jsx)(Fl.r,{label:"Manage alerts via Alerting UI",labelClass:"width-13",checked:!1!==a.jsonData.manageAlerts,onChange:e=>s(Object.assign({},a,{jsonData:Object.assign({},a.jsonData,{manageAlerts:e.currentTarget.checked})}))})})}),(0,L.jsx)(Hl,{children:(0,L.jsx)(Vl,{tooltip:"The alertmanager that manages alerts for this data source",label:"Alertmanager data source",labelWidth:26,children:(0,L.jsx)(Bt.Ph,{width:29,menuShouldPortal:!0,options:n,onChange:e=>s(Object.assign({},a,{jsonData:Object.assign({},a.jsonData,{alertmanagerUid:null==e?void 0:e.value})})),value:a.jsonData.alertmanagerUid})})})]})]})}var yc=a("./packages/grafana-ui/src/components/transitions/FadeTransition.tsx"),wc=a("./packages/grafana-ui/src/components/transitions/SlideOutTransition.tsx");const jc=e=>({segment:A.css`
      cursor: pointer;
      width: auto;
    `,queryPlaceholder:A.css`
      color: ${e.palette.gray2};
    `,disabled:A.css`
      cursor: not-allowed;
      opacity: 0.65;
      box-shadow: none;
    `}),Cc=["options","value","onChange","Component","className","allowCustomValue","allowEmptyValue","placeholder","disabled","inputMinWidth","inputPlaceholder","onExpandedChange","autofocus"];function kc(e){let{options:t,value:a,onChange:s,Component:n,className:r,allowCustomValue:i,allowEmptyValue:o,placeholder:l,disabled:c,inputMinWidth:d,inputPlaceholder:u,onExpandedChange:p,autofocus:h=!1}=e,m=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Cc);const[g,f,b,v]=Lc(h,p),x=d?Math.max(d,f):f,y=(0,D.yK)(jc);if(!b){const e=(0,$t.isObject)(a)?a.label:a;return(0,L.jsx)(g,{disabled:c,Component:n||(0,L.jsx)($l,{className:(0,A.cx)(y.segment,{[y.queryPlaceholder]:void 0!==l&&!a,[y.disabled]:c},r),children:e||l})})}return(0,L.jsx)(Tc,Object.assign({},m,{value:a&&!(0,$t.isObject)(a)?{value:a}:a,placeholder:u,options:t,width:x,onClickOutside:()=>v(!1),allowCustomValue:i,allowEmptyValue:o,onChange:e=>{v(!1),s(e)}}))}const Sc=["value","placeholder","options","onChange","onClickOutside","loadOptions","width","noOptionsMessage","allowCustomValue","allowEmptyValue"];function Tc(e){let{value:t,placeholder:a="",options:s=[],onChange:n,onClickOutside:r,loadOptions:i,width:o,noOptionsMessage:l="",allowCustomValue:c=!1,allowEmptyValue:d=!1}=e,u=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Sc);const p=(0,F.useRef)(null),h=(0,je.l4)();let m,g=o>0?o/h.spacing.gridSize:void 0,f={};return i?(m=Bt.qb,f={loadOptions:i,defaultOptions:!0}):m=Bt.Ph,(0,L.jsx)("div",Object.assign({},u,{ref:p,children:(0,L.jsx)(m,Object.assign({menuShouldPortal:!0,width:g,noOptionsMessage:l,placeholder:a,autoFocus:!0,isOpen:!0,onChange:n,options:s,value:t,closeMenuOnSelect:!1,onCloseMenu:()=>{if(p&&p.current){const e=p.current.querySelector('input[id^="react-select-"]');e&&(e.value||d)?n({value:e.value,label:e.value}):r()}},allowCustomValue:c},f))}))}var Oc=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsyncFn.js");const _c=["value","onChange","loadOptions","reloadOptionsOnChange","Component","className","allowCustomValue","allowEmptyValue","disabled","placeholder","inputMinWidth","inputPlaceholder","autofocus","onExpandedChange","noOptionMessageHandler"];function Nc(e){var t;let{value:a,onChange:s,loadOptions:n,reloadOptionsOnChange:r=!1,Component:i,className:o,allowCustomValue:l,allowEmptyValue:c,disabled:d,placeholder:u,inputMinWidth:p,inputPlaceholder:h,autofocus:m=!1,onExpandedChange:g,noOptionMessageHandler:f=Ic}=e,b=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,_c);const[v,x]=(0,Oc.Z)(n,[n]),[y,w,j,C]=Lc(m,g),k=p?Math.max(p,w):w,S=(0,D.yK)(jc);if(!j){const e=(0,$t.isObject)(a)?a.label:a;return(0,L.jsx)(y,{onClick:r?void 0:x,disabled:d,Component:i||(0,L.jsx)($l,{className:(0,A.cx)(S.segment,{[S.queryPlaceholder]:void 0!==u&&!a,[S.disabled]:d},o),children:e||u})})}return(0,L.jsx)(Tc,Object.assign({},b,{value:a&&!(0,$t.isObject)(a)?{value:a}:a,placeholder:h,options:null!==(t=v.value)&&void 0!==t?t:[],loadOptions:r?x:void 0,width:k,noOptionsMessage:f(v),allowCustomValue:l,allowEmptyValue:c,onClickOutside:()=>{C(!1)},onChange:e=>{C(!1),s(e)}}))}function Ic(e){return e.loading?"Loading options...":e.error?"Failed to load options":Array.isArray(e.value)&&0!==e.value.length?"":"No options found"}var Pc=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useClickAway.js");const Mc=["value","onChange","Component","className","placeholder","inputPlaceholder","disabled","autofocus","onExpandedChange"];function Fc(e){let{value:t,onChange:a,Component:s,className:n,placeholder:r,inputPlaceholder:i,disabled:o,autofocus:l=!1,onExpandedChange:c}=e,d=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Mc);const u=(0,F.useRef)(null),[p,h]=(0,F.useState)(t),[m,g]=(0,F.useState)((0,bn.X1)((t||"").toString(),14).width),[f,,b,v]=Lc(l,c),x=(0,D.yK)(jc);if((0,Pc.Z)(u,(()=>{v(!1),a(p)})),!b)return(0,L.jsx)(f,{disabled:o,Component:s||(0,L.jsx)($l,{className:(0,A.cx)(x.segment,{[x.queryPlaceholder]:void 0!==r&&!p,[x.disabled]:o},n),children:t||r})});const y=A.css`
    width: ${Math.max(m+20,32)}px;
  `;return(0,L.jsx)("input",Object.assign({},d,{ref:u,autoFocus:!0,className:(0,A.cx)("gf-form gf-form-input",y),value:p,placeholder:i,onChange:e=>{const{width:t}=(0,bn.X1)(e.target.value,14);g(t),h(e.target.value)},onBlur:()=>{v(!1),a(p)},onKeyDown:e=>{[13,27].includes(e.keyCode)&&(v(!1),a(p))}}))}var Ac;const Dc=e=>{let{label:t,htmlFor:a,children:s,fill:n}=e;const r=(0,D.wW)($c);return(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(Hl,{children:[(0,L.jsx)($l,{htmlFor:a,width:12,className:r.label,children:t}),s,n&&(0,L.jsx)("div",{className:r.fill,children:Ac||(Ac=(0,L.jsx)($l,{children:""}))})]})})},$c=e=>({label:A.css`
    color: ${e.colors.primary.text};
  `,fill:A.css`
    flex-grow: 1;
    margin-bottom: ${e.spacing(.5)};
  `}),Lc=(e,t)=>{const a=(0,F.useRef)(null),[s,n]=(0,F.useState)(e),[r,i]=(0,F.useState)(0),o=e=>{n(e),t&&t(e)};return[e=>{let{Component:t,onClick:s,disabled:n}=e;return(0,L.jsx)("div",{ref:a,onClick:n?void 0:()=>{o(!0),a&&a.current&&i(1.25*a.current.clientWidth),s&&s()},children:t})},r,s,o]};var Rc=a("./.yarn/__virtual__/rc-drawer-virtual-8256876f46/3/opt/drone/yarncache/rc-drawer-npm-4.4.3-c465a00ec5-bb0b3932db.zip/node_modules/rc-drawer/es/index.js");const Ec=(0,D.Bb)(((e,t)=>({container:A.css`
      display: flex;
      flex-direction: column;
      height: 100%;
    `,drawer:A.css`
      .drawer-content {
        background-color: ${e.colors.background.primary};
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      &.drawer-open .drawer-mask {
        background-color: ${e.components.overlay.background};
        backdrop-filter: blur(1px);
        opacity: 1;
      }
      .drawer-mask {
        background-color: ${e.components.overlay.background};
        backdrop-filter: blur(1px);
      }
      .drawer-open .drawer-content-wrapper {
        box-shadow: ${e.shadows.z3};
      }
      z-index: ${e.zIndex.dropdown};
    `,header:A.css`
      background-color: ${e.colors.background.canvas};
      z-index: 1;
      flex-grow: 0;
      padding-top: ${e.spacing(.5)};
    `,actions:A.css`
      display: flex;
      align-items: baseline;
      justify-content: flex-end;
    `,titleWrapper:A.css`
      margin-bottom: ${e.spacing(3)};
      padding: ${e.spacing(0,1,0,3)};
      overflow-wrap: break-word;
    `,titleSpacing:A.css`
      margin-bottom: ${e.spacing(2)};
    `,content:A.css`
      padding: ${e.spacing(2)};
      flex: 1;
      overflow: ${t?"auto":"hidden"};
      z-index: 0;
    `}))),zc=e=>{let{children:t,inline:a=!1,onClose:s,closeOnMaskClick:n=!0,scrollableContent:r=!1,title:i,subtitle:o,width:l="40%",expandable:c=!1}=e;const d=(0,D.l4)(),u=Ec(d,r),[p,h]=(0,F.useState)(!1),[m,g]=(0,F.useState)(!1),f=p?"100%":l,b=F.useRef(null),{dialogProps:v,titleProps:x}=(0,st.R)({},b),{overlayProps:y}=(0,nt.Ir)({isDismissable:!0},b);return(0,F.useEffect)((()=>{g(!0)}),[]),(0,L.jsx)(Rc.Z,{level:null,handler:!1,open:m,onClose:s,maskClosable:n,placement:"right",width:f,getContainer:a?void 0:"body",style:{position:`${a&&"absolute"}`},className:u.drawer,"aria-label":"string"==typeof i?Ne.wl.components.Drawer.General.title(i):Ne.wl.components.Drawer.General.title("no title"),children:(0,L.jsx)(De.MT,{restoreFocus:!0,contain:!0,autoFocus:!0,children:(0,L.jsxs)("div",Object.assign({className:u.container},y,v,{ref:b,children:["string"==typeof i&&(0,L.jsxs)("div",{className:u.header,children:[(0,L.jsxs)("div",{className:u.actions,children:[c&&!p&&(0,L.jsx)(M.h,{name:"angle-left",size:"xl",onClick:()=>h(!0),surface:"header","aria-label":Ne.wl.components.Drawer.General.expand}),c&&p&&(0,L.jsx)(M.h,{name:"angle-right",size:"xl",onClick:()=>h(!1),surface:"header","aria-label":Ne.wl.components.Drawer.General.contract}),(0,L.jsx)(M.h,{name:"times",size:"xl",onClick:s,surface:"header","aria-label":Ne.wl.components.Drawer.General.close})]}),(0,L.jsxs)("div",{className:u.titleWrapper,children:[(0,L.jsx)("h3",Object.assign({},x,{children:i})),"string"==typeof o&&(0,L.jsx)("div",{className:"muted",children:o}),"string"!=typeof o&&o]})]}),"string"!=typeof i&&i,(0,L.jsx)("div",{className:u.content,children:r?(0,L.jsx)(G.$,{children:t}):t})]}))})})};var Vc=a("./.yarn/__virtual__/rc-slider-virtual-008f9a98e8/3/opt/drone/yarncache/rc-slider-npm-9.7.5-fe0b5e5b53-e5b7b8e603.zip/node_modules/rc-slider/es/index.js"),Bc=a("./.yarn/__virtual__/@emotion-react-virtual-a8cfa8ca23/3/opt/drone/yarncache/@emotion-react-npm-11.7.1-29be6cd15f-3392aa71f9.zip/node_modules/@emotion/react/dist/emotion-react.browser.esm.js");const Uc=(0,D.Bb)((function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{spacing:s}=e,n=e.colors.border.strong,r=e.colors.primary.main,i=e.colors.primary.main,o=e.colors.primary.transparent,l=`box-shadow: 0px 0px 0px 6px ${o}`;return{container:A.css`
      width: 100%;
      margin: ${t?"inherit":`${s(1,3,1,1)}`};
      padding-bottom: ${t&&a?e.spacing(1):"inherit"};
      height: ${t?"auto":"100%"};
    `,slider:A.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${e.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${e.colors.text.disabled};
        font-size: ${e.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${e.colors.text.primary};
      }
      .rc-slider-vertical .rc-slider-handle {
        margin-top: -10px;
      }
      .rc-slider-handle {
        border: none;
        background-color: ${i};
        box-shadow: ${e.shadows.z1};
        cursor: pointer;
      }
      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle:focus,
      .rc-slider-handle-click-focused:focus,
      .rc-slider-dot-active {
        ${l};
      }
      .rc-slider-track {
        background-color: ${r};
      }
      .rc-slider-rail {
        background-color: ${n};
        cursor: pointer;
      }
    `,tooltip:Bc.iv`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${e.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${e.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:A.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      width: 100%;
    `,sliderInputVertical:A.css`
      flex-direction: column;
      height: 100%;

      .rc-slider {
        margin: 0;
        order: 2;
      }
    `,sliderInputField:A.css`
      margin-left: ${e.spacing(3)};
      width: 60px;
      input {
        text-align: center;
      }
    `,sliderInputFieldVertical:A.css`
      margin: 0 0 ${e.spacing(3)} 0;
      order: 1;
    `}})),Hc=e=>{let{min:t,max:a,onChange:s,onAfterChange:n,orientation:r="horizontal",reverse:i,step:o,value:l,ariaLabelForHandle:c,marks:d,included:u}=e;const p="horizontal"===r,h=(0,je.l4)(),m=Uc(h,p,Boolean(d)),g=Vc.ZP,[f,b]=(0,F.useState)(null!=l?l:t),v=(0,F.useCallback)((e=>{b(e),s&&s(e)}),[b,s]),x=(0,F.useCallback)((e=>{let t=+e.target.value;Number.isNaN(t)&&(t=0),b(t),s&&s(t),n&&n(t)}),[s,n]),y=(0,F.useCallback)((e=>{const s=+e.target.value;s>a?b(a):s<t&&b(t)}),[a,t]),w=p?[]:[m.sliderInputVertical],j=p?[]:[m.sliderInputFieldVertical];return(0,L.jsxs)("div",{className:(0,A.cx)(m.container,m.slider),children:[(0,L.jsx)(Bc.xB,{styles:m.tooltip}),(0,L.jsxs)("label",{className:(0,A.cx)(m.sliderInput,...w),children:[(0,L.jsx)(g,{min:t,max:a,step:o,defaultValue:l,value:f,onChange:v,onAfterChange:n,vertical:!p,reverse:i,ariaLabelForHandle:c,marks:d,included:u}),(0,L.jsx)(Je.I,{type:"text",className:(0,A.cx)(m.sliderInputField,...j),value:`${f}`,onChange:x,onBlur:y,min:t,max:a})]})]})};Hc.displayName="Slider";const qc=e=>{let{min:t,max:a,onChange:s,onAfterChange:n,orientation:r="horizontal",reverse:i,step:o,formatTooltipResult:l,value:c,tooltipAlwaysVisible:d=!0}=e;const u="horizontal"===r,p=(0,je.l4)(),h=Uc(p,u),m=(0,Vc.u7)(Vc.e6);return(0,L.jsxs)("div",{className:(0,A.cx)(h.container,h.slider),children:[(0,L.jsx)(Bc.xB,{styles:h.tooltip}),(0,L.jsx)(m,{tipProps:{visible:d,placement:u?"top":"right"},min:t,max:a,step:o,defaultValue:c,tipFormatter:e=>l?l(e):e,onChange:s,onAfterChange:n,vertical:!u,reverse:i})]})};qc.displayName="Range";const Wc=e=>{var t,a,s,n;let{value:r,onChange:i,item:o}=e;const l=null!==(t=o.settings)&&void 0!==t&&t.useTextarea?Er:Je.I,c=(0,F.useCallback)((e=>{let t=null!=r?r:"";if(e.hasOwnProperty("key")){var a;const s=e;"Enter"!==s.key||null!==(a=o.settings)&&void 0!==a&&a.useTextarea||(t=s.currentTarget.value.trim())}else{t=e.currentTarget.value.trim()}t!==r&&i(""===t?void 0:t)}),[r,null===(a=o.settings)||void 0===a?void 0:a.useTextarea,i]);return(0,L.jsx)(l,{placeholder:null===(s=o.settings)||void 0===s?void 0:s.placeholder,defaultValue:r||"",rows:(null===(n=o.settings)||void 0===n?void 0:n.useTextarea)&&o.settings.rows||5,onBlur:c,onKeyDown:c})};var Gc;function Zc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Qc extends F.PureComponent{constructor(){super(...arguments),Zc(this,"state",{showAdd:!1}),Zc(this,"onRemoveString",(e=>{const{value:t,onChange:a}=this.props,s=[...t];s.splice(e,1),a(s)})),Zc(this,"onValueChange",((e,t)=>{const a=e;if(e.hasOwnProperty("key")&&"Enter"!==a.key)return;const{value:s,onChange:n}=this.props,r=a.currentTarget.value.trim();if(t<0)return r&&(a.currentTarget.value="",n([...s,r])),void this.setState({showAdd:!1});if(!r)return this.onRemoveString(t);const i=[...s];i[t]=r,n(i)}))}render(){var e;const{value:t,item:a}=this.props,{showAdd:s}=this.state,n=Kc((0,D.gh)()),r=(null===(e=a.settings)||void 0===e?void 0:e.placeholder)||"Add text";return(0,L.jsxs)("div",{children:[t.map(((e,t)=>(0,L.jsx)(Je.I,{className:n.textInput,defaultValue:e||"",onBlur:e=>this.onValueChange(e,t),onKeyDown:e=>this.onValueChange(e,t),suffix:(0,L.jsx)(P.J,{className:n.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(t)})},`${t}/${e}`))),s?(0,L.jsx)(Je.I,{autoFocus:!0,className:n.textInput,placeholder:r,defaultValue:"",onBlur:e=>this.onValueChange(e,-1),onKeyDown:e=>this.onValueChange(e,-1),suffix:Gc||(Gc=(0,L.jsx)(P.J,{name:"plus-circle"}))}):(0,L.jsx)($.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0}),children:r})]})}}const Kc=(0,D.Bb)((e=>({textInput:A.css`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${e.colors.formInputBorderHover};
      }
    `,trashIcon:A.css`
      color: ${e.colors.textWeak};
      cursor: pointer;

      &:hover {
        color: ${e.colors.text};
      }
    `}))),Yc=e=>{let{value:t,onChange:a,item:s}=e;const{settings:n}=s,r=(0,F.useCallback)((e=>{if(e.hasOwnProperty("key")){const t=e;"Enter"===t.key&&a(null!=n&&n.integer?(0,ye.toIntegerOrUndefined)(t.currentTarget.value):(0,ye.toFloatOrUndefined)(t.currentTarget.value))}else{const t=e;a(null!=n&&n.integer?(0,ye.toIntegerOrUndefined)(t.currentTarget.value):(0,ye.toFloatOrUndefined)(t.currentTarget.value))}}),[a,null==n?void 0:n.integer]),i=null==t||isNaN(t)?"":t.toString();return(0,L.jsx)(Je.I,{defaultValue:i,min:null==n?void 0:n.min,max:null==n?void 0:n.max,type:"number",step:null==n?void 0:n.step,placeholder:null==n?void 0:n.placeholder,onBlur:r,onKeyDown:r})},Jc=e=>{let{value:t,onChange:a,item:s}=e;const{settings:n}=s,r="number"==typeof t?t:"string"==typeof t?+t:0;return(0,L.jsx)(Hc,{value:r,min:(null==n?void 0:n.min)||0,max:(null==n?void 0:n.max)||100,step:null==n?void 0:n.step,marks:null==n?void 0:n.marks,included:null==n?void 0:n.included,onChange:a,ariaLabelForHandle:null==n?void 0:n.ariaLabelForHandle})};function Xc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ed extends F.PureComponent{constructor(){super(...arguments),Xc(this,"state",{isLoading:!0,options:[]}),Xc(this,"updateOptions",(async()=>{var e;const{item:t}=this.props,{settings:a}=t;let s=(null===(e=t.settings)||void 0===e?void 0:e.options)||[];null!=a&&a.getOptions&&(s=await a.getOptions(this.props.context)),this.state.options!==s&&this.setState({isLoading:!1,options:s})}))}componentDidMount(){this.updateOptions()}componentDidUpdate(e){var t,a;const s=null===(t=e.item)||void 0===t?void 0:t.settings,n=null===(a=this.props.item)||void 0===a?void 0:a.settings;if(s!==n)this.updateOptions();else if(null!=n&&n.getOptions){var r,i;(null===(r=e.context)||void 0===r?void 0:r.data)!==(null===(i=this.props.context)||void 0===i?void 0:i.data)&&this.updateOptions()}}render(){const{options:e,isLoading:t}=this.state,{value:a,onChange:s,item:n}=this.props,{settings:r}=n;let i=e.find((e=>e.value===a));return!i&&a&&(i={label:`${a}`,value:a}),(0,L.jsx)(Bt.Ph,{menuShouldPortal:!0,isLoading:t,value:i,defaultValue:a,allowCustomValue:null==r?void 0:r.allowCustomValue,isClearable:null==r?void 0:r.isClearable,onChange:e=>s(null==e?void 0:e.value),options:e})}}function td(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ad extends F.PureComponent{constructor(){super(...arguments),td(this,"state",{isLoading:!0,options:[]}),td(this,"updateOptions",(async()=>{var e;const{item:t}=this.props,{settings:a}=t;let s=(null===(e=t.settings)||void 0===e?void 0:e.options)||[];null!=a&&a.getOptions&&(s=await a.getOptions(this.props.context)),this.state.options!==s&&this.setState({isLoading:!1,options:s})}))}componentDidMount(){this.updateOptions()}componentDidUpdate(e){var t,a;const s=null===(t=e.item)||void 0===t?void 0:t.settings,n=null===(a=this.props.item)||void 0===a?void 0:a.settings;if(s!==n)this.updateOptions();else if(null!=n&&n.getOptions){var r,i;(null===(r=e.context)||void 0===r?void 0:r.data)!==(null===(i=this.props.context)||void 0===i?void 0:i.data)&&this.updateOptions()}}render(){const{options:e,isLoading:t}=this.state,{value:a,onChange:s,item:n}=this.props,{settings:r}=n;return(0,L.jsx)(Bt.NU,{menuShouldPortal:!0,isLoading:t,value:a,defaultValue:a,allowCustomValue:null==r?void 0:r.allowCustomValue,onChange:e=>{s(e.map((e=>e.value)).flatMap((e=>void 0!==e?[e]:[])))},options:e})}}var sd=a("./.yarn/__virtual__/react-hook-form-virtual-92b6119fd4/3/opt/drone/yarncache/react-hook-form-npm-7.5.3-f9cc466c62-fbfaa3b664.zip/node_modules/react-hook-form/dist/index.esm.js");const nd=["defaultValues","onSubmit","validateOnMount","validateFieldsOnMount","children","validateOn","maxWidth"],rd=["handleSubmit","trigger","formState"];function id(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}function od(e){let{defaultValues:t,onSubmit:a,validateOnMount:s=!1,validateFieldsOnMount:n,children:r,validateOn:i="onSubmit",maxWidth:o=600}=e,l=id(e,nd);const c=(0,sd.cI)({mode:i,defaultValues:t}),{handleSubmit:d,trigger:u,formState:p}=c,h=id(c,rd);return(0,F.useEffect)((()=>{s&&u(n)}),[u,n,s]),(0,L.jsx)("form",Object.assign({className:A.css`
        max-width: ${"none"!==o?o+"px":o};
        width: 100%;
      `,onSubmit:d(a)},l,{children:r(Object.assign({errors:p.errors,formState:p},h))}))}const ld=sd.Qr;function cd(e){let{label:t,icon:a,options:s,onChange:n,variant:r,minWidth:i=16,size:o="sm",isFullWidth:l=!0,menuPlacement:c}=e;const[d,u]=(0,F.useState)(!1),p=(0,D.l4)();return(0,L.jsxs)(L.Fragment,{children:[!d&&(0,L.jsx)($.zx,{size:o||"sm",icon:a||"plus",onClick:()=>u(!0),variant:r,fullWidth:l,"aria-label":Ne.wl.components.ValuePicker.button(t),children:t}),d&&(0,L.jsx)("span",{style:{minWidth:p.spacing(i),flexGrow:l?1:void 0},children:(0,L.jsx)(Bt.Ph,{menuShouldPortal:!0,placeholder:t,options:s,"aria-label":Ne.wl.components.ValuePicker.select(t),isOpen:!0,onCloseMenu:()=>u(!1),autoFocus:!0,onChange:e=>{u(!1),n(e)},menuPlacement:c})})]})}var dd=a("./packages/grafana-ui/src/components/MatchersUI/utils.ts");const ud=(0,F.memo)((e=>{const{data:t,options:a,onChange:s,id:n}=e,r=(0,dd.IX)(t),i=(0,dd.nw)(r,a),o=(0,F.useCallback)((e=>{if((0,dd.w3)(e.value,r))return s(e.value)}),[r,s]),l=i.find((e=>e.value===a));return(0,L.jsx)(Bt.Ph,{menuShouldPortal:!0,value:l,options:i,onChange:o,inputId:n})}));ud.displayName="FieldNameMatcherEditor";const pd={id:ye.FieldMatcherID.byName,component:ud,matcher:ye.fieldMatchers.get(ye.FieldMatcherID.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:e=>e},hd=(0,F.memo)((e=>{const{options:t,onChange:a}=e,s=(0,F.useCallback)((e=>a(e.target.value)),[a]);return(0,L.jsx)(Je.I,{placeholder:"Enter regular expression",defaultValue:t,onBlur:s})}));hd.displayName="FieldNameByRegexMatcherEditor";const md={id:ye.FieldMatcherID.byRegexp,component:hd,matcher:ye.fieldMatchers.get(ye.FieldMatcherID.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:e=>e},gd=(0,F.memo)((e=>{const{data:t,options:a,onChange:s,id:n}=e,r=bd(t),i=vd(r,a),o=(0,F.useCallback)((e=>s(e.value)),[s]),l=i.find((e=>e.value===a));return(0,L.jsx)(Bt.Ph,{inputId:n,value:l,options:i,onChange:o,menuShouldPortal:!0})}));gd.displayName="FieldTypeMatcherEditor";const fd=[{value:ye.FieldType.number,label:"Numeric"},{value:ye.FieldType.string,label:"String"},{value:ye.FieldType.time,label:"Time"},{value:ye.FieldType.boolean,label:"Boolean"},{value:ye.FieldType.trace,label:"Traces"},{value:ye.FieldType.other,label:"Other"}],bd=e=>(0,F.useMemo)((()=>{const t=new Map;for(const e of fd)t.set(e.value,0);for(const a of e)for(const e of a.fields){const a=e.type||ye.FieldType.other;let s=t.get(a);s||(s=0),t.set(a,s+1)}return t}),[e]),vd=(e,t)=>(0,F.useMemo)((()=>{let a=!1;const s=[];for(const n of fd){const r=e.get(n.value),i=t===n.value;(r||i)&&s.push(Object.assign({},n,{label:`${n.label} (${e.get(n.value)})`})),i&&(a=!0)}return t&&!a&&s.push({value:t,label:`${t} (No matches)`}),s}),[e,t]),xd={id:ye.FieldMatcherID.byType,component:gd,matcher:ye.fieldMatchers.get(ye.FieldMatcherID.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:e=>e},yd=(0,F.memo)((e=>{const{data:t,options:a,onChange:s}=e,n=jd(t),r=Cd(n),i=(0,F.useCallback)((e=>{if(e.value&&n.has(e.value))return s(e.value)}),[n,s]),o=r.find((e=>e.value===a));return(0,L.jsx)(Bt.Ph,{menuShouldPortal:!0,value:o,options:r,onChange:i})}));yd.displayName="FieldsByFrameRefIdMatcher";const wd={id:ye.FieldMatcherID.byFrameRefID,component:yd,matcher:ye.fieldMatchers.get(ye.FieldMatcherID.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:e=>e},jd=e=>(0,F.useMemo)((()=>{const t=new Set;for(const a of e)a.refId&&t.add(a.refId);return t}),[e]),Cd=e=>(0,F.useMemo)((()=>Array.from(e).map((e=>({value:e,label:e})))),[e]),kd=(0,F.memo)((e=>{const{data:t,options:a,onChange:s}=e,{readOnly:n,prefix:r}=a,i=(0,dd.IX)(t),o=(0,dd.nw)(i,void 0),l=(0,F.useCallback)((e=>{if(Array.isArray(e))return s(Object.assign({},a,{names:e.reduce(((e,t)=>(0,dd.w3)(t.value,i)?(e.push(t.value),e):e),[])}))}),[i,s,a]);if(n){var c;const e=(null!==(c=a.names)&&void 0!==c?c:[]).join(", ");return(0,L.jsx)(Je.I,{value:e,readOnly:!0,disabled:!0,prefix:r})}return(0,L.jsx)(Bt.NU,{menuShouldPortal:!0,value:a.names,options:o,onChange:l})}));kd.displayName="FieldNameMatcherEditor";const Sd={id:ye.FieldMatcherID.byNames,component:kd,matcher:ye.fieldMatchers.get(ye.FieldMatcherID.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:e=>{var t;return(null!==(t=e.names)&&void 0!==t?t:[]).join(", ")},excludeFromPicker:!0},Td=new ye.Registry((()=>[pd,md,xd,wd,Sd]));var Od=a("./packages/grafana-ui/src/components/Forms/Label.tsx");const _d=["children","className"];const Nd=(0,D.Bb)((e=>({legend:A.css`
      font-size: ${e.typography.heading.h3};
      font-weight: ${e.typography.weight.regular};
      margin: 0 0 ${e.spacing.md} 0;
    `}))),Id=e=>{let{children:t,className:a}=e,s=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,_d);const n=(0,D.Fg)(),r=Nd(n);return(0,L.jsx)("legend",Object.assign({className:(0,A.cx)(r.legend,a)},s,{children:t}))},Pd=["label","description","value","onChange","disabled","className"];const Md=F.forwardRef(((e,t)=>{let{label:a,description:s,value:n,onChange:r,disabled:i,className:o}=e,l=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Pd);const c=(0,F.useCallback)((e=>{r&&r(e)}),[r]),d=(0,D.wW)(Fd);return(0,L.jsxs)("label",{className:(0,A.cx)(d.wrapper,o),children:[(0,L.jsx)("input",Object.assign({type:"checkbox",className:d.input,checked:n,disabled:i,onChange:c},l,{ref:t})),(0,L.jsx)("span",{className:d.checkmark}),a&&(0,L.jsx)("span",{className:d.label,children:a}),s&&(0,L.jsx)("span",{className:d.description,children:s})]})})),Fd=(0,D.Bb)((e=>{const t=(0,Od.F)(e);return{wrapper:A.css`
      position: relative;
      vertical-align: middle;
      font-size: 0;
    `,input:A.css`
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100% !important; // global styles unset this
      height: 100%;
      opacity: 0;

      &:focus + span,
      &:focus-visible + span {
        ${(0,Me.getFocusStyles)(e)}
      }

      &:focus:not(:focus-visible) + span {
        ${(0,Me.getMouseFocusStyles)(e)}
      }

      /**
       * Using adjacent sibling selector to style checked state.
       * Primarily to limit the classes necessary to use when these classes will be used
       * for angular components styling
       * */
      &:checked + span {
        background: blue;
        background: ${e.colors.primary.main};
        border: none;

        &:hover {
          background: ${e.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 5px;
          top: 1px;
          width: 6px;
          height: 12px;
          border: solid ${e.colors.primary.contrastText};
          border-width: 0 3px 3px 0;
          transform: rotate(45deg);
        }
      }

      &:disabled + span {
        background-color: ${e.colors.action.disabledBackground};
        cursor: not-allowed;

        &:hover {
          background-color: ${e.colors.action.disabledBackground};
        }

        &:after {
          border-color: ${e.colors.action.disabledText};
        }
      }
    `,checkmark:A.css`
      position: relative; /* Checkbox should be layered on top of the invisible input so it recieves :hover */
      z-index: 2;
      display: inline-block;
      width: ${e.spacing(2)};
      height: ${e.spacing(2)};
      border-radius: ${e.shape.borderRadius()};
      background: ${e.components.input.background};
      border: 1px solid ${e.components.input.borderColor};

      &:hover {
        cursor: pointer;
        border-color: ${e.components.input.borderHover};
      }
    `,label:(0,A.cx)(t.label,A.css`
        position: relative;
        z-index: 2;
        padding-left: ${e.spacing(1)};
        white-space: nowrap;
        cursor: pointer;
        position: relative;
        top: -3px;
      `),description:(0,A.cx)(t.description,A.css`
        line-height: ${e.typography.bodySmall.lineHeight};
        padding-left: ${e.spacing(3)};
        margin-top: 0; /* The margin effectively comes from the top: -2px on the label above it */
      `)}}));Md.displayName="Checkbox";const Ad=(0,D.Bb)(((e,t)=>(console.warn("getFormStyles is deprecated"),{label:(0,Od.F)(e),legend:Nd(e.v1),fieldValidationMessage:(0,El.A)(e),button:(0,$.fW)({theme:e,variant:t.variant,size:t.size}),input:(0,Je.H)({theme:e,invalid:t.invalid}),checkbox:Fd(e)})));var Dd=a("./.yarn/__virtual__/react-router-dom-virtual-e45eb1b58b/3/opt/drone/yarncache/react-router-dom-npm-5.3.0-aa9adb5bec-47584fd629.zip/node_modules/react-router-dom/esm/react-router-dom.js");const $d=["href","children"];const Ld=(0,F.forwardRef)(((e,t)=>{let{href:a,children:s}=e,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,$d);const r=ye.locationUtil.stripBaseFromUrl(ye.textUtil.sanitizeUrl(null!=a?a:""));return(0,L.jsx)(Dd.Link,Object.assign({ref:t,to:r},n,{children:s}))}));Ld.displayName="Link";const Rd=["label","children","className"];const Ed=e=>{let{label:t,children:a,className:s}=e,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Rd);const r=(0,D.l4)(),i=zd(r);return(0,L.jsxs)("fieldset",Object.assign({className:(0,A.cx)(i.wrapper,s)},n,{children:[t&&(0,L.jsx)(Id,{children:t}),a]}))},zd=(0,D.Bb)((e=>({wrapper:A.css`
      margin-bottom: ${e.spacing(4)};

      &:last-child {
        margin-bottom: 0;
      }
    `}))),Vd=["children","className","grow"];const Bd=e=>{let{children:t,className:a,grow:s}=e,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Vd);const r=(0,D.Fg)(),i=Ud(r,s);return(0,L.jsx)("div",Object.assign({className:(0,A.cx)(i.container,a)},n,{children:t}))};Bd.displayName="InlineSegmentGroup";const Ud=(e,t)=>({container:A.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${t?1:0} 0 auto;
      margin-bottom: ${e.spacing.xs};
    `}),Hd=["name","control","children"];const qd=e=>{let{name:t,control:a,children:s}=e,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Hd);const{fields:r,append:i,prepend:o,remove:l,swap:c,move:d,insert:u}=(0,sd.Dq)(Object.assign({control:a,name:t},n));return s({fields:r,append:i,prepend:o,remove:l,swap:c,move:d,insert:u})};var Wd=a("./packages/grafana-ui/src/components/Select/resetSelectStyles.ts"),Gd=a("../../opt/drone/yarncache/react-select-event-npm-5.3.0-bcc292bf8b-82cd6a35d9.zip/node_modules/react-select-event/lib/react-select-event.es.js");const Zd=async(e,t)=>await(0,Gd.Ys)(e,t,{container:document.body});var Qd,Kd=a("./packages/grafana-ui/src/components/Select/DropdownIndicator.tsx"),Yd=a("./packages/grafana-ui/src/components/Select/getSelectStyles.ts"),Jd=a("./packages/grafana-ui/src/components/Forms/RadioButtonGroup/RadioButtonGroup.tsx");const Xd=["value","width","onChange"];const eu=F.forwardRef(((e,t)=>{let{value:a,width:s,onChange:n}=e,r=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Xd);const i=F.useRef(null),o=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];const s=F.useRef(null);return F.useEffect((()=>{t.forEach((e=>{e&&("function"==typeof e?e(s.current):e.current=s.current)}))}),[t]),s}(t,i),l=""!==a?(0,L.jsx)($.zx,{icon:"times",fill:"text",size:"sm",onClick:e=>{var t;null===(t=i.current)||void 0===t||t.focus(),n(""),e.stopPropagation()},children:"Clear"}):null;return(0,L.jsx)(Je.I,Object.assign({prefix:Qd||(Qd=(0,L.jsx)(P.J,{name:"search"})),suffix:l,width:s,type:"text",value:a?(0,ye.unEscapeStringFromRegex)(a):"",onChange:e=>n((0,ye.escapeStringForRegex)(e.currentTarget.value))},r,{ref:o}))}));eu.displayName="FilterInput";var tu=a("./packages/grafana-ui/src/components/Switch/Switch.tsx");function au(e){const t=e.lastIndexOf("."),a=e.substring(t),s=e.substring(0,t);return s.length<16?e:`${s.substring(0,16)}...${a}`}const su=e=>{let{onFileUpload:t,className:a,children:s="Upload file",accept:n="*",size:r="md"}=e;const i=(0,D.l4)(),o=nu(i,r),[l,c]=(0,F.useState)(""),d=(0,F.useCallback)((e=>{var a,s;const n=null===(a=e.currentTarget)||void 0===a||null===(s=a.files)||void 0===s?void 0:s[0];var r;n&&c(null!==(r=n.name)&&void 0!==r?r:"");t(e)}),[t]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("label",{className:(0,A.cx)(o.button,a),children:[(0,L.jsx)(P.J,{name:"upload",className:o.icon}),s,(0,L.jsx)("input",{type:"file",id:"fileUpload",className:o.fileUpload,onChange:d,multiple:!1,accept:n})]}),l&&(0,L.jsx)("span",{"aria-label":"File name",className:o.fileName,children:au(l)})]})},nu=(0,D.Bb)(((e,t)=>{const a=(0,$.fW)({theme:e,variant:"primary",size:t,iconOnly:!1});return{fileUpload:A.css`
      display: none;
    `,button:a.button,icon:a.icon,fileName:A.css`
      margin-left: ${e.spacing(.5)};
    `}}));var ru,iu=a("./.yarn/__virtual__/react-dropzone-virtual-81f6d28245/3/opt/drone/yarncache/react-dropzone-npm-11.5.1-aafd1df9b7-54d801ca5b.zip/node_modules/react-dropzone/dist/es/index.js");const ou="Remove file";function lu(e){var t,a;let{file:s,removeFile:n}=e;const r=(0,D.wW)(cu),{file:i,progress:o,error:l,abortUpload:c,retryUpload:d}=s,u=(0,ye.getValueFormat)("decbytes")(i.size);return(0,L.jsxs)("div",{className:r.fileListContainer,children:[(0,L.jsxs)("span",{className:r.fileNameWrapper,children:[ru||(ru=(0,L.jsx)(P.J,{name:"file-blank",size:"lg","aria-hidden":!0})),(0,L.jsx)("span",{className:r.padding,children:au(i.name)}),(0,L.jsx)("span",{children:(0,ye.formattedValueToString)(u)})]}),(0,L.jsx)("div",{className:r.fileNameWrapper,children:l?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("span",{className:r.error,children:l.message}),d&&(t||(t=(0,L.jsx)(M.h,{type:"button","aria-label":"Retry",name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:d}))),n&&(0,L.jsx)(M.h,{className:d?r.marginLeft:"",type:"button",name:"trash-alt",onClick:()=>n(s),tooltip:ou,"aria-label":ou})]}):o&&i.size>o?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("progress",{className:r.progressBar,max:i.size,value:o}),(0,L.jsxs)("span",{className:r.paddingLeft,children:[Math.round(o/i.size*100),"%"]}),c&&(a||(a=(0,L.jsx)($.zx,{variant:"secondary",type:"button",fill:"text",onClick:c,children:"Cancel upload"})))]}):n&&(0,L.jsx)(M.h,{name:"trash-alt",onClick:()=>n(s),tooltip:ou,"aria-label":ou,type:"button",tooltipPlacement:"top"})})]})}function cu(e){return{fileListContainer:A.css`
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: ${e.spacing(2)};
      border: 1px dashed ${e.colors.border.medium};
      background-color: ${e.colors.background.secondary};
      margin-top: ${e.spacing(1)};
    `,fileNameWrapper:A.css`
      display: flex;
      flex-direction: row;
      align-items: center;
    `,padding:A.css`
      padding: ${e.spacing(0,1)};
    `,paddingLeft:A.css`
      padding-left: ${e.spacing(2)};
    `,marginLeft:A.css`
      margin-left: ${e.spacing(1)};
    `,error:A.css`
      padding-right: ${e.spacing(2)};
      color: ${e.colors.error.text};
    `,progressBar:A.css`
      border-radius: ${e.spacing(1)};
      height: 4px;
      ::-webkit-progress-bar {
        background-color: ${e.colors.border.weak};
        border-radius: ${e.spacing(1)};
      }
      ::-webkit-progress-value {
        background-color: ${e.colors.primary.main};
        border-radius: ${e.spacing(1)};
      }
    `}}var du;function uu(e){let{options:t,children:a,readAs:s,onLoad:n,fileListRenderer:r}=e;const[i,o]=(0,F.useState)([]),l=(0,F.useCallback)(((e,t)=>{o((a=>a.map((a=>a.id===e.id?(t(a),a):a))))}),[]),c=(0,F.useCallback)(((e,a,r)=>{let i=e.map(gu);if(!1===(null==t?void 0:t.multiple)?o(i):o((e=>[...e,...i])),null!=t&&t.onDrop)t.onDrop(e,a,r);else for(const e of i){const t=new FileReader,a=()=>{s?t[s](e.file):t.readAsText(e.file)};l(e,(s=>{s.abortUpload=()=>{t.abort()},s.retryUpload=()=>{l(e,(e=>{e.error=null,e.progress=void 0})),a()}})),t.onabort=()=>{l(e,(e=>{e.error=new DOMException("Aborted")}))},t.onprogress=t=>{l(e,(e=>{e.progress=t.loaded}))},t.onload=()=>{null==n||n(t.result)},t.onerror=()=>{l(e,(e=>{e.error=t.error}))},a()}}),[n,t,s,l]),d=e=>{const t=i.filter((t=>e.id!==t.id));o(t)},{getRootProps:u,getInputProps:p,isDragActive:h}=(0,iu.uI)(Object.assign({},t,{onDrop:c})),m=fu((0,D.l4)(),h),g=i.map((e=>r?r(e,d):(0,L.jsx)(lu,{file:e,removeFile:d},e.id)));return(0,L.jsxs)("div",{className:m.container,children:[(0,L.jsxs)("div",Object.assign({"data-testid":"dropzone"},u({className:m.dropzone}),{children:[(0,L.jsx)("input",Object.assign({},p())),null!=a?a:(0,L.jsx)(pu,{primaryText:hu(i,t)})]})),(null==t?void 0:t.accept)&&(0,L.jsx)("small",{className:(0,A.cx)(m.small,m.acceptMargin),children:mu(t)}),g]})}function pu(e){let{primaryText:t="Upload file",secondaryText:a="Drag and drop here or browse"}=e;const s=fu((0,D.l4)());return(0,L.jsxs)("div",{className:s.iconWrapper,children:[du||(du=(0,L.jsx)(P.J,{name:"upload",size:"xxl"})),(0,L.jsx)("h3",{children:t}),(0,L.jsx)("small",{className:s.small,children:a})]})}function hu(e,t){return void 0===(null==t?void 0:t.multiple)||null!=t&&t.multiple?"Upload file":e.length?"Replace file":"Upload file"}function mu(e){return Array.isArray(e.accept)?`Accepted file types: ${e.accept.join(", ")}`:`Accepted file type: ${e.accept}`}function gu(e){return{id:(0,$t.uniqueId)("file"),file:e,error:null}}function fu(e,t){return{container:A.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:A.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${e.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${e.colors.border.medium};
      background-color: ${t?e.colors.background.secondary:e.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:A.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:A.css`
      margin: ${e.spacing(2,0,1)};
    `,small:A.css`
      color: ${e.colors.text.secondary};
    `}}const bu=e=>ye.dateMath.isValid(e.from)&&ye.dateMath.isValid(e.to),vu=()=>{},xu=e=>{let{value:t,onChange:a,onChangeTimeZone:s=vu,clearable:n,hideTimeZone:r=!0,timeZone:i="browser",placeholder:o="Select time range",isReversed:l=!0,hideQuickRanges:c=!1,disabled:d=!1}=e;const[u,p]=(0,F.useState)(!1),h=(0,je.l4)(),m=yu(h,d),g=()=>{p(!1)};return(0,L.jsxs)("div",{className:m.container,children:[(0,L.jsxs)("div",{tabIndex:0,className:m.pickerInput,"aria-label":Ne.wl.components.TimePicker.openButton,onClick:e=>{e.stopPropagation(),e.preventDefault(),d||p(!u)},children:[bu(t)?(0,L.jsx)(Ta,{value:t,timeZone:i}):(0,L.jsx)("span",{className:m.placeholder,children:o}),!d&&(0,L.jsxs)("span",{className:m.caretIcon,children:[bu(t)&&n&&(0,L.jsx)(P.J,{className:m.clearIcon,name:"times",size:"lg",onClick:e=>{e.stopPropagation();const t=(0,ye.dateTime)(null),s=(0,ye.dateTime)(null);a({from:t,to:s,raw:{from:t,to:s}})}}),(0,L.jsx)(P.J,{name:u?"angle-up":"angle-down",size:"lg"})]})]}),u&&(0,L.jsx)(we.L,{includeButtonPress:!1,onClick:g,children:(0,L.jsx)(ha,{timeZone:i,value:bu(t)?t:(0,ye.getDefaultTimeRange)(),onChange:e=>{g(),a(e)},quickOptions:sa,onChangeTimeZone:s,className:m.content,hideTimeZone:r,isReversed:l,hideQuickRanges:c})})]})},yu=(0,D.Bb)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=(0,Je.H)({theme:e,invalid:!1});return{container:A.css`
      display: flex;
      position: relative;
    `,content:A.css`
      margin-left: 0;
    `,pickerInput:(0,A.cx)(a.input,t&&a.inputDisabled,a.wrapper,A.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        line-height: ${e.v1.spacing.formInputHeight-2}px;
      `),caretIcon:(0,A.cx)(a.suffix,A.css`
        position: relative;
        top: -1px;
        margin-left: ${e.v1.spacing.xs};
      `),clearIcon:A.css`
      margin-right: ${e.v1.spacing.xs};
      &:hover {
        color: ${e.v1.colors.linkHover};
      }
    `,placeholder:A.css`
      color: ${e.v1.colors.formInputPlaceholderText};
      opacity: 1;
    `}})),wu=/^now$|^now\-(\d{1,10})([wdhms])$/,ju=e=>({from:Su(e.from),to:Su(e.to)}),Cu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();if(!ku(e))return{isValid:!1,errorMessage:"Value not in relative time format."};const a=Su(e);return a>Math.ceil(t/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}},ku=e=>wu.test(e),Su=e=>{const t=wu.exec(e);if(!t||3!==t.length)return 0;const[,a,s]=t,n=parseInt(a,10);return isNaN(n)?0:n*Tu[s]},Tu={w:604800,d:86400,h:3600,m:60,s:1},Ou=e=>e<=0?"now":e>=Tu.w&&e%Tu.w==0?`now-${e/Tu.w}w`:e>=Tu.d&&e%Tu.d==0?`now-${e/Tu.d}d`:e>=Tu.h&&e%Tu.h==0?`now-${e/Tu.h}h`:e>=Tu.m&&e%Tu.m==0?`now-${e/Tu.m}m`:`now-${e}s`;var _u,Nu,Iu,Pu;const Mu=sa.filter((e=>ku(e.from)));function Fu(e){const{timeRange:t,onChange:a}=e,[s,n]=(0,F.useState)(!1),r=(0,F.useCallback)((()=>n(!1)),[]),i=(e=>{const t=Ou(e.from),a=Ou(e.to);return{from:t,to:a,display:`${t} to ${a}`}})(t),[o,l]=(0,F.useState)({value:i.from,validation:Cu(i.from)}),[c,d]=(0,F.useState)({value:i.to,validation:Cu(i.to)}),u=(0,D.wW)($u(o.validation.errorMessage,c.validation.errorMessage)),p=(0,F.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),n(!s)}),[s]);return(0,L.jsxs)("div",{className:u.container,children:[(0,L.jsxs)("div",{tabIndex:0,className:u.pickerInput,onClick:p,children:[(0,L.jsx)("span",{className:u.clockIcon,children:_u||(_u=(0,L.jsx)(P.J,{name:"clock-nine"}))}),(0,L.jsxs)("span",{children:[i.from," to ",i.to]}),(0,L.jsx)("span",{className:u.caretIcon,children:(0,L.jsx)(P.J,{name:s?"angle-up":"angle-down",size:"lg"})})]}),s&&(0,L.jsx)(we.L,{includeButtonPress:!1,onClick:r,children:(0,L.jsx)("div",{className:u.content,children:(0,L.jsxs)("div",{className:u.body,children:[(0,L.jsx)(G.Z,{className:u.leftSide,hideHorizontalTrack:!0,children:(0,L.jsx)(_t,{title:"Example time ranges",options:Mu,onChange:e=>{const t=ju(e);t&&(r(),l(Object.assign({},o,{value:e.from})),d(Object.assign({},c,{value:e.to})),a(t))},value:i})}),(0,L.jsxs)("div",{className:u.rightSide,children:[(0,L.jsx)("div",{className:u.title,children:Nu||(Nu=(0,L.jsx)(Qe,{children:(0,L.jsx)(U.u,{content:(0,L.jsx)(Au,{}),placement:"bottom",theme:"info",children:(0,L.jsxs)("div",{children:["Specify time range ",(0,L.jsx)(P.J,{name:"info-circle"})]})})}))}),(0,L.jsx)(Ye.g,{label:"From",invalid:!o.validation.isValid,error:o.validation.errorMessage,children:(0,L.jsx)(Je.I,{onClick:e=>e.stopPropagation(),onBlur:()=>l(Object.assign({},o,{validation:Cu(o.value)})),onChange:e=>l(Object.assign({},o,{value:e.currentTarget.value})),value:o.value})}),(0,L.jsx)(Ye.g,{label:"To",invalid:!c.validation.isValid,error:c.validation.errorMessage,children:(0,L.jsx)(Je.I,{onClick:e=>e.stopPropagation(),onBlur:()=>d(Object.assign({},c,{validation:Cu(c.value)})),onChange:e=>d(Object.assign({},c,{value:e.currentTarget.value})),value:c.value})}),(0,L.jsx)($.zx,{"aria-label":"TimePicker submit button",onClick:e=>{if(e.preventDefault(),!c.validation.isValid||!o.validation.isValid)return;const t=ju({from:o.value,to:c.value,display:""});t&&(a(t),n(!1))},children:"Apply time range"})]})]})})})]})}const Au=()=>{const e=(0,D.wW)(Du);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:e.supported,children:["Supported formats: ",(0,L.jsx)("code",{className:e.tooltip,children:"now-[digit]s/m/h/d/w"})]}),Iu||(Iu=(0,L.jsx)("div",{children:"Example: to select a time range from 10 minutes ago to now"})),(0,L.jsx)("code",{className:e.tooltip,children:"From: now-10m To: now"}),(0,L.jsxs)("div",{className:e.link,children:["For more information see"," ",Pu||(Pu=(0,L.jsxs)("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/",children:["docs ",(0,L.jsx)(P.J,{name:"external-link-alt"})]})),"."]})]})},Du=e=>({supported:A.css`
    margin-bottom: ${e.spacing(1)};
  `,tooltip:A.css`
    margin: 0;
  `,link:A.css`
    margin-top: ${e.spacing(1)};
  `}),$u=(e,t)=>a=>{const s=(0,Je.H)({theme:a,invalid:!1}),n=250+Lu(a,e)+Lu(a,t);return{container:A.css`
      display: flex;
      position: relative;
    `,pickerInput:(0,A.cx)(s.input,s.wrapper,A.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        padding-left: 0;
        line-height: ${a.v1.spacing.formInputHeight-2}px;
      `),caretIcon:(0,A.cx)(s.suffix,A.css`
        position: relative;
        margin-left: ${a.v1.spacing.xs};
      `),clockIcon:(0,A.cx)(s.prefix,A.css`
        position: relative;
        margin-right: ${a.v1.spacing.xs};
      `),content:A.css`
      background: ${a.colors.background.primary};
      box-shadow: ${a.shadows.z3};
      position: absolute;
      z-index: ${a.zIndex.dropdown};
      width: 500px;
      top: 100%;
      border-radius: 2px;
      border: 1px solid ${a.colors.border.weak};
      left: 0;
      white-space: normal;
    `,body:A.css`
      display: flex;
      height: ${n}px;
    `,description:A.css`
      color: ${a.colors.text.secondary};
      font-size: ${a.typography.size.sm};
    `,leftSide:A.css`
      width: 50% !important;
      border-right: 1px solid ${a.colors.border.medium};
    `,rightSide:A.css`
      width: 50%;
      padding: ${a.spacing(1)};
    `,title:A.css`
      margin-bottom: ${a.spacing(1)};
    `}};function Lu(e,t){return t?t.length>34?6.5*e.spacing.gridSize:4*e.spacing.gridSize:0}const Ru=["children","disableEvents","disableHover","className","href"];const Eu=e=>{let{children:t,href:a}=e;const{inner:s}=(0,D.wW)(zu);return a?(0,L.jsx)("a",{className:s,href:a,children:t}):(0,L.jsx)(L.Fragment,{children:t})},zu=e=>({inner:(0,A.css)({display:"flex",width:"100%",padding:e.spacing(2)})}),Vu=e=>{let{children:t,disableEvents:a,disableHover:s,className:n,href:r}=e,i=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Ru);const o=(0,D.l4)(),{oldContainer:l}=Bu(o,a,s);return(0,L.jsx)("div",Object.assign({},i,{className:(0,A.cx)(l,n),children:(0,L.jsx)(Eu,{href:r,children:t})}))},Bu=(0,D.Bb)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{container:(0,A.css)(Object.assign({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:'\n        "Figure Heading Tags"\n        "Figure Meta Tags"\n        "Figure Description Tags"\n        "Figure Actions Secondary"',width:"100%",padding:e.spacing(2),background:e.colors.background.secondary,borderRadius:e.shape.borderRadius(),marginBottom:"8px",pointerEvents:t?"none":"auto",transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short})},!a&&{"&:hover":{background:e.colors.emphasize(e.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":D.GU.getFocusStyles(e)})),oldContainer:(0,A.css)(Object.assign({display:"flex",width:"100%",background:e.colors.background.secondary,borderRadius:e.shape.borderRadius(),position:"relative",pointerEvents:t?"none":"auto",marginBottom:e.spacing(1),transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short})},!a&&{"&:hover":{background:e.colors.emphasize(e.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":D.GU.getFocusStyles(e)}))}}));var Uu;const Hu=["disabled","href","onClick","children","heading","description","className"];const qu=F.createContext(null),Wu=e=>{let{disabled:t,href:a,onClick:s,children:n,heading:r,description:i,className:o}=e,l=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Hu);const c=(0,F.useMemo)((()=>F.Children.toArray(n).some((e=>F.isValidElement(e)&&e.type.displayName===Gu.displayName))),[n]),d=t||!s&&!a,u=s&&!t?s:void 0,p=(0,D.l4)(),h=Bu(p,t,d);return(0,L.jsx)(Vu,Object.assign({disableEvents:t,disableHover:d,className:(0,A.cx)(h.container,o)},l,{children:(0,L.jsxs)(qu.Provider,{value:{href:a,onClick:u,disabled:t},children:[!c&&(Uu||(Uu=(0,L.jsx)(Gu,{}))),r&&(0,L.jsx)(Gu,{children:r}),i&&(0,L.jsx)(Yu,{children:i}),n]})}))},Gu=e=>{let{children:t,className:a,"aria-label":s}=e;const n=(0,F.useContext)(qu),r=(0,D.wW)(Zu),{href:i,onClick:o}=null!=n?n:{href:void 0,onClick:void 0};return(0,L.jsx)("h2",{className:(0,A.cx)(r.heading,a),children:i?(0,L.jsx)("a",{href:i,className:r.linkHack,"aria-label":s,children:t}):o?(0,L.jsx)("button",{onClick:o,className:r.linkHack,"aria-label":s,children:t}):(0,L.jsx)(L.Fragment,{children:t})})};Gu.displayName="Heading";const Zu=e=>({heading:(0,A.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:e.typography.size.md,letterSpacing:"inherit",lineHeight:e.typography.body.lineHeight,color:e.colors.text.primary,fontWeight:e.typography.fontWeightMedium}),linkHack:(0,A.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:e.shape.borderRadius(1)},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":Object.assign({},(0,Me.getFocusStyles)(e),{zIndex:1})}})}),Qu=e=>{let{children:t,className:a}=e;const s=(0,D.wW)(Ku);return(0,L.jsx)("div",{className:(0,A.cx)(s.tagList,a),children:t})};Qu.displayName="Tags";const Ku=e=>({tagList:(0,A.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),Yu=e=>{let{children:t,className:a}=e;const s=(0,D.wW)(Ju);return(0,L.jsx)("p",{className:(0,A.cx)(s.description,a),children:t})};Yu.displayName="Description";const Ju=e=>({description:(0,A.css)({width:"100%",gridArea:"Description",margin:e.spacing(1,0,0),color:e.colors.text.secondary,lineHeight:e.typography.body.lineHeight})}),Xu=e=>{let{children:t,align:a="start",className:s}=e;const n=(0,D.wW)(ep);return(0,L.jsx)("div",{className:(0,A.cx)(n.media,s,A.css`
          align-self: ${a};
        `),children:t})};Xu.displayName="Figure";const ep=e=>({media:(0,A.css)({position:"relative",gridArea:"Figure",marginRight:e.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),tp=(0,F.memo)((e=>{let{children:t,className:a,separator:s="|"}=e;const n=(0,D.wW)(ap);let r=t;if(Array.isArray(t)&&s){const e=F.Children.toArray(t).filter(Boolean);if(!e.length)return null;r=e.reduce(((e,t,a)=>[e,(0,L.jsx)("span",{className:n.separator,children:s},`separator_${a}`),t]))}return(0,L.jsx)("div",{className:(0,A.cx)(n.metadata,a),children:r})}));tp.displayName="Meta";const ap=e=>({metadata:(0,A.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:e.typography.size.sm,color:e.colors.text.secondary,margin:e.spacing(.5,0,0),lineHeight:e.typography.bodySmall.lineHeight,overflowWrap:"anywhere",zIndex:0}),separator:(0,A.css)({margin:`0 ${e.spacing(1)}`})}),sp=e=>{let{children:t,disabled:a,variant:s,className:n}=e;const r=(0,D.wW)(np),i=(0,F.useContext)(qu),o=(null==i?void 0:i.disabled)||a,l="primary"===s?r.actions:r.secondaryActions;return(0,L.jsx)("div",{className:(0,A.cx)(l,n),children:F.Children.map(t,(e=>F.isValidElement(e)?(0,F.cloneElement)(e,Object.assign({disabled:o},e.props)):null))})},np=e=>({actions:(0,A.css)({gridArea:"Actions",marginTop:e.spacing(2),"& > *":{marginRight:e.spacing(1)}}),secondaryActions:(0,A.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:e.colors.text.secondary,marginTtop:e.spacing(2),"& > *":{marginRight:`${e.spacing(1)} !important`}})}),rp=e=>{let{children:t,disabled:a,className:s}=e;return(0,L.jsx)(sp,{variant:"primary",disabled:a,className:s,children:t})};rp.displayName="Actions";const ip=e=>{let{children:t,disabled:a,className:s}=e;return(0,L.jsx)(sp,{variant:"secondary",disabled:a,className:s,children:t})};ip.displayName="SecondaryActions";const op=e=>Object.assign({inner:A.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      flex-wrap: wrap;
    `},Zu(e),ap(e),Ju(e),ep(e),np(e),Ku(e));Wu.Heading=Gu,Wu.Tags=Qu,Wu.Figure=Xu,Wu.Meta=tp,Wu.Actions=rp,Wu.SecondaryActions=ip,Wu.Description=Yu;const lp=["status"];const cp=e=>{let{status:t}=e,a=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,lp);const s=function(e){e||(e=ye.PluginSignatureStatus.invalid);switch(e){case ye.PluginSignatureStatus.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case ye.PluginSignatureStatus.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case ye.PluginSignatureStatus.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case ye.PluginSignatureStatus.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case ye.PluginSignatureStatus.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}(t);return(0,L.jsx)(cl,Object.assign({text:s.text,color:s.color,icon:s.icon,tooltip:s.tooltip},a))};cp.displayName="PluginSignatureBadge";var dp=a("./packages/grafana-ui/src/components/Forms/Legacy/Select/Select.tsx"),up=a("./packages/grafana-ui/src/components/Forms/Legacy/Select/IndicatorsContainer.tsx"),pp=a("./packages/grafana-ui/src/components/Forms/Legacy/Select/NoOptionsMessage.tsx");const hp={drawStyle:[{label:"Lines",value:ai.l8.Line},{label:"Bars",value:ai.l8.Bars},{label:"Points",value:ai.l8.Points}],lineInterpolation:[{description:"Linear",value:ai.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:ai.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:ai.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:ai.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:ai.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:ai.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:ai.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:ai.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:ai.Jp.Always},{label:"Never",value:ai.Jp.Never}],axisPlacement:[{label:"Auto",value:ai.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:ai.LB.Left},{label:"Right",value:ai.LB.Right},{label:"Hidden",value:ai.LB.Hidden}],fillGradient:[{label:"None",value:ai.FI.None},{label:"Opacity",value:ai.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:ai.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:ai.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:ai.o0.None},{label:"Normal",value:ai.o0.Normal},{label:"100%",value:ai.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:ai.i3.Off},{label:"As lines",value:ai.i3.Line},{label:"As filled regions",value:ai.i3.Area},{label:"As filled regions and lines",value:ai.i3.LineAndArea}]};var mp=a("./packages/grafana-ui/src/components/uPlot/config/UPlotConfigBuilder.ts"),gp=a("./packages/grafana-ui/src/components/uPlot/config/UPlotAxisBuilder.ts"),fp=a("./packages/grafana-ui/src/components/uPlot/Plot.tsx");const bp=["data","config","placement","calcs","displayMode"];const vp=e=>null==e?"-":e.toFixed(1),xp=e=>{let{data:t,config:a,placement:s,calcs:n,displayMode:r}=e,i=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,bp);const o=(0,D.l4)(),l=a.getSeries().map((e=>{var s,r,i,l;const c=e.props,d=c.dataFrameFieldIndex,u=a.getAxisPlacement(e.props.scaleKey);if(!d)return;const p=null===(s=t[d.frameIndex])||void 0===s?void 0:s.fields[d.fieldIndex];if(!p||null!==(r=p.config.custom)&&void 0!==r&&null!==(i=r.hideFrom)&&void 0!==i&&i.legend)return;const h=(0,ye.getFieldDisplayName)(p,t[d.frameIndex],t),m=(0,ye.getFieldSeriesColor)(p,o).color;return{disabled:!(null===(l=c.show)||void 0===l||l),fieldIndex:d,color:m,label:h,yAxis:u===ai.LB.Left?1:2,getDisplayValues:()=>{var e;if(null==n||!n.length)return[];const t=null!==(e=p.display)&&void 0!==e?e:vp,a=(0,ye.reduceField)({field:p,reducers:n});return n.map((e=>{const s=ye.fieldReducers.get(e);return Object.assign({},t(a[e]),{title:s.name,description:s.description})}))},getItemKey:()=>`${h}-${d.frameIndex}-${d.fieldIndex}`}})).filter((e=>void 0!==e));return(0,L.jsx)(Ki.AY.Legend,Object.assign({placement:s},i,{children:(0,L.jsx)(Hi,{placement:s,items:l,displayMode:r,sortBy:i.sortBy,sortDesc:i.sortDesc})}))};xp.displayName="PlotLegend";const yp=e=>{let{children:t,left:a,top:s}=e;const n=(0,F.useMemo)((()=>A.css`
      position: absolute;
      overflow: visible;
      left: ${a}px;
      top: ${s}px;
    `),[a,s]);return(0,L.jsx)("div",{className:n,children:t})},wp=e=>{let{x:t,y:a,children:s}=e;return(0,L.jsx)("div",{style:{position:"absolute",top:`${a}px`,left:`${t}px`},children:s})};var jp=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useMountedState.js");function Cp(e){let{id:t,events:a,renderEventMarker:s,mapEventToXYCoords:n,config:r}=e;const i=(0,F.useRef)(),[o,l]=(0,F.useState)(0),c=(0,jp.Z)();(0,F.useLayoutEffect)((()=>{r.addHook("init",(e=>{i.current=e})),r.addHook("draw",(()=>{c()&&l((e=>e+1))}))}),[r,l]);const d=(0,F.useMemo)((()=>{const e=[];if(!i.current||0===a.length)return e;for(let r=0;r<a.length;r++){const i=a[r];for(let a=0;a<i.length;a++){const o=n(i,{fieldIndex:a,frameIndex:r});o&&e.push((0,F.createElement)(wp,Object.assign({},o,{key:`${t}-marker-${r}-${a}`}),s(i,{fieldIndex:a,frameIndex:r})))}}return(0,L.jsx)(L.Fragment,{children:e})}),[a,s,o]);return i.current?(0,L.jsx)(yp,{left:i.current.bbox.left/window.devicePixelRatio,top:i.current.bbox.top/window.devicePixelRatio,children:d}):null}var kp=a("./packages/grafana-ui/src/components/uPlot/utils.ts");const Sp=e=>{let{onZoom:t,config:a}=e;const[s,n]=(0,F.useState)(null);return(0,F.useEffect)((()=>{if(s){if((0,kp.Zp)("ZoomPlugin",!1,"selected",s),s.bbox.width<5)return;t({from:s.min,to:s.max})}}),[s]),(0,F.useLayoutEffect)((()=>{a.addHook("setSelect",(e=>{const t=e.posToVal(e.select.left,"x"),a=e.posToVal(e.select.left+e.select.width,"x");n({min:t,max:a,bbox:{left:e.bbox.left/window.devicePixelRatio+e.select.left,top:e.bbox.top/window.devicePixelRatio,height:e.bbox.height/window.devicePixelRatio,width:e.select.width}}),e.setSelect({left:0,width:0},!1)}))}),[a]),null};var Tp=a("./packages/grafana-ui/src/components/uPlot/plugins/TooltipPlugin.tsx");const Op=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),_p=e=>{let t=e.root.closest("[tabindex]"),a=new Set,s=null,n=null;if(!t)return;const r=t=>{var i;if(0===a.size||!e)return void(n=null);const o=.1*(t-(null!==(i=n)&&void 0!==i?i:t));let l=0,c=0;a.has("ArrowUp")&&(c-=o),a.has("ArrowDown")&&(c+=o),a.has("ArrowLeft")&&(l-=o),a.has("ArrowRight")&&(l+=o),a.has("Shift")&&(l*=2,c*=2),((t,a)=>{const{cursor:s}=e;if(void 0===s.left||void 0===s.top)return;const{width:n,height:r}=e.over.style,[i,o]=[Math.floor(parseFloat(n)),Math.floor(parseFloat(r))];e.setCursor({left:(0,$t.clamp)(s.left+t,0,i),top:(0,$t.clamp)(s.top+a,0,o)})})(l,c);const{cursor:d}=e;if(a.has(" ")&&d){var u;const t=Number(e.over.style.height.slice(0,-2));e.setSelect({left:d.left<s?d.left:s,top:0,width:Math.abs(d.left-(null!==(u=s)&&void 0!==u?u:d.left)),height:t},!1)}n=t,window.requestAnimationFrame(r)};t.addEventListener("keydown",(t=>{if("Tab"===t.key)return void e.setCursor({left:-5,top:-5});if(!Op.has(t.key))return;t.preventDefault(),t.stopPropagation();if(!a.has(t.key)){const n=0===a.size;a.add(t.key),s=" "===t.key&&null===s?e.cursor.left:s,n&&window.requestAnimationFrame(r)}})),t.addEventListener("keyup",(t=>{Op.has(t.key)&&(a.delete(t.key)," "===t.key&&(t.preventDefault(),t.stopPropagation(),e.setSelect(e.select),s=null))})),t.addEventListener("focus",(a=>{if(null==t||!t.matches(":focus-visible"))return;const s=parseFloat(e.over.style.width),n=parseFloat(e.over.style.height);e.setCursor({left:s/2,top:n/2})})),t.addEventListener("blur",(t=>{n=null,s=null,a.clear(),e.setSelect({left:0,top:0,width:0,height:0},!1)}))},Np=e=>{let{config:t}=e;return(0,F.useLayoutEffect)((()=>t.addHook("init",_p)),[t]),null};var Ip=a("./packages/grafana-ui/src/components/uPlot/types.ts"),Pp=a("./packages/grafana-ui/src/components/GraphNG/GraphNG.tsx"),Mp=a("./packages/grafana-ui/src/components/GraphNG/utils.ts");const Fp=e=>null==e?"-":e.toFixed(1),Ap={drawStyle:ai.l8.Line,showPoints:ai.Jp.Auto,axisPlacement:ai.LB.Auto};function Dp(e,t){const a=new Map;return e.fields.forEach(((e,s)=>{var n;const r=null===(n=e.state)||void 0===n?void 0:n.origin;if(r){var i;const e=null===(i=t[r.frameIndex])||void 0===i?void 0:i.fields[r.fieldIndex];e&&a.set((0,ye.getFieldDisplayName)(e,t[r.frameIndex],t),s)}})),a}function $p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Lp=["legend","options"];class Rp extends F.Component{constructor(){super(...arguments),$p(this,"panelContext",{}),$p(this,"prepConfig",((e,t,a)=>{const{eventBus:s,sync:n}=this.context,{theme:r,timeZone:i,legend:o,renderers:l,tweakAxis:c,tweakScale:d}=this.props;return(e=>{var t,a,s;let{frame:n,theme:r,timeZone:i,getTimeRange:o,eventBus:l,sync:c,allFrames:d,renderers:u,legend:p,tweakScale:h=(e=>e),tweakAxis:m=(e=>e)}=e;const g=new mp.U(i);g.setPrepData((e=>(0,kp.k6)(e,void 0,p)));const f=n.fields[0];if(!f)return g;let b=0;const v="x";let x="_x",y="";const w=(null===(t=f.config.custom)||void 0===t?void 0:t.axisPlacement)!==ai.LB.Hidden?ai.LB.Bottom:ai.LB.Hidden,j=(null===(a=f.config.custom)||void 0===a?void 0:a.axisPlacement)!==ai.LB.Hidden;var C,k,S,T;f.type===ye.FieldType.time?(x="time",g.addScale({scaleKey:v,orientation:ai.wN.Horizontal,direction:ai.bQ.Right,isTime:!0,range:()=>{const e=o();return[e.from.valueOf(),e.to.valueOf()]}}),g.addAxis({scaleKey:v,isTime:!0,placement:w,show:j,label:null===(C=f.config.custom)||void 0===C?void 0:C.axisLabel,timeZone:i,theme:r,grid:{show:null===(k=f.config.custom)||void 0===k?void 0:k.axisGridShow}})):(f.config.unit&&(x=f.config.unit),g.addScale({scaleKey:v,orientation:ai.wN.Horizontal,direction:ai.bQ.Right}),g.addAxis({scaleKey:v,placement:w,show:j,label:null===(S=f.config.custom)||void 0===S?void 0:S.axisLabel,theme:r,grid:{show:null===(T=f.config.custom)||void 0===T?void 0:T.axisGridShow}}));let O=null!==(s=null==u?void 0:u.flatMap((e=>Object.values(e.fieldMap).filter((t=>-1===e.indicesOnly.indexOf(t))))))&&void 0!==s?s:[];const _=new Map;let N;for(let e=1;e<n.fields.length;e++){var I,P,M,F,A,D,$,L,R;const t=n.fields[e],a=Object.assign({},t.config,{custom:Object.assign({},Ap,t.config.custom)}),s=a.custom;if(t===f||t.type!==ye.FieldType.number)continue;t.state.seriesIndex=b++;let i=null!==(I=t.display)&&void 0!==I?I:Fp;(null===(P=t.config.custom)||void 0===P||null===(M=P.stacking)||void 0===M?void 0:M.mode)===ai.o0.Percent&&(i=(0,ye.getDisplayProcessor)({field:Object.assign({},t,{config:Object.assign({},t.config,{unit:"percentunit"})}),theme:r}));const o=(0,Mp.z)(a),l=(0,ye.getFieldColorModeForField)(t),c=(0,ye.getFieldSeriesColor)(t,r).color;var E;g.addScale(h({scaleKey:o,orientation:ai.wN.Vertical,direction:ai.bQ.Up,distribution:null===(F=s.scaleDistribution)||void 0===F?void 0:F.type,log:null===(A=s.scaleDistribution)||void 0===A?void 0:A.log,min:t.config.min,max:t.config.max,softMin:s.axisSoftMin,softMax:s.axisSoftMax},t)),y||(y=o),s.axisPlacement!==ai.LB.Hidden&&g.addAxis(m({scaleKey:o,label:s.axisLabel,size:s.axisWidth,placement:null!==(E=s.axisPlacement)&&void 0!==E?E:ai.LB.Auto,formatValue:e=>(0,ye.formattedValueToString)(i(e)),theme:r,grid:{show:s.axisGridShow}},t));const u=s.drawStyle===ai.l8.Points?ai.Jp.Always:s.showPoints;let p=()=>null;!0!==s.spanNulls&&(p=(e,t,a,s)=>{let n=[],r=e.series[t];if(!a&&s&&s.length){const[t,a]=r.idxs,i=e.data[0],o=Math.round(e.valToPos(i[t],"x",!0)),l=Math.round(e.valToPos(i[a],"x",!0));s[0][0]===o&&n.push(t);for(let t=0;t<s.length;t++){let a=s[t],r=s[t+1];r&&a[1]===r[0]&&n.push(e.posToIdx(a[1],!0))}s[s.length-1][1]===l&&n.push(a)}return n.length?n:null});let{fillOpacity:v}=s,x=null,w=null;if(null!==(D=t.state)&&void 0!==D&&D.origin){N||(N=Dp(n,d));const e=d[t.state.origin.frameIndex],a=null==e?void 0:e.fields[t.state.origin.fieldIndex],r=(0,ye.getFieldDisplayName)(null!=a?a:t,e,d);if(O.indexOf(r)>=0&&(x=()=>null,w=()=>{}),s.fillBelowTo){const e=N.get(r),t=N.get(s.fillBelowTo);(0,$t.isNumber)(t)&&(0,$t.isNumber)(e)?(g.addBand({series:[e,t],fill:void 0}),v||(v=35)):v=0}}var z;if(g.addSeries({pathBuilder:x,pointsBuilder:w,scaleKey:o,showPoints:u,pointsFilter:p,colorMode:l,fillOpacity:v,theme:r,drawStyle:s.drawStyle,lineColor:null!==($=s.lineColor)&&void 0!==$?$:c,lineWidth:s.lineWidth,lineInterpolation:s.lineInterpolation,lineStyle:s.lineStyle,barAlignment:s.barAlignment,barWidthFactor:s.barWidthFactor,barMaxWidth:s.barMaxWidth,pointSize:s.pointSize,spanNulls:s.spanNulls||!1,show:!(null!==(L=s.hideFrom)&&void 0!==L&&L.viz),gradientMode:s.gradientMode,thresholds:a.thresholds,hardMin:t.config.min,hardMax:t.config.max,softMin:s.axisSoftMin,softMax:s.axisSoftMax,dataFrameFieldIndex:null===(R=t.state)||void 0===R?void 0:R.origin}),s.thresholdsStyle&&a.thresholds)(null!==(z=s.thresholdsStyle.mode)&&void 0!==z?z:ai.i3.Off)!==ai.i3.Off&&g.addThresholds({config:s.thresholdsStyle,thresholds:a.thresholds,scaleKey:o,theme:r,hardMin:t.config.min,hardMax:t.config.max,softMin:s.axisSoftMin,softMax:s.axisSoftMax});(0,kp.oP)(t,_,b)}if(0!==_.size)for(const[e,t]of _.entries()){const a=(0,kp.J4)({ids:t,legend:p,frame:n});for(let t=a.length-1;t>0;t--)g.addBand({series:[a[t],a[t-1]],dir:e.startsWith(kp.lI)?1:-1})}null==u||u.forEach((e=>{N||(N=Dp(n,d));let t={};for(let a in e.fieldMap){let s=e.fieldMap[a];t[a]=N.get(s)}e.init(g,t)})),g.scaleKeys=[v,y];let V={dataIdx:(e,t,a,s)=>{let n=e.data[t];if(null==n[a]){let t,r=null,i=null;for(t=a;null==r&&t-- >0;)null!=n[t]&&(r=t);for(t=a;null==i&&t++<n.length;)null!=n[t]&&(i=t);let o=e.data[0],l=e.valToPos(s,"x"),c=null==i?1/0:e.valToPos(o[i],"x"),d=l-(null==r?-1/0:e.valToPos(o[r],"x")),u=c-l;d<=u?d<=15&&(a=r):u<=15&&(a=i)}return a}};if(c&&c()!==ye.DashboardCursorSync.Off){const e={point:{[v]:null,[y]:null},data:n},t=new ye.DataHoverEvent(e);V.sync={key:"__global_",filters:{pub:(a,s,n,r,i,o,d)=>!(c&&c()===ye.DashboardCursorSync.Off||(e.rowIndex=d,n<0&&r<0?(e.point[x]=null,e.point[y]=null,l.publish(new ye.DataHoverClearEvent)):(e.point[x]=s.posToVal(n,v),e.point[y]=s.posToVal(r,y),e.point.panelRelY=r>0?r/o:1,l.publish(t),t.payload.down=void 0),0))},scales:[v,null],match:[()=>!0,()=>!0]}}return g.setSync(),g.setCursor(V),g})({frame:e,theme:r,timeZone:i,getTimeRange:a,eventBus:s,sync:n,allFrames:t,legend:o,renderers:l,tweakScale:d,tweakAxis:c})})),$p(this,"renderLegend",(e=>{const{legend:t,frames:a}=this.props;return!e||t&&t.displayMode===ai.jK.Hidden?null:(0,L.jsx)(xp,Object.assign({data:a,config:e},t))}))}render(){return(0,L.jsx)(Pp.d,Object.assign({},this.props,{prepConfig:this.prepConfig,propsToDiff:Lp,renderLegend:this.renderLegend}))}}$p(Rp,"contextType",Oi.bb);const Ep=(0,je.HE)(Rp);Ep.displayName="TimeSeries";const zp=F.createContext({}),Vp=()=>{const{data:e,dimFields:t,mapSeriesIndexToDataFrameFieldIndex:a}=(0,F.useContext)(zp),s=(0,F.useCallback)((()=>{const a=t.x;let s=null;for(let t=0;t<e.fields.length;t++)if(a(e.fields[t],e,[e])){s=e.fields[t];break}return s}),[e,t]);return{dimFields:t,mapSeriesIndexToDataFrameFieldIndex:a,getXAxisField:s,alignedData:e}};var Bp,Up=a("./.yarn/__virtual__/@emotion-react-virtual-a8cfa8ca23/3/opt/drone/yarncache/@emotion-react-npm-11.7.1-29be6cd15f-3392aa71f9.zip/node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Hp(){return console.log("process.env.NODE_ENV","production"),Bp||(Bp=(0,Up.BX)(di.wc,{children:[(0,Up.tZ)("div",{children:"Emotion performance tests"}),(0,Up.tZ)(qp,{name:"No styles",Component:Xp}),(0,Up.tZ)(qp,{name:"inline emotion/css",Component:Jp}),(0,Up.tZ)(qp,{name:"useStyles no cx",Component:Gp}),(0,Up.tZ)(qp,{name:"useStyles with conditional cx styles",Component:Zp}),(0,Up.tZ)(qp,{name:"useStyles with css prop",Component:Kp}),(0,Up.tZ)(qp,{name:"useStyles with conditional css prop",Component:Yp}),(0,Up.tZ)(qp,{name:"useStyles with conditional classnames",Component:Qp})]}))}const qp=e=>{let{name:t,Component:a}=e;const[s,n]=(0,F.useState)(0);return(0,Up.BX)("div",{children:[(0,Up.tZ)($.zx,{onClick:()=>n(s>2?0:s+1),children:t}),s>0&&(0,Up.tZ)(eh,{id:t,children:Wp(a)})]})};function Wp(e){const t=[];for(let a=0;a<5e3;a++)t.push((0,Up.tZ)(e,{index:a},a.toString()));return(0,Up.tZ)("div",{style:{display:"flex",flexWrap:"wrap"},children:t})}function Gp(e){let{index:t}=e;const a=(0,D.wW)(th);return(0,Up.tZ)("div",{className:a.main,children:(0,Up.tZ)("div",{className:a.child,children:t})})}function Zp(e){let{index:t}=e;const a=(0,D.wW)(th),s=(0,A.cx)(a.main,{[a.large]:t>10,[a.disabed]:t%10==0});return(0,Up.tZ)("div",{className:s,children:(0,Up.tZ)("div",{className:a.child,children:t})})}function Qp(e){let{index:t}=e;const a=(0,D.wW)(th),s=ks()(a.main,{[a.large]:t>10,[a.disabed]:t%10==0});return(0,Up.tZ)("div",{className:s,children:(0,Up.tZ)("div",{className:a.child,children:t})})}function Kp(e){let{index:t}=e;const a=(0,D.wW)(ah);return(0,Up.tZ)("div",{css:a.main,children:(0,Up.tZ)("div",{css:a.child,children:t})})}function Yp(e){let{index:t}=e;const a=(0,D.wW)(ah),s=[a.main,t>10&&a.large,t%10==0&&a.disabed];return(0,Up.tZ)("div",{css:s,children:(0,Up.tZ)("div",{css:a.child,children:t})})}function Jp(e){let{index:t}=e;const a=(0,D.l4)(),s=th(a);return(0,Up.tZ)("div",{className:s.main,children:(0,Up.tZ)("div",{className:s.child,children:t})})}function Xp(e){let{index:t}=e;return(0,Up.tZ)("div",{className:"no-styles-main",children:(0,Up.tZ)("div",{className:"no-styles-child",children:t})})}function eh(e){let{children:t,id:a}=e;return(0,Up.tZ)(F.Profiler,{id:a,onRender:(e,t,a,s,n,r)=>{console.log("Profile "+e,a)},children:t})}qp.displayName="TestScenario";const th=e=>({main:(0,A.css)(sh(e)),large:(0,A.css)({fontSize:"20px",color:"red"}),disabed:(0,A.css)({fontSize:"10px",color:"gray"}),child:(0,A.css)({padding:"2px",fontSize:"10px",boxShadow:"none",textAlign:"center",textDecoration:"none"})}),ah=e=>({main:sh(e),large:{fontSize:"20px",color:"red"},disabed:{fontSize:"10px",color:"gray"},child:{padding:"2px",fontSize:"10px",boxShadow:"none",textAlign:"center",textDecoration:"none"}});function sh(e){return{background:"blue",border:"1px solid red",color:"white",padding:e.spacing(1),shadow:e.shadows.z1,":hover":{background:e.colors.background.primary}}}var nh=a("./.yarn/__virtual__/react-highlight-words-virtual-d2265e757c/3/opt/drone/yarncache/react-highlight-words-npm-0.17.0-880b4a18ed-41b3d0e451.zip/node_modules/react-highlight-words/dist/main.js"),rh=a.n(nh),ih=a("./packages/grafana-ui/src/components/Typeahead/PartialHighlighter.tsx");const oh=["name","value","hidden","facets","onClick","className","loading","searchTerm","active","style","title","highlightParts"];const lh=(0,F.forwardRef)(((e,t)=>{let{name:a,value:s,hidden:n,facets:r,onClick:i,className:o,loading:l,searchTerm:c,active:d,style:u,title:p,highlightParts:h}=e,m=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,oh);const g=(0,D.l4)(),f=ch(g),b=c?[c]:[],v=(0,F.useCallback)((e=>{i&&!n&&i(a,s,e)}),[i,a,n,s]);let x=s||a;return r&&(x=`${x} (${r})`),(0,L.jsx)("span",Object.assign({ref:t,onClick:v,style:u,title:p||x,role:"option","aria-selected":!!d,className:(0,A.cx)(f.base,d&&f.active,l&&f.loading,n&&f.hidden,o,i&&!n&&f.hover)},m,{children:void 0!==h?(0,L.jsx)(ih.H,{text:x,highlightClassName:f.matchHighLight,highlightParts:h}):(0,L.jsx)(rh(),{textToHighlight:x,searchWords:b,autoEscape:!0,highlightClassName:f.matchHighLight})}),x)}));lh.displayName="Label";const ch=e=>({base:A.css`
    display: inline-block;
    cursor: pointer;
    font-size: ${e.typography.size.sm};
    line-height: ${e.typography.bodySmall.lineHeight};
    background-color: ${e.colors.background.secondary};
    color: ${e.colors.text};
    white-space: nowrap;
    text-shadow: none;
    padding: ${e.spacing(.5)};
    border-radius: ${e.shape.borderRadius()};
    margin-right: ${e.spacing(1)};
    margin-bottom: ${e.spacing(.5)};
  `,loading:A.css`
    font-weight: ${e.typography.fontWeightMedium};
    background-color: ${e.colors.primary.shade};
    color: ${e.colors.text.primary};
    animation: pulse 3s ease-out 0s infinite normal forwards;
    @keyframes pulse {
      0% {
        color: ${e.colors.text.primary};
      }
      50% {
        color: ${e.colors.text.secondary};
      }
      100% {
        color: ${e.colors.text.disabled};
      }
    }
  `,active:A.css`
    font-weight: ${e.typography.fontWeightMedium};
    background-color: ${e.colors.primary.main};
    color: ${e.colors.primary.contrastText};
  `,matchHighLight:A.css`
    background: inherit;
    color: ${e.colors.primary.text};
    background-color: ${e.colors.primary.transparent};
  `,hidden:A.css`
    opacity: 0.6;
    cursor: default;
    border: 1px solid transparent;
  `,hover:A.css`
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `}),dh={SecretFormField:Pl,FormField:Ol,Select:dp.Ph,AsyncSelect:dp.qb,IndicatorsContainer:up.B,NoOptionsMessage:pp.P,Input:sc.I,Switch:Fl.r}},"./packages/grafana-ui/src/components/transitions/FadeTransition.tsx":(e,t,a)=>{"use strict";a.d(t,{n:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./.yarn/__virtual__/react-transition-group-virtual-8df824fae8/3/opt/drone/yarncache/react-transition-group-npm-4.4.2-5052c30656-b67bf5b3e8.zip/node_modules/react-transition-group/esm/CSSTransition.js"),r=a("./packages/grafana-ui/src/themes/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=(0,r.Bb)((e=>({enter:s.css`
      label: enter;
      opacity: 0;
    `,enterActive:s.css`
      label: enterActive;
      opacity: 1;
      transition: opacity ${e}ms ease-out;
    `,exit:s.css`
      label: exit;
      opacity: 1;
    `,exitActive:s.css`
      label: exitActive;
      opacity: 0;
      transition: opacity ${e}ms ease-out;
    `})));function l(e){const{visible:t,children:a,duration:s=250}=e,r=o(s);return(0,i.jsx)(n.Z,{in:t,mountOnEnter:!0,unmountOnExit:!0,timeout:s,classNames:r,children:a})}},"./packages/grafana-ui/src/components/transitions/SlideOutTransition.tsx":(e,t,a)=>{"use strict";a.d(t,{R:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./.yarn/__virtual__/react-transition-group-virtual-8df824fae8/3/opt/drone/yarncache/react-transition-group-npm-4.4.2-5052c30656-b67bf5b3e8.zip/node_modules/react-transition-group/esm/CSSTransition.js"),r=a("./packages/grafana-ui/src/themes/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=(0,r.Bb)(((e,t,a)=>({enter:s.css`
      label: enter;
      ${t}: 0;
      opacity: 0;
    `,enterActive:s.css`
      label: enterActive;
      ${t}: ${a}px;
      opacity: 1;
      transition: opacity ${e}ms ease-out, ${t} ${e}ms ease-out;
    `,exit:s.css`
      label: exit;
      ${t}: ${a}px;
      opacity: 1;
    `,exitActive:s.css`
      label: exitActive;
      opacity: 0;
      ${t}: 0;
      transition: opacity ${e}ms ease-out, ${t} ${e}ms ease-out;
    `})));function l(e){const{visible:t,children:a,duration:s=250,horizontal:r,size:l}=e,c=o(s,r?"width":"height",l);return(0,i.jsx)(n.Z,{in:t,mountOnEnter:!0,unmountOnExit:!0,timeout:s,classNames:c,children:a})}},"./packages/grafana-ui/src/components/uPlot/Plot.tsx":(e,t,a)=>{"use strict";a.d(t,{N:()=>l});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/uplot-npm-1.6.19-4a770d685e-181cb158e9.zip/node_modules/uplot/dist/uPlot.esm.js"),r=a("./packages/grafana-ui/src/components/uPlot/utils.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends s.Component{constructor(e){super(e),o(this,"plotContainer",(0,s.createRef)()),o(this,"plotCanvasBBox",(0,s.createRef)()),this.state={plot:null}}reinitPlot(){var e;let{width:t,height:a,plotRef:s}=this.props;if(null===(e=this.state.plot)||void 0===e||e.destroy(),0===t&&0===a)return;this.props.config.addHook("setSize",(e=>{e.over}));const i=Object.assign({},r.qt,{width:this.props.width,height:this.props.height,ms:1},this.props.config.getConfig());(0,r.Zp)("UPlot",!1,"Reinitializing plot",i);const o=new n.Z(i,this.props.data,this.plotContainer.current);s&&s(o),this.setState({plot:o})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){var e;null===(e=this.state.plot)||void 0===e||e.destroy()}componentDidUpdate(e){let{plot:t}=this.state;if(function(e,t){return t.width===e.width&&t.height===e.height}(e,this.props))if(function(e,t){return t.config===e.config}(e,this.props))if(function(e,t){return t.data===e.data}(e,this.props))(function(e,t){let a=e.timeRange,s=t.timeRange;return a===s||s.from.valueOf()===a.from.valueOf()&&s.to.valueOf()===a.to.valueOf()})(e,this.props)||null==t||t.setScale("x",{min:this.props.timeRange.from.valueOf(),max:this.props.timeRange.to.valueOf()});else{var a;null==t||t.setData(this.props.data),t&&"string"==typeof(null===(a=this.props.data[0])||void 0===a?void 0:a[0])&&(t.axes[0]._values=this.props.data[0])}else this.reinitPlot();else null==t||t.setSize({width:this.props.width,height:this.props.height})}render(){return(0,i.jsxs)("div",{style:{position:"relative"},children:[(0,i.jsx)("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children]})}}},"./packages/grafana-ui/src/components/uPlot/config/UPlotAxisBuilder.ts":(e,t,a)=>{"use strict";a.d(t,{gD:()=>l,ff:()=>c,mr:()=>m});var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-ui/src/components/uPlot/types.ts"),r=a("./packages/grafana-ui/src/utils/measureText.ts"),i=a("./packages/grafana-schema/src/index.ts"),o=a("./packages/grafana-ui/src/components/uPlot/config/UPlotScaleBuilder.ts");const l=12;class c extends n.L{merge(e){this.props.size=(0,o.V)("max",this.props.size,e.size),this.props.label||(this.props.label=e.label),this.props.placement===i.LB.Auto&&(this.props.placement=e.placement)}calculateSpace(e,t,a,s,n){const i=e.axes[t],o=e.scales[i.scale];if(2!==i.side||!o)return 30;if(o.time){const i=m(e,[a],t,40,(s-a)/(n/40));return(0,r.X1)(i[0],l).width+18}return 40}calculateAxisSize(e,t,a){const s=e.axes[a];let n=s.ticks.size;if(2===s.side)n+=s.gap+l;else if(null!=t&&t.length){let a=t.reduce(((e,t)=>Math.max(e,(0,r.X1)(t,l).width)),0);const i=Math.min(.4*e.width,a);n+=s.gap+s.labelGap+i}return Math.ceil(n)}getConfig(){let{scaleKey:e,label:t,show:a=!0,placement:n=i.LB.Auto,grid:r={show:!0},ticks:o,space:c,filter:d,gap:u=5,formatValue:p,splits:h,values:f,isTime:b,timeZone:v,theme:x,tickLabelRotation:y,size:w}=this.props;const j=`${l}px ${x.typography.fontFamily}`,C=x.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,s.isBooleanUnit)(e)&&(h=[0,1]);let k={scale:e,show:a,stroke:x.colors.text.primary,side:g(n),font:j,size:null!=w?w:(e,t,a)=>this.calculateAxisSize(e,t,a),rotate:y,gap:u,labelGap:0,grid:{show:r.show,stroke:C,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:C,width:1/devicePixelRatio,size:4},o),splits:h,values:f,space:null!=c?c:(e,t,a,s,n)=>this.calculateSpace(e,t,a,s,n),filter:d};return null!=t&&t.length>0&&(k.label=t,k.labelSize=l+8,k.labelFont=j,k.labelGap=8),f?k.values=f:b?k.values=m:p&&(k.values=(e,t)=>t.map(p)),k.timeZone=v,k}}const d=1e3,u=6e4,p=864e5,h=31536e6;function m(e,t,a,n,r){var i,o;const l=e.axes[a].timeZone,c=e.scales.x,m=(null!==(i=null==c?void 0:c.max)&&void 0!==i?i:0)-(null!==(o=null==c?void 0:c.min)&&void 0!==o?o:0),g=Math.round(h/p)*p,f=Math.round(r/p)*p;let b=s.systemDateFormats.interval.year;return r<d?b=s.systemDateFormats.interval.second.replace("ss","ss.SS"):r<=u?b=s.systemDateFormats.interval.second:m<=p?b=s.systemDateFormats.interval.minute:r<=p?b=s.systemDateFormats.interval.hour:m<h?b=s.systemDateFormats.interval.day:f===g?b=s.systemDateFormats.interval.year:r<=h&&(b=s.systemDateFormats.interval.month),t.map((e=>(0,s.dateTimeFormat)(e,{format:b,timeZone:l})))}function g(e){switch(e){case i.LB.Top:return 0;case i.LB.Right:return 1;case i.LB.Bottom:return 2;case i.LB.Left:}return 3}},"./packages/grafana-ui/src/components/uPlot/config/UPlotConfigBuilder.ts":(e,t,a)=>{"use strict";a.d(t,{U:()=>C});var s=a("../../opt/drone/yarncache/uplot-npm-1.6.19-4a770d685e-181cb158e9.zip/node_modules/uplot/dist/uPlot.esm.js"),n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("./packages/grafana-data/src/index.ts"),i=a("./packages/grafana-ui/src/components/uPlot/config/UPlotScaleBuilder.ts"),o=a("./packages/grafana-schema/src/index.ts"),l=a("./packages/grafana-ui/src/components/uPlot/types.ts"),c=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),d=a.n(c),u=a("./packages/grafana-ui/src/utils/measureText.ts");function p(e,t,a){let s=0,n=0,r=0,i=0;return e===h.Down?(n=t.top,i=t.top+t.height):e===h.Left?(s=t.left+t.width,r=t.left):e===h.Up?(n=t.top+t.height,i=t.top):e===h.Right&&(s=t.left,r=t.left+t.width),a.createLinearGradient(s,n,r,i)}let h,m;function g(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=e.scales[t],r=null,i=null;for(let e=0;e<a.length;e++){let t=a[e][0];if((t<=n.min||null==r)&&(r=e),i=e,t>=n.max)break}if(r===i)return a[r][1];let l=a[r][0],c=a[i][0];l===-1/0&&(l=n.min),c===1/0&&(c=n.max);let d,p,h,m,g=Math.round(e.valToPos(l,t,!0)),f=Math.round(e.valToPos(c,t,!0)),b=g-f;if(0===b)return a[i][1];e.scales.x.ori===o.wN.Horizontal?(d=h=0,p=g,m=f):(p=m=0,d=g,h=f);let v,x=(0,u.AE)(),y=x.createLinearGradient(d,p,h,m);for(let n=r;n<=i;n++){let o=a[n],l=(g-(n===r?g:n===i?f:Math.round(e.valToPos(o[0],t,!0))))/b;s&&n>r&&y.addColorStop(l,v),y.addColorStop(l,v=o[1])}return y}function f(e,t,a,s,n,r){var i,o;let l=null!==(i=null!=a?a:n)&&void 0!==i?i:null,c=null!==(o=null!=s?s:r)&&void 0!==o?o:null;if(null==l||null==c){var d,u,p,h;let[a,s]=function(e,t){let a=e.scales[t],s=1/0,n=-1/0;return e.series.forEach(((a,r)=>{if(a.show&&a.scale===t)if(null==a.min){let t=e.data[r];for(let e=0;e<t.length;e++)null!=t[e]&&(s=Math.min(s,t[e]),n=Math.max(n,t[e]))}else s=Math.min(s,a.min),n=Math.max(n,a.max)})),n===s&&(s=a.min,n=a.max),[s,n]}(e,t);l=null!==(d=null!==(u=l)&&void 0!==u?u:a)&&void 0!==d?d:0,c=null!==(p=null!==(h=c)&&void 0!==h?h:s)&&void 0!==p?p:100}return[l,c]}function b(e,t,a,s,n,i,o,l){if(!a)throw Error("Missing colorMode required for color scheme gradients");if(!s)throw Error("Missing thresholds required for color scheme gradients");return(c,d)=>{let u=c.series[d].scale,p="";if(a.id===r.FieldColorModeId.Thresholds)if(s.mode===r.ThresholdsMode.Absolute){p=g(c,u,s.steps.map((a=>[a.value,r.colorManipulator.alpha(t.visualization.getColorByName(a.color),e)])),!0)}else{const[a,d]=f(c,u,n,i,o,l),h=d-a;p=g(c,u,s.steps.map((s=>[a+h*(s.value/100),r.colorManipulator.alpha(t.visualization.getColorByName(s.color),e)])),!0)}else if(a.getColors){const s=a.getColors(t),[d,h]=f(c,u,n,i,o,l),m=h-d;p=g(c,u,s.map(((a,n)=>[d+m*(n/(s.length-1)),r.colorManipulator.alpha(t.visualization.getColorByName(a),e)])),!1)}return p}}!function(e){e[e.Right=0]="Right",e[e.Up=1]="Up",e[e.Left=2]="Left",e[e.Down=3]="Down"}(h||(h={}));class v extends l.L{getConfig(){const{facets:e,drawStyle:t,pathBuilder:a,pointsBuilder:n,pointsFilter:r,lineInterpolation:i,lineWidth:l,lineStyle:c,barAlignment:d,barWidthFactor:u,barMaxWidth:p,showPoints:h,pointSize:g,scaleKey:f,pxAlign:b,spanNulls:v,show:x=!0}=this.props;let y={},w=this.getLineColor();if(y.stroke=w,null!=a)y.paths=a,y.width=l;else if(t===o.l8.Points)y.paths=()=>null;else if(null!=t){var j;if(y.width=l,c&&"solid"!==c.fill)"dot"===c.fill&&(y.cap="round"),y.dash=null!==(j=c.dash)&&void 0!==j?j:[10,10];y.paths=(e,a,n,r)=>{let l=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.6,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const i=s.Z.paths;m||(m={linear:i.linear(),smooth:i.spline(),stepBefore:i.stepped({align:-1}),stepAfter:i.stepped({align:1})});if(e===o.l8.Bars){let e=`bars|${a}|${n}|${r}`;return m[e]||(m[e]=i.bars({size:[n,r],align:a})),m[e]}if(e===o.l8.Line){if(t===o.KC.StepBefore)return m.stepBefore;if(t===o.KC.StepAfter)return m.stepAfter;if(t===o.KC.Smooth)return m.smooth}return m.linear}(t,i,d,u,p);return l(e,a,n,r)}}const C="string"==typeof w?w:(e,t)=>e.series[t]._stroke,k={points:{stroke:C,fill:C,size:!g||g<l?void 0:g,filter:r}};return null!=n?k.points.show=n:t===o.l8.Points?k.points.show=!0:h===o.Jp.Auto?t===o.l8.Bars&&(k.points.show=!1):h===o.Jp.Never?k.points.show=!1:h===o.Jp.Always&&(k.points.show=!0),Object.assign({scale:f,facets:e,spanGaps:"number"!=typeof v&&v,value:()=>"",pxAlign:b,show:x,fill:this.getFill()},y,k)}getLineColor(){const{lineColor:e,gradientMode:t,colorMode:a,thresholds:s,theme:n,hardMin:i,hardMax:l,softMin:c,softMax:d}=this.props;return t===o.FI.Scheme&&(null==a?void 0:a.id)!==r.FieldColorModeId.Fixed?b(1,n,a,s,i,l,c,d):null!=e?e:r.FALLBACK_COLOR}getFill(){const{lineColor:e,fillColor:t,gradientMode:a,fillOpacity:s,colorMode:n,thresholds:i,theme:l,hardMin:c,hardMax:m,softMin:g,softMax:f}=this.props;if(t)return t;const v=(null!=s?s:0)/100;switch(null!=a?a:o.FI.None){case o.FI.Opacity:return x=null!=t?t:e,y=v,(e,t)=>{const a=(0,u.AE)(),s=p(e.scales.x.ori===o.wN.Horizontal?h.Down:h.Left,e.bbox,a);return s.addColorStop(0,r.colorManipulator.alpha(x,y)),s.addColorStop(1,r.colorManipulator.alpha(x,0)),s};case o.FI.Hue:return function(e,t,a){return(s,n)=>{const r=(0,u.AE)(),i=p(s.scales.x.ori===o.wN.Horizontal?h.Down:h.Left,s.bbox,r),l=d()(e).spin(-15),c=d()(e).spin(15);return a.isDark?(i.addColorStop(0,c.lighten(10).setAlpha(t).toString()),i.addColorStop(1,l.darken(10).setAlpha(t).toString())):(i.addColorStop(0,c.lighten(10).setAlpha(t).toString()),i.addColorStop(1,l.setAlpha(t).toString())),i}}(null!=t?t:e,v,l);case o.FI.Scheme:if((null==n?void 0:n.id)!==r.FieldColorModeId.Fixed)return b(v,l,n,i,c,m,g,f);default:if(v>0)return r.colorManipulator.alpha(null!=e?e:"",v)}var x,y}}var x=a("./packages/grafana-ui/src/components/uPlot/config/UPlotAxisBuilder.ts"),y=a("./packages/grafana-ui/src/components/uPlot/utils.ts");function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const j={drag:{setScale:!1},points:{size:(e,t)=>2*e.series[t].points.size,width:(e,t,a)=>a/4},focus:{prox:30}};class C{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.DefaultTimeZone;w(this,"series",[]),w(this,"axes",{}),w(this,"scales",[]),w(this,"bands",[]),w(this,"cursor",void 0),w(this,"select",void 0),w(this,"hasLeftAxis",!1),w(this,"hooks",{}),w(this,"tz",void 0),w(this,"sync",!1),w(this,"mode",1),w(this,"frames",void 0),w(this,"thresholds",{}),w(this,"tooltipInterpolator",void 0),w(this,"padding",void 0),w(this,"prepData",void 0),w(this,"scaleKeys",["",""]),w(this,"tzDate",(e=>{let t=new Date(e);return this.tz?s.Z.tzDate(t,this.tz):t})),this.tz=null===(e=(0,r.getTimeZoneInfo)(t,Date.now()))||void 0===e?void 0:e.ianaName}addHook(e,t){(0,y.Zp)("UPlotConfigBuilder",!1,"addHook",e),this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(t)}addThresholds(e){this.thresholds[e.scaleKey]||(this.thresholds[e.scaleKey]=e,this.addHook("drawClear",function(e){function t(e,t,a,s,n,r){let i=e.ctx,o=0;for(let e=0;e<t.length;e++)if("transparent"===t[e].color){o=e;break}i.lineWidth=2;for(let l=1;l<t.length;l++){const c=t[l];let u;u=o>=l&&l>0?d()(a.visualization.getColorByName(t[l-1].color)):d()(a.visualization.getColorByName(c.color)),1===u.getAlpha()&&u.setAlpha(.7);let p=Math.round(e.valToPos(s,"x",!0)),h=Math.round(e.valToPos(c.value,r,!0)),m=Math.round(e.valToPos(n,"x",!0)),g=Math.round(e.valToPos(c.value,r,!0));i.beginPath(),i.moveTo(p,h),i.lineTo(m,g),i.strokeStyle=u.toString(),i.stroke()}}function a(e,t,a){let s=e.ctx,n=g(e,e.series[1].scale,t.map((e=>{let t=d()(a.visualization.getColorByName(e.color));return 1===t.getAlpha()&&t.setAlpha(.15),[e.value,t.toString()]})),!0);s.fillStyle=n,s.fillRect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height)}const{scaleKey:s,thresholds:n,theme:i,config:l,hardMin:c,hardMax:u,softMin:p,softMax:h}=e;return e=>{const d=e.ctx,{min:m,max:g}=e.scales.x,{min:b,max:v}=e.scales[s];if(null==m||null==g||null==b||null==v)return;let{steps:x,mode:y}=n;if(y===r.ThresholdsMode.Percentage){let[t,a]=f(e,s,c,u,p,h),n=a-t;x=x.map((e=>Object.assign({},e,{value:t+n*(e.value/100)})))}switch(d.save(),l.mode){case o.i3.Line:t(e,x,i,m,g,s);break;case o.i3.Area:a(e,x,i);break;case o.i3.LineAndArea:a(e,x,i),t(e,x,i,m,g,s)}d.restore()}}(e)))}addAxis(e){var t,a;e.placement=null!==(t=e.placement)&&void 0!==t?t:o.LB.Auto,e.grid=null!==(a=e.grid)&&void 0!==a?a:{},this.axes[e.scaleKey]?this.axes[e.scaleKey].merge(e):(e.placement===o.LB.Auto&&(e.placement=this.hasLeftAxis?o.LB.Right:o.LB.Left),e.placement===o.LB.Left&&(this.hasLeftAxis=!0),e.placement===o.LB.Hidden&&(e.grid.show=!1,e.size=0),this.axes[e.scaleKey]=new x.ff(e))}getAxisPlacement(e){var t;const a=this.axes[e];return null!==(t=null==a?void 0:a.props.placement)&&void 0!==t?t:o.LB.Left}setCursor(e){this.cursor=(0,n.merge)({},this.cursor,e)}setMode(e){this.mode=e}setSelect(e){this.select=e}addSeries(e){this.series.push(new v(e))}getSeries(){return this.series}addScale(e){const t=this.scales.find((t=>t.props.scaleKey===e.scaleKey));t?t.merge(e):this.scales.push(new i.I(e))}addBand(e){this.bands.push(e)}setTooltipInterpolator(e){this.tooltipInterpolator=e}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(e){this.prepData=t=>(this.frames=t,e(t))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(e){this.padding=e}getConfig(){var e=this;const t={mode:this.mode,series:[2===this.mode?null:{value:()=>""}]};t.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map((e=>e.getConfig())),t.series=[...t.series,...this.series.map((e=>e.getConfig()))],t.scales=this.scales.reduce(((e,t)=>Object.assign({},e,t.getConfig())),{}),t.hooks=this.hooks,t.select=this.select;const a=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(a,s)=>{let n=a.series[s].points._stroke;if("string"!=typeof n){let t=e.frames[0].fields[s];n=t.display(t.values.get(a.cursor.idxs[s])).color}return n+t}};return t.cursor=(0,n.merge)({},j,{points:{stroke:a("80"),fill:a()}},this.cursor),t.tzDate=this.tzDate,t.padding=this.padding,this.bands.length&&(t.bands=this.bands),t}ensureNonOverlappingAxes(e){const t=e.find((e=>"x"===e.props.scaleKey)),a=e.filter((e=>{var t;return void 0===(null===(t=e.props.grid)||void 0===t?void 0:t.show)})),s=a.findIndex((e=>e.props.placement===o.LB.Left||e.props.placement===o.LB.Bottom&&e!==t));for(let e=0;e<a.length;e++)a[e]===t||e===s?a[e].props.grid.show=!0:a[e].props.grid.show=!1;return e}}},"./packages/grafana-ui/src/components/uPlot/config/UPlotScaleBuilder.ts":(e,t,a)=>{"use strict";a.d(t,{I:()=>o,V:()=>l});var s=a("../../opt/drone/yarncache/uplot-npm-1.6.19-4a770d685e-181cb158e9.zip/node_modules/uplot/dist/uPlot.esm.js"),n=a("./packages/grafana-ui/src/components/uPlot/types.ts"),r=a("./packages/grafana-schema/src/index.ts"),i=a("./packages/grafana-data/src/index.ts");class o extends n.L{merge(e){this.props.min=l("min",this.props.min,e.min),this.props.max=l("max",this.props.max,e.max)}getConfig(){var e;let{isTime:t,scaleKey:a,min:n,max:o,softMin:l,softMax:c,range:d,direction:u,orientation:p}=this.props;const h=t?{}:{distr:this.props.distribution===r.wf.Log?3:this.props.distribution===r.wf.Ordinal?2:1,log:this.props.distribution===r.wf.Log?this.props.log||2:void 0};const m={min:{pad:.1,hard:null!=n?n:-1/0,soft:l||0,mode:null==l?3:1},max:{pad:.1,hard:null!=o?o:1/0,soft:c||0,mode:null==c?3:1}};let g=null==l&&null!=n,f=null==c&&null!=o;let b=!(t||g&&f);return(0,i.isBooleanUnit)(a)&&(b=!1,d=[0,1]),{[a]:Object.assign({time:t,auto:b,range:null!==(e=d)&&void 0!==e?e:(e,t,a,r)=>{const i=e.scales[r];let l=[t,a];if(1===i.distr||2===i.distr)l=s.Z.rangeNum(g?n:t,f?o:a,m);else if(3===i.distr){var c;l=s.Z.rangeLog(t,a,null!==(c=i.log)&&void 0!==c?c:10,!0)}return g&&(l[0]=n),f&&(l[1]=o),l},dir:u,ori:p},h)}}}function l(e,t,a){return!(null==t)?!(null==a)?"min"===e?t<a?t:a:t>a?t:a:t:a}},"./packages/grafana-ui/src/components/uPlot/plugins/TooltipPlugin.tsx":(e,t,a)=>{"use strict";a.d(t,{i:()=>h,_:()=>m});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useMountedState.js"),r=a("./packages/grafana-data/src/index.ts"),i=a("./packages/grafana-schema/src/index.ts"),o=a("./packages/grafana-ui/src/themes/ThemeContext.tsx"),l=a("./packages/grafana-ui/src/components/Portal/Portal.tsx"),c=a("./packages/grafana-ui/src/components/VizTooltip/index.tsx"),d=a("./packages/grafana-ui/src/components/uPlot/utils.ts"),u=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const p=["mode","sortOrder","sync","timeZone","config","renderTooltip"];const h=e=>{let{mode:t=i.f3.Single,sortOrder:a=i.As.None,sync:h,timeZone:g,config:f,renderTooltip:b}=e,v=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,p);const x=(0,s.useRef)(),y=(0,o.l4)(),[w,j]=(0,s.useState)(null),[C,k]=(0,s.useState)(null),[S,T]=(0,s.useState)([]),[O,_]=(0,s.useState)(null),[N,I]=(0,s.useState)(!1),P=(0,n.Z)();if((0,s.useEffect)((()=>{(0,d.Zp)("TooltipPlugin",!0,`Focused series: ${w}, focused point: ${C}`)}),[C,w]),(0,s.useLayoutEffect)((()=>{let e;const t=()=>{var e;P()&&(I(!0),null===(e=x.current)||void 0===e||e.root.classList.add("plot-active"))},a=()=>{var e;P()&&(_(null),I(!1),null===(e=x.current)||void 0===e||e.root.classList.remove("plot-active"))};f.addHook("syncRect",((t,a)=>e=a)),f.addHook("init",(e=>{var s,n;x.current=e,null===(s=e.root.parentElement)||void 0===s||s.addEventListener("focus",t),e.over.addEventListener("mouseenter",t),null===(n=e.root.parentElement)||void 0===n||n.addEventListener("blur",a),e.over.addEventListener("mouseleave",a),h&&h()===r.DashboardCursorSync.Crosshair&&e.root.classList.add("shared-crosshair")}));const s=f.getTooltipInterpolator();return s?f.addHook("setCursor",(t=>{s(j,k,(a=>{if(a)return void _(null);if(!e)return;const{x:s,y:n}=m(t,e);void 0!==s&&void 0!==n&&_({x:s,y:n})}),t)})):(f.addHook("setLegend",(e=>{P()&&(k(e.legend.idx),T(e.legend.idxs.slice()))})),f.addHook("setCursor",(t=>{if(!e||!P())return;const{x:a,y:s}=m(t,e);_(void 0!==a&&void 0!==s?{x:a,y:s}:null)})),f.addHook("setSeries",((e,t)=>{P()&&j(t)}))),()=>{var e,s;(_(null),x.current)&&(x.current.over.removeEventListener("mouseleave",a),x.current.over.removeEventListener("mouseenter",t),null===(e=x.current.root.parentElement)||void 0===e||e.removeEventListener("focus",t),null===(s=x.current.root.parentElement)||void 0===s||s.removeEventListener("blur",a))}}),[f,_,I,k,T]),null===C||!N&&h&&h()===r.DashboardCursorSync.Crosshair)return null;let M=v.data.fields[0];if(!M)return null;const F=M.display||(0,r.getDisplayProcessor)({field:M,timeZone:g,theme:y});let A=null,D=F(M.values.get(C)).text;if(b)A=b(v.data,w,C);else{if(t===i.f3.Single&&null!==w){var $;const e=v.data.fields[w];if(!e)return null;const t=null!==($=null==S?void 0:S[w])&&void 0!==$?$:C;D=F(M.values.get(t)).text;const a=(e.display||(0,r.getDisplayProcessor)({field:e,timeZone:g,theme:y}))(e.values.get(t));A=(0,u.jsx)(c.cS,{series:[{color:a.color||r.FALLBACK_COLOR,label:(0,r.getFieldDisplayName)(e,v.data),value:a?(0,r.formattedValueToString)(a):null}],timestamp:D})}if(t===i.f3.Multi){let e=[];const t=v.data,s=t.fields,n=[];for(let a=0;a<s.length;a++){var L,R,E,z;const s=t.fields[a];if(!s||s===M||s.type===r.FieldType.time||s.type!==r.FieldType.number||null!==(L=s.config.custom)&&void 0!==L&&null!==(R=L.hideFrom)&&void 0!==R&&R.tooltip||null!==(E=s.config.custom)&&void 0!==E&&null!==(z=E.hideFrom)&&void 0!==z&&z.viz)continue;const i=v.data.fields[a].values.get(S[a]),o=s.display(i);n.push(i),e.push({color:o.color||r.FALLBACK_COLOR,label:(0,r.getFieldDisplayName)(s,t),value:o?(0,r.formattedValueToString)(o):null,isActive:w===a})}if(a!==i.As.None){const t=[...e],s=r.arrayUtils.sortValues(a);e.sort(((e,a)=>{const r=t.indexOf(e),i=t.indexOf(a);return s(n[r],n[i])}))}A=(0,u.jsx)(c.cS,{series:e,timestamp:D})}}return(0,u.jsx)(l.h,{children:A&&O&&(0,u.jsx)(c.S$,{position:{x:O.x,y:O.y},offset:{x:10,y:10},children:A})})};function m(e,t){let a,s;const n=e.cursor.left||0,r=e.cursor.top||0;if(function(e,t){let{left:a,top:s}=e;return void 0!==a&&void 0!==s&&(a<0||a>t.width||s<0||s>t.height)}(e.cursor,t)){const i=e.posToIdx(n);if(r<0||r>t.height){let r=(0,d.ah)(e,i);r&&(s=t.top+r,n>=0&&n<=t.width&&(a=t.left+e.valToPos(e.data[0][e.posToIdx(n)],e.series[0].scale)))}}else a=t.left+n,s=t.top+r;return{x:a,y:s}}},"./packages/grafana-ui/src/components/uPlot/types.ts":(e,t,a)=>{"use strict";a.d(t,{L:()=>s});class s{constructor(e){this.props=e}}},"./packages/grafana-ui/src/components/uPlot/utils.ts":(e,t,a)=>{"use strict";a.d(t,{lI:()=>l,qt:()=>d,k6:()=>u,oP:()=>p,ah:()=>h,Zp:()=>g,J4:()=>f});var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-schema/src/index.ts"),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),i=a("./packages/grafana-ui/src/utils/index.ts"),o=a("./packages/grafana-ui/src/utils/logger.ts");const l="__internalNegY";const c=(e,t,a)=>{let s=t%2?a[0]||a[2]:a[1]||a[3];return a[t]||!s?0:8},d={focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[c,c,c,c],series:[],hooks:{}};function u(e,t,a){const r=e[0],i=[],o=new Map;let l=0;for(let e=0;e<r.fields.length;e++){const t=r.fields[e];if(t.type===s.FieldType.time){i.push((0,s.ensureTimeField)(t).values.toArray()),l++;continue}p(t,o,l);const a=t.config.custom||{},c=t.values.toArray();a.transform===n.pR.NegativeY?i.push(c.map((e=>null==e?e:-1*e))):a.transform===n.pR.Constant?i.push(new Array(c.length).fill(c[0])):i.push(c),l++}if(0!==o.size){var c,d;const e=(null===(c=r.fields[1].config.custom)||void 0===c||null===(d=c.stacking)||void 0===d?void 0:d.mode)===n.o0.Percent,s=i[0].length,l=Array(o.size);l[0]=null;for(const[t,n]of o.entries()){const t=f({ids:n,legend:a,frame:r}),o=Array(s).fill(!0),c=e?Array(s).fill(0):null;if(e)for(let e=0;e<t.length;e++){const a=i[t[e]];for(let e=0;e<s;e++){const t=a[e];c[e]+=null==t?0:+t}}const d=Array(s).fill(0);for(let a=0;a<t.length;a++){let n=t[a];l[n]=c;const r=i[n];for(let t=0;t<s;t++){const a=r[t];null!=a&&o[t]&&(o[t]=!1),d[t]+=null==a?0:a/(e?c[t]:1)}i[n]=d.slice().map(((e,t)=>o[t]?null:e))}}t&&t({totals:l})}return i}function p(e,t,a){var s,r,i;const o=e.config.custom;if(o&&(null===(s=o.stacking)||void 0===s?void 0:s.mode)!==n.o0.None&&null!==(r=o.stacking)&&void 0!==r&&r.group&&(null===(i=o.hideFrom)||void 0===i||!i.viz)){const e=o.transform===n.pR.NegativeY?`${l}-${o.stacking.group}`:o.stacking.group;t.has(e)?t.set(e,t.get(e).concat(a)):t.set(e,[a])}}function h(e,t){let a,s=1,n=1,r=e.data[1][t],i=e.data[1][t];for(let a=1;a<e.data.length;a++){const o=e.data[a][t];null!=o&&(null==r?r=o:o>r&&(r=e.data[a][t],s=a),null==i?i=o:o<i&&(i=e.data[a][t],n=a))}return a=null==i&&null==r?void 0:null!=i&&null!=r?(e.valToPos(i,e.series[n].scale)+e.valToPos(r,e.series[s].scale))/2:e.valToPos(i||r,e.series[s||n].scale),void 0!==a&&a<0&&(a=e.bbox.height/devicePixelRatio),a}const m=(0,o.h)("uPlot"),g=m.logger;function f(e){let{legend:t,ids:a,frame:s}=e;if(null==t||!t.sortBy||null==t.sortDesc)return a;return(0,r.orderBy)(a,(e=>{var a,n;return null===(a=s.fields[e].state)||void 0===a||null===(n=a.calcs)||void 0===n?void 0:n[t.sortBy.toLowerCase()]}),t.sortDesc?"desc":"asc")}(0,i.xq)("graphng",void 0,m)},"./packages/grafana-ui/src/index.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{ALERTING_COLOR:()=>i.ns,ActionMeta:()=>r.fm,Alert:()=>n.bZj,AlertVariant:()=>n.Uxq,AlertingSettings:()=>n.O5T,AsyncMultiSelect:()=>n.M8I,AsyncSelect:()=>n.qbS,AxisConfig:()=>d.AxisConfig,AxisPlacement:()=>d.LB,Badge:()=>n.Cts,BadgeColor:()=>n.JVe,BadgeProps:()=>n.u8S,BarAlignment:()=>d.pu,BarConfig:()=>d.BarConfig,BarGauge:()=>n.xfx,BarGaugeDisplayMode:()=>n.QHm,BarValueVisibility:()=>d.Jp,BigValue:()=>n.w6I,BigValueColorMode:()=>n.pcF,BigValueGraphMode:()=>n.IGx,BigValueJustifyMode:()=>n.apN,BigValueTextMode:()=>n.jGm,BracesPlugin:()=>S.hP,BrowserLabel:()=>n.dI4,Button:()=>n.zxk,ButtonCascader:()=>n.OSz,ButtonGroup:()=>n.hE2,ButtonProps:()=>n.sBP,ButtonSelect:()=>n.doH,ButtonVariant:()=>n.Wu3,CallToActionCard:()=>n._d,Card:()=>n.Zbd,CardContainer:()=>n._L7,CardContainerProps:()=>n.jUt,CardProps:()=>n.dwY,Cascader:()=>n.vTp,CascaderOption:()=>n.iNw,CertificationKey:()=>n.WTJ,Checkbox:()=>n.XZJ,ClearPlugin:()=>S.Gp,ClickOutsideWrapper:()=>n.LVf,ClipboardButton:()=>n.mUV,ClipboardPlugin:()=>S.wl,CodeEditor:()=>n.pq4,CodeEditorMonacoOptions:()=>n.EGH,CodeEditorSuggestionItem:()=>n.L0D,CodeEditorSuggestionItemKind:()=>n.kwZ,CollapsableSection:()=>n.s2J,Collapse:()=>n.UO1,ColorPicker:()=>n.zH8,ColorValueEditor:()=>n.Bw9,ColorValueEditorProps:()=>n.kp4,CompletionItemKind:()=>r.cm,ConfirmButton:()=>n.puI,ConfirmModal:()=>n.sm4,ConfirmModalProps:()=>n.feC,Container:()=>n.W20,ContextMenu:()=>n.xVl,ContextMenuProps:()=>n.CMg,ControlledCollapse:()=>n.ybu,Counter:()=>n.ATJ,CustomScrollbar:()=>n.$TT,DEFAULT_ANNOTATION_COLOR:()=>i.Jx,DOMUtil:()=>i.Qi,DataLinkButton:()=>n.kuP,DataLinkInput:()=>n.vmb,DataLinksContextMenu:()=>n.V5N,DataLinksInlineEditor:()=>n.dIl,DataSourceHttpSettings:()=>n.E1E,DatePicker:()=>n.Mtg,DatePickerProps:()=>n.kse,DatePickerWithInput:()=>n.d2U,DatePickerWithInputProps:()=>n.Qiu,DateTimePicker:()=>n.xZq,DeleteButton:()=>n.m1X,DrawStyle:()=>d.l8,Drawer:()=>n.dys,DropdownIndicator:()=>n.msj,DropzoneFile:()=>n.isR,EmotionPerfTest:()=>n.jye,EmptySearchResult:()=>n.KBh,ErrorBoundary:()=>n.SVk,ErrorBoundaryAlert:()=>n.z4Q,ErrorBoundaryAlertProps:()=>n.M_3,ErrorWithStack:()=>n.X2N,EventsCanvas:()=>n.TZ,EventsWithValidation:()=>i.JU,FIXED_UNIT:()=>n.jKV,FadeTransition:()=>n.nTT,FeatureBadge:()=>n.aXU,FeatureInfoBox:()=>n.ZjK,Field:()=>n.gNt,FieldArray:()=>n.F26,FieldLinkList:()=>n.Zjt,FieldSet:()=>n.C3N,FieldTextAlignment:()=>d.FieldTextAlignment,FieldValidationMessage:()=>n.S0X,FileDropzone:()=>n.YoT,FileDropzoneDefaultChildren:()=>n.A_i,FileDropzoneProps:()=>n.G1O,FileListItem:()=>n.K$w,FileListItemProps:()=>n.wEv,FileUpload:()=>n.p0f,FillConfig:()=>d.FillConfig,FilterInput:()=>n.HSx,FilterPill:()=>n.BmQ,Form:()=>n.l09,FormFieldErrors:()=>r.nj,FormInputSize:()=>n.YE$,FormattedValueDisplay:()=>n.WRj,FormsOnSubmit:()=>r.lD,FullWidthButtonContainer:()=>n.fiX,Gauge:()=>n.aCY,GlobalStyles:()=>o.nz,Graph:()=>n.kJb,GraphContextMenu:()=>n.wvn,GraphContextMenuHeader:()=>n.bpR,GraphFieldConfig:()=>d.GraphFieldConfig,GraphGradientMode:()=>d.FI,GraphNG:()=>n.drZ,GraphNGLegendEvent:()=>n.aSI,GraphNGProps:()=>n.E2j,GraphSeriesToggler:()=>n.UNL,GraphSeriesTogglerAPI:()=>n.pK4,GraphThresholdsStyleConfig:()=>d.GraphThresholdsStyleConfig,GraphTresholdsStyleMode:()=>d.i3,GraphWithLegend:()=>n.UAG,HideSeriesConfig:()=>d.HideSeriesConfig,HideableFieldConfig:()=>d.HideableFieldConfig,HorizontalGroup:()=>n.LhK,Icon:()=>n.JO$,IconButton:()=>n.hU,IconButtonVariant:()=>n.gZk,IndentationPlugin:()=>S.Rc,InfoBox:()=>n.vDh,InlineField:()=>n._9$,InlineFieldRow:()=>n.Z6t,InlineFormLabel:()=>n.cJ0,InlineLabel:()=>n.W4p,InlineSegmentGroup:()=>n.mOU,InlineSwitch:()=>n.x$6,Input:()=>n.IIB,InputControl:()=>n.gs_,JSONFormatter:()=>n.gwK,JsonExplorer:()=>n.uC,KeyboardPlugin:()=>n.Cmj,Label:()=>n.__J,LegacyForms:()=>n.vw6,LegacyInputStatus:()=>n.Gdq,Legend:()=>n.DeQ,LegendDisplayMode:()=>d.jK,LegendPlacement:()=>d.LegendPlacement,LineConfig:()=>d.LineConfig,LineInterpolation:()=>d.KC,LineStyle:()=>d.LineStyle,Link:()=>n.rUS,LinkButton:()=>n.Qjf,List:()=>n.aVo,LoadingPlaceholder:()=>n.u3Z,LoadingPlaceholderProps:()=>n.c02,LogLabels:()=>n.jwW,LogMessageAnsi:()=>n.QNy,LogRows:()=>n.w3v,Marker:()=>n.JxD,Menu:()=>n.v2r,MenuGroup:()=>n.kSQ,MenuGroupProps:()=>n.VO7,MenuItem:()=>n.sNh,MenuItemProps:()=>n.T4d,MenuItemsGroup:()=>n.oOs,MenuProps:()=>n.ZyH,Modal:()=>n.u_l,ModalHeader:()=>n.xBx,ModalRoot:()=>n.Y0X,ModalTabContent:()=>n.QEF,ModalTabsHeader:()=>n.Han,ModalsController:()=>n.JYt,ModalsProvider:()=>n.$iA,Monaco:()=>n.d$d,MonacoEditor:()=>n.rEm,MultiSelect:()=>n.NUq,MultiSelectValueEditor:()=>n.Ytm,NO_DATA_COLOR:()=>i._V,NewlinePlugin:()=>S.z2,NodeGraphDataFrameFieldNames:()=>i.zG,NumberValueEditor:()=>n.wYs,OK_COLOR:()=>i.te,OnTagClick:()=>n.k8K,OptionsWithLegend:()=>d.OptionsWithLegend,OptionsWithTextFormatting:()=>d.OptionsWithTextFormatting,OptionsWithTooltip:()=>d.OptionsWithTooltip,PENDING_COLOR:()=>i.f7,PageToolbar:()=>n.XDu,Pagination:()=>n.tlE,PanelChrome:()=>n.fmR,PanelChromeErrorIndicator:()=>n.qbG,PanelChromeErrorIndicatorProps:()=>n.QEv,PanelChromeLoadingIndicator:()=>n.E3Q,PanelChromeLoadingIndicatorProps:()=>n.oP_,PanelChromeProps:()=>n.vIs,PanelChromeType:()=>n.swS,PanelContext:()=>n.QPw,PanelContextProvider:()=>n._wC,PanelContextRoot:()=>n.bbH,PanelPadding:()=>n.jX4,PlotLegend:()=>n.lNn,PlotSelection:()=>n.isz,PlotTooltipInterpolator:()=>n.xyZ,PluginSignatureBadge:()=>n.oDb,PluginSignatureBadgeProps:()=>n.bvM,PointVisibility:()=>d.Jp,PointsConfig:()=>d.PointsConfig,Popover:()=>n.J2e,PopoverContent:()=>n.yky,PopoverController:()=>n.Dh5,Portal:()=>n.h_i,QueryField:()=>n.qjJ,REGION_FILL_ALPHA:()=>i.iV,RadioButtonGroup:()=>n.SYO,RangeSlider:()=>n.U2U,ReactMonacoEditor:()=>n.VR_,ReactUtils:()=>i.Ot,RefreshPicker:()=>n.dPd,RelativeTimeRangePicker:()=>n.xpf,RunnerPlugin:()=>S.dv,SCHEMA:()=>i.Yi,ScaleDirection:()=>d.bQ,ScaleDistribution:()=>n.wf3,ScaleDistributionConfig:()=>d.ScaleDistributionConfig,ScaleOrientation:()=>d.wN,ScrollbarPosition:()=>n.fqL,SearchFunctionType:()=>i.nu,Segment:()=>n.XX7,SegmentAsync:()=>n.VXm,SegmentInput:()=>n.Xrl,SegmentSection:()=>n.fT$,SegmentSelect:()=>n.VBk,Select:()=>n.PhF,SelectContainer:()=>n.eI2,SelectContainerProps:()=>n.E0,SelectValueEditor:()=>n.Y3l,SelectionShortcutsPlugin:()=>S.$L,SeriesColorPicker:()=>n.spA,SeriesColorPickerPopover:()=>n.jx7,SeriesColorPickerPopoverWithTheme:()=>n.qRd,SeriesIcon:()=>n.FiV,SeriesTable:()=>n.cS8,SeriesTableProps:()=>n.VbF,SeriesTableRow:()=>n.VtB,SeriesTableRowProps:()=>n.ha2,SeriesVisibilityChangeBehavior:()=>n.YvT,SeriesVisibilityChangeMode:()=>n.R8q,SetInterval:()=>n.FOj,SingleStatBaseOptions:()=>n.U_X,SlatePrism:()=>S.Ze,SlideOutTransition:()=>n.R9v,Slider:()=>n.iRW,SliderValueEditor:()=>n.pn$,Spinner:()=>n.$jN,StackableFieldConfig:()=>d.StackableFieldConfig,StackingConfig:()=>d.StackingConfig,StackingMode:()=>d.o0,StatsPicker:()=>n.mMX,StringArrayEditor:()=>n.gQx,StringValueEditor:()=>n.Ai9,SuggestionsPlugin:()=>S.bm,Switch:()=>n.rsf,TLSAuthSettings:()=>n.sHf,Tab:()=>n.OK9,TabConfig:()=>n.DJl,TabContent:()=>n.I5H,TabbedContainer:()=>n.WLI,Table:()=>n.iA_,TableCellDisplayMode:()=>n.h2q,TableFieldOptions:()=>d.TableFieldOptions,TableInputCSV:()=>n.wtM,TableSortByFieldState:()=>n.JAu,TabsBar:()=>n.J_V,Tag:()=>n.Vp9,TagList:()=>n.PST,TagsInput:()=>n.B7H,TextArea:()=>n.Kx8,ThemeContext:()=>o.Ni,TimeOfDayPicker:()=>n.yAm,TimeRangeInput:()=>n.K4x,TimeRangePicker:()=>n.XcI,TimeRangePickerProps:()=>n.WKf,TimeSeries:()=>n.pfI,TimeZonePicker:()=>n.OkK,Token:()=>S.WU,ToolbarButton:()=>n.hAV,ToolbarButtonRow:()=>n.RNy,Tooltip:()=>n.ua7,TooltipDisplayMode:()=>d.f3,TooltipPlugin:()=>n.iiT,UPLOT_AXIS_FONT_SIZE:()=>n.gDA,UPlotChart:()=>n.N$r,UPlotConfigBuilder:()=>n.UBi,UPlotConfigPrepFn:()=>n.ffP,UnitPicker:()=>n.nAu,ValuePicker:()=>n.b59,VerticalGroup:()=>n.wcK,VizLayout:()=>n.AYi,VizLayoutComponentType:()=>n.C9i,VizLayoutLegendProps:()=>n.Lxb,VizLayoutProps:()=>n.wIc,VizLegend:()=>n.ltB,VizLegendItem:()=>n.Jn8,VizLegendListItem:()=>n.eMh,VizLegendOptions:()=>d.VizLegendOptions,VizRepeater:()=>n.QBm,VizRepeaterRenderValueProps:()=>n.M9j,VizTextDisplayOptions:()=>d.VizTextDisplayOptions,VizTooltip:()=>n.I5C,VizTooltipContainer:()=>n.S$u,VizTooltipOptions:()=>d.VizTooltipOptions,WeekStartPicker:()=>n.zDr,WithContextMenu:()=>n.zH1,XYCanvas:()=>n.K2,ZoomPlugin:()=>n.Rbc,ansicolor:()=>i._J,attachDebugger:()=>i.xq,buildScaleKey:()=>n.z12,calculateFontSize:()=>i.MX,colors:()=>i.O9,commonOptionsBuilder:()=>s,convertOldAngularValueMapping:()=>n.PRL,createLogger:()=>i.hu,defaultIntervals:()=>n.o5O,fieldMatchersUI:()=>n.ivH,fuzzyMatch:()=>i.C6,getAvailableIcons:()=>r.BI,getCanvasContext:()=>i.AE,getCardStyles:()=>n.LyM,getCellLinks:()=>i.iu,getFieldTypeIcon:()=>r.e7,getFormStyles:()=>n.SYZ,getInputStyles:()=>n.HxM,getLogRowStyles:()=>n.hIY,getScrollbarWidth:()=>i.np,getSelectStyles:()=>n.D1k,getStandardFieldConfigs:()=>U,getStandardOptionEditors:()=>H,getTagColor:()=>i.vm,getTagColorsFromName:()=>i.Bx,getTextColorForBackground:()=>i.Gc,getTheme:()=>o.gh,graphFieldOptions:()=>n.qVi,graphTickFormatter:()=>n.sVu,graphTimeFormat:()=>n.mcr,hasValidationEvent:()=>i.z3,linkModelToContextMenuItems:()=>i.Rc,makeFragment:()=>i.xl,makeValue:()=>i.l1,measureText:()=>i.X1,mockTheme:()=>o.Zu,mockThemeContext:()=>o.sJ,monacoTypes:()=>n.NFT,preparePlotFrame:()=>n.RnT,regexValidation:()=>i.FE,resetSelectStyles:()=>n.JpF,selectOptionInTest:()=>n.FMl,sharedInputStyle:()=>n.RKV,sharedSingleStatMigrationHandler:()=>n.rDf,sharedSingleStatPanelChangedHandler:()=>n.ZHc,sortedColors:()=>i.Wm,styleMixins:()=>o.GU,stylesFactory:()=>o.Bb,useForceUpdate:()=>i.NW,useGraphNGContext:()=>n.zrC,usePanelContext:()=>n.R9P,useStyles:()=>o.yK,useStyles2:()=>o.wW,useTheme:()=>o.Fg,useTheme2:()=>o.l4,validate:()=>i.Gu,variableSuggestionToCodeEditorSuggestion:()=>n.ThK,withErrorBoundary:()=>n.PfY,withTheme:()=>o.Zz,withTheme2:()=>o.HE});var s={};a.r(s),a.d(s,{StackingEditor:()=>C,addAxisConfig:()=>p,addHideFrom:()=>v,addLegendOptions:()=>x,addStackingConfig:()=>k,addTextSizeOptions:()=>w,addTooltipOptions:()=>y});var n=a("./packages/grafana-ui/src/components/index.ts"),r=a("./packages/grafana-ui/src/types/index.ts"),i=a("./packages/grafana-ui/src/utils/index.ts"),o=a("./packages/grafana-ui/src/themes/index.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),c=a("./packages/grafana-data/src/index.ts"),d=a("./packages/grafana-schema/src/index.ts"),u=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function p(e,t,a){const s=["Axis"];e.addRadio({path:"axisPlacement",name:"Placement",category:s,defaultValue:n.qVi.axisPlacement[0].value,settings:{options:n.qVi.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:s,defaultValue:"",settings:{placeholder:"Optional text"},showIf:e=>e.axisPlacement!==d.LB.Hidden,shouldApply:e=>e.type!==c.FieldType.time&&e.type!==c.FieldType.string}).addNumberInput({path:"axisWidth",name:"Width",category:s,settings:{placeholder:"Auto"},showIf:e=>e.axisPlacement!==d.LB.Hidden}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:t.axisSoftMin,category:s,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:t.axisSoftMax,category:s,settings:{placeholder:"See: Standard options > Max"}}).addRadio({path:"axisGridShow",name:"Show grid lines",category:s,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}),a||e.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:s,editor:g,override:g,defaultValue:{type:d.wf.Linear},shouldApply:e=>e.type===c.FieldType.number,process:c.identityOverrideProcessor})}const h=[{label:"Linear",value:d.wf.Linear},{label:"Logarithmic",value:d.wf.Log}],m=[{label:"2",value:2},{label:"10",value:10}],g=e=>{let{value:t,onChange:a}=e;return(0,u.jsxs)(n.LhK,{children:[(0,u.jsx)(n.SYO,{value:t.type||d.wf.Linear,options:h,onChange:e=>{console.log(e,t),a(Object.assign({},t,{type:e,log:e===d.wf.Linear?void 0:2}))}}),t.type===d.wf.Log&&(0,u.jsx)(n.PhF,{menuShouldPortal:!0,allowCustomValue:!1,autoFocus:!0,options:m,value:t.log||2,prefix:"base",width:12,onChange:e=>{a(Object.assign({},t,{log:e.value}))}})]})};var f=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");const b=e=>{const{value:t,onChange:a}=e,s=(0,l.useCallback)((e=>{a(Object.assign({},t,{[e]:!t[e]}))}),[t,a]);return(0,u.jsx)(n.LhK,{spacing:"xs",children:Object.keys(t).map((e=>{const a=e;return(0,u.jsx)(n.BmQ,{icon:t[a]?"eye-slash":"eye",onClick:()=>s(a),label:(0,f.startCase)(a),selected:t[a]},a)}))})};function v(e){e.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:b,override:b,shouldApply:()=>!0,hideFromDefaults:!0,process:e=>e})}function x(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.addRadio({path:"legend.displayMode",name:"Legend mode",category:["Legend"],description:"",defaultValue:d.jK.List,settings:{options:[{value:d.jK.List,label:"List"},{value:d.jK.Table,label:"Table"},{value:d.jK.Hidden,label:"Hidden"}]}}).addRadio({path:"legend.placement",name:"Legend placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:e=>e.legend.displayMode!==d.jK.Hidden}),t&&e.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Legend values",category:["Legend"],description:"Select values or calculations to show in legend",editor:c.standardEditorsRegistry.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:e=>e.legend.displayMode!==d.jK.Hidden})}function y(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=["Tooltip"],s=t?[{value:d.f3.Single,label:"Single"},{value:d.f3.None,label:"Hidden"}]:[{value:d.f3.Single,label:"Single"},{value:d.f3.Multi,label:"All"},{value:d.f3.None,label:"Hidden"}],n=[{value:d.As.None,label:"None"},{value:d.As.Ascending,label:"Ascending"},{value:d.As.Descending,label:"Descending"}];e.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:a,defaultValue:"single",settings:{options:s}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:a,defaultValue:d.As.None,showIf:e=>e.tooltip.mode===d.f3.Multi,settings:{options:n}})}function w(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&e.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),e.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}var j;const C=e=>{let{value:t,context:a,onChange:s,item:r}=e;return(0,u.jsxs)(n.LhK,{children:[(0,u.jsx)(n.SYO,{value:(null==t?void 0:t.mode)||d.o0.None,options:r.settings.options,onChange:e=>{s(Object.assign({},t,{mode:e}))}}),a.isOverride&&(null==t?void 0:t.mode)&&(null==t?void 0:t.mode)!==d.o0.None&&(0,u.jsx)(n.IIB,{type:"text",placeholder:"Group",suffix:j||(j=(0,u.jsx)(n.ua7,{content:"Name of the stacking group",placement:"top",children:(0,u.jsx)(n.hU,{name:"question-circle"})})),defaultValue:null==t?void 0:t.group,onChange:e=>{s(Object.assign({},t,{group:e.currentTarget.value.trim()}))}})]})};function k(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["Graph styles"];e.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:a,defaultValue:t,editor:C,override:C,settings:{options:n.qVi.stacking},process:c.identityOverrideProcessor,shouldApply:e=>e.type===c.FieldType.number})}var S=a("./packages/grafana-ui/src/slate-plugins/index.ts"),T=a("./packages/grafana-ui/src/components/Switch/Switch.tsx"),O=a("./packages/grafana-ui/src/components/UnitPicker/UnitPicker.tsx");const _=e=>{let{value:t,onChange:a}=e;return(0,u.jsx)(O.n,{value:t,onChange:a})};var N=a("./packages/grafana-ui/src/components/DataLinks/DataLinksInlineEditor/DataLinksInlineEditor.tsx");const I=e=>{let{value:t,onChange:a,context:s}=e;return(0,u.jsx)(N.d,{links:t,onChange:a,data:s.data,getSuggestions:()=>s.getSuggestions?s.getSuggestions(c.VariableSuggestionsScope.Values):[]})};var P=a("./packages/grafana-ui/src/components/OptionsUI/color.tsx"),M=a("./packages/grafana-ui/src/components/Select/Select.tsx"),F=a("./packages/grafana-ui/src/themes/ThemeContext.tsx"),A=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),D=a("./packages/grafana-ui/src/components/Forms/Field.tsx"),$=a("./packages/grafana-ui/src/components/Forms/RadioButtonGroup/RadioButtonGroup.tsx");const L=e=>{var t,a,s,n;let{value:r,onChange:i,item:o,id:l}=e;const d=(0,F.l4)(),p=(0,F.wW)(E),h=(0,c.getFieldColorMode)(null==r?void 0:r.mode),m=(null!==(t=o.settings)&&void 0!==t&&t.byValueSupport?c.fieldColorModeRegistry.list():c.fieldColorModeRegistry.list().filter((e=>!e.isByValue))).map((e=>{var t;let a=e.isByValue?" (by value)":"";return{value:e.id,label:`${e.name}${a}`,description:e.description,isContinuous:e.isContinuous,isByValue:e.isByValue,component:()=>t||(t=(0,u.jsx)(R,{mode:e,theme:d}))}})),g=e=>{i(Object.assign({},r,{mode:e.value}))},f=e=>{i(Object.assign({},r,{mode:v,fixedColor:e}))},b=e=>{i(Object.assign({},r,{mode:v,seriesBy:e}))},v=null!==(a=null==r?void 0:r.mode)&&void 0!==a?a:c.FieldColorModeId.Thresholds;if(v===c.FieldColorModeId.Fixed)return(0,u.jsxs)("div",{className:p.group,children:[(0,u.jsx)(M.Ph,{menuShouldPortal:!0,minMenuHeight:200,options:m,value:v,onChange:g,className:p.select,inputId:l}),(0,u.jsx)(P.B,{value:null==r?void 0:r.fixedColor,onChange:f})]});if(null!==(s=o.settings)&&void 0!==s&&s.bySeriesSupport&&h.isByValue){var x;const e=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{style:{marginBottom:d.spacing(2)},children:n||(n=(0,u.jsx)(M.Ph,{menuShouldPortal:!0,minMenuHeight:200,options:m,value:v,onChange:g,inputId:l}))}),(0,u.jsx)(D.g,{label:"Color series by",children:(0,u.jsx)($.S,{value:null!==(x=null==r?void 0:r.seriesBy)&&void 0!==x?x:"last",options:e,onChange:b})})]})}return(0,u.jsx)(M.Ph,{menuShouldPortal:!0,minMenuHeight:200,options:m,value:v,onChange:g,inputId:l})},R=e=>{let{mode:t,theme:a}=e;if(!t.getColors)return null;const s=t.getColors(a).map(a.visualization.getColorByName),n={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(t.isContinuous)n.background=`linear-gradient(90deg, ${s.join(",")})`;else{let e="",t="";for(let a=0;a<s.length;a++){const n=s[a];if(""===e)e=`linear-gradient(90deg, ${n} 0%`;else{const r=100*(a/(s.length-1));e+=`, ${t} ${r}%, ${n} ${r}%`}t=n}n.background=e}return(0,u.jsx)("div",{style:n})},E=e=>({group:A.css`
      display: flex;
    `,select:A.css`
      margin-right: 8px;
      flex-grow: 1;
    `});var z=a("./packages/grafana-ui/src/components/StatsPicker/StatsPicker.tsx");const V=e=>{var t,a;let{value:s,onChange:n,item:r,id:i}=e;return(0,u.jsx)(z.m,{stats:s,onChange:n,allowMultiple:!(null===(t=r.settings)||void 0===t||!t.allowMultiple),defaultStat:null===(a=r.settings)||void 0===a?void 0:a.defaultStat,inputId:i})};var B=a("./packages/grafana-ui/src/components/MatchersUI/FieldNamePicker.tsx");const U=()=>{const e=["Standard options"],t={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:c.standardEditorsRegistry.get("text").editor,override:c.standardEditorsRegistry.get("text").editor,process:c.displayNameOverrideProcessor,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:e},a={id:"unit",path:"unit",name:"Unit",description:"",editor:c.standardEditorsRegistry.get("unit").editor,override:c.standardEditorsRegistry.get("unit").editor,process:c.stringOverrideProcessor,settings:{placeholder:"none"},shouldApply:()=>!0,category:e},s={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:c.standardEditorsRegistry.get("number").editor,override:c.standardEditorsRegistry.get("number").editor,process:c.numberOverrideProcessor,settings:{placeholder:"auto"},shouldApply:e=>e.type===c.FieldType.number,category:e},n={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:c.standardEditorsRegistry.get("number").editor,override:c.standardEditorsRegistry.get("number").editor,process:c.numberOverrideProcessor,settings:{placeholder:"auto"},shouldApply:e=>e.type===c.FieldType.number,category:e},r={id:"decimals",path:"decimals",name:"Decimals",editor:c.standardEditorsRegistry.get("number").editor,override:c.standardEditorsRegistry.get("number").editor,process:c.numberOverrideProcessor,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:e=>e.type===c.FieldType.number,category:e},i={id:"noValue",path:"noValue",name:"No Value",description:"What to show when there is no value",editor:c.standardEditorsRegistry.get("text").editor,override:c.standardEditorsRegistry.get("text").editor,process:c.stringOverrideProcessor,settings:{placeholder:"-"},shouldApply:()=>!0,category:e},o={id:"links",path:"links",name:"Data links",editor:c.standardEditorsRegistry.get("links").editor,override:c.standardEditorsRegistry.get("links").editor,process:c.dataLinksOverrideProcessor,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:e=>e?e.length:0};return[a,s,n,r,t,{id:"color",path:"color",name:"Color scheme",editor:c.standardEditorsRegistry.get("fieldColor").editor,override:c.standardEditorsRegistry.get("fieldColor").editor,process:c.identityOverrideProcessor,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:e},i,o]},H=()=>{const e={id:"number",name:"Number",description:"Allows numeric values input",editor:n.wYs},t={id:"slider",name:"Slider",description:"Allows numeric values input",editor:n.pn$},a={id:"text",name:"Text",description:"Allows string values input",editor:n.Ai9},s={id:"strings",name:"String array",description:"An array of strings",editor:n.gQx},r={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor:e=>(0,u.jsx)(T.r,Object.assign({},e,{onChange:t=>e.onChange(t.currentTarget.checked)}))},i={id:"select",name:"Select",description:"Allows option selection",editor:n.Y3l},o={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:n.Ytm},l={id:"color",name:"Color",description:"Allows color selection",editor:e=>(0,u.jsx)(P.B,{value:e.value,onChange:e.onChange})},c={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:L};return[a,e,t,r,{id:"radio",name:"Radio",description:"Allows option selection",editor(e){var t;return(0,u.jsx)(n.SYO,Object.assign({},e,{options:null===(t=e.item.settings)||void 0===t?void 0:t.options}))}},i,{id:"unit",name:"Unit",description:"Allows unit input",editor:_},{id:"links",name:"Links",description:"Allows defining data links",editor:I},{id:"stats-picker",name:"Stats Picker",editor:V,description:""},s,{id:"timezone",name:"Time Zone",description:"Time zone selection",editor:n.OkK},c,l,o,{id:"field-name",name:"Field name",description:"Time zone selection",editor:B.b}]}},"./packages/grafana-ui/src/slate-plugins/index.ts":(e,t,a)=>{"use strict";a.d(t,{hP:()=>r,Gp:()=>i,wl:()=>l,Rc:()=>f,z2:()=>b,dv:()=>v,$L:()=>y,Ze:()=>j.Z,bm:()=>J,WU:()=>j.Token});var s=a("../../opt/drone/yarncache/uuid-npm-8.3.2-eca0baba53-5575a8a75c.zip/node_modules/uuid/dist/esm-browser/v4.js");const n={"[":"]","{":"}","(":")"};function r(){return{onKeyDown(e,t,a){const r=e,{value:i}=t;switch(r.key){case"(":case"{":case"[":{const{start:{offset:e,key:a},end:{offset:o,key:l},focus:{offset:c}}=i.selection,d=i.focusText.text;if(i.selection.isExpanded)return r.preventDefault(),t.insertTextByKey(a,e,r.key).insertTextByKey(l,o+1,n[r.key]).moveEndBackward(1),!0;if(c===d.length||" "===d[c]||Object.values(n).includes(d[c])){r.preventDefault();const i=n[r.key],c={key:`brace_match-${(0,s.Z)()}`,type:`brace_match-${i}`,anchor:{key:a,offset:e,object:"point"},focus:{key:l,offset:o+1,object:"point"},object:"annotation"};return t.insertText(r.key).insertText(i).addAnnotation(c).moveBackward(1),!0}break}case")":case"}":case"]":{const e=i.anchorText.text[i.selection.anchor.offset],a=r.key,s=`brace_match-${a}`,n=i.annotations.find((e=>(null==e?void 0:e.type)===s&&e.anchor.key===i.anchorText.key));if(n&&e===a&&!i.selection.isExpanded)return r.preventDefault(),t.moveFocusForward(1).removeAnnotation(n).moveAnchorForward(1),!0;break}case"Backspace":{const e=i.anchorText.text,a=i.selection.anchor.offset,s=e[a-1],o=e[a];if(n[s]&&n[s]===o)return r.preventDefault(),t.deleteBackward(1).deleteForward(1).focus(),!0}}return a()}}}function i(){return{onKeyDown(e,t,a){const s=e,n=t.value;if(n.selection.isExpanded)return a();if("k"===s.key&&s.ctrlKey){s.preventDefault();const e=n.anchorText.text,a=n.selection.anchor.offset,r=e.length-a;return t.deleteForward(r),!0}return a()}}}const o=e=>null==e?void 0:e.replace(/[\uFEFF]/g,"");function l(){const e={onCopy(e,t,a){const s=e;s.preventDefault();const{document:n,selection:r}=t.value,{start:{offset:i},end:{offset:l}}=r,c=n.getLeafBlocksAtRange(r).toArray().map((e=>e.text)),d=o(((e,t,a)=>{if(!e.length)return;const s=e.slice(0,-1).join("").length+e.length-1;return e.join("\n").slice(t,s+a)})(c,i,l));return d&&s.clipboardData&&s.clipboardData.setData("Text",d),!0},onPaste(e,t,a){const s=e;if(s.preventDefault(),s.clipboardData){const e=o(s.clipboardData.getData("Text")),a=null==e?void 0:e.split("\n");if(a&&a.length){t.insertText(a[0]);for(const e of a.slice(1))t.splitBlock().insertText(e)}}return!0}};return Object.assign({},e,{onCut(t,a,s){const n=t;return e.onCopy(n,a,s),a.deleteAtRange(a.value.selection),!0}})}var c=a("./.yarn/__virtual__/slate-virtual-baec9b5e63/3/opt/drone/yarncache/slate-npm-0.47.8-44bfd82cc1-6d3541abe1.zip/node_modules/slate/lib/slate.es.js"),d=a("../../opt/drone/yarncache/is-hotkey-npm-0.2.0-c11e0b0bdb-97d295cfd8.zip/node_modules/is-hotkey/lib/index.js");const u=(0,d.TB)("mod+["),p=(0,d.TB)("shift+tab"),h=(0,d.TB)("mod+]"),m="  ",g=(e,t)=>{const a=e.value.selection,s=e.value.document.getLeafBlocksAtRange(a).toArray();if("left"===t)for(const t of s){const a=t.text.length-t.text.trimLeft().length,s=t.getFirstText().key,n={anchor:{key:s,offset:a,path:[]},focus:{key:s,offset:a,path:[]}};e.deleteBackwardAtRange(c.e6.create(n),Math.min(m.length,a))}else{const{startText:t}=e.value,n=t.text.slice(0,a.start.offset),r=/^\s*$/.test(n);for(const t of s)e.insertTextByKey(t.getFirstText().key,0,m);r&&e.moveStartBackward(m.length)}};function f(){return{onKeyDown(e,t,a){const s=e;if(u(s)||p(s))s.preventDefault(),g(t,"left");else if(h(s))s.preventDefault(),g(t,"right");else{if("Tab"!==s.key)return a();s.preventDefault(),((e,t,a)=>{const{startBlock:s,endBlock:n,selection:{start:{offset:r,key:i},end:{offset:o,key:l}}}=t.value,c=s.getFirstText();c&&0===r&&i===c.key&&o===c.text.length&&l===c.key||!s.equals(n)?g(t,"right"):t.insertText(m)})(0,t)}return!0}}}function b(){return{onKeyDown(e,t,a){const s=e,n=t.value;if(n.selection.isExpanded)return a();if("Enter"===s.key){s.preventDefault();const{startBlock:e}=n,a=function(e){let t=e.length-e.trimLeft().length;if(t){let a=e[0];for(;--t;)a+=e[0];return a}return""}(e.text);return t.splitBlock().insertText(a).focus()}return a()}}}function v(e){let{handler:t}=e;return{onKeyDown(e,a,s){const n=e;return t&&"Enter"===n.key&&(n.shiftKey||n.ctrlKey)?(n.preventDefault(),t(n),a):s()}}}const x=(0,d.TB)("mod+l");function y(){return{onKeyDown(e,t,a){const s=e;if(!x(s))return a();{s.preventDefault();const{focusBlock:e,document:a}=t.value;t.moveAnchorToStartOfBlock();a.getNextBlock(e.key)?t.moveFocusToStartOfNextBlock():t.moveFocusToEndOfText()}return!0}}}var w,j=a("./packages/grafana-ui/src/slate-plugins/slate-prism/index.ts"),C=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),k=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),S=a("./packages/grafana-ui/src/slate-plugins/slate-prism/TOKEN_MARK.ts"),T=a("./.yarn/__virtual__/react-dom-virtual-93e2c4839c/3/opt/drone/yarncache/react-dom-npm-17.0.2-f551215af1-1c1eaa3bca.zip/node_modules/react-dom/index.js"),O=a("./.yarn/__virtual__/react-window-virtual-0f9a8c6a67/3/opt/drone/yarncache/react-window-npm-1.8.6-4f5a230226-54ccf2b16c.zip/node_modules/react-window/dist/index.esm.js"),_=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),N=a("./packages/grafana-data/src/index.ts"),I=a("./packages/grafana-ui/src/themes/ThemeContext.tsx"),P=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const M=e=>{let{item:t,height:a}=e;const s=t&&!!t.documentation,n=t?t.label:"",r=(0,N.renderMarkdown)(null==t?void 0:t.documentation),i=((e,t,a)=>({typeaheadItem:_.css`
      label: type-ahead-item;
      z-index: 11;
      padding: ${e.spacing.sm} ${e.spacing.sm} ${e.spacing.sm} ${e.spacing.md};
      border-radius: ${e.border.radius.md};
      border: ${e.colors.border2};
      overflow-y: scroll;
      overflow-x: hidden;
      outline: none;
      background: ${e.colors.bg2};
      color: ${e.colors.text};
      box-shadow: 0 0 20px ${e.colors.dropdownShadow};
      visibility: ${!0===a?"visible":"hidden"};
      width: 250px;
      height: ${t+parseInt(e.spacing.xxs,10)}px;
      position: relative;
      word-break: break-word;
    `}))((0,I.Fg)(),a,s);return(0,P.jsxs)("div",{className:(0,_.cx)([i.typeaheadItem]),children:[(0,P.jsx)("b",{children:n}),w||(w=(0,P.jsx)("hr",{})),(0,P.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})]})};var F=a("./.yarn/__virtual__/react-highlight-words-virtual-d2265e757c/3/opt/drone/yarncache/react-highlight-words-npm-0.17.0-880b4a18ed-41b3d0e451.zip/node_modules/react-highlight-words/dist/main.js"),A=a.n(F),D=a("./packages/grafana-ui/src/types/completion.ts"),$=a("./packages/grafana-ui/src/components/Typeahead/PartialHighlighter.tsx");const L=e=>({typeaheadItem:_.css`
    label: type-ahead-item;
    height: auto;
    font-family: ${e.typography.fontFamily.monospace};
    padding: ${e.spacing.sm} ${e.spacing.sm} ${e.spacing.sm} ${e.spacing.md};
    font-size: ${e.typography.size.sm};
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: 11;
    display: block;
    white-space: nowrap;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),
      background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1);
  `,typeaheadItemSelected:_.css`
    label: type-ahead-item-selected;
    background-color: ${e.colors.bg2};
  `,typeaheadItemMatch:_.css`
    label: type-ahead-item-match;
    color: ${e.palette.yellow};
    border-bottom: 1px solid ${e.palette.yellow};
    padding: inherit;
    background: inherit;
  `,typeaheadItemGroupTitle:_.css`
    label: type-ahead-item-group-title;
    color: ${e.colors.textWeak};
    font-size: ${e.typography.size.sm};
    line-height: ${e.typography.lineHeight.md};
    padding: ${e.spacing.sm};
  `}),R=e=>{const t=(0,I.yK)(L),{isSelected:a,item:s,prefix:n,style:r,onMouseEnter:i,onMouseLeave:o,onClickItem:l}=e,c=a?(0,_.cx)([t.typeaheadItem,t.typeaheadItemSelected]):(0,_.cx)([t.typeaheadItem]),d=(0,_.cx)([t.typeaheadItemMatch]),u=(0,_.cx)([t.typeaheadItemGroupTitle]),p=s.label||"";return s.kind===D.c.GroupTitle?(0,P.jsx)("li",{className:u,style:r,children:(0,P.jsx)("span",{children:p})}):(0,P.jsx)("li",{className:c,style:r,onMouseDown:l,onMouseEnter:i,onMouseLeave:o,children:void 0!==s.highlightParts?(0,P.jsx)($.H,{text:p,highlightClassName:d,highlightParts:s.highlightParts}):(0,P.jsx)(A(),{textToHighlight:p,searchWords:[null!=n?n:""],highlightClassName:d})})};var E=a("../../opt/drone/yarncache/calculate-size-npm-1.1.1-466c9f6cd7-8f1bfad7a9.zip/node_modules/calculate-size/lib/index.js");const z=e=>e.reduce(((e,t)=>{let{items:a,label:s}=t;return e.push({label:s,kind:D.c.GroupTitle}),a.reduce(((e,t)=>(e.push(t),e)),e)}),[]),V=e=>e.reduce(((e,t)=>e.length<t.label.length?t.label:e),""),B=(e,t,a)=>{const s=(0,E.Z)(a,{font:e.typography.fontFamily.monospace,fontSize:e.typography.size.sm,fontWeight:"normal"}),n=H(s.width,e),r=U(s.height,e);return{listWidth:n,listHeight:q(r,t),itemHeight:r}},U=(e,t)=>e+2*parseInt(t.spacing.sm,10),H=(e,t)=>{const a=parseInt(t.spacing.sm,10)+parseInt(t.spacing.md,10);return Math.min(Math.max(e+a,200),800)},q=(e,t)=>{const a=Math.min(t.length,10)*e;return Math.max(a,100)};function W(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const G=(e,t)=>e-t*Math.floor(e/t);class Z extends C.PureComponent{constructor(){super(...arguments),W(this,"context",void 0),W(this,"listRef",(0,C.createRef)()),W(this,"state",{hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1}),W(this,"componentDidMount",(()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const e=z(this.props.groupedItems),t=V(e),{listWidth:a,listHeight:s,itemHeight:n}=B(this.context.v1,e,t);this.setState({listWidth:a,listHeight:s,itemHeight:n,allItems:e})})),W(this,"componentWillUnmount",(()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)})),W(this,"handleSelectionChange",(()=>{this.forceUpdate()})),W(this,"componentDidUpdate",((e,t)=>{if(null!==this.state.typeaheadIndex&&t.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(1===this.state.typeaheadIndex)return void this.listRef.current.scrollToItem(0);this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if(!1===(0,k.isEqual)(e.groupedItems,this.props.groupedItems)){const e=z(this.props.groupedItems),t=V(e),{listWidth:a,listHeight:s,itemHeight:n}=B(this.context.v1,e,t);this.setState({listWidth:a,listHeight:s,itemHeight:n,allItems:e,typeaheadIndex:null})}})),W(this,"onMouseEnter",(e=>{this.setState({hoveredItem:e})})),W(this,"onMouseLeave",(()=>{this.setState({hoveredItem:null})})),W(this,"moveMenuIndex",(e=>{const t=this.state.allItems.length;if(t){const a=this.state.typeaheadIndex||0;let s=G(a+e,t);return this.state.allItems[s].kind===D.c.GroupTitle&&(s=G(s+e,t)),void this.setState({typeaheadIndex:s})}})),W(this,"insertSuggestion",(()=>{this.props.onSelectSuggestion&&null!==this.state.typeaheadIndex&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}))}get menuPosition(){if(!window.getSelection)return"";const e=window.getSelection(),t=e&&e.anchorNode;if(t&&t.parentElement){const e=t.parentElement.getBoundingClientRect(),a=window.scrollX,s=window.scrollY;return`position: absolute; display: flex; top: ${e.top+s+e.height+6}px; left: ${e.left+a-2}px`}return""}render(){const{prefix:e,isOpen:t=!1,origin:a}=this.props,{allItems:s,listWidth:n,listHeight:r,itemHeight:i,hoveredItem:o,typeaheadIndex:l}=this.state,c=o||l,d=s[o||(l||0)];return(0,P.jsxs)(Q,{origin:a,isOpen:t,style:this.menuPosition,children:[(0,P.jsx)("ul",{className:"typeahead",children:(0,P.jsx)(O.t7,{ref:this.listRef,itemCount:s.length,itemSize:i,itemKey:e=>{const t=s&&s[e];return t?`${e}-${t.label}`:`${e}`},width:n,height:r,children:t=>{let{index:a,style:n}=t;const r=s&&s[a];return r?(0,P.jsx)(R,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(r):{},isSelected:null!==l&&s[l]===r,item:r,prefix:e,style:n,onMouseEnter:()=>this.onMouseEnter(a),onMouseLeave:this.onMouseLeave}):null}})}),c&&(0,P.jsx)(M,{height:r,item:d})]})}}W(Z,"contextType",I.Ni);class Q extends C.PureComponent{constructor(e){super(e),W(this,"node",void 0);const{index:t=0,origin:a="query",style:s}=e;this.node=document.createElement("div"),this.node.setAttribute("style",s),this.node.classList.add("slate-typeahead",`slate-typeahead-${a}-${t}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),T.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var K=a("./packages/grafana-ui/src/utils/index.ts"),Y=a("./packages/grafana-ui/src/utils/searchFunctions.ts");function J(e){let t,{onTypeahead:a,cleanText:s,onWillApplySuggestion:n,portalOrigin:r}=e,i={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const o=(0,k.debounce)(X,250),l=e=>{i=Object.assign({},i,e)};return{onBlur:(e,t,a)=>(i=Object.assign({},i,{groupedItems:[]}),a()),onClick:(e,t,a)=>(i=Object.assign({},i,{groupedItems:[]}),a()),onKeyDown:(e,n,r)=>{const c=e,d=i.groupedItems.length;switch(c.key){case"Escape":if(d)return c.preventDefault(),i=Object.assign({},i,{groupedItems:[]}),n.insertText("");break;case"ArrowDown":case"ArrowUp":if(d)return c.preventDefault(),void t.moveMenuIndex("ArrowDown"===c.key?1:-1);break;case"Enter":if(!c.shiftKey&&!c.ctrlKey&&d)return c.preventDefault(),t.insertSuggestion();break;case"Tab":if(d)return c.preventDefault(),t.insertSuggestion();break;default:1===c.key.length&&o(n,l,a,s)}return r()},commands:{selectSuggestion:(e,t)=>{const n=i.groupedItems;if(!n||!n.length)return e;const r=e.applyTypeahead(t);return o(e,l,a,s),r},applyTypeahead:(e,t)=>{let a=t.insertText||t.label;const r="function"===t.kind,o=t.move||0,{typeaheadPrefix:l,typeaheadText:c,typeaheadContext:d}=i;n&&(a=n(a,{groupedItems:i.groupedItems,typeaheadContext:d,typeaheadPrefix:l,typeaheadText:c}));const u=t.deleteBackwards||l.length,p=(s?s(c):c).length-l.length,h=c.indexOf(l),m=l&&(p>0&&h>-1||a===c)&&!r?p+h:0;if(a.match(/\n/)){const t=(0,K.xl)(a);return e.deleteBackward(u).deleteForward(m).insertFragment(t).focus()}return i=Object.assign({},i,{groupedItems:[]}),e.snapshotSelection().deleteBackward(u).deleteForward(m).insertText(a).moveForward(o).focus()}},renderEditor(e,a,s){if(a.value.selection.isExpanded)return s();const n=s();return(0,P.jsxs)(P.Fragment,{children:[n,(0,P.jsx)(Z,{menuRef:e=>t=e,origin:r,prefix:i.typeaheadPrefix,isOpen:!!i.groupedItems.length,groupedItems:i.groupedItems,onSelectSuggestion:a.selectSuggestion})]})}}}const X=async(e,t,a,s)=>{if(!a)return;const{value:n}=e,{selection:r}=n,i=n.document.getClosestBlock(n.focusBlock.key),o=n.selection.start.offset-1,l=i&&i.getDecorations(e),c=l?l.filter((e=>e.start.offset<=o&&e.end.offset>o&&e.type===S.Z)).toArray():[],d=l&&l.filter((e=>e.end.offset<=o&&e.type===S.Z&&e.data.get("className").includes("label-key"))).last(),u=d&&n.focusText.text.slice(d.start.offset,d.end.offset),p=c.map((e=>e.data.get("className"))).join(" ").split(" ").filter((e=>e.length));let h=n.focusText.text,m=h.slice(0,r.focus.offset);c.length&&(h=n.focusText.text.slice(c[0].start.offset,c[0].end.offset),m=n.focusText.text.slice(c[0].start.offset,r.focus.offset));const g=m.match(/(?:!?=~?"?|")(.*)/);g?m=g[1]:s&&(m=s(m));const{suggestions:f,context:b}=await a({prefix:m,text:h,value:n,wrapperClasses:p,labelKey:u||void 0,editor:e});t({groupedItems:f.map((e=>{if(!e.items)return e;const t=e.searchFunctionType||(e.prefixMatch?K.nu.Prefix:K.nu.Word),a=Y.n[t];let s=Object.assign({},e);return m&&(e.skipFilter||(s.items=s.items.filter((e=>(e.filterText||e.label).length>=m.length)),s.items=a(s.items,m)),s.items=s.items.filter((e=>{var t;return!(e.insertText===m||(null!==(t=e.filterText)&&void 0!==t?t:e.label)===m)}))),e.skipSort||(s.items=(0,k.sortBy)(s.items,(e=>void 0===e.sortText?void 0!==e.sortValue?e.sortValue:e.label:e.sortText||e.label))),s})).filter((e=>e.items&&e.items.length)),typeaheadPrefix:m,typeaheadContext:b,typeaheadText:h}),e.blur().focus()}},"./packages/grafana-ui/src/slate-plugins/slate-prism/TOKEN_MARK.ts":(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s="prism-token"},"./packages/grafana-ui/src/slate-plugins/slate-prism/index.ts":(e,t,a)=>{"use strict";a.d(t,{Z:()=>m,a:()=>v});var s=a("../../opt/drone/yarncache/prismjs-npm-1.26.0-15be1ab06b-6de058930c.zip/node_modules/prismjs/prism.js"),n=a.n(s),r=a("./.yarn/__virtual__/slate-virtual-baec9b5e63/3/opt/drone/yarncache/slate-npm-0.47.8-44bfd82cc1-6d3541abe1.zip/node_modules/slate/lib/slate.es.js"),i=(a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),a("../../opt/drone/yarncache/immutable-npm-4.0.0-74b844f82e-4b5e9181e4.zip/node_modules/immutable/dist/immutable.es.js")),o=a("./packages/grafana-ui/src/slate-plugins/slate-prism/TOKEN_MARK.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function c(e){return"block"===e.object&&"code_block"===e.type}function d(e){return"javascript"}function u(e,t,a){const{decoration:s}=e;if(s.type!==o.Z)return a();const n=s.data.get("className");return(0,l.jsx)("span",{className:n,children:e.children})}class p extends((0,i.Record)({onlyIn:c,getSyntax:d,renderDecoration:u})){constructor(e){super(e)}}const h=p;function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n().languages;const a=new h(e);return{decorateNode:(e,s,i)=>{if(!a.onlyIn(e))return i();const o=r.gO.create(e),l=a.getSyntax(o),c=t[l];if(!c)return[];const d=o.getTexts().map((e=>e&&e.getText())).join("\n"),u=n().tokenize(d,c),p=v(u),h=s.value.data.set("tokens",p);return s.setData(h),g(a,u,o)},renderDecoration:(e,t,s)=>a.renderDecoration({children:e.children,decoration:e.decoration},t,s)}}function g(e,t,a){const s=a.getTexts(),n=[];let r=0,i=0;return s.forEach((e=>{i=r+e.getText().length;let s=0;t.forEach((function t(o,l){if("string"==typeof o){if(l){const t=f({text:e,textStart:r,textEnd:i,start:s,end:s+o.length,className:`prism-token token ${l}`,block:a});t&&n.push(t)}s+=o.length}else if(l=`${l} ${o.type}`,o.alias&&(l+=" "+o.alias),"string"==typeof o.content){const t=f({text:e,textStart:r,textEnd:i,start:s,end:s+o.content.length,className:`prism-token token ${l}`,block:a});t&&n.push(t),s+=o.content.length}else for(let e=0;e<o.content.length;e+=1)t(o.content[e],l)})),r=i+1})),n}function f(e){let{text:t,textStart:a,textEnd:s,start:n,end:r,className:i,block:l}=e;if(n>=s||r<=a)return null;n=Math.max(n,a),r=Math.min(r,s),n-=a,r-=a;return l.createDecoration({object:"decoration",anchor:{key:t.key,offset:n,object:"point"},focus:{key:t.key,offset:r,object:"point"},type:o.Z,data:{className:i}})}function b(e){return"string"==typeof e?[{content:e,types:[],aliases:[]}]:Array.isArray(e)?e.flatMap((e=>b(e))):e instanceof n().Token?b(e.content).flatMap((t=>{let a=[];var s;"string"==typeof e.alias?a=[e.alias]:a=null!==(s=e.alias)&&void 0!==s?s:[];return{content:t.content,types:[e.type,...t.types],aliases:[...a,...t.aliases]}})):[]}function v(e){const t=b(e);if(!t.length)return[];const a=t[0];a.prev=null,a.next=t.length>=2?t[1]:null,a.offsets={start:0,end:a.content.length};for(let e=1;e<t.length-1;e++)t[e].prev=t[e-1],t[e].next=t[e+1],t[e].offsets={start:t[e-1].offsets.end,end:t[e-1].offsets.end+t[e].content.length};const s=t[t.length-1];return s.prev=t.length>=2?t[t.length-2]:null,s.next=null,s.offsets={start:t.length>=2?t[t.length-2].offsets.end:0,end:t.length>=2?t[t.length-2].offsets.end+s.content.length:s.content.length},t}},"./packages/grafana-ui/src/themes/ThemeContext.tsx":(e,t,a)=>{"use strict";a.d(t,{Ni:()=>u,Zz:()=>p,HE:()=>h,Fg:()=>m,l4:()=>g,yK:()=>f,wW:()=>b,sJ:()=>v});var s=a("./packages/grafana-data/src/index.ts"),n=a("../../opt/drone/yarncache/hoist-non-react-statics-npm-3.3.2-e7b709e6c1-b153827042.zip/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js"),r=a.n(n),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),o=a("./packages/grafana-ui/src/themes/stylesFactory.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");let c=null;const d=new WeakMap,u=i.createContext((0,s.createTheme)());u.displayName="ThemeContext";const p=e=>{const t=t=>{const a=c||u;return(0,l.jsx)(a.Consumer,{children:a=>(0,l.jsx)(e,Object.assign({},t,{theme:a.v1}))})};return t.displayName=`WithTheme(${e.displayName})`,r()(t,e),t},h=e=>{const t=t=>{const a=c||u;return(0,l.jsx)(a.Consumer,{children:a=>(0,l.jsx)(e,Object.assign({},t,{theme:a}))})};return t.displayName=`WithTheme(${e.displayName})`,r()(t,e),t};function m(){return(0,i.useContext)(c||u).v1}function g(){return(0,i.useContext)(c||u)}function f(e){const t=m();let a=d.get(e);return a||(a=(0,o.B)(e),d.set(e,a)),a(t)}function b(e){const t=g();let a=d.get(e);return a||(a=(0,o.B)(e),d.set(e,a)),a(t)}const v=e=>(c=i.createContext(e),()=>{c=null})},"./packages/grafana-ui/src/themes/index.ts":(e,t,a)=>{"use strict";a.d(t,{nz:()=>b,Ni:()=>s.Ni,gh:()=>i,Zu:()=>o,sJ:()=>s.sJ,GU:()=>d,Bb:()=>l.B,yK:()=>s.yK,wW:()=>s.wW,Fg:()=>s.Fg,l4:()=>s.l4,Zz:()=>s.Zz,HE:()=>s.HE});var s=a("./packages/grafana-ui/src/themes/ThemeContext.tsx"),n=a("./packages/grafana-data/src/index.ts");let r;const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark";return r?r(e):(0,n.createTheme)({colors:{mode:e}}).v1},o=e=>(r=e,()=>{r=null});var l=a("./packages/grafana-ui/src/themes/stylesFactory.ts"),c=(a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),a("./.yarn/__virtual__/@emotion-react-virtual-a8cfa8ca23/3/opt/drone/yarncache/@emotion-react-npm-11.7.1-29be6cd15f-3392aa71f9.zip/node_modules/@emotion/react/dist/emotion-react.browser.esm.js")),d=a("./packages/grafana-ui/src/themes/mixins.ts");function u(e){return c.iv`
    html {
      -ms-overflow-style: scrollbar;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      height: 100%;
      font-size: ${e.typography.htmlFontSize}px;
      font-family: ${e.typography.fontFamily};
      line-height: ${e.typography.body.lineHeight};
      font-kerning: normal;
    }

    body {
      height: 100%;
      width: 100%;
      position: absolute;
      color: ${e.colors.text.primary};
      background-color: ${e.colors.background.canvas};
      ${p(e.typography.body)}
    }

    h1,
    .h1 {
      ${p(e.typography.h1)}
    }
    h2,
    .h2 {
      ${p(e.typography.h2)}
    }
    h3,
    .h3 {
      ${p(e.typography.h3)}
    }
    h4,
    .h4 {
      ${p(e.typography.h4)}
    }
    h5,
    .h5 {
      ${p(e.typography.h5)}
    }
    h6,
    .h6 {
      ${p(e.typography.h6)}
    }

    p {
      margin: 0 0 ${e.spacing(2)};
    }

    button {
      letter-spacing: ${e.typography.body.letterSpacing};

      &:focus-visible {
        outline: ${(0,d.getFocusStyles)(e)};
      }
      &:focus {
        outline: none;
      }
    }

    // Ex: 14px base font * 85% = about 12px
    small {
      font-size: ${e.typography.bodySmall.fontSize};
    }

    b,
    strong {
      font-weight: ${e.typography.fontWeightMedium};
    }

    em {
      font-style: italic;
      color: ${e.colors.text.primary};
    }

    cite {
      font-style: normal;
    }

    // Utility classes
    .muted {
      color: ${e.colors.text.secondary};
    }

    a.muted:hover,
    a.muted:focus {
      color: ${e.colors.text.primary};
    }

    .text-warning {
      color: ${e.colors.warning.text};

      &:hover,
      &:focus {
        color: ${e.colors.emphasize(e.colors.warning.text,.15)};
      }
    }

    .text-error {
      color: ${e.colors.error.text};

      &:hover,
      &:focus {
        color: ${e.colors.emphasize(e.colors.error.text,.15)};
      }
    }

    .text-success {
      color: $success-text-color;

      &:hover,
      &:focus {
        color: ${e.colors.emphasize(e.colors.success.text,.15)};
      }
    }

    a {
      cursor: pointer;
      color: ${e.colors.text.primary};
      text-decoration: none;

      &:focus {
        outline: none;
      }

      &:focus-visible {
        ${(0,d.getFocusStyles)(e)}
      }

      &: [disabled] {
        cursor: default;
        pointer-events: none !important;
      }
    }

    .text-link {
      text-decoration: underline;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }
  `}function p(e){return`\n    margin: 0;\n    font-size: ${e.fontSize};    \n    line-height: ${e.lineHeight};\n    font-weight: ${e.fontWeight};\n    letter-spacing: ${e.letterSpacing};\n    font-family: ${e.fontFamily};\n    margin-bottom: 0.45em;\n  `}function h(e){return c.iv`
    .card-section {
      margin-bottom: ${e.spacing(4)};
    }

    .card-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      list-style-type: none;
    }

    .card-item {
      display: block;
      height: 100%;
      background: ${e.colors.background.secondary};
      box-shadow: none;
      padding: ${e.spacing(2)};
      border-radius: 4px;

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.secondary,.03)};
      }

      .label-tag {
        margin-left: ${e.spacing(1)};
        font-size: 11px;
        padding: 2px 6px;
      }
    }

    .card-item-body {
      display: flex;
      overflow: hidden;
    }

    .card-item-details {
      overflow: hidden;
    }

    .card-item-header {
      margin-bottom: ${e.spacing(2)};
    }

    .card-item-type {
      color: ${e.colors.text.secondary};
      text-transform: uppercase;
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightMedium};
    }

    .card-item-badge {
      margin: 6px 0;
    }

    .card-item-notice {
      font-size: ${e.typography.size.sm};
    }

    .card-item-name {
      color: ${e.colors.text.primary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-label {
      margin-left: ${e.spacing(1)};
    }

    .card-item-sub-name {
      color: ${e.colors.text.secondary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-sub-name--header {
      color: ${e.colors.text.secondary};
      text-transform: uppercase;
      margin-bottom: ${e.spacing(2)};
      font-size: ${e.typography.size.sm};
      font-weight: bold;
    }

    .card-list-layout-grid {
      .card-item-type {
        display: inline-block;
      }

      .card-item-notice {
        font-size: ${e.typography.size.sm};
        display: inline-block;
        margin-left: ${e.spacing(2)};
      }

      .card-item-header-action {
        float: right;
      }

      .card-item-wrapper {
        width: 100%;
        padding: ${e.spacing(0,2,2,0)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item-figure {
        margin: ${e.spacing(0,2,2,0)}0;
        height: 80px;

        img {
          width: 80px;
        }
      }

      .card-item-name {
        font-size: ${e.typography.h3.fontSize};
      }

      ${e.breakpoints.up("md")} {
        .card-item-wrapper {
          width: 50%;
        }
      }

      ${e.breakpoints.up("lg")} {
        .card-item-wrapper {
          width: 33.333333%;
        }
      }

      &.card-list-layout-grid--max-2-col {
        ${e.breakpoints.up("lg")} {
          .card-item-wrapper {
            width: 50%;
          }
        }
      }
    }

    .card-list-layout-list {
      .card-item-wrapper {
        padding: 0;
        width: 100%;
        margin-bottom: ${e.spacing(1)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item {
        border-radius: 2px;
      }

      .card-item-header {
        float: right;
        text-align: right;
      }

      .card-item-figure {
        margin: ${e.spacing(0,2,0,0)};
        img {
          width: 48px;
        }
      }

      .card-item-name {
        font-size: ${e.typography.h4.fontSize};
      }

      .card-item-sub-name {
        font-size: ${e.typography.size.sm};
      }

      .layout-selector {
        margin-right: 0;
      }
    }
  `}function m(e){return c.iv`
    .panel-options-group {
      border-bottom: 1px solid ${e.colors.border.weak};
    }

    .panel-options-group__header {
      padding: ${e.spacing(1,2,1,1)};
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 500;
      color: ${e.colors.text.primary};

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.primary,.03)};
      }
    }

    .panel-options-group__icon {
      color: ${e.colors.text.secondary};
      margin-right: ${e.spacing(1)};
    }

    .panel-options-group__title {
      position: relative;
    }

    .panel-options-group__body {
      padding: ${e.spacing(1,2,1,4)};
    }
  `}function g(e){const t=e.breakpoints.values.xxl+2*e.spacing.gridSize+e.components.sidemenu.width;return c.iv`
    .grafana-app {
      display: flex;
      align-items: stretch;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .main-view {
      position: relative;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      flex: 1 1 0;
    }

    .page-scrollbar-wrapper {
      width: 100%;
      flex-grow: 1;
      width: 100%;
      min-height: 0;
    }

    .page-scrollbar-content {
      display: flex;
      min-height: 100%;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .page-container {
      flex-grow: 1;
      flex-basis: 100%;
      padding-left: ${e.spacing(2)};
      padding-right: ${e.spacing(2)};

      ${e.breakpoints.up("sm")} {
        margin: ${e.spacing(0,1)};
      }

      ${e.breakpoints.up("md")} {
        margin: ${e.spacing(0,2)};
      }

      @media (min-width: ${t}px) {
        max-width: ${e.breakpoints.values.xxl}px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
    }

    .page-full {
      margin-left: ${e.spacing(2)};
      padding-left: ${e.spacing(2)};
      padding-right: ${e.spacing(2)};
    }

    .page-body {
      padding: ${e.spacing(1)};
      background: ${e.components.panel.background};
      border: 1px solid ${e.components.panel.borderColor};
      margin-bottom: 32px;

      ${e.breakpoints.up("md")} {
        padding: ${e.spacing(2)};
      }

      ${e.breakpoints.up("lg")} {
        padding: ${e.spacing(3)};
      }
    }

    .page-heading {
      font-size: ${e.typography.h4.fontSize};
      margin-top: 0;
      margin-bottom: ${e.spacing(2)};
    }

    .page-action-bar {
      margin-bottom: ${e.spacing(2)};
      display: flex;
      align-items: flex-start;

      > a,
      > button {
        margin-left: ${e.spacing(2)};
      }
    }

    .page-action-bar--narrow {
      margin-bottom: 0;
    }

    .page-action-bar__spacer {
      width: ${e.spacing(2)};
      flex-grow: 1;
    }

    .page-sub-heading {
      margin-bottom: ${e.spacing(2)};
    }

    .page-sub-heading-icon {
      margin-left: ${e.spacing(1)};
      margin-top: ${e.spacing(.5)};
    }
  `}var f=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function b(){const e=(0,s.l4)();return(0,f.jsx)(c.xB,{styles:[u(e),g(e),h(e),m(e),c.iv`
    // TODO copy from _utils.scss
  `]})}},"./packages/grafana-ui/src/themes/mixins.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{cardChrome:()=>r,hoverColor:()=>i,listItem:()=>o,listItemSelected:()=>l,mediaUp:()=>c,focusCss:()=>d,getMouseFocusStyles:()=>u,getFocusStyles:()=>p,getTooltipContainerStyles:()=>h});var s=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),n=a.n(s);function r(e){return`\n    background: ${e.colors.background.secondary};\n    &:hover {\n      background: ${i(e.colors.background.secondary,e)};\n    }\n    box-shadow: ${e.components.panel.boxShadow};\n    border-radius: ${e.shape.borderRadius(2)};\n`}function i(e,t){return t.isDark?n()(e).brighten(2).toString():n()(e).darken(2).toString()}function o(e){return`\n  background: ${e.colors.background.secondary};\n  &:hover {\n    background: ${i(e.colors.background.secondary,e)};\n  }\n  box-shadow: ${e.components.panel.boxShadow};\n  border-radius: ${e.shape.borderRadius(2)};\n`}function l(e){return`\n    background: ${i(e.colors.background.secondary,e)};\n    color: ${e.colors.text.maxContrast};\n`}function c(e){return`only screen and (min-width: ${e})`}const d=e=>`\n  outline: 2px dotted transparent;\n  outline-offset: 2px;\n  box-shadow: 0 0 0 2px ${e.colors.bodyBg}, 0 0 0px 4px ${e.colors.formFocusOutline};\n  transition: all 0.2s cubic-bezier(0.19, 1, 0.22, 1);\n`;function u(e){return{outline:"none",boxShadow:"none"}}function p(e){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${e.colors.background.canvas}, 0 0 0px 4px ${e.colors.primary.main}`,transition:"all 0.2s cubic-bezier(0.19, 1, 0.22, 1)"}}const h=e=>`\n  overflow: hidden;\n  background: ${e.colors.background.secondary};\n  box-shadow: ${e.shadows.z2};\n  max-width: 800px;\n  padding: ${e.spacing(1)};\n  border-radius: ${e.shape.borderRadius()};\n  z-index: ${e.zIndex.tooltip};\n`},"./packages/grafana-ui/src/themes/stylesFactory.ts":(e,t,a)=>{"use strict";a.d(t,{B:()=>n});var s=a("../../opt/drone/yarncache/memoize-one-npm-6.0.0-8b2a2cd020-f185ea69f7.zip/node_modules/memoize-one/dist/memoize-one.esm.js");function n(e){return(0,s.Z)(e)}},"./packages/grafana-ui/src/types/completion.ts":(e,t,a)=>{"use strict";let s;a.d(t,{c:()=>s}),function(e){e.GroupTitle="GroupTitle"}(s||(s={}))},"./packages/grafana-ui/src/types/index.ts":(e,t,a)=>{"use strict";a.d(t,{fm:()=>s.ActionMeta,cm:()=>n.c,nj:()=>r.FieldErrors,lD:()=>r.SubmitHandler,BI:()=>o,e7:()=>l});var s={};a.r(s);var n=a("./packages/grafana-ui/src/types/completion.ts"),r=a("./.yarn/__virtual__/react-hook-form-virtual-92b6119fd4/3/opt/drone/yarncache/react-hook-form-npm-7.5.3-f9cc466c62-fbfaa3b664.zip/node_modules/react-hook-form/dist/index.esm.js"),i=a("./packages/grafana-data/src/index.ts");const o=()=>["angle-double-down","angle-double-right","angle-double-up","angle-down","angle-left","angle-right","angle-up","apps","arrow","arrow-down","arrow-from-right","arrow-left","arrow-random","arrow-right","arrow-up","arrows-h","backward","bars","bell","bell-slash","bolt","book","book-open","brackets-curly","building","bug","building","calculator-alt","calendar-alt","camera","capture","channel-add","chart-line","check","check-circle","circle","clipboard-alt","clock-nine","cloud","cloud-download","cloud-upload","code-branch","cog","columns","comment-alt","comment-alt-share","comments-alt","compass","copy","credit-card","cube","dashboard","database","document-info","download-alt","draggabledots","edit","ellipsis-v","envelope","exchange-alt","exclamation-triangle","external-link-alt","eye","eye-slash","ellipsis-h","fa fa-spinner","favorite","file-alt","file-blank","file-copy-alt","filter","folder","font","fire","folder-open","folder-plus","folder-upload","forward","gf-bar-alignment-after","gf-bar-alignment-before","gf-bar-alignment-center","gf-grid","gf-interpolation-linear","gf-interpolation-smooth","gf-interpolation-step-after","gf-interpolation-step-before","gf-landscape","gf-layout-simple","gf-logs","gf-portrait","grafana","graph-bar","heart","heart-break","history","home-alt","hourglass","import","info","info-circle","key-skeleton-alt","keyboard","layer-group","library-panel","line-alt","link","list-ui-alt","list-ul","lock","map-marker","message","minus","minus-circle","mobile-android","monitor","palette","panel-add","pause","pen","percentage","play","plug","plus","plus-circle","plus-square","power","presentation-play","process","question-circle","record-audio","repeat","rocket","save","search","search-minus","search-plus","share-alt","shield","shield-exclamation","signal","signin","signout","sitemap","slack","sliders-v-alt","sort-amount-down","sort-amount-up","square-shape","star","step-backward","sync","table","tag-alt","text-fields","times","toggle-on","trash-alt","unlock","upload","user","users-alt","wrap-text","x"];function l(e){if(e)switch(e.type){case i.FieldType.time:return"clock-nine";case i.FieldType.string:return"font";case i.FieldType.number:return"calculator-alt";case i.FieldType.boolean:return"toggle-on";case i.FieldType.trace:return"info-circle";case i.FieldType.geo:return"map-marker";case i.FieldType.other:return"brackets-curly"}return"question-circle"}},"./packages/grafana-ui/src/utils/closePopover.ts":(e,t,a)=>{"use strict";a.d(t,{i:()=>s});const s=(e,t)=>{"Tab"===e.key||e.altKey||e.ctrlKey||e.metaKey||(e.stopPropagation(),"Escape"===e.key&&t())}},"./packages/grafana-ui/src/utils/dataLinks.ts":(e,t,a)=>{"use strict";a.d(t,{R:()=>s});const s=e=>e().map((e=>({label:e.title,ariaLabel:e.title,url:e.href,target:e.target,icon:""+("_self"===e.target?"link":"external-link-alt"),onClick:e.onClick})))},"./packages/grafana-ui/src/utils/fuzzy.ts":(e,t,a)=>{"use strict";a.d(t,{C:()=>n});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function n(e,t){let a=0,n=e.indexOf(t);t=t.replace(/\s/g,"");const r=[];if(-1!==n)return{distance:0,found:!0,ranges:[{start:n,end:n+t.length-1}]};for(const i of t){const t=e.indexOf(i,n);if(-1===t)return{distance:1/0,ranges:[],found:!1};if(-1!==n&&(a+=t-n),n=t+1,0===r.length)r.push({start:t,end:t});else{const e=(0,s.last)(r);t===e.end+1?e.end++:r.push({start:t,end:t})}}return{distance:a,ranges:r,found:!0}}},"./packages/grafana-ui/src/utils/index.ts":(e,t,a)=>{"use strict";a.d(t,{ns:()=>c,Jx:()=>o,Qi:()=>s,JU:()=>b,_V:()=>d,zG:()=>V,te:()=>l,f7:()=>u,iV:()=>p,Ot:()=>U,Yi:()=>j.Yi,nu:()=>D.Z,_J:()=>$._J,xq:()=>z,MX:()=>M.MX,O9:()=>h,hu:()=>E.h,C6:()=>B.C,AE:()=>M.AE,iu:()=>P,np:()=>I,vm:()=>O,Bx:()=>T,Gc:()=>f,z3:()=>y,Rc:()=>C.R,xl:()=>j.xl,l1:()=>j.l1,X1:()=>M.X1,FE:()=>w,Wm:()=>v,NW:()=>A,Gu:()=>x});var s={};a.r(s),a.d(s,{getNextCharacter:()=>R,getPreviousCousin:()=>L});var n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),i=a.n(r);const o="rgba(0, 211, 255, 1)",l="rgba(11, 237, 50, 1)",c="rgba(237, 46, 24, 1)",d="rgba(150, 150, 150, 1)",u="rgba(247, 149, 32, 1)",p=.09,h=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function m(e){return i()(e).toHsl()}function g(e){return i()(e).toHexString()}function f(e){return i()(e).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let b,v=function(e){const t=(0,n.map)(e,m),a=(0,n.sortBy)(t,["h"]),s=(0,n.chunk)(a,4),r=(0,n.map)(s,(e=>(0,n.sortBy)(e,"l"))),i=(0,n.flattenDeep)((0,n.zip)(...r));return(0,n.map)(i,g)}(h);!function(e){e.onBlur="onBlur",e.onFocus="onFocus",e.onChange="onChange"}(b||(b={}));const x=(e,t)=>{const a=t.reduce(((t,a)=>a.rule(e)?t:t.concat(a.errorMessage)),[]);return a.length>0?a:null},y=(e,t)=>t&&t[e],w=(e,t)=>({rule:t=>!!t.match(e),errorMessage:t||"Value is not valid"});var j=a("./packages/grafana-ui/src/utils/slate.ts"),C=a("./packages/grafana-ui/src/utils/dataLinks.ts");const k=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],S=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=_(e.toLowerCase()),a=Math.abs(t%k.length);return O(a)}function O(e){return{color:k[e],borderColor:S[e]}}function _(e){let t=5381;for(let a=0;a<e.length;a++)t=(t<<5)+t+e.charCodeAt(a);return t}let N=null;function I(){if(null!==N)return N;if("undefined"!=typeof document){const e=document.createElement("div"),t={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(t).map((a=>{e.style[a]=t[a]})),document.body.appendChild(e),N=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}else N=0;return N||0}const P=(e,t)=>{var a;let s,n;return e.getLinks&&(s=e.getLinks({valueRowIndex:t.index})[0]),null!==(a=s)&&void 0!==a&&a.onClick&&(n=a=>{a.ctrlKey||a.metaKey||a.shiftKey||(a.preventDefault(),s.onClick(a,{field:e,rowIndex:t.index}))}),{link:s,onClick:n}};var M=a("./packages/grafana-ui/src/utils/measureText.ts"),F=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");function A(){const[e,t]=(0,F.useState)(0);return()=>t((e=>e+1))}var D=a("./packages/grafana-ui/src/utils/searchFunctions.ts"),$=a("../../opt/drone/yarncache/ansicolor-npm-1.1.95-545bc74c89-cf0341903e.zip/node_modules/ansicolor/build/ansicolor.mjs");function L(e,t){let a,s=e.parentElement.previousSibling;for(;s;){if(a=s.querySelector(t),a)return a;s=s.previousSibling}}function R(e){const t=(e||window).getSelection();if(!t||!t.anchorNode)return null;const a=t.getRangeAt(0),s=t.anchorNode.textContent,n=a.startOffset;return s.substr(n,1)}"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(e){const t=(this.document||this.ownerDocument).querySelectorAll(e);let a,s=this;do{for(a=t.length;--a>=0&&t.item(a)!==s;);s=s.parentElement}while(a<0&&s);return s});var E=a("./packages/grafana-ui/src/utils/logger.ts");function z(e,t,a){}let V;!function(e){e.id="id",e.title="title",e.subTitle="subTitle",e.mainStat="mainStat",e.secondaryStat="secondaryStat",e.source="source",e.target="target",e.detail="detail__",e.arc="arc__",e.color="color"}(V||(V={}));var B=a("./packages/grafana-ui/src/utils/fuzzy.ts"),U=a("./packages/grafana-ui/src/utils/reactUtils.ts")},"./packages/grafana-ui/src/utils/logger.ts":(e,t,a)=>{"use strict";a.d(t,{h:()=>n});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");(0,s.throttle)((function(){console.log(...arguments)}),500);const n=e=>{let t=!1;return{logger:function(e){},enable:()=>t=!0,disable:()=>t=!1,isEnabled:()=>t}}},"./packages/grafana-ui/src/utils/measureText.ts":(e,t,a)=>{"use strict";a.d(t,{AE:()=>i,X1:()=>o,MX:()=>l});const s=document.createElement("canvas").getContext("2d"),n=new Map;let r="";function i(){return s}function o(e,t){const a=`${t}px 'Roboto'`,i=e+a,o=n.get(i);if(o)return o;r!==a&&(s.font=r=a);const l=s.measureText(e);return 500===n.size&&n.clear(),n.set(i,l),l}function l(e,t,a,s,n){const r=t/(o(e,14).width+2)*14,i=a/s,l=Math.min(i,r);return Math.min(l,null!=n?n:l)}},"./packages/grafana-ui/src/utils/reactUtils.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{getChildId:()=>n,renderOrCallToRender:()=>r});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");function n(e){let t;const a=s.Children.only(e);return"id"in(null==a?void 0:a.props)?t=a.props.id:"inputId"in a.props&&(t=null==a?void 0:a.props.inputId),"string"==typeof t?t:void 0}function r(e,t){if(s.isValidElement(e)||"string"==typeof e||"number"==typeof e)return e;if("function"==typeof e)return e(t);throw new Error(`${e} is not a React element nor a function that returns React element`)}},"./packages/grafana-ui/src/utils/searchFunctions.ts":(e,t,a)=>{"use strict";a.d(t,{Z:()=>n,n:()=>r});var s=a("./packages/grafana-ui/src/utils/fuzzy.ts");let n;!function(e){e.Word="Word",e.Prefix="Prefix",e.Fuzzy="Fuzzy"}(n||(n={}));const r={[n.Word]:(e,t)=>e.filter((e=>(e.filterText||e.label).includes(t))),[n.Prefix]:(e,t)=>e.filter((e=>(e.filterText||e.label).startsWith(t))),[n.Fuzzy]:(e,t)=>(t=t.toLowerCase(),e.filter((e=>{const{distance:a,ranges:n,found:r}=(0,s.C)(e.label.toLowerCase(),t);return!!r&&(e.sortValue=a,e.highlightParts=n,!0)})))}},"./packages/grafana-ui/src/utils/slate.ts":(e,t,a)=>{"use strict";a.d(t,{Yi:()=>n,xl:()=>r,l1:()=>i});var s=a("./.yarn/__virtual__/slate-virtual-baec9b5e63/3/opt/drone/yarncache/slate-npm-0.47.8-44bfd82cc1-6d3541abe1.zip/node_modules/slate/lib/slate.es.js");const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},r=(e,t)=>{const a=e.split("\n").map((e=>s.gO.create({type:"code_line",nodes:[s.xv.create(e)]}))),n=s.gO.create({data:{syntax:t},type:"code_block",nodes:a});return s.BB.create({nodes:[n]})},i=(e,t)=>{const a=r(e,t);return s.B4.create({document:a})}},"./public/app/angular/AngularLocationWrapper.ts":(e,t,a)=>{"use strict";a.d(t,{O:()=>i});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("./packages/grafana-data/src/index.ts");const r={http:80,https:443,ftp:21};class i{constructor(){this.absUrl=this.wrapInDeprecationWarning(this.absUrl),this.hash=this.wrapInDeprecationWarning(this.hash),this.host=this.wrapInDeprecationWarning(this.host),this.path=this.wrapInDeprecationWarning(this.path),this.port=this.wrapInDeprecationWarning(this.port,"window.location"),this.protocol=this.wrapInDeprecationWarning(this.protocol,"window.location"),this.replace=this.wrapInDeprecationWarning(this.replace),this.search=this.wrapInDeprecationWarning(this.search),this.state=this.wrapInDeprecationWarning(this.state),this.url=this.wrapInDeprecationWarning(this.url)}wrapInDeprecationWarning(e,t){let a=this;return function(){return(0,n.deprecationWarning)("$location",e.name,t||"locationService"),e.apply(a,arguments)}}absUrl(){return`${window.location.origin}${this.url()}`}hash(e){if((0,s.navigationLogger)("AngularLocationWrapper",!1,"Angular compat layer: hash"),e)throw new Error("AngularLocationWrapper method not implemented.");return s.locationService.getLocation().hash.substr(1)}host(){return new URL(window.location.href).hostname}path(e){(0,s.navigationLogger)("AngularLocationWrapper",!1,"Angular compat layer: path");const t=s.locationService.getLocation();if(null!=e){let a=String(e);a=a.startsWith("/")?a:`/${a}`;const n=new URL(`${window.location.origin}${a}`);return s.locationService.push({pathname:n.pathname,search:n.search.length>0?n.search:t.search,hash:n.hash.length>0?n.hash:t.hash}),this}return null===e?(s.locationService.push("/"),this):t.pathname}port(){const e=new URL(window.location.href);return parseInt(e.port,10)||r[e.protocol]||null}protocol(){return new URL(window.location.href).protocol.slice(0,-1)}replace(){throw new Error("AngularLocationWrapper method not implemented.")}search(e,t){if((0,s.navigationLogger)("AngularLocationWrapper",!1,"Angular compat layer: search"),!e)return s.locationService.getSearchObject();if(e&&arguments.length>1)return s.locationService.partial({[e]:t}),this;if(e){let t;t="object"==typeof e?Object.assign({},e):(0,s.locationSearchToObject)(e);for(const e of Object.keys(t))null!==t[e]&&void 0!==t[e]||delete t[e];const a=n.urlUtil.renderUrl(s.locationService.getLocation().pathname,t);s.locationService.push(a)}return this}state(e){throw(0,s.navigationLogger)("AngularLocationWrapper",!1,"Angular compat layer: state"),new Error("AngularLocationWrapper method not implemented.")}url(e){if((0,s.navigationLogger)("AngularLocationWrapper",!1,"Angular compat layer: url"),void 0!==e)return e.startsWith("#")?s.locationService.push(Object.assign({},s.locationService.getLocation(),{hash:e})):e.startsWith("?")?s.locationService.push(Object.assign({},s.locationService.getLocation(),{search:e})):0===e.trim().length?s.locationService.push("/"):s.locationService.push(e),s.locationService;const t=s.locationService.getLocation();return`${t.pathname}${t.search}${t.hash}`}}},"./public/app/angular/components/query_part.ts":(e,t,a)=>{"use strict";a.d(t,{zU:()=>r,XN:()=>i,D:()=>o,C7:()=>l});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r{constructor(e){n(this,"type",void 0),n(this,"params",void 0),n(this,"defaultParams",void 0),n(this,"renderer",void 0),n(this,"category",void 0),n(this,"addStrategy",void 0),this.type=e.type,this.params=e.params,this.defaultParams=e.defaultParams,this.renderer=e.renderer,this.category=e.category,this.addStrategy=e.addStrategy}}class i{constructor(e,t){if(n(this,"part",void 0),n(this,"def",void 0),n(this,"params",void 0),n(this,"text",void 0),this.part=e,this.def=t,!this.def)throw{message:"Could not find query part "+e.type};e.params=e.params||(0,s.clone)(this.def.defaultParams),this.params=e.params,this.text="",this.updateText()}render(e){return this.def.renderer(this,e)}hasMultipleParamsInString(e,t){return-1!==e.indexOf(",")&&(this.def.params[t+1]&&this.def.params[t+1].optional)}updateParam(e,t){this.hasMultipleParamsInString(e,t)?(0,s.each)(e.split(","),((e,t)=>{this.updateParam(e.trim(),t)})):(""===e&&this.def.params[t].optional?this.params.splice(t,1):this.params[t]=e,this.part.params=this.params,this.updateText())}updateText(){if(0===this.params.length)return void(this.text=this.def.type+"()");let e=this.def.type+"(";e+=this.params.join(", "),e+=")",this.text=e}}function o(e,t){const a=e.def.type+"(",n=(0,s.map)(e.params,((t,a)=>{const s=e.def.params[a];return"time"===s.type&&"auto"===t&&(t="$__interval"),"single"===s.quote?"'"+t+"'":"double"===s.quote?'"'+t+'"':t}));return t&&n.unshift(t),a+n.join(", ")+")"}function l(e,t){return t+" "+e.params[0]}},"./public/app/angular/core_module.ts":(e,t,a)=>{"use strict";a.d(t,{rb:()=>i,hF:()=>r,ZP:()=>o});var s=a("../../opt/drone/yarncache/angular-npm-1.8.2-307000482b-35ea81a23b.zip/node_modules/angular/index.js"),n=a.n(s);const r=n().module("grafana.core",["ngRoute"]),i=[r,n().module("grafana.controllers",[]),n().module("grafana.directives",[]),n().module("grafana.factories",[]),n().module("grafana.services",[]),n().module("grafana.filters",[]),n().module("grafana.routes",[])],o=r},"./public/app/angular/panel/metrics_panel_ctrl.ts":(e,t,a)=>{"use strict";a.d(t,{k:()=>l});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./public/app/angular/panel/panel_ctrl.ts"),r=a("./public/app/features/dashboard/utils/panel.ts"),i=a("./packages/grafana-data/src/index.ts");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l extends n.q{constructor(e,t){super(e,t),o(this,"contextSrv",void 0),o(this,"datasourceSrv",void 0),o(this,"timeSrv",void 0),o(this,"templateSrv",void 0),o(this,"interval",void 0),o(this,"intervalMs",void 0),o(this,"resolution",void 0),o(this,"timeInfo",void 0),o(this,"skipDataOnInit",!1),o(this,"dataList",[]),o(this,"querySubscription",void 0),o(this,"useDataFrames",!1),o(this,"panelData",void 0),o(this,"panelDataObserver",{next:e=>{if(this.panelData=e,e.state===i.LoadingState.Error&&(this.loading=!1,this.processDataError(e.error)),e.state===i.LoadingState.Loading)return this.loading=!0,void this.angularDirtyCheck();if(e.request){const{timeInfo:t}=e.request;t&&(this.timeInfo=t)}if(e.timeRange&&(this.range=e.timeRange),this.useDataFrames)this.handleDataFrames(e.series);else{const t=e.series.map((e=>(0,i.toLegacyResponseData)(e)));this.handleQueryResult({data:t})}this.angularDirtyCheck()}}),this.contextSrv=t.get("contextSrv"),this.datasourceSrv=t.get("datasourceSrv"),this.timeSrv=t.get("timeSrv"),this.templateSrv=t.get("templateSrv"),this.panel.datasource=this.panel.datasource||null,this.events.on(i.PanelEvents.refresh,this.onMetricsPanelRefresh.bind(this)),this.events.on(i.PanelEvents.panelTeardown,this.onPanelTearDown.bind(this)),this.events.on(i.PanelEvents.componentDidMount,this.onMetricsPanelMounted.bind(this))}onMetricsPanelMounted(){const e=this.panel.getQueryRunner();this.querySubscription=e.getData({withTransforms:!0,withFieldConfig:!0}).subscribe(this.panelDataObserver)}onPanelTearDown(){this.querySubscription&&(this.querySubscription.unsubscribe(),this.querySubscription=null)}onMetricsPanelRefresh(){if(!this.otherPanelInFullscreenMode()){if(this.panel.snapshotData){this.updateTimeRange();let e=this.panel.snapshotData;return(0,s.isArray)(e)||(e=e.data),this.panelData={state:i.LoadingState.Done,series:e,timeRange:this.range},this.$timeout((()=>{this.events.emit(i.PanelEvents.dataSnapshotLoad,e)}))}return delete this.error,this.loading=!0,this.datasourceSrv.get(this.panel.datasource,this.panel.scopedVars).then(this.issueQueries.bind(this)).catch((e=>{this.processDataError(e)}))}}processDataError(e){e.cancelled?console.log("Panel request cancelled",e):(this.error=e.message||"Request Error",e.data&&(e.data.message?this.error=e.data.message:e.data.error&&(this.error=e.data.error)),this.angularDirtyCheck())}angularDirtyCheck(){this.$scope.$root.$$phase||this.$scope.$digest()}updateTimeRange(e){this.datasource=e||this.datasource,this.range=this.timeSrv.timeRange();const t=(0,r.W1)(this.panel,this.range);this.timeInfo=t.timeInfo,this.range=t.timeRange}issueQueries(e){this.updateTimeRange(e),this.datasource=e;const t=this.panel;return t.getQueryRunner().run({datasource:t.datasource,queries:t.targets,panelId:t.id,dashboardId:this.dashboard.id,timezone:this.dashboard.getTimezone(),timeInfo:this.timeInfo,timeRange:this.range,maxDataPoints:t.maxDataPoints||this.width,minInterval:t.interval,scopedVars:t.scopedVars,cacheTimeout:t.cacheTimeout,transformations:t.transformations})}handleDataFrames(e){this.loading=!1,this.dashboard&&this.dashboard.snapshot&&(this.panel.snapshotData=e.map((e=>(0,i.toDataFrameDTO)(e))));try{this.events.emit(i.PanelEvents.dataFramesReceived,e)}catch(e){this.processDataError(e)}}handleQueryResult(e){this.loading=!1,this.dashboard.snapshot&&(this.panel.snapshotData=e.data),e&&e.data||(console.log("Data source query result invalid, missing data field:",e),e={data:[]});try{this.events.emit(i.PanelEvents.dataReceived,e.data)}catch(e){this.processDataError(e)}}}},"./public/app/angular/panel/panel_ctrl.ts":(e,t,a)=>{"use strict";a.d(t,{q:()=>c});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./public/app/core/config.ts"),r=a("./public/app/core/core.ts"),i=a("./packages/grafana-data/src/index.ts"),o=a("./public/app/angular/AngularLocationWrapper.ts");function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c{constructor(e,t){var a,s;l(this,"panel",void 0),l(this,"error",void 0),l(this,"pluginName",""),l(this,"pluginId",""),l(this,"editorTabs",void 0),l(this,"$scope",void 0),l(this,"$injector",void 0),l(this,"$timeout",void 0),l(this,"editModeInitiated",!1),l(this,"containerHeight",void 0),l(this,"events",void 0),l(this,"loading",!1),l(this,"timing",void 0),l(this,"$location",void 0),l(this,"onPluginTypeChange",(e=>{})),this.panel=null!==(a=this.panel)&&void 0!==a?a:e.$parent.panel,this.dashboard=null!==(s=this.dashboard)&&void 0!==s?s:e.$parent.dashboard,this.$injector=t,this.$scope=e,this.$timeout=t.get("$timeout"),this.editorTabs=[],this.$location=new o.O,this.events=new i.EventBusSrv,this.timing={};const r=n.ZP.panels[this.panel.type];r&&(this.pluginId=r.id,this.pluginName=r.name),e.$on(i.PanelEvents.componentDidMount.name,(()=>this.panelDidMount()))}panelDidMount(){this.events.emit(i.PanelEvents.componentDidMount),this.events.emit(i.PanelEvents.initialized),this.dashboard.panelInitialized(this.panel)}renderingCompleted(){r.rv.renderingCompleted()}refresh(){this.panel.refresh()}publishAppEvent(e,t){this.$scope.$root.appEvent(e,t)}initEditMode(){this.editModeInitiated||(this.editModeInitiated=!0,this.events.emit(i.PanelEvents.editModeInitialized))}addEditorTab(e,t,a,n){const r={title:e,directiveFn:t,icon:n};(0,s.isString)(t)&&(r.directiveFn=()=>({templateUrl:t})),a?this.editorTabs.splice(a,0,r):this.editorTabs.push(r)}getExtendedMenu(){const e=[];return this.events.emit(i.PanelEvents.initPanelActions,e),e}async getAdditionalMenuItems(){return[]}otherPanelInFullscreenMode(){return this.dashboard.otherPanelInFullscreen(this.panel)}render(e){this.events.emit(i.PanelEvents.render,e)}}},"./public/app/angular/panel/query_ctrl.ts":(e,t,a)=>{"use strict";a.d(t,{G:()=>r});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r{constructor(e,t){var a,r,i,o,l;n(this,"target",void 0),n(this,"datasource",void 0),n(this,"panelCtrl",void 0),n(this,"panel",void 0),n(this,"hasRawMode",void 0),n(this,"error",void 0),n(this,"isLastQuery",void 0),this.$scope=e,this.$injector=t,this.panelCtrl=null!==(a=this.panelCtrl)&&void 0!==a?a:e.ctrl.panelCtrl,this.target=null!==(r=this.target)&&void 0!==r?r:e.ctrl.target,this.datasource=null!==(i=this.datasource)&&void 0!==i?i:e.ctrl.datasource,this.panel=null!==(o=null===(l=this.panelCtrl)||void 0===l?void 0:l.panel)&&void 0!==o?o:e.ctrl.panelCtrl.panel,this.isLastQuery=(0,s.indexOf)(this.panel.targets,this.target)===this.panel.targets.length-1}refresh(){this.panelCtrl.refresh()}}},"./public/app/angular/partials.ts":(e,t,a)=>{let s=a("./public/app sync recursive \\.html$");s.keys().forEach((e=>{s(e)}))},"./public/app/angular/promiseToDigest.ts":(e,t,a)=>{"use strict";a.d(t,{E:()=>s});const s=e=>t=>t.finally(e.$evalAsync)},"./public/app/core/actions/cleanUp.ts":(e,t,a)=>{"use strict";a.d(t,{e:()=>s});const s=(0,a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").PH)("core/cleanUpState")},"./public/app/core/actions/index.ts":(e,t,a)=>{"use strict";a.d(t,{RL:()=>n.RL,H7:()=>n.H7,$l:()=>s.$l,uY:()=>s.uY});var s=a("./public/app/core/reducers/appNotification.ts"),n=a("./public/app/core/reducers/navModel.ts")},"./public/app/core/app_events.ts":(e,t,a)=>{"use strict";a.d(t,{h:()=>s,Z:()=>n});const s=new(a("./packages/grafana-data/src/index.ts").EventBusSrv),n=s},"./public/app/core/components/Animations/SlideDown.tsx":(e,t,a)=>{"use strict";a.d(t,{s:()=>o});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/react-transition-group-virtual-8df824fae8/3/opt/drone/yarncache/react-transition-group-npm-4.4.2-5052c30656-b67bf5b3e8.zip/node_modules/react-transition-group/esm/Transition.js"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const r="200px",i={transition:"max-height 200ms ease-in-out",overflow:"hidden"},o=e=>{let{children:t,in:a,maxHeight:o=r,style:l=i}=e;const c={exited:{maxHeight:0},entering:{maxHeight:o},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return(0,n.jsx)(s.ZP,{in:a,timeout:200,children:e=>(0,n.jsx)("div",{style:Object.assign({},l,c[e]),children:t})})}},"./public/app/core/components/Branding/Branding.tsx":(e,t,a)=>{"use strict";a.d(t,{c:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./packages/grafana-data/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class l{}o(l,"LoginLogo",(e=>{let{className:t}=e;return(0,i.jsx)("img",{className:t,src:"public/img/grafana_icon.svg",alt:"Grafana"})})),o(l,"LoginBackground",(e=>{let{className:t,children:a}=e;const r=(0,n.useTheme2)(),o=s.css`
    &:before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${r.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${n.styleMixins.mediaUp(r.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return(0,i.jsx)("div",{className:(0,s.cx)(o,t),children:a})})),o(l,"MenuLogo",(e=>{let{className:t}=e;return(0,i.jsx)("img",{className:t,src:"public/img/grafana_icon.svg",alt:"Grafana"})})),o(l,"LoginBoxBackground",(()=>{const e=(0,n.useTheme2)();return s.css`
    background: ${r.colorManipulator.alpha(e.colors.background.primary,.7)};
    background-size: cover;
  `})),o(l,"AppTitle","Grafana"),o(l,"LoginTitle","Welcome to Grafana"),o(l,"GetLoginSubTitle",(()=>null))},"./public/app/core/components/CardButton.tsx":(e,t,a)=>{"use strict";a.d(t,{x:()=>l});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=["icon","children","onClick"];const l=s.forwardRef(((e,t)=>{let{icon:a,children:s,onClick:n}=e,l=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,o);const d=(0,r.useStyles2)(c);return(0,i.jsxs)("button",Object.assign({},l,{className:d.action,onClick:n,children:[(0,i.jsx)(r.Icon,{name:a,size:"xl"}),s]}))}));l.displayName="CardButton";const c=e=>({action:n.css`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${e.colors.background.secondary};
      border-radius: ${e.shape.borderRadius(1)};
      color: ${e.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.secondary)};
      }
    `})},"./public/app/core/components/CloseButton/CloseButton.tsx":(e,t,a)=>{"use strict";a.d(t,{P:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i=e=>{let{onClick:t,"aria-label":a,style:s}=e;const i=(0,n.useStyles2)(o);return(0,r.jsx)(n.IconButton,{"aria-label":null!=a?a:"Close",className:i,name:"times",onClick:t,style:s})},o=e=>s.css`
    position: absolute;
    right: ${e.spacing(.5)};
    top: ${e.spacing(1)};
  `},"./public/app/core/components/EmptyListCTA/EmptyListCTA.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var s,n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-e2e-selectors/src/index.ts"),i=a("./packages/grafana-ui/src/index.ts"),o=(a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js"));const l=n.css`
  text-align: center;
`,c=n.css`
  max-width: 700px;
  margin: 0 auto;
`,d=e=>{var t,a,d;let{title:u,buttonIcon:p,buttonLink:h,buttonTitle:m,buttonDisabled:g,onClick:f,proTip:b,proTipLink:v,proTipLinkTitle:x,proTipTarget:y,infoBox:w,infoBoxTitle:j}=e;const C=()=>(0,o.jsxs)(o.Fragment,{children:[b?(0,o.jsxs)("span",{children:[s||(s=(0,o.jsx)(i.Icon,{name:"rocket"})),(0,o.jsxs)(o.Fragment,{children:[" ProTip: ",b," "]}),v&&(t||(t=(0,o.jsx)("a",{href:v,target:y,className:"text-link",children:x})))]},"proTipFooter"):"",w?(0,o.jsxs)("div",{className:`grafana-info-box ${c}`,children:[j&&(a||(a=(0,o.jsx)("h5",{children:j}))),d||(d=(0,o.jsx)("div",{dangerouslySetInnerHTML:w}))]},"infoBoxHtml"):""]}),k=C()?"":n.css`
        margin-bottom: 20px;
      `,S=h?i.LinkButton:i.Button,T=(0,o.jsx)(S,{size:"lg",onClick:f,href:h,icon:p,className:k,"data-testid":r.wl.components.CallToActionCard.buttonV2(m),disabled:g,children:m});return(0,o.jsx)(i.CallToActionCard,{className:l,message:u,footer:C(),callToActionElement:T})}},"./public/app/core/components/Footer/Footer.tsx":(e,t,a)=>{"use strict";a.d(t,{dP:()=>o,$_:()=>c});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./packages/grafana-ui/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");let o=()=>[{text:"Documentation",icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer",target:"_blank"},{text:"Support",icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer",target:"_blank"},{text:"Community",icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer",target:"_blank"}],l=()=>{const{buildInfo:e,licenseInfo:t}=n.config,a=[],s=t.stateInfo?` (${t.stateInfo})`:"";return a.push({text:`${e.edition}${s}`,url:t.licenseUrl}),e.hideVersion||(a.push({text:`v${e.version} (${e.commit})`}),e.hasUpdate&&a.push({id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer",target:"_blank"})),a};const c=s.memo((()=>{const e=o().concat(l());return(0,i.jsx)("footer",{className:"footer",children:(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("ul",{children:e.map((e=>(0,i.jsx)("li",{children:(0,i.jsxs)("a",{href:e.url,target:e.target,rel:"noopener",id:e.id,children:[e.icon&&(0,i.jsx)(r.Icon,{name:e.icon})," ",e.text]})},e.text)))})})})}));c.displayName="Footer"},"./public/app/core/components/ForgottenPassword/ChangePassword.tsx":(e,t,a)=>{"use strict";a.d(t,{G:()=>c});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s,n=a("./packages/grafana-ui/src/index.ts"),r=a("./packages/grafana-e2e-selectors/src/index.ts"),i=a("./public/app/core/components/Login/LoginForm.tsx"),o=a("./public/app/core/components/PasswordField/PasswordField.tsx"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=e=>{let{onSubmit:t,onSkip:a}=e;return(0,l.jsx)(n.Form,{onSubmit:e=>{t(e.newPassword)},children:e=>{var t,c;let{errors:d,register:u,getValues:p}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Field,{label:"New password",invalid:!!d.newPassword,error:null==d||null===(t=d.newPassword)||void 0===t?void 0:t.message,children:(0,l.jsx)(o.Z,Object.assign({id:"new-password",autoFocus:!0,autoComplete:"new-password"},u("newPassword",{required:"New Password is required"})))}),(0,l.jsx)(n.Field,{label:"Confirm new password",invalid:!!d.confirmNew,error:null==d||null===(c=d.confirmNew)||void 0===c?void 0:c.message,children:(0,l.jsx)(o.Z,Object.assign({id:"confirm-new-password",autoComplete:"new-password"},u("confirmNew",{required:"Confirmed Password is required",validate:e=>e===p().newPassword||"Passwords must match!"})))}),(0,l.jsxs)(n.VerticalGroup,{children:[s||(s=(0,l.jsx)(n.Button,{type:"submit",className:i.F,children:"Submit"})),a&&(0,l.jsx)(n.Tooltip,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom",children:(0,l.jsx)(n.Button,{fill:"text",onClick:a,type:"button","aria-label":r.wl.pages.Login.skip,children:"Skip"})})]})]})}})}},"./public/app/core/components/LocalStorageValueProvider/index.tsx":(e,t,a)=>{"use strict";a.d(t,{G:()=>o});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./public/app/core/store.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o extends s.PureComponent{constructor(e){super(e),i(this,"onSaveToStore",(e=>{const{storageKey:t}=this.props;try{n.Z.setObject(t,e)}catch(e){console.error(e)}this.setState({value:e})})),i(this,"onDeleteFromStore",(()=>{const{storageKey:e,defaultValue:t}=this.props;try{n.Z.delete(e)}catch(e){console.log(e)}this.setState({value:t})}));const{storageKey:t,defaultValue:a}=e;this.state={value:n.Z.getObject(t,a)}}render(){const{children:e}=this.props,{value:t}=this.state;return(0,r.jsx)(r.Fragment,{children:e(t,this.onSaveToStore,this.onDeleteFromStore)})}}},"./public/app/core/components/Login/LoginCtrl.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./public/app/core/config.ts"),r=a("./packages/grafana-runtime/src/index.ts"),i=a("./public/app/core/app_events.ts"),o=a("./packages/grafana-data/src/index.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends s.PureComponent{constructor(e){super(e),c(this,"result",{}),c(this,"changePassword",(e=>{const t={newPassword:e,confirmNew:e,oldPassword:"admin"};this.props.resetCode||(0,r.getBackendSrv)().put("/api/user/password",t).then((()=>{this.toGrafana()})).catch((e=>console.error(e)));const a={code:this.props.resetCode,newPassword:e,confirmPassword:e};(0,r.getBackendSrv)().post("/api/user/password/reset",a).then((()=>{this.toGrafana()}))})),c(this,"login",(e=>{this.setState({isLoggingIn:!0}),(0,r.getBackendSrv)().post("/login",e).then((t=>{this.result=t,"admin"!==e.password||n.ZP.ldapEnabled||n.ZP.authProxyEnabled?this.toGrafana():this.changeView()})).catch((()=>{this.setState({isLoggingIn:!1})}))})),c(this,"changeView",(()=>{this.setState({isChangingPassword:!0})})),c(this,"toGrafana",(()=>{this.result.redirectUrl?""===n.ZP.appSubUrl||this.result.redirectUrl.startsWith(n.ZP.appSubUrl)?window.location.assign(this.result.redirectUrl):window.location.assign(n.ZP.appSubUrl+this.result.redirectUrl):window.location.assign(n.ZP.appSubUrl+"/")})),this.state={isLoggingIn:!1,isChangingPassword:!1},n.ZP.loginError&&i.Z.emit(o.AppEvents.alertWarning,["Login Failed",n.ZP.loginError])}render(){const{children:e}=this.props,{isLoggingIn:t,isChangingPassword:a}=this.state,{login:s,toGrafana:r,changePassword:i}=this,{loginHint:o,passwordHint:c,disableLoginForm:d,ldapEnabled:u,authProxyEnabled:p,disableUserSignUp:h}=n.ZP;return(0,l.jsx)(l.Fragment,{children:e({isOauthEnabled:!!n.ZP.oauth&&Object.keys(n.ZP.oauth).length>0,loginHint:o,passwordHint:c,disableLoginForm:d,ldapEnabled:u,authProxyEnabled:p,disableUserSignUp:h,login:s,isLoggingIn:t,changePassword:i,skipPasswordChange:r,isChangingPassword:a})})}}const u=d},"./public/app/core/components/Login/LoginForm.tsx":(e,t,a)=>{"use strict";a.d(t,{F:()=>c,U:()=>d});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-e2e-selectors/src/index.ts"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./public/app/core/components/PasswordField/PasswordField.tsx"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=r.css`
  width: 100%;
  padding-bottom: 16px;
`,c=r.css`
  justify-content: center;
  width: 100%;
`,d=e=>{let{children:t,onSubmit:a,isLoggingIn:r,passwordHint:d,loginHint:u}=e;return(0,o.jsx)("div",{className:l,children:(0,o.jsx)(n.Form,{onSubmit:a,validateOn:"onChange",children:e=>{var a,l;let{register:p,errors:h}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.Field,{label:"Email or username",invalid:!!h.user,error:null===(a=h.user)||void 0===a?void 0:a.message,children:(0,o.jsx)(n.Input,Object.assign({},p("user",{required:"Email or username is required"}),{autoFocus:!0,autoCapitalize:"none",placeholder:u,"aria-label":s.wl.pages.Login.username}))}),(0,o.jsx)(n.Field,{label:"Password",invalid:!!h.password,error:null===(l=h.password)||void 0===l?void 0:l.message,children:(0,o.jsx)(i.Z,Object.assign({id:"current-password",autoComplete:"current-password",passwordHint:d},p("password",{required:"Password is required"})))}),(0,o.jsx)(n.Button,{"aria-label":s.wl.pages.Login.submit,className:c,disabled:r,children:r?"Logging in...":"Log in"}),t]})}})})}},"./public/app/core/components/Login/LoginLayout.tsx":(e,t,a)=>{"use strict";a.d(t,{$s:()=>d,dd:()=>u});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./packages/grafana-ui/src/index.ts"),o=a("./public/app/core/components/Branding/Branding.tsx"),l=a("./public/app/core/components/Footer/Footer.tsx"),c=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const d=e=>{let{children:t,enterAnimation:a=!0}=e;const s=(0,i.useStyles2)(h);return(0,c.jsx)("div",{className:(0,r.cx)(s.loginInnerBox,a&&s.enterAnimation),children:t})},u=e=>{let{children:t}=e;const a=(0,i.useStyles2)(h),d=o.c.GetLoginSubTitle(),[u,p]=(0,n.useState)(!1);return(0,n.useEffect)((()=>p(!0)),[]),(0,c.jsxs)(o.c.LoginBackground,{className:(0,r.cx)(a.container,u&&a.loginAnim),children:[(0,c.jsxs)("div",{className:(0,r.cx)(a.loginContent,o.c.LoginBoxBackground(),"login-content-box"),children:[(0,c.jsxs)("div",{className:a.loginLogoWrapper,children:[(0,c.jsx)(o.c.LoginLogo,{className:a.loginLogo}),(0,c.jsxs)("div",{className:a.titleWrapper,children:[(0,c.jsx)("h1",{className:a.mainTitle,children:o.c.LoginTitle}),d&&(0,c.jsx)("h3",{className:a.subTitle,children:o.c.GetLoginSubTitle()})]})]}),(0,c.jsx)("div",{className:a.loginOuterBox,children:t})]}),s||(s=(0,c.jsx)(l.$_,{}))]})},p=r.keyframes`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,h=e=>{const t=e.isDark?"#000":e.colors.background.canvas;return{container:(0,r.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:t,minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:r.css`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:r.css`
      justify-content: center;
      width: 100%;
    `,loginLogo:r.css`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${i.styleMixins.mediaUp(e.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:r.css`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${e.spacing(3)};
    `,titleWrapper:r.css`
      text-align: center;
    `,mainTitle:r.css`
      font-size: 22px;

      @media ${i.styleMixins.mediaUp(e.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:r.css`
      font-size: ${e.typography.size.md};
      color: ${e.colors.text.secondary};
    `,loginContent:r.css`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${e.shape.borderRadius(4)};
      padding: ${e.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${i.styleMixins.mediaUp(e.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:r.css`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:r.css`
      padding: ${e.spacing(2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:r.css`
      animation: ${p} ease-out 0.2s;
    `}}},"./public/app/core/components/Page/Page.tsx":(e,t,a)=>{"use strict";a.d(t,{T:()=>g,Z:()=>f});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./public/app/core/selectors/navModel.ts"),i=a("./public/app/core/components/PageHeader/PageHeader.tsx"),o=a("./public/app/core/components/Footer/Footer.tsx"),l=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),c=a("./public/app/core/components/PageLoader/PageLoader.tsx"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");var u,p=a("./packages/grafana-ui/src/index.ts"),h=a("./public/app/core/components/Branding/Branding.tsx");const m=["navModel","children","className"];const g=e=>{let{navModel:t,children:a,className:s}=e,c=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,m);const g=(0,p.useStyles2)(b);return(0,n.useEffect)((()=>{if(t){const e=(0,r.o)(t);document.title=e?`${e} - ${h.c.AppTitle}`:h.c.AppTitle}else document.title=h.c.AppTitle}),[t]),(0,d.jsx)("div",Object.assign({},c,{className:(0,l.cx)(g.wrapper,s),children:(0,d.jsx)(p.CustomScrollbar,{autoHeightMin:"100%",children:(0,d.jsxs)("div",{className:"page-scrollbar-content",children:[t&&(0,d.jsx)(i.Z,{model:t}),a,u||(u=(0,d.jsx)(o.$_,{}))]})})}))};g.Header=i.Z,g.Contents=e=>{let{isLoading:t,children:a,className:n}=e;return(0,d.jsx)("div",{className:(0,l.cx)("page-container","page-body",n),children:t?s||(s=(0,d.jsx)(c.Z,{})):a})};const f=g,b=e=>({wrapper:l.css`
    width: 100%;
    flex-grow: 1;
    min-height: 0;
  `})},"./public/app/core/components/PageHeader/PageHeader.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/features/dashboard/dashgrid/PanelHeader/PanelHeaderMenuItem.tsx"),i=a("./public/app/core/components/Upgrade/ProBadge.tsx"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=e=>{let{children:t,customCss:a}=e;if(!t||0===t.length)return null;const s=t.find((e=>!0===e.active));return(0,o.jsx)("div",{className:`gf-form-select-wrapper width-20 ${a}`,children:(0,o.jsxs)("div",{className:"dropdown",children:[(0,o.jsx)("div",{className:"gf-form-input dropdown-toggle","data-toggle":"dropdown",children:null==s?void 0:s.text}),(0,o.jsx)("ul",{className:"dropdown-menu dropdown-menu--menu",children:t.map((e=>e.hideFromTabs?null:(0,o.jsx)(r.u,{iconClassName:e.icon,text:e.text,href:e.url},e.url)))})]})})},c=e=>{let{children:t}=e;return t&&0!==t.length?(0,o.jsxs)("nav",{children:[(0,o.jsx)(l,{customCss:"page-header__select-nav",children:t}),(0,o.jsx)(n.TabsBar,{className:"page-header__tabs",hideBorder:!0,children:t.map(((e,t)=>!e.hideFromTabs&&(0,o.jsx)(n.Tab,{label:e.text,active:e.active,icon:e.icon,href:e.url,suffix:e.tabSuffix},`${e.url}-${t}`)))})]}):null};function d(e){var t;const a="grafana"===e.icon?12:14;return(0,o.jsxs)("div",{className:"page-header__inner",children:[(0,o.jsxs)("span",{className:"page-header__logo",children:[e.icon&&(0,o.jsx)(n.Icon,{name:e.icon,size:"xxxl",style:{marginTop:a}}),e.img&&(0,o.jsx)("img",{className:"page-header__img",src:e.img,alt:`logo of ${e.text}`})]}),(0,o.jsxs)("div",{className:"page-header__info-block",children:[u(e.text,null!==(t=e.breadcrumbs)&&void 0!==t?t:[],e.highlightText),e.subTitle&&(0,o.jsx)("div",{className:"page-header__sub-title",children:e.subTitle})]})]})}function u(e,t,a){if(!(e||t&&0!==t.length))return null;if(!t||0===t.length)return(0,o.jsxs)("h1",{className:"page-header__title",children:[e,a&&(0,o.jsx)(i.Z,{text:a,className:s.css`
              vertical-align: middle;
            `})]});const n=[];for(const e of t)e.url?n.push((0,o.jsx)("a",{className:"page-header__link",href:e.url,children:e.title},n.length)):n.push((0,o.jsxs)("span",{children:[" / ",e.title]},n.length));return n.push((0,o.jsxs)("span",{children:[" / ",e]},t.length+1)),(0,o.jsx)("h1",{className:"page-header__title",children:n})}const p=e=>({headerCanvas:s.css`
    background: ${e.colors.background.canvas};
  `}),h=e=>{let{model:t}=e;const a=(0,n.useStyles2)(p);if(!t)return null;const s=t.main,r=s.children;return(0,o.jsx)("div",{className:a.headerCanvas,children:(0,o.jsx)("div",{className:"page-container",children:(0,o.jsxs)("div",{className:"page-header",children:[d(s),r&&r.length&&(0,o.jsx)(c,{children:r})]})})})}},"./public/app/core/components/PageLoader/PageLoader.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/index.ts"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const r=e=>{let{pageName:t=""}=e;const a=`Loading ${t}...`;return(0,n.jsx)("div",{className:"page-loader-wrapper",children:(0,n.jsx)(s.LoadingPlaceholder,{text:a})})}},"./public/app/core/components/PasswordField/PasswordField.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-e2e-selectors/src/index.ts"),r=a("./packages/grafana-ui/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=["autoComplete","autoFocus","id","passwordHint"];const l=s.forwardRef(((e,t)=>{let{autoComplete:a,autoFocus:l,id:c,passwordHint:d}=e,u=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,o);const[p,h]=(0,s.useState)(!1);return(0,i.jsx)(r.Input,Object.assign({id:c,autoFocus:l,autoComplete:a},u,{type:p?"text":"password",placeholder:d,"aria-label":n.wl.pages.Login.password,ref:t,suffix:(0,i.jsx)(r.IconButton,{name:p?"eye-slash":"eye",type:"button","aria-controls":c,role:"switch","aria-checked":p,"aria-label":"Show password",onClick:()=>{h(!p)}})}))}));l.displayName="PasswordField"},"./public/app/core/components/PermissionList/AddPermission.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./public/app/core/config.ts"),o=a("./public/app/core/components/Select/UserPicker.tsx"),l=a("./public/app/core/components/Select/TeamPicker.tsx"),c=a("./packages/grafana-ui/src/index.ts"),d=a("./public/app/types/acl.ts"),u=a("./public/app/core/components/CloseButton/CloseButton.tsx"),p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends n.Component{constructor(e){super(e),h(this,"onTypeChanged",(e=>{const t=e.value;switch(t){case d.pC.User:case d.pC.Team:this.setState({type:t,userId:0,teamId:0,role:void 0});break;case d.pC.Editor:this.setState({type:t,userId:0,teamId:0,role:d.B5.Editor});break;case d.pC.Viewer:this.setState({type:t,userId:0,teamId:0,role:d.B5.Viewer})}})),h(this,"onUserSelected",(e=>{this.setState({userId:e&&!Array.isArray(e)?e.id:0})})),h(this,"onTeamSelected",(e=>{var t;this.setState({teamId:null!==(t=e.value)&&void 0!==t&&t.id&&!Array.isArray(e.value)?e.value.id:0})})),h(this,"onPermissionChanged",(e=>{this.setState({permission:e.value})})),h(this,"onSubmit",(async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())})),this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:d.pC.Team,permission:d.V5.View}}isValid(){switch(this.state.type){case d.pC.Team:return this.state.teamId>0;case d.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:e}=this.props,t=this.state,a="min-width-20",n=this.isValid(),r=g(i.ZP.theme);return(0,p.jsxs)("div",{className:"cta-form",children:[(0,p.jsx)(u.P,{onClick:e}),s||(s=(0,p.jsx)("h5",{children:"Add Permission For"})),(0,p.jsx)(c.Form,{maxWidth:"none",onSubmit:this.onSubmit,children:()=>(0,p.jsxs)(c.HorizontalGroup,{children:[(0,p.jsx)(c.Select,{"aria-label":"Role to add new permission to",isSearchable:!1,value:this.state.type,options:d.BL,onChange:this.onTypeChanged,menuShouldPortal:!0}),t.type===d.pC.User?(0,p.jsx)(o.f,{onSelected:this.onUserSelected,className:a}):null,t.type===d.pC.Team?(0,p.jsx)(l.c,{onSelected:this.onTeamSelected,className:a}):null,(0,p.jsx)("span",{className:r.label,children:"Can"}),(0,p.jsx)(c.Select,{"aria-label":"Permission level",isSearchable:!1,value:this.state.permission,options:d.vT,onChange:this.onPermissionChanged,width:25,menuShouldPortal:!0}),(0,p.jsx)(c.Button,{"data-save-permission":!0,type:"submit",disabled:!n,children:"Save"})]})})]})}}h(m,"defaultProps",{showPermissionLevels:!0});const g=(0,c.stylesFactory)((e=>({label:r.css`
    color: ${e.colors.textBlue};
    font-weight: bold;
  `}))),f=m},"./public/app/core/components/PermissionList/PermissionList.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>T});var s,n,r,i,o,l,c,d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),u=a("./packages/grafana-ui/src/index.ts"),p=a("./public/app/types/acl.ts"),h=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e){let{item:t}=e;return t.userAvatarUrl?(0,h.jsx)("img",{className:"filter-table__avatar",src:t.userAvatarUrl}):t.teamAvatarUrl?(0,h.jsx)("img",{className:"filter-table__avatar",src:t.teamAvatarUrl}):"Editor"===t.role?s||(s=(0,h.jsx)(u.Icon,{size:"lg",name:"edit"})):n||(n=(0,h.jsx)(u.Icon,{size:"lg",name:"eye"}))}function f(e){let{item:t}=e;return t.userId?r||(r=(0,h.jsx)("span",{className:"filter-table__weak-italic",children:"(User)"})):t.teamId?i||(i=(0,h.jsx)("span",{className:"filter-table__weak-italic",children:"(Team)"})):o||(o=(0,h.jsx)("span",{className:"filter-table__weak-italic",children:"(Role)"}))}class b extends d.PureComponent{constructor(){super(...arguments),m(this,"onPermissionChanged",(e=>{this.props.onPermissionChanged(this.props.item,e.value)})),m(this,"onRemoveItem",(()=>{this.props.onRemoveItem(this.props.item)}))}render(){const{item:e,folderInfo:t}=this.props,a=-1===e.dashboardId&&!e.inherited,s=p.vT.find((t=>t.value===e.permission));return(0,h.jsxs)("tr",{className:(n=Boolean(null==e?void 0:e.inherited),n?"gf-form-disabled":""),children:[(0,h.jsx)("td",{style:{width:"1%"},children:(0,h.jsx)(g,{item:e})}),(0,h.jsxs)("td",{style:{width:"90%"},children:[e.name," ",(0,h.jsx)(f,{item:e})]}),(0,h.jsxs)("td",{children:[e.inherited&&t&&(0,h.jsxs)("em",{className:"muted no-wrap",children:["Inherited from folder"," ",t.canViewFolderPermissions?(0,h.jsx)("a",{className:"text-link",href:`${t.url}/permissions`,children:t.title}):t.title]}),a&&(l||(l=(0,h.jsx)("em",{className:"muted no-wrap",children:"Default Permission"})))]}),c||(c=(0,h.jsx)("td",{className:"query-keyword",children:"Can"})),(0,h.jsx)("td",{children:(0,h.jsx)(u.Select,{"aria-label":`Permission level for "${e.name}"`,isSearchable:!1,options:p.vT,onChange:this.onPermissionChanged,disabled:e.inherited,value:s,width:25,menuShouldPortal:!0})}),(0,h.jsx)("td",{children:e.inherited?(0,h.jsx)(u.Button,{"aria-label":`Remove permission for "${e.name}" (Disabled)`,size:"sm",disabled:!0,icon:"times"}):(0,h.jsx)(u.Button,{"aria-label":`Remove permission for "${e.name}"`,size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})})]});var n}}var v,x,y,w,j,C;class k extends d.Component{render(){const{item:e}=this.props,t=p.vT.find((t=>t.value===e.permission));return(0,h.jsxs)("tr",{className:"gf-form-disabled",children:[(0,h.jsx)("td",{style:{width:"1%"},children:v||(v=(0,h.jsx)(u.Icon,{size:"lg",name:"shield"}))}),(0,h.jsxs)("td",{style:{width:"90%"},children:[e.name,x||(x=(0,h.jsx)("span",{className:"filter-table__weak-italic",children:" (Role)"}))]}),y||(y=(0,h.jsx)("td",{})),w||(w=(0,h.jsx)("td",{className:"query-keyword",children:"Can"})),(0,h.jsx)("td",{children:(0,h.jsx)("div",{className:"gf-form",children:(0,h.jsx)(u.Select,{"aria-label":`Permission level for "${e.name}"`,options:p.vT,onChange:()=>{},disabled:!0,value:t,menuShouldPortal:!0})})}),(0,h.jsx)("td",{children:(0,h.jsx)(u.Button,{"aria-label":`Remove permission for "${e.name}"`,size:"sm",icon:"lock",disabled:!0})})]})}}class S extends d.PureComponent{render(){const{items:e,onRemoveItem:t,onPermissionChanged:a,isFetching:s,folderInfo:n}=this.props;return(0,h.jsx)("table",{className:"filter-table gf-form-group",children:(0,h.jsxs)("tbody",{children:[(0,h.jsx)(k,{item:{name:"Admin",permission:4}},0),e.map(((e,s)=>(0,h.jsx)(b,{item:e,onRemoveItem:t,onPermissionChanged:a,folderInfo:n},s+1))),!0===s&&e.length<1?j||(j=(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:4,children:(0,h.jsx)("em",{children:"Loading permissions..."})})})):null,!1===s&&e.length<1?C||(C=(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:4,children:(0,h.jsx)("em",{children:"No permissions are set. Will only be accessible by admins."})})})):null]})})}}const T=S},"./public/app/core/components/PermissionList/PermissionsInfo.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const r=()=>s||(s=(0,n.jsxs)("div",{children:[(0,n.jsx)("h5",{children:"What are Permissions?"}),(0,n.jsx)("p",{children:"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."})]}))},"./public/app/core/components/QueryOperationRow/OperationRowHelp.tsx":(e,t,a)=>{"use strict";a.d(t,{h:()=>c});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-data/src/index.ts"),i=a("./packages/grafana-ui/src/index.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=["className","children","markdown","onRemove"];const c=s.memo(s.forwardRef(((e,t)=>{let{className:a,children:s,markdown:r}=e,c=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,l);const p=(0,i.useStyles2)(u);return(0,o.jsxs)("div",Object.assign({className:(0,n.cx)(p.wrapper,a)},c,{ref:t,children:[r&&d(r),s]}))})));function d(e){const t=(0,r.renderMarkdown)(e);return(0,o.jsx)("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:t}})}c.displayName="OperationRowHelp";const u=e=>{const t=e.shape.borderRadius();return{wrapper:n.css`
      padding: ${e.spacing(2)};
      border: 2px solid ${e.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${t} ${t};
      position: relative;
      top: -4px;
    `}}},"./public/app/core/components/QueryOperationRow/QueryOperationAction.tsx":(e,t,a)=>{"use strict";a.d(t,{y:()=>o});var s=a("./packages/grafana-ui/src/index.ts"),n=(a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js")),r=a("./packages/grafana-e2e-selectors/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=e=>{let{icon:t,active:a,disabled:o,title:c,onClick:d}=e;const u=(0,s.useStyles2)(l);return(0,i.jsx)("div",{className:(0,n.cx)(u.icon,a&&u.active),children:(0,i.jsx)(s.IconButton,{name:t,title:c,className:u.icon,disabled:!!o,onClick:d,surface:"header",type:"button","aria-label":r.wl.components.QueryEditorRow.actionButton(c)})})};o.displayName="QueryOperationAction";const l=e=>({icon:n.css`
      display: flex;
      position: relative;
      color: ${e.colors.text.secondary};
    `,active:n.css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: 2px;
        bottom: -8px;
        background-image: ${e.colors.gradients.brandHorizontal} !important;
      }
    `})},"./public/app/core/components/QueryOperationRow/QueryOperationRow.tsx":(e,t,a)=>{"use strict";a.d(t,{t:()=>d});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useUpdateEffect.js"),o=a("./.yarn/__virtual__/react-beautiful-dnd-virtual-27e4b658e7/3/opt/drone/yarncache/react-beautiful-dnd-npm-13.1.0-fcf5568b1c-12b7e9fbe8.zip/node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js"),l=a("./packages/grafana-runtime/src/index.ts"),c=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const d=e=>{let{children:t,actions:a,title:d,headerElement:p,onClose:h,onOpen:m,isOpen:g,disabled:f,draggable:b,index:v,id:x}=e;const[y,w]=(0,s.useState)(void 0===g||g),j=(0,n.useTheme)(),C=u(j),k=(0,s.useCallback)((()=>{w(!y)}),[y,w]),S=(0,s.useCallback)((e=>{if(e.defaultPrevented){const s=e.currentTarget.getBoundingClientRect();var t=e.clientX-s.left,a=e.clientY-s.top;(0,l.reportInteraction)("query_row_reorder_drag_position",{x:t/s.width,y:a/s.height,width:s.width,height:s.height})}}),[]);(0,i.Z)((()=>{y?m&&m():h&&h()}),[y]);const T={isOpen:y,onOpen:()=>{w(!0)},onClose:()=>{w(!1)}},O=d&&n.ReactUtils.renderOrCallToRender(d,T),_=a&&n.ReactUtils.renderOrCallToRender(a,T),N=p&&n.ReactUtils.renderOrCallToRender(p,T),I=(0,c.jsxs)("div",{className:C.header,children:[(0,c.jsxs)("div",{className:C.column,children:[(0,c.jsx)(n.Icon,{name:y?"angle-down":"angle-right",className:C.collapseIcon,onClick:k}),d&&(0,c.jsx)("div",{className:C.titleWrapper,onClick:k,"aria-label":"Query operation row title",children:(0,c.jsx)("div",{className:(0,r.cx)(C.title,f&&C.disabled),children:O})}),N]}),(0,c.jsxs)("div",{className:C.column,children:[_,b&&(0,c.jsx)(n.Icon,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:C.dragIcon})]})]});return b?(0,c.jsx)(o._l,{draggableId:x,index:v,children:e=>{const a=Object.assign({},e.dragHandleProps,{role:"group"});return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",Object.assign({ref:e.innerRef,className:C.wrapper},e.draggableProps,{children:[(0,c.jsx)("div",Object.assign({},a,{onMouseMove:S,children:I})),y&&(0,c.jsx)("div",{className:C.content,children:t})]}))})}}):(0,c.jsxs)("div",{className:C.wrapper,children:[I,y&&(0,c.jsx)("div",{className:C.content,children:t})]})},u=(0,n.stylesFactory)((e=>({wrapper:r.css`
      margin-bottom: ${e.spacing.md};
    `,header:r.css`
      label: Header;
      padding: ${e.spacing.xs} ${e.spacing.sm};
      border-radius: ${e.border.radius.sm};
      background: ${e.colors.bg2};
      min-height: ${e.spacing.formInputHeight}px;
      display: grid;
      grid-template-columns: minmax(100px, max-content) min-content;
      align-items: center;
      justify-content: space-between;
      white-space: nowrap;

      &:focus {
        outline: none;
      }
    `,column:r.css`
      label: Column;
      display: flex;
      align-items: center;
    `,dragIcon:r.css`
      cursor: grab;
      color: ${e.colors.textWeak};
      &:hover {
        color: ${e.colors.text};
      }
    `,collapseIcon:r.css`
      color: ${e.colors.textWeak};
      cursor: pointer;
      &:hover {
        color: ${e.colors.text};
      }
    `,titleWrapper:r.css`
      display: flex;
      align-items: center;
      flex-grow: 1;
      cursor: pointer;
      overflow: hidden;
      margin-right: ${e.spacing.sm};
    `,title:r.css`
      font-weight: ${e.typography.weight.semibold};
      color: ${e.colors.textBlue};
      margin-left: ${e.spacing.sm};
      overflow: hidden;
      text-overflow: ellipsis;
    `,content:r.css`
      margin-top: ${e.spacing.inlineFormMargin};
      margin-left: ${e.spacing.lg};
    `,disabled:r.css`
      color: ${e.colors.textWeak};
    `})));d.displayName="QueryOperationRow"},"./public/app/core/components/RolePicker/RolePicker.tsx":(e,t,a)=>{"use strict";a.d(t,{I:()=>F});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./packages/grafana-ui/src/components/Select/getSelectStyles.ts"),o=a("./public/app/types/index.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=Object.values(o.B5).map((e=>({label:e,value:e}))),d={ldap:"LDAP",current:"Current org"},u=e=>{var t;let{builtInRole:a,builtInRoles:o,options:d,appliedRoles:u,showGroups:x,builtinRolesDisabled:C,showBuiltInRole:k,onSelect:S,onBuiltInRoleSelect:T,onUpdate:O,onClear:_}=e;const[N,I]=(0,s.useState)(u),[P,M]=(0,s.useState)(a),[F,A]=(0,s.useState)(!1),[D,$]=(0,s.useState)(""),[L,R]=(0,s.useState)([]),E=(0,s.useRef)(null),z=(0,n.useTheme2)(),V=(0,i.D)(z),B=(0,n.useStyles2)(j);(0,s.useEffect)((()=>{S(N)}),[N,S]),(0,s.useEffect)((()=>{T&&P&&T(P)}),[P,T]);const U=d.filter(p).sort(y),H=d.filter(h).sort(y),q=m(d),W=e=>{const t=[];for(const a of N)v(a)===e&&t.push(a);return t},G=e=>{const t=W(e),a=q.find((t=>t.value===e));return t.length>0&&t.length>=a.options.length},Z=e=>{const t=W(e),a=q.find((t=>t.value===e));return t.length>0&&t.length<a.options.length},Q=e=>{N.find((t=>t.uid===e.uid))?I(N.filter((t=>t.uid!==e.uid))):I([...N,e])},K=e=>{const t=q.find((t=>t.value===e));if(G(e))t&&I(N.filter((e=>!t.options.find((t=>e.uid===t.uid)))));else if(t){const e=N.filter((e=>!t.options.find((t=>e.uid===t.uid))));I([...e,...t.options])}},Y=e=>{$(e),A(!0);const t=q.find((t=>t.value===e));t&&R(t.options)},J=e=>{A(!1),$(""),R([])},X=()=>{const e=N.filter((e=>v(e)!==D));I(e)};return(0,l.jsxs)("div",{className:(0,r.cx)(V.menu,B.menuWrapper),children:[(0,l.jsxs)("div",{className:B.menu,"aria-label":"Role picker menu",children:[(0,l.jsxs)(n.CustomScrollbar,{autoHide:!1,autoHeightMax:"300px",hideHorizontalTrack:!0,hideVerticalTrack:!0,children:[k&&(0,l.jsxs)("div",{className:B.menuSection,children:[(0,l.jsx)("div",{className:B.groupHeader,children:"Built-in roles"}),(0,l.jsx)(n.RadioButtonGroup,{className:B.builtInRoleSelector,options:c,value:P,onChange:e=>{M(e)},fullWidth:!0,disabled:C})]}),!!H.length&&(x&&q.length?(0,l.jsxs)("div",{className:B.menuSection,children:[(0,l.jsx)("div",{className:B.groupHeader,children:"Fixed roles"}),(0,l.jsx)("div",{className:V.optionBody,children:q.map(((e,a)=>{var s;return(0,l.jsx)(b,{data:e,isSelected:G(e.value)||Z(e.value),partiallySelected:Z(e.value),disabled:null===(s=e.options)||void 0===s?void 0:s.every(w),onChange:K,onOpenSubMenu:Y,onCloseSubMenu:J,root:null==E?void 0:E.current,isFocused:F&&D===e.value,children:F&&D===e.value&&(t||(t=(0,l.jsx)(g,{options:L,selectedOptions:N,onSelect:Q,onClear:X})))},a)}))})]}):(0,l.jsxs)("div",{className:B.menuSection,children:[(0,l.jsx)("div",{className:B.groupHeader,children:"Fixed roles"}),(0,l.jsx)("div",{className:V.optionBody,children:H.map(((e,t)=>(0,l.jsx)(f,{data:e,isSelected:!(!e.uid||!N.find((t=>t.uid===e.uid))),disabled:w(e),onChange:Q,hideDescription:!0},t)))})]})),!!U.length&&(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:B.groupHeader,children:"Custom roles"}),(0,l.jsx)("div",{className:V.optionBody,children:U.map(((e,t)=>(0,l.jsx)(f,{data:e,isSelected:!(!e.uid||!N.find((t=>t.uid===e.uid))),disabled:w(e),onChange:Q,hideDescription:!0},t)))})]})]}),(0,l.jsx)("div",{className:B.menuButtonRow,children:(0,l.jsxs)(n.HorizontalGroup,{justify:"flex-end",children:[(0,l.jsx)(n.Button,{size:"sm",fill:"text",onClick:async()=>{_&&_(),I([])},children:"Clear all"}),(0,l.jsx)(n.Button,{size:"sm",onClick:()=>{const e=[];for(const a in N){var t;const s=null===(t=N[a])||void 0===t?void 0:t.uid;e.push(s)}O(e,P)},children:"Update"})]})})]}),(0,l.jsx)("div",{ref:E})]})},p=e=>{var t;return!(null!==(t=e.name)&&void 0!==t&&t.startsWith("fixed:"))},h=e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.startsWith("fixed:")},m=e=>{const t={};e.forEach((e=>{if(e.name.startsWith("fixed:")){const a=v(e);t[a]?t[a].push(e):t[a]=[e]}}));const a=[];for(const e of Object.keys(t)){const s=t[e].sort(y);a.push({name:d[e]||x(e),value:e,options:s})}return a.sort(((e,t)=>e.name.localeCompare(t.name)))},g=e=>{let{options:t,selectedOptions:a,disabledOptions:s,onSelect:r,onClear:o}=e;const c=(0,n.useTheme2)(),d=(0,i.D)(c),u=(0,n.useStyles2)(j);return(0,l.jsxs)("div",{className:u.subMenu,"aria-label":"Role picker submenu",children:[(0,l.jsx)(n.CustomScrollbar,{autoHide:!1,autoHeightMax:"300px",hideHorizontalTrack:!0,children:(0,l.jsx)("div",{className:d.optionBody,children:t.map(((e,t)=>(0,l.jsx)(f,{data:e,isSelected:!(!e.uid||!(a.find((t=>t.uid===e.uid))||null!=s&&s.find((t=>t.uid===e.uid)))),disabled:!(!e.uid||null==s||!s.find((t=>t.uid===e.uid)))||w(e),onChange:r,hideDescription:!0},t)))})}),(0,l.jsx)("div",{className:u.subMenuButtonRow,children:(0,l.jsx)(n.HorizontalGroup,{justify:"flex-end",children:(0,l.jsx)(n.Button,{size:"sm",fill:"text",onClick:async()=>{o&&o()},children:"Clear"})})})]})},f=s.forwardRef(((e,t)=>{let{data:a,isFocused:s,isSelected:o,disabled:c,onChange:d,hideDescription:u}=e;const p=(0,n.useTheme2)(),h=(0,i.D)(p),m=(0,n.useStyles2)(j),g=(0,r.cx)(h.option,s&&h.optionFocused,c&&m.menuOptionDisabled),f=e=>{c||(e.preventDefault(),e.stopPropagation(),d(a))};return(0,l.jsxs)("div",{ref:t,className:g,"aria-label":"Role picker option",onClick:f,children:[(0,l.jsx)(n.Checkbox,{value:o,className:m.menuOptionCheckbox,onChange:f,disabled:c}),(0,l.jsxs)("div",{className:(0,r.cx)(h.optionBody,m.menuOptionBody),children:[(0,l.jsx)("span",{children:a.displayName||a.name}),!u&&a.description&&(0,l.jsx)("div",{className:h.optionDescription,children:a.description})]}),a.description&&(0,l.jsx)(n.Tooltip,{content:a.description,children:(0,l.jsx)(n.Icon,{name:"info-circle",className:m.menuOptionInfoSign})})]})}));f.displayName="RoleMenuOption";const b=s.forwardRef(((e,t)=>{let{data:a,isFocused:s,isSelected:o,partiallySelected:c,disabled:d,onChange:u,onClick:p,onOpenSubMenu:h,onCloseSubMenu:m,children:g,root:f}=e;const b=(0,n.useTheme2)(),v=(0,i.D)(b),x=(0,n.useStyles2)(j),y=(0,r.cx)(v.option,s&&v.optionFocused,d&&x.menuOptionDisabled);return(0,l.jsx)("div",{onMouseEnter:()=>{h&&h(a.value)},onMouseLeave:()=>{m&&m(a.value)},children:(0,l.jsxs)("div",{ref:t,className:y,"aria-label":"Role picker option",onClick:e=>{p&&p(a.value)},children:[(0,l.jsx)(n.Checkbox,{value:o,className:(0,r.cx)(x.menuOptionCheckbox,{[x.checkboxPartiallyChecked]:c}),onChange:e=>{d||a.value&&u(a.value)},disabled:d}),(0,l.jsxs)("div",{className:(0,r.cx)(v.optionBody,x.menuOptionBody),children:[(0,l.jsx)("span",{children:a.displayName||a.name}),(0,l.jsx)("span",{className:x.menuOptionExpand})]}),f&&g&&(0,l.jsx)(n.Portal,{className:x.subMenuPortal,root:f,children:g})]})})}));b.displayName="RoleMenuGroupOption";const v=e=>{var t;return null!==(t=e.group)&&void 0!==t?t:"Other"},x=e=>e.slice(0,1).toUpperCase()+e.slice(1),y=(e,t)=>e.name.localeCompare(t.name),w=e=>void 0!==e.delegatable&&!e.delegatable,j=e=>({menuWrapper:r.css`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${e.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:r.css`
      min-width: 260px;

      & > div {
        padding-top: ${e.spacing(1)};
      }
    `,subMenu:r.css`
      height: 100%;
      min-width: 260px;
      display: flex;
      flex-direction: column;
      border-left-style: solid;
      border-left-width: 1px;
      border-left-color: ${e.components.input.borderColor};

      & > div {
        padding-top: ${e.spacing(1)};
      }
    `,groupHeader:r.css`
      padding: ${e.spacing(0,4)};
      display: flex;
      align-items: center;
      color: ${e.colors.text.primary};
      font-weight: ${e.typography.fontWeightBold};
    `,container:r.css`
      padding: ${e.spacing(1)};
      border: 1px ${e.colors.border.weak} solid;
      border-radius: ${e.shape.borderRadius(1)};
      background-color: ${e.colors.background.primary};
      z-index: ${e.zIndex.modal};
    `,menuSection:r.css`
      margin-bottom: ${e.spacing(2)};
    `,menuOptionCheckbox:r.css`
      display: flex;
      margin: ${e.spacing(0,1,0,.25)};
    `,menuButtonRow:r.css`
      background-color: ${e.colors.background.primary};
      padding: ${e.spacing(1)};
    `,menuOptionBody:r.css`
      font-weight: ${e.typography.fontWeightRegular};
      padding: ${e.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:r.css`
      color: ${e.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionExpand:r.css`
      position: absolute;
      right: ${e.spacing(1.25)};
      color: ${e.colors.text.disabled};

      &:after {
        content: '>';
      }
    `,menuOptionInfoSign:r.css`
      color: ${e.colors.text.disabled};
    `,builtInRoleSelector:r.css`
      margin: ${e.spacing(1,1.25,1,1)};
    `,subMenuPortal:r.css`
      height: 100%;
      > div {
        height: 100%;
      }
    `,subMenuButtonRow:r.css`
      background-color: ${e.colors.background.primary};
      padding: ${e.spacing(1)};
    `,checkboxPartiallyChecked:r.css`
      input {
        &:checked + span {
          &:after {
            border-width: 0 3px 0px 0;
            transform: rotate(90deg);
          }
        }
      }
    `}),C=e=>{let{children:t,iconName:a}=e;const s=(0,n.useStyles2)(k);return(0,l.jsxs)("div",{className:s.container,children:[a&&(0,l.jsx)(n.Icon,{name:a,size:"xs"}),t]})},k=e=>{const{prefix:t}=(0,n.getInputStyles)({theme:e}),{multiValueContainer:a}=(0,n.getSelectStyles)(e);return{container:(0,r.cx)(t,a,r.css`
        position: relative;
        padding: ${e.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${e.spacing(.5)};
        }
      `)}};var S;const T=["appliedRoles","builtInRole","disabled","isFocused","query","showBuiltInRole","onOpen","onClose","onQueryChange"];const O=e=>e.stopPropagation(),_=e=>{let{appliedRoles:t,builtInRole:a,disabled:r,isFocused:i,query:o,showBuiltInRole:c,onOpen:d,onClose:u,onQueryChange:p}=e,h=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,T);const m=(0,n.useStyles2)((e=>I(e,!1,!!i,!!r,!1))),g=(0,s.useRef)(null);(0,s.useEffect)((()=>{var e;i&&(null===(e=g.current)||void 0===e||e.focus())}));const f=t.length;return i?(0,l.jsxs)("div",{className:m.wrapper,children:[c&&(0,l.jsx)(C,{children:a}),t.map((e=>(0,l.jsx)(C,{children:e.displayName},e.uid))),!r&&(0,l.jsx)("input",Object.assign({},h,{className:m.input,ref:g,onMouseDown:O,onChange:e=>{var t;const a=null===(t=e.target)||void 0===t?void 0:t.value;p(a)},"data-testid":"role-picker-input",placeholder:i?"Select role":"",value:o})),(0,l.jsx)("div",{className:m.suffix,children:(0,l.jsx)(n.Icon,{name:"angle-up",className:m.dropdownIndicator,onMouseDown:u})})]}):(0,l.jsxs)("div",{className:m.selectedRoles,onMouseDown:d,children:[c&&(0,l.jsx)(C,{children:a}),(0,l.jsx)(N,{appliedRoles:t,numberOfRoles:f,showBuiltInRole:c})]})};_.displayName="RolePickerInput";const N=e=>{let{showBuiltInRole:t,numberOfRoles:a,appliedRoles:s}=e;const r=(0,n.useStyles2)((e=>P(e)));return(0,l.jsx)(l.Fragment,{children:a?(0,l.jsx)(n.Tooltip,{content:(0,l.jsx)("div",{className:r.tooltip,children:null==s?void 0:s.map((e=>(0,l.jsx)("p",{children:e.displayName},e.uid)))}),children:(0,l.jsx)("div",{children:(0,l.jsx)(C,{children:`${t?"+":""}${a} role${a>1?"s":""}`})})}):!t&&(S||(S=(0,l.jsx)("div",{children:(0,l.jsx)(C,{children:"No roles assigned"})})))})},I=(e,t,a,s,i)=>{const o=(0,n.getInputStyles)({theme:e,invalid:t});return{wrapper:(0,r.cx)(o.wrapper,(0,n.sharedInputStyle)(e,t),a&&r.css`
          ${n.styleMixins.focusCss(e.v1)}
        `,s&&o.inputDisabled,r.css`
        width: 520px;
        min-height: 32px;
        height: auto;
        flex-direction: row;
        padding-right: 24px;
        max-width: 100%;
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        cursor: default;
      `,i&&r.css`
          padding-left: 0;
        `),input:(0,r.cx)((0,n.sharedInputStyle)(e,t),r.css`
        max-width: 120px;
        border: none;
        cursor: ${a?"default":"pointer"};
      `),suffix:o.suffix,dropdownIndicator:r.css`
      cursor: pointer;
    `,selectedRoles:r.css`
      display: flex;
      align-items: center;
      cursor: ${s?"not-allowed":"pointer"};
    `,tooltip:r.css`
      p {
        margin-bottom: ${e.spacing(.5)};
      }
    `}},P=e=>({tooltip:r.css`
    p {
      margin-bottom: ${e.spacing(.5)};
    }
  `});var M;const F=e=>{let{builtInRole:t,appliedRoles:a,roleOptions:r,builtInRoles:i,disabled:o,isLoading:c,builtinRolesDisabled:d,showBuiltInRole:p,onRolesChange:h,onBuiltinRoleChange:m}=e;const[g,f]=(0,s.useState)(!1),[b,v]=(0,s.useState)(a),[x,y]=(0,s.useState)(t),[w,j]=(0,s.useState)("");(0,s.useEffect)((()=>{v(a)}),[a]);const C=(0,s.useCallback)((e=>{o||(e.preventDefault(),e.stopPropagation(),f(!0))}),[f,o]),k=(0,s.useCallback)((()=>{f(!1),j(""),v(a),y(t)}),[a,t]);return c?M||(M=(0,l.jsxs)(n.HorizontalGroup,{justify:"center",children:[(0,l.jsx)("span",{children:"Loading..."}),(0,l.jsx)(n.Spinner,{size:16})]})):(0,l.jsx)("div",{"data-testid":"role-picker",style:{position:"relative"},children:(0,l.jsxs)(n.ClickOutsideWrapper,{onClick:()=>g&&k(),children:[(0,l.jsx)(_,{builtInRole:x,appliedRoles:b,query:w,onQueryChange:e=>{j(e||"")},onOpen:C,onClose:k,isFocused:g,disabled:o,showBuiltInRole:p}),g&&(0,l.jsx)(u,{options:w&&""!==w.trim()?r.filter((e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(w.toLowerCase())})):r,builtInRole:x,builtInRoles:i,appliedRoles:a,onBuiltInRoleSelect:e=>{y(e)},onSelect:e=>{v(e)},onUpdate:(e,t)=>{m&&t&&m(t),h(e),f(!1),j("")},showGroups:0===w.length||""===w.trim(),builtinRolesDisabled:d,showBuiltInRole:p})]})})}},"./public/app/core/components/RolePicker/UserRolePicker.tsx":(e,t,a)=>{"use strict";a.d(t,{R:()=>d});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsync.js"),r=a("./public/app/core/core.ts"),i=a("./public/app/types/index.ts"),o=a("./public/app/core/components/RolePicker/RolePicker.tsx"),l=a("./public/app/core/components/RolePicker/api.ts"),c=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const d=e=>{let{builtInRole:t,userId:a,orgId:d,onBuiltinRoleChange:u,roleOptions:p,builtInRoles:h,disabled:m,builtinRolesDisabled:g}=e;const[f,b]=(0,s.useState)([]),{loading:v}=(0,n.Z)((async()=>{try{if(r.Vt.hasPermission(i.bW.ActionUserRolesList)){const e=await(0,l.kt)(a,d);b(e)}else b([])}catch(e){console.error("Error loading options")}}),[d,a]);return(0,c.jsx)(o.I,{builtInRole:t,onRolesChange:e=>(0,l.hB)(e,a,d),onBuiltinRoleChange:u,roleOptions:p,appliedRoles:f,builtInRoles:h,isLoading:v,disabled:m,builtinRolesDisabled:g,showBuiltInRole:!0})}},"./public/app/core/components/RolePicker/api.ts":(e,t,a)=>{"use strict";a.d(t,{ul:()=>n,fh:()=>r,kt:()=>i,hB:()=>o,_C:()=>l,u7:()=>c});var s=a("./packages/grafana-runtime/src/index.ts");const n=async(e,t)=>{let a="/api/access-control/roles?delegatable=true";e&&(a+=`&targetOrgId=${e}`);const n=await(0,s.getBackendSrv)().get(a);return n&&n.length?n:[]},r=e=>{let t="/api/access-control/builtin-roles";return e&&(t+=`?targetOrgId=${e}`),(0,s.getBackendSrv)().get(t)},i=async(e,t)=>{let a=`/api/access-control/users/${e}/roles`;t&&(a+=`?targetOrgId=${t}`);try{const e=await(0,s.getBackendSrv)().get(a);return e&&e.length?e:[]}catch(e){return e.isHandled=!0,[]}},o=(e,t,a)=>{let n=`/api/access-control/users/${t}/roles`;return a&&(n+=`?targetOrgId=${a}`),(0,s.getBackendSrv)().put(n,{orgId:a,roleUids:e})},l=async(e,t)=>{let a=`/api/access-control/teams/${e}/roles`;t&&(a+=`?targetOrgId=${t}`);try{const e=await(0,s.getBackendSrv)().get(a);return e&&e.length?e:[]}catch(e){return e.isHandled=!0,[]}},c=(e,t,a)=>{let n=`/api/access-control/teams/${t}/roles`;return a&&(n+=`?targetOrgId=${a}`),(0,s.getBackendSrv)().put(n,{orgId:a,roleUids:e})}},"./public/app/core/components/Select/FolderPicker.tsx":(e,t,a)=>{"use strict";a.d(t,{E:()=>m});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./packages/grafana-data/src/index.ts"),o=a("./packages/grafana-e2e-selectors/src/index.ts"),l=a("./public/app/core/app_events.ts"),c=a("./public/app/core/services/context_srv.ts"),d=a("./public/app/features/manage-dashboards/state/actions.ts"),u=a("./public/app/types/index.ts"),p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends s.PureComponent{constructor(e){super(e),h(this,"debouncedSearch",void 0),h(this,"componentDidMount",(async()=>{if(this.props.skipInitialLoad){const e=await async function(e){let{folderName:t,folderId:a,getFolder:s}=e;if(null==a||a<0)throw new Error("folderId should to be greater or equal to zero.");if(t)return{label:t,value:a};return{label:(await s(a)).title,value:a}}({getFolder:d.EW,folderId:this.props.initialFolderId,folderName:this.props.initialTitle});this.setState({folder:e})}else await this.loadInitialValue()})),h(this,"getOptions",(async e=>{const{rootName:t,enableReset:a,initialTitle:s,permissionLevel:n,initialFolderId:r,showRoot:i}=this.props,o=(await(0,d.ZL)(e,n)).map((e=>({label:e.title,value:e.id})));return c.Vt.isEditor&&null!=t&&t.toLowerCase().startsWith(e.toLowerCase())&&i&&o.unshift({label:t,value:0}),a&&""===e&&""!==s&&!o.find((e=>e.label===s))&&o.unshift({label:s,value:r}),o})),h(this,"onFolderChange",(e=>{e||(e={value:0,label:this.props.rootName}),this.setState({folder:e},(()=>this.props.onChange({id:e.value,title:e.label})))})),h(this,"createNewFolder",(async e=>{const t=await(0,d.L6)({title:e});let a={value:-1,label:"Not created"};return t.id>-1?(l.Z.emit(i.AppEvents.alertSuccess,["Folder Created","OK"]),a={value:t.id,label:t.title},await this.onFolderChange(a)):l.Z.emit(i.AppEvents.alertError,["Folder could not be created"]),a})),h(this,"loadInitialValue",(async()=>{const{initialTitle:e,rootName:t,initialFolderId:a,enableReset:s,dashboardId:n}=this.props,r={label:e,value:void 0},i={label:t,value:0},o=await this.getOptions("");let l=null;if(null!=a&&a>-1?l=o.find((e=>e.value===a))||null:s&&e?l=r:a&&(l=o.find((e=>e.id===a))||null),!l&&!this.props.allowEmpty)if(c.Vt.isEditor)l=i;else{l=!!n?r:o.length>0?o[0]:r}this.setState({folder:l},(()=>{l&&l.value!==a&&this.props.onChange({id:l.value,title:l.label})}))})),this.state={folder:null},this.debouncedSearch=(0,n.debounce)(this.getOptions,300,{leading:!0,trailing:!0})}render(){const{folder:e}=this.state,{enableCreateNew:t,inputId:a}=this.props;return(0,p.jsx)("div",{"data-testid":o.wl.components.FolderPicker.containerV2,children:(0,p.jsx)(r.AsyncSelect,{inputId:a,"aria-label":o.wl.components.FolderPicker.input,loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:e,value:e,allowCustomValue:t,loadOptions:this.debouncedSearch,onChange:this.onFolderChange,onCreateOption:this.createNewFolder,menuShouldPortal:!0})})}}h(m,"defaultProps",{rootName:"General",enableReset:!1,initialTitle:"",enableCreateNew:!1,permissionLevel:u.bf.Edit,allowEmpty:!1,showRoot:!0})},"./public/app/core/components/Select/SortPicker.tsx":(e,t,a)=>{"use strict";a.d(t,{P:()=>c});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsync.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/features/search/constants.ts"),i=a("./public/app/core/services/search_srv.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=new i.i,c=e=>{let{onChange:t,value:a,placeholder:i,filter:c}=e;const{loading:d,value:u}=(0,s.Z)((()=>(e=>l.getSortOptions().then((t=>{let{sortOptions:a}=t;return(e?a.filter((t=>e.includes(t.name))):a).map((e=>({label:e.displayName,value:e.name})))})))(c)),[]),p=null==u?void 0:u.find((e=>e.value===a));return d?null:(0,o.jsx)(n.Select,{menuShouldPortal:!0,width:25,onChange:t,value:null!=p?p:null,options:u,"aria-label":"Sort",placeholder:null!=i?i:`Sort (Default ${r.yw.label})`,prefix:(0,o.jsx)(n.Icon,{name:null!=a&&a.includes("asc")?"sort-amount-up":"sort-amount-down"})},a)}},"./public/app/core/components/Select/TeamPicker.tsx":(e,t,a)=>{"use strict";a.d(t,{c:()=>l});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./packages/grafana-runtime/src/index.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");class l extends s.Component{constructor(e){var t,a,s;super(e),s=void 0,(a="debouncedSearch")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,n.debounce)(this.search,300,{leading:!0,trailing:!0})}search(e){return this.setState({isLoading:!0}),(0,n.isNil)(e)&&(e=""),(0,i.getBackendSrv)().get(`/api/teams/search?perpage=100&page=1&query=${e}`).then((e=>{const t=e.teams.map((e=>({value:e,label:e.name,imgUrl:e.avatarUrl})));return this.setState({isLoading:!1}),t}))}render(){const{onSelected:e,className:t}=this.props,{isLoading:a}=this.state;return(0,o.jsx)("div",{className:"user-picker","data-testid":"teamPicker",children:(0,o.jsx)(r.AsyncSelect,{menuShouldPortal:!0,isLoading:a,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:e,className:t,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"})})}}},"./public/app/core/components/Select/UserPicker.tsx":(e,t,a)=>{"use strict";a.d(t,{f:()=>l});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./packages/grafana-runtime/src/index.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");class l extends s.Component{constructor(e){var t,a,s;super(e),s=void 0,(a="debouncedSearch")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,n.debounce)(this.search,300,{leading:!0,trailing:!0})}search(e){return this.setState({isLoading:!0}),(0,n.isNil)(e)&&(e=""),(0,i.getBackendSrv)().get(`/api/org/users/lookup?query=${e}&limit=100`).then((e=>e.map((e=>({id:e.userId,value:e.userId,label:e.login,imgUrl:e.avatarUrl,login:e.login}))))).finally((()=>{this.setState({isLoading:!1})}))}render(){const{className:e,onSelected:t,inputId:a}=this.props,{isLoading:s}=this.state;return(0,o.jsx)("div",{className:"user-picker","data-testid":"userPicker",children:(0,o.jsx)(r.AsyncSelect,{menuShouldPortal:!0,isClearable:!0,className:e,inputId:a,isLoading:s,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:t,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"})})}}},"./public/app/core/components/TagFilter/TagBadge.tsx":(e,t,a)=>{"use strict";a.d(t,{e:()=>o});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");class o extends n.Component{constructor(e){super(e)}render(){const{label:e,removeIcon:t,count:a}=this.props,{color:n}=(0,r.getTagColorsFromName)(e),o={backgroundColor:n},l=0!==a&&(0,i.jsx)("span",{className:"tag-count-label",children:`(${a})`});return(0,i.jsxs)("span",{className:"label label-tag",style:o,children:[t&&(s||(s=(0,i.jsx)(r.Icon,{name:"times"}))),e," ",l]})}}},"./public/app/core/components/TagFilter/TagFilter.tsx":(e,t,a)=>{"use strict";a.d(t,{D:()=>g});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./.yarn/__virtual__/react-select-virtual-46a643cce8/3/opt/drone/yarncache/react-select-npm-5.2.1-096a4f461a-014cde5d23.zip/node_modules/react-select/dist/index-c7a4d7ce.esm.js"),r=a("../../opt/drone/yarncache/debounce-promise-npm-3.1.2-3c185da0c7-29bac4524c.zip/node_modules/debounce-promise/dist/index.js"),i=a.n(r),o=a("./packages/grafana-ui/src/index.ts"),l=a("./packages/grafana-data/src/index.ts"),c=a("./public/app/core/components/TagFilter/TagBadge.tsx"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u=e=>{var t;let{data:a,className:n,label:r,isFocused:i,innerProps:l}=e;const u=(0,o.useTheme)(),h=p(u);return(0,d.jsx)("div",Object.assign({className:(0,s.cx)(h.option,i&&h.optionFocused),"aria-label":"Tag option"},l,{children:(0,d.jsx)("div",{className:`tag-filter-option ${n||""}`,children:(0,d.jsx)(c.e,{label:r,removeIcon:!1,count:null!==(t=a.count)&&void 0!==t?t:0})})}))},p=(0,o.stylesFactory)((e=>({option:s.css`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${e.colors.dropdownOptionHoverBg};
      }
    `,optionFocused:s.css`
      background: ${e.colors.dropdownOptionHoverBg};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `})));var h;const m=(e,t)=>RegExp((0,l.escapeStringForRegex)(t),"i").test(e.value),g=e=>{let{allowCustomValue:t=!1,formatCreateLabel:a,hideValues:s,inputId:r,isClearable:l,onChange:p,placeholder:g="Filter by tag",tagOptions:b,tags:v,width:x}=e;const y=(0,o.useTheme)(),w=f(y),j=i()((async e=>(await b()).map((e=>({value:e.term,label:e.term,count:e.count})))),300),C=e=>{p((e||[]).map((e=>e.value)))},k=v.map((e=>({value:e,label:e,count:0}))),S={allowCreateWhileLoading:!0,allowCustomValue:t,formatCreateLabel:a,defaultOptions:!0,filterOption:m,getOptionLabel:e=>e.label,getOptionValue:e=>e.value,inputId:r,isMulti:!0,loadOptions:j,loadingMessage:"Loading...",noOptionsMessage:"No tags found",onChange:C,placeholder:g,value:k,width:x,components:{Option:u,MultiValueLabel:()=>null,MultiValueRemove(e){const{data:t}=e;return(0,d.jsx)(n.c.MultiValueRemove,Object.assign({},e,{children:(0,d.jsx)(c.e,{label:t.label,removeIcon:!0,count:t.count},t.label)}))},MultiValueContainer:s?()=>null:n.c.MultiValueContainer}};return(0,d.jsxs)("div",{className:w.tagFilter,children:[l&&v.length>0&&(0,d.jsx)("span",{className:w.clear,onClick:()=>C([]),children:"Clear tags"}),(0,d.jsx)(o.AsyncMultiSelect,Object.assign({menuShouldPortal:!0},S,{prefix:h||(h=(0,d.jsx)(o.Icon,{name:"tag-alt"})),"aria-label":"Tag filter"}))]})};g.displayName="TagFilter";const f=(0,o.stylesFactory)((e=>({tagFilter:s.css`
      position: relative;
      min-width: 180px;
      flex-grow: 1;

      .label-tag {
        margin-left: 6px;
        cursor: pointer;
      }
    `,clear:s.css`
      text-decoration: underline;
      font-size: 12px;
      position: absolute;
      top: -22px;
      right: 0;
      cursor: pointer;
      color: ${e.colors.textWeak};

      &:hover {
        color: ${e.colors.textStrong};
      }
    `})))},"./public/app/core/components/TimePicker/TimePickerWithHistory.tsx":(e,t,a)=>{"use strict";a.d(t,{a:()=>o});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./public/app/core/components/LocalStorageValueProvider/index.tsx"),n=a("./packages/grafana-data/src/index.ts"),r=a("./packages/grafana-ui/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=e=>(0,i.jsx)(s.G,{storageKey:"grafana.dashboard.timepicker.history",defaultValue:[],children:(t,a)=>{return(0,i.jsx)(r.TimeRangePicker,Object.assign({},e,{history:(s=t,s.map((e=>(0,n.isDateTime)(e.from)?e:{from:(0,n.toUtc)(e.from),to:(0,n.toUtc)(e.to),raw:e.raw}))),onChange:s=>{!function(e,t,a){if(!function(e){return(0,n.isDateTime)(e.raw.from)||(0,n.isDateTime)(e.raw.to)}(e))return;const s=function(e){return e.slice(0,4)}([e,...t]);a(s)}(s,t,a),e.onChange(s)}}));var s}})},"./public/app/core/components/TransformersUI/spatial/models.gen.ts":(e,t,a)=>{"use strict";a.d(t,{JJ:()=>n,Ii:()=>r,ac:()=>i});var s=a("./packages/grafana-data/src/index.ts");let n,r,i;!function(e){e.Prepare="prepare",e.Calculate="calculate",e.Modify="modify"}(n||(n={})),function(e){e.Heading="heading",e.Distance="distance",e.Area="area"}(r||(r={})),function(e){e.AsLine="asLine",e.LineBuilder="lineBuilder"}(i||(i={}));n.Prepare,s.FrameGeometrySourceMode.Auto},"./public/app/core/components/TransformersUI/spatial/utils.ts":(e,t,a)=>{"use strict";a.d(t,{Lp:()=>d,Lb:()=>p,N7:()=>m});var s=a("./packages/grafana-data/src/index.ts"),n=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/extent.js"),r=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/geom/LineString.js"),i=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/geom/Point.js"),o=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/proj.js"),l=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/sphere.js"),c=a("./public/app/core/components/TransformersUI/spatial/models.gen.ts");function d(e){const t=[];for(const a of e.values.toArray())a&&t.push(p(a));return new r.Z(t)}function u(e){const t=new Array(e.length);if(e.length>1){let a=h(e[0]);for(let s=1;s<e.length;s++){let n=h(e[s]);if(a&&n){let e=180*Math.atan2(n[0]-a[0],n[1]-a[1])/Math.PI;e<0&&(e+=360),t[s-1]=t[s]=e}}}else t.fill(0);return t}function p(e){return e instanceof i.Z?e.getCoordinates():(0,n.qg)(e.getExtent())}function h(e){if(e)return(0,o.bU)(p(e))}function m(e,t){var a,n;const r=e.values.toArray(),i=new Array(e.values.length),o=null!==(a=t.calc)&&void 0!==a?a:c.Ii.Heading,d=null!==(n=t.field)&&void 0!==n?n:o;switch(o){case c.Ii.Area:for(let e=0;e<r.length;e++){const t=r[e];t&&(i[e]=(0,l.bg)(t))}return{name:d,type:s.FieldType.number,config:{unit:"areaM2"},values:new s.ArrayVector(i)};case c.Ii.Distance:for(let e=0;e<r.length;e++){const t=r[e];t&&(i[e]=(0,l.xA)(t))}return{name:d,type:s.FieldType.number,config:{unit:"lengthm"},values:new s.ArrayVector(i)};case c.Ii.Heading:default:return{name:d,type:s.FieldType.number,config:{unit:"degree"},values:new s.ArrayVector(u(r))}}}},"./public/app/core/components/Upgrade/ProBadge.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./packages/grafana-runtime/src/index.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=["text","className","experimentId"];const c=e=>{let{text:t="PRO",className:a,experimentId:c}=e,u=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,l);const p=(0,r.useStyles2)(d);return(0,s.useEffect)((()=>{c&&(0,i.reportExperimentView)(c,"test","")}),[c]),(0,o.jsx)("span",Object.assign({className:(0,n.cx)(p.badge,a)},u,{children:t}))},d=e=>({badge:n.css`
      margin-left: ${e.spacing(1.25)};
      border-radius: ${e.shape.borderRadius(5)};
      background-color: ${e.colors.success.main};
      padding: ${e.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${e.typography.fontWeightMedium};
      font-size: ${e.typography.pxToRem(10)};
    `})},"./public/app/core/components/editors/registry.tsx":(e,t,a)=>{"use strict";a.d(t,{u:()=>L,l:()=>R});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/debounce-promise-npm-3.1.2-3c185da0c7-29bac4524c.zip/node_modules/debounce-promise/dist/index.js"),r=a.n(n),i=a("./public/app/core/services/backend_srv.ts"),o=a("./packages/grafana-ui/src/index.ts"),l=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsync.js"),c=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.ae.search({type:"dash-db",query:e,limit:100}).then((e=>e.map((e=>{var t;return{value:e.uid,label:`${null!==(t=null==e?void 0:e.folderTitle)&&void 0!==t?t:"General"}/${e.title}`}}))))},u=e=>{var t;let{value:a,onChange:n,item:u}=e;const[p,h]=(0,s.useState)();(0,l.Z)((async()=>{var e,t;if(!a)return void h(void 0);const s=await i.ae.getDashboardByUid(a);h({value:s.dashboard.uid,label:`${null!==(e=null===(t=s.meta)||void 0===t?void 0:t.folderTitle)&&void 0!==e?e:"General"}/${s.dashboard.title}`})}),[a]);const m=(0,s.useCallback)((e=>{n(null==e?void 0:e.value)}),[n]),g=r()(d,300),{placeholder:f,isClearable:b}=null!==(t=null==u?void 0:u.settings)&&void 0!==t?t:{};return(0,c.jsx)(o.AsyncSelect,{menuShouldPortal:!0,isClearable:b,defaultOptions:!0,loadOptions:g,onChange:m,placeholder:null!=f?f:"Select dashboard",noOptionsMessage:"No dashboards found",value:p})};var p,h=a("./packages/grafana-data/src/index.ts"),m=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),g=a("./.yarn/__virtual__/react-beautiful-dnd-virtual-27e4b658e7/3/opt/drone/yarncache/react-beautiful-dnd-npm-13.1.0-fcf5568b1c-12b7e9fbe8.zip/node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js");function f(e){var t;let{mapping:a,index:n,onChange:r,onRemove:i,onDuplicate:l}=e;const{key:d,result:u}=a,m=(0,o.useStyles2)(b),f=(0,s.useRef)(null),v=(0,s.useCallback)((e=>{const t=Object.assign({},a,{result:Object.assign({},a.result)});e(t),r(n,t)}),[a,n,r]);(0,s.useEffect)((()=>{f.current&&a.isNew&&(f.current.focus(),v((e=>{e.isNew=!1})))}),[a,f,v]);const x=e=>{v((t=>{t.result.color=e}))},y=()=>{v((e=>{e.result.color=void 0}))},w=e=>{v((t=>{t.key=e.currentTarget.value}))},j=e=>{v((t=>{t.result.text=e.currentTarget.value}))},C=e=>{v((t=>{t.from=parseFloat(e.currentTarget.value)}))},k=e=>{v((t=>{t.to=parseFloat(e.currentTarget.value)}))},S=e=>{v((t=>{t.pattern=e.currentTarget.value}))},T=e=>{v((t=>{t.specialMatch=e.value}))},O=[{label:"Null",value:h.SpecialValueMatch.Null,description:"Matches null and undefined values"},{label:"NaN",value:h.SpecialValueMatch.NaN,description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:h.SpecialValueMatch.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:h.SpecialValueMatch.True,description:"Boolean true values"},{label:"False",value:h.SpecialValueMatch.False,description:"Boolean false values"},{label:"Empty",value:h.SpecialValueMatch.Empty,description:"Empty string"}];return(0,c.jsx)(g._l,{draggableId:`mapping-${n}`,index:n,children:e=>{var s,r,g,b;return(0,c.jsxs)("tr",Object.assign({ref:e.innerRef},e.draggableProps,{children:[(0,c.jsx)("td",{children:(0,c.jsx)("div",Object.assign({},e.dragHandleProps,{className:m.dragHandle,children:p||(p=(0,c.jsx)(o.Icon,{name:"draggabledots",size:"lg"}))}))}),(0,c.jsx)("td",{className:m.typeColumn,children:a.type}),(0,c.jsxs)("td",{children:[a.type===h.MappingType.ValueToText&&(0,c.jsx)(o.Input,{ref:f,type:"text",value:null!=d?d:"",onChange:w,placeholder:"Exact value to match"}),a.type===h.MappingType.RangeToText&&(0,c.jsxs)("div",{className:m.rangeInputWrapper,children:[(0,c.jsx)(o.Input,{type:"number",value:null!==(s=a.from)&&void 0!==s?s:"",placeholder:"Range start",onChange:C,prefix:"From"}),(0,c.jsx)(o.Input,{type:"number",value:null!==(r=a.to)&&void 0!==r?r:"",placeholder:"Range end",onChange:k,prefix:"To"})]}),a.type===h.MappingType.RegexToText&&(0,c.jsx)(o.Input,{type:"text",value:null!==(g=a.pattern)&&void 0!==g?g:"",placeholder:"Regular expression",onChange:S}),a.type===h.MappingType.SpecialValue&&(0,c.jsx)(o.Select,{menuShouldPortal:!0,value:O.find((e=>e.value===a.specialMatch)),options:O,onChange:T})]}),(0,c.jsx)("td",{children:(0,c.jsx)(o.Input,{type:"text",value:null!==(b=u.text)&&void 0!==b?b:"",onChange:j,placeholder:"Optional display text"})}),(0,c.jsxs)("td",{className:m.textAlignCenter,children:[u.color&&(0,c.jsxs)(o.HorizontalGroup,{spacing:"sm",justify:"center",children:[(0,c.jsx)(o.ColorPicker,{color:u.color,onChange:x,enableNamedColors:!0}),t||(t=(0,c.jsx)(o.IconButton,{name:"times",onClick:y,tooltip:"Remove color",tooltipPlacement:"top"}))]}),!u.color&&(0,c.jsx)(o.ColorPicker,{color:"gray",onChange:x,enableNamedColors:!0,children:e=>(0,c.jsx)(o.Button,{variant:"primary",fill:"text",onClick:e.showColorPicker,ref:e.ref,size:"sm",children:"Set color"})})]}),(0,c.jsx)("td",{className:m.textAlignCenter,children:(0,c.jsxs)(o.HorizontalGroup,{spacing:"sm",children:[(0,c.jsx)(o.IconButton,{name:"copy",onClick:()=>l(n),"data-testid":"duplicate-value-mapping"}),(0,c.jsx)(o.IconButton,{name:"trash-alt",onClick:()=>i(n),"data-testid":"remove-value-mapping"})]})})]}))}})}const b=e=>({dragHandle:(0,m.css)({cursor:"grab"}),rangeInputWrapper:(0,m.css)({display:"flex","> div:first-child":{marginRight:e.spacing(2)}}),regexInputWrapper:(0,m.css)({display:"flex","> div:first-child":{marginRight:e.spacing(2)}}),typeColumn:(0,m.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,m.css)({textAlign:"center"})});function v(e){let{value:t,onChange:a,onClose:n}=e;const r=(0,o.useStyles2)(x),[i,l]=(0,s.useState)([]);(0,s.useEffect)((()=>{l(w(t))}),[t]);const d=(e,t)=>{const a=[...i];a.splice(e,1,t),l(a)},u=e=>{const t=[...i];t.splice(e,1),l(t)},p=[{label:"Value",value:h.MappingType.ValueToText,description:"Match a specific text value"},{label:"Range",value:h.MappingType.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:h.MappingType.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:h.MappingType.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],m=e=>{l([...i,{type:e.value,isNew:!0,result:{}}])},b=e=>{const t=i[e],a=[...i];a.splice(e,0,Object.assign({},t));for(let t=e;t<i.length;t++)a[t].result.index=t;l(a)};return(0,s.useEffect)((()=>{null!=t&&t.length||m({value:h.MappingType.ValueToText})}),[]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:r.tableWrap,children:(0,c.jsxs)("table",{className:r.editTable,children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{style:{width:"1%"}}),(0,c.jsx)("th",{style:{width:"40%",textAlign:"left"},colSpan:2,children:"Condition"}),(0,c.jsx)("th",{style:{textAlign:"left"},children:"Display text"}),(0,c.jsx)("th",{style:{width:"10%"},children:"Color"}),(0,c.jsx)("th",{style:{width:"1%"}})]})}),(0,c.jsx)(g.Z5,{onDragEnd:e=>{if(!t||!e.destination)return;const a=[...i],s=a[e.source.index];a.splice(e.source.index,1),a.splice(e.destination.index,0,s),l(a)},children:(0,c.jsx)(g.bK,{droppableId:"sortable-field-mappings",direction:"vertical",children:e=>(0,c.jsxs)("tbody",Object.assign({ref:e.innerRef},e.droppableProps,{children:[i.map(((e,t)=>(0,c.jsx)(f,{mapping:e,index:t,onChange:d,onRemove:u,onDuplicate:b},t.toString()))),e.placeholder]}))})})]})}),(0,c.jsxs)(o.Modal.ButtonRow,{leftItems:(0,c.jsx)(o.ValuePicker,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:p,onChange:m}),children:[(0,c.jsx)(o.Button,{variant:"secondary",fill:"outline",onClick:n,children:"Cancel"}),(0,c.jsx)(o.Button,{variant:"primary",onClick:()=>{a(y(i)),n()},children:"Update"})]})]})}const x=e=>({tableWrap:m.css`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,m.css)({width:"100%",marginBottom:e.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:e.colors.action.hover}," th, td":{padding:e.spacing(1)}})});function y(e){const t=[],a={type:h.MappingType.ValueToText,options:{}};return e.forEach(((e,s)=>{const n=Object.assign({},e.result,{index:s});switch(n.text&&0!==n.text.trim().length||(n.text=void 0),e.type){case h.MappingType.ValueToText:null!=e.key&&(a.options[e.key]=n);break;case h.MappingType.RangeToText:null!=e.from&&null!=e.to&&t.push({type:e.type,options:{from:e.from,to:e.to,result:n}});break;case h.MappingType.RegexToText:null!=e.pattern&&t.push({type:e.type,options:{pattern:e.pattern,result:n}});break;case h.MappingType.SpecialValue:t.push({type:e.type,options:{match:e.specialMatch,result:n}})}})),Object.keys(a.options).length>0&&t.unshift(a),t}function w(e){var t,a,s;const n=[];for(const r of e)switch(r.type){case h.MappingType.ValueToText:for(const e of Object.keys(r.options))n.push({type:r.type,result:r.options[e],key:e});break;case h.MappingType.RangeToText:n.push({type:r.type,result:r.options.result,from:null!==(t=r.options.from)&&void 0!==t?t:0,to:null!==(a=r.options.to)&&void 0!==a?a:0});break;case h.MappingType.RegexToText:n.push({type:r.type,result:r.options.result,pattern:r.options.pattern});break;case h.MappingType.SpecialValue:n.push({type:r.type,result:r.options.result,specialMatch:null!==(s=r.options.match)&&void 0!==s?s:h.SpecialValueMatch.Null})}return n.sort(((e,t)=>{var a,s;return(null!==(a=e.result.index)&&void 0!==a?a:0)>(null!==(s=t.result.index)&&void 0!==s?s:0)?1:-1})),n}var j,C,k;const S=s.memo((e=>{let{value:t,onChange:a}=e;const n=(0,o.useStyles2)(T),[r,i]=(0,s.useState)(!1),l=(0,s.useCallback)((()=>{i(!1)}),[i]),d=(0,s.useMemo)((()=>w(t)),[t]),u=(0,s.useCallback)(((e,t)=>{d[t].result.color=e,a(y(d))}),[d,a]);return(0,c.jsxs)(o.VerticalGroup,{children:[(0,c.jsx)("table",{className:n.compactTable,children:(0,c.jsx)("tbody",{children:d.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{children:[e.type===h.MappingType.ValueToText&&e.key,e.type===h.MappingType.RangeToText&&(0,c.jsxs)("span",{children:["[",e.from," - ",e.to,"]"]}),e.type===h.MappingType.RegexToText&&e.pattern,e.type===h.MappingType.SpecialValue&&e.specialMatch]}),j||(j=(0,c.jsx)("td",{children:(0,c.jsx)(o.Icon,{name:"arrow-right"})})),(0,c.jsx)("td",{children:e.result.text}),(0,c.jsx)("td",{children:e.result.color&&(0,c.jsx)(o.ColorPicker,{color:e.result.color,onChange:e=>u(e,t),enableNamedColors:!0})})]},t.toString())))})}),(0,c.jsxs)(o.Button,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>i(!0),children:[d.length>0&&(C||(C=(0,c.jsx)("span",{children:"Edit value mappings"}))),0===d.length&&(k||(k=(0,c.jsx)("span",{children:"Add value mappings"})))]}),(0,c.jsx)(o.Modal,{isOpen:r,title:"Value mappings",onDismiss:l,className:n.modal,closeOnBackdropClick:!1,children:(0,c.jsx)(v,{value:t,onChange:a,onClose:l})})]})}));S.displayName="ValueMappingsEditor";const T=e=>({modal:(0,m.css)({width:"980px"}),compactTable:(0,m.css)({width:"100%","tbody td":{padding:e.spacing(.5)}})});class O extends s.PureComponent{constructor(e){super(e)}render(){const{onChange:e}=this.props;let t=this.props.value;return t||(t=[]),(0,c.jsx)(S,{value:t,onChange:e})}}var _=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");const N=["key"];var I;function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const M=[{value:h.ThresholdsMode.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:h.ThresholdsMode.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class F extends s.PureComponent{constructor(e){super(e),P(this,"latestThresholdInputRef",void 0),P(this,"onAddThreshold",(()=>{const{steps:e}=this.state;let t=0;e.length>1&&(t=e[e.length-1].value+10);let a=o.colors.filter((t=>!e.some((e=>e.color===t))))[1];a||(a="#CCCCCC");const s={value:t,color:a,key:A++},n=[...e,s];(0,h.sortThresholds)(n),this.setState({steps:n},(()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()}))})),P(this,"onRemoveThreshold",(e=>{const{steps:t}=this.state;t.length&&e.key!==t[0].key&&this.setState({steps:t.filter((t=>t.key!==e.key))},this.onChange)})),P(this,"onChangeThresholdValue",((e,t)=>{const a=e.target.value.replace(/,/g,"."),s=parseFloat(a),n=isNaN(s)?"":s,r=this.state.steps.map((e=>(e.key===t.key&&(e=Object.assign({},e,{value:n})),e)));r.length&&(r[0].value=-1/0),(0,h.sortThresholds)(r),this.setState({steps:r})})),P(this,"onChangeThresholdColor",((e,t)=>{const{steps:a}=this.state,s=a.map((a=>(a.key===e.key&&(a=Object.assign({},a,{color:t})),a)));this.setState({steps:s},this.onChange)})),P(this,"onBlur",(()=>{const e=[...this.state.steps];(0,h.sortThresholds)(e),this.setState({steps:e},this.onChange)})),P(this,"onChange",(()=>{var e,t,a;this.props.onChange((e=this.props.thresholds,t=this.state.steps,{mode:null!==(a=e.mode)&&void 0!==a?a:h.ThresholdsMode.Absolute,steps:t.map((e=>function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,N)))}))})),P(this,"onModeChanged",(e=>{this.props.onChange(Object.assign({},this.props.thresholds,{mode:e}))}));const t=function(e){e&&0!==e.length||(e=[{value:-1/0,color:"green"}]);return e.filter(((e,t)=>(0,_.isNumber)(e.value)||0===t)).map((e=>({color:e.color,value:null===e.value?-1/0:e.value,key:A++})))}(e.thresholds.steps);t[0].value=-1/0,this.state={steps:t},this.latestThresholdInputRef=s.createRef()}renderInput(e,t,a){const s=this.props.thresholds.mode===h.ThresholdsMode.Percentage,n=`Threshold ${a+1}`;return isFinite(e.value)?(0,c.jsx)(o.Input,{type:"number",step:"0.0001",onChange:t=>this.onChangeThresholdValue(t,e),value:e.value,"aria-label":n,ref:0===a?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:(0,c.jsxs)("div",{className:t.inputPrefix,children:[(0,c.jsx)("div",{className:t.colorPicker,children:(0,c.jsx)(o.ColorPicker,{color:e.color,onChange:t=>this.onChangeThresholdColor(e,t),enableNamedColors:!0})}),s&&(0,c.jsx)("div",{className:t.percentIcon,children:"%"})]}),suffix:(0,c.jsx)(o.Icon,{className:t.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(e)})},s.toString()):(0,c.jsx)(o.Input,{type:"text",value:"Base","aria-label":n,disabled:!0,prefix:(0,c.jsx)("div",{className:t.colorPicker,children:(0,c.jsx)(o.ColorPicker,{color:e.color,onChange:t=>this.onChangeThresholdColor(e,t),enableNamedColors:!0})})})}render(){const{thresholds:e}=this.props,{steps:t}=this.state;return(0,c.jsx)(o.ThemeContext.Consumer,{children:a=>{const s=D(a.v1);return(0,c.jsxs)("div",{className:s.wrapper,children:[(0,c.jsx)(o.Button,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:s.addButton,fullWidth:!0,children:"Add threshold"}),(0,c.jsx)("div",{className:s.thresholds,children:t.slice(0).reverse().map(((e,t)=>(0,c.jsx)("div",{className:s.item,children:this.renderInput(e,s,t)},`${e.key}`)))}),(0,c.jsxs)("div",{children:[I||(I=(0,c.jsx)(o.Label,{description:"Percentage means thresholds relative to min & max",children:"Thresholds mode"})),(0,c.jsx)(o.RadioButtonGroup,{options:M,onChange:this.onModeChanged,value:e.mode})]})]})}})}}let A=100;const D=(0,o.stylesFactory)((e=>({wrapper:m.css`
      display: flex;
      flex-direction: column;
    `,thresholds:m.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${2*e.spacing.formSpacingBase}px;
    `,item:m.css`
      margin-bottom: ${e.spacing.sm};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:m.css`
      padding: 0 ${e.spacing.sm};
    `,addButton:m.css`
      margin-bottom: ${e.spacing.sm};
    `,percentIcon:m.css`
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
    `,inputPrefix:m.css`
      display: flex;
      align-items: center;
    `,trashIcon:m.css`
      color: ${e.colors.textWeak};
      cursor: pointer;

      &:hover {
        color: ${e.colors.text};
      }
    `})));class $ extends s.PureComponent{constructor(e){super(e)}render(){const{onChange:e}=this.props;let t=this.props.value;return t||(t={mode:h.ThresholdsMode.Percentage,steps:[]}),(0,c.jsx)(F,{thresholds:t,onChange:e})}}const L=()=>{const e={id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:u},t={id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:O},a={id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:$};return[...(0,o.getStandardOptionEditors)(),e,t,a]},R=()=>{const e={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:h.standardEditorsRegistry.get("mappings").editor,override:h.standardEditorsRegistry.get("mappings").editor,process:h.valueMappingsOverrideProcessor,settings:{},defaultValue:[],shouldApply:e=>e.type!==h.FieldType.time,category:["Value mappings"],getItemsCount:e=>e?e.length:0},t={id:"thresholds",path:"thresholds",name:"Thresholds",editor:h.standardEditorsRegistry.get("thresholds").editor,override:h.standardEditorsRegistry.get("thresholds").editor,process:h.thresholdsOverrideProcessor,settings:{},defaultValue:{mode:h.ThresholdsMode.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:e=>e?e.steps.length:0};return[...(0,o.getStandardFieldConfigs)(),e,t]}},"./public/app/core/components/help/HelpModal.tsx":(e,t,a)=>{"use strict";a.d(t,{B:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s,n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o={Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","p"],description:"Go to Profile"},{keys:["s","o"],description:"Open search"},{keys:["esc"],description:"Exit edit/setting views"}],Dashboard:[{keys:["mod+s"],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:["mod+o"],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","←"],description:"Move time range back"},{keys:["t","→"],description:"Move time range forward"},{keys:["t","a"],description:"Make time range absolute/permanent"}]},l=e=>{let{onDismiss:t}=e;const a=(0,r.useStyles2)(c);return(0,i.jsxs)(r.Modal,{title:"Shortcuts",isOpen:!0,onDismiss:t,onClickBackdrop:t,children:[(0,i.jsxs)("div",{className:a.titleDescription,children:[(0,i.jsx)("span",{className:a.shortcutTableKey,children:"mod"})," =",s||(s=(0,i.jsx)("span",{children:" CTRL on windows or linux and CMD key on Mac"}))]}),(0,i.jsx)("div",{className:a.categories,children:Object.entries(o).map(((e,t)=>{let[s,n]=e;return(0,i.jsx)("div",{className:a.shortcutCategory,children:(0,i.jsx)("table",{className:a.shortcutTable,children:(0,i.jsxs)("tbody",{children:[(0,i.jsx)("tr",{children:(0,i.jsx)("th",{className:a.shortcutTableCategoryHeader,colSpan:2,children:s})}),n.map(((e,s)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:a.shortcutTableKeys,children:e.keys.map(((e,n)=>(0,i.jsx)("span",{className:a.shortcutTableKey,children:e},`${t}-${s}-${n}`)))}),(0,i.jsx)("td",{className:a.shortcutTableDescription,children:e.description})]},`${t}-${s}`)))]})})},t)}))})]})};function c(e){return{titleDescription:n.css`
      font-size: ${e.typography.bodySmall.fontSize};
      font-weight: ${e.typography.bodySmall.fontWeight};
      color: ${e.colors.text.disabled};
      padding-bottom: ${e.spacing(2)};
    `,categories:n.css`
      font-size: ${e.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:n.css`
      width: 50%;
      font-size: ${e.typography.bodySmall.fontSize};
    `,shortcutTable:n.css`
      margin-bottom: ${e.spacing(2)};
    `,shortcutTableCategoryHeader:n.css`
      font-weight: normal;
      font-size: ${e.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:n.css`
      text-align: left;
      color: ${e.colors.text.disabled};
      width: 99%;
      padding: ${e.spacing(1,2)};
    `,shortcutTableKeys:n.css`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${e.colors.text.primary};
    `,shortcutTableKey:n.css`
      display: inline-block;
      text-align: center;
      margin-right: ${e.spacing(.5)};
      padding: 3px 5px;
      font: 11px Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${e.colors.border.medium};
      border-radius: ${e.shape.borderRadius(3)};
      color: ${e.colors.text.primary};
      background-color: ${e.colors.background.secondary};
    `}}},"./public/app/core/config.ts":(e,t,a)=>{"use strict";a.d(t,{vc:()=>r.config,ZP:()=>l,iE:()=>c,Oh:()=>d});var s,n,r=a("./packages/grafana-runtime/src/index.ts"),i=a("./packages/grafana-data/src/index.ts");let o=r.config;const l=o,c=()=>o,d=Boolean((null===(s=r.config.panels)||void 0===s||null===(n=s.debug)||void 0===n?void 0:n.state)===i.PluginState.alpha)},"./public/app/core/constants.ts":(e,t,a)=>{"use strict";a.d(t,{K3:()=>s,hD:()=>n,cz:()=>r,OA:()=>i,yM:()=>o,kh:()=>l,b0:()=>c,AV:()=>d,zF:()=>u,QO:()=>p,gN:()=>h,FL:()=>m});const s=30,n=8,r=24,i="v",o="h",l=4,c=250,d=3*s,u="panel-copy",p=2,h=40,m="VisualizationSelectPane.ListMode"},"./public/app/core/copy/appNotification.ts":(e,t,a)=>{"use strict";a.d(t,{AT:()=>c,t_:()=>d,ZR:()=>u});var s=a("./public/app/types/index.ts"),n=a("./public/app/core/utils/errors.ts"),r=a("../../opt/drone/yarncache/uuid-npm-8.3.2-eca0baba53-5575a8a75c.zip/node_modules/uuid/dist/esm-browser/v4.js");const i={title:"",text:"",severity:s.F1.Success,icon:"check",timeout:s.bd.Success},o={title:"",text:"",severity:s.F1.Warning,icon:"exclamation-triangle",timeout:s.bd.Warning},l={title:"",text:"",severity:s.F1.Error,icon:"exclamation-triangle",timeout:s.bd.Error},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.assign({},i,{title:e,text:t,id:(0,r.Z)()})},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;return Object.assign({},l,{text:(0,n.i)(t),title:e,id:(0,r.Z)(),component:a})},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.assign({},o,{title:e,text:t,id:(0,r.Z)()})}},"./public/app/core/core.ts":(e,t,a)=>{"use strict";a.d(t,{h$:()=>c.Z,Vt:()=>d.Vt,rv:()=>u.r,Wz:()=>p.W});var s=a("../../opt/drone/yarncache/jquery-npm-3.6.0-ca7872bdbb-8fd5fef4aa.zip/node_modules/jquery/dist/jquery-exposed.js"),n=a.n(s),r=a("../../opt/drone/yarncache/angular-npm-1.8.2-307000482b-35ea81a23b.zip/node_modules/angular/index.js"),i=a.n(r),o=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");const l=n()(window);n().fn.place_tt=(()=>{const e={offset:5};return function(t,a,s){return s=n().extend(!0,{},e,s),this.each((()=>{const e=n()(this);let r,c;e.addClass("grafana-tooltip"),n()("#tooltip").remove(),e.appendTo(document.body),s.compile&&i().element(document).injector().invoke(["$compile","$rootScope",(t,a)=>{const n=a.$new(!0);(0,o.extend)(n,s.scopeData),t(e)(n),n.$digest(),n.$destroy()}]),r=e.outerWidth(!0),c=e.outerHeight(!0);const d=t+s.offset+r>l.width()?t-s.offset-r:t+s.offset,u=a+s.offset+c>l.height()?a-s.offset-c:a+s.offset;e.css("left",d>0?d:0),e.css("top",u>0?u:0)}))}})();a("./public/app/core/services/search_srv.ts"),a("./packages/grafana-ui/src/index.ts");var c=a("./public/app/core/app_events.ts"),d=a("./public/app/core/services/context_srv.ts"),u=(a("./public/app/core/services/keybindingSrv.ts"),a("./public/app/core/profiler.ts")),p=a("./public/app/core/time_series2.ts")},"./public/app/core/hooks/useQueryParams.ts":(e,t,a)=>{"use strict";a.d(t,{K:()=>i});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/react-router-virtual-31642fe47a/3/opt/drone/yarncache/react-router-npm-5.2.1-ea754d7473-7daae084bf.zip/node_modules/react-router/esm/react-router.js");function i(){const{search:e}=(0,r.TH)();return[(0,n.useMemo)((()=>(0,s.locationSearchToObject)(e||"")),[e]),(0,n.useCallback)(((e,t)=>s.locationService.partial(e,t)),[])]}},"./public/app/core/logs_model.ts":(e,t,a)=>{"use strict";a.d(t,{Qp:()=>u,aB:()=>C,UW:()=>y,nu:()=>w,Bz:()=>T});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-schema/src/index.ts"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./packages/grafana-data/src/index.ts"),o=a("./public/app/core/config.ts");var l=a("./packages/grafana-data/src/valueFormats/symbolFormatters.ts"),c=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Observable.js");const d="Line limit",u="Common labels",p={[i.LogLevel.critical]:r.colors[7],[i.LogLevel.warning]:r.colors[1],[i.LogLevel.error]:r.colors[4],[i.LogLevel.info]:r.colors[0],[i.LogLevel.debug]:r.colors[5],[i.LogLevel.trace]:r.colors[2],[i.LogLevel.unknown]:(h="#8e8e8e",m="#dde4ed",o.ZP.bootData.user.lightTheme?m:h)};var h,m;const g=1e3,f=6e4,b=36e5,v=24*b,x=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function y(e,t){return t===i.LogsDedupStrategy.none?e:e.reduce(((e,a,s)=>{const n=Object.assign({},a),r=e[e.length-1];return s>0&&function(e,t,a){switch(a){case i.LogsDedupStrategy.exact:return e.entry.replace(x,"")===t.entry.replace(x,"");case i.LogsDedupStrategy.numbers:return e.entry.replace(/\d/g,"")===t.entry.replace(/\d/g,"");case i.LogsDedupStrategy.signature:return e.entry.replace(/\w/g,"")===t.entry.replace(/\w/g,"");default:return!1}}(a,r,t)?r.duplicates++:(n.duplicates=0,e.push(n)),e}),[])}function w(e,t){return 0===t.size?e:e.filter((e=>!t.has(e.logLevel)))}function j(e){return e.fields.some((e=>e.type===i.FieldType.time))&&e.fields.some((e=>e.type===i.FieldType.string))}function C(e,t,a,o){const{logSeries:c}=function(e){const t=[],a=[];for(const s of e)!j(s)&&s.fields.length?s.length>0&&t.push(s):a.push(s);return{logSeries:a,metricSeries:t}}(e),h=function(e){if(0===e.length)return;const t=[];let a=[];const n=e.filter((e=>e.fields.length));n.length&&n.forEach((e=>{const s=new i.FieldCache(e),n=s.getFirstFieldOfType(i.FieldType.string),r=s.getFirstFieldOfType(i.FieldType.time);void 0!==n&&void 0!==r&&(null!=n&&n.labels&&t.push(n.labels),a.push({series:e,timeField:r,timeNanosecondField:s.hasFieldWithNameAndType("tsNs",i.FieldType.time)?s.getFieldByName("tsNs"):void 0,stringField:n,logLevelField:s.getFieldByName("level"),idField:k(s)}))}));const o=t.length>0?(0,i.findCommonLabels)(t):{},c=[];let p=!1;for(const e of a){const{timeField:t,timeNanosecondField:a,stringField:s,logLevelField:n,idField:l,series:d}=e,u=s.labels,m=(0,i.findUniqueLabels)(u,o);let g;Object.keys(m).length>0&&(p=!0),u&&-1!==Object.keys(u).indexOf("level")&&(g=(0,i.getLogLevelFromKey)(u.level));for(let e=0;e<d.length;e++){var h;const o=t.values.get(e),u=(0,i.toUtc)(o),p=a?a.values.get(e):void 0,f=p||u.valueOf()+"000000",b=null!==(h=s.values.get(e))&&void 0!==h?h:"",v="string"==typeof b?b:JSON.stringify(b),x=i.textUtil.hasAnsiCodes(v),y=!!v.match(/\\n|\\t|\\r/),w=d.meta&&d.meta.searchWords?d.meta.searchWords:[],j=x?r.ansicolor.strip(v):v;let C=i.LogLevel.unknown;C=n&&n.values.get(e)?(0,i.getLogLevelFromKey)(n.values.get(e)):g||(0,i.getLogLevel)(j),c.push({entryFieldIndex:s.index,rowIndex:e,dataFrame:d,logLevel:C,timeFromNow:(0,i.dateTimeFormatTimeAgo)(o),timeEpochMs:u.valueOf(),timeEpochNs:f,timeLocal:(0,i.dateTimeFormat)(o,{timeZone:"browser"}),timeUtc:(0,i.dateTimeFormat)(o,{timeZone:"utc"}),uniqueLabels:m,hasAnsi:x,hasUnescapedContent:y,searchWords:w,entry:j,raw:v,labels:s.labels||{},uid:l?l.values.get(e):e.toString()})}}const m=[];(0,s.size)(o)>0&&m.push({label:u,value:o,kind:i.LogsMetaKind.LabelsMap});const g=e.filter((e=>e.meta&&e.meta.limit)),f=Object.values(g.reduce(((e,t)=>(e[t.refId]=t.meta.limit,e)),{})).reduce(((e,t)=>e+t),0);f>0&&m.push({label:d,value:f,kind:i.LogsMetaKind.Number});let b=0;const v={};let x=!1;for(const t of e){var y,w,j,C;const e=null===(y=t.meta)||void 0===y||null===(w=y.custom)||void 0===w?void 0:w.lokiQueryStatKey,{refId:a}=t;var S;if(!x&&null!==(j=t.meta)&&void 0!==j&&null!==(C=j.custom)&&void 0!==C&&C.error)m.push({label:"",value:null===(S=t.meta)||void 0===S?void 0:S.custom.error,kind:i.LogsMetaKind.Error}),x=!0;if(a&&!v[a]){var T;if(e&&null!==(T=t.meta)&&void 0!==T&&T.stats){const a=t.meta.stats.find((t=>t.displayName===e));a&&(b+=a.value)}v[a]=!0}}if(b>0){const{text:e,suffix:t}=(0,l.i7)("B")(b);m.push({label:"Total bytes processed",value:`${e} ${t}`,kind:i.LogsMetaKind.String})}return{hasUniqueLabels:p,meta:m,rows:c}}(c);if(h){if(t&&h.rows.length>0){const e=h.rows.sort(i.sortInAscendingOrder),{visibleRange:s,bucketSize:r,visibleRangeMs:o,requestedRangeMs:l}=function(e,t,a){let s,n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,o=a,l=t,c=Math.max(l*r,i);if(a){const t=e[0].timeEpochMs;if(n=a.to-a.from,s=a.to-t,s>0){l*=s/n,c=Math.max(Math.ceil(l*r),i);o={from:Math.floor(t/c)*c,to:a.to}}else s=1}return{bucketSize:c,visibleRange:o,visibleRangeMs:s,requestedRangeMs:n}}(e,t,a);h.visibleRange=s,h.series=function(e,t){const a={},s=[];for(const n of e){let e=a[n.logLevel];e||(a[n.logLevel]=e={lastTs:null,datapoints:[],target:n.logLevel,color:p[n.logLevel]},s.push(e));const r=Math.floor(n.timeEpochMs/t)*t;r===e.lastTs?e.datapoints[e.datapoints.length-1][0]++:(e.datapoints.push([1,r]),e.lastTs=r);for(const t of s)t!==e&&t.lastTs!==r&&(t.datapoints.push([0,r]),t.lastTs=r)}return s.map(((e,t)=>{e.datapoints.sort(((e,t)=>e[1]-t[1]));const a=(0,i.toDataFrame)(e),s=new i.FieldCache(a).getFirstFieldOfType(i.FieldType.number);return a.fields[s.index].config.min=0,a.fields[s.index].config.decimals=0,a.fields[s.index].config.color={mode:i.FieldColorModeId.Fixed,fixedColor:e.color},a.fields[s.index].config.custom={drawStyle:n.l8.Bars,barAlignment:n.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:e.color,pointColor:e.color,fillColor:e.color,lineWidth:0,fillOpacity:100,stacking:{mode:n.o0.Normal,group:"A"}},a}))}(e,r),h.meta&&(h.meta=function(e,t,a){var s;let n=[...e.meta];const r=n.findIndex((e=>e.label===d)),o=r>=0&&(null===(s=n[r])||void 0===s?void 0:s.value);if(o&&o>0){let s;if(o===e.rows.length&&t&&a){s=`${o} reached, received logs cover ${(t/a*100).toFixed(2)}% (${i.rangeUtil.msRangeToTimeString(t)}) of your selected time range (${i.rangeUtil.msRangeToTimeString(a)})`}else s=`${o} (${e.rows.length} returned)`;n[r]={label:d,value:s,kind:i.LogsMetaKind.String}}return n}(h,o,l))}else h.series=[];return h.queries=o,h}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:o}}function k(e){const t=["id"];for(const a of t){const t=e.getFieldByName(a);if(t)return t}}function S(e,t){const a={};return e.forEach((e=>{const s=t(e);a[s]||(a[s]=[]),a[s].push(e)})),Object.keys(a).map((e=>function(e,t){const a=new i.MutableDataFrame;if(!e.length)return a;const s=e[0].length,n=new i.FieldCache(e[0]).getFirstFieldOfType(i.FieldType.time);if(!n)return a;return a.addField({name:"Time",type:i.FieldType.time},s),a.addField({name:"Value",type:i.FieldType.number,config:t},s),e.forEach((e=>{e.fields.forEach((e=>{if(e.type===i.FieldType.number)for(let t=0;t<s;t++){const s=a.get(t).Value,r=e.values.get(t),i=null===s&&null===r?null:(s||0)+(r||0);a.set(t,{Value:i,Time:n.values.get(t)})}}))})),a}(a[e],function(e,t){const a=t&&e===i.LogLevel.unknown?"logs":e,s=p[e];return{displayNameFromDS:a,color:{mode:i.FieldColorModeId.Fixed,fixedColor:s},custom:{drawStyle:n.l8.Bars,barAlignment:n.pu.Center,lineColor:s,pointColor:s,fillColor:s,lineWidth:1,fillOpacity:100,stacking:{mode:n.o0.Normal,group:"A"}}}}(e,1===Object.keys(a).length))))}function T(e,t,a){const s=a.range.to.valueOf()-a.range.from.valueOf(),n=function(e,t){if(e.__interval){let a=e.__interval_ms.value,s="";return t<5e3?(a=1,s="1ms"):a>b?(a=v,s="1d"):a>f?(a=b,s="1h"):a>g?(a=f,s="1m"):(a=g,s="1s"),{interval:s,intervalMs:a}}return{interval:"$__interval"}}(t.scopedVars,s);return t.interval=n.interval,t.scopedVars.__interval={value:n.interval,text:n.interval},void 0!==n.intervalMs&&(t.intervalMs=n.intervalMs,t.scopedVars.__interval_ms={value:n.intervalMs,text:n.intervalMs}),new c.y((s=>{let n=[];s.next({state:i.LoadingState.Loading,error:void 0,data:[]});const r=e.query(t).subscribe({complete:()=>{const e=S(n,a.extractLevel);e[0]&&(e[0].meta={custom:{targets:a.targets,absoluteRange:{from:a.range.from.valueOf(),to:a.range.to.valueOf()}}}),s.next({state:i.LoadingState.Done,error:void 0,data:e}),s.complete()},next:e=>{n=n.concat(e.data.map(i.toDataFrame))},error:e=>{s.next({state:i.LoadingState.Error,error:e,data:[]}),s.error(e)}});return()=>{null==r||r.unsubscribe()}}))}},"./public/app/core/navigation/kiosk.ts":(e,t,a)=>{"use strict";a.d(t,{qk:()=>o,U6:()=>l,ZC:()=>c});var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./public/app/core/app_events.ts"),i=a("./public/app/types/index.ts");function o(){let e=n.locationService.getSearchObject().kiosk;switch(e){case"tv":e=!0,r.Z.emit(s.AppEvents.alertSuccess,["Press ESC to exit Kiosk mode"]);break;case"1":case!0:e=null;break;default:e="tv"}n.locationService.partial({kiosk:e})}function l(e){switch(e){case"tv":return i.UX.TV;case"1":case!0:return i.UX.Full;default:return i.UX.Off}}function c(){n.locationService.partial({kiosk:null})}},"./public/app/core/profiler.ts":(e,t,a)=>{"use strict";function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{r:()=>n});const n=new class{constructor(){s(this,"panelsRendered",0),s(this,"enabled",void 0)}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}},"./public/app/core/reducers/appNotification.ts":(e,t,a)=>{"use strict";a.d(t,{$l:()=>n,uY:()=>r,VW:()=>i});const s=(0,a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").oM)({name:"appNotifications",initialState:{appNotifications:[]},reducers:{notifyApp:(e,t)=>{const a=t.payload;for(const t of e.appNotifications)if(a.icon===t.icon&&a.severity===t.severity&&a.text===t.text&&a.title===t.title&&a.component===t.component)return;e.appNotifications.push(a)},clearAppNotification:(e,t)=>Object.assign({},e,{appNotifications:e.appNotifications.filter((e=>e.id!==t.payload))})}}),{notifyApp:n,clearAppNotification:r}=s.actions,i=s.reducer},"./public/app/core/reducers/navModel.ts":(e,t,a)=>{"use strict";a.d(t,{Cu:()=>r,RL:()=>l,H7:()=>c,G4:()=>u});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./public/app/core/config.ts");function r(){const e={};return i(e,n.ZP.bootData.navTree),e}function i(e,t,a){for(const s of t)e[s.id]=Object.assign({},s,{parentItem:a}),s.children&&i(e,s.children,s);e["not-found"]=Object.assign({},function(e,t){const a={text:e,subTitle:t,icon:"exclamation-triangle"};return{breadcrumbs:[a],node:a,main:a}}("Page not found","404 Error").node)}const o={},l=(0,s.PH)("navIndex/updateNavIndex"),c=(0,s.PH)("navIndex/updateConfigurationSubtitle"),d=(e,t)=>{var a,s;return Object.assign({},e,{parentItem:Object.assign({},e.parentItem,{text:null!==(a=null===(s=e.parentItem)||void 0===s?void 0:s.text)&&void 0!==a?a:"",subTitle:t})})},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;if(l.match(t)){const a={},s=t.payload;for(const e of s.children)a[e.id]=Object.assign({},e,{parentItem:s});return Object.assign({},e,a)}if(c.match(t)){const a=`Organization: ${t.payload}`;return Object.assign({},e,{cfg:Object.assign({},e.cfg,{subTitle:a}),datasources:d(e.datasources,a),users:d(e.users,a),teams:d(e.teams,a),plugins:d(e.plugins,a),"org-settings":d(e["org-settings"],a),apikeys:d(e.apikeys,a)})}return e}},"./public/app/core/selectors/navModel.ts":(e,t,a)=>{"use strict";a.d(t,{h:()=>n,o:()=>r});const s=()=>{const e={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:e,main:e}},n=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e[t]){const a=e[t];let s;return!n&&a.parentItem?(s=Object.assign({},a.parentItem),s.children=s.children&&s.children.map((e=>Object.assign({},e,{active:e.url===a.url})))):s=a,{node:a,main:s}}return a||s()},r=e=>`${e.main.text}${e.node.text?": "+e.node.text:""}`},"./public/app/core/services/PreferencesService.ts":(e,t,a)=>{"use strict";a.d(t,{y:()=>n});var s=a("./public/app/core/services/backend_srv.ts");class n{constructor(e){this.resourceUri=e}update(e){return s.ae.put(`/api/${this.resourceUri}/preferences`,e)}load(){return s.ae.get(`/api/${this.resourceUri}/preferences`)}}},"./public/app/core/services/backend_srv.ts":(e,t,a)=>{"use strict";a.d(t,{y$:()=>q,ae:()=>W,i:()=>G});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Subject.js"),n=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/lastValueFrom.js"),r=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Observable.js"),i=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Subscription.js"),o=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/merge.js"),l=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/throwError.js"),c=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),d=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/from.js"),u=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),p=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/filter.js"),h=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/tap.js"),m=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),g=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),f=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/share.js"),b=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/retryWhen.js"),v=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),x=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/throwIfEmpty.js"),y=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/dom/fetch.js"),w=a("../../opt/drone/yarncache/uuid-npm-8.3.2-eca0baba53-5575a8a75c.zip/node_modules/uuid/dist/esm-browser/v4.js"),j=a("./packages/grafana-data/src/index.ts"),C=a("./public/app/core/app_events.ts"),k=a("./public/app/core/config.ts"),S=a("./public/app/core/services/context_srv.ts"),T=a("./public/app/core/utils/fetch.ts"),O=a("./public/app/core/utils/query.ts");function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let N;!function(e){e[e.Pending=0]="Pending",e[e.InProgress=1]="InProgress",e[e.Done=2]="Done"}(N||(N={}));class I{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_(this,"state",{}),_(this,"queue",new s.x),_(this,"updates",new s.x),_(this,"add",((e,t)=>this.queue.next({id:e,options:t,state:N.Pending}))),_(this,"setInProgress",(e=>this.queue.next({id:e,state:N.InProgress}))),_(this,"setDone",(e=>this.queue.next({id:e,state:N.Done}))),_(this,"getUpdates",(()=>this.updates.asObservable())),_(this,"getUpdate",(e=>{const t=Object.keys(e).filter((t=>e[t].state===N.InProgress)).length;return{noOfPending:Object.keys(e).filter((t=>e[t].state===N.Pending)).length,noOfInProgress:t,state:e}})),_(this,"publishUpdate",((e,t)=>{this.printState(e,t),this.updates.next(e)})),_(this,"printState",((e,t)=>{if(!t)return;const a=Object.keys(e.state).reduce(((t,a)=>{const s={id:a,state:e.state[a].state};return t.push(s),t}),[]);console.log("FetchQueue noOfStarted",e.noOfInProgress),console.log("FetchQueue noOfNotStarted",e.noOfPending),console.log("FetchQueue state",a)})),this.queue.subscribe((t=>{const{id:a,state:s,options:n}=t;if(this.state[a]||(this.state[a]={state:N.Pending,options:{}}),s===N.Done){delete this.state[a];const t=this.getUpdate(this.state);return void this.publishUpdate(t,e)}this.state[a].state=s,n&&(this.state[a].options=n);const r=this.getUpdate(this.state);this.publishUpdate(r,e)}))}}function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class M{constructor(e,t){P(this,"queue",new s.x),P(this,"responses",new s.x),P(this,"add",((e,t)=>{this.queue.next({id:e,options:t})})),P(this,"getResponses",(e=>this.responses.asObservable().pipe((0,p.h)((t=>t.id===e))))),this.queue.subscribe((a=>{const{id:s,options:n}=a;e.setInProgress(s),this.responses.next({id:s,observable:t(n)})}))}}var F=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/concatMap.js");class A{constructor(e,t,a){const s=null!=a&&a.http2Enabled?1e3:5;e.getUpdates().pipe((0,p.h)((e=>{let{noOfPending:t}=e;return t>0})),(0,F.b)((e=>{let{state:t,noOfInProgress:a}=e;const n=Object.keys(t).filter((e=>t[e].state===N.Pending&&!(0,O.mu)(t[e].options.url))).reduce(((e,a)=>{const s={id:a,options:t[a].options};return e.push(s),e}),[]),r=Object.keys(t).filter((e=>t[e].state===N.Pending&&(0,O.mu)(t[e].options.url))).reduce(((e,a)=>{const s={id:a,options:t[a].options};return e.push(s),e}),[]),i=Math.max(s-a-n.length,0),o=r.slice(0,i);return n.concat(o)}))).subscribe((e=>{let{id:a,options:s}=e;t.add(a,s)}))}}a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var D,$=a("./packages/grafana-ui/src/index.ts"),L=a("./packages/grafana-ui/src/components/Modal/getModalStyles.ts"),R=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),E=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const z=e=>{const t=(0,$.useTheme2)(),a=V(t),s=(0,L.J)(t),n=Boolean(e.maxConcurrentSessions);return(0,E.jsxs)($.Portal,{children:[(0,E.jsx)("div",{className:s.modal,children:(0,E.jsxs)($.InfoBox,{title:"You have been automatically signed out",severity:"warning",className:a.infobox,children:[(0,E.jsxs)("div",{className:a.text,children:[(0,E.jsxs)("p",{children:["Your session token was automatically revoked because you have reached",(0,E.jsx)("strong",{children:` the maximum number of ${n?e.maxConcurrentSessions:""} concurrent sessions `}),"for your account."]}),D||(D=(0,E.jsxs)("p",{children:[(0,E.jsx)("strong",{children:"To resume your session, sign in again."}),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically."]}))]}),(0,E.jsx)($.Button,{size:"md",variant:"primary",onClick:()=>{window.location.reload()},children:"Sign in"})]})}),(0,E.jsx)("div",{className:(0,R.cx)(s.modalBackdrop,a.backdrop)})]})},V=(0,$.stylesFactory)((e=>({infobox:R.css`
      margin-bottom: 0;
    `,text:R.css`
      margin: ${e.spacing(1,0,2)};
    `,backdrop:R.css`
      background-color: ${e.colors.background.canvas};
      opacity: 0.8;
    `})));var B=a("./public/app/types/events.ts");function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const H="cancel_all_requests_request_id";class q{constructor(e){U(this,"inFlightRequests",new s.x),U(this,"HTTP_REQUEST_CANCELED",-1),U(this,"noBackendCache",void 0),U(this,"inspectorStream",new s.x),U(this,"fetchQueue",void 0),U(this,"responseQueue",void 0),U(this,"dependencies",{fromFetch:y.U,appEvents:C.Z,contextSrv:S.Vt,logout:()=>{S.Vt.setLoggedOut(),window.location.reload()}}),e&&(this.dependencies=Object.assign({},this.dependencies,e)),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new I,this.responseQueue=new M(this.fetchQueue,this.internalFetch),new A(this.fetchQueue,this.responseQueue,(0,k.iE)())}async request(e){return await(0,n.n)(this.fetch(e).pipe((0,u.U)((e=>e.data))))}fetch(e){const t=(0,w.Z)(),a=this.fetchQueue;return new r.y((s=>{const n=new i.w0;return n.add(this.responseQueue.getResponses(t).subscribe((e=>{n.add(e.observable.subscribe(s))}))),this.fetchQueue.add(t,e),function(){a.setDone(t),n.unsubscribe()}}))}internalFetch(e){e.requestId&&this.inFlightRequests.next(e.requestId),e=this.parseRequestOptions(e);const t=this.getFromFetchStream(e),a=t.pipe(this.toFailureStream(e)),s=t.pipe((0,p.h)((e=>!0===e.ok)),(0,h.b)((e=>{this.showSuccessAlert(e),this.inspectorStream.next(e)})));return(0,o.T)(s,a).pipe((0,m.K)((t=>(0,l._)(this.processRequestError(e,t)))),this.handleStreamCancellation(e))}resolveCancelerIfExists(e){this.inFlightRequests.next(e)}cancelAllInFlightRequests(){this.inFlightRequests.next(H)}async datasourceRequest(e){return(0,n.n)(this.fetch(e))}parseRequestOptions(e){var t,a;const s=null===(t=this.dependencies.contextSrv.user)||void 0===t?void 0:t.orgId;if(e.retry=null!==(a=e.retry)&&void 0!==a?a:0,(0,O.R8)(e.url)){var n,r,i;if(s)e.headers=null!==(r=e.headers)&&void 0!==r?r:{},e.headers["X-Grafana-Org-Id"]=s;if(e.url.startsWith("/")&&(e.url=e.url.substring(1)),null!==(n=e.headers)&&void 0!==n&&n.Authorization&&(e.headers["X-DS-Authorization"]=e.headers.Authorization,delete e.headers.Authorization),this.noBackendCache)e.headers=null!==(i=e.headers)&&void 0!==i?i:{},e.headers["X-Grafana-NoCache"]="true"}return void 0===e.hideFromInspector&&(e.hideFromInspector=(0,O.R8)(e.url)&&!(0,O.mu)(e.url)),e}getFromFetchStream(e){const t=(0,T.Xv)(e),a=(0,T.nS)(e);return this.dependencies.fromFetch(t,a).pipe((0,g.z)((async t=>{var a;const{status:s,statusText:n,ok:r,headers:i,url:o,type:l,redirected:c}=t,d=null!==(a=e.responseType)&&void 0!==a?a:(0,T.rZ)(i)?"json":void 0;return{status:s,statusText:n,ok:r,data:await(0,T.aO)(t,d),headers:i,url:o,type:l,redirected:c,config:e}})),(0,f.B)())}toFailureStream(e){const{isSignedIn:t}=this.dependencies.contextSrv.user;return a=>a.pipe((0,p.h)((e=>!1===e.ok)),(0,g.z)((t=>{const{status:a,statusText:s,data:n}=t,r={status:a,statusText:s,data:n,config:e};return(0,l._)(r)})),(0,b.a)((a=>a.pipe((0,g.z)(((a,s)=>{const n=0===s&&0===e.retry;var r,i,o,u;return 401===a.status&&(0,O.R8)(e.url)&&n&&t?"ERR_TOKEN_REVOKED"===(null===(r=a.data)||void 0===r||null===(i=r.error)||void 0===i?void 0:i.id)?(this.dependencies.appEvents.publish(new B.Dn({component:z,props:{maxConcurrentSessions:null===(o=a.data)||void 0===o||null===(u=o.error)||void 0===u?void 0:u.maxConcurrentSessions}})),(0,c.of)({})):(0,d.D)(this.loginPing()).pipe((0,m.K)((e=>401===e.status?(this.dependencies.logout(),(0,l._)(e)):(0,l._)(e)))):(0,l._)(a)}))))))}showApplicationErrorAlert(e){}showSuccessAlert(e){const{config:t}=e;if(!1===t.showSuccessAlert)return;if(void 0===t.showSuccessAlert&&("GET"===t.method||(0,O.mu)(t.url)||!(0,O.R8)(t.url)))return;const a=e.data;null!=a&&a.message&&this.dependencies.appEvents.emit(j.AppEvents.alertSuccess,[a.message])}showErrorAlert(e,t){if(!1===e.showErrorAlert)return;if(void 0===e.showErrorAlert&&((0,O.mu)(e.url)||!(0,O.R8)(e.url)))return;let a="",s=t.data.message;s.length>80&&(a=s,s="Error"),422===t.status&&(s="Validation failed"),this.dependencies.appEvents.emit(t.status<500?j.AppEvents.alertWarning:j.AppEvents.alertError,[s,a])}processRequestError(e,t){var a;return t.data=null!==(a=t.data)&&void 0!==a?a:{message:"Unexpected error"},"string"==typeof t.data&&(t.data={message:t.data,error:t.statusText,response:t.data}),t.data&&!t.data.message&&"string"==typeof t.data.error&&(t.data.message=t.data.error),t.data.message&&setTimeout((()=>{t.isHandled||this.showErrorAlert(e,t)}),50),this.inspectorStream.next(t),t}handleStreamCancellation(e){return t=>t.pipe((0,v.R)(this.inFlightRequests.pipe((0,p.h)((t=>{let a=!1;return e&&e.requestId&&e.requestId===t&&(a=!0),t===H&&(a=!0),a})))),(0,x.T)((()=>({type:j.DataQueryErrorType.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:e}))))}getInspectorStream(){return this.inspectorStream}async get(e,t,a){return await this.request({method:"GET",url:e,params:t,requestId:a})}async delete(e,t){return await this.request({method:"DELETE",url:e,data:t})}async post(e,t){return await this.request({method:"POST",url:e,data:t})}async patch(e,t){return await this.request({method:"PATCH",url:e,data:t})}async put(e,t){return await this.request({method:"PUT",url:e,data:t})}withNoBackendCache(e){return this.noBackendCache=!0,e().finally((()=>{this.noBackendCache=!1}))}loginPing(){return this.request({url:"/api/login/ping",method:"GET",retry:1})}search(e){return this.get("/api/search",e)}getDashboardByUid(e){return this.get(`/api/dashboards/uid/${e}`)}getFolderByUid(e){return this.get(`/api/folders/${e}`)}}const W=new q,G=()=>W},"./public/app/core/services/context_srv.ts":(e,t,a)=>{"use strict";a.d(t,{Vt:()=>d});var s=a("./public/app/core/config.ts"),n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("./packages/grafana-data/src/index.ts"),i=a("./public/app/types/index.ts"),o=a("./packages/grafana-runtime/src/index.ts");function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c{constructor(){l(this,"id",void 0),l(this,"isGrafanaAdmin",void 0),l(this,"isSignedIn",void 0),l(this,"orgRole",void 0),l(this,"orgId",void 0),l(this,"orgName",void 0),l(this,"login",void 0),l(this,"orgCount",void 0),l(this,"timezone",void 0),l(this,"fiscalYearStartMonth",void 0),l(this,"helpFlags1",void 0),l(this,"lightTheme",void 0),l(this,"hasEditPermissionInFolders",void 0),l(this,"email",void 0),l(this,"permissions",void 0),this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.lightTheme=!1,this.hasEditPermissionInFolders=!1,this.email=void 0,s.ZP.bootData.user&&(0,n.extend)(this,s.ZP.bootData.user)}}let d=new class{constructor(){l(this,"pinned",void 0),l(this,"version",void 0),l(this,"user",void 0),l(this,"isSignedIn",void 0),l(this,"isGrafanaAdmin",void 0),l(this,"isEditor",void 0),l(this,"sidemenuSmallBreakpoint",!1),l(this,"hasEditPermissionInFolders",void 0),l(this,"minRefreshInterval",void 0),s.ZP.bootData||(s.ZP.bootData={user:{},settings:{}}),this.user=new c,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=s.ZP.minRefreshInterval}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,o.getBackendSrv)().get("/api/access-control/user/permissions",{reloadcache:!0}))}catch(e){console.error(e)}}setLoggedOut(){this.user.isSignedIn=!1,this.isSignedIn=!1}hasRole(e){return"ServerAdmin"===e?this.isGrafanaAdmin:this.user.orgRole===e}accessControlEnabled(){return Boolean(s.ZP.featureToggles.accesscontrol)}licensedAccessControlEnabled(){return(0,o.featureEnabled)("accesscontrol")&&Boolean(s.ZP.featureToggles.accesscontrol)}hasPermissionInMetadata(e,t){var a;return!this.accessControlEnabled()||!(null===(a=t.accessControl)||void 0===a||!a[e])}hasPermission(e){var t;return!this.accessControlEnabled()||!(null===(t=this.user.permissions)||void 0===t||!t[e])}isGrafanaVisible(){return void 0===document.visibilityState||"visible"===document.visibilityState}isAllowedInterval(e){return!s.ZP.minRefreshInterval||r.rangeUtil.intervalToMs(e)>=r.rangeUtil.intervalToMs(s.ZP.minRefreshInterval)}getValidInterval(e){return this.isAllowedInterval(e)?e:s.ZP.minRefreshInterval}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(i.bW.DataSourcesExplore):(this.isEditor||s.ZP.viewersCanEdit)&&s.ZP.exploreEnabled}hasAccess(e,t){return this.accessControlEnabled()?this.hasPermission(e):t}hasAccessInMetadata(e,t,a){return s.ZP.featureToggles.accesscontrol?this.hasPermissionInMetadata(e,t):a}evaluatePermission(e,t){return this.accessControlEnabled()?t.some((e=>this.hasPermission(e)))?[]:["Reject"]:e()}}},"./public/app/core/services/impression_srv.ts":(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a("./public/app/core/store.ts"),n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("./public/app/core/config.ts");const i=new class{constructor(){}addDashboardImpression(e){const t=this.impressionKey();let a=[];s.Z.exists(t)&&(a=JSON.parse(s.Z.get(t)),(0,n.isArray)(a)||(a=[])),a=a.filter((t=>e!==t)),a.unshift(e),a.length>50&&a.pop(),s.Z.set(t,JSON.stringify(a))}getDashboardOpened(){let e=s.Z.get(this.impressionKey())||"[]";return e=JSON.parse(e),e=(0,n.filter)(e,(e=>(0,n.isNumber)(e))),e}impressionKey(){return"dashboard_impressions-"+r.ZP.bootData.user.orgId}}},"./public/app/core/services/keybindingSrv.ts":(e,t,a)=>{"use strict";a.d(t,{K:()=>y});var s=a("../../opt/drone/yarncache/mousetrap-npm-1.6.5-9cd826966c-1ce36af5ac.zip/node_modules/mousetrap/mousetrap.js"),n=a.n(s),r=(a("./.yarn/__virtual__/mousetrap-global-bind-virtual-8dbd1af566/3/opt/drone/yarncache/mousetrap-global-bind-npm-1.1.0-dbee637f9b-41573d7bc2.zip/node_modules/mousetrap-global-bind/mousetrap-global-bind.js"),a("./packages/grafana-data/src/index.ts")),i=a("./public/app/core/app_events.ts"),o=a("./public/app/core/utils/explore.ts"),l=a("./public/app/features/dashboard/components/ShareModal/index.ts"),c=a("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardModalProxy.tsx"),d=a("./packages/grafana-runtime/src/index.ts"),u=a("./public/app/core/navigation/kiosk.ts"),p=a("./public/app/types/events.ts"),h=a("./public/app/core/core.ts"),m=a("./public/app/features/plugins/datasource_srv.ts"),g=a("./public/app/features/dashboard/services/TimeSrv.ts"),f=a("./public/app/core/config.ts"),b=a("./public/app/core/services/PreferencesService.ts");async function v(e){const t=f.vc.theme,a=(0,r.createTheme)({colors:{mode:t.isDark?"light":"dark"}});if(i.Z.publish(new d.ThemeChangedEvent(a)),e)return;const s=document.createElement("link");s.rel="stylesheet",s.href=f.vc.bootData.themePaths[a.colors.mode],document.body.appendChild(s);const n=document.getElementsByTagName("link");for(let e=0;e<n.length;e++){const a=n[e];a.href&&a.href.indexOf(`build/grafana.${t.type}`)>0&&setTimeout((()=>a.remove()),500)}if(!h.Vt.isSignedIn)return;const o=new b.y("user"),l=await o.load();await o.update(Object.assign({},l,{theme:a.colors.mode}))}var x=a("./public/app/core/components/help/HelpModal.tsx");const y=new class{reset(){n().reset()}initGlobals(){"/login"!==d.locationService.getLocation().pathname&&(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("s o",this.openSearch),this.bind("t a",this.makeAbsoluteTime),this.bind("f",this.openSearch),this.bind("esc",this.exit),this.bindGlobal("esc",this.globalEsc)),this.bind("t t",(()=>v(!1))),this.bind("t r",(()=>v(!0)))}globalEsc(){const e=document,t=e.activeElement;document.querySelectorAll(".slate-typeahead--open").length>0||(t&&t.blur&&("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName||t.hasAttribute("data-slate-editor"))?e.activeElement.blur():this.exit())}openSearch(){d.locationService.partial({search:"open"})}closeSearch(){d.locationService.partial({search:null})}openAlerting(){d.locationService.push("/alerting")}goToHome(){d.locationService.push("/")}goToProfile(){d.locationService.push("/profile")}makeAbsoluteTime(){i.Z.publish(new p.QI)}showHelpModal(){i.Z.publish(new p.Dn({component:x.B}))}exit(){const e=d.locationService.getSearchObject();e.editview?d.locationService.partial({editview:null}):e.inspect?d.locationService.partial({inspect:null,inspectTab:null}):e.editPanel?d.locationService.partial({editPanel:null,tab:null}):e.viewPanel?d.locationService.partial({viewPanel:null,tab:null}):(e.kiosk&&(0,u.ZC)(),e.search&&this.closeSearch())}showDashEditView(){d.locationService.partial({editview:"settings"})}bind(e,t){n().bind(e,(e=>{e.preventDefault(),e.stopPropagation(),e.returnValue=!1,t.call(this)}),"keydown")}bindGlobal(e,t){n().bindGlobal(e,(e=>{e.preventDefault(),e.stopPropagation(),e.returnValue=!1,t.call(this)}),"keydown")}unbind(e,t){n().unbind(e,t)}bindWithPanelId(e,t){this.bind(e,function(e){return()=>{const t=document.querySelectorAll(":hover");for(let n=t.length-1;n>0;n--){var a;const r=t[n];var s;null!==(a=r.dataset)&&void 0!==a&&a.panelid&&e(parseInt(null===(s=r.dataset)||void 0===s?void 0:s.panelid,10))}}}(t))}setupDashboardBindings(e){this.bind("mod+o",(()=>{e.graphTooltip=(e.graphTooltip+1)%3,e.events.publish(new r.LegacyGraphHoverClearEvent),e.startRefresh()})),this.bind("mod+s",(()=>{e.meta.canSave&&i.Z.publish(new p.Dn({component:c.D,props:{dashboard:e}}))})),this.bind("t z",(()=>{i.Z.publish(new p.p8(2))})),this.bind("ctrl+z",(()=>{i.Z.publish(new p.p8(2))})),this.bind("t left",(()=>{i.Z.publish(new p.Qt(p.uV.Left))})),this.bind("t right",(()=>{i.Z.publish(new p.Qt(p.uV.Right))})),this.bindWithPanelId("e",(t=>{if(e.canEditPanelById(t)){const e=void 0!==d.locationService.getSearchObject().editPanel;d.locationService.partial({editPanel:e?null:t})}})),this.bindWithPanelId("v",(e=>{const t=void 0!==d.locationService.getSearchObject().viewPanel;d.locationService.partial({viewPanel:t?null:e})})),this.bindWithPanelId("i",(e=>{d.locationService.partial({inspect:e})})),h.Vt.hasAccessToExplore()&&this.bindWithPanelId("x",(async t=>{const a=e.getPanelById(t),s=await(0,o.H6)({panel:a,datasourceSrv:(0,m.ak)(),timeSrv:(0,g.$t)()});if(s){const e=r.locationUtil.stripBaseFromUrl(s);e&&d.locationService.push(e)}})),this.bindWithPanelId("p r",(t=>{!e.canEditPanelById(t)||e.panelInView||e.panelInEdit||i.Z.publish(new p.Eb(t))})),this.bindWithPanelId("p d",(t=>{if(e.canEditPanelById(t)){const a=e.getPanelInfoById(t).index;e.duplicatePanel(e.panels[a])}})),this.bindWithPanelId("p s",(t=>{const a=e.getPanelInfoById(t);i.Z.publish(new p.Dn({component:l.V8,props:{dashboard:e,panel:null==a?void 0:a.panel}}))})),this.bindWithPanelId("p l",(t=>{const a=e.getPanelInfoById(t);a.panel.legend&&(a.panel.legend.show=!a.panel.legend.show,a.panel.render())})),this.bind("d l",(()=>{e.toggleLegendsForAll()})),this.bind("d shift+c",(()=>{e.collapseRows()})),this.bind("d shift+e",(()=>{e.expandRows()})),this.bind("d n",(()=>{d.locationService.push("/dashboard/new")})),this.bind("d r",(()=>{e.startRefresh()})),this.bind("d s",(()=>{this.showDashEditView()})),this.bind("d k",(()=>{(0,u.qk)()})),this.bind("d a",(()=>{const e=d.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+e}))}}},"./public/app/core/services/search_srv.ts":(e,t,a)=>{"use strict";a.d(t,{i:()=>u});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./public/app/core/services/impression_srv.ts"),r=a("./public/app/core/store.ts"),i=a("./public/app/core/services/context_srv.ts"),o=a("./public/app/features/search/utils.ts"),l=a("./public/app/features/search/constants.ts"),c=a("./public/app/features/search/types.ts"),d=a("./public/app/core/services/backend_srv.ts");class u{getRecentDashboards(e){return this.queryForRecentDashboards().then((t=>{t.length>0&&(e.recent={title:"Recent",icon:"clock-nine",score:-1,expanded:r.Z.getBool(`${l.qi}.recent`,!0),items:t,type:c.o.DashFolder})}))}queryForRecentDashboards(){const e=(0,s.take)(n.Z.getDashboardOpened(),30);return 0===e.length?Promise.resolve([]):d.ae.search({dashboardIds:e}).then((t=>e.map((e=>t.find((t=>t.id===e)))).filter((e=>e&&!e.isStarred))))}getStarred(e){return i.Vt.isSignedIn?d.ae.search({starred:!0,limit:30}).then((t=>{t.length>0&&(e.starred={title:"Starred",icon:"star",score:-2,expanded:r.Z.getBool(`${l.qi}.starred`,!0),items:t,type:c.o.DashFolder})})):Promise.resolve()}search(e){var t;const a={},n=[],r=(0,s.clone)(e),i=(0,o.L)(e)||(null===(t=r.folderIds)||void 0===t?void 0:t.length)>0;return r.folderIds=r.folderIds||[],r.layout===c.A.List?d.ae.search(Object.assign({},r,{type:c.o.DashDB})).then((e=>e.length?[{title:"",items:e}]:[])):(i||(r.folderIds=[0]),e.skipRecent||i||n.push(this.getRecentDashboards(a)),e.skipStarred||i||n.push(this.getStarred(a)),n.push(d.ae.search(r).then((e=>this.handleSearchResult(a,e)))),Promise.all(n).then((()=>(0,s.sortBy)((0,s.values)(a),"score"))))}handleSearchResult(e,t){if(0===t.length)return e;for(const a of t)"dash-folder"===a.type&&(e[a.id]={id:a.id,uid:a.uid,title:a.title,expanded:!1,items:[],url:a.url,icon:"folder",score:(0,s.keys)(e).length,type:a.type});for(const a of t){if("dash-folder"===a.type)continue;let t=e[a.folderId||0];t||(t=a.folderId?{id:a.folderId,uid:a.folderUid,title:a.folderTitle,url:a.folderUrl,items:[],icon:"folder-open",score:(0,s.keys)(e).length,type:c.o.DashFolder}:{id:0,title:"General",items:[],icon:"folder-open",score:(0,s.keys)(e).length,type:c.o.DashFolder},e[a.folderId||0]=t),t.expanded=!0,t.items&&t.items.push(a)}}getDashboardTags(){return d.ae.get("/api/dashboards/tags")}getSortOptions(){return d.ae.get("/api/search/sorting")}}},"./public/app/core/store.ts":(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});const s=new class{get(e){return window.localStorage[e]}set(e,t){window.localStorage[e]=t}getBool(e,t){return void 0===t||this.exists(e)?"true"===window.localStorage[e]:t}getObject(e,t){let a=t;if(this.exists(e)){const s=window.localStorage[e];try{a=JSON.parse(s)}catch(a){console.error(`Error parsing store object: ${e}. Returning default: ${t}. [${a}]`)}}return a}setObject(e,t){let a;try{a=JSON.stringify(t)}catch(t){throw new Error(`Could not stringify object: ${e}. [${t}]`)}try{this.set(e,a)}catch(t){const a=new Error(`Could not save item in localStorage: ${e}. [${t}]`);throw a.name=t.name,a}return!0}exists(e){return void 0!==window.localStorage[e]}delete(e){window.localStorage.removeItem(e)}}},"./public/app/core/table_model.ts":(e,t,a)=>{"use strict";a.d(t,{Z:()=>r,M:()=>o});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class r{constructor(e){if(n(this,"columns",void 0),n(this,"rows",void 0),n(this,"type",void 0),n(this,"columnMap",void 0),n(this,"refId",void 0),n(this,"meta",void 0),this.columns=[],this.columnMap={},this.rows=[],this.type="table",e){if(e.columns)for(const t of e.columns)this.addColumn(t);if(e.rows)for(const t of e.rows)this.addRow(t)}}sort(e){null===e.col||void 0===e.col||this.columns.length<=e.col||(this.rows.sort(((t,a)=>+(null==(t=t[e.col]))-+(null==(a=a[e.col]))||+(t>a)||-(t<a))),e.desc&&this.rows.reverse(),this.columns[e.col].sort=!0,this.columns[e.col].desc=e.desc)}addColumn(e){this.columnMap[e.text]||(this.columns.push(e),this.columnMap[e.text]=e)}addRow(e){this.rows.push(e)}}function i(e,t,a){let s=!1;for(let n=0;n<e.length;n++)if(void 0!==t[n]&&void 0!==a[n]){if(t[n]!==a[n])return!1}else void 0!==t[n]&&void 0!==a[n]||(s=!0);return s}function o(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];const o=e||new r;if(1===arguments.length)return o;if(2===arguments.length)return o.columns=a[0].hasOwnProperty("columns")?[...a[0].columns]:[],o.rows=a[0].hasOwnProperty("rows")?[...a[0].rows]:[],o;const l=a.filter((e=>!!e.columns)),c={},d=l.slice().reduce(((e,t)=>(t.columns.forEach((t=>{const{text:a}=t;void 0===c[a]&&(c[a]=e.length,e.push(t))})),e)),[]),u=l.map((e=>e.columns.map((e=>c[e.text])))),p=l.reduce(((e,t,a)=>{const s=u[a];return t.rows.forEach((t=>{const a=[];s.forEach(((e,s)=>{a[e]=t[s]})),e.push(a)})),e}),[]),h={},m=p.reduce(((e,t,a)=>{if(!h[a]){let n=a+1;for(;n<p.length;){const e=(0,s.findIndex)(p,(e=>i(d,t,e)),n);if(!(e>-1))break;{const a=p[e];for(let e=0;e<d.length;e++)void 0===t[e]&&void 0!==a[e]&&(t[e]=a[e]);h[e]=a,n=e+1}}e.push(t)}return e}),[]);return o.columns=d,o.rows=m,o}},"./public/app/core/time_series2.ts":(e,t,a)=>{"use strict";a.d(t,{W:()=>o,Z:()=>l});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/index.ts");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){if(!e)return!1;if("/"===e[0]){const a=(0,n.stringToJsRegex)(e);return null!=t.match(a)}return e===t}function o(e,t,a){for(let a=0;a<e.length;a++){const r=e[a],i=t.yaxes[(r.yaxis||1)-1],o=(0,n.getValueFormat)(i.format);(0,s.isNumber)(t.decimals)?r.updateLegendValues(o,t.decimals):(0,s.isNumber)(i.decimals)?r.updateLegendValues(o,i.decimals+1):r.updateLegendValues(o,null)}}class l{constructor(e){r(this,"datapoints",void 0),r(this,"id",void 0),r(this,"dataFrameIndex",void 0),r(this,"fieldIndex",void 0),r(this,"label",void 0),r(this,"alias",void 0),r(this,"aliasEscaped",void 0),r(this,"color",void 0),r(this,"valueFormater",void 0),r(this,"stats",void 0),r(this,"legend",void 0),r(this,"hideTooltip",void 0),r(this,"allIsNull",void 0),r(this,"allIsZero",void 0),r(this,"decimals",void 0),r(this,"hasMsResolution",void 0),r(this,"isOutsideRange",void 0),r(this,"lines",void 0),r(this,"hiddenSeries",void 0),r(this,"dashes",void 0),r(this,"bars",void 0),r(this,"points",void 0),r(this,"yaxis",void 0),r(this,"zindex",void 0),r(this,"stack",void 0),r(this,"nullPointMode",void 0),r(this,"fillBelowTo",void 0),r(this,"transform",void 0),r(this,"flotpairs",void 0),r(this,"unit",void 0),this.datapoints=e.datapoints,this.label=e.alias,this.id=e.alias,this.alias=e.alias,this.aliasEscaped=(0,s.escape)(e.alias),this.color=e.color,this.bars={fillColor:e.color},this.valueFormater=(0,n.getValueFormat)("none"),this.stats={},this.legend=!0,this.unit=e.unit,this.dataFrameIndex=e.dataFrameIndex,this.fieldIndex=e.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(e){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let s=0;s<e.length;s++){const n=e[s];i(n.alias,this.alias)&&(void 0!==n.lines&&(this.lines.show=n.lines),void 0!==n.dashes&&(this.dashes.show=n.dashes,this.lines.lineWidth=0),void 0!==n.points&&(this.points.show=n.points),void 0!==n.bars&&(this.bars.show=n.bars),void 0!==n.fill&&(this.lines.fill=0===(a=n.fill)?.001:a/10),void 0!==n.fillGradient&&(this.lines.fillColor=(t=n.fillGradient)?{colors:[{opacity:0},{opacity:t/10}]}:null),void 0!==n.stack&&(this.stack=n.stack),void 0!==n.linewidth&&(this.lines.lineWidth=this.dashes.show?0:n.linewidth,this.dashes.lineWidth=n.linewidth),void 0!==n.dashLength&&(this.dashes.dashLength[0]=n.dashLength),void 0!==n.spaceLength&&(this.dashes.dashLength[1]=n.spaceLength),void 0!==n.nullPointMode&&(this.nullPointMode=n.nullPointMode),void 0!==n.pointradius&&(this.points.radius=n.pointradius),void 0!==n.steppedLine&&(this.lines.steps=n.steppedLine),void 0!==n.zindex&&(this.zindex=n.zindex),void 0!==n.fillBelowTo&&(this.fillBelowTo=n.fillBelowTo),void 0!==n.color&&this.setColor(n.color),void 0!==n.transform&&(this.transform=n.transform),void 0!==n.legend&&(this.legend=n.legend),void 0!==n.hideTooltip&&(this.hideTooltip=n.hideTooltip),void 0!==n.yaxis&&(this.yaxis=n.yaxis),void 0!==n.hiddenSeries&&(this.hiddenSeries=n.hiddenSeries))}var t,a}getFlotPairs(e){const t=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const a="connected"===e,n="null as zero"===e;let r,i,o,l=0,c=0,d=!0;for(let e=0;e<this.datapoints.length;e++){if(i=this.datapoints[e][0],r=this.datapoints[e][1],void 0!==o){const e=r-o;e<this.stats.timeStep&&(this.stats.timeStep=e)}if(o=r,null===i){if(a)continue;n&&(i=0)}null!==i&&((0,s.isNumber)(i)&&(this.stats.total+=i,this.allIsNull=!1,l++),i>this.stats.max&&(this.stats.max=i),i<this.stats.min&&(this.stats.min=i),null===this.stats.first?this.stats.first=i:c>i?(d=!1,e===this.datapoints.length-1&&(this.stats.delta+=i)):(this.stats.delta+=d?i-c:i,d=!0),c=i,i<this.stats.logmin&&i>0&&(this.stats.logmin=i),0!==i&&(this.allIsZero=!1)),t.push([r,i])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),t.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/l,this.stats.current=t[t.length-1][1],null===this.stats.current&&t.length>1&&(this.stats.current=t[t.length-2][1])),null!==this.stats.max&&null!==this.stats.min&&(this.stats.range=this.stats.max-this.stats.min),null!==this.stats.current&&null!==this.stats.first&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=t.length,t}updateLegendValues(e,t){this.valueFormater=e,this.decimals=t}formatValue(e){return(0,s.isFinite)(e)||(e=null),(0,n.formattedValueToString)(this.valueFormater(e,this.decimals))}isMsResolutionNeeded(){for(let e=0;e<this.datapoints.length;e++)if(null!==this.datapoints[e][1]&&void 0!==this.datapoints[e][1]){const t=this.datapoints[e][1].toString();if(13===t.length&&t%1e3!=0)return!0}return!1}hideFromLegend(e){return!(!e.hideEmpty||!this.allIsNull)||(!this.legend||!(!e.hideZero||!this.allIsZero))}setColor(e){this.color=e,this.bars.fillColor=e}}},"./public/app/core/utils/ConfigProvider.tsx":(e,t,a)=>{"use strict";a.d(t,{E_:()=>c,f6:()=>d,ER:()=>u});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./public/app/core/core.ts"),o=a("./packages/grafana-data/src/index.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=s.createContext(n.config),d=(c.Consumer,e=>{let{children:t}=e;const[a,c]=(0,s.useState)((0,o.createTheme)({colors:{mode:n.config.bootData.user.lightTheme?"light":"dark"}}));return(0,s.useEffect)((()=>{const e=i.h$.subscribe(n.ThemeChangedEvent,(e=>{c(e.payload)}));return()=>e.unsubscribe()}),[]),(0,l.jsx)(r.ThemeContext.Provider,{value:a,children:t})});const u=e=>(e=>t=>(0,l.jsx)(c.Provider,{value:n.config,children:s.createElement(e,Object.assign({},t))}))((t=>(0,l.jsx)(d,{children:s.createElement(e,Object.assign({},t))})))},"./public/app/core/utils/CorsWorker.ts":(e,t,a)=>{"use strict";a.d(t,{q:()=>s});class s extends window.Worker{constructor(e,t){const a=e.toString(),s=a.split("/");s.pop();const n=`${s.join("/")}/`,r=`importScripts('${a}');`,i=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${n}'; ${r}`],{type:"application/javascript"}));super(i,t),URL.revokeObjectURL(i)}}},"./public/app/core/utils/accessControl.ts":(e,t,a)=>{"use strict";a.d(t,{y:()=>n});var s=a("./public/app/core/config.ts");function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.ZP.featureToggles.accesscontrol?Object.assign({},e,{accesscontrol:!0}):e}},"./public/app/core/utils/acl.ts":(e,t,a)=>{"use strict";function s(e){return e.map(n).sort(((e,t)=>t.sortRank-e.sortRank||e.name.localeCompare(t.name)))}function n(e){const t=e;return t.sortRank=0,t.userId>0?(t.name=t.userLogin,t.sortRank=10):t.teamId>0?(t.name=t.team,t.sortRank=20):t.role&&(t.icon="fa fa-fw fa-street-view",t.name=t.role,t.sortRank=30,"Editor"===t.role&&(t.sortRank+=1)),t.inherited&&(t.sortRank+=100),t}a.d(t,{A:()=>s})},"./public/app/core/utils/arrayMove.ts":(e,t,a)=>{"use strict";a.d(t,{R:()=>s});const s=(e,t,a)=>(e.splice(a,0,e.splice(t,1)[0]),e)},"./public/app/core/utils/connectWithReduxStore.tsx":(e,t,a)=>{"use strict";a.d(t,{R:()=>i,k:()=>o});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),n=a("./public/app/store/store.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function i(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];const o=(0,s.connect)(...a)(e);return e=>(0,r.jsx)(o,Object.assign({},e,{store:n.h}))}function o(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];const o=(0,s.connect)(...a)(e);return e=>(0,r.jsx)(s.Provider,{store:n.h,children:(0,r.jsx)(o,Object.assign({},e,{store:n.h}))})}},"./public/app/core/utils/errors.ts":(e,t,a)=>{"use strict";a.d(t,{i:()=>n});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function n(e){return e&&!(0,s.isString)(e)?e.message?e.message:e.data&&e.data.message?e.data.message:e.statusText?e.statusText:JSON.stringify(e):e}},"./public/app/core/utils/explore.ts":(e,t,a)=>{"use strict";a.d(t,{UI:()=>p,I$:()=>h,H6:()=>m,Zf:()=>g,uC:()=>f,Xh:()=>x,xq:()=>y,J5:()=>w,Xk:()=>C,fR:()=>k,Z8:()=>S,z_:()=>O,_Q:()=>_,$$:()=>N,OQ:()=>I,vP:()=>M,Oy:()=>F,F3:()=>A,RZ:()=>D,n9:()=>$});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/core/store.ts"),i=a("../../opt/drone/yarncache/uuid-npm-8.3.2-eca0baba53-5575a8a75c.zip/node_modules/uuid/dist/esm-browser/v4.js"),o=a("./public/app/core/utils/query.ts"),l=a("./packages/grafana-ui/src/index.ts"),c=a("./public/app/types/explore.ts"),d=a("./public/app/core/config.ts");const u=["key"];const p={from:"now-1h",to:"now"},h=(n.LogsDedupStrategy.none,e=>`grafana.explore.datasource.${e}`);async function m(e){var t;const{panel:a,datasourceSrv:r,timeSrv:i}=e;let o,l=await r.get(a.datasource),c=a.targets.map((e=>(0,s.omit)(e,"legendFormat")));if("mixed"===(null===(t=l.meta)||void 0===t?void 0:t.id)&&c)for(const e of c){const t=await r.get(e.datasource||void 0);if(t){l=t,c=a.targets.filter((e=>e.datasource===t.name));break}}if(l){let e={range:i.timeRangeForUrl()};if(l.interpolateVariablesInQueries){const t=a.scopedVars||{};e=Object.assign({},e,{datasource:l.name,context:"explore",queries:l.interpolateVariablesInQueries(c,t)})}else e=Object.assign({},e,{datasource:l.name,context:"explore",queries:c.map((e=>Object.assign({},e,{datasource:l.getRef()})))});const t=JSON.stringify(Object.assign({},e,{originPanelId:a.id}));o=n.urlUtil.renderUrl("/explore",{left:t})}return o}function g(e,t,a,s,r,i){const o=t.reduce(((e,t)=>e+=t.key),""),{interval:l,intervalMs:c}=function(e,t,a){if(!a)return{interval:"1s",intervalMs:1e3};return n.rangeUtil.calculateInterval(e,a,t)}(s,a.minInterval,a.maxDataPoints),d=`${o}`;return{queries:t,request:{app:n.CoreApp.Explore,dashboardId:0,timezone:i||n.DefaultTimeZone,startTime:Date.now(),interval:l,intervalMs:c,panelId:d,targets:t,range:s,requestId:"explore_"+e,rangeRaw:s.raw,scopedVars:{__interval:{text:l,value:l},__interval_ms:{text:c,value:c}},maxDataPoints:a.maxDataPoints,liveStreaming:a.liveStreaming},scanning:r,id:j(),done:!1}}const f=e=>function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,u),b=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return a.some((t=>e.hasOwnProperty(t)))};var v;!function(e){e[e.RangeFrom=0]="RangeFrom",e[e.RangeTo=1]="RangeTo",e[e.Datasource=2]="Datasource",e[e.SegmentsStart=3]="SegmentsStart"}(v||(v={}));const x=(e,t)=>{if(!e)return"";try{return JSON.stringify(e,null,t)}catch(e){console.error(e)}return""},y=e=>{const t=c.f.find((t=>t===e));return null!=t?t:"lines"};function w(e){var t;const a=(e=>{if(e)try{return JSON.parse(e)}catch(e){console.error(e)}})(e),s={datasource:null,queries:[],range:p,mode:null,originPanelId:null};if(!a)return s;if(!Array.isArray(a))return a;if(a.length<=v.SegmentsStart)return console.error("Error parsing compact URL state for Explore."),s;const n={from:a[v.RangeFrom],to:a[v.RangeTo]},r=a[v.Datasource],i=a.slice(v.SegmentsStart);return{datasource:r,queries:i.filter((e=>!b(e,"ui","originPanelId","mode","__panelsState"))),range:n,originPanelId:i.find((e=>b(e,"originPanelId"))),panelsState:null===(t=i.find((e=>b(e,"__panelsState"))))||void 0===t?void 0:t.__panelsState}}function j(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return`Q-${(0,i.Z)()}-${e}`}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{refId:(0,o.Hs)(e),key:j(t)}}const k=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=j(a),n=e.refId||(0,o.Hs)(t);return Object.assign({},e,{refId:n,key:s})};function S(e){if(e&&"object"==typeof e&&e.length>0){const t=[];for(let a=0;a<e.length;a++){const s=e[a],n=j(a);let r=s.refId;r||(r=(0,o.Hs)(t)),t.push(Object.assign({},s,{refId:r,key:n}))}return t}return[Object.assign({},C(null!=e?e:[]))]}const T=["refId","key","context","datasource"];function O(e){return e&&e.some((e=>Object.keys(e).filter((e=>-1===T.indexOf(e))).map((t=>e[t])).filter((e=>e)).length>0))}function _(e,t,a){const s=Date.now();let n=e;a.forEach((e=>{n=[{query:e,ts:s},...n]})),n.length>100&&(n=n.slice(0,100));const i=`grafana.explore.history.${t}`;try{return r.Z.setObject(i,n),n}catch(t){return console.error(t),e}}const N=(e,t)=>e.reduce(((e,a,s)=>{const n=t&&t.name?t.name:a.key;return e.concat(`${n}-${s}`)}),[]),I=(e,t,a)=>{let s=n.rangeUtil.convertRawToRange(t,e,a);return s.to.isBefore(s.from)&&(s=n.rangeUtil.convertRawToRange({from:s.raw.to,to:s.raw.from},e,a)),s},P=e=>{if(null===e)return null;if((0,n.isDateTime)(e))return e;if(-1!==e.indexOf("now"))return e;if(8===e.length)return(0,n.toUtc)(e,"YYYYMMDD");if(15===e.length)return(0,n.toUtc)(e,"YYYYMMDDTHHmmss");if(19===e.length)return(0,n.toUtc)(e,"YYYY-MM-DD HH:mm:ss");if(e.match(/^\d+$/)){const t=parseInt(e,10);return(0,n.toUtc)(t)}const t=(0,n.toUtc)(e);return t.isValid()?t:null},M=(e,t,a)=>{const s={from:P(e.from),to:P(e.to)};return{from:n.dateMath.parse(s.from,!1,t),to:n.dateMath.parse(s.to,!0,t),raw:s}},F=e=>l.RefreshPicker.isLive(e)?n.LogsSortOrder.Ascending:n.LogsSortOrder.Descending,A=e=>{let t=`${"https:"===window.location.protocol?"wss://":"ws://"}${window.location.host}${d.vc.appSubUrl}`;return t.endsWith("/")&&(t=t.slice(0,-1)),`${t}${e}`},D=e=>{e&&e.unsubscribe()};const $=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},"./public/app/core/utils/fetch.ts":(e,t,a)=>{"use strict";a.d(t,{nS:()=>r,rZ:()=>c,aO:()=>u,tW:()=>p,Xv:()=>h});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/index.ts");const r=e=>{const t=e.method,a=l(e),s=c(a);return{method:t,headers:a,body:d(e,s),credentials:m(e)}},i=e=>({canParse:t=>(null!=t&&t.method?null==t?void 0:t.method.toLowerCase():"")===e,parse:e=>(e.get("content-type")||e.set("content-type","application/json"),e)}),o=[i("post"),i("put"),i("patch"),{canParse:()=>!0,parse:e=>(e.get("accept")||e.set("accept","application/json, text/plain, */*"),e)}],l=e=>{const t=null!=e&&e.headers?new Headers(e.headers):new Headers;return o.filter((t=>t.canParse(e))).reduce(((e,t)=>t.parse(e)),t)},c=e=>{if(!e)return!1;const t=e.get("content-type");return!(!t||"application/json"!==t.toLowerCase())},d=(e,t)=>e?e.data&&"string"!=typeof e.data?t?JSON.stringify(e.data):new URLSearchParams(e.data):e.data:e;async function u(e,t){if(t)switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":try{return await e.json()}catch(t){return console.warn(`${e.url} returned an invalid JSON -`,t),{}}case"text":return e.text()}const a=await e.text();try{return JSON.parse(a)}catch{}return a}function p(e){return Object.keys(e).map((t=>{const a=e[t];return Array.isArray(a)?a.map((e=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&"):`${encodeURIComponent(t)}=${encodeURIComponent(a)}`})).join("&")}const h=e=>{const t=p((0,s.omitBy)(e.params,(e=>void 0===e||e&&0===e.length)));return e.params&&t.length?`${e.url}?${t}`:e.url},m=e=>e?e.credentials?e.credentials:e.withCredentials?((0,n.deprecationWarning)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin":e},"./public/app/core/utils/flatten.ts":(e,t,a)=>{"use strict";function s(e,t){const a=(t=t||{}).delimiter||".";let s=t.maxDepth||3,n=1;const r={};return function e(i,o){Object.keys(i).forEach((l=>{var c,d;const u=i[l],p=(null===(c=t)||void 0===c?void 0:c.safe)&&Array.isArray(u),h="[object Object]"===Object.prototype.toString.call(u),m=o?o+a+l:l;if(null!==(d=t)&&void 0!==d&&d.maxDepth||(s=n+1),!p&&h&&Object.keys(u).length&&n<s)return++n,e(u,m);r[m]=u}))}(e,null),r}a.r(t),a.d(t,{default:()=>s})},"./public/app/core/utils/kbn.ts":(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a("./packages/grafana-data/src/index.ts");const n={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:e=>e.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&"),roundInterval:e=>((0,s.deprecationWarning)("kbn.ts","kbn.roundInterval()","@grafana/data"),s.rangeUtil.roundInterval(e)),secondsToHms:e=>((0,s.deprecationWarning)("kbn.ts","kbn.secondsToHms()","@grafana/data"),s.rangeUtil.secondsToHms(e)),secondsToHhmmss:e=>{const t=[],a=Math.floor(e/3600),s=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return a>9?t.push(""+a):t.push("0"+a),s>9?t.push(""+s):t.push("0"+s),n>9?t.push(""+n):t.push("0"+n),t.join(":")},toPercent:(e,t)=>Math.floor(e/t*1e4)/100+"%",addSlashes:e=>e.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:e=>((0,s.deprecationWarning)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),s.rangeUtil.describeInterval(e)),intervalToSeconds:e=>((0,s.deprecationWarning)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),s.rangeUtil.intervalToSeconds(e)),intervalToMs:e=>((0,s.deprecationWarning)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),s.rangeUtil.intervalToMs(e)),calculateInterval:(e,t,a)=>((0,s.deprecationWarning)("kbn.ts","kbn.calculateInterval()","@grafana/data"),s.rangeUtil.calculateInterval(e,t,a)),queryColorDot:(e,t)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+e,"font-size:"+t+"px"].join(";")+'"></div>',slugifyForUrl:e=>e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:e=>((0,s.deprecationWarning)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,s.stringToJsRegex)(e)),toFixed:(e,t)=>{if(null===e)return"";const a=t?Math.pow(10,Math.max(0,t)):1,s=String(Math.round(e*a)/a);if(-1!==s.indexOf("e")||0===e)return s;if(null!=t){const e=s.indexOf("."),n=-1===e?0:s.length-e-1;if(n<t)return(n?s:s+".")+String(a).substr(1,t-n)}return s},toFixedScaled:(e,t,a,s,r)=>null===a?n.toFixed(e,t)+r:n.toFixed(e,a+s)+r,roundValue:(e,t)=>{if(null===e)return null;const a=Math.pow(10,t),s=(a*e).toFixed(t);return Math.round(parseFloat(s))/a},getUnitFormats:s.getValueFormats};"undefined"!=typeof Proxy?n.valueFormats=new Proxy(n.valueFormats,{get(e,t,a){if("string"!=typeof t)throw{message:`Value format ${String(t)} is not a string`};const n=(0,s.getValueFormat)(t);return n?(e,t,a,r)=>(0,s.formattedValueToString)(n(e,t,a,r?"utc":"browser")):Reflect.get(e,t,a)}}):n.valueFormats=(0,s.getValueFormatterIndex)();const r=n},"./public/app/core/utils/query.ts":(e,t,a)=>{"use strict";a.d(t,{Hs:()=>s,DI:()=>n,mu:()=>r,R8:()=>i});const s=e=>{for(let t=0;;t++){const a=o(t);if(!e.some((e=>e.refId===a)))return a}};function n(e,t,a){const n=t||{};return n.refId=s(e),n.hide=!1,!n.datasource&&a&&(n.datasource=a),[...e,n]}function r(e){return-1!==e.indexOf("api/datasources/proxy")||-1!==e.indexOf("api/tsdb/query")||-1!==e.indexOf("api/ds/query")}function i(e){return!e.match(/^http/)}function o(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return e<t.length?t[e]:o(Math.floor(e/t.length)-1)+t[e%t.length]}},"./public/app/core/utils/richHistory.ts":(e,t,a)=>{"use strict";a.d(t,{hO:()=>p,As:()=>h,H6:()=>m,au:()=>g,ub:()=>f,HK:()=>b,VI:()=>v,gt:()=>x,y9:()=>y,t2:()=>w,bQ:()=>j,OH:()=>S,k4:()=>T,DR:()=>O,ZX:()=>_});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/core/store.ts"),i=a("./public/app/store/store.ts"),o=a("./public/app/core/actions/index.ts"),l=a("./public/app/core/copy/appNotification.ts"),c=a("./packages/grafana-data/src/utils/url.ts"),d=a("./packages/grafana-runtime/src/index.ts");const u="grafana.explore.richHistory",p={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"};let h;!function(e){e.Descending="Descending",e.Ascending="Ascending",e.DatasourceAZ="Datasource A-Z",e.DatasourceZA="Datasource Z-A"}(h||(h={}));const m=1e4;function g(e,t,a,n,c,d,h,g,f){const b=Date.now(),v=n&&n.filter((e=>function(e){const t=(0,s.omit)(e,["key","refId","datasource"]);if(Object.keys(t).length>0)return!0;return!1}(e))),x=r.Z.getObject(p.retentionPeriod,7),y=C(x,!1),w=e.filter((e=>e.ts>y||!0===e.starred))||[];if(v.length>0){const n=v.map((e=>(0,s.omit)(e,["key","refId"]))),p=w.length>0&&w[0].queries.map((e=>(0,s.omit)(e,["key","refId"])));if((0,s.isEqual)(n,p))return{richHistory:e};let x=!1,y=w.length-1;for(;y>=0&&w.length>=m;)w[y].starred||(w.splice(y,1),x=!0),y--;let j=[{queries:v,ts:b,datasourceId:t,datasourceName:null!=a?a:"",starred:c,comment:null!=d?d:"",sessionName:h},...w];try{return f&&x&&(0,i.WI)((0,o.$l)((0,l.ZR)(`Query history reached the limit of ${m}. Old, not-starred items will be removed.`))),r.Z.setObject(u,j),{richHistory:j,limitExceeded:x,localStorageFull:!1}}catch(e){return g&&(0,i.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",e.message))),{richHistory:j,limitExceeded:x,localStorageFull:"QuotaExceededError"===e.name}}}return{richHistory:e}}function f(){const e=function(e){return e.map((e=>{const t=e.queries.map(((e,t)=>function(e,t,a){const s="ABCDEFGHIJKLMNOPQRSTUVXYZ";if("object"==typeof t)return t;if(function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(t))return JSON.parse(t);return{expr:t,refId:s[a]}}(0,e,t)));return Object.assign({},e,{queries:t})}))}(r.Z.getObject(u,[]));return e}function b(){return r.Z.delete(u)}function v(e,t){const a=e.map((e=>{if(e.ts===t){const t=e.starred;return Object.assign({},e,{starred:!t})}return e}));try{return r.Z.setObject(u,a),a}catch(t){return(0,i.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",t.message))),e}}function x(e,t,a){const s=e.map((e=>{if(e.ts===t){return Object.assign({},e,{comment:a})}return e}));try{return r.Z.setObject(u,s),s}catch(t){return(0,i.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",t.message))),e}}function y(e,t){const a=e.filter((e=>e.ts!==t));try{return r.Z.setObject(u,a),a}catch(t){return(0,i.WI)((0,o.$l)((0,l.t_)("Saving rich history failed",t.message))),e}}const w=e=>{const t={range:{from:"now-1h",to:"now"},datasource:e.datasourceName,queries:e.queries,context:"explore"},a=(0,c.S)(t),s=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return n.urlUtil.renderUrl(`${s}/explore`,{left:a})},j=e=>{let t;switch(e){case 0:t="today";break;case 1:t="yesterday";break;case 7:t="a week ago";break;case 14:t="two weeks ago";break;default:t=`${e} days ago`}return t},C=(e,t)=>{const a=new Date,s=new Date(a.setDate(a.getDate()-e));return t?s.setHours(24,0,0,0):s.setHours(0,0,0,0)};function k(e,t){let a="";var s;return t===h.DatasourceAZ||t===h.DatasourceZA?a=e.datasourceName:(s=e.ts,a=(0,n.dateTimeFormat)(s,{format:"MMMM D"})),a}function S(e,t){return null!=t&&t.getQueryDisplayText?t.getQueryDisplayText(e):function(e){const t=(0,s.omit)(e,["key","refId","datasource"]);return JSON.stringify(t)}(e)}function T(e,t){let a={};return e.forEach((e=>{let s=k(e,t);a[s]=s in a?[...a[s],e]:[e]})),a}function O(e){const t=[];return e.forEach((e=>{const a=(0,d.getDataSourceSrv)().getInstanceSettings(e);a?t.push({label:a.name,value:a.name,imgUrl:a.meta.info.logos.small,isRemoved:!1}):t.push({label:e,value:e,imgUrl:"public/img/icn-datasource.svg",isRemoved:!0})})),t}function _(e,t,a,n,r){const i=function(e,t){return t&&t.length>0?e.filter((e=>t.includes(e.datasourceName))):e}(e,a),o=function(e,t){return e.filter((e=>!!e.comment.includes(t)||e.queries.filter((e=>Object.values((0,s.omit)(e,["datasource","key","refId","hide","queryType"])).some((e=>null==e?void 0:e.toString().includes(t))))).length>0))}(i,n),l=r?function(e,t){return e.filter((e=>e.ts<C(t[0],!0)&&e.ts>C(t[1],!1)))}(o,r):o;return((e,t)=>{let a;return t===h.Ascending&&(a=(e,t)=>e.ts<t.ts?-1:e.ts>t.ts?1:0),t===h.Descending&&(a=(e,t)=>e.ts<t.ts?1:e.ts>t.ts?-1:0),t===h.DatasourceZA&&(a=(e,t)=>e.datasourceName<t.datasourceName?-1:e.datasourceName>t.datasourceName?1:0),t===h.DatasourceAZ&&(a=(e,t)=>e.datasourceName<t.datasourceName?1:e.datasourceName>t.datasourceName?-1:0),e.sort(a)})(l,t)}},"./public/app/core/utils/shortLinks.ts":(e,t,a)=>{"use strict";a.d(t,{D:()=>d,L:()=>u});var s=a("../../opt/drone/yarncache/memoize-one-npm-6.0.0-8b2a2cd020-f185ea69f7.zip/node_modules/memoize-one/dist/memoize-one.esm.js"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./public/app/core/utils/explore.ts"),i=a("./public/app/store/store.ts"),o=a("./public/app/core/actions/index.ts"),l=a("./public/app/core/copy/appNotification.ts");function c(e){let t=e.replace(`${window.location.protocol}//${window.location.host}${n.config.appSubUrl}`,"");return t.startsWith("/")?t.substring(1,t.length):t}const d=(0,s.Z)((async function(e){try{return(await(0,n.getBackendSrv)().post("/api/short-urls",{path:c(e)})).url}catch(e){console.error("Error when creating shortened link: ",e),(0,i.WI)((0,o.$l)((0,l.t_)("Error generating shortened link")))}})),u=async e=>{const t=await d(e);t?((0,r.n9)(t),(0,i.WI)((0,o.$l)((0,l.AT)("Shortened link copied to clipboard")))):(0,i.WI)((0,o.$l)((0,l.t_)("Error generating shortened link")))}},"./public/app/core/utils/timePicker.ts":(e,t,a)=>{"use strict";a.d(t,{e:()=>n,h:()=>r});var s=a("./packages/grafana-data/src/index.ts");const n=(e,t)=>{const a={from:(0,s.toUtc)(t.from),to:(0,s.toUtc)(t.to)},n=(a.to.valueOf()-a.from.valueOf())/2;let r,i;return-1===e?(r=a.to.valueOf()-n,i=a.from.valueOf()-n):1===e?(r=a.to.valueOf()+n,i=a.from.valueOf()+n,r>Date.now()&&a.to.valueOf()<Date.now()&&(r=Date.now(),i=a.from.valueOf())):(r=a.to.valueOf(),i=a.from.valueOf()),{from:i,to:r}},r=(e,t)=>{const a=e.to.valueOf()-e.from.valueOf(),s=e.to.valueOf()-a/2;return{from:s-a*t/2,to:s+a*t/2}}},"./public/app/features/admin/OrgRolePicker.tsx":(e,t,a)=>{"use strict";a.d(t,{A:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-ui/src/index.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i=["value","onChange","aria-label","inputId","autoFocus"];const o=Object.keys(s.OrgRole).map((e=>({label:e,value:e})));function l(e){let{value:t,onChange:a,"aria-label":s,inputId:l,autoFocus:c}=e,d=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,i);return(0,r.jsx)(n.Select,Object.assign({menuShouldPortal:!0,inputId:l,value:t,options:o,onChange:e=>a(e.value),placeholder:"Choose role...","aria-label":s,autoFocus:c},d))}},"./public/app/features/admin/state/actions.ts":(e,t,a)=>{"use strict";a.d(t,{PK:()=>u,Nq:()=>p,tQ:()=>h,B9:()=>m,Dx:()=>g,h8:()=>f,Xx:()=>b,bN:()=>v,Jk:()=>x,uV:()=>y,_1:()=>j,Fm:()=>C,j4:()=>k,CP:()=>S,Y3:()=>T,b_:()=>O,V0:()=>_,IS:()=>N,uh:()=>I,R5:()=>M,M6:()=>F,oO:()=>A});var s=a("./public/app/core/config.ts"),n=a("./packages/grafana-data/src/index.ts"),r=a("./packages/grafana-runtime/src/index.ts"),i=a("./public/app/types/index.ts"),o=a("./public/app/features/admin/state/reducers.ts"),l=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),c=a("./public/app/core/core.ts"),d=a("./public/app/core/utils/accessControl.ts");function u(e){return async t=>{try{t((0,o.UA)(!1)),await t(function(e){return async t=>{const a=await(0,r.getBackendSrv)().get(`/api/users/${e}`,(0,d.y)());t((0,o.pm)(a))}}(e)),await t(function(e){return async t=>{const a=await(0,r.getBackendSrv)().get(`/api/users/${e}/orgs`);t((0,o.fm)(a))}}(e)),await t(w(e)),s.ZP.ldapEnabled&&(0,r.featureEnabled)("ldapsync")&&await t(k()),t((0,o.UA)(!0))}catch(e){console.error(e);const a={title:e.data.message,body:e.data.error};t((0,o.sL)(a))}}}function p(e){return async t=>{await(0,r.getBackendSrv)().put(`/api/users/${e.id}`,e),t(u(e.id))}}function h(e,t){return async a=>{const s={password:t};await(0,r.getBackendSrv)().put(`/api/admin/users/${e}/password`,s),a(u(e))}}function m(e){return async t=>{await(0,r.getBackendSrv)().post(`/api/admin/users/${e}/disable`),r.locationService.push("/admin/users")}}function g(e){return async t=>{await(0,r.getBackendSrv)().post(`/api/admin/users/${e}/enable`),t(u(e))}}function f(e){return async t=>{await(0,r.getBackendSrv)().delete(`/api/admin/users/${e}`),r.locationService.push("/admin/users")}}function b(e,t){return async a=>{const s={isGrafanaAdmin:t};await(0,r.getBackendSrv)().put(`/api/admin/users/${e}/permissions`,s),a(u(e))}}function v(e,t,a){return async s=>{const n={loginOrEmail:e.login,role:a};await(0,r.getBackendSrv)().post(`/api/orgs/${t}/users/`,n),s(u(e.id))}}function x(e,t,a){return async s=>{const n={role:a};await(0,r.getBackendSrv)().patch(`/api/orgs/${t}/users/${e}`,n),s(u(e))}}function y(e,t){return async a=>{await(0,r.getBackendSrv)().delete(`/api/orgs/${t}/users/${e}`),a(u(e))}}function w(e){return async t=>{if(!c.Vt.hasPermission(i.bW.UsersAuthTokenList))return;const a=await(0,r.getBackendSrv)().get(`/api/admin/users/${e}/auth-tokens`);a.reverse();const s=a.map((e=>({id:e.id,isActive:e.isActive,seenAt:(0,n.dateTimeFormatTimeAgo)(e.seenAt),createdAt:e.createdAt,clientIp:e.clientIp,browser:e.browser,browserVersion:e.browserVersion,os:e.os,osVersion:e.osVersion,device:e.device})));t((0,o.RC)(s))}}function j(e,t){return async a=>{const s={authTokenId:e};await(0,r.getBackendSrv)().post(`/api/admin/users/${t}/revoke-auth-token`,s),a(w(t))}}function C(e){return async t=>{await(0,r.getBackendSrv)().post(`/api/admin/users/${e}/logout`),t(w(e))}}function k(){return async e=>{const t=c.Vt.hasPermission(i.bW.LDAPStatusRead);if((0,r.featureEnabled)("ldapsync")&&t){const t=await(0,r.getBackendSrv)().get("/api/admin/ldap-sync-status");e((0,o.CY)(t))}}}function S(e){return async t=>{await(0,r.getBackendSrv)().post(`/api/admin/ldap/sync/${e}`),t(u(e))}}function T(){return async e=>{if(c.Vt.hasPermission(i.bW.LDAPStatusRead))try{const t=await(0,r.getBackendSrv)().get("/api/admin/ldap/status");e((0,o.Ls)(t))}catch(t){t.isHandled=!0;const a={title:t.data.message,body:t.data.error};e((0,o.y3)(a))}}}function O(e){return async t=>{try{const a=await(0,r.getBackendSrv)().get(`/api/admin/ldap/${encodeURIComponent(e)}`),{name:s,surname:n,email:i,login:l,isGrafanaAdmin:c,isDisabled:d,roles:u,teams:p}=a,h={info:{name:s,surname:n,email:i,login:l},permissions:{isGrafanaAdmin:c,isDisabled:d},roles:u,teams:p};t((0,o.sJ)(h))}catch(e){e.isHandled=!0;const a={title:e.data.message,body:e.data.error};t((0,o.eq)()),t((0,o.VB)(a))}}}function _(){return e=>{e((0,o.WO)())}}function N(){return e=>{e((0,o.WO)()),e((0,o.eq)())}}function I(){return async(e,t)=>{try{const{perPage:a,page:s,query:n,filters:i}=t().userListAdmin,l=await(0,r.getBackendSrv)().get(`/api/users/search?perpage=${a}&page=${s}&query=${n}&${(e=>e.map((e=>Array.isArray(e.value)?e.value.map((t=>`${e.name}=${t.value}`)).join("&"):`${e.name}=${e.value}`)).join("&"))(i)}`);e((0,o.xh)(l))}catch(e){(0,o.k7)(),console.error(e)}}}const P=(0,l.debounce)((e=>e(I())),500);function M(e){return async t=>{t((0,o.tZ)()),t((0,o.aj)(e)),P(t)}}function F(e){return async t=>{t((0,o.tZ)()),t((0,o.qz)(e)),P(t)}}function A(e){return async t=>{t((0,o.tZ)()),t((0,o.PJ)(e)),t(I())}}},"./public/app/features/admin/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{WO:()=>o,eq:()=>l,Ls:()=>c,y3:()=>d,CY:()=>u,VB:()=>p,sJ:()=>h,pm:()=>b,fm:()=>v,RC:()=>x,UA:()=>y,sL:()=>w,xh:()=>k,tZ:()=>S,k7:()=>T,aj:()=>O,PJ:()=>_,qz:()=>N,ZP:()=>I});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");const n=["totalCount","perPage"];const r={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},i=(0,s.oM)({name:"ldap",initialState:r,reducers:{ldapConnectionInfoLoadedAction:(e,t)=>Object.assign({},e,{ldapError:void 0,connectionInfo:t.payload}),ldapFailedAction:(e,t)=>Object.assign({},e,{ldapError:t.payload}),ldapSyncStatusLoadedAction:(e,t)=>Object.assign({},e,{syncInfo:t.payload}),userMappingInfoLoadedAction:(e,t)=>Object.assign({},e,{user:t.payload,userError:void 0}),userMappingInfoFailedAction:(e,t)=>Object.assign({},e,{user:void 0,userError:t.payload}),clearUserMappingInfoAction:(e,t)=>Object.assign({},e,{user:void 0}),clearUserErrorAction:(e,t)=>Object.assign({},e,{userError:void 0})}}),{clearUserErrorAction:o,clearUserMappingInfoAction:l,ldapConnectionInfoLoadedAction:c,ldapFailedAction:d,ldapSyncStatusLoadedAction:u,userMappingInfoFailedAction:p,userMappingInfoLoadedAction:h}=i.actions,m=i.reducer,g={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},f=(0,s.oM)({name:"userAdmin",initialState:g,reducers:{userProfileLoadedAction:(e,t)=>Object.assign({},e,{user:t.payload}),userOrgsLoadedAction:(e,t)=>Object.assign({},e,{orgs:t.payload}),userSessionsLoadedAction:(e,t)=>Object.assign({},e,{sessions:t.payload}),userAdminPageLoadedAction:(e,t)=>Object.assign({},e,{isLoading:!t.payload}),userAdminPageFailedAction:(e,t)=>Object.assign({},e,{error:t.payload,isLoading:!1})}}),{userProfileLoadedAction:b,userOrgsLoadedAction:v,userSessionsLoadedAction:x,userAdminPageLoadedAction:y,userAdminPageFailedAction:w}=f.actions,j=f.reducer,C=(0,s.oM)({name:"userListAdmin",initialState:{users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!1},reducers:{usersFetched:(e,t)=>{const a=t.payload,{totalCount:s,perPage:r}=a,i=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(a,n),o=Math.ceil(s/r);return Object.assign({},e,i,{totalPages:o,perPage:r,showPaging:o>1,isLoading:!1})},usersFetchBegin:e=>Object.assign({},e,{isLoading:!0}),usersFetchEnd:e=>Object.assign({},e,{isLoading:!1}),queryChanged:(e,t)=>Object.assign({},e,{query:t.payload,page:0}),pageChanged:(e,t)=>Object.assign({},e,{page:t.payload}),filterChanged:(e,t)=>{const{name:a,value:s}=t.payload;return e.filters.some((e=>e.name===a))?Object.assign({},e,{filters:e.filters.map((e=>e.name===a?Object.assign({},e,{value:s}):e))}):Object.assign({},e,{filters:[...e.filters,t.payload]})}}}),{usersFetched:k,usersFetchBegin:S,usersFetchEnd:T,queryChanged:O,pageChanged:_,filterChanged:N}=C.actions,I={ldap:m,userAdmin:j,userListAdmin:C.reducer}},"./public/app/features/alerting/state/ThresholdMapper.ts":(e,t,a)=>{"use strict";a.d(t,{X:()=>r});var s=a("./public/app/core/config.ts");const n=["percent_diff","percent_diff_abs"];class r{static alertToGraphThresholds(e){if(!e.alert||s.vc.unifiedAlertingEnabled)return!1;for(let a=0;a<e.alert.conditions.length;a++){var t;const s=e.alert.conditions[a];if("query"!==s.type)continue;const r=s.evaluator,i=e.thresholds=[],o=-1===n.indexOf(null===(t=s.reducer)||void 0===t?void 0:t.type);switch(r.type){case"gt":{const e=r.params[0];i.push({value:e,op:"gt",visible:o});break}case"lt":{const e=r.params[0];i.push({value:e,op:"lt",visible:o});break}case"outside_range":{const e=r.params[0],t=r.params[1];e>t?(i.push({value:e,op:"gt",visible:o}),i.push({value:t,op:"lt",visible:o})):(i.push({value:e,op:"lt",visible:o}),i.push({value:t,op:"gt",visible:o}));break}case"within_range":{const e=r.params[0],t=r.params[1];e>t?(i.push({value:e,op:"lt",visible:o}),i.push({value:t,op:"gt",visible:o})):(i.push({value:e,op:"gt",visible:o}),i.push({value:t,op:"lt",visible:o}));break}}break}for(const t of e.thresholds)t.fill=e.options.alertThreshold,t.line=e.options.alertThreshold,t.colorMode="critical";return!0}}},"./public/app/features/alerting/state/alertDef.ts":(e,t,a)=>{"use strict";a.d(t,{$:()=>i,Z:()=>l});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./public/app/angular/components/query_part.ts");const r=new n.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]});let i;!function(e){e.IsAbove="gt",e.IsBelow="lt",e.IsOutsideRange="outside_range",e.IsWithinRange="within_range",e.HasNoValue="no_value"}(i||(i={}));function o(e,t){return(0,s.reduce)(e,((e,t)=>(void 0!==t.metric&&void 0!==t.value&&e.push(t.metric+"="+t.value),void 0!==t.Metric&&void 0!==t.Value&&e.push(t.Metric+"="+t.Value),e)),[]).join(t)}const l={alertQueryDef:r,getStateDisplayModel:function(e){switch(e.toLowerCase().replace(/_/g,"")){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"unknown":return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"}}throw{message:"Unknown alert state"}},conditionTypes:[{text:"Query",value:"query"}],evalFunctions:[{value:i.IsAbove,text:"IS ABOVE"},{value:i.IsBelow,text:"IS BELOW"},{value:i.IsOutsideRange,text:"IS OUTSIDE RANGE"},{value:i.IsWithinRange,text:"IS WITHIN RANGE"},{value:i.HasNoValue,text:"HAS NO VALUE"}],evalOperators:[{text:"OR",value:"or"},{text:"AND",value:"and"}],noDataModes:[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],executionErrorModes:[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}],reducerTypes:[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],createReducerPart:function(e){const t=new n.zU({type:e.type,defaultParams:[]});return new n.XN(e,t)},getAlertAnnotationInfo:function(e){return(0,s.isArray)(e.data)?o(e.data,", "):(0,s.isArray)(e.data.evalMatches)?o(e.data.evalMatches,", "):e.data.error?"Error: "+e.data.error:""},alertStateSortScore:{alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5}}},"./public/app/features/alerting/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{ZP:()=>v,gz:()=>p,Oc:()=>h,K:()=>f,J0:()=>b,T2:()=>g,ql:()=>m});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/features/alerting/state/alertDef.ts"),i=a("../../opt/drone/yarncache/redux-npm-4.1.2-04cdbe7a08-6a839cee5b.zip/node_modules/redux/es/redux.js"),o=a("./public/app/features/alerting/unified/utils/redux.ts"),l=a("./public/app/features/alerting/unified/state/actions.ts");const c=(0,i.combineReducers)({promRules:(0,o.jK)("promRules",l.y6,(e=>{let{rulesSourceName:t}=e;return t})).reducer,rulerRules:(0,o.jK)("rulerRules",l.UR,(e=>{let{rulesSourceName:t}=e;return t})).reducer,amConfigs:(0,o.jK)("amConfigs",l.Yh,(e=>e)).reducer,silences:(0,o.jK)("silences",l.je,(e=>e)).reducer,ruleForm:(0,i.combineReducers)({saveRule:(0,o.i6)("saveRule",l.wy).reducer,existingRule:(0,o.i6)("existingRule",l.on).reducer}),grafanaNotifiers:(0,o.i6)("grafanaNotifiers",l.Vj).reducer,saveAMConfig:(0,o.i6)("saveAMConfig",l.mM).reducer,deleteAMConfig:(0,o.i6)("deleteAMConfig",l.Nc).reducer,updateSilence:(0,o.i6)("updateSilence",l.QY).reducer,amAlerts:(0,o.jK)("amAlerts",l.dB,(e=>e)).reducer,folders:(0,o.jK)("folders",l.vL,(e=>e)).reducer,amAlertGroups:(0,o.jK)("amAlertGroups",l.mS,(e=>e)).reducer,lotexSupportsRuleEditing:(0,o.jK)("lotexSupportsRuleEditing",l.Yb,(e=>e)).reducer,testReceivers:(0,o.i6)("testReceivers",l.D8).reducer,updateLotexNamespaceAndGroup:(0,o.i6)("updateLotexNamespaceAndGroup",l.hv).reducer,externalAlertmanagers:(0,i.combineReducers)({alertmanagerConfig:(0,o.i6)("alertmanagerConfig",l.wE).reducer,discoveredAlertmanagers:(0,o.i6)("discoveredAlertmanagers",l.zy).reducer}),managedAlertStateHistory:(0,o.i6)("managedAlertStateHistory",l.Ms).reducer});const d=(0,s.oM)({name:"alertRules",initialState:{items:[],searchQuery:"",isLoading:!1},reducers:{loadAlertRules:e=>Object.assign({},e,{isLoading:!0}),loadedAlertRules:(e,t)=>{const a=t.payload.map((e=>function(e,t){const a=r.Z.getStateDisplayModel(t),s=Object.assign({},e,{stateText:a.text,stateIcon:a.iconClass,stateClass:a.stateClass,stateAge:(0,n.dateTime)(e.newStateDate).fromNow(!0)});return"paused"!==s.state&&(s.executionError&&(s.info="Execution Error: "+s.executionError),s.evalData&&s.evalData.noData&&(s.info="Query returned no data")),s}(e,e.state)));return Object.assign({},e,{items:a,isLoading:!1})},setSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload})}}),u=(0,s.oM)({name:"notificationChannel",initialState:{notificationChannelTypes:[],notificationChannel:{},notifiers:[]},reducers:{setNotificationChannels:(e,t)=>{return Object.assign({},e,{notificationChannelTypes:(a=t.payload,a.map((e=>Object.assign({value:e.type,label:e.name},e,{typeName:e.type}))).sort(((e,t)=>e.name>t.name?1:-1))),notifiers:t.payload});var a},notificationChannelLoaded:(e,t)=>{const a=t.payload,s=e.notifiers.find((e=>e.type===a.type)).options.filter((e=>e.secure));return s.length>0&&s.some((e=>""!==a.settings[e.propertyName]))?function(e,t,a){const s={},n={};return a.forEach((e=>{n[e.propertyName]=t.settings[e.propertyName],s[e.propertyName]=""})),Object.assign({},e,{notificationChannel:Object.assign({},t,{settings:Object.assign({},t.settings,s),secureSettings:Object.assign({},n)})})}(e,t.payload,s):Object.assign({},e,{notificationChannel:a})},resetSecureField:(e,t)=>Object.assign({},e,{notificationChannel:Object.assign({},e.notificationChannel,{secureFields:Object.assign({},e.notificationChannel.secureFields,{[t.payload]:!1})})})}}),{loadAlertRules:p,loadedAlertRules:h,setSearchQuery:m}=d.actions,{setNotificationChannels:g,notificationChannelLoaded:f,resetSecureField:b}=u.actions,v={alertRules:d.reducer,notificationChannel:u.reducer,unifiedAlerting:c}},"./public/app/features/alerting/unified/components/AlertLabel.tsx":(e,t,a)=>{"use strict";a.d(t,{i:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/index.ts"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i=e=>{let{labelKey:t,value:a,operator:n="=",onRemoveLabel:i}=e;return(0,r.jsxs)("div",{className:(0,s.useStyles)(o),children:[t,n,a,!!i&&(0,r.jsx)(s.IconButton,{name:"times",size:"xs",onClick:i})]})},o=e=>n.css`
  padding: ${e.spacing.xs} ${e.spacing.sm};
  border-radius: ${e.border.radius.sm};
  border: solid 1px ${e.colors.border2};
  font-size: ${e.typography.size.sm};
  background-color: ${e.colors.bg2};
  font-weight: ${e.typography.weight.bold};
  color: ${e.colors.formLabel};
  display: inline-block;
  line-height: 1.2;
`},"./public/app/features/alerting/unified/components/AlertLabels.tsx":(e,t,a)=>{"use strict";a.d(t,{s:()=>o});var s=a("./packages/grafana-ui/src/index.ts"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=(a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),a("./public/app/features/alerting/unified/components/AlertLabel.tsx")),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=e=>{let{labels:t,className:a}=e;const o=(0,s.useStyles)(l),c=Object.entries(t).filter((e=>{let[t]=e;return!(t.startsWith("__")&&t.endsWith("__"))}));return(0,i.jsx)("div",{className:(0,n.cx)(o.wrapper,a),children:c.map(((e,t)=>{let[a,s]=e;return(0,i.jsx)(r.i,{labelKey:a,value:s},`${a}-${s}-${t}`)}))})},l=e=>({wrapper:n.css`
    & > * {
      margin-bottom: ${e.spacing.xs};
      margin-right: ${e.spacing.xs};
    }
    padding-bottom: ${e.spacing.xs};
  `})},"./public/app/features/alerting/unified/components/AlertManagerPicker.tsx":(e,t,a)=>{"use strict";a.d(t,{P:()=>c});var s=a("./public/app/features/alerting/unified/utils/datasource.ts"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./public/app/features/alerting/unified/utils/config.ts"),o=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=e=>{let{onChange:t,current:a,disabled:o=!1}=e;const c=(0,r.useStyles2)(d),u=(0,n.useMemo)((()=>[{label:"Grafana",value:s.GC,imgUrl:"public/img/grafana_icon.svg",meta:{}},...(0,i.x)().filter((e=>e.type===s.ye.Alertmanager)).map((e=>({label:e.name.substr(0,37),value:e.name,imgUrl:e.meta.info.logos.small,meta:e.meta})))]),[]);return 1===u.length?null:(0,l.jsx)(r.Field,{className:c.field,label:o?"Alertmanager":"Choose Alertmanager",disabled:o,"data-testid":"alertmanager-picker",children:(0,l.jsx)(r.Select,{"aria-label":o?"Alertmanager":"Choose Alertmanager",menuShouldPortal:!0,width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:e=>e.value&&t(e.value),options:u,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:a,getOptionLabel:e=>e.label})})},d=e=>({field:o.css`
    margin-bottom: ${e.spacing(4)};
  `})},"./public/app/features/alerting/unified/components/AnnotationDetailsField.tsx":(e,t,a)=>{"use strict";a.d(t,{a:()=>d});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./public/app/features/alerting/unified/components/Well.tsx"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./public/app/features/alerting/unified/components/DetailsField.tsx"),o=a("./public/app/features/alerting/unified/utils/constants.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=["message","description"],d=e=>{let{annotationKey:t,value:a}=e;const s=o.vY[t]?(0,l.jsx)(r.Tooltip,{content:t,placement:"top",theme:"info",children:(0,l.jsx)("span",{children:o.vY[t]})}):t;return(0,l.jsx)(i.C,{label:s,horizontal:!0,children:(0,l.jsx)(u,{annotationKey:t,value:a})})},u=e=>{let{annotationKey:t,value:a}=e;const n=(0,r.useStyles)(p);return c.includes(t)?(0,l.jsx)(s.t,{children:a}):a&&a.startsWith("http")?(0,l.jsx)("a",{href:a,target:"__blank",className:n.link,children:a}):(0,l.jsx)(l.Fragment,{children:a})},p=e=>({well:n.css`
    word-break: break-all;
  `,link:n.css`
    word-break: break-all;
    color: ${e.colors.textBlue};
  `})},"./public/app/features/alerting/unified/components/CollapseToggle.tsx":(e,t,a)=>{"use strict";a.d(t,{U:()=>o});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i=["isCollapsed","onToggle","className","text","size"];const o=e=>{let{isCollapsed:t,onToggle:a,className:o,text:c,size:d="xl"}=e,u=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,i);const p=(0,n.useStyles)(l);return(0,r.jsxs)("button",Object.assign({"aria-label":(t?"Expand":"Collapse")+" alert group",className:(0,s.cx)(p.expandButton,o),onClick:()=>a(!t)},u,{children:[(0,r.jsx)(n.Icon,{size:d,name:t?"angle-right":"angle-down"}),c]}))},l=()=>({expandButton:s.css`
    background: none;
    border: none;

    outline: none !important;

    display: inline-flex;
    align-items: center;

    svg {
      margin-bottom: 0;
    }
  `})},"./public/app/features/alerting/unified/components/DetailsField.tsx":(e,t,a)=>{"use strict";a.d(t,{C:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i=e=>{let{className:t,label:a,horizontal:i,children:l}=e;const c=(0,n.useStyles2)(o);return(0,r.jsxs)("div",{className:(0,s.cx)(t,c.field,i?c.fieldHorizontal:c.fieldVertical),children:[(0,r.jsx)("div",{children:a}),(0,r.jsx)("div",{children:l})]})},o=e=>({fieldHorizontal:s.css`
    flex-direction: row;
    ${e.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:s.css`
    flex-direction: column;
  `,field:s.css`
    display: flex;
    margin: ${e.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${e.spacing(1)};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${e.colors.text.secondary};
    }
  `})},"./public/app/features/alerting/unified/components/DynamicTable.tsx":(e,t,a)=>{"use strict";a.d(t,{t:()=>o});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=e=>{let{cols:t,items:a,isExpandable:o=!1,onCollapse:c,onExpand:d,isExpanded:u,renderExpandedContent:p,testIdGenerator:h,renderPrefixCell:m,renderPrefixHeader:g}=e;if((c||d||u)&&!(c&&d&&u))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((o||p)&&(!o||!p))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const f=(0,r.useStyles2)(l(t,o,!!g)),[b,v]=(0,s.useState)([]);return(0,i.jsxs)("div",{className:f.container,"data-testid":"dynamic-table",children:[(0,i.jsxs)("div",{className:f.row,"data-testid":"header",children:[g&&g(),o&&(0,i.jsx)("div",{className:f.cell}),t.map((e=>(0,i.jsx)("div",{className:f.cell,children:e.label},e.id)))]}),a.map(((e,s)=>{var l;const g=u?u(e):b.includes(e.id);return(0,i.jsxs)("div",{className:f.row,"data-testid":null!==(l=null==h?void 0:h(e,s))&&void 0!==l?l:"row",children:[m&&m(e,s,a),o&&(0,i.jsx)("div",{className:(0,n.cx)(f.cell,f.expandCell),children:(0,i.jsx)(r.IconButton,{"aria-label":(g?"Collapse":"Expand")+" row",size:"xl","data-testid":"collapse-toggle",className:f.expandButton,name:g?"angle-down":"angle-right",onClick:()=>(e=>{u&&c&&d?u(e)?c(e):d(e):v(b.includes(e.id)?b.filter((t=>t!==e.id)):[...b,e.id])})(e),type:"button"})}),t.map((t=>(0,i.jsx)("div",{className:(0,n.cx)(f.cell,f.bodyCell),"data-column":t.label,children:t.renderCell(e,s)},`${e.id}-${t.id}`))),g&&p&&(0,i.jsx)("div",{className:f.expandedContentRow,"data-testid":"expanded-content",children:p(e,s,a)})]},`${e.id}-${s}`)}))]})},l=(e,t,a)=>{const s=e.map((e=>e.size?"number"==typeof e.size?`${e.size}fr`:e.size:"auto"));return t&&s.unshift("calc(1em + 16px)"),a&&s.unshift("0"),e=>({container:n.css`
      border: 1px solid ${e.colors.border.strong};
      border-radius: 2px;
      color: ${e.colors.text.secondary};
    `,row:n.css`
      display: grid;
      grid-template-columns: ${s.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${e.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${e.colors.background.primary};
      }

      ${e.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${e.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${a?"\n            & > *:first-child {\n              display: none;\n            }\n          ":""}
      }
    `,cell:n.css`
      align-items: center;
      padding: ${e.spacing(1)};

      ${e.breakpoints.down("sm")} {
        padding: ${e.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:n.css`
      overflow: hidden;
      word-break: break-all;
      ${e.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${e.colors.text.primary};
        }
      }
    `,expandCell:n.css`
      justify-content: center;

      ${e.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:n.css`
      grid-column-end: ${s.length+1};
      grid-column-start: ${a?3:2};
      grid-row: 2;
      padding: 0 ${e.spacing(3)} 0 ${e.spacing(1)};
      position: relative;

      ${e.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${e.colors.border.strong};
        grid-row: auto;
        padding: ${e.spacing(1)} 0 0 0;
      }
    `,expandButton:n.css`
      margin-right: 0;
      display: block;
    `})}},"./public/app/features/alerting/unified/components/StateTag.tsx":(e,t,a)=>{"use strict";a.d(t,{i:()=>i});var s=a("./packages/grafana-ui/src/index.ts"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=(a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js"));const i=e=>{let{children:t,state:a}=e;const i=(0,s.useStyles2)(o);return(0,r.jsx)("span",{className:(0,n.cx)(i.common,i[a]),children:t||a})},o=e=>({common:n.css`
    display: inline-block;
    color: white;
    border-radius: ${e.shape.borderRadius()};
    font-size: ${e.typography.size.sm};
    padding: ${e.spacing(.5,1)};
    text-transform: capitalize;
    line-height: 1.2;
    min-width: ${e.spacing(8)};
    text-align: center;
    font-weight: ${e.typography.fontWeightBold};
  `,good:n.css`
    background-color: ${e.colors.success.main};
    border: solid 1px ${e.colors.success.main};
    color: ${e.colors.success.contrastText};
  `,warning:n.css`
    background-color: ${e.colors.warning.main};
    border: solid 1px ${e.colors.warning.main};
    color: ${e.colors.warning.contrastText};
  `,bad:n.css`
    background-color: ${e.colors.error.main};
    border: solid 1px ${e.colors.error.main};
    color: ${e.colors.error.contrastText};
  `,neutral:n.css`
    background-color: ${e.colors.secondary.main};
    border: solid 1px ${e.colors.secondary.main};
    color: ${e.colors.secondary.contrastText};
  `,info:n.css`
    background-color: ${e.colors.primary.main};
    border: solid 1px ${e.colors.primary.main};
    color: ${e.colors.primary.contrastText};
  `})},"./public/app/features/alerting/unified/components/Well.tsx":(e,t,a)=>{"use strict";a.d(t,{t:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/index.ts"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i=e=>{let{children:t,className:a}=e;const i=(0,s.useStyles)(o);return(0,r.jsx)("div",{className:(0,n.cx)(i.wrapper,a),children:t})},o=e=>({wrapper:n.css`
    background-color: ${e.colors.panelBg};
    border: solid 1px ${e.colors.formInputBorder};
    border-radius: ${e.border.radius.sm};
    padding: ${e.spacing.xs} ${e.spacing.sm};
    font-family: ${e.typography.fontFamily.monospace};
  `})},"./public/app/features/alerting/unified/components/alert-groups/AlertGroupHeader.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/index.ts"),n=a("./public/app/features/alerting/unified/styles/notifications.ts"),r=a("../../opt/drone/yarncache/pluralize-npm-8.0.0-f5f044ed52-08931d4a6a.zip/node_modules/pluralize/pluralize.js"),i=a.n(r),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=e=>{let{group:t}=e;const a=(0,s.useStyles2)(n.r),r=t.alerts.length,l=t.alerts.reduce(((e,t)=>(e[t.status.state]?e[t.status.state]+=1:e[t.status.state]=1,e)),{});return(0,o.jsxs)("div",{children:[`${r} ${i()("alert",r)}: `,Object.entries(l).map(((e,s)=>{let[n,r]=e;return(0,o.jsxs)("span",{className:a[n],children:[s>0&&", ",`${r} ${n}`]},`${JSON.stringify(t.labels)}-notifications-${s}`)}))]})}},"./public/app/features/alerting/unified/components/rule-editor/RuleFolderPicker.tsx":(e,t,a)=>{"use strict";a.d(t,{W:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./public/app/core/components/Select/FolderPicker.tsx"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const r=["value"];const i=e=>{let{value:t}=e,a=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,r);return(0,n.jsx)(s.E,Object.assign({showRoot:!1,allowEmpty:!0,initialTitle:null==t?void 0:t.title,initialFolderId:null==t?void 0:t.id},a))}},"./public/app/features/alerting/unified/components/rules/AlertInstancesTable.tsx":(e,t,a)=>{"use strict";a.d(t,{o:()=>p});a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js");var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./public/app/features/alerting/unified/utils/rules.ts"),r=a("./public/app/features/alerting/unified/components/AlertLabels.tsx"),i=a("./public/app/features/alerting/unified/components/AnnotationDetailsField.tsx"),o=a("./public/app/features/alerting/unified/components/DetailsField.tsx"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=e=>{let{instance:t}=e;const a=(Object.entries(t.annotations||{})||[]).filter((e=>{let[t,a]=e;return!!a.trim()}));return(0,l.jsxs)("div",{children:[t.value&&(0,l.jsx)(o.C,{label:"Value",horizontal:!0,children:t.value}),a.map((e=>{let[t,a]=e;return(0,l.jsx)(i.a,{annotationKey:t,value:a},t)}))]})};var d=a("./public/app/features/alerting/unified/components/rules/AlertStateTag.tsx"),u=a("./public/app/features/alerting/unified/components/DynamicTable.tsx");const p=e=>{let{instances:t}=e;const a=(0,s.useMemo)((()=>t.map((e=>({data:e,id:(0,n.pB)(e)})))),[t]);return(0,l.jsx)(u.t,{cols:h,isExpandable:!0,items:a,renderExpandedContent:e=>{let{data:t}=e;return(0,l.jsx)(c,{instance:t})}})},h=[{id:"state",label:"State",renderCell:e=>{let{data:{state:t}}=e;return(0,l.jsx)(d.l,{state:t})},size:"80px"},{id:"labels",label:"Labels",renderCell:e=>{let{data:{labels:t}}=e;return(0,l.jsx)(r.s,{labels:t})}},{id:"created",label:"Created",renderCell:e=>{let{data:{activeAt:t}}=e;return(0,l.jsx)(l.Fragment,{children:t.startsWith("0001")?"-":t.substr(0,19).replace("T"," ")})},size:"150px"}]},"./public/app/features/alerting/unified/components/rules/AlertStateTag.tsx":(e,t,a)=>{"use strict";a.d(t,{l:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./public/app/features/alerting/unified/utils/rules.ts"),n=a("./public/app/features/alerting/unified/components/StateTag.tsx"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i=e=>{let{state:t}=e;return(0,r.jsx)(n.i,{state:s.Aq[t],children:(0,s.SS)(t)})}},"./public/app/features/alerting/unified/hooks/useUnifiedAlertingSelector.ts":(e,t,a)=>{"use strict";a.d(t,{_:()=>n});var s=a("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js");function n(e,t){return(0,s.useSelector)((t=>e(t.unifiedAlerting)),t)}},"./public/app/features/alerting/unified/state/actions.ts":(e,t,a)=>{"use strict";a.d(t,{sx:()=>ie,Yb:()=>te,QY:()=>Q,Nc:()=>ae,r0:()=>se,X4:()=>K,hS:()=>V,S6:()=>Y,yO:()=>Z,mS:()=>ee,Yh:()=>P,ei:()=>$,lB:()=>L,dB:()=>G,on:()=>E,zy:()=>M,wE:()=>F,vL:()=>J,sw:()=>X,Ms:()=>q,Vj:()=>H,y6:()=>I,UR:()=>A,je:()=>D,wy:()=>U,D8:()=>ne,mM:()=>W,hv:()=>re});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");var r=a("./packages/grafana-data/src/index.ts"),i=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/lastValueFrom.js"),o=a("./public/app/features/alerting/unified/utils/datasource.ts"),l=a("./public/app/features/alerting/unified/utils/alertmanager.ts");async function c(e){try{var t,a;const n=await(0,i.n)((0,s.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,o.aK)(e)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:null!==(t=n.data.template_files)&&void 0!==t?t:{},alertmanager_config:null!==(a=n.data.alertmanager_config)&&void 0!==a?a:{}}}catch(t){var n,r;if(e===o.GC&&null!==(n=t.data)&&void 0!==n&&null!==(r=n.message)&&void 0!==r&&r.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw t}}async function d(e){return(await(0,i.n)((0,s.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,o.aK)(e)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function u(e,t,a){const n={receivers:t,alert:a};try{const t=await(0,i.n)((0,s.getBackendSrv)().fetch({method:"POST",data:n,url:`/api/alertmanager/${(0,o.aK)(e)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(p(t.data))throw new Error(h(t.data))}catch(e){if((0,l.kW)(e)&&function(e){const t=null==e?void 0:e.receivers;if(Array.isArray(t))return t.every((e=>"string"==typeof e.name&&Array.isArray(e.grafana_managed_receiver_configs)));return!1}(e.data)&&p(e.data))throw new Error(h(e.data));throw e}}function p(e){return e.receivers.some((e=>e.grafana_managed_receiver_configs.some((e=>"failed"===e.status))))}function h(e){return e.receivers.flatMap((e=>e.grafana_managed_receiver_configs.filter((e=>"failed"===e.status)).map((e=>{var t;return null!==(t=e.error)&&void 0!==t?t:"Unknown error."})))).join("; ")}async function m(){return(await(0,i.n)((0,s.getBackendSrv)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function g(e){return e.replace(/"/g,'\\"')}var f=a("./public/app/features/alerting/unified/utils/constants.ts");async function b(e,t,a){await(0,i.n)((0,s.getBackendSrv)().fetch({method:"POST",url:`/api/ruler/${(0,o.aK)(e)}/api/v1/rules/${encodeURIComponent(t)}`,data:a,showErrorAlert:!1,showSuccessAlert:!1}))}async function v(e,t){if(null!=t&&t.dashboardUID&&e!==o.GC)throw new Error("Filtering by dashboard UID is not supported for cloud rules sources.");const a={};return null!=t&&t.dashboardUID&&(a.dashboard_uid=t.dashboardUID,t.panelId&&(a.panel_id=String(t.panelId))),w(`/api/ruler/${(0,o.aK)(e)}/api/v1/rules`,{},a)}async function x(e,t,a){return w(`/api/ruler/${(0,o.aK)(e)}/api/v1/rules/${encodeURIComponent(t)}/${encodeURIComponent(a)}`,null)}async function y(e,t,a){await(0,i.n)((0,s.getBackendSrv)().fetch({url:`/api/ruler/${(0,o.aK)(e)}/api/v1/rules/${encodeURIComponent(t)}/${encodeURIComponent(a)}`,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1}))}async function w(e,t,a){try{return(await(0,i.n)((0,s.getBackendSrv)().fetch({url:e,showErrorAlert:!1,showSuccessAlert:!1,params:a}))).data}catch(e){if(!function(e){const t=null!=e.data;return Number.isFinite(e.status)&&t}(e))throw e;if(function(e){var t,a;return 404===e.status&&((null===(t=e.data.message)||void 0===t?void 0:t.includes("group does not exist"))||(null===(a=e.data.message)||void 0===a?void 0:a.includes("no rule groups found")))}(e))return t;if(function(e){var t;return 404===e.status||500===e.status&&(null===(t=e.data.message)||void 0===t?void 0:t.includes("unexpected content type from upstream. expected YAML, got text/html"))}(e))throw Object.assign({},e,{data:Object.assign({},e.data,{message:f.jZ})});throw e}}var j=a("./public/app/features/alerting/unified/types/rule-form.ts"),C=a("./public/app/features/alerting/unified/utils/misc.ts"),k=a("./public/app/features/alerting/unified/utils/redux.ts"),S=a("./public/app/features/alerting/unified/utils/rule-form.ts"),T=a("./public/app/features/alerting/unified/utils/rules.ts"),O=a("./public/app/features/alerting/unified/utils/rule-id.ts"),_=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),N=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/messageFromError.ts");const I=(0,n.hg)("unifiedalerting/fetchPromRules",(e=>{let{rulesSourceName:t,filter:a}=e;return(0,k.$b)(async function(e,t){if(null!=t&&t.dashboardUID&&e!==o.GC)throw new Error("Filtering by dashboard UID is not supported for cloud rules sources.");const a={};null!=t&&t.dashboardUID&&(a.dashboard_uid=t.dashboardUID,t.panelId&&(a.panel_id=String(t.panelId)));const n=await(0,i.n)((0,s.getBackendSrv)().fetch({url:`/api/prometheus/${(0,o.aK)(e)}/api/v1/rules`,showErrorAlert:!1,showSuccessAlert:!1,params:a})).catch((e=>{if("status"in e&&404===e.status)throw new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?");throw e})),r={};return n.data.data.groups.forEach((t=>{t.rules.forEach((e=>{e.query=e.query||""})),r[t.file]?r[t.file].groups.push(t):r[t.file]={dataSourceName:e,name:t.file,groups:[t]}})),Object.values(r)}(t,a))})),P=(0,n.hg)("unifiedalerting/fetchAmConfig",(e=>(0,k.$b)((async()=>(0,o.RY)(e)?d(e).then((e=>({alertmanager_config:e.config,template_files:{}}))):(0,C.fm)((()=>c(e)),(e=>{var t;return!(null===(t=(0,N.Z)(e))||void 0===t||!t.includes("alertmanager storage object not found"))}),3e4).then((t=>(0,_.isEmpty)(t.alertmanager_config)&&(0,_.isEmpty)(t.template_files)&&e!==o.GC?d(e).then((e=>({alertmanager_config:e.config,template_files:{}}))):t)))()))),M=(0,n.hg)("unifiedAlerting/fetchExternalAlertmanagers",(()=>(0,k.$b)(async function(){return(await(0,i.n)((0,s.getBackendSrv)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}()))),F=(0,n.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",(()=>(0,k.$b)(m()))),A=(0,n.hg)("unifiedalerting/fetchRulerRules",(e=>{let{rulesSourceName:t,filter:a}=e;return(0,k.$b)(v(t,a))})),D=(0,n.hg)("unifiedalerting/fetchSilences",(e=>(0,k.$b)(async function(e){return(await(0,i.n)((0,s.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,o.aK)(e)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}(e))));function $(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,a)=>{const{promRules:s,rulerRules:n}=a().unifiedAlerting;(0,o.mA)().map((a=>{var r,i;!e&&null!==(r=s[a])&&void 0!==r&&r.loading||t(I({rulesSourceName:a})),!e&&null!==(i=n[a])&&void 0!==i&&i.loading||t(A({rulesSourceName:a}))}))}}function L(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,a)=>{const{promRules:s}=a().unifiedAlerting;(0,o.mA)().map((a=>{var n;!e&&null!==(n=s[a])&&void 0!==n&&n.loading||t(I({rulesSourceName:a}))}))}}async function R(e){if((0,T.Kl)(e)){const t=await v(o.GC);for(const[a,s]of Object.entries(t))for(const t of s){const s=t.rules.find((t=>{var a;return(0,T.Pc)(t)&&(null===(a=t.grafana_alert)||void 0===a?void 0:a.uid)===e.uid}));if(s)return{group:t,ruleSourceName:o.GC,namespace:a,rule:s}}}if((0,T.E4)(e)){const{ruleSourceName:t,namespace:a,groupName:s}=e,n=await x(t,a,s);if(!n)return null;const r=n.rules.find((s=>{const r=O.Zk(t,a,n.name,s);return O.Dg(r,e)}));return r?{group:n,ruleSourceName:t,namespace:a,rule:r}:null}if((0,T.qE)(e))throw new Error("Native prometheus rules can not be edited in grafana.");return null}const E=(0,n.hg)("unifiedalerting/fetchEditableRule",(e=>(0,k.$b)(R(e))));async function z(e){const{ruleSourceName:t,namespace:a,group:s,rule:n}=e;(0,o.HY)(t)?await y(o.GC,a,s.name):1!==s.rules.length?await b(t,a,Object.assign({},s,{rules:s.rules.filter((e=>e!==n))})):await y(t,a,s.name)}function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async a=>{(0,k.Ez)((async()=>{const n=await R(e);if(!n)throw new Error("Rule not found.");await z(n),a(A({rulesSourceName:n.ruleSourceName})),a(I({rulesSourceName:n.ruleSourceName})),t.navigateTo&&s.locationService.replace(t.navigateTo)})(),{successMessage:"Rule deleted."})}}async function B(e,t){var a,s;const{folder:n,evaluateEvery:r}=e,i=(0,S.mI)(e);if(!n)throw new Error("Folder must be specified");if(t){const e=await R(O.CK(t));if(!e)throw new Error("Rule not found.");if(e.namespace===n.title){const t=e.rule.grafana_alert.uid;return i.grafana_alert.uid=t,await b(o.GC,e.namespace,{name:e.group.name,interval:r,rules:[i]}),{uid:t}}}const l=await async function(e,t){return(await w(`/api/ruler/${(0,o.aK)(e)}/api/v1/rules/${encodeURIComponent(t)}`,{}))[t]||[]}(o.GC,n.title),c=function(e,t){let a=e,s=1;for(;t.find((e=>e.name===a));)a=`${e}-${++s}`;return a}(e.name,l);i.grafana_alert.title=c;const d={name:c,interval:r,rules:[i]};await b(o.GC,n.title,d);const u=await x(o.GC,n.title,c),p=null==u||null===(a=u.rules[0])||void 0===a||null===(s=a.grafana_alert)||void 0===s?void 0:s.uid;if(p){if(t){const e=await R(O.CK(t));e&&e.namespace!==n.title&&await z(e)}return{uid:p}}throw new Error("Failed to fetch created rule.")}const U=(0,n.hg)("unifiedalerting/saveRuleForm",(e=>{let{values:t,existing:a,redirectOnSave:n}=e;return(0,k.Ez)((0,k.$b)((async()=>{const{type:e}=t;let r;if(e===j.$.cloudAlerting||e===j.$.cloudRecording)r=await async function(e,t){const{dataSourceName:a,group:s,namespace:n}=e,r=(0,S.yh)(e);if(a&&s&&n){if(t){const e=await R(O.CK(t));if(!e)throw new Error("Rule not found.");if(e.namespace===n&&e.group.name===s){const t=Object.assign({},e.group,{rules:e.group.rules.map((t=>t===e.rule?r:t))});return await b(a,n,t),O.Zk(a,n,s,r)}await z(e)}const e=await x(a,n,s),i=e?Object.assign({},e,{rules:[...e.rules,r]}):{name:s,rules:[r]};return await b(a,n,i),O.Zk(a,n,s,r)}throw new Error("Data source and location must be specified")}(t,a);else{if(e!==j.$.grafana)throw new Error("Unexpected rule form type");r=await B(t,a)}if(n)s.locationService.push(n);else{const e=`/alerting/${encodeURIComponent(O.$V(r))}/edit`;s.locationService.getLocation().pathname!==e&&s.locationService.replace(e)}})()),{successMessage:a?`Rule "${t.name}" updated.`:`Rule "${t.name}" saved.`,errorMessage:"Failed to save rule"})})),H=(0,n.hg)("unifiedalerting/fetchGrafanaNotifiers",(()=>(0,k.$b)((0,s.getBackendSrv)().get("/api/alert-notifiers")))),q=(0,n.hg)("unifiedalerting/fetchGrafanaAnnotations",(e=>(0,k.$b)(function(e){return(0,s.getBackendSrv)().get("/api/annotations",{alertId:e})}(e)))),W=(0,n.hg)("unifiedalerting/updateAMConfig",((e,t)=>{let{alertManagerSourceName:a,oldConfig:n,newConfig:r,successMessage:d,redirectPath:u,refetch:p}=e;return(0,k.Ez)((0,k.$b)((async()=>{const e=await c(a);if(!((0,_.isEmpty)(e.alertmanager_config)&&(0,_.isEmpty)(e.template_files)||JSON.stringify(e)===JSON.stringify(n)))throw new Error("It seems configuration has been recently updated. Please reload page and try again to make sure that recent changes are not overwritten.");await async function(e,t){await(0,i.n)((0,s.getBackendSrv)().fetch({method:"POST",url:`/api/alertmanager/${(0,o.aK)(e)}/config/api/v1/alerts`,data:t,showErrorAlert:!1,showSuccessAlert:!1}))}(a,(0,l.X4)(r)),p&&await t.dispatch(P(a)),u&&s.locationService.push((0,C.eQ)(u,a))})()),{successMessage:d})})),G=(0,n.hg)("unifiedalerting/fetchAmAlerts",(e=>(0,k.$b)(async function(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const c=r.urlUtil.toUrlParams({silenced:a,active:n,inhibited:l})+(null==t?void 0:t.map((e=>`filter=${encodeURIComponent(`${g(e.name)}=${e.isRegex?"~":""}"${g(e.value)}"`)}`)).join("&"))||"";return(await(0,i.n)((0,s.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,o.aK)(e)}/api/v2/alerts`+(c?"?"+c:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}(e,[],!0,!0,!0)))),Z=(e,t)=>async a=>{await(0,k.Ez)(async function(e,t){await(0,s.getBackendSrv)().delete(`/api/alertmanager/${(0,o.aK)(e)}/api/v2/silence/${encodeURIComponent(t)}`)}(e,t),{successMessage:"Silence expired."}),a(D(e)),a(G(e))},Q=(0,n.hg)("unifiedalerting/updateSilence",(e=>{let{alertManagerSourceName:t,payload:a,exitOnSave:n,successMessage:r}=e;return(0,k.Ez)((0,k.$b)((async()=>{await async function(e,t){return(await(0,i.n)((0,s.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,o.aK)(e)}/api/v2/silences`,data:t,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}(t,a),n&&s.locationService.push("/alerting/silences")})()),{successMessage:r})})),K=(e,t)=>(a,s)=>{var n,r,i;const o=null===(n=s().unifiedAlerting.amConfigs)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.result;if(!o)throw new Error(`Config for ${t} not found`);if(null===(i=o.alertmanager_config.receivers)||void 0===i||!i.find((t=>t.name===e)))throw new Error(`Cannot delete receiver ${e}: not found in config.`);const l=Object.assign({},o,{alertmanager_config:Object.assign({},o.alertmanager_config,{receivers:o.alertmanager_config.receivers.filter((t=>t.name!==e))})});return a(W({newConfig:l,oldConfig:o,alertManagerSourceName:t,successMessage:"Contact point deleted.",refetch:!0}))},Y=(e,t)=>(a,s)=>{var n,r,i,o;const l=null===(n=s().unifiedAlerting.amConfigs)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.result;if(!l)throw new Error(`Config for ${t} not found`);if("string"!=typeof(null===(i=l.template_files)||void 0===i?void 0:i[e]))throw new Error(`Cannot delete template ${e}: not found in config.`);const c=Object.assign({},l.template_files);delete c[e];const d=Object.assign({},l,{alertmanager_config:Object.assign({},l.alertmanager_config,{templates:null===(o=l.alertmanager_config.templates)||void 0===o?void 0:o.filter((t=>t!==e))}),template_files:c});return a(W({newConfig:d,oldConfig:l,alertManagerSourceName:t,successMessage:"Template deleted.",refetch:!0}))},J=(0,n.hg)("unifiedalerting/fetchFolder",(e=>(0,k.$b)((0,s.getBackendSrv)().getFolderByUid(e)))),X=e=>(t,a)=>{var s;null!==(s=a().unifiedAlerting.folders[e])&&void 0!==s&&s.dispatched||t(J(e))},ee=(0,n.hg)("unifiedalerting/fetchAlertGroups",(e=>(0,k.$b)(async function(e){return(await(0,i.n)((0,s.getBackendSrv)().fetch({url:`/api/alertmanager/${(0,o.aK)(e)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}(e)))),te=(0,n.hg)("unifiedalerting/checkIfLotexRuleEditingSupported",(async e=>(0,k.Ez)((async()=>{try{return await x(e,"test","test"),!0}catch(e){var t,a,s,n;if((0,l.kW)(e)&&(null!==(t=e.data.message)&&void 0!==t&&t.includes("GetRuleGroup unsupported in rule local store")||null!==(a=e.data.message)&&void 0!==a&&a.includes("page not found"))||null!==(s=e.message)&&void 0!==s&&s.includes("404 from rules config endpoint")||null!==(n=e.data.message)&&void 0!==n&&n.includes(f.jZ))return!1;throw e}})(),{errorMessage:`Failed to determine if "${e}" allows editing rules`}))),ae=(0,n.hg)("unifiedalerting/deleteAlertManagerConfig",(async(e,t)=>(0,k.Ez)((0,k.$b)((async()=>{await async function(e){await(0,i.n)((0,s.getBackendSrv)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,o.aK)(e)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}(e),await t.dispatch(P(e))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."}))),se=(e,t)=>async(a,s)=>{var n,r,i;const o=s().unifiedAlerting.amConfigs[e].result,c=null!==(n=null==o||null===(r=o.alertmanager_config)||void 0===r||null===(i=r.mute_time_intervals)||void 0===i?void 0:i.filter((e=>{let{name:a}=e;return a!==t})))&&void 0!==n?n:[];var d;o&&(0,k.Ez)(a(W({alertManagerSourceName:e,oldConfig:o,newConfig:Object.assign({},o,{alertmanager_config:Object.assign({},o.alertmanager_config,{route:o.alertmanager_config.route?(0,l.rU)(t,null===(d=o.alertmanager_config)||void 0===d?void 0:d.route):void 0,mute_time_intervals:c})}),refetch:!0})),{successMessage:`Deleted "${t}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},ne=(0,n.hg)("unifiedalerting/testReceivers",(e=>{let{alertManagerSourceName:t,receivers:a,alert:s}=e;return(0,k.Ez)((0,k.$b)(u(t,a,s)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})})),re=(0,n.hg)("unifiedalerting/updateLotexNamespaceAndGroup",(async(e,t)=>(0,k.Ez)((0,k.$b)((async()=>{const{rulesSourceName:a,namespaceName:n,groupName:r,newNamespaceName:l,newGroupName:c,groupInterval:d}=e;if(e.rulesSourceName===o.GC)throw new Error("this action does not support Grafana rules");const u=await v(a);if(!u[n])throw new Error(`Namespace "${n}" not found.`);const p=u[n].find((e=>e.name===r));if(!p)throw new Error(`Group "${r}" not found.`);if(c!==r&&u[n].find((e=>e.name===c)))throw new Error(`Group "${c}" already exists.`);if(l!==n&&u[l])throw new Error(`Namespace "${l}" already exists.`);if(l===n&&r===c&&d===p.interval)throw new Error("Nothing changed.");if(l!==n){for(const e of u[n])await b(a,l,e.name===r?Object.assign({},e,{name:c,interval:d}):e);await async function(e,t){await(0,i.n)((0,s.getBackendSrv)().fetch({method:"DELETE",url:`/api/ruler/${(0,o.aK)(e)}/api/v1/rules/${encodeURIComponent(t)}`,showErrorAlert:!1,showSuccessAlert:!1}))}(a,n)}else await b(a,n,Object.assign({},p,{name:c,interval:d})),c!==r&&await y(a,n,r);await t.dispatch(A({rulesSourceName:a}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"}))),ie=(0,n.hg)("unifiedAlerting/addExternalAlertmanagers",(async(e,t)=>(0,k.Ez)((0,k.$b)((async()=>{await async function(e){await(0,i.n)((0,s.getBackendSrv)().fetch({method:"POST",data:{alertmanagers:e},url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then((()=>{m()}))}(e),t.dispatch(F())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"})))},"./public/app/features/alerting/unified/styles/notifications.ts":(e,t,a)=>{"use strict";a.d(t,{r:()=>r});var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./public/app/plugins/datasource/alertmanager/types.ts");const r=e=>({[n.Z9.Active]:s.css`
    color: ${e.colors.error.text};
  `,[n.Z9.Suppressed]:s.css`
    color: ${e.colors.primary.text};
  `,[n.Z9.Unprocessed]:s.css`
    color: ${e.colors.secondary.text};
  `})},"./public/app/features/alerting/unified/types/rule-form.ts":(e,t,a)=>{"use strict";let s;a.d(t,{$:()=>s}),function(e){e.grafana="grafana",e.cloudAlerting="cloud-alerting",e.cloudRecording="cloud-recording"}(s||(s={}))},"./public/app/features/alerting/unified/utils/alertmanager.ts":(e,t,a)=>{"use strict";a.d(t,{X4:()=>i,rU:()=>o,FM:()=>l,nv:()=>d,zy:()=>u,cm:()=>p,_J:()=>h,tA:()=>m,tC:()=>f,Zh:()=>b,eD:()=>v,Tc:()=>x,Xy:()=>y,uK:()=>w,u6:()=>j,v7:()=>C,J8:()=>k,m8:()=>S,qw:()=>T,kW:()=>O});var s=a("./public/app/plugins/datasource/alertmanager/types.ts"),n=a("./public/app/features/alerting/unified/utils/config.ts"),r=a("./public/app/features/alerting/unified/utils/datasource.ts");function i(e){return e.alertmanager_config.receivers||(e.alertmanager_config.receivers=[{name:"default "}]),e.alertmanager_config.route||(e.alertmanager_config.route={receiver:e.alertmanager_config.receivers[0].name}),e.template_files||(e.template_files={}),e}function o(e,t){var a,s,n;return Object.assign({},t,{mute_time_intervals:null!==(a=null===(s=t.mute_time_intervals)||void 0===s?void 0:s.filter((t=>t!==e)))&&void 0!==a?a:[],routes:null===(n=t.routes)||void 0===n?void 0:n.map((t=>o(e,t)))})}function l(e,t,a){var s,n;return Object.assign({},a,{mute_time_intervals:null===(s=a.mute_time_intervals)||void 0===s?void 0:s.map((a=>a===t?e:a)),routes:null===(n=a.routes)||void 0===n?void 0:n.map((a=>l(e,t,a)))})}function c(e,t){var a,s;return null!==(a=t.receiver===e||(null===(s=t.routes)||void 0===s?void 0:s.some((t=>c(e,t)))))&&void 0!==a&&a}function d(e,t){var a;return null!==(a=t.alertmanager_config.route&&c(e,t.alertmanager_config.route))&&void 0!==a&&a}function u(e){return e.isEqual?e.isRegex?s._M.regex:s._M.equal:e.isRegex?s._M.notRegex:s._M.notEqual}function p(e){return{name:e.name,value:e.value,operator:u(e)}}function h(e){return Object.assign({name:e.name,value:e.value},function(e){switch(e){case s._M.equal:return{isEqual:!0,isRegex:!1};case s._M.notEqual:return{isEqual:!1,isRegex:!1};case s._M.regex:return{isEqual:!0,isRegex:!0};case s._M.notRegex:return{isEqual:!1,isRegex:!0}}}(e.operator))}const m=[{label:s._M.equal,description:"Equals",value:s._M.equal},{label:s._M.notEqual,description:"Does not equal",value:s._M.notEqual},{label:s._M.regex,description:"Matches regex",value:s._M.regex},{label:s._M.notRegex,description:"Does not match regex",value:s._M.notRegex}],g=[s._M.regex,s._M.notRegex,s._M.notEqual,s._M.equal];function f(e){const t=e.trim();if(t.startsWith("{")&&t.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${t}`);const a=g.map((e=>[e,t.indexOf(e)])).filter((e=>{let[t,a]=e;return a>-1})).sort(((e,t)=>e[1]-t[1]));if(!a.length)throw new Error(`Invalid matcher: ${t}`);const[n,r]=a[0],i=t.substr(0,r).trim(),o=t.substr(r+n.length).trim();if(!i)throw new Error(`Invalid matcher: ${t}`);return{name:i,value:o,isRegex:n===s._M.regex||n===s._M.notRegex,isEqual:n===s._M.equal||n===s._M.regex}}function b(e){const t=[];return e.replace(/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,]*)"?/g,((e,a,n,r)=>{const i=n===s._M.equal||n===s._M.regex,o=n===s._M.regex||n===s._M.notRegex;return t.push({name:a,value:r,isEqual:i,isRegex:o}),""})),t}function v(e,t){return t.every((t=>{let{name:a,value:s,isRegex:n,isEqual:r}=t;return Object.entries(e).some((e=>{let[t,i]=e;const o=a===t;let l;return r&&!n&&(l=s===i),r||n||(l=s!==i),r&&n&&(l=new RegExp(s).test(i)),!r&&n&&(l=!new RegExp(s).test(i)),o&&l}))}))}function x(){return(0,n.x)().filter((e=>e.type===r.ye.Alertmanager))}function y(e){return x().find((t=>e===t.uid))}function w(e){const{times:t,weekdays:a,days_of_month:s,months:n,years:r}=e;return[j(t),C(a),k(s),S(n),T(r)].join(", ")}function j(e){return"Times: "+(e?null==e?void 0:e.map((e=>{let{start_time:t,end_time:a}=e;return`${t} - ${a} UTC`})).join(" and "):"All")}function C(e){var t;return"Weekdays: "+(null!==(t=null==e?void 0:e.map((e=>{if(e.includes(":"))return e.split(":").map((e=>{const t=e.slice(0,3);return t[0].toLocaleUpperCase()+t.substr(1)})).join("-");{const t=e.slice(0,3);return t[0].toLocaleUpperCase()+t.substr(1)}})).join(", "))&&void 0!==t?t:"All")}function k(e){var t;return"Days of the month: "+(null!==(t=null==e?void 0:e.join(", "))&&void 0!==t?t:"All")}function S(e){var t;return"Months: "+(null!==(t=null==e?void 0:e.join(", "))&&void 0!==t?t:"All")}function T(e){var t;return"Years: "+(null!==(t=null==e?void 0:e.join(", "))&&void 0!==t?t:"All")}function O(e){return"object"==typeof e&&null!==e&&"status"in e&&"data"in e}},"./public/app/features/alerting/unified/utils/config.ts":(e,t,a)=>{"use strict";a.d(t,{x:()=>n});var s=a("./packages/grafana-runtime/src/index.ts");function n(){return Object.values(s.config.datasources)}},"./public/app/features/alerting/unified/utils/constants.ts":(e,t,a)=>{"use strict";a.d(t,{jZ:()=>s,p4:()=>n,c4:()=>r,de:()=>i,cm:()=>o,iF:()=>l,GC:()=>c,Fe:()=>d,Kd:()=>u,q6:()=>p,vY:()=>h});const s="ruler not supported",n=2e4,r="alertmanager",i="alerting-alertmanager",o=2e4,l=2e4,c="timeseries",d="table",u="stat";let p;!function(e){e.description="description",e.summary="summary",e.runbookURL="runbook_url",e.alertId="__alertId__",e.dashboardUID="__dashboardUid__",e.panelID="__panelId__"}(p||(p={}));const h={[p.description]:"Description",[p.summary]:"Summary",[p.runbookURL]:"Runbook URL",[p.dashboardUID]:"Dashboard UID",[p.panelID]:"Panel ID",[p.alertId]:"Alert ID"}},"./public/app/features/alerting/unified/utils/datasource.ts":(e,t,a)=>{"use strict";a.d(t,{GC:()=>r,JY:()=>i,ye:()=>o,Eu:()=>c,aM:()=>d,mA:()=>u,h_:()=>p,EG:()=>h,jq:()=>m,RY:()=>g,HY:()=>f,o_:()=>v,aK:()=>x});var s=a("./public/app/plugins/datasource/alertmanager/types.ts"),n=a("./public/app/features/alerting/unified/utils/config.ts");const r="grafana",i="-- Grafana --";let o;!function(e){e.Alertmanager="alertmanager",e.Loki="loki",e.Prometheus="prometheus"}(o||(o={}));const l=[o.Loki,o.Prometheus];function c(){return(0,n.x)().filter((e=>l.includes(e.type)&&!1!==e.jsonData.manageAlerts)).sort(((e,t)=>e.name.localeCompare(t.name)))}function d(){return(0,n.x)().filter((e=>e.type===o.Alertmanager)).sort(((e,t)=>e.name.localeCompare(t.name)))}function u(){return[...c().map((e=>e.name)),r]}function p(){return[...c(),r]}function h(e){return m(e)?e.name:e}function m(e){return e!==r}function g(e){var t,a;return e!==r&&(null===(t=b(e))||void 0===t||null===(a=t.jsonData)||void 0===a?void 0:a.implementation)===s.sK.prometheus}function f(e){return e===r}function b(e){return(0,n.x)().find((t=>t.name===e))}function v(e){return e===r?r:b(e)}function x(e){if(e===r)return r;const t=b(e);if(!t)throw new Error(`Datasource "${e}" not found`);return String(t.id)}},"./public/app/features/alerting/unified/utils/matchers.ts":(e,t,a)=>{"use strict";a.d(t,{RT:()=>i,rz:()=>o,jM:()=>l});var s=a("./public/app/plugins/datasource/alertmanager/types.ts"),n=a("./public/app/features/alerting/unified/utils/alertmanager.ts"),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function i(e){const t=e.filter((e=>!!e.trim())).map((e=>(0,n.tC)(e.trim())));return(0,r.uniqBy)(t,(e=>e.name))}const o=e=>{const t=Object.entries(e).filter((e=>{let[t]=e;return!(t.startsWith("__")&&t.endsWith("__"))})),a=new URLSearchParams;return t.forEach((e=>{let[t,s]=e;return a.append("matcher",`${t}=${s}`)})),a},l=(e,t)=>e.filter((e=>t.every((t=>((e,t)=>Object.entries(e.labels).some((e=>{let[a,n]=e;return!(!t.name||!t.value)&&(t.operator===s._M.equal?t.name===a&&t.value===n:t.operator===s._M.notEqual?t.name===a&&t.value!==n:t.operator===s._M.regex?t.name===a&&t.value.match(n):t.operator===s._M.notRegex&&t.name===a&&!t.value.match(n))})))(e,t))))).map((e=>({id:`${e.namespace}-${e.name}`,data:{matchedRule:e}})))},"./public/app/features/alerting/unified/utils/misc.ts":(e,t,a)=>{"use strict";a.d(t,{V2:()=>h,mH:()=>m,S0:()=>g,lC:()=>f,$f:()=>b,pF:()=>v,J8:()=>x,eQ:()=>y,Vv:()=>w,VN:()=>j,fm:()=>C,Zl:()=>S});var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./public/app/features/alerting/unified/utils/constants.ts"),i=a("./public/app/features/alerting/unified/utils/datasource.ts"),o=a("./public/app/features/alerting/unified/utils/rule-id.ts"),l=a("./public/app/plugins/panel/alertlist/types.ts"),c=a("./public/app/features/alerting/unified/utils/rules.ts"),d=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),u=a("./public/app/types/unified-alerting-dto.ts"),p=a("./public/app/features/alerting/unified/utils/matchers.ts");function h(e,t,a){const r=(0,i.EG)(e),l=o.Yd(r,t),c=encodeURIComponent(o.$V(l)),d=encodeURIComponent(r);return s.urlUtil.renderUrl(`${n.config.appSubUrl}/alerting/${d}/${c}/view`,{returnTo:a})}function m(e,t){return s.urlUtil.renderUrl(`${n.config.appSubUrl}/explore`,{left:JSON.stringify(["now-1h","now",e,{datasource:e,expr:t},{ui:[!0,!0,!0,"none"]}])})}function g(e){return e.reduce(((e,t)=>{let{key:a,value:s}=t;return e[a]=s,e}),{})}const f=e=>{const t=void 0===e.queryString?void 0:String(e.queryString),a=void 0===e.alertState?void 0:String(e.alertState),s=void 0===e.dataSource?void 0:String(e.dataSource),n=void 0===e.ruleType?void 0:String(e.ruleType);return{queryString:t,alertState:a,dataSource:s,groupBy:void 0===e.groupBy?void 0:String(e.groupBy).split(","),ruleType:n}},b=e=>{var t,a;return{queryString:null!==(t=e.get("queryString"))&&void 0!==t?t:void 0,contactPoint:null!==(a=e.get("contactPoint"))&&void 0!==a?a:void 0}},v=e=>({queryString:void 0===e.queryString?void 0:String(e.queryString),silenceState:void 0===e.silenceState?void 0:String(e.silenceState)});function x(e){return Object.entries(e).map((e=>{let[t,a]=e;return{key:t,value:a}}))}function y(e,t,a){const s=new URLSearchParams(a);return t&&s.append(r.c4,t),`${e}?${s.toString()}`}function w(e,t){return j(e,Object.assign({alertname:t.name},t.labels))}function j(e,t){const a=new URLSearchParams;a.append("alertmanager",e);return(0,p.rz)(t).forEach(((e,t)=>a.append(t,e))),`${n.config.appSubUrl}/alerting/silence/new?${a.toString()}`}function C(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;const n=(new Date).getTime(),r=()=>e().catch((e=>{if(t(e)&&(new Date).getTime()-n<a)return new Promise((e=>setTimeout(e,s))).then(r);throw e}));return r()}const k={[u.bj.Alerting]:1,[u.x_.Firing]:1,[u.bj.Error]:1,[u.bj.Pending]:2,[u.x_.Pending]:2,[u.x_.Inactive]:2,[u.bj.NoData]:3,[u.bj.Normal]:4};function S(e,t){if(e===l.As.Importance)return(0,d.sortBy)(t,(e=>[k[e.state],(0,c.pB)(e).toLocaleLowerCase()]));if(e===l.As.TimeAsc)return(0,d.sortBy)(t,(e=>[new Date(e.activeAt)||new Date,(0,c.pB)(e).toLocaleLowerCase()]));if(e===l.As.TimeDesc)return(0,d.sortBy)(t,(e=>[new Date(e.activeAt)||new Date,(0,c.pB)(e).toLocaleLowerCase()])).reverse();const a=(0,d.sortBy)(t,(e=>(0,c.pB)(e).toLocaleLowerCase()));return e===l.As.AlphaDesc&&a.reverse(),a}},"./public/app/features/alerting/unified/utils/redux.ts":(e,t,a)=>{"use strict";a.d(t,{oq:()=>l,i6:()=>d,jK:()=>u,$b:()=>p,Ez:()=>h,kk:()=>m,ed:()=>g,yR:()=>b});var s=a("../../opt/drone/yarncache/angular-npm-1.8.2-307000482b-35ea81a23b.zip/node_modules/angular/index.js"),n=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),r=a("./packages/grafana-data/src/index.ts"),i=a("./public/app/core/core.ts"),o=a("./public/app/features/alerting/unified/utils/alertmanager.ts");const l=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,a=arguments.length>2?arguments[2]:void 0;if(e.pending.match(a))return{result:t.result,loading:!0,error:t.error,dispatched:!0,requestId:a.meta.requestId};if(e.fulfilled.match(a)){if(void 0===t.requestId||t.requestId===a.meta.requestId)return Object.assign({},t,{result:a.payload,loading:!1,error:void 0})}else if(e.rejected.match(a)&&t.requestId===a.meta.requestId)return Object.assign({},t,{loading:!1,error:a.error});return t}function d(e,t){return(0,n.oM)({name:e,initialState:l,reducers:{},extraReducers:e=>e.addDefaultCase(((e,a)=>c(t,e,a)))})}function u(e,t,a){return(0,n.oM)({name:e,initialState:{},reducers:{},extraReducers:e=>e.addDefaultCase(((e,s)=>{if((0,n.Gx)(t)(s)){const n=s,r=a(n.meta.arg);return Object.assign({},e,{[r]:c(t,e[r],n)})}return e}))})}function p(e){return e.catch((e=>{throw{message:m(e),code:e.statusCode}}))}function h(e,t){return e.then((e=>(t.successMessage&&i.h$.emit(r.AppEvents.alertSuccess,[t.successMessage]),e))).catch((e=>{var a;const s=m(e);throw i.h$.emit(r.AppEvents.alertError,[`${null!==(a=t.errorMessage)&&void 0!==a?a:"Error"}: ${s}`]),e}))}function m(e){if((0,o.kW)(e)){var t,a;if(null!==(t=e.data)&&void 0!==t&&t.message){var n,r;let t=null===(n=e.data)||void 0===n?void 0:n.message;return"string"==typeof(null===(r=e.data)||void 0===r?void 0:r.error)&&(t+=`; ${e.data.error}`),t}if((0,s.isArray)(e.data)&&e.data.length&&null!==(a=e.data[0])&&void 0!==a&&a.message)return e.data.map((e=>null==e?void 0:e.message)).filter((e=>!!e)).join(" ");if(e.statusText)return e.statusText}return(null==e?void 0:e.message)||String(e)}function g(e){return Object.values(e).every(f)}function f(e){return e.dispatched&&!e.loading&&!e.error}function b(e){return Object.values(e).some(v)}function v(e){return e.dispatched&&e.loading}},"./public/app/features/alerting/unified/utils/rule-form.ts":(e,t,a)=>{"use strict";a.d(t,{uZ:()=>v,yh:()=>x,mI:()=>w,DQ:()=>j,s0:()=>C,aR:()=>S});var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./public/app/core/services/context_srv.ts"),i=a("./public/app/core/utils/query.ts"),o=a("./public/app/features/expressions/ExpressionDatasource.ts"),l=a("./public/app/features/expressions/types.ts"),c=a("./public/app/types/unified-alerting-dto.ts"),d=a("./public/app/features/alerting/state/alertDef.ts"),u=a("./public/app/features/alerting/unified/types/rule-form.ts"),p=a("./public/app/features/alerting/unified/utils/constants.ts"),h=a("./public/app/features/alerting/unified/utils/datasource.ts"),m=a("./public/app/features/alerting/unified/utils/misc.ts"),g=a("./public/app/features/alerting/unified/utils/rules.ts"),f=a("./public/app/features/alerting/unified/utils/time.ts"),b=a("./packages/grafana-runtime/src/utils/DataSourceWithBackend.ts");const v=()=>Object.freeze({name:"",labels:[{key:"",value:""}],annotations:[{key:p.q6.summary,value:""},{key:p.q6.description,value:""},{key:p.q6.runbookURL,value:""}],dataSourceName:null,type:r.Vt.isEditor?void 0:u.$.grafana,folder:null,queries:[],condition:"",noDataState:c.g0.NoData,execErrState:c.g0.Alerting,evaluateEvery:"1m",evaluateFor:"5m",group:"",namespace:"",expression:"",forTime:1,forTimeUnit:"m"});function x(e){const{name:t,expression:a,forTime:s,forTimeUnit:n,type:r}=e;if(r===u.$.cloudAlerting)return{alert:t,for:`${s}${n}`,annotations:(0,m.S0)(e.annotations||[]),labels:(0,m.S0)(e.labels||[]),expr:a};if(r===u.$.cloudRecording)return{record:t,labels:(0,m.S0)(e.labels||[]),expr:a};throw new Error(`unexpected rule type: ${r}`)}function y(e){return[...(0,m.J8)(e||{}),{key:"",value:""}]}function w(e){const{name:t,condition:a,noDataState:s,execErrState:n,evaluateFor:r,queries:i}=e;if(a)return{grafana_alert:{title:t,condition:a,no_data_state:s,exec_err_state:n,data:i},for:r,annotations:(0,m.S0)(e.annotations||[]),labels:(0,m.S0)(e.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function j(e){const{ruleSourceName:t,namespace:a,group:s,rule:n}=e,r=v();if((0,h.HY)(t)){if((0,g.Pc)(n)){const e=n.grafana_alert;return Object.assign({},r,{name:e.title,type:u.$.grafana,evaluateFor:n.for||"0",evaluateEvery:s.interval||r.evaluateEvery,noDataState:e.no_data_state,execErrState:e.exec_err_state,queries:e.data,condition:e.condition,annotations:y(n.annotations),labels:y(n.labels),folder:{title:a,id:e.namespace_id}})}throw new Error("Unexpected type of rule for grafana rules source")}if((0,g.cG)(n)){const[e,i]=n.for?(0,f.bG)(n.for):[r.forTime,r.forTimeUnit];return Object.assign({},r,{name:n.alert,type:u.$.cloudAlerting,dataSourceName:t,namespace:a,group:s.name,expression:n.expr,forTime:e,forTimeUnit:i,annotations:y(n.annotations),labels:y(n.labels)})}if((0,g.yF)(n))return Object.assign({},r,{name:n.record,type:u.$.cloudRecording,dataSourceName:t,namespace:a,group:s.name,expression:n.expr,labels:y(n.labels)});throw new Error("Unexpected type of rule for cloud rules source")}const C=()=>{const e=(0,n.getDataSourceSrv)().getInstanceSettings("default");if(!e)return[k("A")];const t=(0,s.getDefaultRelativeTimeRange)();return[{refId:"A",datasourceUid:e.uid,queryType:"",relativeTimeRange:t,model:{refId:"A",hide:!1}},k("B")]},k=e=>{const t={refId:e,hide:!1,type:l.Us.classic,datasource:{uid:o.Yq,type:b.hr.type},conditions:[{type:"query",evaluator:{params:[3],type:d.$.IsAbove},operator:{type:"and"},query:{params:["A"]},reducer:{params:[],type:"last"}}]};return{refId:e,datasourceUid:o.Yq,queryType:"",model:t}},S=async(e,t)=>{var a,r,l;const{targets:c}=e;if(!e.id||!t.uid)return;const d=s.rangeUtil.timeRangeToRelative(s.rangeUtil.convertRawToRange(t.time)),h=await(async(e,t,a,r,i,l)=>{const c=[];for(const p of e){var d;const e=await(0,n.getDataSourceSrv)().get(null!==(d=p.datasource)&&void 0!==d&&d.uid?p.datasource:r),h={uid:e.uid,type:e.type},m=s.rangeUtil.relativeToTimeRange(t),{interval:g,intervalMs:f}=T(m,null!=l?l:e.interval,i),b=Object.assign({__interval:{text:g,value:g},__interval_ms:{text:f,value:f}},a),v=e.interpolateVariablesInQueries?await e.interpolateVariablesInQueries([p],b)[0]:p;if(h.uid===o.Yq){const e={refId:v.refId,queryType:"",relativeTimeRange:t,datasourceUid:o.Yq,model:v};c.push(e)}else{const e=(0,n.getDataSourceSrv)().getInstanceSettings(h);if(e&&e.meta.alerting){var u;const a={refId:v.refId,queryType:null!==(u=v.queryType)&&void 0!==u?u:"",relativeTimeRange:t,datasourceUid:e.uid,model:Object.assign({},v,{maxDataPoints:i,intervalMs:f})};c.push(a)}}}return c})(c,d,e.scopedVars||{},null!==(a=e.datasource)&&void 0!==a?a:void 0,null!==(r=e.maxDataPoints)&&void 0!==r?r:void 0,null!==(l=e.interval)&&void 0!==l?l:void 0);if(!h.length||!h.find((e=>e.datasourceUid!==o.Yq)))return;h.find((e=>e.datasourceUid===o.Yq))||h.push(k((0,i.Hs)(h.map((e=>e.model)))));const{folderId:m,folderTitle:g}=t.meta;return{type:u.$.grafana,folder:m&&g?{id:m,title:g}:void 0,queries:h,name:e.title,condition:h[h.length-1].refId,annotations:[{key:p.q6.dashboardUID,value:t.uid},{key:p.q6.panelID,value:String(e.id)}]}};function T(e,t,a){return a?s.rangeUtil.calculateInterval(e,a,t):t&&s.rangeUtil.intervalToMs(t)>1e3?{interval:t,intervalMs:s.rangeUtil.intervalToMs(t)}:{interval:"1s",intervalMs:1e3}}},"./public/app/features/alerting/unified/utils/rule-id.ts":(e,t,a)=>{"use strict";a.d(t,{Zk:()=>r,Yd:()=>i,CK:()=>o,Dg:()=>l,OA:()=>m,$V:()=>g,s0:()=>y});var s=a("./public/app/features/alerting/unified/utils/datasource.ts"),n=a("./public/app/features/alerting/unified/utils/rules.ts");function r(e,t,a,s){return(0,n.Pc)(s)?{uid:s.grafana_alert.uid}:{ruleSourceName:e,namespace:t,groupName:a,rulerRuleHash:b(s)}}function i(e,t){const a=t.namespace.name,s=t.group.name;if(t.rulerRule)return r(e,a,s,t.rulerRule);if(t.promRule)return function(e,t,a,s){return{ruleSourceName:e,namespace:t,groupName:a,ruleHash:v(s)}}(e,a,s,t.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function o(e){return r(e.ruleSourceName,e.namespace,e.group.name,e.rule)}function l(e,t){return(0,n.Kl)(e)&&(0,n.Kl)(t)?e.uid===t.uid:(0,n.E4)(e)&&(0,n.E4)(t)?e.groupName===t.groupName&&e.namespace===t.namespace&&e.rulerRuleHash===t.rulerRuleHash&&e.ruleSourceName===t.ruleSourceName:!(!(0,n.qE)(e)||!(0,n.qE)(t))&&(e.groupName===t.groupName&&e.namespace===t.namespace&&e.ruleHash===t.ruleHash&&e.ruleSourceName===t.ruleSourceName)}const c="cri",d="pri";function u(e){return e.replace(/\$/g,"_DOLLAR_")}function p(e){return e.replace(/\_DOLLAR\_/g,"$")}function h(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=t?decodeURIComponent(e):e,s=a.split("$");if(1===s.length)return{uid:e};if(5===s.length){const[e,t,a,n,r]=s.map(p);if(e===c)return{ruleSourceName:t,namespace:a,groupName:n,rulerRuleHash:Number(r)};if(e===d)return{ruleSourceName:t,namespace:a,groupName:n,ruleHash:Number(r)}}throw new Error(`Failed to parse rule location: ${e}`)}function m(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)try{return h(e,t)}catch(e){return}}function g(e){return(0,n.Kl)(e)?e.uid:(0,n.E4)(e)?[c,e.ruleSourceName,e.namespace,e.groupName,e.rulerRuleHash].map(String).map(u).join("$"):[d,e.ruleSourceName,e.namespace,e.groupName,e.ruleHash].map(String).map(u).join("$")}function f(e){let t=0;if(0===e.length)return t;for(var a=0;a<e.length;a++){t=(t<<5)-t+e.charCodeAt(a),t&=t}return t}function b(e){if((0,n.yF)(e))return f(JSON.stringify([e.record,e.expr,x(e.labels)]));if((0,n.cG)(e))return f(JSON.stringify([e.alert,e.expr,x(e.annotations),x(e.labels)]));throw new Error("only recording and alerting ruler rules can be hashed")}function v(e){if((0,n.OP)(e))return f(JSON.stringify([e.type,e.query,x(e.labels)]));if((0,n.x_)(e))return f(JSON.stringify([e.type,e.query,x(e.annotations),x(e.labels)]));throw new Error("only recording and alerting rules can be hashed")}function x(e){return JSON.stringify(Object.entries(e||{}).sort(((e,t)=>e[0].localeCompare(t[0]))))}function y(e){return(0,n.Kl)(e)?s.GC:e.ruleSourceName}},"./public/app/features/alerting/unified/utils/rules.ts":(e,t,a)=>{"use strict";a.d(t,{x_:()=>o,OP:()=>l,cG:()=>c,yF:()=>d,Pc:()=>u,pB:()=>p,m$:()=>h,Kl:()=>m,E4:()=>g,qE:()=>f,SS:()=>b,ZL:()=>v,Aq:()=>x,ub:()=>y,Jq:()=>w});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/types/unified-alerting-dto.ts"),r=a("./public/app/features/alerting/unified/utils/constants.ts"),i=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function o(e){return"object"==typeof e&&e.type===n.pz.Alerting}function l(e){return e.type===n.pz.Recording}function c(e){return"object"==typeof e&&"alert"in e}function d(e){return"object"==typeof e&&"record"in e}function u(e){return"object"==typeof e&&"grafana_alert"in e}function p(e){return JSON.stringify(e.labels)}function h(e){var t,a;return e.error&&(null===(t=e.error)||void 0===t||null===(a=t.message)||void 0===a?void 0:a.includes(r.jZ))}function m(e){return"uid"in e}function g(e){return"rulerRuleHash"in e}function f(e){return"ruleHash"in e}function b(e){return e===n.x_.Inactive?"Normal":(0,i.capitalize)(e)}const v=e=>e.reduce(((e,t)=>{let{dataSourceName:a,name:s,groups:n}=t;return n.forEach((t=>{let{name:n,rules:r}=t;r.forEach((t=>{o(t)&&e.push({dataSourceName:a,namespaceName:s,groupName:n,rule:t})}))})),e}),[]),x={[n.x_.Inactive]:"good",[n.x_.Firing]:"bad",[n.x_.Pending]:"warning",[n.bj.Alerting]:"bad",[n.bj.Error]:"bad",[n.bj.NoData]:"info",[n.bj.Normal]:"good",[n.bj.Pending]:"warning",[s.AlertState.NoData]:"info",[s.AlertState.Paused]:"warning",[s.AlertState.Alerting]:"bad",[s.AlertState.OK]:"good",[s.AlertState.Pending]:"warning",[s.AlertState.Unknown]:"info"};function y(e){return e.alerts?e.alerts.reduce(((e,t)=>{if(t.activeAt&&t.state!==n.bj.Normal){const a=new Date(t.activeAt);if(null===e||e.getTime()>a.getTime())return a}return e}),null):null}function w(e){return Array.isArray(e.source_tenants)}},"./public/app/features/alerting/unified/utils/time.ts":(e,t,a)=>{"use strict";a.d(t,{lR:()=>o,bG:()=>n,O8:()=>i,qr:()=>r});a("./packages/grafana-data/src/datetime/rangeutil.ts");let s;function n(e){const t=e.match(/(\d+)(\w+)/);if(t)return[Number(t[1]),t[2]];throw new Error(`Invalid interval description: ${e}`)}!function(e){e.seconds="s",e.minutes="m",e.hours="h",e.days="d",e.weeks="w"}(s||(s={}));const r=Object.entries(s).map((e=>{let[t,a]=e;return{label:t[0].toUpperCase()+t.slice(1),value:a}})),i={value:new RegExp(`^\\d+(${Object.values(s).join("|")})$`),message:`Must be of format "(number)(unit)" , for example "1m". Available units: ${Object.values(s).join(", ")}`},o={value:new RegExp(`^\\d+(${Object.values(s).join("|")})|0$`),message:`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(s).join(", ")}`}},"./public/app/features/annotations/api.ts":(e,t,a)=>{"use strict";a.d(t,{xD:()=>n,_E:()=>r,Dl:()=>i,lK:()=>o});var s=a("./packages/grafana-runtime/src/index.ts");function n(e){return(0,s.getBackendSrv)().post("/api/annotations",e)}function r(e){return(0,s.getBackendSrv)().put(`/api/annotations/${e.id}`,e)}function i(e){return(0,s.getBackendSrv)().delete(`/api/annotations/${e.id}`)}async function o(){return(await(0,s.getBackendSrv)().get("/api/annotations/tags")).result.tags.map((e=>{let{tag:t,count:a}=e;return{term:t,count:a}}))}},"./public/app/features/annotations/executeAnnotationQuery.ts":(e,t,a)=>{"use strict";a.d(t,{r:()=>d});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),n=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),r=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),i=a("./packages/grafana-data/src/index.ts"),o=a("./public/app/features/annotations/standardAnnotationSupport.ts"),l=a("./public/app/features/query/state/runRequest.ts");let c=100;function d(e,t,a){const d=Object.assign({},o.yA,t.annotations),u=d.prepareAnnotation(a);if(!u)return(0,s.of)({});const p=d.prepareQuery(u);if(!p)return(0,s.of)({});const h=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,m=i.rangeUtil.calculateInterval(e.range,h,t.interval),g={__interval:{text:m.interval,value:m.interval},__interval_ms:{text:m.intervalMs.toString(),value:m.intervalMs},__annotation:{text:u.name,value:u}},f=Object.assign({startTime:Date.now(),requestId:"AQ"+c++,range:e.range,maxDataPoints:h,scopedVars:g},m,{app:i.CoreApp.Dashboard,timezone:e.dashboard.timezone,targets:[Object.assign({},p,{refId:"Anno"})]});return(0,l.v7)(t,f).pipe((0,n.z)((e=>e.series?d.processEvents(u,e.series).pipe((0,r.U)((t=>({panelData:e,events:t})))):(0,s.of)({panelData:e,events:[]}))))}},"./public/app/features/annotations/standardAnnotationSupport.ts":(e,t,a)=>{"use strict";a.d(t,{yA:()=>c,r0:()=>d});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),n=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),r=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),i=a("./packages/grafana-data/src/index.ts"),o=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");const l=["query"];const c={prepareAnnotation:e=>{if((0,o.isString)(null==e?void 0:e.query)){const{query:t}=e,a=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,l);return Object.assign({},a,{target:{query:t},mappings:{}})}return e},prepareQuery:e=>e.target,processEvents:(e,t)=>function(e,t){return(0,s.of)(e).pipe((e=>e.pipe((0,n.z)((e=>null!=e&&e.length?1===e.length?(0,s.of)(e[0]):(0,s.of)(e).pipe(i.standardTransformers.mergeTransformer.operator({}),(0,r.U)((e=>e[0]))):(0,s.of)(void 0))))),(0,r.U)((e=>{if(null==e||!e.length)return[];let a=!1,s=!1;const n={};for(const t of e.fields){n[(0,i.getFieldDisplayName)(t,e).toLowerCase()]=t}t||(t={});const r=[];for(const o of u){const l=t[o.key]||{};if(l.source===i.AnnotationEventFieldSource.Skip)continue;const c={key:o.key,split:o.split};if(l.source===i.AnnotationEventFieldSource.Text)c.text=l.value;else{const t=(l.value||o.key).toLowerCase();c.field=n[t],!c.field&&o.field&&(c.field=o.field(e))}(c.field||c.text)&&(r.push(c),"time"===c.key?a=!0:"text"===c.key&&(s=!0))}if(!a||!s)return[];const o=[];for(let t=0;t<e.length;t++){const e={type:"default",color:"red"};for(const a of r){let s;if(a.text)s=a.text;else if(a.field&&(s=a.field.values.get(t),void 0!==s&&a.regex)){const e=a.regex.exec(s);e&&(s=e[1]?e[1]:e[0])}null!=s&&(a.split&&"string"==typeof s&&(s=s.split(",")),e[a.key]=s)}o.push(e)}return o})))}(t,e.mappings)};const d=[{key:"time",field:e=>e.fields.find((e=>e.type===i.FieldType.time)),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:e=>e.fields.find((e=>e.type===i.FieldType.string)),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],u=[...d,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"}]},"./public/app/features/api-keys/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{iK:()=>n,j4:()=>r,dF:()=>i,ql:()=>o,ZP:()=>l});const s=(0,a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").oM)({name:"apiKeys",initialState:{hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:""},reducers:{apiKeysLoaded:(e,t)=>{const{keys:a,keysIncludingExpired:s}=t.payload,n=0===t.payload.keys.length&&t.payload.keysIncludingExpired.length>0||e.includeExpired;return Object.assign({},e,{hasFetched:!0,keys:a,keysIncludingExpired:s,includeExpired:n})},setSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload}),includeExpiredToggled:e=>Object.assign({},e,{includeExpired:!e.includeExpired}),isFetching:e=>Object.assign({},e,{hasFetched:!1})}}),{apiKeysLoaded:n,includeExpiredToggled:r,isFetching:i,setSearchQuery:o}=s.actions,l={apiKeys:s.reducer}},"./public/app/features/dashboard/components/DashExportModal/index.ts":(e,t,a)=>{"use strict";a.d(t,{E:()=>u});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./public/app/core/config.ts"),r=a("./packages/grafana-runtime/src/index.ts"),i=a("./public/app/features/variables/types.ts"),o=a("./public/app/features/variables/guard.ts"),l=a("./public/app/features/library-panels/types.ts"),c=a("./public/app/features/library-panels/guard.ts");const d=["libraryPanel"];class u{makeExportable(e){e.cleanUpRepeats();const t=e.getSaveModelClone();t.id=null,e.processRepeats();const a=[],u={},p={},h=[],m={},g=new Map;for(const e of t.getVariables())m[e.name]=e;const f=e=>{let t=e.datasource,a=null;if(t&&t.uid){const e=t.uid;0===e.indexOf("$")&&(a=m[e.substring(1)],a&&a.current&&(t=a.current.value))}h.push((0,r.getDataSourceSrv)().get(t).then((t=>{var s,n,r,i;if(null!==(s=t.meta)&&void 0!==s&&s.builtIn)return;if(u["datasource"+(null===(n=t.meta)||void 0===n?void 0:n.id)]={type:"datasource",id:t.meta.id,name:t.meta.name,version:t.meta.info.version||"1.0.0"},a)return;const o="DS_"+t.name.replace(" ","_").toUpperCase();p[o]={name:o,label:t.name,description:"",type:"datasource",pluginId:null===(r=t.meta)||void 0===r?void 0:r.id,pluginName:null===(i=t.meta)||void 0===i?void 0:i.name},e.datasource&&"string"!=typeof e.datasource?e.datasource.uid="${"+o+"}":e.datasource="${"+o+"}"})))},b=e=>{if(void 0!==e.datasource&&null!==e.datasource&&f(e),e.targets)for(const t of e.targets)void 0!==t.datasource&&f(t);const t=n.ZP.panels[e.type];t&&(u["panel"+t.id]={type:"panel",id:t.id,name:t.name,version:t.info.version})},v=e=>{if((0,c.V)(e)){const{libraryPanel:t}=e,a=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,d),{name:s,uid:n}=t;g.has(n)||g.set(n,{name:s,uid:n,kind:l.V.Panel,model:a})}};for(const e of t.panels)if(b(e),void 0!==e.collapsed&&!0===e.collapsed&&e.panels)for(const t of e.panels)b(t);for(const e of t.getVariables())(0,o.Xh)(e)&&(f(e),e.options=[],e.current={},e.refresh=e.refresh!==i.Bd.never?e.refresh:i.Bd.onDashboardLoad);for(const e of t.annotations.list)f(e);return u.grafana={type:"grafana",id:"grafana",name:"Grafana",version:n.ZP.buildInfo.version},Promise.all(h).then((()=>{(0,s.each)(p,(e=>{a.push(e)}));for(const e of t.panels)if(v(e),void 0!==e.collapsed&&!0===e.collapsed&&e.panels)for(const t of e.panels)v(t);for(const e of t.getVariables())if((0,o.VC)(e)){const t="VAR_"+e.name.replace(" ","_").toUpperCase();a.push({name:t,type:"constant",label:e.label||e.name,value:e.query,description:""}),e.query="${"+t+"}",e.current={value:e.query,text:e.query,selected:!1},e.options=[e.current]}const e={};return e.__inputs=a,e.__elements=[...g.values()],e.__requires=(0,s.sortBy)(u,["id"]),(0,s.defaults)(e,t),e})).catch((e=>(console.error("Export failed:",e),{error:e})))}}},"./public/app/features/dashboard/components/DashNav/DashNavButton.tsx":(e,t,a)=>{"use strict";a.d(t,{u:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i=e=>{let{icon:t,iconType:a,iconSize:s,tooltip:i,onClick:l,children:c}=e;const d=(0,n.useTheme)(),u=o(d);return(0,r.jsxs)("div",{className:u.noBorderContainer,children:[t&&(0,r.jsx)(n.IconButton,{name:t,size:s,iconType:a,tooltip:i,tooltipPlacement:"bottom",onClick:l}),c]})},o=(0,n.stylesFactory)((e=>({noBorderContainer:s.css`
    padding: 0 ${e.spacing.xs};
    display: flex;
  `})))},"./public/app/features/dashboard/components/DashNav/DashNavTimeControls.tsx":(e,t,a)=>{"use strict";a.d(t,{C:()=>h});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./packages/grafana-runtime/src/index.ts"),i=a("./packages/grafana-ui/src/index.ts"),o=a("./public/app/core/components/TimePicker/TimePickerWithHistory.tsx"),l=a("./public/app/features/dashboard/services/TimeSrv.ts"),c=a("./public/app/core/core.ts"),d=a("./public/app/types/events.ts"),u=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends s.Component{constructor(){super(...arguments),p(this,"sub",void 0),p(this,"onChangeRefreshInterval",(e=>{(0,l.$t)().setAutoRefresh(e),this.forceUpdate()})),p(this,"onRefresh",(()=>((0,l.$t)().refreshDashboard(),Promise.resolve()))),p(this,"onMoveBack",(()=>{c.h$.publish(new d.Qt(d.uV.Left))})),p(this,"onMoveForward",(()=>{c.h$.publish(new d.Qt(d.uV.Right))})),p(this,"onChangeTimePicker",(e=>{const{dashboard:t}=this.props,a=t.timepicker,s=a.nowDelay&&"now"===e.raw.to,r=n.dateMath.isMathString(e.raw.from)?e.raw.from:e.from,i=n.dateMath.isMathString(e.raw.to)?e.raw.to:e.to,o={from:r,to:s?"now-"+a.nowDelay:i};(0,l.$t)().setTime(o)})),p(this,"onChangeTimeZone",(e=>{this.props.dashboard.timezone=e,this.props.onChangeTimeZone(e),this.onRefresh()})),p(this,"onChangeFiscalYearStartMonth",(e=>{this.props.dashboard.fiscalYearStartMonth=e,this.onRefresh()})),p(this,"onZoom",(()=>{c.h$.publish(new d.p8(2))}))}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(r.TimeRangeUpdatedEvent,(()=>this.forceUpdate()))}componentWillUnmount(){var e;null===(e=this.sub)||void 0===e||e.unsubscribe()}render(){var e;const{dashboard:t}=this.props,{refresh_intervals:a}=t.timepicker,s=(0,l.$t)().getValidIntervals(a||i.defaultIntervals),n=(0,l.$t)().timeRange(),r=t.getTimezone(),c=t.fiscalYearStartMonth,d=null===(e=t.panelInEdit)||void 0===e?void 0:e.isEditing;return(0,u.jsxs)(i.ToolbarButtonRow,{children:[(0,u.jsx)(o.a,{value:n,onChange:this.onChangeTimePicker,timeZone:r,fiscalYearStartMonth:c,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth}),(0,u.jsx)(i.RefreshPicker,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:t.refresh,intervals:s,tooltip:"Refresh dashboard",noIntervalPicker:d})]})}}},"./public/app/features/dashboard/components/DashNav/index.ts":(e,t,a)=>{"use strict";a.d(t,{t:()=>k});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),r=a("./public/app/features/playlist/PlaylistSrv.ts"),i=a("./public/app/features/dashboard/components/DashNav/DashNavButton.tsx"),o=a("./public/app/features/dashboard/components/DashNav/DashNavTimeControls.tsx"),l=a("./packages/grafana-ui/src/index.ts"),c=a("./packages/grafana-data/src/index.ts"),d=a("./public/app/features/profile/state/reducers.ts"),u=a("./public/app/types/index.ts"),p=a("./public/app/features/dashboard/components/ShareModal/index.ts"),h=a("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardModalProxy.tsx"),m=a("./packages/grafana-runtime/src/index.ts"),g=a("./public/app/core/navigation/kiosk.ts"),f=a("./public/app/features/dashboard/services/DashboardSrv.ts"),b=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const x={updateTimeZoneForSession:d.YT},y=(0,n.connect)(null,x),w=[],j=[];class C extends s.PureComponent{constructor(e){super(e),v(this,"onClose",(()=>{m.locationService.partial({viewPanel:null})})),v(this,"onToggleTVMode",(()=>{(0,g.qk)()})),v(this,"onOpenSettings",(()=>{m.locationService.partial({editview:"settings"})})),v(this,"onStarDashboard",(()=>{const{dashboard:e}=this.props;(0,f.h4)().starDashboard(e.id,e.meta.isStarred).then((t=>{e.meta.isStarred=t,this.forceUpdate()}))})),v(this,"onPlaylistPrev",(()=>{r.r0.prev()})),v(this,"onPlaylistNext",(()=>{r.r0.next()})),v(this,"onPlaylistStop",(()=>{r.r0.stop(),this.forceUpdate()}))}addCustomContent(e,t){e.map(((e,a)=>{const n=e.component,r=(0,s.createElement)(n,Object.assign({},this.props,{key:`button-custom-${a}`}));"number"==typeof e.index?t.splice(e.index,0,r):t.push(r)}))}isPlaylistRunning(){return r.r0.isPlaying}renderLeftActionsButton(){const{dashboard:e,kioskMode:t}=this.props,{canStar:a,canShare:s,isStarred:n}=e.meta,r=[];if(t!==u.UX.Off||this.isPlaylistRunning())return[];if(a){let e=n?"Unmark as favorite":"Mark as favorite";r.push((0,b.jsx)(i.u,{tooltip:e,icon:n?"favorite":"star",iconType:n?"mono":"default",iconSize:"lg",onClick:this.onStarDashboard},"button-star"))}if(s){let t="Share dashboard or panel";r.push((0,b.jsx)(l.ModalsController,{children:a=>{let{showModal:s,hideModal:n}=a;return(0,b.jsx)(i.u,{tooltip:t,icon:"share-alt",iconSize:"lg",onClick:()=>{s(p.V8,{dashboard:e,onDismiss:n})}})}},"button-share"))}return this.addCustomContent(w,r),r}renderPlaylistControls(){return(0,b.jsxs)(l.ButtonGroup,{children:[(0,b.jsx)(l.ToolbarButton,{tooltip:"Go to previous dashboard",icon:"backward",onClick:this.onPlaylistPrev,narrow:!0}),(0,b.jsx)(l.ToolbarButton,{onClick:this.onPlaylistStop,children:"Stop playlist"}),(0,b.jsx)(l.ToolbarButton,{tooltip:"Go to next dashboard",icon:"forward",onClick:this.onPlaylistNext,narrow:!0})]},"playlist-buttons")}renderTimeControls(){const{dashboard:e,updateTimeZoneForSession:t,hideTimePicker:a}=this.props;return a?null:(0,b.jsx)(o.C,{dashboard:e,onChangeTimeZone:t},"time-controls")}renderRightActionsButton(){const{dashboard:e,onAddPanel:t,isFullscreen:a,kioskMode:s}=this.props,{canEdit:n,showSettings:r}=e.meta,{snapshot:i}=e,o=i&&i.originalUrl,c=[],d=(0,b.jsx)(l.ToolbarButton,{tooltip:"Cycle view mode",icon:"monitor",onClick:this.onToggleTVMode},"tv-button");return this.isPlaylistRunning()?[this.renderPlaylistControls(),this.renderTimeControls()]:s===u.UX.TV?[this.renderTimeControls(),d]:(n&&!a&&(c.push((0,b.jsx)(l.ToolbarButton,{tooltip:"Add panel",icon:"panel-add",onClick:t},"button-panel-add")),c.push((0,b.jsx)(l.ModalsController,{children:t=>{let{showModal:a,hideModal:s}=t;return(0,b.jsx)(l.ToolbarButton,{tooltip:"Save dashboard",icon:"save",onClick:()=>{a(h.D,{dashboard:e,onDismiss:s})}})}},"button-save"))),o&&c.push((0,b.jsx)(l.ToolbarButton,{tooltip:"Open original dashboard",onClick:()=>this.gotoSnapshotOrigin(o),icon:"link"},"button-snapshot")),r&&c.push((0,b.jsx)(l.ToolbarButton,{tooltip:"Dashboard settings",icon:"cog",onClick:this.onOpenSettings},"button-settings")),this.addCustomContent(j,c),c.push(this.renderTimeControls()),c.push(d),c)}gotoSnapshotOrigin(e){window.location.href=c.textUtil.sanitizeUrl(e)}render(){const{isFullscreen:e,title:t,folderTitle:a}=this.props,s=e?this.onClose:void 0,n=c.locationUtil.updateSearchParams(window.location.href,"?search=open"),r=c.locationUtil.updateSearchParams(window.location.href,"?search=open&folder=current");return(0,b.jsx)(l.PageToolbar,{pageIcon:e?void 0:"apps",title:t,parent:a,titleHref:n,parentHref:r,onGoBack:s,leftItems:this.renderLeftActionsButton(),children:this.renderRightActionsButton()})}}const k=y(C)},"./public/app/features/dashboard/components/DashboardSettings/TimePickerSettings.tsx":(e,t,a)=>{"use strict";a.d(t,{P:()=>m});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./packages/grafana-data/src/index.ts"),i=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),o=a("./packages/grafana-e2e-selectors/src/index.ts"),l=a("./public/app/features/dashboard/services/TimeSrv.ts"),c=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const d=e=>{let{refreshIntervals:t,onRefreshIntervalChange:a,getIntervalsFunc:r=p,validateIntervalsFunc:i=u}=e;const[o,l]=(0,s.useState)(r(null!=t?t:n.defaultIntervals)),[d,h]=(0,s.useState)(null);(0,s.useEffect)((()=>{const e=r(null!=t?t:n.defaultIntervals);l(e)}),[r,t]);const m=(0,s.useMemo)((()=>Array.isArray(o)?o.join(","):""),[o]),g=(0,s.useCallback)((e=>{const t=e.currentTarget.value?e.currentTarget.value.split(","):[];l(t)}),[l]),f=(0,s.useCallback)((e=>{const t=i(o);null===t&&a(r(o)),h(t)}),[r,o,a,i]);return(0,c.jsx)(n.Field,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:d,invalid:!!d,children:(0,c.jsx)(n.Input,{id:"auto-refresh-input",invalid:!!d,value:m,onChange:g,onBlur:f})})},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getTimeSrv:l.$t};try{return p(e,t),null}catch(e){return e.message}},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getTimeSrv:l.$t};const a=e.filter((e=>""!==e.trim())).map((e=>e.replace(/\s+/g,"")));return[...new Set(t.getTimeSrv().getValidIntervals(a))]};function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class m extends s.PureComponent{constructor(){super(...arguments),h(this,"state",{isNowDelayValid:!0}),h(this,"onNowDelayChange",(e=>{const t=e.currentTarget.value;return(0,i.isEmpty)(t)||r.rangeUtil.isValidTimeSpan(t)?(this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(t)):void this.setState({isNowDelayValid:!1})})),h(this,"onHideTimePickerChange",(()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)})),h(this,"onLiveNowChange",(()=>{this.props.onLiveNowChange(!this.props.liveNow)})),h(this,"onTimeZoneChange",(e=>{"string"==typeof e&&this.props.onTimeZoneChange(e)})),h(this,"onWeekStartChange",(e=>{this.props.onWeekStartChange(e)}))}render(){return(0,c.jsxs)(n.CollapsableSection,{label:"Time options",isOpen:!0,children:[(0,c.jsx)(n.Field,{label:"Timezone","data-testid":o.wl.components.TimeZonePicker.containerV2,children:(0,c.jsx)(n.TimeZonePicker,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})}),(0,c.jsx)(n.Field,{label:"Week start","data-testid":o.wl.components.WeekStartPicker.containerV2,children:(0,c.jsx)(n.WeekStartPicker,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})}),(0,c.jsx)(d,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),(0,c.jsx)(n.Field,{label:"Now delay",description:"Exclude recent data that may be incomplete.",children:(0,c.jsx)(n.Input,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})}),(0,c.jsx)(n.Field,{label:"Hide time picker",children:(0,c.jsx)(n.Switch,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})}),(0,c.jsx)(n.Field,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'",children:(0,c.jsx)(n.Switch,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})})]})}}},"./public/app/features/dashboard/components/DashboardSettings/index.ts":(e,t,a)=>{"use strict";a.d(t,{D:()=>da});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/react-router-dom-virtual-e45eb1b58b/3/opt/drone/yarncache/react-router-dom-npm-5.3.0-aa9adb5bec-47584fd629.zip/node_modules/react-router-dom/esm/react-router-dom.js"),i=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),o=a("./packages/grafana-ui/src/index.ts"),l=a("./public/app/core/config.ts"),c=a("./public/app/core/services/context_srv.ts"),d=a("./public/app/features/live/dashboard/dashboardWatcher.ts"),u=a("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardButton.tsx"),p=a("./packages/grafana-e2e-selectors/src/index.ts"),h=a("./public/app/features/variables/state/types.ts"),m=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),g=a("./packages/grafana-data/src/index.ts"),f=a("./public/app/features/variables/adapters.ts"),b=a("./public/app/core/core.ts"),v=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const x=e=>{let{variable:{options:t}}=e;const[a,r]=(0,n.useState)(20),[i,l]=(0,n.useState)([]),c=(0,n.useCallback)((e=>{e.preventDefault(),r(a+20)}),[a,r]),d=(0,o.useStyles)(y);return(0,n.useEffect)((()=>l(t.slice(0,a))),[a,t]),i.length?(0,v.jsxs)(o.VerticalGroup,{spacing:"none",children:[s||(s=(0,v.jsx)("h5",{children:"Preview of values"})),(0,v.jsx)(o.InlineFieldRow,{children:i.map(((e,t)=>(0,v.jsx)(o.InlineFieldRow,{className:d.optionContainer,children:(0,v.jsx)(o.InlineLabel,{"aria-label":p.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption,children:(0,v.jsx)("div",{className:d.label,children:e.text})})},`${e.value}-${t}`)))}),t.length>a&&(0,v.jsx)(o.InlineFieldRow,{className:d.optionContainer,children:(0,v.jsx)(o.Button,{onClick:c,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link",children:"Show more"})})]}):null};function y(e){return{optionContainer:i.css`
      margin-left: ${e.spacing.xs};
      margin-bottom: ${e.spacing.xs};
    `,label:i.css`
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 50vw;
    `}}x.displayName="VariableValuesPreview";var w=a("./public/app/features/variables/state/selectors.ts"),j=a("./public/app/features/variables/editor/reducer.ts"),C=a("./public/app/features/variables/state/sharedReducer.ts"),k=a("./public/app/features/variables/state/actions.ts"),S=a("./public/app/features/variables/inspect/reducer.ts"),T=a("./public/app/features/variables/inspect/utils.ts");const O=(e,t)=>(a,s)=>{const n=(0,w.E0)(e.id,s());if(n.name===t)return void a((0,j.Yo)((0,h.Y6)(e,{newName:t})));const r=Object.assign({},(0,m.cloneDeep)(n),{name:t,id:t}),i=n.global,o=n.index,l=(0,h.GT)(r);a((0,C.VN)((0,h.Y6)(l,{global:i,index:o,model:r}))),a((0,j.Yo)((0,h.Y6)(l,{newName:t}))),a(_(l)),a((0,C.mZ)((0,h.Y6)(e,{reIndex:!1})))},_=e=>t=>{t((0,j.lc)({id:e.id}))},N=()=>(e,t)=>{e((0,j.Yu)());const a=t(),s=(0,w.xD)(a),n=a.dashboard.getModel(),{usages:r}=(0,T.V)(s,n),i=(0,T.vI)(r);e((0,S.j4)({usages:r,usagesNetwork:i}))};function I(e,t){let a=0,s=`${e}${a}`;for(;t.find((e=>e.id===s));)s=`${e}${++a}`;return s}var P=a("./public/app/core/utils/connectWithReduxStore.tsx"),M=a("./public/app/features/variables/editor/VariableTextField.tsx"),F=a("./public/app/features/variables/editor/VariableSectionHeader.tsx"),A=a("./public/app/features/variables/guard.ts"),D=a("./public/app/features/variables/editor/VariableSelectField.tsx"),$=a("./public/app/features/variables/utils.ts");function L(e){let{onChange:t,type:a}=e;const s=(0,n.useMemo)((()=>(0,$.bi)()),[]),r=(0,n.useMemo)((()=>{var e;return null!==(e=s.find((e=>e.value===a)))&&void 0!==e?e:s[0]}),[s,a]);return(0,v.jsx)(D.u,{name:"Type",value:r,options:s,onChange:t,tooltip:f.z.get(a).description,ariaLabel:p.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelect})}var R=a("./public/app/features/variables/types.ts");const E=[{label:"",value:R.bU.dontHide},{label:"Label",value:R.bU.hideLabel},{label:"Variable",value:R.bU.hideVariable}];function z(e){let{onChange:t,hide:a,type:s}=e;const r=(0,n.useMemo)((()=>{var e;return null!==(e=E.find((e=>e.value===a)))&&void 0!==e?e:E[0]}),[a]);return"constant"===s?null:(0,v.jsx)(D.u,{name:"Hide",value:r,options:E,onChange:t,ariaLabel:p.wl.pages.Dashboard.Settings.Variables.Edit.General.generalHideSelect})}var V;function B(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class U extends n.PureComponent{constructor(){super(...arguments),B(this,"onNameChange",(e=>{e.preventDefault(),this.props.changeVariableName(this.props.identifier,e.currentTarget.value)})),B(this,"onTypeChange",(e=>{e.value&&this.props.changeVariableType((0,h.Y6)(this.props.identifier,{newType:e.value}))})),B(this,"onLabelChange",(e=>{e.preventDefault(),this.props.changeVariableProp((0,h.Y6)(this.props.identifier,{propName:"label",propValue:e.currentTarget.value}))})),B(this,"onDescriptionChange",(e=>{this.props.changeVariableProp((0,h.Y6)(this.props.identifier,{propName:"description",propValue:e.currentTarget.value}))})),B(this,"onHideChange",(e=>{this.props.changeVariableProp((0,h.Y6)(this.props.identifier,{propName:"hide",propValue:e.value}))})),B(this,"onPropChanged",(async e=>{let{propName:t,propValue:a,updateOptions:s=!1}=e;this.props.changeVariableProp((0,h.Y6)(this.props.identifier,{propName:t,propValue:a})),s&&await this.props.updateOptions((0,h.GT)(this.props.variable))})),B(this,"onHandleSubmit",(async e=>{e.preventDefault(),this.props.editor.isValid&&await this.props.onEditorUpdate(this.props.identifier)}))}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentDidUpdate(e,t,a){(0,m.isEqual)(e.editor.errors,this.props.editor.errors)||Object.values(this.props.editor.errors).forEach((e=>{b.h$.emit(g.AppEvents.alertWarning,["Validation",e])}))}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){var e,t;const{variable:a}=this.props,s=f.z.get(this.props.variable.type).editor;if(!s)return null;const n=a.state===g.LoadingState.Loading;return(0,v.jsx)("div",{children:(0,v.jsx)("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit,children:(0,v.jsxs)(o.VerticalGroup,{spacing:"lg",children:[(0,v.jsxs)(o.VerticalGroup,{spacing:"none",children:[V||(V=(0,v.jsx)(F.e,{name:"General"})),(0,v.jsxs)(o.InlineFieldRow,{children:[(0,v.jsx)(M.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"name",required:!0,ariaLabel:p.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInput}),(0,v.jsx)(L,{onChange:this.onTypeChange,type:this.props.variable.type})]}),this.props.editor.errors.name&&(0,v.jsx)("div",{className:"gf-form",children:(0,v.jsx)("span",{className:"gf-form-label gf-form-label--error",children:this.props.editor.errors.name})}),(0,v.jsxs)(o.InlineFieldRow,{children:[(0,v.jsx)(M.V,{value:null!==(e=this.props.variable.label)&&void 0!==e?e:"",onChange:this.onLabelChange,name:"Label",placeholder:"optional display name",ariaLabel:p.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInput}),(0,v.jsx)(z,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type})]}),(0,v.jsx)(M.V,{name:"Description",value:null!==(t=a.description)&&void 0!==t?t:"",placeholder:"descriptive text",onChange:this.onDescriptionChange,grow:!0})]}),s&&(0,v.jsx)(s,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,A.eL)(this.props.variable)?(0,v.jsx)(x,{variable:this.props.variable}):null,(0,v.jsx)(o.VerticalGroup,{spacing:"none",children:(0,v.jsxs)(o.Button,{type:"submit","aria-label":p.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:n,children:["Update",n?(0,v.jsx)(o.Icon,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}}):null]})})]})})})}}const H={variableEditorMount:e=>async t=>{t((0,j.wJ)({name:(0,w.E0)(e.id).name}))},variableEditorUnMount:e=>async(t,a)=>{t((0,j.qe)((0,h.Y6)(e)))},changeVariableName:(e,t)=>(a,s)=>{let n=null;t.match(/^(?!__).*$/)||(n="Template names cannot begin with '__', that's reserved for Grafana's global variables"),t.match(/^\w+$/)||(n="Only word and digit characters are allowed in variable names");(0,w.ng)(s()).filter((a=>a.name===t&&a.id!==e.id)).length&&(n="Variable with the same name already exists"),a(n?(0,j.y8)({newName:t,errorText:n}):O(e,t))},changeVariableProp:C.Pl,onEditorUpdate:e=>async t=>{await t((0,k.Rk)(e)),t(N())},changeVariableType:C.Be,updateOptions:k.Rk},q=(0,P.R)(U,((e,t)=>({editor:e.templating.editor,variable:(0,w.E0)(t.identifier.id,e,!1)})),H);var W=a("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),G=a("./.yarn/__virtual__/react-beautiful-dnd-virtual-27e4b658e7/3/opt/drone/yarncache/react-beautiful-dnd-npm-13.1.0-fcf5568b1c-12b7e9fbe8.zip/node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js"),Z=a("./packages/grafana-runtime/src/index.ts");const Q=e=>{let{nodes:t,edges:s,direction:r,width:i,height:o,onDoubleClick:l}=e;const c=(0,n.useRef)(null),d=(0,n.useRef)(null),u=(0,n.useCallback)((e=>{l&&l(e.nodes[0])}),[l]);return(0,n.useEffect)((()=>((async()=>{var e;const n=await a.e(8271).then(a.t.bind(a,"../../opt/drone/yarncache/visjs-network-npm-4.25.0-2e90efaeed-40bfcbbf2b.zip/node_modules/visjs-network/dist/vis.js",23)),i={nodes:K(n,t),edges:Y(n,s)},o={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:null!=r?r:"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};c.current=new n.Network(d.current,i,o),null===(e=c.current)||void 0===e||e.on("doubleClick",u)})(),()=>{c.current&&c.current.off("doubleClick")})),[r,s,t,u]),(0,v.jsx)("div",{children:(0,v.jsx)("div",{ref:d,style:{width:null!=i?i:"100%",height:null!=o?o:"60vh"}})})};function K(e,t){const a=t.map((e=>Object.assign({},e,{shape:"box"})));return new e.DataSet(a)}function Y(e,t){const a=t.map((e=>Object.assign({},e,{arrows:"to",dashes:!0})));return new e.DataSet(a)}function J(e){let{edges:t,nodes:a,show:s,title:r,children:i}=e;const[l,c]=(0,n.useState)(s),d=(0,n.useCallback)((()=>c(!0)),[c]),u=(0,n.useCallback)((()=>c(!1)),[c]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.Modal,{isOpen:l,title:r,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:u,onDismiss:u,children:(0,v.jsx)(Q,{nodes:a,edges:t})}),i({showModal:d})]})}const X=e=>{let{id:t,usages:a,isAdhoc:s}=e;const r=(0,n.useMemo)((()=>a.find((e=>e.variable.id===t))),[a,t]);if(0===a.length||s||!r)return null;const i=r.nodes.map((e=>e.label.includes(`$${t}`)?Object.assign({},e,{color:"#FB7E81"}):e));return(0,v.jsx)(J,{show:!1,title:`Showing usages for: $${t}`,nodes:i,edges:r.edges,children:e=>{let{showModal:t}=e;return(0,v.jsx)(o.IconButton,{onClick:()=>{(0,Z.reportInteraction)("Show variable usages"),t()},name:"code-branch",title:"Show usages"})}})};var ee;function te(e){var t;let{index:a,variable:s,usageTree:n,usagesNetwork:r,onEdit:i,onDuplicate:l,onDelete:c}=e;const d=(0,o.useTheme2)(),u=(0,o.useStyles2)(se),m=function(e){let t="";(0,A.Xh)(e)?e.definition?t=e.definition:"string"==typeof e.query&&(t=e.query):(0,A.eL)(e)&&(t=e.query);return t}(s),g=(0,T.Rv)(s.id,n)>0||(0,A.Kn)(s),f=(0,h.GT)(s);return(0,v.jsx)(G._l,{draggableId:JSON.stringify(f),index:a,children:(e,a)=>(0,v.jsxs)("tr",Object.assign({ref:e.innerRef},e.draggableProps,{style:Object.assign({userSelect:a.isDragging?"none":"auto",background:a.isDragging?d.colors.background.secondary:void 0},e.draggableProps.style),children:[(0,v.jsx)("td",{className:u.column,children:(0,v.jsx)("span",{onClick:e=>{e.preventDefault(),i(f)},className:u.nameLink,"aria-label":p.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(s.name),children:s.name})}),(0,v.jsx)("td",{className:u.definitionColumn,onClick:e=>{e.preventDefault(),i(f)},"aria-label":p.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(s.name),children:m}),(0,v.jsx)("td",{className:u.column,children:t||(t=(0,v.jsx)(ae,{passed:g}))}),(0,v.jsx)("td",{className:u.column,children:(0,v.jsx)(X,{id:s.id,isAdhoc:(0,A.Kn)(s),usages:r})}),(0,v.jsx)("td",{className:u.column,children:(0,v.jsx)(o.IconButton,{onClick:e=>{e.preventDefault(),(0,Z.reportInteraction)("Duplicate variable"),l(f)},name:"copy",title:"Duplicate variable","aria-label":p.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(s.name)})}),(0,v.jsx)("td",{className:u.column,children:(0,v.jsx)(o.IconButton,{onClick:e=>{e.preventDefault(),(0,Z.reportInteraction)("Delete variable"),c(f)},name:"trash-alt",title:"Remove variable","aria-label":p.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(s.name)})}),(0,v.jsx)("td",{className:u.column,children:(0,v.jsx)("div",Object.assign({},e.dragHandleProps,{className:u.dragHandle,children:ee||(ee=(0,v.jsx)(o.Icon,{name:"draggabledots",size:"lg"}))}))})]}))})}function ae(e){let{passed:t}=e;const a=(0,o.useStyles2)(se);return t?(0,v.jsx)(o.Icon,{name:"check",className:a.iconPassed,title:"This variable is referenced by other variables or dashboard."}):(0,v.jsx)(o.Icon,{name:"exclamation-triangle",className:a.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function se(e){return{dragHandle:i.css`
      cursor: grab;
    `,column:i.css`
      width: 1%;
    `,nameLink:i.css`
      cursor: pointer;
      color: ${e.colors.primary.text};
    `,definitionColumn:i.css`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:i.css`
      color: ${e.v1.palette.greenBase};
    `,iconFailed:i.css`
      color: ${e.v1.palette.orange};
    `}}var ne,re=a("./public/app/core/components/EmptyListCTA/EmptyListCTA.tsx");function ie(e){let{variables:t,usages:a,usagesNetwork:s,onChangeOrder:n,onAdd:r,onEdit:i,onDelete:o,onDuplicate:l}=e;return(0,v.jsx)("div",{children:(0,v.jsxs)("div",{children:[0===t.length&&(0,v.jsx)(oe,{onAdd:r}),t.length>0&&(0,v.jsx)("div",{children:(0,v.jsxs)("table",{className:"filter-table filter-table--hover","aria-label":p.wl.pages.Dashboard.Settings.Variables.List.table,children:[ne||(ne=(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Variable"}),(0,v.jsx)("th",{children:"Definition"}),(0,v.jsx)("th",{colSpan:5})]})})),(0,v.jsx)(G.Z5,{onDragEnd:e=>{if(!e.destination||!e.source)return;(0,Z.reportInteraction)("Variable drag and drop");const t=JSON.parse(e.draggableId);n(t,e.source.index,e.destination.index)},children:(0,v.jsx)(G.bK,{droppableId:"variables-list",direction:"vertical",children:e=>(0,v.jsxs)("tbody",Object.assign({ref:e.innerRef},e.droppableProps,{children:[t.map(((e,t)=>(0,v.jsx)(te,{index:t,variable:e,usageTree:a,usagesNetwork:s,onDelete:o,onDuplicate:l,onEdit:i},`${e.name}-${t}`))),e.placeholder]}))})})]})})]})})}function oe(e){let{onAdd:t}=e;return(0,v.jsx)("div",{children:(0,v.jsx)(re.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:' <p>\n                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server\n                    or sensor names in your metric queries you can use variables in their place. Variables are shown as\n                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data\n                    being displayed in your dashboard. Check out the\n                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">\n                      Templates and variables documentation\n                    </a>\n                    for more information.\n                  </p>'},infoBoxTitle:"What do variables do?",onClick:e=>{e.preventDefault(),t()}})})}var le=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsync.js");const ce=e=>{let{id:t,usages:a}=e;const s=(0,n.useMemo)((()=>a.find((e=>e.variable.id===t))),[t,a]);if(!s)return null;const r=s.nodes.map((e=>e.label.includes(`$${t}`)?Object.assign({},e,{color:"#FB7E81"}):e));return(0,v.jsx)(J,{show:!1,title:`Showing usages for: $${t}`,nodes:r,edges:s.edges,children:e=>{let{showModal:t}=e;return(0,v.jsx)(o.IconButton,{onClick:()=>t(),name:"code-branch",title:"Show usages","data-testid":"VariablesUnknownButton"})}})};var de,ue,pe,he,me;function ge(e){let{variables:t,dashboard:a}=e;const[s,r]=(0,n.useState)(!1),[i,l]=(0,n.useState)(0),[c,d]=(0,n.useState)([]),u=(0,o.useStyles)(xe);(0,n.useEffect)((()=>l((e=>e+1))),[t,a]);const{loading:p}=(0,le.Z)((async()=>{if(s&&i>0){const e=Date.now(),s=await(0,T.Yg)(t,a),n=Date.now()-e;return n>=1e3&&(0,Z.reportInteraction)("Slow unknown variables expansion",{elapsed:n}),l(0),d(s),s}return[]}),[t,a,s,i]);return(0,v.jsx)("div",{className:u.container,children:(0,v.jsxs)(o.CollapsableSection,{label:de||(de=(0,v.jsx)(fe,{})),isOpen:s,onToggle:e=>{e&&(0,Z.reportInteraction)("Unknown variables section expanded"),r(e)},children:[p&&(ue||(ue=(0,v.jsx)(o.VerticalGroup,{justify:"center",children:(0,v.jsxs)(o.HorizontalGroup,{justify:"center",children:[(0,v.jsx)("span",{children:"Loading..."}),(0,v.jsx)(o.Spinner,{size:16})]})}))),!p&&c&&(0,v.jsxs)(v.Fragment,{children:[0===c.length&&(pe||(pe=(0,v.jsx)(be,{}))),c.length>0&&(0,v.jsx)(ve,{usages:c})]})]})})}function fe(){const e=(0,o.useStyles)(xe);return(0,v.jsxs)("h5",{children:["Renamed or missing variables",(0,v.jsx)(o.Tooltip,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard.",children:(0,v.jsx)(o.Icon,{name:"info-circle",className:e.infoIcon})})]})}function be(){return he||(he=(0,v.jsx)("span",{children:"No renamed or missing variables found."}))}function ve(e){let{usages:t}=e;const a=(0,o.useStyles)(xe);return(0,v.jsxs)("table",{className:"filter-table filter-table--hover",children:[me||(me=(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Variable"}),(0,v.jsx)("th",{colSpan:5})]})})),(0,v.jsx)("tbody",{children:t.map((e=>{const{variable:s}=e,{id:n,name:r}=s;return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:a.firstColumn,children:(0,v.jsx)("span",{children:r})}),(0,v.jsx)("td",{className:a.defaultColumn}),(0,v.jsx)("td",{className:a.defaultColumn}),(0,v.jsx)("td",{className:a.defaultColumn}),(0,v.jsx)("td",{className:a.lastColumn,children:(0,v.jsx)(ce,{id:s.id,usages:t})})]},n)}))})]})}const xe=e=>({container:i.css`
    margin-top: ${e.spacing.xl};
    padding-top: ${e.spacing.xl};
  `,infoIcon:i.css`
    margin-left: ${e.spacing.sm};
  `,defaultColumn:i.css`
    width: 1%;
  `,firstColumn:i.css`
    width: 1%;
    vertical-align: top;
    color: ${e.colors.textStrong};
  `,lastColumn:i.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var ye=a("./public/app/store/store.ts");const we=e=>{let{variables:t}=e;const a=(0,n.useMemo)((()=>(0,T.GQ)(t)),[t]),s=(0,n.useMemo)((()=>(0,T.MJ)(t)),[t]);return s.length?(0,v.jsx)(J,{show:!1,title:"Dependencies",nodes:(0,T.Of)(a,s),edges:s,children:e=>{let{showModal:t}=e;return(0,v.jsx)(o.Button,{onClick:()=>{(0,Z.reportInteraction)("Show variable dependencies"),t()},icon:"channel-add",variant:"secondary",children:"Show dependencies"})}}):null},je=e=>(0,v.jsx)(W.Provider,{store:ye.h,children:(0,v.jsx)(we,Object.assign({},e))});var Ce,ke;function Se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Te={changeVariableOrder:C.gE,duplicateVariable:C.Y9,removeVariable:C.mZ,switchToNewMode:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"query";return(t,a)=>{const s=I(e,(0,w.ng)(a())),n={type:e,id:s},r=(0,w.Eo)(a()),i=(0,m.cloneDeep)(f.z.get(e).initialState);i.id=s,i.name=s,t((0,C.VN)((0,h.Y6)(n,{global:!1,model:i,index:r}))),t((0,j.lc)({id:n.id}))}},switchToEditMode:_,switchToListMode:N},Oe=(0,W.connect)((e=>({variables:(0,w.xD)(e),idInEditor:e.templating.editor.id,dashboard:e.dashboard.getModel(),usagesNetwork:e.templating.inspect.usagesNetwork,usages:e.templating.inspect.usages})),Te);class _e extends n.PureComponent{constructor(){super(...arguments),Se(this,"onChangeToListMode",(e=>{e.preventDefault(),this.props.switchToListMode()})),Se(this,"onEditVariable",(e=>{this.props.switchToEditMode(e)})),Se(this,"onNewVariable",(()=>{this.props.switchToNewMode()})),Se(this,"onChangeVariableOrder",((e,t,a)=>{this.props.changeVariableOrder((0,h.Y6)(e,{fromIndex:t,toIndex:a}))})),Se(this,"onDuplicateVariable",(e=>{this.props.duplicateVariable((0,h.Y6)(e,{newId:void 0}))})),Se(this,"onRemoveVariable",(e=>{this.props.removeVariable((0,h.Y6)(e,{reIndex:!0}))}))}componentDidMount(){this.props.switchToListMode()}render(){var e;const t=null!==(e=this.props.variables.find((e=>e.id===this.props.idInEditor)))&&void 0!==e?e:null;return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"page-action-bar",children:[(0,v.jsxs)("h3",{className:"dashboard-settings__header",children:[(0,v.jsx)("a",{onClick:this.onChangeToListMode,"aria-label":p.wl.pages.Dashboard.Settings.Variables.Edit.General.headerLink,children:"Variables"}),this.props.idInEditor&&(Ce||(Ce=(0,v.jsxs)("span",{children:[(0,v.jsx)(o.Icon,{name:"angle-right"}),"Edit"]})))]}),ke||(ke=(0,v.jsx)("div",{className:"page-action-bar__spacer"})),this.props.variables.length>0&&null===t&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(je,{variables:this.props.variables}),(0,v.jsx)(o.LinkButton,{type:"button",onClick:this.onNewVariable,"aria-label":p.wl.pages.Dashboard.Settings.Variables.List.newButton,children:"New"})]})]}),!t&&(0,v.jsx)(ie,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onRemoveVariable,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!t&&this.props.variables.length>0&&(0,v.jsx)(ge,{variables:this.props.variables,dashboard:this.props.dashboard}),t&&(0,v.jsx)(q,{identifier:(0,h.GT)(t)})]})}}const Ne=Oe(_e);var Ie,Pe,Me,Fe,Ae=a("./public/app/core/components/Animations/SlideDown.tsx"),De=a("./public/app/features/dashboard/state/actions.ts"),$e=a("./public/app/features/folders/state/actions.ts"),Le=a("./public/app/core/components/PermissionList/PermissionList.tsx"),Re=a("./public/app/core/components/PermissionList/AddPermission.tsx"),Ee=a("./public/app/core/components/PermissionList/PermissionsInfo.tsx");function ze(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ve={getDashboardPermissions:De.qm,addDashboardPermission:De.Yq,removeDashboardPermission:De.Qk,updateDashboardPermission:De.RF,checkFolderPermissions:$e.J6},Be=(0,W.connect)((e=>({permissions:e.dashboard.permissions,canViewFolderPermissions:e.folder.canViewFolderPermissions})),Ve);class Ue extends n.PureComponent{constructor(e){super(e),ze(this,"onOpenAddPermissions",(()=>{this.setState({isAdding:!0})})),ze(this,"onRemoveItem",(e=>{this.props.removeDashboardPermission(this.props.dashboard.id,e)})),ze(this,"onPermissionChanged",((e,t)=>{this.props.updateDashboardPermission(this.props.dashboard.id,e,t)})),ze(this,"onAddPermission",(e=>this.props.addDashboardPermission(this.props.dashboard.id,e))),ze(this,"onCancelAddPermission",(()=>{this.setState({isAdding:!1})})),this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id),this.props.dashboard.meta.folderUid&&this.props.checkFolderPermissions(this.props.dashboard.meta.folderUid)}getFolder(){const{dashboard:e,canViewFolderPermissions:t}=this.props;return{id:e.meta.folderId,title:e.meta.folderTitle,url:e.meta.folderUrl,canViewFolderPermissions:t}}render(){const{permissions:e,dashboard:{meta:{hasUnsavedFolderChange:t}}}=this.props,{isAdding:a}=this.state;return t?Ie||(Ie=(0,v.jsx)("h5",{children:"You have changed a folder, please save to view permissions."})):(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"page-action-bar",children:[Pe||(Pe=(0,v.jsx)("h3",{className:"page-sub-heading",children:"Permissions"})),Me||(Me=(0,v.jsx)(o.Tooltip,{placement:"auto",content:(0,v.jsx)(Ee.Z,{}),children:(0,v.jsx)(o.Icon,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})})),Fe||(Fe=(0,v.jsx)("div",{className:"page-action-bar__spacer"})),(0,v.jsx)(o.Button,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:a,children:"Add permission"})]}),(0,v.jsx)(Ae.s,{in:a,children:(0,v.jsx)(Re.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})}),(0,v.jsx)(Le.Z,{items:e,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()})]})}}const He=Be(Ue);var qe=a("./public/app/core/components/Select/FolderPicker.tsx"),We=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsyncFn.js"),Ge=a("./public/app/core/app_events.ts"),Ze=a("./public/app/features/manage-dashboards/state/actions.ts");var Qe,Ke,Ye,Je,Xe,et=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useAsyncFn.js");const tt=e=>{let{hideModal:t,dashboard:a}=e;const s=a.meta.provisioned,{onDeleteDashboard:r}=(e=>{const[t,a]=(0,We.Z)((()=>(0,Ze.iM)(e,!1)),[]);return(0,n.useEffect)((()=>{t.value&&(Z.locationService.replace("/"),Ge.Z.emit(g.AppEvents.alertSuccess,["Dashboard Deleted",t.value.title+" has been deleted"]))}),[t]),{state:t,onDeleteDashboard:a}})(a.uid),[,i]=(0,et.default)((async()=>{await r(),t()}),[t]),l=at(a.panels,a.title);return s?(0,v.jsx)(st,{hideModal:t,provisionedId:a.meta.provisionedExternalId}):(0,v.jsx)(o.ConfirmModal,{isOpen:!0,body:l,onConfirm:i,onDismiss:t,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},at=(e,t)=>{const a=(0,m.sumBy)(e,(e=>e.alert?1:0));return a>0&&!l.vc.unifiedAlertingEnabled?(0,v.jsxs)(v.Fragment,{children:[Qe||(Qe=(0,v.jsx)("p",{children:"Do you want to delete this dashboard?"})),(0,v.jsxs)("p",{children:["This dashboard contains ",a," alert",a>1?"s":"",". Deleting this dashboard also deletes those alerts."]})]}):(0,v.jsxs)(v.Fragment,{children:[Ke||(Ke=(0,v.jsx)("p",{children:"Do you want to delete this dashboard?"})),(0,v.jsx)("p",{children:t})]})},st=e=>{let{hideModal:t,provisionedId:a}=e;return(0,v.jsxs)(o.Modal,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:t,className:i.css`
      width: 500px;
    `,children:[Ye||(Ye=(0,v.jsx)("p",{children:"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."})),(0,v.jsxs)("p",{children:[Je||(Je=(0,v.jsxs)("i",{children:["See"," ",(0,v.jsx)("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information about provisioning."]})),Xe||(Xe=(0,v.jsx)("br",{})),"File path: ",a]}),(0,v.jsx)(o.Modal.ButtonRow,{children:(0,v.jsx)(o.Button,{variant:"primary",onClick:t,children:"OK"})})]})},nt=e=>{let{dashboard:t}=e;return(0,v.jsx)(o.ModalsController,{children:e=>{let{showModal:a,hideModal:s}=e;return(0,v.jsx)(o.Button,{variant:"destructive",onClick:()=>{a(tt,{dashboard:t,hideModal:s})},"aria-label":"Dashboard settings page delete dashboard button",children:"Delete Dashboard"})}})};var rt,it,ot=a("./public/app/features/dashboard/components/DashboardSettings/TimePickerSettings.tsx"),lt=a("./public/app/features/search/components/SearchCard.tsx");function ct(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class dt extends n.PureComponent{constructor(){super(...arguments),ct(this,"state",{}),ct(this,"doUpload",((e,t)=>{const a=(null==e?void 0:e.files)&&e.files[0];if(!a)return void console.log("NOPE!",e);const s=(0,lt.A)(this.props.uid,t),n=new FormData;n.append("file",a),fetch(s,{method:"POST",body:n}).then((e=>e.json())).then((e=>{console.log("Success:",e),location.reload()})).catch((e=>{console.error("Error:",e)}))}))}render(){const{uid:e}=this.props,t={maxWidth:300,maxHeight:300};return(0,v.jsxs)(o.CollapsableSection,{label:"Preview settings",isOpen:!0,children:[rt||(rt=(0,v.jsx)("div",{children:"DUMMY UI just so we have an upload button!"})),(0,v.jsxs)("table",{cellSpacing:"4",children:[it||(it=(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:"[DARK]"}),(0,v.jsx)("td",{children:"[LIGHT]"})]})})),(0,v.jsxs)("tbody",{children:[(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(0,v.jsx)("img",{src:(0,lt.A)(e,!1),style:t})}),(0,v.jsx)("td",{children:(0,v.jsx)("img",{src:(0,lt.A)(e,!0),style:t})})]}),(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:(0,v.jsx)(o.FileUpload,{accept:"image/png, image/webp",onFileUpload:e=>{let{currentTarget:t}=e;return this.doUpload(t,!1)},children:"Upload dark"})}),(0,v.jsx)("td",{children:(0,v.jsx)(o.FileUpload,{accept:"image/png, image/webp",onFileUpload:e=>{let{currentTarget:t}=e;return this.doUpload(t,!0)},children:"Upload light"})})]})]})]})]})}}const ut=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];const pt={updateTimeZone:De.tM,updateWeekStart:De.f4},ht=(0,W.connect)(null,pt)((function(e){let{dashboard:t,updateTimeZone:a,updateWeekStart:s}=e;const[r,i]=(0,n.useState)(0),l=e=>{t[e.currentTarget.name]=e.currentTarget.value};return(0,v.jsxs)("div",{style:{maxWidth:"600px"},children:[(0,v.jsx)("h3",{className:"dashboard-settings__header","aria-label":p.wl.pages.Dashboard.Settings.General.title,children:"General"}),(0,v.jsxs)("div",{className:"gf-form-group",children:[(0,v.jsx)(o.Field,{label:"Name",children:(0,v.jsx)(o.Input,{id:"title-input",name:"title",onBlur:l,defaultValue:t.title})}),(0,v.jsx)(o.Field,{label:"Description",children:(0,v.jsx)(o.Input,{id:"description-input",name:"description",onBlur:l,defaultValue:t.description})}),(0,v.jsx)(o.Field,{label:"Tags",children:(0,v.jsx)(o.TagsInput,{id:"tags-input",tags:t.tags,onChange:e=>{t.tags=e,i(r+1)}})}),(0,v.jsx)(o.Field,{label:"Folder",children:(0,v.jsx)(qe.E,{inputId:"dashboard-folder-input",initialTitle:t.meta.folderTitle,initialFolderId:t.meta.folderId,onChange:e=>{t.meta.folderId=e.id,t.meta.folderTitle=e.title,t.meta.hasUnsavedFolderChange=!0},enableCreateNew:!0,dashboardId:t.id,skipInitialLoad:!0})}),(0,v.jsx)(o.Field,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect",children:(0,v.jsx)(o.RadioButtonGroup,{value:t.editable,options:[{label:"Editable",value:!0},{label:"Read-only",value:!1}],onChange:e=>{t.editable=e,i(r+1)}})})]}),Z.config.featureToggles.dashboardPreviews&&(0,v.jsx)(dt,{uid:t.uid}),(0,v.jsx)(ot.P,{onTimeZoneChange:e=>{t.timezone=e,i(r+1),a(e)},onWeekStartChange:e=>{t.weekStart=e,i(r+1),s(e)},onRefreshIntervalChange:e=>{t.timepicker.refresh_intervals=e.filter((e=>""!==e.trim()))},onNowDelayChange:e=>{t.timepicker.nowDelay=e},onHideTimePickerChange:e=>{t.timepicker.hidden=e,i(r+1)},onLiveNowChange:e=>{t.liveNow=e,i(r+1)},refreshIntervals:t.timepicker.refresh_intervals,timePickerHidden:t.timepicker.hidden,nowDelay:t.timepicker.nowDelay,timezone:t.timezone,weekStart:t.weekStart,liveNow:t.liveNow}),(0,v.jsx)(o.CollapsableSection,{label:"Panel options",isOpen:!0,children:(0,v.jsx)(o.Field,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels",children:(0,v.jsx)(o.RadioButtonGroup,{onChange:e=>{t.graphTooltip=e,i(r+1)},options:ut,value:t.graphTooltip})})}),(0,v.jsx)("div",{className:"gf-form-button-row",children:t.meta.canSave&&(0,v.jsx)(nt,{dashboard:t})})]})}));var mt,gt,ft,bt,vt=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/lastValueFrom.js"),xt=a("./public/app/features/dashboard/services/DashboardSrv.ts"),yt=a("./public/app/features/dashboard/services/TimeSrv.ts"),wt=a("./public/app/features/annotations/standardAnnotationSupport.ts"),jt=a("./public/app/features/annotations/executeAnnotationQuery.ts");function Ct(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class kt extends n.PureComponent{constructor(e){super(e),Ct(this,"updateFields",(()=>{var e,t;const a=null===(e=this.props.response)||void 0===e||null===(t=e.panelData)||void 0===t?void 0:t.series[0];if(a&&a.fields){const e=a.fields.map((e=>{const t=(0,g.getFieldDisplayName)(e,a);let s="";for(let t=0;t<a.length;t++){if(t>0&&(s+=", "),t>2){s+="...";break}s+=e.values.get(t)}return s.length>50&&(s=s.substring(0,50)+"..."),{label:`${t} (${e.type})`,value:t,description:s}}));this.setState({fieldNames:e})}})),Ct(this,"onFieldSourceChange",((e,t)=>{const a=this.props.mappings||{},s=a[e]||{};this.props.change(Object.assign({},a,{[e]:Object.assign({},s,{source:t.value||g.AnnotationEventFieldSource.Field})}))})),Ct(this,"onFieldNameChange",((e,t)=>{const a=this.props.mappings||{},s=a[e]||{};this.props.change(Object.assign({},a,{[e]:Object.assign({},s,{value:t.value,source:g.AnnotationEventFieldSource.Field})}))})),this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(e){e.response!==this.props.response&&this.updateFields()}renderRow(e,t,a){const{fieldNames:s}=this.state;let n=s;const r=t.value;let i=s.find((e=>r===e.value));r&&(n=[...s],i||n.push({label:r,value:r}));let l=a?a[e.key]:"";if(l&&e.key.startsWith("time")){const e=(0,g.getValueFormat)("dateTimeAsIso");l=(0,g.formattedValueToString)(e(l))}return null==l&&(l=""),(0,v.jsxs)("tr",{children:[(0,v.jsxs)("td",{children:[e.key," ",e.help&&(0,v.jsx)(o.Tooltip,{content:e.help,children:mt||(mt=(0,v.jsx)(o.Icon,{name:"info-circle"}))})]}),(0,v.jsx)("td",{children:(0,v.jsx)(o.Select,{menuShouldPortal:!0,value:i,options:n,placeholder:e.placeholder||e.key,onChange:t=>{this.onFieldNameChange(e.key,t)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})}),(0,v.jsx)("td",{children:`${l}`})]},e.key)}render(){var e,t;const a=null===(e=this.props.response)||void 0===e||null===(t=e.events)||void 0===t?void 0:t[0],s=this.props.mappings||{};return(0,v.jsxs)("table",{className:"filter-table",children:[gt||(gt=(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Annotation"}),(0,v.jsx)("th",{children:"From"}),(0,v.jsx)("th",{children:"First Value"})]})})),(0,v.jsx)("tbody",{children:wt.r0.map((e=>this.renderRow(e,s[e.key]||{},a)))})]})}}function St(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Tt extends n.PureComponent{constructor(){super(...arguments),St(this,"state",{}),St(this,"onRunQuery",(async()=>{const{datasource:e,annotation:t}=this.props,a=(0,xt.h4)().getCurrent();if(!a)return;this.setState({running:!0});const s=await(0,vt.n)((0,jt.r)({range:(0,yt.$t)().timeRange(),panel:{},dashboard:a},e,t));this.setState({running:!1,response:s})})),St(this,"onQueryChange",(e=>{this.props.onChange(Object.assign({},this.props.annotation,{target:e}))})),St(this,"onMappingChange",(e=>{this.props.onChange(Object.assign({},this.props.annotation,{mappings:e}))}))}componentDidMount(){this.verifyDataSource()}componentDidUpdate(e){this.props.annotation!==e.annotation&&this.verifyDataSource()}verifyDataSource(){const{datasource:e,annotation:t}=this.props,a=Object.assign({},wt.yA,e.annotations).prepareAnnotation(t);a!==t?this.props.onChange(a):this.onRunQuery()}renderStatus(){var e;const{response:t,running:a}=this.state;let s,n="alert-info",r="...";if(a||(null==t||null===(e=t.panelData)||void 0===e?void 0:e.state)===g.LoadingState.Loading||!t)r="loading...";else{const{events:e,panelData:a}=t;var l;if(null!=a&&a.error)n="alert-error",s="exclamation-triangle",r=null!==(l=a.error.message)&&void 0!==l?l:"error";else if(null!=e&&e.length){const t=null==a?void 0:a.series[0];r=`${e.length} events (from ${null==t?void 0:t.fields.length} fields)`}else n="alert-warning",s="exclamation-triangle",r="No events found"}return(0,v.jsxs)("div",{className:(0,i.cx)(n,i.css`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `),children:[(0,v.jsxs)("div",{children:[s&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.Icon,{name:s})," "]}),r]}),(0,v.jsx)("div",{children:a?ft||(ft=(0,v.jsx)(o.Spinner,{})):(0,v.jsx)(o.Button,{variant:"secondary",size:"xs",onClick:this.onRunQuery,children:"TEST"})})]})}render(){var e,t,a;const{datasource:s,annotation:n}=this.props,{response:r}=this.state;let i=(null===(e=s.annotations)||void 0===e?void 0:e.QueryEditor)||(null===(t=s.components)||void 0===t?void 0:t.QueryEditor);if(!i)return bt||(bt=(0,v.jsx)("div",{children:"Annotations are not supported. This datasource needs to export a QueryEditor"}));const o=null!==(a=n.target)&&void 0!==a?a:{refId:"Anno"};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(i,{query:o,datasource:s,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:null==r?void 0:r.panelData,range:(0,yt.$t)().timeRange()},null==s?void 0:s.name),"datasource"!==s.type&&(0,v.jsxs)(v.Fragment,{children:[this.renderStatus(),(0,v.jsx)(kt,{response:r,mappings:n.mappings,change:this.onMappingChange})]})]})}}function Ot(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _t extends n.PureComponent{constructor(){super(...arguments),Ot(this,"ref",null),Ot(this,"angularComponent",void 0),Ot(this,"scopeProps",void 0)}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(e){var t;(e.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation)&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,null===(t=this.angularComponent)||void 0===t||t.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const e=(0,Z.getAngularLoader)(),t={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=e.load(this.ref,t,'<plugin-component type="annotations-query-ctrl"> </plugin-component>'),this.angularComponent.digest(),this.angularComponent.getScope().$watch((()=>{t.ctrl.ignoreNextWatcherFiring?t.ctrl.ignoreNextWatcherFiring=!1:this.props.onChange(t.ctrl.currentAnnotation)})),this.scopeProps=t}render(){return(0,v.jsx)("div",{ref:e=>this.ref=e})}}const Nt={name:"New annotation",enable:!0,datasource:null,iconColor:"red"},It=e=>{let{editIdx:t,dashboard:a}=e;const[s,r]=(0,n.useState)(null!==t?a.annotations.list[t]:Nt),{value:i}=(0,le.Z)((()=>(0,Z.getDataSourceSrv)().get(s.datasource)),[s.datasource]),l=e=>{const s=[...a.annotations.list];s.splice(t,1,e),r(e),a.annotations.list=s},c=e=>{const t=e.currentTarget;l(Object.assign({},s,{[t.name]:"checkbox"===t.type?t.checked:t.value}))},d=s.name===Nt.name;return(0,v.jsxs)("div",{children:[(0,v.jsx)(o.Field,{label:"Name",children:(0,v.jsx)(o.Input,{"aria-label":p.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:d,value:s.name,onChange:e=>{l(Object.assign({},s,{name:e.currentTarget.value}))},width:50})}),(0,v.jsx)(o.Field,{label:"Data source",htmlFor:"data-source-picker",children:(0,v.jsx)(Z.DataSourcePicker,{width:50,annotations:!0,variables:!0,current:s.datasource,onChange:e=>{l(Object.assign({},s,{datasource:e.name}))}})}),(0,v.jsx)(o.Field,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh",children:(0,v.jsx)(o.Checkbox,{name:"enable",id:"enable",value:s.enable,onChange:c})}),(0,v.jsx)(o.Field,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden.",children:(0,v.jsx)(o.Checkbox,{name:"hide",id:"hide",value:s.hide,onChange:c})}),(0,v.jsx)(o.Field,{label:"Color",description:"Color to use for the annotation event markers",children:(0,v.jsx)(o.HorizontalGroup,{children:(0,v.jsx)(o.ColorValueEditor,{value:null==s?void 0:s.iconColor,onChange:e=>{l(Object.assign({},s,{iconColor:e}))}})})}),(0,v.jsxs)(o.CollapsableSection,{isOpen:!0,label:"Query",children:[(null==i?void 0:i.annotations)&&(0,v.jsx)(Tt,{datasource:i,annotation:s,onChange:l}),i&&!i.annotations&&(0,v.jsx)(_t,{datasource:i,annotation:s,onChange:l})]})]})};It.displayName="AnnotationSettingsEdit";const Pt=["children"];const Mt=e=>{let{children:t}=e,a=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Pt);const s=(0,o.useStyles)(Ft);return(0,v.jsx)("div",{className:s.buttonWrapper,children:(0,v.jsx)(o.Button,Object.assign({icon:"plus",variant:"secondary"},a,{children:t}))})},Ft=e=>({buttonWrapper:i.css`
    padding: ${e.spacing.lg} 0;
  `});var At,Dt,$t;const Lt=e=>{let{dashboard:t,onNew:a,onEdit:s}=e;const[r,i]=(0,n.useState)(t.annotations.list),l=(e,a)=>{t.annotations.list=g.arrayUtils.moveItemImmutably(r,e,e+a),i(t.annotations.list)},c=0===r.length||1===r.length&&r[0].builtIn;return(0,v.jsxs)(o.VerticalGroup,{children:[r.length>0&&(0,v.jsxs)("table",{className:"filter-table filter-table--hover",children:[At||(At=(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Query name"}),(0,v.jsx)("th",{children:"Data source"}),(0,v.jsx)("th",{colSpan:3})]})})),(0,v.jsx)("tbody",{children:t.annotations.list.map(((e,a)=>(0,v.jsxs)("tr",{children:[e.builtIn?(0,v.jsxs)("td",{style:{width:"90%"},className:"pointer",onClick:()=>s(a),children:[Dt||(Dt=(0,v.jsx)(o.Icon,{name:"comment-alt"})),"   ",(0,v.jsxs)("em",{className:"muted",children:[e.name," (Built-in)"]})]}):(0,v.jsxs)("td",{className:"pointer",onClick:()=>s(a),children:[$t||($t=(0,v.jsx)(o.Icon,{name:"comment-alt"})),"   ",e.name]}),(0,v.jsx)("td",{className:"pointer",onClick:()=>s(a),children:e.datasource||"Default"}),(0,v.jsx)("td",{style:{width:"1%"},children:0!==a&&(0,v.jsx)(o.IconButton,{surface:"header",name:"arrow-up","aria-label":"arrow-up",onClick:()=>l(a,-1)})}),(0,v.jsx)("td",{style:{width:"1%"},children:t.annotations.list.length>1&&a!==t.annotations.list.length-1?(0,v.jsx)(o.IconButton,{surface:"header",name:"arrow-down","aria-label":"arrow-down",onClick:()=>l(a,1)}):null}),(0,v.jsx)("td",{style:{width:"1%"},children:(0,v.jsx)(o.DeleteButton,{size:"sm",onConfirm:()=>(e=>{t.annotations.list=[...r.slice(0,e),...r.slice(e+1)],i(t.annotations.list)})(a),"aria-label":`Delete query with title "${e.name}"`})})]},`${e.name}-${a}`)))})]}),c&&(0,v.jsx)(re.Z,{onClick:a,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:"<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines\n          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for\n          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or\n          drag region). These will be stored in Grafana's annotation database.\n        </p>\n        Checkout the\n        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'\n          >Annotations documentation</a\n        >\n        for more information."}}),!c&&(0,v.jsx)(Mt,{onClick:a,children:"New query"})]})};var Rt;const Et=e=>{let{onGoBack:t,isEditing:a,title:s}=e;return(0,v.jsx)("div",{className:"dashboard-settings__header",children:(0,v.jsx)(o.HorizontalGroup,{align:"center",justify:"space-between",children:(0,v.jsxs)("h3",{children:[(0,v.jsx)("span",{onClick:t,className:a?"pointer":"",children:s}),a&&(Rt||(Rt=(0,v.jsxs)("span",{children:[(0,v.jsx)(o.Icon,{name:"angle-right"})," Edit"]})))]})})})},zt=e=>{let{dashboard:t}=e;const[a,s]=(0,n.useState)(null),r=null!==a;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Et,{title:"Annotations",onGoBack:()=>{s(null)},isEditing:r}),!r&&(0,v.jsx)(Lt,{dashboard:t,onNew:()=>{t.annotations.list=[...t.annotations.list,Object.assign({},Nt)],s(t.annotations.list.length-1)},onEdit:e=>{s(e)}}),r&&(0,v.jsx)(It,{dashboard:t,editIdx:a})]})};var Vt,Bt,Ut=a("./public/app/features/dashboard/components/LinksSettings/LinkSettingsEdit.tsx");const Ht=e=>{let{dashboard:t,onNew:a,onEdit:s}=e;const[r,i]=(0,n.useState)(t.links),l=(e,a)=>{t.links=g.arrayUtils.moveItemImmutably(r,e,e+a),i(t.links)};return 0===t.links.length?(0,v.jsx)(re.Z,{onClick:a,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("table",{className:"filter-table filter-table--hover",children:[Vt||(Vt=(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Type"}),(0,v.jsx)("th",{children:"Info"}),(0,v.jsx)("th",{colSpan:3})]})})),(0,v.jsx)("tbody",{children:r.map(((e,a)=>{var n;return(0,v.jsxs)("tr",{children:[(0,v.jsxs)("td",{className:"pointer",onClick:()=>s(a),children:[Bt||(Bt=(0,v.jsx)(o.Icon,{name:"external-link-alt"})),"   ",e.type]}),(0,v.jsx)("td",{children:(0,v.jsxs)(o.HorizontalGroup,{children:[e.title&&(0,v.jsx)("span",{children:e.title}),"link"===e.type&&(0,v.jsx)("span",{children:e.url}),"dashboards"===e.type&&(0,v.jsx)(o.TagList,{tags:null!==(n=e.tags)&&void 0!==n?n:[]})]})}),(0,v.jsx)("td",{style:{width:"1%"},children:0!==a&&(0,v.jsx)(o.IconButton,{surface:"header",name:"arrow-up","aria-label":"arrow-up",onClick:()=>l(a,-1)})}),(0,v.jsx)("td",{style:{width:"1%"},children:r.length>1&&a!==r.length-1?(0,v.jsx)(o.IconButton,{surface:"header",name:"arrow-down","aria-label":"arrow-down",onClick:()=>l(a,1)}):null}),(0,v.jsx)("td",{style:{width:"1%"},children:(0,v.jsx)(o.IconButton,{surface:"header","aria-label":"copy",name:"copy",onClick:()=>((e,a)=>{t.links=[...r,Object.assign({},e)],i(t.links)})(e)})}),(0,v.jsx)("td",{style:{width:"1%"},children:(0,v.jsx)(o.DeleteButton,{"aria-label":`Delete link with title "${e.title}"`,size:"sm",onConfirm:()=>(e=>{t.links=[...r.slice(0,e),...r.slice(e+1)],i(t.links)})(a)})})]},`${e.title}-${a}`)}))})]}),(0,v.jsx)(Mt,{onClick:a,children:"New link"})]})},qt=e=>{let{dashboard:t}=e;const[a,s]=(0,n.useState)(null),r=()=>{s(null)},i=null!==a;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Et,{onGoBack:r,title:"Dashboard links",isEditing:i}),!i&&(0,v.jsx)(Ht,{dashboard:t,onNew:()=>{t.links=[...t.links,Object.assign({},Ut.zA)],s(t.links.length-1)},onEdit:e=>{s(e)}}),i&&(0,v.jsx)(Ut.fD,{dashboard:t,editLinkIdx:a,onGoBack:r})]})};var Wt,Gt,Zt,Qt,Kt,Yt=a("./public/app/features/dashboard/components/VersionHistory/index.ts");function Jt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Xt extends n.PureComponent{constructor(e){var t;super(e),t=this,Jt(this,"limit",void 0),Jt(this,"start",void 0),Jt(this,"getVersions",(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({isAppending:e}),Yt.K8.getHistoryList(t.props.dashboard,{limit:t.limit,start:t.start}).then((e=>{t.setState({isLoading:!1,versions:[...t.state.versions,...t.decorateVersions(e)]}),t.start+=t.limit})).catch((e=>console.log(e))).finally((()=>t.setState({isAppending:!1})))})),Jt(this,"getDiff",(async()=>{const e=this.state.versions.filter((e=>e.checked)),[t,a]=e,s=t.version===this.props.dashboard.version;this.setState({isLoading:!0});const n=await Yt.K8.getDashboardVersion(this.props.dashboard.id,a.version),r=await Yt.K8.getDashboardVersion(this.props.dashboard.id,t.version);this.setState({baseInfo:a,isLoading:!1,isNewLatest:s,newInfo:t,viewMode:"compare",diffData:{lhs:n.data,rhs:r.data}})})),Jt(this,"decorateVersions",(e=>e.map((e=>Object.assign({},e,{createdDateString:this.props.dashboard.formatDate(e.created),ageString:this.props.dashboard.getRelativeTime(e.created),checked:!1}))))),Jt(this,"onCheck",((e,t)=>{this.setState({versions:this.state.versions.map((a=>a.id===t?Object.assign({},a,{checked:e.currentTarget.checked}):a))})})),Jt(this,"reset",(()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map((e=>Object.assign({},e,{checked:!1}))),viewMode:"list"})})),this.limit=10,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find((e=>1===e.version))}render(){const{versions:e,viewMode:t,baseInfo:a,newInfo:s,isNewLatest:n,isLoading:r,diffData:i}=this.state,o=2!==e.filter((e=>e.checked)).length,l=e.length>1,c=e.length>=this.limit;return"compare"===t?(0,v.jsxs)("div",{children:[(0,v.jsx)(Yt.Cs,{isComparing:!0,onClick:this.reset,baseVersion:null==a?void 0:a.version,newVersion:null==s?void 0:s.version,isNewLatest:n}),r?Wt||(Wt=(0,v.jsx)(ea,{msg:"Fetching changes…"})):(0,v.jsx)(Yt.U$,{newInfo:s,baseInfo:a,isNewLatest:n,diffData:i})]}):(0,v.jsxs)("div",{children:[Gt||(Gt=(0,v.jsx)(Yt.Cs,{})),r?Zt||(Zt=(0,v.jsx)(ea,{msg:"Fetching history list…"})):(0,v.jsx)(Yt.Sd,{versions:e,onCheck:this.onCheck}),this.state.isAppending&&(Qt||(Qt=(0,v.jsx)(ea,{msg:"Fetching more entries…"}))),l&&(0,v.jsx)(Yt.R1,{hasMore:c,canCompare:o,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()})]})}}const ea=e=>{let{msg:t}=e;return(0,v.jsxs)(o.HorizontalGroup,{children:[Kt||(Kt=(0,v.jsx)(o.Spinner,{})),(0,v.jsx)("em",{children:t})]})};var ta,aa,sa=a("./.yarn/__virtual__/react-virtualized-auto-sizer-virtual-b5ab366cb0/3/opt/drone/yarncache/react-virtualized-auto-sizer-npm-1.0.6-50869b8392-81270e9d32.zip/node_modules/react-virtualized-auto-sizer/dist/index.esm.js");const na=e=>{let{dashboard:t}=e;const[a,s]=(0,n.useState)(JSON.stringify(t.getSaveModelClone(),null,2)),r=e=>{s(e)},i=(0,o.useStyles2)(ra);return(0,v.jsxs)("div",{children:[ta||(ta=(0,v.jsx)("h3",{className:"dashboard-settings__header",children:"JSON Model"})),aa||(aa=(0,v.jsx)("div",{className:"dashboard-settings__subheader",children:"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."})),(0,v.jsx)("div",{className:i.editWrapper,children:(0,v.jsx)(sa.Z,{children:e=>{let{width:t,height:s}=e;return(0,v.jsx)(o.CodeEditor,{value:a,language:"json",width:t,height:s,showMiniMap:!0,showLineNumbers:!0,onBlur:r})}})}),t.meta.canSave&&(0,v.jsx)(o.HorizontalGroup,{children:(0,v.jsx)(o.Button,{onClick:()=>{(0,xt.h4)().saveJSONDashboard(a).then((()=>{d.H.reloadPage()}))},children:"Save changes"})})]})},ra=e=>({editWrapper:i.css`
    height: calc(100vh - 250px);
    margin-bottom: 10px;
  `});var ia,oa;const la=()=>Z.locationService.partial({editview:null}),ca=e=>(0,v.jsxs)("div",{children:[ia||(ia=(0,v.jsx)("div",{className:"dashboard-settings__header",children:"Dashboard not editable"})),(0,v.jsx)(o.Button,{onClick:e.onMakeEditable,children:"Make editable"})]});function da(e){var t,a,s,p,h,m,f,b;let{dashboard:x,editview:y}=e;const w=(0,o.useForceUpdate)(),j=(0,n.useCallback)((()=>{x.editable=!0,x.meta.canMakeEditable=!1,x.meta.canEdit=!0,x.meta.canSave=!0,w()}),[x,w]),C=(0,n.useMemo)((()=>{const e=[];return x.meta.canEdit&&(e.push({title:"General",id:"settings",icon:"sliders-v-alt",component:t||(t=(0,v.jsx)(ht,{dashboard:x}))}),e.push({title:"Annotations",id:"annotations",icon:"comment-alt",component:a||(a=(0,v.jsx)(zt,{dashboard:x}))}),e.push({title:"Variables",id:"templating",icon:"calculator-alt",component:oa||(oa=(0,v.jsx)(Ne,{}))}),e.push({title:"Links",id:"links",icon:"link",component:s||(s=(0,v.jsx)(qt,{dashboard:x}))})),x.meta.canMakeEditable&&e.push({title:"General",icon:"sliders-v-alt",id:"settings",component:p||(p=(0,v.jsx)(ca,{onMakeEditable:j}))}),x.id&&x.meta.canSave&&e.push({title:"Versions",id:"versions",icon:"history",component:h||(h=(0,v.jsx)(Xt,{dashboard:x}))}),x.id&&x.meta.canAdmin&&e.push({title:"Permissions",id:"permissions",icon:"lock",component:m||(m=(0,v.jsx)(He,{dashboard:x}))}),e.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",component:f||(f=(0,v.jsx)(na,{dashboard:x}))}),e}),[x,j]),k=()=>{x.meta.hasUnsavedFolderChange=!1,d.H.reloadPage()},S=x.meta.folderTitle,T=null!==(b=C.find((e=>e.id===y)))&&void 0!==b?b:C[0],O=c.Vt.hasEditPermissionInFolders,_=x.meta.canSave,N=ua(l.ZP.theme2);return(0,v.jsxs)("div",{className:"dashboard-settings",children:[(0,v.jsx)(o.PageToolbar,{title:`${x.title} / Settings`,parent:S,onGoBack:la}),(0,v.jsx)(o.CustomScrollbar,{children:(0,v.jsx)("div",{className:N.scrollInner,children:(0,v.jsxs)("div",{className:N.settingsWrapper,children:[(0,v.jsxs)("aside",{className:"dashboard-settings__aside",children:[C.map((e=>(0,v.jsxs)(r.Link,{onClick:()=>(0,Z.reportInteraction)(`Dashboard settings navigation to ${e.id}`),to:t=>g.locationUtil.updateSearchParams(t.search,`editview=${e.id}`),className:(0,i.cx)("dashboard-settings__nav-item",{active:e.id===y}),children:[(0,v.jsx)(o.Icon,{name:e.icon,style:{marginRight:"4px"}}),e.title]},e.id))),(0,v.jsxs)("div",{className:"dashboard-settings__aside-actions",children:[_&&(0,v.jsx)(u.i,{dashboard:x,onSaveSuccess:k}),O&&(0,v.jsx)(u.t,{dashboard:x,onSaveSuccess:k,variant:"secondary"})]})]}),(0,v.jsx)("div",{className:N.settingsContent,children:T.component})]})})})]})}const ua=(0,o.stylesFactory)((e=>({scrollInner:i.css`
    min-width: 100%;
    display: flex;
  `,settingsWrapper:i.css`
    margin: ${e.spacing(0,2,2)};
    display: flex;
    flex-grow: 1;
  `,settingsContent:i.css`
    flex-grow: 1;
    height: 100%;
    padding: 32px;
    border: 1px solid ${e.colors.border.weak};
    background: ${e.colors.background.primary};
    border-radius: ${e.shape.borderRadius()};
  `})))},"./public/app/features/dashboard/components/LinksSettings/LinkSettingsEdit.tsx":(e,t,a)=>{"use strict";a.d(t,{zA:()=>i,xy:()=>l,fD:()=>d});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},o=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],l={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},c=Object.keys(l).map((e=>({label:e,value:e}))),d=e=>{let{editLinkIdx:t,dashboard:a}=e;const[l,d]=(0,s.useState)(null!==t?a.links[t]:i),u=e=>{const s=[...a.links];s.splice(t,1,e),a.links=s,d(e)},p=e=>{const t=e.currentTarget;u(Object.assign({},l,{[t.name]:"checkbox"===t.type?t.checked:t.value}))},h=l.title===i.title;return(0,r.jsxs)("div",{style:{maxWidth:"600px"},children:[(0,r.jsx)(n.Field,{label:"Title",children:(0,r.jsx)(n.Input,{name:"title",id:"title",value:l.title,onChange:p,autoFocus:h})}),(0,r.jsx)(n.Field,{label:"Type",children:(0,r.jsx)(n.Select,{inputId:"link-type-input",value:l.type,options:o,onChange:e=>{const t=Object.assign({},l,{type:e.value});"dashboards"===t.type?(t.url="",t.tooltip=""):t.tags=[],u(t)},menuShouldPortal:!0})}),"dashboards"===l.type&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.Field,{label:"With tags",children:(0,r.jsx)(n.TagsInput,{tags:l.tags,placeholder:"add tags",onChange:e=>{u(Object.assign({},l,{tags:e}))}})})}),"link"===l.type&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Field,{label:"URL",children:(0,r.jsx)(n.Input,{name:"url",value:l.url,onChange:p})}),(0,r.jsx)(n.Field,{label:"Tooltip",children:(0,r.jsx)(n.Input,{name:"tooltip",value:l.tooltip,onChange:p,placeholder:"Open dashboard"})}),(0,r.jsx)(n.Field,{label:"Icon",children:(0,r.jsx)(n.Select,{menuShouldPortal:!0,value:l.icon,options:c,onChange:e=>{u(Object.assign({},l,{icon:e.value}))}})})]}),(0,r.jsxs)(n.CollapsableSection,{label:"Options",isOpen:!0,children:["dashboards"===l.type&&(0,r.jsx)(n.Field,{children:(0,r.jsx)(n.Checkbox,{label:"Show as dropdown",name:"asDropdown",value:l.asDropdown,onChange:p})}),(0,r.jsx)(n.Field,{children:(0,r.jsx)(n.Checkbox,{label:"Include current time range",name:"keepTime",value:l.keepTime,onChange:p})}),(0,r.jsx)(n.Field,{children:(0,r.jsx)(n.Checkbox,{label:"Include current template variable values",name:"includeVars",value:l.includeVars,onChange:p})}),(0,r.jsx)(n.Field,{children:(0,r.jsx)(n.Checkbox,{label:"Open link in new tab",name:"targetBlank",value:l.targetBlank,onChange:p})})]})]})}},"./public/app/features/dashboard/components/PanelEditor/OptionsPaneCategory.tsx":(e,t,a)=>{"use strict";a.d(t,{u:()=>p});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./public/app/features/dashboard/components/PanelEditor/state/reducers.ts"),o=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useLocalStorage.js"),l=a("./packages/grafana-e2e-selectors/src/index.ts"),c=a("./public/app/core/hooks/useQueryParams.ts"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u="showCategory",p=s.memo((e=>{var t,a;let{id:i,title:p,children:g,forceOpen:f,isOpenDefault:b,renderTitle:v,className:x,itemsCount:y,isNested:w=!1}=e;const j=!1!==b,[C,k]=(0,o.Z)(m(i),{isExpanded:j}),S=(0,r.useStyles2)(h),[T,O]=(0,c.K)(),[_,N]=(0,s.useState)(null!==(t=null==C?void 0:C.isExpanded)&&void 0!==t?t:j),I=(0,s.useRef)(0),P=(0,s.useRef)(null),M=T.showCategory===i;(0,s.useEffect)((()=>{var e;I.current&&Date.now()-I.current<200||(M||f)&&(_||N(!0),M&&(null===(e=P.current)||void 0===e||e.scrollIntoView()))}),[f,_,M]);const F=(0,s.useCallback)((()=>{I.current=Date.now(),O({[u]:_?void 0:i}),k({isExpanded:!_}),N(!_)}),[k,N,O,_,i]);v||(v=function(e){return e||void 0===y||0===y?p:a||(a=(0,d.jsxs)("span",{children:[p," ",(0,d.jsx)(r.Counter,{value:y})]}))});const A=(0,n.cx)({[S.box]:!0,[S.boxNestedExpanded]:w&&_},x,"options-group"),D=(0,n.cx)(S.header,{[S.headerExpanded]:_,[S.headerNested]:w}),$=(0,n.cx)(S.body,{[S.bodyNested]:w});return(0,d.jsxs)("div",{className:A,"data-testid":"options-category","aria-label":l.wl.components.OptionsGroup.group(i),ref:P,children:[(0,d.jsxs)("div",{className:D,onClick:F,"aria-label":l.wl.components.OptionsGroup.toggle(i),children:[(0,d.jsx)("div",{className:(0,n.cx)(S.toggle,"editor-options-group-toggle"),children:(0,d.jsx)(r.Icon,{name:_?"angle-down":"angle-right"})}),(0,d.jsx)("h6",{className:S.title,children:v(_)})]}),_&&(0,d.jsx)("div",{className:$,children:g})]})}));p.displayName="OptionsPaneCategory";const h=e=>({box:n.css`
      border-top: 1px solid ${e.colors.border.weak};
    `,boxNestedExpanded:n.css`
      margin-bottom: ${e.spacing(2)};
    `,toggle:n.css`
      color: ${e.colors.text.secondary};
      margin-right: ${e.spacing(1)};
    `,title:n.css`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      font-weight: ${e.typography.fontWeightMedium};
      margin: 0;
    `,header:n.css`
      display: flex;
      cursor: pointer;
      align-items: baseline;
      padding: ${e.spacing(1)};
      color: ${e.colors.text.primary};
      font-weight: ${e.typography.fontWeightMedium};

      &:hover {
        background: ${e.colors.emphasize(e.colors.background.primary,.03)};
      }
    `,headerExpanded:n.css`
      color: ${e.colors.text.primary};
    `,headerNested:n.css`
      padding: ${e.spacing(.5,0,.5,0)};
    `,body:n.css`
      padding: ${e.spacing(1,2,1,4)};
    `,bodyNested:n.css`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${e.colors.border.weak};
      }
    `}),m=e=>`${i.jy}.optionGroup[${e}]`},"./public/app/features/dashboard/components/PanelEditor/OptionsPaneCategoryDescriptor.tsx":(e,t,a)=>{"use strict";a.d(t,{j:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./public/app/features/dashboard/components/PanelEditor/OptionsPaneCategory.tsx"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class i{constructor(e){r(this,"items",[]),r(this,"categories",[]),r(this,"parent",void 0),this.props=e}addItem(e){return e.parent=this,this.items.push(e),this}addCategory(e){return e.props.isNested=!0,e.parent=this,this.categories.push(e),this}getCategory(e){let t=this.categories.find((t=>t.props.id===e));return t||(t=new i({title:e,id:e}),this.addCategory(t),t)}render(e){return this.props.customRender?this.props.customRender():(0,n.jsxs)(s.u,Object.assign({},this.props,{children:[this.items.map((t=>t.render(e))),this.categories.map((t=>t.render(e)))]}),this.props.title)}}},"./public/app/features/dashboard/components/PanelEditor/OptionsPaneItemDescriptor.tsx":(e,t,a)=>{"use strict";a.d(t,{a:()=>u});var s=a("./packages/grafana-e2e-selectors/src/index.ts"),n=a("./packages/grafana-ui/src/index.ts"),r=(a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),a("./.yarn/__virtual__/react-highlight-words-virtual-d2265e757c/3/opt/drone/yarncache/react-highlight-words-npm-0.17.0-880b4a18ed-41b3d0e451.zip/node_modules/react-highlight-words/dist/main.js")),i=a.n(r),o=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function c(e){let{overrides:t}=e;const a=(0,n.useStyles2)(d);return(0,l.jsx)("div",{className:a.wrapper,children:t.map(((e,t)=>(0,l.jsx)(n.Tooltip,{content:e.tooltip,placement:"top",children:(0,l.jsx)("div",{"aria-label":e.description,className:a[e.type]})},t.toString())))})}const d=e=>{const t={width:8,height:8,borderRadius:"50%",marginLeft:e.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,o.css)({display:"flex"}),rule:(0,o.css)(Object.assign({},t,{backgroundColor:e.colors.primary.main})),data:(0,o.css)(Object.assign({},t,{backgroundColor:e.colors.warning.main}))}};class u{constructor(e){var t,a,s;s=void 0,(a="parent")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.props=e}getLabel(e){const{title:t,description:a,overrides:s}=this.props;if(!e)return this.parent.props.title!==t||null!=s&&s.length?(0,l.jsxs)(n.Label,{description:a,children:[t,s&&s.length>0&&(0,l.jsx)(c,{overrides:s})]}):null;const r=[];return this.parent.parent&&r.push(this.highlightWord(this.parent.parent.props.title,e)),this.parent.props.title!==t&&r.push(this.highlightWord(this.parent.props.title,e)),(0,l.jsxs)(n.Label,{description:a&&this.highlightWord(a,e),category:r,children:[this.highlightWord(t,e),s&&s.length>0&&(0,l.jsx)(c,{overrides:s})]})}highlightWord(e,t){return(0,l.jsx)(i(),{textToHighlight:e,searchWords:[t],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:e}=this.props;e&&e.length}render(e){const{title:t,description:a,render:r,showIf:i,skipField:o}=this.props,c=`${this.parent.props.id} ${t}`;return i&&!i()?null:o?r():(0,l.jsx)(n.Field,{label:this.getLabel(e),description:a,"aria-label":s.wl.components.PanelEditor.OptionsPane.fieldLabel(c),children:r()},c)}}},"./public/app/features/dashboard/components/PanelEditor/getVisualizationOptions.tsx":(e,t,a)=>{"use strict";a.d(t,{HZ:()=>m,AL:()=>h});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./public/app/features/panel/panellinks/link_srv.ts"),r=a("./public/app/features/dashboard/components/PanelEditor/utils.ts"),i=a("./public/app/features/dashboard/components/PanelEditor/OptionsPaneItemDescriptor.tsx"),o=a("./public/app/features/dashboard/components/PanelEditor/OptionsPaneCategoryDescriptor.tsx"),l=a("./packages/grafana-data/src/utils/OptionsUIBuilders.ts");const c="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",d="An override rule exists for this property";function u(e,t,a){const n=[];if(a)for(const t of a)for(const a of t.fields){if(null!=(0,s.get)(a.config,e.path)){n.push({type:"data",description:c,tooltip:c});break}}return t.overrides.some((t=>t.properties.some((t=>t.id===e.id))))&&n.push({type:"rule",description:d,tooltip:d}),n}var p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function h(e){const{plugin:t,panel:a,onPanelOptionsChanged:l,onFieldConfigsChange:c,data:d,dashboard:h,instanceState:g}=e,f=a.getOptions(),b=a.fieldConfig,v={},x=function(e){var t;let{data:a,replaceVariables:s,options:r,eventBus:i,instanceState:o}=e;const l=null!==(t=null==a?void 0:a.series)&&void 0!==t?t:[];return{data:l,replaceVariables:s,options:r,eventBus:i,getSuggestions:e=>(0,n.PW)(l,e),instanceState:o}}({data:d,replaceVariables:a.replaceVariables,options:f,eventBus:h.events,instanceState:g}),y=e=>{var a;const s=null!==(a=e&&e[0])&&void 0!==a?a:`${t.meta.name}`,n=v[s];return n||(v[s]=new o.j({title:s,id:s}))},w={getValue:e=>(0,s.get)(f,e),onChange:(e,t)=>{const a=(0,r.hs)(f,e,t);l(a)}};m(t.getPanelOptionsSupplier(),w,y,x);for(const e of t.fieldConfigRegistry.list()){if(e.isCustom&&e.showIf&&!e.showIf(b.defaults.custom,null==d?void 0:d.series))continue;if(e.hideFromDefaults)continue;const t=y(e.category),a=e.editor,n=b.defaults,o=e.isCustom?n.custom?(0,s.get)(n.custom,e.path):void 0:(0,s.get)(n,e.path);e.getItemsCount&&(t.props.itemsCount=e.getItemsCount(o)),t.addItem(new i.a({title:e.name,description:e.description,overrides:u(e,b,null==d?void 0:d.series),render:function(){return(0,p.jsx)(a,{value:o,onChange:t=>{c((0,r.uJ)(b,e.path,t,e.isCustom))},item:e,context:x,id:e.id})}}))}return Object.values(v)}function m(e,t,a,s,n){const r=new l.rt;e(r,s);for(const e of r.getItems()){var o,c;if(e.showIf&&!e.showIf(s.options,s.data))continue;let r=n;if(r?null!==(o=e.category)&&void 0!==o&&null!==(c=o[0])&&void 0!==c&&c.length&&(r=r.getCategory(e.category[0])):r=a(e.category),(0,l.j)(e)){const n=e.getNestedValueAccess(t),i=n.getContext?n.getContext(s):Object.assign({},s,{options:t.getValue(e.path)});m(e.getBuilder(),n,a,i,r);continue}const d=e.editor;r.addItem(new i.a({title:e.name,description:e.description,render:function(){return(0,p.jsx)(d,{value:t.getValue(e.path),onChange:a=>{t.onChange(e.path,a)},item:e,context:s,id:e.id})}}))}}},"./public/app/features/dashboard/components/PanelEditor/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{jy:()=>l,Hl:()=>u,yi:()=>h,my:()=>m,K9:()=>g,g_:()=>f,OT:()=>b,ZP:()=>v});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./public/app/features/dashboard/state/PanelModel.ts"),r=a("./packages/grafana-data/src/index.ts"),i=a("./public/app/features/dashboard/components/PanelEditor/types.ts"),o=a("./public/app/core/store.ts");const l="grafana.dashboard.editor.ui",c={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:i.d1.Fill},d=(0,s.oM)({name:"panelEditor",initialState:(()=>{const e=o.Z.getObject(l,c);let t=Object.assign({},e);return"string"==typeof e.topPaneSize&&(t=Object.assign({},e,{topPaneSize:parseFloat(e.topPaneSize)/100})),{getPanel:()=>new n.r({}),getSourcePanel:()=>new n.r({}),getData:()=>({state:r.LoadingState.NotStarted,series:[],timeRange:(0,r.getDefaultTimeRange)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:Object.assign({},c,t)}})(),reducers:{updateEditorInitState:(e,t)=>{e.getPanel=()=>t.payload.panel,e.getSourcePanel=()=>t.payload.sourcePanel,e.initDone=!0,e.isOpen=!0,e.shouldDiscardChanges=!1},setEditorPanelData:(e,t)=>{e.getData=()=>t.payload},setDiscardChanges:(e,t)=>{e.shouldDiscardChanges=t.payload},setPanelEditorUIState:(e,t)=>{e.ui=Object.assign({},e.ui,t.payload),!e.ui.isPanelOptionsVisible&&e.isVizPickerOpen&&(e.isVizPickerOpen=!1)},toggleVizPicker:(e,t)=>{e.isVizPickerOpen=t.payload,e.isVizPickerOpen&&(e.ui.isPanelOptionsVisible=!0)},toggleTableView(e){e.tableViewEnabled=!e.tableViewEnabled},closeEditor:e=>{e.isOpen=!1,e.initDone=!1,e.isVizPickerOpen=!1,e.tableViewEnabled=!1}}}),{updateEditorInitState:u,setEditorPanelData:p,setDiscardChanges:h,closeEditor:m,setPanelEditorUIState:g,toggleVizPicker:f,toggleTableView:b}=d.actions,v={panelEditor:d.reducer}},"./public/app/features/dashboard/components/PanelEditor/types.ts":(e,t,a)=>{"use strict";let s,n,r;a.d(t,{Ip:()=>s,d1:()=>n,d7:()=>i,Ok:()=>o}),function(e){e.Query="query",e.Transform="transform",e.Visualize="visualize",e.Alert="alert"}(s||(s={})),function(e){e[e.Fill=0]="Fill",e[e.Fit=1]="Fit",e[e.Exact=2]="Exact"}(n||(n={})),function(e){e[e.Off=0]="Off",e[e.Table=1]="Table"}(r||(r={}));const i=[{value:n.Fill,label:"Fill",description:"Use all available space"},{value:n.Exact,label:"Actual",description:"Make same size as on the dashboard"}];r.Off,r.Table;let o;!function(e){e[e.Visualizations=0]="Visualizations",e[e.LibraryPanels=1]="LibraryPanels",e[e.Suggestions=2]="Suggestions"}(o||(o={}))},"./public/app/features/dashboard/components/PanelEditor/utils.ts":(e,t,a)=>{"use strict";a.d(t,{jF:()=>i,sY:()=>o,uJ:()=>l,hs:()=>c});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./public/app/features/dashboard/components/PanelEditor/types.ts"),r=a("./public/app/core/constants.ts");function i(e,t,a,s){if(e===n.d1.Fill)return{width:t,height:a};const i=(window.innerWidth-60-4*r.hD)/r.cz*s.gridPos.w,o=r.K3*s.gridPos.h+48,l=Math.min(t/i,a/o);return i<=t&&o<=a?{width:i,height:o}:{width:i*l,height:o*l}}function o(e){return!1===(null==e?void 0:e.meta.skipDataQuery)}const l=(e,t,a,n)=>{let r=Object.assign({},e.defaults);const i=null==a||""===a;return n?r.custom?r.custom=i?(0,s.omit)(r.custom,t):c(r.custom,t,a):i||(r.custom=c(r.custom,t,a)):r=i?(0,s.omit)(r,t):c(r,t,a),Object.assign({},e,{defaults:r})};function c(e,t,a){const s=Array.isArray(t)?t:t.split("."),n=s.shift();if(n.endsWith("]")){const t=n.lastIndexOf("["),r=+n.substring(t+1,n.length-1),i=n.substr(0,t);let o=e[i];const l=Array.isArray(o)?[...o]:[];return s.length&&(o=l[r],null!=o&&"object"==typeof o||(o={}),a=c(o,s,a)),l[r]=a,Object.assign({},e,{[i]:l})}if(!s.length)return Object.assign({},e,{[n]:a});let r=e[n];return null!=r&&"object"==typeof r||(r={}),Object.assign({},e,{[n]:c(r,s,a)})}},"./public/app/features/dashboard/components/SaveDashboard/SaveDashboardAsModal.tsx":(e,t,a)=>{"use strict";a.d(t,{s:()=>m});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./packages/grafana-ui/src/index.ts"),o=a("./public/app/core/components/Select/FolderPicker.tsx"),l=a("./public/app/features/manage-dashboards/services/ValidationSrv.ts"),c=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const d=["ref"];const u=e=>{var t;let{dashboard:a,isNew:n,onSubmit:r,onCancel:u,onSuccess:p}=e;const h={title:n?a.title:`${a.title} Copy`,$folder:{id:a.meta.folderId,title:a.meta.folderTitle},copyTags:!1};return(0,c.jsx)(i.Form,{defaultValues:h,onSubmit:async e=>{if(!r)return;const t=(e=>{const t=e.getSaveModelClone();return t.id=null,t.uid="",t.title+=" Copy",t.editable=!0,t.hideControls=!1,e.id>0&&t.panels.forEach((e=>{"graph"===e.type&&e.alert&&delete e.thresholds,delete e.alert})),delete t.autoUpdate,t})(a);t.title=e.title,e.copyTags||(t.tags=[]);"success"===(await r(t,{folderId:e.$folder.id},a)).status&&p()},children:e=>{var n;let{register:r,control:p,errors:h,getValues:m}=e;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.Field,{label:"Dashboard name",invalid:!!h.title,error:null===(n=h.title)||void 0===n?void 0:n.message,children:(0,c.jsx)(i.Input,Object.assign({},r("title",{validate:(g=m,async e=>{var t;if(e&&e===(null===(t=g().$folder.title)||void 0===t?void 0:t.trim()))return"Dashboard name cannot be the same as folder name";try{return await l.t.validateNewDashboardName(g().$folder.id,e),!0}catch(e){return e.message}})}),{"aria-label":"Save dashboard title field",autoFocus:!0}))}),(0,c.jsx)(i.Field,{label:"Folder",children:(0,c.jsx)(i.InputControl,{render:e=>{let{}=e,t=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e.field,d);return(0,c.jsx)(o.E,Object.assign({},t,{dashboardId:a.id,initialFolderId:a.meta.folderId,initialTitle:a.meta.folderTitle,enableCreateNew:!0}))},control:p,name:"$folder"})}),(0,c.jsx)(i.Field,{label:"Copy tags",children:(0,c.jsx)(i.Switch,Object.assign({},r("copyTags")))}),t||(t=(0,c.jsxs)(i.Modal.ButtonRow,{children:[(0,c.jsx)(i.Button,{type:"button",variant:"secondary",onClick:u,fill:"outline",children:"Cancel"}),s||(s=(0,c.jsx)(i.Button,{type:"submit","aria-label":"Save dashboard button",children:"Save"}))]}))]});var g}})};var p=a("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardErrorProxy.tsx"),h=a("./public/app/features/dashboard/components/SaveDashboard/useDashboardSave.tsx");const m=e=>{let{dashboard:t,onDismiss:a,isNew:s}=e;const{state:o,onDashboardSave:l}=(0,h.f)(t),[d,m]=(0,n.useState)();return(0,c.jsxs)(c.Fragment,{children:[o.error&&(0,c.jsx)(p.G,{error:o.error,dashboard:t,dashboardSaveModel:d,onDismiss:a}),!o.error&&(0,c.jsx)(i.Modal,{isOpen:!0,title:"Save dashboard as...",icon:"copy",onDismiss:a,className:r.css`
            width: 500px;
          `,children:(0,c.jsx)(u,{dashboard:t,onCancel:a,onSuccess:a,onSubmit:(e,t,a)=>(m(e),l(e,t,a)),isNew:s})})]})}},"./public/app/features/dashboard/components/SaveDashboard/SaveDashboardButton.tsx":(e,t,a)=>{"use strict";a.d(t,{i:()=>l,t:()=>c});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/index.ts"),n=a("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardAsModal.tsx"),r=a("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardModalProxy.tsx"),i=a("./packages/grafana-e2e-selectors/src/index.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=e=>{let{dashboard:t,onSaveSuccess:a}=e;return(0,o.jsx)(s.ModalsController,{children:e=>{let{showModal:n,hideModal:l}=e;return(0,o.jsx)(s.Button,{onClick:()=>{n(r.D,{dashboard:t,onSaveSuccess:a,onDismiss:l})},"aria-label":i.wl.pages.Dashboard.Settings.General.saveDashBoard,children:"Save dashboard"})}})},c=e=>{let{dashboard:t,onSaveSuccess:a,variant:r}=e;return(0,o.jsx)(s.ModalsController,{children:e=>{let{showModal:l,hideModal:c}=e;return(0,o.jsx)(s.FullWidthButtonContainer,{children:(0,o.jsx)(s.Button,{onClick:()=>{l(n.s,{dashboard:t,onSaveSuccess:a,onDismiss:c})},variant:r,"aria-label":i.wl.pages.Dashboard.Settings.General.saveAsDashBoard,children:"Save As..."})})}})}},"./public/app/features/dashboard/components/SaveDashboard/SaveDashboardErrorProxy.tsx":(e,t,a)=>{"use strict";a.d(t,{G:()=>h});var s,n,r,i,o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),l=a("./packages/grafana-ui/src/index.ts"),c=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),d=a("./public/app/features/dashboard/components/SaveDashboard/useDashboardSave.tsx"),u=a("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardButton.tsx"),p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const h=e=>{let{dashboard:t,dashboardSaveModel:a,error:r,onDismiss:i}=e;const{onDashboardSave:c}=(0,d.f)(t);return(0,o.useEffect)((()=>{r.data&&g(r.data.status)&&(r.isHandled=!0)}),[r]),(0,p.jsxs)(p.Fragment,{children:[r.data&&"version-mismatch"===r.data.status&&(0,p.jsx)(l.ConfirmModal,{isOpen:!0,title:"Conflict",body:s||(s=(0,p.jsxs)("div",{children:["Someone else has updated this dashboard ",(0,p.jsx)("br",{})," ",(0,p.jsx)("small",{children:"Would you still like to save this dashboard?"})]})),confirmText:"Save and overwrite",onConfirm:async()=>{await c(a,{overwrite:!0},t),i()},onDismiss:i}),r.data&&"name-exists"===r.data.status&&(0,p.jsx)(l.ConfirmModal,{isOpen:!0,title:"Conflict",body:n||(n=(0,p.jsxs)("div",{children:["A dashboard with the same name in selected folder already exists. ",(0,p.jsx)("br",{}),(0,p.jsx)("small",{children:"Would you still like to save this dashboard?"})]})),confirmText:"Save and overwrite",onConfirm:async()=>{await c(a,{overwrite:!0},t),i()},onDismiss:i}),r.data&&"plugin-dashboard"===r.data.status&&(0,p.jsx)(m,{dashboard:t,onDismiss:i})]})},m=e=>{let{onDismiss:t,dashboard:a}=e;const s=(0,l.useTheme)(),{onDashboardSave:n}=(0,d.f)(a),o=f(s);return(0,p.jsxs)(l.Modal,{className:o.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:t,children:[(0,p.jsxs)("div",{className:o.modalText,children:["Your changes will be lost when you update the plugin.",r||(r=(0,p.jsx)("br",{})),i||(i=(0,p.jsxs)("small",{children:["Use ",(0,p.jsx)("strong",{children:"Save As"})," to create custom version."]}))]}),(0,p.jsxs)(l.Modal.ButtonRow,{children:[(0,p.jsx)(l.Button,{variant:"secondary",onClick:t,fill:"outline",children:"Cancel"}),(0,p.jsx)(u.t,{dashboard:a,onSaveSuccess:t}),(0,p.jsx)(l.Button,{variant:"destructive",onClick:async()=>{await n(a.getSaveModelClone(),{overwrite:!0},a),t()},children:"Overwrite"})]})]})},g=e=>{switch(e){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},f=(0,l.stylesFactory)((e=>({modal:c.css`
    width: 500px;
  `,modalText:c.css`
    font-size: ${e.typography.heading.h4};
    color: ${e.colors.link};
    margin-bottom: calc(${e.spacing.d} * 2);
    padding-top: ${e.spacing.d};
  `,modalButtonRow:c.css`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${e.spacing.d};
    }
  `})))},"./public/app/features/dashboard/components/SaveDashboard/SaveDashboardModalProxy.tsx":(e,t,a)=>{"use strict";a.d(t,{D:()=>S});var s,n,r,i,o,l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),c=a("./packages/grafana-ui/src/index.ts"),d=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),u=a("../../opt/drone/yarncache/file-saver-npm-2.0.5-2c3bc40d53-c62d96e5ce.zip/node_modules/file-saver/dist/FileSaver.min.js"),p=a("./packages/grafana-data/src/index.ts"),h=a("./public/app/core/app_events.ts"),m=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const g=e=>{let{dashboard:t,onCancel:a}=e;const d=(0,c.useTheme)(),[g,b]=(0,l.useState)((()=>{const e=t.getSaveModelClone();return delete e.id,JSON.stringify(e,null,2)})),v=(0,l.useCallback)((()=>{const e=new Blob([g],{type:"application/json;charset=utf-8"});(0,u.saveAs)(e,t.title+"-"+(new Date).getTime()+".json")}),[t.title,g]),x=(0,l.useCallback)((()=>{h.Z.emit(p.AppEvents.alertSuccess,["Dashboard JSON copied to clipboard"])}),[]),y=f(d);return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{children:["This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",s||(s=(0,m.jsx)("br",{})),n||(n=(0,m.jsxs)("i",{children:["See"," ",(0,m.jsx)("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information about provisioning."]})),r||(r=(0,m.jsx)("br",{}))," ",i||(i=(0,m.jsx)("br",{})),o||(o=(0,m.jsx)("strong",{children:"File path: "}))," ",t.meta.provisionedExternalId]}),(0,m.jsx)(c.TextArea,{spellCheck:!1,value:g,onChange:e=>{b(e.currentTarget.value)},className:y.json}),(0,m.jsxs)(c.Modal.ButtonRow,{children:[(0,m.jsx)(c.Button,{variant:"secondary",onClick:a,fill:"outline",children:"Cancel"}),(0,m.jsx)(c.ClipboardButton,{getText:()=>g,onClipboardCopy:x,children:"Copy JSON to clipboard"}),(0,m.jsx)(c.Button,{onClick:v,children:"Save JSON to file"})]})]})})},f=(0,c.stylesFactory)((e=>({json:d.css`
      height: 400px;
      width: 100%;
      overflow: auto;
      resize: none;
      font-family: monospace;
    `}))),b=e=>{let{dashboard:t,onDismiss:a}=e;return(0,m.jsx)(c.Modal,{isOpen:!0,title:"Cannot save provisioned dashboard",icon:"copy",onDismiss:a,children:(0,m.jsx)(g,{dashboard:t,onCancel:a,onSuccess:a})})};var v,x=a("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardAsModal.tsx"),y=a("./packages/grafana-e2e-selectors/src/index.ts");const w=e=>{var t;let{dashboard:a,onCancel:s,onSuccess:n,onSubmit:r}=e;const i=(0,l.useMemo)((()=>a.hasTimeChanged()),[a]),o=(0,l.useMemo)((()=>a.hasVariableValuesChanged()),[a]);return(0,m.jsx)(c.Form,{onSubmit:async e=>{if(!r)return;"success"===(await r(a.getSaveModelClone(e),e,a)).status&&(e.saveVariables&&a.resetOriginalVariables(),e.saveTimerange&&a.resetOriginalTime(),n())},children:e=>{let{register:a,errors:n}=e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{children:[i&&(0,m.jsx)(c.Checkbox,Object.assign({},a("saveTimerange"),{label:"Save current time range as dashboard default","aria-label":y.wl.pages.SaveDashboardModal.saveTimerange})),o&&(0,m.jsx)(c.Checkbox,Object.assign({},a("saveVariables"),{label:"Save current variable values as dashboard default","aria-label":y.wl.pages.SaveDashboardModal.saveVariables})),(o||i)&&(v||(v=(0,m.jsx)("div",{className:"gf-form-group"}))),(0,m.jsx)(c.TextArea,Object.assign({},a("message"),{placeholder:"Add a note to describe your changes.",autoFocus:!0}))]}),(0,m.jsxs)(c.Modal.ButtonRow,{children:[t||(t=(0,m.jsx)(c.Button,{variant:"secondary",onClick:s,fill:"outline",children:"Cancel"})),(0,m.jsx)(c.Button,{type:"submit","aria-label":y.wl.pages.SaveDashboardModal.save,children:"Save"})]})]})}})};var j=a("./public/app/features/dashboard/components/SaveDashboard/SaveDashboardErrorProxy.tsx"),C=a("./public/app/features/dashboard/components/SaveDashboard/useDashboardSave.tsx");const k=e=>{let{dashboard:t,onDismiss:a,onSaveSuccess:s}=e;const{state:n,onDashboardSave:r}=(0,C.f)(t),[i,o]=(0,l.useState)();return(0,m.jsxs)(m.Fragment,{children:[n.error&&(0,m.jsx)(j.G,{error:n.error,dashboard:t,dashboardSaveModel:i,onDismiss:a}),!n.error&&(0,m.jsx)(c.Modal,{isOpen:!0,title:"Save dashboard",icon:"copy",onDismiss:a,className:d.css`
            width: 500px;
          `,children:(0,m.jsx)(w,{dashboard:t,onCancel:a,onSuccess:()=>{a(),s&&s()},onSubmit:(e,t,a)=>(o(e),r(e,t,a))})})]})},S=e=>{let{dashboard:t,onDismiss:a,onSaveSuccess:s}=e;const n=t.meta.provisioned,r=0===t.version,i=t.version>0,o={dashboard:t,onDismiss:a,onSaveSuccess:s};return(0,m.jsxs)(m.Fragment,{children:[i&&!n&&(0,m.jsx)(k,Object.assign({},o)),n&&(0,m.jsx)(b,Object.assign({},o)),r&&(0,m.jsx)(x.s,Object.assign({},o,{isNew:!0}))]})}},"./public/app/features/dashboard/components/SaveDashboard/useDashboardSave.tsx":(e,t,a)=>{"use strict";a.d(t,{f:()=>d});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useAsyncFn.js"),r=a("./packages/grafana-data/src/index.ts"),i=a("./public/app/core/app_events.ts"),o=a("./public/app/features/manage-dashboards/state/actions.ts"),l=a("./packages/grafana-runtime/src/index.ts"),c=a("./public/app/types/events.ts");const d=e=>{const[t,a]=(0,n.default)((async(e,t,a)=>await((e,t,a)=>{let s=t.folderId;var n;return void 0===s&&(s=null!==(n=a.meta.folderId)&&void 0!==n?n:e.folderId),(0,o.uC)(Object.assign({},t,{folderId:s,dashboard:e}))})(e,t,a)),[]);return(0,s.useEffect)((()=>{if(t.value){e.version=t.value.version,e.clearUnsavedChanges(),i.Z.publish(new c.Jd),i.Z.emit(r.AppEvents.alertSuccess,["Dashboard saved"]),(0,l.reportInteraction)("Dashboard "+(e.id?"saved":"created"),{name:e.title,url:t.value.url});const a=l.locationService.getLocation().pathname,s=r.locationUtil.stripBaseFromUrl(t.value.url);s!==a&&setTimeout((()=>l.locationService.replace(s)))}}),[e,t]),{state:t,onDashboardSave:a}}},"./public/app/features/dashboard/components/ShareModal/index.ts":(e,t,a)=>{"use strict";a.d(t,{V8:()=>X});var s,n,r,i,o,l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),c=a("./packages/grafana-ui/src/index.ts"),d=a("./public/app/features/library-panels/guard.ts"),u=a("./packages/grafana-e2e-selectors/src/index.ts"),p=a("./packages/grafana-data/src/index.ts"),h=a("./public/app/features/dashboard/components/ShareModal/utils.ts"),m=a("./public/app/core/core.ts"),g=a("./public/app/core/config.ts"),f=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const v=[{label:"Current",value:"current"},{label:"Dark",value:"dark"},{label:"Light",value:"light"}];class x extends l.PureComponent{constructor(e){super(e),b(this,"buildUrl",(async()=>{const{panel:e,dashboard:t}=this.props,{useCurrentTimeRange:a,useShortUrl:s,selectedTheme:n}=this.state,r=await(0,h.bl)(a,n,e,s),i=(0,h.Sc)(a,t.uid,n,e);this.setState({shareUrl:r,imageUrl:i})})),b(this,"onUseCurrentTimeRangeChange",(()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})})),b(this,"onUrlShorten",(()=>{this.setState({useShortUrl:!this.state.useShortUrl})})),b(this,"onThemeChange",(e=>{this.setState({selectedTheme:e})})),b(this,"onShareUrlCopy",(()=>{m.h$.emit(p.AppEvents.alertSuccess,["Content copied to clipboard"])})),b(this,"getShareUrl",(()=>this.state.shareUrl)),this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){this.buildUrl()}componentDidUpdate(e,t){const{useCurrentTimeRange:a,useShortUrl:s,selectedTheme:n}=this.state;t.useCurrentTimeRange===a&&t.selectedTheme===n&&t.useShortUrl===s||this.buildUrl()}render(){const{panel:e,dashboard:t}=this.props,a=!!t&&"now"===t.time.to,{useCurrentTimeRange:l,useShortUrl:d,selectedTheme:p,shareUrl:h,imageUrl:m}=this.state,b=u.wl.pages.SharePanelModal,x=Boolean(t.id);return(0,f.jsxs)(f.Fragment,{children:[s||(s=(0,f.jsx)("p",{className:"share-modal-info-text",children:"Create a direct link to this dashboard or panel, customized with the options below."})),(0,f.jsxs)(c.FieldSet,{children:[(0,f.jsx)(c.Field,{label:"Lock time range",description:a?"Transforms the current relative time range to an absolute time range":"",children:(0,f.jsx)(c.Switch,{id:"share-current-time-range",value:l,onChange:this.onUseCurrentTimeRangeChange})}),(0,f.jsx)(c.Field,{label:"Theme",children:(0,f.jsx)(c.RadioButtonGroup,{options:v,value:p,onChange:this.onThemeChange})}),(0,f.jsx)(c.Field,{label:"Shorten URL",children:(0,f.jsx)(c.Switch,{id:"share-shorten-url",value:d,onChange:this.onUrlShorten})}),(0,f.jsx)(c.Field,{label:"Link URL",children:(0,f.jsx)(c.Input,{id:"link-url-input",value:h,readOnly:!0,addonAfter:(0,f.jsxs)(c.ClipboardButton,{variant:"primary",getText:this.getShareUrl,onClipboardCopy:this.onShareUrlCopy,children:[n||(n=(0,f.jsx)(c.Icon,{name:"copy"}))," Copy"]})})})]}),e&&g.ZP.rendererAvailable&&(0,f.jsxs)(f.Fragment,{children:[x&&(0,f.jsx)("div",{className:"gf-form",children:(0,f.jsxs)("a",{href:m,target:"_blank",rel:"noreferrer","aria-label":b.linkToRenderedImage,children:[r||(r=(0,f.jsx)(c.Icon,{name:"camera"}))," Direct link rendered image"]})}),!x&&(i||(i=(0,f.jsx)(c.Alert,{severity:"info",title:"Dashboard is not saved",bottomSpacing:0,children:"To render a panel image, you must save the dashboard first."})))]}),e&&!g.ZP.rendererAvailable&&(o||(o=(0,f.jsxs)(c.Alert,{severity:"info",title:"Image renderer plugin not installed",bottomSpacing:0,children:[(0,f.jsx)(f.Fragment,{children:"To render a panel image, you must install the "}),(0,f.jsx)("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link",children:"Grafana image renderer plugin"}),". Please contact your Grafana administrator to install the plugin."]})))]})}}var y,w,j,C,k,S=a("./packages/grafana-runtime/src/index.ts"),T=a("./public/app/features/dashboard/services/TimeSrv.ts"),O=a("./public/app/features/variables/types.ts");function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const N=[{label:"Never",value:0},{label:"1 Hour",value:3600},{label:"1 Day",value:86400},{label:"7 Days",value:604800}];class I extends l.PureComponent{constructor(e){super(e),_(this,"dashboard",void 0),_(this,"createSnapshot",(e=>()=>{const{timeoutSeconds:t}=this.state;this.dashboard.snapshot={timestamp:new Date},e||(this.dashboard.snapshot.originalUrl=window.location.href),this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout((()=>{this.saveSnapshot(this.dashboard,e)}),1e3*t)})),_(this,"saveSnapshot",(async(e,t)=>{const{snapshotExpires:a}=this.state,s=this.dashboard.getSaveModelClone();this.scrubDashboard(s);const n={dashboard:s,name:s.title,expires:a,external:t};try{const e=await(0,S.getBackendSrv)().post("/api/snapshots",n);this.setState({deleteUrl:e.deleteUrl,snapshotUrl:e.url,step:2})}finally{this.setState({isLoading:!1})}})),_(this,"scrubDashboard",(e=>{const{panel:t}=this.props,{snapshotName:a}=this.state;e.title=a,e.time=(0,T.$t)().timeRange(),e.links=[],e.panels.forEach((e=>{e.targets=[],e.links=[],e.datasource=null}));const s=e.annotations.list.filter((e=>e.enable));if(e.annotations.list=s.map((e=>({name:e.name,enable:e.enable,iconColor:e.iconColor,snapshotData:e.snapshotData,type:e.type,builtIn:e.builtIn,hide:e.hide}))),e.getVariables().forEach((e=>{e.query="",e.options=e.current?[e.current]:[],e.refresh=O.Bd.never})),t){const a=t.getSaveModel();a.gridPos.w=24,a.gridPos.x=0,a.gridPos.y=0,a.gridPos.h=20,e.panels=[a]}delete this.dashboard.snapshot,this.dashboard.forEachPanel((e=>{delete e.snapshotData})),this.dashboard.annotations.list.forEach((e=>{delete e.snapshotData}))})),_(this,"deleteSnapshot",(async()=>{const{deleteUrl:e}=this.state;await(0,S.getBackendSrv)().get(e),this.setState({step:3})})),_(this,"getSnapshotUrl",(()=>this.state.snapshotUrl)),_(this,"onSnapshotNameChange",(e=>{this.setState({snapshotName:e.target.value})})),_(this,"onTimeoutChange",(e=>{this.setState({timeoutSeconds:Number(e.target.value)})})),_(this,"onExpireChange",(e=>{this.setState({selectedExpireOption:e,snapshotExpires:e.value})})),_(this,"onSnapshotUrlCopy",(()=>{m.h$.emit(p.AppEvents.alertSuccess,["Content copied to clipboard"])})),this.dashboard=e.dashboard,this.state={isLoading:!1,step:1,selectedExpireOption:N[0],snapshotExpires:N[0].value,snapshotName:e.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const e=await(0,S.getBackendSrv)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:e.externalSnapshotName,externalEnabled:e.externalEnabled})}renderStep1(){const{onDismiss:e}=this.props,{snapshotName:t,selectedExpireOption:a,timeoutSeconds:s,isLoading:n,sharingButtonText:r,externalEnabled:i}=this.state;return(0,f.jsxs)(f.Fragment,{children:[y||(y=(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"share-modal-info-text",children:"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard."}),(0,f.jsxs)("p",{className:"share-modal-info-text",children:["Keep in mind, your snapshot ",(0,f.jsx)("em",{children:"can be viewed by anyone"})," that has the link and can access the URL. Share wisely."]})]})),(0,f.jsx)(c.Field,{label:"Snapshot name",children:(0,f.jsx)(c.Input,{id:"snapshot-name-input",width:30,value:t,onChange:this.onSnapshotNameChange})}),(0,f.jsx)(c.Field,{label:"Expire",children:(0,f.jsx)(c.Select,{inputId:"expire-select-input",menuShouldPortal:!0,width:30,options:N,value:a,onChange:this.onExpireChange})}),(0,f.jsx)(c.Field,{label:"Timeout (seconds)",description:"You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.",children:(0,f.jsx)(c.Input,{id:"timeout-input",type:"number",width:21,value:s,onChange:this.onTimeoutChange})}),(0,f.jsxs)(c.Modal.ButtonRow,{children:[(0,f.jsx)(c.Button,{variant:"secondary",onClick:e,fill:"outline",children:"Cancel"}),i&&(0,f.jsx)(c.Button,{variant:"secondary",disabled:n,onClick:this.createSnapshot(!0),children:r}),(0,f.jsx)(c.Button,{variant:"primary",disabled:n,onClick:this.createSnapshot(),children:"Local Snapshot"})]})]})}renderStep2(){const{snapshotUrl:e}=this.state;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"gf-form",style:{marginTop:"40px"},children:(0,f.jsxs)("div",{className:"gf-form-row",children:[(0,f.jsxs)("a",{href:e,className:"large share-modal-link",target:"_blank",rel:"noreferrer",children:[w||(w=(0,f.jsx)(c.Icon,{name:"external-link-alt"}))," ",e]}),j||(j=(0,f.jsx)("br",{})),(0,f.jsx)(c.ClipboardButton,{variant:"secondary",getText:this.getSnapshotUrl,onClipboardCopy:this.onSnapshotUrlCopy,children:"Copy Link"})]})}),(0,f.jsxs)("div",{className:"pull-right",style:{padding:"5px"},children:["Did you make a mistake?"," ",(0,f.jsx)(c.LinkButton,{fill:"text",target:"_blank",onClick:this.deleteSnapshot,children:"Delete snapshot."})]})]})}renderStep3(){return C||(C=(0,f.jsx)("div",{className:"share-modal-header",children:(0,f.jsx)("p",{className:"share-modal-info-text",children:"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches."})}))}render(){const{isLoading:e,step:t}=this.state;return(0,f.jsxs)(f.Fragment,{children:[1===t&&this.renderStep1(),2===t&&this.renderStep2(),3===t&&this.renderStep3(),e&&(k||(k=(0,f.jsx)(c.Spinner,{inline:!0})))]})}}var P,M,F=a("../../opt/drone/yarncache/file-saver-npm-2.0.5-2c3bc40d53-c62d96e5ce.zip/node_modules/file-saver/dist/FileSaver.min.js"),A=a("./public/app/core/services/backend_srv.ts"),D=a("./public/app/features/dashboard/components/DashExportModal/index.ts"),$=a("./public/app/types/events.ts"),L=a("./.yarn/__virtual__/react-virtualized-auto-sizer-virtual-b5ab366cb0/3/opt/drone/yarncache/react-virtualized-auto-sizer-npm-1.0.6-50869b8392-81270e9d32.zip/node_modules/react-virtualized-auto-sizer/dist/index.esm.js"),R=a("./public/app/core/actions/index.ts"),E=a("./public/app/store/store.ts"),z=a("./public/app/core/copy/appNotification.ts");function V(e){let{json:t,onDismiss:a}=e;const s=(0,l.useCallback)((()=>t),[t]);return(0,f.jsxs)(c.Modal,{title:"JSON",onDismiss:a,onClickBackdrop:a,isOpen:!0,children:[(0,f.jsx)(L.Z,{disableHeight:!0,children:e=>{let{width:a}=e;return(0,f.jsx)(c.CodeEditor,{value:t,language:"json",showMiniMap:!1,height:"500px",width:a})}}),(0,f.jsx)(c.Modal.ButtonRow,{children:(0,f.jsx)(c.ClipboardButton,{getText:s,onClipboardCopy:()=>{(0,E.WI)((0,R.$l)((0,z.AT)("Content copied to clipboard")))},children:"Copy to Clipboard"})})]})}function B(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class U extends l.PureComponent{constructor(e){super(e),B(this,"exporter",void 0),B(this,"onShareExternallyChange",(()=>{this.setState({shareExternally:!this.state.shareExternally})})),B(this,"onTrimDefaultsChange",(()=>{this.setState({trimDefaults:!this.state.trimDefaults})})),B(this,"onSaveAsFile",(()=>{const{dashboard:e}=this.props,{shareExternally:t}=this.state,{trimDefaults:a}=this.state;t?this.exporter.makeExportable(e).then((e=>{a?(0,A.i)().post("/api/dashboards/trim",{dashboard:e}).then((e=>{this.openSaveAsDialog(e.dashboard)})):this.openSaveAsDialog(e)})):a?(0,A.i)().post("/api/dashboards/trim",{dashboard:e.getSaveModelClone()}).then((e=>{this.openSaveAsDialog(e.dashboard)})):this.openSaveAsDialog(e.getSaveModelClone())})),B(this,"onViewJson",(()=>{const{dashboard:e}=this.props,{shareExternally:t}=this.state,{trimDefaults:a}=this.state;t?this.exporter.makeExportable(e).then((e=>{a?(0,A.i)().post("/api/dashboards/trim",{dashboard:e}).then((e=>{this.openJsonModal(e.dashboard)})):this.openJsonModal(e)})):a?(0,A.i)().post("/api/dashboards/trim",{dashboard:e.getSaveModelClone()}).then((e=>{this.openJsonModal(e.dashboard)})):this.openJsonModal(e.getSaveModelClone())})),B(this,"openSaveAsDialog",(e=>{const t=JSON.stringify(e,null,2),a=new Blob([t],{type:"application/json;charset=utf-8"}),s=(new Date).getTime();(0,F.saveAs)(a,`${e.title}-${s}.json`)})),B(this,"openJsonModal",(e=>{var t,a;m.h$.publish(new $.Dn({props:{json:JSON.stringify(e,null,2)},component:V})),null===(t=(a=this.props).onDismiss)||void 0===t||t.call(a)})),this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new D.E}render(){const{onDismiss:e}=this.props,{shareExternally:t}=this.state,{trimDefaults:a}=this.state;return(0,f.jsxs)(f.Fragment,{children:[P||(P=(0,f.jsx)("p",{className:"share-modal-info-text",children:"Export this dashboard."})),(0,f.jsx)(c.Field,{label:"Export for sharing externally",children:(0,f.jsx)(c.Switch,{id:"share-externally-toggle",value:t,onChange:this.onShareExternallyChange})}),S.config.featureToggles.trimDefaults&&(0,f.jsx)(c.Field,{label:"Export with default values removed",children:(0,f.jsx)(c.Switch,{id:"trim-defaults-toggle",value:a,onChange:this.onTrimDefaultsChange})}),(0,f.jsxs)(c.Modal.ButtonRow,{children:[(0,f.jsx)(c.Button,{variant:"secondary",onClick:e,fill:"outline",children:"Cancel"}),(0,f.jsx)(c.Button,{variant:"secondary",onClick:this.onViewJson,children:"View JSON"}),(0,f.jsx)(c.Button,{variant:"primary",onClick:this.onSaveAsFile,children:"Save to file"})]})]})}}function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const q=[{label:"Current",value:"current"},{label:"Dark",value:"dark"},{label:"Light",value:"light"}];class W extends l.PureComponent{constructor(e){super(e),H(this,"buildIframeHtml",(()=>{const{panel:e,dashboard:t}=this.props,{useCurrentTimeRange:a,selectedTheme:s}=this.state,n=(0,h.S_)(a,t.uid,s,e);this.setState({iframeHtml:n})})),H(this,"onIframeHtmlChange",(e=>{this.setState({iframeHtml:e.currentTarget.value})})),H(this,"onUseCurrentTimeRangeChange",(()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)})),H(this,"onThemeChange",(e=>{this.setState({selectedTheme:e},this.buildIframeHtml)})),H(this,"onIframeHtmlCopy",(()=>{m.h$.emit(p.AppEvents.alertSuccess,["Content copied to clipboard"])})),H(this,"getIframeHtml",(()=>this.state.iframeHtml)),this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){this.buildIframeHtml()}render(){const{useCurrentTimeRange:e,selectedTheme:t,iframeHtml:a}=this.state,s=!!this.props.dashboard&&"now"===this.props.dashboard.time.to;return(0,f.jsxs)(f.Fragment,{children:[M||(M=(0,f.jsx)("p",{className:"share-modal-info-text",children:"Generate HTML for embedding an iframe with this panel."})),(0,f.jsx)(c.Field,{label:"Current time range",description:s?"Transforms the current relative time range to an absolute time range":"",children:(0,f.jsx)(c.Switch,{id:"share-current-time-range",value:e,onChange:this.onUseCurrentTimeRangeChange})}),(0,f.jsx)(c.Field,{label:"Theme",children:(0,f.jsx)(c.RadioButtonGroup,{options:q,value:t,onChange:this.onThemeChange})}),(0,f.jsx)(c.Field,{label:"Embed HTML",description:"The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.",children:(0,f.jsx)(c.TextArea,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:a,onChange:this.onIframeHtmlChange})}),(0,f.jsx)(c.Modal.ButtonRow,{children:(0,f.jsx)(c.ClipboardButton,{variant:"primary",getText:this.getIframeHtml,onClipboardCopy:this.onIframeHtmlCopy,children:"Copy to clipboard"})})]})}}var G,Z=a("./public/app/features/library-panels/components/AddLibraryPanelModal/AddLibraryPanelModal.tsx");const Q=e=>{let{panel:t,initialFolderId:a,onDismiss:s}=e;return t?(0,f.jsxs)(f.Fragment,{children:[G||(G=(0,f.jsx)("p",{className:"share-modal-info-text",children:"Create library panel."})),(0,f.jsx)(Z.T,{panel:t,initialFolderId:a,onDismiss:s})]}):null};const K=[],Y=[];function J(e){const{panel:t}=e,a=[{label:"Link",value:"link",component:x}];return m.Vt.isSignedIn&&a.push({label:"Snapshot",value:"snapshot",component:I}),t?(a.push({label:"Embed",value:"embed",component:W}),(0,d.V)(t)||a.push({label:"Library panel",value:"library_panel",component:Q}),a.push(...Y)):(a.push({label:"Export",value:"export",component:U}),a.push(...K)),a}class X extends l.Component{constructor(e){var t,a,s;super(e),s=e=>{this.setState({activeTab:e.value})},(a="onSelectTab")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.state=function(e){const t=J(e);return{tabs:t,activeTab:t[0].value}}(e)}getTabs(){return J(this.props)}getActiveTab(){const{tabs:e,activeTab:t}=this.state;return e.find((e=>e.value===t))}renderTitle(){const{panel:e}=this.props,{activeTab:t}=this.state,a=e?"Share Panel":"Share",s=this.getTabs();return(0,f.jsx)(c.ModalTabsHeader,{title:a,icon:"share-alt",tabs:s,activeTab:t,onChangeTab:this.onSelectTab})}render(){const{dashboard:e,panel:t}=this.props,a=this.getActiveTab().component;return(0,f.jsx)(c.Modal,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss,children:(0,f.jsx)(c.TabContent,{children:(0,f.jsx)(a,{dashboard:e,panel:t,onDismiss:this.props.onDismiss})})})}}},"./public/app/features/dashboard/components/ShareModal/utils.ts":(e,t,a)=>{"use strict";a.d(t,{OS:()=>l,bl:()=>c,Sc:()=>u,S_:()=>p});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("./public/app/features/dashboard/services/TimeSrv.ts"),r=a("./public/app/core/utils/shortLinks.ts"),i=a("./packages/grafana-data/src/index.ts");function o(e){let{useCurrentTimeRange:t,selectedTheme:a,panel:r,search:i=window.location.search,range:o=(0,n.$t)().timeRange(),orgId:l=s.config.bootData.user.orgId}=e;const c=new URLSearchParams(i);return c.set("from",String(o.from.valueOf())),c.set("to",String(o.to.valueOf())),c.set("orgId",l),t||(c.delete("from"),c.delete("to")),"current"!==a&&c.set("theme",a),r&&!c.has("editPanel")&&c.set("viewPanel",String(r.id)),c}function l(){let e=window.location.href;const t=e.indexOf("?");return-1!==t&&(e=e.substring(0,t)),e}async function c(e,t,a,s){const n=l(),c=o({useCurrentTimeRange:e,selectedTheme:t,panel:a}),d=i.urlUtil.appendQueryToUrl(n,c.toString());return s?await(0,r.D)(d):d}function d(e,t,a,n){var r,c;const d=l(),u=o({useCurrentTimeRange:e,selectedTheme:a,panel:n});let p=d.replace(s.config.appSubUrl+"/dashboard/",s.config.appSubUrl+"/dashboard-solo/");p=p.replace(s.config.appSubUrl+"/d/",s.config.appSubUrl+"/d-solo/");"/"===i.locationUtil.stripBaseFromUrl(d)&&(p=`${s.config.appUrl}d-solo/${t}`);const h=null!==(r=null!==(c=u.get("editPanel"))&&void 0!==c?c:u.get("viewPanel"))&&void 0!==r?r:"";return u.set("panelId",h),u.delete("editPanel"),u.delete("viewPanel"),i.urlUtil.appendQueryToUrl(p,u.toString())}function u(e,t,a,n){let r=d(e,t,a,n).replace(s.config.appSubUrl+"/dashboard-solo/",s.config.appSubUrl+"/render/dashboard-solo/");return r=r.replace(s.config.appSubUrl+"/d-solo/",s.config.appSubUrl+"/render/d-solo/"),r+="&width=1000&height=500"+function(){const e="&tz=UTC"+encodeURIComponent((0,i.dateTime)().format("Z"));if(!window.Intl)return e;const t=window.Intl.DateTimeFormat();if(!t.resolvedOptions)return e;const a=t.resolvedOptions();if(!a.timeZone)return e;return"&tz="+encodeURIComponent(a.timeZone)}(),r}function p(e,t,a,s){return'<iframe src="'+d(e,t,a,s)+'" width="450" height="200" frameborder="0"></iframe>'}},"./public/app/features/dashboard/components/VersionHistory/index.ts":(e,t,a)=>{"use strict";a.d(t,{U$:()=>U,Cs:()=>j,Sd:()=>v,R1:()=>k,K8:()=>r});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-runtime/src/index.ts");const r=new class{getHistoryList(e,t){const a=e&&e.id?e.id:void 0;return a?(0,n.getBackendSrv)().get(`api/dashboards/id/${a}/versions`,t):Promise.resolve([])}getDashboardVersion(e,t){return(0,n.getBackendSrv)().get(`api/dashboards/id/${e}/versions/${t}`)}restoreDashboard(e,t){const a=e&&e.id?e.id:void 0,r=`api/dashboards/id/${a}/restore`;return a&&(0,s.isNumber)(t)?(0,n.getBackendSrv)().post(r,{version:t}):Promise.resolve({})}};var i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),o=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),l=a("./packages/grafana-ui/src/index.ts"),c=a("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),d=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsyncFn.js"),u=a("./packages/grafana-data/src/index.ts"),p=a("./public/app/core/app_events.ts");const h=e=>{const t=(0,c.useSelector)((e=>e.dashboard.getModel())),[a,s]=(0,d.Z)((async()=>await(async(e,t)=>await r.restoreDashboard(t,e))(e,t)),[]);return(0,i.useEffect)((()=>{if(a.value){var t;const s=n.locationService.getLocation(),r=u.locationUtil.stripBaseFromUrl(a.value.url),i=null===(t=s.state)||void 0===t?void 0:t.routeReloadCounter;n.locationService.replace(Object.assign({},s,{pathname:r,state:{routeReloadCounter:i?i+1:1}})),p.Z.emit(u.AppEvents.alertSuccess,["Dashboard restored","Restored from version "+e])}}),[a,e]),{state:a,onRestoreDashboard:s}};var m=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const g=e=>{let{hideModal:t,version:a}=e;const{state:s,onRestoreDashboard:n}=h(a);return(0,i.useEffect)((()=>{!1===s.loading&&s.value&&t()}),[s,t]),(0,m.jsx)(l.ConfirmModal,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:t,onConfirm:n,body:(0,m.jsxs)("p",{children:["Are you sure you want to restore the dashboard to version ",a,"? All unsaved changes will be lost."]}),confirmText:`Yes, restore to version ${a}`})};var f,b;const v=e=>{let{versions:t,onCheck:a}=e;return(0,m.jsxs)("table",{className:"filter-table gf-form-group",children:[f||(f=(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"width-4"}),(0,m.jsx)("th",{className:"width-4",children:"Version"}),(0,m.jsx)("th",{className:"width-14",children:"Date"}),(0,m.jsx)("th",{className:"width-10",children:"Updated by"}),(0,m.jsx)("th",{children:"Notes"}),(0,m.jsx)("th",{})]})})),(0,m.jsx)("tbody",{children:t.map(((e,t)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:(0,m.jsx)(l.Checkbox,{"aria-label":`Toggle selection of version ${e.version}`,className:o.css`
                display: inline;
              `,checked:e.checked,onChange:t=>a(t,e.id)})}),(0,m.jsx)("td",{children:e.version}),(0,m.jsx)("td",{children:e.createdDateString}),(0,m.jsx)("td",{children:e.createdBy}),(0,m.jsx)("td",{children:e.message}),(0,m.jsx)("td",{className:"text-right",children:0===t?b||(b=(0,m.jsx)(l.Tag,{name:"Latest",colorIndex:17})):(0,m.jsx)(l.ModalsController,{children:t=>{let{showModal:a,hideModal:s}=t;return(0,m.jsx)(l.Button,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{a(g,{version:e.version,hideModal:s})},children:"Restore"})}})})]},e.id)))})]})};var x,y,w;const j=e=>{let{isComparing:t=!1,onClick:a=s.noop,baseVersion:n=0,newVersion:r=0,isNewLatest:i=!1}=e;const o=(0,l.useStyles)(C);return(0,m.jsxs)("h3",{className:o.header,children:[(0,m.jsx)("span",{onClick:a,className:t?"pointer":"",children:"Versions"}),t&&(0,m.jsxs)("span",{children:[x||(x=(0,m.jsx)(l.Icon,{name:"angle-right"}))," Comparing ",n," ",y||(y=(0,m.jsx)(l.Icon,{name:"arrows-h"}))," ",r," ",i&&(w||(w=(0,m.jsx)("cite",{className:"muted",children:"(Latest)"})))]})]})},C=e=>({header:o.css`
    font-size: ${e.typography.heading.h3};
    margin-bottom: ${e.spacing.lg};
  `}),k=e=>{let{hasMore:t,canCompare:a,getVersions:s,getDiff:n,isLastPage:r}=e;return(0,m.jsxs)(l.HorizontalGroup,{children:[t&&(0,m.jsx)(l.Button,{type:"button",onClick:()=>s(!0),variant:"secondary",disabled:r,children:"Show more versions"}),(0,m.jsx)(l.Tooltip,{content:"Select two versions to start comparing",placement:"bottom",children:(0,m.jsx)(l.Button,{type:"button",disabled:a,onClick:n,icon:"code-branch",children:"Compare versions"})})]})};var S=a("../../opt/drone/yarncache/fast-json-patch-npm-3.1.0-f4bd467b5f-bad25a6121.zip/node_modules/fast-json-patch/index.mjs"),T=a("../../opt/drone/yarncache/json-source-map-npm-0.6.1-b39446562b-61b24b9782.zip/node_modules/json-source-map/index.js");const O=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=(0,s.last)(e.path),n=_(a),r="remove"===e.op?e.originalValue:e.value;let i=N(e.op);return t&&(n?i+=` item ${a}`:(0,s.isArray)(r)&&!(0,s.isEmpty)(r)?i+=` ${r.length} ${a}`:i+=` ${a}`),i},_=e=>!(0,s.isNaN)((0,s.toNumber)(e)),N=e=>"add"===e?"added":"remove"===e?"deleted":"changed";var I;const P=e=>{let{diff:t}=e;const a=(0,l.useStyles2)(M),n=!(0,s.isUndefined)(t.originalValue)&&!(0,s.isArray)(t.originalValue)&&!(0,s.isObject)(t.originalValue),r=!(0,s.isUndefined)(t.value)&&!(0,s.isArray)(t.value)&&!(0,s.isObject)(t.value);return(0,m.jsxs)(m.Fragment,{children:[n&&(0,m.jsx)("span",{className:a,children:String(t.originalValue)}),n&&r?I||(I=(0,m.jsx)(l.Icon,{name:"arrow-right"})):null,r&&(0,m.jsx)("span",{className:a,children:String(t.value)})]})},M=e=>o.css`
  background-color: ${e.colors.action.hover};
  border-radius: ${e.shape.borderRadius()};
  color: ${e.colors.text.primary};
  font-size: ${e.typography.body.fontSize};
  margin: 0 ${e.spacing(.5)};
  padding: ${e.spacing(.5,1)};
`,F={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},A=e=>{let{diff:t,title:a}=e;const s=(0,l.useStyles)(D);return t?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.Icon,{type:"mono",name:"circle",className:s[t.op]})," ",(0,m.jsx)("span",{className:s.embolden,children:a})," ",(0,m.jsx)("span",{children:O(t,t.path.length>1)})," ",(0,m.jsx)(P,{diff:t})]}):(0,m.jsxs)("div",{className:s.withoutDiff,children:[(0,m.jsx)(l.Icon,{type:"mono",name:"circle",className:s.replace})," ",(0,m.jsx)("span",{className:s.embolden,children:a})," ",(0,m.jsx)("span",{children:O(F,!1)})]})},D=e=>({embolden:o.css`
    font-weight: ${e.typography.weight.bold};
  `,add:o.css`
    color: ${e.palette.online};
  `,replace:o.css`
    color: ${e.palette.warn};
  `,move:o.css`
    color: ${e.palette.warn};
  `,copy:o.css`
    color: ${e.palette.warn};
  `,_get:o.css`
    color: ${e.palette.warn};
  `,test:o.css`
    color: ${e.palette.warn};
  `,remove:o.css`
    color: ${e.palette.critical};
  `,withoutDiff:o.css`
    margin-bottom: ${e.spacing.md};
  `}),$=e=>{let{diffs:t,title:a}=e;const n=(0,l.useStyles)(L);return 1===t.length?(0,m.jsx)("div",{className:n.container,"data-testid":"diffGroup",children:(0,m.jsx)(A,{title:a,diff:t[0]})}):(0,m.jsxs)("div",{className:n.container,"data-testid":"diffGroup",children:[(0,m.jsx)(A,{title:a}),(0,m.jsx)("ul",{className:n.list,children:t.map(((e,t)=>(0,m.jsxs)("li",{className:n.listItem,children:[(0,m.jsx)("span",{children:O(e)})," ",(0,m.jsx)(P,{diff:e})]},`${(0,s.last)(e.path)}__${t}`)))})]})},L=e=>({container:o.css`
    background-color: ${e.colors.bg2};
    font-size: ${e.typography.size.md};
    margin-bottom: ${e.spacing.md};
    padding: ${e.spacing.md};
  `,list:o.css`
    margin-left: ${e.spacing.xl};
  `,listItem:o.css`
    margin-bottom: ${e.spacing.sm};
  `});var R=a("./.yarn/__virtual__/react-diff-viewer-virtual-201eb13bb6/3/opt/drone/yarncache/react-diff-viewer-npm-3.1.1-cd98811632-073445730e.zip/node_modules/react-diff-viewer/lib/index.js"),E=a.n(R),z=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),V=a.n(z);const B=e=>{let{oldValue:t,newValue:a}=e;const s=(0,l.useTheme)(),n={variables:{dark:{diffViewerBackground:s.colors.dashboardBg,diffViewerColor:s.colors.text,addedBackground:V()(s.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:V()(s.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:V()(s.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:V()(s.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:V()(s.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:V()(s.palette.redShade).setAlpha(.2).toString(),gutterBackground:s.colors.bg1,gutterBackgroundDark:s.colors.bg1,highlightBackground:V()(s.colors.bgBlue1).setAlpha(.4).toString(),highlightGutterBackground:V()(s.colors.bgBlue2).setAlpha(.2).toString(),codeFoldGutterBackground:s.colors.bg2,codeFoldBackground:s.colors.bg2,emptyLineBackground:s.colors.bg2,gutterColor:s.colors.textFaint,addedGutterColor:s.colors.text,removedGutterColor:s.colors.text,codeFoldContentColor:s.colors.textFaint,diffViewerTitleBackground:s.colors.bg2,diffViewerTitleColor:s.colors.textFaint,diffViewerTitleBorderColor:s.colors.border3}},codeFold:{fontSize:s.typography.size.sm},gutter:`\n      pre {\n        color: ${V()(s.colors.textFaint).setAlpha(1).toString()};\n        opacity: 0.61;\n      }\n    `};return(0,m.jsx)("div",{className:o.css`
        font-size: ${s.typography.size.sm};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `,children:(0,m.jsx)(E(),{styles:n,oldValue:t,newValue:a,splitView:!1,compareMethod:R.DiffMethod.CSS,useDarkTheme:s.isDark})})},U=e=>{let{baseInfo:t,newInfo:a,diffData:n,isNewLatest:r}=e;const i=((e,t)=>{const a=(0,S.qu)(e,t),n=T.stringify(e,null,2),r=T.stringify(t,null,2);return(0,s.flow)([t=>t.map((t=>{let a,i,o=0;const l=(0,s.tail)(t.path.split("/"));return"replace"===t.op&&(a=(0,s.get)(e,l),i=t.value,o=r.pointers[t.path].value.line),"add"===t.op&&(i=t.value,o=r.pointers[t.path].value.line),"remove"===t.op&&(a=(0,s.get)(e,l),o=n.pointers[t.path].value.line),{op:t.op,value:i,path:l,originalValue:a,startLineNumber:o}})),e=>(0,s.sortBy)(e,"startLineNumber"),e=>e.reduce(((e,t)=>{const a=t.path[0];return e[a]||(e[a]=[]),e[a].push(t),e}),{})])(a)})(n.lhs,n.rhs),c=(0,l.useStyles)(H);return(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:c.spacer,children:(0,m.jsxs)(l.HorizontalGroup,{justify:"space-between",align:"center",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{className:c.versionInfo,children:[(0,m.jsxs)("strong",{children:["Version ",a.version]})," updated by ",a.createdBy," ",a.ageString," -"," ",a.message]}),(0,m.jsxs)("p",{className:(0,o.cx)(c.versionInfo,c.noMarginBottom),children:[(0,m.jsxs)("strong",{children:["Version ",t.version]})," updated by ",t.createdBy," ",t.ageString," -"," ",t.message]})]}),r&&(0,m.jsx)(l.ModalsController,{children:e=>{let{showModal:a,hideModal:s}=e;return(0,m.jsxs)(l.Button,{variant:"destructive",icon:"history",onClick:()=>{a(g,{version:t.version,hideModal:s})},children:["Restore to version ",t.version]})}})]})}),(0,m.jsx)("div",{className:c.spacer,children:Object.entries(i).map((e=>{let[t,a]=e;return(0,m.jsx)($,{diffs:a,title:t},t)}))}),(0,m.jsx)(l.CollapsableSection,{isOpen:!1,label:"View JSON Diff",children:(0,m.jsx)(B,{oldValue:JSON.stringify(n.lhs,null,2),newValue:JSON.stringify(n.rhs,null,2)})})]})},H=e=>({spacer:o.css`
    margin-bottom: ${e.spacing.xl};
  `,versionInfo:o.css`
    color: ${e.colors.textWeak};
    font-size: ${e.typography.size.sm};
  `,noMarginBottom:o.css`
    margin-bottom: 0;
  `})},"./public/app/features/dashboard/dashgrid/PanelHeader/PanelHeaderMenuItem.tsx":(e,t,a)=>{"use strict";a.d(t,{u:()=>c});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./packages/grafana-ui/src/index.ts"),o=a("./packages/grafana-e2e-selectors/src/index.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=e=>{const[t,a]=(0,n.useState)(null),c="submenu"===e.type,u="divider"===e.type,p=(0,i.useTheme)(),h=r.css`
    margin-right: ${p.spacing.sm};
    a::after {
      display: none;
    }
  `,m=r.css`
    position: absolute;
    top: 7px;
    right: ${p.spacing.xs};
    color: ${p.colors.textWeak};
  `;return u?s||(s=(0,l.jsx)("li",{className:"divider"})):(0,l.jsxs)("li",{className:c?`dropdown-submenu ${d(t)}`:void 0,ref:a,children:[(0,l.jsxs)("a",{onClick:e.onClick,href:e.href,children:[e.iconClassName&&(0,l.jsx)(i.Icon,{name:e.iconClassName,className:h}),(0,l.jsxs)("span",{className:"dropdown-item-text","aria-label":o.wl.components.Panels.Panel.headerItems(e.text),children:[e.text,c&&(0,l.jsx)(i.Icon,{name:"angle-right",className:m})]}),e.shortcut&&(0,l.jsxs)("span",{className:"dropdown-menu-item-shortcut",children:[(0,l.jsx)(i.Icon,{name:"keyboard",className:h})," ",e.shortcut]})]}),e.children]})};function d(e){if(!e)return"invisible";const t=e.parentElement.getBoundingClientRect(),a=e.getBoundingClientRect();return 0===a.width?"invisible":t.right+a.width+10>window.innerWidth?"pull-left":"pull-right"}},"./public/app/features/dashboard/dashgrid/liveTimer.ts":(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a("./packages/grafana-data/src/index.ts"),n=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const i=3e5;function o(e,t){const a=100*Math.ceil(e/t/100);return a>i?i:a}const l=new class{constructor(){r(this,"listeners",[]),r(this,"budget",1),r(this,"threshold",1.5),r(this,"ok",new n.X(!0)),r(this,"lastUpdate",Date.now()),r(this,"isLive",!1),r(this,"timeRange",void 0),r(this,"liveTimeOffset",0),r(this,"measure",(()=>{const e=Date.now();this.budget=(e-this.lastUpdate)/100;const t=this.ok.getValue(),a=this.budget<=this.threshold;if(t!==a&&this.ok.next(a),this.lastUpdate=e,this.isLive&&this.ok.getValue()&&this.timeRange){let t;for(const a of this.listeners){if(!a.panel.props.isInView)continue;if(e-a.last>=a.intervalMs){if(!t){const{raw:a}=this.timeRange;t={raw:a,from:(0,s.dateTime)(e-this.liveTimeOffset),to:(0,s.dateTime)(e)}}a.panel.liveTimeChanged(t),a.last=e}}}}))}setLiveTimeRange(e){var t;if(this.timeRange=e,this.isLive="now"===(null==e||null===(t=e.raw)||void 0===t?void 0:t.to),this.isLive){var a,n;const t=null===(a=s.dateMath.parse(e.raw.from,!1))||void 0===a?void 0:a.valueOf(),r=null===(n=s.dateMath.parse(e.raw.to,!0))||void 0===n?void 0:n.valueOf();this.liveTimeOffset=r-t;for(const e of this.listeners)e.intervalMs=o(this.liveTimeOffset,e.panel.props.width)}}listen(e){this.listeners.push({last:this.lastUpdate,panel:e,intervalMs:o(6e4,e.props.width)})}remove(e){this.listeners=this.listeners.filter((t=>t.panel!==e))}updateInterval(e){if(this.timeRange&&this.isLive)for(const t of this.listeners)if(t.panel===e)return void(t.intervalMs=o(this.liveTimeOffset,t.panel.props.width))}};setInterval(l.measure,100)},"./public/app/features/dashboard/services/DashboardLoaderSrv.ts":(e,t,a)=>{"use strict";a.d(t,{Bg:()=>b,pD:()=>v});var s=a("../../opt/drone/yarncache/moment-npm-2.29.2-7e4b405a08-ee850b5776.zip/node_modules/moment/moment.js"),n=a.n(s),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),i=a.n(r),o=a("../../opt/drone/yarncache/jquery-npm-3.6.0-ca7872bdbb-8fd5fef4aa.zip/node_modules/jquery/dist/jquery-exposed.js"),l=a.n(o),c=a("./public/app/core/utils/kbn.ts"),d=a("./packages/grafana-data/src/index.ts"),u=a("./public/app/core/services/impression_srv.ts"),p=a("./public/app/core/services/backend_srv.ts"),h=a("./public/app/features/dashboard/services/DashboardSrv.ts"),m=a("./public/app/features/plugins/datasource_srv.ts"),g=a("./packages/grafana-runtime/src/index.ts"),f=a("./public/app/core/core.ts");class b{constructor(){}_dashboardLoadFailed(e,t){return{meta:{canStar:!1,isSnapshot:t=t||!1,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:e}}}loadDashboard(e,t,a){let s;return s="script"===e?this._loadScriptedDashboard(t):"snapshot"===e?p.ae.get("/api/snapshots/"+t).catch((()=>this._dashboardLoadFailed("Snapshot not found",!0))):"ds"===e?this._loadFromDatasource(t):p.ae.getDashboardByUid(a).then((e=>{if(e.meta.isFolder)throw f.h$.emit(d.AppEvents.alertError,["Dashboard not found"]),new Error("Dashboard not found");return e})).catch((()=>this._dashboardLoadFailed("Not found",!0))),s.then((e=>(!0!==e.meta.dashboardNotFound&&u.Z.addDashboardImpression(e.dashboard.id),e))),s}_loadScriptedDashboard(e){const t="public/dashboards/"+e.replace(/\.(?!js)/,"/")+"?"+(new Date).getTime();return(0,g.getBackendSrv)().get(t).then(this._executeScript.bind(this)).then((e=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:e.data})),(e=>(console.error("Script dashboard error "+e),f.h$.emit(d.AppEvents.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard"))))}async _loadFromDatasource(e){const t=await(0,m.ak)().get(e);if(!t)return Promise.reject("can not find datasource: "+e);const a=new URLSearchParams(window.location.search),s=a.get("path");if(!s)return Promise.reject("expecting path parameter");const n={};return a.forEach(((e,t)=>{n[t]=e})),(0,g.getBackendSrv)().get(`/api/datasources/${t.id}/resources/${s}`,n).then((e=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:e})))}_executeScript(e){const t={dashboardSrv:(0,h.h4)(),datasourceSrv:(0,m.ak)()},a=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",e)(g.locationService.getSearchObject(),c.Z,d.dateMath,i(),n(),window,document,l(),l(),t);return(0,r.isFunction)(a)?new Promise((e=>{a((t=>{e({data:t})}))})):{data:a}}}let v=new b},"./public/app/features/dashboard/services/DashboardSrv.ts":(e,t,a)=>{"use strict";a.d(t,{h4:()=>p});var s=a("./public/app/core/app_events.ts"),n=a("./public/app/features/dashboard/state/DashboardModel.ts"),r=a("./public/app/features/dashboard/utils/panel.ts"),i=a("./public/app/core/services/backend_srv.ts"),o=a("./public/app/features/manage-dashboards/state/actions.ts"),l=a("./public/app/types/events.ts");function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d{constructor(){c(this,"dashboard",void 0),c(this,"onRemovePanel",(e=>{const t=this.getCurrent();t&&(0,r.WJ)(t,t.getPanelById(e),!0)})),s.h.subscribe(l.Eb,(e=>this.onRemovePanel(e.payload)))}create(e,t){return new n.f(e,t)}setCurrent(e){this.dashboard=e}getCurrent(){return this.dashboard||console.warn("Calling getDashboardSrv().getCurrent() without calling getDashboardSrv().setCurrent() first."),this.dashboard}saveJSONDashboard(e){var t;const a=JSON.parse(e);return(0,o.uC)({dashboard:a,folderId:(null===(t=this.dashboard)||void 0===t?void 0:t.meta.folderId)||a.folderId})}starDashboard(e,t){const a=(0,i.i)();let s;return s=t?a.delete("/api/user/stars/dashboard/"+e).then((()=>!1)):a.post("/api/user/stars/dashboard/"+e).then((()=>!0)),s.then((t=>(this.dashboard&&this.dashboard.id===e&&(this.dashboard.meta.isStarred=t),t)))}}let u;function p(){return u||(u=new d),u}},"./public/app/features/dashboard/services/TimeSrv.ts":(e,t,a)=>{"use strict";a.d(t,{$t:()=>g});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/core/utils/timePicker.ts"),i=a("./public/app/core/config.ts"),o=a("./packages/grafana-ui/src/index.ts");var l=a("./packages/grafana-runtime/src/index.ts"),c=a("./public/app/types/events.ts"),d=a("./public/app/core/services/context_srv.ts"),u=a("./public/app/core/app_events.ts");function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h{constructor(e){p(this,"time",void 0),p(this,"refreshTimer",void 0),p(this,"refresh",void 0),p(this,"previousAutoRefresh",void 0),p(this,"oldRefresh",void 0),p(this,"dashboard",void 0),p(this,"timeAtLoad",void 0),p(this,"autoRefreshBlocked",void 0),p(this,"timeRangeForUrl",(()=>{const e=this.timeRange().raw;return(0,n.isDateTime)(e.from)&&(e.from=e.from.valueOf().toString()),(0,n.isDateTime)(e.to)&&(e.to=e.to.valueOf().toString()),e})),this.contextSrv=e,this.time=(0,n.getDefaultTimeRange)().raw,this.refreshDashboard=this.refreshDashboard.bind(this),u.Z.subscribe(c.p8,(e=>{this.zoomOut(e.payload)})),u.Z.subscribe(c.Qt,(e=>{this.shiftTime(e.payload)})),u.Z.subscribe(c.QI,(()=>{this.makeAbsoluteTime()})),document.addEventListener("visibilitychange",(()=>{this.autoRefreshBlocked&&"visible"===document.visibilityState&&(this.autoRefreshBlocked=!1,this.refreshDashboard())}))}init(e){var t,a;this.dashboard=e,this.time=e.time,this.refresh=e.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,s.cloneDeep)(this.time);const r=n.rangeUtil.convertRawToRange(this.time,null===(t=this.dashboard)||void 0===t?void 0:t.getTimezone(),null===(a=this.dashboard)||void 0===a?void 0:a.fiscalYearStartMonth);r.to.isBefore(r.from)&&this.setTime({from:r.raw.to,to:r.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(e){return this.contextSrv.minRefreshInterval?e.filter((e=>""!==e)).filter(this.contextSrv.isAllowedInterval):e}parseTime(){(0,s.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.dateTime)(this.time.from).utc()),(0,s.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.dateTime)(this.time.to).utc())}parseUrlParam(e){if(-1!==e.indexOf("now"))return e;if(8===e.length){const t=(0,n.toUtc)(e,"YYYYMMDD");if(t.isValid())return t}else if(15===e.length){const t=(0,n.toUtc)(e,"YYYYMMDDTHHmmss");if(t.isValid())return t}if(!isNaN(e)){const t=parseInt(e,10);return(0,n.toUtc)(t)}return null}getTimeWindow(e,t){const a=parseInt(e,10);let s;return s=t.match(/^\d+$/)&&parseInt(t,10)?parseInt(t,10):n.rangeUtil.intervalToMs(t),{from:(0,n.toUtc)(a-s/2),to:(0,n.toUtc)(a+s/2)}}initTimeFromUrl(){var e,t,a,s;const n=l.locationService.getSearch();n.get("time")&&n.get("time.window")&&(this.time=this.getTimeWindow(n.get("time"),n.get("time.window"))),n.get("from")&&(this.time.from=this.parseUrlParam(n.get("from"))||this.time.from),n.get("to")&&(this.time.to=this.parseUrlParam(n.get("to"))||this.time.to),n.get("to")&&-1===n.get("to").indexOf("now")&&(this.refresh=!1,this.dashboard&&(this.dashboard.refresh=!1));let r={};n.forEach((function(e,t){r[t]=e})),this.refresh=function(e){let{params:t,currentRefresh:a,isAllowedIntervalFn:s,minRefreshInterval:n,refreshIntervals:r=o.defaultIntervals}=e;if(!t.refresh)return a;const i=s(t.refresh),l=r.find((e=>e===t.refresh));if(!i||!l){var c;const e=n?r.find((e=>e===n)):void 0,t=null!=r&&r.length?r[0]:void 0;return null!==(c=null!=e?e:t)&&void 0!==c?c:a}return t.refresh||a}({params:r,currentRefresh:this.refresh,refreshIntervals:Array.isArray(null===(e=this.dashboard)||void 0===e||null===(t=e.timepicker)||void 0===t?void 0:t.refresh_intervals)?null===(a=this.dashboard)||void 0===a||null===(s=a.timepicker)||void 0===s?void 0:s.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:i.vc.minRefreshInterval})}updateTimeRangeFromUrl(){const e=l.locationService.getSearch();if(e.get("left"))return;const t=this.timeRangeForUrl(),a=e.get("from"),s=e.get("to");a&&s?a===t.from&&s===t.to||(this.initTimeFromUrl(),this.setTime(this.time,!0)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(e){this.dashboard&&(this.dashboard.refresh=e),this.stopAutoRefresh();const t=l.locationService.getSearchObject();if(!e)return void(t.refresh&&l.locationService.partial({refresh:null},!0));const a=this.contextSrv.getValidInterval(e),s=n.rangeUtil.intervalToMs(a);this.refreshTimer=setTimeout((()=>{this.startNextRefreshTimer(s),this.refreshDashboard()}),s);const r=this.contextSrv.getValidInterval(e);t.refresh!==r&&l.locationService.partial({refresh:r},!0)}refreshDashboard(){var e;null===(e=this.dashboard)||void 0===e||e.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(e){this.refreshTimer=setTimeout((()=>{this.startNextRefreshTimer(e),this.contextSrv.isGrafanaVisible()?this.refreshDashboard():this.autoRefreshBlocked=!0}),e)}stopAutoRefresh(){clearTimeout(this.refreshTimer)}pauseAutoRefresh(){var e;this.previousAutoRefresh=null===(e=this.dashboard)||void 0===e?void 0:e.refresh,this.setAutoRefresh("")}resumeAutoRefresh(){this.setAutoRefresh(this.previousAutoRefresh)}setTime(e,t){var a,r;((0,s.extend)(this.time,e),(0,n.isDateTime)(e.to))?(this.oldRefresh=(null===(r=this.dashboard)||void 0===r?void 0:r.refresh)||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==(null===(a=this.dashboard)||void 0===a?void 0:a.refresh)&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null);if(!0!==t){const e=this.timeRangeForUrl(),t=l.locationService.getSearchObject();if(t.from===e.from.toString()&&t.to===e.to.toString())return;t.from=e.from.toString(),t.to=e.to.toString(),l.locationService.partial(t)}this.refreshDashboard()}timeRange(){var e,t;const a={from:(0,n.isDateTime)(this.time.from)?(0,n.dateTime)(this.time.from):this.time.from,to:(0,n.isDateTime)(this.time.to)?(0,n.dateTime)(this.time.to):this.time.to},s=this.dashboard?this.dashboard.getTimezone():void 0;return{from:n.dateMath.parse(a.from,!1,s,null===(e=this.dashboard)||void 0===e?void 0:e.fiscalYearStartMonth),to:n.dateMath.parse(a.to,!0,s,null===(t=this.dashboard)||void 0===t?void 0:t.fiscalYearStartMonth),raw:a}}zoomOut(e){const t=this.timeRange(),{from:a,to:s}=(0,r.h)(t,e);this.setTime({from:(0,n.toUtc)(a),to:(0,n.toUtc)(s)})}shiftTime(e){const t=this.timeRange(),{from:a,to:s}=(0,r.e)(e,t);this.setTime({from:(0,n.toUtc)(a),to:(0,n.toUtc)(s)})}makeAbsoluteTime(){if(l.locationService.getSearch().get("left"))return;const{from:e,to:t}=this.timeRange();this.setTime({from:e,to:t})}isRefreshOutsideThreshold(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05;const a=this.timeRange();if(n.dateMath.isMathString(a.raw.from)){const s=a.to.diff(a.from);return Date.now()-e>=s*t}return!1}}let m;function g(){return m||(m=new h(d.Vt)),m}},"./public/app/features/dashboard/state/DashboardMigrator.ts":(e,t,a)=>{"use strict";a.d(t,{o:()=>T,p:()=>P});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");var n=a("./public/app/core/utils/kbn.ts"),r=a("./public/app/features/dashboard/state/PanelModel.ts"),i=a("./packages/grafana-data/src/index.ts"),o=a("./public/app/core/constants.ts"),l=a("./public/app/features/variables/guard.ts"),c=a("./public/app/features/variables/shared/multiOptions.ts"),d=a("./public/app/features/variables/types.ts"),u=a("./public/app/core/config.ts"),p=a("./public/app/plugins/panel/stat/module.tsx"),h=a("./public/app/plugins/panel/gauge/module.tsx"),m=a("./packages/grafana-ui/src/index.ts"),g=a("./packages/grafana-runtime/src/index.ts"),f=a("./packages/grafana-data/src/transformations/transformers/labelsToFields.ts"),b=a("./packages/grafana-data/src/transformations/transformers/merge.ts"),v=a("./public/app/core/utils/query.ts"),x=a("./public/app/plugins/datasource/cloudwatch/types.ts");const y=["statistics","name"];function w(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}function j(e,t){const a=[];if(null!=e&&e.statistics&&null!=e&&e.statistics.length){e.statistic=e.statistics[0];for(const t of e.statistics.splice(1))a.push(Object.assign({},e,{statistic:t}))}for(const e of a)e.refId=(0,v.Hs)(t),delete e.statistics,t.push(e);return delete e.statistics,a}function C(e){var t;const a=[];if(e&&"statistics"in e&&null!=e&&null!==(t=e.statistics)&&void 0!==t&&t.length){for(const t of e.statistics.splice(1)){const{name:s}=e,n=w(e,y);a.push(Object.assign({},n,{statistic:t,name:`${s} - ${t}`}))}e.statistic=e.statistics[0],0!==a.length&&(e.name=`${e.name} - ${e.statistic}`),delete e.statistics}return a}var k=a("./public/app/core/components/editors/registry.tsx");function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}i.standardEditorsRegistry.setInit(k.u),i.standardFieldConfigEditorRegistry.setInit(k.l);class T{constructor(e){S(this,"dashboard",void 0),this.dashboard=e}syncQueryDataSources(){if(!(0,g.getDataSourceSrv)())return;const e=(0,g.getDataSourceSrv)().getInstanceSettings(null);if(e&&!e.meta.mixed)for(const t of this.dashboard.panels)if(!t.datasource)for(const a of t.targets)a.datasource&&a.datasource.uid!==(null==e?void 0:e.uid)&&(t.datasource=a.datasource)}updateSchema(e){let t,a,n,i;const m=this.dashboard.schemaVersion,g=[];if(this.dashboard.schemaVersion=35,m!==this.dashboard.schemaVersion){if(m<2&&(e.services&&e.services.filter&&(this.dashboard.time=e.services.filter.time,this.dashboard.templating.list=e.services.filter.list||[]),g.push((e=>("graphite"===e.type&&(e.type="graph"),"graph"!==e.type||((0,s.isBoolean)(e.legend)&&(e.legend={show:e.legend}),e.grid&&(e.grid.min&&(e.grid.leftMin=e.grid.min,delete e.grid.min),e.grid.max&&(e.grid.leftMax=e.grid.max,delete e.grid.max)),e.y_format&&(e.y_formats||(e.y_formats=[]),e.y_formats[0]=e.y_format,delete e.y_format),e.y2_format&&(e.y_formats||(e.y_formats=[]),e.y_formats[1]=e.y2_format,delete e.y2_format)),e)))),m<3){let e=this.dashboard.getNextPanelId();g.push((t=>(t.id||(t.id=e,e+=1),t)))}if(m<4&&g.push((e=>("graph"!==e.type||((0,s.each)(e.aliasYAxis,((t,a)=>{e.seriesOverrides=[{alias:a,yaxis:t}]})),delete e.aliasYAxis),e))),m<6){const a=(0,s.find)(e.pulldowns,{type:"annotations"});for(a&&(this.dashboard.annotations={list:a.annotations||[]}),t=0;t<this.dashboard.templating.list.length;t++){const e=this.dashboard.templating.list[t];void 0===e.datasource&&(e.datasource=null),"filter"===e.type&&(e.type="query"),void 0===e.type&&(e.type="query"),void 0===e.allFormat&&(e.allFormat="glob")}}if(m<7&&(e.nav&&e.nav.length&&(this.dashboard.timepicker=e.nav[0]),g.push((e=>((0,s.each)(e.targets,(t=>{t.refId||(t.refId=e.getNextQueryLetter&&e.getNextQueryLetter())})),e)))),m<8&&g.push((e=>((0,s.each)(e.targets,(e=>{e.fields&&e.tags&&e.groupBy&&(e.rawQuery?(delete e.fields,delete e.fill):(e.select=(0,s.map)(e.fields,(e=>{const t=[];return t.push({type:"field",params:[e.name]}),t.push({type:e.func,params:[]}),e.mathExpr&&t.push({type:"math",params:[e.mathExpr]}),e.asExpr&&t.push({type:"alias",params:[e.asExpr]}),t})),delete e.fields,(0,s.each)(e.groupBy,(e=>{"time"===e.type&&e.interval&&(e.params=[e.interval],delete e.interval),"tag"===e.type&&e.key&&(e.params=[e.key],delete e.key)})),e.fill&&(e.groupBy.push({type:"fill",params:[e.fill]}),delete e.fill)))})),e))),m<9&&g.push((e=>{if("singlestat"!==e.type&&""!==e.thresholds)return e;if(e.thresholds){const t=e.thresholds.split(",");t.length>=3&&(t.shift(),e.thresholds=t.join(","))}return e})),m<10&&g.push((e=>("table"!==e.type||(0,s.each)(e.styles,(e=>{if(e.thresholds&&e.thresholds.length>=3){const t=e.thresholds;t.shift(),e.thresholds=t}})),e))),m<12&&(0,s.each)(this.dashboard.getVariables(),(e=>{e.refresh&&(e.refresh=1),e.refresh||(e.refresh=0),e.hideVariable?e.hide=2:e.hideLabel&&(e.hide=1)})),m<12&&g.push((e=>"graph"!==e.type?e:e.grid?(e.yaxes||(e.yaxes=[{show:e["y-axis"],min:e.grid.leftMin,max:e.grid.leftMax,logBase:e.grid.leftLogBase,format:e.y_formats[0],label:e.leftYAxisLabel},{show:e["y-axis"],min:e.grid.rightMin,max:e.grid.rightMax,logBase:e.grid.rightLogBase,format:e.y_formats[1],label:e.rightYAxisLabel}],e.xaxis={show:e["x-axis"]},delete e.grid.leftMin,delete e.grid.leftMax,delete e.grid.leftLogBase,delete e.grid.rightMin,delete e.grid.rightMax,delete e.grid.rightLogBase,delete e.y_formats,delete e.leftYAxisLabel,delete e.rightYAxisLabel,delete e["y-axis"],delete e["x-axis"]),e):e)),m<13&&g.push((e=>{if("graph"!==e.type)return e;if(!e.grid)return e;e.thresholds||(e.thresholds=[]);const t={},a={};return null!==e.grid.threshold1&&(t.value=e.grid.threshold1,e.grid.thresholdLine?(t.line=!0,t.lineColor=e.grid.threshold1Color,t.colorMode="custom"):(t.fill=!0,t.fillColor=e.grid.threshold1Color,t.colorMode="custom")),null!==e.grid.threshold2&&(a.value=e.grid.threshold2,e.grid.thresholdLine?(a.line=!0,a.lineColor=e.grid.threshold2Color,a.colorMode="custom"):(a.fill=!0,a.fillColor=e.grid.threshold2Color,a.colorMode="custom")),(0,s.isNumber)(t.value)&&((0,s.isNumber)(a.value)?t.value>a.value?(t.op=a.op="lt",e.thresholds.push(t),e.thresholds.push(a)):(t.op=a.op="gt",e.thresholds.push(t),e.thresholds.push(a)):(t.op="gt",e.thresholds.push(t))),delete e.grid.threshold1,delete e.grid.threshold1Color,delete e.grid.threshold2,delete e.grid.threshold2Color,delete e.grid.thresholdLine,e})),m<14&&(this.dashboard.graphTooltip=e.sharedCrosshair?1:0),m<16&&this.upgradeToGridLayout(e),m<17&&g.push((e=>{if(e.minSpan){const a=o.cz/e.minSpan,n=(t=o.cz,Array.from(new Array(t+1),((e,t)=>t)).filter((e=>t%e==0)));e.maxPerRow=n[(0,s.findIndex)(n,(e=>e>a))-1]}var t;return delete e.minSpan,e})),m<18&&g.push((e=>(e["options-gauge"]&&(e.options=e["options-gauge"],e.options.valueOptions={unit:e.options.unit,stat:e.options.stat,decimals:e.options.decimals,prefix:e.options.prefix,suffix:e.options.suffix},e.options.thresholds&&e.options.thresholds.reverse(),delete e.options.options,delete e.options.unit,delete e.options.stat,delete e.options.decimals,delete e.options.prefix,delete e.options.suffix,delete e["options-gauge"]),e))),m<19&&g.push((e=>(e.links&&(0,s.isArray)(e.links)&&(e.links=e.links.map(N)),e))),m<20){const e=e=>Object.assign({},e,{url:I(e.url)});g.push((t=>(t.options&&t.options.dataLinks&&(0,s.isArray)(t.options.dataLinks)&&(t.options.dataLinks=t.options.dataLinks.map(e)),t.options&&t.options.fieldOptions&&t.options.fieldOptions.defaults&&(t.options.fieldOptions.defaults.links&&(0,s.isArray)(t.options.fieldOptions.defaults.links)&&(t.options.fieldOptions.defaults.links=t.options.fieldOptions.defaults.links.map(e)),t.options.fieldOptions.defaults.title&&(t.options.fieldOptions.defaults.title=I(t.options.fieldOptions.defaults.title))),t)))}if(m<21){const e=e=>Object.assign({},e,{url:e.url.replace(/__series.labels/g,"__field.labels")});g.push((t=>(t.options&&t.options.dataLinks&&(0,s.isArray)(t.options.dataLinks)&&(t.options.dataLinks=t.options.dataLinks.map(e)),t.options&&t.options.fieldOptions&&t.options.fieldOptions.defaults&&t.options.fieldOptions.defaults.links&&(0,s.isArray)(t.options.fieldOptions.defaults.links)&&(t.options.fieldOptions.defaults.links=t.options.fieldOptions.defaults.links.map(e)),t)))}if(m<22&&g.push((e=>("table"!==e.type||(0,s.each)(e.styles,(e=>{e.align="auto"})),e))),m<23)for(const e of this.dashboard.templating.list){if(!(0,l.U4)(e))continue;const{multi:t,current:a}=e;e.current=(0,c.x)(a,t)}if(m<24&&g.push((e=>{const t="table"===e.type;if(t&&!e.styles)return e;const a="table2"===e.table;return!t||a||(e.type=t?"table-old":"table"),e})),m<26&&g.push((e=>"text2"===e.type?(e.type="text",delete e.options.angular,e):e)),m<27)for(const e of this.dashboard.templating.list){var v,x;(0,l.VC)(e)&&(e.hide!==d.bU.dontHide&&e.hide!==d.bU.hideLabel||(e.type="textbox"),e.current={selected:!0,text:null!==(v=e.query)&&void 0!==v?v:"",value:null!==(x=e.query)&&void 0!==x?x:""},e.options=[e.current])}if(m<28){g.push((e=>"singlestat"===e.type?function(e){var t;if(u.vc.panels["grafana-singlestat-panel"])return e.type="grafana-singlestat-panel",e;let a=!1;e.changePlugin||(a=!0,e=new r.r(e));e.plugin={angularPanelCtrl:{}},null!==(t=e.gauge)&&void 0!==t&&t.show?(h.plugin.meta=u.vc.panels.gauge,e.changePlugin(h.plugin)):(p.plugin.meta=u.vc.panels.stat,e.changePlugin(p.plugin));if(a)return e.getSaveModel();return e}(e):e));for(const e of this.dashboard.templating.list)e.tags&&delete e.tags,e.tagsQuery&&delete e.tagsQuery,e.tagValuesQuery&&delete e.tagValuesQuery,e.useTags&&delete e.useTags}if(m<29)for(const e of this.dashboard.templating.list){var y;"query"===e.type&&(1!==e.refresh&&2!==e.refresh&&(e.refresh=1),null!==(y=e.options)&&void 0!==y&&y.length&&(e.options=[]))}if(m<30&&(g.push(F),g.push($)),m<31&&g.push((e=>{if(e.transformations)for(const t of e.transformations)if(t.id===f.r.id)return M(e,f.r.id,{id:b.R.id,options:{}});return e})),m<33&&g.push((e=>{if(e.datasource=P(e.datasource),!e.targets)return e;for(const t of e.targets){const e=P(t.datasource);null!=e&&(t.datasource=e)}return e})),m<34&&(g.push((e=>(this.migrateCloudWatchQueries(e),e))),this.migrateCloudWatchAnnotationQuery()),m<35&&g.push(L),0!==g.length)for(a=0;a<this.dashboard.panels.length;a++)for(n=0;n<g.length;n++)if(this.dashboard.panels[a]=g[n].call(this,this.dashboard.panels[a]),this.dashboard.panels[a].panels)for(i=0;i<this.dashboard.panels[a].panels.length;i++)this.dashboard.panels[a].panels[i]=g[n].call(this,this.dashboard.panels[a].panels[i])}}migrateCloudWatchQueries(e){for(const a of e.targets||[])if(A(a)&&((t=a).hasOwnProperty("metricQueryType")||(t.metricQueryType=x.$5.Search),t.hasOwnProperty("metricEditorMode")||(t.metricQueryType===x.$5.Query?t.metricEditorMode=x.MQ.Code:t.metricEditorMode=t.expression?x.MQ.Code:x.MQ.Builder),a.hasOwnProperty("statistics"))){const t=j(a,[...e.targets]);for(const a of t)e.targets.push(a)}var t}migrateCloudWatchAnnotationQuery(){for(const t of this.dashboard.annotations.list)if((e=t).hasOwnProperty("dimensions")&&e.hasOwnProperty("namespace")&&e.hasOwnProperty("region")&&e.hasOwnProperty("prefixMatching")&&e.hasOwnProperty("statistics")){const e=C(t);for(const t of e)this.dashboard.annotations.list.push(t)}var e}upgradeToGridLayout(e){let t=0;const a=o.cz/12;let n=(0,s.max)((0,s.flattenDeep)((0,s.map)(e.rows,(e=>(0,s.map)(e.panels,"id")))))+1;if(!e.rows)return;const i=(0,s.some)(e.rows,(e=>e.collapse||e.showTitle||e.repeat));for(const s of e.rows){if(s.repeatIteration)continue;const e=O(s.height||o.b0),l={};let c;i&&(l.id=n,l.type="row",l.title=s.title,l.collapsed=s.collapse,l.repeat=s.repeat,l.panels=[],l.gridPos={x:0,y:t,w:o.cz,h:e},c=new r.r(l),n++,t++);const d=new _(e,o.cz,t);for(const n of s.panels){n.span=n.span||o.kh,n.minSpan&&(n.minSpan=Math.min(o.cz,o.cz/12*n.minSpan));const s=Math.floor(n.span)*a,i=n.height?O(n.height):e,u=d.getPanelPosition(i,s);t=d.yPos,n.gridPos={x:u.x,y:t+u.y,w:s,h:i},d.addPanel(n.gridPos),delete n.span,c&&l.collapsed?c.panels.push(n):this.dashboard.panels.push(new r.r(n))}c&&this.dashboard.panels.push(c),c&&l.collapsed||(t+=e)}}}function O(e){(0,s.isString)(e)&&(e=parseInt(e.replace("px",""),10)),e<o.AV&&(e=o.AV);return Math.ceil(e/(o.K3+o.hD))}class _{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.cz,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;S(this,"area",void 0),S(this,"yPos",void 0),S(this,"height",void 0),this.area=new Array(t).fill(0),this.yPos=a,this.height=e}reset(){this.area.fill(0)}addPanel(e){for(let t=e.x;t<e.x+e.w;t++)(!this.area[t]||e.y+e.h-this.yPos>this.area[t])&&(this.area[t]=e.y+e.h-this.yPos);return this.area}getPanelPosition(e,t){let a,n,r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let e=this.area.length-1;e>=0&&this.height-this.area[e]>0;e--)if(void 0===n)n=e;else{if(!(e<this.area.length-1&&this.area[e]<=this.area[e+1]))break;a=e}if(!(void 0!==a&&void 0!==n&&n-a>=t-1))return i?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(e,t,!0));r={x:a,y:(0,s.max)(this.area.slice(a))};return r}}function N(e){let t=e.url;return!t&&e.dashboard&&(t=`dashboard/db/${n.Z.slugifyForUrl(e.dashboard)}`),!t&&e.dashUri&&(t=`dashboard/${e.dashUri}`),t||(t="/"),e.keepTime&&(t=i.urlUtil.appendQueryToUrl(t,`$${i.DataLinkBuiltInVars.keepTime}`)),e.includeVars&&(t=i.urlUtil.appendQueryToUrl(t,`$${i.DataLinkBuiltInVars.includeVars}`)),e.params&&(t=i.urlUtil.appendQueryToUrl(t,e.params)),{url:t,title:e.title,targetBlank:e.targetBlank}}function I(e){return e.replace(/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g,((e,t,a,s,n,r)=>t?"__series.name":a?"${__series.name}":s?"__value.time":n?"__field.name":r?"${__field.name}":e))}function P(e){if(null==e||"default"===e)return null;if((0,i.isDataSourceRef)(e))return e;const t=(0,g.getDataSourceSrv)().getInstanceSettings(e);return t?(0,i.getDataSourceRef)(t):{uid:e}}function M(e,t,a){if(e.transformations){const s=[];for(const n of e.transformations)s.push(n),n.id===t&&s.push(Object.assign({},a));e.transformations=s}return e}function F(e){const t=e.fieldConfig;if(!t)return e;if(t.defaults&&t.defaults.mappings&&(t.defaults.mappings=D(t.defaults.mappings,t.defaults.thresholds)),Array.isArray(t.overrides))for(const e of t.overrides)for(const t of e.properties)"mappings"===t.id&&(t.value=D(t.value));return e}function A(e){return e.hasOwnProperty("dimensions")&&e.hasOwnProperty("namespace")&&e.hasOwnProperty("region")&&e.hasOwnProperty("metricName")}function D(e,t){if(!e)return;const a={type:i.MappingType.ValueToText,options:{}},s=[];for(const n of e){if(n.type&&n.options){n.type===i.MappingType.ValueToText?a.options=Object.assign({},a.options,n.options):s.push(n);continue}let e;const r=parseFloat(n.text);if(t&&!isNaN(r)){const a=(0,i.getActiveThreshold)(r,t.steps);a&&a.color&&(e=a.color)}switch(n.type){case 1:null!=n.value&&("null"===n.value?s.push({type:i.MappingType.SpecialValue,options:{match:i.SpecialValueMatch.Null,result:{text:n.text,color:e}}}):a.options[String(n.value)]={text:n.text,color:e});break;case 2:s.push({type:i.MappingType.RangeToText,options:{from:+n.from,to:+n.to,result:{text:n.text,color:e}}})}}return Object.keys(a.options).length>0&&s.unshift(a),s}function $(e){return"timeseries"!==e.type&&"xychart"!==e.type||e.options.tooltipOptions&&(e.options=Object.assign({},e.options,{tooltip:e.options.tooltipOptions}),delete e.options.tooltipOptions),e}function L(e){var t,a;"timeseries"===e.type&&((null===(t=e.fieldConfig)||void 0===t||null===(a=t.defaults.custom)||void 0===a?void 0:a.axisPlacement)===m.AxisPlacement.Hidden&&(e.fieldConfig=Object.assign({},e.fieldConfig,{overrides:[...e.fieldConfig.overrides,{matcher:{id:i.FieldMatcherID.byType,options:i.FieldType.time},properties:[{id:"custom.axisPlacement",value:m.AxisPlacement.Auto}]}]})));return e}},"./public/app/features/dashboard/state/DashboardModel.ts":(e,t,a)=>{"use strict";a.d(t,{f:()=>_});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/core/constants.ts"),i=a("./public/app/core/services/context_srv.ts"),o=a("./public/app/features/dashboard/state/PanelModel.ts"),l=a("./public/app/features/dashboard/state/DashboardMigrator.ts"),c=a("./packages/grafana-data/src/index.ts"),d=a("./public/app/types/index.ts"),u=a("./public/app/features/variables/state/selectors.ts"),p=a("./public/app/features/variables/adapters.ts"),h=a("./public/app/features/variables/state/actions.ts"),m=a("./public/app/store/store.ts"),g=a("./public/app/features/variables/utils.ts"),f=a("./public/app/types/events.ts"),b=a("./public/app/features/dashboard/services/TimeSrv.ts"),v=a("./public/app/features/dashboard/state/index.ts");const x=new Set(["gridPos","title","description","transparent"]);function y(e,t){return null==e&&(t===1/0||t===-1/0||null==t)||(null==t&&(e===1/0||e===-1/0||null==e)||void 0)}function w(e){let t=0;for(const a of e)for(const e of a)e.id>t&&(t=e.id);return t+1}var j=a("./packages/grafana-runtime/src/index.ts");function C(e){return(0,s.isArray)(e)?e.map(C):(0,s.isPlainObject)(e)?Object.keys(e).sort().reduce(((t,a)=>{const s=e[a];return null!=s&&(t[a]=C(s)),t}),{}):e}var k=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Subscription.js"),S=a("./public/app/core/core.ts"),T=a("./public/app/features/variables/types.ts");function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _{constructor(e,t){var a,n,r,i,l,d,p,h,m,g,f,b;let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.ng;O(this,"id",void 0),O(this,"uid",void 0),O(this,"title",void 0),O(this,"autoUpdate",void 0),O(this,"description",void 0),O(this,"tags",void 0),O(this,"style",void 0),O(this,"timezone",void 0),O(this,"weekStart",void 0),O(this,"editable",void 0),O(this,"graphTooltip",void 0),O(this,"time",void 0),O(this,"liveNow",void 0),O(this,"originalTime",void 0),O(this,"timepicker",void 0),O(this,"templating",void 0),O(this,"originalTemplating",void 0),O(this,"annotations",void 0),O(this,"refresh",void 0),O(this,"snapshot",void 0),O(this,"schemaVersion",void 0),O(this,"version",void 0),O(this,"revision",void 0),O(this,"links",void 0),O(this,"gnetId",void 0),O(this,"panels",void 0),O(this,"panelInEdit",void 0),O(this,"panelInView",void 0),O(this,"fiscalYearStartMonth",void 0),O(this,"panelsAffectedByVariableChange",void 0),O(this,"appEventsSubscription",void 0),O(this,"lastRefresh",void 0),O(this,"iteration",void 0),O(this,"events",void 0),O(this,"getVariables",(()=>this.getVariablesFromState())),this.getVariablesFromState=v,e||(e={}),this.events=new c.EventBusSrv,this.id=e.id||null,this.uid=e.uid||null,this.revision=e.revision,this.title=null!==(a=e.title)&&void 0!==a?a:"No Title",this.autoUpdate=e.autoUpdate,this.description=e.description,this.tags=null!==(n=e.tags)&&void 0!==n?n:[],this.style=null!==(r=e.style)&&void 0!==r?r:"dark",this.timezone=null!==(i=e.timezone)&&void 0!==i?i:"",this.weekStart=null!==(l=e.weekStart)&&void 0!==l?l:"",this.editable=!1!==e.editable,this.graphTooltip=e.graphTooltip||0,this.time=null!==(d=e.time)&&void 0!==d?d:{from:"now-6h",to:"now"},this.timepicker=null!==(p=e.timepicker)&&void 0!==p?p:{},this.liveNow=Boolean(e.liveNow),this.templating=this.ensureListExist(e.templating),this.annotations=this.ensureListExist(e.annotations),this.refresh=e.refresh,this.snapshot=e.snapshot,this.schemaVersion=null!==(h=e.schemaVersion)&&void 0!==h?h:0,this.fiscalYearStartMonth=null!==(m=e.fiscalYearStartMonth)&&void 0!==m?m:0,this.version=null!==(g=e.version)&&void 0!==g?g:0,this.links=null!==(f=e.links)&&void 0!==f?f:[],this.gnetId=e.gnetId||null,this.panels=(0,s.map)(null!==(b=e.panels)&&void 0!==b?b:[],(e=>new o.r(e))),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(t),this.updateSchema(e),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new k.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(S.h$.subscribe(T.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(S.h$.subscribe(T.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(S.h$.subscribe(T.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){let e=!1;for(const t of this.annotations.list)if(1===t.builtIn){e=!0;break}e||this.annotations.list.unshift({datasource:"-- Grafana --",name:"Annotations & Alerts",type:"dashboard",iconColor:n.DEFAULT_ANNOTATION_COLOR,enable:!0,hide:!0,builtIn:1})}initMeta(e){(e=e||{}).canShare=!1!==e.canShare,e.canSave=!1!==e.canSave,e.canStar=!1!==e.canStar,e.canEdit=!1!==e.canEdit,e.showSettings=e.canEdit,e.canMakeEditable=e.canSave&&!this.editable,e.hasUnsavedFolderChange=!1,this.editable||(e.canEdit=!1,e.canDelete=!1,e.canSave=!1),this.meta=e}getSaveModelClone(e){const t=(0,s.defaults)(e||{},{saveVariables:!0,saveTimerange:!0});let a={};for(const e in this)!_.nonPersistedProperties[e]&&this.hasOwnProperty(e)&&(a[e]=(0,s.cloneDeep)(this[e]));return this.updateTemplatingSaveModelClone(a,t),t.saveTimerange||(a.time=this.originalTime),a.panels=this.getPanelSaveModels(),a=C(a),a.getVariables=()=>a.templating.list,a}updatePanels(e){const t=function(e,t){const a=[],n={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:a};let r=0;const i=new Map;for(let a of t){let{id:s}=a;s||(r||(r=w([e,t])),s=r++,a=Object.assign({},a,{id:s})),i.set(s,a)}for(const t of e){const e=i.get(t.id);if(!e){n.changed=!0,n.actions.remove.push(t.id),t.destroy();continue}if(i.delete(t.id),e===t){a.push(t),n.actions.noop.push(t.id);continue}if(t.type===e.type){const r=t.getSaveModel();let i=!0,o=!1;for(const[a,l]of Object.entries(e))if(!(0,s.isEqualWith)(l,r[a],y)){if(n.changed=!0,i=!1,!x.has(a)){o=!1;break}t[a]=l,o=!0}if(i){a.push(t),n.actions.noop.push(t.id);continue}if(o){a.push(t),n.actions.update.push(t.id);continue}}t.destroy();const r=new v.r(e);r.key=`${r.id}-update-${Date.now()}`,a.push(r),n.changed=!0,n.actions.replace.push(t.id)}for(const e of i.values())a.push(new v.r(e)),n.changed=!0,n.actions.add.push(e.id);return n}(this.panels,null!=e?e:[]);var a;t.changed&&(this.panels=null!==(a=t.panels)&&void 0!==a?a:[],this.sortPanelsByGridPos(),this.events.publish(new f._B));return t}getPanelSaveModels(){return this.panels.filter((e=>!!this.isSnapshotTruthy()||"add-panel"!==e.type&&(!e.repeatPanelId&&!e.repeatedByRow))).map((e=>this.panelInEdit&&this.panelInEdit.id===e.id?this.panelInEdit.getSaveModel():e.getSaveModel())).map((e=>(this.isSnapshotTruthy()||(delete e.scopedVars,"row"===e.type&&e.panels&&e.panels.length>0&&(e.panels=e.panels.filter((e=>!e.repeatPanelId)).map((e=>(delete e.scopedVars,e))))),e)))}updateTemplatingSaveModelClone(e,t){const a=this.originalTemplating,n=this.getVariablesFromState();if(e.templating={list:n.map((e=>p.z.get(e.type).getSaveModel(e,t.saveVariables)))},!t.saveVariables)for(let t=0;t<e.templating.list.length;t++){const n=e.templating.list[t],r=(0,s.find)(a,{name:n.name,type:n.type});r&&("adhoc"===n.type?e.templating.list[t].filters=r.filters:e.templating.list[t].current=r.current)}}timeRangeUpdated(e){this.events.publish(new j.TimeRangeUpdatedEvent(e)),(0,m.WI)((0,h.DU)(e))}startRefresh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{refreshAll:!0,panelIds:[]};if(this.events.publish(new j.RefreshEvent),this.lastRefresh=Date.now(),this.panelInEdit&&(e.refreshAll||e.panelIds.includes(this.panelInEdit.id)))this.panelInEdit.refresh();else for(const t of this.panels)this.otherPanelInFullscreen(t)||(e.refreshAll||e.panelIds.includes(t.id))&&t.refresh()}render(){this.events.publish(new f._z);for(const e of this.panels)e.render()}panelInitialized(e){const t=e.getQueryRunner().getLastResult();this.otherPanelInFullscreen(e)||t||e.refresh()}otherPanelInFullscreen(e){return(this.panelInEdit||this.panelInView)&&!(e.isViewing||e.isEditing)}initEditPanel(e){return(0,b.$t)().pauseAutoRefresh(),this.panelInEdit=e.getEditClone(),this.panelInEdit}initViewPanel(e){this.panelInView=e,e.setIsViewing(!0)}exitViewPanel(e){this.panelInView=void 0,e.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,b.$t)().resumeAutoRefresh(),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensureListExist(e){return e||(e={}),e.list||(e.list=[]),e}getNextPanelId(){let e=0;for(const t of this.panels)if(t.id>e&&(e=t.id),t.collapsed)for(const a of t.panels)a.id>e&&(e=a.id);return e+1}forEachPanel(e){for(let t=0;t<this.panels.length;t++)e(this.panels[t],t)}getPanelById(e){if(this.panelInEdit&&this.panelInEdit.id===e)return this.panelInEdit;for(const t of this.panels)if(t.id===e)return t;return null}canEditPanel(e){return Boolean(this.meta.canEdit&&e&&!e.repeatPanelId&&"row"!==e.type)}canEditPanelById(e){return this.canEditPanel(this.getPanelById(e))}addPanel(e){e.id=this.getNextPanelId(),this.panels.unshift(new o.r(e)),this.sortPanelsByGridPos(),this.events.publish(new f._B)}sortPanelsByGridPos(){this.panels.sort(((e,t)=>e.gridPos.y===t.gridPos.y?e.gridPos.x-t.gridPos.x:e.gridPos.y-t.gridPos.y))}clearUnsavedChanges(){for(const e of this.panels)e.configRev=0}hasUnsavedChanges(){for(const e of this.panels)if(e.hasChanged)return console.log("Panel has changed",e),!0;return!1}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;this.iteration=(this.iteration||(new Date).getTime())+1;const e=[];!function(e){for(const a of e){var t;if(delete a.scopedVars,null!==(t=a.panels)&&void 0!==t&&t.length)for(const e of a.panels)delete e.scopedVars}}(this.panels);for(let t=0;t<this.panels.length;t++){const a=this.panels[t];a.repeat&&!a.repeatedByRow||!a.repeatPanelId||a.repeatIteration===this.iteration||e.push(a)}(0,s.pull)(this.panels,...e),e.map((e=>e.destroy())),this.sortPanelsByGridPos()}processRepeats(){if(!this.isSnapshotTruthy()&&this.hasVariables()){this.cleanUpRepeats(),this.iteration=(this.iteration||(new Date).getTime())+1;for(let e=0;e<this.panels.length;e++){const t=this.panels[e];t.repeat&&this.repeatPanel(t,e)}this.sortPanelsByGridPos(),this.events.publish(new f._B)}}cleanUpRowRepeats(e){const t=[];for(let a=0;a<e.length;a++){const s=e[a];!s.repeat&&s.repeatPanelId&&t.push(s)}(0,s.pull)(e,...t),(0,s.pull)(this.panels,...t)}processRowRepeats(e){if(this.isSnapshotTruthy()||!this.hasVariables())return;let t=e.panels;if(!e.collapsed){const a=(0,s.findIndex)(this.panels,(t=>t.id===e.id));t=this.getRowPanels(a)}this.cleanUpRowRepeats(t);for(let e=0;e<t.length;e++){const a=t[e];if(a.repeat){const e=(0,s.findIndex)(this.panels,(e=>e.id===a.id));this.repeatPanel(a,e)}}}getPanelRepeatClone(e,t,a){var s;if(0===t)return e;const n=e.getSaveModel();n.id=this.getNextPanelId();const r=new o.r(n);return this.panels.splice(a+t,0,r),r.repeatIteration=this.iteration,r.repeatPanelId=e.id,r.repeat=void 0,(null===(s=this.panelInView)||void 0===s?void 0:s.id)===r.id&&(r.setIsViewing(!0),this.panelInView=r),r}getRowRepeatClone(e,t,a){if(0===t){if(!e.collapsed){const t=this.getRowPanels(a);e.panels=t}return e}const n=new o.r(e.getSaveModel());let r,i;return e.collapsed?(r=(0,s.cloneDeep)(e.panels),n.panels=r,i=a+t):(r=this.getRowPanels(a),n.panels=(0,s.map)(r,(e=>e.getSaveModel())),i=a+(r.length+1)*t),this.panels.splice(i,0,n),this.updateRepeatedPanelIds(n),n}repeatPanel(e,t){const a=this.getPanelRepeatVariable(e);if(!a)return;if("row"===e.type)return void this.repeatRow(e,t,a);const s=this.getSelectedVariableOptions(a),n=e.maxPerRow||4;let i=0,o=e.gridPos.y;for(let l=0;l<s.length;l++){const c=s[l];let d;d=this.getPanelRepeatClone(e,l,t),d.scopedVars=d.scopedVars||{},d.scopedVars[a.name]=c,e.repeatDirection===r.OA?(l>0&&(o+=d.gridPos.h),d.gridPos.y=o):(d.gridPos.w=Math.max(r.cz/s.length,r.cz/n),d.gridPos.x=i,d.gridPos.y=o,i+=d.gridPos.w,i+d.gridPos.w>r.cz&&(i=0,o+=d.gridPos.h))}const l=o-e.gridPos.y;if(l>0){for(let a=t+s.length;a<this.panels.length;a++)c=e,d=this.panels[a],c.repeatDirection!==r.yM&&d.gridPos.x>=c.gridPos.x+c.gridPos.w&&d.gridPos.y===c.gridPos.y||(this.panels[a].gridPos.y+=l)}var c,d}repeatRow(e,t,a){const n=this.getSelectedVariableOptions(a);let r=e.gridPos.y;function i(e,t){e.scopedVars=e.scopedVars||{},e.scopedVars[a.name]=t}for(let a=0;a<n.length;a++){const l=n[a],c=this.getRowRepeatClone(e,a,t);i(c,l);const d=this.getRowHeight(c),u=c.panels||[];let p;if(e.collapsed)(0,s.each)(u,((e,t)=>{i(e,l),a>0&&this.updateRepeatedPanelIds(e,!0)})),c.gridPos.y+=a,r+=a,p=t+a+1;else{const e=t+(u.length+1)*a+1;(0,s.each)(u,((t,s)=>{if(i(t,l),a>0){const n=new o.r(t);this.updateRepeatedPanelIds(n,!0),n.gridPos.y+=d*a,this.panels.splice(e+s,0,n)}})),c.panels=[],c.gridPos.y+=d*a,r+=d,p=e+u.length}if(n.length>1)for(let e=p;e<this.panels.length;e++)this.panels[e].gridPos.y+=r}}updateRepeatedPanelIds(e,t){return e.repeatPanelId=e.id,e.id=this.getNextPanelId(),e.repeatIteration=this.iteration,t?e.repeatedByRow=!0:e.repeat=void 0,e}getSelectedVariableOptions(e){let t;return t=(0,g.HY)(e)?e.options.slice(1,e.options.length):(0,s.filter)(e.options,{selected:!0}),t}getRowHeight(e){if(!e.panels||0===e.panels.length)return 0;const t=e.gridPos.y,a=(0,s.map)(e.panels,"gridPos"),n=(0,s.maxBy)(a,(e=>e.y+e.h));return n.y+n.h-t}removePanel(e){this.panels=this.panels.filter((t=>t!==e)),this.events.publish(new f._B)}removeRow(e,t){(!t&&e.collapsed||t&&!e.collapsed)&&this.toggleRow(e),this.removePanel(e)}expandRows(){for(let e=0;e<this.panels.length;e++){const t=this.panels[e];"row"===t.type&&(t.collapsed&&this.toggleRow(t))}}collapseRows(){for(let e=0;e<this.panels.length;e++){const t=this.panels[e];"row"===t.type&&(t.collapsed||this.toggleRow(t))}}isSubMenuVisible(){return this.links.length>0||(!!this.getVariables().find((e=>2!==e.hide))||!!this.annotations.list.find((e=>!0!==e.hide)))}getPanelInfoById(e){for(let t=0;t<this.panels.length;t++)if(this.panels[t].id===e)return{panel:this.panels[t],index:t};return null}duplicatePanel(e){const t=e.getSaveModel();return t.id=this.getNextPanelId(),delete t.repeat,delete t.repeatIteration,delete t.repeatPanelId,delete t.scopedVars,t.alert&&delete t.thresholds,delete t.alert,e.gridPos.x+2*e.gridPos.w<=r.cz?t.gridPos.x+=e.gridPos.w:t.gridPos.y+=e.gridPos.h,this.addPanel(t),t}formatDate(e,t){return(0,c.dateTimeFormat)(e,{format:t,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const e of this.panels)e.destroy()}toggleRow(e){const t=(0,s.indexOf)(this.panels,e);if(e.collapsed){e.collapsed=!1;const r=(0,s.some)(e.panels,(e=>e.repeat));if(e.panels.length>0){var a;const s=(null!==(a=e.panels[0].gridPos.y)&&void 0!==a?a:e.gridPos.y)-(e.gridPos.y+e.gridPos.h);let i=t+1,l=e.gridPos.y;for(const t of e.panels){var n;null!==(n=t.gridPos.y)&&void 0!==n||(t.gridPos.y=e.gridPos.y),t.gridPos.y-=s,this.panels.splice(i,0,new o.r(t)),i+=1,l=Math.max(l,t.gridPos.y+t.gridPos.h)}const c=l-e.gridPos.y-1;for(let e=i;e<this.panels.length;e++)this.panels[e].gridPos.y+=c;e.panels=[],r&&this.processRowRepeats(e)}return this.sortPanelsByGridPos(),void this.events.publish(new f._B)}const r=this.getRowPanels(t);(0,s.pull)(this.panels,...r),e.panels=(0,s.map)(r,(e=>e.getSaveModel())),e.collapsed=!0,this.events.publish(new f._B)}getRowPanels(e){const t=[];for(let a=e+1;a<this.panels.length;a++){const e=this.panels[a];if("row"===e.type)break;t.push(e)}return t}on(e,t){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(e,t)}off(e,t){console.log("DashboardModel.off is deprecated"),this.events.off(e,t)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return 1===this.graphTooltip}getRelativeTime(e){return(0,c.dateTimeFormatTimeAgo)(e,{timeZone:this.getTimezone()})}isSnapshot(){return void 0!==this.snapshot}getTimezone(){var e;return this.timezone?this.timezone:null===i.Vt||void 0===i.Vt||null===(e=i.Vt.user)||void 0===e?void 0:e.timezone}updateSchema(e){const t=new l.o(this);t.updateSchema(e),t.syncQueryDataSources()}resetOriginalTime(){this.originalTime=(0,s.cloneDeep)(this.time)}hasTimeChanged(){return!(0,s.isEqual)(this.time,this.originalTime)}resetOriginalVariables(){this.originalTemplating=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.cloneVariablesFrom(this.templating.list):this.cloneVariablesFrom(this.getVariablesFromState())}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState())}autoFitPanels(e,t){const a=Math.max(...this.panels.map((e=>e.gridPos.h+e.gridPos.y)));let s=e-55-20;this.meta.submenuEnabled&&!t&&(s-=50),t&&t!==d.UX.TV&&(s+=55);const n=a/Math.floor(s/(r.K3+r.hD));this.panels.forEach(((e,t)=>{e.gridPos.y=Math.round(e.gridPos.y/n)||1,e.gridPos.h=Math.round(e.gridPos.h/n)||1}))}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(d.RW.nq)}getPanelByUrlId(e){const t=parseInt(null!=e?e:"0",10);for(const e of this.panels)if(e.collapsed)for(const a of e.panels)if(a.id===t){this.toggleRow(e);break}return this.getPanelById(t)}toggleLegendsForAll(){const e=this.panels.filter((e=>void 0!==e.legend&&null!==e.legend)),t=e.filter((e=>e.legend.show)).length,a=t>=e.length-t;for(const t of e)t.legend.show=!a,t.render()}canAddAnnotations(){return this.meta.canEdit||this.meta.canMakeEditable}shouldUpdateDashboardPanelFromJSON(e,t){!(0,s.isEqual)(null==e?void 0:e.gridPos,null==t?void 0:t.gridPos)&&this.events.publish(new f._B)}getPanelRepeatVariable(e){return this.getVariablesFromState().find((t=>t.name===e.repeat))}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState().length>0}hasVariablesChanged(e,t){if(e.length!==t.length)return!1;const a=(0,s.map)(t,(e=>({name:e.name,type:e.type,current:(0,s.cloneDeep)(e.current),filters:(0,s.cloneDeep)(e.filters)})));return!(0,s.isEqual)(a,e)}cloneVariablesFrom(e){return e.map((e=>({name:e.name,type:e.type,current:(0,s.cloneDeep)(e.current),filters:(0,s.cloneDeep)(e.filters)})))}variablesTimeRangeProcessDoneHandler(e){const t=e.payload.variableIds.length>0;this.variablesChangedHandler(new T.x9({panelIds:[],refreshAll:!0}),t)}variablesChangedHandler(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.processRepeats(),e.payload.refreshAll||(0,b.$t)().isRefreshOutsideThreshold(this.lastRefresh)?this.startRefresh({refreshAll:!0,panelIds:[]}):((this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=e.payload.panelIds.filter((e=>{var t,a,s;return e!==(null!==(t=null===(a=this.panelInEdit)||void 0===a?void 0:a.id)&&void 0!==t?t:null===(s=this.panelInView)||void 0===s?void 0:s.id)}))),this.startRefresh(e.payload))}variablesChangedInUrlHandler(e){this.templateVariableValueUpdated(),this.startRefresh(e.payload)}}O(_,"nonPersistedProperties",{events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0})},"./public/app/features/dashboard/state/PanelModel.ts":(e,t,a)=>{"use strict";a.d(t,{r:()=>v});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("../../opt/drone/yarncache/uuid-npm-8.3.2-eca0baba53-5575a8a75c.zip/node_modules/uuid/dist/esm-browser/v4.js"),r=a("./packages/grafana-runtime/src/index.ts"),i=a("./public/app/core/utils/query.ts"),o=a("./packages/grafana-data/src/index.ts"),l=a("./public/app/core/config.ts"),c=a("./public/app/features/query/state/PanelQueryRunner.ts"),d=a("./public/app/types/events.ts"),u=a("./public/app/features/dashboard/services/TimeSrv.ts"),p=a("./public/app/features/variables/getAllVariableValuesForUrl.ts"),h=a("./public/app/features/dashboard/state/getPanelOptionsWithDefaults.ts");function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,getDisplayTitle:!0,dataSupport:!0,key:!0},f={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatIteration:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},b={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},datasource:null,title:""};class v{constructor(e){m(this,"id",void 0),m(this,"gridPos",void 0),m(this,"type",void 0),m(this,"title",void 0),m(this,"alert",void 0),m(this,"scopedVars",void 0),m(this,"repeat",void 0),m(this,"repeatIteration",void 0),m(this,"repeatPanelId",void 0),m(this,"repeatDirection",void 0),m(this,"repeatedByRow",void 0),m(this,"maxPerRow",void 0),m(this,"collapsed",void 0),m(this,"panels",void 0),m(this,"transformations",void 0),m(this,"datasource",null),m(this,"thresholds",void 0),m(this,"pluginVersion",void 0),m(this,"snapshotData",void 0),m(this,"timeFrom",void 0),m(this,"timeShift",void 0),m(this,"hideTimeOverride",void 0),m(this,"maxDataPoints",void 0),m(this,"interval",void 0),m(this,"description",void 0),m(this,"links",void 0),m(this,"libraryPanel",void 0),m(this,"isViewing",!1),m(this,"isEditing",!1),m(this,"isInView",!1),m(this,"configRev",0),m(this,"hasRefreshed",void 0),m(this,"cacheTimeout",void 0),m(this,"cachedPluginOptions",{}),m(this,"legend",void 0),m(this,"plugin",void 0),m(this,"key",void 0),m(this,"events",void 0),m(this,"queryRunner",void 0),this.events=new o.EventBusSrv,this.restoreModel(e),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,n.Z)()}restoreModel(e){for(const t in this)!g[t]&&this.hasOwnProperty(t)&&(e[t]||"function"!=typeof this[t]&&"symbol"!=typeof this[t]&&delete this[t]);for(const t in e)this[t]=e[t];(0,s.defaultsDeep)(this,(0,s.cloneDeep)(b)),this.ensureQueryIds()}generateNewKey(){this.key=(0,n.Z)()}ensureQueryIds(){if(this.targets&&(0,s.isArray)(this.targets))for(const e of this.targets)e.refId||(e.refId=(0,i.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(e){this.options=e,this.configRev++,this.events.publish(new d.Wj),this.render()}updateFieldConfig(e){this.fieldConfig=e,this.configRev++,this.events.publish(new d.Wj),this.resendLastResult(),this.render()}getSaveModel(){const e={};for(const t in this)!g[t]&&this.hasOwnProperty(t)&&((0,s.isEqual)(this[t],b[t])||(e[t]=(0,s.cloneDeep)(this[t])));return void 0===e.datasource&&(e.datasource=null),e}setIsViewing(e){this.isViewing=e}updateGridPos(e){this.gridPos.x=e.x,this.gridPos.y=e.y,this.gridPos.w=e.w,this.gridPos.h=e.h}runAllPanelQueries(e,t,a,s){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardId:e,timezone:t,timeRange:a.timeRange,timeInfo:a.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(s),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,transformations:this.transformations})}refresh(){this.hasRefreshed=!0,this.events.publish(new r.RefreshEvent)}render(){this.hasRefreshed?this.events.publish(new d._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce(((e,t)=>g[t]||f[t]?e:Object.assign({},e,{[t]:this[t]})),{})}restorePanelOptions(e){const t=this.cachedPluginOptions[e];t&&(Object.keys(t.properties).map((e=>{this[e]=t.properties[e]})),this.fieldConfig=(0,h.__)(this.fieldConfig,t.fieldConfig))}applyPluginOptionDefaults(e,t){const a=(0,h.d4)({plugin:e,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:t});this.fieldConfig=a.fieldConfig,this.options=a.options}pluginLoaded(e){this.plugin=e;const t=x(e);e.onPanelMigration&&t!==this.pluginVersion&&(this.options=e.onPanelMigration(this),this.pluginVersion=t),this.applyPluginOptionDefaults(e,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const e of(0,s.keys)(this))f[e]||delete this[e];this.options={},this.fieldConfig={defaults:Object.assign({},this.fieldConfig.defaults,{custom:{}}),overrides:(0,h.aS)(this.fieldConfig.overrides,h._k)}}changePlugin(e){const t=e.meta.id,a=this.getOptionsToRemember(),s=this.fieldConfig,n=this.type,r=this.isAngularPlugin();if(this.cachedPluginOptions[n]={properties:a,fieldConfig:s},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(t),e.onPanelTypeChanged){const t=r?{angular:a}:a.options;Object.assign(this.options,e.onPanelTypeChanged(this,n,t,s))}this.type=t,this.plugin=e,this.configRev++,this.applyPluginOptionDefaults(e,!0),e.onPanelMigration&&(this.pluginVersion=x(e))}updateQueries(e){var t,a,s;const{dataSource:n}=e;this.datasource=n.default?null:{uid:n.uid,type:n.type},this.cacheTimeout=e.cacheTimeout,this.timeFrom=null===(t=e.timeRange)||void 0===t?void 0:t.from,this.timeShift=null===(a=e.timeRange)||void 0===a?void 0:a.shift,this.hideTimeOverride=null===(s=e.timeRange)||void 0===s?void 0:s.hide,this.interval=e.minInterval,this.maxDataPoints=e.maxDataPoints,this.targets=e.queries,this.configRev++,this.events.publish(new d.pO)}addQuery(e){(e=e||{refId:"A"}).refId=(0,i.Hs)(this.targets),this.targets.push(e),this.configRev++}changeQuery(e,t){e.refId=this.targets[t].refId,this.configRev++,this.targets=this.targets.map(((a,s)=>s===t?e:a))}getEditClone(){const e=this.getSaveModel(),t=new v(e);t.isEditing=!0;const a=this.getQueryRunner();return t.getQueryRunner().useLastResultFrom(a),t}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:l.ZP.theme2}}getDataSupport(){var e,t;return null!==(e=null===(t=this.plugin)||void 0===t?void 0:t.dataSupport)&&void 0!==e?e:{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new c.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return void 0!==(this.plugin&&this.plugin.angularPanelCtrl)}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(e){this.transformations=e,this.resendLastResult(),this.configRev++,this.events.publish(new d.Xw)}setProperty(e,t){this[e]=t,this.configRev++,"repeat"===e&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(e,t,a){const s=this.getQueryRunner().getLastRequest(),n=Object.assign({},this.scopedVars,null==s?void 0:s.scopedVars,t),i=(0,p.c)(n),l=o.urlUtil.toUrlParams(i),c=o.urlUtil.toUrlParams((0,u.$t)().timeRangeForUrl());return n[o.DataLinkBuiltInVars.keepTime]={text:c,value:c},n[o.DataLinkBuiltInVars.includeVars]={text:l,value:l},(0,r.getTemplateSrv)().replace(e,n,a)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}}function x(e){return e&&e.meta.info.version?e.meta.info.version:l.ZP.buildInfo.version}},"./public/app/features/dashboard/state/actions.ts":(e,t,a)=>{"use strict";a.d(t,{qm:()=>u,RF:()=>h,Qk:()=>m,Yq:()=>g,$j:()=>f,fG:()=>b,lw:()=>v,tM:()=>x,f4:()=>y});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("./public/app/core/copy/appNotification.ts"),r=a("./public/app/features/plugins/admin/state/actions.ts"),i=a("./public/app/features/dashboard/state/reducers.ts"),o=a("./public/app/core/actions/index.ts"),l=a("./public/app/features/profile/state/reducers.ts"),c=a("./public/app/features/variables/state/actions.ts"),d=a("./public/app/features/dashboard/services/TimeSrv.ts");function u(e){return async t=>{const a=await(0,s.getBackendSrv)().get(`/api/dashboards/id/${e}/permissions`);t((0,i.O0)(a))}}function p(e){return{userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}}function h(e,t,a){return async(n,r)=>{const{dashboard:i}=r(),o=[];for(const e of i.permissions){if(e.inherited)continue;const s=p(e);t===e&&(s.permission=a),o.push(s)}await(0,s.getBackendSrv)().post(`/api/dashboards/id/${e}/permissions`,{items:o}),await n(u(e))}}function m(e,t){return async(a,n)=>{const r=n().dashboard,i=[];for(const e of r.permissions)e.inherited||e===t||i.push(p(e));await(0,s.getBackendSrv)().post(`/api/dashboards/id/${e}/permissions`,{items:i}),await a(u(e))}}function g(e,t){return async(a,n)=>{const{dashboard:r}=n(),i=[];for(const e of r.permissions)e.inherited||i.push(p(e));i.push({userId:t.userId,teamId:t.teamId,role:t.role,permission:t.permission}),await(0,s.getBackendSrv)().post(`/api/dashboards/id/${e}/permissions`,{items:i}),await a(u(e))}}function f(e,t){return async a=>{await(0,s.getBackendSrv)().post("/api/dashboards/import",e),a((0,o.$l)((0,n.AT)("Dashboard Imported",t))),a((0,r.m3)())}}function b(e){return async t=>{await(0,s.getBackendSrv)().delete(`/api/dashboards/uid/${e}`),t((0,r.m3)())}}const v=()=>(e,t)=>{const a=t().dashboard.getModel();a&&a.destroy(),(0,d.$t)().stopAutoRefresh(),e((0,i.sG)()),e((0,c.wX)())},x=e=>t=>{t((0,l.YT)(e)),(0,d.$t)().refreshDashboard()},y=e=>t=>{t((0,l.zW)(e)),(0,d.$t)().refreshDashboard()}},"./public/app/features/dashboard/state/getPanelOptionsWithDefaults.ts":(e,t,a)=>{"use strict";a.d(t,{d4:()=>r,aS:()=>i,__:()=>c,_k:()=>u});var s=a("./packages/grafana-data/src/index.ts"),n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function r(e){let{plugin:t,currentOptions:a,currentFieldConfig:r,isAfterPluginChange:c}=e;const d=(0,n.mergeWith)({},t.defaults,a||{},((e,t)=>{if((0,n.isArray)(t))return t})),u=function(e,t){var a;const s=t.fieldConfigDefaults,r={defaults:(0,n.mergeWith)({},s.defaults,e?e.defaults:{},((e,t)=>{if((0,n.isArray)(t))return t})),overrides:null!==(a=null==e?void 0:e.overrides)&&void 0!==a?a:[]};o(r.defaults,"",t.fieldConfigRegistry),r.defaults.thresholds&&l(r.defaults.thresholds);r.overrides=i(r.overrides,(e=>void 0!==t.fieldConfigRegistry.getIfExists(e.id)));for(const e of r.overrides)for(const t of e.properties)"thresholds"===t.id&&l(t.value);return r}(r,t),p=function(e,t,a){if(!a)return t;const n=e.fieldConfigRegistry.getIfExists(s.FieldConfigProperty.Color);if(n&&n.settings){var r;const e=n.settings,a=s.fieldColorModeRegistry.getIfExists(null===(r=t.defaults.color)||void 0===r?void 0:r.mode);if(!e.byValueSupport&&(!a||a.isByValue))return t.defaults.color={mode:s.FieldColorModeId.PaletteClassic},t;if(e.byValueSupport&&e.preferThresholdsMode&&(null==a?void 0:a.id)!==s.FieldColorModeId.Fixed&&(!a||!a.isByValue))return t.defaults.color={mode:s.FieldColorModeId.Thresholds},t;if(e.bySeriesSupport&&null!=a&&a.isByValue)return t.defaults.color={mode:s.FieldColorModeId.PaletteClassic},t}return t}(t,u,c);return{options:d,fieldConfig:p}}function i(e,t){return e.map((e=>{const a=e.properties.filter(t);return Object.assign({},e,{properties:a})})).filter((e=>e.properties.length>0))}function o(e,t,a){let s=!1;for(const r of Object.keys(e)){const i=e[r],l=`${t}${r}`,c=!!a.getIfExists(l);if(c)s=!0;else if((0,n.isArray)(i)||!(0,n.isObject)(i))c||(0,n.unset)(e,r);else{o(i,`${l}.`,a)||(0,n.unset)(e,r)}}return s}function l(e){e.mode||(e.mode=s.ThresholdsMode.Absolute),e.steps?e.steps.length&&(e.steps[0].value=-1/0):e.steps=[]}function c(e,t){const a={defaults:Object.assign({},e.defaults,{custom:t.defaults.custom}),overrides:[...e.overrides]};for(const e of t.overrides)for(const t of e.properties)if(d(t)){const s=a.overrides.find((t=>(0,n.isEqual)(t.matcher,e.matcher)));s?s!==e&&s.properties.push(t):a.overrides.push(e)}return a}function d(e){return e.id.startsWith("custom.")}function u(e){return!d(e)}},"./public/app/features/dashboard/state/index.ts":(e,t,a)=>{"use strict";a.d(t,{f:()=>s.f,r:()=>n.r});var s=a("./public/app/features/dashboard/state/DashboardModel.ts"),n=a("./public/app/features/dashboard/state/PanelModel.ts")},"./public/app/features/dashboard/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{O0:()=>c,sf:()=>d,jA:()=>u,rq:()=>p,dS:()=>h,Nv:()=>m,sG:()=>g,gq:()=>f,yD:()=>b,tq:()=>v,ZP:()=>x});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./public/app/types/index.ts"),r=a("./public/app/core/utils/acl.ts"),i=a("./public/app/features/dashboard/state/DashboardModel.ts");const o={initPhase:n.bG.NotStarted,isInitSlow:!1,getModel:()=>null,permissions:[],modifiedQueries:null,initError:null},l=(0,s.oM)({name:"dashboard",initialState:o,reducers:{loadDashboardPermissions:(e,t)=>{e.permissions=(0,r.A)(t.payload)},dashboardInitFetching:e=>{e.initPhase=n.bG.Fetching},dashboardInitServices:e=>{e.initPhase=n.bG.Services},dashboardInitSlow:e=>{e.isInitSlow=!0},dashboardInitCompleted:(e,t)=>{e.getModel=()=>t.payload,e.initPhase=n.bG.Completed,e.isInitSlow=!1},dashboardInitFailed:(e,t)=>{e.initPhase=n.bG.Failed,e.initError=t.payload,e.getModel=()=>new i.f({title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:e=>{e.initPhase=n.bG.NotStarted,e.isInitSlow=!1,e.initError=null,e.getModel=()=>null},setDashboardQueriesToUpdateOnLoad:(e,t)=>{e.modifiedQueries=t.payload},clearDashboardQueriesToUpdateOnLoad:e=>{e.modifiedQueries=null},addPanel:(e,t)=>{}}}),{loadDashboardPermissions:c,dashboardInitFetching:d,dashboardInitFailed:u,dashboardInitSlow:p,dashboardInitCompleted:h,dashboardInitServices:m,cleanUpDashboard:g,setDashboardQueriesToUpdateOnLoad:f,clearDashboardQueriesToUpdateOnLoad:b,addPanel:v}=l.actions,x={dashboard:l.reducer}},"./public/app/features/dashboard/utils/loadSnapshotData.ts":(e,t,a)=>{"use strict";a.d(t,{y:()=>c});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/core/config.ts"),r=a("./public/app/features/query/state/runRequest.ts"),i=a("./public/app/features/query/state/DashboardQueryRunner/SnapshotWorker.ts"),o=a("./public/app/features/dashboard/utils/panel.ts"),l=a("./public/app/features/dashboard/services/TimeSrv.ts");function c(e,t){const a=(0,r.F9)(e.snapshotData),c=new i.g,d={dashboard:t,range:(0,s.getDefaultTimeRange)()},u=c.canWork(d)?c.getAnnotationsInSnapshot(t,e.id):[],p=[new s.ArrayDataFrame(u)];return{timeRange:(0,o.W1)(e,(0,l.$t)().timeRange()).timeRange,state:s.LoadingState.Done,series:(0,s.applyFieldOverrides)({data:a,fieldConfig:{defaults:{},overrides:[]},replaceVariables:e.replaceVariables,fieldConfigRegistry:e.plugin.fieldConfigRegistry,theme:n.vc.theme2,timeZone:t.getTimezone()}),annotations:p}}},"./public/app/features/dashboard/utils/panel.ts":(e,t,a)=>{"use strict";a.d(t,{WJ:()=>g,jN:()=>f,bY:()=>b,Po:()=>v,Kq:()=>x,oe:()=>y,W1:()=>w});var s=a("./public/app/core/store.ts"),n=a("./public/app/features/dashboard/state/PanelModel.ts"),r=a("./packages/grafana-data/src/index.ts"),i=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),o=a("./public/app/core/app_events.ts"),l=a("./public/app/core/config.ts"),c=a("./packages/grafana-runtime/src/index.ts"),d=a("./public/app/core/constants.ts"),u=a("./public/app/features/dashboard/components/ShareModal/index.ts"),p=a("./public/app/types/events.ts"),h=a("./public/app/features/library-panels/components/AddLibraryPanelModal/AddLibraryPanelModal.tsx"),m=a("./public/app/features/library-panels/components/UnlinkModal/UnlinkModal.tsx");const g=(e,t,a)=>{if(!1===a)e.removePanel(t);else{const a=t.alert&&!l.ZP.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,s=t.alert?"YES":void 0;o.Z.publish(new p.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:a,icon:"trash-alt",confirmText:s,yesText:"Remove",onConfirm:()=>g(e,t,!1)}))}},f=(e,t)=>{e.duplicatePanel(t)},b=e=>{let t=e;e instanceof n.r&&(t=e.getSaveModel()),s.Z.set(d.zF,JSON.stringify(t)),o.Z.emit(r.AppEvents.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},v=(e,t)=>{o.Z.publish(new p.Dn({component:u.V8,props:{dashboard:e,panel:t}}))},x=(e,t)=>{o.Z.publish(new p.Dn({component:h.c,props:{panel:t,initialFolderId:e.meta.folderId,isOpen:!0}}))},y=e=>{o.Z.publish(new p.Dn({component:m.i,props:{onConfirm:()=>{delete e.libraryPanel,e.render()},isOpen:!0}}))};function w(e,t){const a={timeInfo:"",timeRange:t};if(e.timeFrom){const s=(0,c.getTemplateSrv)().replace(e.timeFrom,e.scopedVars),n=r.rangeUtil.describeTextRange(s);if(n.invalid)return a.timeInfo="invalid time override",a;if((0,i.isString)(t.raw.from)){const e=r.dateMath.parse(n.from);a.timeInfo=n.display,a.timeRange={from:e,to:r.dateMath.parse(n.to),raw:{from:n.from,to:n.to}}}}if(e.timeShift){const t=(0,c.getTemplateSrv)().replace(e.timeShift,e.scopedVars);if(r.rangeUtil.describeTextRange(t).invalid)return a.timeInfo="invalid timeshift",a;const s="-"+t;a.timeInfo+=" timeshift "+s;const n=r.dateMath.parseDateMath(s,a.timeRange.from,!1),i=r.dateMath.parseDateMath(s,a.timeRange.to,!0);a.timeRange={from:n,to:i,raw:{from:n,to:i}}}return e.hideTimeOverride&&(a.timeInfo=""),a}},"./public/app/features/datasources/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{rl:()=>r,be:()=>i,jS:()=>o,Ww:()=>l,wZ:()=>c,zT:()=>d,Dy:()=>u,Ht:()=>p,BX:()=>h,yr:()=>m,iZ:()=>f,CT:()=>b,j_:()=>v,ng:()=>x,Aq:()=>y,ZP:()=>w});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");const n={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:a("./packages/grafana-data/src/index.ts").LayoutModes.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",hasFetched:!1,isLoadingDataSources:!1,dataSourceMeta:{}},r=(0,s.PH)("dataSources/dataSourceLoaded"),i=(0,s.PH)("dataSources/dataSourcesLoaded"),o=(0,s.PH)("dataSources/dataSourceMetaLoaded"),l=(0,s.PH)("dataSources/dataSourcePluginsLoad"),c=(0,s.PH)("dataSources/dataSourcePluginsLoaded"),d=(0,s.PH)("dataSources/setDataSourcesSearchQuery"),u=(0,s.PH)("dataSources/setDataSourcesLayoutMode"),p=(0,s.PH)("dataSources/setDataSourceTypeSearchQuery"),h=(0,s.PH)("dataSources/setDataSourceName"),m=(0,s.PH)("dataSources/setIsDefault"),g={testingStatus:{},loadError:null,loading:!0,plugin:null},f=(0,s.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),b=(0,s.PH)("dataSourceSettings/initDataSourceSettingsFailed"),v=(0,s.PH)("dataSourceSettings/testDataSourceStarting"),x=(0,s.PH)("dataSourceSettings/testDataSourceSucceeded"),y=(0,s.PH)("dataSourceSettings/testDataSourceFailed"),w={dataSources:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1?arguments[1]:void 0;return i.match(t)?Object.assign({},e,{hasFetched:!0,dataSources:t.payload,dataSourcesCount:t.payload.length}):r.match(t)?Object.assign({},e,{dataSource:t.payload}):d.match(t)?Object.assign({},e,{searchQuery:t.payload}):u.match(t)?Object.assign({},e,{layoutMode:t.payload}):l.match(t)?Object.assign({},e,{plugins:[],isLoadingDataSources:!0}):c.match(t)?Object.assign({},e,{plugins:t.payload.plugins,categories:t.payload.categories,isLoadingDataSources:!1}):p.match(t)?Object.assign({},e,{dataSourceTypeSearchQuery:t.payload}):o.match(t)?Object.assign({},e,{dataSourceMeta:t.payload}):h.match(t)?Object.assign({},e,{dataSource:Object.assign({},e.dataSource,{name:t.payload})}):m.match(t)?Object.assign({},e,{dataSource:Object.assign({},e.dataSource,{isDefault:t.payload})}):e},dataSourceSettings:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;return f.match(t)?Object.assign({},e,{plugin:t.payload,loadError:null,loading:!1}):b.match(t)?Object.assign({},e,{plugin:null,loadError:t.payload.message,loading:!1}):v.match(t)?Object.assign({},e,{testingStatus:{message:"Testing...",status:"info"}}):x.match(t)?Object.assign({},e,{testingStatus:{status:null===(a=t.payload)||void 0===a?void 0:a.status,message:null===(s=t.payload)||void 0===s?void 0:s.message,details:null===(n=t.payload)||void 0===n?void 0:n.details}}):y.match(t)?Object.assign({},e,{testingStatus:{status:"error",message:null===(r=t.payload)||void 0===r?void 0:r.message,details:null===(i=t.payload)||void 0===i?void 0:i.details}}):e;var a,s,n,r,i}}},"./public/app/features/dimensions/editors/ColorDimensionEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{L:()=>c});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./packages/grafana-ui/src/components/MatchersUI/utils.ts"),i=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l={label:"Fixed color",value:"_____fixed_____"},c=e=>{var t;const{value:a,context:i,onChange:c}=e,u="dark-green",p=(0,n.useStyles2)(d),h=null==a?void 0:a.field,m=Boolean(!h),g=(0,r.IX)(i.data),f=(0,r.nw)(g,h,l),b=(0,s.useCallback)((e=>{const t=e.value;if(t&&t!==l.value)c(Object.assign({},a,{field:t}));else{var s;const e=null!==(s=a.fixed)&&void 0!==s?s:u;c(Object.assign({},a,{field:void 0,fixed:e}))}}),[c,a]),v=(0,s.useCallback)((e=>{c({field:void 0,fixed:null!=e?e:u})}),[c]),x=m?l:f.find((e=>e.value===h));return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:p.container,children:[(0,o.jsx)(n.Select,{menuShouldPortal:!0,value:x,options:f,onChange:b,noOptionsMessage:"No fields found"}),m&&(0,o.jsx)("div",{className:p.picker,children:(0,o.jsx)(n.ColorPicker,{color:null!==(t=null==a?void 0:a.fixed)&&void 0!==t?t:u,onChange:v,enableNamedColors:!0})})]})})},d=e=>({container:i.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:i.css`
    padding-left: 8px;
  `})},"./public/app/features/dimensions/editors/NumberInput.tsx":(e,t,a)=>{"use strict";a.d(t,{Y:()=>o});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o extends s.PureComponent{constructor(){super(...arguments),i(this,"state",{text:"",inputCorrected:!1}),i(this,"onBlur",(e=>{let t;e.currentTarget.value&&!isNaN(e.currentTarget.valueAsNumber)&&(t=e.currentTarget.valueAsNumber),this.props.onChange(t),this.setState(Object.assign({},this.state,{inputCorrected:!1}))})),i(this,"onChange",(e=>{let t,a=!1;const s=this.props.min,n=this.props.max,r=e.currentTarget.valueAsNumber;Number.isNaN(r)||(null!=s&&r<s?(t=s.toString(),a=!0):null!=n&&r>n?(t=n.toString(),a=!0):t=e.currentTarget.value),this.setState(Object.assign({},this.state,{text:t||"",inputCorrected:a}))})),i(this,"onKeyPress",(e=>{"Enter"===e.key&&this.onBlur(e)}))}componentDidMount(){this.setState(Object.assign({},this.state,{text:isNaN(this.props.value)?"":`${this.props.value}`}))}componentDidUpdate(e){this.props.value!==e.value&&this.setState(Object.assign({},this.state,{text:isNaN(this.props.value)?"":`${this.props.value}`}))}render(){const{placeholder:e}=this.props,{text:t,inputCorrected:a}=this.state;return(0,r.jsx)(n.Field,{invalid:a,error:a?"Cannot go beyond range":"",children:(0,r.jsx)(n.Input,{type:"number",min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:t,onChange:this.onChange,onBlur:this.onBlur,onKeyPress:this.onKeyPress,placeholder:e})})}}},"./public/app/features/dimensions/editors/TextDimensionEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{$:()=>u});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/features/dimensions/types.ts"),i=a("./packages/grafana-ui/src/components/MatchersUI/FieldNamePicker.tsx"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=[{label:"Fixed",value:r.xy.Fixed,description:"Fixed value"},{label:"Field",value:r.xy.Field,description:"Display field value"}],c={settings:{}},d={settings:{}},u=e=>{var t,a;const{value:u,context:p,onChange:h}=e,m=(0,s.useCallback)((e=>{h(Object.assign({},u,{mode:e}))}),[h,u]),g=(0,s.useCallback)((e=>{h(Object.assign({},u,{field:e}))}),[h,u]),f=(0,s.useCallback)((e=>{h(Object.assign({},u,{fixed:e}))}),[h,u]),b=null!==(t=null==u?void 0:u.mode)&&void 0!==t?t:r.xy.Fixed;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.InlineFieldRow,{children:(0,o.jsx)(n.InlineField,{label:"Source",labelWidth:9,grow:!0,children:(0,o.jsx)(n.RadioButtonGroup,{value:b,options:l,onChange:m,fullWidth:!0})})}),b!==r.xy.Fixed&&(0,o.jsx)(n.InlineFieldRow,{children:(0,o.jsx)(n.InlineField,{label:"Field",labelWidth:9,grow:!0,children:(0,o.jsx)(i.b,{context:p,value:null!==(a=u.field)&&void 0!==a?a:"",onChange:g,item:c})})}),b===r.xy.Fixed&&(0,o.jsx)(n.InlineFieldRow,{children:(0,o.jsx)(n.InlineField,{label:"Value",labelWidth:9,grow:!0,children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.StringValueEditor,{context:p,value:null==u?void 0:u.fixed,onChange:f,item:d}),(null==u?void 0:u.fixed)&&(0,o.jsx)(n.Button,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:()=>{h({mode:r.xy.Field,fixed:"",field:""}),h({mode:r.xy.Fixed,fixed:"",field:""})}})]})})}),b===r.xy.Template&&(0,o.jsx)(n.InlineFieldRow,{children:(0,o.jsx)(n.InlineField,{label:"Template",labelWidth:9,grow:!0,children:(0,o.jsx)(n.StringValueEditor,{context:p,value:null==u?void 0:u.fixed,onChange:f,item:d})})})]})}},"./public/app/features/dimensions/editors/index.ts":(e,t,a)=>{"use strict";a.d(t,{Lm:()=>s.L,Lv:()=>A,k9:()=>q,cL:()=>z,$2:()=>G.$});var s=a("./public/app/features/dimensions/editors/ColorDimensionEditor.tsx"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./packages/grafana-ui/src/index.ts"),i=(a("./packages/grafana-runtime/src/index.ts"),a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js"));var o=a("./packages/grafana-ui/src/components/MatchersUI/FieldNamePicker.tsx"),l=a("./public/app/features/dimensions/types.ts"),c=a("./public/app/features/dimensions/index.ts"),d=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),u=a("./.yarn/__virtual__/react-inlinesvg-virtual-f6307798ef/3/opt/drone/yarncache/react-inlinesvg-npm-2.3.0-9b0402e461-ea43f6ec06.zip/node_modules/react-inlinesvg/esm/index.js"),p=a("./packages/grafana-ui/src/utils/closePopover.ts"),h=a("./.yarn/__virtual__/@react-aria-focus-virtual-d5af2f4276/3/opt/drone/yarncache/@react-aria-focus-npm-3.5.0-e819dae779-c03d4433bd.zip/node_modules/@react-aria/focus/dist/module.js"),m=a("./.yarn/__virtual__/@react-aria-dialog-virtual-7978b78bbe/3/opt/drone/yarncache/@react-aria-dialog-npm-3.1.4-2a0ffc453b-968328a9b2.zip/node_modules/@react-aria/dialog/dist/module.js"),g=a("./.yarn/__virtual__/@react-aria-overlays-virtual-66213eeb57/3/opt/drone/yarncache/@react-aria-overlays-npm-3.7.3-408f244e82-3fffe82df9.zip/node_modules/@react-aria/overlays/dist/module.js"),f=a("./public/app/features/plugins/datasource_srv.ts"),b=a("./.yarn/__virtual__/react-window-virtual-0f9a8c6a67/3/opt/drone/yarncache/react-window-npm-1.8.6-4f5a230226-54ccf2b16c.zip/node_modules/react-window/dist/index.esm.js"),v=a("./.yarn/__virtual__/react-virtualized-auto-sizer-virtual-b5ab366cb0/3/opt/drone/yarncache/react-virtualized-auto-sizer-npm-1.0.6-50869b8392-81270e9d32.zip/node_modules/react-virtualized-auto-sizer/dist/index.esm.js");function x(e){const{columnIndex:t,rowIndex:a,style:s,data:n}=e,{cards:o,columnCount:l,onChange:c,selected:p}=n,h=o[t+a*l],m=(0,r.useTheme2)(),g=y(m);return(0,i.jsx)("div",{style:s,children:h&&(0,i.jsxs)("div",{className:p===h.value?(0,d.cx)(g.card,g.selected):g.card,onClick:()=>c(h.value),children:[h.imgUrl.endsWith(".svg")?(0,i.jsx)(u.Z,{src:h.imgUrl,className:g.img}):(0,i.jsx)("img",{src:h.imgUrl,className:g.img}),(0,i.jsx)("h6",{className:g.text,children:h.label.substr(0,h.label.length-4)})]},h.value)})}const y=(0,r.stylesFactory)((e=>({card:d.css`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${e.colors.action.hover};
        box-shadow: ${e.shadows.z2};
      }
    `,selected:d.css`
      border: 2px solid ${e.colors.primary.main};
      :hover {
        border-color: ${e.colors.primary.main};
      }
    `,img:d.css`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${e.colors.text.primary};
    `,text:d.css`
      color: ${e.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:d.css`
      border: 1px solid ${e.colors.border.medium};
    `}))),w=e=>{const{onChange:t,cards:a,value:s}=e,o=(0,r.useTheme2)(),l=y(o);return(0,i.jsx)(v.Z,{defaultWidth:680,children:e=>{let{width:r,height:o}=e;const c=Math.floor(r/90),d=Math.ceil(a.length/c);return(0,i.jsx)(b.Ym,{width:r,height:o,columnCount:c,columnWidth:90,rowCount:d,rowHeight:90,itemData:{cards:a,columnCount:c,onChange:t,selected:s},className:l.grid,children:(0,n.memo)(x,b.wy)})}})},j=e=>{const{value:t,mediaType:a,folderName:s,newValue:o,setNewValue:c}=e,d=(0,r.useStyles2)(C),u=(e=>e===l.DD.Icon?[l.QS.Icon,l.QS.IOT,l.QS.Marker]:[l.QS.BG])(a).map((e=>({label:e,value:e}))),[p,h]=(0,n.useState)(),[m,g]=(0,n.useState)(((e,t)=>{var a;return null!==(a=e.find((e=>t.startsWith(e.value))))&&void 0!==a?a:e[0]})(u,null!=t&&t.length?t:s)),[b,v]=(0,n.useState)([]),[x,y]=(0,n.useState)([]);return(0,n.useEffect)((()=>{const e=null==m?void 0:m.value;if(e){const t=a===l.DD.Icon?e=>e.name.endsWith(".svg"):e=>e.name.endsWith(".png")||e.name.endsWith(".gif");(0,f.ak)().get("-- Grafana --").then((a=>{a.listFiles(e).subscribe({next:a=>{const s=[];a.forEach((a=>{if(t(a)){const t=a.name.lastIndexOf(".");s.push({value:`${e}/${a.name}`,label:a.name,search:(t?a.name.substr(0,t):a.name).toLowerCase(),imgUrl:`public/${e}/${a.name}`})}})),v(s),y(s)}})}))}}),[a,m]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Field,{children:(0,i.jsx)(r.Select,{options:u,onChange:g,value:m})}),(0,i.jsx)(r.Field,{children:(0,i.jsx)(r.FilterInput,{value:null!=p?p:"",placeholder:"Search",onChange:e=>{var t;(t=e)?(t=t.toLowerCase(),y(b.filter((e=>e.search.includes(t))))):y(b),h(e)}})}),x&&(0,i.jsx)("div",{className:d.cardsWrapper,children:(0,i.jsx)(w,{cards:x,onChange:e=>c(e),value:o})})]})},C=e=>({cardsWrapper:d.css`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var k=a("./public/app/features/dimensions/resource.ts");const S=e=>{const{newValue:t,setNewValue:a,mediaType:s}=e,n=(0,r.useStyles2)(T),o=(0,k.t)(t);let c=null==t?void 0:t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."));return c.length>20&&(c=c.substring(0,20)+"..."),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Field,{children:(0,i.jsx)(r.Input,{onChange:e=>a(e.currentTarget.value),value:t})}),(0,i.jsxs)("div",{className:n.iconContainer,children:[(0,i.jsx)(r.Field,{label:"Preview",children:(0,i.jsxs)("div",{className:n.iconPreview,children:[s===l.DD.Icon&&(0,i.jsx)(u.Z,{src:o,className:n.img}),s===l.DD.Image&&t&&(0,i.jsx)("img",{src:o,className:n.img})]})}),(0,i.jsx)(r.Label,{children:c})]})]})},T=e=>({iconContainer:d.css`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:d.css`
    width: 238px;
    height: 198px;
    border: 1px solid ${e.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:d.css`
    width: 147px;
    height: 147px;
    fill: ${e.colors.text.primary};
  `}),O=e=>{var t,a;const{value:s,onChange:o,mediaType:c,folderName:d}=e,u=(0,r.useStyles2)(_),p=()=>{o(s)},f=(0,n.createRef)(),{dialogProps:b}=(0,m.R)({},f),{overlayProps:v}=(0,g.Ir)({onClose:p,isDismissable:!0,isOpen:!0},f),[x,y]=(0,n.useState)(null!=s?s:""),[w,C]=(0,n.useState)(l.hQ.Folder),k=e=>`${u.resourcePickerPopoverTab} ${w===e&&u.resourcePickerPopoverActiveTab}`,T=()=>t||(t=(0,i.jsx)(j,{value:s,mediaType:c,folderName:d,newValue:x,setNewValue:y}));return(0,i.jsx)(h.MT,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,i.jsx)("section",Object.assign({ref:f},v,b,{children:(0,i.jsxs)("div",{className:u.resourcePickerPopover,children:[(0,i.jsxs)("div",{className:u.resourcePickerPopoverTabs,children:[(0,i.jsx)("button",{className:k(l.hQ.Folder),onClick:()=>C(l.hQ.Folder),children:"Folder"}),(0,i.jsx)("button",{className:k(l.hQ.URL),onClick:()=>C(l.hQ.URL),children:"URL"})]}),(0,i.jsxs)("div",{className:u.resourcePickerPopoverContent,children:[(()=>{switch(w){case l.hQ.Folder:return T();case l.hQ.URL:return a||(a=(0,i.jsx)(S,{newValue:x,setNewValue:y,mediaType:c}));default:return T()}})(),(0,i.jsxs)(r.ButtonGroup,{className:u.buttonGroup,children:[(0,i.jsx)(r.Button,{className:u.button,variant:"secondary",onClick:()=>p(),children:"Cancel"}),(0,i.jsx)(r.Button,{className:u.button,variant:x&&x!==s?"primary":"secondary",onClick:()=>o(x),children:"Select"})]})]})]})}))})},_=e=>({resourcePickerPopover:d.css`
    border-radius: ${e.shape.borderRadius()};
    box-shadow: ${e.shadows.z3};
    background: ${e.colors.background.primary};
    border: 1px solid ${e.colors.border.medium};
  `,resourcePickerPopoverTab:d.css`
    width: 50%;
    text-align: center;
    padding: ${e.spacing(1,0)};
    background: ${e.colors.background.secondary};
    color: ${e.colors.text.secondary};
    font-size: ${e.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:d.css`
    color: ${e.colors.text.primary};
    font-weight: ${e.typography.fontWeightMedium};
    background: ${e.colors.background.primary};
  `,resourcePickerPopoverContent:d.css`
    width: 315px;
    font-size: ${e.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${e.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:d.css`
    display: flex;
    width: 100%;
    border-radius: ${e.shape.borderRadius()} ${e.shape.borderRadius()} 0 0;
  `,buttonGroup:d.css`
    align-self: center;
    flex-direction: row;
  `,button:d.css`
    margin: 12px 20px 5px;
  `}),N=e=>{var t;const{value:a,src:s,name:o,placeholder:l,onChange:c,onClear:d,mediaType:h,folderName:m}=e,g=(0,r.useStyles2)(I),f=(0,n.createRef)(),b=(0,i.jsx)(O,{onChange:c,value:a,mediaType:h,folderName:m});return(0,i.jsx)(r.PopoverController,{content:b,children:(e,a,n)=>(0,i.jsxs)(i.Fragment,{children:[f.current&&(0,i.jsx)(r.Popover,Object.assign({},n,{referenceElement:f.current,onMouseEnter:e,onKeyDown:e=>{(0,p.i)(e,a)}})),(0,i.jsx)("div",{ref:f,onClick:e,children:(0,i.jsx)(r.InlineFieldRow,{className:g.pointer,children:(0,i.jsx)(r.InlineField,{label:null,grow:!0,children:(0,i.jsx)(r.Input,{value:o,placeholder:l,readOnly:!0,prefix:s&&(0,i.jsx)(u.Z,{src:s,className:g.icon}),suffix:t||(t=(0,i.jsx)(r.Button,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:d}))})})})})]})})},I=e=>({pointer:d.css`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:d.css`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    max-width: 25px;
  `});var P;const M=[{label:"Fixed",value:l.Q8.Fixed,description:"Fixed value"},{label:"Field",value:l.Q8.Field,description:"Use a string field result"}],F={settings:{}},A=e=>{var t,a,s,d,u,p,h,m,g,f,b;const{value:v,context:x,onChange:y,item:w}=e,j=(0,n.useCallback)((e=>{y(Object.assign({},v,{mode:e}))}),[y,v]),C=(0,n.useCallback)((e=>{y(Object.assign({},v,{field:e}))}),[y,v]),k=(0,n.useCallback)((e=>{y(Object.assign({},v,{fixed:null!=e?e:""}))}),[y,v]),S=null!==(t=null==v?void 0:v.mode)&&void 0!==t?t:l.Q8.Fixed,T=null===(a=null===(s=w.settings)||void 0===s?void 0:s.showSourceRadio)||void 0===a||a,O=null!==(d=null===(u=w.settings)||void 0===u?void 0:u.resourceType)&&void 0!==d?d:l.DD.Icon,_=null!==(p=null===(h=w.settings)||void 0===h?void 0:h.folderName)&&void 0!==p?p:c.QS.Icon;let I="";var A;O===l.DD.Icon&&(null!=v&&v.fixed?I=(0,c.t7)(v.fixed):null!==(A=w.settings)&&void 0!==A&&A.placeholderValue&&(I=(0,c.t7)(w.settings.placeholderValue)));return(0,i.jsxs)(i.Fragment,{children:[T&&(0,i.jsx)(r.InlineFieldRow,{children:(0,i.jsx)(r.InlineField,{label:"Source",labelWidth:9,grow:!0,children:(0,i.jsx)(r.RadioButtonGroup,{value:S,options:M,onChange:j,fullWidth:!0})})}),S!==l.Q8.Fixed&&(0,i.jsx)(r.InlineFieldRow,{children:(0,i.jsx)(r.InlineField,{label:"Field",labelWidth:9,grow:!0,children:(0,i.jsx)(o.b,{context:x,value:null!==(m=v.field)&&void 0!==m?m:"",onChange:C,item:F})})}),S===l.Q8.Fixed&&(0,i.jsx)(N,{onChange:k,onClear:e=>{e.stopPropagation(),y({mode:l.Q8.Fixed,fixed:"",field:""})},value:null==v?void 0:v.fixed,src:I,placeholder:null!==(g=null===(f=w.settings)||void 0===f?void 0:f.placeholderText)&&void 0!==g?g:"Select a value",name:null!==(b=D(null==v?void 0:v.fixed))&&void 0!==b?b:"",mediaType:O,folderName:_}),S===l.Q8.Mapping&&(0,i.jsx)(r.InlineFieldRow,{children:(0,i.jsx)(r.InlineField,{label:"Mappings",labelWidth:9,grow:!0,children:P||(P=(0,i.jsx)("div",{children:"TODO mappings editor!"}))})})]})};function D(e){if(!e)return;const t=e.lastIndexOf("/");return t>0?e.substring(t+1):e}var $=a("./packages/grafana-ui/src/components/MatchersUI/utils.ts"),L=a("./public/app/features/dimensions/editors/NumberInput.tsx"),R=a("./public/app/features/dimensions/scale.ts");const E={label:"Fixed value",value:"_____fixed_____"},z=e=>{const{value:t,context:a,onChange:s,item:o}=e,{settings:l}=o,c=(0,r.useStyles2)(V),d=null==t?void 0:t.field,u=Boolean(!d),p=(0,$.IX)(a.data),h=(0,$.nw)(p,d,E),m=(0,n.useMemo)((()=>(0,R.x5)(l)),[l]),g=(0,n.useCallback)((e=>{s((0,R.C)(e,m))}),[s,m]),f=(0,n.useCallback)((e=>{const a=e.value;g(a&&a!==E.value?Object.assign({},t,{field:a}):Object.assign({},t,{field:void 0}))}),[g,t]),b=(0,n.useCallback)((e=>{void 0!==e&&g(Object.assign({},t,{min:e}))}),[g,t]),v=(0,n.useCallback)((e=>{void 0!==e&&g(Object.assign({},t,{max:e}))}),[g,t]),x=(0,n.useCallback)((e=>{void 0!==e&&g(Object.assign({},t,{fixed:e}))}),[g,t]),y=null!=t?t:{},w=u?E:h.find((e=>e.value===d));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsx)(r.Select,{menuShouldPortal:!0,value:w,options:h,onChange:f,noOptionsMessage:"No fields found"})}),(0,i.jsxs)("div",{className:c.range,children:[u&&(0,i.jsx)(r.InlineFieldRow,{children:(0,i.jsx)(r.InlineField,{label:"Value",labelWidth:8,grow:!0,children:(0,i.jsx)(L.Y,Object.assign({value:y.fixed},m,{onChange:x}))})}),!u&&!m.hideRange&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.InlineFieldRow,{children:(0,i.jsx)(r.InlineField,{label:"Min",labelWidth:8,grow:!0,children:(0,i.jsx)(L.Y,Object.assign({value:y.min},m,{onChange:b}))})}),(0,i.jsx)(r.InlineFieldRow,{children:(0,i.jsx)(r.InlineField,{label:"Max",labelWidth:8,grow:!0,children:(0,i.jsx)(L.Y,Object.assign({value:y.max},m,{onChange:v}))})})]})]})]})},V=e=>({range:d.css`
    padding-top: 8px;
  `});var B=a("./packages/grafana-data/src/index.ts");const U={label:"Fixed value",value:"_____fixed_____"},H=[{label:"Mod",value:l.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:l.eK.Clamped,description:"Use field values, clamped to max and min"}],q=e=>{var t,a;const{value:s,context:o,onChange:c,item:d}=e,{settings:u}=d,p=null==s?void 0:s.field,h=Boolean(!p),m=(0,$.IX)(o.data),g=(0,$.nw)(m,p,U,B.FieldType.number),f=(0,r.useStyles2)(W),b=(0,n.useCallback)((e=>{const t=e.value;if(t&&t!==U.value)c(Object.assign({},s,{field:t}));else{var a;const e=null!==(a=s.fixed)&&void 0!==a?a:0;c(Object.assign({},s,{field:void 0,fixed:e}))}}),[c,s]),v=(0,n.useCallback)((e=>{c(Object.assign({},s,{mode:e}))}),[c,s]),x=(0,n.useCallback)((e=>{c(Object.assign({},s,{field:void 0,fixed:null!=e?e:0}))}),[c,s]),y=null!=s?s:{},w=null!==(t=null==s?void 0:s.mode)&&void 0!==t?t:l.eK.Mod,j=h?U:g.find((e=>e.value===p));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(r.InlineFieldRow,{children:(0,i.jsx)(r.InlineField,{label:"Limit",labelWidth:8,grow:!0,children:(0,i.jsx)(r.RadioButtonGroup,{value:w,options:H,onChange:v,fullWidth:!0})})}),(0,i.jsx)(r.Select,{menuShouldPortal:!0,value:j,options:g,onChange:b,noOptionsMessage:"No fields found"})]}),(0,i.jsx)("div",{className:f.range,children:h&&(0,i.jsx)(r.InlineFieldRow,{children:(0,i.jsx)(r.InlineField,{label:"Value",labelWidth:8,grow:!0,children:(0,i.jsx)(L.Y,{value:null!==(a=null==y?void 0:y.fixed)&&void 0!==a?a:0,onChange:x,max:null==u?void 0:u.max,min:null==u?void 0:u.min})})})})]})},W=e=>({range:d.css`
    padding-top: 8px;
  `});var G=a("./public/app/features/dimensions/editors/TextDimensionEditor.tsx")},"./public/app/features/dimensions/index.ts":(e,t,a)=>{"use strict";a.d(t,{Q8:()=>s.Q8,QS:()=>s.QS,eK:()=>s.eK,B5:()=>s.B5,xy:()=>s.xy,PI:()=>r.PI,rj:()=>r.rj,PX:()=>i,FP:()=>r.FP,t7:()=>c.t,Im:()=>c.I,Qz:()=>r.Qz,yq:()=>d.y,z2:()=>r.z2,pb:()=>r.pb,W8:()=>o.W8,A:()=>o.A,Bw:()=>l,WO:()=>r.WO});var s=a("./public/app/features/dimensions/types.ts"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/features/dimensions/utils.ts");function i(e,t,a){return function(e,t,a){if(!e){var s,i;const e=null!==(s=a.visualization.getColorByName(t.fixed))&&void 0!==s?s:"grey";return{isAssumed:Boolean(null===(i=t.field)||void 0===i?void 0:i.length)||!t.fixed,fixed:e,value:()=>e,get:t=>e}}const o=(0,n.getFieldColorModeForField)(e);if(!o.isByValue){const t=o.getCalculator(e,a)(0,0);return{fixed:t,value:()=>t,get:e=>t,field:e}}const l=(0,n.getScaleCalculator)(e,a);return{get:t=>{const a=e.values.get(t);return l(a).color},field:e,value:()=>l((0,r.cR)(e)).color}}((0,r.PI)(e,t.field),t,a)}var o=a("./public/app/features/dimensions/scale.ts");function l(e,t){return function(e,t){var a;let i=t.fixed;const o=null!==(a=t.mode)&&void 0!==a?a:s.xy.Fixed;if(o===s.xy.Fixed)return{isAssumed:!Boolean(i),fixed:i,value:()=>i,get:e=>i};if(o===s.xy.Template){const a=e=>`TEMPLATE[${t.fixed} // ${e}]`;return e?{field:e,get:t=>a(e.values.get(t)),value:()=>a((0,r.cR)(e))}:(i=a(""),{isAssumed:!0,fixed:i,value:()=>i,get:e=>i})}if(!e)return{isAssumed:!0,fixed:i,value:()=>i,get:e=>i};let l=t=>(0,n.formattedValueToString)(e.display(t));return{field:e,get:t=>l(e.values.get(t)),value:()=>l((0,r.cR)(e))}}(t.field?(0,r.PI)(e,t.field):null==e?void 0:e.fields.find((e=>e.type===n.FieldType.string)),t)}var c=a("./public/app/features/dimensions/resource.ts"),d=a("./public/app/features/dimensions/scalar.ts")},"./public/app/features/dimensions/resource.ts":(e,t,a)=>{"use strict";a.d(t,{t:()=>r,I:()=>i});var s=a("./public/app/features/dimensions/types.ts"),n=a("./public/app/features/dimensions/utils.ts");function r(e){return e?e.indexOf(":/")>0?e:window.__grafana_public_path__+e:""}function i(e,t){var a;const i=null!==(a=t.mode)&&void 0!==a?a:s.Q8.Fixed;if(i===s.Q8.Fixed){const e=r(t.fixed);return{isAssumed:!Boolean(e),fixed:e,value:()=>e,get:t=>e}}const o=(0,n.PI)(e,t.field);if(!o){const e="";return{isAssumed:!0,fixed:e,value:()=>e,get:t=>e}}if(i===s.Q8.Mapping){const e=e=>r(`${e}`);return{field:o,get:t=>e(o.values.get(t)),value:()=>e((0,n.cR)(o))}}return{field:o,get:o.values.get,value:()=>(0,n.cR)(o)}}},"./public/app/features/dimensions/scalar.ts":(e,t,a)=>{"use strict";a.d(t,{y:()=>r});var s=a("./public/app/features/dimensions/types.ts"),n=a("./public/app/features/dimensions/utils.ts");function r(e,t){return function(e,t){if(!e){var a,r;const e=null!==(a=t.fixed)&&void 0!==a?a:0;return{isAssumed:Boolean(null===(r=t.field)||void 0===r?void 0:r.length)||!t.fixed,fixed:e,value:()=>e,get:()=>e}}let i=e=>e%t.max;t.mode===s.eK.Clamped&&(i=e=>e<t.min?t.min:e>t.max?t.max:e);const o=t=>{const a=e.values.get(t);return null===a||"number"!=typeof a?0:i(a)};return{field:e,get:o,value:()=>(0,n.cR)(e)}}((0,n.PI)(e,null==t?void 0:t.field),t)}},"./public/app/features/dimensions/scale.ts":(e,t,a)=>{"use strict";a.d(t,{W8:()=>i,A:()=>o,x5:()=>l,C:()=>c});var s=a("./public/app/features/dimensions/index.ts"),n=a("./packages/grafana-data/src/field/scale.ts"),r=a("./public/app/features/dimensions/utils.ts");function i(e,t){return o((0,r.PI)(e,null==t?void 0:t.field),t)}function o(e,t,a){if(!e){var i,o;const e=null!==(i=t.fixed)&&void 0!==i?i:0;return{isAssumed:Boolean(null===(o=t.field)||void 0===o?void 0:o.length)||!t.fixed,fixed:e,value:()=>e,get:()=>e}}const l=(0,n.dz)(e),c=t.max-t.min;if(e.values.length<1||c<=0||l.delta<=0)return{fixed:t.min,value:()=>t.min,get:()=>t.min};let d=e=>t.min+e*c;if(a===s.B5.Quadratic){const e=Math.PI*(t.max/2)**2,a=Math.PI*(t.min/2)**2,s=e-a;d=e=>{let t=a+s*e;return 2*Math.sqrt(t/Math.PI)}}const u=t=>{const a=e.values.get(t);let s=0;return a!==-1/0&&(s=(a-l.min)/l.delta),s>1?s=1:s<0&&(s=0),d(s)};return{get:u,value:()=>u((0,r.cR)(e)),field:e}}function l(e){return e||(e={min:0,max:1}),null==e.min&&(e.min=0),null==e.max&&(e.max=1),e}function c(e,t){let{min:a,max:s}=l(t);if(e||(e={}),null==e.max&&(e.max=s),null==e.min&&(e.min=a),e.min>e.max){const t=e.max;e.max=e.min,e.min=t}return e.min<a&&(e.min=a),e.max>s&&(e.max=s),null==e.fixed&&(e.fixed=e.min+(e.max-e.min)/2),e.field||(e.fixed>s?e.fixed=s:e.fixed<a&&(e.fixed=a)),e}},"./public/app/features/dimensions/types.ts":(e,t,a)=>{"use strict";let s,n,r;a.d(t,{B5:()=>s,eK:()=>n,xy:()=>r,qj:()=>i,Q8:()=>o,QS:()=>l,DD:()=>c,hQ:()=>d}),function(e){e.Linear="linear",e.Quadratic="quad"}(s||(s={})),function(e){e.Mod="mod",e.Clamped="clamped"}(n||(n={})),function(e){e.Fixed="fixed",e.Field="field",e.Template="template"}(r||(r={}));const i=Object.freeze({fixed:"",mode:r.Field,field:""});let o,l,c,d;!function(e){e.Fixed="fixed",e.Field="field",e.Mapping="mapping"}(o||(o={})),function(e){e.Icon="img/icons/unicons",e.IOT="img/icons/iot",e.Marker="img/icons/marker",e.BG="img/bg"}(l||(l={})),function(e){e.Icon="icon",e.Image="image"}(c||(c={})),function(e){e.Folder="folder",e.URL="url"}(d||(d={}))},"./public/app/features/dimensions/utils.ts":(e,t,a)=>{"use strict";a.d(t,{FP:()=>o,pb:()=>l,z2:()=>c,Qz:()=>d,WO:()=>u,PI:()=>p,rj:()=>h,cR:()=>m});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/features/dimensions/index.ts"),r=a("./packages/grafana-runtime/src/index.ts"),i=a("./public/app/features/dimensions/scalar.ts");function o(e,t){if(null!=e&&e.series&&t.field)for(const a of e.series){const s=(0,n.PX)(a,t,r.config.theme2);if(!s.isAssumed||1===e.series.length)return s}return(0,n.PX)(void 0,t,r.config.theme2)}function l(e,t){if(null!=e&&e.series&&t.field)for(const a of e.series){const s=(0,n.W8)(a,t);if(!s.isAssumed||1===e.series.length)return s}return(0,n.W8)(void 0,t)}function c(e,t){if(null!=e&&e.series&&t.field)for(const a of e.series){const s=(0,i.y)(a,t);if(!s.isAssumed||1===e.series.length)return s}return(0,i.y)(void 0,t)}function d(e,t){if(null!=e&&e.series&&t.field)for(const a of e.series){const s=(0,n.Im)(a,t);if(!s.isAssumed||1===e.series.length)return s}return(0,n.Im)(void 0,t)}function u(e,t){if(null!=e&&e.series&&t.field)for(const a of e.series){const s=(0,n.Bw)(a,t);if(!s.isAssumed||1===e.series.length)return s}return(0,n.Bw)(void 0,t)}function p(e,t){if(e&&null!=t&&t.length)for(const a of e.fields){if(t===a.name)return a;if(t===(0,s.getFieldDisplayName)(a,e))return a}}function h(e,t){if(e&&null!=t&&t.length)for(let a=0;a<e.fields.length;a++){const n=e.fields[a];if(t===n.name)return a;if(t===(0,s.getFieldDisplayName)(n,e))return a}}function m(e){var t;const a=null===(t=e.state)||void 0===t?void 0:t.calcs;if(a){const e=a[s.ReducerID.lastNotNull];if(null!=e)return e}const n=e.values;let r=n.length-1;for(;r>=0;){const e=n.get(r--);if(null!=e)return e}}},"./public/app/features/explore/state/datasource.ts":(e,t,a)=>{"use strict";a.d(t,{zU:()=>d,eX:()=>u});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/core/utils/explore.ts"),i=a("./public/app/features/explore/state/query.ts"),o=a("./public/app/features/explore/state/time.ts"),l=a("./public/app/features/explore/state/utils.ts");const c=(0,s.PH)("explore/updateDatasourceInstance");function d(e,t,a){return async(s,r)=>{const d=r().user.orgId,{history:u,instance:p}=await(0,l.r_)(d,t),h=r().explore[e].datasourceInstance;if(s(c({exploreId:e,datasourceInstance:p,history:u})),null!=a&&a.importQueries){const t=r().explore[e].queries;await s((0,i.GJ)(e,t,h,p))}r().explore[e].isLive&&s((0,o.oz)(e,n.RefreshPicker.offOption.value)),null!=a&&a.importQueries&&s((0,i.aA)(e))}}const u=(e,t)=>{if(c.match(t)){const{datasourceInstance:a,history:s}=t.payload;return(0,r.RZ)(e.querySubscription),Object.assign({},e,{datasourceInstance:a,graphResult:null,tableResult:null,logsResult:null,logsVolumeDataProvider:void 0,logsVolumeData:void 0,queryResponse:(0,l.lp)(),loading:!1,queryKeys:[],history:s,datasourceMissing:!1})}return e}},"./public/app/features/explore/state/explorePane.ts":(e,t,a)=>{"use strict";a.d(t,{km:()=>b,qN:()=>x,Rl:()=>w,CK:()=>j,Om:()=>C,iz:()=>k});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./public/app/core/utils/explore.ts"),r=a("./public/app/features/explore/state/query.ts"),i=a("./public/app/features/explore/state/datasource.ts"),o=a("./public/app/features/explore/state/time.ts"),l=a("./public/app/features/explore/state/history.ts"),c=a("./public/app/features/explore/state/utils.ts"),d=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),u=a("./public/app/features/profile/state/selectors.ts"),p=a("./packages/grafana-runtime/src/index.ts"),h=a("./public/app/core/utils/richHistory.ts"),m=a("./public/app/features/explore/state/main.ts");const g=(0,d.PH)("explore/changeSize"),f=(0,d.PH)("explore/changePanels");function b(e,t,a){return async(s,n)=>{const r=n().explore[e];if(void 0===r)return;const{panelsState:i}=r;s(f({exploreId:e,panelsState:Object.assign({},i,{[t]:a})})),s((0,m.og)())}}const v=(0,d.PH)("explore/initializeExplore");(0,d.PH)("explore/setUrlReplaced");function x(e,t){let{height:a,width:s}=t;return g({exploreId:e,height:a,width:s})}const y=(0,d.PH)("explore/changeGraphStyle");function w(e,t){return async(a,s)=>{(0,c.FG)(t),a(y({exploreId:e,graphStyle:t}))}}function j(e,t,a,s,n,i,l,d){return async(u,g)=>{let b,x=[];if((0,p.getDataSourceSrv)().getList().length>=1){const e=g().user.orgId,a=await(0,c.r_)(e,t);b=a.instance,x=a.history}u(v({exploreId:e,containerWidth:n,eventBridge:i,queries:a,range:s,originPanelId:d,datasourceInstance:b,history:x})),void 0!==l&&u(f({exploreId:e,panelsState:l})),u((0,o.b3)({exploreId:e})),b&&u((0,r.aA)(e,{replaceUrl:!0}));const y=(0,h.ub)();u((0,m.ZU)({richHistory:y}))}}function C(e,t){return async(a,s)=>{const i=s().explore[e];if(!i.initialized)return;const l=(0,n.J5)(t),d=S(l,(0,c.D)(i)),{containerWidth:p,eventBridge:h}=i,{datasource:m,queries:g,range:b,originPanelId:v,panelsState:x}=l,y=[];for(let e=0;e<g.length;e++){const t=g[e];y.push((0,n.fR)(t,y,e))}const w=(0,u.Z)(s().user),C=(0,u.i)(s().user),k=(0,n.vP)(b,w,C);if(d.datasource){const t=(0,n.Z8)(g);await a(j(e,m,t,k,p,h,x,v))}else d.range&&a((0,o.b3)({exploreId:e,rawRange:k.raw})),d.queries&&a((0,r.SE)({exploreId:e,queries:y})),d.panelsState&&void 0!==x&&a(f({exploreId:e,panelsState:x})),(d.queries||d.range)&&a((0,r.aA)(e))}}const k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.t5)(),t=arguments.length>1?arguments[1]:void 0;if(e=(0,r.Y)(e,t),e=(0,i.eX)(e,t),e=(0,o.ok)(e,t),e=(0,l.Oo)(e,t),g.match(t)){const a=t.payload.width;return Object.assign({},e,{containerWidth:a})}if(y.match(t)){const{graphStyle:a}=t.payload;return Object.assign({},e,{graphStyle:a})}if(f.match(t)){const{panelsState:a}=t.payload;return Object.assign({},e,{panelsState:a})}if(v.match(t)){const{containerWidth:a,eventBridge:s,queries:r,range:i,originPanelId:o,datasourceInstance:l,history:d}=t.payload;return Object.assign({},e,{containerWidth:a,eventBridge:s,range:i,queries:r,initialized:!0,queryKeys:(0,n.$$)(r,l),originPanelId:o,datasourceInstance:l,history:d,datasourceMissing:!l,queryResponse:(0,c.lp)(),cache:[]})}return e},S=(e,t)=>({datasource:!(0,s.isEqual)(null==t?void 0:t.datasource,null==e?void 0:e.datasource),queries:!(0,s.isEqual)(null==t?void 0:t.queries,null==e?void 0:e.queries),range:!(0,s.isEqual)((null==t?void 0:t.range)||n.UI,(null==e?void 0:e.range)||n.UI),panelsState:!(0,s.isEqual)(null==t?void 0:t.panelsState,null==e?void 0:e.panelsState)})},"./public/app/features/explore/state/history.ts":(e,t,a)=>{"use strict";a.d(t,{fM:()=>r,u5:()=>i,ik:()=>o,Oo:()=>l});var s=a("./public/app/core/utils/richHistory.ts"),n=a("./public/app/features/explore/state/main.ts");const r=(0,a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").PH)("explore/historyUpdated"),i=(e,t,a)=>(r,i)=>{let o;"starred"===t&&(o=(0,s.VI)(i().explore.richHistory,e)),"comment"===t&&(o=(0,s.gt)(i().explore.richHistory,e,a)),"delete"===t&&(o=(0,s.y9)(i().explore.richHistory,e)),r((0,n.ZU)({richHistory:o}))},o=()=>e=>{(0,s.HK)(),e((0,n.ZU)({richHistory:[]}))},l=(e,t)=>r.match(t)?Object.assign({},e,{history:t.payload.history}):e},"./public/app/features/explore/state/main.ts":(e,t,a)=>{"use strict";a.d(t,{tl:()=>d,ZU:()=>u,sN:()=>p,QN:()=>h,WK:()=>m,Jt:()=>f,og:()=>b,IS:()=>v,bW:()=>x,YV:()=>y,m$:()=>w,ZP:()=>k});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/core/utils/explore.ts"),i=a("./public/app/types/explore.ts"),o=a("./public/app/features/explore/state/explorePane.ts"),l=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),c=a("./public/app/features/explore/state/utils.ts");const d=(0,l.PH)("explore/syncTimes"),u=(0,l.PH)("explore/richHistoryUpdated"),p=(0,l.PH)("explore/localStorageFullAction"),h=(0,l.PH)("explore/richHistoryLimitExceededAction"),m=(0,l.PH)("explore/resetExplore"),g=(0,l.PH)("explore/splitClose"),f=(0,l.PH)("explore/cleanupPane"),b=e=>(t,a)=>{const{left:r,right:i}=a().explore,o={orgId:a().user.orgId.toString()};o.left=(0,n.serializeStateToUrlParam)((0,c.D)(r)),o.right=i?(0,n.serializeStateToUrlParam)((0,c.D)(i)):null,v.right=o.right,v.left=o.left,s.locationService.partial(Object.assign({},o),null==e?void 0:e.replace)},v={},x=e=>async(t,a)=>{const r=a().explore[i.K.left];let o=(0,c.D)(r);if(e){var l;o={datasource:(null===(l=(0,s.getDataSourceSrv)().getInstanceSettings(e.datasourceUid))||void 0===l?void 0:l.name)||"",queries:[e.query],range:e.range||r.range,panelsState:e.panelsState}}const d=(0,n.serializeStateToUrlParam)(o);s.locationService.partial({right:d},!0)};function y(e){return(t,a)=>{t(g({itemId:e})),t(b())}}const w=(e,t)=>async a=>{const{getDataSourceSrv:n,getTimeSrv:r,getExploreUrl:i,openInNewWindow:o}=t,l=n(),c=await i({panel:e,datasourceSrv:l,timeSrv:r()});o&&c?o(c):s.locationService.push(c)},j=(0,c.t5)(),C={syncedTimes:!1,left:j,right:void 0,richHistory:[],localStorageFull:!1,richHistoryLimitExceededWarningShown:!1},k={explore:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;if(g.match(t)){const{itemId:a}=t.payload,s={left:a===i.K.left?e.right:e.left,right:void 0};return Object.assign({},e,s)}if(f.match(t)){var a;const{exploreId:s}=t.payload;return null!==(a=e[s])&&void 0!==a&&a.initialized?s===i.K.left?Object.assign({},e,{[i.K.left]:e[i.K.right],[i.K.right]:void 0}):Object.assign({},e,{[i.K.right]:void 0}):e}if(d.match(t))return Object.assign({},e,{syncedTimes:t.payload.syncedTimes});if(u.match(t))return Object.assign({},e,{richHistory:t.payload.richHistory});if(p.match(t))return Object.assign({},e,{localStorageFull:!0});if(h.match(t))return Object.assign({},e,{richHistoryLimitExceededWarningShown:!0});if(m.match(t)){const a=t.payload,s=e[i.K.left],n=e[i.K.right];return(0,r.RZ)(s.querySubscription),n&&(0,r.RZ)(n.querySubscription),a.force||!Number.isInteger(e.left.originPanelId)?C:Object.assign({},C,{left:Object.assign({},j,{queries:e.left.queries,originPanelId:e.left.originPanelId})})}if(t.payload){const{exploreId:a}=t.payload;if(void 0!==a){const s=e[a];return Object.assign({},e,{[a]:(0,o.iz)(s,t)})}}return e}}},"./public/app/features/explore/state/query.ts":(e,t,a)=>{"use strict";a.d(t,{CS:()=>K,K8:()=>se,ci:()=>Y,PM:()=>F,LK:()=>ne,GJ:()=>J,QH:()=>re,sK:()=>X,Y:()=>ie,aA:()=>ee,EA:()=>ae,P4:()=>G,sQ:()=>q,KO:()=>te,SE:()=>U});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),n=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/throttleTime.js"),r=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),i=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/util/identity.js"),o=a("./packages/grafana-data/src/index.ts"),l=a("./public/app/core/utils/explore.ts"),c=a("./public/app/core/utils/richHistory.ts"),d=a("./public/app/features/profile/state/selectors.ts"),u=a("./public/app/core/utils/timePicker.ts"),p=a("./public/app/core/actions/index.ts"),h=a("./public/app/features/query/state/runRequest.ts"),m=a("./packages/grafana-runtime/src/index.ts"),g=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),f=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),b=a("./public/app/core/logs_model.ts");const v=e=>{var t;const a=[],s=[],n=[],r=[],i=[];for(const o of e.series)switch(null===(t=o.meta)||void 0===t?void 0:t.preferredVisualisationType){case"logs":n.push(o);break;case"graph":a.push(o);break;case"trace":r.push(o);break;case"table":s.push(o);break;case"nodeGraph":i.push(o);break;default:j(o)?(a.push(o),s.push(o)):s.push(o)}return Object.assign({},e,{graphFrames:a,tableFrames:s,logsFrames:n,traceFrames:r,nodeGraphFrames:i,graphResult:null,tableResult:null,logsResult:null})},x=e=>e.graphFrames.length?Object.assign({},e,{graphResult:e.graphFrames}):Object.assign({},e,{graphResult:null}),y=e=>{if(0===e.tableFrames.length)return(0,r.of)(Object.assign({},e,{tableResult:null}));e.tableFrames.sort(((e,t)=>{const a=e.refId,s=t.refId;return a>s?1:a<s?-1:0}));return(e.tableFrames.every((e=>j(e)))?(0,r.of)(e.tableFrames).pipe(o.standardTransformers.seriesToColumnsTransformer.operator({})):(0,r.of)(e.tableFrames).pipe(o.standardTransformers.mergeTransformer.operator({}))).pipe((0,f.U)((t=>{const a=t[0];for(const t of a.fields){var s,n,r;t.display=null!==(s=t.display)&&void 0!==s?s:(0,o.getDisplayProcessor)({field:t,theme:m.config.theme2,timeZone:null!==(n=null===(r=e.request)||void 0===r?void 0:r.timezone)&&void 0!==n?n:"browser"})}return Object.assign({},e,{tableResult:a})})))};function w(e,t,a,n,i,c){return(0,r.of)(e).pipe((0,f.U)((e=>(0,h.zR)(e,t))),(0,f.U)(v),(0,f.U)(x),(0,f.U)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{var a;if(0===t.logsFrames.length)return Object.assign({},t,{logsResult:null});const s=null===(a=t.request)||void 0===a?void 0:a.intervalMs,n=(0,b.aB)(t.logsFrames,s,e.absoluteRange,e.queries),r=(0,l.Oy)(e.refreshInterval),i=(0,o.sortLogsResult)(n,r),c=i.rows,d=e.fullRangeLogsVolumeAvailable?void 0:i.series,u=Object.assign({},i,{rows:c,series:d});return Object.assign({},t,{logsResult:u})}}({absoluteRange:a,refreshInterval:n,queries:i,fullRangeLogsVolumeAvailable:c})),(0,s.z)(y))}function j(e){var t;const a=(0,g.groupBy)(e.fields,(e=>e.type));return Boolean(2===Object.keys(a).length&&1===(null===(t=a[o.FieldType.time])||void 0===t?void 0:t.length)&&a[o.FieldType.number])}var C=a("./public/app/core/copy/appNotification.ts"),k=a("./public/app/features/explore/state/main.ts"),S=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),T=a("./public/app/features/explore/state/time.ts"),O=a("./public/app/features/explore/state/history.ts"),_=a("./public/app/features/explore/state/utils.ts"),N=a("../../opt/drone/yarncache/fast-deep-equal-npm-3.1.3-790edcfcf5-e21a9d8d84.zip/node_modules/fast-deep-equal/index.js"),I=a.n(N);const P=["datasource"];const M=(0,S.PH)("explore/addQueryRow"),F=(0,S.PH)("explore/changeQueries"),A=(0,S.PH)("explore/cancelQueries"),D=(0,S.PH)("explore/queriesImported"),$=(0,S.PH)("explore/modifyQueries"),L=(0,S.PH)("explore/queryStoreSubscription"),R=(0,S.PH)("explore/storeLogsVolumeDataProviderAction"),E=(0,S.PH)("explore/cleanLogsVolumeAction"),z=(0,S.PH)("explore/storeLogsVolumeDataSubscriptionAction"),V=(0,S.PH)("explore/updateLogsVolumeDataAction"),B=(0,S.PH)("explore/queryStreamUpdated"),U=(0,S.PH)("explore/setQueries"),H=(0,S.PH)("changeLoadingState"),q=(0,S.PH)("explore/setPausedState"),W=(0,S.PH)("explore/scanStart"),G=(0,S.PH)("explore/scanStop"),Z=(0,S.PH)("explore/addResultsToCache"),Q=(0,S.PH)("explore/clearCache");function K(e,t){return(a,s)=>{const n=s().explore[e].queries,r=(0,l.Xk)(n,t);a(M({exploreId:e,index:t,query:r}))}}function Y(e){return(t,a)=>{var s;t(G({exploreId:e})),t(A({exploreId:e})),t(R({exploreId:e,logsVolumeDataProvider:void 0})),(null===(s=a().explore[e].logsVolumeData)||void 0===s?void 0:s.state)!==o.LoadingState.Done&&t(E({exploreId:e})),t((0,k.og)())}}const J=(e,t,a,s)=>async n=>{var r,i;if(!a)return void n(D({exploreId:e,queries:t}));let c=t;if((null===(r=a.meta)||void 0===r?void 0:r.id)===(null===(i=s.meta)||void 0===i?void 0:i.id))c=t.map((e=>function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,P)));else if((0,o.hasQueryExportSupport)(a)&&(0,o.hasQueryImportSupport)(s)){const e=await a.exportToAbstractQueries(t);c=await s.importFromAbstractQueries(e)}else c=s.importQueries?await s.importQueries(t,a):(0,l.Z8)();const d=(0,l.Z8)(c);n(D({exploreId:e,queries:d}))};function X(e,t,a,s){return n=>{n($({exploreId:e,modification:t,index:s,modifier:a})),t.preventSubmit||n(ee(e))}}const ee=(e,t)=>(a,m)=>{a((0,T.b3)({exploreId:e}));!0===(null==t?void 0:t.preserveCache)||a(ne(e));const g=m().explore[e],{datasourceInstance:f,containerWidth:b,isLive:v,range:x,scanning:y,queryResponse:j,querySubscription:S,refreshInterval:N,absoluteRange:P,cache:M,logsVolumeDataProvider:F}=g;let A;const D=g.queries.map((e=>Object.assign({},e,{datasource:e.datasource||(null==f?void 0:f.getRef())})));null!=f&&function(e,t,a,s,n,r){const i=s.meta.id,o=(0,l._Q)(a,i,n),{richHistory:d,localStorageFull:u,limitExceeded:p}=(0,c.au)(t.richHistory||[],i,s.name,n,!1,"","",!t.localStorageFull,!t.richHistoryLimitExceededWarningShown);e((0,O.fM)({exploreId:r,history:o})),e((0,k.ZU)({richHistory:d})),u&&e((0,k.sN)()),p&&e((0,k.QN)())}(a,m().explore,g.history,f,D,e),a((0,k.og)({replace:null==t?void 0:t.replaceUrl}));const $=(0,_.M0)(M,P);if($)A=(0,r.of)($).pipe((0,s.z)((e=>w(e,j,P,N,D,!!F)))).subscribe((t=>{t.error||a((0,k.og)()),a(B({exploreId:e,response:t}))}));else{if(!(0,l.z_)(D))return void a((0,k.og)({replace:null==t?void 0:t.replaceUrl}));if(!f)return;const r=null==f?void 0:f.interval;(0,l.RZ)(S);const c={minInterval:r,maxDataPoints:b,liveStreaming:v},g=(0,d.Z)(m().user),O=(0,l.Zf)(e,D,c,x,y,g);if(a(H({exploreId:e,loadingState:o.LoadingState.Loading})),A=(0,h.v7)(f,O.request).pipe(v?(0,n.p)(500):i.y,(0,s.z)((t=>w(t,j,P,N,D,!!m().explore[e].logsVolumeDataProvider)))).subscribe({next(t){if(a(B({exploreId:e,response:t})),m().explore[e].scanning)if(t.state===o.LoadingState.Done&&0===t.series.length){const t=(0,u.e)(-1,m().explore[e].range);a((0,T.b3)({exploreId:e,absoluteRange:t})),a(ee(e))}else a(G({exploreId:e}))},error(t){a((0,p.$l)((0,C.t_)("Query processing error",t))),a(H({exploreId:e,loadingState:o.LoadingState.Error})),console.error(t)},complete(){m().explore[e].queryResponse.state===o.LoadingState.Loading&&a(H({exploreId:e,loadingState:o.LoadingState.Done}))}}),v)a(R({exploreId:e,logsVolumeDataProvider:void 0})),a(E({exploreId:e}));else if((0,o.hasLogsVolumeSupport)(f)){const t=f.getLogsVolumeDataProvider(O.request);a(R({exploreId:e,logsVolumeDataProvider:t}));const{logsVolumeData:s,absoluteRange:n}=m().explore[e];(function(e,t,a){if(e&&e.data[0]){var s,n,r,i;if(!I()(null===(s=e.data[0].meta)||void 0===s||null===(n=s.custom)||void 0===n?void 0:n.targets,t))return!1;const o=e&&e.data[0]&&(null===(r=e.data[0].meta)||void 0===r||null===(i=r.custom)||void 0===i?void 0:i.absoluteRange);if(o&&o.from<=a.from&&a.to<=o.to)return!0}return!1})(s,D,n)||(a(E({exploreId:e})),a(re(e)))}else a(R({exploreId:e,logsVolumeDataProvider:void 0}))}a(L({exploreId:e,querySubscription:A}))};function te(e,t){return(a,s)=>{const n=s().explore[e].queries,r=t.map(((e,t)=>(0,l.fR)(e,n,t)));a(U({exploreId:e,queries:r})),a(ee(e))}}function ae(e){return(t,a)=>{t(W({exploreId:e}));const s=(0,u.e)(-1,a().explore[e].range);t((0,T.b3)({exploreId:e,absoluteRange:s})),t(ee(e))}}function se(e){return(t,a)=>{const s=a().explore[e].queryResponse,n=a().explore[e].absoluteRange,r=(0,_.M7)(n);s.state===o.LoadingState.Done&&t(Z({exploreId:e,cacheKey:r,queryResponse:s}))}}function ne(e){return(t,a)=>{t(Q({exploreId:e}))}}function re(e){return(t,a)=>{const{logsVolumeDataProvider:s}=a().explore[e];if(s){const a=s.subscribe({next:a=>{t(V({exploreId:e,logsVolumeData:a}))}});t(z({exploreId:e,logsVolumeDataSubscription:a}))}}}const ie=(e,t)=>{if(M.match(t)){const{queries:a}=e,{index:s,query:n}=t.payload,r=[...a.slice(0,s+1),Object.assign({},n),...a.slice(s+1)];return Object.assign({},e,{queries:r,queryKeys:(0,l.$$)(r,e.datasourceInstance)})}if(F.match(t)){const{queries:a}=t.payload;return Object.assign({},e,{queries:a})}if(A.match(t))return(0,l.RZ)(e.querySubscription),Object.assign({},e,{loading:!1});if($.match(t)){const{queries:a}=e,{modification:s,index:n,modifier:r}=t.payload;let i;return i=void 0===n?a.map(((e,t)=>{const n=r(Object.assign({},e),s);return(0,l.fR)(n,a,t)})):a.map(((e,t)=>{if(t===n){const n=r(Object.assign({},e),s);return(0,l.fR)(n,a,t)}return e})),Object.assign({},e,{queries:i,queryKeys:(0,l.$$)(i,e.datasourceInstance)})}if(U.match(t)){const{queries:a}=t.payload;return Object.assign({},e,{queries:a.slice(),queryKeys:(0,l.$$)(a,e.datasourceInstance)})}if(D.match(t)){const{queries:a}=t.payload;return Object.assign({},e,{queries:a,queryKeys:(0,l.$$)(a,e.datasourceInstance)})}if(L.match(t)){const{querySubscription:a}=t.payload;return Object.assign({},e,{querySubscription:a})}if(R.match(t)){let{logsVolumeDataProvider:a}=t.payload;return e.logsVolumeDataSubscription&&e.logsVolumeDataSubscription.unsubscribe(),Object.assign({},e,{logsVolumeDataProvider:a,logsVolumeDataSubscription:void 0})}if(E.match(t))return Object.assign({},e,{logsVolumeData:void 0});if(z.match(t)){const{logsVolumeDataSubscription:a}=t.payload;return Object.assign({},e,{logsVolumeDataSubscription:a})}if(V.match(t)){let{logsVolumeData:a}=t.payload;return Object.assign({},e,{logsVolumeData:a})}if(B.match(t))return oe(e,t);if(D.match(t)){const{queries:a}=t.payload;return Object.assign({},e,{queries:a,queryKeys:(0,l.$$)(a,e.datasourceInstance)})}if(H.match(t)){const{loadingState:a}=t.payload;return Object.assign({},e,{queryResponse:Object.assign({},e.queryResponse,{state:a}),loading:a===o.LoadingState.Loading||a===o.LoadingState.Streaming})}if(q.match(t)){const{isPaused:a}=t.payload;return Object.assign({},e,{isPaused:a})}if(W.match(t))return Object.assign({},e,{scanning:!0});if(G.match(t))return Object.assign({},e,{scanning:!1,scanRange:void 0});if(Z.match(t)){const a=5,{cache:s}=e,{queryResponse:n,cacheKey:r}=t.payload;let i=[...s];if(!i.some((e=>e.key===r))){i=[{key:r,value:n},...i].slice(0,a)}return Object.assign({},e,{cache:i})}return Q.match(t)?Object.assign({},e,{cache:[]}):e},oe=(e,t)=>{var a,s;const{response:n}=t.payload,{request:r,state:i,series:l,error:c,graphResult:d,logsResult:u,tableResult:p,traceFrames:h,nodeGraphFrames:m}=n;if(c){var g,f;if(c.type===o.DataQueryErrorType.Timeout)return Object.assign({},e,{queryResponse:n,loading:i===o.LoadingState.Loading||i===o.LoadingState.Streaming});if(c.type===o.DataQueryErrorType.Cancelled)return e;null!==(g=e.datasourceInstance)&&void 0!==g&&null!==(f=g.components)&&void 0!==f&&f.QueryCtrl&&e.eventBridge.emit(o.PanelEvents.dataError,c)}if(!r)return Object.assign({},e);if(null!==(a=e.datasourceInstance)&&void 0!==a&&null!==(s=a.components)&&void 0!==s&&s.QueryCtrl){const t=l.map((e=>(0,o.toLegacyResponseData)(e)));e.eventBridge.emit(o.PanelEvents.dataReceived,t)}return Object.assign({},e,{queryResponse:n,graphResult:d,tableResult:p,logsResult:u,loading:i===o.LoadingState.Loading||i===o.LoadingState.Streaming,showLogs:!!u,showMetrics:!!d,showTable:!!p,showTrace:!!h.length,showNodeGraph:!!m.length})}},"./public/app/features/explore/state/time.ts":(e,t,a)=>{"use strict";a.d(t,{cD:()=>f,oz:()=>b,b3:()=>v,mG:()=>x,F9:()=>y,ok:()=>w});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./packages/grafana-runtime/src/index.ts"),o=a("./public/app/core/utils/explore.ts"),l=a("./public/app/types/explore.ts"),c=a("./public/app/features/profile/state/selectors.ts"),d=a("./public/app/features/dashboard/services/TimeSrv.ts"),u=a("./public/app/features/dashboard/state/index.ts"),p=a("./public/app/features/explore/state/query.ts"),h=a("./public/app/features/explore/state/main.ts");const m=(0,s.PH)("explore/changeRange"),g=(0,s.PH)("explore/changeRefreshInterval"),f=e=>(t,a)=>{const{syncedTimes:s}=a().explore;s?(t(v(Object.assign({},e,{exploreId:l.K.left}))),t((0,p.aA)(l.K.left,{preserveCache:!0})),t(v(Object.assign({},e,{exploreId:l.K.right}))),t((0,p.aA)(l.K.right,{preserveCache:!0}))):(t(v(Object.assign({},e))),t((0,p.aA)(e.exploreId,{preserveCache:!0})))};function b(e,t){return g({exploreId:e,refreshInterval:t})}const v=e=>(t,a)=>{const{exploreId:s,absoluteRange:r,rawRange:l}=e,p=a().explore[s],h=(0,c.Z)(a().user),g=(0,c.i)(a().user),{range:b}=p;let v=b.raw;r&&(v={from:(0,n.dateTimeForTimeZone)(h,r.from),to:(0,n.dateTimeForTimeZone)(h,r.to)}),l&&(v=l);const x=(0,o.OQ)(h,v,g),y={from:x.from.valueOf(),to:x.to.valueOf()},w=Object.assign(new u.f({time:x.raw,refresh:!1,timepicker:{}}),{getTimezone:()=>h,timeRangeUpdated:e=>{t(f({exploreId:s,rawRange:e}))}});(0,d.$t)().init(w),(0,i.getTemplateSrv)().updateTimeRange((0,d.$t)().timeRange()),t(m({exploreId:s,range:x,absoluteRange:y}))};function x(e){return(t,a)=>{if(e===l.K.left){const e=a().explore.left;t(f({exploreId:l.K.right,rawRange:e.range.raw}))}else{const e=a().explore.right;t(f({exploreId:l.K.left,rawRange:e.range.raw}))}const s=a().explore.syncedTimes;t((0,h.tl)({syncedTimes:!s})),t((0,h.og)())}}function y(){return(e,t)=>{const a=(0,c.Z)(t().user),s=(0,c.i)(t().user),n=t().explore.left,r=(0,o.OQ)(a,n.range.raw,s),i={from:r.from.valueOf(),to:r.to.valueOf()};e(v({exploreId:l.K.left,absoluteRange:i}));const d=t().explore.right;if(d){const t=(0,o.OQ)(a,d.range.raw,s),n={from:t.from.valueOf(),to:t.to.valueOf()};e(v({exploreId:l.K.right,absoluteRange:n}))}e((0,h.og)())}}const w=(e,t)=>{if(g.match(t)){const{refreshInterval:a}=t.payload,s=r.RefreshPicker.isLive(a),i=(0,o.Oy)(a),l=(0,n.sortLogsResult)(e.logsResult,i);return r.RefreshPicker.isLive(e.refreshInterval)&&!s&&(0,o.RZ)(e.querySubscription),Object.assign({},e,{refreshInterval:a,queryResponse:Object.assign({},e.queryResponse,{state:s?n.LoadingState.Streaming:n.LoadingState.Done}),isLive:s,isPaused:!s&&e.isPaused,loading:s,logsResult:l})}if(m.match(t)){const{range:a,absoluteRange:s}=t.payload;return Object.assign({},e,{range:a,absoluteRange:s})}return e}},"./public/app/features/explore/state/utils.ts":(e,t,a)=>{"use strict";a.d(t,{M7:()=>v,lp:()=>m,M0:()=>x,D:()=>b,r_:()=>g,t5:()=>h,FG:()=>u});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/features/plugins/datasource_srv.ts"),r=a("./public/app/core/store.ts"),i=a("./public/app/core/utils/explore.ts");const o=e=>{let t=e.raw.from;(0,s.isDateTime)(t)&&(t=t.valueOf().toString(10));let a=e.raw.to;return(0,s.isDateTime)(a)&&(a=a.valueOf().toString(10)),{from:t,to:a}};var l=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");const c={from:"now-6h",to:"now"},d="grafana.explore.style.graph",u=e=>{r.Z.set(d,e)},p=()=>{const e=r.Z.get(d);return(0,i.xq)(e)},h=()=>({containerWidth:0,datasourceInstance:null,datasourceMissing:!1,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:c},absoluteRange:{from:null,to:null},scanning:!1,loading:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:m(),tableResult:null,graphResult:null,logsResult:null,eventBridge:null,cache:[],logsVolumeDataProvider:void 0,logsVolumeData:void 0,graphStyle:p(),panelsState:{}}),m=()=>({state:s.LoadingState.NotStarted,series:[],timeRange:(0,s.getDefaultTimeRange)()});async function g(e,t){var a;let s;try{s=await(0,n.ak)().get(t)}catch(e){s=await(0,n.ak)().get()}if(s.init)try{s.init()}catch(e){console.error(e)}const o=`grafana.explore.history.${null===(a=s.meta)||void 0===a?void 0:a.id}`,l=r.Z.getObject(o,[]);return r.Z.set((0,i.I$)(e),s.uid),{history:l,instance:s}}function f(e){let t=(0,l.mapValues)(e,(e=>(0,l.isObject)(e)?f(e):e));if(t=(0,l.omitBy)(t,l.isEmpty),!(0,l.isEmpty)(t))return t}function b(e){var t;return{datasource:(null===(t=e.datasourceInstance)||void 0===t?void 0:t.name)||"",queries:e.queries.map(i.uC),range:o(e.range),panelsState:f(e.panelsState)}}function v(e){const t={from:e.from,to:e.to};return Object.entries(t).map((e=>{let[t,a]=e;return`${encodeURIComponent(t)}=${encodeURIComponent(a.toString())}`})).join("&")}function x(e,t){const a=v(t),s=e.findIndex((e=>e.key===a));return s>=0?e[s].value:void 0}},"./public/app/features/explore/utils/links.ts":(e,t,a)=>{"use strict";a.d(t,{a:()=>l,u:()=>c});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./packages/grafana-runtime/src/index.ts"),i=a("./public/app/features/panel/panellinks/link_srv.ts"),o=a("./public/app/core/services/context_srv.ts");const l=e=>{const{field:t,vars:a,splitOpenFn:s,range:l,rowIndex:c,dataFrame:d}=e,u=Object.assign({},a||{});if(u.__value={value:{raw:t.values.get(c)},text:"Raw value"},d&&(u.__data={value:{name:d.name,refId:d.refId,fields:(0,n.getFieldDisplayValuesProxy)({frame:d,rowIndex:c})},text:"Data"}),t.config.links){const e=[];return o.Vt.hasAccessToExplore()?e.push(...t.config.links):e.push(...t.config.links.filter((e=>!e.internal))),e.map((e=>{if(e.internal)return(0,n.mapInternalLinkToExplore)({link:e,internalLink:e.internal,scopedVars:u,range:l,field:t,onClickFn:s,replaceVariables:(0,r.getTemplateSrv)().replace.bind((0,r.getTemplateSrv)())});{const a=(e,t)=>(0,r.getTemplateSrv)().replace(e,Object.assign({},t,u)),s=(0,i.Bq)().getDataLinkUIModel(e,a,t);return s.title||(s.title=function(e){e.indexOf("://")<0&&(e=`http://${e}`);let t;try{t=new URL(e).hostname}catch(a){t=e}return t}(s.href)),s}}))}return[]};function c(e,t){return(0,s.useCallback)(((a,s)=>a.fields.flatMap((n=>{var r,i;return null!==(r=n.config)&&void 0!==r&&r.links&&null!==(i=n.config)&&void 0!==i&&i.links.length?l({field:n,rowIndex:s,range:e,dataFrame:a,splitOpenFn:t}):[]}))),[e,t])}},"./public/app/features/expressions/ExpressionDatasource.ts":(e,t,a)=>{"use strict";a.d(t,{Yq:()=>T,mV:()=>_,bE:()=>O});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/features/expressions/types.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),i=a("./packages/grafana-ui/src/index.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=e=>{let{labelWidth:t,onChange:a,refIds:s,query:r}=e;const l=n.Fr.find((e=>e.value===r.downsampler)),c=n.r8.find((e=>e.value===r.upsampler));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.InlineFieldRow,{children:(0,o.jsx)(i.InlineField,{label:"Input",labelWidth:t,children:(0,o.jsx)(i.Select,{menuShouldPortal:!0,onChange:e=>{a(Object.assign({},r,{expression:e.value}))},options:s,value:r.expression,width:20})})}),(0,o.jsxs)(i.InlineFieldRow,{children:[(0,o.jsx)(i.InlineField,{label:"Resample to",labelWidth:t,tooltip:"10s, 1m, 30m, 1h",children:(0,o.jsx)(i.Input,{onChange:e=>{a(Object.assign({},r,{window:e.target.value}))},value:r.window,width:15})}),(0,o.jsx)(i.InlineField,{label:"Downsample",children:(0,o.jsx)(i.Select,{menuShouldPortal:!0,options:n.Fr,value:l,onChange:e=>{a(Object.assign({},r,{downsampler:e.value}))},width:25})}),(0,o.jsx)(i.InlineField,{label:"Upsample",children:(0,o.jsx)(i.Select,{menuShouldPortal:!0,options:n.r8,value:c,onChange:e=>{a(Object.assign({},r,{upsampler:e.value}))},width:25})})]})]})},c=e=>{var t,a;let{labelWidth:s,onChange:r,refIds:l,query:c}=e;const d=n.SQ.find((e=>e.value===c.reducer)),u=e=>{r(Object.assign({},c,{settings:e}))},p=e=>{const t=e.currentTarget.valueAsNumber;u({mode:n.kN.ReplaceNonNumbers,replaceWithValue:null!=t?t:0})},h=null!==(t=null===(a=c.settings)||void 0===a?void 0:a.mode)&&void 0!==t?t:n.kN.Strict;return(0,o.jsxs)(i.InlineFieldRow,{children:[(0,o.jsx)(i.InlineField,{label:"Function",labelWidth:s,children:(0,o.jsx)(i.Select,{menuShouldPortal:!0,options:n.SQ,value:d,onChange:e=>{r(Object.assign({},c,{reducer:e.value}))},width:25})}),(0,o.jsx)(i.InlineField,{label:"Input",labelWidth:s,children:(0,o.jsx)(i.Select,{menuShouldPortal:!0,onChange:e=>{r(Object.assign({},c,{expression:e.value}))},options:l,value:c.expression,width:20})}),(0,o.jsx)(i.InlineField,{label:"Mode",labelWidth:s,children:(0,o.jsx)(i.Select,{menuShouldPortal:!0,onChange:e=>{var t;let a;if(e.value===n.kN.ReplaceNonNumbers){let e=0;var s,r;(null===(t=c.settings)||void 0===t?void 0:t.mode)===n.kN.ReplaceNonNumbers&&(e=null!==(s=null===(r=c.settings)||void 0===r?void 0:r.replaceWithValue)&&void 0!==s?s:0),a={mode:n.kN.ReplaceNonNumbers,replaceWithValue:e}}else a={mode:e.value};u(a)},options:n.ev,value:h,width:25})}),(()=>{var e,t;if(h===n.kN.ReplaceNonNumbers)return(0,o.jsx)(i.InlineField,{label:"Replace With",labelWidth:s,children:(0,o.jsx)(i.Input,{type:"number",width:10,onChange:p,value:null!==(e=null===(t=c.settings)||void 0===t?void 0:t.replaceWithValue)&&void 0!==e?e:0})})})()]})};var d=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js");const u=e=>{let{labelWidth:t,onChange:a,query:s}=e;return(0,o.jsx)(i.InlineField,{label:"Expression",labelWidth:t,className:d.css`
        align-items: baseline;
      `,children:(0,o.jsx)(i.TextArea,{value:s.expression,onChange:e=>{a(Object.assign({},s,{expression:e.target.value}))},rows:4,placeholder:"Math operations on one more queries, you reference the query by ${refId} ie. $A, $B, $C etc\nExample: $A + $B\nAvailable functions: abs(), log(), is_number(), round(), ceil(), floor(), is_inf(), is_nan(), is_null(), "})})};var p,h=a("./public/app/features/alerting/state/alertDef.ts");const m=h.Z.reducerTypes.map((e=>({label:e.text,value:e.value}))),g=h.Z.evalOperators.map((e=>({label:e.text,value:e.value}))),f=h.Z.evalFunctions.map((e=>({label:e.text,value:e.value}))),b=e=>{let{condition:t,index:a,onChange:s,onRemoveCondition:n,refIds:r}=e;const l=(0,i.useStyles)(v),c=(e,a)=>{const n=parseFloat(e.currentTarget.value),r=[...t.evaluator.params];r[a]=n,s(Object.assign({},t,{evaluator:Object.assign({},t.evaluator,{params:r})}))},u=d.css`
    width: 60px;
  `,b=t.evaluator.type===h.$.IsWithinRange||t.evaluator.type===h.$.IsOutsideRange;return(0,o.jsxs)(i.InlineFieldRow,{children:[0===a?(0,o.jsx)("div",{className:(0,d.cx)(l.button,u),children:"WHEN"}):(0,o.jsx)(i.ButtonSelect,{className:(0,d.cx)(l.buttonSelectText,u),options:g,onChange:e=>{s(Object.assign({},t,{operator:{type:e.value}}))},value:g.find((e=>e.value===t.operator.type))}),(0,o.jsx)(i.Select,{menuShouldPortal:!0,options:m,onChange:e=>{s(Object.assign({},t,{reducer:{type:e.value,params:[]}}))},width:20,value:m.find((e=>e.value===t.reducer.type))}),(0,o.jsx)("div",{className:l.button,children:"OF"}),(0,o.jsx)(i.Select,{menuShouldPortal:!0,onChange:e=>{s(Object.assign({},t,{query:{params:[e.value]}}))},options:r,width:15,value:r.find((e=>e.value===t.query.params[0]))}),(0,o.jsx)(i.ButtonSelect,{className:l.buttonSelectText,options:f,onChange:e=>{s(Object.assign({},t,{evaluator:{params:t.evaluator.params,type:e.value}}))},value:f.find((e=>e.value===t.evaluator.type))}),b?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Input,{type:"number",width:10,onChange:e=>c(e,0),value:t.evaluator.params[0]}),(0,o.jsx)("div",{className:l.button,children:"TO"}),(0,o.jsx)(i.Input,{type:"number",width:10,onChange:e=>c(e,1),value:t.evaluator.params[1]})]}):t.evaluator.type!==h.$.HasNoValue?(0,o.jsx)(i.Input,{type:"number",width:10,onChange:e=>c(e,0),value:t.evaluator.params[0]}):null,(0,o.jsx)(i.Button,{variant:"secondary",type:"button",onClick:()=>n(a),children:p||(p=(0,o.jsx)(i.Icon,{name:"trash-alt"}))})]})},v=e=>{const t=d.css`
    color: ${e.colors.textBlue};
    font-size: ${e.typography.size.sm};
  `;return{buttonSelectText:t,button:(0,d.cx)(d.css`
        display: flex;
        align-items: center;
        border-radius: ${e.border.radius.sm};
        font-weight: ${e.typography.weight.semibold};
        border: 1px solid ${e.colors.border1};
        white-space: nowrap;
        padding: 0 ${e.spacing.sm};
        background-color: ${e.colors.bodyBg};
      `,t)}};var x,y=a("./public/app/features/expressions/utils/expressionTypes.ts");const w=e=>{var t;let{onChange:a,query:s,refIds:n}=e;const r=e=>{if(s.conditions){const t=s.conditions[e],n=s.conditions.filter((e=>e!==t)).map(((e,t)=>0===t?Object.assign({},e,{operator:{type:"when"}}):e));a(Object.assign({},s,{conditions:n}))}};return(0,o.jsxs)("div",{children:[(0,o.jsx)(i.InlineFieldRow,{children:(0,o.jsx)(i.InlineField,{label:"Conditions",labelWidth:14,children:(0,o.jsx)("div",{children:null===(t=s.conditions)||void 0===t?void 0:t.map(((e,t)=>{if(e)return(0,o.jsx)(b,{index:t,condition:e,onChange:e=>((e,t)=>{s.conditions&&a(Object.assign({},s,{conditions:[...s.conditions.slice(0,t),e,...s.conditions.slice(t+1)]}))})(e,t),onRemoveCondition:r,refIds:n},t)}))})})}),(0,o.jsx)(i.Button,{variant:"secondary",type:"button",onClick:()=>{s.conditions&&a(Object.assign({},s,{conditions:s.conditions.length>0?[...s.conditions,y.R]:[y.R]}))},children:x||(x=(0,o.jsx)(i.Icon,{name:"plus-circle"}))})]})};class j extends r.PureComponent{constructor(){var e,t,a;super(...arguments),a=e=>{const{query:t,onChange:a}=this.props;a((0,y.J)(Object.assign({},t,{type:e.value})))},(t="onSelectExpressionType")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}renderExpressionType(){const{onChange:e,query:t,queries:a}=this.props,s=a.filter((e=>t.refId!==e.refId)).map((e=>({value:e.refId,label:e.refId})));switch(t.type){case n.Us.math:return(0,o.jsx)(u,{onChange:e,query:t,labelWidth:14});case n.Us.reduce:return(0,o.jsx)(c,{refIds:s,onChange:e,labelWidth:14,query:t});case n.Us.resample:return(0,o.jsx)(l,{query:t,labelWidth:14,onChange:e,refIds:s});case n.Us.classic:return(0,o.jsx)(w,{onChange:e,query:t,refIds:s})}}render(){const{query:e}=this.props,t=n._M.find((t=>t.value===e.type));return(0,o.jsxs)("div",{children:[(0,o.jsx)(i.InlineField,{label:"Operation",labelWidth:14,children:(0,o.jsx)(i.Select,{menuShouldPortal:!0,options:n._M,value:t,onChange:this.onSelectExpressionType,width:25})}),this.renderExpressionType()]})}}var C=a("./packages/grafana-runtime/src/index.ts"),k=a("./packages/grafana-runtime/src/utils/DataSourceWithBackend.ts");class S extends C.DataSourceWithBackend{constructor(e){super(e),this.instanceSettings=e}getCollapsedText(e){return`Expression: ${e.type}`}newQuery(e){var t,a;return{refId:"--",type:null!==(t=null==e?void 0:e.type)&&void 0!==t?t:n.Us.math,datasource:k.hr,conditions:null!==(a=null==e?void 0:e.conditions)&&void 0!==a?a:void 0}}}const T="-100",O={id:-100,uid:T,name:k.hr.type,type:k.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:s.PluginType.datasource,name:k.hr.type,id:k.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{}},_=new S(O);_.meta={id:k.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},_.components={QueryEditor:j}},"./public/app/features/expressions/types.ts":(e,t,a)=>{"use strict";a.d(t,{Us:()=>n,_M:()=>r,SQ:()=>i,kN:()=>o,ev:()=>l,Fr:()=>c,r8:()=>d});var s=a("./packages/grafana-data/src/index.ts");let n;!function(e){e.math="math",e.reduce="reduce",e.resample="resample",e.classic="classic_conditions"}(n||(n={}));const r=[{value:n.math,label:"Math"},{value:n.reduce,label:"Reduce"},{value:n.resample,label:"Resample"},{value:n.classic,label:"Classic condition"}],i=[{value:s.ReducerID.min,label:"Min",description:"Get the minimum value"},{value:s.ReducerID.max,label:"Max",description:"Get the maximum value"},{value:s.ReducerID.mean,label:"Mean",description:"Get the average value"},{value:s.ReducerID.sum,label:"Sum",description:"Get the sum of all values"},{value:s.ReducerID.count,label:"Count",description:"Get the number of values"},{value:s.ReducerID.last,label:"Last",description:"Get the last value"}];let o;!function(e){e.Strict="",e.ReplaceNonNumbers="replaceNN",e.DropNonNumbers="dropNN"}(o||(o={}));const l=[{value:o.Strict,label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:o.DropNonNumbers,label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:o.ReplaceNonNumbers,label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],c=[{value:s.ReducerID.min,label:"Min",description:"Fill with the minimum value"},{value:s.ReducerID.max,label:"Max",description:"Fill with the maximum value"},{value:s.ReducerID.mean,label:"Mean",description:"Fill with the average value"},{value:s.ReducerID.sum,label:"Sum",description:"Fill with the sum of all values"}],d=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}]},"./public/app/features/expressions/utils/expressionTypes.ts":(e,t,a)=>{"use strict";a.d(t,{J:()=>i,R:()=>o});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/features/expressions/types.ts"),r=a("./public/app/features/alerting/state/alertDef.ts");const i=e=>{switch(e.type){case n.Us.reduce:e.reducer||(e.reducer=s.ReducerID.mean),e.expression=void 0;break;case n.Us.resample:e.downsampler||(e.downsampler=s.ReducerID.mean),e.upsampler||(e.upsampler="fillna"),e.reducer=void 0;break;case n.Us.classic:e.conditions||(e.conditions=[o]);break;default:e.reducer=void 0}return e},o={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:r.$.IsAbove}}},"./public/app/features/folders/state/actions.ts":(e,t,a)=>{"use strict";a.d(t,{Pb:()=>p,OD:()=>h,Go:()=>m,a:()=>g,J6:()=>f,v7:()=>v,Uk:()=>x,pz:()=>y,W7:()=>w});var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./public/app/core/services/backend_srv.ts"),i=a("./public/app/core/actions/index.ts"),o=a("./public/app/features/folders/state/navModel.ts"),l=a("./public/app/core/app_events.ts"),c=a("./public/app/features/folders/state/reducers.ts"),d=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/lastValueFrom.js"),u=a("./public/app/core/copy/appNotification.ts");function p(e){return async t=>{const a=await r.ae.getFolderByUid(e);t((0,c.G3)(a)),t((0,i.RL)((0,o.B)(a)))}}function h(e){return async t=>{const a=await r.ae.put(`/api/folders/${e.uid}`,{title:e.title,version:e.version});l.Z.emit(s.AppEvents.alertSuccess,["Folder saved"]),n.locationService.push(`${a.url}/settings`)}}function m(e){return async()=>{await r.ae.delete(`/api/folders/${e}?forceDeleteRules=false`),n.locationService.push("/dashboards")}}function g(e){return async t=>{const a=await r.ae.get(`/api/folders/${e}/permissions`);t((0,c.R7)(a))}}function f(e){return async t=>{try{await(0,d.n)(r.ae.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${e}/permissions`})),t((0,c.$$)(!0))}catch(e){var a;if(403!==e.status)t((0,i.$l)((0,u.ZR)("Error checking folder permissions",null===(a=e.data)||void 0===a?void 0:a.message)));t((0,c.$$)(!1))}}}function b(e){return{userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}}function v(e,t){return async(a,s)=>{const n=s().folder,i=[];for(const a of n.permissions){if(a.inherited)continue;const s=b(a);e===a&&(s.permission=t),i.push(s)}await r.ae.post(`/api/folders/${n.uid}/permissions`,{items:i}),await a(g(n.uid))}}function x(e){return async(t,a)=>{const s=a().folder,n=[];for(const t of s.permissions)t.inherited||t===e||n.push(b(t));await r.ae.post(`/api/folders/${s.uid}/permissions`,{items:n}),await t(g(s.uid))}}function y(e){return async(t,a)=>{const s=a().folder,n=[];for(const e of s.permissions)e.inherited||n.push(b(e));n.push({userId:e.userId,teamId:e.teamId,role:e.role,permission:e.permission}),await r.ae.post(`/api/folders/${s.uid}/permissions`,{items:n}),await t(g(s.uid))}}function w(e){return async()=>{const t=await(0,n.getBackendSrv)().post("/api/folders",{title:e});l.Z.emit(s.AppEvents.alertSuccess,["Folder Created","OK"]),n.locationService.push(s.locationUtil.stripBaseFromUrl(t.url))}}},"./public/app/features/folders/state/navModel.ts":(e,t,a)=>{"use strict";function s(e){const t={icon:"folder",id:"manage-folder",subTitle:"Manage folder dashboards and permissions",url:"",text:e.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"apps",id:`folder-dashboards-${e.uid}`,text:"Dashboards",url:e.url}]};return t.children.push({active:!1,icon:"library-panel",id:`folder-library-panels-${e.uid}`,text:"Panels",url:`${e.url}/library-panels`}),e.canAdmin&&t.children.push({active:!1,icon:"lock",id:`folder-permissions-${e.uid}`,text:"Permissions",url:`${e.url}/permissions`}),e.canSave&&t.children.push({active:!1,icon:"cog",id:`folder-settings-${e.uid}`,text:"Settings",url:`${e.url}/settings`}),t}function n(e){const t=s({id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,version:0});return t.children[e].active=!0,{main:t,node:t.children[e]}}a.d(t,{B:()=>s,_:()=>n})},"./public/app/features/folders/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{R7:()=>i,G3:()=>o,Ss:()=>l,$$:()=>c,ZP:()=>d});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./public/app/core/utils/acl.ts");const r=(0,s.oM)({name:"folder",initialState:{id:0,uid:"loading",title:"loading",url:"",canSave:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},reducers:{loadFolder:(e,t)=>Object.assign({},e,t.payload,{hasChanged:!1}),setFolderTitle:(e,t)=>Object.assign({},e,{title:t.payload,hasChanged:t.payload.trim().length>0}),loadFolderPermissions:(e,t)=>Object.assign({},e,{permissions:(0,n.A)(t.payload)}),setCanViewFolderPermissions:(e,t)=>(e.canViewFolderPermissions=t.payload,e)}}),{loadFolderPermissions:i,loadFolder:o,setFolderTitle:l,setCanViewFolderPermissions:c}=r.actions,d={folder:r.reducer}},"./public/app/features/geo/editor/GazetteerPathEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{Q:()=>c});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/features/geo/gazetteer/gazetteer.ts"),i=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:r.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],c=e=>{let{value:t,onChange:a,context:i,item:c}=e;const u=d((0,n.useTheme2)()),[p,h]=(0,s.useState)(),m=c.settings;(0,s.useEffect)((()=>{!async function(){const e=await(0,r.so)(t);h(e)}()}),[t,h]);const{current:g,options:f}=(0,s.useMemo)((()=>{let e=null!=m&&m.options?[...m.options]:[...l],t=null==e?void 0:e.find((e=>e.value===(null==p?void 0:p.path)));return!t&&p&&(t={label:p.path,value:p.path},e.push(t)),{options:e,current:t}}),[p,null==m?void 0:m.options]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.Select,{menuShouldPortal:!0,value:g,options:f,onChange:e=>a(e.value),allowCustomValue:!0,formatCreateLabel:e=>`Load from URL: ${e}`}),p&&(0,o.jsxs)(o.Fragment,{children:[p.error&&(0,o.jsx)(n.Alert,{title:p.error,severity:"warning"}),p.count&&(0,o.jsxs)("div",{className:u.keys,children:[(0,o.jsxs)("b",{children:["(",p.count,")"]}),p.examples(10).map((e=>(0,o.jsxs)("span",{children:[e,","]},e))),p.count>10&&" ..."]})]})]})},d=(0,n.stylesFactory)((e=>({keys:i.css`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `})))},"./public/app/features/geo/editor/locationEditor.ts":(e,t,a)=>{"use strict";a.d(t,{C:()=>r});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/features/geo/editor/GazetteerPathEditor.tsx");function r(e,t,a,r){switch(a.addRadio({path:`${t}mode`,name:e,description:"",defaultValue:s.FrameGeometrySourceMode.Auto,settings:{options:[{value:s.FrameGeometrySourceMode.Auto,label:"Auto"},{value:s.FrameGeometrySourceMode.Coords,label:"Coords"},{value:s.FrameGeometrySourceMode.Geohash,label:"Geohash"},{value:s.FrameGeometrySourceMode.Lookup,label:"Lookup"}]}}),null==r?void 0:r.mode){case s.FrameGeometrySourceMode.Coords:a.addFieldNamePicker({path:`${t}latitude`,name:"Latitude field",settings:{filter:e=>e.type===s.FieldType.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${t}longitude`,name:"Longitude field",settings:{filter:e=>e.type===s.FieldType.number,noFieldsMessage:"No numeric fields found"}});break;case s.FrameGeometrySourceMode.Geohash:a.addFieldNamePicker({path:`${t}.geohash`,name:"Geohash field",settings:{filter:e=>e.type===s.FieldType.string,noFieldsMessage:"No strings fields found"}});break;case s.FrameGeometrySourceMode.Lookup:a.addFieldNamePicker({path:`${t}lookup`,name:"Lookup field",settings:{filter:e=>e.type===s.FieldType.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${t}gazetteer`,name:"Gazetteer",editor:n.Q})}}},"./public/app/features/geo/format/utils.ts":(e,t,a)=>{"use strict";a.d(t,{EK:()=>h,Fh:()=>m,ie:()=>p,uZ:()=>d,zS:()=>u});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/core/components/TransformersUI/spatial/utils.ts"),r=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/geom/Point.js"),i=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/geom/GeometryCollection.js"),o=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/geom/LineString.js"),l=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/proj.js");function c(e,t,a){t&a?e[0]=(e[0]+e[1])/2:e[1]=(e[0]+e[1])/2}function d(e){var t;return{name:null!==(t=e.name)&&void 0!==t?t:"Point",type:s.FieldType.geo,values:new s.ArrayVector(e.values.toArray().map((e=>{const t=function(e){if(null==e||!e.length)return;const t=[16,8,4,2,1];let a=!0;const s=[],n=[];let r;s[0]=-90,s[1]=90,n[0]=-180,n[1]=180,e.split("").forEach((e=>{r="0123456789bcdefghjkmnpqrstuvwxyz".indexOf(e),t.forEach((e=>{c(a?n:s,r,e),a=!a}))}));const i=(s[0]+s[1])/2;return[(n[0]+n[1])/2,i]}(e);if(t)return new r.Z((0,l.mi)(t))}))),config:g}}function u(e,t){const a=new Array(e.values.length);for(let s=0;s<e.values.length;s++)a[s]=new r.Z((0,l.mi)([e.values.get(s),t.values.get(s)]));return{name:"Point",type:s.FieldType.geo,values:new s.ArrayVector(a),config:g}}function p(e,t){const a=t.values.length,n=new Array(a);for(let s=0;s<a;s++){var r;n[s]=null===(r=e.find(t.values.get(s)))||void 0===r?void 0:r.geometry()}return{name:"Geometry",type:s.FieldType.geo,values:new s.ArrayVector(n),config:g}}function h(e,t){const a=e.values.toArray(),n=t.values.toArray();if(!a||!n)throw"missing src/dest";if(a.length!==n.length)throw"Source and destination field lengths do not match";const r=e.values.length,o=new Array(r);for(let e=0;e<r;e++){const t=a[e],s=n[e];t&&s?o[e]=new i.Z([t,s]):t?o[e]=t:s&&(o[e]=s)}return{name:"Geometry",type:s.FieldType.geo,values:new s.ArrayVector(o),config:g}}function m(e,t){const a=e.values.toArray(),r=t.values.toArray();if(!a||!r)throw"missing src/dest";if(a.length!==r.length)throw"Source and destination field lengths do not match";const i=e.values.length,l=new Array(i);for(let e=0;e<i;e++){const t=a[e],s=r[e];t&&s&&(l[e]=new o.Z([(0,n.Lb)(t),(0,n.Lb)(s)]))}return{name:"Geometry",type:s.FieldType.geo,values:new s.ArrayVector(l),config:g}}const g=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},"./public/app/features/geo/gazetteer/gazetteer.ts":(e,t,a)=>{"use strict";a.d(t,{LI:()=>h,so:()=>m});var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/geom/Point.js"),i=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/proj.js");var o=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/format/GeoJSON.js");function l(e){return e.count<1?s.FieldType.other:e.types.size>1?(e.values=e.values.map((e=>null!=e?`${e}`:e)),s.FieldType.string):e.types.values().next().value}var c=a("./public/app/features/geo/format/utils.ts"),d=a("../../opt/drone/yarncache/ol-npm-6.12.0-aa56e5c786-a0eb5766bd.zip/node_modules/ol/extent.js");function u(e,t){let a;if(Array.isArray(t)){const a=t[0];if(a.latitude&&a.longitude&&(a.key||a.keys))return function(e,t){let a=0;const s=new Map;for(const e of t){const t=new r.Z((0,i.mi)([e.longitude,e.latitude])),n={point:()=>t,geometry:()=>t};if(e.name&&(s.set(e.name,n),s.set(e.name.toUpperCase(),n)),e.key&&(s.set(e.key,n),s.set(e.key.toUpperCase(),n)),e.keys)for(const t of e.keys)s.set(t,n),s.set(t.toUpperCase(),n);a++}return{path:e,find:e=>{let t=s.get(e);return t||"string"!=typeof e||(t=s.get(e.toUpperCase())),t},count:a,examples:e=>{const t=[];if(s.size<1)t.push("no values found");else for(const a of s.keys())if(t.push(a),t.length>=e)break;return t}}}(e,t)}else Array.isArray(null==t?void 0:t.features)&&"FeatureCollection"===(null==t?void 0:t.type)&&(a=function(e){const t=(new o.Z).readFeatures(e,{featureProjection:"EPSG:3857"}),a=t.length,n=new Array(a).fill(null),r=[],i=new Map,c=e=>{let t=i.get(e);return t||(t={types:new Set,values:new Array(a).fill(null),count:0},r.push(e),i.set(e,t)),t},d=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];for(const e of t)if(!i.has(e))return e;return"___"+t[0]},u={types:new Set,values:new Array(a).fill(null),count:0};for(let e=0;e<a;e++){const a=t[e];n[e]=a.getGeometry();const r=a.getId();null!=r&&(u.values[e]=r,u.types.add((0,s.getFieldTypeFromValue)(r)),u.count++);for(const t of a.getKeys()){const r=a.get(t);if(r===n[e]||null==r)continue;const i=c(t);i.values[e]=r,i.types.add((0,s.getFieldTypeFromValue)(r)),i.count++}}const p=[];if(u.count>0){const e=l(u);p.push({name:d("id","_id","__id"),type:e,values:new s.ArrayVector(u.values),config:{}})}p.push({name:d("geo","geometry"),type:s.FieldType.geo,values:new s.ArrayVector(n),config:{}});for(const e of r){const t=i.get(e);if(!t)continue;const a=l(t);p.push({name:e,type:a,values:new s.ArrayVector(t.values),config:{}})}return{fields:p,length:a}}(t));if(!a)try{a=(0,s.toDataFrame)(t)}catch(t){return{path:e,error:`${t}`,find:e=>{},examples:e=>[]}}return function(e,t){const a=[];let n,i,o,l,u;for(const r of e.fields)if(r.type===s.FieldType.geo&&(n=r),u||r.type!==s.FieldType.string||(u=r),r.name){t.keys&&t.keys.includes(r.name)&&a.push(r);const e=r.name.toUpperCase();switch(e){case"LAT":case"LATITUTE":i=r;break;case"LON":case"LNG":case"LONG":case"LONGITUE":o=r;break;case"GEOHASH":l=r;break;case"ID":case"UID":case"KEY":case"CODE":t.keys||a.push(r);break;default:t.keys||(e.endsWith("_ID")||e.endsWith("_CODE"))&&a.push(r)}}!a.length&&u&&a.push(u);let p=!1;n?p="Point"===n.values.get(0).getType():l?(n=(0,c.uZ)(l),p=!0):i&&o&&(n=(0,c.zS)(o,i),p=!0);const h=new Map;return a.forEach((e=>{e.values.toArray().forEach(((e,t)=>{const a=`${e}`;h.set(a.toUpperCase(),t),h.set(a,t)}))})),{path:t.path,find:t=>{const a=h.get(t);if(null!=a){var s;const t=null===(s=n)||void 0===s?void 0:s.values.get(a);return{frame:e,index:a,point:()=>!t||p?t:new r.Z((0,d.qg)(t.getExtent())),geometry:()=>t}}},examples:e=>{const t=[];for(let a of h.keys())if(t.push(a),t.length>e)break;return t},frame:()=>e,count:e.length}}(a,{path:e})}const p={},h="public/gazetteer/countries.json";async function m(e){e||(e=h);let t=p[e];if(!t){try{t=u(e,await(0,n.getBackendSrv)().get(e))}catch(a){console.warn("Error loading placename lookup",e,a),t={path:e,error:"Error loading URL",find:e=>{},examples:e=>[]}}p[e]=t}return t}},"./public/app/features/geo/utils/location.ts":(e,t,a)=>{"use strict";a.d(t,{cJ:()=>c,g6:()=>d});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/features/geo/gazetteer/gazetteer.ts"),r=a("./public/app/features/geo/format/utils.ts");function i(e){return t=>{for(const a of t.fields)if(e(a,t,[]))return a}}function o(e){return t=>{for(const a of t.fields){if(e.has(a.name.toLowerCase()))return a;const n=(0,s.getFieldDisplayName)(a,t);if(e.has(n))return a}}}const l={mode:s.FrameGeometrySourceMode.Auto,geohash:o(new Set(["geohash"])),latitude:o(new Set(["latitude","lat"])),longitude:o(new Set(["longitude","lon","lng"])),h3:o(new Set(["h3"])),wkt:o(new Set(["wkt"])),lookup:o(new Set(["lookup"])),geo:e=>e.fields.find((e=>e.type===s.FieldType.geo))};async function c(e){var t;const a=Object.assign({},l,{mode:null!==(t=null==e?void 0:e.mode)&&void 0!==t?t:s.FrameGeometrySourceMode.Auto});switch(a.mode){case s.FrameGeometrySourceMode.Geohash:null!=e&&e.geohash&&(a.geohash=i((0,s.getFieldMatcher)({id:s.FieldMatcherID.byName,options:e.geohash})));break;case s.FrameGeometrySourceMode.Lookup:null!=e&&e.lookup&&(a.lookup=i((0,s.getFieldMatcher)({id:s.FieldMatcherID.byName,options:e.lookup}))),a.gazetteer=await(0,n.so)(null==e?void 0:e.gazetteer);break;case s.FrameGeometrySourceMode.Coords:null!=e&&e.latitude&&(a.latitude=i((0,s.getFieldMatcher)({id:s.FieldMatcherID.byName,options:e.latitude}))),null!=e&&e.longitude&&(a.longitude=i((0,s.getFieldMatcher)({id:s.FieldMatcherID.byName,options:e.longitude})))}return a}function d(e,t){const a=function(e,t){var a;const n={mode:null!==(a=t.mode)&&void 0!==a?a:s.FrameGeometrySourceMode.Auto};if(n.mode===s.FrameGeometrySourceMode.Auto){if(n.geo=t.geo(e),n.geo)return n;if(n.latitude=t.latitude(e),n.longitude=t.longitude(e),n.latitude&&n.longitude)return n.mode=s.FrameGeometrySourceMode.Coords,n;if(n.geohash=t.geohash(e),n.geohash)return n.mode=s.FrameGeometrySourceMode.Geohash,n;if(n.lookup=t.geohash(e),n.lookup)return n.mode=s.FrameGeometrySourceMode.Lookup,n}switch(n.mode){case s.FrameGeometrySourceMode.Coords:n.latitude=t.latitude(e),n.longitude=t.longitude(e);break;case s.FrameGeometrySourceMode.Geohash:n.geohash=t.geohash(e);break;case s.FrameGeometrySourceMode.Lookup:n.lookup=t.lookup(e)}return n}(e,t);switch(a.mode){case s.FrameGeometrySourceMode.Auto:return a.geo?{field:a.geo}:{warning:"Unable to find location fields"};case s.FrameGeometrySourceMode.Coords:return a.latitude&&a.longitude?{field:(0,r.zS)(a.longitude,a.latitude),derived:!0}:{warning:"Missing latitude/longitude fields"};case s.FrameGeometrySourceMode.Geohash:return a.geohash?{field:(0,r.uZ)(a.geohash),derived:!0}:{warning:"Missing geohash field"};case s.FrameGeometrySourceMode.Lookup:return a.lookup?t.gazetteer?{field:(0,r.ie)(t.gazetteer,a.lookup),derived:!0}:{warning:"Gazetteer not found"}:{warning:"Missing lookup field"}}return{warning:"unable to find geometry"}}},"./public/app/features/library-panels/components/AddLibraryPanelModal/AddLibraryPanelModal.tsx":(e,t,a)=>{"use strict";a.d(t,{T:()=>p,c:()=>h});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/core/components/Select/FolderPicker.tsx"),i=a("./public/app/features/library-panels/utils/usePanelSave.ts"),o=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useDebounce.js"),l=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsync.js"),c=a("./public/app/features/library-panels/state/api.ts"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u=["isOpen","panel","initialFolderId"];const p=e=>{let{panel:t,initialFolderId:a,onDismiss:u}=e;const[p,h]=(0,s.useState)(a),[m,g]=(0,s.useState)(t.title),[f,b]=(0,s.useState)(t.title),[v,x]=(0,s.useState)(!1);(0,s.useEffect)((()=>x(!0)),[m]),(0,o.Z)((()=>b(m)),350,[m]);const{saveLibraryPanel:y}=(0,i.E)(),w=(0,s.useCallback)((()=>{t.libraryPanel={uid:void 0,name:m},y(t,p).then((e=>{e instanceof Error||u()}))}),[t,m,p,u,y]),j=(0,l.Z)((async()=>{try{return!(await(0,c.jh)(m)).some((e=>e.folderId===p))}catch(e){return e.isHandled=!0,!0}finally{x(!1)}}),[f,p]),C=!(null!=j&&j.value||void 0===j.value||m!==f||v);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.Field,{label:"Library panel name",invalid:C,error:C?"Library panel with this name already exists":"",children:(0,d.jsx)(n.Input,{id:"share-panel-library-panel-name-input",name:"name",value:m,onChange:e=>g(e.currentTarget.value)})}),(0,d.jsx)(n.Field,{label:"Save in folder",description:"Library panel permissions are derived from the folder permissions",children:(0,d.jsx)(r.E,{onChange:e=>{let{id:t}=e;return h(t)},initialFolderId:a,inputId:"share-panel-library-panel-folder-picker"})}),(0,d.jsxs)(n.Modal.ButtonRow,{children:[(0,d.jsx)(n.Button,{variant:"secondary",onClick:u,fill:"outline",children:"Cancel"}),(0,d.jsx)(n.Button,{onClick:w,disabled:C,children:"Create library panel"})]})]})},h=e=>{let{isOpen:t=!1,panel:a,initialFolderId:s}=e,r=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,u);return(0,d.jsx)(n.Modal,{title:"Create library panel",isOpen:t,onDismiss:r.onDismiss,children:(0,d.jsx)(p,{panel:a,initialFolderId:s,onDismiss:r.onDismiss})})}},"./public/app/features/library-panels/components/UnlinkModal/UnlinkModal.tsx":(e,t,a)=>{"use strict";a.d(t,{i:()=>r});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/index.ts"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const r=e=>{let{isOpen:t,onConfirm:a,onDismiss:r}=e;return(0,n.jsx)(s.ConfirmModal,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:"If you unlink this panel, you will be able to edit it without affecting any other dashboards. However, once you make a change you will not be able to revert to its original reusable panel.",confirmText:"Yes, unlink",onConfirm:()=>{a(),r()},onDismiss:r,isOpen:t})}},"./public/app/features/library-panels/guard.ts":(e,t,a)=>{"use strict";function s(e){var t;return Boolean(null===(t=e.libraryPanel)||void 0===t?void 0:t.uid)}a.d(t,{V:()=>s})},"./public/app/features/library-panels/state/api.ts":(e,t,a)=>{"use strict";a.d(t,{Pq:()=>i,Mh:()=>o,jh:()=>l,Kq:()=>c,Ob:()=>d,UO:()=>u,Ef:()=>p,E8:()=>h});var s=a("./public/app/features/library-panels/types.ts"),n=a("./public/app/core/services/backend_srv.ts"),r=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/lastValueFrom.js");async function i(){let{searchString:e="",perPage:t=100,page:a=1,excludeUid:r="",sortDirection:i="",typeFilter:o=[],folderFilter:l=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const c=new URLSearchParams;c.append("searchString",e),c.append("sortDirection",i),c.append("typeFilter",o.join(",")),c.append("folderFilter",l.join(",")),c.append("excludeUid",r),c.append("perPage",t.toString(10)),c.append("page",a.toString(10)),c.append("kind",s.V.Panel.toString(10));const{result:d}=await(0,n.i)().get(`/api/library-elements?${c.toString()}`);return d}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=await(0,r.n)((0,n.i)().fetch({method:"GET",url:`/api/library-elements/${e}`,showSuccessAlert:!t,showErrorAlert:!t}));return a.data.result}async function l(e){const{result:t}=await(0,n.i)().get(`/api/library-elements/name/${e}`);return t}async function c(e,t){const{result:a}=await(0,n.i)().post("/api/library-elements",{folderId:t,name:e.libraryPanel.name,model:e,kind:s.V.Panel});return a}async function d(e){const{uid:t,name:a,version:r}=e.libraryPanel,i=s.V.Panel,o=e,{result:l}=await(0,n.i)().patch(`/api/library-elements/${t}`,{name:a,model:o,version:r,kind:i});return l}function u(e){return(0,n.i)().delete(`/api/library-elements/${e}`)}async function p(e){const{result:t}=await(0,n.i)().get(`/api/library-elements/${e}/connections`);return t}async function h(e){const t=await p(e);if(0===t.length)return[];return await(0,n.i)().search({dashboardIds:t.map((e=>e.connectionId))})}},"./public/app/features/library-panels/types.ts":(e,t,a)=>{"use strict";let s,n;a.d(t,{V:()=>s}),function(e){e[e.Panel=1]="Panel",e[e.Variable=2]="Variable"}(s||(s={})),function(e){e[e.Dashboard=1]="Dashboard"}(n||(n={}))},"./public/app/features/library-panels/utils.ts":(e,t,a)=>{"use strict";a.d(t,{rm:()=>r,bF:()=>i,Pi:()=>o,i6:()=>l});var s=a("./public/app/features/library-panels/state/api.ts"),n=a("./public/app/core/copy/appNotification.ts");function r(e){return(0,n.t_)(e)}function i(e){return(0,n.AT)(e)}function o(e){const{uid:t,name:a,meta:s,version:n}=e;return{uid:t,name:a,meta:s,version:n}}async function l(e,t){const a=function(e){let t=e.getSaveModel();return t=Object.assign({libraryPanel:{name:e.title,uid:void 0}},t),t}(e),n=await function(e,t){if(!e.libraryPanel)return Promise.reject();if(e.libraryPanel&&void 0===e.libraryPanel.uid)return(0,s.Kq)(e,t);return(0,s.Ob)(e)}(a,t);return function(e,t){e.restoreModel(Object.assign({},t.model,{configRev:0,libraryPanel:o(t),title:e.title})),e.refresh()}(e,n),n}},"./public/app/features/library-panels/utils/usePanelSave.ts":(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),r=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useAsyncFn.js"),i=a("./public/app/features/library-panels/utils.ts"),o=a("./public/app/core/actions/index.ts");const l=()=>{const e=(0,n.useDispatch)(),[t,a]=(0,r.default)((async(e,t)=>{try{return await(0,i.i6)(e,t)}catch(e){throw e.isHandled=!0,new Error(e.data.message)}}),[]);return(0,s.useEffect)((()=>{t.error&&e((0,o.$l)((0,i.rm)(`Error saving library panel: "${t.error.message}"`))),t.value&&e((0,o.$l)((0,i.bF)("Library panel saved")))}),[e,t]),{state:t,saveLibraryPanel:a}}},"./public/app/features/live/dashboard/dashboardWatcher.ts":(e,t,a)=>{"use strict";a.d(t,{H:()=>j});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("./public/app/features/dashboard/services/DashboardSrv.ts"),r=a("./public/app/core/core.ts"),i=a("./packages/grafana-data/src/index.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),l=a("./packages/grafana-ui/src/index.ts"),c=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js");let d;!function(e){e.Saved="saved",e.EditingStarted="editing-started",e.EditingCanceled="editing-cancelled",e.Deleted="deleted"}(d||(d={}));var u,p,h,m,g=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends o.PureComponent{constructor(){super(...arguments),f(this,"state",{}),f(this,"discardAndReload",{label:"Discard local changes",description:"Load the latest saved version for this dashboard",action:()=>{j.reloadPage(),this.onDismiss()}}),f(this,"continueEditing",{label:"Continue editing",description:"Keep your local changes and continue editing.  Note: when you save, this will overwrite the most recent chages",action:()=>{this.onDismiss()}}),f(this,"acceptDelete",{label:"Discard Local changes",description:"view grafana homepage",action:()=>{document.location.href=s.config.appUrl}}),f(this,"onDismiss",(()=>{this.setState({dismiss:!0})}))}render(){const{event:e}=this.props,{dismiss:t}=this.state,a=v(s.config.theme),n=(null==e?void 0:e.action)===d.Deleted,r=n?[this.continueEditing,this.acceptDelete]:[this.continueEditing,this.discardAndReload];return(0,g.jsx)(l.Modal,{isOpen:!t,title:"Dashboard Changed",icon:"copy",onDismiss:this.onDismiss,onClickBackdrop:()=>{},className:a.modal,children:(0,g.jsxs)("div",{children:[n?u||(u=(0,g.jsx)("div",{children:"This dashboard has been deleted by another session"})):p||(p=(0,g.jsx)("div",{children:"This dashboard has been modifed by another session"})),h||(h=(0,g.jsx)("br",{})),r.map((e=>(0,g.jsxs)("div",{onClick:e.action,className:a.radioItem,children:[(0,g.jsx)("h3",{children:e.label}),e.description]},e.label))),m||(m=(0,g.jsx)("br",{}))]})})}}const v=(0,l.stylesFactory)((e=>({modal:c.css`
      width: 500px;
    `,radioItem:c.css`
      margin: 0;
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
      padding: 10px;
      cursor: pointer;
      width: 100%;

      &:hover {
        background: ${e.colors.bgBlue1};
        color: ${e.colors.text};
      }
    `})));var x=a("./public/app/features/live/index.ts"),y=a("./public/app/types/events.ts");function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const j=new class{constructor(){w(this,"channel",void 0),w(this,"uid",void 0),w(this,"ignoreSave",void 0),w(this,"editing",!1),w(this,"lastEditing",void 0),w(this,"subscription",void 0),w(this,"hasSeenNotice",void 0),w(this,"observer",{next:e=>{if((0,i.isLiveChannelStatusEvent)(e)&&this.editing&&e.state===i.LiveChannelConnectionState.Connected&&this.sendEditingState(),(0,i.isLiveChannelMessageEvent)(e)){if(e.message.sessionId===x.W4)return;const{action:t}=e.message;switch(t){case d.EditingStarted:case d.Saved:{if(this.ignoreSave)return void(this.ignoreSave=!1);const a=(0,n.h4)().getCurrent();if((null==a?void 0:a.uid)!==e.message.uid)return void console.log("dashboard event for different dashboard?",e,a);const s=this.editing||a.hasUnsavedChanges();if(t===d.Saved)s?r.h$.publish(new y.Dn({component:b,props:{event:e}})):(r.h$.emit(i.AppEvents.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(s&&t===d.EditingStarted&&!this.hasSeenNotice){const t=e.message,a=this.getRecentEditingEvent();a&&a.message===t.message||(this.hasSeenNotice=!0,r.h$.emit(i.AppEvents.alertWarning,["Another session is editing this dashboard",t.message])),this.lastEditing=t}return}}}}})}setEditingState(e){const t=this.editing=e;this.editing=e,this.hasSeenNotice=!1,t&&r.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:e,uid:t}=this;e&&t&&(0,s.getGrafanaLiveSrv)().publish(e,{sessionId:x.W4,uid:t,action:this.editing?d.EditingStarted:d.EditingCanceled,timestamp:Date.now()})}watch(e){const t=(0,s.getGrafanaLiveSrv)();t&&e!==this.uid&&(this.channel={scope:i.LiveChannelScope.Grafana,namespace:"dashboard",path:`uid/${e}`},this.leave(),e&&(this.subscription=t.getStream(this.channel).subscribe(this.observer)),this.uid=e)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){if(this.lastEditing&&this.lastEditing.timestamp){Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0)}return this.lastEditing}reloadPage(){s.locationService.reload()}}},"./public/app/features/live/data/StreamingDataFrame.ts":(e,t,a)=>{"use strict";a.d(t,{Av:()=>d,_A:()=>u,MB:()=>h});var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-data/src/transformations/transformers/joinDataFrames.ts"),r=a("./packages/grafana-runtime/src/services/live.ts"),i=a("./public/app/plugins/datasource/prometheus/legend.ts");function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const l="__name__";var c;!function(e){e[e.wide=0]="wide",e[e.labels=1]="labels"}(c||(c={}));class d{constructor(e){o(this,"name",void 0),o(this,"refId",void 0),o(this,"meta",{}),o(this,"fields",[]),o(this,"length",0),o(this,"schemaFields",[]),o(this,"timeFieldIndex",-1),o(this,"pushMode",c.wide),o(this,"labels",new Set),o(this,"packetInfo",{schemaChanged:!0,number:0,action:r.T0.Replace,length:0}),o(this,"serialize",((e,t,a)=>{const n=t?Object.assign({},Object.assign({},this.options,t)):this.options,r=(0,s.toFilteredDataFrameDTO)(this,e),i=f(r.fields.map((e=>e.values)),"number"==typeof(null==a?void 0:a.maxLength)?Math.min(a.maxLength,n.maxLength):n.maxLength,this.timeFieldIndex,n.maxDelta);return r.fields=r.fields.map((e=>Object.assign({},e,{values:e.values.slice(i)}))),Object.assign({},r,{labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:this.length,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:n})})),o(this,"initFromSerialized",(e=>{this.name=e.name,this.refId=e.refId,this.meta=e.meta,this.length=e.length,this.labels=e.labels,this.schemaFields=e.schemaFields,this.timeFieldIndex=e.timeFieldIndex,this.pushMode=e.pushMode,this.packetInfo.length=e.packetInfo.length,this.packetInfo.number=e.packetInfo.number,this.packetInfo.action=r.T0.Replace,this.packetInfo.schemaChanged=!0,this.fields=e.fields.map((e=>{var t,a;return Object.assign({},e,{type:null!==(t=e.type)&&void 0!==t?t:s.FieldType.other,config:null!==(a=e.config)&&void 0!==a?a:{},values:Array.isArray(e.values)?new s.ArrayVector(e.values):new s.ArrayVector})})),g(this.fields.map((e=>e.values.buffer)),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)})),o(this,"needsResizing",(e=>{let{maxLength:t,maxDelta:a}=e;const s=t&&this.options.maxLength<t,n=a&&this.options.maxDelta<a,r=a&&this.options.maxDelta===1/0;return Boolean(s||n||r)})),o(this,"resize",(e=>{let{maxLength:t,maxDelta:a}=e;a&&(this.options.maxDelta===1/0?this.options.maxDelta=a:this.options.maxDelta=Math.max(a,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,null!=t?t:0)})),o(this,"pushNewValues",(e=>{var t,a,s,n;if(null==e||!e.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=e[0].length,this.packetInfo.schemaChanged=!1,this.options.action===r.T0.Append?m(this.fields.map((e=>e.values.buffer)),e,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(e.forEach(((e,t)=>{var a;null!==(a=this.fields[t])&&void 0!==a&&a.values&&(this.fields[t].values.buffer=e)})),g(this.fields.map((e=>e.values.buffer)),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const i=null===(t=this.fields)||void 0===t||null===(a=t[0])||void 0===a||null===(s=a.values)||void 0===s||null===(n=s.buffer)||void 0===n?void 0:n.length;void 0!==i&&(this.length=i)})),o(this,"resetStateCalculations",(()=>{this.fields.forEach((e=>{var t;e.state=Object.assign({},null!==(t=e.state)&&void 0!==t?t:{},{calcs:void 0,range:void 0})}))})),o(this,"getMatchingFieldIndexes",(e=>this.fields.map(((t,a)=>e(t)?a:void 0)).filter((e=>void 0!==e)))),o(this,"getValuesFromLastPacket",(()=>this.fields.map((e=>{const t=e.values.buffer;return t.slice(Math.max(t.length-this.packetInfo.length))})))),o(this,"hasAtLeastOnePacket",(()=>Boolean(this.packetInfo.length))),o(this,"getOptions",(()=>this.options)),this.options=e,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action===r.T0.Replace}push(e){const{schema:t,data:a}=e;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,t){this.pushMode=c.wide,this.timeFieldIndex=t.fields.findIndex((e=>e.type===s.FieldType.time));const e=t.fields[0];1!==this.timeFieldIndex||e.type!==s.FieldType.string||"labels"!==e.name&&"Labels"!==e.name||(this.pushMode=c.labels,this.timeFieldIndex=0);const a=this.pushMode===c.labels?t.fields.slice(1):t.fields;this.refId=t.refId,t.meta&&(this.meta=Object.assign({},t.meta));const{displayNameFormat:n}=this.options;if(function(e,t){if((null==e?void 0:e.length)!==t.length)return!1;for(let a=0;a<e.length;a++){const s=e[a],n=t[a];if(s.name!==n.name||s.type!==n.type)return!1}return!0}(this.schemaFields,a)){const e=a.length;this.fields.forEach(((t,s)=>{var n;const r=a[s%e];t.config=null!==(n=r.config)&&void 0!==n?n:{},t.labels=r.labels})),n&&this.fields.forEach((e=>{const t=Object.assign({[l]:e.name},e.labels);e.config.displayNameFromDS=(0,i.W)(n,t)}))}else{this.packetInfo.schemaChanged=!0;const e=this.pushMode===c.wide;this.fields=a.map((t=>{var a,r,o,c;const d=null!==(a=t.config)&&void 0!==a?a:{};if(n){const e=Object.assign({[l]:t.name},t.labels);d.displayNameFromDS=(0,i.W)(n,e)}return{config:d,name:t.name,labels:t.labels,type:null!==(r=t.type)&&void 0!==r?r:s.FieldType.other,values:e?null!==(o=null===(c=this.fields.find((e=>e.name===t.name&&t.type===e.type)))||void 0===c?void 0:c.values)&&void 0!==o?o:new s.ArrayVector(Array(this.length).fill(void 0)):new s.ArrayVector}}))}this.schemaFields=a}if(a&&a.values.length&&a.values[0].length){let{values:e,entities:t}=a;if(t&&t.forEach(((t,a)=>{t&&(0,s.decodeFieldValueEntities)(t,e[a])})),this.pushMode===c.labels){const t=function(e){let t=new Set(e[0]),a=new Map;t.forEach((t=>{let s=Array(e.length-1).fill(null).map((()=>[]));a.set(t,s)}));for(let t=0;t<e[0].length;t++){let s=a.get(e[0][t]);for(let a=1;a<e.length;a++)s[a-1].push(e[a][t])}return a}(e);for(const e of t.keys())this.labels.has(e)||(this.packetInfo.schemaChanged=!0,this.addLabel(e));let a=Array(this.schemaFields.length).fill([]),s=[];this.labels.forEach((e=>{var n;s.push(null!==(n=t.get(e))&&void 0!==n?n:a)})),e=(0,n.v_)(s)}if(e.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, recieved: ${e.length} (labels=${this.pushMode===c.labels})`);this.fields=e.map(((e,t)=>{let a=`Field ${t}`,n=(0,s.guessFieldTypeFromValue)(e[0]);return 0===t&&n===s.FieldType.number&&e[0]>1600016688632&&(n=s.FieldType.time,a="Time"),{name:a,type:n,config:{},values:new s.ArrayVector([])}}))}let i=e;this.packetInfo.length=e[0].length,this.alwaysReplace||!this.length?this.packetInfo.action=r.T0.Replace:(this.packetInfo.action=r.T0.Append,i=this.fields.map((e=>e.values.buffer)),m(i,e,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),i.forEach(((e,t)=>{const{state:a,values:s}=this.fields[t];s.buffer=e,a&&(a.calcs=void 0)})),this.length=i[0].length}return Object.assign({},this.packetInfo)}addLabel(e){const{displayNameFormat:t}=this.options,a=this.labels.size,n=function(e){if(!e.length)return{};if("{"===e.charAt(0))return(0,s.parseLabels)(e);const t={};return e.split(",").forEach((e=>{const[a,s]=e.trim().split("=");t[a]=s})),t}(e);if(0===a)this.fields.forEach(((e,a)=>{if(a>0&&(e.labels=n,t)){const a=Object.assign({[l]:e.name},n);e.config.displayNameFromDS=(0,i.W)(t,a)}}));else for(let e=1;e<this.schemaFields.length;e++){var r;let a=this.schemaFields[e];const o=null!==(r=a.config)&&void 0!==r?r:{};if(t){const e=Object.assign({[l]:a.name},n);o.displayNameFromDS=(0,i.W)(t,e)}this.fields.push(Object.assign({},a,{config:o,labels:n,values:new s.ArrayVector(Array(this.length).fill(void 0))}))}this.labels.add(e)}}function u(e){var t,a,s;return{maxLength:null!==(t=null==e?void 0:e.maxLength)&&void 0!==t?t:1e3,maxDelta:null!==(a=null==e?void 0:e.maxDelta)&&void 0!==a?a:1/0,action:null!==(s=null==e?void 0:e.action)&&void 0!==s?s:r.T0.Append,displayNameFormat:null==e?void 0:e.displayNameFormat}}function p(e,t,a,s){let n;a=a||0;let r=(s=s||t.length-1)<=2147483647;for(;s-a>1;)n=r?a+s>>1:Math.floor((a+s)/2),t[n]<e?a=n:s=n;return e-t[a]<=t[s]-e?a:s}function h(e){const t=e.packetInfo;return null!=t&&t.action?t:void 0}function m(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;for(let a=0;a<e.length;a++)for(let s=0;s<t[a].length;s++)e[a].push(t[a][s]);return g(e,a,s,n)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const n=f(e,t,a,s);if(n)for(let t=0;t<e.length;t++)e[t].splice(0,n);return n}function f(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;if(null===(t=e[0])||void 0===t||!t.length)return 0;const r=e[0].length;let i=0;if(r>a&&(i=r-a),n!==1/0&&s>=0){const t=e[s],a=t[i],o=t[r-1];o-a>n&&(i=p(o-n,t,i))}return i}o(d,"deserialize",(e=>{const t=new d(e.options);return t.initFromSerialized(e),t})),o(d,"empty",(e=>new d(u(e)))),o(d,"fromDataFrameJSON",((e,t)=>{const a=new d(u(t));return a.push(e),a}))},"./public/app/features/live/data/utils.ts":(e,t,a)=>{"use strict";a.d(t,{g0:()=>n,A1:()=>r,iL:()=>i});var s=a("./packages/grafana-data/src/index.ts");let n;!function(e){e.NewValuesSameSchema="NewValuesSameSchema",e.FullFrame="FullFrame"}(n||(n={}));const r=(e,t)=>"type"in e&&e.type===t,i=(Object.values(n),e=>(0,s.isDataFrame)(e)&&"packetInfo"in e)},"./public/app/features/live/index.ts":(e,t,a)=>{"use strict";a.d(t,{Bp:()=>N,W4:()=>_});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/features/live/data/StreamingDataFrame.ts"),i=a("./public/app/features/live/data/utils.ts"),o=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),l=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/from.js"),c=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),d=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),u=a("./packages/grafana-runtime/src/utils/DataSourceWithBackend.ts");function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h{constructor(e){p(this,"getConnectionState",(()=>this.deps.centrifugeSrv.getConnectionState())),p(this,"getDataStream",(e=>{let t;return this.deps.centrifugeSrv.getDataStream(e).pipe((0,o.U)((e=>{var a;return(e=>{const a=e.data[0];if(t||(0,i.A1)(a,i.g0.FullFrame))switch(a.type){case i.g0.FullFrame:return void(t=r.Av.deserialize(a.frame));case i.g0.NewValuesSameSchema:t.pushNewValues(a.values)}else console.warn(`expected first packet to contain a full frame, received ${null==a?void 0:a.type}`)})(e),Object.assign({},e,{data:[null!==(a=t)&&void 0!==a?a:r.Av.empty()]})})))})),p(this,"getStream",(e=>this.deps.centrifugeSrv.getStream(e))),p(this,"getQueryData",(e=>(0,l.D)(this.deps.centrifugeSrv.getQueryData(e)).pipe((0,c.w)((t=>{var a;const n=(0,s.toDataQueryResponse)(t,e.request.targets);return(null===(a=n.data)||void 0===a?void 0:a.length)&&n.data.find((e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.channel}))?(0,u.B9)(n,e.request,u.PI):(0,d.of)(n)}))))),p(this,"publish",(async(e,t)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,n.toLiveChannelId)(e),data:t}))),p(this,"getPresence",(e=>this.deps.centrifugeSrv.getPresence(e))),this.deps=e}}var m=a("./public/app/core/services/context_srv.ts"),g=(a("./public/app/features/live/centrifuge/transferHandlers.ts"),a("../../opt/drone/yarncache/comlink-npm-4.3.1-45efe1dd36-557360a655.zip/node_modules/comlink/dist/esm/comlink.mjs")),f=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/observeOn.js"),b=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/scheduler/async.js"),v=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Observable.js");const x=e=>(0,l.D)(e).pipe((0,c.w)((e=>{return t=e,new v.y((e=>{const a=t.subscribe(g.sj((t=>{e.next(t)})),g.sj((t=>{e.error(t)})),g.sj((()=>{e.complete()})));return{unsubscribe:()=>{a.then((e=>e.unsubscribe()))}}}));var t})));var y=a("./public/app/core/utils/CorsWorker.ts");function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class j{constructor(e){w(this,"centrifugeWorker",void 0),w(this,"getConnectionState",(()=>x(this.centrifugeWorker.getConnectionState()))),w(this,"getDataStream",(e=>x(this.centrifugeWorker.getDataStream(e)).pipe((0,f.Q)(b.z)))),w(this,"getQueryData",(async e=>{const t=JSON.parse(JSON.stringify(e));return this.centrifugeWorker.getQueryData(t)})),w(this,"getPresence",(e=>this.centrifugeWorker.getPresence(e))),w(this,"getStream",(e=>x(this.centrifugeWorker.getStream(e)))),this.centrifugeWorker=g.Ud(new y.q(new URL(a.p+a.u(5652),a.b))),this.centrifugeWorker.initialize(e,g.sj(e.dataStreamSubscriberReadiness))}}var C,k,S,T=a("./public/app/features/live/centrifuge/service.ts"),O=a("./public/app/features/dashboard/dashgrid/liveTimer.ts");const _=(null===(C=window)||void 0===C||null===(k=C.grafanaBootData)||void 0===k||null===(S=k.user)||void 0===S?void 0:S.id)+"/"+Date.now().toString(16)+"/"+Math.random().toString(36).substring(2,15);function N(){const e={appUrl:`${window.location.origin}${s.config.appSubUrl}`,orgId:m.Vt.user.orgId,orgRole:m.Vt.user.orgRole,liveEnabled:s.config.liveEnabled,sessionId:_,dataStreamSubscriberReadiness:O.A.ok.asObservable()},t=s.config.featureToggles["live-service-web-worker"]?new j(e):new T.R(e);(0,s.setGrafanaLiveSrv)(new h({centrifugeSrv:t,backendSrv:(0,s.getBackendSrv)()}))}},"./public/app/features/manage-dashboards/services/ValidationSrv.ts":(e,t,a)=>{"use strict";a.d(t,{t:()=>i});var s=a("./public/app/core/services/backend_srv.ts");const n="dash-folder",r="dash-db";const i=new class{constructor(){var e,t,a;a="general",(t="rootName")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}validateNewDashboardName(e,t){return this.validate(e,t,"A dashboard or a folder with the same name already exists")}validateNewFolderName(e){return this.validate(0,e,"A folder or dashboard in the general folder with the same name already exists")}async validate(e,t,a){const i=(t=(t||"").trim()).toLowerCase();if(0===t.length)throw{type:"REQUIRED",message:"Name is required"};if(0===e&&i===this.rootName)throw{type:"EXISTING",message:"This is a reserved name and cannot be used for a folder."};const o=[];o.push(s.ae.search({type:n,folderIds:[e],query:t})),o.push(s.ae.search({type:r,folderIds:[e],query:t}));const l=await Promise.all(o);let c=[];l.length>0&&l[0].length>0&&(c=l[0]),l.length>1&&l[1].length>0&&(c=c.concat(l[1]));for(const e of c)if(i===e.title.toLowerCase())throw{type:"EXISTING",message:a}}}},"./public/app/features/manage-dashboards/state/actions.ts":(e,t,a)=>{"use strict";a.d(t,{q_:()=>d,nQ:()=>u,ys:()=>m,$j:()=>g,ct:()=>b,Fd:()=>y,uC:()=>w,L6:()=>C,ZL:()=>k,EW:()=>S,iM:()=>T});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/features/manage-dashboards/state/reducers.ts"),r=a("./public/app/core/core.ts"),i=a("./public/app/features/live/dashboard/dashboardWatcher.ts"),o=a("./packages/grafana-runtime/src/index.ts"),l=a("./public/app/features/library-panels/state/api.ts"),c=a("./public/app/features/library-panels/types.ts");function d(e){return async t=>{try{t((0,n.AK)());const a=await(0,o.getBackendSrv)().get(`/api/gnet/dashboards/${e}`);t((0,n.S9)(a)),t(p(a.json)),t(h(a.json))}catch(e){t((0,n.eh)()),r.h$.emit(s.AppEvents.alertError,[e.data.message||e])}}}function u(e){return async t=>{t((0,n.Nw)(e)),t(p(e)),t(h(e))}}function p(e){return t=>{if(e&&e.__inputs){const a=[];e.__inputs.forEach((e=>{const t={name:e.name,label:e.label,info:e.description,value:e.value,type:e.type,pluginId:e.pluginId,options:[]};e.type===n.n$.DataSource?f(e,t):t.info||(t.info="Specify a string constant"),a.push(t)})),t((0,n.Zc)(a))}}}function h(e){return async function(t){if(!e||!e.__elements)return;const a=[];for(const t of e.__elements){if(t.kind!==c.V.Panel)continue;const e=t.model,{type:s,description:r}=e,{uid:i,name:o}=t,d={model:{model:e,uid:i,name:o,version:0,meta:{},id:0,type:s,kind:c.V.Panel,description:r},state:n.KQ.New};try{const e=await(0,l.Mh)(i,!0);d.state=n.KQ.Exits,d.model=e}catch(e){if(404!==e.status)throw e}a.push(d)}t((0,n.C2)(a))}}function m(){return e=>{e((0,n.MO)())}}function g(e){return async(t,a)=>{var n,r;const i=a().importDashboard.dashboard,l=a().importDashboard.inputs;let c=[];null===(n=e.dataSources)||void 0===n||n.forEach(((e,t)=>{const a=l.dataSources[t];c.push({name:a.name,type:a.type,pluginId:a.pluginId,value:e.uid})})),null===(r=e.constants)||void 0===r||r.forEach(((e,t)=>{const a=l.constants[t];c.push({value:e,name:a.name,type:a.type})}));const d=await(0,o.getBackendSrv)().post("api/dashboards/import",{dashboard:Object.assign({},i,{title:e.title,uid:e.uid||i.uid}),overwrite:!0,inputs:c,folderId:e.folder.id}),u=s.locationUtil.stripBaseFromUrl(d.importedUrl);o.locationService.push(u)}}const f=(e,t)=>{0===(0,o.getDataSourceSrv)().getList({pluginId:e.pluginId}).length?t.info="No data sources of type "+e.pluginName+" found":t.info||(t.info="Select a "+e.pluginName+" data source")};function b(e,t){const a=[];for(const s of e)a.push(x(v,!0,s,t));return O(a).then((e=>({totalCount:e.length,successCount:e.filter((e=>e.succeeded)).length,alreadyInFolderCount:e.filter((e=>e.alreadyInFolder)).length})))}async function v(e,t){const a=await(0,o.getBackendSrv)().get(`/api/dashboards/uid/${e}`);if(!a.meta.folderId&&0===t.id||a.meta.folderId===t.id)return{alreadyInFolder:!0};const s={dashboard:a.dashboard,folderId:t.id,overwrite:!1};try{return await w(s),{succeeded:!0}}catch(e){var n;if("plugin-dashboard"!==(null===(n=e.data)||void 0===n?void 0:n.status))return{succeeded:!1};e.isHandled=!0,s.overwrite=!0;try{return await w(s),{succeeded:!0}}catch(e){return{succeeded:!1}}}}function x(e,t){for(var a=arguments.length,s=new Array(a>2?a-2:0),n=2;n<a;n++)s[n-2]=arguments[n];return async a=>{try{const t=await e(...s);return Array.prototype.concat(a,[t])}catch(e){if(t)return a;throw e}}}function y(e,t){const a=[];for(const t of e)a.push(x(j,!0,t,!0));for(const e of t)a.push(x(T,!0,e,!0));return O(a)}function w(e){var t,a;return i.H.ignoreNextSave(),(0,o.getBackendSrv)().post("/api/dashboards/db/",{dashboard:e.dashboard,message:null!==(t=e.message)&&void 0!==t?t:"",overwrite:null!==(a=e.overwrite)&&void 0!==a&&a,folderId:e.folderId})}function j(e,t){return(0,o.getBackendSrv)().request({method:"DELETE",url:`/api/folders/${e}?forceDeleteRules=false`,showSuccessAlert:t})}function C(e){return(0,o.getBackendSrv)().post("/api/folders",e)}function k(e,t){return(0,o.getBackendSrv)().get("/api/search",{query:e,type:"dash-folder",permission:t})}function S(e){return(0,o.getBackendSrv)().get(`/api/folders/id/${e}`)}function T(e,t){return(0,o.getBackendSrv)().request({method:"DELETE",url:`/api/dashboards/uid/${e}`,showSuccessAlert:t})}function O(e){return e.reduce(((e,t)=>Promise.resolve(e).then(t)),[])}},"./public/app/features/manage-dashboards/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{G7:()=>r,n$:()=>i,KQ:()=>o,MO:()=>d,Zc:()=>u,S9:()=>p,Nw:()=>h,C2:()=>m,eh:()=>g,AK:()=>f,ZP:()=>b});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./packages/grafana-data/src/index.ts");let r,i,o;!function(e){e[e.Gcom=0]="Gcom",e[e.Json=1]="Json"}(r||(r={})),function(e){e.DataSource="datasource",e.Constant="constant",e.LibraryPanel="libraryPanel"}(i||(i={})),function(e){e.New="new",e.Exits="exists",e.Different="different"}(o||(o={}));const l={meta:{updatedAt:"",orgName:""},dashboard:{},source:r.Json,inputs:{},state:n.LoadingState.NotStarted},c=(0,s.oM)({name:"manageDashboards",initialState:l,reducers:{setGcomDashboard:(e,t)=>{e.dashboard=Object.assign({},t.payload.json,{id:null}),e.meta={updatedAt:t.payload.updatedAt,orgName:t.payload.orgName},e.source=r.Gcom,e.state=n.LoadingState.Done},setJsonDashboard:(e,t)=>{e.dashboard=Object.assign({},t.payload,{id:null}),e.meta=l.meta,e.source=r.Json,e.state=n.LoadingState.Done},clearDashboard:e=>{e.dashboard={},e.state=n.LoadingState.NotStarted},setInputs:(e,t)=>{e.inputs={dataSources:t.payload.filter((e=>e.type===i.DataSource)),constants:t.payload.filter((e=>e.type===i.Constant)),libraryPanels:[]}},setLibraryPanelInputs:(e,t)=>{e.inputs.libraryPanels=t.payload},fetchFailed:e=>{e.dashboard={},e.state=n.LoadingState.Error},fetchDashboard:e=>{e.state=n.LoadingState.Loading}}}),{clearDashboard:d,setInputs:u,setGcomDashboard:p,setJsonDashboard:h,setLibraryPanelInputs:m,fetchFailed:g,fetchDashboard:f}=c.actions,b={importDashboard:c.reducer}},"./public/app/features/org/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{xR:()=>n,jR:()=>r,IM:()=>i,ZP:()=>o});const s=(0,a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").oM)({name:"organization",initialState:{organization:{},userOrgs:[]},reducers:{organizationLoaded:(e,t)=>Object.assign({},e,{organization:t.payload}),setOrganizationName:(e,t)=>Object.assign({},e,{organization:Object.assign({},e.organization,{name:t.payload})}),userOrganizationsLoaded:(e,t)=>Object.assign({},e,{userOrgs:t.payload})}}),{setOrganizationName:n,organizationLoaded:r,userOrganizationsLoaded:i}=s.actions,o={organization:s.reducer}},"./public/app/features/panel/components/PanelDataErrorView.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./public/app/core/components/CardButton.tsx"),o=a("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),l=a("./public/app/features/dashboard/components/PanelEditor/state/reducers.ts"),c=a("./public/app/features/panel/state/actions.ts"),d=a("./public/app/features/dashboard/services/DashboardSrv.ts"),u=a("./public/app/core/store.ts"),p=a("./public/app/core/constants.ts"),h=a("./public/app/features/dashboard/components/PanelEditor/types.ts"),m=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function g(e){const t=(0,n.useStyles2)(f),a=(0,n.usePanelContext)(),r=new s.VisualizationSuggestionsBuilder(e.data),{dataSummary:g}=r,b=function(e,t){let{data:a,message:s,needsNumberField:n,needsTimeField:r,needsStringField:i}=e;if(s)return s;if(!a.series||0===a.series.length||1===a.series.length&&0===a.series[0].fields.length)return"No data";if(i&&!t.hasStringField)return"Data is missing a string field";if(n&&!t.hasNumberField)return"Data is missing a number field";if(r&&!t.hasTimeField)return"Data is missing a time field";return"Cannot visualize data"}(e,g),v=(0,o.useDispatch)();return(0,m.jsxs)("div",{className:t.wrapper,children:[(0,m.jsx)("div",{className:t.message,children:b}),a.app===s.CoreApp.PanelEditor&&g.hasData&&(0,m.jsxs)("div",{className:t.actions,children:[(0,m.jsx)(i.x,{icon:"table",onClick:()=>{var t;const a=null===(t=(0,d.h4)().getCurrent())||void 0===t?void 0:t.getPanelById(e.panelId);a&&v((0,c.Kc)({panel:a,pluginId:"table"}))},children:"Switch to table"}),(0,m.jsx)(i.x,{icon:"chart-line",onClick:()=>{u.Z.setObject(p.FL,h.Ok.Suggestions),v((0,l.g_)(!0))},children:"Open visualization suggestions"})]})]})}const f=e=>({wrapper:(0,r.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,r.css)({textAlign:"center",color:e.colors.text.secondary,fontSize:e.typography.size.lg,width:"100%"}),actions:(0,r.css)({marginTop:e.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:e.spacing(1),rowGap:e.spacing(1),width:"100%",maxWidth:"600px"})})},"./public/app/features/panel/components/PanelPluginError.tsx":(e,t,a)=>{"use strict";a.d(t,{F:()=>d,X:()=>u});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./public/app/types/index.ts"),i=a("./packages/grafana-ui/src/index.ts"),o=a("./packages/grafana-data/src/index.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");class c extends n.PureComponent{constructor(e){super(e)}render(){return(0,l.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,l.jsx)(i.Alert,Object.assign({severity:r.F1.Error},this.props))})}}function d(e,t){const a=class extends n.PureComponent{render(){const t=(0,l.jsxs)(l.Fragment,{children:["Check the server startup logs for more information. ",s||(s=(0,l.jsx)("br",{})),"If this plugin was loaded from Git, then make sure it was compiled."]});return(0,l.jsx)(c,{title:`Error loading: ${e.id}`,text:t})}},r=new o.PanelPlugin(a);return r.meta=e,r.loadError=!0,r}function u(e,t){const a=class extends n.PureComponent{render(){return(0,l.jsx)(c,{title:`Panel plugin not found: ${e}`})}},s=new o.PanelPlugin(t?()=>null:a);return s.meta={id:e,name:e,sort:100,type:o.PluginType.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},s}},"./public/app/features/panel/components/PanelRenderer.tsx":(e,t,a)=>{"use strict";a.d(t,{$:()=>g});var s,n,r,i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),o=a("./packages/grafana-data/src/index.ts"),l=a("./public/app/core/core.ts"),c=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsync.js"),d=a("./public/app/features/dashboard/state/getPanelOptionsWithDefaults.ts"),u=a("./public/app/features/plugins/importPanelPlugin.ts"),p=a("./packages/grafana-ui/src/index.ts"),h=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const m={defaults:{},overrides:[]};function g(e){const{pluginId:t,data:a,timeZone:g=(0,o.getTimeZone)(),options:f={},width:b,height:v,title:x,onOptionsChange:y=(()=>{}),onChangeTimeRange:w=(()=>{}),fieldConfig:j=m}=e,[C,k]=(0,i.useState)(j),{value:S,error:T,loading:O}=(0,c.Z)((()=>(0,u.U)(t)),[t]),_=function(e,t,a){return(0,i.useMemo)((()=>{if(e)return(0,d.d4)({plugin:e,currentOptions:t,currentFieldConfig:a,isAfterPluginChange:!1})}),[e,a,t])}(S,f,C),N=function(e,t,a,s){const n=null==t?void 0:t.fieldConfig,r=null==a?void 0:a.series,l=null==e?void 0:e.fieldConfigRegistry,c=(0,p.useTheme2)(),d=(0,i.useRef)(0);return(0,i.useMemo)((()=>{if(l&&n&&a)return d.current=d.current+1,Object.assign({},a,{series:(0,o.applyFieldOverrides)({data:r,fieldConfig:n,fieldConfigRegistry:l,replaceVariables:e=>e,theme:c,timeZone:s}),structureRev:d.current})}),[l,n,a,r,s,c])}(S,_,a,g);if((0,i.useEffect)((()=>{k((e=>Object.assign({},e,j)))}),[j]),T)return(0,h.jsxs)("div",{children:["Failed to load plugin: ",T.message]});if(function(e,t,a){return e||(null==t?void 0:t.meta.id)!==a}(O,S,t))return s||(s=(0,h.jsx)("div",{children:"Loading plugin panel..."}));if(!S||!S.panel)return n||(n=(0,h.jsx)("div",{children:"Seems like the plugin you are trying to load does not have a panel component."}));if(!N)return r||(r=(0,h.jsx)("div",{children:"No panel data"}));const I=S.panel;return(0,h.jsx)(p.ErrorBoundaryAlert,{dependencies:[S,a],children:(0,h.jsx)(I,{id:1,data:N,title:x,timeRange:N.timeRange,timeZone:g,options:_.options,fieldConfig:C,transparent:!1,width:b,height:v,renderCounter:0,replaceVariables:e=>e,onOptionsChange:y,onFieldConfigChange:k,onChangeTimeRange:w,eventBus:l.h$})})}},"./public/app/features/panel/panellinks/linkSuppliers.ts":(e,t,a)=>{"use strict";a.d(t,{n:()=>r,H:()=>i});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/features/panel/panellinks/link_srv.ts");const r=e=>{const t=e.field.links;if(t&&0!==t.length)return{getLinks:a=>{const r={};if(e.view){const{dataFrame:t}=e.view;r.__series={value:{name:t.name,refId:t.refId},text:"Series"};const a=void 0!==e.colIndex?t.fields[e.colIndex]:void 0;if(a){if(r.__field={value:{name:a.name,labels:a.labels},text:"Field"},void 0!==e.rowIndex&&e.rowIndex>=0){const{timeField:n}=(0,s.getTimeField)(t);r.__value={value:{raw:a.values.get(e.rowIndex),numeric:e.display.numeric,text:(0,s.formattedValueToString)(e.display),time:n?n.values.get(e.rowIndex):void 0},text:"Value"}}e.view&&(r.__data={value:{name:t.name,refId:t.refId,fields:(0,s.getFieldDisplayValuesProxy)({frame:t,rowIndex:e.rowIndex})},text:"Data"})}else r.__value={value:{raw:e.display.numeric,numeric:e.display.numeric,text:(0,s.formattedValueToString)(e.display),calc:e.name},text:"Value"}}else console.log("VALUE",e);const i=(e,t,s)=>{const n=Object.assign({},r,t);return a(e,n,s)};return t.map((t=>(0,n.Bq)().getDataLinkUIModel(t,i,e)))}}},i=e=>{const t=e.links;if(t&&0!==t.length)return{getLinks:()=>t.map((t=>(0,n.Bq)().getDataLinkUIModel(t,e.replaceVariables,e)))}}},"./public/app/features/panel/panellinks/link_srv.ts":(e,t,a)=>{"use strict";a.d(t,{PR:()=>h,PW:()=>f,Bq:()=>x});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./public/app/features/dashboard/services/TimeSrv.ts"),r=a("./packages/grafana-runtime/src/index.ts"),i=a("./public/app/core/config.ts"),o=a("./packages/grafana-data/src/index.ts"),l=a("./public/app/features/variables/getAllVariableValuesForUrl.ts");const c=[{value:`${o.DataLinkBuiltInVars.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:o.VariableOrigin.BuiltIn},{value:`${o.DataLinkBuiltInVars.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:o.VariableOrigin.BuiltIn},{value:`${o.DataLinkBuiltInVars.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:o.VariableOrigin.BuiltIn}],d=[{value:`${o.DataLinkBuiltInVars.seriesName}`,label:"Name",documentation:"Name of the series",origin:o.VariableOrigin.Series}],u=[{value:`${o.DataLinkBuiltInVars.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:o.VariableOrigin.Value},{value:`${o.DataLinkBuiltInVars.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:o.VariableOrigin.Value},{value:`${o.DataLinkBuiltInVars.valueRaw}`,label:"Raw",documentation:"Raw value",origin:o.VariableOrigin.Value}],p=e=>e.includes(".")||e.trim().includes(" ")?`["${e}"]`:`.${e}`,h=()=>[...(0,r.getTemplateSrv)().getVariables().map((e=>({value:e.name,label:e.name,origin:o.VariableOrigin.Template}))),{value:`${o.DataLinkBuiltInVars.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:o.VariableOrigin.Template},...c],m=e=>{const t=[];for(const a of e)for(const e of a.fields)if(e.labels)for(const a of Object.keys(e.labels))t.push(a);const a=(0,s.chain)(t).flatten().uniq().value();return[{value:`${o.DataLinkBuiltInVars.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:o.VariableOrigin.Field},...a.map((e=>({value:`__field.labels${p(e)}`,label:`labels.${e}`,documentation:`${e} label value`,origin:o.VariableOrigin.Field})))]},g=e=>{let t,a;const s=[],n={};if(1!==e.length)return[];const r=e[0];for(const i of r.fields){const l=(0,o.getFieldDisplayName)(i,r,e);n[l]||(s.push({value:`__data.fields${p(l)}`,label:`${l}`,documentation:`Formatted value for ${l} on the same row`,origin:o.VariableOrigin.Fields}),n[l]=!0,t||i.type!==o.FieldType.number||(t=Object.assign({},i,{name:l})),!a&&i.config.displayName&&i.config.displayName!==i.name&&(a=Object.assign({},i,{name:l})))}return s.length&&s.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:o.VariableOrigin.Fields}),t&&(s.push({value:`__data.fields${p(t.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:o.VariableOrigin.Fields}),s.push({value:`__data.fields${p(t.name)}.text`,label:"Show text value",documentation:"the text value",origin:o.VariableOrigin.Fields})),a&&s.push({value:`__data.fields${p(a.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:o.VariableOrigin.Fields}),s},f=(e,t)=>{const a={value:`${o.DataLinkBuiltInVars.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:o.VariableOrigin.Value};return t===o.VariableSuggestionsScope.Values?[...d,...m(e),...u,a,...g(e),...h()]:[...d,...m(e),...g(e),...h()]};class b{constructor(){var e,t,a;a=(e,t,a)=>{var s;let n=e.url;e.onBuildUrl&&(n=e.onBuildUrl({origin:a,replaceVariables:t}));const r={href:o.locationUtil.assureBaseUrl(n.replace(/\n/g,"")),title:null!==(s=e.title)&&void 0!==s?s:"",target:e.targetBlank?"_blank":void 0,origin:a};return t&&(r.href=t(r.href),r.title=t(e.title)),e.onClick&&(r.onClick=s=>{e.onClick({origin:a,replaceVariables:t,e:s})}),r.href=(0,i.iE)().disableSanitizeHtml?r.href:o.textUtil.sanitizeUrl(r.href),r},(t="getDataLinkUIModel")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}getLinkUrl(e){let t=o.locationUtil.assureBaseUrl((0,r.getTemplateSrv)().replace(e.url||"")),a={};if(e.keepTime){const e=(0,n.$t)().timeRangeForUrl();a.from=e.from,a.to=e.to}return e.includeVars&&(a=Object.assign({},a,(0,l.c)())),t=o.urlUtil.appendQueryToUrl(t,o.urlUtil.toUrlParams(a)),(0,i.iE)().disableSanitizeHtml?t:o.textUtil.sanitizeUrl(t)}getAnchorInfo(e){const t=(0,r.getTemplateSrv)(),a={};return a.href=this.getLinkUrl(e),a.title=t.replace(e.title||""),a.tooltip=t.replace(e.tooltip||""),a}getPanelLinkAnchorInfo(e,t){(0,o.deprecationWarning)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");return this.getDataLinkUIModel(e,((e,a,s)=>(0,r.getTemplateSrv)().replace(e,Object.assign({},t,a),s)),{})}}let v;function x(){return v||(v=new b),v}},"./public/app/features/panel/state/actions.ts":(e,t,a)=>{"use strict";a.d(t,{JI:()=>c,Kc:()=>d,ih:()=>u});var s=a("./public/app/features/panel/components/PanelPluginError.tsx"),n=a("./public/app/features/plugins/admin/state/actions.ts"),r=a("./public/app/features/panel/state/reducers.ts"),i=a("./public/app/features/library-panels/utils.ts"),o=a("./public/app/types/events.ts"),l=a("./public/app/features/dashboard/state/getPanelOptionsWithDefaults.ts");function c(e){return async(t,a)=>{let i=e.type,o=a().plugins.panels[i];if(!o)try{o=await t((0,n.Ro)(i))}catch(e){o=(0,s.X)(i,"row"===i)}e.plugin||e.pluginLoaded(o),t((0,r.bc)({key:e.key,plugin:o}))}}function d(e){let{panel:t,pluginId:a,options:s,fieldConfig:i}=e;return async(e,o)=>{if(t.type===a&&!s&&!i)return;let c=o().plugins.panels[a];c||(c=await e((0,n.Ro)(a)));let d=t.key;if(t.type!==a&&t.changePlugin(c),s||i){const e=(0,l.d4)({plugin:c,currentOptions:s||t.options,currentFieldConfig:i||t.fieldConfig,isAfterPluginChange:!1});t.options=e.options,t.fieldConfig=e.fieldConfig,t.configRev++}t.generateNewKey(),e((0,r.bc)({key:t.key,plugin:c,cleanUpKey:d}))}}function u(e,t){return async(a,s)=>{const l=t.model.type,c=e.type;if(e.restoreModel(Object.assign({},t.model,{gridPos:e.gridPos,id:e.id,libraryPanel:(0,i.Pi)(t)})),e.getQueryRunner().clearLastResult(),c!==l){let t=s().plugins.panels[l];t||(t=await a((0,n.Ro)(l)));const i=e.key;e.pluginLoaded(t),e.generateNewKey(),await a((0,r.bc)({key:e.key,plugin:t,cleanUpKey:i}))}e.configRev=0,e.refresh(),e.events.publish(o.pO),e.events.publish(o.Wj)}}},"./public/app/features/panel/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{bc:()=>r,o8:()=>i,pC:()=>o,qj:()=>l,ZP:()=>c});const s=(0,a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").oM)({name:"panels",initialState:{},reducers:{panelModelAndPluginReady:(e,t)=>{t.payload.cleanUpKey&&(n(e[t.payload.cleanUpKey]),delete e[t.payload.cleanUpKey]),e[t.payload.key]={plugin:t.payload.plugin}},cleanUpPanelState:(e,t)=>{n(e[t.payload.key]),delete e[t.payload.key]},setPanelInstanceState:(e,t)=>{e[t.payload.key].instanceState=t.payload.value},setPanelAngularComponent:(e,t)=>{const a=e[t.payload.key];n(a),a.angularComponent=t.payload.angularComponent}}});function n(e){null!=e&&e.angularComponent&&e.angularComponent.destroy()}const{panelModelAndPluginReady:r,setPanelAngularComponent:i,setPanelInstanceState:o,cleanUpPanelState:l}=s.actions,c={panels:s.reducer}},"./public/app/features/playlist/PlaylistSrv.ts":(e,t,a)=>{"use strict";a.d(t,{r0:()=>l});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./packages/grafana-data/src/index.ts");function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const o={kiosk:!0,autofitpanels:!0,orgId:!0};const l=new class{constructor(){i(this,"nextTimeoutId",void 0),i(this,"index",0),i(this,"numberOfLoops",0),i(this,"locationListenerUnsub",void 0),i(this,"isPlaying",!1),this.locationUpdated=this.locationUpdated.bind(this)}next(){clearTimeout(this.nextTimeoutId);if(this.index>this.dashboards.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3)return void(window.location.href=this.startUrl);this.index=0}const e=this.dashboards[this.index],t=n.locationService.getSearchObject(),a=(0,s.pickBy)(t,((e,t)=>o[t])),i=r.locationUtil.stripBaseFromUrl(e.url);this.index++,this.validPlaylistUrl=i,this.nextTimeoutId=setTimeout((()=>this.next()),this.interval),n.locationService.push(i+"?"+r.urlUtil.toUrlParams(a))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(e){e.pathname!==this.validPlaylistUrl&&this.stop()}start(e){return this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=n.locationService.getHistory().listen(this.locationUpdated),(0,n.getBackendSrv)().get(`/api/playlists/${e}`).then((t=>(0,n.getBackendSrv)().get(`/api/playlists/${e}/dashboards`).then((e=>{this.dashboards=e,this.interval=r.rangeUtil.intervalToMs(t.interval),this.next()}))))}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),n.locationService.getSearchObject().kiosk&&n.locationService.partial({kiosk:null}))}}},"./public/app/features/plugins/admin/api.ts":(e,t,a)=>{"use strict";a.d(t,{GV:()=>o,$F:()=>l,jL:()=>c,E1:()=>p,Tk:()=>h,GP:()=>m,P6:()=>g});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/features/plugins/admin/constants.ts"),i=a("./public/app/features/plugins/admin/helpers.ts");async function o(e){var t,a,n,i;const o=await async function(e){try{return await(0,s.getBackendSrv)().get(`${r.tB}/plugins/${e}`,{})}catch(e){return void(e.isHandled=!0)}}(e),l=Boolean(o),[c,h,m]=await Promise.all([p(),d(e,l),u(e)]),g=c.find((t=>t.id===e)),f=(null==g?void 0:g.dependencies)||(null==o||null===(t=o.json)||void 0===t?void 0:t.dependencies);return{grafanaDependency:null!==(a=null!==(n=null==f?void 0:f.grafanaDependency)&&void 0!==n?n:null==f?void 0:f.grafanaVersion)&&void 0!==a?a:"",pluginDependencies:(null==f?void 0:f.plugins)||[],links:(null==g?void 0:g.info.links)||(null==o||null===(i=o.json)||void 0===i?void 0:i.info.links)||[],readme:m||(null==o?void 0:o.readme),versions:h}}async function l(){const{items:e}=await(0,s.getBackendSrv)().get(`${r.tB}/plugins`);return e.filter(i.wB)}async function c(){try{return await(0,s.getBackendSrv)().get(`${r.O2}/errors`)}catch(e){return[]}}async function d(e,t){try{if(!t)return[];return((await(0,s.getBackendSrv)().get(`${r.tB}/plugins/${e}/versions`)).items||[]).map((e=>({version:e.version,createdAt:e.createdAt,isCompatible:e.isCompatible,grafanaDependency:e.grafanaDependency})))}catch(e){return e.isHandled=!0,[]}}async function u(e){try{const t=await(0,s.getBackendSrv)().get(`${r.O2}/${e}/markdown/help`);return t?(0,n.renderMarkdown)(t):""}catch(e){return e.isHandled=!0,""}}async function p(){return(await(0,s.getBackendSrv)().get(`${r.O2}`,{embedded:0})).filter(i.EP)}async function h(e){return await(0,s.getBackendSrv)().post(`${r.O2}/${e}/install`)}async function m(e){return await(0,s.getBackendSrv)().post(`${r.O2}/${e}/uninstall`)}async function g(e,t){const a=await(0,s.getBackendSrv)().datasourceRequest({url:`/api/plugins/${e}/settings`,method:"POST",data:t});return null==a?void 0:a.data}},"./public/app/features/plugins/admin/constants.ts":(e,t,a)=>{"use strict";a.d(t,{O2:()=>s,tB:()=>n,uJ:()=>r});const s="/api/plugins",n="/api/gnet",r="plugins"},"./public/app/features/plugins/admin/helpers.ts":(e,t,a)=>{"use strict";a.d(t,{uR:()=>i,Uj:()=>l,Nh:()=>c,AA:()=>d,XB:()=>h,RU:()=>m,fG:()=>g,EP:()=>f,wB:()=>b});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/core/services/backend_srv.ts");function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;const s=[],n=u(a);return e.forEach((e=>{const a=t.find((t=>t.slug===e.id)),r=n[e.id];a||s.push(o(e,void 0,r))})),t.forEach((t=>{const a=e.find((e=>e.id===t.slug)),r=n[t.slug];s.push(o(a,t,r))})),s}function o(e,t,a){return!e&&t?function(e,t){const{name:a,slug:s,description:n,version:r,orgName:i,popularity:o,downloads:l,typeCode:c,updatedAt:d,createdAt:u,status:h}=e,m=!!t;return{description:n,downloads:l,id:s,info:{logos:{small:`https://grafana.com/api/plugins/${s}/versions/${r}/logos/small`,large:`https://grafana.com/api/plugins/${s}/versions/${r}/logos/large`}},name:a,orgName:i,popularity:o,publishedAt:u,signature:p({remote:e,error:t}),updatedAt:d,hasUpdate:!1,isPublished:!0,isInstalled:m,isDisabled:m,isCore:e.internal,isDev:!1,isEnterprise:"enterprise"===h,type:c,error:null==t?void 0:t.errorCode}}(t,a):e&&!t?function(e,t){const{name:a,info:{description:s,version:n,logos:r,updated:i,author:o},id:l,dev:c,type:d,signature:u,signatureOrg:h,signatureType:m,hasUpdate:g}=e;return{description:s,downloads:0,id:l,info:{logos:r},name:a,orgName:o.name,popularity:0,publishedAt:"",signature:p({local:e,error:t}),signatureOrg:h,signatureType:m,updatedAt:i,installedVersion:n,hasUpdate:g,isInstalled:!0,isDisabled:!!t,isCore:"internal"===u,isPublished:!1,isDev:Boolean(c),isEnterprise:!1,type:d,error:null==t?void 0:t.errorCode}}(e,a):function(e,t,a){const s=null==e?void 0:e.info.version,r=(null==t?void 0:t.slug)||(null==e?void 0:e.id)||"",i=(null==e?void 0:e.type)||(null==t?void 0:t.typeCode),o=!!a;let l={small:`/public/img/icn-${i}.svg`,large:`/public/img/icn-${i}.svg`};t?l={small:`https://grafana.com/api/plugins/${r}/versions/${t.version}/logos/small`,large:`https://grafana.com/api/plugins/${r}/versions/${t.version}/logos/large`}:e&&e.info.logos&&(l=e.info.logos);return{description:(null==e?void 0:e.info.description)||(null==t?void 0:t.description)||"",downloads:(null==t?void 0:t.downloads)||0,hasUpdate:(null==e?void 0:e.hasUpdate)||!1,id:r,info:{logos:l},isCore:Boolean((null==t?void 0:t.internal)||(null==e?void 0:e.signature)===n.PluginSignatureStatus.internal),isDev:Boolean(null==e?void 0:e.dev),isEnterprise:"enterprise"===(null==t?void 0:t.status),isInstalled:Boolean(e)||o,isDisabled:o,isPublished:!0,name:(null==t?void 0:t.name)||(null==e?void 0:e.name)||"",orgName:(null==t?void 0:t.orgName)||(null==e?void 0:e.info.author.name)||"",popularity:(null==t?void 0:t.popularity)||0,publishedAt:(null==t?void 0:t.createdAt)||"",type:i,signature:p({local:e,remote:t,error:a}),signatureOrg:(null==e?void 0:e.signatureOrg)||(null==t?void 0:t.versionSignedByOrgName),signatureType:(null==e?void 0:e.signatureType)||(null==t?void 0:t.versionSignatureType)||(null==t?void 0:t.signatureType)||void 0,updatedAt:(null==t?void 0:t.updatedAt)||(null==e?void 0:e.info.updated)||"",installedVersion:s,error:null==a?void 0:a.errorCode}}(e,t,a)}const l=e=>`${s.config.pluginCatalogURL}${e}`;let c;!function(e){e.nameAsc="nameAsc",e.nameDesc="nameDesc",e.updated="updated",e.published="published",e.downloads="downloads"}(c||(c={}));const d=(e,t)=>{const a={nameAsc:(e,t)=>e.name.localeCompare(t.name),nameDesc:(e,t)=>t.name.localeCompare(e.name),updated:(e,t)=>(0,n.dateTimeParse)(t.updatedAt).valueOf()-(0,n.dateTimeParse)(e.updatedAt).valueOf(),published:(e,t)=>(0,n.dateTimeParse)(t.publishedAt).valueOf()-(0,n.dateTimeParse)(e.publishedAt).valueOf(),downloads:(e,t)=>t.downloads-e.downloads};return a[t]?e.sort(a[t]):e};function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(((e,t)=>(e[t.pluginId]=t,e)),{})}function p(e){const{error:t,local:a,remote:s}=e;if(t)switch(t.errorCode){case n.PluginErrorCode.invalidSignature:return n.PluginSignatureStatus.invalid;case n.PluginErrorCode.missingSignature:return n.PluginSignatureStatus.missing;case n.PluginErrorCode.modifiedSignature:return n.PluginSignatureStatus.modified}return null!=a&&a.signature?a.signature:null!=s&&s.signatureType||null!=s&&s.versionSignatureType?n.PluginSignatureStatus.valid:n.PluginSignatureStatus.missing}const h=()=>(0,r.i)().get("/api/frontend/settings").then((e=>{s.config.panels=e.panels}));function m(e){if(!e)return;const[t]=e.filter((e=>Boolean(e.isCompatible)));return t}const g=()=>s.config.pluginAdminEnabled,f=e=>v(e.id),b=e=>v(e.slug);function v(e){const{pluginCatalogHiddenPlugins:t}=s.config;return!t.includes(e)}},"./public/app/features/plugins/admin/permissions.ts":(e,t,a)=>{"use strict";a.d(t,{bO:()=>i,RN:()=>o,Gg:()=>l});var s=a("./public/app/core/config.ts"),n=a("./public/app/core/services/context_srv.ts"),r=a("./public/app/types/index.ts");function i(){return s.vc.bootData.user.isGrafanaAdmin}function o(){return n.Vt.hasRole("Admin")}function l(){return n.Vt.hasPermission(r.bW.DataSourcesCreate)&&n.Vt.hasPermission(r.bW.DataSourcesWrite)}},"./public/app/features/plugins/admin/state/actions.ts":(e,t,a)=>{"use strict";a.d(t,{Qd:()=>d,tQ:()=>u,DD:()=>p,N9:()=>h,Tz:()=>m,m3:()=>g,LP:()=>f,Ro:()=>b});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./public/app/features/plugins/importPanelPlugin.ts"),i=a("./public/app/features/plugins/admin/api.ts"),o=a("./public/app/features/plugins/admin/constants.ts"),l=a("./public/app/features/plugins/admin/helpers.ts"),c=a("./public/app/features/plugins/pluginCacheBuster.ts");const d=(0,s.hg)(`${o.uJ}/fetchAll`,(async(e,t)=>{try{const{dispatch:e}=t,[a,s,{payload:n}]=await Promise.all([(0,i.E1)(),(0,i.jL)(),e(u())]);return(0,l.uR)(a,n,s)}catch(e){return t.rejectWithValue("Unknown error.")}})),u=(0,s.hg)(`${o.uJ}/fetchRemotePlugins`,(async(e,t)=>{try{return await(0,i.$F)()}catch(e){return e.isHandled=!0,t.rejectWithValue([])}})),p=(0,s.hg)(`${o.uJ}/fetchDetails`,(async(e,t)=>{try{return{id:e,changes:{details:await(0,i.GV)(e)}}}catch(e){return t.rejectWithValue("Unknown error.")}})),h=(0,s.hg)(`${o.uJ}/install`,(async(e,t)=>{let{id:a,version:s,isUpdating:n=!1}=e;const r=n?{isInstalled:!0,installedVersion:s,hasUpdate:!1}:{isInstalled:!0,installedVersion:s};try{return await(0,i.Tk)(a),await(0,l.XB)(),n&&(0,c.Hl)(a),{id:a,changes:r}}catch(e){return console.error(e),t.rejectWithValue("Unknown error.")}})),m=(0,s.hg)(`${o.uJ}/uninstall`,(async(e,t)=>{try{return await(0,i.GP)(e),await(0,l.XB)(),(0,c.Hl)(e),{id:e,changes:{isInstalled:!1,installedVersion:void 0}}}catch(e){return console.error(e),t.rejectWithValue("Unknown error.")}})),g=(0,s.hg)(`${o.uJ}/loadPluginDashboards`,(async(e,t)=>{const a=`api/plugins/${t.getState().dataSources.dataSource.type}/dashboards`;return(0,n.getBackendSrv)().get(a)})),f=(0,s.PH)(`${o.uJ}/panelPluginLoaded`),b=e=>async(t,a)=>{let s=a().plugins.panels[e];return s||(s=await(0,r.U)(e),a().plugins.panels[e]||t(f(s))),s}},"./public/app/features/plugins/admin/state/reducer.ts":(e,t,a)=>{"use strict";a.d(t,{CD:()=>o,UC:()=>h,I6:()=>m});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./public/app/features/plugins/admin/state/actions.ts"),r=a("./public/app/features/plugins/admin/types.ts"),i=a("./public/app/features/plugins/admin/constants.ts");const o=(0,s.HF)(),l=e=>new RegExp(`${i.uJ}/(.*)/pending`).test(e.type),c=e=>new RegExp(`${i.uJ}/(.*)/fulfilled`).test(e.type),d=e=>new RegExp(`${i.uJ}/(.*)/rejected`).test(e.type),u=e=>{const t=e.lastIndexOf("/");return e.substring(0,t)},p=(0,s.oM)({name:"plugins",initialState:{items:o.getInitialState(),requests:{},settings:{displayMode:r.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},reducers:{setDisplayMode(e,t){e.settings.displayMode=t.payload}},extraReducers:e=>e.addCase(n.Qd.fulfilled,((e,t)=>{o.upsertMany(e.items,t.payload)})).addCase(n.DD.fulfilled,((e,t)=>{o.updateOne(e.items,t.payload)})).addCase(n.N9.fulfilled,((e,t)=>{o.updateOne(e.items,t.payload)})).addCase(n.Tz.fulfilled,((e,t)=>{o.updateOne(e.items,t.payload)})).addCase(n.LP,((e,t)=>{e.panels[t.payload.meta.id]=t.payload})).addCase(n.m3.pending,((e,t)=>{e.isLoadingPluginDashboards=!0,e.dashboards=[]})).addCase(n.m3.fulfilled,((e,t)=>{e.isLoadingPluginDashboards=!1,e.dashboards=t.payload})).addMatcher(l,((e,t)=>{e.requests[u(t.type)]={status:r.eE.Pending}})).addMatcher(c,((e,t)=>{e.requests[u(t.type)]={status:r.eE.Fulfilled}})).addMatcher(d,((e,t)=>{e.requests[u(t.type)]={status:r.eE.Rejected,error:t.payload}}))}),{setDisplayMode:h}=p.actions,m=p.reducer},"./public/app/features/plugins/admin/types.ts":(e,t,a)=>{"use strict";let s,n,r,i,o,l,c;a.d(t,{lL:()=>s,cd:()=>n,Co:()=>r,vF:()=>i,xc:()=>o,tu:()=>l,eE:()=>c}),function(e){e.Grid="grid",e.List="list"}(s||(s={})),function(e){e.Home="plugins-home",e.Browse="plugins-browse",e.Details="plugins-details",e.HomeAdmin="plugins-home-admin",e.BrowseAdmin="plugins-browse-admin",e.DetailsAdmin="plugins-details-admin"}(n||(n={})),function(e){e.app="apps",e.datasource="database",e.panel="credit-card",e.renderer="capture"}(r||(r={})),function(e){e.INSTALL="INSTALL",e.UNINSTALL="UNINSTALL",e.UPDATE="UPDATE",e.REINSTALL="REINSTALL"}(i||(i={})),function(e){e.OVERVIEW="Overview",e.VERSIONS="Version history",e.CONFIG="Config",e.DASHBOARDS="Dashboards"}(o||(o={})),function(e){e.OVERVIEW="overview",e.VERSIONS="version-history",e.CONFIG="config",e.DASHBOARDS="dashboards"}(l||(l={})),function(e){e.Pending="Pending",e.Fulfilled="Fulfilled",e.Rejected="Rejected"}(c||(c={}))},"./public/app/features/plugins/datasource_srv.ts":(e,t,a)=>{"use strict";a.d(t,{ND:()=>u,ak:()=>h});var s=a("./public/app/features/plugins/plugin_loader.ts"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./packages/grafana-data/src/index.ts"),i=a("./public/app/features/expressions/ExpressionDatasource.ts"),o=a("./packages/grafana-runtime/src/utils/DataSourceWithBackend.ts"),l=a("./public/app/core/app_events.ts"),c=a("./public/app/core/config.ts");function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,n.getTemplateSrv)();d(this,"datasources",{}),d(this,"settingsMapByName",{}),d(this,"settingsMapByUid",{}),d(this,"settingsMapById",{}),d(this,"defaultName",""),this.templateSrv=e}init(e,t){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=e,this.defaultName=t;for(const t of Object.values(e))t.uid||(t.uid=t.name),this.settingsMapByUid[t.uid]=t,this.settingsMapById[t.id]=t;this.datasources[o.hr.type]=i.mV,this.datasources[i.Yq]=i.mV,this.settingsMapByUid[o.hr.uid]=i.bE,this.settingsMapByUid[i.Yq]=i.bE}getDataSourceSettingsByUid(e){return this.settingsMapByUid[e]}getInstanceSettings(e,t){var a;const s="string"==typeof e;let n=s?e:null==e?void 0:e.uid;if("default"===n||null==n){var r;if(!s&&e){const t=null==e?void 0:e.type;if(t===o.hr.type)return i.mV.instanceSettings;t&&console.log("FIND Default instance for datasource type?",e)}return null!==(r=this.settingsMapByUid[this.defaultName])&&void 0!==r?r:this.settingsMapByName[this.defaultName]}if("$"===n[0]){const e=this.templateSrv.replace(n,t,p);let a;var l;if("default"===e)a=this.settingsMapByName[this.defaultName];else a=null!==(l=this.settingsMapByUid[e])&&void 0!==l?l:this.settingsMapByName[e];if(!a)return;return Object.assign({},a,{isDefault:!1,name:n,uid:n,rawRef:{type:a.type,uid:a.uid}})}return null!==(a=this.settingsMapByUid[n])&&void 0!==a?a:this.settingsMapByName[n]}get(e,t){let a="string"==typeof e?e:null==e?void 0:e.uid;if(!a)return this.get(this.defaultName);const s=this.settingsMapByName[a];return s&&(a=s.uid),this.datasources[a]?Promise.resolve(this.datasources[a]):(a=this.templateSrv.replace(a,t,p),"default"===a&&"default"!==this.defaultName?this.get(this.defaultName):this.datasources[a]?Promise.resolve(this.datasources[a]):this.loadDatasource(a))}async loadDatasource(e){var t,a;if(this.datasources[e])return Promise.resolve(this.datasources[e]);const i=null!==(t=null!==(a=this.settingsMapByUid[e])&&void 0!==a?a:this.settingsMapByName[e])&&void 0!==t?t:this.settingsMapById[e];if(!i)return Promise.reject({message:`Datasource ${e} was not found`});try{const t=await(0,s.nL)(i.meta);if(this.datasources[e])return this.datasources[e];let a;if(a=1!==t.DataSourceClass.length?(0,n.getLegacyAngularInjector)().instantiate(t.DataSourceClass,{instanceSettings:i}):new t.DataSourceClass(i),a.components=t.components,!(a instanceof r.DataSourceApi)){const e=a;e.name=i.name,e.id=i.id,e.type=i.type,e.meta=i.meta,e.uid=i.uid,a.getRef=r.DataSourceApi.prototype.getRef}return this.datasources[e]=a,this.datasources[a.uid]=a,a}catch(t){return l.Z.emit(r.AppEvents.alertError,[i.name+" plugin failed",t.toString()]),Promise.reject({message:`Datasource: ${e} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.values(this.settingsMapByName).filter((t=>"grafana"!==t.meta.id&&"mixed"!==t.meta.id&&"dashboard"!==t.meta.id&&(!(e.metrics&&!t.meta.metrics)&&(!(e.tracing&&!t.meta.tracing)&&(!(e.annotations&&!t.meta.annotations)&&(!(e.alerting&&!t.meta.alerting)&&((!e.pluginId||t.meta.id===e.pluginId)&&(!(e.filter&&!e.filter(t))&&(!(e.type&&!(Array.isArray(e.type)?e.type.includes(t.type):e.type===t.type))&&!(!e.all&&!0!==t.meta.metrics&&!0!==t.meta.annotations&&!0!==t.meta.tracing&&!0!==t.meta.logs&&!0!==t.meta.alerting))))))))));if(e.variables)for(const e of this.templateSrv.getVariables().filter((e=>"datasource"===e.type))){const a=e,s="default"===a.current.value?this.defaultName:a.current.value,n=this.settingsMapByName[s];if(n){const a=`\${${e.name}}`;t.push(Object.assign({},n,{name:a,uid:a}))}}const a=t.sort(((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0));if(!e.pluginId&&!e.alerting){if(e.mixed){const e=this.getInstanceSettings("-- Mixed --");e&&t.push(e)}if(e.dashboard){const e=this.getInstanceSettings("-- Dashboard --");e&&t.push(e)}if(!e.tracing){const e=this.getInstanceSettings("-- Grafana --");e&&t.push(e)}}return a}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map((e=>({name:e.name,value:e.isDefault?null:e.name,meta:e.meta})))}getMetricSources(e){return this.getList({metrics:!0,variables:!(null!=e&&e.skipVariables)}).map((e=>({name:e.name,value:e.isDefault?null:e.name,meta:e.meta})))}async reload(){const e=await(0,n.getBackendSrv)().get("/api/frontend/settings");c.ZP.datasources=e.datasources,c.ZP.defaultDatasource=e.defaultDatasource,this.init(e.datasources,e.defaultDatasource)}}function p(e){return Array.isArray(e)?e[0]:e}const h=()=>(0,n.getDataSourceSrv)()},"./public/app/features/plugins/importPanelPlugin.ts":(e,t,a)=>{"use strict";a.d(t,{U:()=>l,_:()=>c});var s=a("./public/app/core/config.ts"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/features/panel/components/PanelPluginError.tsx"),i=a("./public/app/features/plugins/plugin_loader.ts");const o={};function l(e){const t=o[e];if(t)return t;const a=s.ZP.panels[e];if(!a)throw new Error(`Plugin ${e} not found`);return o[e]=d(a),o[e]}function c(e){return d(e)}function d(e){var t;return(0,i.N$)(e.module,null===(t=e.info)||void 0===t?void 0:t.version).then((e=>{if(e.plugin)return e.plugin;if(e.PanelCtrl){const t=new n.PanelPlugin(null);return t.angularPanelCtrl=e.PanelCtrl,t}throw new Error("missing export: plugin or PanelCtrl")})).then((t=>(t.meta=e,t))).catch((t=>(console.warn("Error loading panel plugin: "+e.id,t),(0,r.F)(e,t))))}},"./public/app/features/plugins/pluginCacheBuster.ts":(e,t,a)=>{"use strict";a.d(t,{Vf:()=>i,Hl:()=>o,hf:()=>l});var s=a("./public/app/features/plugins/pluginSettings.ts");const n={},r=Date.now();function i(e){let{path:t,version:a}=e;n[t]||(n[t]=encodeURI(a))}function o(e){const t=`plugins/${e}/module`;n[t]&&delete n[t],(0,s.Z)(e)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;const{address:a}=e,s=c(a);if(!s)return`${a}?_cache=${t}`;const i=n[s],o=i||t;return`${a}?_cache=${o}`}function c(e){const t=/\/public\/(plugins\/.+\/module)\.js/i.exec(e);if(!t)return;const[a,s]=t;return s||void 0}},"./public/app/features/plugins/pluginSettings.ts":(e,t,a)=>{"use strict";a.d(t,{a:()=>r,Z:()=>i});var s=a("./packages/grafana-runtime/src/index.ts");const n={};function r(e){const t=n[e];return t?Promise.resolve(t):(0,s.getBackendSrv)().get(`/api/plugins/${e}/settings`).then((t=>(n[e]=t,t))).catch((e=>Promise.reject(new Error("Unknown Plugin"))))}const i=e=>e?delete n[e]:Object.keys(n).forEach((e=>delete n[e]))},"./public/app/features/plugins/plugin_loader.ts":(e,t,a)=>{"use strict";a.d(t,{Av:()=>Vc,nL:()=>zc,N$:()=>Ec});var s={};a.r(s),a.d(s,{getFlotRange:()=>ne,getFlotTickDecimals:()=>re,getFlotTickSize:()=>se,getPrecision:()=>le,getScaledDecimals:()=>ae,getStringPrecision:()=>ce,grafanaTimeFormat:()=>ie,logp:()=>oe,tickStep:()=>te});var n={};a.r(n),a.d(n,{plugin:()=>Se});var r={};a.r(r),a.d(r,{plugin:()=>Nt});var i={};a.r(i),a.d(i,{plugin:()=>Vt});var o={};a.r(o),a.d(o,{plugin:()=>Wt});var l={};a.r(l),a.d(l,{plugin:()=>la});var c={};a.r(c),a.d(c,{GraphCtrl:()=>Ns,plugin:()=>Is});var d={};a.r(d),a.d(d,{plugin:()=>cn});var u={};a.r(u),a.d(u,{plugin:()=>Nn});var p={};a.r(p),a.d(p,{plugin:()=>$n});var h={};a.r(h),a.d(h,{plugin:()=>gr});var m={};a.r(m),a.d(m,{plugin:()=>Pr});var g={};a.r(g),a.d(g,{PanelCtrl:()=>gi});var f={};a.r(f),a.d(f,{plugin:()=>Ii});var b={};a.r(b),a.d(b,{TablePanelCtrl:()=>Ui,plugin:()=>Hi});var v={};a.r(v),a.d(v,{plugin:()=>go});var x={};a.r(x),a.d(x,{plugin:()=>Ho});var y={};a.r(y),a.d(y,{plugin:()=>Go});var w={};a.r(w),a.d(w,{plugin:()=>pl});var j={};a.r(j),a.d(j,{plugin:()=>fl});var C={};a.r(C),a.d(C,{plugin:()=>kl});var k={};a.r(k),a.d(k,{plugin:()=>Ul});var S={};a.r(S),a.d(S,{plugin:()=>sc});var T={};a.r(T),a.d(T,{plugin:()=>ic});var O={};a.r(O),a.d(O,{plugin:()=>uc});var _={};a.r(_),a.d(_,{plugin:()=>wc});var N={};a.r(N),a.d(N,{plugin:()=>Ic});var I=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),P=a.n(I),M=a("./public/app/plugins/sdk.ts"),F=a("./public/app/core/utils/kbn.ts"),A=a("../../opt/drone/yarncache/moment-npm-2.29.2-7e4b405a08-ee850b5776.zip/node_modules/moment/moment.js"),D=a.n(A),$=a("../../opt/drone/yarncache/angular-npm-1.8.2-307000482b-35ea81a23b.zip/node_modules/angular/index.js"),L=a.n($),R=a("../../opt/drone/yarncache/jquery-npm-3.6.0-ca7872bdbb-8fd5fef4aa.zip/node_modules/jquery/dist/jquery-exposed.js"),E=a.n(R),z=a("../../opt/drone/yarncache/prismjs-npm-1.26.0-15be1ab06b-6de058930c.zip/node_modules/prismjs/prism.js"),V=a.n(z),B=a("./.yarn/__virtual__/slate-virtual-baec9b5e63/3/opt/drone/yarncache/slate-npm-0.47.8-44bfd82cc1-6d3541abe1.zip/node_modules/slate/lib/slate.es.js"),U=a("./.yarn/__virtual__/@grafana-slate-react-virtual-047372596b/3/opt/drone/yarncache/@grafana-slate-react-npm-0.22.10-grafana-510bc0576d-3417c53d9d.zip/node_modules/@grafana/slate-react/lib/slate-react.es.js"),H=a("./.yarn/__virtual__/slate-plain-serializer-virtual-9906fec247/3/opt/drone/yarncache/slate-plain-serializer-npm-0.7.10-484f263cc0-0fe3f736cb.zip/node_modules/slate-plain-serializer/lib/slate-plain-serializer.es.js"),q=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),W=a("./.yarn/__virtual__/react-dom-virtual-93e2c4839c/3/opt/drone/yarncache/react-dom-npm-17.0.2-f551215af1-1c1eaa3bca.zip/node_modules/react-dom/index.js"),G=a("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),Z=a("../../opt/drone/yarncache/redux-npm-4.1.2-04cdbe7a08-6a839cee5b.zip/node_modules/redux/es/redux.js"),Q=a("./public/app/core/config.ts"),K=a("./public/app/core/time_series2.ts"),Y=a("./public/app/core/table_model.ts"),J=a("./public/app/angular/core_module.ts"),X=a("./public/app/core/core.ts"),ee=a("./public/app/core/utils/flatten.ts");function te(e,t,a){const s=Math.sqrt(50),n=Math.sqrt(10),r=Math.sqrt(2),i=Math.abs(t-e)/Math.max(0,a);let o=Math.pow(10,Math.floor(Math.log(i)/Math.LN10));const l=i/o;return l>=s?o*=10:l>=n?o*=5:l>=r&&(o*=2),t<e?-o:o}function ae(e,t){return e-Math.floor(Math.log(t)/Math.LN10)}function se(e,t,a,s){const n=(t-e)/a;let r=-Math.floor(Math.log(n)/Math.LN10);const i=s,o=Math.pow(10,-r),l=n/o;let c;return l<1.5?c=1:l<3?(c=2,l>2.25&&(null==i||r+1<=i)&&(c=2.5,++r)):c=l<7.5?5:10,c*=o,c}function ne(e,t,a,s){let n=+(null!=e?e:a),r=+(null!=t?t:s);const i=r-n;if(0===i){const a=.25,s=Math.abs(0===r?1:r*a);null===e&&(n-=s),null!=t&&null==e||(r+=s)}else{const o=.02;null!=o&&(null==e&&(n-=i*o,n<0&&null!=a&&a>=0&&(n=0)),null==t&&(r+=i*o,r>0&&null!=s&&s<=0&&(r=0)))}return{min:n,max:r}}function re(e,t,a,s){const{min:n,max:r}=ne(a.min,a.max,e,t),i=(r-n)/(.3*Math.sqrt(s)),o=-Math.floor(Math.log(i)/Math.LN10),l=Math.pow(10,-o),c=i/l;let d;c<1.5?d=1:c<3?(d=2,c>2.25&&(d=2.5)):d=c<7.5?5:10,d*=l;const u=Math.max(0,1-Math.floor(Math.log(i)/Math.LN10));return{tickDecimals:u,scaledDecimals:u-Math.floor(Math.log(d)/Math.LN10)}}function ie(e,t,a){if(t&&a&&e){const s=a-t,n=s/e/1e3,r=864e5,i=31536e6;return n<=45?"HH:mm:ss":n<=7200||s<=r?"HH:mm":n<=8e4?"MM/DD HH:mm":n<=2419200||s<=i?"MM/DD":"YYYY-MM"}return"HH:mm"}function oe(e,t){return Math.log(e)/Math.log(t)}function le(e){return ce(e.toString())}function ce(e){if(isNaN(e))return 0;const t=e.indexOf(".");return-1===t?0:e.length-t-1}var de=a("./public/app/core/services/backend_srv.ts"),ue=a("./public/app/angular/promiseToDigest.ts"),pe=a("./public/app/core/services/impression_srv.ts"),he=a("./packages/grafana-data/src/index.ts");Object.freeze([0,0]);let me;!function(e){e.HTML="html",e.Markdown="markdown"}(me||(me={}));const ge={content:"# Title\n\nFor markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)",mode:me.Markdown};var fe=a("./packages/grafana-ui/src/index.ts"),be=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),ve=a("./.yarn/__virtual__/dangerously-set-html-content-virtual-9e80f79a40/3/opt/drone/yarncache/dangerously-set-html-content-npm-1.0.9-f0bf87a458-a30c3f1f0f.zip/node_modules/dangerously-set-html-content/dist/index.es.js"),xe=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");class ye extends q.PureComponent{constructor(e){var t,a,s;super(e),t=this,a="updateHTML",s=(0,I.debounce)((()=>{const e=this.processContent(this.props.options);e!==this.state.html&&this.setState({html:e})}),150),a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.state={html:this.processContent(e.options)}}componentDidUpdate(e){this.updateHTML()}prepareHTML(e){return this.interpolateAndSanitizeString(e)}prepareMarkdown(e){return this.interpolateAndSanitizeString((0,he.renderTextPanelMarkdown)(e,{noSanitize:Q.ZP.disableSanitizeHtml}))}interpolateAndSanitizeString(e){const{replaceVariables:t}=this.props;return e=t(e,{},"html"),Q.ZP.disableSanitizeHtml?e:he.textUtil.sanitizeTextPanelContent(e)}processContent(e){const{mode:t,content:a}=e;return a?t===me.HTML?this.prepareHTML(a):this.prepareMarkdown(a):""}render(){const{html:e}=this.state,t=we();return(0,xe.jsx)(fe.CustomScrollbar,{autoHeightMin:"100%",children:(0,xe.jsx)(ve.Z,{html:e,className:(0,be.cx)("markdown-html",t.content)})})}}const we=(0,fe.stylesFactory)((()=>({content:be.css`
      height: 100%;
    `})));var je=a("./.yarn/__virtual__/react-virtualized-auto-sizer-virtual-b5ab366cb0/3/opt/drone/yarncache/react-virtualized-auto-sizer-npm-1.0.6-50869b8392-81270e9d32.zip/node_modules/react-virtualized-auto-sizer/dist/index.esm.js");const Ce=e=>{let{value:t,onChange:a,context:s}=e;const n=(0,q.useMemo)((()=>{var e,t;return null!==(e=null===(t=s.options)||void 0===t?void 0:t.mode)&&void 0!==e?e:me.Markdown}),[s]),r=(0,fe.useTheme)(),i=ke(r),o=()=>s.getSuggestions?s.getSuggestions().map((e=>(0,fe.variableSuggestionToCodeEditorSuggestion)(e))):[];return(0,xe.jsx)("div",{className:(0,be.cx)(i.editorBox),children:(0,xe.jsx)(je.Z,{disableHeight:!0,children:e=>{let{width:s}=e;return 0===s?null:(0,xe.jsx)(fe.CodeEditor,{value:t,onBlur:a,onSave:a,language:n,width:s,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:o})}})})},ke=(0,fe.stylesFactory)((e=>({editorBox:be.css`
    label: editorBox;
    border: ${e.border.width.sm} solid ${e.colors.border2};
    border-radius: ${e.border.radius.sm};
    margin: ${e.spacing.xs} 0;
    width: 100%;
  `}))),Se=new he.PanelPlugin(ye).setPanelOptions((e=>{e.addRadio({path:"mode",name:"Mode",description:"text mode of the panel",settings:{options:[{value:me.Markdown,label:"Markdown"},{value:me.HTML,label:"HTML"}]},defaultValue:ge.mode}).addCustomEditor({id:"content",path:"content",name:"Content",description:"Content of the panel",editor:Ce,defaultValue:ge.content})})).setMigrationHandler((e=>{const t=parseFloat(e.pluginVersion||"6.1");let a=e.options;if(e.hasOwnProperty("content")&&e.hasOwnProperty("mode")){const s=e,n=s.content,r=s.mode;delete s.content,delete s.mode,t<7.1&&(a={content:n,mode:r})}return"html"!==a.mode&&"markdown"!==a.mode&&(a=Object.assign({},a,{mode:me.Markdown})),a}));var Te=a("./packages/grafana-schema/src/index.ts"),Oe=a("./public/app/features/explore/utils/links.ts"),_e=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useClickAway.js"),Ne=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useAsyncFn.js"),Ie=a("./public/app/core/components/TagFilter/TagFilter.tsx"),Pe=a("./public/app/features/annotations/api.ts");const Me=["annotation","onSave","onDismiss","timeFormatter","className"],Fe=["ref","onChange"];function Ae(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}const De=q.forwardRef(((e,t)=>{var a;let{annotation:s,onSave:n,onDismiss:r,timeFormatter:i,className:o}=e,l=Ae(e,Me);const c=(0,fe.useStyles2)($e),d=(0,fe.usePanelContext)(),u=(0,q.useRef)(null);(0,_e.Z)(u,(()=>{r()}));const[p,h]=(0,Ne.default)((async e=>{const t=await d.onAnnotationCreate(e);return n&&n(),t})),[m,g]=(0,Ne.default)((async e=>{const t=await d.onAnnotationUpdate(e);return n&&n(),t})),f=void 0!==s.id,b=s.time!==s.timeEnd,v=f?g:h,x=f?m:p,y=b?`${i(s.time)} - ${i(s.timeEnd)}`:i(s.time),w=(0,xe.jsxs)("div",Object.assign({ref:t,className:(0,be.cx)(c.editor,o)},l,{children:[(0,xe.jsx)("div",{className:c.header,children:(0,xe.jsxs)(fe.HorizontalGroup,{justify:"space-between",align:"center",children:[(0,xe.jsx)("div",{className:c.title,children:"Add annotation"}),(0,xe.jsx)("div",{className:c.ts,children:y})]})}),(0,xe.jsx)("div",{className:c.editorForm,children:(0,xe.jsx)(fe.Form,{onSubmit:e=>{let{tags:t,description:a}=e;v({id:s.id,tags:t,description:a,from:Math.round(s.time),to:Math.round(s.timeEnd)})},defaultValues:{description:null==s?void 0:s.text,tags:(null==s?void 0:s.tags)||[]},children:e=>{var t;let{register:s,errors:n,control:i}=e;return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(fe.Field,{label:"Description",invalid:!!n.description,error:null==n||null===(t=n.description)||void 0===t?void 0:t.message,children:(0,xe.jsx)(fe.TextArea,Object.assign({},s("description",{required:"Annotation description is required"})))}),(0,xe.jsx)(fe.Field,{label:"Tags",children:(0,xe.jsx)(fe.InputControl,{control:i,name:"tags",render:e=>{let{field:{onChange:t}}=e,a=Ae(e.field,Fe);return(0,xe.jsx)(Ie.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:t,tagOptions:Pe.lK,tags:a.value})}})}),(0,xe.jsxs)(fe.HorizontalGroup,{justify:"flex-end",children:[a||(a=(0,xe.jsx)(fe.Button,{size:"sm",variant:"secondary",onClick:r,fill:"outline",children:"Cancel"})),(0,xe.jsx)(fe.Button,{size:"sm",type:"submit",disabled:null==x?void 0:x.loading,children:null!=x&&x.loading?"Saving":"Save"})]})]})}})})]}));return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)("div",{className:c.backdrop}),(0,xe.jsx)("div",{ref:u,children:w})]})}));De.displayName="AnnotationEditorForm";const $e=e=>({backdrop:be.css`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${e.zIndex.navbarFixed};
    `,editorContainer:be.css`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:be.css`
      background: ${e.colors.background.primary};
      box-shadow: ${e.shadows.z3};
      z-index: ${e.zIndex.dropdown};
      border: 1px solid ${e.colors.border.weak};
      border-radius: ${e.shape.borderRadius()};
      width: 460px;
    `,editorForm:be.css`
      padding: ${e.spacing(1)};
    `,header:be.css`
      border-bottom: 1px solid ${e.colors.border.weak};
      padding: ${e.spacing(1.5,1)};
    `,title:be.css`
      font-weight: ${e.typography.fontWeightMedium};
    `,ts:be.css`
      font-size: ${e.typography.bodySmall.fontSize};
      color: ${e.colors.text.secondary};
    `}),Le=e=>t=>{const a=e.visualization.getColorByName((null==t?void 0:t.color)||fe.DEFAULT_ANNOTATION_COLOR);return{markerTriangle:be.css`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${a};
      `,markerBar:be.css`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${a};
      `}};var Re=a("./.yarn/__virtual__/react-popper-virtual-0f6b5e2cc8/3/opt/drone/yarncache/react-popper-npm-2.2.5-6e86e4bf1e-915fcf08e1.zip/node_modules/react-popper/lib/esm/usePopper.js"),Ee=a("./packages/grafana-ui/src/themes/mixins.ts"),ze=a("./public/app/features/alerting/state/alertDef.ts");const Ve=e=>{var t,a;let{annotation:s,timeFormatter:n,editable:r,onEdit:i,onDelete:o}=e;const l=(0,fe.useStyles2)(Be),c=n(s.time),d=n(s.timeEnd);let u=s.text;const p=s.tags;let h,m,g="",f=null;const b=(0,xe.jsx)("span",{className:l.time,children:Boolean(s.isRegion)?`${c} - ${d}`:c});if(s.login&&s.avatarUrl&&(h=(0,xe.jsx)("img",{className:l.avatar,src:s.avatarUrl})),void 0!==s.alertId&&s.newState){const e=ze.Z.getStateDisplayModel(s.newState);f=(0,xe.jsx)("div",{className:l.alertState,children:(0,xe.jsx)("i",{className:e.stateClass,children:e.text})}),g=ze.Z.getAlertAnnotationInfo(s)}else s.title&&(u=s.title+"<br />"+("string"==typeof u?u:""));return r&&(m=(0,xe.jsxs)("div",{className:l.editControls,children:[t||(t=(0,xe.jsx)(fe.IconButton,{name:"pen",size:"sm",onClick:i})),a||(a=(0,xe.jsx)(fe.IconButton,{name:"trash-alt",size:"sm",onClick:o}))]})),(0,xe.jsxs)("div",{className:l.wrapper,children:[(0,xe.jsx)("div",{className:l.header,children:(0,xe.jsxs)(fe.HorizontalGroup,{justify:"space-between",align:"center",spacing:"md",children:[(0,xe.jsxs)("div",{className:l.meta,children:[(0,xe.jsxs)("span",{children:[h,f]}),b]}),m]})}),(0,xe.jsxs)("div",{className:l.body,children:[u&&(0,xe.jsx)("div",{dangerouslySetInnerHTML:{__html:he.textUtil.sanitize(u)}}),g,(0,xe.jsx)(xe.Fragment,{children:(0,xe.jsx)(fe.HorizontalGroup,{spacing:"xs",wrap:!0,children:null==p?void 0:p.map(((e,t)=>(0,xe.jsx)(fe.Tag,{name:e},`${e}-${t}`)))})})]})]})};Ve.displayName="AnnotationTooltip";const Be=e=>({wrapper:be.css`
      max-width: 400px;
    `,header:be.css`
      padding: ${e.spacing(.5,1)};
      border-bottom: 1px solid ${e.colors.border.weak};
      font-size: ${e.typography.bodySmall.fontSize};
      display: flex;
    `,meta:be.css`
      display: flex;
      justify-content: space-between;
    `,editControls:be.css`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:be.css`
      border-radius: 50%;
      width: 16px;
      height: 16px;
      margin-right: ${e.spacing(1)};
    `,alertState:be.css`
      padding-right: ${e.spacing(1)};
      font-weight: ${e.typography.fontWeightMedium};
    `,time:be.css`
      color: ${e.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:be.css`
      padding: ${e.spacing(1)};

      a {
        color: ${e.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),Ue=["canAddAnnotations"];const He={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function qe(e){let{annotation:t,timeZone:a,style:s}=e;const n=(0,fe.usePanelContext)(),{canAddAnnotations:r}=n,i=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(n,Ue),o=(0,fe.useStyles2)(Le),l=(0,fe.useStyles2)(We),[c,d]=(0,q.useState)(!1),[u,p]=(0,q.useState)(!1),[h,m]=(0,q.useState)(null),[g,f]=(0,q.useState)(null),[b,v]=(0,q.useState)(null),x=(0,q.useRef)(),y=(0,Re.D)(h,g,He),w=(0,Re.D)(h,b,He),j=(0,q.useCallback)((()=>{p(!0),d(!1)}),[p,d]),C=(0,q.useCallback)((()=>{i.onAnnotationDelete&&i.onAnnotationDelete(t.id)}),[t,i]),k=(0,q.useCallback)((()=>{x.current&&clearTimeout(x.current),d(!0)}),[d]),S=(0,q.useCallback)((()=>{x.current&&clearTimeout(x.current)}),[]),T=(0,q.useCallback)((()=>{x.current=setTimeout((()=>{d(!1)}),100)}),[d]),O=(0,q.useCallback)((e=>(0,he.dateTimeFormat)(e,{format:he.systemDateFormats.fullDate,timeZone:a})),[a]),_=(0,q.useCallback)((()=>(0,xe.jsx)(Ve,{annotation:t,timeFormatter:O,onEdit:j,onDelete:C,editable:Boolean(r&&r())})),[r,C,j,O,t]),N=Boolean(t.isRegion);let I=(0,xe.jsx)("div",{className:o(t).markerTriangle,style:{transform:"translate3d(-100%,-50%, 0)"}});return N&&(I=(0,xe.jsx)("div",{className:o(t).markerBar,style:Object.assign({},s,{transform:"translate3d(0,-50%, 0)"})})),(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)("div",{ref:m,onMouseEnter:k,onMouseLeave:T,className:N?void 0:l.markerWrapper,children:I}),c&&(0,xe.jsx)(fe.Portal,{children:(0,xe.jsx)("div",Object.assign({ref:f,style:y.styles.popper},y.attributes.popper,{className:l.tooltip,onMouseEnter:S,onMouseLeave:T,children:_()}))}),u&&(0,xe.jsx)(fe.Portal,{children:(0,xe.jsx)(De,Object.assign({onDismiss:()=>p(!1),onSave:()=>p(!1),timeFormatter:O,annotation:t,ref:v,style:w.styles.popper},w.attributes.popper))})]})}const We=e=>({markerWrapper:be.css`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:be.css`
      max-width: 400px;
    `,tooltip:be.css`
      ${(0,Ee.getTooltipContainerStyles)(e)};
      padding: 0;
    `}),Ge=e=>{let{annotations:t,timeZone:a,config:s}=e;const n=(0,fe.useTheme2)(),r=(0,q.useRef)(),i=(0,q.useRef)();(0,q.useEffect)((()=>{const e=[];for(const a of t)e.push(new he.DataFrameView(a));i.current=e}),[t]),(0,q.useLayoutEffect)((()=>{s.addHook("init",(e=>{r.current=e})),s.addHook("draw",(e=>{if(!i.current)return null;const t=e.ctx;if(!t)return;t.save(),t.beginPath(),t.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),t.clip();const a=(a,s)=>{t.beginPath(),t.lineWidth=2,t.strokeStyle=s,t.setLineDash([5,5]),t.moveTo(a,e.bbox.top),t.lineTo(a,e.bbox.top+e.bbox.height),t.stroke(),t.closePath()};for(let s=0;s<i.current.length;s++){const r=i.current[s];for(let s=0;s<r.length;s++){const i=r.get(s);if(!i.time)continue;let o=e.valToPos(i.time,"x",!0);const l=n.visualization.getColorByName(i.color);if(a(o,l),i.isRegion&&i.timeEnd){let s=e.valToPos(i.timeEnd,"x",!0);a(s,l),t.fillStyle=he.colorManipulator.alpha(l,.1),t.rect(o,e.bbox.top,s-o,e.bbox.height),t.fill()}}}t.restore()}))}),[s,n]);const o=(0,q.useCallback)(((e,t)=>{const a=new he.DataFrameView(e).get(t.fieldIndex);if(!a.time||!r.current)return;let s=r.current.valToPos(a.time,"x");return s<0&&(s=0),{x:s,y:r.current.bbox.height/window.devicePixelRatio+4}}),[]),l=(0,q.useCallback)(((e,t)=>{let s;const n=new he.DataFrameView(e).get(t.fieldIndex);if(Boolean(n.isRegion)&&r.current){let e=r.current.valToPos(n.time,"x"),t=r.current.valToPos(n.timeEnd,"x");e<0&&(e=0),t>r.current.bbox.width/window.devicePixelRatio&&(t=r.current.bbox.width/window.devicePixelRatio),s={width:t-e+"px"}}return(0,xe.jsx)(qe,{annotation:n,timeZone:a,style:s})}),[a]);return(0,xe.jsx)(fe.EventsCanvas,{id:"annotations",config:s,events:t,renderEventMarker:l,mapEventToXYCoords:o})};var Ze=a("./.yarn/__virtual__/@emotion-react-virtual-a8cfa8ca23/3/opt/drone/yarncache/@emotion-react-npm-11.7.1-29be6cd15f-3392aa71f9.zip/node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),Qe=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useClickAway.js"),Ke=a("./packages/grafana-ui/src/components/uPlot/utils.ts");const Ye=["data","config","onClose","timeZone","replaceVariables"],Je=["selection","timeZone","defaultItems","replaceVariables","data"];function Xe(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}const et=e=>{let{data:t,config:a,onClose:s,timeZone:n,replaceVariables:r}=e,i=Xe(e,Ye);const o=(0,q.useRef)(),[l,c]=(0,q.useState)(null),[d,u]=(0,q.useState)(null),[p,h]=(0,q.useState)(!1),m=(0,q.useCallback)((()=>{h(!0)}),[h]),g=(0,q.useCallback)((()=>{h(!1)}),[h]),f=(0,q.useCallback)((()=>{(0,Ke.Zp)("ContextMenuPlugin",!1,"clearing click selection"),u(null)}),[u]);(0,q.useLayoutEffect)((()=>{let e;const t=t=>{let a={viewport:{x:t.clientX,y:t.clientY},plotCanvas:{x:0,y:0}};e&&(a=Object.assign({},a,{plotCanvas:{x:t.clientX-e.left,y:t.clientY-e.top}})),c(a)};a.addHook("syncRect",((t,a)=>{e=a})),a.addHook("init",(e=>{var a,s,n,r;const i=e.over;o.current=i||void 0,null===(a=o.current)||void 0===a||a.addEventListener("mousedown",t),(0,Ke.Zp)("ContextMenuPlugin",!1,"init");let l=!1,c=Array.from(e.root.querySelectorAll(".u-cursor-pt"));null===(s=o.current)||void 0===s||s.addEventListener("mousedown",(()=>{l=!0})),null===(n=o.current)||void 0===n||n.addEventListener("mousemove",(()=>{l=!1})),null===(r=o.current)||void 0===r||r.addEventListener("mouseup",(e=>{if(!l||e.metaKey||e.ctrlKey)u(null);else{if(l=!0,e.target){e.target.classList.contains("u-cursor-pt")||((0,Ke.Zp)("ContextMenuPlugin",!1,"canvas click"),u({seriesIdx:null,dataIdx:null}))}m()}})),c.length>0&&c.forEach(((t,a)=>{t.addEventListener("click",(()=>{const t=a+1,s=e.cursor.idx;(0,Ke.Zp)("ContextMenuPlugin",!1,t,s),u({seriesIdx:t,dataIdx:null!=s?s:null})}))}))}))}),[a,m,c,u]);const b=(0,q.useMemo)((()=>i.defaultItems?i.defaultItems.map((e=>Object.assign({},e,{items:e.items.map((e=>Object.assign({},e,{onClick:t=>{l&&e.onClick&&e.onClick(t,{coords:l})}})))}))):[]),[l,i.defaultItems]);return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Ze.xB,{styles:Ze.iv`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),p&&l&&(0,xe.jsx)(tt,{data:t,defaultItems:b,timeZone:n,selection:{point:d,coords:l},replaceVariables:r,onClose:()=>{f(),g(),s&&s()}})]})},tt=e=>{let{selection:t,defaultItems:a,data:s}=e,n=Xe(e,Je);const r=(0,q.useRef)(null),i=()=>{n.onClose&&n.onClose()};(0,Qe.Z)(r,(()=>{i()}));const o=s.fields[0];if(!o)return null;const l=a?[...a]:[];let c=()=>null;if(t.point){const{seriesIdx:e,dataIdx:a}=t.point,n=o.display;if(e&&null!==a){const t=s.fields[e],r=t.display(t.values.get(a));t.config.links&&t.config.links.length>0&&t.getLinks&&l.push({items:t.getLinks({valueRowIndex:a}).map((e=>({label:e.title,ariaLabel:e.title,url:e.href,target:e.target,icon:""+("_self"===e.target?"link":"external-link-alt"),onClick:e.onClick})))}),c=()=>(0,xe.jsx)(fe.GraphContextMenuHeader,{timestamp:n(o.values.get(a)).text,displayValue:r,seriesColor:r.color,displayName:(0,he.getFieldDisplayName)(t,s)})}}return(0,xe.jsx)(fe.ContextMenu,{renderMenuItems:()=>null==l?void 0:l.map(((e,t)=>(0,xe.jsx)(fe.MenuGroup,{label:e.label,children:(e.items||[]).map((e=>(0,xe.jsx)(fe.MenuItem,{url:e.url,label:e.label,target:e.target,icon:e.icon,active:e.active,onClick:e.onClick},e.label)))},`${e.label}${t}`))),renderHeader:c,x:t.coords.viewport.x,y:t.coords.viewport.y,onClose:i})};var at,st,nt,rt,it,ot,lt=a("./packages/grafana-e2e-selectors/src/index.ts");const ct=e=>{var t;let{timeZone:a,dataFrame:s,dataFrameFieldIndex:n,config:r,getFieldLinks:i}=e;const o=(0,fe.useStyles)(dt),[l,c]=(0,q.useState)(!1),[d,u]=q.useState(null),[p,h]=q.useState(null),{styles:m,attributes:g}=(0,Re.D)(d,p),f=(0,q.useRef)(),b=(0,q.useCallback)((()=>{f.current&&clearTimeout(f.current),c(!0)}),[c]),v=(0,q.useCallback)((()=>{f.current=setTimeout((()=>{c(!1)}),100)}),[c]),x=(0,q.useCallback)((()=>{const e=e=>(0,he.dateTimeFormat)(e,{format:he.systemDateFormats.fullDate,timeZone:a});return(0,xe.jsx)("div",Object.assign({onMouseEnter:b,onMouseLeave:v,className:o.tooltip,ref:h,style:m.popper},g.popper,{children:(0,xe.jsxs)("div",{className:o.wrapper,children:[(0,xe.jsx)("div",{className:o.header,children:(0,xe.jsx)("span",{className:o.title,children:"Exemplar"})}),(0,xe.jsx)("div",{className:o.body,children:(0,xe.jsx)("div",{children:(0,xe.jsx)("table",{className:o.exemplarsTable,children:(0,xe.jsx)("tbody",{children:s.fields.map(((t,a)=>{var s;const r=t.values.get(n.fieldIndex),l=null!==(s=t.config.links)&&void 0!==s&&s.length?i(t,n.fieldIndex):void 0;return(0,xe.jsxs)("tr",{children:[(0,xe.jsx)("td",{valign:"top",children:t.name}),(0,xe.jsx)("td",{children:(0,xe.jsxs)("div",{className:o.valueWrapper,children:[(0,xe.jsx)("span",{children:t.type===he.FieldType.time?e(r):r}),l&&(0,xe.jsx)(fe.FieldLinkList,{links:l})]})})]},a)}))})})})})]})}))}),[g.popper,s.fields,i,n,b,v,m.popper,o,a]),y=null===(t=r.getSeries().find((e=>{var t;return(null===(t=e.props.dataFrameFieldIndex)||void 0===t?void 0:t.frameIndex)===n.frameIndex})))||void 0===t?void 0:t.props.lineColor;return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)("div",{ref:u,onMouseEnter:b,onMouseLeave:v,className:o.markerWrapper,"aria-label":lt.wl.components.DataSource.Prometheus.exemplarMarker,children:(0,xe.jsx)("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:y},className:(0,be.cx)(o.marble,l&&o.activeMarble),children:(()=>{const e=[at||(at=(0,xe.jsx)("rect",{x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"},"diamond")),st||(st=(0,xe.jsx)("path",{d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"},"x")),nt||(nt=(0,xe.jsx)("path",{d:"M4 0L7.4641 6H0.535898L4 0Z"},"triangle")),rt||(rt=(0,xe.jsx)("rect",{width:"5",height:"5"},"rectangle")),it||(it=(0,xe.jsx)("path",{d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"},"pentagon")),ot||(ot=(0,xe.jsx)("path",{d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"},"plus"))];return e[n.frameIndex%e.length]})()})}),l&&(0,xe.jsx)(fe.Portal,{children:x()})]})},dt=e=>{const t=e.isDark?e.palette.dark2:e.palette.white,a=e.isDark?e.palette.dark9:e.palette.gray5,s=e.isDark?e.palette.black:e.palette.white,n=e.isDark?e.palette.dark3:e.palette.gray6;return{markerWrapper:be.css`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:be.css`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${e.palette.red};
      pointer-events: none;
    `,wrapper:be.css`
      background: ${t};
      border: 1px solid ${a};
      border-radius: ${e.border.radius.md};
      box-shadow: 0 0 20px ${s};
    `,exemplarsTable:be.css`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${e.colors.panelBg};
      }

      tr {
        background-color: ${e.colors.bg1};
        &:nth-child(even) {
          background-color: ${n};
        }
      }
    `,valueWrapper:be.css`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${e.spacing.sm};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:be.css`
      background: none;
      padding: 0;
    `,header:be.css`
      background: ${a};
      padding: 6px 10px;
      display: flex;
    `,title:be.css`
      font-weight: ${e.typography.weight.semibold};
      padding-right: ${e.spacing.md};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:be.css`
      padding: ${e.spacing.sm};
      font-weight: ${e.typography.weight.semibold};
    `,marble:be.css`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:be.css`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},ut=e=>{let{exemplars:t,timeZone:a,getFieldLinks:s,config:n}=e;const r=(0,q.useRef)();(0,q.useLayoutEffect)((()=>{n.addHook("init",(e=>{r.current=e}))}),[n]);const i=(0,q.useCallback)(((e,t)=>{var a;const s=e.fields.find((e=>e.name===he.TIME_SERIES_TIME_FIELD_NAME)),n=e.fields.find((e=>e.name===he.TIME_SERIES_VALUE_FIELD_NAME));if(!s||!n||!r.current)return;const i=null!==(a=Object.keys(r.current.scales).find((e=>!["x","y"].some((t=>t===e)))))&&void 0!==a?a:fe.FIXED_UNIT,o=r.current.scales[i].min,l=r.current.scales[i].max;let c=n.values.get(t.fieldIndex);return null!=o&&c<o&&(c=o),null!=l&&c>l&&(c=l),{x:r.current.valToPos(s.values.get(t.fieldIndex),"x"),y:r.current.valToPos(c,i)}}),[]),o=(0,q.useCallback)(((e,t)=>(0,xe.jsx)(ct,{timeZone:a,getFieldLinks:s,dataFrame:e,dataFrameFieldIndex:t,config:n})),[n,a,s]);return(0,xe.jsx)(fe.EventsCanvas,{config:n,id:"exemplars",events:t,renderEventMarker:o,mapEventToXYCoords:i})};function pt(e,t){var a,s;if(null==e||!e.length)return null;let n;const r=[];for(let i of e){const e=[];let o=!1,l=!1;for(const r of i.fields)switch(r.type){case he.FieldType.time:o=!0,e.push(r);break;case he.FieldType.number:l=!0,n=Object.assign({},r,{values:new he.ArrayVector(r.values.toArray().map((e=>Number.isFinite(e)||null==e?e:null)))}),e.push(n);break;case he.FieldType.boolean:l=!0;const i=null!==(a=null===(s=r.config)||void 0===s?void 0:s.custom)&&void 0!==a?a:{},c=Object.assign({},r.config,{max:1,min:0,custom:i});i.lineInterpolation!==Te.KC.StepBefore&&(i.lineInterpolation=Te.KC.StepAfter),n=Object.assign({},r,{config:c,type:he.FieldType.number,values:new he.ArrayVector(r.values.toArray().map((e=>null==e?e:Boolean(e)?1:0)))}),(0,he.isBooleanUnit)(c.unit)||(c.unit="bool",n.display=(0,he.getDisplayProcessor)({field:n,theme:t})),e.push(n)}o&&l&&r.push(Object.assign({},i,{fields:e}))}return r.length?r:null}var ht=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useMountedState.js");const mt=e=>{let{onDismiss:t,onSave:a,timeZone:s,data:n,selection:r,annotation:i,style:o}=e;const l=(0,fe.useTheme2)(),c=(0,fe.useStyles2)(gt),d=(0,fe.useStyles2)(Le),[u,p]=(0,q.useState)(null),[h,m]=(0,q.useState)(null),g=(0,Re.D)(u,h,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let f=n.fields[0];if(!f)return null;const b=f.display||(0,he.getDisplayProcessor)({field:f,timeZone:s,theme:l}),v=r.min!==r.max;return(0,xe.jsx)(fe.Portal,{children:(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)("div",{style:o,children:(0,xe.jsx)("div",{className:(0,be.cx)(be.css`
                position: absolute;
                top: ${r.bbox.top}px;
                left: ${r.bbox.left}px;
                width: ${r.bbox.width}px;
                height: ${r.bbox.height}px;
              `,v?c.overlayRange(i):c.overlay(i)),children:(0,xe.jsx)("div",{ref:p,className:v?(0,be.cx)(d(i).markerBar,c.markerBar):(0,be.cx)(d(i).markerTriangle,c.markerTriangle)})})}),(0,xe.jsx)(De,Object.assign({annotation:i||{time:r.min,timeEnd:r.max},timeFormatter:e=>b(e).text,onSave:a,onDismiss:t,ref:m,style:g.styles.popper},g.attributes.popper))]})})},gt=e=>({overlay:t=>{const a=e.visualization.getColorByName((null==t?void 0:t.color)||fe.DEFAULT_ANNOTATION_COLOR);return be.css`
        border-left: 1px dashed ${a};
      `},overlayRange:t=>{const a=e.visualization.getColorByName((null==t?void 0:t.color)||fe.DEFAULT_ANNOTATION_COLOR);return be.css`
        background: ${he.colorManipulator.alpha(a,.1)};
        border-left: 1px dashed ${a};
        border-right: 1px dashed ${a};
      `},markerTriangle:be.css`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:be.css`
      top: 100%;
      left: 0;
      position: absolute;
    `}),ft=e=>{let{data:t,timeZone:a,config:s,children:n}=e;const r=(0,q.useRef)(),[i,o]=(0,q.useState)(),[l,c]=(0,q.useState)(!1),[d,u]=(0,q.useState)(null),p=(0,ht.Z)(),h=(0,q.useCallback)((()=>{u(null),r.current&&r.current.setSelect({top:0,left:0,width:0,height:0}),c(!1)}),[c,u]);(0,q.useLayoutEffect)((()=>{let e=!1;s.addHook("init",(a=>{r.current=a;const s=a.hooks.setSelect;if(s)for(let a=0;a<s.length;a++){const n=s[a];n!==t&&(s[a]=function(){!e&&n(...arguments)})}})),s.addHook("syncRect",((e,t)=>{p()&&o(t)}));const t=t=>{e&&(c(!0),u({min:t.posToVal(t.select.left,"x"),max:t.posToVal(t.select.left+t.select.width,"x"),bbox:{left:t.select.left,top:0,height:t.select.height,width:t.select.width}}),e=!1)};s.addHook("setSelect",t),s.setCursor({bind:{mousedown:(t,a,s)=>t=>(e=0===t.button&&(t.metaKey||t.ctrlKey),s(t),null),mouseup:(t,a,s)=>a=>(e&&0===t.select.width&&(t.select.left=t.cursor.left,t.select.height=t.bbox.height/window.devicePixelRatio),s(a),null)}})}),[s,o,p]);const m=(0,q.useCallback)((e=>{let{coords:t}=e;if(!r.current||!i||!t)return;const a=r.current.posToVal(t.plotCanvas.x,"x");a&&(u({min:a,max:a,bbox:{left:t.plotCanvas.x,top:0,height:i.height,width:0}}),c(!0))}),[i]);return(0,xe.jsxs)(xe.Fragment,{children:[l&&d&&i&&(0,xe.jsx)(mt,{selection:d,onDismiss:h,onSave:h,data:t,timeZone:a,style:{position:"absolute",top:`${i.top}px`,left:`${i.left}px`,width:`${i.width}px`,height:`${i.height}px`}}),n?n({startAnnotating:m}):null]})};var bt=a("./.yarn/__virtual__/react-draggable-virtual-ccf21627f7/3/opt/drone/yarncache/react-draggable-npm-4.4.4-f0b7a5c546-b8258a5893.zip/node_modules/react-draggable/build/cjs/cjs.js"),vt=a.n(bt);const xt=e=>{var t,a;let{step:s,y:n,dragBounds:r,mapPositionToValue:i,formatValue:o,onChange:l}=e;const c=(0,fe.useTheme2)();let d=n,u="none";var p,h;(n<(null!==(t=r.top)&&void 0!==t?t:0)&&(u="top"),n>(null!==(a=r.bottom)&&void 0!==a?a:0)+22&&(u="bottom"),"bottom"===u)&&(d=null!==(p=r.bottom)&&void 0!==p?p:n);"top"===u&&(d=null!==(h=r.top)&&void 0!==h?h:n);const m=(0,fe.useStyles2)((e=>yt(e,s,u))),[g,f]=(0,q.useState)(s.value),b=(0,q.useMemo)((()=>c.colors.getContrastText(c.visualization.getColorByName(s.color))),[s.color,c]);return(0,xe.jsx)(vt(),{axis:"y",grid:[1,1],onStop:(e,t)=>(l(i(t.lastY)),!1),onDrag:(e,t)=>f(i(t.lastY)),position:{x:0,y:d},bounds:r,children:(0,xe.jsx)("div",{className:m.handle,style:{color:b},children:(0,xe.jsx)("span",{className:m.handleText,children:o(g)})})})};xt.displayName="ThresholdDragHandle";const yt=(e,t,a)=>{const s=e.visualization.getColorByName(t.color),n=function(e){const t=e=>be.css`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${e}px;
    border-right-color: inherit;
    border-top: ${e}px solid transparent;
    border-bottom: ${e}px solid transparent;
  `;if("none"===e)return be.css`
      ${t(9)};
      left: -9px;
    `;if("top"===e)return be.css`
      ${t(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `;if("bottom"===e)return be.css`
      ${t(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `;return""}(a),r="none"!==a;return{handle:be.css`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${s};
      cursor: grab;
      border-top-right-radius: ${e.shape.borderRadius(1)};
      border-bottom-right-radius: ${e.shape.borderRadius(1)};
      ${r&&be.css`
        margin-top: 0;
        border-radius: ${e.shape.borderRadius(1)};
      `}
      background: ${s};
      font-size: ${e.typography.bodySmall.fontSize};
      &:before {
        ${n};
      }
    `,handleText:be.css`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};const wt=e=>{let{config:t,fieldConfig:a,onThresholdsChange:s}=e;const n=(0,q.useRef)(),[r,i]=(0,q.useState)(0);(0,q.useLayoutEffect)((()=>{t.setPadding([0,60,0,0]),t.addHook("init",(e=>{n.current=e})),t.addHook("draw",(()=>{i((e=>e+1))}))}),[t]);const o=(0,q.useMemo)((()=>{const e=n.current;if(!e)return null;const t=a.defaults.thresholds;if(!t)return null;const r=(0,fe.buildScaleKey)(a.defaults),i=a.defaults.decimals,o=[];for(let a=0;a<t.steps.length;a++){const n=t.steps[a],l=e.valToPos(n.value,r);if(Number.isNaN(l)||!Number.isFinite(l))continue;const c=e.bbox.height/window.devicePixelRatio,d=(0,xe.jsx)(xt,{step:n,y:l,dragBounds:{top:0,bottom:c},mapPositionToValue:t=>e.posToVal(t,r),formatValue:e=>(0,he.getValueFormat)(r)(e,i).text,onChange:e=>{const n=[...t.steps.slice(0,a),...t.steps.slice(a+1),Object.assign({},t.steps[a],{value:e})].sort(((e,t)=>e.value-t.value));s(Object.assign({},t,{steps:n}))}},`${n.value}-${a}`);o.push(d)}return o}),[r,a,s]);return n.current?(0,xe.jsx)("div",{style:{position:"absolute",overflow:"visible",left:(n.current.bbox.left+n.current.bbox.width)/window.devicePixelRatio+"px",top:n.current.bbox.top/window.devicePixelRatio+"px",width:"60px",height:n.current.bbox.height/window.devicePixelRatio+"px"},children:o}):null};wt.displayName="ThresholdControlsPlugin";var jt=a("./packages/grafana-runtime/src/index.ts");var Ct=a("./public/app/plugins/panel/timeseries/config.ts");function kt(e){return"critical"===e.colorMode?"red":"warning"===e.colorMode?"orange":"custom"===e.colorMode?e.fillColor||e.lineColor:"red"}function St(e){if(!e)return{};const t={axisPlacement:e.show?Te.LB.Auto:Te.LB.Hidden};if(e.label&&(t.axisLabel=e.label),e.logBase){const a=e.logBase;2!==a&&10!==a||(t.scaleDistribution={type:Te.wf.Log,log:a})}return(0,I.omitBy)({unit:e.format,decimals:Ot(e.decimals),min:Ot(e.min),max:Ot(e.max),custom:t},I.isNil)}function Tt(e,t,a){var s,n;for(const s of Object.keys(t)){const n=t[s];"custom"!==s&&n!==e[s]&&a.push({id:s,value:n})}const r=null!==(s=e.custom)&&void 0!==s?s:{},i=null!==(n=t.custom)&&void 0!==n?n:{};for(const e of Object.keys(i)){const t=i[e];t!==r[e]&&a.push({id:`custom.${e}`,value:t})}}function Ot(e){if((0,I.isNumber)(e))return e;if((0,I.isString)(e)){const t=Number(e);if(!isNaN(t))return t}}var _t=a("./public/app/types/suggestions.ts");const Nt=new he.PanelPlugin((e=>{let{data:t,timeRange:a,timeZone:s,width:n,height:r,options:i,fieldConfig:o,onChangeTimeRange:l,replaceVariables:c,id:d}=e;const{sync:u,canAddAnnotations:p,onThresholdsChange:h,canEditThresholds:m,onSplitOpen:g}=(0,fe.usePanelContext)(),f=(e,t)=>(0,Oe.a)({field:e,rowIndex:t,splitOpenFn:g,range:a}),b=(0,q.useMemo)((()=>pt(t.series,Q.vc.theme2)),[t]);if(!b)return(0,xe.jsx)(jt.PanelDataErrorView,{panelId:d,data:t,needsTimeField:!0,needsNumberField:!0});const v=Boolean(p&&p());return(0,xe.jsx)(fe.TimeSeries,{frames:b,structureRev:t.structureRev,timeRange:a,timeZone:s,width:n,height:r,legend:i.legend,children:(e,a)=>(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(fe.KeyboardPlugin,{config:e}),(0,xe.jsx)(fe.ZoomPlugin,{config:e,onZoom:l}),i.tooltip.mode===Te.f3.None||(0,xe.jsx)(fe.TooltipPlugin,{data:a,config:e,mode:i.tooltip.mode,sortOrder:i.tooltip.sort,sync:u,timeZone:s}),t.annotations&&(0,xe.jsx)(Ge,{annotations:t.annotations,config:e,timeZone:s}),v?(0,xe.jsx)(ft,{data:a,timeZone:s,config:e,children:t=>{let{startAnnotating:n}=t;return(0,xe.jsx)(et,{data:a,config:e,timeZone:s,replaceVariables:c,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(e,t)=>{t&&n({coords:t.coords})}}]}]})}}):(0,xe.jsx)(et,{data:a,config:e,timeZone:s,replaceVariables:c,defaultItems:[]}),t.annotations&&(0,xe.jsx)(ut,{config:e,exemplars:t.annotations,timeZone:s,getFieldLinks:f}),m&&h&&(0,xe.jsx)(wt,{config:e,fieldConfig:o,onThresholdsChange:h})]})})})).setPanelChangeHandler(((e,t,a,s)=>{if("graph"===t&&a.angular){const{fieldConfig:t,options:n}=function(e){var t,a,s,n,r,i,o,l;const c=null!==(t=null===(a=e.fieldConfig)||void 0===a?void 0:a.overrides)&&void 0!==t?t:[],d=null!==(s=e.yaxes)&&void 0!==s?s:[];let u=St(d[0]);var p;null!==(n=e.fieldConfig)&&void 0!==n&&n.defaults&&(u=Object.assign({},null===(p=e.fieldConfig)||void 0===p?void 0:p.defaults,u));const h={fill:e.dashes?"dash":"solid",dash:[null!==(r=e.dashLength)&&void 0!==r?r:10,null!==(i=e.spaceLength)&&void 0!==i?i:10]};if(e.aliasColors)for(const t of Object.keys(e.aliasColors)){const a=e.aliasColors[t];a&&c.push({matcher:{id:he.FieldMatcherID.byName,options:t},properties:[{id:he.FieldConfigProperty.Color,value:{mode:he.FieldColorModeId.Fixed,fixedColor:a}}]})}let m=!1;if(null!==(o=e.seriesOverrides)&&void 0!==o&&o.length)for(const t of e.seriesOverrides){if(!t.alias)continue;const e={matcher:{id:t.alias.startsWith("/")&&t.alias.endsWith("/")?he.FieldMatcherID.byRegexp:he.FieldMatcherID.byName,options:t.alias},properties:[]};let a;for(const s of Object.keys(t)){const n=t[s];switch(s){case"alias":case"$$hashKey":break;case"yaxis":if(2===n){Tt(u,St(d[1]),e.properties)}break;case"fill":e.properties.push({id:"custom.fillOpacity",value:10*n});break;case"fillBelowTo":m=!0,e.properties.push({id:"custom.fillBelowTo",value:n});break;case"fillGradient":n&&(e.properties.push({id:"custom.fillGradient",value:"opacity"}),e.properties.push({id:"custom.fillOpacity",value:10*n}));break;case"points":e.properties.push({id:"custom.showPoints",value:n?Te.Jp.Always:Te.Jp.Never});break;case"bars":n?(e.properties.push({id:"custom.drawStyle",value:Te.l8.Bars}),e.properties.push({id:"custom.fillOpacity",value:100})):e.properties.push({id:"custom.drawStyle",value:Te.l8.Line});break;case"lines":e.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":e.properties.push({id:"custom.lineWidth",value:n});break;case"pointradius":e.properties.push({id:"custom.pointSize",value:2+2*n});break;case"dashLength":case"spaceLength":case"dashes":switch(a||(a={fill:h.fill,dash:[...h.dash]}),s){case"dashLength":a.dash[0]=n;break;case"spaceLength":a.dash[1]=n;break;case"dashes":a.fill=n?"dash":"solid"}break;case"stack":e.properties.push({id:"custom.stacking",value:{mode:Te.o0.Normal,group:n}});break;case"color":e.properties.push({id:"color",value:{fixedColor:n,mode:he.FieldColorModeId.Fixed}});break;case"transform":e.properties.push({id:"custom.transform",value:"negative-Y"===n?Te.pR.NegativeY:Te.pR.Constant});break;default:console.log("Ignore override migration:",t.alias,s,n)}}a&&e.properties.push({id:"custom.lineStyle",value:a}),e.properties.length&&c.push(e)}const g=null!==(l=u.custom)&&void 0!==l?l:{};g.drawStyle=e.bars?Te.l8.Bars:e.lines?Te.l8.Line:Te.l8.Points,e.points?(g.showPoints=Te.Jp.Always,(0,I.isNumber)(e.pointradius)&&(g.pointSize=2+2*e.pointradius)):g.drawStyle!==Te.l8.Points&&(g.showPoints=Te.Jp.Never);g.lineWidth=e.linewidth,"solid"!==h.fill&&(g.lineStyle=h);m?g.fillOpacity=35:(0,I.isNumber)(e.fill)&&(g.fillOpacity=10*e.fill);(0,I.isNumber)(e.fillGradient)&&e.fillGradient>0&&(g.gradientMode=Te.FI.Opacity,g.fillOpacity=10*e.fillGradient);g.spanNulls=e.nullPointMode===he.NullValueMode.Null,e.steppedLine&&(g.lineInterpolation=Te.KC.StepAfter);g.drawStyle===Te.l8.Bars&&(g.fillOpacity=100);e.stack&&(g.stacking={mode:Te.o0.Normal,group:Ct.r.stacking.group});u.custom=(0,I.omitBy)(g,I.isNil),u.nullValueMode=e.nullPointMode;const f={legend:{displayMode:Te.jK.List,placement:"bottom",calcs:[]},tooltip:{mode:Te.f3.Single,sort:Te.As.None}},b=e.legend;if(b&&(b.show?f.legend.displayMode=b.alignAsTable?Te.jK.Table:Te.jK.List:f.legend.displayMode=Te.jK.Hidden,b.rightSide&&(f.legend.placement="right"),e.legend.values)){const t=(0,I.pickBy)(e.legend);f.legend.calcs=function(e){const t=[];for(const a of Object.keys(e)){const e=he.fieldReducers.getIfExists(a);e&&t.push(e.id)}return t}(t)}const v=e.tooltip;if(v&&(void 0!==v.shared&&(f.tooltip.mode=v.shared?Te.f3.Multi:Te.f3.Single),void 0!==v.sort&&v.shared))switch(v.sort){case 1:f.tooltip.sort=Te.As.Ascending;break;case 2:f.tooltip.sort=Te.As.Descending;break;default:f.tooltip.sort=Te.As.None}if(e.thresholds&&e.thresholds.length>0){let t=[],a=!1,s=!1;const n=e.thresholds.sort(((e,t)=>e.value>t.value?1:-1));for(let e=0;e<n.length;e++){const r=n[e],i=n.length>e+1?n[e+1]:null;r.fill&&(a=!0),r.line&&(s=!0),"gt"===r.op&&t.push({value:r.value,color:kt(r)}),"lt"===r.op&&(0===t.length&&t.push({value:-1/0,color:kt(r)}),i&&"gt"===i.op&&i.value>r.value?t.push({value:r.value,color:"transparent"}):i&&"lt"===i.op?t.push({value:r.value,color:kt(i)}):t.push({value:r.value,color:"transparent"}))}t.length>0&&t[0].value!==-1/0&&t.unshift({color:"transparent",value:-1/0});let r=a?Te.i3.Area:Te.i3.Line;s&&a&&(r=Te.i3.LineAndArea),u.custom.thresholdsStyle={mode:r},u.thresholds={mode:he.ThresholdsMode.Absolute,steps:t}}e.xaxis&&!1===e.xaxis.show&&"time"===e.xaxis.mode&&c.push({matcher:{id:he.FieldMatcherID.byType,options:he.FieldType.time},properties:[{id:"custom.axisPlacement",value:Te.LB.Hidden}]});return{fieldConfig:{defaults:(0,I.omitBy)(u,I.isNil),overrides:c},options:f}}(Object.assign({},a.angular,{fieldConfig:s}));return e.fieldConfig=t,e.alert=a.angular.alert,n}return function(e){var t,a,s,n,r;void 0!==(null===(t=e.fieldConfig)||void 0===t||null===(a=t.defaults)||void 0===a||null===(s=a.custom)||void 0===s||null===(n=s.hideFrom)||void 0===n?void 0:n.graph)&&(e.fieldConfig.defaults.custom.hideFrom.viz=e.fieldConfig.defaults.custom.hideFrom.graph,delete e.fieldConfig.defaults.custom.hideFrom.graph);null!==(r=e.fieldConfig)&&void 0!==r&&r.overrides&&(e.fieldConfig.overrides=e.fieldConfig.overrides.map((e=>(e.properties=e.properties.map((e=>("custom.hideFrom"===e.id&&e.value.graph&&(e.value.viz=e.value.graph,delete e.value.graph),e))),e))))}(e),{}})).useFieldConfig((0,Ct.F)(Ct.r)).setPanelOptions((e=>{fe.commonOptionsBuilder.addTooltipOptions(e),fe.commonOptionsBuilder.addLegendOptions(e)})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasTimeField||!t.hasNumberField||t.rowCountTotal<2)return;const a=e.getListAppender({name:_t.y.LineChart,pluginId:"timeseries",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{var t,a,s;(e.options.legend.displayMode=Te.jK.Hidden,(null===(t=e.fieldConfig)||void 0===t||null===(a=t.defaults.custom)||void 0===a?void 0:a.drawStyle)!==Te.l8.Bars)&&(e.fieldConfig.defaults.custom.lineWidth=Math.max(null!==(s=e.fieldConfig.defaults.custom.lineWidth)&&void 0!==s?s:1,2))}}});if(a.append({name:_t.y.LineChart}),t.rowCountMax<200&&a.append({name:_t.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:Te.KC.Smooth}},overrides:[]}}),1===t.numberFieldCount)return a.append({name:_t.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),a.append({name:_t.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:he.FieldColorModeId.ContinuousGrYlRd},custom:{gradientMode:Te.FI.Scheme,lineInterpolation:Te.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),void(t.rowCountMax<100&&(a.append({name:_t.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:Te.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Te.FI.Hue}},overrides:[]}}),a.append({name:_t.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:he.FieldColorModeId.ContinuousGrYlRd},custom:{drawStyle:Te.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:Te.FI.Scheme}},overrides:[]}})));a.append({name:_t.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Te.o0.Normal,group:"A"}}},overrides:[]}}),a.append({name:_t.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Te.o0.Percent,group:"A"}}},overrides:[]}}),t.rowCountTotal/t.numberFieldCount<100&&(a.append({name:_t.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:Te.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Te.FI.Hue,stacking:{mode:Te.o0.Normal,group:"A"}}},overrides:[]}}),a.append({name:_t.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:Te.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Te.FI.Hue,stacking:{mode:Te.o0.Percent,group:"A"}}},overrides:[]}}))}}).setDataSupport({annotations:!0,alertStates:!0});var It=a("./public/app/plugins/panel/state-timeline/types.ts"),Pt=a("./public/app/plugins/panel/state-timeline/utils.ts");function Mt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ft=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class At extends q.Component{constructor(){super(...arguments),Mt(this,"panelContext",{}),Mt(this,"prepConfig",((e,t,a)=>{this.panelContext=this.context;const{eventBus:s,sync:n}=this.panelContext;return(0,Pt.Nj)(Object.assign({frame:e,getTimeRange:a,eventBus:s,sync:n,allFrames:this.props.frames},this.props,{rowHeight:e.fields.length>2?this.props.rowHeight:1}))})),Mt(this,"renderLegend",(e=>{const{legend:t,legendItems:a}=this.props;return e&&a&&t&&t.displayMode!==Te.jK.Hidden?(0,xe.jsx)(fe.VizLayout.Legend,{placement:t.placement,children:(0,xe.jsx)(fe.VizLegend,{placement:t.placement,items:a,displayMode:t.displayMode,readonly:!0})}):null}))}render(){return(0,xe.jsx)(fe.GraphNG,Object.assign({},this.props,{fields:{x:e=>e.type===he.FieldType.time,y:e=>e.type===he.FieldType.number||e.type===he.FieldType.boolean||e.type===he.FieldType.string},prepConfig:this.prepConfig,propsToDiff:Ft,renderLegend:this.renderLegend}))}}var Dt,$t,Lt;Mt(At,"contextType",fe.PanelContextRoot);const Rt=e=>{var t;let{data:a,alignedData:s,seriesIdx:n,datapointIdx:r,timeZone:i}=e;const o=(0,fe.useTheme2)(),l=s.fields[0],c=l.display||(0,he.getDisplayProcessor)({field:l,timeZone:i,theme:o}),d=s.fields[n],u=null===(t=d.state)||void 0===t?void 0:t.origin,p=(d.display||(0,he.getDisplayProcessor)({field:d,timeZone:i,theme:o}))(d.values.get(r)),h=u?(0,he.getFieldDisplayName)(a[u.frameIndex].fields[u.fieldIndex],a[u.frameIndex],a):null,m=(0,Pt.iK)(d,r);let g;m&&(g=l.values.get(m));const f=l.values.get(r);let b=null,v=null;if(g){const e=g&&(0,Pt.Y)(g-f);v=(0,xe.jsxs)(xe.Fragment,{children:[Dt||(Dt=(0,xe.jsx)("br",{})),$t||($t=(0,xe.jsx)("strong",{children:"Duration:"}))," ",e]}),b=(0,xe.jsxs)(xe.Fragment,{children:[" to"," ",(0,xe.jsx)("strong",{children:c(l.values.get(m)).text})]})}return(0,xe.jsxs)("div",{style:{fontSize:o.typography.bodySmall.fontSize},children:[h,Lt||(Lt=(0,xe.jsx)("br",{})),(0,xe.jsx)(fe.SeriesTableRow,{label:p.text,color:p.color||he.FALLBACK_COLOR,isActive:!0}),"From ",(0,xe.jsx)("strong",{children:c(l.values.get(r)).text}),b,v]})};Rt.displayName="StateTimelineTooltip";var Et=a("./public/app/features/live/data/StreamingDataFrame.ts");var zt=a("./public/app/plugins/panel/timeseries/SpanNullsEditor.tsx");const Vt=new he.PanelPlugin((e=>{let{data:t,timeRange:a,timeZone:s,options:n,width:r,height:i,onChangeTimeRange:o}=e;const l=(0,fe.useTheme2)(),{sync:c}=(0,fe.usePanelContext)(),{frames:d,warn:u}=(0,q.useMemo)((()=>{var e;return(0,Pt.AR)(null==t?void 0:t.series,null===(e=n.mergeValues)||void 0===e||e,l)}),[t,n.mergeValues,l]),p=(0,q.useMemo)((()=>(0,Pt.SA)(d,n.legend,l)),[d,n.legend,l]),h=(0,q.useCallback)(((e,t,a)=>{var n,r;const i=null!=d?d:[],o=i.reduce(((e,t)=>e+t.fields.filter((e=>e.type!==he.FieldType.time)).length),0);return null===t||null===a?null:(null!==(n=e.meta)&&void 0!==n&&null!==(r=n.transformations)&&void 0!==r&&r.length||e.fields.length-1===o)&&e.fields[t]?(0,xe.jsx)(Rt,{data:i,alignedData:e,seriesIdx:t,datapointIdx:a,timeZone:s}):null}),[s,d]);if(!d||u)return(0,xe.jsx)("div",{className:"panel-empty",children:(0,xe.jsx)("p",{children:null!=u?u:"No data found in response"})});if(1===d.length){(0,Et.MB)(d[0])}return(0,xe.jsx)(At,Object.assign({theme:l,frames:d,structureRev:t.structureRev,timeRange:a,timeZone:s,width:r,height:i,legendItems:p},n,{mode:It.KN.Changes,children:(e,t)=>(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(fe.ZoomPlugin,{config:e,onZoom:o}),(0,xe.jsx)(fe.TooltipPlugin,{data:t,sync:c,config:e,mode:n.tooltip.mode,timeZone:s,renderTooltip:h})]})}))})).setPanelChangeHandler(((e,t,a)=>{var s;let n=null!==(s=e.options)&&void 0!==s?s:{};if("natel-discrete-panel"===t&&a.angular){var r;const t=a.angular,s=null!==(r=e.fieldConfig)&&void 0!==r?r:{defaults:{},overrides:[]};t.units&&(s.defaults.unit=t.units);const i={fillOpacity:100,lineWidth:0};s.defaults.custom=i,n.mergeValues=!0;const o={type:he.MappingType.ValueToText,options:{}};if(s.defaults.mappings=[o],(0,I.isArray)(t.colorMaps))for(const e of t.colorMaps){const t=e.color;t&&(o.options[e.text]={color:t})}if((0,I.isArray)(t.valueMaps))for(const e of t.valueMaps){const t=e.text,a=e.value;if(t&&a){let e=o.options[a];e?e.text=t:o.options[a]={text:t}}}if((0,I.isArray)(t.rangeMaps))for(const e of t.rangeMaps){let t=+e.from,a=+e.to;const n=e.text;n&&s.defaults.mappings.push({type:he.MappingType.RangeToText,options:{from:t,to:a,result:{text:n}}})}e.fieldConfig=s}return n})).useFieldConfig({standardOptions:{[he.FieldConfigProperty.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:he.FieldColorModeId.ContinuousGrYlRd}}},useCustomConfig:e=>{e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:It.Uv.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:It.Uv.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:zt.c,override:zt.c,shouldApply:e=>e.type!==he.FieldType.time,process:he.identityOverrideProcessor})}}).setPanelOptions((e=>{e.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:It.mP.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Te.Jp.Auto,label:"Auto"},{value:Te.Jp.Always,label:"Always"},{value:Te.Jp.Never,label:"Never"}]},defaultValue:It.mP.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:It.mP.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:It.mP.rowHeight}),fe.commonOptionsBuilder.addLegendOptions(e,!1),fe.commonOptionsBuilder.addTooltipOptions(e,!0)})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData)return;if(!t.hasTimeField||!t.hasStringField&&!t.hasNumberField)return;if(t.numberFieldCount>=30)return;if("logs"===t.preferredVisualisationType)return;e.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:_t.y.StateTimeline})}});var Bt,Ut;const Ht=1,qt=70;const Wt=new he.PanelPlugin((e=>{let{data:t,timeRange:a,timeZone:s,options:n,width:r,height:i,onChangeTimeRange:o}=e;const l=(0,fe.useTheme2)(),{frames:c,warn:d}=(0,q.useMemo)((()=>(0,Pt.AR)(null==t?void 0:t.series,!1,l)),[t,l]),u=(0,q.useMemo)((()=>(0,Pt.SA)(c,n.legend,l)),[c,n.legend,l]);return!c||d?(0,xe.jsx)("div",{className:"panel-empty",children:(0,xe.jsx)("p",{children:null!=d?d:"No data found in response"})}):c[0].length>r/2?(0,xe.jsx)("div",{className:"panel-empty",children:(0,xe.jsxs)("p",{children:["Too many points to visualize properly. ",Bt||(Bt=(0,xe.jsx)("br",{})),"Update the query to return fewer points. ",Ut||(Ut=(0,xe.jsx)("br",{})),"(",c[0].length," points recieved)"]})}):(0,xe.jsx)(At,Object.assign({theme:l,frames:c,structureRev:t.structureRev,timeRange:a,timeZone:s,width:r,height:i,legendItems:u},n,{mode:It.KN.Samples,children:(e,t)=>(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(fe.ZoomPlugin,{config:e,onZoom:o}),(0,xe.jsx)(fe.TooltipPlugin,{data:t,config:e,mode:n.tooltip.mode,timeZone:s})]})}))})).useFieldConfig({standardOptions:{[he.FieldConfigProperty.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:he.FieldColorModeId.Thresholds}}},useCustomConfig:e=>{e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Ht,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:qt,settings:{min:0,max:100,step:1}})}}).setPanelOptions((e=>{e.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Te.Jp.Auto,label:"Auto"},{value:Te.Jp.Always,label:"Always"},{value:Te.Jp.Never,label:"Never"}]},defaultValue:Te.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),fe.commonOptionsBuilder.addLegendOptions(e,!1),fe.commonOptionsBuilder.addTooltipOptions(e,!0)})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData)return;if(!t.hasTimeField||!t.hasStringField&&!t.hasNumberField)return;if(t.numberFieldCount>=30)return;if(t.rowCountMax>100)return;if("logs"===t.preferredVisualisationType)return;e.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:he.FieldColorModeId.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.options.colWidth=.7}}}).append({name:_t.y.StatusHistory})}});Object.freeze([1,0]);let Gt,Zt,Qt;!function(e){e.CandlesVolume="candles+volume",e.Candles="candles",e.Volume="volume"}(Gt||(Gt={})),function(e){e.Candles="candles",e.OHLCBars="ohlcbars"}(Zt||(Zt={})),function(e){e.OpenClose="open-close",e.CloseClose="close-close"}(Qt||(Qt={}));const Kt={up:"green",down:"red",flat:"gray"},Yt={mode:Gt.CandlesVolume,candleStyle:Zt.Candles,colorStrategy:Qt.OpenClose,colors:Kt,fields:{},legend:{displayMode:Te.jK.List,placement:"bottom",calcs:[]},includeAllFields:!1},{alpha:Jt}=he.colorManipulator;var Xt=a("./public/app/features/dimensions/index.ts");const ea={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function ta(e,t,a){const s=(0,Xt.PI)(e,a[t.key]);if(!s)for(const a of e.fields){const s=(0,he.getFieldDisplayName)(a,e).toLowerCase();if(t.defaults.includes(s)||t.defaults.includes(a.name))return a}return s}function aa(e,t,a){var s;if(null==e||!e.length)return null;const n=null!==(s=t.fields)&&void 0!==s?s:{},r=1===e.length?e[0]:(0,he.outerJoinDataFrames)({frames:e,enforceSort:!0});if(null==r||!r.length)return null;const i={aligned:r,frame:r,names:{}},o=pt([r],a);if(!o)return null;const l=i.frame=o[0],c=l.fields.findIndex((e=>e.type===he.FieldType.time));if(c<0)return null;const d=new Set;for(const e of Object.values(ea)){const t=ta(l,e,n);t&&(i[e.key]=t,d.add(t))}if(i.open||i.close||(i.open=l.fields.find((e=>e.type===he.FieldType.number)),i.open&&d.add(i.open)),i.open&&!i.close&&!n.close){const e=i.open.values.toArray().slice(1);e.push(e[e.length-1]),i.close=Object.assign({},i.open,{values:new he.ArrayVector(e),name:"Next open",state:void 0}),d.add(i.close),l.fields.push(i.close),i.autoOpenClose=!0}if(i.close&&!i.open&&!n.open){const e=i.close.values.toArray().slice();e.unshift(e[0]),e.length=l.length,i.open=Object.assign({},i.close,{values:new he.ArrayVector(e),name:"Previous close",state:void 0}),d.add(i.open),l.fields.push(i.open),i.autoOpenClose=!0}i.high||n.high||(i.high=i.open),i.low||n.low||(i.low=i.open),t.mode===Gt.Volume?(i.high&&(i.high!==i.open&&d.delete(i.high),i.high=void 0),i.low&&(i.low!==i.open&&d.delete(i.low),i.low=void 0)):t.mode===Gt.Candles&&i.volume&&(d.delete(i.volume),i.volume=void 0);for(const e of Object.values(ea)){const t=i[e.key];t&&(i.names[e.key]=(0,he.getFieldDisplayName)(t,i.frame))}const u=l.fields[c],p=[u];t.includeAllFields?p.push(...l.fields.filter((e=>e!==u))):p.push(...d),i.frame=Object.assign({},i.frame,{fields:p});for(let e=0;e<i.frame.fields.length;e++){const t=i.frame.fields[e];t.state=Object.assign({},t.state,{seriesIndex:e-1,origin:{fieldIndex:e,frameIndex:0}})}return i}const sa=[{label:"Candles",value:Gt.Candles},{label:"Volume",value:Gt.Volume},{label:"Both",value:Gt.CandlesVolume}],na=[{label:"Candles",value:Zt.Candles},{label:"OHLC Bars",value:Zt.OHLCBars}],ra=[{label:"Since Open",value:Qt.OpenClose},{label:"Since Prior Close",value:Qt.CloseClose}],ia=e=>e.type===he.FieldType.number;function oa(e,t,a){let s="Auto ";if(a){const e=a[t.key];null!=e&&e.config?(s+="= "+(0,he.getFieldDisplayName)(e),e===(null==a?void 0:a.open)&&"open"!==t.key&&(s+=` (${t.defaults.join(",")})`)):s+=`(${t.defaults.join(",")})`}e.addFieldNamePicker({path:`fields.${t.key}`,name:t.name,description:t.description,settings:{filter:ia,placeholderText:s}})}const la=new he.PanelPlugin((e=>{let{data:t,id:a,timeRange:s,timeZone:n,width:r,height:i,options:o,fieldConfig:l,onChangeTimeRange:c,replaceVariables:d}=e;const{sync:u,canAddAnnotations:p,onThresholdsChange:h,canEditThresholds:m,onSplitOpen:g}=(0,fe.usePanelContext)(),f=(e,t)=>(0,Oe.a)({field:e,rowIndex:t,splitOpenFn:g,range:s}),b=(0,fe.useTheme2)(),v=(0,q.useMemo)((()=>aa(null==t?void 0:t.series,o,b)),[t,o,b]),{renderers:x,tweakScale:y,tweakAxis:w}=(0,q.useMemo)((()=>{let e=(e,t)=>e,t=(e,t)=>e,a={renderers:[],tweakScale:e,tweakAxis:t};if(!v)return a;const s=v.names;if(!Object.keys(s).length)return a;const{mode:n,candleStyle:r,colorStrategy:i}=o,l=Object.assign({},Kt,o.colors);let{open:c,high:d,low:u,close:p,volume:h}=s;if(null==c||null==p)return a;let m=.5,g=-1,f=!1;if(null!=h&&n!==Gt.Candles){let a=v.volume;if(null!=a){f=!0;let{fillOpacity:s}=a.config.custom;s&&(m=s/100),n!==Gt.Volume&&(a.config=Object.assign({},a.config),a.config.unit="short",a.display=(0,he.getDisplayProcessor)({field:a,theme:Q.vc.theme2}),t=(e,t)=>{var a;if(t.name===(null===(a=v.volume)||void 0===a?void 0:a.name)){let t=(e,t)=>{let a=[],s=e.series[g].max;for(let e=0;e<t.length&&(a.push(t[e]),!(t[e]>s));e++);return a};e.space=20,e.filter=t,e.ticks=Object.assign({},e.ticks,{filter:t})}return e},e=(e,t)=>{var a;return t.name===(null===(a=v.volume)||void 0===a?void 0:a.name)&&(e.range=(e,t,a)=>[0,7*a]),e})}}let b=n!==Gt.Volume&&null!=d&&null!=u;if(!b&&!f)return a;let x={},y=[];if(b){x={open:c,high:d,low:u,close:p};for(let e in x){let t=v[e];t.config=Object.assign({},t.config,{custom:Object.assign({},t.config.custom,{hideFrom:{legend:!0,tooltip:!1,viz:!1}})})}}else y.push(c,p);return f&&(x.volume=h,x.open=c,x.close=p),{renderers:[{fieldMap:x,indicesOnly:y,init:(e,t)=>{g=t.volume,e.addHook("drawAxes",function(e){let{mode:t,candleStyle:a,fields:s,colorStrategy:n,upColor:r,downColor:i,flatColor:o,volumeAlpha:l,flatAsUp:c=!0}=e;const d=t!==Gt.Volume&&null!=s.high&&null!=s.low,u=d&&a===Zt.Candles,p=t!==Gt.Candles&&null!=s.volume;function h(e,t,a,s,n){return e>0?a:e<0?s:n?a:t}let m=s.open,g=s.high,f=s.low,b=s.close,v=s.volume;return e=>{let t,a,s,x,y,w;d&&(s=new Path2D,a=new Path2D,t=new Path2D),p&&(x=new Path2D,y=new Path2D,w=new Path2D);let j=new Path2D,C=e.ctx,k=e.data[0],S=e.data[m],T=e.data[b],O=d?e.data[g]:null,_=d?e.data[f]:null,N=p?e.data[v]:null,I=null!=v?Math.round(e.valToPos(0,e.series[v].scale,!0)):null,[P,M]=e.series[0].idxs,F=e.data[0],A=S,D=e.bbox.width;if(F.length>1){let t=null;for(let a=0,s=1/0;a<F.length;a++)if(void 0!==A[a]){if(null!=t){let n=Math.abs(F[a]-F[t]);n<s&&(s=n,D=Math.abs(e.valToPos(F[a],"x")-e.valToPos(F[t],"x")))}t=a}}let $=Math.round(.6*D),L=2,R=2;$<=12&&(L=R=1);let E=Math.floor($/2);for(let r=P;r<=M;r++){let i=Math.round(e.valToPos(k[r],"x",!0)),o=r===P?0:Math.sign(T[r]-T[r-1]),l=Math.sign(T[r]-S[r]);if(p){let t=h(n===Qt.CloseClose?o:l,w,y,x,(r!==P||!Qt.CloseClose)&&c),a=Math.round(e.valToPos(N[r],e.series[v].scale,!0));t.rect(i-E,a,$,I-a)}if(d){let d=h(n===Qt.CloseClose?o:l,s,a,t,(r!==P||!Qt.CloseClose)&&c),p=Math.round(e.valToPos(O[r],e.series[g].scale,!0)),v=Math.round(e.valToPos(_[r],e.series[f].scale,!0));d.rect(i-Math.floor(L/2),p,L,v-p);let x=Math.round(e.valToPos(S[r],e.series[m].scale,!0)),y=Math.round(e.valToPos(T[r],e.series[b].scale,!0));if(u){let e=Math.min(x,y),t=Math.max(x,y),a=Math.max(1,t-e);d.rect(i-E,e,$,a),n===Qt.CloseClose&&l>=0&&a>2*R&&j.rect(i-E+R,e+R,$-2*R,a-2*R)}else d.rect(i-E,x,E,L),d.rect(i,y,E,L)}}C.save(),C.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),C.clip(),p&&(C.fillStyle=Jt(r,l),C.fill(y),C.fillStyle=Jt(i,l),C.fill(x),C.fillStyle=Jt(o,l),C.fill(w)),d&&(C.fillStyle=r,C.fill(a),C.fillStyle=i,C.fill(t),C.fillStyle=o,C.fill(s),C.globalCompositeOperation="destination-out",C.fill(j)),C.restore()}}({mode:n,fields:t,upColor:Q.vc.theme2.visualization.getColorByName(l.up),downColor:Q.vc.theme2.visualization.getColorByName(l.down),flatColor:Q.vc.theme2.visualization.getColorByName(l.flat),volumeAlpha:m,colorStrategy:i,candleStyle:r,flatAsUp:!0}))}}],tweakScale:e,tweakAxis:t}}),[o,t.structureRev]);if(!v)return(0,xe.jsx)(jt.PanelDataErrorView,{panelId:a,data:t,needsTimeField:!0,needsNumberField:!0});const j=Boolean(p&&p());return(0,xe.jsx)(fe.TimeSeries,{frames:[v.frame],structureRev:t.structureRev,timeRange:s,timeZone:n,width:r,height:i,legend:o.legend,renderers:x,tweakAxis:w,tweakScale:y,options:o,children:(e,a)=>(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(fe.ZoomPlugin,{config:e,onZoom:c}),(0,xe.jsx)(fe.TooltipPlugin,{data:a,config:e,mode:Te.f3.Multi,sync:u,timeZone:n}),t.annotations&&(0,xe.jsx)(Ge,{annotations:t.annotations,config:e,timeZone:n}),(0,xe.jsx)(ft,{data:a,timeZone:n,config:e,children:t=>{let{startAnnotating:s}=t;return(0,xe.jsx)(et,{data:a,config:e,timeZone:n,replaceVariables:d,defaultItems:j?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(e,t)=>{t&&s({coords:t.coords})}}]}]:[]})}}),t.annotations&&(0,xe.jsx)(ut,{config:e,exemplars:t.annotations,timeZone:n,getFieldLinks:f}),m&&h&&(0,xe.jsx)(wt,{config:e,fieldConfig:l,onThresholdsChange:h})]})})})).useFieldConfig((0,Ct.F)(Ct.r)).setPanelOptions(((e,t)=>{var a;const s=null!==(a=t.options)&&void 0!==a?a:Yt,n=aa(t.data,s,jt.config.theme2);e.addRadio({path:"mode",name:"Mode",description:"",defaultValue:Yt.mode,settings:{options:sa}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:Yt.candleStyle,settings:{options:na},showIf:e=>e.mode!==Gt.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:Yt.colorStrategy,settings:{options:ra}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:Kt.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:Kt.down}),oa(e,ea.open,n),s.mode!==Gt.Volume&&(oa(e,ea.high,n),oa(e,ea.low,n)),oa(e,ea.close,n),s.mode!==Gt.Candles&&oa(e,ea.volume,n),e.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:Yt.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),fe.commonOptionsBuilder.addLegendOptions(e)})).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new class{getSuggestionsForData(e){var t;const{dataSummary:a}=e;if(null===(t=e.data)||void 0===t||!t.series||!a.hasData||a.timeFieldCount<1||a.numberFieldCount<2||a.numberFieldCount>10)return;const s=aa(e.data.series,Yt,jt.config.theme2);if(!s)return;if(s.open===s.high&&s.open===s.low)return;e.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:_t.y.Candlestick,options:Yt,fieldConfig:{defaults:{},overrides:[]},score:s.autoOpenClose?he.VisualizationSuggestionScore.Good:he.VisualizationSuggestionScore.Best})}});a("./public/vendor/flot/jquery.flot.js"),a("./public/vendor/flot/jquery.flot.selection.js"),a("./public/vendor/flot/jquery.flot.time.js"),a("./public/vendor/flot/jquery.flot.stack.js"),a("./public/vendor/flot/jquery.flot.stackpercent.js"),a("./public/vendor/flot/jquery.flot.fillbelow.js"),a("./public/vendor/flot/jquery.flot.crosshair.js"),a("./public/vendor/flot/jquery.flot.dashes.js");var ca=a("../../opt/drone/yarncache/tether-drop-https-3382d2649f-a10a7337d5.zip/node_modules/tether-drop/dist/js/drop.js"),da=a.n(ca);function ua(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}va.$inject=["plot"];const pa=(e,t,a)=>{const s=(0,jt.getLegacyAngularInjector)(),n=document.createElement("div");n.innerHTML='<annotation-tooltip event="event" on-edit="onEdit()"></annotation-tooltip>',s.invoke(["$compile","$rootScope",(s,r)=>{const i=a.getOptions().events.manager,o=r.$new(!0);o.event=t,o.onEdit=()=>{i.editEvent(t)},s(n)(o),o.$digest(),o.$destroy();const l=new(da())({target:e[0],content:n,position:"bottom center",classes:"drop-popover drop-popover--annotation",openOn:"hover",hoverCloseDelay:200,tetherOptions:{constraints:[{to:"window",pin:!0,attachment:"both"}]}});l.open(),l.on("close",(()=>{setTimeout((()=>{l.destroy()}))}))}])};pa.$inject=["element","event","plot"];let ha=null;const ma=(e,t,a)=>{const s=a.getOptions().events.manager;s.editorOpen?ha=e:(s.editorOpened(),ha=e,setTimeout((()=>{const e=(0,jt.getLegacyAngularInjector)(),a=document.createElement("div");a.innerHTML='<event-editor panel-ctrl="panelCtrl" event="event" close="close()"></event-editor>',e.invoke(["$compile","$rootScope",(e,n)=>{const r=n.$new(!0);let i;r.event=t,r.panelCtrl=s.panelCtrl,r.close=()=>{i.close()},e(a)(r),r.$digest(),i=new(da())({target:ha[0],content:a,position:"bottom center",classes:"drop-popover drop-popover--form",openOn:"click",tetherOptions:{constraints:[{to:"window",pin:!0,attachment:"both"}]}}),i.open(),s.editorOpened(),i.on("close",(()=>{setTimeout((()=>{s.editorClosed(),r.$destroy(),i.destroy()}))}))}])}),100))};ma.$inject=["element","event","plot"];class ga{constructor(e,t,a,s,n,r,i,o){ua(this,"_object",void 0),ua(this,"_drawFunc",void 0),ua(this,"_clearFunc",void 0),ua(this,"_moveFunc",void 0),ua(this,"_position",void 0),ua(this,"_width",void 0),ua(this,"_height",void 0),this._object=e,this._drawFunc=t,this._clearFunc=a,this._moveFunc=s,this._position={left:n,top:r},this._width=i,this._height=o}width(){return this._width}height(){return this._height}position(){return this._position}draw(){this._drawFunc(this._object)}clear(){this._clearFunc(this._object)}getObject(){return this._object}moveTo(e){this._position=e,this._moveFunc(this._object,this._position)}}ga.$inject=["object","drawFunc","clearFunc","moveFunc","left","top","width","height"];class fa{constructor(e,t){ua(this,"_parent",void 0),ua(this,"_options",void 0),ua(this,"_drawableEvent",void 0),ua(this,"_hidden",void 0),this._options=e,this._drawableEvent=t,this._hidden=!1}visual(){return this._drawableEvent}getOptions(){return this._options}getParent(){return this._parent}isHidden(){return this._hidden}hide(){this._hidden=!0}unhide(){this._hidden=!1}}fa.$inject=["options","drawableEvent"];class ba{constructor(e){ua(this,"_events",void 0),ua(this,"_types",void 0),ua(this,"_plot",void 0),ua(this,"eventsEnabled",void 0),this._events=[],this._types=[],this._plot=e,this.eventsEnabled=!1}getEvents(){return this._events}setTypes(e){return this._types=e}setupEvents(e){const t=(0,I.partition)(e,"isRegion"),a=t[0];e=t[1],E().each(e,((e,t)=>{const a=new fa(t,this._buildDiv(t));this._events.push(a)})),E().each(a,((e,t)=>{const a=new fa(t,this._buildRegDiv(t));this._events.push(a)})),this._events.sort(((e,t)=>{const a=e.getOptions(),s=t.getOptions();return a.min>s.min?1:a.min<s.min?-1:0}))}drawEvents(){E().each(this._events,((e,t)=>{const a=t.getOptions(),s=this._insidePlot(a.min)||this._insidePlot(a.timeEnd),n=this._overlapPlot(a.min,a.timeEnd);!s&&!n||t.isHidden()?t.visual().getObject().hide():t.visual().draw()}))}updateEvents(){const e=this._plot.getPlotOffset();let t,a;const s=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1];E().each(this._events,((n,r)=>{a=e.top+this._plot.height()-r.visual().height(),t=s.p2c(r.getOptions().min)+e.left-r.visual().width()/2,r.visual().moveTo({top:a,left:t})}))}_clearEvents(){E().each(this._events,((e,t)=>{t.visual().clear()})),this._events=[]}_buildDiv(e){var t,a;const s=this,n=this._plot.getPlaceholder(),r=this._plot.getPlotOffset(),i=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1];let o,l,c,d,u,p,h,m;const g=e.eventType;c=null!==this._types&&this._types[g]&&this._types[g].color?this._types[g].color:"#666",d=null!==this._types&&this._types[g]&&this._types[g].markerSize?this._types[g].markerSize:8,u=null===this._types||!this._types[g]||void 0===this._types[g].markerShow||this._types[g].markerShow,m=null===this._types||!this._types[g]||void 0===this._types[g].markerTooltip||this._types[g].markerTooltip,p=null!=this._types&&this._types[g]&&this._types[g].lineStyle?this._types[g].lineStyle.toLowerCase():"dashed",h=null!=this._types&&this._types[g]&&void 0!==this._types[g].lineWidth?this._types[g].lineWidth:1;let f=i.options.eventSectionHeight||0;f/=3,o=r.top+this._plot.height()+f,l=i.p2c(e.min)+r.left;const b=E()('<div class="events_line flot-temp-elem"></div>').css({position:"absolute",opacity:.8,left:l+"px",top:8,width:h+"px",height:this._plot.height()+.8*f,"border-left-width":h+"px","border-left-style":p,"border-left-color":c,color:c}).appendTo(n);if(u){const t=E()('<div class="events_marker"></div>').css({position:"absolute",left:-d-Math.round(h/2)+"px","font-size":0,"line-height":0,width:0,height:0,"border-left":d+"px solid transparent","border-right":d+"px solid transparent"});t.appendTo(b),this._types[g]&&this._types[g].position&&"BOTTOM"===this._types[g].position.toUpperCase()?t.css({top:o-d-8+"px","border-top":"none","border-bottom":d+"px solid "+c}):t.css({top:"0px","border-top":d+"px solid "+c,"border-bottom":"none"}),t.data({event:e});const a=function(){pa(t,E()(this).data("event"),s._plot)};e.editModel&&ma(t,e.editModel,s._plot);const n=()=>{s._plot.clearSelection()};m&&(t.css({cursor:"help"}),t.hover(a,n))}return new ga(b,(function(e){e.show()}),(e=>{e.remove()}),((e,t)=>{e.css({top:t.top,left:t.left})}),l,o,null!==(t=b.width())&&void 0!==t?t:1,null!==(a=b.height())&&void 0!==a?a:1)}_buildRegDiv(e){var t,a;const s=this,n=this._plot.getPlaceholder(),r=this._plot.getPlotOffset(),i=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1];let o,l,c,d,u,p,h;const m=e.eventType;p=null!==this._types&&this._types[m]&&this._types[m].color?this._types[m].color:"#666",h=null===this._types||!this._types[m]||void 0===this._types[m].markerTooltip||this._types[m].markerTooltip,c=null!=this._types&&this._types[m]&&void 0!==this._types[m].lineWidth?this._types[m].lineWidth:1,u=null!=this._types&&this._types[m]&&this._types[m].lineStyle?this._types[m].lineStyle.toLowerCase():"dashed";o=r.top+this._plot.height()+2;const g=Math.min(e.min,e.timeEnd),f=Math.max(e.min,e.timeEnd);l=i.p2c(g)+r.left;const b=i.p2c(f)+r.left,[v,x]=[r.left,r.left+this._plot.width()],y=Math.max(l,v);d=Math.min(b,x)-y+(b>x?0:c),(0,I.each)([l,b],(e=>{if(v<=e&&e<x){E()('<div class="events_line flot-temp-elem"></div>').css({position:"absolute",opacity:.8,left:e+"px",top:8,width:c+"px",height:this._plot.height()+2,"border-left-width":c+"px","border-left-style":u,"border-left-color":p,color:p}).appendTo(n)}}));const w=E()('<div class="events_marker region_marker flot-temp-elem"></div>').css({position:"absolute",opacity:.5,left:y+"px",top:o,width:d+"px",height:"0.5rem","border-left-color":p,color:p,"background-color":p});w.appendTo(n),w.data({event:e});const j=function(){pa(w,E()(this).data("event"),s._plot)};e.editModel&&ma(w,e.editModel,s._plot);const C=()=>{s._plot.clearSelection()};h&&(w.css({cursor:"help"}),w.hover(j,C));return new ga(w,(function(e){e.show()}),(e=>{e.remove()}),((e,t)=>{e.css({top:t.top,left:t.left})}),l,o,null!==(t=w.width())&&void 0!==t?t:1,null!==(a=w.height())&&void 0!==a?a:1)}_insidePlot(e){const t=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1],a=t.p2c(e);return a>0&&a<t.p2c(t.max)}_overlapPlot(e,t){const a=this._plot.getXAxes()[this._plot.getOptions().events.xaxis-1],[s,n]=[a.p2c(e),a.p2c(t)],[r,i]=[0,a.p2c(a.max)];return r<s&&n<i}}function va(e){const t=this,a=new ba(e);e.getEvents=()=>a._events,e.hideEvents=()=>{E().each(a._events,((e,t)=>{t.visual().getObject().hide()}))},e.showEvents=()=>{e.hideEvents(),E().each(a._events,((e,t)=>{t.hide()})),t.eventMarkers.drawEvents()},e.setEvents=e=>{a.eventsEnabled&&a.setupEvents(e)},e.hooks.processOptions.push(((e,t)=>{null!=t.events.data&&(a.eventsEnabled=!0)})),e.hooks.draw.push((e=>{const t=e.getOptions();a.eventsEnabled&&(a.getEvents().length<1?(a.setTypes(t.events.types),a.setupEvents(t.events.data)):a.updateEvents()),a.drawEvents()}))}ba.$inject=["plot"];E().plot.plugins.push({init:va,options:{events:{data:null,types:null,xaxis:1,position:"BOTTOM"}},name:"events",version:"0.2.5"});var xa=a("./public/app/types/index.ts");function ya(e,t,a,s){const n=this,r=a.ctrl.panel,i=new he.LegacyGraphHoverEvent({pos:{},point:{},panel:this.panel}),o=E()('<div class="graph-tooltip">');this.destroy=()=>{o.remove()},this.findHoverIndexFromDataPoints=(e,t,a)=>{const s=t.datapoints.pointsize,n=a*s,r=t.datapoints.points.length;let i;for(i=n;i<r;i+=s)if(!t.lines.steps&&null!=t.datapoints.points[n]&&null==t.datapoints.points[i]||t.datapoints.points[i]>e)return Math.max(i-s,0)/s;return i/s-1},this.findHoverIndexFromData=(e,t)=>{let a,s=0,n=t.data.length-1;for(;;){if(s>n)return Math.max(n,0);if(a=Math.floor((s+n)/2),t.data[a][0]===e)return a;t.data[a][0]<e?s=a+1:n=a-1}},this.renderAndShow=(e,t,a,s)=>{"time"===s&&(t='<div class="graph-tooltip-time">'+e+"</div>"+t),o.html(t).place_tt(a.pageX,a.pageY,{offset:10})},this.getMultiSeriesPlotHoverInfo=function(e,t){let a,s,n,i,o,l,c,d,u,p=[[],[],[]],h=0;for(s=0;s<e.length;s++)n=e[s],!n.data.length||r.legend.hideEmpty&&n.allIsNull||!n.data.length||r.legend.hideZero&&n.allIsZero||n.hideTooltip?p[0].push({hidden:!0,value:0}):(i=this.findHoverIndexFromData(t.x,n),o=t.x-n.data[i][0],l=n.data[i][0],(!d||o>=0&&(o<d||d<0)||o<0&&o>d)&&(d=o,u=l),a=n.data[i][1],n.stack&&null!==a&&"individual"!==r.tooltip.value_type&&(h+=a,a=h),(n.lines.steps||n.stack)&&(i=this.findHoverIndexFromDataPoints(t.x,n,i)),c=0,n.yaxis&&(c=n.yaxis.n),p[c].push({value:a,hoverIndex:i,color:n.color,label:n.aliasEscaped,time:l,distance:o,index:s}));return p=p[0].concat(p[1],p[2]),p.time=u,p},e.mouseleave((()=>{var a;if(null!==(a=r.tooltip)&&void 0!==a&&a.shared){const t=e.data().plot;t&&(o.detach(),t.unhighlight())}t.events.publish(new he.LegacyGraphHoverClearEvent),t.events.publish(new he.DataHoverClearEvent)})),e.bind("plothover",((a,s,o)=>{n.show(s,o),t.panelInEdit||(s.panelRelY=(s.pageY-e.offset().top)/e.height(),i.payload.pos=s,i.payload.panel=r,i.payload.point.time=s.x,t.events.publish(i))})),e.bind("plotclick",((e,t,a)=>{X.h$.emit(xa.RW.xt,{pos:t,panel:r,item:a})})),e.bind("plotleave",(()=>{if(!r.tooltip.shared)return;const t=e.data().plot;t&&(o.detach(),t.unhighlight())})),this.clear=e=>{o.detach(),e.clearCrosshair(),e.unhighlight()},this.show=(a,i)=>{const l=e.data().plot,c=l.getData(),d=l.getXAxes()[0].options.mode,u=s();let p,h,m,g,f,b,v,x,y=r.tooltip.shared;if(a.panelRelY){var w;const s=l.pointOffset({x:a.x});if(Number.isNaN(s.left)||s.left<0||s.left>e.width())return void n.clear(l);a.pageX=e.offset().left+s.left,a.pageY=e.offset().top+e.height()*a.panelRelY;const r=null!==(w=E()(window).scrollTop())&&void 0!==w?w:0;if(!(a.pageY>=r&&a.pageY<=E()(window).innerHeight()+r))return void n.clear(l);if(l.setCrosshair(a),y=!0,t.sharedCrosshairModeOnly())return}if(0!==u.length)if(x=u[0].hasMsResolution?he.systemDateFormats.fullDateMS:he.systemDateFormats.fullDate,y){l.unhighlight();const e=n.getMultiSeriesPlotHoverInfo(c,a);for(v="",m=t.formatDate(e.time,x),2===r.tooltip.sort?e.sort(((e,t)=>t.value-e.value)):1===r.tooltip.sort&&e.sort(((e,t)=>e.value-t.value)),f=0;f<e.length;f++){if(g=e[f],g.hidden)continue;let t="";i&&g.index===i.seriesIndex&&(t="graph-tooltip-list-item--highlight"),b=u[g.index],h=he.textUtil.sanitize(b.formatValue(g.value));v+='<div class="graph-tooltip-list-item '+t+'"><div class="graph-tooltip-series-name">',v+='<i class="fa fa-minus" style="color:'+he.textUtil.sanitize(g.color)+';"></i> '+he.textUtil.sanitize(g.label)+":</div>",v+='<div class="graph-tooltip-value">'+h+"</div></div>",l.highlight(g.index,g.hoverIndex)}n.renderAndShow(m,v,a,d)}else if(i){const e=he.textUtil.sanitize(i.series.color);b=u[i.seriesIndex],p='<div class="graph-tooltip-list-item"><div class="graph-tooltip-series-name">',p+='<i class="fa fa-minus" style="color:'+e+';"></i> '+b.aliasEscaped+":</div>",h=r.stack&&"individual"===r.tooltip.value_type?i.datapoint[1]-i.datapoint[2]:i.datapoint[1],h=he.textUtil.sanitize(b.formatValue(h)),m=t.formatDate(i.datapoint[0],x),p+='<div class="graph-tooltip-value">'+h+"</div>",n.renderAndShow(m,p,a,d)}else o.detach()}}function wa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ja{constructor(e){wa(this,"plot",void 0),wa(this,"placeholder",void 0),wa(this,"height",void 0),wa(this,"thresholds",void 0),wa(this,"needsCleanup",!1),wa(this,"hasSecondYAxis",void 0),this.panelCtrl=e}getHandleHtml(e,t,a){let s=t.colorMode;return"custom"===t.colorMode&&(s="critical"),`\n    <div class="alert-handle-wrapper alert-handle-wrapper--T${e}">\n      <div class="alert-handle-line alert-handle-line--${s}">\n      </div>\n      <div class="alert-handle" data-handle-index="${e}">\n        <i class="icon-gf icon-gf-${s} alert-state-${s}"></i>\n        <span class="alert-handle-value">${a}<i class="alert-handle-grip"></i></span>\n      </div>\n    </div>`}initDragging(e){const t=E()(e.currentTarget).parents(".alert-handle-wrapper"),a=E()(e.currentTarget).data("handleIndex");let s,n=null;const r=this.plot,i=this.panelCtrl,o=this.thresholds[a];function l(e){if(null===n)n=e.clientY;else{const a=e.clientY-n;s+=a,n=e.clientY,t.css({top:s+a})}}n=null,s=t.position().top,t.on("mousemove",l),document.addEventListener("mouseup",(function e(){let n=r.c2p({left:0,top:s}).y;n=parseInt(n.toFixed(0),10),o.value=n,t.off("mousemove",l),document.removeEventListener("mouseup",e),i.$scope.$apply((()=>{i.render(),i.events.emit(xa.RW.GL,{threshold:o,handleIndex:a})}))}))}cleanUp(){this.placeholder.find(".alert-handle-wrapper").remove(),this.needsCleanup=!1}renderHandle(e,t){const a=this.thresholds[e];if(!a.visible&&this.panelCtrl.alert)return;const s=a.value;let n=s,r=0;if((0,I.isNumber)(s)){const e=this.plot.p2c({x:0,y:s});r=Math.round(Math.min(Math.max(e.top,0),this.height)-6)}else n="",r=t;const i=E()(this.getHandleHtml(e,a,n));this.placeholder.append(i),i.toggleClass("alert-handle-wrapper--no-value",""===n),i.css({top:r})}shouldDrawHandles(){return!this.hasSecondYAxis&&this.panelCtrl.editingThresholds&&this.panelCtrl.panel.thresholds.length>0}prepare(e,t){this.hasSecondYAxis=!1;for(let e=0;e<t.length;e++)if(t[e].yaxis>1){this.hasSecondYAxis=!0;break}if(this.shouldDrawHandles()){const t=this.panelCtrl.panel.thresholds.length>1?"220px":"110px";e.css("margin-right",t)}else this.needsCleanup&&e.css("margin-right","0")}draw(e){this.thresholds=this.panelCtrl.panel.thresholds,this.plot=e,this.placeholder=e.getPlaceholder(),this.needsCleanup&&this.cleanUp(),this.shouldDrawHandles()&&(this.height=e.height(),this.thresholds.length>0&&this.renderHandle(0,10),this.thresholds.length>1&&this.renderHandle(1,this.height-30),this.placeholder.off("mousedown",".alert-handle"),this.placeholder.on("mousedown",".alert-handle",this.initDragging.bind(this)),this.needsCleanup=!0)}addFlotOptions(e,t){if(!t.thresholds||0===t.thresholds.length)return;let a,s,n,r=1/0,i=-1/0;for(a=0;a<t.thresholds.length;a++){if(s=t.thresholds[a],!(0,I.isNumber)(s.value))continue;let o,l,c;switch(s.op){case"gt":o=r,t.thresholds.length>a+1&&(n=t.thresholds[a+1],n.value>s.value&&(o=n.value,i=o));break;case"lt":o=i,t.thresholds.length>a+1&&(n=t.thresholds[a+1],n.value<s.value&&(o=n.value,r=o))}switch(s.colorMode){case"critical":l="rgba(234, 112, 112, 0.12)",c="rgba(237, 46, 24, 0.60)";break;case"warning":l="rgba(235, 138, 14, 0.12)",c="rgba(247, 149, 32, 0.60)";break;case"ok":l="rgba(11, 237, 50, 0.090)",c="rgba(6,163,69, 0.60)";break;case"custom":l=s.fillColor,c=s.lineColor}s.fill&&("right"===s.yaxis&&this.hasSecondYAxis?e.grid.markings.push({y2axis:{from:s.value,to:o},color:(0,he.getColorForTheme)(l,Q.vc.theme)}):e.grid.markings.push({yaxis:{from:s.value,to:o},color:(0,he.getColorForTheme)(l,Q.vc.theme)})),s.line&&("right"===s.yaxis&&this.hasSecondYAxis?e.grid.markings.push({y2axis:{from:s.value,to:s.value},color:(0,he.getColorForTheme)(c,Q.vc.theme)}):e.grid.markings.push({yaxis:{from:s.value,to:s.value},color:(0,he.getColorForTheme)(c,Q.vc.theme)}))}}}function Ca(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ka={gray:{themeDependent:!0,title:"Gray",darkColor:{fill:"rgba(255, 255, 255, 0.09)",line:"rgba(255, 255, 255, 0.2)"},lightColor:{fill:"rgba(0, 0, 0, 0.09)",line:"rgba(0, 0, 0, 0.2)"}},red:{title:"Red",color:{fill:"rgba(234, 112, 112, 0.12)",line:"rgba(237, 46, 24, 0.60)"}},green:{title:"Green",color:{fill:"rgba(11, 237, 50, 0.090)",line:"rgba(6,163,69, 0.60)"}},blue:{title:"Blue",color:{fill:"rgba(11, 125, 238, 0.12)",line:"rgba(11, 125, 238, 0.60)"}},yellow:{title:"Yellow",color:{fill:"rgba(235, 138, 14, 0.12)",line:"rgba(247, 149, 32, 0.60)"}},custom:{title:"Custom"}};function Sa(e,t){if(-1===Object.keys(ka).indexOf(e.colorMode)&&(e.colorMode="red"),"custom"===e.colorMode)return{fill:e.fill&&e.fillColor?(0,he.getColorForTheme)(e.fillColor,t):null,line:e.line&&e.lineColor?(0,he.getColorForTheme)(e.lineColor,t):null};const a=ka[e.colorMode];return!0===a.themeDependent?t.isLight?a.lightColor:a.darkColor:{fill:e.fill?(0,he.getColorForTheme)(a.color.fill,t):null,line:e.fill?(0,he.getColorForTheme)(a.color.line,t):null}}class Ta{constructor(e){Ca(this,"plot",void 0),Ca(this,"timeRegions",void 0),this.panelCtrl=e}draw(e){this.timeRegions=this.panelCtrl.panel.timeRegions,this.plot=e}addFlotOptions(e,t){if(!t.timeRegions||0===t.timeRegions.length)return;const a={from:(0,he.dateTime)(this.panelCtrl.range.from).utc(),to:(0,he.dateTime)(this.panelCtrl.range.to).utc()};let s,n,r,i,o,l,c;const d=t.timeRegions.map((e=>Object.assign({},e)));for(s=0;s<d.length;s++)if(r=d[s],(r.fromDayOfWeek||r.from||r.toDayOfWeek||r.to)&&(r.from&&!r.to&&(r.to=r.from),!r.from&&r.to&&(r.from=r.to),n={from:this.parseTimeRange(r.from),to:this.parseTimeRange(r.to)},!r.fromDayOfWeek&&r.toDayOfWeek&&(r.fromDayOfWeek=r.toDayOfWeek),!r.toDayOfWeek&&r.fromDayOfWeek&&(r.toDayOfWeek=r.fromDayOfWeek),r.fromDayOfWeek&&(n.from.dayOfWeek=Number(r.fromDayOfWeek)),r.toDayOfWeek&&(n.to.dayOfWeek=Number(r.toDayOfWeek)),n.from.dayOfWeek&&null===n.from.h&&null===n.from.m&&(n.from.h=0,n.from.m=0,n.from.s=0),n.to.dayOfWeek&&null===n.to.h&&null===n.to.m&&(n.to.h=23,n.to.m=59,n.to.s=59),n.from&&n.to)){for(i=[],o=(0,he.dateTime)(a.from),o.set("hour",0),o.set("minute",0),o.set("second",0),o.add(n.from.h,"hours"),o.add(n.from.m,"minutes"),o.add(n.from.s,"seconds");o.unix()<=a.to.unix();){for(;n.from.dayOfWeek&&n.from.dayOfWeek!==o.isoWeekday();)o.add(24,"hours");if(o.unix()>a.to.unix())break;if(l=(0,he.dateTime)(o),l.hour)if(n.from.h<=n.to.h)l.add(n.to.h-n.from.h,"hours");else if(n.from.h>n.to.h)for(;l.hour()!==n.to.h;)l.add(1,"hours");else for(l.add(24-n.from.h,"hours");l.hour()!==n.to.h;)l.add(1,"hours");for(l.set("minute",n.to.m),l.set("second",n.to.s);n.to.dayOfWeek&&n.to.dayOfWeek!==l.isoWeekday();)l.add(24,"hours");o.unix()<a.from.unix()&&l.unix()<a.from.unix()||o.unix()>a.to.unix()&&l.unix()>a.to.unix()||i.push({from:o.valueOf(),to:l.valueOf()}),o.add(24,"hours")}c=Sa(r,Q.vc.theme);for(let t=0;t<i.length;t++){const a=i[t];r.fill&&e.grid.markings.push({xaxis:{from:a.from,to:a.to},color:c.fill}),r.line&&(e.grid.markings.push({xaxis:{from:a.from,to:a.from},color:c.line}),e.grid.markings.push({xaxis:{from:a.to,to:a.to},color:c.line}))}}}parseTimeRange(e){const t={h:null,m:null},a=/^([\d]+):?(\d{2})?/.exec(e);return a?(a.length>1&&(t.h=Number(a[1]),t.m=0,a.length>2&&void 0!==a[2]&&(t.m=Number(a[2])),t.h>23&&(t.h=23),t.m>59&&(t.m=59)),t):t}}var Oa=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),_a=a.n(Oa);function Na(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ia{constructor(e){Na(this,"event",null),Na(this,"editorOpen",!1),this.panelCtrl=e}editorClosed(){this.event=null,this.editorOpen=!1,this.panelCtrl.render()}editorOpened(){this.editorOpen=!0}updateTime(e){this.event||(this.event={},this.event.dashboardId=this.panelCtrl.dashboard.id,this.event.panelId=this.panelCtrl.panel.id),this.event.time=e.from,this.event.isRegion=!1,e.to&&(this.event.timeEnd=e.to,this.event.isRegion=!0),this.panelCtrl.render()}editEvent(e,t){this.event=e,this.panelCtrl.render()}addFlotEvents(e,t){if(!this.event&&0===e.length)return;const a={$__alerting:{color:fe.ALERTING_COLOR,position:"BOTTOM",markerSize:5},$__ok:{color:fe.OK_COLOR,position:"BOTTOM",markerSize:5},$__no_data:{color:fe.NO_DATA_COLOR,position:"BOTTOM",markerSize:5},$__pending:{color:fe.PENDING_COLOR,position:"BOTTOM",markerSize:5},$__editing:{color:fe.DEFAULT_ANNOTATION_COLOR,position:"BOTTOM",markerSize:5}};if(this.event)e=this.event.isRegion?[{isRegion:!0,min:this.event.time,timeEnd:this.event.timeEnd,text:this.event.text,eventType:"$__editing",editModel:this.event}]:[{min:this.event.time,text:this.event.text,editModel:this.event,eventType:"$__editing"}];else for(let t=0;t<e.length;t++){const s=e[t];s.min=s.time,s.max=s.time,s.eventType=s.type,s.newState?s.eventType="$__"+s.newState:a[s.type]||(a[s.type]={color:s.color,position:"BOTTOM",markerSize:5})}const s=function(e){return(0,I.filter)(e,"isRegion")}(e);!function(e,t){const a=t.grid.markings,s=fe.DEFAULT_ANNOTATION_COLOR;let n;(0,I.each)(e,(e=>{n=e.source&&e.color||s,n=function(e,t){const a=_a()(e);return a.isValid()?(a.setAlpha(t),a.toRgbString()):e}(n,fe.REGION_FILL_ALPHA),a.push({xaxis:{from:e.min,to:e.timeEnd},color:n})}))}(s,t);t.grid.eventSectionHeight=7,t.xaxis.eventSectionHeight=20,t.events={levels:(0,I.keys)(a).length+1,data:e,types:a,manager:this}}}var Pa=a("../../opt/drone/yarncache/d3-npm-5.15.0-0c7696026f-7342d82e55.zip/node_modules/d3/index.js");function Ma(e,t,a,s,n){return e.map((e=>{const r=function(e){const t=[];for(let a=0;a<e.length;a++){const s=e[a].datapoints;for(let e=0;e<s.length;e++)null!==s[e][0]&&t.push(s[e][0])}return t}([e]);if(e.histogram=!0,a[e.alias])e.data=[];else{const a=function(e,t,a,s){const n=Fa(a,t),r=Fa(s,t);return(0,Pa.histogram)().domain([n,r]).thresholds(Math.round(s-a)/t)(e).map((e=>[e.x0,e.length]))}(r,t,s,n);e.data=a}return e}))}function Fa(e,t){return Math.floor(e/t)*t}function Aa(e,t){if(isNaN(t)||(2!==(a=e).length||!Da(a[0])||!Da(a[1])))return;var a;const[s,n]=e;!function(e,t,a){0!==a&&(e.min-=a,e.max-=a,t.min-=a,t.max-=a)}(s,n,t),function(e,t){const a=.25;e.max===e.min&&(e.min-=a,e.max+=a);t.max===t.min&&(t.min-=a,t.max+=a)}(s,n);const r=0===s.min||0===n.min||0===s.max||0===n.max,i=$a(s,n);if(r&&i)s.min=s.max>0?0:s.min,s.max=s.max>0?s.max:0,n.min=n.max>0?0:n.min,n.max=n.max>0?n.max:0;else if(function(e,t){return e.min>=0&&t.max<=0||e.max<=0&&t.min>=0}(s,n))s.min>=0?(s.min=-s.max,n.max=-n.min):(s.max=-s.min,n.min=-n.max);else{const e=function(e,t){if(La(e,t)){const a=t.min?e.min/t.min:0,s=t.max?e.max/t.max:0;return a>s?a:s}if($a(e,t)){const a=Math.abs(e.min),s=Math.abs(e.max),n=Math.abs(t.min),r=Math.abs(t.max),i=Math.max(a,s),o=Math.min(a,s),l=Math.max(n,r),c=Math.min(n,r),d=0!==o?i/o:i,u=0!==c?l/c:l;return d>u?d:u}return e.min>0||t.min>0?e.max/t.max:e.min/t.min}(s,n);i?s.min>0?(s.min=s.max/e,n.min=n.max/e):(s.max=s.min/e,n.max=n.min/e):La(s,n)?(s.min=n.min?n.min*e:s.min,n.min=s.min?s.min/e:n.min,s.max=n.max?n.max*e:s.max,n.max=s.max?s.max/e:n.max):(s.min=s.min>0?n.min*e:s.min,n.min=n.min>0?s.min/e:n.min,s.max=s.max<0?n.max*e:s.max,n.max=n.max<0?s.max/e:n.max)}!function(e,t,a){0!==a&&(e.min+=a,e.max+=a,t.min+=a,t.max+=a)}(s,n,t)}function Da(e){return"min"in e&&"max"in e}function $a(e,t){return e.min>=0&&t.min>=0||e.max<=0&&t.max<=0}function La(e,t){return e.min<=0&&e.max>=0&&t.min<=0&&t.max>=0}var Ra=a("../../opt/drone/yarncache/classnames-npm-2.3.1-f2ae0a8d3c-14db8889d5.zip/node_modules/classnames/index.js"),Ea=a.n(Ra);function za(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Va=["min","max","avg","current","total"];class Ba extends q.PureComponent{constructor(e){super(e),za(this,"onLabelClick",(e=>this.props.onLabelClick(this.props.series,e))),za(this,"onToggleAxis",(()=>{const e=2===this.state.yaxis?1:2,t={alias:this.props.series.alias,yaxis:e};this.setState({yaxis:e}),this.props.onToggleAxis(t)})),za(this,"onColorChange",(e=>{this.props.onColorChange(this.props.series,e),this.forceUpdate()})),this.state={yaxis:this.props.series.yaxis}}renderLegendValues(){const{series:e,asTable:t}=this.props,a=[];for(const s of Va)if(this.props[s]){const n=e.formatValue(e.stats[s]);a.push((0,xe.jsx)(qa,{valueName:s,value:n,asTable:t,onValueClick:this.onLabelClick},s))}return a}render(){var e;const{series:t,values:a,asTable:s,hidden:n}=this.props,r=Ea()({"graph-legend-series-hidden":n,"graph-legend-series--right-y":2===t.yaxis}),i=a?this.renderLegendValues():[],o=(0,xe.jsx)(Ua,{label:t.alias,color:t.color,yaxis:this.state.yaxis,onLabelClick:this.onLabelClick,onColorChange:this.onColorChange,onToggleAxis:this.onToggleAxis});return s?(0,xe.jsxs)("tr",{className:`graph-legend-series ${r}`,children:[e||(e=(0,xe.jsx)("td",{children:(0,xe.jsx)("div",{className:"graph-legend-series__table-name",children:o})})),i]}):(0,xe.jsxs)("div",{className:`graph-legend-series ${r}`,children:[o,i]})}}za(Ba,"defaultProps",{asTable:!1,hidden:!1,onLabelClick:()=>{},onColorChange:()=>{},onToggleAxis:()=>{}});class Ua extends q.PureComponent{render(){const{label:e,color:t,yaxis:a}=this.props,{onColorChange:s,onToggleAxis:n}=this.props,r=this.props.onLabelClick?this.props.onLabelClick:()=>{};return[(0,xe.jsx)(Ha,{color:t,yaxis:a,onColorChange:s,onToggleAxis:n},"icon"),(0,xe.jsx)("a",{className:"graph-legend-alias pointer",title:e,onClick:r,"aria-label":lt.wl.components.Panels.Visualization.Graph.Legend.legendItemAlias(e),children:e},"label")]}}za(Ua,"defaultProps",{yaxis:void 0,onLabelClick:()=>{}});class Ha extends q.PureComponent{constructor(){super(...arguments),za(this,"onColorChange",(e=>{const{onColorChange:t}=this.props;t&&t(e)}))}render(){return(0,xe.jsx)(fe.SeriesColorPicker,{yaxis:this.props.yaxis,color:this.props.color,onChange:this.onColorChange,onToggleAxis:this.props.onToggleAxis,enableNamedColors:!0,children:e=>{let{ref:t,showColorPicker:a,hideColorPicker:s}=e;return(0,xe.jsx)(fe.SeriesIcon,{color:this.props.color,ref:t,onClick:a,onMouseLeave:s,className:"graph-legend-icon"})}})}}function qa(e){let{value:t,valueName:a,asTable:s,onValueClick:n}=e;return s?(0,xe.jsx)("td",{className:`graph-legend-value ${a}`,onClick:n,children:t}):(0,xe.jsx)("div",{className:`graph-legend-value ${a}`,onClick:n,children:t})}function Wa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}za(Ha,"defaultProps",{yaxis:void 0,onColorChange:()=>{},onToggleAxis:()=>{}});class Ga extends q.PureComponent{constructor(e){super(e),Wa(this,"onToggleSeries",((e,t)=>{if(!this.props.onToggleSeries)return;let a=Object.assign({},this.state.hiddenSeries);t.ctrlKey||t.metaKey||t.shiftKey?a[e.alias]?delete a[e.alias]:a[e.alias]=!0:a=this.toggleSeriesExclusiveMode(e),this.setState({hiddenSeries:a}),this.props.onToggleSeries(a)})),this.state={hiddenSeries:this.props.hiddenSeries}}sortLegend(){let e=[...this.props.seriesList]||[];const t=this.props.sort;return t&&this.props[t]&&this.props.alignAsTable&&(e=(0,I.sortBy)(e,(e=>{let a=e.stats[t];return null===a&&(a=-1/0),a})),this.props.sortDesc&&(e=e.reverse())),e}toggleSeriesExclusiveMode(e){const t=Object.assign({},this.state.hiddenSeries);t[e.alias]&&delete t[e.alias];return this.props.seriesList.every((a=>a.alias===e.alias||t[a.alias]))?this.props.seriesList.forEach((e=>{delete t[e.alias]})):this.props.seriesList.forEach((a=>{a.alias!==e.alias&&(t[a.alias]=!0)})),t}render(){const{optionalClass:e,rightSide:t,sideWidth:a,sort:s,sortDesc:n,hideEmpty:r,hideZero:i,values:o,min:l,max:c,avg:d,current:u,total:p}=this.props,h={values:o,min:l,max:c,avg:d,current:u,total:p},m=this.state.hiddenSeries,g={hideEmpty:r,hideZero:i},f={sort:s,sortDesc:n},b=this.sortLegend().filter((e=>!e.hideFromLegend(g))),v=`${this.props.alignAsTable?"graph-legend-table":""} ${e}`,x={minWidth:t&&a?a:void 0,width:t&&a?a-1:void 0},y=Object.assign({seriesList:b,hiddenSeries:m,onToggleSeries:this.onToggleSeries,onToggleAxis:this.props.onToggleAxis,onToggleSort:this.props.onToggleSort,onColorChange:this.props.onColorChange},h,f);return(0,xe.jsx)("div",{className:`graph-legend-content ${v}`,style:x,children:this.props.alignAsTable?(0,xe.jsx)(Qa,Object.assign({},y)):(0,xe.jsx)(Za,Object.assign({},y))})}}Wa(Ga,"defaultProps",{values:!1,min:!1,max:!1,avg:!1,current:!1,total:!1,alignAsTable:!1,rightSide:!1,sort:void 0,sortDesc:!1,optionalClass:"",onToggleSeries:()=>{},onToggleSort:()=>{},onToggleAxis:()=>{},onColorChange:()=>{}});class Za extends q.PureComponent{render(){const{seriesList:e,hiddenSeries:t,values:a,min:s,max:n,avg:r,current:i,total:o}=this.props,l={values:a,min:s,max:n,avg:r,current:i,total:o};return e.map(((e,a)=>(0,xe.jsx)(Ba,Object.assign({series:e,hidden:t[e.alias]},l,{onLabelClick:this.props.onToggleSeries,onColorChange:this.props.onColorChange,onToggleAxis:this.props.onToggleAxis}),`${e.id}-${a}`)))}}class Qa extends q.PureComponent{constructor(){super(...arguments),Wa(this,"onToggleSort",(e=>{if(!this.props.onToggleSort)return;let t=this.props.sortDesc,a=this.props.sort;e!==a&&(t=void 0),!1===t?(a=void 0,t=void 0):(t=!t,a=e),this.props.onToggleSort(a,t)}))}render(){const e=this.props.seriesList,{values:t,min:a,max:s,avg:n,current:r,total:i,sort:o,sortDesc:l,hiddenSeries:c}=this.props,d={values:t,min:a,max:s,avg:n,current:r,total:i};return e?(0,xe.jsxs)("table",{children:[(0,xe.jsx)("colgroup",{children:(0,xe.jsx)("col",{style:{width:"100%"}})}),(0,xe.jsx)("thead",{children:(0,xe.jsxs)("tr",{children:[(0,xe.jsx)("th",{style:{textAlign:"left"}}),Va.map((e=>d[e]&&(0,xe.jsx)(Ka,{statName:e,sort:o,sortDesc:l,onClick:this.onToggleSort},e)))]})}),(0,xe.jsx)("tbody",{children:e&&e.map(((e,t)=>(0,xe.jsx)(Ba,Object.assign({asTable:!0,series:e,hidden:c[e.alias],onLabelClick:this.props.onToggleSeries,onColorChange:this.props.onColorChange,onToggleAxis:this.props.onToggleAxis},d),`${e.id}-${t}`)))})]}):null}}class Ka extends q.PureComponent{constructor(){super(...arguments),Wa(this,"onClick",(()=>{this.props.onClick&&this.props.onClick(this.props.statName)}))}render(){const{statName:e,sort:t,sortDesc:a}=this.props;return(0,xe.jsxs)("th",{className:"pointer",onClick:this.onClick,children:[e,t===e&&(0,xe.jsx)(fe.Icon,{name:a?"angle-down":"angle-up"})]})}}class Ya extends q.PureComponent{render(){return(0,xe.jsx)(fe.CustomScrollbar,{hideHorizontalTrack:!0,children:(0,xe.jsx)(Ga,Object.assign({},this.props))})}}var Ja=a("./public/app/core/utils/ConfigProvider.tsx"),Xa=a("./public/app/features/panel/panellinks/linkSuppliers.ts");function es(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}ss.$inject=["timeSrv","popoverSrv","contextSrv"];const ts=(0,Ja.ER)(Ya);class as{constructor(e,t,a){es(this,"ctrl",void 0),es(this,"contextMenu",void 0),es(this,"tooltip",void 0),es(this,"dashboard",void 0),es(this,"annotations",void 0),es(this,"panel",void 0),es(this,"plot",void 0),es(this,"sortedSeries",void 0),es(this,"data",[]),es(this,"panelWidth",void 0),es(this,"eventManager",void 0),es(this,"thresholdManager",void 0),es(this,"timeRegionManager",void 0),es(this,"getContextMenuItemsSupplier",((e,t)=>()=>{const a=this.dashboard.canAddAnnotations()?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:()=>this.eventManager.updateTime({from:e.x,to:null})}]}]:[];if(!t)return a;const s=[{items:t.getLinks(this.panel.replaceVariables).map((e=>({label:e.title,ariaLabel:e.title,url:e.href,target:e.target,icon:""+("_self"===e.target?"link":"external-link-alt"),onClick:e.onClick})))}];return[...a,...s]})),this.scope=e,this.elem=t,this.timeSrv=a,this.ctrl=e.ctrl,this.contextMenu=e.ctrl.contextMenuCtrl,this.dashboard=this.ctrl.dashboard,this.panel=this.ctrl.panel,this.annotations=[],this.panelWidth=0,this.eventManager=new Ia(this.ctrl),this.thresholdManager=new ja(this.ctrl),this.timeRegionManager=new Ta(this.ctrl),this.tooltip=new ya(this.elem,this.ctrl.dashboard,this.scope,(()=>this.sortedSeries)),this.ctrl.events.on(he.PanelEvents.panelTeardown,this.onPanelTeardown.bind(this)),this.ctrl.events.on(he.PanelEvents.render,this.onRender.bind(this)),this.ctrl.dashboard.events.on(he.LegacyGraphHoverEvent.type,this.onGraphHover.bind(this),this.scope),this.ctrl.dashboard.events.on(he.LegacyGraphHoverClearEvent.type,this.onGraphHoverClear.bind(this),this.scope),this.ctrl.dashboard.events.on(he.DataHoverEvent.type,this.onGraphHover.bind(this),this.scope),this.ctrl.dashboard.events.on(he.DataHoverClearEvent.type,this.onGraphHoverClear.bind(this),this.scope),this.elem.bind("plotselected",this.onPlotSelected.bind(this)),this.elem.bind("plotclick",this.onPlotClick.bind(this)),this.elem&&this.elem.parent&&(this.legendElem=this.elem.parent().find(".graph-legend")[0])}onRender(e){if(this.data=e||this.data,!this.data)return;this.annotations=this.ctrl.annotations||[],this.buildFlotPairs(this.data);const t=this.ctrl.height;if((0,X.Wz)(this.data,this.panel,t),!this.panel.legend.show)return this.legendElem.hasChildNodes()&&W.unmountComponentAtNode(this.legendElem),void this.renderPanel();const{values:a,min:s,max:n,avg:r,current:i,total:o}=this.panel.legend,{alignAsTable:l,rightSide:c,sideWidth:d,sort:u,sortDesc:p,hideEmpty:h,hideZero:m}=this.panel.legend,g={alignAsTable:l,rightSide:c,sideWidth:d,sort:u,sortDesc:p,hideEmpty:h,hideZero:m},f={values:a,min:s,max:n,avg:r,current:i,total:o},b=Object.assign({seriesList:this.data,hiddenSeries:this.ctrl.hiddenSeries},g,f,{onToggleSeries:this.ctrl.onToggleSeries,onToggleSort:this.ctrl.onToggleSort,onColorChange:this.ctrl.onColorChange,onToggleAxis:this.ctrl.onToggleAxis}),v=q.createElement(ts,b);W.render(v,this.legendElem,(()=>this.renderPanel()))}onGraphHover(e){var t,a;if(this.dashboard.sharedTooltipModeEnabled()){if(e.hasOwnProperty("pos")){var s;if(!this.plot||(null===(s=e.panel)||void 0===s?void 0:s.id)===this.panel.id||this.ctrl.otherPanelInFullscreenMode())return;this.tooltip.show(e.pos)}null!==(t=e.point)&&void 0!==t&&t.time&&this.tooltip.show({x:e.point.time,panelRelY:null!==(a=e.point.panelRelY)&&void 0!==a?a:1})}}onPanelTeardown(){this.plot&&(this.plot.destroy(),this.plot=null),this.tooltip.destroy(),this.elem.off(),this.elem.remove(),W.unmountComponentAtNode(this.legendElem)}onGraphHoverClear(e){this.plot&&this.tooltip.clear(this.plot)}onPlotSelected(e,t){"time"===this.panel.xaxis.mode?(t.ctrlKey||t.metaKey)&&this.dashboard.canAddAnnotations()?setTimeout((()=>{this.eventManager.updateTime(t.xaxis)}),100):this.scope.$apply((()=>{this.timeSrv.setTime({from:(0,he.toUtc)(t.xaxis.from),to:(0,he.toUtc)(t.xaxis.to)})})):this.plot.clearSelection()}onPlotClick(e,t,a){const s=this.elem.closest(".view")?this.elem.closest(".view").get()[0]:null,n=a;if("time"===this.panel.xaxis.mode)if(t.ctrlKey||t.metaKey){if(t.x!==t.x1)return;if(!this.dashboard.id||!this.dashboard.canAddAnnotations())return;setTimeout((()=>{this.eventManager.updateTime({from:t.x,to:null})}),100)}else{let e;if(this.tooltip.clear(this.plot),a){const t=this.panel.yaxes[2===a.series.yaxis.n?1:0],s=this.ctrl.dataList[a.series.dataFrameIndex],n=s.fields[a.series.fieldIndex],r=this.getDataIndexWithNullValuesCorrection(a,s);let i=this.panel.options.dataLinks||[];const o=(0,he.hasLinks)(n);o&&(i=[...i,...n.config.links]);const l={decimals:t.decimals,links:i},c=(0,he.getDisplayProcessor)({field:{config:l,type:he.FieldType.number},theme:Q.ZP.theme2,timeZone:this.dashboard.getTimezone()})(n.values.get(r));e=i.length?(0,Xa.n)({display:c,name:n.name,view:new he.DataFrameView(s),rowIndex:r,colIndex:a.series.fieldIndex,field:l,hasLinks:o}):void 0}this.scope.$apply((()=>{this.contextMenu.setScrollContextElement(s),this.contextMenu.setSource(n),this.contextMenu.setMenuItemsSupplier(this.getContextMenuItemsSupplier(t,e)),this.contextMenu.toggleMenu(t)}))}}getDataIndexWithNullValuesCorrection(e,t){const{datapoint:a,dataIndex:s}=e;if(!Array.isArray(a)||0===a.length)return s;const n=a[0],{timeField:r}=(0,he.getTimeField)(t);if(!r||!r.values)return s;if(r.values.get(s)===n)return s;const i=r.values.toArray().findIndex((e=>e===n));return i>-1?i:s}shouldAbortRender(){return!this.data||0===this.panelWidth}drawHook(e){this.panel.yaxes[0].label&&this.panel.yaxes[0].show&&E()("<div class='axisLabel left-yaxis-label flot-temp-elem'></div>").text(this.panel.yaxes[0].label).appendTo(this.elem),this.panel.yaxes[1].label&&this.panel.yaxes[1].show&&E()("<div class='axisLabel right-yaxis-label flot-temp-elem'></div>").text(this.panel.yaxes[1].label).appendTo(this.elem);const{dataWarning:t}=this.ctrl;if(t){const e=E()(`<div class="datapoints-warning flot-temp-elem">${t.title}</div>`);t.action&&E()(`<button class="btn btn-secondary">${t.actionText}</button>`).click(t.action).appendTo(e),e.appendTo(this.elem)}this.thresholdManager.draw(e),this.timeRegionManager.draw(e)}processOffsetHook(e,t){const a=this.panel.yaxes[0],s=this.panel.yaxes[1];a.show&&a.label&&(t.left=20),s.show&&s.label&&(t.right=20);const n=e.getYAxes();for(let e=0;e<n.length;e++){const t=n[e],a=this.panel.yaxes[e];t.options.max=null!==t.options.max?t.options.max:a.max,t.options.min=null!==t.options.min?t.options.min:a.min}}processRangeHook(e){const t=e.getYAxes(),a=this.panel.yaxis.align||!1;if(t.length>1&&!0===a){const e=this.panel.yaxis.alignLevel||0;Aa(t,parseFloat(e))}}getMinTimeStepOfSeries(e){let t=Number.MAX_VALUE;for(let a=0;a<e.length;a++)if(e[a].stats.timeStep){if(this.panel.bars){if(e[a].bars&&!1===e[a].bars.show)continue}else if(void 0===e[a].bars||void 0===e[a].bars.show||!e[a].bars.show)continue;e[a].stats.timeStep<t&&(t=e[a].stats.timeStep)}return t}renderPanel(){var e;if(this.panelWidth=null!==(e=this.elem.width())&&void 0!==e?e:0,this.shouldAbortRender())return;this.thresholdManager.prepare(this.elem,this.data),this.panel.dashes=!!this.panel.lines&&this.panel.dashes;const t=this.buildFlotOptions(this.panel);this.prepareXAxis(t,this.panel),this.configureYAxisOptions(this.data,t),this.thresholdManager.addFlotOptions(t,this.panel),this.timeRegionManager.addFlotOptions(t,this.panel),this.eventManager.addFlotEvents(this.annotations,t),this.sortedSeries=this.sortSeries(this.data,this.panel),this.callPlot(t,!0)}buildFlotPairs(e){for(let t=0;t<e.length;t++){const a=e[t];a.data=a.getFlotPairs(a.nullPointMode||this.panel.nullPointMode),"constant"===a.transform&&(a.data=(0,he.getFlotPairsConstant)(a.data,this.ctrl.range)),this.ctrl.hiddenSeries[a.alias]&&(a.data=[],a.stack=!1)}}prepareXAxis(e,t){switch(t.xaxis.mode){case"series":e.series.bars.barWidth=.7,e.series.bars.align="center";for(let e=0;e<this.data.length;e++){const a=this.data[e];a.data=[[e+1,a.stats[t.xaxis.values[0]]]]}this.addXSeriesAxis(e);break;case"histogram":{let a;if(this.data.length){let s=(0,I.min)((0,I.map)(this.data,(e=>e.stats.min))),n=(0,I.max)((0,I.map)(this.data,(e=>e.stats.max)));const r=t.xaxis.buckets||this.panelWidth/50;if(null!=t.xaxis.min){s=te(t.xaxis.min,n,r)<=0?s:t.xaxis.min}if(null!=t.xaxis.max){n=te(s,t.xaxis.max,r)<=0?n:t.xaxis.max}a=te(s,n,r),e.series.bars.barWidth=.8*a,this.data=Ma(this.data,a,this.ctrl.hiddenSeries,s,n)}else a=0;this.addXHistogramAxis(e,a);break}case"table":e.series.bars.barWidth=.7,e.series.bars.align="center",this.addXTableAxis(e);break;default:e.series.bars.barWidth=this.getMinTimeStepOfSeries(this.data)/1.5,this.addTimeAxis(e)}}callPlot(e,t){try{this.plot=E().plot(this.elem,this.sortedSeries,e),this.ctrl.renderError&&delete this.ctrl.error}catch(e){console.error("flotcharts error",e),this.ctrl.error=e.message||"Render Error",this.ctrl.renderError=!0}t&&this.ctrl.renderingCompleted()}buildFlotOptions(e){let t="#c8c8c8";!0===Q.ZP.bootData.user.lightTheme&&(t="#a1a1a1");const a=!!e.stack||null;return{hooks:{draw:[this.drawHook.bind(this)],processOffset:[this.processOffsetHook.bind(this)],processRange:[this.processRangeHook.bind(this)]},legend:{show:!1},series:{stackpercent:!!e.stack&&e.percentage,stack:e.percentage?null:a,lines:{show:e.lines,zero:!1,fill:this.translateFillOption(e.fill),fillColor:this.getFillGradient(e.fillGradient),lineWidth:e.dashes?0:e.linewidth,steps:e.steppedLine},dashes:{show:e.dashes,lineWidth:e.linewidth,dashLength:[e.dashLength,e.spaceLength]},bars:{show:e.bars,fill:1,barWidth:1,zero:!1,lineWidth:0},points:{show:e.points,fill:1,fillColor:!1,radius:e.points?e.pointradius:2},shadowSize:0},yaxes:[],xaxis:{},grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:t,margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:"x",color:"#666"},crosshair:{mode:"x"}}}sortSeries(e,t){const a=t.legend.sort,s=t.legend.sortDesc,n=null!=a&&t.legend[a],r=null!=s,i=t.stack&&n&&r&&t.legend.alignAsTable,o=!0===t.legend.sortDesc?-1:1;return i?(0,I.sortBy)(e,(e=>e.stats[a]*o)):(0,I.sortBy)(e,(e=>e.zindex))}getFillGradient(e){return e?{colors:[{opacity:0},{opacity:e/10}]}:null}translateFillOption(e){return this.panel.percentage&&this.panel.stack&&0===e?.001:e/10}addTimeAxis(e){const t=this.panelWidth/100,a=(0,I.isUndefined)(this.ctrl.range.from)?null:this.ctrl.range.from.valueOf(),s=(0,I.isUndefined)(this.ctrl.range.to)?null:this.ctrl.range.to.valueOf();e.xaxis={timezone:this.dashboard.getTimezone(),show:this.panel.xaxis.show,mode:"time",min:a,max:s,label:"Datetime",ticks:t,timeformat:(0,fe.graphTimeFormat)(t,a,s),tickFormatter:fe.graphTickFormatter}}addXSeriesAxis(e){const t=(0,I.map)(this.data,((e,t)=>[t+1,e.alias]));e.xaxis={timezone:this.dashboard.getTimezone(),show:this.panel.xaxis.show,mode:null,min:0,max:t.length+1,label:"Datetime",ticks:t}}addXHistogramAxis(e,t){let a,s,n;const r=this.panelWidth/50;if(this.data.length&&t){const e=[];for(const t of this.data)for(const a of t.data)e[a[0]]=!0;a=Object.keys(e).map((e=>Number(e))),s=(0,I.min)(a),n=(0,I.max)(a);let i=t,o=Math.floor((n-s)/i);for(;o>r;)i*=2,o=Math.ceil((n-s)/i);s=Math.floor(s/i)*i,n=Math.ceil(1.01*n/i)*i,a=[];for(let e=s;e<=n;e+=i)a.push(e)}else a=r/2,s=0,n=1;e.xaxis={timezone:this.dashboard.getTimezone(),show:this.panel.xaxis.show,mode:null,min:s,max:n,label:"Histogram",ticks:a},this.configureAxisMode(e.xaxis,"short",null)}addXTableAxis(e){let t=(0,I.map)(this.data,((e,t)=>(0,I.map)(e.datapoints,((a,s)=>[t*e.datapoints.length+s+1,a[1]]))));t=(0,I.flatten)(t,!0),e.xaxis={timezone:this.dashboard.getTimezone(),show:this.panel.xaxis.show,mode:null,min:0,max:t.length+1,label:"Datetime",ticks:t}}configureYAxisOptions(e,t){const a={position:"left",show:this.panel.yaxes[0].show,index:1,logBase:this.panel.yaxes[0].logBase||1,min:this.parseNumber(this.panel.yaxes[0].min),max:this.parseNumber(this.panel.yaxes[0].max),tickDecimals:this.panel.yaxes[0].decimals};if(t.yaxes.push(a),(0,I.find)(e,{yaxis:2})){const s=(0,I.clone)(a);s.index=2,s.show=this.panel.yaxes[1].show,s.logBase=this.panel.yaxes[1].logBase||1,s.position="right",s.min=this.parseNumber(this.panel.yaxes[1].min),s.max=this.parseNumber(this.panel.yaxes[1].max),s.tickDecimals=this.panel.yaxes[1].decimals,t.yaxes.push(s),this.applyLogScale(t.yaxes[1],e),this.configureAxisMode(t.yaxes[1],this.panel.percentage&&this.panel.stack?"percent":this.panel.yaxes[1].format,this.panel.yaxes[1].decimals)}this.applyLogScale(t.yaxes[0],e),this.configureAxisMode(t.yaxes[0],this.panel.percentage&&this.panel.stack?"percent":this.panel.yaxes[0].format,this.panel.yaxes[0].decimals)}parseNumber(e){return null==e?null:(0,I.toNumber)(e)}applyLogScale(e,t){if(1===e.logBase)return;const a=0===e.min;let s,n;e.min<Number.MIN_VALUE&&(e.min=null),e.max<Number.MIN_VALUE&&(e.max=null);let r=e.max,i=e.min;for(n=0;n<t.length;n++)s=t[n],s.yaxis===e.index&&((!r||r<s.stats.max)&&(r=s.stats.max),(!i||i>s.stats.logmin)&&(i=s.stats.logmin));e.transform=t=>t<Number.MIN_VALUE?null:Math.log(t)/Math.log(e.logBase),e.inverseTransform=t=>Math.pow(e.logBase,t),r||i?r?i||(i=r*e.inverseTransform(-4)):r=i*e.inverseTransform(4):(r=e.inverseTransform(2),i=e.inverseTransform(-2)),i=e.min?e.inverseTransform(Math.ceil(e.transform(e.min))):e.min=e.inverseTransform(Math.floor(e.transform(i))),r=e.max?e.inverseTransform(Math.floor(e.transform(e.max))):e.max=e.inverseTransform(Math.ceil(e.transform(r))),!i||i<Number.MIN_VALUE||!r||r<Number.MIN_VALUE||(Number.isFinite(i)&&Number.isFinite(r)?(a&&(e.min=.1,i=1),e.ticks=this.generateTicksForLogScaleYAxis(i,r,e.logBase),a&&e.ticks.unshift(.1),e.ticks[e.ticks.length-1]>e.max&&(e.max=e.ticks[e.ticks.length-1])):(e.ticks=[1,2],delete e.min,delete e.max))}generateTicksForLogScaleYAxis(e,t,a){let s,n=[];for(s=e;s<=t;s*=a)n.push(s);const r=Math.ceil(this.ctrl.height/25),i=n.length;if(i>r){const o=Math.ceil(i/r)*a;for(n=[],s=e;s<=t*o;s*=o)n.push(s)}return n}configureAxisMode(e,t,a){e.tickFormatter=(e,s)=>{const n=(0,he.getValueFormat)(t);if(!n)throw new Error(`Unit '${t}' is not supported`);return(0,he.formattedValueToString)(n(e,a))}}}function ss(e,t,a){return{restrict:"A",template:"",link:(t,a)=>new as(t,a,e)}}function ns(e,t,a){e.overrideMenu=[],e.currentOverrides=[],e.override=e.override||{},e.colorPickerModel={},e.addOverrideOption=(t,a,s)=>{const n={text:t,propertyName:a,index:e.overrideMenu.length,values:s,submenu:(0,I.map)(s,(e=>({text:String(e),value:e})))};e.overrideMenu.push(n)},e.setOverride=(t,a)=>{"color"!==t.propertyName?(e.override[t.propertyName]=a.value,"fillBelowTo"===t.propertyName&&(e.override.lines=!1,e.ctrl.addSeriesOverride({alias:a.value,lines:!1})),e.updateCurrentOverrides(),e.ctrl.render()):e.openColorSelector(e.override.color)},e.colorSelected=t=>{e.override.color=t,e.updateCurrentOverrides(),e.ctrl.render(),e.colorPickerModel.series.color=t},e.openColorSelector=s=>{e.colorPickerModel={autoClose:!0,colorSelected:e.colorSelected,series:{color:s}},a.show({element:t.find(".dropdown")[0],position:"top center",openOn:"click",template:'<series-color-picker-popover color="series.color" onColorChange="colorSelected" />',classNames:"drop-popover drop-popover--transparent",model:e.colorPickerModel,onClose:()=>{e.ctrl.render()}})},e.removeOverride=t=>{delete e.override[t.propertyName],e.updateCurrentOverrides(),e.ctrl.refresh()},e.getSeriesNames=()=>(0,I.map)(e.ctrl.seriesList,(e=>he.textUtil.escapeHtml(e.alias))),e.updateCurrentOverrides=()=>{e.currentOverrides=[],(0,I.each)(e.overrideMenu,(t=>{const a=e.override[t.propertyName];(0,I.isUndefined)(a)||e.currentOverrides.push({name:t.text,propertyName:t.propertyName,value:String(a)})}))},e.addOverrideOption("Bars","bars",[!0,!1]),e.addOverrideOption("Lines","lines",[!0,!1]),e.addOverrideOption("Line fill","fill",[0,1,2,3,4,5,6,7,8,9,10]),e.addOverrideOption("Fill gradient","fillGradient",[0,1,2,3,4,5,6,7,8,9,10]),e.addOverrideOption("Line width","linewidth",[0,1,2,3,4,5,6,7,8,9,10]),e.addOverrideOption("Null point mode","nullPointMode",["connected","null","null as zero"]),e.addOverrideOption("Fill below to","fillBelowTo",e.getSeriesNames()),e.addOverrideOption("Staircase line","steppedLine",[!0,!1]),e.addOverrideOption("Dashes","dashes",[!0,!1]),e.addOverrideOption("Hidden Series","hiddenSeries",[!0,!1]),e.addOverrideOption("Dash Length","dashLength",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),e.addOverrideOption("Dash Space","spaceLength",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),e.addOverrideOption("Points","points",[!0,!1]),e.addOverrideOption("Points Radius","pointradius",[1,2,3,4,5]),e.addOverrideOption("Stack","stack",[!0,!1,"A","B","C","D"]),e.addOverrideOption("Color","color",["change"]),e.addOverrideOption("Y-axis","yaxis",[1,2]),e.addOverrideOption("Z-index","zindex",[-3,-2,-1,0,1,2,3]),e.addOverrideOption("Transform","transform",["constant","negative-Y"]),e.addOverrideOption("Legend","legend",[!0,!1]),e.addOverrideOption("Hide in tooltip","hideTooltip",[!0,!1]),e.updateCurrentOverrides()}function rs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}J.hF.directive("grafanaGraph",ss),ns.$inject=["$scope","$element","popoverSrv"],J.ZP.controller("SeriesOverridesCtrl",ns);class is{constructor(e){rs(this,"panelCtrl",void 0),rs(this,"panel",void 0),rs(this,"disabled",!1),this.$scope=e}$onInit(){this.panel=this.panelCtrl.panel,this.panel.alert&&!Q.ZP.unifiedAlertingEnabled&&(this.disabled=!0);const e=this.$scope.$on("$destroy",(()=>{this.panelCtrl.editingThresholds=!1,this.panelCtrl.render(),e()}));this.panelCtrl.editingThresholds=!0}addThreshold(){this.panel.thresholds.push({value:void 0,colorMode:"critical",op:"gt",fill:!0,line:!0,yaxis:"left"}),this.panelCtrl.render()}removeThreshold(e){this.panel.thresholds.splice(e,1),this.panelCtrl.render()}render(){this.panelCtrl.render()}onFillColorChange(e){return t=>{this.panel.thresholds[e].fillColor=t,this.render()}}onLineColorChange(e){return t=>{this.panel.thresholds[e].lineColor=t,this.render()}}onThresholdTypeChange(e){"custom"===this.panel.thresholds[e].colorMode&&(this.panel.thresholds[e].fillColor=_a()(Q.ZP.theme.palette.blue85).setAlpha(.2).toRgbString(),this.panel.thresholds[e].lineColor=_a()(Q.ZP.theme.palette.blue77).setAlpha(.6).toRgbString()),this.panelCtrl.render()}}function os(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}is.$inject=["$scope"],J.ZP.directive("graphThresholdForm",(()=>({restrict:"E",templateUrl:"public/app/plugins/panel/graph/thresholds_form.html",controller:is,bindToController:!0,controllerAs:"ctrl",scope:{panelCtrl:"="}})));class ls{constructor(e){os(this,"panelCtrl",void 0),os(this,"panel",void 0),os(this,"disabled",!1),os(this,"colorModes",void 0),this.$scope=e}$onInit(){this.panel=this.panelCtrl.panel;const e=this.$scope.$on("$destroy",(()=>{this.panelCtrl.editingTimeRegions=!1,this.panelCtrl.render(),e()}));this.colorModes=(0,I.map)(Object.keys(ka),(e=>({key:e,value:ka[e].title}))),this.panelCtrl.editingTimeRegions=!0}render(){this.panelCtrl.render()}addTimeRegion(){this.panel.timeRegions.push({op:"time",fromDayOfWeek:void 0,from:void 0,toDayOfWeek:void 0,to:void 0,colorMode:"background6",fill:!0,line:!1,fillColor:"rgba(234, 112, 112, 0.12)",lineColor:"rgba(237, 46, 24, 0.60)"}),this.panelCtrl.render()}removeTimeRegion(e){this.panel.timeRegions.splice(e,1),this.panelCtrl.render()}onFillColorChange(e){return t=>{this.panel.timeRegions[e].fillColor=t,this.render()}}onLineColorChange(e){return t=>{this.panel.timeRegions[e].lineColor=t,this.render()}}}function cs(e,t,a,s){function n(t){try{return e(t)}catch(e){return console.log("Could not sanitize annotation string, html escaping instead"),(0,I.escape)(t)}}return{restrict:"E",scope:{event:"=",onEdit:"&"},link:(e,a)=>{const r=e.event;let i=r.title,o=r.text;const l=t.getCurrent();let c='<div class="graph-annotation">',d="";if(void 0!==r.alertId&&r.newState){const e=ze.Z.getStateDisplayModel(r.newState);d=e.stateClass,i=`<i class="${e.iconClass}"></i> ${e.text}`,o=ze.Z.getAlertAnnotationInfo(r),r.text&&(o=o+"<br />"+r.text)}else i&&(o=i+"<br />"+((0,I.isString)(o)?o:""),i="");let u='<div class="graph-annotation__header">';r.login&&r.avatarUrl&&(u+=`<div class="graph-annotation__user" bs-tooltip="'Created by ${r.login}'"><img src="${r.avatarUrl}" /></div>`),u+=`\n          <span class="graph-annotation__title ${d}">${n(i)}</span>\n          <span class="graph-annotation__time">${null==l?void 0:l.formatDate(r.min)}</span>\n      `,r.id&&null!=l&&l.canAddAnnotations()&&(u+='\n          <span class="pointer graph-annotation__edit-icon" ng-click="onEdit()">\n            <i class="fa fa-pencil-square"></i>\n          </span>\n        '),u+="</div>",c+=u,c+='<div class="graph-annotation__body">',o&&(c+="<div ng-non-bindable>"+n(o.replace(/\n/g,"<br>"))+"</div>");const p=r.tags;p&&p.length&&(e.tags=p,c+='<span class="label label-tag small" ng-repeat="tag in tags" tag-color-from-name="tag">{{tag}}</span><br/>'),c+="</div>",c+="</div>";E()(c).appendTo(a),s(a.contents())(e)}}}ls.$inject=["$scope"],J.ZP.directive("graphTimeRegionForm",(()=>({restrict:"E",templateUrl:"public/app/plugins/panel/graph/time_regions_form.html",controller:ls,bindToController:!0,controllerAs:"ctrl",scope:{panelCtrl:"="}}))),cs.$inject=["$sanitize","dashboardSrv","contextSrv","$compile"],J.ZP.directive("annotationTooltip",cs);var ds=a("./public/app/features/query/state/DashboardQueryRunner/DashboardQueryRunner.ts");function us(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ps{constructor(){us(this,"panelCtrl",void 0),us(this,"event",void 0),us(this,"timeRange",void 0),us(this,"form",void 0),us(this,"close",void 0),us(this,"timeFormated",void 0)}$onInit(){this.event.panelId=this.panelCtrl.panel.id,this.event.dashboardId=this.panelCtrl.dashboard.id,this.event.time=hs(this.event.time),this.event.isRegion&&(this.event.timeEnd=hs(this.event.timeEnd)),this.timeFormated=this.panelCtrl.dashboard.formatDate(this.event.time)}async save(){if(!this.form.$valid)return;const e=(0,I.cloneDeep)(this.event);if(e.time=e.time.valueOf(),e.timeEnd=0,e.isRegion&&(e.timeEnd=this.event.timeEnd.valueOf(),e.timeEnd<e.time))return void console.log("invalid time");let t=Pe.xD;e.id&&(t=Pe._E);try{await t(e)}catch(e){console.log(e)}finally{this.close(),(0,ds.kt)().run({dashboard:this.panelCtrl.dashboard,range:this.panelCtrl.range})}}async delete(){try{await(0,Pe.Dl)(this.event)}catch(e){console.log(e)}finally{this.close(),(0,ds.kt)().run({dashboard:this.panelCtrl.dashboard,range:this.panelCtrl.range})}}}function hs(e){if(e&&(0,I.isNumber)(e)){const t=Number(e);return(0,he.dateTime)(t)}return e}ps.$inject=[],J.hF.directive("eventEditor",(function(){return{restrict:"E",controller:ps,bindToController:!0,controllerAs:"ctrl",templateUrl:"public/app/features/annotations/partials/event_editor.html",scope:{panelCtrl:"=",event:"=",close:"&"}}}));var ms=a("./packages/grafana-ui/src/components/GraphNG/nullInsertThreshold.ts");class gs{constructor(e){this.panel=e}getSeriesList(e){const t=[],{dataList:a,range:s}=e;if(!a||!a.length)return t;for(let e=0;e<a.length;e++){let n=a[e],{timeField:r}=(0,he.getTimeField)(n);if(r){n=(0,ms.w)(n,r.name),r=(0,he.getTimeField)(n).timeField;for(let i=0;i<n.fields.length;i++){const o=n.fields[i];if(o.type!==he.FieldType.number)continue;const l=(0,he.getFieldDisplayName)(o,n,a),c=[];for(let e=0;e<n.length;e++)c.push([o.values.get(e),(0,he.dateTime)(r.values.get(e)).valueOf()]);t.push(this.toTimeSeries(o,l,e,i,c,t.length,s))}}}if("histogram"===this.panel.xaxis.mode&&!this.panel.stack&&t.length>1){const e=t[0];e.alias=e.aliasEscaped="Count";for(let a=1;a<t.length;a++)e.datapoints=e.datapoints.concat(t[a].datapoints);return[e]}return t}toTimeSeries(e,t,a,s,n,r,i){const o=r%fe.colors.length,l=this.panel.aliasColors[t]||fe.colors[o],c=new K.Z({datapoints:n||[],alias:t,color:(0,he.getColorForTheme)(l,Q.ZP.theme),unit:e.config?e.config.unit:void 0,dataFrameIndex:a,fieldIndex:s});if(n&&n.length>0&&i){const e=n[n.length-1][1],t=i.from;if(e-t.valueOf()<-1e4){n[0][1]-t.valueOf()<-1e4&&(c.isOutsideRange=!0)}}return c}setPanelDefaultsForNewXAxisMode(){switch(this.panel.xaxis.mode){case"time":this.panel.bars=!1,this.panel.lines=!0,this.panel.points=!1,this.panel.legend.show=!0,this.panel.tooltip.shared=!0,this.panel.xaxis.values=[];break;case"series":this.panel.bars=!0,this.panel.lines=!1,this.panel.points=!1,this.panel.stack=!1,this.panel.legend.show=!1,this.panel.tooltip.shared=!1,this.panel.xaxis.values=["total"];break;case"histogram":this.panel.bars=!0,this.panel.lines=!1,this.panel.points=!1,this.panel.stack=!1,this.panel.legend.show=!1,this.panel.tooltip.shared=!1}}validateXAxisSeriesValue(){if("series"!==this.panel.xaxis.mode);else{if(0===this.panel.xaxis.values.length)return void(this.panel.xaxis.values=["total"]);const e=this.getXAxisValueOptions({});(0,I.find)(e,{value:this.panel.xaxis.values[0]})||(this.panel.xaxis.values=["total"])}}getXAxisValueOptions(e){return"series"===this.panel.xaxis.mode?[{text:"Avg",value:"avg"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Total",value:"total"},{text:"Count",value:"count"}]:[]}pluckDeep(e,t){const a=t.split(".");let s=e;for(let e=0;e<a.length;++e){if(!s[a[e]])return;s=s[a[e]]}return s}}function fs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class bs{constructor(e){fs(this,"panel",void 0),fs(this,"panelCtrl",void 0),fs(this,"logScales",void 0),fs(this,"xAxisModes",void 0),fs(this,"xAxisStatOptions",void 0),fs(this,"xNameSegment",void 0),fs(this,"selectors",void 0),this.$scope=e,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.$scope.ctrl=this,this.logScales={linear:1,"log (base 2)":2,"log (base 10)":10,"log (base 32)":32,"log (base 1024)":1024},this.xAxisModes={Time:"time",Series:"series",Histogram:"histogram"},this.xAxisStatOptions=[{text:"Avg",value:"avg"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Total",value:"total"},{text:"Count",value:"count"},{text:"Current",value:"current"}],"custom"===this.panel.xaxis.mode&&(this.panel.xaxis.name||(this.panel.xaxis.name="specify field")),this.selectors=lt.wl.components.Panels.Visualization.Graph.VisualizationTab}setUnitFormat(e){return t=>{e.format=t,this.panel.fieldConfig.defaults.unit?(this.panel.fieldConfig.defaults.unit=void 0,this.panelCtrl.refresh()):this.panelCtrl.render()}}render(){this.panelCtrl.render()}xAxisModeChanged(){this.panelCtrl.processor.setPanelDefaultsForNewXAxisMode(),this.panelCtrl.onDataFramesReceived(this.panelCtrl.dataList)}xAxisValueChanged(){this.panelCtrl.onDataFramesReceived(this.panelCtrl.dataList)}}function vs(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/graph/axes_editor.html",controller:bs}}function xs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}bs.$inject=["$scope"];class ys{constructor(e){xs(this,"source",void 0),xs(this,"scope",void 0),xs(this,"menuItemsSupplier",void 0),xs(this,"scrollContextElement",null),xs(this,"position",{x:0,y:0}),xs(this,"isVisible",void 0),xs(this,"onClose",(()=>{this.scrollContextElement&&this.scrollContextElement.removeEventListener("scroll",this.onClose),this.scope.$apply((()=>{this.isVisible=!1}))})),xs(this,"toggleMenu",(e=>{this.isVisible=!this.isVisible,this.isVisible&&this.scrollContextElement&&this.scrollContextElement.addEventListener("scroll",this.onClose),this.source?this.position={x:this.source.pageX,y:this.source.pageY}:this.position={x:e?e.pageX:0,y:e?e.pageY:0}})),xs(this,"setScrollContextElement",(e=>{this.scrollContextElement=e})),xs(this,"setSource",(e=>{this.source=e})),xs(this,"getSource",(()=>this.source)),xs(this,"setMenuItemsSupplier",(e=>{this.menuItemsSupplier=e})),this.isVisible=!1,this.scope=e}}var ws=a("./public/app/features/panel/state/actions.ts"),js=a("./public/app/store/store.ts"),Cs=a("./public/app/features/alerting/state/ThresholdMapper.ts"),ks=a("./public/app/types/events.ts"),Ss=a("./public/app/angular/panel/metrics_panel_ctrl.ts"),Ts=a("./public/app/features/dashboard/utils/loadSnapshotData.ts"),Os=a("./public/app/features/query/state/DashboardQueryRunner/utils.ts");function _s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ns extends Ss.k{constructor(e,t){super(e,t),_s(this,"renderError",!1),_s(this,"hiddenSeries",{}),_s(this,"hiddenSeriesTainted",!1),_s(this,"seriesList",[]),_s(this,"dataList",[]),_s(this,"annotations",[]),_s(this,"alertState",void 0),_s(this,"dataWarning",void 0),_s(this,"colors",[]),_s(this,"subTabIndex",0),_s(this,"processor",void 0),_s(this,"contextMenuCtrl",void 0),_s(this,"panelDefaults",{datasource:null,renderer:"flot",yaxes:[{label:null,show:!0,logBase:1,min:null,max:null,format:"short"},{label:null,show:!0,logBase:1,min:null,max:null,format:"short"}],xaxis:{show:!0,mode:"time",name:null,values:[],buckets:null},yaxis:{align:!1,alignLevel:null},lines:!0,fill:1,fillGradient:0,linewidth:1,dashes:!1,hiddenSeries:!1,dashLength:10,spaceLength:10,points:!1,pointradius:2,bars:!1,stack:!1,percentage:!1,legend:{show:!0,values:!1,min:!1,max:!1,current:!1,total:!1,avg:!1},nullPointMode:"null",steppedLine:!1,tooltip:{value_type:"individual",shared:!0,sort:0},timeFrom:null,timeShift:null,targets:[{}],aliasColors:{},seriesOverrides:[],thresholds:[],timeRegions:[],options:{alertThreshold:!0}}),_s(this,"onColorChange",((e,t)=>{e.setColor((0,he.getColorForTheme)(t,Q.ZP.theme)),this.panel.aliasColors[e.alias]=t,this.render()})),_s(this,"onToggleSeries",(e=>{this.hiddenSeriesTainted=!0,this.hiddenSeries=e,this.render()})),_s(this,"onToggleSort",((e,t)=>{this.panel.legend.sort=e,this.panel.legend.sortDesc=t,this.render()})),_s(this,"onToggleAxis",(e=>{let t=(0,I.find)(this.panel.seriesOverrides,{alias:e.alias});t||(t={alias:e.alias},this.panel.seriesOverrides.push(t)),t.yaxis=e.yaxis,this.render()})),_s(this,"onContextMenuClose",(()=>{this.contextMenuCtrl.toggleMenu()})),_s(this,"getTimeZone",(()=>this.dashboard.getTimezone())),_s(this,"getDataFrameByRefId",(e=>this.dataList.filter((t=>t.refId===e))[0])),(0,I.defaults)(this.panel,this.panelDefaults),(0,I.defaults)(this.panel.tooltip,this.panelDefaults.tooltip),(0,I.defaults)(this.panel.legend,this.panelDefaults.legend),(0,I.defaults)(this.panel.xaxis,this.panelDefaults.xaxis),(0,I.defaults)(this.panel.options,this.panelDefaults.options),this.useDataFrames=!0,this.processor=new gs(this.panel),this.contextMenuCtrl=new ys(e),this.events.on(he.PanelEvents.render,this.onRender.bind(this)),this.events.on(he.PanelEvents.dataFramesReceived,this.onDataFramesReceived.bind(this)),this.events.on(he.PanelEvents.dataSnapshotLoad,this.onDataSnapshotLoad.bind(this)),this.events.on(he.PanelEvents.editModeInitialized,this.onInitEditMode.bind(this)),this.events.on(he.PanelEvents.initPanelActions,this.onInitPanelActions.bind(this));const a=this.panel.fieldConfig.defaults.unit;a&&(this.panel.yaxes[0].format=a)}onInitEditMode(){this.addEditorTab("Display","public/app/plugins/panel/graph/tab_display.html"),this.addEditorTab("Series overrides","public/app/plugins/panel/graph/tab_series_overrides.html"),this.addEditorTab("Axes",vs),this.addEditorTab("Legend","public/app/plugins/panel/graph/tab_legend.html"),this.addEditorTab("Thresholds","public/app/plugins/panel/graph/tab_thresholds.html"),this.addEditorTab("Time regions","public/app/plugins/panel/graph/tab_time_regions.html"),this.subTabIndex=0,this.hiddenSeriesTainted=!1}onInitPanelActions(e){e.push({text:"Toggle legend",click:"ctrl.toggleLegend()",shortcut:"p l"})}zoomOut(e){X.h$.publish(new ks.p8(2))}onDataSnapshotLoad(e){const{series:t,annotations:a}=(0,Ts.y)(this.panel,this.dashboard);this.panelData.annotations=a,this.onDataFramesReceived(t)}onDataFramesReceived(e){var t;this.dataList=e,this.seriesList=this.processor.getSeriesList({dataList:this.dataList,range:this.range}),this.dataWarning=this.getDataWarning(),this.alertState=void 0,this.seriesList.alertState=void 0,this.panelData.alertState&&(this.alertState=this.panelData.alertState,this.seriesList.alertState=this.alertState.state),this.annotations=[],null!==(t=this.panelData.annotations)&&void 0!==t&&t.length&&(this.annotations=(0,Os.em)(this.panelData.annotations)),this.loading=!1,this.render(this.seriesList)}getDataWarning(){if(0===this.seriesList.reduce(((e,t)=>e+t.datapoints.length),0)){if(this.dataList)for(const t of this.dataList){var e;if(t.length&&null!==(e=t.fields)&&void 0!==e&&e.length)return{title:"Unable to graph data",tip:"Data exists, but is not timeseries",actionText:"Switch to table view",action:()=>{(0,js.WI)((0,ws.Kc)({panel:this.panel,pluginId:"table"}))}}}return{title:"No data",tip:"No data returned from query"}}for(const e of this.seriesList)if(!e.isOutsideRange)return;const t={title:"Data outside time range",tip:"Can be caused by timezone mismatch or missing time filter in query"},a=function(e){const t={from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER};let a=!1;const s=[he.ReducerID.min,he.ReducerID.max];for(const n of e)for(const e of n.fields)if(e.type===he.FieldType.time){const n=(0,he.reduceField)({field:e,reducers:s});t.from=Math.min(t.from,n[he.ReducerID.min]),t.to=Math.max(t.to,n[he.ReducerID.max]),a=!0}return a?t:void 0}(this.dataList);return a&&(t.actionText="Zoom to data",t.action=()=>{jt.locationService.partial({from:a.from,to:a.to})}),t}onRender(){if(this.seriesList){Cs.X.alertToGraphThresholds(this.panel);for(const e of this.seriesList)e.applySeriesOverrides(this.panel.seriesOverrides),e.unit&&(this.panel.yaxes[e.yaxis-1].format=e.unit),!1===this.hiddenSeriesTainted&&!0===e.hiddenSeries&&(this.hiddenSeries[e.alias]=!0)}}addSeriesOverride(e){this.panel.seriesOverrides.push(e||{})}removeSeriesOverride(e){this.panel.seriesOverrides=(0,I.without)(this.panel.seriesOverrides,e),this.render()}toggleLegend(){this.panel.legend.show=!this.panel.legend.show,this.render()}legendValuesOptionChanged(){const e=this.panel.legend;e.values=e.min||e.max||e.avg||e.current||e.total,this.render()}migrateToReact(){this.onPluginTypeChange(Q.ZP.panels.timeseries)}}Ns.$inject=["$scope","$injector"],_s(Ns,"template",'\n<div class="graph-panel" ng-class="{\'graph-panel--legend-right\': ctrl.panel.legend.rightSide}">\n  <div class="graph-panel__chart" grafana-graph ng-dblclick="ctrl.zoomOut()">\n  </div>\n\n  <div class="graph-legend">\n    <div class="graph-legend-content" graph-legend></div>\n  </div>\n  <div ng-if="ctrl.contextMenuCtrl.isVisible">\n    <graph-context-menu\n      itemsGroup="ctrl.contextMenuCtrl.menuItemsSupplier()"\n      on-close="ctrl.onContextMenuClose"\n      getContextMenuSource="ctrl.contextMenuCtrl.getSource"\n      timeZone="ctrl.getTimeZone()"\n      x="ctrl.contextMenuCtrl.position.x"\n      y="ctrl.contextMenuCtrl.position.y"\n    ></graph-context-menu>\n  </div>\n</div>\n');const Is=new he.PanelPlugin(null).useFieldConfig({disableStandardOptions:[he.FieldConfigProperty.NoValue,he.FieldConfigProperty.Thresholds,he.FieldConfigProperty.Max,he.FieldConfigProperty.Min,he.FieldConfigProperty.Decimals,he.FieldConfigProperty.Color,he.FieldConfigProperty.Mappings]}).setDataSupport({annotations:!0,alertStates:!0}).setMigrationHandler((e=>{var t;const a=null!==(t=e.fieldConfig)&&void 0!==t?t:{defaults:{},overrides:[]},s=e.options||{};return s.dataLinks&&(a.defaults.links=s.dataLinks,delete s.dataLinks),e.options=s,e.fieldConfig=a,s}));let Ps;Is.angularPanelCtrl=Ns,function(e){e.None="none",e.Linear="linear"}(Ps||(Ps={}));const Ms={line:Ps.None,lineWidth:1,lineStyle:{fill:"solid"},point:Te.Jp.Auto,pointSize:{fixed:5,min:1,max:20},axisPlacement:Te.LB.Auto};var Fs=a("./public/app/plugins/panel/timeseries/LineStyleEditor.tsx");const As=void 0;let Ds;function $s(e){return e.type===he.FieldType.number}function Ls(e){return e?t=>e===t||!(!e.state||e.state!==t.state):()=>!1}function Rs(e){if(!e)return()=>!1;const t=Ls(e);return e=>!t(e,void 0,void 0)}var Es,zs,Vs,Bs,Us,Hs,qs;!function(e){e[e.NoData=0]="NoData",e[e.BadFrameSelection=1]="BadFrameSelection",e[e.XNotFound=2]="XNotFound"}(Ds||(Ds={}));const Ws=e=>{var t;let{value:a,onChange:s,context:n}=e;const r=(0,q.useMemo)((()=>{var e;return null!=n&&null!==(e=n.data)&&void 0!==e&&e.length?n.data.map(((e,t)=>({value:t,label:(0,he.getFrameDisplayName)(e,t)}))):[{value:0,label:"First result"}]}),[n.data]),i=(0,q.useMemo)((()=>function(e,t){var a;if(!t||!t.length)return{error:Ds.NoData};e||(e={frame:0});let s=t[null!==(a=e.frame)&&void 0!==a?a:0];if(!s)return{error:Ds.BadFrameSelection};let n=-1;for(let a=0;a<s.fields.length;a++){const r=s.fields[a];if(e.x&&e.x===(0,he.getFieldDisplayName)(r,s,t)){n=a;break}if($s(r)&&!e.x){n=a;break}}let r=!1;const i=s.fields[n],o=[i];for(const a of s.fields)if(a.type===he.FieldType.time&&(r=!0),a!==i&&$s(a)){if(e.exclude){const n=(0,he.getFieldDisplayName)(a,s,t);if(e.exclude.includes(n))continue}o.push(a)}return{x:i,fields:{x:Ls(i),y:Rs(i)},frame:Object.assign({},s,{fields:o}),hasData:s.fields.length>0,hasTime:r}}(a,n.data)),[n.data,a]),o=(0,q.useMemo)((()=>{var e;const t={label:"?",value:void 0},s={numberFields:[t],yFields:[],xAxis:null!=a&&a.x?{label:`${a.x} (Not found)`,value:a.x}:t},r=n.data?n.data[null!==(e=null==a?void 0:a.frame)&&void 0!==e?e:0]:void 0;if(r){const e=i.x?(0,he.getFieldDisplayName)(i.x,i.frame,n.data):void 0;for(let i of r.fields)if($s(i)){const l=(0,he.getFieldDisplayName)(i,r,n.data),c={label:l,value:l};var o;if(s.numberFields.push(c),"?"===t.label&&(t.label=`${l} (First)`),null!=a&&a.x&&l===a.x&&(s.xAxis=c),e!==l)s.yFields.push({label:l,value:null==a||null===(o=a.exclude)||void 0===o?void 0:o.includes(l)})}}return s}),[i,n.data,a]),l=(0,fe.useTheme)(),c=Gs(l);return n.data?(0,xe.jsxs)("div",{children:[(0,xe.jsx)(fe.Select,{menuShouldPortal:!0,options:r,value:null!==(t=r.find((e=>e.value===(null==a?void 0:a.frame))))&&void 0!==t?t:r[0],onChange:e=>{s(Object.assign({},a,{frame:e.value}))}}),zs||(zs=(0,xe.jsx)("br",{})),Vs||(Vs=(0,xe.jsx)(fe.Label,{children:"X Field"})),(0,xe.jsx)(fe.Select,{menuShouldPortal:!0,options:o.numberFields,value:o.xAxis,onChange:e=>{s(Object.assign({},a,{x:e.value}))}}),Bs||(Bs=(0,xe.jsx)("br",{})),Us||(Us=(0,xe.jsx)(fe.Label,{children:"Y Fields"})),(0,xe.jsx)("div",{children:o.yFields.map((e=>(0,xe.jsxs)("div",{className:c.row,children:[(0,xe.jsx)(fe.IconButton,{name:e.value?"eye-slash":"eye",onClick:()=>{const t=null!=a&&a.exclude?[...a.exclude]:[];let n=t.indexOf(e.label);n<0?t.push(e.label):t.splice(n,1),s(Object.assign({},a,{exclude:t}))}}),e.label]},e.label)))}),Hs||(Hs=(0,xe.jsx)("br",{}))," ",qs||(qs=(0,xe.jsx)("br",{}))]}):Es||(Es=(0,xe.jsx)("div",{children:"No data..."}))},Gs=(0,fe.stylesFactory)((e=>({sorter:be.css`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:be.css`
    padding: ${e.spacing.xs} ${e.spacing.sm};
    border-radius: ${e.border.radius.sm};
    background: ${e.colors.bg2};
    min-height: ${e.spacing.formInputHeight}px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${e.colors.formInputBorder};
  `})));var Zs=a("./public/app/plugins/panel/barchart/quadtree.ts"),Qs=a("./packages/grafana-data/src/themes/colorManipulator.ts"),Ks=a("../../opt/drone/yarncache/uplot-npm-1.6.19-4a770d685e-181cb158e9.zip/node_modules/uplot/dist/uPlot.esm.js");function Ys(e,t,a,s){let n,r;try{n=function(e,t){var a,s;let n=0;if(!t.length)throw"missing data";var r;if("explicit"===e.mode&&null!==(r=e.series)&&void 0!==r&&r.length)for(const a of e.series){if(null==a||!a.x)throw"Select X dimension";if(null==a||!a.y)throw"Select Y dimension";for(let e=0;e<t.length;e++){const s=t[e],r=(0,Xt.rj)(s,a.x);if(null!=r){var i,o,l;const c=(0,Xt.rj)(s,a.y);if(null==c)throw"Y must be in the same frame as X";const d={pointColorFixed:null===(i=a.pointColor)||void 0===i?void 0:i.fixed,pointColorIndex:(0,Xt.rj)(s,null===(o=a.pointColor)||void 0===o?void 0:o.field),pointSizeConfig:a.pointSize,pointSizeIndex:(0,Xt.rj)(s,null===(l=a.pointSize)||void 0===l?void 0:l.field)};return[Js(n++,t,e,r,c,d)]}}}const c=null!==(a=e.dims)&&void 0!==a?a:{},d=null!==(s=c.frame)&&void 0!==s?s:0,u=t[d],p=[];let h=(0,Xt.rj)(u,c.x);for(let e=0;e<u.fields.length;e++)if($s(u.fields[e])){if(null==h||e===h){h=e;continue}if(c.exclude&&c.exclude.includes((0,he.getFieldDisplayName)(u.fields[e],u,t)))continue;p.push(e)}if(null==h)throw"Missing X dimension";if(!p.length)throw"No Y values";return p.map((e=>Js(n++,t,d,h,e,{})))}(e,t()),r=Xs(t,n,a,s)}catch(e){return console.log("prepScatter ERROR",e),{error:e.message,series:[]}}return{series:n,builder:r}}function Js(e,t,a,s,n,r){var i,o,l,c,d,u,p,h;const m=t[a],g=m.fields[n];let f=null!==(i=g.state)&&void 0!==i?i:{};f.seriesIndex=e,g.state=f;let b=r.pointColorFixed?jt.config.theme2.visualization.getColorByName(r.pointColorFixed):(0,he.getFieldSeriesColor)(g,jt.config.theme2).color,v=()=>b;const x=Object.assign({},Ms,g.config.custom);let y=he.fieldColorModeRegistry.get(he.FieldColorModeId.PaletteClassic);if(r.pointColorIndex){const e=t[a].fields[r.pointColorIndex];if(e){var w;const t=null!==(w=e.display)&&void 0!==w?w:(0,he.getDisplayProcessor)({field:e,theme:jt.config.theme2});if(y=(0,he.getFieldColorModeForField)(g),y.isByValue){const e=r.pointColorIndex;v=a=>a.fields[e].values.toArray().map((e=>t(e).color))}else b=y.getCalculator(e,jt.config.theme2)(e.values.get(0),1),v=()=>b}}let j=r.pointSizeConfig,C=null!==(o=null!==(l=null===(c=r.pointSizeConfig)||void 0===c?void 0:c.fixed)&&void 0!==l?l:null===(d=g.config.custom)||void 0===d||null===(u=d.pointSizeConfig)||void 0===u?void 0:u.fixed)&&void 0!==o?o:5,k=()=>C;r.pointSizeIndex?k=e=>{const t=(0,Xt.A)(e.fields[r.pointSizeIndex],r.pointSizeConfig,Xt.B5.Quadratic),a=Array(e.length);for(let s=0;s<e.length;s++)a[s]=t.get(s);return a}:j={fixed:C,min:C,max:C};const S=(0,he.getFieldDisplayName)(g,m,t);return{name:S,frame:e=>e[a],x:e=>e.fields[s],y:e=>e.fields[n],legend:e=>[{label:S,color:b,getItemKey:()=>S,yAxis:n}],line:null!==(p=x.line)&&void 0!==p?p:Ps.None,lineWidth:null!==(h=x.lineWidth)&&void 0!==h?h:2,lineStyle:x.lineStyle,lineColor:()=>b,point:x.point,pointSize:k,pointColor:v,pointSymbol:(e,t)=>"circle",label:Te.Jp.Never,labelValue:()=>"",hints:{pointSize:j,pointColor:{mode:y}}}}const Xs=(e,t,a,s)=>{var n,r;let i,o;let l=(c={disp:{size:{values:(e,t)=>e.data[t][2]},color:{values:(e,t)=>e.data[t][3],alpha:(e,t)=>e.data[t][4]}},each:(e,t,a,s,n,r,o)=>{s-=e.bbox.left,n-=e.bbox.top,i.add({x:s,y:n,w:r,h:o,sidx:t,didx:a})}},(a,s,n,r)=>(Ks.Z.orient(a,s,((n,r,i,o,l,d,u,p,h,m,g,f,b,v,x)=>{var y;const w=t[s-1];let j=a.data[s],C=w.line!==Ps.None,k=w.point===Te.Jp.Always;k||w.point!==Te.Jp.Auto||(k=j[0].length<1e3),k||C||(C=!0),a.ctx.save(),a.ctx.rect(a.bbox.left,a.bbox.top,a.bbox.width,a.bbox.height),a.ctx.clip(),a.ctx.fillStyle=n.fill(),a.ctx.strokeStyle=n.stroke(),a.ctx.lineWidth=1;let S=2*Math.PI,T=o.key,O=l.key,_=w.hints.pointSize;const N=w.hints.pointColor.mode.isByValue;let I=(null!==(y=_.max)&&void 0!==y?y:_.fixed)*devicePixelRatio,P=a.posToVal(-I/2,T),M=a.posToVal(a.bbox.width/devicePixelRatio+I/2,T),F=a.posToVal(a.bbox.height/devicePixelRatio+I/2,O),A=a.posToVal(-I/2,O),D=c.disp.size.values(a,s),$=c.disp.color.values(a,s),L=c.disp.color.alpha(a,s),R=C?new Path2D:null;for(let e=0;e<j[0].length;e++){let t=j[0][e],n=j[1][e],r=D[e]*devicePixelRatio;if(t>=P&&t<=M&&n>=F&&n<=A){let i=d(t,o,m,p),f=u(n,l,g,h);C&&R.lineTo(i,f),k&&(a.ctx.moveTo(i+r/2,f),a.ctx.beginPath(),a.ctx.arc(i,f,r/2,0,S),N&&(a.ctx.fillStyle=L[e],a.ctx.strokeStyle=$[e]),a.ctx.fill(),a.ctx.stroke(),c.each(a,s,e,i-r/2-.5,f-r/2-.5,r+1,r+1))}}if(C){let t=w.frame(e());a.ctx.strokeStyle=w.lineColor(t),a.ctx.lineWidth=w.lineWidth*devicePixelRatio;const{lineStyle:s}=w;var E;s&&"solid"!==s.fill&&("dot"===s.fill&&(a.ctx.lineCap="round"),a.ctx.setLineDash(null!==(E=s.dash)&&void 0!==E?E:[10,10])),a.ctx.stroke(R)}a.ctx.restore()})),null));var c;const d=new fe.UPlotConfigBuilder;let u;d.setCursor({drag:{setScale:!0},dataIdx:(e,t)=>{if(1===t){o=null;let t=1/0,a=e.cursor.left*devicePixelRatio,s=e.cursor.top*devicePixelRatio;i.get(a,s,1,1,(e=>{if((0,Zs.P)(a,s,e.x,e.y,e.x+e.w,e.y+e.h)){let n=e.x+e.w/2,r=e.y+e.h/2,i=n-a,l=r-s,c=Math.sqrt(i**2+l**2);c<=e.w/2&&c<=t&&(t=c,o=e)}}))}return o&&t===o.sidx?o.didx:null},points:{size:(e,t)=>o&&t===o.sidx?o.w/devicePixelRatio:0,fill:(e,t)=>"rgba(255,255,255,0.4)"}}),d.addHook("init",((e,t)=>{e.over.style.overflow="hidden"})),d.addHook("syncRect",((e,t)=>{u=t})),d.addHook("setLegend",(e=>{if(null!=e.cursor.idxs)for(let t=0;t<e.cursor.idxs.length;t++){const a=e.cursor.idxs[t];if(null!=a)return void s({scatterIndex:t-1,xIndex:a,pageX:u.left+e.cursor.left,pageY:u.top+e.cursor.top})}s(void 0)})),d.addHook("drawClear",(e=>{i=i||new Zs.l(0,0,e.bbox.width,e.bbox.height),i.clear(),e.series.forEach(((e,t)=>{t>0&&(e._paths=null)}))})),d.setMode(2);const p=e();let h=t[0].x(t[0].frame(p));return d.addScale({scaleKey:"x",isTime:!1,orientation:Te.wN.Horizontal,direction:Te.bQ.Right,range:(e,t,a)=>[t,a]}),d.addAxis({scaleKey:"x",placement:(null===(n=h.config.custom)||void 0===n?void 0:n.axisPlacement)!==Te.LB.Hidden?Te.LB.Bottom:Te.LB.Hidden,show:(null===(r=h.config.custom)||void 0===r?void 0:r.axisPlacement)!==Te.LB.Hidden,theme:a,label:h.config.custom.axisLabel}),t.forEach((e=>{var t,s;let n=e.frame(p),r=e.y(n);const i=e.lineColor(n),o=function(e,t){const a=t(e);if(Array.isArray(a))return a[0];return a}(n,e.pointColor);let c=null!==(t=r.config.unit)&&void 0!==t?t:"y";var u;(d.addScale({scaleKey:c,orientation:Te.wN.Vertical,direction:Te.bQ.Up,range:(e,t,a)=>[t,a]}),(null===(s=r.config.custom)||void 0===s?void 0:s.axisPlacement)!==Te.LB.Hidden)&&d.addAxis({scaleKey:c,theme:a,placement:null===(u=r.config.custom)||void 0===u?void 0:u.axisPlacement,label:r.config.custom.axisLabel,values:(e,t)=>t.map((e=>r.display(e).text))});d.addSeries({facets:[{scale:"x",auto:!0},{scale:c,auto:!0}],pathBuilder:l,theme:a,scaleKey:"",lineColor:i,fillColor:(0,Qs.alpha)(o,.5)})})),d};function en(e,t,a){return e.error?[null]:[null,...e.series.map(((e,a)=>{const s=e.frame(t);let n,r;const i=e.pointColor(s);return Array.isArray(i)?(n=i,r=i.map((e=>(0,Qs.alpha)(e,.5)))):(n=Array(s.length).fill(i),r=Array(s.length).fill((0,Qs.alpha)(i,.5))),[e.x(s).values.toArray(),e.y(s).values.toArray(),tn(s,e.pointSize),n,r]}))]}function tn(e,t){const a=t(e);return Array.isArray(a)?a:Array(e.length).fill(a)}class an extends q.PureComponent{constructor(){var e,t,a;super(...arguments),e=this,t="style",a=nn(Q.vc.theme2),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}render(){const{series:e,data:t,rowIndex:a}=this.props;if(!e||null==a)return null;const s=e.frame(t);return(0,xe.jsx)("table",{className:this.style.infoWrap,children:(0,xe.jsx)("tbody",{children:s.fields.map(((e,t)=>(0,xe.jsxs)("tr",{className:undefined===e?this.style.highlight:"",children:[(0,xe.jsxs)("th",{children:[(0,he.getFieldDisplayName)(e,s),":"]}),(0,xe.jsx)("td",{children:sn(e,a)})]},`${t}/${a}`)))})})}}function sn(e,t){const a=e.values.get(t);return e.display?(0,he.formattedValueToString)(e.display(a)):`${a}`}const nn=(0,fe.stylesFactory)((e=>({infoWrap:be.css`
    padding: 8px;
    th {
      font-weight: ${e.typography.fontWeightMedium};
      padding: ${e.spacing(.25,2)};
    }
  `,highlight:be.css`
    background: ${e.colors.action.hover};
  `})));function rn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class on extends q.PureComponent{constructor(){super(...arguments),rn(this,"state",{series:[]}),rn(this,"scatterHoverCallback",(e=>{this.setState({hover:e})})),rn(this,"getData",(()=>this.props.data.series)),rn(this,"initSeries",(()=>{const{options:e,data:t}=this.props,a=Ys(e,this.getData,jt.config.theme2,this.scatterHoverCallback);a.series.length&&t.series&&(a.facets=en(a,t.series),a.error=void 0),this.setState(a)})),rn(this,"initFacets",(()=>{this.setState({facets:en(this.state,this.props.data.series)})})),rn(this,"renderLegend",(()=>{const{data:e}=this.props,{series:t}=this.state,a=[];for(const s of t){const t=s.frame(e.series);if(t)for(const e of s.legend(t))a.push(e)}return(0,xe.jsx)(fe.VizLayout.Legend,{placement:"bottom",children:(0,xe.jsx)(fe.VizLegend,{placement:"bottom",items:a,displayMode:fe.LegendDisplayMode.List})})}))}componentDidMount(){this.initSeries()}componentDidUpdate(e){const{options:t,data:a}=this.props;t!==e.options||a.structureRev!==e.data.structureRev?this.initSeries():a!==e.data&&this.initFacets()}render(){const{width:e,height:t,timeRange:a,data:s}=this.props,{error:n,facets:r,builder:i,hover:o,series:l}=this.state;return n||!i?(0,xe.jsx)("div",{className:"panel-empty",children:(0,xe.jsx)("p",{children:n})}):(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(fe.VizLayout,{width:e,height:t,legend:this.renderLegend(),children:(e,t)=>(0,xe.jsx)(fe.UPlotChart,{config:i,data:r,width:e,height:t,timeRange:a})}),(0,xe.jsx)(fe.Portal,{children:o&&(0,xe.jsx)(fe.VizTooltipContainer,{position:{x:o.pageX,y:o.pageY},offset:{x:10,y:10},children:(0,xe.jsx)(an,{series:l[o.scatterIndex],rowIndex:o.xIndex,data:s.series})})})]})}}var ln=a("./public/app/features/dimensions/editors/index.ts");const cn=new he.PanelPlugin(on).useFieldConfig((dn=Ms,{standardOptions:{[he.FieldConfigProperty.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:he.FieldColorModeId.PaletteClassic}}},useCustomConfig:e=>{var t;e.addRadio({path:"point",name:"Points",category:As,defaultValue:dn.point,settings:{options:fe.graphFieldOptions.showPoints}}).addSliderInput({path:"pointSize.fixed",name:"Point size",category:As,defaultValue:null===(t=dn.pointSize)||void 0===t?void 0:t.fixed,settings:{min:1,max:100,step:1},showIf:e=>e.point!==Te.Jp.Never}).addRadio({path:"line",name:"Lines",category:As,defaultValue:dn.line,settings:{options:[{label:"None",value:Ps.None},{label:"Linear",value:Ps.Linear}]}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:As,showIf:e=>e.line!==Ps.None,editor:Fs.j,override:Fs.j,process:he.identityOverrideProcessor,shouldApply:e=>e.type===he.FieldType.number}).addSliderInput({path:"lineWidth",name:"Line width",category:As,defaultValue:dn.lineWidth,settings:{min:0,max:10,step:1},showIf:e=>e.line!==Ps.None}),fe.commonOptionsBuilder.addAxisConfig(e,dn),fe.commonOptionsBuilder.addHideFrom(e)}})).setPanelOptions((e=>{e.addRadio({path:"mode",name:"Mode",defaultValue:"single",settings:{options:[{value:"xy",label:"XY",description:"No changes to saved model since 8.0"},{value:"explicit",label:"Explicit"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"Data",editor:Ws,showIf:e=>"xy"===e.mode}).addFieldNamePicker({path:"series[0].x",name:"X Field",showIf:e=>"explicit"===e.mode}).addFieldNamePicker({path:"series[0].y",name:"Y Field",showIf:e=>"explicit"===e.mode}).addCustomEditor({id:"seriesZerox.pointColor",path:"series[0].pointColor",name:"Point color",editor:ln.Lm,settings:{},defaultValue:{},showIf:e=>"explicit"===e.mode}).addCustomEditor({id:"seriesZerox.pointSize",path:"series[0].pointSize",name:"Point size",editor:ln.cL,settings:{min:1,max:50},defaultValue:{fixed:5,min:1,max:50},showIf:e=>"explicit"===e.mode}),fe.commonOptionsBuilder.addTooltipOptions(e),fe.commonOptionsBuilder.addLegendOptions(e)}));var dn,un=a("./packages/grafana-ui/src/components/Icon/Icon.tsx"),pn=a("./public/app/features/dashboard/services/DashboardSrv.ts");const hn=e=>({dashlistSectionHeader:be.css`
    margin-bottom: ${e.spacing(2)};
    color: ${e.colors.secondary.text};
  `,dashlistSection:be.css`
    margin-bottom: ${e.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:be.css`
    ${fe.styleMixins.listItem(e)}
    display: flex;
    cursor: pointer;
    margin: 3px;
    padding: 7px;
  `,dashlistStar:be.css`
    align-self: center;
    margin-right: 0px;
    color: ${e.colors.secondary.text};
    z-index: 1;
  `,dashlistFolder:be.css`
    color: ${e.colors.secondary.text};
    font-size: ${e.typography.bodySmall.fontSize};
    line-height: ${e.typography.body.lineHeight};
  `,dashlistTitle:be.css`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:be.css`
    flex-grow: 1;
  `,dashlistItem:be.css`
    position: relative;
    list-style: none;
  `,gridContainer:be.css`
    display: grid;
    gap: ${e.spacing(1)};
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    list-style: none;
    margin-bottom: ${e.spacing(1)};
  `});Object.freeze([0,0]);let mn;!function(e){e.List="list",e.Previews="previews"}(mn||(mn={}));const gn={layout:mn.List,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]};var fn=a("./public/app/features/search/components/SearchCard.tsx");const bn=["enabled","disabled","checked","onClick","className","aria-label"];function vn(e){let{enabled:t,disabled:a,checked:s,onClick:n,className:r,"aria-label":i}=e,o=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,bn);const l=(0,q.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),null==n||n(e)}),[n]),c=s?t:a,d=Object.assign({},o,c),u=(0,fe.useStyles2)(xn);return(0,xe.jsxs)("label",{className:u.wrapper,children:[(0,xe.jsx)("input",{type:"checkbox",defaultChecked:s,onClick:l,className:u.checkBox,"aria-label":i}),(0,xe.jsx)(un.J,Object.assign({className:(0,be.cx)(u.icon,r)},d))]})}const xn=(0,fe.stylesFactory)((e=>({wrapper:(0,be.css)({display:"flex",alignSelf:"center",cursor:"pointer",zIndex:100}),checkBox:(0,be.css)({appearance:"none","&:focus-visible + *":Object.assign({},(0,Ee.getFocusStyles)(e),{borderRadius:e.shape.borderRadius(1)})}),icon:(0,be.css)({marginBottom:0,verticalAlign:"baseline",display:"flex"})})));var yn=a("../../opt/drone/yarncache/debounce-promise-npm-3.1.2-3c185da0c7-29bac4524c.zip/node_modules/debounce-promise/dist/index.js"),wn=a.n(yn),jn=a("./public/app/features/manage-dashboards/state/actions.ts");async function Cn(e){let{query:t,permissionLevel:a,extraFolders:s}=e;const n=await async function(e){let{query:t,permissionLevel:a}=e;return(await(0,jn.ZL)(t,a)).map((e=>({id:e.id,title:e.title,url:e.url})))}({query:t,permissionLevel:a}),r=null!=s?s:[],i=t?r.filter((e=>{var a;return null===(a=e.title)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase())})):r;return n?i.concat(n):i}function kn(e,t){return null==e?void 0:e.find((e=>{var a;return(null===(a=e.value)||void 0===a?void 0:a.id)===t}))}var Sn=a("./public/app/features/search/constants.ts");const Tn={id:void 0,title:"All"},On={id:Sn.pW,title:Sn.fy};function _n(e){let{onChange:t,extraFolders:a=[],initialFolderId:s,permissionLevel:n=xa.bf.View}=e;const[r,i]=(0,q.useState)(!1),[o,l]=(0,q.useState)(void 0),[c,d]=(0,q.useState)(void 0),u=(0,q.useCallback)((async e=>{let a=kn(e,s);var n;a||(a=null!==(n=await async function(e){if(null!=e)try{const{id:t,title:a}=await(0,jn.EW)(e);return{value:{id:t,title:a},label:a}}catch(t){console.error(`Could not find folder with id:${e}`)}}(s))&&void 0!==n?n:e[0],t(a.value));i(!0),d(e),l(a)}),[s,t]),p=(0,q.useCallback)((async e=>{const t=await async function(e){let{query:t,permissionLevel:a=xa.bf.View,extraFolders:s=[]}=e;return(await Cn({query:t,permissionLevel:a,extraFolders:s})).map((e=>({value:e,label:e.title})))}({query:e,permissionLevel:n,extraFolders:a});return r||await u(t),t}),[n,a,r,u]),h=wn()(p,300,{leading:!0}),m=(0,q.useCallback)((e=>{let{value:a}=e;const s=kn(c,null==a?void 0:a.id);l(s),t(a)}),[c,t]);return(0,xe.jsx)("div",{"data-testid":lt.wl.components.ReadonlyFolderPicker.container,children:(0,xe.jsx)(fe.AsyncSelect,{menuShouldPortal:!0,loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:o,value:o,loadOptions:h,onChange:m})})}const Nn=new he.PanelPlugin((function(e){const[t,a]=(0,q.useState)(new Map);(0,q.useEffect)((()=>{(async function(e,t){let a=Promise.resolve([]);if(e.showStarred){const t={limit:e.maxItems,starred:"true"};a=(0,de.i)().search(t)}let s=Promise.resolve([]),n=[];e.showRecentlyViewed&&(n=(0,I.take)(pe.Z.getDashboardOpened(),e.maxItems),s=(0,de.i)().search({dashboardIds:n,limit:e.maxItems}));let r=Promise.resolve([]);if(e.showSearch){const a={limit:e.maxItems,query:t(e.query,{},"text"),folderIds:e.folderId,tag:e.tags.map((e=>t(e,{},"text"))),type:"dash-db"};r=(0,de.i)().search(a)}const[i,o,l]=await Promise.all([a,r,s]);let c=new Map;for(const e of n){const t=l.find((t=>t.id===e));t&&c.set(e,Object.assign({},t,{isRecent:!0}))}return o.forEach((e=>{c.has(e.id)?c.get(e.id).isSearchResult=!0:c.set(e.id,Object.assign({},e,{isSearchResult:!0}))})),i.forEach((e=>{c.has(e.id)?c.get(e.id).isStarred=!0:c.set(e.id,Object.assign({},e,{isStarred:!0}))})),c})(e.options,e.replaceVariables).then((e=>{a(e)}))}),[e.options,e.replaceVariables,e.renderCounter]);const s=async(e,s)=>{e.preventDefault(),e.stopPropagation();const n=await(0,pn.h4)().starDashboard(s.id.toString(),s.isStarred),r=new Map(t);r.set(s.id,Object.assign({},s,{isStarred:n})),a(r)},[n,r,i]=(0,q.useMemo)((()=>{const e=[...t.values()];return[e.filter((e=>e.isStarred)).sort(((e,t)=>e.title.localeCompare(t.title))),e.filter((e=>e.isRecent)),e.filter((e=>e.isSearchResult)).sort(((e,t)=>e.title.localeCompare(t.title)))]}),[t]),{showStarred:o,showRecentlyViewed:l,showHeadings:c,showSearch:d,layout:u}=e.options,p=[{header:"Starred dashboards",dashboards:n,show:o},{header:"Recently viewed dashboards",dashboards:r,show:l},{header:"Search",dashboards:i,show:d}],h=(0,fe.useStyles2)(hn),m=e=>(0,xe.jsx)("ul",{children:e.map((e=>(0,xe.jsx)("li",{className:h.dashlistItem,children:(0,xe.jsxs)("div",{className:h.dashlistLink,children:[(0,xe.jsxs)("div",{className:h.dashlistLinkBody,children:[(0,xe.jsx)("a",{className:h.dashlistTitle,href:e.url,children:e.title}),e.folderTitle&&(0,xe.jsx)("div",{className:h.dashlistFolder,children:e.folderTitle})]}),(0,xe.jsx)(vn,{"aria-label":`Star dashboard "${e.title}".`,className:h.dashlistStar,enabled:{name:"favorite",type:"mono"},disabled:{name:"star",type:"default"},checked:e.isStarred,onClick:t=>s(t,e)})]})},`dash-${e.id}`)))}),g=e=>(0,xe.jsx)("ul",{className:h.gridContainer,children:e.map((e=>(0,xe.jsx)("li",{children:(0,xe.jsx)(fn.K,{item:e})},e.uid)))});return(0,xe.jsx)(fe.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:p.map(((e,t)=>{let{show:a,header:s,dashboards:n}=e;return a&&(0,xe.jsxs)("div",{className:h.dashlistSection,children:[c&&(0,xe.jsx)("h6",{className:h.dashlistSectionHeader,children:s}),u===mn.Previews?g(n):m(n)]},`dash-group-${t}`)}))})})).setPanelOptions((e=>{jt.config.featureToggles.dashboardPreviews&&e.addRadio({path:"layout",name:"Layout",defaultValue:mn.List,settings:{options:[{value:mn.List,label:"List"},{value:mn.Previews,label:"Preview"}]}}),e.addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:gn.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:gn.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:gn.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:gn.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:gn.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:gn.query}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function(e){let{value:t,onChange:a}=e;return(0,xe.jsx)(_n,{initialFolderId:t,onChange:e=>a(null==e?void 0:e.id),extraFolders:[Tn,On]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:gn.tags,editor:e=>(0,xe.jsx)(fe.TagsInput,{tags:e.value,onChange:e.onChange})})})).setMigrationHandler((e=>{var t,a,s,n,r,i,o,l;const c={showStarred:null!==(t=e.options.showStarred)&&void 0!==t?t:e.starred,showRecentlyViewed:null!==(a=e.options.showRecentlyViewed)&&void 0!==a?a:e.recent,showSearch:null!==(s=e.options.showSearch)&&void 0!==s?s:e.search,showHeadings:null!==(n=e.options.showHeadings)&&void 0!==n?n:e.headings,maxItems:null!==(r=e.options.maxItems)&&void 0!==r?r:e.limit,query:null!==(i=e.options.query)&&void 0!==i?i:e.query,folderId:null!==(o=e.options.folderId)&&void 0!==o?o:e.folderId,tags:null!==(l=e.options.tags)&&void 0!==l?l:e.tags};if(parseFloat(e.pluginVersion||"6.1")<6.3){["starred","recent","search","headings","limit","query","folderId"].forEach((t=>delete e[t]))}return c}));var In,Pn=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsync.js"),Mn=a("./public/app/core/services/context_srv.ts");function Fn(e){let{pluginName:t,pluginID:a,onDismiss:s}=e;const n=(0,fe.useStyles)(An);return(0,xe.jsxs)(fe.Modal,{title:"Update Plugin",icon:"cloud-download",onDismiss:s,isOpen:!0,children:[(0,xe.jsxs)("div",{className:n.container,children:[(0,xe.jsxs)("p",{children:["Type the following on the command line to update ",t,"."]}),(0,xe.jsx)("pre",{children:(0,xe.jsxs)("code",{children:["grafana-cli plugins update ",a]})}),(0,xe.jsxs)("span",{className:n.small,children:["Check out ",t," on ",(0,xe.jsx)("a",{href:`https://grafana.com/plugins/${a}`,children:"Grafana.com"})," for README and changelog. If you do not have access to the command line, ask your Grafana administator."]})]}),(0,xe.jsxs)("p",{className:n.updateAllTip,children:[(0,xe.jsx)("img",{className:n.inlineLogo,src:"public/img/grafana_icon.svg"}),In||(In=(0,xe.jsx)("strong",{children:"Pro tip"})),": To update all plugins at once, type"," ",(0,xe.jsx)("code",{className:n.codeSmall,children:"grafana-cli plugins update-all"})," on the command line."]})]})}const An=(0,fe.stylesFactory)((e=>({small:be.css`
    font-size: ${e.typography.size.sm};
    font-weight: ${e.typography.weight.regular};
  `,codeSmall:be.css`
    font-size: ${e.typography.size.xs};
    padding: ${e.spacing.xxs};
    margin: 0 ${e.spacing.xxs};
  `,container:be.css`
    margin-bottom: calc(${e.spacing.d} * 2.5);
  `,updateAllTip:be.css`
    color: ${e.colors.textWeak};
    font-size: ${e.typography.size.sm};
  `,inlineLogo:be.css`
    vertical-align: sub;
    margin-right: calc(${e.spacing.d} / 3);
    width: ${e.spacing.md};
  `})));const Dn=(0,fe.stylesFactory)((e=>({pluginList:be.css`
    display: flex;
    flex-direction: column;
  `,section:be.css`
    display: flex;
    flex-direction: column;
    &:not(:last-of-type) {
      margin-bottom: 16px;
    }
  `,sectionHeader:be.css`
    color: ${e.colors.textWeak};
    margin-bottom: ${e.spacing.d};
  `,image:be.css`
    width: 17px;
    margin-right: ${e.spacing.xxs};
  `,title:be.css`
    margin-right: calc(${e.spacing.d} / 3);
  `,version:be.css`
    font-size: ${e.typography.size.sm};
    color: ${e.colors.textWeak};
  `,item:be.css`
    display: flex;
    justify-content: flex-start;
    align-items: center;
    cursor: pointer;
    margin: ${e.spacing.xxs};
    padding: ${e.spacing.sm};
    background: ${e.colors.dashboardBg};
    border-radius: ${e.border.radius.md};
  `,message:be.css`
    margin-left: auto;
    font-size: ${e.typography.size.sm};
  `,messageEnable:be.css`
    color: ${e.colors.linkExternal};
    &:hover {
      border-bottom: ${e.border.width.sm} solid ${e.colors.linkExternal};
    }
  `,messageUpdate:be.css`
    &:hover {
      border-bottom: ${e.border.width.sm} solid ${e.colors.text};
    }
  `,messageNoUpdate:be.css`
    color: ${e.colors.textWeak};
  `,noneInstalled:be.css`
    color: ${e.colors.textWeak};
    font-size: ${e.typography.size.sm};
  `,emphasis:be.css`
    font-weight: ${e.typography.weight.semibold};
    font-style: normal;
    color: ${e.colors.textWeak};
  `}))),$n=new he.PanelPlugin((function(e){const t=(0,Pn.Z)((async()=>{const e=await(0,de.i)().get("api/plugins",{embedded:0,core:0});return[{header:"Installed Apps",list:e.filter((e=>e.type===he.PluginType.app)),type:he.PluginType.app},{header:"Installed Panels",list:e.filter((e=>e.type===he.PluginType.panel)),type:he.PluginType.panel},{header:"Installed Datasources",list:e.filter((e=>e.type===he.PluginType.datasource)),type:he.PluginType.datasource}]}),[]),a=(0,fe.useStyles)(Dn),s=Mn.Vt.user.isGrafanaAdmin;return t.loading||void 0===t.value?null:(0,xe.jsx)(fe.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:(0,xe.jsx)("div",{className:a.pluginList,children:t.value.map((e=>(0,xe.jsxs)("div",{className:a.section,children:[(0,xe.jsx)("h6",{className:a.sectionHeader,children:e.header}),e.list.map((e=>(0,xe.jsxs)("a",{className:a.item,href:e.defaultNavUrl,children:[(0,xe.jsx)("img",{src:e.info.logos.small,className:a.image,width:"17",height:"17",alt:""}),(0,xe.jsx)("span",{className:a.title,children:e.name}),(0,xe.jsxs)("span",{className:a.version,children:["v",e.info.version]}),s&&(e.hasUpdate?(0,xe.jsx)(fe.ModalsController,{children:t=>{let{showModal:s,hideModal:n}=t;return(0,xe.jsx)(fe.Tooltip,{content:`New version: ${e.latestVersion}`,placement:"top",children:(0,xe.jsx)("span",{className:(0,be.cx)(a.message,a.messageUpdate),onClick:t=>{t.preventDefault(),s(Fn,{pluginID:e.id,pluginName:e.name,onDismiss:n,isOpen:!0})},children:"Update available!"})})}}):e.enabled?(0,xe.jsx)("span",{className:(0,be.cx)(a.message,a.messageNoUpdate),children:"Up to date"}):(0,xe.jsx)("span",{className:(0,be.cx)(a.message,a.messageEnable),children:"Enable now"}))]},`plugin-${e.id}`))),0===e.list.length&&(0,xe.jsx)("a",{className:a.item,href:"https://grafana.com/plugins",children:(0,xe.jsxs)("span",{className:a.noneInstalled,children:["None installed. ",(0,xe.jsx)("em",{className:a.emphasis,children:"Browse Grafana.com"})]})})]},`category-${e.type}`)))})})}));var Ln=a("./public/app/plugins/panel/alertlist/types.ts");function Rn(e,t){if(e===Ln.As.Importance)return(0,I.sortBy)(t,(e=>ze.Z.alertStateSortScore[e.state||e.newState]));if(e===Ln.As.TimeAsc)return(0,I.sortBy)(t,(e=>new Date(e.newStateDate||e.time)));if(e===Ln.As.TimeDesc)return(0,I.sortBy)(t,(e=>new Date(e.newStateDate||e.time))).reverse();const a=(0,I.sortBy)(t,(e=>(e.name||e.alertName).toLowerCase()));return e===Ln.As.AlphaDesc&&a.reverse(),a}function En(e){return Object.entries(e).filter((e=>{let[t,a]=e;return a})).map((e=>{let[t,a]=e;return t}))}const zn=(0,fe.stylesFactory)((e=>({cardContainer:be.css`
    padding: ${e.spacing.xs} 0 ${e.spacing.xxs} 0;
    line-height: ${e.typography.lineHeight.md};
    margin-bottom: 0px;
  `,container:be.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:be.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:be.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${e.colors.bg2};
    padding: ${e.spacing.xs} ${e.spacing.sm};
    border-radius: ${e.border.radius.md};
    margin-bottom: ${e.spacing.xs};
  `,alertRuleItemIcon:be.css`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${e.spacing.xl};
    padding: 0 ${e.spacing.xs} 0 ${e.spacing.xxs};
    margin-right: 0px;
  `,alertRuleItemText:be.css`
    font-weight: ${e.typography.weight.bold};
    font-size: ${e.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:be.css`
    color: ${e.colors.textWeak};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:be.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:be.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:be.css`
    margin-right: ${e.spacing.xs};
  `})));var Vn=a("./public/app/features/alerting/unified/utils/rules.ts"),Bn=a("./public/app/features/alerting/unified/state/actions.ts"),Un=a("./public/app/features/alerting/unified/hooks/useUnifiedAlertingSelector.ts"),Hn=a("./public/app/features/alerting/unified/utils/datasource.ts"),qn=a("./public/app/features/alerting/unified/utils/constants.ts"),Wn=a("./public/app/types/unified-alerting-dto.ts"),Gn=a("./public/app/features/alerting/unified/utils/alertmanager.ts"),Zn=a("../../opt/drone/yarncache/pluralize-npm-8.0.0-f5f044ed52-08931d4a6a.zip/node_modules/pluralize/pluralize.js"),Qn=a.n(Zn),Kn=a("./public/app/features/alerting/unified/components/rules/AlertInstancesTable.tsx"),Yn=a("./public/app/features/alerting/unified/utils/misc.ts");function Jn(e){return!(e.startsWith("__")&&e.endsWith("__"))}const Xn=e=>{let{alerts:t,options:a}=e;const s=a.groupMode===Ln.LM.Custom||a.showInstances,[n,r]=(0,q.useState)(s),i=(0,fe.useStyles2)(er),o=(0,q.useCallback)((()=>{r((e=>!e))}),[]),l=(0,q.useMemo)((()=>{var e;return null!==(e=function(e,t){const{stateFilter:a}=e;return(0,I.isEmpty)(a)?t:t.filter((e=>a.firing&&(e.state===Wn.bj.Alerting||e.state===Wn.x_.Firing)||a.pending&&(e.state===Wn.bj.Pending||e.state===Wn.x_.Pending)||a.noData&&e.state===Wn.bj.NoData||a.normal&&e.state===Wn.bj.Normal||a.error&&e.state===Wn.bj.Error||a.inactive&&e.state===Wn.x_.Inactive))}(a,(0,Yn.Zl)(a.sortOrder,t)))&&void 0!==e?e:[]}),[t,a]);return(0,xe.jsxs)("div",{children:[a.groupMode===Ln.LM.Default&&(0,xe.jsxs)("div",{className:i.instance,onClick:()=>o(),children:[(0,xe.jsx)(fe.Icon,{name:n?"angle-down":"angle-right",size:"md"}),(0,xe.jsx)("span",{children:`${l.length} ${Qn()("instance",l.length)}`})]}),n&&(0,xe.jsx)(Kn.o,{instances:l})]})},er=e=>({instance:be.css`
    cursor: pointer;
  `}),tr=e=>({common:be.css`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${e.shape.borderRadius()};
    font-size: ${e.v1.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:be.css`
    margin-top: ${e.spacing(2.5)};
    align-self: flex-start;
  `,good:be.css`
    color: ${e.colors.success.main};
  `,bad:be.css`
    color: ${e.colors.error.main};
  `,warning:be.css`
    color: ${e.colors.warning.main};
  `,neutral:be.css`
    color: ${e.colors.secondary.main};
  `,info:be.css`
    color: ${e.colors.primary.main};
  `}),ar=e=>{let{rules:t,options:a}=e;const s=(0,fe.useStyles2)(or),n=(0,fe.useStyles2)(tr),r=t.length<=a.maxItems?t:t.slice(0,a.maxItems);return(0,xe.jsx)(xe.Fragment,{children:(0,xe.jsx)("ol",{className:s.alertRuleList,children:r.map(((e,t)=>{var r;const{rule:i,namespaceName:o,groupName:l}=e,c=(0,Vn.ub)(i);return(0,xe.jsxs)("li",{className:s.alertRuleItem,children:[(0,xe.jsx)("div",{className:n.icon,children:(0,xe.jsx)(fe.Icon,{name:ze.Z.getStateDisplayModel(i.state).iconClass,className:n[Vn.Aq[i.state]],size:"lg"})}),(0,xe.jsxs)("div",{children:[(0,xe.jsxs)("div",{className:s.instanceDetails,children:[(0,xe.jsx)("div",{className:s.alertName,title:i.name,children:i.name}),(0,xe.jsxs)("div",{className:s.alertDuration,children:[(0,xe.jsx)("span",{className:n[Vn.Aq[i.state]],children:i.state.toUpperCase()})," ",c&&i.state!==Wn.x_.Inactive&&(0,xe.jsxs)(xe.Fragment,{children:["for"," ",(0,xe.jsx)("span",{children:(0,he.intervalToAbbreviatedDurationString)({start:c,end:Date.now()})})]})]})]}),(0,xe.jsx)(Xn,{alerts:null!==(r=e.rule.alerts)&&void 0!==r?r:[],options:a})]})]},`alert-${o}-${l}-${i.name}-${t}`)}))})})};var sr=a("./public/app/features/alerting/unified/components/AlertLabel.tsx");function nr(e){return[...new URLSearchParams(e)]}const rr=e=>{let{rules:t,options:a}=e;const s=(0,fe.useStyles2)(or),n=a.groupBy,r=(0,q.useMemo)((()=>{const e=new Map;return t.filter((e=>!n||function(e,t){return t.every((t=>{var a;return(null!==(a=e.rule.alerts)&&void 0!==a?a:[]).some((e=>e.labels[t]))}))}(e,n))).forEach((t=>{var a;(null!==(a=t.rule.alerts)&&void 0!==a?a:[]).forEach((t=>{var a;const s=function(e,t){return new URLSearchParams(e.map((e=>[e,t[e]]))).toString()}(n,t.labels),r=null!==(a=e.get(s))&&void 0!==a?a:[];e.set(s,[...r,t])}))})),e}),[n,t]);return(0,xe.jsx)(xe.Fragment,{children:Array.from(r).map((e=>{let[t,n]=e;return(0,xe.jsx)("li",{className:s.alertRuleItem,children:(0,xe.jsxs)("div",{children:[(0,xe.jsx)("div",{className:s.customGroupDetails,children:(0,xe.jsxs)("div",{className:s.alertLabels,children:[t&&nr(t).map((e=>{let[t,a]=e;return(0,xe.jsx)(sr.i,{labelKey:t,value:a},t)})),!t&&"No grouping"]})}),(0,xe.jsx)(Xn,{alerts:n,options:a})]})},t)}))})};var ir;const or=e=>({cardContainer:be.css`
    padding: ${e.v1.spacing.xs} 0 ${e.v1.spacing.xxs} 0;
    line-height: ${e.v1.typography.lineHeight.md};
    margin-bottom: 0px;
  `,container:be.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:be.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:be.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${e.v1.colors.bg2};
    padding: ${e.v1.spacing.xs} ${e.v1.spacing.sm};
    border-radius: ${e.v1.border.radius.md};
    margin-bottom: ${e.v1.spacing.xs};

    & > * {
      margin-right: ${e.v1.spacing.sm};
    }
  `,alertName:be.css`
    font-size: ${e.v1.typography.size.md};
    font-weight: ${e.v1.typography.weight.bold};
  `,alertLabels:be.css`
    > * {
      margin-right: ${e.v1.spacing.xs};
    }
  `,alertDuration:be.css`
    font-size: ${e.v1.typography.size.sm};
  `,alertRuleItemText:be.css`
    font-weight: ${e.v1.typography.weight.bold};
    font-size: ${e.v1.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:be.css`
    color: ${e.v1.colors.textWeak};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:be.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:be.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:be.css`
    margin-right: ${e.v1.spacing.xs};
  `,instanceDetails:be.css`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:be.css`
    margin-bottom: ${e.v1.spacing.xs};
  `});var lr=a("./public/app/features/alerting/unified/components/rule-editor/RuleFolderPicker.tsx");var cr,dr=a("./public/app/features/alerting/unified/utils/redux.ts");const ur=e=>{const{onChange:t,id:a,defaultValue:s}=e,n=(0,G.useDispatch)();(0,q.useEffect)((()=>{n((0,Bn.lB)())}),[n]);const r=(0,Un._)((e=>e.promRules)),i=(0,q.useMemo)(Hn.mA,[]),o=(0,dr.ed)(r),l=(0,dr.yR)(r),c=(0,q.useMemo)((()=>{if((0,I.isEmpty)(r))return[];if(!o)return[];const e=i.flatMap((e=>{var t;return null!==(t=r[e].result)&&void 0!==t?t:[]})).flatMap((e=>e.groups)).flatMap((e=>e.rules.filter((e=>e.type===Wn.pz.Alerting)))).flatMap((e=>{var t;return null!==(t=e.alerts)&&void 0!==t?t:[]})).map((e=>{var t;return Object.keys(null!==(t=e.labels)&&void 0!==t?t:{})})).flatMap((e=>e.filter(Jn)));return(0,I.uniq)(e)}),[o,r,i]);return(0,xe.jsx)(fe.MultiSelect,{id:a,isLoading:l,defaultValue:s,"aria-label":"group by label keys",placeholder:"Group by",prefix:cr||(cr=(0,xe.jsx)(fe.Icon,{name:"tag-alt"})),onChange:e=>{t(e.map((e=>{var t;return null!==(t=e.value)&&void 0!==t?t:""})))},options:c.map((e=>({label:e,value:e}))),menuShouldPortal:!0})};function pr(e){return e.showOptions===Ln.kx.Current}const hr=new he.PanelPlugin((function(e){const[t,a]=(0,q.useState)(""),s=(0,Pn.Z)((async()=>{var t;if(e.options.showOptions!==Ln.kx.Current)return;const s={state:En(e.options.stateFilter)},n=null===(t=(0,pn.h4)().getCurrent())||void 0===t?void 0:t.getPanelById(e.id);var r;(e.options.alertName&&(s.query=(0,jt.getTemplateSrv)().replace(e.options.alertName,n.scopedVars)),e.options.folderId>=0&&(s.folderId=e.options.folderId),e.options.dashboardTitle&&(s.dashboardQuery=e.options.dashboardTitle),e.options.dashboardAlerts)&&(s.dashboardId=null===(r=(0,pn.h4)().getCurrent())||void 0===r?void 0:r.id);e.options.tags&&(s.dashboardTag=e.options.tags);const i=await(0,jt.getBackendSrv)().get("/api/alerts",s,`alert-list-get-current-alert-state-${e.id}`);let o=Rn(e.options.sortOrder,i.map((e=>Object.assign({},e,{stateModel:ze.Z.getStateDisplayModel(e.state),newStateDateAgo:(0,he.dateTime)(e.newStateDate).locale("en").fromNow(!0)}))));return o.length>e.options.maxItems&&(o=o.slice(0,e.options.maxItems)),a(0===o.length?"No alerts":""),o}),[e.options.showOptions,e.options.stateFilter.alerting,e.options.stateFilter.execution_error,e.options.stateFilter.no_data,e.options.stateFilter.ok,e.options.stateFilter.paused,e.options.stateFilter.pending,e.options.maxItems,e.options.tags,e.options.dashboardAlerts,e.options.dashboardTitle,e.options.folderId,e.options.alertName,e.options.sortOrder,e.timeRange]),n=(0,Pn.Z)((async()=>{if(e.options.showOptions!==Ln.kx.RecentChanges)return;const t={limit:e.options.maxItems,type:"alert",newState:En(e.options.stateFilter)},s=(0,pn.h4)().getCurrent();e.options.dashboardAlerts&&(t.dashboardId=null==s?void 0:s.id),t.from=1e3*he.dateMath.parse(null==s?void 0:s.time.from).unix(),t.to=1e3*he.dateMath.parse(null==s?void 0:s.time.to).unix();const n=await(0,jt.getBackendSrv)().get("/api/annotations",t,`alert-list-get-state-changes-${e.id}`),r=Rn(e.options.sortOrder,n.map((e=>Object.assign({},e,{time:null==s?void 0:s.formatDate(e.time,"MMM D, YYYY HH:mm:ss"),stateModel:ze.Z.getStateDisplayModel(e.newState),info:ze.Z.getAlertAnnotationInfo(e)}))));return a(0===r.length?"No alerts in current time range":""),r}),[e.options.showOptions,e.options.maxItems,e.options.stateFilter.alerting,e.options.stateFilter.execution_error,e.options.stateFilter.no_data,e.options.stateFilter.ok,e.options.stateFilter.paused,e.options.stateFilter.pending,e.options.dashboardAlerts,e.options.sortOrder]),r=(0,fe.useStyles)(zn);return(0,xe.jsx)(fe.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:(0,xe.jsxs)("div",{className:r.container,children:[t&&(0,xe.jsx)("div",{className:r.noAlertsMessage,children:t}),(0,xe.jsx)("section",{children:(0,xe.jsx)("ol",{className:r.alertRuleList,children:e.options.showOptions===Ln.kx.Current?!s.loading&&s.value&&s.value.map((e=>(0,xe.jsx)("li",{className:r.alertRuleItem,children:(0,xe.jsxs)(fe.Card,{href:`${e.url}?viewPanel=${e.panelId}`,className:r.cardContainer,children:[(0,xe.jsx)(fe.Card.Heading,{children:e.name}),(0,xe.jsx)(fe.Card.Figure,{className:(0,be.cx)(r.alertRuleItemIcon,e.stateModel.stateClass),children:(0,xe.jsx)(fe.Icon,{name:e.stateModel.iconClass,size:"xl",className:r.alertIcon})}),(0,xe.jsx)(fe.Card.Meta,{children:(0,xe.jsxs)("div",{className:r.alertRuleItemText,children:[(0,xe.jsx)("span",{className:e.stateModel.stateClass,children:e.stateModel.text}),(0,xe.jsxs)("span",{className:r.alertRuleItemTime,children:[" for ",e.newStateDateAgo]})]})})]})},`alert-${e.id}`))):!n.loading&&n.value&&n.value.map((e=>(0,xe.jsx)("li",{className:r.alertRuleItem,children:(0,xe.jsxs)(fe.Card,{className:r.cardContainer,children:[(0,xe.jsx)(fe.Card.Heading,{children:e.alertName}),(0,xe.jsx)(fe.Card.Figure,{className:(0,be.cx)(r.alertRuleItemIcon,e.stateModel.stateClass),children:(0,xe.jsx)(fe.Icon,{name:e.stateModel.iconClass,size:"xl"})}),(0,xe.jsxs)(fe.Card.Meta,{children:[(0,xe.jsx)("span",{className:(0,be.cx)(r.alertRuleItemText,e.stateModel.stateClass),children:e.stateModel.text}),(0,xe.jsx)("span",{children:e.time}),e.info&&(0,xe.jsx)("span",{className:r.alertRuleItemInfo,children:e.info})]})]})},`alert-${e.id}`)))})})]})})})).setPanelOptions((e=>{e.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:Ln.kx.Current},{label:"Recent state changes",value:Ln.kx.RecentChanges}]},defaultValue:Ln.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:Ln.As.AlphaAsc},{label:"Alphabetical (desc)",value:Ln.As.AlphaDesc},{label:"Importance",value:Ln.As.Importance},{label:"Time (asc)",value:Ln.As.TimeAsc},{label:"Time (desc)",value:Ln.As.TimeDesc}]},defaultValue:Ln.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:pr}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:pr}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function(e){let{value:t,onChange:a}=e;return(0,xe.jsx)(_n,{initialFolderId:t,onChange:e=>a(null==e?void 0:e.id),extraFolders:[Tn,On]})},category:["Filter"],showIf:pr}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor:e=>(0,xe.jsx)(fe.TagsInput,{tags:e.value,onChange:e.onChange}),category:["Filter"],showIf:pr}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:pr}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:pr}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:pr}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:pr}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:pr}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:pr})})).setMigrationHandler((e=>{var t,a,s,n,r,i,o,l,c,d,u,p,h,m,g,f,b,v;const x={showOptions:null!==(t=null!==(a=e.options.showOptions)&&void 0!==a?a:e.show)&&void 0!==t?t:Ln.kx.Current,maxItems:null!==(s=null!==(n=e.options.maxItems)&&void 0!==n?n:e.limit)&&void 0!==s?s:10,sortOrder:null!==(r=null!==(i=e.options.sortOrder)&&void 0!==i?i:e.sortOrder)&&void 0!==r?r:Ln.As.AlphaAsc,dashboardAlerts:null!==(o=null!==(l=e.options.dashboardAlerts)&&void 0!==l?l:e.onlyAlertsOnDashboard)&&void 0!==o&&o,alertName:null!==(c=null!==(d=e.options.alertName)&&void 0!==d?d:e.nameFilter)&&void 0!==c?c:"",dashboardTitle:null!==(u=null!==(p=e.options.dashboardTitle)&&void 0!==p?p:e.dashboardFilter)&&void 0!==u?u:"",folderId:null!==(h=e.options.folderId)&&void 0!==h?h:e.folderId,tags:null!==(m=null!==(g=e.options.tags)&&void 0!==g?g:e.dashboardTags)&&void 0!==m?m:[],stateFilter:null!==(f=null!==(b=e.options.stateFilter)&&void 0!==b?b:null===(v=e.stateFilter)||void 0===v?void 0:v.reduce(((e,t)=>Object.assign({},e,{[t]:!0})),{}))&&void 0!==f?f:{}};if(parseFloat(e.pluginVersion||"7.4")<7.5){["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach((t=>delete e[t]))}return x})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(t.hasData)return;e.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}),mr=new he.PanelPlugin((function(e){const t=(0,G.useDispatch)(),a=(0,q.useMemo)(Hn.mA,[]);(0,q.useEffect)((()=>{t((0,Bn.lB)());const e=setInterval((()=>t((0,Bn.lB)())),qn.p4);return()=>{clearInterval(e)}}),[t]);const s=(0,Un._)((e=>e.promRules)),n=a.some((e=>{var t;return null===(t=s[e])||void 0===t?void 0:t.dispatched})),r=a.some((e=>{var t;return null===(t=s[e])||void 0===t?void 0:t.loading})),i=a.some((e=>{var t,a,n;return(null===(t=s[e])||void 0===t||null===(a=t.result)||void 0===a?void 0:a.length)&&!(null!==(n=s[e])&&void 0!==n&&n.error)})),o=(0,fe.useStyles2)(or),l=(0,q.useMemo)((()=>function(e,t){let a=[...t];if(e.dashboardAlerts){var s;const e=null===(s=(0,pn.h4)().getCurrent())||void 0===s?void 0:s.uid;a=a.filter((t=>{let{rule:{annotations:a={}}}=t;return Object.entries(a).some((t=>{let[a,s]=t;return a===qn.q6.dashboardUID&&s===e}))}))}e.alertName&&(a=a.filter((t=>{let{rule:{name:a}}=t;return a.toLocaleLowerCase().includes(e.alertName.toLocaleLowerCase())})));Object.values(e.stateFilter).some((e=>e))&&(a=a.filter((t=>e.stateFilter.firing&&t.rule.state===Wn.x_.Firing||e.stateFilter.pending&&t.rule.state===Wn.x_.Pending||e.stateFilter.inactive&&t.rule.state===Wn.x_.Inactive)));if(e.alertInstanceLabelFilter){const t=(0,Gn.Zh)(e.alertInstanceLabelFilter);a=a.reduce(((e,a)=>{var s;const n=(null!==(s=a.rule.alerts)&&void 0!==s?s:[]).filter((e=>{let{labels:a}=e;return(0,Gn.eD)(a,t)}));return n.length&&e.push(Object.assign({},a,{rule:Object.assign({},a.rule,{alerts:n})})),e}),[])}e.folder&&(a=a.filter((t=>t.namespaceName===e.folder.title)));if(e.datasource){const t=e.datasource===Hn.JY;a=a.filter(t?e=>{let{dataSourceName:t}=e;return t===Hn.GC}:t=>{let{dataSourceName:a}=t;return a===e.datasource})}return a}(e.options,function(e,t){if(e===Ln.As.Importance)return(0,I.sortBy)(t,(e=>ze.Z.alertStateSortScore[e.state]));if(e===Ln.As.TimeAsc)return(0,I.sortBy)(t,(e=>(0,Vn.ub)(e.rule)||new Date));if(e===Ln.As.TimeDesc)return(0,I.sortBy)(t,(e=>(0,Vn.ub)(e.rule)||new Date)).reverse();const a=(0,I.sortBy)(t,(e=>e.rule.name.toLowerCase()));e===Ln.As.AlphaDesc&&a.reverse();return a}(e.options.sortOrder,Object.values(s).flatMap((e=>{let{result:t=[]}=e;return(0,Vn.ZL)(t)}))))),[e.options,s]),c=l.length?"":"No alerts";return(0,xe.jsx)(fe.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:(0,xe.jsxs)("div",{className:o.container,children:[n&&r&&!i&&(ir||(ir=(0,xe.jsx)(fe.LoadingPlaceholder,{text:"Loading..."}))),c&&(0,xe.jsx)("div",{className:o.noAlertsMessage,children:c}),(0,xe.jsxs)("section",{children:[e.options.groupMode===Ln.LM.Custom&&i&&(0,xe.jsx)(rr,{rules:l,options:e.options}),e.options.groupMode===Ln.LM.Default&&i&&(0,xe.jsx)(ar,{rules:l,options:e.options})]})]})})})).setPanelOptions((e=>{e.addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:Ln.LM.Default,settings:{options:[{value:Ln.LM.Default,label:"Default grouping"},{value:Ln.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:e=>e.groupMode===Ln.LM.Custom,category:["Options"],editor:e=>{var t;return(0,xe.jsx)(ur,{id:null!==(t=e.id)&&void 0!==t?t:"groupBy",defaultValue:e.value.map((e=>({label:e,value:e}))),onChange:e.onChange})}}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:Ln.As.AlphaAsc},{label:"Alphabetical (desc)",value:Ln.As.AlphaDesc},{label:"Importance",value:Ln.As.Importance},{label:"Time (asc)",value:Ln.As.TimeAsc},{label:"Time (desc)",value:Ln.As.TimeDesc}]},defaultValue:Ln.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"folder",name:"Folder",description:"Filter for alerts in the selected folder",id:"folder",defaultValue:null,editor:function(e){return(0,xe.jsx)(lr.W,Object.assign({},e,{enableReset:!0,onChange:t=>{let{title:a,id:s}=t;return e.onChange({title:a,id:s})}}))},category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(e){return(0,xe.jsx)(jt.DataSourcePicker,Object.assign({},e,{type:["prometheus","loki","grafana"],noDefault:!0,current:e.value,onChange:t=>e.onChange(t.name),onClear:()=>e.onChange("")}))},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.inactive",name:"Inactive",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})})),gr=jt.config.unifiedAlertingEnabled?mr:hr;var fr,br=a("./packages/grafana-ui/src/components/List/AbstractList.tsx"),vr=a("./public/app/core/app_events.ts");const xr=e=>{let{options:t,annotation:a,formatDate:s,onClick:n,onAvatarClick:r,onTagClick:i}=e;const o=(0,fe.useStyles2)(jr),{showUser:l,showTags:c,showTime:d}=t,{text:u,login:p,email:h,avatarUrl:m,tags:g,time:f,timeEnd:b}=a,v=p&&l,x=f&&d,y=b&&b!==f&&d;return(0,xe.jsxs)(fe.Card,{className:o.card,onClick:()=>{n(a)},children:[(0,xe.jsx)(fe.Card.Heading,{children:(0,xe.jsx)("span",{children:u})}),x&&(0,xe.jsxs)(fe.Card.Description,{className:o.timestamp,children:[(0,xe.jsx)(wr,{formatDate:s,time:f}),y&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)("span",{className:o.time,children:"-"}),(0,xe.jsx)(wr,{formatDate:s,time:b})," "]})]}),v&&(0,xe.jsx)(fe.Card.Meta,{className:o.meta,children:(0,xe.jsx)(yr,{email:h,login:p,avatarUrl:m,onClick:()=>{r(a)}})}),c&&g&&(0,xe.jsx)(fe.Card.Tags,{children:(0,xe.jsx)(fe.TagList,{tags:g,onClick:e=>i(e,!1)})})]})},yr=e=>{let{onClick:t,avatarUrl:a,login:s,email:n}=e;const r=(0,fe.useStyles2)(jr),i=(0,xe.jsxs)("span",{children:["Created by:",fr||(fr=(0,xe.jsx)("br",{}))," ",n]});return(0,xe.jsx)(fe.Tooltip,{content:i,theme:"info",placement:"top",children:(0,xe.jsx)("button",{onClick:e=>{e.stopPropagation(),t()},className:r.avatar,"aria-label":`Created by ${n}`,children:(0,xe.jsx)("img",{src:a,alt:"avatar icon"})})})},wr=e=>{let{time:t,formatDate:a}=e;const s=(0,fe.useStyles2)(jr);return(0,xe.jsx)("span",{className:s.time,children:(0,xe.jsx)("span",{children:a(t)})})};function jr(e){return{card:(0,be.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:e.spacing(1),margin:e.spacing(.5),width:"inherit"}),meta:(0,be.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,be.css)({margin:0,alignSelf:"center"}),time:(0,be.css)({marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:e.typography.bodySmall.fontSize,color:e.colors.text.secondary}),avatar:(0,be.css)({border:"none",background:"inherit",margin:0,padding:e.spacing(.5),img:{borderRadius:"50%",width:e.spacing(2),height:e.spacing(2)}})}}var Cr,kr,Sr=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Subscription.js"),Tr=a("./.yarn/__virtual__/@react-aria-focus-virtual-d5af2f4276/3/opt/drone/yarncache/@react-aria-focus-npm-3.5.0-e819dae779-c03d4433bd.zip/node_modules/@react-aria/focus/dist/module.js");function Or(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _r extends q.PureComponent{constructor(e){super(e),Or(this,"style",Nr(jt.config.theme)),Or(this,"subs",new Sr.w0),Or(this,"tagListRef",q.createRef()),Or(this,"onAnnoClick",(async e=>{var t;if(!e.time)return;const{options:a}=this.props,s=(0,pn.h4)().getCurrent(),n={from:this._timeOffset(e.time,a.navigateBefore,!0),to:this._timeOffset(null!==(t=e.timeEnd)&&void 0!==t?t:e.time,a.navigateAfter,!1)};if(a.navigateToPanel&&(n.viewPanel=e.panelId),(null==s?void 0:s.id)===e.dashboardId)return void jt.locationService.partial(n);const r=await(0,jt.getBackendSrv)().get("/api/search",{dashboardIds:e.dashboardId});if(r&&r.length&&r[0].id===e.dashboardId){const e=r[0],t=new URL(e.url,window.location.origin);return t.searchParams.set("from",n.from),t.searchParams.set("to",n.to),void jt.locationService.push(he.locationUtil.stripBaseFromUrl(t.toString()))}vr.Z.emit(he.AppEvents.alertWarning,["Unknown Dashboard: "+e.dashboardId])})),Or(this,"onTagClick",((e,t)=>{if(!t&&this.state.queryTags.includes(e))return;const a=t?this.state.queryTags.filter((t=>t!==e)):[...this.state.queryTags,e];let s;if(t){var n;const e=document.activeElement,t=null==e?void 0:e.getAttribute("data-tag-id");if(null!==(n=this.tagListRef.current)&&void 0!==n&&n.contains(e)&&t){var r;const e=Number.parseInt(t,10),a=null!==(r=this.tagListRef.current.querySelector(`[data-tag-id="${e+1}"]`))&&void 0!==r?r:this.tagListRef.current.querySelector(`[data-tag-id="${e-1}"]`);a instanceof HTMLElement&&(s=a)}}this.setState({queryTags:a},(()=>{var e;return null===(e=s)||void 0===e?void 0:e.focus()}))})),Or(this,"onUserClick",(e=>{this.setState({queryUser:{id:e.userId,login:e.login,email:e.email}})})),Or(this,"onClearUser",(()=>{this.setState({queryUser:void 0})})),Or(this,"renderItem",((e,t)=>{const{options:a}=this.props,s=(0,pn.h4)().getCurrent();return s?(0,xe.jsx)(xr,{annotation:e,formatDate:s.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:a}):(0,xe.jsx)(xe.Fragment,{})})),this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(he.AnnotationChangeEvent).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(e,t){const{options:a,timeRange:s}=this.props;(a!==e.options||this.state.queryTags!==t.queryTags||this.state.queryUser!==t.queryUser||a.onlyInTimeRange&&s!==e.timeRange)&&this.doSearch()}async doSearch(){const{options:e}=this.props,{queryUser:t,queryTags:a}=this.state,s={tags:e.tags,limit:e.limit,type:"annotation"};var n;e.onlyFromThisDashboard&&(s.dashboardId=null===(n=(0,pn.h4)().getCurrent())||void 0===n?void 0:n.id);let r="";if(e.onlyInTimeRange){const{timeRange:e}=this.props;s.from=e.from.valueOf(),s.to=e.to.valueOf()}else r="All Time";t&&(s.userId=t.id),e.tags&&e.tags.length&&(s.tags=e.tags.map((e=>this.props.replaceVariables(e)))),a.length&&(s.tags=s.tags?[...s.tags,...a]:a);const i=await(0,jt.getBackendSrv)().get("/api/annotations",s,`anno-list-panel-${this.props.id}`);this.setState({annotations:i,timeInfo:r,loaded:!0})}_timeOffset(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=5,n="m";const r=/^(\d+)(\w)/.exec(t);r&&3===r.length&&(s=parseInt(r[1],10),n=r[2]);return a&&(s*=-1),(0,he.dateTime)(e).add(s,n).valueOf()}render(){const{loaded:e,annotations:t,queryUser:a,queryTags:s}=this.state;if(!e)return Cr||(Cr=(0,xe.jsx)("div",{children:"loading..."}));const n=a||s.length>0;return(0,xe.jsxs)(fe.CustomScrollbar,{autoHeightMin:"100%",children:[n&&(0,xe.jsxs)("div",{className:this.style.filter,children:[kr||(kr=(0,xe.jsx)("b",{children:"Filter:"})),a&&(0,xe.jsx)("span",{onClick:this.onClearUser,className:"pointer",children:a.email}),s.length>0&&(0,xe.jsx)(Tr.MT,{restoreFocus:!0,children:(0,xe.jsx)(fe.TagList,{icon:"times",tags:s,onClick:e=>this.onTagClick(e,!0),getAriaLabel:e=>`Remove ${e} tag`,className:this.style.tagList,ref:this.tagListRef})})]}),t.length<1&&(0,xe.jsx)("div",{className:this.style.noneFound,children:"No Annotations Found"}),(0,xe.jsx)(br.L,{items:t,renderItem:this.renderItem,getItemKey:e=>`${e.id}`})]})}}const Nr=(0,fe.stylesFactory)((e=>({noneFound:be.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,be.css)({display:"flex",padding:`0px ${e.spacing.xs}`,b:{paddingRight:e.spacing.sm}}),tagList:(0,be.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})));var Ir=a("../../opt/drone/yarncache/@sentry-utils-npm-6.17.2-a379d6c2b8-15d2885a7d.zip/node_modules/@sentry/utils/esm/string.js");const Pr=new he.PanelPlugin(_r).setPanelOptions((e=>{e.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:!1,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:!1,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor:e=>(0,xe.jsx)(fe.TagsInput,{tags:e.value,onChange:e.onChange})}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:10}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:!0}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:!0}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:!0}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:Ir.$G,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:"10m",description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:"10m",description:""})})).setPanelChangeHandler(((e,t,a)=>"ryantxu-annolist-panel"===t?a:e.options));var Mr=a("../../opt/drone/yarncache/d3-scale-chromatic-npm-1.5.0-4dfce2812a-3bff7717f6.zip/node_modules/d3-scale-chromatic/src/index.js");function Fr(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const n=Mr[e.value],r="always"===e.invert||e.invert===(t?"light":"dark"),i=r?a:s,o=r?s:a;return Pa.scaleSequential(n).domain([i,o])}function Ar(e,t){let a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"linear"===e.colorScale?a=Pa.scaleLinear().domain([s,t]).range([0,1]):"sqrt"===e.colorScale&&(a=Pa.scalePow().exponent(e.exponent).domain([s,t]).range([0,1])),a}function Dr(e,t,a,s,n,r,i){const o=E()(e).find("svg"),l=o.get(0);if(l){const e=Pa.select(l);if(r<=0||0===l.childNodes.length)return;const i=Pa.scaleLinear().domain([t,a]).range([0,r]),c=function(e,t,a,s){const n=t-e,r=te(e,t,3),i=Math.ceil(n/r),o=function(e,t){if(e<0)return Math.floor(e/t)*t;return 0}(e,r);let l=[];for(let e=0;e<i;e++){const t=o+r*e;Lr(s,t,r)?l.push(s):(s<t&&l.push(s),Lr(a,t,r)?l.push(a):(a<t&&l.push(a),l.push(t)))}Lr(a,t,r)||l.push(a);return l.push(t),l=(0,I.sortBy)((0,I.uniq)(l)),l}(t,a,s,n),d=Pa.axisBottom(i).tickValues(c).tickSize(0),u=o.find(":first-child"),p=function(e){const t=e.get(0);return t&&t.height&&t.height.baseVal?t.height.baseVal.value:0}(o)+0,h=function(e){const t=e.get(0);return t&&t.x&&t.x.baseVal?t.x.baseVal.value:0}(u)+10;Pa.select(l).append("g").attr("class","axis").attr("transform","translate("+h+","+p+")").call(d),e.select(".axis").select(".domain").remove()}}function $r(e){E()(e).find("svg").empty()}function Lr(e,t,a){return Math.abs(e-t)<.3*a}function Rr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}J.ZP.directive("colorLegend",(()=>({restrict:"E",template:'<div class="heatmap-color-legend"><svg width="16.5rem" height="24px"></svg></div>',link:(e,t,a)=>{const s=e.ctrl,n=e.ctrl.panel;function r(){var e;const a=E()(t).find("svg"),r=Math.floor(null!==(e=a.outerWidth())&&void 0!==e?e:10);if("spectrum"===n.color.mode){const e=Fr((0,I.find)(s.colorSchemes,{value:n.color.colorScheme}),X.Vt.user.lightTheme,r);!function(e,t){var a;const s=E()(e).find("svg");$r(e);const n=Math.floor(null!==(a=s.outerWidth())&&void 0!==a?a:30),r=s.attr("height");if(n){const e=Math.floor(n/2),a=Math.floor(n/e),i=Pa.range(0,n,a),o=s.get(0);if(o){Pa.select(o).selectAll(".heatmap-color-legend-rect").data(i).enter().append("rect").attr("x",(e=>e)).attr("y",0).attr("width",a+1).attr("height",r).attr("stroke-width",0).attr("fill",(e=>t(e)))}}}(t,e)}else if("opacity"===n.color.mode){const e=n.color;!function(e,t){const a=E()(e).find("svg"),s=a.get(0);if(s){var n;$r(e);const r=Pa.select(s),i=Math.floor(null!==(n=a.outerWidth())&&void 0!==n?n:30),o=a.attr("height");if(i){let e;"linear"===t.colorScale?e=Pa.scaleLinear().domain([0,i]).range([0,1]):"sqrt"===t.colorScale&&(e=Pa.scalePow().exponent(t.exponent).domain([0,i]).range([0,1]));const a=10,s=Pa.range(0,i,a);r.selectAll(".heatmap-opacity-legend-rect").data(s).enter().append("rect").attr("x",(e=>e)).attr("y",0).attr("width",a).attr("height",o).attr("stroke-width",0).attr("fill",(0,he.getColorForTheme)(t.cardColor,Q.vc.theme)).style("opacity",(t=>e(t)))}}}(t,e)}}r(),s.events.on(he.PanelEvents.render,(()=>{r()}))}}))),J.ZP.directive("heatmapLegend",(()=>({restrict:"E",template:'<div class="heatmap-color-legend"><svg width="100px" height="6px"></svg></div>',link:(e,t,a)=>{const s=e.ctrl,n=e.ctrl.panel;function r(){if($r(t),!(0,I.isEmpty)(s.data)&&!(0,I.isEmpty)(s.data.cards)){const e=s.data.cardStats,a=(0,I.isNil)(n.color.min)?Math.max(e.min,0):n.color.min,r=(0,I.isNil)(n.color.max)?e.max:n.color.max,i=e.max,o=e.min;if("spectrum"===n.color.mode){const e=(0,I.find)(s.colorSchemes,{value:n.color.colorScheme});!function(e,t,a,s,n,r){const i=E()(e).find("svg"),o=i.get(0);if(o){var l;const c=Pa.select(o);$r(e);const d=Math.floor(null!==(l=i.outerWidth())&&void 0!==l?l:10)-30,u=i.attr("height"),p=(s-a)/d*10,h=d/(s-a),m=Pa.range(a,s,p),g=Fr(t,X.Vt.user.lightTheme,s,a);c.append("g").attr("class","legend-color-bar").attr("transform","translate(10,0)").selectAll(".heatmap-color-legend-rect").data(m).enter().append("rect").attr("x",(e=>Math.round((e-a)*h))).attr("y",0).attr("width",Math.round(p*h+1)).attr("height",u).attr("stroke-width",0).attr("fill",(e=>g(e))),Dr(e,a,s,n,r,d,m)}}(t,e,a,r,i,o)}else if("opacity"===n.color.mode){const e=n.color;!function(e,t,a,s,n,r){const i=E()(e).find("svg"),o=i.get(0);if(o){var l;const c=Pa.select(o);$r(e);const d=Math.floor(null!==(l=i.outerWidth())&&void 0!==l?l:30)-30,u=i.attr("height"),p=(s-a)/d*10,h=d/(s-a),m=Pa.range(a,s,p),g=Ar(t,s,a);c.append("g").attr("class","legend-color-bar").attr("transform","translate(10,0)").selectAll(".heatmap-opacity-legend-rect").data(m).enter().append("rect").attr("x",(e=>Math.round((e-a)*h))).attr("y",0).attr("width",Math.round(p*h)).attr("height",u).attr("stroke-width",0).attr("fill",t.cardColor).style("opacity",(e=>g(e))),Dr(e,a,s,n,r,d,m)}}(t,e,a,r,i,o)}}}r(),s.events.on(he.PanelEvents.render,(()=>{r()}))}})));class Er{constructor(e,t){Rr(this,"panel",void 0),Rr(this,"panelCtrl",void 0),Rr(this,"logScales",void 0),Rr(this,"dataFormats",void 0),Rr(this,"yBucketBoundModes",void 0),Rr(this,"setUnitFormat",(e=>{this.panel.yAxis.format=e,this.panelCtrl.render()})),e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.logScales={linear:1,"log (base 2)":2,"log (base 10)":10,"log (base 32)":32,"log (base 1024)":1024},this.dataFormats={"Time series":"timeseries","Time series buckets":"tsbuckets"},this.yBucketBoundModes={Auto:"auto",Upper:"upper",Lower:"lower",Middle:"middle"}}}function zr(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/heatmap/partials/axes_editor.html",controller:Er}}function Vr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Er.$inject=["$scope","uiSegmentSrv"];class Br{constructor(e){Vr(this,"panel",void 0),Vr(this,"panelCtrl",void 0),e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel}}function Ur(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/heatmap/partials/display_editor.html",controller:Br}}Br.$inject=["$scope"];function Hr(e,t){let a,s;try{a=qr(e.label),s=qr(t.label)}catch(e){return console.error(e.message||e),0}return a>s?1:a<s?-1:0}function qr(e){if("+Inf"===e||"inf"===e)return 1/0;const t=Number(e);if(isNaN(t))throw new Error(`Error parsing histogram label: ${e} is not a number`);return t}function Wr(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=0,s=0;const n=[];(0,I.forEach)(e,(e=>{(0,I.forEach)(e.buckets,(r=>{const i={x:e.x,y:r.y,yBounds:r.bounds,values:r.values,count:r.count};t&&0===i.count||n.push(i),1===n.length&&(a=r.count,s=r.count),a=r.count<a?r.count:a,s=r.count>s?r.count:s}))}));const r={min:a,max:s};return{cards:n,cardStats:r}}function Gr(e,t,a,s){const n=t[0];if(null==n||isNaN(n))return;const r=(0,I.concat)(t,s);e[a]&&e[a].values?(e[a].values.push(n),e[a].points.push(r)):e[a]={x:a,values:[n],points:[r]}}function Zr(e,t,a,s,n){let r=1;var i;(s.length>3&&(r=parseInt(s[2],10)),e[t])?(e[t].values.push(a),null===(i=e[t].points)||void 0===i||i.push(s),e[t].count+=r):e[t]={y:t,bounds:n,values:[a],points:[s],count:r}}function Qr(e,t,a){return 1===a?Yr(e,t):function(e,t,a){return Xr(e,t,a).bottom}(e,t,a)}function Kr(e,t){let a,s;return a=Math.floor(e/t)*t,s=(Math.floor(e/t)+1)*t,{bottom:a,top:s}}function Yr(e,t){return Kr(e,t).bottom}function Jr(e,t){const a=e.values,s=e.points,n={};return(0,I.forEach)(a,((e,a)=>{const r=Kr(e,t),i=r.bottom;Zr(n,i,e,s[a],r)})),n}function Xr(e,t,a){let s,n;if(0===e)return{bottom:0,top:0};const r=ti(e,a);let i,o;if(1!==t&&t){const e=1/t;let a=r-Math.floor(r);a=Math.floor(a/e)*e,i=Math.floor(r)+a,o=i+e}else i=Math.floor(r),o=i+1;return n=Math.pow(a,i),s=Math.pow(a,o),{bottom:n,top:s}}function ei(e,t,a){const s=e.values,n=e.points,r={};return(0,I.forEach)(s,((e,s)=>{const i=Xr(e,t,a),o=i.bottom;Zr(r,o,e,n[s],i)})),r}function ti(e,t){return Math.log(e)/Math.log(t)}function ai(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(1===a)return Math.abs(t-e);return ti(Math.max(e,t)/Math.min(e,t),a)}function si(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ni=160;class ri{constructor(e,t){si(this,"tooltip",void 0),si(this,"scope",void 0),si(this,"dashboard",void 0),si(this,"panelCtrl",void 0),si(this,"panel",void 0),si(this,"heatmapPanel",void 0),si(this,"mouseOverBucket",void 0),si(this,"originalFillColor",void 0),this.scope=t,this.dashboard=t.ctrl.dashboard,this.panelCtrl=t.ctrl,this.panel=t.ctrl.panel,this.heatmapPanel=e,this.mouseOverBucket=!1,this.originalFillColor=null,e.on("mouseleave",this.onMouseLeave.bind(this))}onMouseLeave(){this.destroy()}onMouseMove(e){this.panel.tooltip.show&&this.move(e)}add(){this.tooltip=Pa.select("body").append("div").attr("class","heatmap-tooltip graph-tooltip grafana-tooltip")}destroy(){this.tooltip&&this.tooltip.remove(),this.tooltip=null}show(e,t){if(!this.panel.tooltip.show||!t)return;if(e.panelRelY)return;const{xBucketIndex:a,yBucketIndex:s}=this.getBucketIndexes(e,t);if(!t.buckets[a])return void this.destroy();let n,r,i;this.tooltip||this.add();const o=t.buckets[a],l=(0,I.find)(o.buckets,((e,t)=>e.bounds.bottom===s||t===s.toString())),c=this.dashboard.formatDate(o.x,"YYYY-MM-DD HH:mm:ss");let d,u;if((0,I.isNumber)(this.panel.tooltipDecimals))d=this.countValueFormatter(this.panel.tooltipDecimals,null),u=this.panelCtrl.tickValueFormatter(this.panelCtrl.decimals,null);else{const e=(this.panelCtrl.decimals||-1)+1;d=this.countValueFormatter(e,this.panelCtrl.scaledDecimals+2),u=this.panelCtrl.tickValueFormatter(e,this.panelCtrl.scaledDecimals+2)}let p=`<div class="graph-tooltip-time">${c}</div>\n      <div class="heatmap-histogram"></div>`;if(l)if(l.bounds){if(t.tsBuckets){const e=e=>t.tsBucketsFormatted?t.tsBucketsFormatted[e]:t.tsBuckets[e];n=e(s),"middle"!==this.panel.yBucketBound&&(r=s<t.tsBuckets.length-1?e(s+1):"")}else{n=u(l.y?l.bounds.bottom:0),r=u(l.bounds.top)}i=d(l.count);p+=`<div>\n          bucket: <b>${r&&n?`${n} - ${r}`:n||r}</b> <br>\n          count: <b>${i}</b> <br>\n        </div>`}else p+=`<div>count: <b>${l.count}</b><br></div>`;else{if(!this.panel.tooltip.showHistogram)return void this.destroy();n=s,r="",i=0}this.tooltip.html(p),this.panel.tooltip.showHistogram&&this.addHistogram(o),this.move(e)}getBucketIndexes(e,t){return{xBucketIndex:this.getXBucketIndex(e.x,t),yBucketIndex:this.getYBucketIndex(e.y,t)}}getXBucketIndex(e,t){const a=(0,I.find)(t.buckets,(a=>e>a.x&&e-a.x<=t.xBucketSize));return a?a.x:Qr(e,t.xBucketSize,1)}getYBucketIndex(e,t){if(t.tsBuckets)return Math.floor(e);return Qr(e,t.yBucketSize,this.panel.yAxis.logBase)}getSharedTooltipPos(e){return e.pageX=this.heatmapPanel.offset().left+this.scope.xScale(e.x),e.pageY=this.heatmapPanel.offset().top+this.scope.chartHeight*e.panelRelY,e}addHistogram(e){const t=this.scope.ctrl.data.buckets[e.x],a=this.scope.ctrl.data.yBucketSize;let s,n,r;this.scope.ctrl.data.tsBuckets?(s=0,n=this.scope.ctrl.data.tsBuckets.length-1,r=this.scope.ctrl.data.tsBuckets.length):(s=this.scope.ctrl.data.yAxis.min,n=this.scope.ctrl.data.yAxis.max,r=this.scope.ctrl.data.yAxis.ticks);let i=(0,I.map)(t.buckets,(e=>{const t=void 0!==e.count?e.count:e.values.length;return[e.bounds.bottom,t]}));i=(0,I.filter)(i,(e=>e[0]>=s&&e[0]<=n));const o=this.scope.yScale.copy().domain([s,n]).range([0,ni]);let l;if(1===this.panel.yAxis.logBase)l=Math.floor(ni/(n-s)*a*.9);else{const e=a||1;l=Math.floor(ni/r/e*.9)}l=Math.max(l,1);const c=(0,I.reduce)((0,I.map)(i,(e=>e[1])),((e,t)=>e+t),0),d=Pa.scaleLinear().domain([0,c]).range([0,40]);this.tooltip.select(".heatmap-histogram").append("svg").attr("width",ni).attr("height",40).selectAll(".bar").data(i).enter().append("rect").attr("x",(e=>o(e[0]))).attr("width",l).attr("y",(e=>40-d(e[1]))).attr("height",(e=>d(e[1])))}move(e){if(!this.tooltip)return;const t=E()(this.tooltip.node())[0],a=t.clientWidth,s=t.clientHeight;let n=e.pageX+30,r=e.pageY+5;return e.pageX+a+40>window.innerWidth&&(n=e.pageX-a-30),e.pageY-window.pageYOffset+s+20>window.innerHeight&&(r=e.pageY-s-5),this.tooltip.style("left",n+"px").style("top",r+"px")}countValueFormatter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=(0,he.getValueFormat)("short");return s=>(0,he.formattedValueToString)(a(s,e,t))}}function ii(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class oi{constructor(e,t,a,s){ii(this,"width",200),ii(this,"height",200),ii(this,"yScale",void 0),ii(this,"xScale",void 0),ii(this,"chartWidth",0),ii(this,"chartHeight",0),ii(this,"chartTop",0),ii(this,"chartBottom",0),ii(this,"yAxisWidth",0),ii(this,"xAxisHeight",0),ii(this,"cardPadding",0),ii(this,"cardRound",0),ii(this,"cardWidth",0),ii(this,"cardHeight",0),ii(this,"colorScale",void 0),ii(this,"opacityScale",void 0),ii(this,"mouseUpHandler",void 0),ii(this,"data",void 0),ii(this,"panel",void 0),ii(this,"$heatmap",void 0),ii(this,"tooltip",void 0),ii(this,"heatmap",void 0),ii(this,"timeRange",void 0),ii(this,"selection",void 0),ii(this,"padding",void 0),ii(this,"margin",void 0),ii(this,"dataRangeWidingFactor",void 0),ii(this,"hoverEvent",void 0),this.scope=e,this.elem=t,this.ctrl=s,this.$heatmap=this.elem.find(".heatmap-panel"),this.tooltip=new ri(this.$heatmap,this.scope),this.selection={active:!1,x1:-1,x2:-1},this.padding={left:0,right:0,top:0,bottom:0},this.margin={left:25,right:15,top:10,bottom:20},this.dataRangeWidingFactor=1.2,this.ctrl.events.on(he.PanelEvents.render,this.onRender.bind(this)),this.ctrl.tickValueFormatter=this.tickValueFormatter.bind(this),this.ctrl.dashboard.events.on(he.LegacyGraphHoverEvent.type,this.onGraphHover.bind(this),this.scope),this.ctrl.dashboard.events.on(he.LegacyGraphHoverClearEvent.type,this.onGraphHoverClear.bind(this),this.scope),this.$heatmap.on("mousedown",this.onMouseDown.bind(this)),this.$heatmap.on("mousemove",this.onMouseMove.bind(this)),this.$heatmap.on("mouseleave",this.onMouseLeave.bind(this)),this.hoverEvent=new he.LegacyGraphHoverEvent({pos:{},point:{},panel:this.panel})}onGraphHoverClear(){this.clearCrosshair()}onGraphHover(e){this.drawSharedCrosshair(e.pos)}onRender(){this.render(),this.ctrl.renderingCompleted()}setElementHeight(){try{let e=this.ctrl.height||this.panel.height||this.ctrl.row.height;return(0,I.isString)(e)&&(e=parseInt(e.replace("px",""),10)),e-=this.panel.legend.show?28:11,this.$heatmap.css("height",e+"px"),!0}catch(e){return!1}}getYAxisWidth(e){const t=this.getPanelYAxisWidth();if(null!==t)return t+5;const a=e.selectAll(".axis-y text").nodes();return(0,I.max)((0,I.map)(a,(e=>e.getBBox().width)))}getXAxisHeight(e){if(e.select(".axis-x line").empty())return 30;{const t=parseFloat(e.select(".axis-x line").attr("y2"));return parseFloat(e.attr("height"))-t}}addXAxis(){this.scope.xScale=this.xScale=Pa.scaleTime().domain([this.timeRange.from,this.timeRange.to]).range([0,this.chartWidth]);const e=this.chartWidth/100,t=(0,fe.graphTimeFormat)(e,this.timeRange.from.valueOf(),this.timeRange.to.valueOf()),a=this.ctrl.dashboard.getTimezone(),s=Pa.axisBottom(this.xScale).ticks(e).tickFormat((e=>(0,he.dateTimeFormat)(e.valueOf(),{format:t,timeZone:a}))).tickPadding(10).tickSize(this.chartHeight),n=this.margin.top,r=this.yAxisWidth;this.heatmap.append("g").attr("class","axis axis-x").attr("transform","translate("+r+","+n+")").call(s),this.heatmap.select(".axis-x").select(".domain").remove()}addYAxis(){let e=Math.ceil(this.chartHeight/22.5),t=te(this.data.heatmapStats.min,this.data.heatmapStats.max,e),{yMin:a,yMax:s}=this.wideYAxisRange(this.data.heatmapStats.min,this.data.heatmapStats.max,t);a=null!==this.panel.yAxis.min?this.panel.yAxis.min:a,s=null!==this.panel.yAxis.max?this.panel.yAxis.max:s,t=te(a,s,e),e=Math.ceil((s-a)/t);const n=le(t);let r=null===this.panel.yAxis.decimals?n:this.panel.yAxis.decimals;const i=ae(r,se(a,s,e,n));this.ctrl.decimals=r,this.ctrl.scaledDecimals=i,(0,I.isEmpty)(this.data.buckets)&&(s=1,a=-1,e=3,r=1),this.data.yAxis={min:a,max:s,ticks:e},this.scope.yScale=this.yScale=Pa.scaleLinear().domain([a,s]).range([this.chartHeight,0]);const o=Pa.axisLeft(this.yScale).ticks(e).tickFormat(this.tickValueFormatter(r,i)).tickSizeInner(0-this.width).tickSizeOuter(0).tickPadding(5);this.heatmap.append("g").attr("class","axis axis-y").call(o);const l=this.margin.top,c=this.getYAxisWidth(this.heatmap)+5;this.heatmap.select(".axis-y").attr("transform","translate("+c+","+l+")"),this.heatmap.select(".axis-y").select(".domain").remove()}wideYAxisRange(e,t,a){const s=(t*(this.dataRangeWidingFactor-1)-e*(this.dataRangeWidingFactor-1))/2;let n,r;return 0===a?(r=t*this.dataRangeWidingFactor,n=e-e*(this.dataRangeWidingFactor-1)):(r=Math.ceil((t+s)/a)*a,n=Math.floor((e-s)/a)*a),e>=0&&n<0&&(n=0),{yMin:n,yMax:r}}addLogYAxis(){const e=this.panel.yAxis.logBase;let{yMin:t,yMax:a}=this.adjustLogRange(this.data.heatmapStats.minLog,this.data.heatmapStats.max,e);t=this.panel.yAxis.min&&"0"!==this.panel.yAxis.min?this.adjustLogMin(this.panel.yAxis.min,e):t,a=null!==this.panel.yAxis.max?this.adjustLogMax(this.panel.yAxis.max,e):a,(0,I.isEmpty)(this.data.buckets)&&(a=Math.pow(e,2),t=1),this.scope.yScale=this.yScale=Pa.scaleLog().base(this.panel.yAxis.logBase).domain([t,a]).range([this.chartHeight,0]);const s=this.yScale.domain(),n=this.logScaleTickValues(s,e),r=le(t),i=this.panel.yAxis.decimals||r,o=ae(i,se(t,a,n.length,r));this.ctrl.decimals=i,this.ctrl.scaledDecimals=o,this.data.yAxis={min:t,max:a,ticks:n.length};const l=Pa.axisLeft(this.yScale).tickValues(n).tickFormat(this.tickValueFormatter(i,o)).tickSizeInner(0-this.width).tickSizeOuter(0).tickPadding(5);this.heatmap.append("g").attr("class","axis axis-y").call(l);const c=this.margin.top,d=this.getYAxisWidth(this.heatmap)+5;this.heatmap.select(".axis-y").attr("transform","translate("+d+","+c+")"),t<1&&this.heatmap.select(".axis-y").select(".tick text").text("0"),this.heatmap.select(".axis-y").select(".domain").remove()}addYAxisFromBuckets(){const e=this.data.tsBuckets;let t=Math.ceil(this.chartHeight/22.5);this.scope.yScale=this.yScale=Pa.scaleLinear().domain([0,e.length-1]).range([this.chartHeight,0]);const a=(0,I.map)(e,((e,t)=>t)),s=(0,I.max)((0,I.map)(e,ce)),n=null===this.panel.yAxis.decimals?s:this.panel.yAxis.decimals;this.ctrl.decimals=n;const r=this.tickValueFormatter.bind(this);function i(t){return function(a){let s=e[a.valueOf()];if((0,I.isNaN)((0,I.toNumber)(s))||""===s){if(s&&"string"==typeof s&&""!==s&&t){const e=.15,a=s.substring(0,Math.floor(t*e));s=`${a}${a.length<s.length?"...":""}`}}else s=r(n)((0,I.toNumber)(s));return s}}const o=(0,I.map)(e,((e,t)=>i(null)(t)));this.data.tsBucketsFormatted=o;const l=Pa.axisLeft(this.yScale).tickFormat(i(this.getPanelYAxisWidth())).tickSizeInner(0-this.width).tickSizeOuter(0).tickPadding(5);a&&a.length<=t?l.tickValues(a):l.ticks(t),this.heatmap.append("g").attr("class","axis axis-y").call(l);const c=this.margin.top,d=this.getYAxisWidth(this.heatmap)+5;if(this.heatmap.select(".axis-y").attr("transform","translate("+d+","+c+")"),"middle"===this.panel.yBucketBound&&a&&a.length){const e=0-this.chartHeight/(a.length-1)/2;this.heatmap.selectAll(".axis-y text").attr("transform","translate(0,"+e+")")}this.heatmap.select(".axis-y").select(".domain").remove()}adjustLogRange(e,t,a){let s=this.data.heatmapStats.minLog;s=this.data.heatmapStats.minLog>1||!this.data.heatmapStats.minLog?1:this.adjustLogMin(this.data.heatmapStats.minLog,a);return{yMin:s,yMax:this.adjustLogMax(this.data.heatmapStats.max,a)}}adjustLogMax(e,t){return Math.pow(t,Math.ceil(oe(e,t)))}adjustLogMin(e,t){return Math.pow(t,Math.floor(oe(e,t)))}logScaleTickValues(e,t){const a=e[0],s=e[1],n=[];if(a<1){for(let e=Math.floor(oe(a,t));e<0;e++){const a=Math.pow(t,e);n.push(a)}}const r=Math.ceil(oe(s,t));for(let e=0;e<=r;e++){const a=Math.pow(t,e);n.push(a)}return n}tickValueFormatter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=this.panel.yAxis.format;return s=>{try{if("none"!==a){const n=(0,he.getValueFormat)(a)(s,e,t);return(0,he.formattedValueToString)(n)}}catch(e){console.error(e.message||e)}return s}}fixYAxisTickSize(){this.heatmap.select(".axis-y").selectAll(".tick line").attr("x2",this.chartWidth)}addAxes(){this.chartHeight=this.height-this.margin.top-this.margin.bottom,this.chartTop=this.margin.top,this.chartBottom=this.chartTop+this.chartHeight,"tsbuckets"===this.panel.dataFormat?this.addYAxisFromBuckets():1===this.panel.yAxis.logBase?this.addYAxis():this.addLogYAxis(),this.yAxisWidth=this.getYAxisWidth(this.heatmap)+5,this.chartWidth=this.width-this.yAxisWidth-this.margin.right,this.fixYAxisTickSize(),this.addXAxis(),this.xAxisHeight=this.getXAxisHeight(this.heatmap),this.panel.yAxis.show||this.heatmap.select(".axis-y").selectAll("line").style("opacity",0),this.panel.xAxis.show||this.heatmap.select(".axis-x").selectAll("line").style("opacity",0)}addHeatmapCanvas(){const e=this.$heatmap[0];this.width=Math.floor(this.$heatmap.width())-this.padding.right,this.height=Math.floor(this.$heatmap.height())-this.padding.bottom,this.cardPadding=null!==this.panel.cards.cardPadding?this.panel.cards.cardPadding:1,this.cardRound=null!==this.panel.cards.cardRound?this.panel.cards.cardRound:0,this.heatmap&&this.heatmap.remove(),this.heatmap=Pa.select(e).append("svg").attr("width",this.width).attr("height",this.height)}addHeatmap(){if(this.addHeatmapCanvas(),this.addAxes(),1!==this.panel.yAxis.logBase&&"tsbuckets"!==this.panel.dataFormat){const e=this.panel.yAxis.logBase,t=this.yScale.domain(),a=this.logScaleTickValues(t,e);this.data.buckets=function(e,t){return(0,I.forEach)(e,(e=>{const a=e.buckets,s={bounds:{bottom:0,top:0},values:[],points:[],count:0},n=a[0]||s,r=a[t]||s,i={y:0,bounds:{bottom:t,top:r.bounds.top||t},values:[],points:[],count:0};i.points=n.points.concat(r.points),i.values=n.values.concat(r.values),i.count=i.values.length,0!==i.count&&(delete a[t],a[0]=i)})),e}(this.data.buckets,(0,I.min)(a))}const e=this.data.cards,t=this.data.cardStats,a=t.max,s=Math.max(t.min,0),n=(0,I.isNil)(this.panel.color.max)?a:this.panel.color.max,r=(0,I.isNil)(this.panel.color.min)?s:this.panel.color.min,i=(0,I.find)(this.ctrl.colorSchemes,{value:this.panel.color.colorScheme});this.colorScale=Fr(i,X.Vt.user.lightTheme,n,r),this.opacityScale=Ar(this.panel.color,n,r),this.setCardSize();let o=this.heatmap.selectAll(".heatmap-card").data(e);o.append("title"),o=o.enter().append("rect").attr("x",this.getCardX.bind(this)).attr("width",this.getCardWidth.bind(this)).attr("y",this.getCardY.bind(this)).attr("height",this.getCardHeight.bind(this)).attr("rx",this.cardRound).attr("ry",this.cardRound).attr("class","bordered heatmap-card").style("fill",this.getCardColor.bind(this)).style("stroke",this.getCardColor.bind(this)).style("stroke-width",0).style("opacity",this.getCardOpacity.bind(this));this.$heatmap.find(".heatmap-card").on("mouseenter",(e=>{this.tooltip.mouseOverBucket=!0,this.highlightCard(e)})).on("mouseleave",(e=>{this.tooltip.mouseOverBucket=!1,this.resetCardHighLight(e)}))}highlightCard(e){const t=Pa.select(e.target).style("fill"),a=Pa.color(t).darker(2),s=Pa.color(t).brighter(4),n=Pa.select(e.target);this.tooltip.originalFillColor=t,n.style("fill",a.toString()).style("stroke",s.toString()).style("stroke-width",1)}resetCardHighLight(e){Pa.select(e.target).style("fill",this.tooltip.originalFillColor).style("stroke",this.tooltip.originalFillColor).style("stroke-width",0)}setCardSize(){const e=Math.floor(this.xScale(this.data.xBucketSize)-this.xScale(0));let t=Math.floor(this.yScale(this.yScale.invert(0)-this.data.yBucketSize));if(1!==this.panel.yAxis.logBase){const e=this.panel.yAxis.logBase,a=this.data.yBucketSize||1;t=Math.floor((this.yScale(1)-this.yScale(e))/a)}const a=e-2*this.cardPadding;this.cardWidth=Math.max(a,1),this.cardHeight=t?t-2*this.cardPadding:0}getCardX(e){let t;return t=this.xScale(e.x)<0?this.yAxisWidth+this.cardPadding:this.xScale(e.x)+this.yAxisWidth+this.cardPadding,t}getCardWidth(e){let t=this.cardWidth;return this.xScale(e.x)<0?t=this.xScale(e.x)+this.cardWidth:this.xScale(e.x)+this.cardWidth>this.chartWidth&&(t=this.chartWidth-this.xScale(e.x)-this.cardPadding),t=t>0?Math.max(t,1):0,t}getCardY(e){let t=this.yScale(e.y)+this.chartTop-this.cardHeight-this.cardPadding;return 1!==this.panel.yAxis.logBase&&0===e.y?t=this.chartBottom-this.cardHeight-this.cardPadding:t<this.chartTop&&(t=this.chartTop),t}getCardHeight(e){const t=this.yScale(e.y)+this.chartTop-this.cardHeight-this.cardPadding;let a=this.cardHeight;return 1!==this.panel.yAxis.logBase&&0===e.y?this.cardHeight:(t<this.chartTop?a=this.yScale(e.y)-this.cardPadding:(this.yScale(e.y)>this.chartBottom||t+this.cardHeight>this.chartBottom)&&(a=this.chartBottom-t),a=Math.min(a,this.chartHeight),a=Math.max(a,1),a)}getCardColor(e){return"opacity"===this.panel.color.mode?(0,he.getColorForTheme)(this.panel.color.cardColor,Q.vc.theme):this.colorScale(e.count)}getCardOpacity(e){return"opacity"===this.panel.color.mode?this.opacityScale(e.count):1}getEventOffset(e){const t=this.$heatmap.offset();return{x:Math.floor(e.clientX-t.left),y:Math.floor(e.clientY-t.top)}}onMouseDown(e){const t=this.getEventOffset(e);this.selection.active=!0,this.selection.x1=t.x,this.mouseUpHandler=()=>{this.onMouseUp()},E()(document).one("mouseup",this.mouseUpHandler.bind(this))}onMouseUp(){E()(document).unbind("mouseup",this.mouseUpHandler.bind(this)),this.mouseUpHandler=null,this.selection.active=!1;const e=Math.abs(this.selection.x2-this.selection.x1);if(this.selection.x2>=0&&e>2){const e=this.xScale.invert(Math.min(this.selection.x1,this.selection.x2)-this.yAxisWidth),t=this.xScale.invert(Math.max(this.selection.x1,this.selection.x2)-this.yAxisWidth);this.ctrl.timeSrv.setTime({from:(0,he.toUtc)(e),to:(0,he.toUtc)(t)})}this.clearSelection()}onMouseLeave(){this.ctrl.dashboard.events.publish(new he.LegacyGraphHoverClearEvent),this.clearCrosshair()}onMouseMove(e){if(!this.heatmap)return;const t=this.getEventOffset(e);if(this.selection.active)this.clearCrosshair(),this.tooltip.destroy(),this.selection.x2=this.limitSelection(t.x),this.drawSelection(this.selection.x1,this.selection.x2);else{const a=this.getEventPos(e,t);this.drawCrosshair(t.x),this.tooltip.show(a,this.data),this.emitGraphHoverEvent(a)}}getEventPos(e,t){const a=this.xScale.invert(t.x-this.yAxisWidth).valueOf(),s=this.yScale.invert(t.y-this.chartTop);return{pageX:e.pageX,pageY:e.pageY,x:a,x1:a,y:s,y1:s,panelRelY:null,offset:t}}emitGraphHoverEvent(e){e.panelRelY=Math.max(e.offset.y/this.height,.001),this.hoverEvent.payload.pos=e,this.hoverEvent.payload.panel=this.panel,this.hoverEvent.payload.point.time=e.x,this.ctrl.dashboard.events.publish(this.hoverEvent)}limitSelection(e){return e=Math.max(e,this.yAxisWidth),e=Math.min(e,this.chartWidth+this.yAxisWidth)}drawSelection(e,t){if(this.heatmap){this.heatmap.selectAll(".heatmap-selection").remove();const a=Math.min(e,t),s=Math.abs(e-t);s>2&&this.heatmap.append("rect").attr("class","heatmap-selection").attr("x",a).attr("width",s).attr("y",this.chartTop).attr("height",this.chartHeight)}}clearSelection(){this.selection.x1=-1,this.selection.x2=-1,this.heatmap&&this.heatmap.selectAll(".heatmap-selection").remove()}drawCrosshair(e){if(this.heatmap){this.heatmap.selectAll(".heatmap-crosshair").remove();let t=e;t=Math.max(t,this.yAxisWidth),t=Math.min(t,this.chartWidth+this.yAxisWidth),this.heatmap.append("g").attr("class","heatmap-crosshair").attr("transform","translate("+t+",0)").append("line").attr("x1",1).attr("y1",this.chartTop).attr("x2",1).attr("y2",this.chartBottom).attr("stroke-width",1)}}drawSharedCrosshair(e){if(this.heatmap&&0!==this.ctrl.dashboard.graphTooltip){const t=this.xScale(e.x)+this.yAxisWidth;this.drawCrosshair(t)}}clearCrosshair(){this.heatmap&&this.heatmap.selectAll(".heatmap-crosshair").remove()}render(){if(this.data=this.ctrl.data,this.panel=this.ctrl.panel,this.timeRange=this.ctrl.range,this.setElementHeight()&&this.data){if((0,I.isEmpty)(this.data.buckets))return this.addHeatmapCanvas(),void this.addAxes();this.addHeatmap(),this.scope.yAxisWidth=this.yAxisWidth,this.scope.xAxisHeight=this.xAxisHeight,this.scope.chartHeight=this.chartHeight,this.scope.chartWidth=this.chartWidth,this.scope.chartTop=this.chartTop}}getPanelYAxisWidth(){return this.panel.yAxis.width?(0,I.isNaN)(this.panel.yAxis.width)?null:parseInt(this.panel.yAxis.width,10):null}}var li=a("./public/app/features/query/state/runRequest.ts");function ci(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const di={heatmap:{},cards:{cardPadding:null,cardRound:null},color:{mode:"spectrum",cardColor:"#b4ff00",colorScale:"sqrt",exponent:.5,colorScheme:"interpolateOranges"},legend:{show:!1},dataFormat:"timeseries",yBucketBound:"auto",reverseYBuckets:!1,xAxis:{show:!0},yAxis:{show:!0,format:"short",decimals:null,logBase:1,splitFactor:null,min:null,max:null},xBucketSize:null,xBucketNumber:null,yBucketSize:null,yBucketNumber:null,tooltip:{show:!0,showHistogram:!1},highlightCards:!0,hideZeroBuckets:!1},ui=["opacity","spectrum"],pi=["linear","sqrt"],hi=[{name:"Spectral",value:"interpolateSpectral",invert:"always"},{name:"RdYlGn",value:"interpolateRdYlGn",invert:"always"},{name:"Blues",value:"interpolateBlues",invert:"dark"},{name:"Greens",value:"interpolateGreens",invert:"dark"},{name:"Greys",value:"interpolateGreys",invert:"dark"},{name:"Oranges",value:"interpolateOranges",invert:"dark"},{name:"Purples",value:"interpolatePurples",invert:"dark"},{name:"Reds",value:"interpolateReds",invert:"dark"},{name:"Turbo",value:"interpolateTurbo",invert:"light"},{name:"Cividis",value:"interpolateCividis",invert:"light"},{name:"Viridis",value:"interpolateViridis",invert:"light"},{name:"Magma",value:"interpolateMagma",invert:"light"},{name:"Inferno",value:"interpolateInferno",invert:"light"},{name:"Plasma",value:"interpolatePlasma",invert:"light"},{name:"Warm",value:"interpolateWarm",invert:"light"},{name:"Cool",value:"interpolateCool",invert:"light"},{name:"Cubehelix",value:"interpolateCubehelixDefault",invert:"light"},{name:"BuGn",value:"interpolateBuGn",invert:"dark"},{name:"BuPu",value:"interpolateBuPu",invert:"dark"},{name:"GnBu",value:"interpolateGnBu",invert:"dark"},{name:"OrRd",value:"interpolateOrRd",invert:"dark"},{name:"PuBuGn",value:"interpolatePuBuGn",invert:"dark"},{name:"PuBu",value:"interpolatePuBu",invert:"dark"},{name:"PuRd",value:"interpolatePuRd",invert:"dark"},{name:"RdPu",value:"interpolateRdPu",invert:"dark"},{name:"YlGnBu",value:"interpolateYlGnBu",invert:"dark"},{name:"YlGn",value:"interpolateYlGn",invert:"dark"},{name:"YlOrBr",value:"interpolateYlOrBr",invert:"dark"},{name:"YlOrRd",value:"interpolateYlOrRd",invert:"dark"}],mi=["elasticsearch"];class gi extends M.MetricsPanelCtrl{constructor(e,t,a,s){super(e,t),ci(this,"opacityScales",[]),ci(this,"colorModes",[]),ci(this,"colorSchemes",[]),ci(this,"selectionActivated",void 0),ci(this,"unitFormats",void 0),ci(this,"data",void 0),ci(this,"series",[]),ci(this,"dataWarning",void 0),ci(this,"decimals",0),ci(this,"scaledDecimals",0),ci(this,"processor",void 0),this.selectionActivated=!1,(0,I.defaultsDeep)(this.panel,di),this.opacityScales=pi,this.colorModes=ui,this.colorSchemes=hi,this.useDataFrames=!0,this.processor=new gs({xaxis:{mode:"custom"},aliasColors:{}}),this.events.on(he.PanelEvents.render,this.onRender.bind(this)),this.events.on(he.PanelEvents.dataFramesReceived,this.onDataFramesReceived.bind(this)),this.events.on(he.PanelEvents.dataSnapshotLoad,this.onSnapshotLoad.bind(this)),this.events.on(he.PanelEvents.editModeInitialized,this.onInitEditMode.bind(this)),this.onCardColorChange=this.onCardColorChange.bind(this)}onInitEditMode(){this.addEditorTab("Axes",zr,2),this.addEditorTab("Display",Ur,3),this.unitFormats=F.Z.getUnitFormats()}zoomOut(e){vr.Z.publish(new ks.p8(2))}onRender(){"tsbuckets"===this.panel.dataFormat?this.convertHistogramToHeatmapData():this.convertTimeSeriesToHeatmapData()}convertTimeSeriesToHeatmapData(){if(!this.range||!this.series)return;let e,t,a,s;const n=this.panel.yAxis.logBase,r=this.panel.xBucketNumber||30,i=Math.floor((this.range.to.valueOf()-this.range.from.valueOf())/r);e=F.Z.intervalRegex.test(this.panel.xBucketSize)?he.rangeUtil.intervalToMs(this.panel.xBucketSize):isNaN(Number(this.panel.xBucketSize))||""===this.panel.xBucketSize||null===this.panel.xBucketSize?i:Number(this.panel.xBucketSize),s=this.parseSeries(this.series);const o=this.panel.yBucketNumber||10;1!==n?t=this.panel.yAxis.splitFactor:(t=s.max===s.min?s.max?s.max/10:1:(s.max-s.min)/o,t=this.panel.yBucketSize||t),a=function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const n={};for(const t of e){const e=t.datapoints,s=t.label;(0,I.forEach)(e,(e=>{const t=Yr(e[1],a);Gr(n,e,t,s)}))}return(0,I.forEach)(n,(e=>{e.buckets=1!==s?ei(e,t,s):Jr(e,t)})),n}(this.series,t,e,n),s.min||s.max||(s={min:-1,max:1,minLog:1},t=1);const{cards:l,cardStats:c}=Wr(a,this.panel.hideZeroBuckets);this.data={buckets:a,heatmapStats:s,xBucketSize:e,yBucketSize:t,cards:l,cardStats:c}}convertHistogramToHeatmapData(){if(!this.range||!this.series)return;const e=this.getPanelDataSourceType();let t,a,s,n;(0,I.includes)(mi,e)||this.series.sort(Hr),this.panel.reverseYBuckets&&this.series.reverse(),s=function(e){const t={};for(let a=0;a<e.length;a++){const s=e[a],n=a;if(isNaN(n))return t;for(const e of s.datapoints){const a=e[0],s=e[1];if(!(0,I.isNumber)(a))continue;let r=t[s];r||(r=t[s]={x:s,buckets:{}}),r.buckets[n]={y:n,count:a,bounds:{top:null,bottom:n},values:[],points:[]}}}return t}(this.series),n=(0,I.map)(this.series,"label");const r=this.panel.yBucketBound;"prometheus"===e&&"lower"!==r&&"middle"!==r||"upper"===r?n=[""].concat(n):n.push("");t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=1/0;if(0===e.length)return 0;if(1===e.length)return e[0];e=(0,I.sortBy)(e);for(let s=1;s<e.length;s++){const n=ai(e[s],e[s-1],t);a=n<a?n:a}return a}((0,I.map)((0,I.keys)(s),(e=>Number(e)))),a=1;const{cards:i,cardStats:o}=Wr(s,this.panel.hideZeroBuckets);this.data={buckets:s,xBucketSize:t,yBucketSize:1,tsBuckets:n,cards:i,cardStats:o}}getPanelDataSourceType(){return this.datasource&&this.datasource.meta&&this.datasource.meta.id?this.datasource.meta.id:"unknown"}onSnapshotLoad(e){this.onDataFramesReceived((0,li.F9)(e))}onDataFramesReceived(e){this.series=this.processor.getSeriesList({dataList:e,range:this.range}).map((e=>(e.color=void 0,e.flotpairs=e.getFlotPairs(this.panel.nullPointMode),e))),this.dataWarning=null;if(0===(0,I.reduce)(this.series,((e,t)=>e+t.datapoints.length),0))this.dataWarning={title:"No data points",tip:"No datapoints returned from data query"};else for(const e of this.series)if(e.isOutsideRange){this.dataWarning={title:"Data points outside time range",tip:"Can be caused by timezone mismatch or missing time filter in query"};break}this.render()}onDataError(){this.series=[],this.render()}onCardColorChange(e){this.panel.color.cardColor=e,this.render()}parseSeries(e){const t=(0,I.min)((0,I.map)(e,(e=>e.stats.min))),a=(0,I.min)((0,I.map)(e,(e=>e.stats.logmin)));return{max:(0,I.max)((0,I.map)(e,(e=>e.stats.max))),min:t,minLog:a}}parseHistogramSeries(e){const t=(0,I.map)(e,(e=>Number(e.alias))),a=(0,I.min)(t),s=(0,I.min)(t);return{max:(0,I.max)(t),min:a,minLog:s}}link(e,t,a,s){!function(e,t,a,s){new oi(e,t,a,s)}(e,t,a,s)}}gi.$inject=["$scope","$injector","templateSrv","timeSrv"],ci(gi,"templateUrl","module.html");var fi=a("./public/app/features/variables/adhoc/actions.ts");function bi(e,t){var a;const s=null!==(a=e.display)&&void 0!==a?a:(0,he.getDisplayProcessor)({field:e,theme:Q.vc.theme2}),n=t[0],r=(0,he.reduceField)({field:e,reducers:t})[n];return(0,he.formattedValueToString)(s(r))}var vi=a("./public/app/features/plugins/datasource_srv.ts");function xi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class yi extends q.Component{constructor(e){super(e),xi(this,"onColumnResize",((e,t)=>{const{fieldConfig:a}=this.props,{overrides:s}=a,n=he.FieldMatcherID.byName,r="custom.width",i=s.find((t=>t.matcher.id===n&&t.matcher.options===e));if(i){const e=i.properties.find((e=>e.id===r));e?e.value=t:i.properties.push({id:r,value:t})}else s.push({matcher:{id:n,options:e},properties:[{id:r,value:t}]});this.props.onFieldConfigChange(Object.assign({},a,{overrides:s}))})),xi(this,"onSortByChange",(e=>{this.props.onOptionsChange(Object.assign({},this.props.options,{sortBy:e}))})),xi(this,"onChangeTableSelection",(e=>{this.props.onOptionsChange(Object.assign({},this.props.options,{frameIndex:e.value||0})),this.forceUpdate()})),xi(this,"onCellFilterAdded",(e=>{var t;const{key:a,value:s,operator:n}=e,r=null===(t=(0,pn.h4)().getCurrent())||void 0===t?void 0:t.getPanelById(this.props.id);if(!r)return;const i=(0,vi.ak)().getInstanceSettings(r.datasource),o=i&&(0,he.getDataSourceRef)(i);o&&(0,js.WI)((0,fi.m2)({datasource:o,key:a,operator:n,value:s}))}))}renderTable(e,t,a){var s;const{options:n}=this.props,r=null!==(s=n.footer)&&void 0!==s&&s.show?function(e,t){return e.fields.map(((e,a)=>e.type===he.FieldType.number?null!=t&&t.fields&&t.fields.length>0?t.fields.find((t=>t===e.name))?bi(e,t.reducer):void 0:bi(e,(null==t?void 0:t.reducer)||[]):0===a&&t&&t.reducer.length>0?he.fieldReducers.get(t.reducer[0]).name:void 0))}(e,n.footer):void 0;return(0,xe.jsx)(fe.Table,{height:a,width:t,data:e,noHeader:!n.showHeader,showTypeIcons:n.showTypeIcons,resizable:!0,initialSortBy:n.sortBy,onSortByChange:this.onSortByChange,onColumnResize:this.onColumnResize,onCellFilterAdded:this.onCellFilterAdded,footerValues:r})}getCurrentFrameIndex(e,t){return t.frameIndex>0&&t.frameIndex<e.length?t.frameIndex:0}render(){var e;const{data:t,height:a,width:s,options:n}=this.props,r=t.series,i=null==r?void 0:r.length,o=null===(e=r[0])||void 0===e?void 0:e.fields.length;if(!i||!o)return(0,xe.jsx)("div",{className:wi.noData,children:"No data"});if(i>1){const e=Q.vc.theme.spacing.formInputHeight,i=16,o=this.getCurrentFrameIndex(r,n),l=r.map(((e,t)=>({label:(0,he.getFrameDisplayName)(e),value:t})));return(0,xe.jsxs)("div",{className:wi.wrapper,children:[this.renderTable(t.series[o],s,a-e+i),(0,xe.jsx)("div",{className:wi.selectWrapper,children:(0,xe.jsx)(fe.Select,{menuShouldPortal:!0,options:l,value:l[o],onChange:this.onChangeTableSelection})})]})}return this.renderTable(t.series[0],s,a)}}const wi={wrapper:be.css`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,noData:be.css`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
  `,selectWrapper:be.css`
    padding: 8px;
  `},ji=(Object.freeze([1,0]),!0),Ci={show:!1,reducer:[]},ki={displayMode:fe.TableCellDisplayMode.Auto,align:"auto"},Si={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},Ti={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},Oi={cell:"color-background",row:"color-background",value:"color-text"},_i=(e,t)=>[-1/0,...e].map(((e,a)=>({color:t[a],value:(0,I.isNumber)(e)?e:parseInt(e,10)}))),Ni=e=>{var t;const a={matcher:{id:/^\/.*\/$/.test(e.pattern)?he.FieldMatcherID.byRegexp:he.FieldMatcherID.byName,options:e.pattern},properties:[]};return e.alias&&a.properties.push({id:"displayName",value:e.alias}),e.unit&&a.properties.push({id:"unit",value:e.unit}),e.decimals&&a.properties.push({id:"decimals",value:e.decimals}),"date"===e.type&&a.properties.push({id:"unit",value:`time: ${e.dateFormat}`}),e.link&&a.properties.push({id:"links",value:[{title:(0,I.defaultTo)(e.linkTooltip,""),url:(0,I.defaultTo)(e.linkUrl,""),targetBlank:(0,I.defaultTo)(e.linkTargetBlank,!1)}]}),e.colorMode&&a.properties.push({id:"custom.displayMode",value:Oi[e.colorMode]}),e.align&&a.properties.push({id:"custom.align",value:"auto"===e.align?null:e.align}),null!==(t=e.thresholds)&&void 0!==t&&t.length&&a.properties.push({id:"thresholds",value:{mode:he.ThresholdsMode.Absolute,steps:_i(e.thresholds,e.colors)}}),a};const Ii=new he.PanelPlugin(yi).setPanelChangeHandler(((e,t,a)=>{if("table-old"===t&&a.angular){const t=a.angular,s=((e,t)=>{var a;const s=null!==(a=e.transformations)&&void 0!==a?a:[];if(Object.keys(Si).includes(t.transform)){const e={reducers:[]};"timeseries_aggregations"===t.transform&&(e.includeTimeField=!1,e.reducers=t.columns.map((e=>Ti[e.value]))),s.push({id:Si[t.transform],options:e})}return s})(e,t),n=(e=>{let t={custom:{}};if(e&&(t=(0,I.omitBy)({unit:e.unit,decimals:e.decimals,displayName:e.alias,custom:{align:"auto"===e.align?null:e.align,displayMode:Oi[e.colorMode]}},I.isNil),e.thresholds.length)){const a={mode:he.ThresholdsMode.Absolute,steps:_i(e.thresholds,e.colors)};t.thresholds=a}return t})(t.styles.find((e=>"/.*/"===e.pattern))),r=t.styles.filter((e=>"/.*/"!==e.pattern)).map(Ni);e.transformations=s,e.fieldConfig={defaults:n,overrides:r}}return{}})).setMigrationHandler((e=>(!e.pluginVersion&&e.columns&&console.log("Was angular table",e),e.options))).setNoPadding().useFieldConfig({useCustomConfig:e=>{e.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:ki.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:ki.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:ki.align}).addSelect({path:"displayMode",name:"Cell display mode",description:"Color text, background, show as gauge, etc",settings:{options:[{value:fe.TableCellDisplayMode.Auto,label:"Auto"},{value:fe.TableCellDisplayMode.ColorText,label:"Color text"},{value:fe.TableCellDisplayMode.ColorBackground,label:"Color background (gradient)"},{value:fe.TableCellDisplayMode.ColorBackgroundSolid,label:"Color background (solid)"},{value:fe.TableCellDisplayMode.GradientGauge,label:"Gradient gauge"},{value:fe.TableCellDisplayMode.LcdGauge,label:"LCD gauge"},{value:fe.TableCellDisplayMode.BasicGauge,label:"Basic gauge"},{value:fe.TableCellDisplayMode.JSONView,label:"JSON View"},{value:fe.TableCellDisplayMode.Image,label:"Image"}]},defaultValue:ki.displayMode}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:ki.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions((e=>{var t;e.addBooleanSwitch({path:"showHeader",name:"Show header",description:"To display table's header or not to display",defaultValue:ji}).addBooleanSwitch({path:"footer.show",name:"Show Footer",description:"To display table's footer or not to display",defaultValue:null===(t=Ci)||void 0===t?void 0:t.show}).addCustomEditor({id:"footer.reducer",path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:he.standardEditorsRegistry.get("stats-picker").editor,defaultValue:[he.ReducerID.sum],showIf:e=>{var t;return null===(t=e.footer)||void 0===t?void 0:t.show}}).addMultiSelect({path:"footer.fields",name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async e=>{const t=[];if(e&&e.data&&e.data.length>0){const a=e.data[0];for(const s of a.fields)if(s.type===he.FieldType.number){const n=(0,he.getFieldDisplayName)(s,a,e.data),r=s.name;t.push({value:r,label:n})}}return t}},defaultValue:"",showIf:e=>{var t;return null===(t=e.footer)||void 0===t?void 0:t.show}})})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const t=e.getListAppender({name:_t.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.fieldConfig.defaults.custom.minWidth=50}}});0===e.dataSummary.fieldCount?t.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):t.append({})}}),Pi={},Mi=e=>Array.isArray(e)?e.reduce(((e,t)=>t.datapoints?e.concat(t):e),[]):e.datapoints?[e]:[],Fi=e=>Array.isArray(e)?e.reduce(((e,t)=>t.columns?e.concat(t):e),[]):e.columns?[e]:[];function Ai(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Pi.timeseries_to_rows={description:"Time series to rows",getColumns:()=>[],transform:(e,t,a)=>{a.columns=[{text:"Time",type:"date"},{text:"Metric"},{text:"Value"}];const s=Mi(e);for(let e=0;e<s.length;e++){const t=s[e];for(let e=0;e<t.datapoints.length;e++){const s=t.datapoints[e];a.rows.push([s[1],t.target,s[0]])}}}},Pi.timeseries_to_columns={description:"Time series to columns",getColumns:()=>[],transform:(e,t,a)=>{a.columns.push({text:"Time",type:"date"});const s={},n=Mi(e);for(let e=0;e<n.length;e++){const t=n[e];a.columns.push({text:t.target});for(let a=0;a<t.datapoints.length;a++){const n=t.datapoints[a],r=n[1].toString();s[r]||(s[r]={time:n[1]}),s[r][e]=n[0]}}for(const e in s){const t=s[e],r=[t.time];for(let e=0;e<n.length;e++){const a=t[e];r.push(a)}a.rows.push(r)}}},Pi.timeseries_aggregations={description:"Time series aggregations",getColumns:()=>[{text:"Avg",value:"avg"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Total",value:"total"},{text:"Current",value:"current"},{text:"Count",value:"count"}],transform:(e,t,a)=>{let s,n;for(a.columns.push({text:"Metric"}),s=0;s<t.columns.length;s++)a.columns.push({text:t.columns[s].text});const r=Mi(e);for(s=0;s<r.length;s++){const e=new K.Z({datapoints:r[s].datapoints,alias:r[s].target});e.getFlotPairs("connected");const i=[e.alias];for(n=0;n<t.columns.length;n++)i.push(e.stats[t.columns[n].value]);a.rows.push(i)}}},Pi.annotations={description:"Annotations",getColumns:()=>[],transform:(e,t,a)=>{if(a.columns.push({text:"Time",type:"date"}),a.columns.push({text:"Title"}),a.columns.push({text:"Text"}),a.columns.push({text:"Tags"}),e&&e.annotations&&0!==e.annotations.length)for(let t=0;t<e.annotations.length;t++){const s=e.annotations[t];a.rows.push([s.time,s.title,s.text,s.tags])}}},Pi.table={description:"Table",getColumns:e=>{if(!e||0===e.length)return[];if(1===e.length)return[...e[0].columns];const t=Fi(e),a={};return t.reduce(((e,t)=>(t.columns.forEach((t=>{const{text:s}=t;void 0===a[s]&&(a[s]=e.length,e.push(t))})),e)),[])},transform:(e,t,a)=>{if(!e||0===e.length)return;const s=Fi(e),n=(0,I.findIndex)(s,(e=>"columns"in e&&"rows"in e));if(n<0)throw{message:`Result of query #${String.fromCharCode(65+n)} is not in table format, try using another transform.`};(0,Y.M)(a,...s)}},Pi.json={description:"JSON Data",getColumns:e=>{if(!e||0===e.length)return[];const t={};for(let a=0;a<e.length;a++){const s=e[a];if("docs"!==s.type)continue;const n=Math.min(s.datapoints.length,100);for(let e=0;e<n;e++){const a=s.datapoints[e],n=(0,ee.default)(a,{});for(const e in n)t[e]=!0}}return(0,I.map)(t,((e,t)=>({text:t,value:t})))},transform:(e,t,a)=>{let s,n,r;for(const s of t.columns){const t={text:s.text};e.length>0&&e[0].filterable&&(t.filterable=!0),a.columns.push(t)}for(0===a.columns.length&&a.columns.push({text:"JSON"}),s=0;s<e.length;s++){const i=e[s];for(n=0;n<i.datapoints.length;n++){const e=i.datapoints[n],s=[];if((0,I.isObject)(e)&&t.columns.length>0){const a=(0,ee.default)(e);for(r=0;r<t.columns.length;r++)s.push(a[t.columns[r].value])}else s.push(JSON.stringify(e));a.rows.push(s)}}}};class Di{constructor(e,t){Ai(this,"panel",void 0),Ai(this,"panelCtrl",void 0),Ai(this,"transformers",void 0),Ai(this,"fontSizes",void 0),Ai(this,"addColumnSegment",void 0),Ai(this,"getColumnNames",void 0),Ai(this,"canSetColumns",!1),Ai(this,"columnsHelpMessage",""),this.uiSegmentSrv=t,e.editor=this,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.transformers=Pi,this.fontSizes=["80%","90%","100%","110%","120%","130%","150%","160%","180%","200%","220%","250%"],this.addColumnSegment=t.newPlusButton(),this.updateTransformHints()}updateTransformHints(){switch(this.canSetColumns=!1,this.columnsHelpMessage="",this.panel.transform){case"timeseries_aggregations":case"json":this.canSetColumns=!0;break;case"table":this.columnsHelpMessage="Columns and their order are determined by the data query"}}getColumnOptions(){if(!this.panelCtrl.dataRaw)return Promise.resolve([]);const e=this.transformers[this.panel.transform].getColumns(this.panelCtrl.dataRaw),t=(0,I.map)(e,(e=>this.uiSegmentSrv.newSegment({value:e.text})));return Promise.resolve(t)}addColumn(){const e=Pi[this.panel.transform].getColumns(this.panelCtrl.dataRaw),t=(0,I.find)(e,{text:this.addColumnSegment.value});t&&(this.panel.columns.push(t),this.render());const a=this.uiSegmentSrv.newPlusButton();this.addColumnSegment.html=a.html,this.addColumnSegment.value=a.value}transformChanged(){this.panel.columns=[],"annotations"===this.panel.transform?this.panelCtrl.refresh():("timeseries_aggregations"===this.panel.transform&&this.panel.columns.push({text:"Avg",value:"avg"}),this.updateTransformHints(),this.render())}render(){this.panelCtrl.render()}removeColumn(e){this.panel.columns=(0,I.without)(this.panel.columns,e),this.panelCtrl.render()}}function $i(e){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/table-old/editor.html",controller:Di}}function Li(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Di.$inject=["$scope","uiSegmentSrv"];class Ri{constructor(e){Li(this,"panel",void 0),Li(this,"panelCtrl",void 0),Li(this,"colorModes",void 0),Li(this,"columnStyles",void 0),Li(this,"columnTypes",void 0),Li(this,"fontSizes",void 0),Li(this,"dateFormats",void 0),Li(this,"addColumnSegment",void 0),Li(this,"unitFormats",void 0),Li(this,"getColumnNames",void 0),Li(this,"activeStyleIndex",void 0),Li(this,"mappingTypes",void 0),Li(this,"alignTypes",void 0),e.editor=this,this.activeStyleIndex=0,this.panelCtrl=e.ctrl,this.panel=this.panelCtrl.panel,this.unitFormats=(0,he.getValueFormats)(),this.colorModes=[{text:"Disabled",value:null},{text:"Cell",value:"cell"},{text:"Value",value:"value"},{text:"Row",value:"row"}],this.columnTypes=[{text:"Number",value:"number"},{text:"String",value:"string"},{text:"Date",value:"date"},{text:"Hidden",value:"hidden"}],this.fontSizes=["80%","90%","100%","110%","120%","130%","150%","160%","180%","200%","220%","250%"],this.dateFormats=[{text:"YYYY-MM-DD HH:mm:ss",value:"YYYY-MM-DD HH:mm:ss"},{text:"YYYY-MM-DD HH:mm:ss.SSS",value:"YYYY-MM-DD HH:mm:ss.SSS"},{text:"MM/DD/YY h:mm:ss a",value:"MM/DD/YY h:mm:ss a"},{text:"MMMM D, YYYY LT",value:"MMMM D, YYYY LT"},{text:"YYYY-MM-DD",value:"YYYY-MM-DD"}],this.mappingTypes=[{text:"Value to text",value:1},{text:"Range to text",value:2}],this.alignTypes=Ri.alignTypesEnum,this.getColumnNames=()=>this.panelCtrl.table?(0,I.map)(this.panelCtrl.table.columns,(e=>e.text)):[],this.onColorChange=this.onColorChange.bind(this)}render(){this.panelCtrl.render()}setUnitFormat(e){return t=>{e.unit=t,this.panelCtrl.render()}}addColumnStyle(){const e=this.panel.styles,t=e.length;let a=t;if(t>0){"/.*/"===e[t-1].pattern&&(a=t-1)}e.splice(a,0,{unit:"short",type:"number",alias:"",decimals:2,colors:["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],colorMode:null,pattern:"",dateFormat:"YYYY-MM-DD HH:mm:ss",thresholds:[],mappingType:1,align:"auto"}),this.activeStyleIndex=a}removeColumnStyle(e){this.panel.styles=(0,I.without)(this.panel.styles,e)}invertColorOrder(e){const t=this.panel.styles[e].colors,a=t[0];t[0]=t[2],t[2]=a,this.panelCtrl.render()}onColorChange(e,t){return a=>{e.colors[t]=a,this.render()}}addValueMap(e){e.valueMaps||(e.valueMaps=[]),e.valueMaps.push({value:"",text:""}),this.panelCtrl.render()}removeValueMap(e,t){e.valueMaps.splice(t,1),this.panelCtrl.render()}addRangeMap(e){e.rangeMaps||(e.rangeMaps=[]),e.rangeMaps.push({from:"",to:"",text:""}),this.panelCtrl.render()}removeRangeMap(e,t){e.rangeMaps.splice(t,1),this.panelCtrl.render()}}function Ei(){return{restrict:"E",scope:!0,templateUrl:"public/app/plugins/panel/table-old/column_options.html",controller:Ri}}function zi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ri.$inject=["$scope"],Li(Ri,"alignTypesEnum",[{text:"auto",value:""},{text:"left",value:"left"},{text:"center",value:"center"},{text:"right",value:"right"}]);class Vi{constructor(e,t,a,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,jt.getTemplateSrv)(),r=arguments.length>5?arguments[5]:void 0;zi(this,"formatters",[]),zi(this,"colorState",void 0),this.panel=e,this.table=t,this.timeZone=a,this.sanitize=s,this.templateSrv=n,this.theme=r,this.initColumns()}setTable(e){this.table=e,this.initColumns()}initColumns(){this.formatters=[],this.colorState={};for(let e=0;e<this.table.columns.length;e++){const t=this.table.columns[e];t.title=t.text;for(let e=0;e<this.panel.styles.length;e++){const a=this.panel.styles[e],s=(0,he.stringStartsAsRegEx)(a.pattern)?a.pattern:(0,he.escapeStringForRegex)((0,he.unEscapeStringFromRegex)(a.pattern)),n=(0,he.stringToJsRegex)(s);if(t.text.match(n)){t.style=a,a.alias&&(t.title=he.textUtil.escapeHtml(t.text.replace(n,a.alias)));break}}this.formatters[e]=this.createColumnFormatter(t)}}getColorForValue(e,t){if(!t.thresholds||!t.colors)return null;for(let a=t.thresholds.length;a>0;a--)if(e>=t.thresholds[a-1])return(0,he.getColorForTheme)(t.colors[a],this.theme);return(0,he.getColorForTheme)((0,I.first)(t.colors),this.theme)}defaultCellFormatter(e,t){return null==e||void 0===e?"":((0,I.isArray)(e)&&(e=e.join(", ")),t&&t.sanitize?this.sanitize(e):(0,I.escape)(e))}createColumnFormatter(e){if(!e.style)return this.defaultCellFormatter;if("hidden"===e.style.type)return e=>{};if("date"===e.style.type)return t=>null==t?"-":((0,I.isArray)(t)&&(t=t[0]),(0,I.isString)(t)&&!isNaN(t)&&t.length>12&&(t=parseInt(t,10)),e.style.dateFormat?(0,he.dateTimeFormat)(t,{format:e.style.dateFormat,timeZone:this.timeZone}):(0,he.dateTimeFormatISO)(t,{timeZone:this.timeZone}));if("string"===e.style.type)return t=>{(0,I.isArray)(t)&&(t=t.join(", "));const a=e.style.mappingType||0;if(1===a&&e.style.valueMaps)for(let a=0;a<e.style.valueMaps.length;a++){const s=e.style.valueMaps[a];if(null!==t){if(!(0,I.isString)(t)&&Number(s.value)===Number(t)||s.value===t)return this.setColorState(t,e.style),this.defaultCellFormatter(s.text,e.style)}else if("null"===s.value)return s.text}if(2===a&&e.style.rangeMaps)for(let a=0;a<e.style.rangeMaps.length;a++){const s=e.style.rangeMaps[a];if(null!==t){if(Number(s.from)<=Number(t)&&Number(s.to)>=Number(t))return this.setColorState(t,e.style),this.defaultCellFormatter(s.text,e.style)}else if("null"===s.from&&"null"===s.to)return s.text}return null==t?"-":(this.setColorState(t,e.style),this.defaultCellFormatter(t,e.style))};if("number"===e.style.type){const t=(0,he.getValueFormat)(e.unit||e.style.unit);return a=>null==a?"-":isNaN(a)||(0,I.isArray)(a)?this.defaultCellFormatter(a,e.style):(this.setColorState(a,e.style),(0,he.formattedValueToString)(t(a,e.style.decimals,null)))}return t=>this.defaultCellFormatter(t,e.style)}setColorState(e,t){if(!t.colorMode)return;if(null==e||(0,I.isArray)(e))return;const a=Number(e);isNaN(a)||(this.colorState[t.colorMode]=this.getColorForValue(a,t))}renderRowVariables(e){const t={};let a;const s=this.table.rows[e];for(let e=0;e<s.length;e++)a=`__cell_${e}`,t[a]={value:s[e],text:s[e]?s[e].toString():""};return t}formatColumnValue(e,t){const a=this.formatters[e];return a?a(t):t}renderCell(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];a=this.formatColumnValue(e,a);const n=this.table.columns[e],r=[];let i="";const o=[];let l="";this.colorState.cell?(r.push("background-color:"+this.colorState.cell),o.push("table-panel-color-cell"),this.colorState.cell=null):this.colorState.value&&(r.push("color:"+this.colorState.value),this.colorState.value=null);let c="";if(s&&(c='<div class="table-panel-width-hack">'+this.table.columns[e].title+"</div>"),void 0===a?(r.push("display:none"),n.hidden=!0):n.hidden=!1,!0===n.hidden)return"";if(n.style&&n.style.preserveFormat&&o.push("table-panel-cell-pre"),n.style&&n.style.align){const e=(0,I.find)(Ri.alignTypesEnum,["text",n.style.align]);e&&e.value&&r.push(`text-align:${e.value}`)}if(r.length&&(i=' style="'+r.join(";")+'"'),n.style&&n.style.link){const e=this.renderRowVariables(t);e.__cell={value:a,text:a?a.toString():""};const s=this.templateSrv.replace(n.style.linkUrl,e,encodeURIComponent),r=he.textUtil.sanitizeUrl(s),l=he.textUtil.escapeHtml(this.templateSrv.replace(n.style.linkTooltip,e)),d=n.style.linkTargetBlank?"_blank":"";o.push("table-panel-cell-link"),c+=`<a href="${r}" target="${d}" data-link-tooltip data-original-title="${l}" data-placement="right"${i}>`,c+=`${a}`,c+="</a>"}else c+=a;return n.filterable&&(o.push("table-panel-cell-filterable"),c+=`<a class="table-panel-filter-link" data-link-tooltip data-original-title="Filter out value" data-placement="bottom"\n           data-row="${t}" data-column="${e}" data-operator="!=">`,c+='<i class="fa fa-search-minus"></i>',c+="</a>",c+=`<a class="table-panel-filter-link" data-link-tooltip data-original-title="Filter for value" data-placement="bottom"\n           data-row="${t}" data-column="${e}" data-operator="=">`,c+='<i class="fa fa-search-plus"></i>',c+="</a>"),o.length&&(l=' class="'+o.join(" ")+'"'),c="<td"+l+i+">"+c+"</td>",c}render(e){const t=this.panel.pageSize||100,a=e*t,s=Math.min(a+t,this.table.rows.length);let n="";for(let e=a;e<s;e++){const t=this.table.rows[e];let s="",r="";const i=[];let o="";for(let n=0;n<this.table.columns.length;n++)s+=this.renderCell(n,e,t[n],e===a);this.colorState.row&&(r=' style="background-color:'+this.colorState.row+'"',i.push("table-panel-color-row"),this.colorState.row=null),i.length&&(o=' class="'+i.join(" ")+'"'),n+="<tr "+o+r+">"+s+"</tr>"}return n}render_values(){const e=[],t=this.table.columns.filter((e=>!e.hidden));for(let t=0;t<this.table.rows.length;t++){const a=this.table.rows[t],s=[];for(let e=0;e<this.table.columns.length;e++)this.table.columns[e].hidden||s.push(this.formatColumnValue(e,a[e]));e.push(s)}return{columns:t,rows:e}}}function Bi(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ui extends M.MetricsPanelCtrl{constructor(e,t,a,s){super(e,t),Bi(this,"pageIndex",void 0),Bi(this,"dataRaw",void 0),Bi(this,"table",void 0),Bi(this,"renderer",void 0),Bi(this,"panelHasRowColorMode",void 0),Bi(this,"panelHasLinks",void 0),Bi(this,"panelDefaults",{targets:[{}],transform:"timeseries_to_columns",pageSize:null,showHeader:!0,styles:[{type:"date",pattern:"Time",alias:"Time",dateFormat:"YYYY-MM-DD HH:mm:ss",align:"auto"},{unit:"short",type:"number",alias:"",decimals:2,colors:["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],colorMode:null,pattern:"/.*/",thresholds:[],align:"right"}],columns:[],fontSize:"100%",sort:{col:0,desc:!0}}),this.annotationsSrv=a,this.$sanitize=s,this.pageIndex=0,void 0===this.panel.styles&&(this.panel.styles=this.panel.columns,this.panel.columns=this.panel.fields,delete this.panel.columns,delete this.panel.fields),(0,I.defaults)(this.panel,this.panelDefaults),this.panelHasRowColorMode=Boolean(this.panel.styles.find((e=>"row"===e.colorMode))),this.panelHasLinks=Boolean(this.panel.styles.find((e=>e.link))),this.events.on(he.PanelEvents.dataReceived,this.onDataReceived.bind(this)),this.events.on(he.PanelEvents.dataSnapshotLoad,this.onDataReceived.bind(this)),this.events.on(he.PanelEvents.editModeInitialized,this.onInitEditMode.bind(this))}onInitEditMode(){this.addEditorTab("Options",$i,2),this.addEditorTab("Column Styles",Ei,3)}migrateToPanel(e){this.onPluginTypeChange(Q.ZP.panels[e])}issueQueries(e){return this.pageIndex=0,"annotations"===this.panel.transform?this.annotationsSrv.getAnnotations({dashboard:this.dashboard,panel:this.panel,range:this.range}).then((e=>(this.loading=!1,this.dataRaw=e,this.pageIndex=0,this.render(),{data:this.dataRaw}))):super.issueQueries(e)}onDataReceived(e){this.dataRaw=e,this.pageIndex=0,this.dataRaw&&this.dataRaw.length&&((0,he.isTableData)(this.dataRaw[0])?this.panel.transform="table":"docs"===this.dataRaw[0].type?this.panel.transform="json":"table"!==this.panel.transform&&"json"!==this.panel.transform||(this.panel.transform="timeseries_to_rows")),this.render()}render(){return this.table=function(e,t){const a=new Y.Z;if(!e||0===e.length)return a;const s=Pi[t.transform];if(!s)throw{message:"Transformer "+t.transform+" not found"};return s.transform(e,t,a),a}(this.dataRaw,this.panel),this.table.sort(this.panel.sort),this.renderer=new Vi(this.panel,this.table,this.dashboard.getTimezone(),this.$sanitize,this.templateSrv,Q.ZP.theme),super.render(this.table)}toggleColumnSort(e,t){this.table.columns[this.panel.sort.col]&&(this.table.columns[this.panel.sort.col].sort=!1),this.panel.sort.col===t?this.panel.sort.desc?this.panel.sort.desc=!1:this.panel.sort.col=null:(this.panel.sort.col=t,this.panel.sort.desc=!0),this.render()}link(e,t,a,s){let n;const r=s.panel;let i=0;function o(){let e=s.height;return i>1&&(e-=26),e-31+"px"}function l(){const e=t.parents(".panel-content"),a=t.find(".table-panel-scroll"),l=t.find("tbody"),c=t.find(".table-panel-footer");t.css({"font-size":r.fontSize}),e.addClass("table-panel-content"),function(e){s.renderer.setTable(n),e.empty(),e.html(s.renderer.render(s.pageIndex))}(l),function(e){e.empty();const t=r.pageSize||100;if(i=Math.ceil(n.rows.length/t),1===i)return;const a=Math.max(s.pageIndex-3,0),o=Math.min(i,a+9),l=E()("<ul></ul>");for(let e=a;e<o;e++){const t=e===s.pageIndex?"active":"",a=E()('<li><a class="table-panel-page-link pointer '+t+'">'+(e+1)+"</a></li>");l.append(a)}e.append(l)}(c),a.css({"max-height":o()})}t.tooltip({selector:"[data-link-tooltip]"}),t.on("click",".table-panel-page-link",(function(e){const t=E()(e.currentTarget);s.pageIndex=parseInt(t.text(),10)-1,l()})),t.on("click",".table-panel-filter-link",(function(e){const t=E()(e.currentTarget).data(),a={datasource:r.datasource,key:n.columns[t.column].text,value:n.rows[t.row][t.column],operator:t.operator};(0,js.WI)((0,fi.m2)(a))}));const c=e.$on("$destroy",(()=>{t.off("click",".table-panel-page-link"),t.off("click",".table-panel-filter-link"),c()}));s.events.on(he.PanelEvents.render,(e=>{n=e||n,n&&l(),s.renderingCompleted()}))}}Ui.$inject=["$scope","$injector","annotationsSrv","$sanitize"],Bi(Ui,"templateUrl","module.html");const Hi=new he.PanelPlugin(null);Hi.angularPanelCtrl=Ui,Hi.setNoPadding();var qi=a("./public/app/plugins/panel/stat/module.tsx"),Wi=a("./public/app/core/store.ts");const Gi=(0,fe.stylesFactory)(((e,t)=>{const a="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",s=t?a:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",n=t?a:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",r=e.isDark?s:n;return`\n      background-color: ${e.colors.bg2};\n      margin-right: ${e.spacing.xl};\n      border: 1px solid ${e.colors.border1};\n      border-bottom-left-radius: ${e.border.radius.md};\n      border-bottom-right-radius: ${e.border.radius.md};\n      position: relative;\n      max-height: 230px;\n\n      @media only screen and (max-width: ${e.breakpoints.xxl}) {\n        margin-right: ${e.spacing.md};\n      }\n      &::before {\n        display: block;\n        content: ' ';\n        position: absolute;\n        left: 0;\n        right: 0;\n        height: 2px;\n        top: 0;\n        background-image: ${r};\n      }\n`})),Zi=(0,fe.stylesFactory)(((e,t)=>be.css`
    color: ${t?e.palette.blue95:e.colors.textWeak};

    @media only screen and (max-width: ${e.breakpoints.sm}) {
      display: none;
    }
  `)),Qi=be.css`
  padding: 16px;
`,Ki=e=>{let{card:t}=e;const a=(0,fe.useTheme)(),s=Ji(a,t.done);return(0,xe.jsx)("a",{className:s.card,onClick:e=>Yi(e,t),children:(0,xe.jsxs)("div",{className:Qi,children:[(0,xe.jsx)("div",{className:s.type,children:t.type}),(0,xe.jsx)("div",{className:s.heading,children:t.done?"complete":t.heading}),(0,xe.jsx)("h4",{className:s.cardTitle,children:t.title}),(0,xe.jsx)("div",{className:s.info,children:t.info}),(0,xe.jsx)(fe.Icon,{className:Zi(a,t.done),name:t.icon,size:"xxl"})]})})},Yi=(e,t)=>{e.preventDefault();Wi.Z.get(t.key)||Wi.Z.set(t.key,!0),window.open(`${t.href}?utm_source=grafana_gettingstarted`,"_blank")},Ji=(0,fe.stylesFactory)(((e,t)=>({card:be.css`
      ${Gi(e,t)}
      width: 460px;
      min-width: 460px;

      @media only screen and (max-width: ${e.breakpoints.xl}) {
        min-width: 368px;
      }

      @media only screen and (max-width: ${e.breakpoints.lg}) {
        min-width: 272px;
      }
    `,type:be.css`
      color: ${e.colors.textBlue};
      text-transform: uppercase;
    `,heading:be.css`
      text-transform: uppercase;
      color: ${e.colors.textBlue};
      margin-bottom: ${e.spacing.sm};
    `,cardTitle:be.css`
      margin-bottom: ${e.spacing.md};
    `,info:be.css`
      margin-bottom: ${e.spacing.md};
    `,status:be.css`
      display: flex;
      justify-content: flex-end;
    `})));var Xi;const eo=e=>{let{card:t}=e;const a=(0,fe.useTheme)(),s=to(a,t.done);return(0,xe.jsxs)("div",{className:s.card,children:[(0,xe.jsx)("div",{className:Qi,children:(0,xe.jsxs)("a",{href:`${t.href}?utm_source=grafana_gettingstarted`,className:s.url,children:[(0,xe.jsx)("div",{className:s.heading,children:t.done?"complete":t.heading}),(0,xe.jsx)("h4",{className:s.title,children:t.title}),(0,xe.jsx)("div",{children:(0,xe.jsx)(fe.Icon,{className:Zi(a,t.done),name:t.icon,size:"xxl"})})]})}),(0,xe.jsxs)("a",{href:`${t.learnHref}?utm_source=grafana_gettingstarted`,className:s.learnUrl,target:"_blank",rel:"noreferrer",children:["Learn how in the docs ",Xi||(Xi=(0,xe.jsx)(fe.Icon,{name:"external-link-alt"}))]})]})},to=(0,fe.stylesFactory)(((e,t)=>({card:be.css`
      ${Gi(e,t)}

      min-width: 230px;

      @media only screen and (max-width: ${e.breakpoints.md}) {
        min-width: 192px;
      }
    `,heading:be.css`
      text-transform: uppercase;
      color: ${t?e.palette.blue95:"#FFB357"};
      margin-bottom: ${e.spacing.md};
    `,title:be.css`
      margin-bottom: ${e.spacing.md};
    `,url:be.css`
      display: inline-block;
    `,learnUrl:be.css`
      border-top: 1px solid ${e.colors.border1};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `}))),ao=e=>{let{step:t}=e;const a=(0,fe.useTheme)(),s=so(a);return(0,xe.jsxs)("div",{className:s.setup,children:[(0,xe.jsxs)("div",{className:s.info,children:[(0,xe.jsx)("h2",{className:s.title,children:t.title}),(0,xe.jsx)("p",{children:t.info})]}),(0,xe.jsx)("div",{className:s.cards,children:t.cards.map(((e,t)=>{const a=`${e.title}-${t}`;return"tutorial"===e.type?(0,xe.jsx)(Ki,{card:e},a):(0,xe.jsx)(eo,{card:e},a)}))})]})},so=(0,fe.stylesFactory)((e=>({setup:be.css`
      display: flex;
      width: 95%;
    `,info:be.css`
      width: 172px;
      margin-right: 5%;

      @media only screen and (max-width: ${e.breakpoints.xxl}) {
        margin-right: ${e.spacing.xl};
      }
      @media only screen and (max-width: ${e.breakpoints.sm}) {
        display: none;
      }
    `,title:be.css`
      color: ${e.palette.blue95};
    `,cards:be.css`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      @media only screen and (max-width: ${e.breakpoints.xxl}) {
        justify-content: flex-start;
      }
    `}))),no="Grafana fundamentals",ro="getting.started.",io=`${ro}${no.replace(" ","-").trim().toLowerCase()}`,oo=`${ro}${"Create users and teams".replace(" ","-").trim().toLowerCase()}`;var lo,co,uo;function po(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ho extends q.PureComponent{constructor(){super(...arguments),po(this,"state",{checksDone:!1,currentStep:0,steps:[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:no,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the “Data source” and “Dashboards” steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(Wi.Z.get(io)),key:io,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise((e=>{e((0,vi.ak)().getMetricSources().filter((e=>!0!==e.meta.builtIn)).length>0)})),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,de.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard – it is, after all, a fully customizable dashboard – and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:oo,check:()=>Promise.resolve(Wi.Z.get(oo)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const e=await(0,de.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(e.length>0)},done:!1}]}]}),po(this,"onForwardClick",(()=>{this.setState((e=>({currentStep:e.currentStep+1})))})),po(this,"onPreviousClick",(()=>{this.setState((e=>({currentStep:e.currentStep-1})))})),po(this,"dismiss",(()=>{const{id:e}=this.props,t=(0,pn.h4)().getCurrent(),a=null==t?void 0:t.getPanelById(e);null==t||t.removePanel(a),de.ae.request({method:"PUT",url:"/api/user/helpflags/1",showSuccessAlert:!1}).then((e=>{X.Vt.user.helpFlags1=e.helpFlags1}))}))}async componentDidMount(){const{steps:e}=this.state,t=e.map((async e=>{const t=e.cards.map((e=>e.check().then((t=>Object.assign({},e,{done:t}))))),a=await Promise.all(t);return Object.assign({},e,{done:a.every((e=>e.done)),cards:a})})),a=await Promise.all(t);this.setState({currentStep:a[0].done?1:0,steps:a,checksDone:!0})}render(){const{checksDone:e,currentStep:t,steps:a}=this.state,s=mo(),n=a[t];return(0,xe.jsx)("div",{className:s.container,children:e?(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)("div",{className:s.dismiss,children:(0,xe.jsx)("div",{onClick:this.dismiss,children:"Remove this panel"})}),t===a.length-1&&(0,xe.jsx)("div",{className:(0,be.cx)(s.backForwardButtons,s.previous),onClick:this.onPreviousClick,children:co||(co=(0,xe.jsx)(fe.Button,{"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}))}),(0,xe.jsx)("div",{className:s.content,children:(0,xe.jsx)(ao,{step:n})}),t<a.length-1&&(0,xe.jsx)("div",{className:(0,be.cx)(s.backForwardButtons,s.forward),onClick:this.onForwardClick,children:uo||(uo=(0,xe.jsx)(fe.Button,{"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"}))})]}):(0,xe.jsxs)("div",{className:s.loading,children:[(0,xe.jsx)("div",{className:s.loadingText,children:"Checking completed setup steps"}),lo||(lo=(0,xe.jsx)(fe.Spinner,{size:24,inline:!0}))]})})}}const mo=(0,fe.stylesFactory)((()=>{const{theme:e}=jt.config;return{container:be.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${e.type}.svg) no-repeat;
      background-size: cover;
      padding: ${e.spacing.xl} ${e.spacing.md} 0;
    `,content:be.css`
      label: content;
      display: flex;
      justify-content: center;

      @media only screen and (max-width: ${e.breakpoints.xxl}) {
        margin-left: ${e.spacing.lg};
        justify-content: flex-start;
      }
    `,header:be.css`
      label: header;
      margin-bottom: ${e.spacing.lg};
      display: flex;
      flex-direction: column;

      @media only screen and (min-width: ${e.breakpoints.lg}) {
        flex-direction: row;
      }
    `,headerLogo:be.css`
      height: 58px;
      padding-right: ${e.spacing.md};
      display: none;

      @media only screen and (min-width: ${e.breakpoints.md}) {
        display: block;
      }
    `,heading:be.css`
      label: heading;
      margin-right: ${e.spacing.lg};
      margin-bottom: ${e.spacing.lg};
      flex-grow: 1;
      display: flex;

      @media only screen and (min-width: ${e.breakpoints.md}) {
        margin-bottom: 0;
      }
    `,backForwardButtons:be.css`
      position: absolute;
      bottom: 50%;
      top: 50%;
      height: 50px;
    `,previous:be.css`
      left: 10px;

      @media only screen and (max-width: ${e.breakpoints.md}) {
        left: 0;
      }
    `,forward:be.css`
      right: 10px;

      @media only screen and (max-width: ${e.breakpoints.md}) {
        right: 0;
      }
    `,dismiss:be.css`
      display: flex;
      justify-content: flex-end;
      cursor: pointer;
      text-decoration: underline;
      margin-right: ${e.spacing.md};
      margin-bottom: ${e.spacing.sm};
    `,loading:be.css`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:be.css`
      margin-right: ${e.spacing.sm};
    `}})),go=new he.PanelPlugin(ho).setNoPadding();var fo=a("./public/app/plugins/panel/gauge/module.tsx");let bo,vo,xo;!function(e){e.Pie="pie",e.Donut="donut"}(bo||(bo={})),function(e){e.Value="value",e.Percent="percent"}(vo||(vo={})),function(e){e.Name="name",e.Value="value",e.Percent="percent"}(xo||(xo={}));var yo=a("./.yarn/__virtual__/@visx-tooltip-virtual-dade0632ee/3/opt/drone/yarncache/@visx-tooltip-npm-2.8.0-21b336754a-0c55f1b6b1.zip/node_modules/@visx/tooltip/esm/hooks/useTooltip.js"),wo=a("./.yarn/__virtual__/@visx-tooltip-virtual-dade0632ee/3/opt/drone/yarncache/@visx-tooltip-npm-2.8.0-21b336754a-0c55f1b6b1.zip/node_modules/@visx/tooltip/esm/hooks/useTooltipInPortal.js"),jo=a("./.yarn/__virtual__/@visx-shape-virtual-1ad6f9e64b/3/opt/drone/yarncache/@visx-shape-npm-2.4.0-85507a13d7-ab68e5db95.zip/node_modules/@visx/shape/lib/shapes/Pie.js"),Co=a("./.yarn/__virtual__/@visx-gradient-virtual-f53a85d935/3/opt/drone/yarncache/@visx-gradient-npm-2.1.0-b707b452db-fe5a121c3e.zip/node_modules/@visx/gradient/esm/gradients/RadialGradient.js"),ko=a("../../opt/drone/yarncache/@visx-event-npm-2.6.0-de72f3fd20-a3155bab7d.zip/node_modules/@visx/event/esm/localPoint.js"),So=a("./.yarn/__virtual__/@visx-group-virtual-9c9cece06b/3/opt/drone/yarncache/@visx-group-npm-2.1.0-878a9e3e41-949567b6de.zip/node_modules/@visx/group/esm/Group.js");let To=0;function Oo(e){const t=(0,q.useRef)(null);return null===t.current&&(t.current=e+To++),t.current.toString()}function _o(e){var t,a;return!(null!==(t=e.field.custom)&&void 0!==t&&null!==(a=t.hideFrom)&&void 0!==a&&a.viz||isNaN(e.display.numeric))}function No(e,t){return t.display.numeric+e}const Io=e=>{let{fieldDisplayValues:t,pieType:a,width:s,height:n,highlightedTitle:r,displayLabels:i=[],tooltipOptions:o}=e;const l=(0,fe.useTheme2)(),c=Oo("PieChart"),d=(0,fe.useStyles2)(Eo),u=(0,yo.Z)(),{containerRef:p,TooltipInPortal:h}=(0,wo.Z)({detectBounds:!0,scroll:!0}),m=t.filter(_o),g=e=>`${c}-${_a()(e).toHex()}`,f=e=>`url(#${g(e)})`,b=i.length>0,v="none"!==o.mode&&u.tooltipOpen,x=m.reduce(No,0),y=function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16;const n=Math.min(t,e),r=(n-2*s)/2,i=a===bo.Pie?r:Math.max(r/3,20),o=r-i;return{position:(n-2*s)/2+s,size:n,outerRadius:r,innerRadius:o,gradientFromOffset:1-(r-o)/r}}(s,n,a),w=[...new Set(m.map((e=>{var t;return null!==(t=e.display.color)&&void 0!==t?t:he.FALLBACK_COLOR})))];return(0,xe.jsxs)("div",{className:d.container,children:[(0,xe.jsx)("svg",{width:y.size,height:y.size,ref:p,children:(0,xe.jsxs)(So.Z,{top:y.position,left:y.position,children:[w.map((e=>(0,xe.jsx)(Co.Z,{id:g(e),from:Ao(e,l),to:Do(e,l),fromOffset:y.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:y.outerRadius},e))),(0,xe.jsx)(jo.Z,{data:m,pieValue:e=>e.display.numeric,outerRadius:y.outerRadius,innerRadius:y.innerRadius,cornerRadius:3,padAngle:.005,children:e=>(0,xe.jsxs)(xe.Fragment,{children:[e.arcs.map((t=>{var a;const s=null!==(a=t.data.display.color)&&void 0!==a?a:he.FALLBACK_COLOR,n=Lo(r,t);return t.data.hasLinks&&t.data.getLinks?(0,xe.jsx)(fe.DataLinksContextMenu,{config:t.data.field,links:t.data.getLinks,children:a=>(0,xe.jsx)(Po,{tooltip:u,highlightState:n,arc:t,pie:e,fill:f(s),openMenu:a.openMenu,tooltipOptions:o})},t.index):(0,xe.jsx)(Po,{highlightState:n,tooltip:u,arc:t,pie:e,fill:f(s),tooltipOptions:o},t.index)})),b&&e.arcs.map((e=>{const t=Lo(r,e);return(0,xe.jsx)(Mo,{arc:e,highlightState:t,outerRadius:y.outerRadius,innerRadius:y.innerRadius,displayLabels:i,total:x,color:l.colors.text.primary},e.index)}))]})})]})}),v?(0,xe.jsx)(h,{top:u.tooltipTop,className:d.tooltipPortal,left:u.tooltipLeft,unstyled:!0,applyPositionStyle:!0,children:(0,xe.jsx)(fe.SeriesTable,{series:u.tooltipData})},Math.random()):null]})};function Po(e){let{arc:t,pie:a,highlightState:s,openMenu:n,fill:r,tooltip:i,tooltipOptions:o}=e;const l=(0,fe.useTheme2)(),c=(0,fe.useStyles2)(Eo),{eventBus:d}=(0,fe.usePanelContext)(),u=(0,q.useCallback)((e=>{null==d||d.publish({type:he.DataHoverClearEvent.type,payload:{raw:e,x:0,y:0,dataId:t.data.display.title}}),i.hideTooltip()}),[d,t,i]),p=(0,q.useCallback)((e=>{null==d||d.publish({type:he.DataHoverEvent.type,payload:{raw:e,x:0,y:0,dataId:t.data.display.title}});const s=(0,ko.Z)(e.target.ownerSVGElement,e);i.showTooltip({tooltipLeft:s.x,tooltipTop:s.y,tooltipData:Fo(a,t,o)})}),[d,t,i,a,o]),h=Ro(s,c);return(0,xe.jsx)("g",{className:h,onMouseMove:"none"!==o.mode?p:void 0,onMouseOut:u,onClick:n,"aria-label":lt.wl.components.Panels.Visualization.PieChart.svgSlice,children:(0,xe.jsx)("path",{d:a.path(Object.assign({},t)),fill:r,stroke:l.colors.background.primary,strokeWidth:1})},t.data.display.title)}function Mo(e){var t;let{arc:a,outerRadius:s,innerRadius:n,displayLabels:r,total:i,color:o,highlightState:l}=e;const c=(0,fe.useStyles2)(Eo),d=0===n?s/6:n,[u,p]=function(e,t,a){const s=(t+a)/2,n=(+e.startAngle+ +e.endAngle)/2-Math.PI/2;return[Math.cos(n)*s,Math.sin(n)*s]}(a,s,d);if(!(a.endAngle-a.startAngle>=.3))return null;let h=r.includes(xo.Name)?Math.min(Math.max(s/150*14,12),30):Math.min(Math.max(s/100*14,12),36);return(0,xe.jsx)("g",{className:Ro(l,c),children:(0,xe.jsxs)("text",{fill:o,x:u,y:p,dy:".33em",fontSize:h,fontWeight:500,textAnchor:"middle",pointerEvents:"none",children:[r.includes(xo.Name)&&(0,xe.jsx)("tspan",{x:u,dy:"1.2em",children:a.data.display.title}),r.includes(xo.Value)&&(0,xe.jsx)("tspan",{x:u,dy:"1.2em",children:(0,he.formattedValueToString)(a.data.display)}),r.includes(xo.Percent)&&(0,xe.jsx)("tspan",{x:u,dy:"1.2em",children:(a.data.display.numeric/i*100).toFixed(null!==(t=a.data.field.decimals)&&void 0!==t?t:0)+"%"})]})})}function Fo(e,t,a){var s;return"multi"===a.mode?e.arcs.map((e=>{var a;return{color:null!==(a=e.data.display.color)&&void 0!==a?a:he.FALLBACK_COLOR,label:e.data.display.title,value:(0,he.formattedValueToString)(e.data.display),isActive:e.index===t.index}})):[{color:null!==(s=t.data.display.color)&&void 0!==s?s:he.FALLBACK_COLOR,label:t.data.display.title,value:(0,he.formattedValueToString)(t.data.display)}]}function Ao(e,t){return _a()(e).darken(20*(t.isDark?1:-.7)).spin(4).toRgbString()}function Do(e,t){return _a()(e).darken(10*(t.isDark?1:-.7)).spin(-4).toRgbString()}var $o;function Lo(e,t){return e?e===t.data.display.title?$o.Highlighted:$o.Deemphasized:$o.Normal}function Ro(e,t){switch(e){case $o.Highlighted:return t.svgArg.highlighted;case $o.Deemphasized:return t.svgArg.deemphasized;case $o.Normal:default:return t.svgArg.normal}}!function(e){e[e.Highlighted=0]="Highlighted",e[e.Deemphasized=1]="Deemphasized",e[e.Normal=2]="Normal"}($o||($o={}));const Eo=e=>({container:be.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:be.css`
        transition: all 200ms ease-in-out;
      `,highlighted:be.css`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:be.css`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:be.css`
      ${(0,Ee.getTooltipContainerStyles)(e)}
    `});var zo;const Vo={displayMode:Te.jK.List,placement:"right",calcs:[],values:[vo.Percent]};function Bo(e,t){var a;const s=null!==(a=e.options.legend)&&void 0!==a?a:Vo;if(s.displayMode===Te.jK.Hidden)return;const n=t.filter(_o).reduce(No,0),r=t.sort(((e,t)=>isNaN(e.display.numeric)?1:isNaN(t.display.numeric)?-1:t.display.numeric-e.display.numeric)).map(((t,a)=>{var r,i;const o=t.field.custom.hideFrom.viz,l=t.display;return{label:null!==(r=l.title)&&void 0!==r?r:"",color:null!==(i=l.color)&&void 0!==i?i:he.FALLBACK_COLOR,yAxis:1,disabled:o,getItemKey:()=>{var e;return(null!==(e=l.title)&&void 0!==e?e:"")+a},getDisplayValues:()=>{var a;const r=null!==(a=s.values)&&void 0!==a?a:[];let i=[];if(r.includes(vo.Value)&&i.push({numeric:l.numeric,text:(0,he.formattedValueToString)(l),title:"Value"}),r.includes(vo.Percent)){var c,d;const a=o?0:l.numeric/n,s=100*a;i.push({numeric:a,percent:s,text:o||isNaN(a)?null!==(c=e.fieldConfig.defaults.noValue)&&void 0!==c?c:"-":s.toFixed(null!==(d=t.field.decimals)&&void 0!==d?d:0)+"%",title:r.length>1?"Percent":""})}return i}}}));return(0,xe.jsx)(fe.VizLegend,{items:r,seriesVisibilityChangeBehavior:fe.SeriesVisibilityChangeBehavior.Hide,placement:s.placement,displayMode:s.displayMode})}var Uo=a("./public/app/plugins/panel/stat/types.ts");const Ho=new he.PanelPlugin((function(e){const{data:t,timeZone:a,fieldConfig:s,replaceVariables:n,width:r,height:i,options:o}=e,l=(0,fe.useTheme2)(),c=function(){const[e,t]=(0,q.useState)(),{eventBus:a}=(0,fe.usePanelContext)();return(0,q.useEffect)((()=>{const e=e=>{t(e.payload.dataId)},s=e=>{t(void 0)},n=new Sr.w0;return n.add(a.getStream(he.DataHoverEvent).subscribe({next:e})),n.add(a.getStream(he.DataHoverClearEvent).subscribe({next:s})),()=>{n.unsubscribe()}}),[t,a]),e}(),d=(0,he.getFieldDisplayValues)({fieldConfig:s,reduceOptions:o.reduceOptions,data:t.series,theme:l,replaceVariables:n,timeZone:a});return function(e){return e.some((e=>{var t;return null===(t=e.view)||void 0===t?void 0:t.dataFrame.length}))}(d)?(0,xe.jsx)(fe.VizLayout,{width:r,height:i,legend:Bo(e,d),children:(e,t)=>(0,xe.jsx)(Io,{width:e,height:t,highlightedTitle:c,fieldDisplayValues:d,tooltipOptions:o.tooltip,pieType:o.pieType,displayLabels:o.displayLabels})}):zo||(zo=(0,xe.jsx)("div",{className:"panel-empty",children:(0,xe.jsx)("p",{children:"No data"})}))})).setPanelChangeHandler(((e,t,a)=>{if("grafana-piechart-panel"===t&&a.angular){const t=a.angular,s=[];let n=e.options;if(t.aliasColors)for(const e of Object.keys(t.aliasColors)){const a=t.aliasColors[e];a&&s.push({matcher:{id:he.FieldMatcherID.byName,options:e},properties:[{id:he.FieldConfigProperty.Color,value:{mode:he.FieldColorModeId.Fixed,fixedColor:a}}]})}if(e.fieldConfig={overrides:s,defaults:{unit:t.format,decimals:t.decimals?t.decimals:0}},n.legend={placement:"right",values:[],displayMode:Te.jK.Table,calcs:[]},t.valueName)switch(n.reduceOptions={calcs:[]},t.valueName){case"current":n.reduceOptions.calcs=["lastNotNull"];break;case"min":n.reduceOptions.calcs=["min"];break;case"max":n.reduceOptions.calcs=["max"];break;case"avg":n.reduceOptions.calcs=["mean"];break;case"total":n.reduceOptions.calcs=["sum"]}switch(t.legendType){case"Under graph":n.legend.placement="bottom";break;case"Right side":n.legend.placement="right"}switch(t.pieType){case"pie":n.pieType=bo.Pie;break;case"donut":n.pieType=bo.Donut}return t.legend&&(t.legend.show||(n.legend.displayMode=Te.jK.Hidden),t.legend.values&&n.legend.values.push(vo.Value),t.legend.percentage&&n.legend.values.push(vo.Percent),t.legend.percentage||t.legend.values||(n.legend.displayMode=Te.jK.Hidden)),"On graph"===t.legendType&&(n.legend.displayMode=Te.jK.Hidden,n.displayLabels=[xo.Name],t.legend.values&&n.displayLabels.push(xo.Value),t.legend.percentage&&n.displayLabels.push(xo.Percent)),n}return{}})).useFieldConfig({disableStandardOptions:[he.FieldConfigProperty.Thresholds],standardOptions:{[he.FieldConfigProperty.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:he.FieldColorModeId.PaletteClassic}}},useCustomConfig:e=>{fe.commonOptionsBuilder.addHideFrom(e)}}).setPanelOptions((e=>{(0,Uo.j)(e),e.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:bo.Pie,label:"Pie"},{value:bo.Donut,label:"Donut"}]},defaultValue:bo.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:xo.Percent,label:"Percent"},{value:xo.Name,label:"Name"},{value:xo.Value,label:"Value"}]}}),fe.commonOptionsBuilder.addTooltipOptions(e),fe.commonOptionsBuilder.addLegendOptions(e,!1),e.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:vo.Percent,label:"Percent"},{value:vo.Value,label:"Value"}]},showIf:e=>e.legend.displayMode!==Te.jK.Hidden})})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const t=e.getListAppender({name:_t.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[xo.Percent],legend:{placement:"right",values:[]}},cardOptions:{previewModifier:e=>{e.options.legend.displayMode=Te.jK.Hidden}}}),{dataSummary:a}=e;if(a.hasNumberField){if(a.hasStringField&&1===a.frameCount){if(a.rowCountTotal>30||a.rowCountTotal<2)return;return t.append({name:_t.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),void t.append({name:_t.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:bo.Donut}})}a.numberFieldCount>30||a.numberFieldCount<2||(t.append({name:_t.y.PieChart}),t.append({name:_t.y.PieChartDonut,options:{pieType:bo.Donut}}))}}});var qo=a("./public/app/plugins/panel/bargauge/BarGaugePanel.tsx");const Wo=[{value:fe.BarGaugeDisplayMode.Gradient,label:"Gradient"},{value:fe.BarGaugeDisplayMode.Lcd,label:"Retro LCD"},{value:fe.BarGaugeDisplayMode.Basic,label:"Basic"}];const Go=new he.PanelPlugin(qo.M).useFieldConfig().setPanelOptions((e=>{(0,Uo.j)(e),(0,Uo.h)(e),fe.commonOptionsBuilder.addTextSizeOptions(e),e.addRadio({path:"displayMode",name:"Display mode",settings:{options:Wo},defaultValue:"gradient"}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:!0,showIf:e=>"lcd"!==e.displayMode})})).setPanelChangeHandler(fe.sharedSingleStatPanelChangedHandler).setMigrationHandler((e=>(0,fe.sharedSingleStatMigrationHandler)(e))).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData||!t.hasNumberField)return;const a=e.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});t.numberFieldCount>50||(t.hasStringField&&1===t.frameCount&&t.rowCountTotal<30?(a.append({name:_t.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:fe.BarGaugeDisplayMode.Basic,orientation:he.VizOrientation.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),a.append({name:_t.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:fe.BarGaugeDisplayMode.Lcd,orientation:he.VizOrientation.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(a.append({name:_t.y.BarGaugeBasic,options:{displayMode:fe.BarGaugeDisplayMode.Basic,orientation:he.VizOrientation.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),a.append({name:_t.y.BarGaugeLCD,options:{displayMode:fe.BarGaugeDisplayMode.Lcd,orientation:he.VizOrientation.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}),Zo={stacking:Te.o0.None,orientation:he.VizOrientation.Auto,xTickLabelRotation:0,xTickLabelSpacing:0,showValue:Te.Jp.Auto,groupWidth:.7,barWidth:.97,barRadius:0},Qo={lineWidth:1,fillOpacity:80,gradientMode:Te.FI.None,axisSoftMin:0};var Ko=a("./public/app/plugins/panel/barchart/distribute.ts"),Yo=a("./packages/grafana-ui/src/components/uPlot/config/UPlotAxisBuilder.ts");const Jo=Ko.Gj,Xo=Ko.Gj;function el(e,t){var a;const{xOri:s,xDir:n,rawValue:r,getColor:i,formatValue:o,fillOpacity:l=1,showValue:c,xSpacing:d=0}=e,u=s===Te.wN.Horizontal,p=!Boolean(null===(a=e.text)||void 0===a?void 0:a.valueSize),h=e.stacking!==Te.o0.None,m=e.stacking===Te.o0.Percent;let g,f,{groupWidth:b,barWidth:v,barRadius:x=0}=e;h&&([b,v]=[v,b]);let y=[],w=[],j=[],C=1/0,k=1/0,S=null!=i,T=S?{fill:{unit:3,values:(e,t)=>w[t].fill},stroke:{unit:3,values:(e,t)=>w[t].stroke}}:{},O=Ks.Z.paths.bars({radius:x,disp:Object.assign({x0:{unit:2,values:(e,t)=>y[t].offs},size:{unit:2,values:(e,t)=>y[t].size}},T),each:(e,t,a,s,n,r,i)=>{s-=e.bbox.left,n-=e.bbox.top;let o=e.data[t][a];u?(C=Math.min(C,o<0?e.bbox.height-(n+i):n),k=r):(C=i,k=Math.min(k,o<0?s:e.bbox.width-(s+r)));let l={x:s,y:n,w:r,h:i,sidx:t,didx:a};g.add(l),j.push(l)}});const _=u?.1:.15,N=u?5:10;let I=null;return{cursor:{x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(e,t)=>{if(1===t){f=null;let t=e.cursor.left*devicePixelRatio,a=e.cursor.top*devicePixelRatio;g.get(t,a,1,1,(e=>{(0,Zs.P)(t,a,e.x,e.y,e.x+e.w,e.y+e.h)&&(f=e)}))}return f&&t===f.sidx?f.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(e,t)=>{let a=f&&t===f.sidx;return{left:a?f.x/devicePixelRatio:-10,top:a?f.y/devicePixelRatio:-10,width:a?f.w/devicePixelRatio:0,height:a?f.h/devicePixelRatio:0}}}},xRange:(e,t,a)=>{t=0,a=Math.max(1,e.data[0].length-1);let s=0;(0,Ko.Qm)(e.data[0].length,b,Jo,0,((e,t,a)=>{s=t+a/2}));let n=a-t;if(.5===s)t-=n;else{let e=(1/(1-2*s)*n-n)/2;t-=e,a+=e}return[t,a]},xValues:(t,a,s,n,r)=>{if(e.xTimeAuto){let e=t.scales.x,i=e.min,o=e.max;e.min=t.data[0][0],e.max=t.data[0][t.data[0].length-1];let l=(0,Yo.mr)(t,a,s,n,r);return e.min=i,e.max=o,l}return a.map((e=>o(0,e)))},xSplits:e=>{const t=u?e.bbox.width:e.bbox.height,a=n*(u?1:-1);let s=e.data[0].length,r=s-1,i=0;if(0!==d){let e=t/devicePixelRatio,a=Math.abs(Math.floor(e/d));i=s<a?0:Math.ceil(s/a)}let o=[];return e.data[0].forEach(((e,t)=>{0!==i&&(d>0?t:r-t)%i>0||o.push(t)})),1===a?o:o.reverse()},barsBuilder:O,init:e=>{e.over.style.overflow="hidden",e.root.querySelectorAll(".u-cursor-pt").forEach((e=>{e.style.borderRadius="0"}))},drawClear:e=>{if(g=g||new Zs.l(0,0,e.bbox.width,e.bbox.height),g.clear(),e.series.forEach((e=>{e._paths=null})),y=[null].concat(h?((e,t)=>{let a=Array.from({length:t},(()=>({offs:Array(e).fill(0),size:Array(e).fill(0)})));return(0,Ko.Qm)(e,b,Jo,null,((e,s,n)=>{(0,Ko.Qm)(t,v,Xo,null,((t,r,i)=>{a[t].offs[e]=s,a[t].size[e]=n}))})),a})(e.data[0].length,e.data.length-1):((e,t)=>{let a=Array.from({length:t},(()=>({offs:Array(e).fill(0),size:Array(e).fill(0)})));return(0,Ko.Qm)(e,b,Jo,null,((e,s,n)=>{(0,Ko.Qm)(t,v,Xo,null,((t,r,i)=>{a[t].offs[e]=s+n*r,a[t].size[e]=n*i}))})),a})(e.data[0].length,e.data.length-1)),S){w=[null];for(let t=1;t<e.data.length;t++){let a=e.data[t].map(((e,a)=>null!=e?i(t,a,e):null));w.push({fill:l<1?a.map((e=>null!=e?(0,Qs.alpha)(e,l):null)):a,stroke:a})}}j.length=0,C=k=1/0},draw:a=>{var s,n;if(c===Te.Jp.Never)return;let i=Array(j.length),l=N;j.forEach(((e,t)=>{i[t]=o(e.sidx,r(e.sidx,e.didx)/(m?I[e.sidx][e.didx]:1)),l=Math.min(l,Math.round(_*(u?e.w:e.h)))}));let d=null!==(s=null===(n=e.text)||void 0===n?void 0:n.valueSize)&&void 0!==s?s:30;if(p)for(let e=0;e<j.length;e++)if(d=Math.round(Math.min(d,30,(0,fe.calculateFontSize)(i[e],k*(u?.65:1)-(u?0:l),C*(u?1:.65)-(u?l:0),1))),d<8&&c!==Te.Jp.Always)return;a.ctx.save(),a.ctx.fillStyle=t.colors.text.primary,a.ctx.font=`${d}px ${t.typography.fontFamily}`;let h,g,f=u?0:-Math.round(.1*d);j.forEach(((e,t)=>{let s=r(e.sidx,e.didx),n=i[t];if(null!=s){let t=u?"center":s<0?"right":"left",r=u?s<0?"top":"alphabetic":"middle";t!==h&&(a.ctx.textAlign=h=t),r!==g&&(a.ctx.textBaseline=g=r),a.ctx.fillText(n,a.bbox.left+(u?e.x+e.w/2:s<0?e.x-l:e.x+e.w+l),a.bbox.top+(u?s<0?e.y+e.h+l:e.y-l:e.y+e.h/2-f))}})),a.ctx.restore()},interpolateTooltip:(e,t,a,s)=>{f?(e(f.sidx),t(f.didx),a()):a(!0)},prepData:function(t){return I=null,(0,Ke.k6)(t,(e=>{let{totals:t}=e;I=t}),e.legend)}}}const tl=e=>{var t,a,s,n,r;let{frame:i,theme:o,orientation:l,showValue:c,groupWidth:d,barWidth:u,barRadius:p=0,stacking:h,text:m,rawValue:g,getColor:f,fillOpacity:b,allFrames:v,xTickLabelRotation:x,xTickLabelMaxLength:y,xTickLabelSpacing:w=0,legend:j}=e;const C=new fe.UPlotConfigBuilder,k=function(e){return e===he.VizOrientation.Vertical?{xOri:Te.wN.Horizontal,xDir:Te.bQ.Right,yOri:Te.wN.Vertical,yDir:Te.bQ.Up}:{xOri:Te.wN.Vertical,xDir:Te.bQ.Down,yOri:Te.wN.Horizontal,yDir:Te.bQ.Right}}(l),S=(e,t)=>al((0,he.formattedValueToString)(i.fields[e].display(t)),y);2===i.fields.length&&(d=u,u=1);const T=el({xOri:k.xOri,xDir:k.xDir,groupWidth:d,barWidth:u,barRadius:p,stacking:h,rawValue:g,getColor:f,fillOpacity:b,formatValue:S,text:m,showValue:c,legend:j,xSpacing:w,xTimeAuto:(null===(t=i.fields[0])||void 0===t?void 0:t.type)===he.FieldType.time&&!(null!==(a=i.fields[0].config.unit)&&void 0!==a&&a.startsWith("time:"))},o);C.setCursor(T.cursor),C.addHook("init",T.init),C.addHook("drawClear",T.drawClear),C.addHook("draw",T.draw),C.setTooltipInterpolator(T.interpolateTooltip),k.xOri===Te.wN.Horizontal&&0!==x&&C.setPadding(function(e,t,a){var s;const n=e.fields[0].values,r=fe.UPLOT_AXIS_FONT_SIZE,i=null!==(s=e.fields[0].display)&&void 0!==s?s:e=>e;let o=0;for(let e=0;e<n.length;e++){let t=(0,fe.measureText)(al((0,he.formattedValueToString)(i(n.get(e))),a),r);o=t.width>o?t.width:o}const l=t>0?Math.cos(t*Math.PI/180)*(0,fe.measureText)(al((0,he.formattedValueToString)(i(n.get(n.length-1))),a),r).width:0,c=t<0?Math.cos(-1*t*Math.PI/180)*(0,fe.measureText)(al((0,he.formattedValueToString)(i(n.get(0))),a),r).width:0,d=Math.sin((t>=0?t:-1*t)*Math.PI/180)*o;return[0,l,d,c]}(i,x,y)),C.setPrepData(T.prepData),C.addScale({scaleKey:"x",isTime:!1,range:T.xRange,distribution:Te.wf.Ordinal,orientation:k.xOri,direction:k.xDir});const O=(null===(s=i.fields[0].config.custom)||void 0===s?void 0:s.axisPlacement)!==Te.LB.Hidden?k.xOri===Te.wN.Horizontal?Te.LB.Bottom:Te.LB.Left:Te.LB.Hidden,_=(null===(n=i.fields[0].config.custom)||void 0===n?void 0:n.axisPlacement)!==Te.LB.Hidden;C.addAxis({scaleKey:"x",isTime:!1,placement:O,label:null===(r=i.fields[0].config.custom)||void 0===r?void 0:r.axisLabel,splits:T.xSplits,values:T.xValues,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:-1*x,theme:o,show:_});let N=0;const I=nl(j),P=new Map;for(let e=1;e<i.fields.length;e++){var M,F,A;const t=i.fields[e];N++;const a=Object.assign({},Qo,t.config.custom),s=t.config.unit||fe.FIXED_UNIT,n=(0,he.getFieldColorModeForField)(t),r=(0,he.getFieldSeriesColor)(t,o).color;if(C.addSeries({scaleKey:s,pxAlign:!0,lineWidth:a.lineWidth,lineColor:r,fillOpacity:a.fillOpacity,theme:o,colorMode:n,pathBuilder:T.barsBuilder,show:!(null!==(M=a.hideFrom)&&void 0!==M&&M.viz),gradientMode:a.gradientMode,thresholds:t.config.thresholds,hardMin:t.config.min,hardMax:t.config.max,softMin:a.axisSoftMin,softMax:a.axisSoftMax,dataFrameFieldIndex:{fieldIndex:I?e:v[0].fields.findIndex((e=>{var t;return e.type===he.FieldType.number&&(null===(t=e.state)||void 0===t?void 0:t.seriesIndex)===N-1})),frameIndex:0}}),C.addScale({scaleKey:s,min:t.config.min,max:t.config.max,softMin:a.axisSoftMin,softMax:a.axisSoftMax,orientation:k.yOri,direction:k.yDir,distribution:null===(F=a.scaleDistribution)||void 0===F?void 0:F.type,log:null===(A=a.scaleDistribution)||void 0===A?void 0:A.log}),a.axisPlacement!==Te.LB.Hidden){let e=a.axisPlacement;e&&e!==Te.LB.Auto||(e=Te.LB.Left),1===k.xOri&&(e===Te.LB.Left&&(e=Te.LB.Bottom),e===Te.LB.Right&&(e=Te.LB.Top)),C.addAxis({scaleKey:s,label:a.axisLabel,size:a.axisWidth,placement:e,formatValue:e=>(0,he.formattedValueToString)(t.display(e)),theme:o,grid:{show:a.axisGridShow}})}(0,Ke.oP)(t,P,N)}if(0!==P.size)for(const[e,t]of P.entries()){const e=(0,Ke.J4)({ids:t,legend:j,frame:i});for(let t=e.length-1;t>0;t--)C.addBand({series:[e[t],e[t-1]]})}return C};function al(e,t){return e.length>t?e.substring(0,t).concat("..."):e}function sl(e,t,a){if(null==e||!e.length)return{warn:"No data in response"};const s=1===e.length?e[0]:(0,he.outerJoinDataFrames)({frames:e,enforceSort:!1});if(!s)return{warn:"Unable to join data"};let n,r,i,o;if(a.colorByField&&(n=(0,Xt.PI)(s,a.colorByField),!n))return{warn:"Color field not found"};if(a.xField&&(r=(0,Xt.PI)(s,a.xField),!r))return{warn:"Configured x field not found"};let l=[];for(const e of s.fields)if(e!==r)switch(e.type){case he.FieldType.string:i||(i=e);break;case he.FieldType.time:o||(o=e);break;case he.FieldType.number:{const s=Object.assign({},e,{state:Object.assign({},e.state,{seriesIndex:l.length}),config:Object.assign({},e.config,{custom:Object.assign({},e.config.custom,{stacking:{group:"_",mode:a.stacking}})}),values:new he.ArrayVector(e.values.toArray().map((e=>Number.isFinite(e)||null==e?e:null)))});a.stacking===Te.o0.Percent&&(s.config.unit="percentunit",s.display=(0,he.getDisplayProcessor)({field:s,theme:t})),l.push(s)}}let c=r;if(c||(c=i||o),!c)return{warn:"Bar charts requires a string or time field"};if(!l.length)return{warn:"No numeric fields found"};if(n&&l.length>1){const e=l.find((e=>e!==n));e&&(l=[e])}if(nl(a.legend)){var d;const e=a.legend.sortBy.toLowerCase(),t=null!==(d=a.legend.calcs)&&void 0!==d?d:[e];l=(0,I.orderBy)(l,(a=>(0,he.reduceField)({field:a,reducers:t})[e]),a.legend.sortDesc?"desc":"asc")}return l.unshift(c),{aligned:s,colorByField:n,viz:[{length:c.values.length,fields:l}]}}const nl=e=>Boolean((null==e?void 0:e.sortBy)&&null!==e.sortDesc);var rl=a("./public/app/plugins/panel/geomap/components/DataHoverView.tsx"),il=a("./public/app/core/components/CloseButton/CloseButton.tsx"),ol=a("./packages/grafana-ui/src/components/uPlot/plugins/TooltipPlugin.tsx");const ll=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(e,t)=>{var a,s;return(null===(a=t.text)||void 0===a?void 0:a.valueSize)===(null===(s=e.text)||void 0===s?void 0:s.valueSize)}],cl=e=>({closeButtonSpacer:be.css`
    margin-bottom: 15px;
  `});const dl=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],ul=e=>{var t;let a=null!==(t=e.value)&&void 0!==t?t:0;const s=a<0;s&&(a*=-1);let n=dl[0];for(const e of dl)if(n=e,a<=n.value)break;return(0,xe.jsxs)(fe.HorizontalGroup,{children:[(0,xe.jsx)(fe.RadioButtonGroup,{value:n.value,options:dl,onChange:t=>{e.onChange(t*(s?-1:1))}}),0!==a&&(0,xe.jsx)(fe.Tooltip,{content:"Require space from the right side",placement:"top",children:(0,xe.jsx)("div",{children:(0,xe.jsx)(fe.Checkbox,{value:s,onChange:()=>{e.onChange(-1*e.value)},label:"RTL"})})})]})},pl=new he.PanelPlugin((e=>{var t,a;let{data:s,options:n,width:r,height:i,timeZone:o,id:l}=e;const c=(0,fe.useTheme2)(),d=(0,fe.useStyles2)(cl),{eventBus:u}=(0,fe.usePanelContext)(),p=(0,q.useRef)(void 0),h=(0,q.useRef)(!1),[m,g]=(0,q.useState)(void 0),[f,b]=(0,q.useState)(null),[v,x]=(0,q.useState)(null),[y,w]=(0,q.useState)(null),[j,C]=(0,q.useState)(!1),k=()=>{h.current=!1,b(null),C(!1)},S=()=>{h.current=!h.current,C(h.current)},T=(0,q.useRef)(),O=(0,q.useMemo)((()=>sl(null==s?void 0:s.series,c,n)),[s,c,n]),_=(0,q.useRef)(1e4);(0,q.useMemo)((()=>{_.current++}),[n]);const N=(0,q.useMemo)((()=>{var e;const t=O.viz[0],a=T.current;return t&&a&&(0,he.compareDataFrameStructures)(t,a,!0)||_.current++,T.current=t,(null!==(e=s.structureRev)&&void 0!==e?e:0)+_.current}),[O,s.structureRev]),I=(0,q.useMemo)((()=>n.orientation&&n.orientation!==he.VizOrientation.Auto?n.orientation:r<i?he.VizOrientation.Horizontal:he.VizOrientation.Vertical),[r,i,n.orientation]),P=(0,q.useMemo)((()=>{if(n.xTickLabelMaxLength)return n.xTickLabelMaxLength;{const e=n.xTickLabelRotation,t=(0,fe.measureText)("M",fe.UPLOT_AXIS_FONT_SIZE).width;return i/2/(Math.sin((e>=0?e:-1*e)*Math.PI/180)*t)-3}}),[i,n.xTickLabelRotation,n.xTickLabelMaxLength]);if(null===(t=O.viz[0])||void 0===t||!t.fields.length)return(0,xe.jsx)(jt.PanelDataErrorView,{panelId:l,data:s,message:O.warn,needsNumberField:!0});const M=(e,t,s)=>{const r=null==t?null:e.fields[t];if(r){const a=(0,he.getFieldDisplayName)(r,e);t=O.aligned.fields.findIndex((e=>a===(0,he.getFieldDisplayName)(e,O.aligned)))}return(0,xe.jsxs)(xe.Fragment,{children:[j&&(0,xe.jsxs)(xe.Fragment,{children:[a||(a=(0,xe.jsx)(il.P,{onClick:k})),(0,xe.jsx)("div",{className:d.closeButtonSpacer})]}),(0,xe.jsx)(rl.H,{data:O.aligned,rowIndex:s,columnIndex:t,sortOrder:n.tooltip.sort})]})},F=(e,t)=>T.current.fields[e].values.get(t);let A,D=1;if(O.colorByField){var $;const e=O.colorByField,t=e.display;D=(null!==($=e.config.custom.fillOpacity)&&void 0!==$?$:100)/100,A=(a,s)=>t(e.values.get(s)).color}return(0,xe.jsx)(fe.GraphNG,{theme:c,frames:O.viz,prepConfig:(e,t,a)=>{const{barWidth:s,barRadius:r=0,showValue:i,groupWidth:l,stacking:d,legend:p,tooltip:h,text:m,xTickLabelRotation:g,xTickLabelSpacing:f}=n;return tl({frame:e,getTimeRange:a,theme:c,timeZone:o,eventBus:u,orientation:I,barWidth:s,barRadius:r,showValue:i,groupWidth:l,xTickLabelRotation:g,xTickLabelMaxLength:P,xTickLabelSpacing:f,stacking:d,legend:p,tooltip:h,text:m,rawValue:F,getColor:A,fillOpacity:D,allFrames:O.viz})},propsToDiff:ll,preparePlotFrame:e=>e[0],renderLegend:e=>{const{legend:t}=n;if(!e||t.displayMode===Te.jK.Hidden)return null;if(O.colorByField){const e=(0,Pt.$m)([O.colorByField],c);if(null!=e&&e.length)return(0,xe.jsx)(fe.VizLayout.Legend,{placement:t.placement,children:(0,xe.jsx)(fe.VizLegend,{placement:t.placement,items:e,displayMode:t.displayMode})})}return(0,xe.jsx)(fe.PlotLegend,Object.assign({data:O.viz,config:e,maxHeight:"35%",maxWidth:"60%"},n.legend))},legend:n.legend,timeZone:o,timeRange:{from:1,to:1},structureRev:N,width:r,height:i,children:e=>(p.current!==e&&(p.current=(e=>{let t,{config:a,onUPlotClick:s,setFocusedSeriesIdx:n,setFocusedPointIdx:r,setCoords:i,setHover:o,isToolTipOpen:l}=e;a.addHook("init",(e=>{var t;null===(t=e.root.parentElement)||void 0===t||t.addEventListener("click",s),e.over.addEventListener("mouseleave",(()=>{l.current||i(null)}))})),a.addHook("syncRect",((e,a)=>{t=a}));const c=a.getTooltipInterpolator();return c&&a.addHook("setCursor",(e=>{c(n,r,(a=>{if(a&&!l.current)return void i(null);if(!t)return;const{x:s,y:n}=(0,ol._)(e,t);void 0===s||void 0===n||l.current||i({x:s,y:n})}),e)})),a.addHook("setLegend",(e=>{if(l.current||r(e.legend.idx),null!=e.cursor.idxs)for(let a=0;a<e.cursor.idxs.length;a++){const s=e.cursor.idxs[a];if(null!=s){const a={xIndex:s,yIndex:0,pageX:t.left+e.cursor.left,pageY:t.top+e.cursor.top};return void(l.current&&a||o(a))}}})),a.addHook("setSeries",((e,t)=>{l.current||n(t)})),a})({config:e,onUPlotClick:S,setFocusedSeriesIdx:x,setFocusedPointIdx:w,setCoords:b,setHover:g,isToolTipOpen:h})),(0,xe.jsx)(fe.Portal,{children:m&&f&&(0,xe.jsx)(fe.VizTooltipContainer,{position:{x:f.x,y:f.y},offset:{x:10,y:10},allowPointerEvents:h.current,children:M(O.aligned,v,y)})}))})})).useFieldConfig({standardOptions:{[he.FieldConfigProperty.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:he.FieldColorModeId.PaletteClassic}}},useCustomConfig:e=>{const t=Qo;e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:t.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:t.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:fe.graphFieldOptions.fillGradient[0].value,settings:{options:fe.graphFieldOptions.fillGradient}}),fe.commonOptionsBuilder.addAxisConfig(e,t,!1),fe.commonOptionsBuilder.addHideFrom(e)}}).setPanelOptions(((e,t)=>{var a,s;const n=sl(t.data,jt.config.theme2,null!==(a=t.options)&&void 0!==a?a:{});let r="First string or time field";const i=n.viz?n.viz[0]:void 0;if(null!=i&&null!==(s=i.fields)&&void 0!==s&&s.length){const e=i.fields[0];r+=` (${(0,he.getFieldDisplayName)(e,i)})`}e.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:r}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:he.VizOrientation.Auto,label:"Auto"},{value:he.VizOrientation.Horizontal,label:"Horizontal"},{value:he.VizOrientation.Vertical,label:"Vertical"}]},defaultValue:Zo.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate bar labels",defaultValue:Zo.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90°","-45":"-45°",0:"0°",45:"45°",90:"90°"},included:!1},showIf:e=>e.orientation===he.VizOrientation.Auto||e.orientation===he.VizOrientation.Vertical}).addNumberInput({path:"xTickLabelMaxLength",name:"Bar label max length",description:"Bar labels will be truncated to the length provided",settings:{placeholder:"None",min:0}}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"Bar labels minimum spacing",defaultValue:Zo.xTickLabelSpacing,editor:ul}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Te.Jp.Auto,label:"Auto"},{value:Te.Jp.Always,label:"Always"},{value:Te.Jp.Never,label:"Never"}]},defaultValue:Zo.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:fe.graphFieldOptions.stacking},defaultValue:Zo.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Zo.groupWidth,settings:{min:0,max:1,step:.01},showIf:(e,t)=>(!e.stacking||e.stacking===Te.o0.None)&&1!==function(e){let t=0;if(e)for(const a of e)for(const e of a.fields)e.type===he.FieldType.number&&t++;return t}(t)}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Zo.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Zo.barRadius,settings:{min:0,max:.5,step:.05}}),e.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),fe.commonOptionsBuilder.addTooltipOptions(e),fe.commonOptionsBuilder.addLegendOptions(e),fe.commonOptionsBuilder.addTextSizeOptions(e,!1)})).setSuggestionsSupplier(new class{getListWithDefaults(e){return e.getListAppender({name:_t.y.BarChart,pluginId:"barchart",options:{showValue:Te.Jp.Never,legend:{displayMode:Te.jK.Hidden,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.options.barWidth=.8}}})}getSuggestionsForData(e){const t=this.getListWithDefaults(e),{dataSummary:a}=e;1===a.frameCount&&a.hasNumberField&&a.hasStringField&&(a.rowCountTotal>50||(t.append({name:_t.y.BarChart}),a.numberFieldCount>1&&(t.append({name:_t.y.BarChartStacked,options:{stacking:Te.o0.Normal}}),t.append({name:_t.y.BarChartStackedPercent,options:{stacking:Te.o0.Percent}})),t.append({name:_t.y.BarChartHorizontal,options:{orientation:he.VizOrientation.Horizontal}}),a.numberFieldCount>1&&(t.append({name:_t.y.BarChartHorizontalStacked,options:{stacking:Te.o0.Normal,orientation:he.VizOrientation.Horizontal}}),t.append({name:_t.y.BarChartHorizontalStackedPercent,options:{orientation:he.VizOrientation.Horizontal,stacking:Te.o0.Percent}}))))}});var hl=a("./public/app/core/logs_model.ts"),ml=a("./public/app/features/panel/components/PanelDataErrorView.tsx");const gl=(e,t)=>a=>({container:be.css`
    margin-bottom: ${a.spacing(1.5)};
    //We can remove this hot-fix when we fix panel menu with no title overflowing top of all panels
    margin-top: ${a.spacing(e?0:2.5)};
  `,labelContainer:be.css`
    margin: ${t?a.spacing(.5,0,.5,0):a.spacing(0,0,.5,.5)};
    display: flex;
    align-items: center;
  `,label:be.css`
    margin-right: ${a.spacing(.5)};
    font-size: ${a.typography.bodySmall.fontSize};
    font-weight: ${a.typography.fontWeightMedium};
  `});const fl=new he.PanelPlugin((e=>{let{data:t,timeZone:a,options:{showLabels:s,showTime:n,wrapLogMessage:r,showCommonLabels:i,prettifyLogMessage:o,sortOrder:l,dedupStrategy:c,enableLogDetails:d},title:u,id:p}=e;const h=l===he.LogsSortOrder.Ascending,m=(0,fe.useStyles2)(gl(u,h)),[g,f]=(0,q.useState)(0),b=(0,q.useRef)(null),{eventBus:v}=(0,fe.usePanelContext)(),x=(0,q.useCallback)((e=>{e?v.publish(new he.DataHoverEvent({point:{time:e.timeEpochMs}})):v.publish(new he.DataHoverClearEvent)}),[v]),[y,w,j]=(0,q.useMemo)((()=>{var e,a;const s=t?(0,hl.aB)(t.series,null===(e=t.request)||void 0===e?void 0:e.intervalMs):null,n=(null==s?void 0:s.rows)||[],r=null==s||null===(a=s.meta)||void 0===a?void 0:a.find((e=>e.label===hl.Qp));return[n,(0,hl.UW)(n,c),r]}),[t,c]);(0,q.useLayoutEffect)((()=>{h&&b.current?f(b.current.offsetHeight):f(0)}),[h,y]);const C=(0,q.useCallback)(((e,a)=>(0,Oe.a)({field:e,rowIndex:a,range:t.timeRange})),[t]);if(!t||0===y.length)return(0,xe.jsx)(ml.Z,{panelId:p,data:t,needsStringField:!0});const k=()=>(0,xe.jsxs)("div",{className:m.labelContainer,children:[(0,xe.jsx)("span",{className:m.label,children:"Common labels:"}),(0,xe.jsx)(fe.LogLabels,{labels:j?j.value:{labels:"(no common labels)"}})]});return(0,xe.jsx)(fe.CustomScrollbar,{autoHide:!0,scrollTop:g,children:(0,xe.jsxs)("div",{className:m.container,ref:b,children:[i&&!h&&k(),(0,xe.jsx)(fe.LogRows,{logRows:y,deduplicatedRows:w,dedupStrategy:c,showLabels:s,showTime:n,wrapLogMessage:r,prettifyLogMessage:o,timeZone:a,getFieldLinks:C,logsSortOrder:l,enableLogDetails:d,previewLimit:h?y.length:void 0,onLogRowHover:x}),i&&h&&k()]})})})).setPanelOptions((e=>{e.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:he.LogsDedupStrategy.none,label:"None",description:he.LogsDedupDescription[he.LogsDedupStrategy.none]},{value:he.LogsDedupStrategy.exact,label:"Exact",description:he.LogsDedupDescription[he.LogsDedupStrategy.exact]},{value:he.LogsDedupStrategy.numbers,label:"Numbers",description:he.LogsDedupDescription[he.LogsDedupStrategy.numbers]},{value:he.LogsDedupStrategy.signature,label:"Signature",description:he.LogsDedupDescription[he.LogsDedupStrategy.signature]}]},defaultValue:he.LogsDedupStrategy.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:he.LogsSortOrder.Descending,label:"Descending"},{value:he.LogsSortOrder.Ascending,label:"Ascending"}]},defaultValue:he.LogsSortOrder.Descending})})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const t=e.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:a}=e;a.hasData&&a.hasTimeField&&a.hasStringField&&("logs"===a.preferredVisualisationType?t.append({name:_t.y.Logs,score:he.VisualizationSuggestionScore.Best}):t.append({name:_t.y.Logs}))}});const bl="https://grafana.com/blog/news.xml",vl="https://cors-anywhere.herokuapp.com/";var xl,yl;class wl extends q.PureComponent{constructor(e){var t,a,s;super(e),s=void 0,(a="refreshSubscription")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.refreshSubscription=this.props.eventBus.subscribe(jt.RefreshEvent,this.loadChannel.bind(this)),this.state={}}componentDidMount(){this.loadChannel()}componentWillUnmount(){this.refreshSubscription.unsubscribe()}componentDidUpdate(e){this.props.options.feedUrl!==e.options.feedUrl&&this.loadChannel()}async loadChannel(){const{options:e}=this.props;try{const t=e.feedUrl?e.useProxy?`${vl}${e.feedUrl}`:e.feedUrl:bl,a=await async function(e){const t=await fetch(e),a=await t.text(),s=(new DOMParser).parseFromString(a,"text/xml"),n={items:[]},r=(e,t)=>{const a=e.querySelector(t);var s;return a&&null!==(s=a.textContent)&&void 0!==s?s:""};return s.querySelectorAll("item").forEach((e=>{const t={title:r(e,"title"),link:r(e,"link"),content:r(e,"description"),pubDate:r(e,"pubDate")},a=e.querySelector("meta[property='og:image']");a&&(t.ogImage=a.getAttribute("content")),n.items.push(t)})),n}(t),s=function(e){const t=new he.ArrayVector([]),a=new he.ArrayVector([]),s=new he.ArrayVector([]),n=new he.ArrayVector([]),r=new he.ArrayVector([]);for(const i of e.items){const e=(0,he.dateTime)(i.pubDate);try{if(t.buffer.push(e.valueOf()),a.buffer.push(i.title),s.buffer.push(i.link),r.buffer.push(i.ogImage),i.content){const e=i.content.replace(/<\/?[^>]+(>|$)/g,"");n.buffer.push(e)}}catch(e){console.warn("Error reading news item:",e,i)}}return{fields:[{name:"date",type:he.FieldType.time,config:{displayName:"Date"},values:t},{name:"title",type:he.FieldType.string,config:{},values:a},{name:"link",type:he.FieldType.string,config:{},values:s},{name:"content",type:he.FieldType.string,config:{},values:n},{name:"ogImage",type:he.FieldType.string,config:{},values:r}],length:t.length}}(a);this.setState({news:new he.DataFrameView(s),isError:!1})}catch(e){console.error("Error Loading News",e),this.setState({news:void 0,isError:!0})}}render(){const{width:e}=this.props,{showImage:t}=this.props.options,{isError:a,news:s}=this.state,n=jl(Q.ZP.theme2),r=e>600;return a?xl||(xl=(0,xe.jsx)("div",{children:"Error Loading News"})):s?(0,xe.jsx)(fe.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:s.map(((e,a)=>(0,xe.jsxs)("article",{className:(0,be.cx)(n.item,r&&n.itemWide),children:[t&&e.ogImage&&(0,xe.jsx)("a",{tabIndex:-1,href:he.textUtil.sanitizeUrl(e.link),target:"_blank",rel:"noopener noreferrer",className:(0,be.cx)(n.socialImage,r&&n.socialImageWide),"aria-hidden":!0,children:(0,xe.jsx)("img",{src:e.ogImage,alt:e.title})}),(0,xe.jsxs)("div",{className:n.body,children:[(0,xe.jsxs)("time",{className:n.date,dateTime:(0,he.dateTimeFormat)(e.date,{format:"MMM DD"}),children:[(0,he.dateTimeFormat)(e.date,{format:"MMM DD"})," "]}),(0,xe.jsx)("a",{className:n.link,href:he.textUtil.sanitizeUrl(e.link),target:"_blank",rel:"noopener noreferrer",children:(0,xe.jsx)("h3",{className:n.title,children:e.title})}),(0,xe.jsx)("div",{className:n.content,dangerouslySetInnerHTML:{__html:he.textUtil.sanitize(e.content)}})]})]},a)))}):yl||(yl=(0,xe.jsx)("div",{children:"loading..."}))}}const jl=(0,fe.stylesFactory)((e=>({container:be.css`
    height: 100%;
  `,item:be.css`
    display: flex;
    padding: ${e.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${e.spacing(1)};
    border-bottom: 2px solid ${e.colors.border.weak};
    background: ${e.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:be.css`
    flex-direction: row;
  `,body:be.css`
    display: flex;
    flex-direction: column;
  `,socialImage:be.css`
    display: flex;
    align-items: center;
    margin-bottom: ${e.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${e.shape.borderRadius(2)} ${e.shape.borderRadius(2)} 0 0;
    }
  `,socialImageWide:be.css`
    margin-right: ${e.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${e.shape.borderRadius()};
    }
  `,link:be.css`
    color: ${e.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${e.colors.text.link};
      text-decoration: underline;
    }
  `,title:be.css`
    font-size: 16px;
    margin-bottom: ${e.spacing(.5)};
  `,content:be.css`
    p {
      margin-bottom: 4px;
      color: ${e.colors.text};
    }
  `,date:be.css`
    margin-bottom: ${e.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 3px;
    color: ${e.colors.text.secondary};
  `}))),Cl=(Object.freeze([0,0]),{showImage:!0}),kl=new he.PanelPlugin(wl).setPanelOptions((e=>{e.addTextInput({path:"feedUrl",name:"URL",description:"Only RSS feed formats are supported (not Atom).",settings:{placeholder:bl},defaultValue:Cl.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",showIf:e=>(0,I.isString)(e.feedUrl)&&!e.feedUrl.startsWith(vl),defaultValue:Cl.showImage}).addBooleanSwitch({path:"useProxy",name:"Use Proxy",description:"If the feed is unable to connect, consider a CORS proxy",showIf:e=>(0,I.isString)(e.feedUrl)&&!e.feedUrl.startsWith(vl),defaultValue:Cl.useProxy})}));var Sl,Tl,Ol,_l;function Nl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Il=[{label:"Grafana",value:he.LiveChannelScope.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:he.LiveChannelScope.DataSource,description:"Data sources with live support"},{label:"Plugins",value:he.LiveChannelScope.Plugin,description:"Plugins with live support"}];class Pl extends q.PureComponent{constructor(){super(...arguments),Nl(this,"state",{namespaces:[],paths:[]}),Nl(this,"onScopeChanged",(e=>{e.value&&this.props.onChange({scope:e.value,namespace:void 0,path:void 0})})),Nl(this,"onNamespaceChanged",(e=>{var t;const a={scope:null===(t=this.props.value)||void 0===t?void 0:t.scope,path:void 0};e.value&&(a.namespace=e.value),this.props.onChange(a)})),Nl(this,"onPathChanged",(e=>{const{value:t,onChange:a}=this.props,s={scope:t.scope,namespace:t.namespace};e.value&&(s.path=e.value),a(s)}))}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(e){this.props.value!==e.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){var e;const{namespaces:t,paths:a}=this.state,{scope:s,namespace:n,path:r}=this.props.value,i=Fl(Q.vc.theme);return(0,xe.jsxs)(xe.Fragment,{children:[Sl||(Sl=(0,xe.jsx)(fe.Alert,{title:"Grafana Live",severity:"info",children:"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."})),(0,xe.jsxs)("div",{children:[(0,xe.jsxs)("div",{className:i.dropWrap,children:[Tl||(Tl=(0,xe.jsx)(fe.Label,{children:"Scope"})),(0,xe.jsx)(fe.Select,{menuShouldPortal:!0,options:Il,value:Il.find((e=>e.value===s)),onChange:this.onScopeChanged})]}),s&&(0,xe.jsxs)("div",{className:i.dropWrap,children:[Ol||(Ol=(0,xe.jsx)(fe.Label,{children:"Namespace"})),(0,xe.jsx)(fe.Select,{menuShouldPortal:!0,options:t,value:null!==(e=t.find((e=>e.value===n)))&&void 0!==e?e:n?{label:n,value:n}:void 0,onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})]}),s&&n&&(0,xe.jsxs)("div",{className:i.dropWrap,children:[_l||(_l=(0,xe.jsx)(fe.Label,{children:"Path"})),(0,xe.jsx)(fe.Select,{menuShouldPortal:!0,options:a,value:Ml(a,r),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0})]})]})]})}}function Ml(e,t){const a=e.find((e=>e.value===t));return a||(t?{label:t,value:t}:void 0)}const Fl=(0,fe.stylesFactory)((e=>({dropWrap:be.css`
    margin-bottom: ${e.spacing.sm};
  `})));let Al;var Dl,$l,Ll,Rl,El;function zl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e){e.Raw="raw",e.JSON="json",e.Auto="auto",e.None="none"}(Al||(Al={}));class Vl extends q.PureComponent{constructor(e){super(e),zl(this,"isValid",void 0),zl(this,"subscription",void 0),zl(this,"styles",Bl(jt.config.theme)),zl(this,"streamObserver",{next:e=>{(0,he.isLiveChannelStatusEvent)(e)?this.setState({status:e,changed:Date.now()}):(0,he.isLiveChannelMessageEvent)(e)?this.setState({message:e.message,changed:Date.now()}):console.log("ignore",e)}}),zl(this,"unsubscribe",(()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)})),zl(this,"onSaveJSON",(e=>{const{options:t,onOptionsChange:a}=this.props;try{const s=JSON.parse(e);a(Object.assign({},t,{json:s}))}catch(e){console.log("Error reading JSON",e)}})),zl(this,"onPublishClicked",(async()=>{var e;const{addr:t}=this.state;if(!t)return void console.log("invalid address");const a=null===(e=this.props.options)||void 0===e?void 0:e.json;if(!a)return void console.log("nothing to publish");const s=await(0,jt.getGrafanaLiveSrv)().publish(t,a);console.log("onPublishClicked (response from publish)",s)})),this.isValid=!!(0,jt.getGrafanaLiveSrv)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(e){var t,a;(null===(t=this.props.options)||void 0===t?void 0:t.channel)!==(null===(a=e.options)||void 0===a?void 0:a.channel)&&this.loadChannel()}async loadChannel(){var e;const t=null===(e=this.props.options)||void 0===e?void 0:e.channel;if(!(0,he.isValidLiveChannelAddress)(t))return console.log("INVALID",t),this.unsubscribe(),void this.setState({addr:void 0});if((0,I.isEqual)(t,this.state.addr))return void console.log("Same channel",this.state.addr);const a=(0,jt.getGrafanaLiveSrv)();if(!a)return console.log("INVALID",t),this.unsubscribe(),void this.setState({addr:void 0});this.unsubscribe(),console.log("LOAD",t);try{this.subscription=a.getStream(t).subscribe(this.streamObserver),this.setState({addr:t,error:void 0})}catch(e){this.setState({addr:void 0,error:e})}}renderNotEnabled(){return(0,xe.jsxs)(fe.Alert,{title:"Grafana Live",severity:"info",children:[Dl||(Dl=(0,xe.jsx)("p",{children:"Grafana live requires a feature flag to run"})),$l||($l=(0,xe.jsx)("b",{children:"custom.ini:"})),(0,xe.jsx)("pre",{children:"[feature_toggles]\n    enable = live"})]})}renderMessage(e){const{options:t}=this.props,{message:a}=this.state;var s,n,r;if(!a)return(0,xe.jsxs)("div",{children:[Ll||(Ll=(0,xe.jsx)("h4",{children:"Waiting for data:"})),null===(s=t.channel)||void 0===s?void 0:s.scope,"/",null===(n=t.channel)||void 0===n?void 0:n.namespace,"/",null===(r=t.channel)||void 0===r?void 0:r.path]});if(t.message===Al.JSON)return(0,xe.jsx)(fe.JSONFormatter,{json:a,open:5});if(t.message===Al.Auto&&a instanceof Et.Av){const t={series:(0,he.applyFieldOverrides)({data:[a],theme:jt.config.theme2,replaceVariables:e=>e,fieldConfig:{defaults:{},overrides:[]}}),state:he.LoadingState.Streaming},s=Object.assign({},this.props,{options:{frameIndex:0,showHeader:!0}});return(0,xe.jsx)(yi,Object.assign({},s,{data:t,height:e}))}return(0,xe.jsx)("pre",{children:JSON.stringify(a)})}renderPublish(e){const{options:t}=this.props;return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(fe.CodeEditor,{height:e-32,language:"json",value:t.json?JSON.stringify(t.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),(0,xe.jsx)("div",{style:{height:32},children:(0,xe.jsx)(fe.Button,{onClick:this.onPublishClicked,children:"Publish"})})]})}renderStatus(){const{status:e}=this.state;if((null==e?void 0:e.state)===he.LiveChannelConnectionState.Connected)return;let t="";return e&&(t=this.styles.status[e.state]),(0,xe.jsx)("div",{className:(0,be.cx)(t,this.styles.statusWrap),children:null==e?void 0:e.state})}renderBody(){const{status:e}=this.state,{options:t,height:a}=this.props;if(t.publish){if(t.message===Al.None)return(0,xe.jsx)("div",{children:this.renderPublish(a)});const e=a/2;return(0,xe.jsxs)("div",{children:[(0,xe.jsx)("div",{style:{height:e,overflow:"hidden"},children:(0,xe.jsx)(fe.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.renderMessage(e)})}),(0,xe.jsx)("div",{children:this.renderPublish(e)})]})}return t.message===Al.None?(0,xe.jsx)("pre",{children:JSON.stringify(e)}):(0,xe.jsx)("div",{style:{overflow:"hidden",height:a},children:(0,xe.jsx)(fe.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.renderMessage(a)})})}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:e,error:t}=this.state;return e?t?(0,xe.jsxs)("div",{children:[El||(El=(0,xe.jsx)("h2",{children:"ERROR"})),(0,xe.jsx)("div",{children:JSON.stringify(t)})]}):(0,xe.jsxs)(xe.Fragment,{children:[this.renderStatus(),this.renderBody()]}):Rl||(Rl=(0,xe.jsx)(fe.Alert,{title:"Grafana Live",severity:"info",children:"Use the panel editor to pick a channel"}))}}const Bl=(0,fe.stylesFactory)((e=>({statusWrap:be.css`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${e.colors.panelBg};
    padding: 10px;
    z-index: ${e.zIndex.modal};
  `,status:{[he.LiveChannelConnectionState.Pending]:be.css`
      border: 1px solid ${e.palette.brandPrimary};
    `,[he.LiveChannelConnectionState.Connected]:be.css`
      border: 1px solid ${e.palette.brandSuccess};
    `,[he.LiveChannelConnectionState.Disconnected]:be.css`
      border: 1px solid ${e.palette.brandWarning};
    `,[he.LiveChannelConnectionState.Shutdown]:be.css`
      border: 1px solid ${e.palette.brandDanger};
    `,[he.LiveChannelConnectionState.Invalid]:be.css`
      border: 1px solid red;
    `}}))),Ul=new he.PanelPlugin(Vl).setPanelOptions((e=>{e.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:Pl,defaultValue:{}}),e.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:Al.Raw,label:"Raw Text"},{value:Al.JSON,label:"JSON"},{value:Al.Auto,label:"Auto"},{value:Al.None,label:"None"}]},defaultValue:Al.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})}));let Hl;function ql(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e){e.Render="render",e.Events="events",e.Cursor="cursor",e.State="State",e.ThrowError="ThrowError"}(Hl||(Hl={}));let Wl=100;class Gl extends q.PureComponent{constructor(e){super(e),ql(this,"history",new he.CircularVector({capacity:40,append:"head"})),ql(this,"subs",void 0),ql(this,"eventObserver",{next:e=>{const t=e.origin;this.history.add({key:Wl++,type:e.type,path:null==t?void 0:t.path,payload:e.payload}),this.setState({counter:Wl})}}),this.state={counter:Wl};const t=[];t.push(e.eventBus.getStream(he.DataHoverEvent).subscribe(this.eventObserver)),t.push(e.eventBus.getStream(he.DataHoverClearEvent).subscribe(this.eventObserver)),t.push(e.eventBus.getStream(he.DataSelectEvent).subscribe(this.eventObserver)),this.subs=t}componentWillUnmount(){for(const e of this.subs)e.unsubscribe()}render(){return(0,xe.jsx)(fe.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:this.history.map(((e,t)=>(0,xe.jsxs)("div",{children:[JSON.stringify(e.path)," ",e.type," / X:",JSON.stringify(e.payload.x)," / Y:",JSON.stringify(e.payload.y)]},e.key)))})}}var Zl,Ql;function Kl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Yl extends q.Component{constructor(){super(...arguments),Kl(this,"lastRender",Date.now()),Kl(this,"counters",{render:0,dataChanged:0,schemaChanged:0}),Kl(this,"resetCounters",(()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}))}shouldComponentUpdate(e){const{data:t,options:a}=this.props;var s;if(e.data!==t&&(this.counters.dataChanged++,null!==(s=a.counters)&&void 0!==s&&s.schemaChanged)){var n;const a=null===(n=e.data)||void 0===n?void 0:n.series,s=t.series;if(s&&a){(0,he.compareArrayValues)(s,a,he.compareDataFrameStructures)||this.counters.schemaChanged++}}return!0}render(){var e;const{data:t,options:a}=this.props,s=null!==(e=a.counters)&&void 0!==e?e:{};this.counters.render++;const n=Date.now(),r=n-this.lastRender;this.lastRender=n;const i=he.fieldReducers.get(he.ReducerID.lastNotNull);return(0,xe.jsxs)("div",{children:[(0,xe.jsxs)("div",{children:[(0,xe.jsx)(fe.IconButton,{name:"step-backward",title:"reset counters",onClick:this.resetCounters}),(0,xe.jsxs)("span",{children:[s.render&&(0,xe.jsxs)("span",{children:["Render: ",this.counters.render," "]}),s.dataChanged&&(0,xe.jsxs)("span",{children:["Data: ",this.counters.dataChanged," "]}),s.schemaChanged&&(0,xe.jsxs)("span",{children:["Schema: ",this.counters.schemaChanged," "]}),(0,xe.jsxs)("span",{children:["TIME: ",r,"ms"]})]})]}),t.series&&t.series.map(((e,a)=>(0,xe.jsxs)("div",{children:[(0,xe.jsxs)("h4",{children:[(0,he.getFrameDisplayName)(e,a)," (",e.length,")"]}),(0,xe.jsxs)("table",{className:"filter-table",children:[Zl||(Zl=(0,xe.jsx)("thead",{children:(0,xe.jsxs)("tr",{children:[(0,xe.jsx)("td",{children:"Field"}),(0,xe.jsx)("td",{children:"Type"}),(0,xe.jsx)("td",{children:"Last"})]})})),(0,xe.jsx)("tbody",{children:e.fields.map(((a,s)=>{const n=i.reduce(a,!1,!1)[i.id];return(0,xe.jsxs)("tr",{children:[(0,xe.jsx)("td",{children:(0,he.getFieldDisplayName)(a,e,t.series)}),(0,xe.jsx)("td",{children:a.type}),(0,xe.jsx)("td",{children:`${n}`})]},`${s}/${a.name}`)}))})]})]},`${a}/${e.refId}`)))]})}}function Jl(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Xl extends q.Component{constructor(){super(...arguments),Jl(this,"subscription",new Sr.w0),Jl(this,"state",{})}componentDidMount(){const{eventBus:e}=this.props;this.subscription.add(e.subscribe(he.DataHoverEvent,(e=>{this.setState({event:e})}))),this.subscription.add(e.subscribe(he.DataHoverClearEvent,(e=>{this.setState({event:e})}))),this.subscription.add(e.subscribe(he.LegacyGraphHoverEvent,(e=>{this.setState({event:e})}))),this.subscription.add(e.subscribe(he.LegacyGraphHoverClearEvent,(e=>{this.setState({event:e})})))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:e}=this.state;if(!e)return Ql||(Ql=(0,xe.jsx)("div",{children:"no events yet"}));const{type:t,payload:a,origin:s}=e;return(0,xe.jsxs)(fe.CustomScrollbar,{autoHeightMin:"100%",autoHeightMax:"100%",children:[(0,xe.jsxs)("h3",{children:["Origin: ",null==s?void 0:s.path]}),(0,xe.jsxs)("span",{children:["Type: ",t]}),Boolean(a)&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)("pre",{children:JSON.stringify(a.point,null,"  ")}),a.data&&(0,xe.jsx)(rl.H,{data:a.data,rowIndex:a.rowIndex,columnIndex:a.columnIndex})]})]})}}function ec(e){var t,a;const s=(0,fe.usePanelContext)();return(0,xe.jsx)(xe.Fragment,{children:(0,xe.jsx)(fe.Field,{label:"State name",children:(0,xe.jsx)(fe.Input,{value:null!==(t=null===(a=s.instanceState)||void 0===a?void 0:a.name)&&void 0!==t?t:"",onChange:e=>{s.onInstanceStateChange({name:e.currentTarget.value})}})})})}function tc(e){var t;let{value:a,context:s,onChange:n,item:r}=e;return(0,xe.jsxs)("div",{children:["Current value: ",null===(t=s.instanceState)||void 0===t?void 0:t.name," "]})}class ac extends q.Component{render(){const{options:e}=this.props;switch(e.mode){case Hl.Events:return(0,xe.jsx)(Gl,{eventBus:this.props.eventBus});case Hl.Cursor:return(0,xe.jsx)(Xl,{eventBus:this.props.eventBus});case Hl.State:return(0,xe.jsx)(ec,Object.assign({},this.props));case Hl.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return(0,xe.jsx)(Yl,Object.assign({},this.props))}}}const sc=new he.PanelPlugin(ac).useFieldConfig().setPanelOptions((e=>{e.addSelect({path:"mode",name:"Mode",defaultValue:Hl.Render,settings:{options:[{label:"Render",value:Hl.Render},{label:"Events",value:Hl.Events},{label:"Cursor",value:Hl.Cursor},{label:"Cursor",value:Hl.Cursor},{label:"Share state",value:Hl.State},{label:"Throw error",value:Hl.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:e=>{let{mode:t}=e;return t===Hl.State},editor:tc}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:e=>{let{mode:t}=e;return t===Hl.Render}}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:e=>{let{mode:t}=e;return t===Hl.Render}}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:e=>{let{mode:t}=e;return t===Hl.Render}}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})})),nc=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],rc=(0,fe.stylesFactory)((e=>({container:be.css`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${e.spacing.lg};

      @media only screen and (max-width: ${e.breakpoints.lg}) {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      @media only screen and (max-width: ${e.breakpoints.sm}) {
        padding: 0 ${e.spacing.sm};
      }
    `,title:be.css`
      margin-bottom: 0;

      @media only screen and (max-width: ${e.breakpoints.lg}) {
        margin-bottom: ${e.spacing.sm};
      }

      @media only screen and (max-width: ${e.breakpoints.md}) {
        font-size: ${e.typography.heading.h2};
      }
      @media only screen and (max-width: ${e.breakpoints.sm}) {
        font-size: ${e.typography.heading.h3};
      }
    `,help:be.css`
      display: flex;
      align-items: baseline;
    `,helpText:be.css`
      margin-right: ${e.spacing.md};
      margin-bottom: 0;

      @media only screen and (max-width: ${e.breakpoints.md}) {
        font-size: ${e.typography.heading.h4};
      }

      @media only screen and (max-width: ${e.breakpoints.sm}) {
        display: none;
      }
    `,helpLinks:be.css`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:be.css`
      margin-right: ${e.spacing.md};
      text-decoration: underline;
      text-wrap: no-wrap;

      @media only screen and (max-width: ${e.breakpoints.sm}) {
        margin-right: 8px;
      }
    `}))),ic=new he.PanelPlugin((()=>{const e=rc((0,fe.useTheme)());return(0,xe.jsxs)("div",{className:e.container,children:[(0,xe.jsx)("h1",{className:e.title,children:"Welcome to Grafana"}),(0,xe.jsxs)("div",{className:e.help,children:[(0,xe.jsx)("h3",{className:e.helpText,children:"Need help?"}),(0,xe.jsx)("div",{className:e.helpLinks,children:nc.map(((t,a)=>(0,xe.jsx)("a",{className:e.helpLink,href:`${t.href}?utm_source=grafana_gettingstarted`,children:t.label},`${t.label}-${a}`)))})]})]})})).setNoPadding();var oc,lc=a("../../opt/drone/yarncache/memoize-one-npm-6.0.0-8b2a2cd020-f185ea69f7.zip/node_modules/memoize-one/dist/memoize-one.esm.js"),cc=a("./public/app/plugins/panel/nodeGraph/NodeGraph.tsx"),dc=a("./public/app/plugins/panel/nodeGraph/utils.ts");const uc=new he.PanelPlugin((e=>{let{width:t,height:a,data:s}=e;const n=(0,Oe.u)(s.timeRange);if(!s||!s.series.length)return oc||(oc=(0,xe.jsx)("div",{className:"panel-empty",children:(0,xe.jsx)("p",{children:"No data found in response"})}));const r=(0,lc.Z)(dc.Ee);return(0,xe.jsx)("div",{style:{width:t,height:a},children:(0,xe.jsx)(cc.E,{dataFrames:r(s.series),getLinks:n})})}));var pc=a("./packages/grafana-data/src/transformations/transformers/histogram.ts");function hc(e){return e.fields[1].values.get(0)-e.fields[0].values.get(0)}const mc=(e,t)=>{let a=new fe.UPlotConfigBuilder,s=hc(e);a.addScale({scaleKey:"x",isTime:!1,distribution:Te.wf.Linear,orientation:Te.wN.Horizontal,direction:Te.bQ.Right,range:(e,t,a)=>{let n=e.data[0][0];var r,i;return a===e.data[0][e.data[0].length-1]?a+=s:(r=a,i=s,a=Math.ceil(r/i)*i),t>n&&(t=function(e,t){return Math.floor(e/t)*t}(t,s)),[t,a]}}),a.addScale({scaleKey:"y",isTime:!1,distribution:Te.wf.Linear,orientation:Te.wN.Vertical,direction:Te.bQ.Up});const n=e.fields[0].display,r=e=>(0,he.formattedValueToString)(n(e));a.addAxis({scaleKey:"x",isTime:!1,placement:Te.LB.Bottom,incrs:pc.Zi,splits:(e,t,a,n,r,i)=>{let o=e.axes[t]._space,l=e.valToPos(e.data[0][0]+s,"x")-e.valToPos(e.data[0][0],"x"),c=e.data[0][0],d=e.data[0][e.data[0].length-1]+s,u=[],p=Math.ceil(o/l);for(let e=0,t=c;t<=d;e++,t+=s)!(e%p)&&u.push(t);return u},values:(e,t)=>{const a=t.map(r),s=a.reduce(((e,t)=>Math.max((0,fe.measureText)(t,fe.UPLOT_AXIS_FONT_SIZE).width,e)),0),n=e.bbox.width/((s+10)*devicePixelRatio),i=Math.ceil(a.length/n);return a.map(((e,t)=>t%i==0?e:null))},theme:t}),a.addAxis({scaleKey:"y",isTime:!1,placement:Te.LB.Left,theme:t}),a.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let i=Ks.Z.paths.bars({align:1,size:[1,1/0]}),o=0;for(let s=2;s<e.fields.length;s++){var l,c;const n=e.fields[s];n.state=null!==(l=n.state)&&void 0!==l?l:{},n.state.seriesIndex=o++;const r=Object.assign({},n.config.custom),d="y",u=(0,he.getFieldColorModeForField)(n),p=(0,he.getFieldSeriesColor)(n,t).color;a.addSeries({scaleKey:d,lineWidth:r.lineWidth,lineColor:p,fillOpacity:r.fillOpacity,theme:t,colorMode:u,pathBuilder:i,show:!(null!==(c=r.hideFrom)&&void 0!==c&&c.vis),gradientMode:r.gradientMode,thresholds:n.config.thresholds,hardMin:n.config.min,hardMax:n.config.max,softMin:r.axisSoftMin,softMax:r.axisSoftMax,dataFrameFieldIndex:{fieldIndex:s,frameIndex:0}})}return a},gc=e=>{let t=[];for(const a of e.fields)a.name!==pc.cO&&t.push(a.values.toArray());for(let e=1;e<t.length;e++){let a=t[e];for(let e=0;e<a.length;e++)0===a[e]&&(a[e]=null)}return t};class fc extends q.Component{constructor(e){super(e),this.state=this.prepState(e)}prepState(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=null;const{alignedFrame:s}=e;return s&&(a={alignedData:gc(s)},t&&(a.config=mc(s,this.props.theme))),a}renderLegend(e){const{legend:t}=this.props;return e&&t.displayMode!==Te.jK.Hidden?(0,xe.jsx)(fe.PlotLegend,Object.assign({data:[this.props.alignedFrame],config:e,maxHeight:"35%",maxWidth:"60%"},t)):null}componentDidUpdate(e){const{structureRev:t,alignedFrame:a,bucketSize:s}=this.props;if(a!==e.alignedFrame){let n=this.prepState(this.props,!1);if(n){(s!==e.bucketSize||this.props.options!==e.options||void 0===this.state.config||t!==e.structureRev||!t)&&(n.config=mc(a,this.props.theme))}n&&this.setState(n)}}render(){const{width:e,height:t,children:a,alignedFrame:s}=this.props,{config:n}=this.state;return n?(0,xe.jsx)(fe.VizLayout,{width:e,height:t,legend:this.renderLegend(n),children:(e,t)=>(0,xe.jsx)(fe.UPlotChart,{config:this.state.config,data:this.state.alignedData,width:e,height:t,timeRange:null,children:a?a(n,s):null})}):null}}var bc;Object.freeze([1,0]);const vc={bucketOffset:0,legend:{displayMode:Te.jK.List,placement:"bottom",calcs:[]},tooltip:{mode:Te.f3.Multi,sort:Te.As.None}},xc={lineWidth:1,fillOpacity:80};function yc(e){if(1!==(null==e?void 0:e.length))return!1;const t=e[0];if(t.fields.length<3)return!1;if(t.fields[0].name!==pc.wL||t.fields[1].name!==pc.cO)return!1;for(const e of t.fields)if(e.type!==he.FieldType.number)return!1;return!0}const wc=new he.PanelPlugin((e=>{let{data:t,options:a,width:s,height:n}=e;const r=(0,fe.useTheme2)(),i=(0,q.useMemo)((()=>{var e;if(null==t||null===(e=t.series)||void 0===e||!e.length)return;if(1===t.series.length){const e=(0,he.getHistogramFields)(t.series[0]);if(e)return(0,pc.zM)(e)}const s=(0,he.buildHistogram)(t.series,a);return s?(0,pc.zM)(s,r):void 0}),[t.series,a,r]);if(!i||!i.fields.length)return bc||(bc=(0,xe.jsx)("div",{className:"panel-empty",children:(0,xe.jsx)("p",{children:"No histogram found in response"})}));const o=hc(i);return(0,xe.jsx)(fc,{options:a,theme:r,legend:a.legend,structureRev:t.structureRev,width:s,height:n,alignedFrame:i,bucketSize:o,children:(e,t)=>null})})).setPanelOptions((e=>{e.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(e,t)=>yc(t)}).addNumberInput({path:"bucketSize",name:pc.py.bucketSize.name,description:pc.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:vc.bucketSize,showIf:(e,t)=>!yc(t)}).addNumberInput({path:"bucketOffset",name:pc.py.bucketOffset.name,description:pc.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:vc.bucketOffset,showIf:(e,t)=>!yc(t)}).addBooleanSwitch({path:"combine",name:pc.py.combine.name,description:pc.py.combine.description,defaultValue:vc.combine,showIf:(e,t)=>!yc(t)}),fe.commonOptionsBuilder.addLegendOptions(e)})).useFieldConfig({standardOptions:{[he.FieldConfigProperty.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:he.FieldColorModeId.PaletteClassic}}},useCustomConfig:e=>{const t=xc;e.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:t.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:t.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:fe.graphFieldOptions.fillGradient[0].value,settings:{options:fe.graphFieldOptions.fillGradient}}),fe.commonOptionsBuilder.addHideFrom(e)}});var jc=a("./public/app/plugins/datasource/alertmanager/types.ts"),Cc=a("./public/app/features/alerting/unified/components/AlertLabels.tsx"),kc=a("./public/app/features/alerting/unified/components/alert-groups/AlertGroupHeader.tsx"),Sc=a("./public/app/features/alerting/unified/components/CollapseToggle.tsx"),Tc=a("./public/app/features/alerting/unified/styles/notifications.ts");const Oc=e=>{let{alertManagerSourceName:t,group:a,expandAll:s}=e;const[n,r]=(0,q.useState)(s),i=(0,fe.useStyles2)(_c),o=(0,fe.useStyles2)(Tc.r);return(0,q.useEffect)((()=>r(s)),[s]),(0,xe.jsxs)("div",{className:i.group,"data-testid":"alert-group",children:[Object.keys(a.labels).length>0?(0,xe.jsx)(Cc.s,{labels:a.labels}):(0,xe.jsx)("div",{className:i.noGroupingText,children:"No grouping"}),(0,xe.jsxs)("div",{className:i.row,children:[(0,xe.jsx)(Sc.U,{isCollapsed:!n,onToggle:()=>r(!n)})," ",(0,xe.jsx)(kc.Z,{group:a})]}),n&&(0,xe.jsx)("div",{className:i.alerts,children:a.alerts.map(((e,a)=>{const s=e.status.state.toUpperCase(),n=(0,he.intervalToAbbreviatedDurationString)({start:new Date(e.startsAt),end:Date.now()});return(0,xe.jsxs)("div",{"data-testid":"alert-group-alert",className:i.alert,children:[(0,xe.jsxs)("div",{children:[(0,xe.jsxs)("span",{className:o[e.status.state],children:[s," "]}),"for ",n]}),(0,xe.jsx)("div",{children:(0,xe.jsx)(Cc.s,{labels:e.labels})}),(0,xe.jsxs)("div",{className:i.actionsRow,children:[e.status.state===jc.Z9.Suppressed&&(0,xe.jsx)(fe.LinkButton,{href:`${(0,Yn.eQ)("/alerting/silences",t)}&silenceIds=${e.status.silencedBy.join(",")}`,className:i.button,icon:"bell",size:"sm",children:"Manage silences"}),e.status.state===jc.Z9.Active&&(0,xe.jsx)(fe.LinkButton,{href:(0,Yn.VN)(t,e.labels),className:i.button,icon:"bell-slash",size:"sm",children:"Silence"}),e.generatorURL&&(0,xe.jsx)(fe.LinkButton,{className:i.button,href:e.generatorURL,icon:"chart-line",size:"sm",children:"See source"})]})]},`${e.fingerprint}-${a}`)}))})]})},_c=e=>({noGroupingText:be.css`
    height: ${e.spacing(4)};
  `,group:be.css`
    background-color: ${e.colors.background.secondary};
    margin: ${e.spacing(.5,1,.5,1)};
    padding: ${e.spacing(1)};
  `,row:be.css`
    display: flex;
    flex-direction: row;
    align-items: center;
  `,alerts:be.css`
    margin: ${e.spacing(0,2,0,4)};
  `,alert:be.css`
    padding: ${e.spacing(1,0)};
    & + & {
      border-top: 1px solid ${e.colors.border.medium};
    }
  `,button:be.css`
    & + & {
      margin-left: ${e.spacing(1)};
    }
  `,actionsRow:be.css`
    padding: ${e.spacing(1,0)};
  `});var Nc=a("./public/app/features/alerting/unified/components/AlertManagerPicker.tsx");const Ic=new he.PanelPlugin((e=>{var t;const a=(0,G.useDispatch)(),s=jt.config.unifiedAlertingEnabled,n=e.options.expandAll,r=e.options.alertmanager,i=((e,t)=>(0,q.useMemo)((()=>e.filter((e=>(0,Gn.eD)(e.labels,t)||e.alerts.some((e=>(0,Gn.eD)(e.labels,t)))))),[e,t]))((null===(t=((0,Un._)((e=>e.amAlertGroups))||dr.oq)[r||""])||void 0===t?void 0:t.result)||[],e.options.labels?(0,Gn.Zh)(e.options.labels):[]);(0,q.useEffect)((()=>{function e(){r&&a((0,Bn.mS)(r))}e();const t=setInterval(e,qn.iF);return()=>{clearInterval(t)}}),[a,r]);const o=i.length>0;return(0,xe.jsx)(fe.CustomScrollbar,{autoHeightMax:"100%",autoHeightMin:"100%",children:s&&(0,xe.jsxs)("div",{children:[o&&i.map((e=>(0,xe.jsx)(Oc,{alertManagerSourceName:r,group:e,expandAll:n},JSON.stringify(e.labels)))),!o&&"No alerts"]})})})).setPanelOptions((e=>e.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:Hn.GC,category:["Options"],editor:function(e){return(0,xe.jsx)(Nc.P,{current:e.value,onChange:t=>e.onChange(t)})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}))),Pc={"app/plugins/datasource/graphite/module":async()=>await a.e(7494).then(a.bind(a,"./public/app/plugins/datasource/graphite/module.ts")),"app/plugins/datasource/cloudwatch/module":async()=>await a.e(8831).then(a.bind(a,"./public/app/plugins/datasource/cloudwatch/module.tsx")),"app/plugins/datasource/dashboard/module":async()=>await a.e(8245).then(a.bind(a,"./public/app/plugins/datasource/dashboard/module.ts")),"app/plugins/datasource/elasticsearch/module":async()=>await a.e(9897).then(a.bind(a,"./public/app/plugins/datasource/elasticsearch/module.ts")),"app/plugins/datasource/opentsdb/module":async()=>await a.e(3168).then(a.bind(a,"./public/app/plugins/datasource/opentsdb/module.ts")),"app/plugins/datasource/grafana/module":async()=>await a.e(7537).then(a.bind(a,"./public/app/plugins/datasource/grafana/module.ts")),"app/plugins/datasource/influxdb/module":async()=>await a.e(5783).then(a.bind(a,"./public/app/plugins/datasource/influxdb/module.ts")),"app/plugins/datasource/loki/module":async()=>await Promise.all([a.e(3706),a.e(3924),a.e(1598)]).then(a.bind(a,"./public/app/plugins/datasource/loki/module.ts")),"app/plugins/datasource/jaeger/module":async()=>await Promise.all([a.e(7849),a.e(1713),a.e(890)]).then(a.bind(a,"./public/app/plugins/datasource/jaeger/module.ts")),"app/plugins/datasource/zipkin/module":async()=>await a.e(4023).then(a.bind(a,"./public/app/plugins/datasource/zipkin/module.ts")),"app/plugins/datasource/mixed/module":async()=>await a.e(2001).then(a.bind(a,"./public/app/plugins/datasource/mixed/module.ts")),"app/plugins/datasource/mysql/module":async()=>await a.e(4251).then(a.bind(a,"./public/app/plugins/datasource/mysql/module.ts")),"app/plugins/datasource/postgres/module":async()=>await a.e(534).then(a.bind(a,"./public/app/plugins/datasource/postgres/module.ts")),"app/plugins/datasource/mssql/module":async()=>await a.e(5032).then(a.bind(a,"./public/app/plugins/datasource/mssql/module.ts")),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([a.e(3924),a.e(7004)]).then(a.bind(a,"./public/app/plugins/datasource/prometheus/module.ts")),"app/plugins/datasource/testdata/module":async()=>await a.e(319).then(a.bind(a,"./public/app/plugins/datasource/testdata/module.tsx")),"app/plugins/datasource/cloud-monitoring/module":async()=>await a.e(3549).then(a.bind(a,"./public/app/plugins/datasource/cloud-monitoring/module.ts")),"app/plugins/datasource/grafana-azure-monitor-datasource/module":async()=>await a.e(2364).then(a.bind(a,"./public/app/plugins/datasource/grafana-azure-monitor-datasource/module.ts")),"app/plugins/datasource/tempo/module":async()=>await Promise.all([a.e(4076),a.e(4156)]).then(a.bind(a,"./public/app/plugins/datasource/tempo/module.ts")),"app/plugins/datasource/alertmanager/module":async()=>await a.e(6795).then(a.bind(a,"./public/app/plugins/datasource/alertmanager/module.ts")),"app/plugins/panel/text/module":n,"app/plugins/panel/timeseries/module":r,"app/plugins/panel/state-timeline/module":i,"app/plugins/panel/status-history/module":o,"app/plugins/panel/candlestick/module":l,"app/plugins/panel/graph/module":c,"app/plugins/panel/xychart/module":d,"app/plugins/panel/geomap/module":async()=>await Promise.all([a.e(4195),a.e(8096)]).then(a.bind(a,"./public/app/plugins/panel/geomap/module.tsx")),"app/plugins/panel/canvas/module":async()=>await Promise.all([a.e(2566),a.e(3330)]).then(a.bind(a,"./public/app/plugins/panel/canvas/module.tsx")),"app/plugins/panel/icon/module":async()=>await Promise.all([a.e(2566),a.e(53)]).then(a.bind(a,"./public/app/plugins/panel/icon/module.tsx")),"app/plugins/panel/dashlist/module":u,"app/plugins/panel/pluginlist/module":p,"app/plugins/panel/alertlist/module":h,"app/plugins/panel/annolist/module":m,"app/plugins/panel/heatmap/module":g,"app/plugins/panel/table/module":f,"app/plugins/panel/table-old/module":b,"app/plugins/panel/news/module":C,"app/plugins/panel/live/module":k,"app/plugins/panel/stat/module":qi,"app/plugins/panel/debug/module":S,"app/plugins/panel/gettingstarted/module":v,"app/plugins/panel/gauge/module":fo,"app/plugins/panel/piechart/module":x,"app/plugins/panel/bargauge/module":y,"app/plugins/panel/barchart/module":w,"app/plugins/panel/logs/module":j,"app/plugins/panel/welcome/module":T,"app/plugins/panel/nodeGraph/module":O,"app/plugins/panel/histogram/module":_,"app/plugins/panel/alertGroups/module":N};var Mc=a("./public/app/features/plugins/pluginCacheBuster.ts"),Fc=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/index.js"),Ac=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/operators/index.js"),Dc=a("./.yarn/__virtual__/react-router-dom-virtual-e45eb1b58b/3/opt/drone/yarncache/react-router-dom-npm-5.3.0-aa9adb5bec-47584fd629.zip/node_modules/react-router-dom/esm/react-router-dom.js");a("./public/vendor/flot/jquery.flot.gauge.js");const $c=fe;function Lc(e,t){jt.SystemJS.registerDynamic(e,[],!0,((e,a,s)=>{s.exports=t}))}$c.PanelPlugin=he.PanelPlugin,$c.DataSourcePlugin=he.DataSourcePlugin,$c.AppPlugin=he.AppPlugin,$c.DataSourceApi=he.DataSourceApi,jt.SystemJS.registry.set("plugin-loader",jt.SystemJS.newModule({locate:Mc.hf})),jt.SystemJS.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js",css:"vendor/plugin-css/css.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"}}}),Lc("@grafana/data",he),Lc("@grafana/ui",$c),Lc("@grafana/runtime",jt),Lc("lodash",P()),Lc("moment",D()),Lc("jquery",E()),Lc("angular",L()),Lc("d3",Pa),Lc("rxjs",Fc),Lc("rxjs/operators",Ac),Lc("react-router-dom",Dc),Lc("prismjs",V()),Lc("slate",B.ZP),Lc("@grafana/slate-react",U.ZP),Lc("slate-plain-serializer",H.Z),Lc("react",q),Lc("react-dom",W),Lc("react-redux",G),Lc("redux",Z),Lc("emotion",be),Lc("@emotion/css",be),Lc("app/features/dashboard/impression_store",{impressions:pe.Z,__esModule:!0}),Lc("app/core/services/backend_srv",{BackendSrv:de.y$,getBackendSrv:de.i}),Lc("app/plugins/sdk",M),Lc("app/core/utils/datemath",he.dateMath),Lc("app/core/utils/flatten",ee),Lc("app/core/utils/kbn",F.Z),Lc("app/core/utils/ticks",s),Lc("app/core/utils/promiseToDigest",{promiseToDigest:ue.E,__esModule:!0}),Lc("app/core/config",Q.ZP),Lc("app/core/time_series",K.Z),Lc("app/core/time_series2",K.Z),Lc("app/core/table_model",Y.Z),Lc("app/core/app_events",X.h$),Lc("app/core/core_module",J.hF),Lc("app/core/core",{coreModule:J.hF,appEvents:X.h$,contextSrv:X.Vt,__esModule:!0});const Rc=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const e of Rc)Lc(e,{fakeDep:1});async function Ec(e,t){t&&(0,Mc.Vf)({path:e,version:t});const a=Pc[e];return a?"function"==typeof a?await a():a:jt.SystemJS.import(e)}function zc(e){var t;return Ec(e.module,null===(t=e.info)||void 0===t?void 0:t.version).then((t=>{if(t.plugin){const a=t.plugin;return a.meta=e,a}if(t.Datasource){const a=new he.DataSourcePlugin(t.Datasource);return a.setComponentsFromLegacyExports(t),a.meta=e,a}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")}))}function Vc(e){var t;return Ec(e.module,null===(t=e.info)||void 0===t?void 0:t.version).then((t=>{const a=t.plugin?t.plugin:new he.AppPlugin;return a.init(e),a.meta=e,a.setComponentsFromLegacyExports(t),a}))}},"./public/app/features/profile/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{rf:()=>d,YT:()=>u,zW:()=>p,zc:()=>h,$S:()=>m,Ns:()=>g,qD:()=>f,PL:()=>b,aw:()=>v,p$:()=>x,Uk:()=>y,z0:()=>w,ZP:()=>S});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),r=a("./packages/grafana-data/src/index.ts"),i=a("./public/app/core/config.ts"),o=a("./public/app/core/core.ts");const l={orgId:i.ZP.bootData.user.orgId,timeZone:i.ZP.bootData.user.timezone,weekStart:i.ZP.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},c=(0,n.oM)({name:"user/profile",initialState:l,reducers:{updateTimeZone:(e,t)=>{e.timeZone=t.payload.timeZone},updateWeekStart:(e,t)=>{e.weekStart=t.payload.weekStart},updateFiscalYearStartMonth:(e,t)=>{e.fiscalYearStartMonth=t.payload.fiscalYearStartMonth},setUpdating:(e,t)=>{e.isUpdating=t.payload.updating},userLoaded:(e,t)=>{e.user=t.payload.user},initLoadTeams:(e,t)=>{e.teamsAreLoading=!0},teamsLoaded:(e,t)=>{e.teams=t.payload.teams,e.teamsAreLoading=!1},initLoadOrgs:(e,t)=>{e.orgsAreLoading=!0},orgsLoaded:(e,t)=>{e.orgs=t.payload.orgs,e.orgsAreLoading=!1},initLoadSessions:(e,t)=>{e.sessionsAreLoading=!0},sessionsLoaded:(e,t)=>{const a=t.payload.sessions.sort(((e,t)=>Number(t.isActive)-Number(e.isActive)));e.sessions=a.map((e=>({id:e.id,isActive:e.isActive,seenAt:(0,r.dateTimeFormatTimeAgo)(e.seenAt),createdAt:e.createdAt,clientIp:e.clientIp,browser:e.browser,browserVersion:e.browserVersion,os:e.os,osVersion:e.osVersion,device:e.device}))),e.sessionsAreLoading=!1},userSessionRevoked:(e,t)=>{e.sessions=e.sessions.filter((e=>e.id!==t.payload.tokenId)),e.isUpdating=!1}}}),d=e=>async t=>{(0,s.set)(o.Vt,"user.fiscalYearStartMonth",e),t(k({fiscalYearStartMonth:e}))},u=e=>async t=>{var a,n;(0,s.isString)(e)&&!(0,s.isEmpty)(e)||(e=null===i.ZP||void 0===i.ZP||null===(a=i.ZP.bootData)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.timezone);(0,s.set)(o.Vt,"user.timezone",e),t(j({timeZone:e}))},p=e=>async t=>{var a,n;(0,s.isString)(e)&&!(0,s.isEmpty)(e)||(e=null===i.ZP||void 0===i.ZP||null===(a=i.ZP.bootData)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.weekStart);(0,s.set)(o.Vt,"user.weekStart",e),t(C({weekStart:e})),(0,r.setWeekStart)(e)},{setUpdating:h,initLoadOrgs:m,orgsLoaded:g,initLoadTeams:f,teamsLoaded:b,userLoaded:v,userSessionRevoked:x,initLoadSessions:y,sessionsLoaded:w,updateTimeZone:j,updateWeekStart:C,updateFiscalYearStartMonth:k}=c.actions,S=(c.reducer,{user:c.reducer})},"./public/app/features/profile/state/selectors.ts":(e,t,a)=>{"use strict";a.d(t,{Z:()=>s,i:()=>n});const s=e=>e.timeZone,n=e=>e.fiscalYearStartMonth},"./public/app/features/query/components/QueryActionComponent.ts":(e,t,a)=>{"use strict";a.d(t,{S:()=>n,f:()=>r});class s{constructor(){var e,t,a;a=[],(t="extraRenderActions")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}addExtraRenderAction(e){this.extraRenderActions=this.extraRenderActions.concat(e)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new s,r=new s},"./public/app/features/query/components/QueryEditorRow.tsx":(e,t,a)=>{"use strict";a.d(t,{x:()=>S,t:()=>T});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/classnames-npm-2.3.1-f2ae0a8d3c-14db8889d5.zip/node_modules/classnames/index.js"),r=a.n(n),i=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),o=a("./public/app/features/plugins/datasource_srv.ts"),l=a("./packages/grafana-runtime/src/index.ts"),c=a("./public/app/features/dashboard/services/TimeSrv.ts"),d=a("./packages/grafana-ui/src/index.ts"),u=a("./packages/grafana-data/src/index.ts"),p=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),h=a("./packages/grafana-e2e-selectors/src/index.ts"),m=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const g=e=>{const{query:t,queries:a,onClick:n,onChange:r,collapsedText:i,renderExtras:o,disabled:l}=e,c=(0,d.useStyles)(b),[u,p]=(0,s.useState)(!1),[g,v]=(0,s.useState)(null),x=e=>{p(!1),g?v(null):t.refId!==e&&r(Object.assign({},t,{refId:e}))};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:c.wrapper,children:[!u&&(0,m.jsxs)("button",{className:c.queryNameWrapper,"aria-label":h.wl.components.QueryEditorRow.title(t.refId),title:"Edit query name",onClick:e=>{p(!0)},"data-testid":"query-name-div",children:[(0,m.jsx)("span",{className:c.queryName,children:t.refId}),(0,m.jsx)(d.Icon,{name:"pen",className:c.queryEditIcon,size:"sm"})]}),u&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.Input,{type:"text",defaultValue:t.refId,onBlur:e=>{x(e.currentTarget.value.trim())},autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&x(e.target.value)},onFocus:e=>{e.target.select()},invalid:null!==g,onChange:e=>{const s=e.currentTarget.value.trim();if(0!==s.length){for(const e of a)if(e!==t&&s===e.refId)return void v("Query name already exists");g&&v(null)}else v("An empty query name is not allowed")},className:c.queryNameInput,"data-testid":"query-name-input"}),g&&(0,m.jsx)(d.FieldValidationMessage,{horizontal:!0,children:g})]}),f(e,c),o&&(0,m.jsx)("div",{className:c.itemWrapper,children:o()}),l&&(0,m.jsx)("em",{className:c.contextInfo,children:"Disabled"})]}),i&&(0,m.jsx)("div",{className:c.collapsedText,onClick:n,children:i})]})},f=(e,t)=>{const{alerting:a,dataSource:s,onChangeDataSource:n}=e;return n?(0,m.jsx)("div",{className:t.itemWrapper,children:(0,m.jsx)(l.DataSourcePicker,{alerting:a,current:s.name,onChange:n})}):(0,m.jsxs)("em",{className:t.contextInfo,children:["(",s.name,")"]})},b=e=>({wrapper:p.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${e.spacing.xs};
    `,queryNameWrapper:p.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${e.border.radius.md};
      align-items: center;
      padding: 0 0 0 ${e.spacing.xs};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${e.colors.bg3};
        border: 1px dashed ${e.colors.border3};
      }

      &:focus {
        border: 2px solid ${e.colors.formInputBorderActive};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:p.css`
      font-weight: ${e.typography.weight.semibold};
      color: ${e.colors.textBlue};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${e.spacing.xs};
    `,queryEditIcon:(0,p.cx)(p.css`
        margin-left: ${e.spacing.md};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:p.css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:p.css`
      font-weight: ${e.typography.weight.regular};
      font-size: ${e.typography.size.sm};
      color: ${e.colors.textWeak};
      padding-left: ${e.spacing.sm};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:p.css`
      font-size: ${e.typography.size.sm};
      font-style: italic;
      color: ${e.colors.textWeak};
      padding-left: 10px;
    `,itemWrapper:p.css`
      display: flex;
      margin-left: 4px;
    `});var v,x=a("./public/app/core/components/QueryOperationRow/QueryOperationRow.tsx"),y=a("./public/app/core/components/QueryOperationRow/QueryOperationAction.tsx"),w=a("./public/app/features/dashboard/state/PanelModel.ts"),j=a("./public/app/core/components/QueryOperationRow/OperationRowHelp.tsx"),C=a("./public/app/features/query/components/QueryActionComponent.ts");function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class S extends s.PureComponent{constructor(){super(...arguments),k(this,"element",null),k(this,"angularScope",null),k(this,"angularQueryEditor",null),k(this,"state",{datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1}),k(this,"renderAngularQueryEditor",(()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const e=(0,l.getAngularLoader)(),t={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=e.load(this.element,t,'<plugin-component type="query-ctrl" />'),this.angularScope=t.ctrl})),k(this,"onOpen",(()=>{this.renderAngularQueryEditor()})),k(this,"renderPluginEditor",(()=>{var e;const{query:t,onChange:a,queries:s,onRunQuery:n,app:r=u.CoreApp.PanelEditor,history:i}=this.props,{datasource:o,data:l}=this.state;if(null!=o&&null!==(e=o.components)&&void 0!==e&&e.QueryCtrl)return(0,m.jsx)("div",{ref:e=>this.element=e});if(o){let e=this.getReactQueryEditor(o);if(e)return(0,m.jsx)(e,{query:t,datasource:o,onChange:a,onRunQuery:n,data:l,range:(0,c.$t)().timeRange(),queries:s,app:r,history:i},null==o?void 0:o.name)}return v||(v=(0,m.jsx)("div",{children:"Data source plugin does not export any Query Editor component"}))})),k(this,"onToggleEditMode",((e,t)=>{var a;(e.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode)&&(this.angularScope.toggleEditorMode(),null===(a=this.angularQueryEditor)||void 0===a||a.digest(),t.isOpen||t.onOpen())})),k(this,"onRemoveQuery",(()=>{this.props.onRemoveQuery(this.props.query)})),k(this,"onCopyQuery",(()=>{const e=(0,i.cloneDeep)(this.props.query);this.props.onAddQuery(e)})),k(this,"onDisableQuery",(()=>{const{query:e}=this.props;this.props.onChange(Object.assign({},e,{hide:!e.hide})),this.props.onRunQuery()})),k(this,"onToggleHelp",(()=>{this.setState((e=>({showingHelp:!e.showingHelp})))})),k(this,"onClickExample",(e=>{this.props.onChange(Object.assign({},e,{refId:this.props.query.refId})),this.onToggleHelp()})),k(this,"renderExtraActions",(()=>{const{query:e,queries:t,data:a,onAddQuery:s,dataSource:n}=this.props;return C.f.getAllExtraRenderAction().map(((r,i)=>r({query:e,queries:t,timeRange:a.timeRange,onAddQuery:s,dataSource:n,key:i}))).filter(Boolean)})),k(this,"renderActions",(e=>{var t;const{query:a,hideDisableQuery:s=!1}=this.props,{hasTextEditMode:n,datasource:r,showingHelp:i}=this.state,o=a.hide,l=null==r||null===(t=r.components)||void 0===t?void 0:t.QueryEditorHelp;return(0,m.jsxs)(d.HorizontalGroup,{width:"auto",children:[l&&(0,m.jsx)(y.y,{title:"Toggle data source help",icon:"question-circle",onClick:this.onToggleHelp,active:i}),n&&(0,m.jsx)(y.y,{title:"Toggle text edit mode",icon:"pen",onClick:t=>{this.onToggleEditMode(t,e)}}),this.renderExtraActions(),(0,m.jsx)(y.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),s?null:(0,m.jsx)(y.y,{title:"Disable/enable query",icon:o?"eye-slash":"eye",active:o,onClick:this.onDisableQuery}),(0,m.jsx)(y.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery})]})})),k(this,"renderHeader",(e=>{const{alerting:t,query:a,dataSource:s,onChangeDataSource:n,onChange:r,queries:i,renderHeaderExtras:o}=this.props;return(0,m.jsx)(g,{query:a,queries:i,onChangeDataSource:n,dataSource:s,disabled:a.hide,onClick:t=>this.onToggleEditMode(t,e),onChange:r,collapsedText:e.isOpen?null:this.renderCollapsedText(),renderExtras:o,alerting:t})}))}componentDidMount(){this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:e,queries:t}=this.props,{datasource:a}=this.state,s=new w.r({targets:t}),n=this;return{datasource:a,target:e,panel:s,dashboard:{},refresh:()=>{e.hide!==n.props.query.hide&&(e.hide=n.props.query.hide),this.props.onChange(e),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new u.EventBusSrv,range:(0,c.$t)().timeRange()}}getQueryDataSourceIdentifier(){var e,t;const{query:a,dataSource:s}=this.props;return null!==(e=null===(t=a.datasource)||void 0===t?void 0:t.uid)&&void 0!==e?e:s.uid}async loadDatasource(){const e=(0,o.ak)();let t;const a=this.getQueryDataSourceIdentifier();try{t=await e.get(a)}catch(a){t=await e.get()}this.setState({datasource:t,loadedDataSourceIdentifier:a,hasTextEditMode:(0,i.has)(t,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(e){const{datasource:t,loadedDataSourceIdentifier:a}=this.state,{data:s,query:n}=this.props;if(s!==e.data){const e=T(s,n.refId);this.setState({data:e}),this.angularScope&&(this.angularScope.range=(0,c.$t)().timeRange()),this.angularQueryEditor&&e&&function(e,t,a){if(t.state===u.LoadingState.Done){const a=t.series.map((e=>(0,u.toLegacyResponseData)(e)));e.events.emit(u.PanelEvents.dataReceived,a)}else t.state===u.LoadingState.Error&&e.events.emit(u.PanelEvents.dataError,t.error);setTimeout(a.digest)}(this.angularScope,e,this.angularQueryEditor)}if(t&&a!==this.getQueryDataSourceIdentifier())return this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),void this.loadDatasource();this.element&&!this.angularQueryEditor&&this.renderAngularQueryEditor()}getReactQueryEditor(e){var t,a,s,n,r;if(e)switch(this.props.app){case u.CoreApp.Explore:return(null===(t=e.components)||void 0===t?void 0:t.ExploreMetricsQueryField)||(null===(a=e.components)||void 0===a?void 0:a.ExploreLogsQueryField)||(null===(s=e.components)||void 0===s?void 0:s.ExploreQueryField)||(null===(n=e.components)||void 0===n?void 0:n.QueryEditor);case u.CoreApp.PanelEditor:case u.CoreApp.Dashboard:default:return null===(r=e.components)||void 0===r?void 0:r.QueryEditor}}renderCollapsedText(){const{datasource:e}=this.state;return null!=e&&e.getQueryDisplayText?e.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){var e;const{query:t,id:a,index:s,visualization:n}=this.props,{datasource:i,showingHelp:o}=this.state,l=t.hide,c=r()("query-editor-row",{"query-editor-row--disabled":l,"gf-form-disabled":l});if(!i)return null;const u=this.renderPluginEditor(),p=null===(e=i.components)||void 0===e?void 0:e.QueryEditorHelp;return(0,m.jsx)("div",{"aria-label":h.wl.components.QueryEditorRows.rows,children:(0,m.jsx)(x.t,{id:a,draggable:!0,index:s,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen,children:(0,m.jsxs)("div",{className:c,children:[(0,m.jsxs)(d.ErrorBoundaryAlert,{children:[o&&p&&(0,m.jsx)(j.h,{children:(0,m.jsx)(p,{onClickExample:e=>this.onClickExample(e),datasource:i})}),u]}),n]})})})}}function T(e,t){const a=e.series.filter((e=>e.refId===t));if(!a.length)return e.error&&!e.series.length?Object.assign({},e,{state:u.LoadingState.Error}):void 0;let s=e.state;const n=e.error&&e.error.refId===t?e.error:void 0;n?s=u.LoadingState.Error:n||e.state!==u.LoadingState.Error||(s=u.LoadingState.Done);const r=e.timeRange;return Object.assign({},e,{state:s,series:a,error:n,timeRange:r})}},"./public/app/features/query/state/DashboardQueryRunner/DashboardQueryRunner.ts":(e,t,a)=>{"use strict";a.d(t,{Tl:()=>H,kt:()=>U});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),n=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Subject.js"),r=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Subscription.js"),i=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/merge.js"),o=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/timer.js"),l=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),c=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),d=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeAll.js"),u=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/reduce.js"),p=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/finalize.js"),h=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/share.js"),m=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/mapTo.js"),g=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function f(e){let t=[];const a=(0,g.partition)(e,"id"),s=(0,g.groupBy)(a[0],"id");return t=(0,g.map)(s,(e=>e.length>1&&!(0,g.every)(e,b)?(0,g.find)(e,(e=>"panel-alert"!==e.eventType)):(0,g.head)(e))),t=(0,g.concat)(t,a[1]),t}function b(e){return"panel-alert"===e.eventType}var v=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/from.js"),x=a("./packages/grafana-runtime/src/index.ts"),y=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),w=a("./public/app/features/query/state/DashboardQueryRunner/utils.ts");class j{canWork(e){let{dashboard:t,range:a}=e;return!!t.id&&("now"===a.raw.to&&!!t.panels.find((e=>!!e.alert)))}work(e){if(!this.canWork(e))return(0,w.H_)();const{dashboard:t}=e;return(0,v.D)((0,x.getBackendSrv)().get("/api/alerts/states-for-dashboard",{dashboardId:t.id},`dashboard-query-runner-alert-states-${t.id}`)).pipe((0,l.U)((e=>({alertStates:e,annotations:[]}))),(0,y.K)(w.Rc))}}var C=a("./public/app/features/query/state/DashboardQueryRunner/SnapshotWorker.ts"),k=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),S=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),T=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/filter.js");class O{canRun(e){return!!e&&Boolean(e.annotationQuery&&!e.annotations)}run(e){let{annotation:t,datasource:a,dashboard:s,range:n}=e;return this.canRun(a)?(0,v.D)(a.annotationQuery({range:n,rangeRaw:n.raw,annotation:t,dashboard:s})).pipe((0,y.K)(w.h1)):(0,k.of)([])}}var _=a("./public/app/features/annotations/executeAnnotationQuery.ts");class N{canRun(e){return!!e&&!Boolean(e.annotationQuery&&!e.annotations)}run(e){let{annotation:t,datasource:a,dashboard:s,range:n}=e;if(!this.canRun(a))return(0,k.of)([]);return(0,_.r)({dashboard:s,range:n,panel:{}},a,t).pipe((0,l.U)((e=>{var t;return null!==(t=e.events)&&void 0!==t?t:[]})),(0,y.K)(w.h1))}}var I=a("./public/app/types/events.ts");class P{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new O,new N];this.runners=e}canWork(e){let{dashboard:t}=e;const a=t.annotations.list.find(P.getAnnotationsToProcessFilter);return Boolean(a)}work(e){if(!this.canWork(e))return(0,w.H_)();const{dashboard:t,range:a}=e,s=t.annotations.list.filter(P.getAnnotationsToProcessFilter).map((e=>(0,v.D)((0,x.getDataSourceSrv)().get(e.datasource)).pipe((0,y.K)(w.hs)).pipe((0,S.z)((s=>{const n=this.runners.find((e=>e.canRun(s)));return n?(t.events.publish(new I.z(e)),n.run({annotation:e,datasource:s,dashboard:t,range:a}).pipe((0,c.R)(U().cancellations().pipe((0,T.h)((t=>t===e)))),(0,l.U)((a=>(t.snapshot&&(e.snapshotData=(0,g.cloneDeep)(a)),(0,w.pG)(e,a)))),(0,p.x)((()=>{t.events.publish(new I.RB(e))})))):(0,k.of)([])})))));return(0,i.T)(s).pipe((0,d.J)(),(0,u.u)(((e,t)=>e.concat(t))),(0,l.U)((e=>({annotations:e,alertStates:[]}))))}static getAnnotationsToProcessFilter(e){return e.enable&&!Boolean(e.snapshotData)}}var M=a("./public/app/features/dashboard/services/TimeSrv.ts"),F=a("./public/app/core/config.ts"),A=a("./public/app/types/unified-alerting-dto.ts"),D=a("./packages/grafana-data/src/index.ts"),$=a("./public/app/features/alerting/unified/utils/rules.ts"),L=a("./public/app/features/alerting/unified/utils/constants.ts");class R{constructor(){var e,t,a;a={},(t="hasAlertRules")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}canWork(e){let{dashboard:t,range:a}=e;return!!t.uid&&("now"===a.raw.to&&!1!==this.hasAlertRules[t.uid])}work(e){if(!this.canWork(e))return(0,w.H_)();const{dashboard:t}=e;return(0,v.D)((0,x.getBackendSrv)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:t.uid},`dashboard-query-runner-unified-alert-states-${t.id}`)).pipe((0,l.U)((e=>{if("success"===e.status){this.hasAlertRules[t.uid]=!1;const a={};return e.data.groups.forEach((e=>e.rules.forEach((e=>{if((0,$.x_)(e)&&e.annotations&&e.annotations[L.q6.panelID]){this.hasAlertRules[t.uid]=!0;const s=Number(e.annotations[L.q6.panelID]),n=function(e){if(e===A.x_.Firing)return D.AlertState.Alerting;if(e===A.x_.Pending)return D.AlertState.Pending;return D.AlertState.OK}(e.state);a[s]?n===D.AlertState.Alerting&&a[s].state!==D.AlertState.Alerting?a[s].state=D.AlertState.Alerting:n===D.AlertState.Pending&&a[s].state!==D.AlertState.Alerting&&a[s].state!==D.AlertState.Pending&&(a[s].state=D.AlertState.Pending):a[s]={state:n,id:Object.keys(a).length,panelId:s,dashboardId:t.id}}})))),{alertStates:Object.values(a),annotations:[]}}throw new Error("Unexpected alert rules response.")})),(0,y.K)(w.Rc))}}function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class z{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,M.$t)(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[F.vc.unifiedAlertingEnabled?new R:new j,new C.g,new P];E(this,"results",void 0),E(this,"runs",void 0),E(this,"cancellationStream",void 0),E(this,"runsSubscription",void 0),E(this,"eventsSubscription",void 0),this.dashboard=e,this.timeSrv=t,this.workers=a,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new s.t(1),this.runs=new n.x,this.cancellationStream=new n.x,this.runsSubscription=this.runs.subscribe((e=>this.executeRun(e))),this.eventsSubscription=e.events.subscribe(x.RefreshEvent,(e=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})}))}run(e){this.runs.next(e)}getResult(e){return this.results.asObservable().pipe((0,l.U)((t=>{const a=(0,w.tD)(t.annotations,e),s=t.alertStates.find((t=>Boolean(e)&&t.panelId===e));return{annotations:f(a),alertState:s}})))}executeRun(e){const t=this.workers.filter((t=>t.canWork(e))).map((t=>t.work(e))),a=new r.w0,s=(0,i.T)(t).pipe((0,c.R)(this.runs.asObservable()),(0,d.J)(),(0,u.u)(((e,t)=>(e.annotations=e.annotations.concat(t.annotations),e.alertStates=e.alertStates.concat(t.alertStates),e))),(0,p.x)((()=>{a.unsubscribe()})),(0,h.B)()),n=new r.w0,l=(0,o.H)(200).pipe((0,m.h)({annotations:[],alertStates:[]}),(0,c.R)(s),(0,p.x)((()=>{n.unsubscribe()})));n.add(l.subscribe((e=>{this.results.next(e)}))),a.add(s.subscribe((e=>{this.results.next(e)})))}cancel(e){this.cancellationStream.next(e)}cancellations(){return this.cancellationStream.asObservable().pipe((0,h.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let V,B;function U(){if(!V)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return V}function H(e){B||(B=e=>{let{dashboard:t,timeSrv:a,workers:s}=e;return new z(t,a,s)});const t=B(e);return function(e){V&&V.destroy(),V=e}(t),t}},"./public/app/features/query/state/DashboardQueryRunner/SnapshotWorker.ts":(e,t,a)=>{"use strict";a.d(t,{g:()=>r});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),n=a("./public/app/features/query/state/DashboardQueryRunner/utils.ts");class r{canWork(e){var t,a;let{dashboard:s}=e;return null==s||null===(t=s.annotations)||void 0===t||null===(a=t.list)||void 0===a?void 0:a.some((e=>e.enable&&Boolean(e.snapshotData)))}work(e){if(!this.canWork(e))return(0,n.H_)();const t=this.getAnnotationsFromSnapshot(e.dashboard);return(0,s.of)({annotations:t,alertStates:[]})}getAnnotationsFromSnapshot(e){var t,a;return(null==e||null===(t=e.annotations)||void 0===t||null===(a=t.list)||void 0===a?void 0:a.filter((e=>e.enable))).filter((e=>Boolean(e.snapshotData))).reduce(((e,t)=>e.concat((0,n.pG)(t,t.snapshotData))),[])}getAnnotationsInSnapshot(e,t){const a=this.getAnnotationsFromSnapshot(e);return(0,n.tD)(a,t)}}},"./public/app/features/query/state/DashboardQueryRunner/utils.ts":(e,t,a)=>{"use strict";a.d(t,{h1:()=>d,hs:()=>u,H_:()=>p,Rc:()=>h,tD:()=>g,pG:()=>f,em:()=>b});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),r=a("./packages/grafana-data/src/index.ts"),i=a("./packages/grafana-runtime/src/index.ts"),o=a("./public/app/store/store.ts"),l=a("./public/app/core/copy/appNotification.ts"),c=a("./public/app/core/reducers/appNotification.ts");function d(e){return e.cancelled||m("AnnotationQueryRunner failed",e),(0,n.of)([])}function u(e){return m("Failed to retrieve datasource",e),(0,n.of)(void 0)}const p=()=>(0,n.of)({annotations:[],alertStates:[]});function h(e){return e.cancelled||m("DashboardQueryRunner failed",e),p()}function m(e,t){const a=(0,i.toDataQueryError)(t);console.error("handleAnnotationQueryRunnerError",a);const s=(0,l.t_)(e,a.message);(0,o.WI)((0,c.$l)(s))}function g(e,t){return e.filter((e=>{var a;return void 0===t||!e.panelId||"dashboard"!==(null===(a=e.source)||void 0===a?void 0:a.type)||e.panelId===t}))}function f(e,t){var a;e.snapshotData&&delete(e=(0,s.cloneDeep)(e)).snapshotData;for(const s of t)switch(s.source=e,s.color=i.config.theme2.visualization.getColorByName(e.iconColor),s.type=e.name,s.isRegion=Boolean(s.timeEnd&&s.time!==s.timeEnd),null===(a=s.newState)||void 0===a?void 0:a.toLowerCase()){case"pending":s.color="yellow";break;case"alerting":s.color="red";break;case"ok":case"normal":s.color="green";break;case"no_data":case"nodata":s.color="gray"}return t}function b(e){if(!e||!e.length)return[];const t=[];for(const a of e){const e=new r.DataFrameView(a);for(let n=0;n<a.length;n++){const a=(0,s.cloneDeep)(e.get(n));t.push(a)}}return t}},"./public/app/features/query/state/PanelQueryRunner.ts":(e,t,a)=>{"use strict";a.d(t,{o:()=>x,t:()=>v});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),r=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),i=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),o=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),l=a("./packages/grafana-runtime/src/index.ts"),c=a("./public/app/features/plugins/datasource_srv.ts"),d=a("./public/app/features/query/state/runRequest.ts"),u=a("./public/app/plugins/datasource/dashboard/index.ts"),p=a("./packages/grafana-data/src/index.ts"),h=a("./public/app/features/query/state/DashboardQueryRunner/DashboardQueryRunner.ts"),m=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var g=a("./public/app/features/live/data/utils.ts");function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let b=100;function v(){return"Q"+b++}class x{constructor(e){f(this,"subject",void 0),f(this,"subscription",void 0),f(this,"lastResult",void 0),f(this,"dataConfigSource",void 0),f(this,"lastRequest",void 0),f(this,"getTransformationsStream",(e=>t=>t.pipe((0,i.z)((t=>{if(!e)return(0,n.of)(t);const a=this.dataConfigSource.getTransformations();return a&&0!==a.length?(0,p.transformDataFrame)(a,t.series).pipe((0,o.U)((e=>Object.assign({},t,{series:e})))):(0,n.of)(t)}))))),f(this,"resendLastResult",(()=>{this.lastResult&&this.subject.next(this.lastResult)})),this.subject=new r.t(1),this.dataConfigSource=e}getData(e){const{withFieldConfig:t,withTransforms:a}=e;let s=1,r=[],i=!0,l=-1;if(this.dataConfigSource.snapshotData){const e={state:p.LoadingState.Done,series:this.dataConfigSource.snapshotData.map((e=>(0,p.toDataFrame)(e))),timeRange:(0,p.getDefaultTimeRange)()};return(0,n.of)(e)}return this.subject.pipe(this.getTransformationsStream(a),(0,o.U)((e=>{var a;let n=e,o=!1;if(t&&null!==(a=e.series)&&void 0!==a&&a.length){if(l===this.dataConfigSource.configRev){const t=e.series.find((e=>(0,g.iL)(e)));t&&!t.packetInfo.schemaChanged&&r[0].fields.length===t.fields.length&&(n=Object.assign({},n,{series:r.map(((t,a)=>Object.assign({},t,{length:e.series[a].length,fields:t.fields.map(((t,s)=>Object.assign({},t,{values:e.series[a].fields[s].values,state:Object.assign({},t.state,{calcs:void 0,range:void 0})})))})))}),o=!0)}let t=this.dataConfigSource.getFieldOverrideOptions();var c,d;if(null!=t&&(i||!o))l=this.dataConfigSource.configRev,n=Object.assign({},n,{series:(0,p.applyFieldOverrides)(Object.assign({timeZone:null!==(c=null===(d=e.request)||void 0===d?void 0:d.timezone)&&void 0!==c?c:"browser",data:n.series},t))}),i=!1}return o||(0,p.compareArrayValues)(r,n.series,p.compareDataFrameStructures)||s++,r=n.series,Object.assign({},n,{structureRev:s})})))}async run(e){const{queries:t,timezone:a,datasource:n,panelId:r,dashboardId:i,timeRange:o,timeInfo:h,cacheTimeout:m,maxDataPoints:g,scopedVars:f,minInterval:b}=e;if((0,u.yl)(n))return void this.pipeToSubject((0,u.AK)(e),r);const x={app:p.CoreApp.Dashboard,requestId:v(),timezone:a,panelId:r,dashboardId:i,range:o,timeInfo:h,interval:"",intervalMs:0,targets:(0,s.cloneDeep)(t),maxDataPoints:g,scopedVars:f||{},cacheTimeout:m,startTime:Date.now()};x.rangeRaw=o.raw;try{const e=await async function(e,t){if(e&&e.query)return e;return await(0,c.ak)().get(e,t)}(n,x.scopedVars);x.targets=x.targets.map((t=>(t.datasource||(t.datasource=e.getRef()),t)));const t=b?(0,l.getTemplateSrv)().replace(b,x.scopedVars):e.interval,a=p.rangeUtil.calculateInterval(o,g,t);x.scopedVars=Object.assign({},x.scopedVars,{__interval:{text:a.interval,value:a.interval},__interval_ms:{text:a.intervalMs.toString(),value:a.intervalMs}}),x.interval=a.interval,x.intervalMs=a.intervalMs,this.lastRequest=x,this.pipeToSubject((0,d.v7)(e,x),r)}catch(e){console.error("PanelQueryRunner Error",e)}}pipeToSubject(e,t){this.subscription&&this.subscription.unsubscribe();let a=e;const s=this.dataConfigSource.getDataSupport();if(s.alertStates||s.annotations){const t=this.dataConfigSource;r=e,o=(0,h.kt)().getResult(t.id),a=(0,m.a)([r,o]).pipe((0,i.z)((e=>{var t;const[a,s]=e;if(Boolean(null===(t=s.annotations)||void 0===t?void 0:t.length)||Boolean(s.alertState)){a.annotations||(a.annotations=[]);const e=a.annotations.concat(new p.ArrayDataFrame(s.annotations)),t=s.alertState;return(0,n.of)(Object.assign({},a,{annotations:e,alertState:t}))}return(0,n.of)(a)})))}var r,o;this.subscription=a.subscribe({next:e=>{this.lastResult=(0,d.zR)(e,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===p.LoadingState.Loading&&this.subject.next(Object.assign({},this.lastResult,{state:p.LoadingState.Done})))}clearLastResult(){this.lastResult=void 0,this.subject=new r.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(e){this.lastResult=e.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}},"./public/app/features/query/state/processing/canceler.ts":(e,t,a)=>{"use strict";a.d(t,{V:()=>n});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/finalize.js");function n(e,t){return(0,s.x)((()=>{t&&e.resolveCancelerIfExists(t)}))}},"./public/app/features/query/state/processing/revision.ts":(e,t,a)=>{"use strict";a.d(t,{C:()=>n});var s=a("./packages/grafana-data/src/index.ts");const n=(e,t)=>{let a=1;if(null!=t&&t.structureRev&&t.series){a=t.structureRev;(0,s.compareArrayValues)(e.series,t.series,s.compareDataFrameStructures)||a++}return e.structureRev=a,e}},"./public/app/features/query/state/runRequest.ts":(e,t,a)=>{"use strict";a.d(t,{F9:()=>k,zR:()=>S,v7:()=>j});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),n=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/merge.js"),r=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/timer.js"),i=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/from.js"),o=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),l=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),c=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),d=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/tap.js"),u=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/share.js"),p=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/mapTo.js"),h=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),m=a("./public/app/core/services/backend_srv.ts"),g=a("./packages/grafana-data/src/index.ts"),f=a("./packages/grafana-runtime/src/index.ts"),b=a("./public/app/features/dashboard/services/DashboardSrv.ts");var v=a("./public/app/features/expressions/ExpressionDatasource.ts"),x=a("./public/app/features/query/state/processing/canceler.ts"),y=a("./packages/grafana-runtime/src/utils/DataSourceWithBackend.ts");function w(e,t){const a=t.panelData.request,s=Object.assign({},t.packets);s[e.key||"A"]=e;let n,r=e.state||g.LoadingState.Done;const i=[],l=[];for(const e in s){const t=s[e];if(t.error&&(r=g.LoadingState.Error,n=t.error),t.data&&t.data.length)for(const e of t.data){var c;(null===(c=e.meta)||void 0===c?void 0:c.dataTopic)!==g.DataTopic.Annotations?i.push(e):l.push(e)}}const d=function(e,t){const a=e.range;if(!(0,o.isString)(a.raw.from)||t!==g.LoadingState.Streaming)return a;return Object.assign({},a,{from:g.dateMath.parse(a.raw.from,!1),to:g.dateMath.parse(a.raw.to,!0)})}(a,r);return{packets:s,panelData:{state:r,series:i,annotations:l,error:n,request:a,timeRange:d}}}function j(e,t,a){let j={panelData:{state:g.LoadingState.Loading,series:[],request:t,timeRange:t.range},packets:{}};if(!t.targets.length)return t.endTime=Date.now(),j.panelData.state=g.LoadingState.Done,(0,s.of)(j.panelData);const C=function(e,t,a){for(const e of t.targets)if((0,y.Pr)(e.datasource))return v.mV.query(t);const s=a?a(t):e.query(t);return(0,i.D)(s)}(e,t,a).pipe((0,l.U)((e=>{if(!(0,o.map)(e.data))throw new Error(`Expected response data to be array, got ${typeof e.data}.`);return t.endTime=Date.now(),j=w(e,j),j.panelData})),(0,c.K)((e=>{const t="string"==typeof e?e:JSON.stringify(e);return console.error("runRequest.catchError",t),(0,s.of)(Object.assign({},j.panelData,{state:g.LoadingState.Error,error:(0,f.toDataQueryError)(e)}))})),(0,d.b)(function(e){let t=!1;return a=>{if(!a.request||t||a.request.app===g.CoreApp.Explore)return;if(null!=g.urlUtil.getUrlSearchParams().editPanel)return;if(a.state!==g.LoadingState.Done&&a.state!==g.LoadingState.Error)return;const s={eventName:f.MetaAnalyticsEventName.DataRequest,datasourceName:e.name,datasourceId:e.id,datasourceType:e.type,panelId:a.request.panelId,dashboardId:a.request.dashboardId,dataSize:0,duration:a.request.endTime-a.request.startTime},n=(0,b.h4)().getCurrent();n&&(s.dashboardId=n.id,s.dashboardName=n.title,s.dashboardUid=n.uid,s.folderName=n.meta.folderTitle),a.series&&a.series.length>0&&(s.dataSize=a.series.length),a.error&&(s.error=a.error.message),(0,f.reportMetaAnalytics)(s),t=!0}}(e)),(0,x.V)(m.ae,t.requestId),(0,u.B)());return(0,n.T)((0,r.H)(200).pipe((0,p.h)(j.panelData),(0,h.R)(C)),C)}function C(e){const t=(0,g.guessFieldTypes)((0,g.toDataFrame)(e));if(t.fields&&t.fields.length)for(const e of t.fields)e.state=null;return t}function k(e){return e&&(0,o.map)(e)?e.map((e=>C(e))):[]}function S(e,t){const{series:a,annotations:s}=e;if(e.state===g.LoadingState.Loading&&0===a.length)return t||(t=e),Object.assign({},t,{state:g.LoadingState.Loading,request:e.request});const n=performance.now(),r=a.map((e=>C(e))),i=k(s),o=performance.now();return Object.assign({},e,{series:r,annotations:i,timings:{dataProcessingTime:o-n}})}},"./public/app/features/search/components/ActionRow.tsx":(e,t,a)=>{"use strict";a.d(t,{B:()=>h});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/core/components/Select/SortPicker.tsx"),i=a("./public/app/core/components/TagFilter/TagFilter.tsx"),o=a("./public/app/core/services/search_srv.ts"),l=a("./public/app/features/search/types.ts"),c=a("./packages/grafana-runtime/src/index.ts"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u=[{value:l.A.Folders,icon:"folder",ariaLabel:"View by folders"},{value:l.A.List,icon:"list-ul",ariaLabel:"View as list"}],p=new o.i,h=e=>{var t;let{onLayoutChange:a,onShowPreviewsChange:s,onSortChange:o,onStarredFilterChange:l=(()=>{}),onTagFilterChange:h,query:g,showStarredFilter:f,hideLayout:b,showPreviews:v}=e;const x=(0,n.useTheme)(),y=m(x),w=c.config.featureToggles.dashboardPreviews;return(0,d.jsxs)("div",{className:y.actionRow,children:[(0,d.jsx)("div",{className:y.rowContainer,children:(0,d.jsxs)(n.HorizontalGroup,{spacing:"md",width:"auto",children:[b?null:(0,d.jsx)(n.RadioButtonGroup,{options:u,onChange:a,value:g.layout}),(0,d.jsx)(r.P,{onChange:o,value:null===(t=g.sort)||void 0===t?void 0:t.value}),w&&(0,d.jsx)(n.InlineSwitch,{id:"search-show-previews",label:"Show previews",showLabel:!0,value:v,onChange:s,transparent:!0})]})}),(0,d.jsxs)(n.HorizontalGroup,{spacing:"md",width:"auto",children:[f&&(0,d.jsx)("div",{className:y.checkboxWrapper,children:(0,d.jsx)(n.Checkbox,{label:"Filter by starred",onChange:l,value:g.starred})}),(0,d.jsx)(i.D,{isClearable:!0,tags:g.tag,tagOptions:p.getDashboardTags,onChange:h})]})]})};h.displayName="ActionRow";const m=(0,n.stylesFactory)((e=>({actionRow:s.css`
      display: none;

      @media only screen and (min-width: ${e.breakpoints.md}) {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: ${e.spacing.lg} 0;
        width: 100%;
      }
    `,rowContainer:s.css`
      margin-right: ${e.spacing.md};
    `,checkboxWrapper:s.css`
      label {
        line-height: 1.2;
      }
    `})))},"./public/app/features/search/components/ConfirmDeleteModal.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/features/search/utils.ts"),i=a("./public/app/features/manage-dashboards/state/actions.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=e=>{let{results:t,onDeleteItems:a,isOpen:s,onDismiss:l}=e;const d=(0,n.useTheme)(),u=c(d),p=(0,r.jw)(t),{folders:h,dashboards:m}=p,g=h.length,f=m.length;let b,v="Do you want to delete the ";const x=1===f?"":"s",y=1===g?"":"s";g>0&&f>0?(v+=`selected folder${y} and dashboard${x}?\n`,b=`All dashboards and alerts of the selected folder${y} will also be deleted`):v+=g>0?`selected folder${y} and all ${1===g?"its":"their"} dashboards and alerts?`:`selected dashboard${x}?`;return s?(0,o.jsx)(n.ConfirmModal,{isOpen:s,title:"Delete",body:(0,o.jsxs)(o.Fragment,{children:[v," ",b&&(0,o.jsx)("div",{className:u.subtitle,children:b})]}),confirmText:"Delete",onConfirm:()=>{(0,i.Fd)(h,m).then((()=>{l(),a(h,m)}))},onDismiss:l}):null},c=(0,n.stylesFactory)((e=>({subtitle:s.css`
      font-size: ${e.typography.size.base};
      padding-top: ${e.spacing.md};
    `})))},"./public/app/features/search/components/ManageDashboards.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>y});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./packages/grafana-ui/src/index.ts"),o=a("./public/app/core/services/context_srv.ts"),l=a("./public/app/core/components/EmptyListCTA/EmptyListCTA.tsx"),c=a("./public/app/features/search/hooks/useManageDashboards.ts"),d=a("./public/app/features/search/types.ts"),u=a("./public/app/features/search/components/ConfirmDeleteModal.tsx"),p=a("./public/app/features/search/components/MoveToFolderModal.tsx"),h=a("./public/app/features/search/hooks/useSearchQuery.ts"),m=a("./public/app/features/search/components/SearchResultsFilter.tsx"),g=a("./public/app/features/search/components/SearchResults.tsx"),f=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const b=e=>{let{folderId:t,isEditor:a,canEdit:n}=e;const r=e=>{let a=`dashboard/${e}`;return t&&(a+=`?folderId=${t}`),a};return(0,f.jsx)("div",{children:(0,f.jsxs)(i.HorizontalGroup,{spacing:"md",align:"center",children:[n&&(0,f.jsx)(i.LinkButton,{href:r("new"),children:"New Dashboard"}),!t&&a&&(s||(s=(0,f.jsx)(i.LinkButton,{href:"dashboards/folder/new",children:"New Folder"}))),n&&(0,f.jsx)(i.LinkButton,{href:r("import"),children:"Import"})]})})},{isEditor:v}=o.Vt,x=(0,n.memo)((e=>{let{folder:t}=e;const a=null==t?void 0:t.id,s=null==t?void 0:t.uid,r=(0,i.useTheme)(),o=w(r),[x,y]=(0,n.useState)(!1),[j,C]=(0,n.useState)(!1),k={skipRecent:!0,skipStarred:!0,folderIds:a?[a]:[],layout:a?d.A.List:d.A.Folders},{query:S,hasFilters:T,onQueryChange:O,onTagFilterChange:_,onStarredFilterChange:N,onTagAdd:I,onSortChange:P,onLayoutChange:M}=(0,h.A)(k),{results:F,loading:A,initialLoading:D,canSave:$,allChecked:L,hasEditPermissionInFolders:R,canMove:E,canDelete:z,onToggleSection:V,onToggleChecked:B,onToggleAllChecked:U,onDeleteItems:H,onMoveItems:q,noFolders:W,showPreviews:G,onShowPreviewsChange:Z}=(0,c.x)(S,{},t);return D?(0,f.jsx)(i.Spinner,{className:o.spinner}):W&&!T?(0,f.jsx)(l.Z,{title:"This folder doesn't have any dashboards yet",buttonIcon:"plus",buttonTitle:"Create Dashboard",buttonLink:`dashboard/new?folderId=${a}`,proTip:"Add/move dashboards to your folder at ->",proTipLink:"dashboards",proTipLinkTitle:"Manage dashboards",proTipTarget:""}):(0,f.jsxs)("div",{className:o.container,children:[(0,f.jsxs)("div",{className:"page-action-bar",children:[(0,f.jsx)("div",{className:"gf-form gf-form--grow m-r-2",children:(0,f.jsx)(i.FilterInput,{value:S.query,onChange:O,placeholder:"Search dashboards by name"})}),(0,f.jsx)(b,{isEditor:v,canEdit:R||$,folderId:a})]}),(0,f.jsxs)("div",{className:o.results,children:[(0,f.jsx)(m.f,{allChecked:L,canDelete:R&&z,canMove:R&&E,deleteItem:()=>{y(!0)},moveTo:()=>{C(!0)},onShowPreviewsChange:e=>Z(e.target.checked),onToggleAllChecked:U,onStarredFilterChange:N,onSortChange:P,onTagFilterChange:_,query:S,showPreviews:G,hideLayout:!!s,onLayoutChange:M,editable:R}),(0,f.jsx)(g.s,{loading:A,results:F,editable:R,onTagSelected:I,onToggleSection:V,onToggleChecked:B,layout:S.layout,showPreviews:G})]}),(0,f.jsx)(u.Z,{onDeleteItems:H,results:F,isOpen:x,onDismiss:()=>y(!1)}),(0,f.jsx)(p.i,{onMoveItems:q,results:F,isOpen:j,onDismiss:()=>C(!1)})]})}));x.displayName="ManageDashboards";const y=x,w=(0,i.stylesFactory)((e=>({container:r.css`
      height: 100%;
      display: flex;
      flex-direction: column;
    `,results:r.css`
      display: flex;
      flex-direction: column;
      flex: 1 1 0;
      height: 100%;
      padding-top: ${e.spacing.lg};
    `,spinner:r.css`
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 200px;
    `})))},"./public/app/features/search/components/MoveToFolderModal.tsx":(e,t,a)=>{"use strict";a.d(t,{i:()=>p});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./packages/grafana-data/src/index.ts"),o=a("./public/app/core/components/Select/FolderPicker.tsx"),l=a("./public/app/core/app_events.ts"),c=a("./public/app/features/search/utils.ts"),d=a("./public/app/features/manage-dashboards/state/actions.ts"),u=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const p=e=>{let{results:t,onMoveItems:a,isOpen:n,onDismiss:p}=e;const[m,g]=(0,s.useState)(null),f=(0,r.useTheme)(),b=h(f),v=(0,c.IO)(t);return n?(0,u.jsx)(r.Modal,{className:b.modal,title:"Choose Dashboard Folder",icon:"folder-plus",isOpen:n,onDismiss:p,children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:b.content,children:[(0,u.jsxs)("p",{children:["Move the ",v.length," selected dashboard",1===v.length?"":"s"," to the following folder:"]}),(0,u.jsx)(o.E,{onChange:e=>g(e)})]}),(0,u.jsxs)(r.HorizontalGroup,{justify:"center",children:[(0,u.jsx)(r.Button,{variant:"primary",onClick:()=>{if(m&&v.length){var e;const t=null!==(e=m.title)&&void 0!==e?e:"General";(0,d.ct)(v.map((e=>e.uid)),m).then((e=>{if(e.successCount>0){const a=1===e.successCount?"":"s",s=`Dashboard${a} Moved`,n=`${e.successCount} dashboard${a} moved to ${t}`;l.Z.emit(i.AppEvents.alertSuccess,[s,n])}e.totalCount===e.alreadyInFolderCount?l.Z.emit(i.AppEvents.alertError,["Error",`Dashboard already belongs to folder ${t}`]):a(v,m),p()}))}},children:"Move"}),(0,u.jsx)(r.Button,{variant:"secondary",onClick:p,children:"Cancel"})]})]})}):null},h=(0,r.stylesFactory)((e=>({modal:n.css`
      width: 500px;
    `,content:n.css`
      margin-bottom: ${e.spacing.lg};
    `})))},"./public/app/features/search/components/SearchCard.tsx":(e,t,a)=>{"use strict";a.d(t,{K:()=>w,A:()=>y});var s,n,r,i,o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),l=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),c=a("./.yarn/__virtual__/react-popper-virtual-0f6b5e2cc8/3/opt/drone/yarncache/react-popper-npm-2.2.5-6e86e4bf1e-915fcf08e1.zip/node_modules/react-popper/lib/esm/usePopper.js"),d=a("./packages/grafana-ui/src/index.ts"),u=a("./packages/grafana-e2e-selectors/src/index.ts"),p=a("./public/app/core/services/backend_srv.ts"),h=a("./public/app/features/search/components/SearchCheckbox.tsx"),m=a("../../opt/drone/yarncache/classnames-npm-2.3.1-f2ae0a8d3c-14db8889d5.zip/node_modules/classnames/index.js"),g=a.n(m),f=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function b(e){let{className:t,imageHeight:a,imageWidth:l,item:c,lastUpdated:u}=e;const p=(0,d.useTheme2)(),[h,m]=(0,o.useState)(!0),b=y(c.uid,p.isLight),x=v(p,a,l),w=c.folderTitle||"General";return(0,f.jsxs)("a",{className:g()(t,x.card),href:c.url,children:[(0,f.jsx)("div",{className:x.imageContainer,children:h?(0,f.jsx)("img",{loading:"lazy",className:x.image,src:b,onLoad:()=>m(!0),onError:()=>m(!1)}):(0,f.jsx)("div",{className:x.imagePlaceholder,children:s||(s=(0,f.jsx)(d.Icon,{name:"apps",size:"xl"}))})}),(0,f.jsxs)("div",{className:x.info,children:[(0,f.jsxs)("div",{className:x.infoHeader,children:[(0,f.jsxs)("div",{className:x.titleContainer,children:[(0,f.jsx)("div",{children:c.title}),(0,f.jsxs)("div",{className:x.folder,children:[n||(n=(0,f.jsx)(d.Icon,{name:"folder"})),w]})]}),(0,f.jsxs)("div",{className:x.updateContainer,children:[r||(r=(0,f.jsx)("div",{children:"Last updated"})),u?(0,f.jsx)("div",{className:x.update,children:u}):i||(i=(0,f.jsx)(d.Spinner,{}))]})]}),(0,f.jsx)("div",{children:(0,f.jsx)(d.TagList,{className:x.tagList,tags:c.tags})})]})]},c.uid)}const v=(e,t,a)=>{const s=e.spacing(4);return{card:l.css`
      background-color: ${e.colors.background.secondary};
      border: 1px solid ${e.colors.border.medium};
      border-radius: 4px;
      box-shadow: ${e.shadows.z3};
      display: flex;
      flex-direction: column;
      height: 100%;
      max-width: calc(${a}px + (${s} * 2))};
      width: 100%;
    `,folder:l.css`
      align-items: center;
      color: ${e.colors.text.secondary};
      display: flex;
      font-size: ${e.typography.size.sm};
      gap: ${e.spacing(.5)};
    `,image:l.css`
      box-shadow: ${e.shadows.z2};
      height: ${t}px;
      margin: ${e.spacing(1)} calc(${s} - 1px) 0;
      width: ${a}px;
    `,imageContainer:l.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${e.spacing(1)} calc(${s} - 1px) 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:l.css`
      align-items: center;
      color: ${e.colors.text.secondary};
      display: flex;
      height: ${t}px;
      justify-content: center;
      margin: ${e.spacing(1)} ${s} 0;
      width: ${a}px;
    `,info:l.css`
      background-color: ${e.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      flex-direction: column;
      min-height: ${e.spacing(7)};
      gap: ${e.spacing(1)};
      padding: ${e.spacing(1)} ${e.spacing(2)};
      z-index: 1;
    `,infoHeader:l.css`
      display: flex;
      gap: ${e.spacing(1)};
      justify-content: space-between;
    `,tagList:l.css`
      justify-content: flex-start;
    `,titleContainer:l.css`
      display: flex;
      flex-direction: column;
      gap: ${e.spacing(.5)};
    `,updateContainer:l.css`
      align-items: flex-end;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      font-size: ${e.typography.bodySmall.fontSize};
      gap: ${e.spacing(.5)};
    `,update:l.css`
      color: ${e.colors.text.secondary};
      text-align: right;
    `}};var x;function y(e,t){return`/api/dashboards/uid/${e}/img/thumb/${t?"light":"dark"}`}function w(e){let{editable:t,item:a,onTagSelected:s,onToggleChecked:n}=e;const[r,i]=(0,o.useState)(!0),[l,m]=(0,o.useState)(),[g,v]=(0,o.useState)(!1),w=(0,o.useRef)(null),C=(0,o.useCallback)((e=>{let{placement:t,reference:a,popper:s}=e,n=[0,0];return"bottom"===t||"top"===t?n=[0,-(a.height+s.height)/2]:"left"!==t&&"right"!==t||(n=[-(a.width+s.width)/2,0]),n}),[]),[k,S]=o.useState(null),[T,O]=o.useState(null),{styles:_,attributes:N}=(0,c.D)(k,T,{modifiers:[{name:"offset",options:{offset:C}}]}),I=(0,d.useTheme2)(),P=y(a.uid,I.isLight),M=j(I,null==k?void 0:k.getBoundingClientRect().width,null==T?void 0:T.getBoundingClientRect().width),F=async()=>{if(v(!0),a.uid&&!l){const e=await p.ae.getDashboardByUid(a.uid),{updated:t}=e.meta;m(new Date(t).toLocaleString())}};return(0,f.jsxs)("a",{"data-testid":u.wl.components.Search.dashboardCard(a.title),className:M.card,href:a.url,ref:e=>S(e),onMouseEnter:()=>{w.current=window.setTimeout(F,500)},onMouseLeave:()=>{w.current&&window.clearTimeout(w.current),v(!1)},onMouseMove:()=>{w.current&&window.clearTimeout(w.current),w.current=window.setTimeout(F,500)},children:[(0,f.jsxs)("div",{className:M.imageContainer,children:[(0,f.jsx)(h.R,{className:M.checkbox,"aria-label":"Select dashboard",editable:t,checked:a.checked,onClick:e=>{e.stopPropagation(),e.preventDefault(),null==n||n(a)}}),r?(0,f.jsx)("img",{loading:"lazy",className:M.image,src:P,onError:()=>i(!1)}):(0,f.jsx)("div",{className:M.imagePlaceholder,children:x||(x=(0,f.jsx)(d.Icon,{name:"apps",size:"xl"}))})]}),(0,f.jsxs)("div",{className:M.info,children:[(0,f.jsx)("div",{className:M.title,children:a.title}),(0,f.jsx)(d.TagList,{displayMax:1,tags:a.tags,onClick:(e,t)=>{t.stopPropagation(),t.preventDefault(),null==s||s(e)}})]}),g&&(0,f.jsx)(d.Portal,{className:M.portal,children:(0,f.jsx)("div",Object.assign({ref:O,style:_.popper},N.popper,{children:(0,f.jsx)(b,{className:M.expandedView,imageHeight:240,imageWidth:320,item:a,lastUpdated:l})}))})]},a.uid)}const j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=e.spacing(4);return{card:l.css`
      background-color: ${e.colors.background.secondary};
      border: 1px solid ${e.colors.border.medium};
      border-radius: 4px;
      display: flex;
      flex-direction: column;

      &:hover {
        background-color: ${e.colors.emphasize(e.colors.background.secondary,.03)};
      }
    `,checkbox:l.css`
      left: 0;
      margin: ${e.spacing(1)};
      position: absolute;
      top: 0;
    `,expandedView:l.css`
      @keyframes expand {
        0% {
          transform: scale(${t/a});
        }
        100% {
          transform: scale(1);
        }
      }

      animation: expand ${e.transitions.duration.shortest}ms ease-in-out 0s 1 normal;
      background-color: ${e.colors.emphasize(e.colors.background.secondary,.03)};
    `,image:l.css`
      aspect-ratio: 4 / 3;
      box-shadow: ${e.shadows.z1};
      margin: ${e.spacing(1)} ${s} 0;
      width: calc(100% - (2 * ${s}));
    `,imageContainer:l.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${e.spacing(1)} ${s} 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:l.css`
      align-items: center;
      aspect-ratio: 4 / 3;
      color: ${e.colors.text.secondary};
      display: flex;
      justify-content: center;
      margin: ${e.spacing(1)} ${s} 0;
      width: calc(100% - (2 * ${s}));
    `,info:l.css`
      align-items: center;
      background-color: ${e.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      height: ${e.spacing(7)};
      gap: ${e.spacing(1)};
      padding: 0 ${e.spacing(2)};
      z-index: 1;
    `,portal:l.css`
      pointer-events: none;
    `,title:l.css`
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `}}},"./public/app/features/search/components/SearchCheckbox.tsx":(e,t,a)=>{"use strict";a.d(t,{R:()=>i});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i=(0,s.memo)((e=>{let{onClick:t,className:a,checked:s=!1,editable:i=!1,"aria-label":o}=e;return i?(0,r.jsx)("div",{onClick:t,className:a,children:(0,r.jsx)(n.Checkbox,{value:s,"aria-label":o})}):null}));i.displayName="SearchCheckbox"},"./public/app/features/search/components/SearchItem.tsx":(e,t,a)=>{"use strict";a.d(t,{T:()=>h});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./packages/grafana-e2e-selectors/src/index.ts"),o=a("./packages/grafana-ui/src/index.ts"),l=a("./public/app/features/search/components/SearchCheckbox.tsx"),c=a("./public/app/features/search/constants.ts"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u=i.wl.components.Search,p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new Map([["errors","info-circle"],["views","eye"]]);return t.has(e)?t.get(e):"sort-amount-down"},h=e=>{let{item:t,editable:a,onToggleChecked:r,onTagSelected:i}=e;const h=(0,o.useStyles2)(m),g=(0,n.useCallback)(((e,t)=>{t.stopPropagation(),t.preventDefault(),i(e)}),[i]),f=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),r&&r(t)}),[t,r]),b=t.folderTitle||"General";return(0,d.jsxs)(o.Card,{"data-testid":u.dashboardItem(t.title),href:t.url,style:{minHeight:c.CN},className:h.container,children:[(0,d.jsx)(o.Card.Heading,{children:t.title}),(0,d.jsx)(o.Card.Figure,{align:"center",className:h.checkbox,children:(0,d.jsx)(l.R,{"aria-label":"Select dashboard",editable:a,checked:t.checked,onClick:f})}),(0,d.jsxs)(o.Card.Meta,{separator:"",children:[(0,d.jsxs)("span",{className:h.metaContainer,children:[s||(s=(0,d.jsx)(o.Icon,{name:"folder","aria-hidden":!0})),b]}),t.sortMetaName&&(0,d.jsxs)("span",{className:h.metaContainer,children:[(0,d.jsx)(o.Icon,{name:p(t.sortMetaName)}),t.sortMeta," ",t.sortMetaName]})]}),(0,d.jsx)(o.Card.Tags,{children:(0,d.jsx)(o.TagList,{tags:t.tags,onClick:g,getAriaLabel:e=>`Filter by tag "${e}"`})})]})},m=e=>({container:r.css`
      margin-bottom: ${e.spacing(.75)};
      padding: ${e.spacing(1)} ${e.spacing(2)};
    `,metaContainer:r.css`
      display: flex;
      align-items: center;
      margin-right: ${e.spacing(1)};

      svg {
        margin-right: ${e.spacing(.5)};
      }
    `,checkbox:r.css`
      margin-right: 0;
    `})},"./public/app/features/search/components/SearchResults.tsx":(e,t,a)=>{"use strict";a.d(t,{s:()=>k});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./.yarn/__virtual__/react-window-virtual-0f9a8c6a67/3/opt/drone/yarncache/react-window-npm-1.8.6-4f5a230226-54ccf2b16c.zip/node_modules/react-window/dist/index.esm.js"),o=a("./.yarn/__virtual__/react-virtualized-auto-sizer-virtual-b5ab366cb0/3/opt/drone/yarncache/react-virtualized-auto-sizer-npm-1.0.6-50869b8392-81270e9d32.zip/node_modules/react-virtualized-auto-sizer/dist/index.esm.js"),l=a("./packages/grafana-ui/src/index.ts"),c=a("./packages/grafana-e2e-selectors/src/index.ts"),d=a("./public/app/features/search/types.ts"),u=a("./public/app/features/search/constants.ts"),p=a("./public/app/features/search/components/SearchItem.tsx"),h=a("./public/app/features/search/components/SearchCard.tsx"),m=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useLocalStorage.js"),g=a("./public/app/features/search/components/SearchCheckbox.tsx"),f=a("./public/app/features/search/utils.ts"),b=a("./public/app/plugins/datasource/influxdb/components/useUniqueId.ts"),v=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const x=e=>{var t;let{section:a,onSectionClick:r,children:i,onToggleChecked:o,editable:c=!1}=e;const d=(0,l.useTheme)(),u=y(d,a.selected,c),p=(0,m.Z)((0,f.tT)(a.title),!0)[1],h=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),null==o||o(a)}),[o,a]),x=`section-header-label-${(0,b.L)()}`;return(0,v.jsx)(l.CollapsableSection,{isOpen:null!==(t=a.expanded)&&void 0!==t&&t,onToggle:()=>{p(!a.expanded),r(a)},className:u.wrapper,contentClassName:u.content,loading:a.itemsFetching,labelId:x,label:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g.R,{className:u.checkbox,editable:c,checked:a.checked,onClick:h,"aria-label":"Select folder"}),(0,v.jsx)("div",{className:u.icon,children:(0,v.jsx)(l.Icon,{name:(0,f.M$)(a)})}),(0,v.jsxs)("div",{className:u.text,children:[(0,v.jsx)("span",{id:x,children:a.title}),a.url&&(0,v.jsxs)("a",{href:a.url,className:u.link,children:[(0,v.jsx)("span",{className:u.separator,children:"|"})," ",s||(s=(0,v.jsx)(l.Icon,{name:"folder-upload"}))," Go to folder"]})]})]}),children:i})},y=(0,l.stylesFactory)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;const{sm:s}=e.spacing;return{wrapper:(0,r.cx)(r.css`
        align-items: center;
        font-size: ${e.typography.size.base};
        padding: 12px;
        border-bottom: none;
        color: ${e.colors.textWeak};
        z-index: 1;

        &:hover,
        &.selected {
          color: ${e.colors.text};
        }

        &:hover,
        &:focus-visible,
        &:focus-within {
          a {
            opacity: 1;
          }
        }
      `,"pointer",{selected:t}),checkbox:r.css`
      padding: 0 ${s} 0 0;
    `,icon:r.css`
      padding: 0 ${s} 0 ${a?0:s};
    `,text:r.css`
      flex-grow: 1;
      line-height: 24px;
    `,link:r.css`
      padding: 2px 10px 0;
      color: ${e.colors.textWeak};
      opacity: 0;
      transition: opacity 150ms ease-in-out;
    `,separator:r.css`
      margin-right: 6px;
    `,content:r.css`
      padding-top: 0px;
      padding-bottom: 0px;
    `}})),{sectionV2:w,itemsV2:j,cards:C}=c.wl.components.Search,k=(0,n.memo)((e=>{let{editable:t,loading:a,onTagSelected:s,onToggleChecked:c,onToggleSection:m,results:g,showPreviews:f,layout:b}=e;const y=(0,l.useTheme)(),k=S(y),T={editable:t,onToggleChecked:c,onTagSelected:s};return a?(0,v.jsx)(l.Spinner,{className:k.spinner}):g&&g.length?(0,v.jsx)("div",{className:k.resultsContainer,children:b===d.A.Folders?(()=>{const e=f?h.K:p.T;return(0,v.jsx)("div",{className:k.wrapper,children:g.map((a=>(0,v.jsx)("div",{"data-testid":w,className:k.section,children:a.title&&(0,v.jsx)(x,{onSectionClick:m,onToggleChecked:c,editable:t,section:a,children:(0,v.jsx)("div",{"data-testid":f?C:j,className:(0,r.cx)(k.sectionItems,{[k.gridContainer]:f}),children:a.items.map((t=>(0,n.createElement)(e,Object.assign({},T,{key:t.uid,item:t}))))})})},a.id||a.title)))})})():(()=>{var e;const t=null===(e=g[0])||void 0===e?void 0:e.items;return(0,v.jsx)("div",{className:k.listModeWrapper,children:(0,v.jsx)(o.Z,{children:e=>{let{height:a,width:s}=e;const n=Math.ceil(s/320),r=s/n,o=.75*(r-64)+56+8,l=Math.ceil(t.length/n);return f?(0,v.jsx)(i.Ym,{columnCount:n,columnWidth:r,rowCount:l,rowHeight:o,className:k.wrapper,innerElementType:"ul",height:a,width:s,children:e=>{let{columnIndex:a,rowIndex:s,style:r}=e;const i=t[s*n+a];return i?(0,v.jsx)("li",{style:r,className:k.virtualizedGridItemWrapper,children:(0,v.jsx)(h.K,Object.assign({},T,{item:i}),i.id)}):null}}):(0,v.jsx)(i.t7,{className:k.wrapper,innerElementType:"ul",itemSize:u.CN+u.iC,height:a,itemCount:t.length,width:s,children:e=>{let{index:a,style:s}=e;const n=t[a];return(0,v.jsx)("li",{style:s,children:(0,v.jsx)(p.T,Object.assign({},T,{item:n}),n.id)})}})}})})})()}):(0,v.jsx)("div",{className:k.noResults,children:"No dashboards matching your query were found."})}));k.displayName="SearchResults";const S=(0,l.stylesFactory)((e=>{const{md:t,sm:a}=e.spacing;return{virtualizedGridItemWrapper:r.css`
      padding: 4px;
    `,wrapper:r.css`
      display: flex;
      flex-direction: column;

      > ul {
        list-style: none;
      }
    `,section:r.css`
      display: flex;
      flex-direction: column;
      background: ${e.colors.panelBg};
      border-bottom: solid 1px ${e.colors.border2};
    `,sectionItems:r.css`
      margin: 0 24px 0 32px;
    `,spinner:r.css`
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100px;
    `,gridContainer:r.css`
      display: grid;
      gap: ${a};
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      margin-bottom: ${t};
    `,resultsContainer:r.css`
      position: relative;
      flex-grow: 10;
      margin-bottom: ${t};
      background: ${e.colors.bg1};
      border: 1px solid ${e.colors.border1};
      border-radius: 3px;
      height: 100%;
    `,noResults:r.css`
      padding: ${t};
      background: ${e.colors.bg2};
      font-style: italic;
      margin-top: ${e.spacing.md};
    `,listModeWrapper:r.css`
      position: relative;
      height: 100%;
      padding: ${t};
    `}}))},"./public/app/features/search/components/SearchResultsFilter.tsx":(e,t,a)=>{"use strict";a.d(t,{f:()=>o});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/features/search/components/ActionRow.tsx"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=e=>{let{allChecked:t,canDelete:a,canMove:s,deleteItem:o,hideLayout:c,moveTo:d,onLayoutChange:u,onShowPreviewsChange:p,onSortChange:h,onStarredFilterChange:m,onTagFilterChange:g,onToggleAllChecked:f,query:b,showPreviews:v,editable:x}=e;const y=a||s,w=(0,n.useTheme)(),j=l(w);return(0,i.jsxs)("div",{className:j.wrapper,children:[x&&(0,i.jsx)("div",{className:j.checkboxWrapper,children:(0,i.jsx)(n.Checkbox,{"aria-label":"Select all",value:t,onChange:f})}),y?(0,i.jsxs)(n.HorizontalGroup,{spacing:"md",children:[(0,i.jsx)(n.Button,{disabled:!s,onClick:d,icon:"exchange-alt",variant:"secondary",children:"Move"}),(0,i.jsx)(n.Button,{disabled:!a,onClick:o,icon:"trash-alt",variant:"destructive",children:"Delete"})]}):(0,i.jsx)(r.B,{hideLayout:c,onLayoutChange:u,onShowPreviewsChange:p,onSortChange:h,onStarredFilterChange:m,onTagFilterChange:g,query:b,showPreviews:v,showStarredFilter:!0})]})},l=(0,n.stylesFactory)((e=>{const{sm:t,md:a}=e.spacing;return{wrapper:s.css`
      height: ${e.height.md}px;
      display: flex;
      justify-content: flex-start;
      gap: ${e.spacing.md};
      align-items: center;
      margin-bottom: ${t};

      > label {
        height: 20px;
        margin: 0 ${a} 0 ${t};
      }
    `,checkboxWrapper:s.css`
      label {
        line-height: 1.2;
        width: max-content;
      }
    `}}))},"./public/app/features/search/constants.ts":(e,t,a)=>{"use strict";a.d(t,{Vg:()=>s,CN:()=>n,iC:()=>r,yw:()=>i,qi:()=>o,pW:()=>l,fy:()=>c,Cr:()=>d});const s=["Recent","Starred"],n=58,r=8,i={label:"A–Z",value:"alpha-asc"},o="search.sections",l=0,c="General",d="grafana.dashboard.previews"},"./public/app/features/search/hooks/useManageDashboards.ts":(e,t,a)=>{"use strict";a.d(t,{Q:()=>f,x:()=>b});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./public/app/core/services/context_srv.ts"),r=a("./public/app/features/search/reducers/actionTypes.ts"),i=a("./public/app/features/search/reducers/dashboardSearch.ts"),o=a("./public/app/features/search/utils.ts");const l=Object.assign({},i.o,{allChecked:!1}),c=(0,o.yS)([i.f,(e,t)=>{switch(t.type){case r.u0:const a=!e.allChecked;return Object.assign({},e,{results:e.results.map((e=>Object.assign({},e,{checked:a,items:e.items.map((e=>Object.assign({},e,{checked:a})))}))),allChecked:a});case r.$L:const{id:s}=t.payload;return Object.assign({},e,{results:e.results.map((e=>e.id===s?Object.assign({},e,{checked:!e.checked,items:e.items.map((t=>Object.assign({},t,{checked:!e.checked})))}):Object.assign({},e,{items:e.items.map((e=>e.id===s?Object.assign({},e,{checked:!e.checked}):e))})))});case r.BV:{const a=t.payload.dashboards,s=t.payload.folder,n=a.map((e=>e.uid));return Object.assign({},e,{results:e.results.map((e=>s.id===e.id?e.expanded?Object.assign({},e,{items:[...e.items,...a.map((e=>Object.assign({},e,{checked:!1})))],checked:!1}):e:Object.assign({},e,{items:e.items.filter((e=>!n.includes(e.uid)))})))})}case r.PB:{const{folders:a,dashboards:s}=t.payload;return a.length||s.length?Object.assign({},e,{results:e.results.reduce(((e,t)=>a.includes(t.uid)?e:[...e,Object.assign({},t,{items:t.items.filter((e=>!s.includes(e.uid)))})]),[])}):e}default:return e}}]);var d=a("./public/app/features/search/hooks/useSearch.ts"),u=a("./public/app/features/search/constants.ts"),p=a("./public/app/features/search/hooks/useShowDashboardPreviews.ts"),h=a("./packages/grafana-runtime/src/index.ts"),m=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useDebounce.js");const g=e=>e.checked||e.items.some((e=>e.checked)),f=(e,t,a,s)=>{var n,r,i,o,l;const c=a?t?"on":"off":"feature_disabled";(0,h.reportInteraction)(`${e}_viewed`,{previews:c,layout:s.layout,starredFilter:null!==(n=s.starred)&&void 0!==n&&n,sort:null!==(r=s.sortValue)&&void 0!==r?r:"",tagCount:null!==(i=s.tagCount)&&void 0!==i?i:0,queryLength:null!==(o=null===(l=s.query)||void 0===l?void 0:l.length)&&void 0!==o?o:0})},b=function(e){var t,a,i;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=arguments.length>2?arguments[2]:void 0;const b=(0,s.useReducer)(c,Object.assign({},l,o)),{showPreviews:v,onShowPreviewsChange:x,previewFeatureEnabled:y}=(0,p.B)();(0,m.Z)((()=>{var t,a;f("manage_dashboards",v,y,{layout:e.layout,starred:e.starred,sortValue:null===(t=e.sort)||void 0===t?void 0:t.value,query:e.query,tagCount:null===(a=e.tag)||void 0===a?void 0:a.length})}),1e3,[v,y,e.layout,e.starred,null===(t=e.sort)||void 0===t?void 0:t.value,null===(a=e.query)||void 0===a?void 0:a.length,null===(i=e.tag)||void 0===i?void 0:i.length]);const{state:{results:w,loading:j,initialLoading:C,allChecked:k},onToggleSection:S,dispatch:T}=(0,d.R)(e,b,{}),O=(0,s.useCallback)((e=>{T({type:r.$L,payload:e})}),[T]),_=()=>{T({type:r.u0})},N=(e,t)=>{T({type:r.PB,payload:{folders:e,dashboards:t}})},I=(e,t)=>{T({type:r.BV,payload:{dashboards:e,folder:t}})},P=(0,s.useMemo)((()=>w.some((e=>e.items.some((e=>e.checked))))),[w]),M=(0,s.useMemo)((()=>{const e=w.some(g),t=w.find((e=>e.checked&&e.id===u.pW));return e&&!t}),[w]),F=null==h?void 0:h.canSave,A=h?F:n.Vt.hasEditPermissionInFolders,D=F&&(null==h?void 0:h.id)&&0===w.length&&!j&&!C;return{results:w,loading:j,initialLoading:C,canSave:F,allChecked:k,hasEditPermissionInFolders:A,canMove:P,canDelete:M,onToggleSection:S,onToggleChecked:O,onToggleAllChecked:_,onDeleteItems:N,onMoveItems:I,noFolders:D,showPreviews:v,onShowPreviewsChange:x}}},"./public/app/features/search/hooks/useSearch.ts":(e,t,a)=>{"use strict";a.d(t,{R:()=>d});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useDebounce.js"),r=a("./public/app/core/services/search_srv.ts"),i=a("./public/app/core/services/backend_srv.ts"),o=a("./public/app/features/search/reducers/actionTypes.ts"),l=a("./public/app/features/search/utils.ts");const c=new r.i,d=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{queryParsing:r}=a,[d,u]=t,p=()=>{u({type:o.F4});const t=(0,l.qD)(e,r);c.search(t).then((e=>{u({type:o.rd,payload:e})}))};(0,s.useEffect)((()=>{u({type:o.F4})}),[e.tag,e.sort,e.starred,e.layout,u]),(0,n.Z)(p,300,[e,r]);const h=(0,s.useCallback)((e=>{(0,l.rR)(e.title)&&!e.items.length?(u({type:o.ZH,payload:e.id}),i.ae.search({folderIds:[e.id]}).then((t=>{u({type:o.mK,payload:{section:e,items:t}}),u({type:o.fl,payload:e})}))):u({type:o.fl,payload:e})}),[u]);return{state:d,dispatch:u,onToggleSection:h}}},"./public/app/features/search/hooks/useSearchQuery.ts":(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("./packages/grafana-runtime/src/index.ts"),i=a("./public/app/features/search/reducers/searchQueryReducer.ts"),o=a("./public/app/features/search/reducers/actionTypes.ts"),l=a("./public/app/features/search/types.ts"),c=a("./public/app/features/search/utils.ts");const d=(0,n.debounce)((e=>r.locationService.partial(e)),300),u=e=>{const t=(0,c.vj)(r.locationService.getSearchObject()),a=Object.assign({},i.wi,e,t),[n,u]=(0,s.useReducer)(i.Y,a),p=(0,s.useCallback)((e=>{u({type:o.Iy,payload:e}),d({tag:[...n.tag,e]})}),[n.tag]);return{query:n,hasFilters:(0,c.L)(n),onQueryChange:e=>{u({type:o.MC,payload:e}),d({query:e})},onClearFilters:()=>{u({type:o.Gs}),d(i.xi)},onTagFilterChange:e=>{u({type:o.Fe,payload:e}),d({tag:e})},onStarredFilterChange:e=>{const t=e.target.checked;u({type:o.EF,payload:t}),d({starred:t||null})},onTagAdd:p,onSortChange:e=>{u({type:o.NJ,payload:e}),d({sort:null==e?void 0:e.value,layout:l.A.List})},onLayoutChange:e=>{u({type:o.Mj,payload:e}),e!==l.A.Folders?d({layout:e}):d({layout:e,sort:null})}}}},"./public/app/features/search/hooks/useShowDashboardPreviews.ts":(e,t,a)=>{"use strict";a.d(t,{B:()=>i});var s=a("./public/app/features/search/constants.ts"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useLocalStorage.js");const i=()=>{const e=Boolean(n.config.featureToggles.dashboardPreviews),[t,a]=(0,r.Z)(s.Cr,e);return{showPreviews:Boolean(t&&e),previewFeatureEnabled:e,onShowPreviewsChange:e=>{a(e)}}}},"./public/app/features/search/reducers/actionTypes.ts":(e,t,a)=>{"use strict";a.d(t,{rd:()=>s,fl:()=>n,mK:()=>r,ZH:()=>i,Nj:()=>o,oe:()=>l,F4:()=>c,u0:()=>d,$L:()=>u,BV:()=>p,PB:()=>h,EF:()=>m,QT:()=>g,MC:()=>f,ji:()=>b,Gs:()=>v,Fe:()=>x,Iy:()=>y,NJ:()=>w,Mj:()=>j});const s="FETCH_RESULTS",n="TOGGLE_SECTION",r="FETCH_ITEMS",i="FETCH_ITEMS_START",o="MOVE_SELECTION_UP",l="MOVE_SELECTION_DOWN",c="SEARCH_START",d="TOGGLE_ALL_CHECKED",u="TOGGLE_SECTION_CHECKED",p="MOVE_ITEMS",h="DELETE_ITEMS",m="TOGGLE_STARRED",g="REMOVE_STARRED",f="QUERY_CHANGE",b="REMOVE_TAG",v="CLEAR_FILTERS",x="SET_TAGS",y="ADD_TAG",w="TOGGLE_SORT",j="LAYOUT_CHANGE"},"./public/app/features/search/reducers/dashboardSearch.ts":(e,t,a)=>{"use strict";a.d(t,{o:()=>r,f:()=>i});var s=a("./public/app/features/search/utils.ts"),n=a("./public/app/features/search/reducers/actionTypes.ts");const r={results:[],loading:!0,initialLoading:!0,selectedIndex:0},i=(e,t)=>{switch(t.type){case n.F4:return e.loading?e:Object.assign({},e,{loading:!0});case n.rd:{const a=t.payload;return a.length>0&&(a[0].selected=!0),Object.assign({},e,{results:a,loading:!1,initialLoading:!1})}case n.fl:{const a=t.payload,n=(0,s.os)(a.title);return Object.assign({},e,{results:e.results.map((e=>a[n]===e[n]?Object.assign({},e,{expanded:!e.expanded}):e))})}case n.mK:{const{section:a,items:s}=t.payload;return Object.assign({},e,{itemsFetching:!1,results:e.results.map((e=>a.id===e.id?Object.assign({},e,{items:s,itemsFetching:!1}):e))})}case n.ZH:{const a=t.payload;return a?Object.assign({},e,{results:e.results.map((e=>e.id===a?Object.assign({},e,{itemsFetching:!0}):e))}):e}case n.oe:{const t=(0,s.SU)(e.results);if(e.selectedIndex<t.length-1){const a=e.selectedIndex+1,n=t[a];return Object.assign({},e,{selectedIndex:a,results:(0,s.MS)(e.results,n)})}return e}case n.Nj:if(e.selectedIndex>0){const t=(0,s.SU)(e.results),a=e.selectedIndex-1,n=t[a];return Object.assign({},e,{selectedIndex:a,results:(0,s.MS)(e.results,n)})}return e;default:return e}}},"./public/app/features/search/reducers/searchQueryReducer.ts":(e,t,a)=>{"use strict";a.d(t,{wi:()=>r,xi:()=>i,Y:()=>o});var s=a("./public/app/features/search/types.ts"),n=a("./public/app/features/search/reducers/actionTypes.ts");const r={query:"",tag:[],starred:!1,skipRecent:!1,skipStarred:!1,folderIds:[],sort:null,layout:s.A.Folders,prevSort:null},i={sort:null,starred:null,query:null,tag:null,layout:null},o=(e,t)=>{switch(t.type){case n.MC:return Object.assign({},e,{query:t.payload});case n.ji:return Object.assign({},e,{tag:e.tag.filter((e=>e!==t.payload))});case n.Fe:return Object.assign({},e,{tag:t.payload});case n.Iy:{const a=t.payload;return a&&!e.tag.includes(a)?Object.assign({},e,{tag:[...e.tag,a]}):e}case n.EF:return Object.assign({},e,{starred:t.payload});case n.QT:return Object.assign({},e,{starred:!1});case n.Gs:return Object.assign({},e,{query:"",tag:[],starred:!1,sort:null});case n.NJ:{const a=t.payload;return e.layout===s.A.Folders?Object.assign({},e,{sort:a,layout:s.A.List}):Object.assign({},e,{sort:a})}case n.Mj:{const a=t.payload;return e.sort&&a===s.A.Folders?Object.assign({},e,{layout:a,sort:null,prevSort:e.sort}):Object.assign({},e,{layout:a,sort:e.prevSort})}default:return e}}},"./public/app/features/search/types.ts":(e,t,a)=>{"use strict";let s,n;a.d(t,{o:()=>s,A:()=>n}),function(e){e.DashDB="dash-db",e.DashHome="dash-home",e.DashFolder="dash-folder"}(s||(s={})),function(e){e.List="list",e.Folders="folders"}(n||(n={}))},"./public/app/features/search/utils.ts":(e,t,a)=>{"use strict";a.d(t,{rR:()=>i,SU:()=>o,os:()=>l,MS:()=>c,xy:()=>d,yS:()=>p,IO:()=>h,jw:()=>g,qD:()=>f,L:()=>b,M$:()=>v,tT:()=>x,vj:()=>y});var s=a("../../opt/drone/yarncache/search-query-parser-npm-1.6.0-23074714ce-6ce290e1d1.zip/node_modules/search-query-parser/index.js"),n=a("./public/app/features/search/constants.ts"),r=a("./public/app/features/dashboard/services/DashboardSrv.ts");const i=e=>!n.Vg.includes(e),o=e=>e.flatMap((e=>{const t=i(e.title)?String(e.id):e.title;return e.expanded&&e.items.length?[t,...e.items.map((e=>`${t}-${e.id}`))]:t})),l=e=>i(e)?"id":"title",c=(e,t)=>e.map((e=>{const a=l(t);return(e=Object.assign({},e,{selected:String(e[a])===t})).expanded&&e.items.length?Object.assign({},e,{items:e.items.map((a=>{const[s,n]=t.split("-"),r=l(s);return Object.assign({},a,{selected:String(a.id)===n&&String(e[r])===s})}))}):e})),d=e=>{let t=null;for(const a of e)if(a.expanded&&a.items.length&&(t=d(a.items)),a.selected&&(t=a),t)return t;return null},u=e=>{const t=(0,s.parse)(e,{keywords:["folder"]});return"string"==typeof t?{text:t}:t},p=e=>(t,a)=>e.reduce(((e,t)=>Object.assign({},e,t(e,a))),t),h=e=>e.length?e.reduce(((e,t)=>t.items?[...e,...t.items.filter((e=>e.checked))]:e),[]):[],m=e=>e.length?h(e).map((e=>e.uid)):[],g=e=>{const t={folders:[],dashboards:[]};return e.length?e.reduce(((t,a)=>0!==(null==a?void 0:a.id)&&a.checked&&a.uid?Object.assign({},t,{folders:[...t.folders,a.uid]}):Object.assign({},t,{dashboards:m(e)})),t):t},f=function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=Object.assign({},e,{sort:null===(t=e.sort)||void 0===t?void 0:t.value});if(!a)return s;let n=[];if("current"===u(e.query).folder)try{const e=(0,r.h4)().getCurrent();null!=e&&e.meta.folderId&&(n=[null==e?void 0:e.meta.folderId])}catch(e){console.error(e)}return Object.assign({},s,{query:u(e.query).text,folderIds:n})},b=e=>{var t;return!!e&&Boolean(e.query||(null===(t=e.tag)||void 0===t?void 0:t.length)>0||e.starred||e.sort)},v=e=>i(e.title)?e.expanded?"folder-open":"folder":e.icon,x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"General";return`${n.qi}.${e.toLowerCase()}`},y=e=>{const t=Object.entries(e).reduce(((e,t)=>{let[a,s]=t;return s?"tag"!==a||Array.isArray(s)?"sort"===a?Object.assign({},e,{sort:{value:s}}):Object.assign({},e,{[a]:s}):Object.assign({},e,{tag:[s]}):e}),{});if(e.folder){var a;const s=`folder:${e.folder}`;return Object.assign({},t,{query:`${s} ${(null!==(a=t.query)&&void 0!==a?a:"").replace(s,"")}`})}return Object.assign({},t)}},"./public/app/features/serviceaccounts/state/actions.ts":(e,t,a)=>{"use strict";a.d(t,{q$:()=>i,nD:()=>o,TL:()=>l,IR:()=>c});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("./public/app/features/serviceaccounts/state/reducers.ts");const r="/api/serviceaccounts";function i(e){return async t=>{try{const a=await(0,s.getBackendSrv)().get(`${r}/${e}`);t((0,n.P4)(a))}catch(e){console.error(e)}}}function o(){return async e=>{try{const t=await(0,s.getBackendSrv)().get(r);e((0,n.ow)(t))}catch(e){console.error(e)}}}function l(e){return async t=>{await(0,s.getBackendSrv)().patch(`${r}/${e.userId}`,{}),t(o())}}function c(e){return async t=>{await(0,s.getBackendSrv)().delete(`${r}/${e}`),t(o())}}},"./public/app/features/serviceaccounts/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{ow:()=>c,P4:()=>d,ZP:()=>u});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");const n={serviceAccounts:[],searchQuery:"",searchPage:1,isLoading:!0},r=(0,s.oM)({name:"serviceaccount",initialState:{serviceAccount:{},isLoading:!0},reducers:{serviceAccountLoaded:(e,t)=>Object.assign({},e,{serviceAccount:t.payload,isLoading:!1})}}),i=(0,s.oM)({name:"serviceaccounts",initialState:n,reducers:{serviceAccountsLoaded:(e,t)=>Object.assign({},e,{isLoading:!1,serviceAccounts:t.payload}),setServiceAccountsSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload,searchPage:n.searchPage}),setServiceAccountsSearchPage:(e,t)=>Object.assign({},e,{searchPage:t.payload})}}),{setServiceAccountsSearchQuery:o,setServiceAccountsSearchPage:l,serviceAccountsLoaded:c}=i.actions,{serviceAccountLoaded:d}=r.actions,u={serviceAccountProfile:r.reducer,serviceAccounts:i.reducer}},"./public/app/features/teams/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{PL:()=>i,ql:()=>o,ot:()=>l,y$:()=>u,iI:()=>p,n2:()=>h,UD:()=>m,ZP:()=>g});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");const n={teams:[],searchQuery:"",searchPage:1,hasFetched:!1},r=(0,s.oM)({name:"teams",initialState:n,reducers:{teamsLoaded:(e,t)=>Object.assign({},e,{hasFetched:!0,teams:t.payload}),setSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload,searchPage:n.searchPage}),setTeamsSearchPage:(e,t)=>Object.assign({},e,{searchPage:t.payload})}}),{teamsLoaded:i,setSearchQuery:o,setTeamsSearchPage:l}=r.actions,c=r.reducer,d=(0,s.oM)({name:"team",initialState:{team:{},members:[],groups:[],searchMemberQuery:""},reducers:{teamLoaded:(e,t)=>Object.assign({},e,{team:t.payload}),teamMembersLoaded:(e,t)=>Object.assign({},e,{members:t.payload}),setSearchMemberQuery:(e,t)=>Object.assign({},e,{searchMemberQuery:t.payload}),teamGroupsLoaded:(e,t)=>Object.assign({},e,{groups:t.payload})}}),{teamLoaded:u,teamGroupsLoaded:p,teamMembersLoaded:h,setSearchMemberQuery:m}=d.actions,g={teams:c,team:d.reducer}},"./public/app/features/templating/template_srv.ts":(e,t,a)=>{"use strict";a.d(t,{J:()=>w});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/features/variables/state/selectors.ts"),i=a("./public/app/features/variables/utils.ts"),o=a("./public/app/features/variables/guard.ts"),l=a("./packages/grafana-runtime/src/index.ts"),c=a("./public/app/core/utils/kbn.ts"),d=a("./public/app/features/variables/shared/formatVariable.ts"),u=a("./public/app/features/variables/constants.ts");let p;!function(e){e.lucene="lucene",e.raw="raw",e.regex="regex",e.pipe="pipe",e.distributed="distributed",e.csv="csv",e.html="html",e.json="json",e.percentEncode="percentencode",e.singleQuote="singlequote",e.doubleQuote="doublequote",e.sqlString="sqlstring",e.date="date",e.glob="glob",e.text="text",e.queryParam="queryparam"}(p||(p={}));const h=new n.Registry((()=>[{id:p.lucene,name:"Lucene",description:"Values are lucene escaped and multi-valued variables generate an OR expression",formatter:e=>{let{value:t}=e;if("string"==typeof t)return m(t);if(t instanceof Array&&0===t.length)return"__empty__";return"("+(0,s.map)(t,(e=>'"'+m(e)+'"')).join(" OR ")+")"}},{id:p.raw,name:"raw",description:"Keep value as is",formatter:e=>{let{value:t}=e;return t}},{id:p.regex,name:"Regex",description:"Values are regex escaped and multi-valued variables generate a (<value>|<value>) expression",formatter:e=>{let{value:t}=e;if("string"==typeof t)return c.Z.regexEscape(t);const a=(0,s.map)(t,c.Z.regexEscape);return 1===a.length?a[0]:"("+a.join("|")+")"}},{id:p.pipe,name:"Pipe",description:"Values are separated by | character",formatter:e=>{let{value:t}=e;return"string"==typeof t?t:t.join("|")}},{id:p.distributed,name:"Distributed",description:"Multiple values are formatted like variable=value",formatter:(e,t)=>{let{value:a}=e;return"string"==typeof a?a:(a=(0,s.map)(a,((e,a)=>0!==a?t.name+"="+e:e)),a.join(","))}},{id:p.csv,name:"Csv",description:"Comma-separated values",formatter:e=>{let{value:t}=e;return(0,s.isArray)(t)?t.join(","):t}},{id:p.html,name:"HTML",description:"HTML escaping of values",formatter:e=>{let{value:t}=e;return(0,s.isArray)(t)?n.textUtil.escapeHtml(t.join(", ")):n.textUtil.escapeHtml(t)}},{id:p.json,name:"JSON",description:"JSON stringify valu",formatter:e=>{let{value:t}=e;return JSON.stringify(t)}},{id:p.percentEncode,name:"Percent encode",description:"Useful for URL escaping values",formatter:e=>{let{value:t}=e;return(0,s.isArray)(t)?g("{"+t.join(",")+"}"):g(t)}},{id:p.singleQuote,name:"Single quote",description:"Single quoted values",formatter:e=>{let{value:t}=e;const a=new RegExp("'","g");return(0,s.isArray)(t)?(0,s.map)(t,(e=>`'${(0,s.replace)(e,a,"\\'")}'`)).join(","):`'${(0,s.replace)(t,a,"\\'")}'`}},{id:p.doubleQuote,name:"Double quote",description:"Double quoted values",formatter:e=>{let{value:t}=e;const a=new RegExp('"',"g");return(0,s.isArray)(t)?(0,s.map)(t,(e=>`"${(0,s.replace)(e,a,'\\"')}"`)).join(","):`"${(0,s.replace)(t,a,'\\"')}"`}},{id:p.sqlString,name:"SQL string",description:"SQL string quoting and commas for use in IN statements and other scenarios",formatter:e=>{let{value:t}=e;const a=new RegExp("'","g");return(0,s.isArray)(t)?(0,s.map)(t,(e=>`'${(0,s.replace)(e,a,"''")}'`)).join(","):`'${(0,s.replace)(t,a,"''")}'`}},{id:p.date,name:"Date",description:"Format date in different ways",formatter:e=>{var t;let{value:a,args:s}=e;const r=null!==(t=s[0])&&void 0!==t?t:"iso";switch(r){case"ms":return a;case"seconds":return`${Math.round(parseInt(a,10)/1e3)}`;case"iso":return(0,n.dateTime)(parseInt(a,10)).toISOString();default:return(0,n.dateTime)(parseInt(a,10)).format(r)}}},{id:p.glob,name:"Glob",description:"Format multi-valued variables using glob syntax, example {value1,value2}",formatter:e=>{let{value:t}=e;return(0,s.isArray)(t)&&t.length>1?"{"+t.join(",")+"}":t}},{id:p.text,name:"Text",description:"Format variables in their text representation. Example in multi-variable scenario A + B + C.",formatter:(e,t)=>{if("string"==typeof e.text)return e.value===u.r2?u.xk:e.text;return(null==t?void 0:t.current)?(0,d.y)(t):e.value}},{id:p.queryParam,name:"Query parameter",description:"Format variables as URL parameters. Example in multi-variable scenario A + B + C => var-foo=A&var-foo=B&var-foo=C.",formatter:(e,t)=>{const{value:a}=e,{name:s}=t;return Array.isArray(a)?a.map((e=>f(s,e))).join("&"):f(s,a)}}]));function m(e){return e.replace(/([\!\*\+\-\=<>\s\&\|\(\)\[\]\{\}\^\~\?\:\\/"])/g,"\\$1")}function g(e){return encodeURIComponent(e).replace(/[!'()*]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()))}function f(e,t){return`var-${e}=${g(t)}`}var b=a("./public/app/features/variables/adapters.ts");function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const x={getFilteredVariables:r.Q4,getVariables:r.ng,getVariableWithName:r._K};const y=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;v(this,"_variables",void 0),v(this,"regex",i.J7),v(this,"index",{}),v(this,"grafanaVariables",{}),v(this,"timeRange",null),v(this,"fieldAccessorCache",{}),this.dependencies=e,this._variables=[]}init(e,t){this._variables=e,this.timeRange=t,this.updateIndex()}get variables(){return(0,n.deprecationWarning)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){if(this.index=this._variables.reduce(((e,t)=>{var a;return t.current&&(t.current.isNone||((a=t.current.value)||""===a))&&(e[t.name]=t),e}),{}),this.timeRange){const e=this.timeRange.from.valueOf().toString(),t=this.timeRange.to.valueOf().toString();this.index=Object.assign({},this.index,{__from:{current:{value:e,text:e}},__to:{current:{value:t,text:t}}})}}updateTimeRange(e){this.timeRange=e,this.updateIndex()}variableInitialized(e){this.index[e.name]=e}getAdhocFilters(e){let t=[],a=(0,l.getDataSourceSrv)().getInstanceSettings(e);if(!a)return[];for(const n of this.getAdHocVariables()){var s;const r=null===(s=n.datasource)||void 0===s?void 0:s.uid;(r===a.uid||null==n.datasource&&null!=a&&a.isDefault||0===(null==r?void 0:r.indexOf("$"))&&this.replace(r)===e)&&(t=t.concat(n.filters))}return t}formatValue(e,t,a,s){if(a=a||{},null==e)return"";if((0,o.Kn)(a)&&t!==p.queryParam)return"";if(Array.isArray(e)||"object"!=typeof e||(e=`${e}`),"function"==typeof t)return t(e,a,this.formatValue);t||(t=p.glob);let n=t.split(":");n.length>1?(t=n[0],n=n.slice(1)):n=[];let r=h.getIfExists(t);r||(console.error(`Variable format ${t} not found. Using glob format as fallback.`),r=h.get(p.glob));const i={value:e,args:n,text:null!=s?s:e};return r.formatter(i,a)}setGrafanaVariable(e,t){this.grafanaVariables[e]=t}setGlobalVariable(e,t){(0,n.deprecationWarning)("template_srv.ts","setGlobalVariable",""),this.index=Object.assign({},this.index,{[e]:{current:t}})}getVariableName(e){this.regex.lastIndex=0;const t=this.regex.exec(e);if(!t)return null;return t.slice(1).find((e=>void 0!==e))}variableExists(e){const t=this.getVariableName(e),a=t&&this.getVariableAtIndex(t);return null!=a}highlightVariablesAsHtml(e){return e&&(0,s.isString)(e)?(e=(0,s.escape)(e),this.regex.lastIndex=0,e.replace(this.regex,((e,t,a,s,n)=>this.getVariableAtIndex(t||a||n)?'<span class="template-variable">'+e+"</span>":e))):e}getAllValue(e){if(e.allValue)return e.allValue;const t=[];for(let a=1;a<e.options.length;a++)t.push(e.options[a].value);return t}getFieldAccessor(e){const t=this.fieldAccessorCache[e];return t||(this.fieldAccessorCache[e]=(0,s.property)(e))}getVariableValue(e,t,a){const s=a[e];return s?t?this.getFieldAccessor(t)(s.value):s.value:null}getVariableText(e,t,a){const s=a[e];return s?s.value===t||"string"!=typeof t?s.text:t:null}replace(e,t,a){return e?(this.regex.lastIndex=0,e.replace(this.regex,((e,s,n,r,i,l,c)=>{const d=s||n||i,h=this.getVariableAtIndex(d),m=r||c||a;if(t){const e=this.getVariableValue(d,l,t),a=this.getVariableText(d,e,t);if(null!=e)return this.formatValue(e,m,h,a)}if(!h)return e;if(m===p.queryParam||(0,o.Kn)(h)){const e=b.z.get(h.type).getValueForUrl(h),t=(0,o.Kn)(h)?h.id:h.current.text;return this.formatValue(e,m,h,t)}const g=this.grafanaVariables[h.current.value];if(g)return this.formatValue(g,m,h);let f=h.current.value,v=h.current.text;if(this.isAllValue(f)&&(f=this.getAllValue(h),v=u.xk,h.allValue&&m!==p.text))return this.replace(f);if(l){const e=this.getVariableValue(d,l,{[d]:{value:f,text:v}});if(null!=e)return this.formatValue(e,m,h,v)}return this.formatValue(f,m,h,v)}))):null!=e?e:""}isAllValue(e){return e===u.r2||Array.isArray(e)&&e[0]===u.r2}replaceWithText(e,t){return(0,n.deprecationWarning)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(e,t,"text")}getVariableAtIndex(e){if(e)return this.index[e]?this.index[e]:this.dependencies.getVariableWithName(e)}getAdHocVariables(){return this.dependencies.getFilteredVariables(o.Kn)}};(0,l.setTemplateSrv)(y);const w=()=>y},"./public/app/features/users/state/reducers.ts":(e,t,a)=>{"use strict";a.d(t,{Ol:()=>o,oX:()=>l,TQ:()=>c,eT:()=>d,ZP:()=>u});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./public/app/core/config.ts");const r={invitees:[],users:[],searchQuery:"",searchPage:1,canInvite:!n.ZP.externalUserMngLinkName,externalUserMngInfo:n.ZP.externalUserMngInfo,externalUserMngLinkName:n.ZP.externalUserMngLinkName,externalUserMngLinkUrl:n.ZP.externalUserMngLinkUrl,hasFetched:!1},i=(0,s.oM)({name:"users",initialState:r,reducers:{usersLoaded:(e,t)=>Object.assign({},e,{hasFetched:!0,users:t.payload}),inviteesLoaded:(e,t)=>Object.assign({},e,{hasFetched:!0,invitees:t.payload}),setUsersSearchQuery:(e,t)=>Object.assign({},e,{searchQuery:t.payload,searchPage:r.searchPage}),setUsersSearchPage:(e,t)=>Object.assign({},e,{searchPage:t.payload})}}),{inviteesLoaded:o,setUsersSearchQuery:l,setUsersSearchPage:c,usersLoaded:d}=i.actions,u={users:i.reducer}},"./public/app/features/variables/adapters.ts":(e,t,a)=>{"use strict";a.d(t,{z:()=>s});const s=new(a("./packages/grafana-data/src/index.ts").Registry)},"./public/app/features/variables/adhoc/actions.ts":(e,t,a)=>{"use strict";a.d(t,{m2:()=>m,M6:()=>g,ku:()=>f,KJ:()=>b,Ue:()=>v,Z$:()=>x,Ah:()=>y});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./public/app/features/plugins/datasource_srv.ts"),r=a("./public/app/features/variables/editor/reducer.ts"),i=a("./public/app/features/variables/state/sharedReducer.ts"),o=a("./public/app/features/variables/state/selectors.ts"),l=a("./public/app/features/variables/state/types.ts"),c=a("./public/app/features/variables/adhoc/reducer.ts"),d=a("./public/app/features/variables/state/actions.ts"),u=a("./public/app/features/variables/guard.ts"),p=a("./packages/grafana-data/src/index.ts");const h="Filters",m=e=>async(t,a)=>{let s=j(e,a());s||(t(w(e)),s=j(e,a()));const n=s.filters.findIndex((t=>t.key===e.key&&t.value===e.value));if(-1===n){const{value:a,key:n,operator:r}=e,i={value:a,key:n,operator:r,condition:""};return await t(b(s.id,i))}const r=Object.assign({},s.filters[n],{operator:e.operator});return await t(g(s.id,{index:n,filter:r}))},g=(e,t)=>async(a,s)=>{const n=(0,o.E0)(e,s());a((0,c.e_)((0,l.Y6)(n,t))),await a((0,d.MB)((0,l.GT)(n),!0))},f=(e,t)=>async(a,s)=>{const n=(0,o.E0)(e,s());a((0,c.DO)((0,l.Y6)(n,t))),await a((0,d.MB)((0,l.GT)(n),!0))},b=(e,t)=>async(a,s)=>{const n=(0,o.E0)(e,s());a((0,c.QL)((0,l.Y6)(n,t))),await a((0,d.MB)((0,l.GT)(n),!0))},v=(e,t)=>async(a,s)=>{const n=(0,o.E0)(e,s());a((0,c.aM)((0,l.Y6)(n,t))),await a((0,d.MB)((0,l.GT)(n),!0))},x=e=>async(t,a)=>{const{editor:s}=a().templating,c=(0,o.E0)(s.id,a());t((0,r.z7)({propName:"infoText",propValue:"Ad hoc filters are applied automatically to all queries that target this data source"})),t((0,i.Pl)((0,l.Y6)(c,{propName:"datasource",propValue:e})));const d=await(0,n.ak)().get(e);d&&d.getTagKeys||t((0,r.z7)({propName:"infoText",propValue:"This data source does not support ad hoc filters yet."}))},y=()=>e=>{const t=(0,n.ak)().getList({metrics:!0,variables:!0}).reduce(((e,t)=>{if(t.meta.mixed)return e;const a=t.isDefault?`${t.name} (default)`:t.name,s=(0,p.getDataSourceRef)(t);return e.push({text:a,value:s}),e}),[{text:"",value:{}}]);e((0,r.z7)({propName:"dataSources",propValue:t}))},w=e=>(t,a)=>{const n=Object.assign({},(0,s.cloneDeep)(c.Js),{datasource:e.datasource,name:h,id:h}),r=(0,o.Eo)(a()),d={type:"adhoc",id:n.id};t((0,i.VN)((0,l.Y6)(d,{global:!1,model:n,index:r})))},j=(e,t)=>Object.values(t.templating.variables).find((t=>{var a;return(0,u.Kn)(t)&&(null===(a=t.datasource)||void 0===a?void 0:a.uid)===e.datasource.uid}))},"./public/app/features/variables/adhoc/picker/AdHocFilter.tsx":(e,t,a)=>{"use strict";a.d(t,{F:()=>j});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/features/plugins/datasource_srv.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=e=>{let{datasource:t,onChange:a,filterKey:s,getTagKeysOptions:r}=e;const o=()=>u(t,r);return null===s?(0,i.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper",children:(0,i.jsx)(n.SegmentAsync,{className:"query-segment-key",Component:d,value:s,onChange:a,loadOptions:o,inputMinWidth:90})}):(0,i.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper",children:(0,i.jsx)(n.SegmentAsync,{className:"query-segment-key",value:s,onChange:a,loadOptions:()=>p(t,r),inputMinWidth:90})})},l="-- remove filter --",c={label:l,value:l},d=(0,i.jsx)("a",{className:"gf-form-label query-part","aria-label":"Add Filter",children:(0,i.jsx)(n.Icon,{name:"plus"})}),u=async(e,t)=>{const a=await(0,r.ak)().get(e);if(!a||!a.getTagKeys)return[];return(await a.getTagKeys(t)).map((e=>({label:e.text,value:e.text})))},p=async(e,t)=>{const a=await u(e,t);return[c,...a]},h=["=","!=","<",">","=~","!~"].map((e=>({label:e,value:e}))),m=e=>{let{value:t,onChange:a}=e;return(0,i.jsx)(n.Segment,{className:"query-segment-operator",value:t,options:h,onChange:a})},g=e=>{let{datasource:t,onChange:a,filterKey:s,filterValue:r,placeHolder:o}=e;return(0,i.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper",children:(0,i.jsx)(n.SegmentAsync,{className:"query-segment-value",placeholder:o,value:r,onChange:a,loadOptions:()=>f(t,s)})})},f=async(e,t)=>{const a=await(0,r.ak)().get(e);if(!a||!a.getTagValues)return[];return(await a.getTagValues({key:t})).map((e=>({label:e.text,value:e.text})))},b=e=>{let{datasource:t,filter:{key:a,operator:s,value:n},onKeyChange:r,onOperatorChange:l,onValueChange:c,placeHolder:d,getTagKeysOptions:u}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o,{datasource:t,filterKey:a,onChange:r,getTagKeysOptions:u}),(0,i.jsx)("div",{className:"gf-form",children:(0,i.jsx)(m,{value:s,onChange:l})}),(0,i.jsx)(g,{datasource:t,filterKey:a,filterValue:n,onChange:c,placeHolder:d})]})},v=e=>{let{datasource:t,appendBefore:a,onCompleted:n,getTagKeysOptions:r}=e;const[c,d]=(0,s.useState)(null),[u,p]=(0,s.useState)("="),h=(0,s.useCallback)((e=>{var t;e.value===l?d(null):d(null!==(t=e.value)&&void 0!==t?t:"")}),[d]),m=(0,s.useCallback)((e=>{var t;return p(null!==(t=e.value)&&void 0!==t?t:"")}),[p]),g=(0,s.useCallback)((e=>{var t;n({value:null!==(t=e.value)&&void 0!==t?t:"",operator:u,condition:"",key:c}),d(null),p("=")}),[n,u,c]);return null===c?(0,i.jsx)(o,{datasource:t,filterKey:c,onChange:h,getTagKeysOptions:r}):(0,i.jsxs)(s.Fragment,{children:[a,(0,i.jsx)(b,{datasource:t,filter:{key:c,value:"",operator:u,condition:""},placeHolder:"select value",onKeyChange:h,onOperatorChange:m,onValueChange:g,getTagKeysOptions:r})]},"filter-builder")},x=e=>{let{label:t}=e;return(0,i.jsx)("div",{className:"gf-form",children:(0,i.jsx)("span",{className:"gf-form-label query-keyword",children:t})})};var y;function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class j extends s.PureComponent{constructor(){super(...arguments),w(this,"onChange",((e,t)=>a=>{const{filters:s}=this.props,{value:n}=a;return a.value===l?this.props.removeFilter(e):this.props.changeFilter(e,Object.assign({},s[e],{[t]:n}))})),w(this,"appendFilterToVariable",(e=>{this.props.addFilter(e)}))}render(){const{filters:e}=this.props;return(0,i.jsxs)("div",{className:"gf-form-inline",children:[this.renderFilters(e),(0,i.jsx)(v,{datasource:this.props.datasource,appendBefore:e.length>0?y||(y=(0,i.jsx)(x,{label:"AND"})):null,onCompleted:this.appendFilterToVariable,getTagKeysOptions:this.props.getTagKeysOptions})]})}renderFilters(e){return e.reduce(((e,t,a)=>(e.length>0&&e.push((0,i.jsx)(x,{label:"AND"},`condition-${a}`)),e.push(this.renderFilterSegments(t,a)),e)),[])}renderFilterSegments(e,t){return(0,i.jsx)(s.Fragment,{children:(0,i.jsx)(b,{datasource:this.props.datasource,filter:e,onKeyChange:this.onChange(t,"key"),onOperatorChange:this.onChange(t,"operator"),onValueChange:this.onChange(t,"value"),getTagKeysOptions:this.props.getTagKeysOptions})},`filter-${t}`)}}},"./public/app/features/variables/adhoc/reducer.ts":(e,t,a)=>{"use strict";a.d(t,{Js:()=>i,QL:()=>l,DO:()=>c,e_:()=>d,aM:()=>u,jo:()=>p});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./public/app/features/variables/types.ts"),r=a("./public/app/features/variables/state/types.ts");const i=Object.assign({},n.Eg,{type:"adhoc",datasource:null,filters:[]}),o=(0,s.oM)({name:"templating/adhoc",initialState:r.sX,reducers:{filterAdded:(e,t)=>{(0,r.ir)(e,t.payload.id).filters.push(t.payload.data)},filterRemoved:(e,t)=>{const a=(0,r.ir)(e,t.payload.id),s=t.payload.data;a.filters.splice(s,1)},filterUpdated:(e,t)=>{const a=(0,r.ir)(e,t.payload.id),{filter:s,index:n}=t.payload.data;a.filters[n]=s},filtersRestored:(e,t)=>{(0,r.ir)(e,t.payload.id).filters=t.payload.data}}}),{filterAdded:l,filterRemoved:c,filterUpdated:d,filtersRestored:u}=o.actions,p=o.reducer},"./public/app/features/variables/constants.ts":(e,t,a)=>{"use strict";a.d(t,{UY:()=>s,xk:()=>n,r2:()=>r,BH:()=>i,QX:()=>o});const s="00000000-0000-0000-0000-000000000000",n="All",r="$__all",i="None",o=""},"./public/app/features/variables/editor/LegacyVariableQueryEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{z:()=>c,R:()=>d});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-e2e-selectors/src/index.ts"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),o=a("./public/app/features/variables/editor/VariableTextAreaField.tsx"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c="Grafana-LegacyVariableQueryEditor",d=e=>{let{onChange:t,query:a}=e;const i=(0,r.useStyles)(u),[c,d]=(0,s.useState)(a),p=(0,s.useCallback)((e=>{t(e.currentTarget.value,e.currentTarget.value)}),[t]);return(0,l.jsx)("div",{className:i.container,children:(0,l.jsx)(o.W,{name:"Query",value:c,placeholder:"metric name or tags query",width:100,onChange:e=>{d(e.currentTarget.value)},onBlur:p,required:!0,labelWidth:20,ariaLabel:n.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput})})};function u(e){return{container:i.css`
      margin-bottom: ${e.spacing.xs};
    `}}d.displayName=c},"./public/app/features/variables/editor/VariableSectionHeader.tsx":(e,t,a)=>{"use strict";a.d(t,{e:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/index.ts"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function i(e){let{name:t}=e;const a=(0,s.useStyles)(o);return(0,r.jsx)("h5",{className:a.sectionHeading,children:t})}function o(e){return{sectionHeading:n.css`
      label: sectionHeading;
      font-size: ${e.typography.size.md};
      margin-bottom: ${e.spacing.sm};
    `}}},"./public/app/features/variables/editor/VariableSelectField.tsx":(e,t,a)=>{"use strict";a.d(t,{u:()=>o});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/index.ts"),n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("./public/app/plugins/datasource/influxdb/components/useUniqueId.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function o(e){let{name:t,value:a,options:n,tooltip:o,onChange:c,ariaLabel:d,width:u,labelWidth:p}=e;const h=(0,s.useStyles)(l),m=`variable-select-input-${t}-${(0,r.L)()}`;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.InlineFormLabel,{width:null!=p?p:6,tooltip:o,htmlFor:m,children:t}),(0,i.jsx)("div",{"aria-label":d,children:(0,i.jsx)(s.Select,{inputId:m,menuShouldPortal:!0,onChange:c,value:a,width:null!=u?u:25,options:n,className:h.selectContainer})})]})}function l(e){return{selectContainer:n.css`
      margin-right: ${e.spacing.xs};
    `}}},"./public/app/features/variables/editor/VariableTextAreaField.tsx":(e,t,a)=>{"use strict";a.d(t,{W:()=>o});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function o(e){let{name:t,value:a,placeholder:r,tooltip:o,onChange:c,onBlur:d,ariaLabel:u,required:p,width:h,labelWidth:m}=e;const g=(0,n.useStyles)(l),f=(0,s.useCallback)((e=>e&&"string"==typeof e?e.split("\n").length:1),[]);return(0,i.jsx)(n.InlineField,{label:t,labelWidth:null!=m?m:12,tooltip:o,children:(0,i.jsx)(n.TextArea,{rows:f(a),value:a,onChange:c,onBlur:d,placeholder:r,required:p,"aria-label":u,cols:h,className:g.textarea})})}function l(e){return{textarea:r.css`
      white-space: pre-wrap;
      min-height: 32px;
      height: auto;
      overflow: auto;
      padding: 6px 8px;
    `}}},"./public/app/features/variables/editor/VariableTextField.tsx":(e,t,a)=>{"use strict";a.d(t,{V:()=>r});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/index.ts"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function r(e){let{value:t,name:a,placeholder:r,onChange:i,ariaLabel:o,width:l,labelWidth:c,required:d,onBlur:u,tooltip:p,grow:h}=e;return(0,n.jsx)(s.InlineField,{label:a,labelWidth:null!=c?c:12,tooltip:p,grow:h,children:(0,n.jsx)(s.Input,{type:"text",id:a,name:a,placeholder:r,value:t,onChange:i,onBlur:u,width:h?void 0:null!=l?l:25,"aria-label":o,required:d})})}},"./public/app/features/variables/editor/reducer.ts":(e,t,a)=>{"use strict";a.d(t,{gl:()=>i,lc:()=>o,Yu:()=>l,Yo:()=>c,y8:()=>d,wJ:()=>u,qe:()=>p,z7:()=>h,Sg:()=>m,PV:()=>g,QR:()=>f});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js");const n={id:"",isValid:!0,errors:{},name:"",extended:null},r=(0,s.oM)({name:"templating/editor",initialState:n,reducers:{setIdInEditor:(e,t)=>{e.id=t.payload.id},clearIdInEditor:(e,t)=>{e.id=""},variableEditorMounted:(e,t)=>{e.name=t.payload.name},variableEditorUnMounted:(e,t)=>n,changeVariableNameSucceeded:(e,t)=>{e.name=t.payload.data.newName,delete e.errors.name,e.isValid=0===Object.keys(e.errors).length},changeVariableNameFailed:(e,t)=>{e.name=t.payload.newName,e.errors.name=t.payload.errorText,e.isValid=0===Object.keys(e.errors).length},addVariableEditorError:(e,t)=>{e.errors[t.payload.errorProp]=t.payload.errorText,e.isValid=0===Object.keys(e.errors).length},removeVariableEditorError:(e,t)=>{delete e.errors[t.payload.errorProp],e.isValid=0===Object.keys(e.errors).length},changeVariableEditorExtended:(e,t)=>{e.extended=Object.assign({},e.extended,{[t.payload.propName]:t.payload.propValue})},cleanEditorState:()=>n}}),i=r.reducer,{setIdInEditor:o,clearIdInEditor:l,changeVariableNameSucceeded:c,changeVariableNameFailed:d,variableEditorMounted:u,variableEditorUnMounted:p,changeVariableEditorExtended:h,addVariableEditorError:m,removeVariableEditorError:g,cleanEditorState:f}=r.actions},"./public/app/features/variables/getAllVariableValuesForUrl.ts":(e,t,a)=>{"use strict";a.d(t,{c:()=>r});var s=a("./packages/grafana-runtime/src/index.ts"),n=a("./public/app/features/variables/adapters.ts");function r(e){const t={},a=(0,s.getTemplateSrv)().getVariables();for(let s=0;s<a.length;s++){const r=a[s];if(e&&void 0!==e[r.name]){if(e[r.name].skipUrlSync)continue;t["var-"+r.name]=e[r.name].value}else{if(r.skipUrlSync)continue;t["var-"+r.name]=n.z.get(r.type).getValueForUrl(r)}}return t}},"./public/app/features/variables/guard.ts":(e,t,a)=>{"use strict";a.d(t,{Xh:()=>r,Kn:()=>i,VC:()=>o,U4:()=>l,eL:()=>c,Kr:()=>d,R:()=>p,Ju:()=>h,d7:()=>m,X7:()=>g,NX:()=>f,$7:()=>b});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/features/variables/editor/LegacyVariableQueryEditor.tsx");const r=e=>"query"===e.type,i=e=>"adhoc"===e.type,o=e=>"constant"===e.type,l=e=>{const t=e;return t.hasOwnProperty("multi")&&"boolean"==typeof t.multi},c=e=>u(e,"options"),d=e=>u(e,"current");function u(e,t){if(!e)return!1;const a=e;return a.hasOwnProperty(t)&&"object"==typeof a[t]}const p=e=>Boolean(e.metricFindQuery)&&!Boolean(e.variables),h=e=>{if(!e.variables)return!1;if(e.variables.getType()!==s.VariableSupportType.Standard)return!1;const t=e.variables;return Boolean(t.toDataQuery)},m=e=>{if(!e.variables)return!1;if(e.variables.getType()!==s.VariableSupportType.Custom)return!1;const t=e.variables;return Boolean(t.query)&&Boolean(t.editor)},g=e=>!!e.variables&&e.variables.getType()===s.VariableSupportType.Datasource;function f(e,t){return!!e&&(e.displayName===n.z||p(t))}function b(e,t){return!!e&&(e.displayName!==n.z&&(g(t)||h(t)||m(t)))}},"./public/app/features/variables/inspect/reducer.ts":(e,t,a)=>{"use strict";a.d(t,{iV:()=>n,j4:()=>r});const s=(0,a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js").oM)({name:"templating/inspect",initialState:{usages:[],usagesNetwork:[]},reducers:{initInspect:(e,t)=>{const{usages:a,usagesNetwork:s}=t.payload;e.usages=a,e.usagesNetwork=s}}}),n=s.reducer,{initInspect:r}=s.actions},"./public/app/features/variables/inspect/utils.ts":(e,t,a)=>{"use strict";a.d(t,{GQ:()=>c,Of:()=>d,MJ:()=>u,V:()=>g,Yg:()=>f,PQ:()=>b,vI:()=>w,Rv:()=>C});var s=a("./public/app/features/variables/adapters.ts"),n=a("./public/app/features/dashboard/state/index.ts"),r=a("./public/app/features/variables/guard.ts"),i=a("./public/app/core/utils/explore.ts"),o=a("./public/app/features/variables/utils.ts"),l=a("./packages/grafana-data/src/index.ts");const c=e=>{const t=[];for(const a of e)t.push({id:a.id,label:`${a.id}`});return t},d=(e,t)=>e.filter((e=>t.some((t=>t.from===e.id||t.to===e.id)))),u=e=>{const t=[];for(const a of e)for(const n of e){if(a===n)continue;s.z.get(a.type).dependsOn(a,n)&&t.push({from:a.id,to:n.id})}return t};function p(e){const t=(0,o.a9)(e);if(!t)return null;return t.slice(1).find((e=>void 0!==e))}const h={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},m=(e,t,a)=>{const s=Object.keys(t.value).reduce(((a,s)=>{const n=t.value[s];if(!n||"string"!=typeof n)return a;const r=h[s]?h[s].find((t=>t.test(e))):void 0;let i=(0,o.QI)(n,e);return"repeat"===s&&n===e&&(i=!0),!r&&i&&(a=Object.assign({},a,{[s]:n})),a}),{}),n=Object.keys(t.value).reduce(((a,s)=>{const n=t.value[s];if(n&&"object"==typeof n&&Object.keys(n).length){let r=n.title||n.name||n.id||s;Array.isArray(t.value)&&"panels"===t.key&&(r=`${r}[${n.id}]`);const i=m(e,{key:s,value:n},{});Object.keys(i).length&&(a=Object.assign({},a,{[r]:i}))}return a}),{});return(Object.keys(s).length||Object.keys(n).length)&&(a=Object.assign({},a,s,n)),a},g=(e,t)=>{if(!t)return{unUsed:[],usages:[]};const a=[];let s=[];const n=t.getSaveModelClone();for(const t of e){const e=t.id,i=m(e,{key:"model",value:n},{});Object.keys(i).length||(0,r.Kn)(t)||a.push(t),Object.keys(i).length&&s.push({variable:t,tree:i})}return{unUsed:a,usages:s}};async function f(e,t){return new Promise(((a,s)=>{setTimeout((()=>{try{const s=function(e,t){if(!t)return[];let a=[];const s=t.getSaveModelClone(),n=((e,t)=>{o.J7.lastIndex=0;const a=[],s=(0,i.Xh)(t,2).match(o.J7);if(!s)return a;for(const t of s){if(!t)continue;if(-1!==t.indexOf("$__"))continue;if(-1!==t.indexOf("${__"))continue;if(-1!==t.indexOf("$hashKey"))continue;const s=p(t);e.some((e=>e.id===s))||a.find((e=>e===s))||s&&a.push(s)}return a})(e,s);for(const e of n){const t=m(e,{key:"model",value:s},{});if(Object.keys(t).length){const s={id:e,name:e};a.push({variable:s,tree:t})}}return a}(e,t);a(w(s))}catch(e){s(e)}}),200)}))}function b(e,t,a){const s=k(a);let n=x(e,s);const r=x(l.DataLinkBuiltInVars.includeVars,s);n=[...new Set([...r,...n])];const i=v(e,t,new Set);for(const e of i){const t=x(e,s);n=[...new Set([...t,...n])]}return n}function v(e,t,a){if(!t.length)return a;for(const n of t){if(n.name===e)continue;s.z.get(n.type).dependsOn(n,{name:e})&&(a.add(n.name),a=v(n.name,t,a))}return a}function x(e,t){if(!t.length)return[];const a=[],s=new RegExp(`"repeat":"${e}"`);for(const n of t){const t=(0,i.Xh)(n.getSaveModel()),r=t.match(s);if(null!=r&&r.length){a.push(n.id);continue}const l=t.match(o.J7);if(l)for(const t of l){if(p(t)===e){a.push(n.id);break}}}return a}const y=(e,t)=>{const{id:a,value:s}=t,{nodes:n,edges:r}=e;if(s&&"string"==typeof s){const i=`${t.id}-${s}`;return n.push({id:i,label:s}),r.push({from:i,to:a}),e}if(s&&"object"==typeof s){const i=Object.keys(s);for(const o of i){const i=`${t.id}-${o}`;n.push({id:i,label:o}),r.push({from:i,to:a}),e=y(e,{id:i,value:s[o]})}return e}return e},w=e=>{const t=[];for(const a of e){const{variable:e,tree:s}=a,n={variable:e,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};t.push(y(n,{id:"dashboard",value:s}))}return t},j=e=>Object.values(e).reduce(((e,t)=>"object"==typeof t?e+j(t):e+1),0),C=(e,t)=>{const a=t.find((t=>t.variable.id===e));return a?j(a.tree):0};function k(e){const t=[];for(const s of e){var a;t.push(s),null!==(a=s.panels)&&void 0!==a&&a.length&&t.push(...k(s.panels.map((e=>new n.r(e)))))}return t}},"./public/app/features/variables/pickers/OptionsPicker/reducer.ts":(e,t,a)=>{"use strict";a.d(t,{XJ:()=>C,nn:()=>b,Ew:()=>v,cv:()=>k,aN:()=>f,iQ:()=>x,_M:()=>g,ss:()=>w,wF:()=>j,Ug:()=>y});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("./public/app/features/variables/guard.ts");const i=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return a.reduce(((e,t)=>t(e)),e)};var o=a("./public/app/features/variables/utils.ts"),l=a("./public/app/features/variables/constants.ts");const c={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},d=e=>{if(!Array.isArray(e.options))return e.options=[],e;const t=(a=e.selectedValues,Array.isArray(a)?a.reduce(((e,t)=>((0,n.isString)(t.value)&&(e[t.value]=t),e)),{}):{});var a;return e.selectedValues=Object.values(t),e.options=e.options.map((e=>{if(!(0,n.isString)(e.value))return e;const a=!!t[e.value];return e.selected===a?e:Object.assign({},e,{selected:a})})),e.options=u(e.options),e},u=e=>Array.isArray(e)?e.length<=1e3?e:e.slice(0,1e3):[],p=e=>{const{options:t,selectedValues:a}=e;return 0===t.length||a.length>0?e:t[0]&&t[0].value===l.r2?(e.selectedValues=[Object.assign({},t[0],{selected:!0})],e):e},h=e=>{const{selectedValues:t}=e;return t.length>1&&(e.selectedValues=t.filter((e=>e.value!==l.r2))),e},m=(0,s.oM)({name:"templating/optionsPicker",initialState:c,reducers:{showOptions:(e,t)=>{const{query:a,options:s}=t.payload;var l;(e.highlightIndex=-1,e.options=(0,n.cloneDeep)(s),e.id=t.payload.id,e.queryValue="",e.multi=!1,(0,r.U4)(t.payload))&&(e.multi=null!==(l=t.payload.multi)&&void 0!==l&&l);if((0,r.Xh)(t.payload)){const{queryValue:s}=t.payload,n=(0,o.bf)(a);e.queryValue=n&&s?s:""}return e.selectedValues=e.options.filter((e=>e.selected)),i(e,p,d)},hideOptions:(e,t)=>Object.assign({},c),toggleOption:(e,t)=>{const{option:a,clearOthers:s,forceSelect:n}=t.payload,{multi:r,selectedValues:o}=e;if(a){const t=!o.find((e=>e.value===a.value&&e.text===a.text));if(a.value===l.r2||!r||s)return e.selectedValues=t||n?[Object.assign({},a,{selected:!0})]:[],i(e,p,h,d);if(n||t)return e.selectedValues.push(Object.assign({},a,{selected:!0})),i(e,p,h,d);e.selectedValues=o.filter((e=>e.value!==a.value&&e.text!==a.text))}else e.selectedValues=[];return i(e,p,h,d)},moveOptionsHighlight:(e,t)=>{let a=e.highlightIndex+t.payload;return a<0?a=0:a>=e.options.length&&(a=e.options.length-1),Object.assign({},e,{highlightIndex:a})},toggleAllOptions:(e,t)=>e.selectedValues.length>0?(e.selectedValues=[],i(e,d)):(e.selectedValues=e.options.filter((e=>e.value!==l.r2)).map((e=>Object.assign({},e,{selected:!0}))),i(e,d)),updateSearchQuery:(e,t)=>(e.queryValue=t.payload,e),updateOptionsAndFilter:(e,t)=>{var a;const s=(0,n.trim)((null!==(a=e.queryValue)&&void 0!==a?a:"").toLowerCase());return e.options=t.payload.filter((e=>{var t;const a=null!==(t=e.text)&&void 0!==t?t:"";return-1!==(Array.isArray(a)?a.toString():a).toLowerCase().indexOf(s)})),e.highlightIndex=0,i(e,p,d)},updateOptionsFromSearch:(e,t)=>(e.options=t.payload,e.highlightIndex=0,i(e,p,d)),cleanPickerState:()=>c}}),{toggleOption:g,showOptions:f,hideOptions:b,moveOptionsHighlight:v,toggleAllOptions:x,updateSearchQuery:y,updateOptionsAndFilter:w,updateOptionsFromSearch:j,cleanPickerState:C}=m.actions,k=m.reducer},"./public/app/features/variables/shared/formatVariable.ts":(e,t,a)=>{"use strict";a.d(t,{y:()=>s});const s=e=>{if(!n(e))return e.name;const{current:t}=e;return Array.isArray(t.text)?t.text.join(" + "):t.text},n=e=>Array.isArray(null==e?void 0:e.options)||"object"==typeof(null==e?void 0:e.current)},"./public/app/features/variables/shared/multiOptions.ts":(e,t,a)=>{"use strict";a.d(t,{x:()=>s});const s=(e,t)=>e?t&&!Array.isArray(e.value)?Object.assign({},e,{value:r(e.value),text:r(e.text)}):!t&&Array.isArray(e.value)?Object.assign({},e,{value:n(e.value),text:n(e.text)}):e:e,n=e=>Array.isArray(e)?e.length>0?e[0]:"":e,r=e=>Array.isArray(e)?e:[e]},"./public/app/features/variables/state/actions.ts":(e,t,a)=>{"use strict";a.d(t,{wX:()=>Y,Z7:()=>$,LX:()=>Q,DU:()=>H,Fz:()=>V,Ci:()=>E,xs:()=>W,Rk:()=>J,xQ:()=>z,MB:()=>U});var s=a("../../opt/drone/yarncache/angular-npm-1.8.2-307000482b-35ea81a23b.zip/node_modules/angular/index.js"),n=a.n(s),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),i=a("./packages/grafana-data/src/index.ts"),o=a("./public/app/features/variables/types.ts"),l=a("./public/app/features/variables/state/selectors.ts"),c=a("./public/app/features/variables/adapters.ts");function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u{constructor(){d(this,"inputNode",void 0),d(this,"outputNode",void 0)}_linkTo(e,t){t<=0&&e.inputEdges.push(this),t>=0&&e.outputEdges.push(this),e.edges.push(this)}link(e,t){if(!e)throw Error("inputNode is required");if(!t)throw Error("outputNode is required");return this.unlink(),this.inputNode=e,this.outputNode=t,this._linkTo(e,1),this._linkTo(t,-1),this}unlink(){let e;const t=this.inputNode,a=this.outputNode;t&&a&&(e=t.edges.indexOf(this),e>-1&&t.edges.splice(e,1),e=a.edges.indexOf(this),e>-1&&a.edges.splice(e,1),e=t.outputEdges.indexOf(this),e>-1&&t.outputEdges.splice(e,1),e=a.inputEdges.indexOf(this),e>-1&&a.inputEdges.splice(e,1))}}class p{constructor(e){d(this,"name",void 0),d(this,"edges",void 0),d(this,"inputEdges",void 0),d(this,"outputEdges",void 0),this.name=e,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(e){return e?"object"==typeof e?this.inputEdges.find((t=>{var a;return(null===(a=t.inputNode)||void 0===a?void 0:a.name)===e.name})):this.inputEdges.find((t=>{var a;return(null===(a=t.inputNode)||void 0===a?void 0:a.name)===e})):null}getEdgeTo(e){return e?"object"==typeof e?this.outputEdges.find((t=>{var a;return(null===(a=t.outputNode)||void 0===a?void 0:a.name)===e.name})):this.outputEdges.find((t=>{var a;return(null===(a=t.outputNode)||void 0===a?void 0:a.name)===e})):null}getOptimizedInputEdges(){const e=[];return this.inputEdges.forEach((t=>{var a;const s=null===(a=t.inputNode)||void 0===a?void 0:a.inputEdges.map((e=>e.inputNode));null==s||s.forEach((t=>{const a=null==t?void 0:t.getEdgeTo(this.name);a&&e.push(a)}))})),this.inputEdges.filter((t=>-1===e.indexOf(t)))}}class h{constructor(){d(this,"nodes",{})}createNode(e){const t=new p(e);return this.nodes[e]=t,t}createNodes(e){const t=[];return e.forEach((e=>{t.push(this.createNode(e))})),t}link(e,t){let a=[],s=[];const n=[],r=[];a=e instanceof Array?e:[e],s=t instanceof Array?t:[t];for(let e=0;e<a.length;e++){const t=a[e];if("string"==typeof t){const e=this.getNode(t);if(!e)throw Error(`cannot link input node named ${t} since it doesn't exist in graph`);n.push(e)}else n.push(t)}for(let e=0;e<s.length;e++){const t=s[e];if("string"==typeof t){const e=this.getNode(t);if(!e)throw Error(`cannot link output node named ${t} since it doesn't exist in graph`);r.push(e)}else r.push(t)}const i=[];return n.forEach((e=>{r.forEach((t=>{i.push(this.createEdge().link(e,t))}))})),i}createEdge(){return new u}getNode(e){return this.nodes[e]}}var m=a("./public/app/core/actions/index.ts"),g=a("./public/app/features/variables/state/sharedReducer.ts"),f=a("./public/app/features/variables/state/types.ts"),b=a("./public/app/core/services/context_srv.ts"),v=a("./public/app/features/templating/template_srv.ts"),x=a("./public/app/features/variables/shared/multiOptions.ts"),y=a("./public/app/features/variables/guard.ts"),w=a("./public/app/features/dashboard/services/TimeSrv.ts"),j=a("./public/app/core/copy/appNotification.ts"),C=a("./public/app/features/variables/state/transactionReducer.ts"),k=a("./public/app/core/services/backend_srv.ts"),S=a("./public/app/features/variables/state/variablesReducer.ts"),T=a("./public/app/features/variables/utils.ts"),O=a("./public/app/store/store.ts"),_=a("./public/app/features/plugins/datasource_srv.ts"),N=a("./public/app/features/variables/editor/reducer.ts"),I=a("./public/app/features/variables/pickers/OptionsPicker/reducer.ts"),P=a("./packages/grafana-runtime/src/index.ts"),M=a("./public/app/core/core.ts"),F=a("./public/app/features/variables/inspect/utils.ts"),A=a("./public/app/features/variables/constants.ts");function D(e){if(!(0,y.eL)(e))return e;let t=!1;for(const a of e.options)if(a.selected=!1,Array.isArray(e.current.value))for(const s of e.current.value)a.value===s&&(a.selected=t=!0);else a.value===e.current.value&&(a.selected=t=!0);return!t&&e.options.length&&(e.options[0].selected=!0),e}const $=(e,t)=>(a,s)=>{const n=(0,l.E0)(e.id,s()),r=(0,x.x)(n.current,t);a((0,g.Pl)((0,f.Y6)(e,{propName:"multi",propValue:t}))),a((0,g.Pl)((0,f.Y6)(e,{propName:"current",propValue:r})))},L=(e,t)=>{if(0===e.length)return!1;const a=(0,l.ng)(t);return e.filter((e=>a.some((t=>t.id===e.id&&(t.state===i.LoadingState.NotStarted||t.state===i.LoadingState.Loading))))).length>0},R=(e,t)=>async(a,s)=>{const n=(0,l.E0)(e.id,s());await(async(e,t)=>{const a=[];for(const s of(0,l.ng)(t))e!==s&&c.z.getIfExists(e.type)&&c.z.get(e.type).dependsOn(e,s)&&a.push(s);L(a,t)&&await new Promise((e=>{const t=O.h.subscribe((()=>{L(a,O.h.getState())||(t(),e())}))}))})(n,s());const r=t["var-"+n.name];if(void 0===r){if(n.hasOwnProperty("refresh")){const e=n;if(e.refresh===o.Bd.onDashboardLoad||e.refresh===o.Bd.onTimeRangeChanged)return void await a(J((0,f.GT)(e)))}a(ee(e))}else{const e=(0,T.Hi)(r);await c.z.get(n.type).setValueFromUrl(n,e)}},E=(e,t)=>async(a,s)=>{const n=(0,T.Hi)(t),i=(0,l.E0)(e.id,s());(0,T.iD)(i)!==o.Bd.never&&await a(J((0,f.GT)(i)));const d=(0,l.E0)(i.id,s());if(!d)throw new Error(`Couldn't find variable with name: ${i.name}`);let u=d.options.find((e=>e.text===n||e.value===n));if(!u&&(0,y.U4)(d)&&d.allValue&&n===d.allValue&&(u={text:A.xk,value:A.r2,selected:!1}),!u){let e=n;const t=n;Array.isArray(n)&&(e=n.reduce(((e,t)=>{const a=d.options.find((e=>e.value===t));return[].concat(e,a?[a.text]:[t])}),[])),u={text:e,value:t,selected:!1}}(0,y.U4)(d)&&(u=(0,x.x)({text:(0,r.castArray)(u.text),value:(0,r.castArray)(u.value),selected:!1},d.multi)),await c.z.get(i.type).setValue(d,u)},z=(e,t)=>(a,s)=>{var n;const r=(0,l.E0)(e.id,s()),i=r.current||{},o=c.z.get(r.type).setValue;if(Array.isArray(i.value)){const e=(e=>{let t,a,s,n;const r=[];for(t=0;t<e.options.length;t++)if(n=Object.assign({},e.options[t]),n.selected=!1,Array.isArray(e.current.value))for(a=0;a<e.current.value.length;a++)s=e.current.value[a],n.value===s&&(n.selected=!0,r.push(n));else n.value===e.current.value&&(n.selected=!0,r.push(n));return r})(r);if(0===e.length){return o(r,r.options[0])}return o(r,{value:e.map((e=>e.value)),text:e.map((e=>e.text)),selected:!0})}let d=null;const u=(0,T.Tt)(r);if(d=null===(n=r.options)||void 0===n?void 0:n.find((e=>e.text===u)),d)return o(r,d);var p;if(t&&(d=null===(p=r.options)||void 0===p?void 0:p.find((e=>e.text===t)),d))return o(r,d);if(r.options){const e=r.options[0];if(e)return o(r,e)}return Promise.resolve()},V=(e,t,a)=>async s=>(s((0,g.Q8)((0,f.Y6)(e,{option:t}))),await s(U(e,a))),B=e=>{const t=new h;return e.forEach((e=>{t.createNode(e.name)})),e.forEach((a=>{e.forEach((e=>{a!==e&&c.z.get(a.type).dependsOn(a,e)&&t.link(a.name,e.name)}))})),t},U=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M.h$;return async(s,n)=>{var r,i,c;const d=n(),u=(0,l.E0)(e.id,d);if(d.templating.transaction.status===o.LN.Fetching)return(0,T.iD)(u)===o.Bd.never&&(await s(te((0,f.GT)(u))),s(ee(e))),Promise.resolve();const p=(0,l.ng)(d),h=B(p),m=null!==(r=null===(i=d.dashboard)||void 0===i||null===(c=i.getModel())||void 0===c?void 0:c.panels)&&void 0!==r?r:[],g=(0,y.Kn)(u)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:(0,F.PQ)(u.id,p,m)},b=h.getNode(u.name);let v=[];return b&&(v=b.getOptimizedInputEdges().map((e=>{const t=p.find((t=>{var a;return t.name===(null===(a=e.inputNode)||void 0===a?void 0:a.name)}));return t?s(J((0,f.GT)(t))):Promise.resolve()}))),Promise.all(v).then((()=>{t&&(a.publish(new o.x9(g)),P.locationService.partial(Z(n)))}))}},H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{templateSrv:(0,v.J)(),events:M.h$};return async(a,s)=>{t.templateSrv.updateTimeRange(e);const n=(0,l.ng)(s()).filter((e=>{if(e.hasOwnProperty("refresh")&&e.hasOwnProperty("options")){return e.refresh===o.Bd.onTimeRangeChanged}return!1})),r=n.map((e=>e.id)),i=n.map((e=>a(q((0,f.GT)(e)))));try{await Promise.all(i),t.events.publish(new o.eq({variableIds:r}))}catch(e){console.error(e),a((0,m.$l)(X("Template variable service failed",e)))}}},q=e=>async(t,a)=>{const s=(0,l.E0)(e.id),r=s.options.slice();await t(J((0,f.GT)(s),!0));const i=(0,l.E0)(e.id,a()).options;if(n().toJson(r)!==n().toJson(i)){const e=a().dashboard.getModel();null==e||e.templateVariableValueUpdated()}},W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.h$;return async(a,s)=>{const n=[],r=s().dashboard.getModel();for(const t of(0,l.ng)(s())){const a=`var-${t.name}`;if(!e.hasOwnProperty(a))continue;if(!G(t,e[a].value))continue;let s=e[a].value;if(e[a].removed){const e=null==r?void 0:r.templating.list.find((e=>e.name===t.name));e&&(0,y.Kr)(e)&&(s=e.current.value),e&&(0,y.VC)(e)&&(s=e.query)}const i=c.z.get(t.type).setValueFromUrl(t,s);n.push(i)}n.length&&(await Promise.all(n),t.publish(new o.Wy({panelIds:[],refreshAll:!0})))}};function G(e,t){const a=c.z.get(e.type).getValueForUrl(e);let s=(0,T.Hi)(t);return Array.isArray(a)&&!Array.isArray(s)&&(s=[s]),!(0,r.isEqual)(a,s)}const Z=e=>{const t=P.locationService.getSearchObject(),a=Object.keys(t).filter((e=>-1===e.indexOf("var-"))).reduce(((e,a)=>(e[a]=t[a],e)),{});for(const t of(0,l.ng)(e())){if(t.skipUrlSync)continue;const e=c.z.get(t.type);a["var-"+t.name]=e.getValueForUrl(t)}return a},Q=(e,t)=>async(a,s)=>{try{s().templating.transaction.status===o.LN.Fetching&&a(Y()),a((0,C.Z9)({uid:e})),a((e=>t=>{const a=Object.assign({},o.Eg,{id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:o.bU.hideVariable,current:{value:{name:e.title,uid:e.uid,toString:()=>e.title}}});t((0,g.VN)((0,f.Y6)(a,{global:a.global,index:a.index,model:a})));const s=Object.assign({},o.Eg,{id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:o.bU.hideVariable,current:{value:{name:b.Vt.user.orgName,id:b.Vt.user.orgId,toString:()=>b.Vt.user.orgId.toString()}}});t((0,g.VN)((0,f.Y6)(s,{global:s.global,index:s.index,model:s})));const n=Object.assign({},o.Eg,{id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:o.bU.hideVariable,current:{value:{login:b.Vt.user.login,id:b.Vt.user.id,email:b.Vt.user.email,toString:()=>b.Vt.user.id.toString()}}});t((0,g.VN)((0,f.Y6)(n,{global:n.global,index:n.index,model:n})))})(t)),a((n=t.templating.list,(e,t)=>{let a=0;for(let t=0;t<n.length;t++){const s=D(n[t]);c.z.getIfExists(s.type)&&e((0,g.VN)((0,f.Y6)(s,{global:!1,index:a++,model:s})))}(0,v.J)().updateTimeRange((0,w.$t)().timeRange());const s=(0,l.ng)(t());for(let t=0;t<s.length;t++){const a=s[t];e((0,g.Mn)((0,f.Y6)(a)))}})),a(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.ak;return function(t,a){const s=(0,l.ng)(a());for(const a of s){if(!(0,y.Kn)(a)&&!(0,y.Xh)(a))continue;const{datasource:s}=a;if((0,i.isDataSourceRef)(s))continue;const n=e().getInstanceSettings(s),r=n?(0,i.getDataSourceRef)(n):{uid:s};t((0,g.Pl)((0,f.Y6)(a,{propName:"datasource",propValue:r})))}}}()),await a((async(e,t)=>{const a=P.locationService.getSearchObject(),s=(0,l.ng)(t()).map((async t=>await e(R((0,f.GT)(t),a))));await Promise.all(s)})),a((0,C.iv)({uid:e}))}catch(e){a((0,m.$l)(X("Templating init failed",e))),console.error(e)}var n};const K=()=>e=>{e((0,S.S)()),e((0,N.QR)()),e((0,I.XJ)()),e((0,C.p3)())},Y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{getBackendSrv:k.i};return t=>{e.getBackendSrv().cancelAllInFlightRequests(),t(K())}},J=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return async(a,s)=>{try{if(!(0,T.A3)(s()))return;const t=(0,l.E0)(e.id,s());a((0,g.$M)((0,f.Y6)(t))),await a(te((0,f.GT)(t))),await c.z.get(t.type).updateOptions(t),a(ee(e))}catch(s){if(a((0,g.Le)((0,f.Y6)(e,{error:s}))),t||(console.error(s),a((0,m.$l)(X("Error updating options:",s,e)))),t)throw s}}},X=(e,t,a)=>(0,j.t_)(""+(a?`Templating [${a.id}]`:"Templating"),`${e} ${t.message}`),ee=e=>(t,a)=>{if(!(0,T.A3)(a()))return;const s=(0,l.E0)(e.id,a());s.state!==i.LoadingState.Done&&t((0,g.qQ)((0,f.Y6)(s)))};function te(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.ak;return async function(a,s){if(!(0,T.A3)(s()))return;const n=(0,l.E0)(e.id,s());if((0,y.Xh)(n))try{var r;const s=await t().get(null!==(r=n.datasource)&&void 0!==r?r:"");if((0,y.R)(s))return;if(!(0,y.Ju)(s))return;if(ae(n.query))return;const i={refId:`${s.name}-${e.id}-Variable-Query`,query:n.query};a((0,g.Pl)((0,f.Y6)(e,{propName:"query",propValue:i})))}catch(e){a((0,m.$l)(X("Failed to upgrade legacy queries",e))),console.error(e)}}}function ae(e){return!!e&&(e.hasOwnProperty("refId")&&"string"==typeof e.refId)}},"./public/app/features/variables/state/selectors.ts":(e,t,a)=>{"use strict";a.d(t,{E0:()=>r,Q4:()=>i,_K:()=>o,ng:()=>l,IV:()=>d,xD:()=>u,Eo:()=>p,QT:()=>h});var s=a("./public/app/store/store.ts"),n=a("../../opt/drone/yarncache/memoize-one-npm-6.0.0-8b2a2cd020-f185ea69f7.zip/node_modules/memoize-one/dist/memoize-one.esm.js");const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.y0)(),a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t.templating.variables[e])return t.templating.variables[e];if(a)throw new Error(`Couldn't find variable with id:${e}`)},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.y0)();return Object.values(t.templating.variables).filter(e).sort(((e,t)=>e.index-t.index))},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.y0)();return r(e,t,!1)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.y0)();return i(c,e)};function c(e){return"system"!==e.type}const d=(0,n.Z)((e=>l((0,s.y0)()))),u=e=>l(e);function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.y0)();return h(Object.values(e.templating.variables))}function h(e){const t=e.filter(c).sort(((e,t)=>e.index-t.index));return t.length>0?t[t.length-1].index+1:0}},"./public/app/features/variables/state/sharedReducer.ts":(e,t,a)=>{"use strict";a.d(t,{b5:()=>p,mZ:()=>h,VN:()=>m,Pl:()=>g,gE:()=>f,Y9:()=>b,Q8:()=>v,Be:()=>x,Mn:()=>y,$M:()=>w,qQ:()=>j,Le:()=>C});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),r=a("./packages/grafana-data/src/index.ts"),i=a("./public/app/features/variables/state/types.ts"),o=a("./public/app/features/variables/adapters.ts"),l=a("./public/app/features/variables/editor/reducer.ts"),c=a("./public/app/features/variables/utils.ts"),d=a("./public/app/features/variables/state/selectors.ts");const u=(0,s.oM)({name:"templating/shared",initialState:i.sX,reducers:{addVariable:(e,t)=>{var a;const s=null!==(a=t.payload.id)&&void 0!==a?a:t.payload.data.model.name,r=o.z.get(t.payload.type),i=(0,n.cloneDeep)(r.initialState),l=r.beforeAdding?r.beforeAdding(t.payload.data.model):(0,n.cloneDeep)(t.payload.data.model),c=Object.assign({},(0,n.defaults)({},l,i),{id:s,index:t.payload.data.index,global:t.payload.data.global});e[s]=c},variableStateNotStarted:(e,t)=>{const a=(0,i.ir)(e,t.payload.id);a.state=r.LoadingState.NotStarted,a.error=null},variableStateFetching:(e,t)=>{const a=(0,i.ir)(e,t.payload.id);a.state=r.LoadingState.Loading,a.error=null},variableStateCompleted:(e,t)=>{const a=(0,i.ir)(e,t.payload.id);a&&(a.state=r.LoadingState.Done,a.error=null)},variableStateFailed:(e,t)=>{const a=(0,i.ir)(e,t.payload.id);a&&(a.state=r.LoadingState.Error,a.error=t.payload.data.error)},removeVariable:(e,t)=>{if(delete e[t.payload.id],!t.payload.data.reIndex)return;const a=Object.values(e);for(let e=0;e<a.length;e++)a[e].index=e},duplicateVariable:(e,t)=>{var a,s;const r=(0,n.cloneDeep)(e[t.payload.id]),i=`copy_of_${r.name}`,l=null!==(a=null===(s=t.payload.data)||void 0===s?void 0:s.newId)&&void 0!==a?a:i,c=(0,d.QT)(Object.values(e));e[l]=Object.assign({},(0,n.cloneDeep)(o.z.get(t.payload.type).initialState),r,{id:l,name:i,index:c})},changeVariableOrder:(e,t)=>{const{toIndex:a,fromIndex:s}=t.payload.data,n=Object.values(e);for(let e=0;e<n.length;e++){const t=n[e];t.index===s?t.index=a:t.index>s&&t.index<=a?t.index--:t.index<s&&t.index>=a&&t.index++}},changeVariableType:(e,t)=>{const{id:a}=t.payload,{label:s,name:r,index:i,description:l}=e[a];e[a]=Object.assign({},(0,n.cloneDeep)(o.z.get(t.payload.data.newType).initialState),{id:a,label:s,name:r,index:i,description:l})},setCurrentVariableValue:(e,t)=>{if(!t.payload.data.option)return;const a=(0,i.ir)(e,t.payload.id),{option:s}=t.payload.data,n=Object.assign({},s,{text:(0,c.Hi)(null==s?void 0:s.text),value:(0,c.Hi)(null==s?void 0:s.value)});a.current=n,a.options=a.options.map((e=>{e.value=(0,c.Hi)(e.value);let t=!1;if(Array.isArray(n.value))for(let a=0;a<n.value.length;a++){const s=n.value[a];if(e.value===s){t=!0;break}}else e.value===n.value&&(t=!0);return e.selected=t,e}))},changeVariableProp:(e,t)=>{(0,i.ir)(e,t.payload.id)[t.payload.data.propName]=t.payload.data.propValue}},extraReducers:e=>e.addCase(l.Yo,((e,t)=>{(0,i.ir)(e,t.payload.id).name=t.payload.data.newName}))}),p=u.reducer,{removeVariable:h,addVariable:m,changeVariableProp:g,changeVariableOrder:f,duplicateVariable:b,setCurrentVariableValue:v,changeVariableType:x,variableStateNotStarted:y,variableStateFetching:w,variableStateCompleted:j,variableStateFailed:C}=u.actions},"./public/app/features/variables/state/transactionReducer.ts":(e,t,a)=>{"use strict";a.d(t,{Z9:()=>c,p3:()=>d,iv:()=>u,vw:()=>p});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./public/app/features/variables/state/sharedReducer.ts"),r=a("./public/app/features/variables/types.ts");const i={uid:null,status:r.LN.NotStarted,isDirty:!1},o=(0,s.oM)({name:"templating/transaction",initialState:i,reducers:{variablesInitTransaction:(e,t)=>{e.uid=t.payload.uid,e.status=r.LN.Fetching},variablesCompleteTransaction:(e,t)=>{e.uid===t.payload.uid&&(e.status=r.LN.Completed)},variablesClearTransaction:(e,t)=>{e.uid=null,e.status=r.LN.NotStarted,e.isDirty=!1}},extraReducers:e=>e.addMatcher(l,((e,t)=>{e.status===r.LN.Completed&&(e.isDirty=!0)}))});function l(e){return[n.mZ.type,n.VN.type,n.Pl.type,n.gE.type,n.Y9.type,n.Be.type].includes(e.type)}const{variablesInitTransaction:c,variablesClearTransaction:d,variablesCompleteTransaction:u}=o.actions,p=o.reducer},"./public/app/features/variables/state/types.ts":(e,t,a)=>{"use strict";a.d(t,{sX:()=>s,ir:()=>n,GT:()=>r,Y6:()=>i});const s={},n=(e,t)=>e[t],r=e=>({type:e.type,id:e.id});function i(e,t){return{type:e.type,id:e.id,data:t}}},"./public/app/features/variables/state/variablesReducer.ts":(e,t,a)=>{"use strict";a.d(t,{S:()=>o,L:()=>l});var s=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),n=a("./public/app/features/variables/adapters.ts"),r=a("./public/app/features/variables/state/sharedReducer.ts"),i=a("./public/app/features/variables/state/types.ts");const o=(0,s.PH)("templating/cleanVariables"),l=function(){var e,t;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.sX,s=arguments.length>1?arguments[1]:void 0;if(o.match(s)){const e=Object.values(a).filter((e=>e.global));if(!e)return i.sX;const t=e.reduce(((e,t)=>(e[t.id]=t,e)),{});return t}return null!=s&&null!==(e=s.payload)&&void 0!==e&&e.type&&n.z.getIfExists(null==s||null===(t=s.payload)||void 0===t?void 0:t.type)?n.z.get(s.payload.type).reducer((0,r.b5)(a,s),s):a}},"./public/app/features/variables/types.ts":(e,t,a)=>{"use strict";a.d(t,{LN:()=>i,Bd:()=>o,bU:()=>l,$U:()=>c,Eg:()=>d,x9:()=>u,eq:()=>p,Wy:()=>h});var s=a("./packages/grafana-data/src/index.ts"),n=a("./public/app/features/variables/constants.ts");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let i,o,l,c;!function(e){e.NotStarted="Not started",e.Fetching="Fetching",e.Completed="Completed"}(i||(i={})),function(e){e[e.never=0]="never",e[e.onDashboardLoad=1]="onDashboardLoad",e[e.onTimeRangeChanged=2]="onTimeRangeChanged"}(o||(o={})),function(e){e[e.dontHide=0]="dontHide",e[e.hideLabel=1]="hideLabel",e[e.hideVariable=2]="hideVariable"}(l||(l={})),function(e){e[e.disabled=0]="disabled",e[e.alphabeticalAsc=1]="alphabeticalAsc",e[e.alphabeticalDesc=2]="alphabeticalDesc",e[e.numericalAsc=3]="numericalAsc",e[e.numericalDesc=4]="numericalDesc",e[e.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",e[e.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc"}(c||(c={}));const d={id:n.UY,name:"",label:null,type:"",global:!1,index:-1,hide:l.dontHide,skipUrlSync:!1,state:s.LoadingState.NotStarted,error:null,description:null};class u extends s.BusEventWithPayload{}r(u,"type","variables-changed");class p extends s.BusEventWithPayload{}r(p,"type","variables-time-range-process-done");class h extends s.BusEventWithPayload{}r(h,"type","variables-changed-in-url")},"./public/app/features/variables/utils.ts":(e,t,a)=>{"use strict";a.d(t,{J7:()=>u,a9:()=>p,bf:()=>h,_6:()=>m,QI:()=>g,HY:()=>f,Tt:()=>b,gR:()=>v,AQ:()=>x,iD:()=>y,bi:()=>w,xT:()=>C,Hi:()=>k,A3:()=>S});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./public/app/features/variables/constants.ts"),i=a("./public/app/features/variables/types.ts"),o=a("./public/app/features/dashboard/services/TimeSrv.ts"),l=a("./public/app/features/variables/adapters.ts"),c=a("./public/app/core/utils/explore.ts"),d=a("./public/app/store/store.ts");const u=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,p=e=>(u.lastIndex=0,u.exec(e)),h=e=>!(!e||"string"!=typeof e)&&-1!==e.indexOf("__searchFilter"),m=e=>{const{query:t,wildcardChar:a}=e;if(!h(t))return{};let{options:s}=e;s=s||{searchFilter:""};return{__searchFilter:{value:s.searchFilter?`${s.searchFilter}${a}`:`${a}`,text:""}}};function g(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];const s=t[t.length-1];t[0]="string"==typeof t[0]?t[0]:(0,c.Xh)(t[0]);const n=t.slice(0,-1).join(" "),r=n.match(u),i=null!==r&&r.find((e=>{const t=p(e);return null!==t&&t.indexOf(s)>-1}));return!!i}const f=e=>{if(!e)return!1;if(!e.current)return!1;if(e.current.value){const t=Array.isArray(e.current.value);if(t&&e.current.value.length&&e.current.value[0]===r.r2)return!0;if(!t&&e.current.value===r.r2)return!0}if(e.current.text){const t=Array.isArray(e.current.text);if(t&&e.current.text.length&&e.current.text[0]===r.xk)return!0;if(!t&&e.current.text===r.xk)return!0}return!1},b=e=>e&&e.current&&e.current.text?Array.isArray(e.current.text)?e.current.text.toString():"string"!=typeof e.current.text?"":e.current.text:"";function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,n.getTemplateSrv)();return e&&e.regex?t.replace(e.regex,{},"regex"):""}function x(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.$t)();const s={range:void 0,variable:e,searchFilter:t};return e.refresh!==i.Bd.onTimeRangeChanged&&e.refresh!==i.Bd.onDashboardLoad||(s.range=a.timeRange()),s}function y(e){if(!e||!e.hasOwnProperty("refresh"))return i.Bd.never;const t=e;return t.refresh!==i.Bd.onTimeRangeChanged&&t.refresh!==i.Bd.onDashboardLoad&&t.refresh!==i.Bd.never?i.Bd.never:t.refresh}function w(){return l.z.list().filter((e=>"system"!==e.id)).map((e=>{let{id:t,name:a}=e;return{label:a,value:t}}))}function j(e){return(0,s.isArray)(e)&&(0===e.length?e=void 0:1===e.length&&(e=e[0])),e}function C(e,t){let a=0;const n={};for(const r in e){if(!r.startsWith("var-"))continue;let i=j(t[r]),o=j(e[r]);(0,s.isEqual)(o,i)||(n[r]={value:e[r]},a++)}for(const r in t){if(!r.startsWith("var-"))continue;const i=t[r];(0,s.isArray)(i)&&0===i.length||(e.hasOwnProperty(r)||(n[r]={value:"",removed:!0},a++))}return a?n:void 0}function k(e){return Array.isArray(e)?e.map(String):null==e?"":"number"==typeof e?e.toString(10):"string"==typeof e?e:"boolean"==typeof e?e.toString():""}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,d.y0)();return e.templating.transaction.status!==i.LN.NotStarted}},"./public/app/index.ts":(e,t,a)=>{"use strict";a("../../opt/drone/yarncache/symbol-observable-npm-4.0.0-5c36594410-212c7edce6.zip/node_modules/symbol-observable/es/index.js"),a("./.yarn/unplugged/core-js-npm-3.20.2-656ea79cc8/node_modules/core-js/index.js"),a("../../opt/drone/yarncache/regenerator-runtime-npm-0.13.9-6d02340eec-65ed455fe5.zip/node_modules/regenerator-runtime/runtime.js"),a("../../opt/drone/yarncache/whatwg-fetch-npm-3.6.2-4bdf324792-ee976b7249.zip/node_modules/whatwg-fetch/fetch.js"),a("./public/app/polyfills/old-mediaquerylist.ts"),a("../../opt/drone/yarncache/file-saver-npm-2.0.5-2c3bc40d53-c62d96e5ce.zip/node_modules/file-saver/dist/FileSaver.min.js");var s=a("../../opt/drone/yarncache/jquery-npm-3.6.0-ca7872bdbb-8fd5fef4aa.zip/node_modules/jquery/dist/jquery-exposed.js"),n=a.n(s),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),i=a.n(r),o=a("./.yarn/__virtual__/react-dom-virtual-93e2c4839c/3/opt/drone/yarncache/react-dom-npm-17.0.2-f551215af1-1c1eaa3bca.zip/node_modules/react-dom/index.js"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),c=a("./public/app/core/config.ts"),d=a("./packages/grafana-data/src/index.ts"),u=a("./public/app/core/utils/arrayMove.ts"),p=a("./public/app/features/plugins/plugin_loader.ts");async function h(e){const{path:t,version:a}=e;try{await(0,p.N$)(t,a)}catch(e){console.error(`Failed to load plugin: ${t} (version: ${a})`,e)}}var m=a("./packages/grafana-runtime/src/index.ts"),g=a("./public/app/core/services/context_srv.ts"),f=a("./packages/grafana-ui/src/index.ts");const b=(0,f.createLogger)("EchoSrv"),v=b.logger;function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}(0,f.attachDebugger)("echo",void 0,b);class y{constructor(e){x(this,"config",{flushInterval:1e4,debug:!1}),x(this,"backends",[]),x(this,"flush",(()=>{for(const e of this.backends)e.flush()})),x(this,"addBackend",(e=>{v("Adding backend",!1,e),this.backends.push(e)})),x(this,"addEvent",((e,t)=>{const a=this.getMeta(),s=Object.assign({},e,{meta:Object.assign({},a,t)});for(const e of this.backends)(0===e.supportedEvents.length||e.supportedEvents.indexOf(s.type)>-1)&&e.addEvent(s);v("Reporting event",!1,s)})),x(this,"getMeta",(()=>({sessionId:"",userId:g.Vt.user.id,userLogin:g.Vt.user.login,userSignedIn:g.Vt.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:(new Date).getTime(),timeSinceNavigationStart:performance.now(),url:window.location.href}))),this.config=Object.assign({},this.config,e),setInterval(this.flush,this.config.flushInterval)}}const w=(e,t)=>{(0,m.getEchoSrv)().addEvent({type:m.EchoEventType.Performance,payload:{name:e,value:t}})};var j=a("./public/app/core/services/backend_srv.ts");function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class k{constructor(e){C(this,"buffer",[]),C(this,"supportedEvents",[m.EchoEventType.Performance]),C(this,"addEvent",(e=>{this.buffer.push(e.payload)})),C(this,"flush",(()=>{0!==this.buffer.length&&(j.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])})),this.options=e}}var S=a("./public/app/features/plugins/datasource_srv.ts"),T=a("./public/app/features/dashboard/services/DashboardLoaderSrv.ts"),O=a("./public/app/features/dashboard/services/DashboardSrv.ts"),_=(a("./public/app/features/dashboard/components/DashExportModal/index.ts"),a("./public/app/features/dashboard/components/DashNav/index.ts"),a("./public/app/features/dashboard/components/VersionHistory/index.ts"),a("./public/app/features/dashboard/components/DashboardSettings/index.ts"),a("./public/app/features/variables/adapters.ts"));var N=a("./packages/grafana-data/src/transformations/transformers/reduce.ts"),I=a("./packages/grafana-e2e-selectors/src/index.ts"),P=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const M={id:d.DataTransformerID.reduce,editor:e=>{let{options:t,onChange:a}=e;const s=[{label:"Series to rows",value:N.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:N.AL.ReduceFields,description:"Collapse each field into a single value"}],n=(0,l.useCallback)((e=>{const s=e.value;a(Object.assign({},t,{mode:s,includeTimeField:s===N.AL.ReduceFields&&!!t.includeTimeField}))}),[a,t]),r=(0,l.useCallback)((()=>{a(Object.assign({},t,{includeTimeField:!t.includeTimeField}))}),[a,t]),i=(0,l.useCallback)((()=>{a(Object.assign({},t,{labelsToFields:!t.labelsToFields}))}),[a,t]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{children:(0,P.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,P.jsx)("div",{className:"gf-form-label width-8","aria-label":I.wl.components.Transforms.Reduce.modeLabel,children:"Mode"}),(0,P.jsx)(f.Select,{menuShouldPortal:!0,options:s,value:s.find((e=>e.value===t.mode))||s[0],onChange:n,className:"flex-grow-1"})]})}),(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,P.jsx)("div",{className:"gf-form-label width-8","aria-label":I.wl.components.Transforms.Reduce.calculationsLabel,children:"Calculations"}),(0,P.jsx)(f.StatsPicker,{className:"flex-grow-1",placeholder:"Choose Stat",allowMultiple:!0,stats:t.reducers||[],onChange:e=>{a(Object.assign({},t,{reducers:e}))}})]})}),t.mode===N.AL.ReduceFields&&(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)(f.LegacyForms.Switch,{label:"Include time",labelClass:"width-8",checked:!!t.includeTimeField,onChange:r})})}),t.mode!==N.AL.ReduceFields&&(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)(f.LegacyForms.Switch,{label:"Labels to fields",labelClass:"width-8",checked:!!t.labelsToFields,onChange:i})})})]})},transformation:d.standardTransformers.reduceTransformer,name:d.standardTransformers.reduceTransformer.name,description:d.standardTransformers.reduceTransformer.description};var F,A=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js");function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class L extends l.PureComponent{constructor(e){var t,a;super(e),D(this,"onFieldToggle",(e=>{const{selected:t}=this.state;t.indexOf(e)>-1?this.onChange(t.filter((t=>t!==e))):this.onChange([...t,e])})),D(this,"onChange",(e=>{const{regex:t,isRegexValid:a}=this.state,s=Object.assign({},this.props.options,{include:{names:e}});var n;t&&a&&(s.include=null!==(n=s.include)&&void 0!==n?n:{},s.include.pattern=t);this.setState({selected:e},(()=>{this.props.onChange(s)}))})),D(this,"onInputBlur",(e=>{const{selected:t,regex:a}=this.state;let s=!0;try{a&&(0,d.stringToJsRegex)(a)}catch(e){s=!1}s?this.props.onChange(Object.assign({},this.props.options,{include:{pattern:a}})):this.props.onChange(Object.assign({},this.props.options,{include:{names:t}})),this.setState({isRegexValid:s})})),this.state={include:(null===(t=e.options.include)||void 0===t?void 0:t.names)||[],regex:null===(a=e.options.include)||void 0===a?void 0:a.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(e){this.props.input!==e.input&&this.initOptions()}initOptions(){var e,t,a;const{input:s,options:n}=this.props,r=Array.from(null!==(e=null===(t=n.include)||void 0===t?void 0:t.names)&&void 0!==e?e:[]),i=[],o={};for(const e of s)for(const t of e.fields){const a=(0,d.getFieldDisplayName)(t,e,s);let n=o[a];n||(n=o[a]={name:a,count:0},i.push(n)),n.count++}if(null!==(a=n.include)&&void 0!==a&&a.pattern)try{const e=(0,d.stringToJsRegex)(n.include.pattern);for(const t of i)e.test(t.name)&&r.push(t.name)}catch(e){console.error(e)}if(r.length){var l;const e=i.filter((e=>r.includes(e.name)));this.setState({options:i,selected:e.map((e=>e.name)),regex:null===(l=n.include)||void 0===l?void 0:l.pattern})}else{var c;this.setState({options:i,selected:i.map((e=>e.name)),regex:null===(c=n.include)||void 0===c?void 0:c.pattern})}}render(){const{options:e,selected:t,isRegexValid:a}=this.state;return(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsxs)("div",{className:"gf-form gf-form--grow",children:[F||(F=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Identifier"})),(0,P.jsxs)(f.HorizontalGroup,{spacing:"xs",align:"flex-start",wrap:!0,children:[(0,P.jsx)(f.Field,{invalid:!a,error:a?void 0:"Invalid pattern",className:A.css`
                margin-bottom: 0;
              `,children:(0,P.jsx)(f.Input,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:e=>this.setState({regex:e.currentTarget.value}),onBlur:this.onInputBlur,width:25})}),e.map(((e,a)=>{const s=`${e.name}${e.count>1?" ("+e.count+")":""}`,n=t.indexOf(e.name)>-1;return(0,P.jsx)(f.FilterPill,{onClick:()=>{this.onFieldToggle(e.name)},label:s,selected:n},`${e.name}/${a}`)}))]})]})})}}const R={id:d.DataTransformerID.filterFieldsByName,editor:L,transformation:d.standardTransformers.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive."};var E;function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class V extends l.PureComponent{constructor(e){super(e),z(this,"onFieldToggle",(e=>{const{selected:t}=this.state;t.indexOf(e)>-1?this.onChange(t.filter((t=>t!==e))):this.onChange([...t,e])})),z(this,"onChange",(e=>{this.setState({selected:e}),this.props.onChange(Object.assign({},this.props.options,{include:e.join("|")}))})),this.state={include:e.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(e){this.props.input!==e.input&&this.initOptions()}initOptions(){const{input:e,options:t}=this.props,a=t.include?t.include.split("|"):[],s=[],n={};for(const t of e)if(t.refId){let e=n[t.refId];e||(e=n[t.refId]={refId:t.refId,count:0},s.push(e)),e.count++}if(a.length){const e=[],t=[];for(const n of s)a.includes(n.refId)&&t.push(n),e.push(n);this.setState({options:e,selected:t.map((e=>e.refId))})}else this.setState({options:s,selected:[]})}render(){const{options:e,selected:t}=this.state;return(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsxs)("div",{className:"gf-form gf-form--grow",children:[E||(E=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Series refId"})),(0,P.jsx)(f.HorizontalGroup,{spacing:"xs",align:"flex-start",wrap:!0,children:e.map(((e,a)=>{const s=`${e.refId}${e.count>1?" ("+e.count+")":""}`,n=t.indexOf(e.refId)>-1;return(0,P.jsx)(f.FilterPill,{onClick:()=>{this.onFieldToggle(e.refId)},label:s,selected:n},`${e.refId}/${a}`)}))})]})})}}const B={id:d.DataTransformerID.filterByRefId,editor:V,transformation:d.standardTransformers.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel."};var U=a("./packages/grafana-data/src/transformations/transformers/filterByValue.ts");function H(e,t){switch(t.type){case d.FieldType.boolean:return!(0,r.isUndefined)(e)&&q(e);case d.FieldType.number:return isNaN(e)?0:parseFloat(e);case d.FieldType.string:return e?String(e):"";default:return e}}const q=e=>(0,r.isString)(e)?!("F"===e[0]||"f"===e[0]||"0"===e[0]):!!e;function W(e){return function(t){let{options:a,onChange:s,field:n}=t;const{validator:r,converter:i=H}=e,{value:o}=a,[c,d]=(0,l.useState)(!r(o)),u=(0,l.useCallback)((e=>{d(!r(e.currentTarget.value))}),[d,r]),p=(0,l.useCallback)((e=>{if(c)return;const{value:t}=e.currentTarget;s(Object.assign({},a,{value:i(t,n)}))}),[a,s,c,n,i]);return(0,P.jsx)(f.Input,{className:"flex-grow-1",invalid:c,defaultValue:String(a.value),placeholder:"Value",onChange:u,onBlur:p})}}const G=()=>null;var Z;function Q(e){return function(t){let{options:a,onChange:s,field:n}=t;const{validator:r}=e,[i,o]=(0,l.useState)({from:!r(a.from),to:!r(a.to)}),c=(0,l.useCallback)(((e,t)=>{o(Object.assign({},i,{[t]:!r(e.currentTarget.value)}))}),[o,r,i]),d=(0,l.useCallback)(((e,t)=>{if(i[t])return;const{value:r}=e.currentTarget;s(Object.assign({},a,{[t]:H(r,n)}))}),[a,s,i,n]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(f.Input,{className:"flex-grow-1 gf-form-spacing",invalid:i.from,defaultValue:String(a.from),placeholder:"From",onChange:e=>c(e,"from"),onBlur:e=>d(e,"from")}),Z||(Z=(0,P.jsx)("div",{className:"gf-form-label",children:"and"})),(0,P.jsx)(f.Input,{className:"flex-grow-1",invalid:i.to,defaultValue:String(a.to),placeholder:"To",onChange:e=>c(e,"to"),onBlur:e=>d(e,"to")})]})}}const K=new d.Registry((()=>[{name:"Is greater",id:d.ValueMatcherID.greater,component:W({validator:e=>!isNaN(e)})},{name:"Is greater or equal",id:d.ValueMatcherID.greaterOrEqual,component:W({validator:e=>!isNaN(e)})},{name:"Is lower",id:d.ValueMatcherID.lower,component:W({validator:e=>!isNaN(e)})},{name:"Is lower or equal",id:d.ValueMatcherID.lowerOrEqual,component:W({validator:e=>!isNaN(e)})},{name:"Is equal",id:d.ValueMatcherID.equal,component:W({validator:()=>!0})},{name:"Is not equal",id:d.ValueMatcherID.notEqual,component:W({validator:()=>!0})},{name:"Regex",id:d.ValueMatcherID.regex,component:W({validator:()=>!0,converter:e=>String(e)})},{name:"Is null",id:d.ValueMatcherID.isNull,component:G},{name:"Is not null",id:d.ValueMatcherID.isNotNull,component:G},{name:"Is between",id:d.ValueMatcherID.between,component:Q({validator:e=>!isNaN(e)})}]));var Y,J,X;const ee=e=>{var t,a;const{onDelete:s,onChange:n,filter:r,fieldsInfo:i}=e,{fieldsAsOptions:o,fieldByDisplayName:c}=i,u=c[null!==(t=se(r,o))&&void 0!==t?t:""],p=u?te(u):[],h=ae(r,p),m=K.getIfExists(h),g=(0,l.useCallback)((e=>{null!=e&&e.value&&n(Object.assign({},r,{fieldName:e.value}))}),[n,r]),b=(0,l.useCallback)((e=>{if(null==e||!e.value)return;const t=e.value,a=d.valueMatchers.get(t).getDefaultOptions(u);n(Object.assign({},r,{config:{id:t,options:a}}))}),[n,r,u]),v=(0,l.useCallback)((e=>{n(Object.assign({},r,{config:Object.assign({},r.config,{options:e})}))}),[n,r]);return u&&m&&m.component?(0,P.jsxs)("div",{className:"gf-form-inline",children:[(0,P.jsxs)("div",{className:"gf-form gf-form-spacing",children:[Y||(Y=(0,P.jsx)("div",{className:"gf-form-label width-7",children:"Field"})),(0,P.jsx)(f.Select,{menuShouldPortal:!0,className:"min-width-15 max-width-24",placeholder:"Field Name",options:o,value:r.fieldName,onChange:g})]}),(0,P.jsxs)("div",{className:"gf-form gf-form-spacing",children:[J||(J=(0,P.jsx)("div",{className:"gf-form-label",children:"Match"})),(0,P.jsx)(f.Select,{menuShouldPortal:!0,className:"width-12",placeholder:"Select test",options:p,value:h,onChange:b})]}),(0,P.jsxs)("div",{className:"gf-form gf-form--grow gf-form-spacing",children:[X||(X=(0,P.jsx)("div",{className:"gf-form-label",children:"Value"})),(0,P.jsx)(m.component,{field:u,options:null!==(a=r.config.options)&&void 0!==a?a:{},onChange:v})]}),(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)(f.Button,{icon:"times",onClick:s,variant:"secondary"})})]}):null},te=e=>{const t=[];for(const a of d.valueMatchers.list()){if(!a.isApplicable(e))continue;K.getIfExists(a.id)&&t.push({value:a.id,label:a.name,description:a.description})}return t},ae=(e,t)=>{var a;const s=t.find((t=>t.value===e.config.id));return s&&s.value?s.value:null!==(a=t[0])&&void 0!==a&&a.value?null===(n=t[0])||void 0===n?void 0:n.value:void 0;var n},se=(e,t)=>{var a;const s=t.find((t=>t.value===e.fieldName));return s&&s.value?s.value:null!==(a=t[0])&&void 0!==a&&a.value?null===(n=t[0])||void 0===n?void 0:n.value:void 0;var n};var ne,re;const ie=[{label:"Include",value:U.PQ.include},{label:"Exclude",value:U.PQ.exclude}],oe=[{label:"Match all",value:U.ER.all},{label:"Match any",value:U.ER.any}],le={id:d.DataTransformerID.filterByValue,editor:e=>{const{input:t,options:a,onChange:s}=e,n=ce(),i=de(t),o=(0,l.useCallback)((()=>{const e=t[0],n=e.fields.find((e=>e.type!==d.FieldType.time));if(!n)return;const i=(0,r.cloneDeep)(a.filters),o=d.valueMatchers.get(d.ValueMatcherID.greater);i.push({fieldName:(0,d.getFieldDisplayName)(n,e,t),config:{id:o.id,options:o.getDefaultOptions(n)}}),s(Object.assign({},a,{filters:i}))}),[s,a,t]),c=(0,l.useCallback)((e=>{let t=(0,r.cloneDeep)(a.filters);t.splice(e,1),s(Object.assign({},a,{filters:t}))}),[a,s]),u=(0,l.useCallback)(((e,t)=>{let n=(0,r.cloneDeep)(a.filters);n[t]=e,s(Object.assign({},a,{filters:n}))}),[a,s]),p=(0,l.useCallback)((e=>{s(Object.assign({},a,{type:null!=e?e:U.PQ.include}))}),[a,s]),h=(0,l.useCallback)((e=>{s(Object.assign({},a,{match:null!=e?e:U.ER.all}))}),[a,s]);return(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:"gf-form gf-form-inline",children:[ne||(ne=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Filter type"})),(0,P.jsx)("div",{className:"width-15",children:(0,P.jsx)(f.RadioButtonGroup,{options:ie,value:a.type,onChange:p,fullWidth:!0})})]}),(0,P.jsxs)("div",{className:"gf-form gf-form-inline",children:[re||(re=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Conditions"})),(0,P.jsx)("div",{className:"width-15",children:(0,P.jsx)(f.RadioButtonGroup,{options:oe,value:a.match,onChange:h,fullWidth:!0})})]}),(0,P.jsxs)("div",{className:n.conditions,children:[a.filters.map(((e,t)=>(0,P.jsx)(ee,{filter:e,fieldsInfo:i,onChange:e=>u(e,t),onDelete:()=>c(t)},t))),(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)(f.Button,{icon:"plus",size:"sm",onClick:o,variant:"secondary",children:"Add condition"})})]})]})},transformation:d.standardTransformers.filterByValueTransformer,name:d.standardTransformers.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source."},ce=(0,f.stylesFactory)((()=>({conditions:A.css`
    padding-left: 16px;
  `}))),de=e=>(0,l.useMemo)((()=>{const t={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(e)?e.reduce(((t,a)=>a.fields.reduce(((t,s)=>{const n=(0,d.getFieldDisplayName)(s,a,e);return t.fieldByDisplayName[n]||(t.fieldsAsOptions.push({label:n,value:n,type:s.type}),t.fieldByDisplayName[n]=s),t}),t)),t):t}),[e]);var ue,pe=a("./.yarn/__virtual__/react-beautiful-dnd-virtual-27e4b658e7/3/opt/drone/yarncache/react-beautiful-dnd-npm-13.1.0-fcf5568b1c-12b7e9fbe8.zip/node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js"),he=a("./packages/grafana-data/src/transformations/transformers/order.ts");function me(e){return(0,l.useMemo)((()=>Array.isArray(e)?Object.keys(e.reduce(((t,a)=>a&&Array.isArray(a.fields)?a.fields.reduce(((t,s)=>(t[(0,d.getFieldDisplayName)(s,a,e)]=!0,t)),t):t),{})):[]),[e])}const ge=e=>{const{options:t,input:a,onChange:s}=e,{indexByName:n,excludeByName:r,renameByName:i}=t,o=me(a),c=(0,l.useMemo)((()=>xe(o,n)),[o,n]),d=(0,l.useCallback)(((e,a)=>{s(Object.assign({},t,{excludeByName:Object.assign({},r,{[e]:a})}))}),[s,t,r]),u=(0,l.useCallback)((e=>{if(!e||!e.destination)return;const a=e.source.index,n=e.destination.index;a!==n&&s(Object.assign({},t,{indexByName:ve(o,a,n)}))}),[s,t,o]),p=(0,l.useCallback)(((e,a)=>{s(Object.assign({},t,{renameByName:Object.assign({},t.renameByName,{[e]:a})}))}),[s,t]);return a.length>1?ue||(ue=(0,P.jsx)(f.FieldValidationMessage,{children:"Organize fields only works with a single frame. Consider applying a join transformation first."})):(0,P.jsx)(pe.Z5,{onDragEnd:u,children:(0,P.jsx)(pe.bK,{droppableId:"sortable-fields-transformer",direction:"vertical",children:e=>(0,P.jsxs)("div",Object.assign({ref:e.innerRef},e.droppableProps,{children:[c.map(((e,t)=>(0,P.jsx)(fe,{fieldName:e,renamedFieldName:i[e],index:t,onToggleVisibility:d,onRenameField:p,visible:!r[e]},e))),e.placeholder]}))})})};ge.displayName="OrganizeFieldsTransformerEditor";const fe=e=>{let{fieldName:t,renamedFieldName:a,index:s,visible:n,onToggleVisibility:r,onRenameField:i}=e;const o=(0,f.useTheme)(),l=be(o);return(0,P.jsx)(pe._l,{draggableId:t,index:s,children:e=>(0,P.jsx)("div",Object.assign({className:"gf-form-inline",ref:e.innerRef},e.draggableProps,e.dragHandleProps,{children:(0,P.jsxs)("div",{className:"gf-form gf-form--grow",children:[(0,P.jsxs)("div",{className:"gf-form-label gf-form-label--justify-left width-30",children:[(0,P.jsx)(f.Icon,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:l.draggable}),(0,P.jsx)(f.IconButton,{className:l.toggle,size:"md",name:n?"eye":"eye-slash",surface:"header",onClick:()=>r(t,n)}),(0,P.jsx)("span",{className:l.name,title:t,children:t})]}),(0,P.jsx)(f.Input,{className:"flex-grow-1",defaultValue:a||"",placeholder:`Rename ${t}`,onBlur:e=>i(t,e.currentTarget.value)})]})}))})};fe.displayName="DraggableFieldName";const be=(0,f.stylesFactory)((e=>({toggle:A.css`
    margin: 0 8px;
    color: ${e.colors.textWeak};
  `,draggable:A.css`
    opacity: 0.4;
    &:hover {
      color: ${e.colors.textStrong};
    }
  `,name:A.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${e.typography.size.sm};
    font-weight: ${e.typography.weight.semibold};
  `}))),ve=(e,t,a)=>{const s=Array.from(e),[n]=s.splice(t,1);return s.splice(a,0,n),s.reduce(((e,t,a)=>(e[t]=a,e)),{})},xe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||0===Object.keys(t).length)return e;const a=(0,he.$)(t);return e.sort(a)},ye={id:d.DataTransformerID.organize,editor:ge,transformation:d.standardTransformers.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data."};var we;const je={id:d.DataTransformerID.seriesToColumns,editor:e=>{let{input:t,options:a,onChange:s}=e;const n=me(t).map((e=>({label:e,value:e}))),r=(0,l.useCallback)((e=>{s(Object.assign({},a,{byField:e.value}))}),[s,a]);return(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsxs)("div",{className:"gf-form gf-form--grow",children:[we||(we=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Field name"})),(0,P.jsx)(f.Select,{menuShouldPortal:!0,options:n,value:a.byField,onChange:r,isClearable:!0})]})})},transformation:d.standardTransformers.seriesToColumnsTransformer,name:"Outer join",description:"Joins many time series/tables by a field. This can be used to outer join multiple time series on the _time_ field to show many time series in one table."};var Ce,ke,Se,Te,Oe,_e=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/of.js"),Ne=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/map.js"),Ie=a("./packages/grafana-data/src/transformations/transformers/calculateField.ts");function Pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Me=[{value:Ie.ie.BinaryOperation,label:"Binary operation"},{value:Ie.ie.ReduceRow,label:"Reduce row"}],Fe=new Set([d.FieldType.time,d.FieldType.number,d.FieldType.string]);class Ae extends l.PureComponent{constructor(e){var t,a;super(e),Pe(this,"onToggleReplaceFields",(()=>{const{options:e}=this.props;this.props.onChange(Object.assign({},e,{replaceFields:!e.replaceFields}))})),Pe(this,"onModeChanged",(e=>{var t;const{options:a,onChange:s}=this.props,n=null!==(t=e.value)&&void 0!==t?t:Ie.ie.BinaryOperation;s(Object.assign({},a,{mode:n}))})),Pe(this,"onAliasChanged",(e=>{const{options:t}=this.props;this.props.onChange(Object.assign({},t,{alias:e.target.value}))})),Pe(this,"updateReduceOptions",(e=>{const{options:t,onChange:a}=this.props;a(Object.assign({},t,{mode:Ie.ie.ReduceRow,reduce:e}))})),Pe(this,"onFieldToggle",(e=>{const{selected:t}=this.state;t.indexOf(e)>-1?this.onChange(t.filter((t=>t!==e))):this.onChange([...t,e])})),Pe(this,"onChange",(e=>{this.setState({selected:e});const{reduce:t}=this.props.options;this.updateReduceOptions(Object.assign({},t,{include:e}))})),Pe(this,"onStatsChange",(e=>{const t=e.length?e[0]:d.ReducerID.sum,{reduce:a}=this.props.options;this.updateReduceOptions(Object.assign({},a,{reducer:t}))})),Pe(this,"updateBinaryOptions",(e=>{const{options:t,onChange:a}=this.props;a(Object.assign({},t,{mode:Ie.ie.BinaryOperation,binary:e}))})),Pe(this,"onBinaryLeftChanged",(e=>{const{binary:t}=this.props.options;this.updateBinaryOptions(Object.assign({},t,{left:e.value}))})),Pe(this,"onBinaryRightChanged",(e=>{const{binary:t}=this.props.options;this.updateBinaryOptions(Object.assign({},t,{right:e.value}))})),Pe(this,"onBinaryOperationChanged",(e=>{const{binary:t}=this.props.options;this.updateBinaryOptions(Object.assign({},t,{operator:e.value}))})),this.state={include:(null===(t=e.options)||void 0===t||null===(a=t.reduce)||void 0===a?void 0:a.include)||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(e){this.props.input!==e.input&&this.initOptions()}initOptions(){var e;const{options:t}=this.props,a=(null==t||null===(e=t.reduce)||void 0===e?void 0:e.include)||[],s=(0,_e.of)(this.props.input).pipe(d.standardTransformers.ensureColumnsTransformer.operator(null),this.extractAllNames(),this.extractNamesAndSelected(a)).subscribe((e=>{let{selected:t,names:a}=e;this.setState({names:a,selected:t},(()=>s.unsubscribe()))}))}extractAllNames(){return e=>e.pipe((0,Ne.U)((e=>{const t=[],a={};for(const s of e)for(const n of s.fields){if(!Fe.has(n.type))continue;const r=(0,d.getFieldDisplayName)(n,s,e);a[r]||(a[r]=!0,t.push(r))}return t})))}extractNamesAndSelected(e){return t=>t.pipe((0,Ne.U)((t=>{if(!e.length)return{names:t,selected:[]};const a=[],s=[];for(const n of t)e.includes(n)&&s.push(n),a.push(n);return{names:a,selected:s}})))}renderReduceRow(e){const{names:t,selected:a}=this.state;return e=(0,r.defaults)(e,{reducer:d.ReducerID.sum}),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsxs)("div",{className:"gf-form gf-form--grow",children:[Ce||(Ce=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Field name"})),(0,P.jsx)(f.HorizontalGroup,{spacing:"xs",align:"flex-start",wrap:!0,children:t.map(((e,t)=>(0,P.jsx)(f.FilterPill,{onClick:()=>{this.onFieldToggle(e)},label:e,selected:a.indexOf(e)>-1},`${e}/${t}`)))})]})}),(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsxs)("div",{className:"gf-form",children:[ke||(ke=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Calculation"})),(0,P.jsx)(f.StatsPicker,{allowMultiple:!1,className:"width-18",stats:[e.reducer],onChange:this.onStatsChange,defaultStat:d.ReducerID.sum})]})})]})}renderBinaryOperation(e){var t,a,s,n,i,o,l,c,u;let p=!(null!==(t=e=(0,r.defaults)(e,{reducer:d.ReducerID.sum}))&&void 0!==t&&t.left),h=!(null!==(a=e)&&void 0!==a&&a.right);const m=this.state.names.map((t=>{var a,s;return t===(null===(a=e)||void 0===a?void 0:a.left)&&(p=!0),t===(null===(s=e)||void 0===s?void 0:s.right)&&(h=!0),{label:t,value:t}})),g=p?m:[...m,{label:null===(s=e)||void 0===s?void 0:s.left,value:null===(n=e)||void 0===n?void 0:n.left}],b=h?m:[...m,{label:null===(i=e)||void 0===i?void 0:i.right,value:null===(o=e)||void 0===o?void 0:o.right}],v=d.binaryOperators.list().map((e=>({label:e.id,value:e.id})));return(0,P.jsxs)("div",{className:"gf-form-inline",children:[Se||(Se=(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Operation"})})),(0,P.jsxs)("div",{className:"gf-form",children:[(0,P.jsx)(f.Select,{menuShouldPortal:!0,allowCustomValue:!0,placeholder:"Field or number",options:g,className:"min-width-18 gf-form-spacing",value:null===(l=e)||void 0===l?void 0:l.left,onChange:this.onBinaryLeftChanged}),(0,P.jsx)(f.Select,{menuShouldPortal:!0,className:"width-8 gf-form-spacing",options:v,value:null!==(c=e.operator)&&void 0!==c?c:v[0].value,onChange:this.onBinaryOperationChanged}),(0,P.jsx)(f.Select,{menuShouldPortal:!0,allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:b,value:null===(u=e)||void 0===u?void 0:u.right,onChange:this.onBinaryRightChanged})]})]})}render(){var e,t;const{options:a}=this.props,s=null!==(e=a.mode)&&void 0!==e?e:Ie.ie.BinaryOperation;return(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsxs)("div",{className:"gf-form",children:[Te||(Te=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Mode"})),(0,P.jsx)(f.Select,{menuShouldPortal:!0,className:"width-18",options:Me,value:Me.find((e=>e.value===s)),onChange:this.onModeChanged})]})}),s===Ie.ie.BinaryOperation&&this.renderBinaryOperation(a.binary),s===Ie.ie.ReduceRow&&this.renderReduceRow(a.reduce),(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsxs)("div",{className:"gf-form",children:[Oe||(Oe=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Alias"})),(0,P.jsx)(f.Input,{className:"width-18",value:null!==(t=a.alias)&&void 0!==t?t:"",placeholder:(0,Ie.h)(a),onChange:this.onAliasChanged})]})}),(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)(f.LegacyForms.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!a.replaceFields,onChange:this.onToggleReplaceFields})})})]})}}const De={id:d.DataTransformerID.calculateField,editor:Ae,transformation:d.standardTransformers.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field"};var $e=a("./packages/grafana-data/src/transformations/transformers/labelsToFields.ts");const Le=["keepLabels"];const Re=[{value:$e.k.Columns,label:"Columns"},{value:$e.k.Rows,label:"Rows"}],Ee={id:d.DataTransformerID.labelsToFields,editor:e=>{var t;let{input:a,options:s,onChange:n}=e;const{labelNames:r,selected:i}=(0,l.useMemo)((()=>{var e;let t=[],n={};for(const e of a)for(const a of e.fields)if(a.labels)for(const e of Object.keys(a.labels))n[e]||(t.push({value:e,label:e}),n[e]=!0);return{labelNames:t,selected:new Set(null!==(e=s.keepLabels)&&void 0!==e&&e.length?s.keepLabels:Object.keys(n))}}),[s.keepLabels,a]),o=e=>{if(i.has(e)?i.delete(e):i.add(e),i.size!==r.length&&i.size)n(Object.assign({},s,{keepLabels:[...i]}));else{const e=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(s,Le);n(e)}};return(0,P.jsxs)("div",{children:[(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Mode",labelWidth:20,children:(0,P.jsx)(f.RadioButtonGroup,{options:Re,value:null!==(t=s.mode)&&void 0!==t?t:$e.k.Columns,onChange:e=>n(Object.assign({},s,{mode:e}))})})}),(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Labels",labelWidth:20,children:(0,P.jsx)(P.Fragment,{children:r.map(((e,t)=>{const a=e.label;return(0,P.jsx)(f.FilterPill,{onClick:()=>o(a),label:a,selected:i.has(a)},`${a}/${t}`)}))})})}),s.mode!==$e.k.Rows&&(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name",children:(0,P.jsx)(f.Select,{menuShouldPortal:!0,inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:r,value:null==s?void 0:s.valueLabel,onChange:e=>{n(Object.assign({},s,{valueLabel:null==e?void 0:e.value}))},className:"min-width-16"})})})]})},transformation:d.standardTransformers.labelsToFieldsTransformer,name:"Labels to fields",description:"Groups series by time and return labels or tags as fields.\n                Useful for showing time series with labels in a table where each label key becomes a separate column"};var ze=a("./packages/grafana-data/src/transformations/transformers/groupBy.ts");const Ve=[{label:"Group by",value:ze.x.groupBy},{label:"Calculate",value:ze.x.aggregate}],Be=e=>{let{fieldName:t,config:a,onConfigChange:s}=e;const n=Ue(),r=(0,l.useCallback)((e=>{var t,n;s({aggregations:null!==(t=null==a?void 0:a.aggregations)&&void 0!==t?t:[],operation:null!==(n=null==e?void 0:e.value)&&void 0!==n?n:null})}),[a,s]);return(0,P.jsxs)("div",{className:(0,A.cx)("gf-form-inline",n.row),children:[(0,P.jsx)("div",{className:(0,A.cx)("gf-form",n.fieldName),children:(0,P.jsx)("div",{className:(0,A.cx)("gf-form-label",n.rowSpacing),children:t})}),(0,P.jsx)("div",{className:(0,A.cx)("gf-form",n.cell),children:(0,P.jsx)("div",{className:(0,A.cx)("gf-form-spacing",n.rowSpacing),children:(0,P.jsx)(f.Select,{menuShouldPortal:!0,className:"width-12",options:Ve,value:null==a?void 0:a.operation,placeholder:"Ignored",onChange:r,isClearable:!0})})}),(null==a?void 0:a.operation)===ze.x.aggregate&&(0,P.jsx)("div",{className:(0,A.cx)("gf-form","gf-form--grow",n.calculations),children:(0,P.jsx)(f.StatsPicker,{className:(0,A.cx)("flex-grow-1",n.rowSpacing),placeholder:"Select Stats",allowMultiple:!0,stats:a.aggregations,onChange:e=>{s(Object.assign({},a,{aggregations:e}))}})})]})},Ue=(0,f.stylesFactory)((()=>{const e=A.css`
    display: table-cell;
  `;return{row:A.css`
      display: table-row;
    `,cell:e,rowSpacing:A.css`
      margin-bottom: 4px;
    `,fieldName:A.css`
      ${e}
      min-width: 250px;
      white-space: nowrap;
    `,calculations:A.css`
      ${e}
      width: 99%;
    `}})),He={id:d.DataTransformerID.groupBy,editor:e=>{let{input:t,options:a,onChange:s}=e;const n=me(t),r=(0,l.useCallback)((e=>t=>{s(Object.assign({},a,{fields:Object.assign({},a.fields,{[e]:t})}))}),[s]);return(0,P.jsx)("div",{children:n.map((e=>(0,P.jsx)(Be,{onConfigChange:r(e),fieldName:e,config:a.fields[e]},e)))})},transformation:d.standardTransformers.groupByTransformer,name:d.standardTransformers.groupByTransformer.name,description:d.standardTransformers.groupByTransformer.description},qe={id:d.DataTransformerID.sortBy,editor:e=>{var t;let{input:a,options:s,onChange:n}=e;const r=me(a).map((e=>({label:e,value:e}))),i=(0,l.useCallback)(((e,t)=>{n(Object.assign({},s,{sort:[t]}))}),[n,s]),o=null!==(t=s.sort)&&void 0!==t&&t.length?s.sort:[{}];return(0,P.jsx)("div",{children:o.map(((e,t)=>(0,P.jsxs)(f.InlineFieldRow,{children:[(0,P.jsx)(f.InlineField,{label:"Field",labelWidth:10,grow:!0,children:(0,P.jsx)(f.Select,{menuShouldPortal:!0,options:r,value:e.field,placeholder:"Select field",onChange:a=>{i(t,Object.assign({},e,{field:a.value}))}})}),(0,P.jsx)(f.InlineField,{label:"Reverse",children:(0,P.jsx)(f.InlineSwitch,{value:!!e.desc,onChange:()=>{i(t,Object.assign({},e,{desc:!e.desc}))}})})]},`${e.field}/${t}`)))})},transformation:d.standardTransformers.sortByTransformer,name:d.standardTransformers.sortByTransformer.name,description:d.standardTransformers.sortByTransformer.description};var We;const Ge={id:d.DataTransformerID.merge,editor:e=>{let{input:t,options:a,onChange:s}=e;return t.length<=1?We||(We=(0,P.jsx)(f.FieldValidationMessage,{children:"Merge has no effect when applied on a single frame."})):null},transformation:d.standardTransformers.mergeTransformer,name:"Merge",description:"Merge many series/tables and return a single table where mergeable values will be combined into the same row.\n                Useful for showing multiple series, tables or a combination of both visualized in a table."},Ze={id:d.DataTransformerID.seriesToRows,editor:e=>{let{input:t,options:a,onChange:s}=e;return null},transformation:d.standardTransformers.seriesToRowsTransformer,name:"Series to rows",description:"Merge many series and return a single series with time, metric and value as columns.\n                Useful for showing multiple time series visualized in a table."};var Qe,Ke,Ye=a("./packages/grafana-data/src/transformations/transformers/concat.ts");function Je(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Xe=[{value:Ye.HO.FieldName,label:"Copy frame name to field name"},{value:Ye.HO.Label,label:"Add a label with the frame name"},{value:Ye.HO.Drop,label:"Ignore the frame name"}];class et extends l.PureComponent{constructor(e){super(e),Je(this,"onModeChanged",(e=>{var t;const{options:a,onChange:s}=this.props,n=null!==(t=e.value)&&void 0!==t?t:Ye.HO.FieldName;s(Object.assign({},a,{frameNameMode:n}))})),Je(this,"onLabelChanged",(e=>{const{options:t}=this.props;this.props.onChange(Object.assign({},t,{frameNameLabel:e.target.value}))}))}render(){var e,t;const{options:a}=this.props,s=null!==(e=a.frameNameMode)&&void 0!==e?e:Ye.HO.FieldName;return(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsxs)("div",{className:"gf-form",children:[Qe||(Qe=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Name"})),(0,P.jsx)(f.Select,{menuShouldPortal:!0,className:"width-18",options:Xe,value:Xe.find((e=>e.value===s)),onChange:this.onModeChanged})]})}),s===Ye.HO.Label&&(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsxs)("div",{className:"gf-form",children:[Ke||(Ke=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Label"})),(0,P.jsx)(f.Input,{className:"width-18",value:null!==(t=a.frameNameLabel)&&void 0!==t?t:"",placeholder:"frame",onChange:this.onLabelChanged})]})})]})}}const tt={id:d.DataTransformerID.concatenate,editor:et,transformation:d.standardTransformers.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length."};var at,st;function nt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class rt extends l.PureComponent{constructor(e){super(e),nt(this,"handleRegexChange",(e=>{const t=e.currentTarget.value;let a=!0;if(t)try{t&&(0,d.stringToJsRegex)(t)}catch(e){a=!1}this.setState((e=>Object.assign({},e,{regex:t,isRegexValid:a})))})),nt(this,"handleRenameChange",(e=>{const t=e.currentTarget.value;this.setState((e=>Object.assign({},e,{renamePattern:t})))})),nt(this,"handleRegexBlur",(e=>{const t=e.currentTarget.value;let a=!0;try{t&&(0,d.stringToJsRegex)(t)}catch(e){a=!1}this.setState({isRegexValid:a},(()=>{a&&this.props.onChange(Object.assign({},this.props.options,{regex:t}))}))})),nt(this,"handleRenameBlur",(e=>{const t=e.currentTarget.value;this.setState({renamePattern:t},(()=>this.props.onChange(Object.assign({},this.props.options,{renamePattern:t}))))})),this.state={regex:e.options.regex,renamePattern:e.options.renamePattern,isRegexValid:!0}}render(){const{regex:e,renamePattern:t,isRegexValid:a}=this.state;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsxs)("div",{className:"gf-form gf-form--grow",children:[at||(at=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Match"})),(0,P.jsx)(f.Field,{invalid:!a,error:a?void 0:"Invalid pattern",className:A.css`
                margin-bottom: 0;
              `,children:(0,P.jsx)(f.Input,{placeholder:"Regular expression pattern",value:e||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})})]})}),(0,P.jsx)("div",{className:"gf-form-inline",children:(0,P.jsxs)("div",{className:"gf-form gf-form--grow",children:[st||(st=(0,P.jsx)("div",{className:"gf-form-label width-8",children:"Replace"})),(0,P.jsx)(f.Field,{className:A.css`
                margin-bottom: 0;
              `,children:(0,P.jsx)(f.Input,{placeholder:"Replacement pattern",value:t||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})})]})})]})}}const it={id:d.DataTransformerID.renameByRegex,editor:rt,transformation:d.standardTransformers.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders."};var ot=a("./packages/grafana-data/src/transformations/transformers/histogram.ts");const lt={id:d.DataTransformerID.histogram,editor:e=>{var t;let{input:a,options:s,onChange:n}=e;const r=(0,l.useCallback)((e=>{const t=e.currentTarget.valueAsNumber;n(Object.assign({},s,{bucketSize:isNaN(t)?void 0:t}))}),[n,s]),i=(0,l.useCallback)((e=>{const t=e.currentTarget.valueAsNumber;n(Object.assign({},s,{bucketOffset:isNaN(t)?void 0:t}))}),[n,s]),o=(0,l.useCallback)((()=>{n(Object.assign({},s,{combine:!s.combine}))}),[n,s]);return(0,P.jsxs)("div",{children:[(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{labelWidth:18,label:ot.py.bucketSize.name,tooltip:ot.py.bucketSize.description,children:(0,P.jsx)(f.Input,{type:"number",value:s.bucketSize,placeholder:"auto",onChange:r,min:0})})}),(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{labelWidth:18,label:ot.py.bucketOffset.name,tooltip:ot.py.bucketOffset.description,children:(0,P.jsx)(f.Input,{type:"number",value:s.bucketOffset,placeholder:"none",onChange:i,min:0})})}),(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{labelWidth:18,label:ot.py.combine.name,tooltip:ot.py.combine.description,children:(0,P.jsx)(f.InlineSwitch,{value:null!==(t=s.combine)&&void 0!==t&&t,onChange:o})})})]})},transformation:d.standardTransformers.histogramTransformer,name:d.standardTransformers.histogramTransformer.name,description:d.standardTransformers.histogramTransformer.description};function ct(e,t,a){const s={},n={};for(const i of e.fields){const o=(0,d.getFieldDisplayName)(i,e),l=a.index[o].handler;if(!l)continue;const c=i.values.get(t);if(null==c)continue;const u=l.processor(c,s,n);var r;if(null!=u)s[null!==(r=l.targetProperty)&&void 0!==r?r:l.key]=u}return n.mappingValues&&(s.mappings=function(e){const t={type:d.MappingType.ValueToText,options:{}};if(!e.mappingValues)return[];for(let a=0;a<e.mappingValues.length;a++){const s=e.mappingValues[a];null!=s&&(t.options[s.toString()]={color:e.mappingColors&&e.mappingColors[a],text:e.mappingTexts&&e.mappingTexts[a],index:a})}return[t]}(n)),s}let dt;!function(e){e.Name="field.name",e.Value="field.value",e.Label="field.label",e.Ignore="__ignore"}(dt||(dt={}));const ut=[{key:dt.Name,name:"Field name",processor:()=>{}},{key:dt.Value,name:"Field value",processor:()=>{}},{key:dt.Label,name:"Field label",processor:()=>{}},{key:dt.Ignore,name:"Ignore",processor:()=>{}},{key:"max",processor:ht},{key:"min",processor:ht},{key:"unit",processor:e=>e.toString()},{key:"decimals",processor:ht},{key:"displayName",name:"Display name",processor:e=>e.toString()},{key:"color",processor:e=>({fixedColor:e,mode:d.FieldColorModeId.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(e,t)=>{const a=(0,d.anyToNumber)(e);if(!isNaN(a))return t.thresholds||(t.thresholds={mode:d.ThresholdsMode.Absolute,steps:[{value:-1/0,color:"green"}]}),t.thresholds.steps.push({value:a,color:"red"}),t.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:d.ReducerID.allValues,processor:(e,t,a)=>{if((0,r.isArray)(e))return a.mappingValues=e,t.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:d.ReducerID.allValues,processor:(e,t,a)=>{if((0,r.isArray)(e))return a.mappingColors=e,t.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:d.ReducerID.allValues,processor:(e,t,a)=>{if((0,r.isArray)(e))return a.mappingTexts=e,t.mappings}}];let pt=null;function ht(e){const t=(0,d.anyToNumber)(e);if(!isNaN(t))return t}function mt(e){return e?function(){if(null===pt){pt={};for(const e of ut)pt[e.key]=e}return pt}()[e]:null}function gt(e,t,a){const s={index:{}};let n=t.find((e=>e.handlerKey===dt.Name)),r=t.find((e=>e.handlerKey===dt.Value));for(const c of e.fields){var i,o,l;const u=(0,d.getFieldDisplayName)(c,e),p=t.find((e=>e.fieldName===u));let h=mt(p?p.handlerKey:u.toLowerCase());a&&(h?(h.key===dt.Name&&(s.nameField=c),h.key===dt.Value&&(s.valueField=c)):p||(s.nameField||n||c.type!==d.FieldType.string||(s.nameField=c,h=mt(dt.Name)),s.valueField||r||c.type!==d.FieldType.number||(s.valueField=c,h=mt(dt.Value)))),!h&&a&&(h=mt(dt.Label)),s.index[u]={automatic:!p,handler:h,reducerId:null!==(i=null!==(o=null==p?void 0:p.reducerId)&&void 0!==o?o:null===(l=h)||void 0===l?void 0:l.defaultReducer)&&void 0!==i?i:d.ReducerID.lastNotNull}}return s}const ft={id:d.DataTransformerID.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config",defaultOptions:{},operator:e=>t=>t.pipe((0,Ne.U)((t=>t.map((t=>function(e,t){var a;const s=gt(t,null!==(a=e.mappings)&&void 0!==a?a:[],!0),{nameField:n,valueField:r}=s;if(!n||!r)return t;const i=[];for(let e=0;e<n.values.length;e++){const a=n.values.get(e),o=r.values.get(e),l=ct(t,e,s),c=bt(t,e,s),u={name:`${a}`,type:r.type,values:new d.ArrayVector([o]),config:l,labels:c};i.push(u)}return{fields:i,length:1}}(e,t))))))};function bt(e,t,a){const s=Object.assign({},a.nameField.labels);for(let n=0;n<e.fields.length;n++){const r=e.fields[n],i=(0,d.getFieldDisplayName)(r,e),o=a.index[i];if(o.handler&&o.handler.key!==dt.Label)continue;const l=r.values.get(t);null!=l&&(s[i]=l)}return s}var vt,xt,yt;function wt(e){let{frame:t,mappings:a,onChange:s,withReducers:n,withNameAndValue:r}=e;const i=(0,f.useStyles2)(Ct),o=function(e,t,a){const s=[],n=gt(e,null!=t?t:[],a);for(const t of e.fields){var r,i;const a=(0,d.getFieldDisplayName)(t,e),o=n.index[a],l=jt(o.handler,o.automatic);s.push({fieldName:a,configOption:o.automatic?null:l,placeholder:o.automatic?null==l?void 0:l.label:"Choose",handlerKey:null!==(r=null===(i=o.handler)||void 0===i?void 0:i.key)&&void 0!==r?r:null,reducerId:o.reducerId})}for(const e of t)if(!s.find((t=>t.fieldName===e.fieldName))){var o;const t=mt(e.handlerKey);s.push({fieldName:e.fieldName,handlerKey:e.handlerKey,configOption:jt(t,!1),missingInFrame:!0,reducerId:null!==(o=e.reducerId)&&void 0!==o?o:d.ReducerID.lastNotNull})}return Object.values(s)}(t,a,r),l=ut.map((e=>jt(e,!1)));return(0,P.jsxs)("table",{className:i.table,children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[vt||(vt=(0,P.jsx)("th",{children:"Field"})),xt||(xt=(0,P.jsx)("th",{children:"Use as"})),n&&(yt||(yt=(0,P.jsx)("th",{children:"Select"})))]})}),(0,P.jsx)("tbody",{children:o.map((e=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:i.labelCell,children:e.fieldName}),(0,P.jsx)("td",{className:i.selectCell,"data-testid":`${e.fieldName}-config-key`,children:(0,P.jsx)(f.Select,{menuShouldPortal:!0,options:l,value:e.configOption,placeholder:e.placeholder,isClearable:!0,onChange:t=>((e,t)=>{const n=a.findIndex((t=>t.fieldName===e.fieldName));if(t)if(-1!==n){const e=[...a];e.splice(n,1,Object.assign({},a[n],{handlerKey:t.value})),s(e)}else s([...a,{fieldName:e.fieldName,handlerKey:t.value}]);else s(-1!==n?a.filter(((e,t)=>t!==n)):[...a,{fieldName:e.fieldName,handlerKey:"__ignore"}])})(e,t)})}),n&&(0,P.jsx)("td",{"data-testid":`${e.fieldName}-reducer`,className:i.selectCell,children:(0,P.jsx)(f.StatsPicker,{stats:[e.reducerId],defaultStat:e.reducerId,onChange:t=>((e,t)=>{const n=a.findIndex((t=>t.fieldName===e.fieldName));if(-1!==n){const e=[...a];e.splice(n,1,Object.assign({},a[n],{reducerId:t})),s(e)}else s([...a,{fieldName:e.fieldName,handlerKey:e.handlerKey,reducerId:t}])})(e,t[0])})})]},e.fieldName)))})]})}function jt(e,t){var a;if(!e)return null;let s=null!==(a=e.name)&&void 0!==a?a:(0,r.capitalize)(e.key);return t&&(s=`${s} (auto)`),{label:s,value:e.key}}const Ct=e=>({table:A.css`
    margin-top: ${e.spacing(1)};

    td,
    th {
      border-right: 4px solid ${e.colors.background.primary};
      border-bottom: 4px solid ${e.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${e.typography.bodySmall.fontSize};
      line-height: ${e.spacing(4)};
      padding: ${e.spacing(0,1)};
    }
  `,labelCell:A.css`
    font-size: ${e.typography.bodySmall.fontSize};
    background: ${e.colors.background.secondary};
    padding: ${e.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:A.css`
    padding: 0;
    min-width: 161px;
  `});const kt={id:ft.id,editor:function(e){var t;let{input:a,options:s,onChange:n}=e;return 0===a.length?null:(0,P.jsx)("div",{children:(0,P.jsx)(wt,{frame:a[0],mappings:null!==(t=s.mappings)&&void 0!==t?t:[],onChange:e=>n(Object.assign({},s,{mappings:e})),withNameAndValue:!0})})},transformation:ft,name:ft.name,description:ft.description,state:d.PluginState.beta,help:"\n### Use cases \n\nThis transforms rows into separate fields. This can be useful as fields can be styled and configured \nindividually, something rows cannot. It can also use additional fields as sources for dynamic field \nconfiguration or map them to field labels. The additional labels can then be used to define better \ndisplay names for the resulting fields.\n\nUseful when visualization data in:\n- Gauge\n- Stat\n- Pie chart\n\n## Example\n\nInput:\n\n| Name    | Value | Max |\n| ------- | ----- | --- |\n| ServerA | 10    | 100 |\n| ServerB | 20    | 200 |\n| ServerC | 30    | 300 |\n\nOutput:\n\n| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |\n| ------------------------- | ------------------------- | ------------------------- |\n| 10                        | 20                        | 30                        |\n\nAs you can see each row in the source data becomes a separate field. Each field now also has a max \nconfig option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field \nconfiguration and if set like this will be used by the visualization instead of any options manually \nconfigured in the panel editor options pane.\n\n"};const St={id:d.DataTransformerID.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data",defaultOptions:{configRefId:"config",mappings:[]},operator:e=>t=>t.pipe((0,Ne.U)((t=>function(e,t){var a;let s=null;for(const a of t)if(a.refId===e.configRefId){s=a;break}if(!s)return t;const n={fields:[],length:1},r=gt(s,null!==(a=e.mappings)&&void 0!==a?a:[],!1);for(const e of s.fields){const t=Object.assign({},e),a=(0,d.getFieldDisplayName)(e,s),i=r.index[a],o=(0,d.reduceField)({field:e,reducers:[i.reducerId]});t.values=new d.ArrayVector([o[i.reducerId]]),n.fields.push(t)}const i=[],o=(0,d.getFieldMatcher)(e.applyTo||{id:d.FieldMatcherID.numeric});for(const e of t){if(e===s&&t.length>1)continue;const a={fields:[],length:e.length};for(const s of e.fields)if(o(s,e,t)){const e=ct(n,0,r);a.fields.push(Object.assign({},s,{config:Object.assign({},s.config,e)}))}else a.fields.push(s);i.push(a)}return i}(e,t))))};const Tt={id:St.id,editor:function(e){var t;let{input:a,onChange:s,options:n}=e;const r=(0,f.useStyles2)(Ot),i=a.map((e=>e.refId)).filter((e=>null!=e)).map((e=>({label:e,value:e}))),o=n.configRefId||"config",l=null!==(t=n.applyTo)&&void 0!==t?t:{id:d.FieldMatcherID.byType,options:"number"},c=f.fieldMatchersUI.get(l.id),u=a.find((e=>e.refId===o)),p=f.fieldMatchersUI.list().filter((e=>!e.excludeFromPicker)).map((e=>({label:e.name,value:e.id,description:e.description})));return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Config query",labelWidth:20,children:(0,P.jsx)(f.Select,{menuShouldPortal:!0,onChange:e=>{s(Object.assign({},n,{configRefId:e.value||"config"}))},options:i,value:o,width:30})})}),(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Apply to",labelWidth:20,children:(0,P.jsx)(f.Select,{menuShouldPortal:!0,onChange:e=>{s(Object.assign({},n,{applyTo:{id:e.value}}))},options:p,value:l.id,width:30})})}),(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Apply to options",labelWidth:20,className:r.matcherOptions,children:(0,P.jsx)(c.component,{matcher:c.matcher,data:a,options:l.options,onChange:e=>{s(Object.assign({},n,{applyTo:{id:l.id,options:e}}))}})})}),(0,P.jsx)(f.InlineFieldRow,{children:u&&(0,P.jsx)(wt,{frame:u,mappings:n.mappings,onChange:e=>s(Object.assign({},n,{mappings:e})),withReducers:!0})})]})},transformation:St,name:St.name,description:St.description,state:d.PluginState.beta,help:"\n### Use cases\n\nThis transformation allows you select one query and from it extract standard options such as \n**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.\nThis enables dynamic query driven visualization configuration.\n\n### Options\n\n- **Config query**: Selet the query that returns the data you want to use as configuration.\n- **Apply to**: Select what fields or series to apply the configuration to.\n- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.\n\n### Field mapping table\n\nBelow the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.\n\n## Example\n\nInput[0] (From query: A, name: ServerA)\n\n| Time          | Value |\n| ------------- | ----- |\n| 1626178119127 | 10    |\n| 1626178119129 | 30    |\n\nInput[1] (From query: B)\n\n| Time          | Value |\n| ------------- | ----- |\n| 1626178119127 | 100   |\n| 1626178119129 | 100   |\n\nOutput (Same as Input[0] but now with config on the Value field)\n\n| Time          | Value (config: Max=100) |\n| ------------- | ----------------------- |\n| 1626178119127 | 10                      |\n| 1626178119129 | 30                      |\n\nEach row in the source data becomes a separate field. Each field now also has a maximum\nconfiguration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.\nin the panel editor options pane.\n\n## Value mappings\n\nYou can also transform a query result into value mappings. This is is a bit different because every\nrow in the configuration query result is used to define a single value mapping row. See the following example.\n\nConfig query result:\n\n| Value | Text   | Color |\n| ----- | ------ | ----- |\n| L     | Low    | blue  |\n| M     | Medium | green |\n| H     | High   | red   |\n\nIn the field mapping specify:\n\n| Field | Use as                  | Select     |\n| ----- | ----------------------- | ---------- |\n| Value | Value mappings / Value  | All values |\n| Text  | Value mappings / Text   | All values |\n| Color | Value mappings / Ciolor | All values |\n\nGrafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.\n"},Ot=e=>({matcherOptions:A.css`
    min-width: 404px;
  `});let _t;function Nt(e){if(!Array.isArray(e)||0===e.length)return e;const t=[];for(const a of It(e)){const e=a.fields[0];if(!e||e.type!==d.FieldType.time)continue;const s=[],n=[];for(const e of a.fields)switch(e.type){case d.FieldType.number:case d.FieldType.boolean:s.push(e);break;case d.FieldType.string:n.push(e)}for(const r of s)if(n.length){const s=new Map;for(let t=0;t<a.length;t++){const a=e.values.get(t),i=r.values.get(t);if(void 0===i||null==a)continue;const o=n.map((e=>e.values.get(t))).join("/");let l=s.get(o);if(!l){l={key:o,time:[],value:[],labels:{}};for(const e of n)l.labels[e.name]=e.values.get(t);s.set(o,l)}l.time.push(a),l.value.push(i)}for(const n of s.values())t.push({name:a.name,refId:a.refId,meta:Object.assign({},a.meta,{type:d.DataFrameType.TimeSeriesMany}),fields:[Object.assign({},e,{values:new d.ArrayVector(n.time)}),Object.assign({},r,{values:new d.ArrayVector(n.value),labels:n.labels})],length:n.time.length})}else t.push({name:a.name,refId:a.refId,meta:Object.assign({},a.meta,{type:d.DataFrameType.TimeSeriesMany}),fields:[e,r],length:a.length})}return t}function It(e){if(!Array.isArray(e)||0===e.length)return e;const t=[];for(const a of e){let e;const s=[],n={},r={},i={},o={};for(let t=0;t<a.fields.length;t++){const l=a.fields[t];switch(l.type){case d.FieldType.string:case d.FieldType.boolean:l.name in o||(o[l.name]=t,r[l.name]=!0);break;case d.FieldType.time:if(!e){e=l;break}default:if(l.name in n){const e=n[l.name];if(l.type!==e)continue}else n[l.name]=l.type,s.push(l.name);const a=JSON.stringify(l.labels),c=i[a];if(void 0!==c?c.push(t):i[a]=[t],null!=l.labels)for(const e in l.labels)r[e]=!0}}if(!e)continue;const l=[],c=[],u=[],p=[];for(let t=0;t<a.length;t++)l.push({time:e.values.get(t),wideRowIndex:t});for(const e in i)c.push(e);for(const e in r)u.push(e);for(const e in o)p.push(e);l.sort(((e,t)=>e.time-t.time)),c.sort(),u.sort(),s.sort();const h=new d.MutableDataFrame(Object.assign({},a,{meta:Object.assign({},a.meta,{type:d.DataFrameType.TimeSeriesLong}),fields:[{name:e.name,type:e.type}]}));for(const e of s)h.addField({name:e,type:n[e]});for(const e of u)h.addField({name:e,type:d.FieldType.string});for(const t of l){const{time:s,wideRowIndex:n}=t;for(const t of c){const r={};for(const e of p)r[e]=a.fields[o[e]].values.get(n);let l=0;for(const e of i[t]){const t=a.fields[e];if(0==l++&&null!=t.labels)for(const e in t.labels)r[e]=t.labels[e];r[t.name]=t.values.get(n)}r[e.name]=s,h.add(r)}}t.push(h)}return t}!function(e){e.TimeSeriesWide="wide",e.TimeSeriesMany="many",e.TimeSeriesLong="long"}(_t||(_t={}));const Pt={id:d.DataTransformerID.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:e=>t=>t.pipe((0,Ne.U)((t=>Pt.transformer(e)(t)))),transformer:e=>{var t;const a=null!==(t=null==e?void 0:e.format)&&void 0!==t?t:_t.TimeSeriesWide;return a===_t.TimeSeriesMany?Nt:a===_t.TimeSeriesLong?It:e=>{const t=(0,d.outerJoinDataFrames)({frames:e,joinBy:d.fieldMatchers.get(d.FieldMatcherID.firstTimeField).get({}),enforceSort:!0,keepOriginIndices:!0});return t?[t]:[]}}},Mt=[{label:"Wide time series",value:_t.TimeSeriesWide,description:"Creates a single frame joined by time",info:(0,P.jsxs)("ul",{children:[(0,P.jsx)("li",{children:"Single frame"}),(0,P.jsx)("li",{children:"1st field is shared time field"}),(0,P.jsx)("li",{children:"Time in ascending order"}),(0,P.jsx)("li",{children:"Multiple value fields of any type"})]})},{label:"Multi-frame time series",value:_t.TimeSeriesMany,description:"Creates a new frame for each time/number pair",info:(0,P.jsxs)("ul",{children:[(0,P.jsx)("li",{children:"Multiple frames"}),(0,P.jsx)("li",{children:"Each frame has two fields: time, value"}),(0,P.jsx)("li",{children:"Time in ascending order"}),(0,P.jsx)("li",{children:"String values are represented as labels"}),(0,P.jsx)("li",{children:"All values are numeric"})]})},{label:"Long time series",value:_t.TimeSeriesLong,description:"Convert each frame to long format",info:(0,P.jsxs)("ul",{children:[(0,P.jsx)("li",{children:"Single frame"}),(0,P.jsx)("li",{children:"1st field is time field"}),(0,P.jsx)("li",{children:"Time in ascending order, but may have duplictes"}),(0,P.jsx)("li",{children:"String values are represented as separate fields rather than as labels"}),(0,P.jsx)("li",{children:"Multiple value fields may exist"})]})}];const Ft=e=>({info:A.css`
    margin-left: 20px;
  `}),At={id:Pt.id,editor:function(e){const{options:t,onChange:a}=e,s=(0,f.useStyles2)(Ft),n=(0,l.useCallback)((e=>{a(Object.assign({},t,{format:e.value}))}),[a,t]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Format",labelWidth:12,children:(0,P.jsx)(f.Select,{menuShouldPortal:!0,width:35,options:Mt,value:Mt.find((e=>e.value===t.format))||Mt[0],onChange:n,className:"flex-grow-1"})})}),(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Info",labelWidth:12,children:(0,P.jsx)("div",{className:s.info,children:(Mt.find((e=>e.value===t.format))||Mt[0]).info})})})]})},transformation:Pt,name:Pt.name,description:Pt.description,help:"\n  ### Use cases\n\n  This takes query results and transforms them into a predictable timeseries format.\n  This transformer may be especially useful when using old panels that only expect the\n  many-frame timeseries format.\n  "};var Dt=a("./packages/grafana-ui/src/components/MatchersUI/FieldNamePicker.tsx");const $t={settings:{width:24}},Lt={id:d.DataTransformerID.convertFieldType,editor:e=>{let{input:t,options:a,onChange:s}=e;const n=[{value:d.FieldType.number,label:"Numeric"},{value:d.FieldType.string,label:"String"},{value:d.FieldType.time,label:"Time"},{value:d.FieldType.boolean,label:"Boolean"},{value:d.FieldType.other,label:"JSON"}],r=(0,l.useCallback)((e=>t=>{const n=a.conversions;n[e]=Object.assign({},n[e],{targetField:null!=t?t:""}),s(Object.assign({},a,{conversions:n}))}),[s,a]),i=(0,l.useCallback)((e=>t=>{const n=a.conversions;n[e]=Object.assign({},n[e],{destinationType:t.value}),s(Object.assign({},a,{conversions:n}))}),[s,a]),o=(0,l.useCallback)((e=>t=>{const n=a.conversions;n[e]=Object.assign({},n[e],{dateFormat:t.currentTarget.value}),s(Object.assign({},a,{conversions:n}))}),[s,a]),c=(0,l.useCallback)((()=>{s(Object.assign({},a,{conversions:[...a.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]}))}),[s,a]),u=(0,l.useCallback)((e=>{const t=a.conversions;t.splice(e,1),s(Object.assign({},a,{conversions:t}))}),[s,a]);return(0,P.jsxs)(P.Fragment,{children:[a.conversions.map(((e,a)=>{var s;return(0,P.jsxs)(f.InlineFieldRow,{children:[(0,P.jsx)(f.InlineField,{label:"Field",children:(0,P.jsx)(Dt.b,{context:{data:t},value:null!==(s=e.targetField)&&void 0!==s?s:"",onChange:r(a),item:$t})}),(0,P.jsx)(f.InlineField,{label:"as",children:(0,P.jsx)(f.Select,{menuShouldPortal:!0,options:n,value:e.destinationType,placeholder:"Type",onChange:i(a),width:18})}),e.destinationType===d.FieldType.time&&(0,P.jsx)(f.InlineField,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly.",children:(0,P.jsx)(f.Input,{value:e.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:o(a),width:24})}),(0,P.jsx)(f.Button,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>u(a),"aria-label":"Remove convert field type transformer"})]},`${e.targetField}-${a}`)})),(0,P.jsx)(f.Button,{size:"sm",icon:"plus",onClick:c,variant:"secondary","aria-label":"Add a convert field type transformer",children:"Convert field type"})]})},transformation:d.standardTransformers.convertFieldTypeTransformer,name:d.standardTransformers.convertFieldTypeTransformer.name,description:d.standardTransformers.convertFieldTypeTransformer.description};var Rt=a("./public/app/features/geo/gazetteer/gazetteer.ts"),Et=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),zt=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/from.js");const Vt={id:d.DataTransformerID.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:e=>t=>t.pipe((0,Et.z)((t=>(0,zt.D)(async function(e,t){var a;const s=d.fieldMatchers.get(d.FieldMatcherID.byName).get(null==t?void 0:t.lookupField),n=await(0,Rt.so)(null!==(a=null==t?void 0:t.gazetteer)&&void 0!==a?a:Rt.LI);if(!n.frame)return Promise.reject("missing frame in gazetteer");return function(e,t,a){var s;const n=null===(s=t.frame())||void 0===s?void 0:s.fields;if(!n)return e;return e.map((s=>{const r=s.length,i=[];for(const o of s.fields)if(i.push(o),a(o,s,e)){const e=o.values.toArray(),a=[];for(const e of n){const t=new Array(r);a.push(t),i.push(Object.assign({},e,{values:new d.ArrayVector(t)}))}for(let s=0;s<a.length;s++){const r=t.find(e[s]);if(null!=(null==r?void 0:r.index))for(let e=0;e<n.length;e++)a[e][s]=n[e].values.get(r.index)}}return Object.assign({},s,{fields:i})}))}(e,n,s)}(t,e)))))};var Bt=a("./public/app/features/geo/editor/GazetteerPathEditor.tsx");const Ut={settings:{width:30,filter:e=>e.type===d.FieldType.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},Ht={settings:{}},qt={id:d.DataTransformerID.fieldLookup,editor:e=>{var t,a;let{input:s,options:n,onChange:r}=e;const i=(0,l.useCallback)((e=>{r(Object.assign({},n,{lookupField:e}))}),[r,n]),o=(0,l.useCallback)((e=>{r(Object.assign({},n,{gazetteer:e}))}),[r,n]);return(0,P.jsxs)("div",{children:[(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Field",labelWidth:12,children:(0,P.jsx)(Dt.b,{context:{data:s},value:null!==(t=null==n?void 0:n.lookupField)&&void 0!==t?t:"",onChange:i,item:Ut})})}),(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Lookup",labelWidth:12,children:(0,P.jsx)(Bt.Q,{value:null!==(a=null==n?void 0:n.gazetteer)&&void 0!==a?a:"",context:{data:s},item:Ht,onChange:o})})})]})},transformation:Vt,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source.  This currently supports spatial data, but will eventually support more formats",state:d.PluginState.alpha};var Wt=a("./public/app/features/dimensions/index.ts");let Gt;!function(e){e.JSON="json",e.KeyValues="kvp",e.Auto="auto"}(Gt||(Gt={}));const Zt={id:Gt.JSON,name:"JSON",description:"Parse JSON string",parse:e=>JSON.parse(e)},Qt=/['"]|^\{|\}$/g,Kt=/[\s,;&]+/g,Yt=/[=:]/g,Jt=[Zt,{id:Gt.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:e=>{const t={};return e.trim().replace(Qt,"").split(Kt).forEach((e=>{let[a,s]=e.split(Yt);null!=a&&(t[a]=s)})),t}}],Xt={id:Gt.Auto,name:"Auto",description:"parse new fields automatically",parse:e=>{for(const t of Jt)try{const a=t.parse(e);if(null!=a)return a}catch{}}},ea=new d.Registry((()=>[...Jt,Xt])),ta={id:d.DataTransformerID.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:e=>t=>t.pipe((0,Ne.U)((t=>ta.transformer(e)(t)))),transformer:e=>t=>t.map((t=>function(e,t){var a;if(!t.source)return e;const s=(0,Wt.PI)(e,t.source);if(!s)throw new Error("json field not found");const n=ea.getIfExists(null!==(a=t.format)&&void 0!==a?a:Gt.Auto);if(!n)throw new Error("unkonwn extractor");const i=e.length,o=[],l=new Map;for(let e=0;e<i;e++){let t=s.values.get(e);if((0,r.isString)(t))try{t=n.parse(t)}catch{t={}}for(const[a,s]of Object.entries(t)){let t=l.get(a);null==t&&(t=new Array(i),l.set(a,t),o.push(a)),t[e]=s}}const c=o.map((e=>{const t=l.get(e);return{name:e,values:new d.ArrayVector(t),type:t?(0,d.getFieldTypeFromValue)(t.find((e=>null!=e))):d.FieldType.other,config:{}}}));t.replace||c.unshift(...e.fields);return Object.assign({},e,{fields:c})}(t,e)))};const aa={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},sa={id:d.DataTransformerID.extractFields,editor:e=>{var t,a;let{input:s,options:n,onChange:r}=e;const i=ea.selectOptions(n.format?[n.format]:void 0);return(0,P.jsxs)("div",{children:[(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Source",labelWidth:16,children:(0,P.jsx)(Dt.b,{context:{data:s},value:null!==(t=n.source)&&void 0!==t?t:"",onChange:e=>{r(Object.assign({},n,{source:e}))},item:aa})})}),(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Format",labelWidth:16,children:(0,P.jsx)(f.Select,{value:i.current[0],options:i.options,onChange:e=>{r(Object.assign({},n,{format:null==e?void 0:e.value}))},width:24,placeholder:"Auto"})})}),(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(f.InlineField,{label:"Replace all fields",labelWidth:16,children:(0,P.jsx)(f.InlineSwitch,{value:null!==(a=n.replace)&&void 0!==a&&a,onChange:()=>{r(Object.assign({},n,{replace:!n.replace}))}})})})]})},transformation:ta,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc)",state:d.PluginState.alpha};var na=a("./public/app/features/geo/format/utils.ts"),ra=a("./public/app/features/geo/utils/location.ts"),ia=a("./public/app/core/components/TransformersUI/spatial/models.gen.ts"),oa=a("./public/app/core/components/TransformersUI/spatial/utils.ts");const la={id:d.DataTransformerID.spatial,name:"Spatial operations",description:"Apply spatial operations to query results",defaultOptions:{},operator:e=>t=>t.pipe((0,Et.z)((t=>(0,zt.D)(async function(e,t){const a=await(0,ra.cJ)(t.source);if(ca(t)){var s;const n=await(0,ra.cJ)(null===(s=t.modify)||void 0===s?void 0:s.target);return e.map((e=>{const t=(0,ra.g6)(e,a),s=(0,ra.g6)(e,n);if(t.field&&s.field){const a=[...e.fields],n=(0,na.Fh)(t.field,s.field),r=a[0];return r.type===d.FieldType.geo&&r!==t.field&&r!==s.field?a[0]=(0,na.EK)(r,n):a.unshift(n),Object.assign({},e,{fields:a})}return e}))}return e.map((e=>{var s;let n=(0,ra.g6)(e,a);if(n.field){if(t.action===ia.JJ.Modify){if((null===(s=t.modify)||void 0===s?void 0:s.op)===ia.ac.AsLine){let t=n.field.name;return t&&"Point"!==t||(t="Line"),Object.assign({},e,{length:1,fields:[Object.assign({},n.field,{name:t,type:d.FieldType.geo,values:new d.ArrayVector([(0,oa.Lp)(n.field)])})]})}return e}const a=n.derived?[n.field,...e.fields]:e.fields.slice(0);var r;if(t.action===ia.JJ.Calculate)a.push((0,oa.N7)(n.field,null!==(r=t.calculate)&&void 0!==r?r:{})),n.derived=!0;if(n.derived)return Object.assign({},e,{fields:a})}return e}))}(t,e)))))};function ca(e){var t;return e.action===ia.JJ.Modify&&(null===(t=e.modify)||void 0===t?void 0:t.op)===ia.ac.LineBuilder}var da=a("./public/app/features/geo/editor/locationEditor.ts"),ua=a("./public/app/features/dashboard/components/PanelEditor/OptionsPaneCategoryDescriptor.tsx"),pa=a("./public/app/features/dashboard/components/PanelEditor/utils.ts"),ha=a("./public/app/features/dashboard/components/PanelEditor/getVisualizationOptions.tsx");const ma=(e,t)=>{var a;const s=null!==(a=t.options)&&void 0!==a?a:{};e.addSelect({path:"action",name:"Action",description:"",defaultValue:ia.JJ.Prepare,settings:{options:[{value:ia.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:ia.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:ia.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),s.action===ia.JJ.Calculate?e.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:ia.Ii.Heading,settings:{options:[{value:ia.Ii.Heading,label:"Heading"},{value:ia.Ii.Area,label:"Area"},{value:ia.Ii.Distance,label:"Distance"}]}}):s.action===ia.JJ.Modify&&e.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:ia.ac.AsLine,settings:{options:[{value:ia.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:ia.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),ca(s)?(e.addNestedOptions({category:["Source"],path:"source",build:(e,t)=>{var a;const n=null!==(a=s.source)&&void 0!==a?a:{};n.mode||(n.mode=d.FrameGeometrySourceMode.Auto),(0,da.C)("Point","",e,n)}}),e.addNestedOptions({category:["Target"],path:"modify",build:(e,t)=>{var a,n;const r=null!==(a=null===(n=s.modify)||void 0===n?void 0:n.target)&&void 0!==a?a:{};r.mode||(r.mode=d.FrameGeometrySourceMode.Auto),(0,da.C)("Point","target.",e,r)}})):(0,da.C)("Location","source.",e,s.source)},ga=e=>({wrap:A.css`
      margin-bottom: 20px;
    `,item:A.css`
      border-left: 4px solid ${e.colors.border.strong};
      padding-left: 10px;
    `}),fa={id:d.DataTransformerID.spatial,editor:e=>{(0,l.useEffect)((()=>{var t;if(null===(t=e.options.source)||void 0===t||!t.mode){const t=function(e){const t={},a=new d.PanelOptionsEditorBuilder;e(a,{data:[],options:{}});for(const e of a.getItems())null!=e.defaultValue&&(0,r.set)(t,e.path,e.defaultValue);return t}(ma);e.onChange(Object.assign({},t,e.options)),console.log("geometry useEffect",t)}}));const t=ga((0,f.useTheme2)()),a=function(e,t){const a={data:e.input,options:e.options},s=new ua.j({id:"root",title:"root"}),n={getValue:t=>(0,r.get)(e.options,t),onChange:(t,a)=>{e.onChange((0,pa.hs)(e.options,t,a))}};return(0,ha.HZ)(t,n,(e=>{if(null!=e&&e.length){const t=e[0];let a=s.categories.find((e=>e.props.id===t));return a||(a=new ua.j({id:t,title:t}),s.categories.push(a)),a}return s}),a),s}(e,ma);return(0,P.jsxs)("div",{children:[(0,P.jsx)("div",{children:a.items.map((e=>e.render()))}),(0,P.jsx)("div",{children:a.categories.map((e=>(0,P.jsxs)("div",{className:t.wrap,children:[(0,P.jsx)("h5",{children:e.props.title}),(0,P.jsx)("div",{className:t.item,children:e.items.map((e=>e.render()))})]},e.props.id)))})]})},transformation:la,name:la.name,description:la.description,state:d.PluginState.alpha},ba=()=>[M,R,it,B,le,ye,je,Ze,tt,De,Ee,He,qe,Ge,lt,kt,Tt,At,Lt,fa,qt,sa];var va=a("../../opt/drone/yarncache/@sentry-minimal-npm-6.17.2-83c2a56c4a-4c1d63deee.zip/node_modules/@sentry/minimal/esm/index.js"),xa=a("../../opt/drone/yarncache/@sentry-browser-npm-6.17.2-3b94c6e1b0-81235d9648.zip/node_modules/@sentry/browser/esm/sdk.js"),ya=a("../../opt/drone/yarncache/@sentry-browser-npm-6.17.2-3b94c6e1b0-81235d9648.zip/node_modules/@sentry/browser/dist/transports/index.js"),wa=a("../../opt/drone/yarncache/@sentry-types-npm-6.17.2-0195e3c74c-0872f84ef9.zip/node_modules/@sentry/types/esm/severity.js"),ja=a("../../opt/drone/yarncache/@sentry-utils-npm-6.17.2-a379d6c2b8-15d2885a7d.zip/node_modules/@sentry/utils/esm/promisebuffer.js"),Ca=a("../../opt/drone/yarncache/@sentry-utils-npm-6.17.2-a379d6c2b8-15d2885a7d.zip/node_modules/@sentry/utils/esm/supports.js"),ka=a("../../opt/drone/yarncache/@sentry-utils-npm-6.17.2-a379d6c2b8-15d2885a7d.zip/node_modules/@sentry/utils/esm/syncpromise.js"),Sa=a("../../opt/drone/yarncache/@sentry-utils-npm-6.17.2-a379d6c2b8-15d2885a7d.zip/node_modules/@sentry/utils/esm/misc.js"),Ta=a("../../opt/drone/yarncache/@sentry-utils-npm-6.17.2-a379d6c2b8-15d2885a7d.zip/node_modules/@sentry/utils/esm/logger.js");function Oa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _a{constructor(e){var t;Oa(this,"_disabledUntil",new Date(Date.now())),Oa(this,"_buffer",void 0),this.options=e,this._buffer=(0,ja.x)(null!==(t=e.maxConcurrentRequests)&&void 0!==t?t:3)}sendEvent(e){var t,a,s;if(new Date(Date.now())<this._disabledUntil){const t="Dropping frontend event due to too many requests.";return console.warn(t),Promise.resolve({event:e,reason:t,status:"skipped"})}const n={body:JSON.stringify(Object.assign({},e,{level:null!==(t=e.level)&&void 0!==t?t:e.exception?wa.z.Error:wa.z.Info,exception:e.exception?{values:null===(a=e.exception.values)||void 0===a?void 0:a.map((e=>Object.assign({},e,{value:Ia(e.value)})))}:e.exception,breadcrumbs:null===(s=e.breadcrumbs)||void 0===s?void 0:s.map((e=>Object.assign({},e,{timestamp:Na(e.timestamp)}))),timestamp:Na(e.timestamp)})),url:this.options.endpoint},r={body:n.body,headers:{"Content-Type":"application/json"},method:"POST",referrerPolicy:(0,Ca.hv)()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),this._buffer.add((()=>new ka.cW(((e,t)=>{window.fetch(n.url,r).then((a=>{if(200!==a.status){if(429===a.status){const e=Date.now(),t=a.headers.get("Retry-After");this._disabledUntil=new Date(e+(0,Sa.JY)(e,t)),Ta.k.warn(`Too many requests, backing off till: ${this._disabledUntil}`)}t(a)}else e({status:"success"})})).catch(t)})))).then(void 0,(t=>{if("Not adding Promise due to buffer limit reached."===t.message){const t="Dropping frontend log event due to too many requests in flight.";return console.warn(t),{event:e,reason:t,status:"skipped"}}throw t}))}}function Na(e){return e?new Date(1e3*e).toISOString():(new Date).toISOString()}function Ia(e){return"string"==typeof e||void 0===e?e:e&&"object"==typeof e&&0===Object.keys(e).length?"":String(e)}class Pa extends ya.d8{sendEvent(e){return(0,m.getEchoSrv)().addEvent({type:m.EchoEventType.Sentry,payload:e}),Promise.resolve({status:"success",event:e})}sendSession(e){return Promise.resolve({status:"skipped"})}_sendRequest(e,t){throw new Error("should not happen")}}function Ma(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Fa{constructor(e){Ma(this,"supportedEvents",[m.EchoEventType.Sentry]),Ma(this,"transports",void 0),Ma(this,"addEvent",(e=>{this.transports.forEach((t=>t.sendEvent(e.payload)))})),Ma(this,"flush",(()=>{})),this.options=e,this.transports=[],e.dsn&&this.transports.push(new ya.Vh({dsn:e.dsn},fetch)),e.customEndpoint&&this.transports.push(new _a({endpoint:e.customEndpoint}));const t={release:e.buildInfo.version,environment:e.buildInfo.env,dsn:e.dsn||"https://examplePublicKey@o0.ingest.sentry.io/0",sampleRate:e.sampleRate,transport:Pa,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"]};e.user&&(0,va.av)({email:e.user.email,id:String(e.user.id)}),(0,xa.S1)(t)}}var Aa=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Subject.js"),Da=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/throwError.js"),$a=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/observable/merge.js"),La=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/filter.js"),Ra=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/take.js"),Ea=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js"),za=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),Va=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/finalize.js"),Ba=a("./public/app/features/variables/state/selectors.ts"),Ua=a("./public/app/features/variables/types.ts"),Ha=a("./public/app/store/store.ts"),qa=a("./public/app/features/variables/utils.ts"),Wa=a("../../opt/drone/yarncache/uuid-npm-8.3.2-eca0baba53-5575a8a75c.zip/node_modules/uuid/dist/esm-browser/v4.js"),Ga=a("./public/app/features/dashboard/services/TimeSrv.ts"),Za=a("./public/app/features/variables/guard.ts");function Qa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ka{constructor(){Qa(this,"runners",void 0),this.runners=[new Ya,new Ja,new Xa,new es]}getRunnerForDatasource(e){const t=this.runners.find((t=>t.canRun(e)));if(t)return t;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class Ya{constructor(){Qa(this,"type",d.VariableSupportType.Legacy)}canRun(e){return(0,Za.R)(e)}getTarget(e){let{datasource:t,variable:a}=e;if((0,Za.R)(t))return a.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){let{datasource:a,variable:s,searchFilter:n,timeSrv:r}=e;if(!(0,Za.R)(a))return ts();const i=(0,qa.AQ)(s,n,r);return(0,zt.D)(a.metricFindQuery(s.query,i)).pipe((0,Et.z)((e=>{if(!e||!e.length)return ts();const t=e;return(0,_e.of)({series:t,state:d.LoadingState.Done,timeRange:i.range})})))}}class Ja{constructor(){Qa(this,"type",d.VariableSupportType.Standard)}canRun(e){return(0,Za.Ju)(e)}getTarget(e){let{datasource:t,variable:a}=e;if((0,Za.Ju)(t))return t.variables.toDataQuery(a.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){let{datasource:a,runRequest:s}=e;return(0,Za.Ju)(a)?a.variables.query?s(a,t,a.variables.query):s(a,t):ts()}}class Xa{constructor(){Qa(this,"type",d.VariableSupportType.Custom)}canRun(e){return(0,Za.d7)(e)}getTarget(e){let{datasource:t,variable:a}=e;if((0,Za.d7)(t))return a.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){let{datasource:a,runRequest:s}=e;return(0,Za.d7)(a)?s(a,t,a.variables.query):ts()}}class es{constructor(){Qa(this,"type",d.VariableSupportType.Datasource)}canRun(e){return(0,Za.X7)(e)}getTarget(e){let{datasource:t,variable:a}=e;var s;if((0,Za.X7)(t))return Object.assign({},a.query,{refId:null!==(s=a.query.refId)&&void 0!==s?s:"variable-query"});throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){let{datasource:a,runRequest:s}=e;return(0,Za.X7)(a)?s(a,t):ts()}}function ts(){return(0,_e.of)({state:d.LoadingState.Done,series:[],timeRange:(0,d.getDefaultTimeRange)()})}var as=a("./public/app/features/query/state/runRequest.ts"),ss=a("./public/app/features/variables/state/types.ts"),ns=a("./public/app/features/variables/state/actions.ts"),rs=a("./.yarn/__virtual__/@reduxjs-toolkit-virtual-37b359704c/3/opt/drone/yarncache/@reduxjs-toolkit-npm-1.7.1-608aebbd36-77e027b948.zip/node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),is=a("./public/app/features/variables/constants.ts");const os=Object.assign({},Ua.Eg,{type:"query",datasource:null,query:"",regex:"",sort:Ua.$U.disabled,refresh:Ua.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""}),ls=(e,t)=>{const a=[];let s=null;t.lastIndex=0;do{s=t.exec(e),s&&a.push(s)}while(t.global&&s&&""!==s[0]&&void 0!==s[0]);return a},cs=(e,t,a)=>{let s,n=[];e&&(s=(0,d.stringToJsRegex)(e));for(let e=0;e<a.length;e++){const t=a[e];let d=void 0===t.text||null===t.text?t.value:t.text,h=void 0===t.value||null===t.value?t.text:t.value;if((0,r.isNumber)(h)&&(h=h.toString()),(0,r.isNumber)(d)&&(d=d.toString()),s){const e=ls(h,s);if(!e.length)continue;const t=e.find((e=>e.groups&&e.groups.value)),a=e.find((e=>e.groups&&e.groups.text)),r=e.find((e=>e.length>1)),m=e.length>1&&r;if(t||a){var i,o,l,c,u,p;h=null!==(i=null==t||null===(o=t.groups)||void 0===o?void 0:o.value)&&void 0!==i?i:null==a||null===(l=a.groups)||void 0===l?void 0:l.text,d=null!==(c=null==a||null===(u=a.groups)||void 0===u?void 0:u.text)&&void 0!==c?c:null==t||null===(p=t.groups)||void 0===p?void 0:p.value}else{if(m){for(let t=0;t<e.length;t++){const a=e[t];n.push({text:a[1],value:a[1],selected:!1})}continue}r&&(d=r[1],h=r[1])}}n.push({text:d,value:h,selected:!1})}return n=(0,r.uniqBy)(n,"value"),((e,t)=>{if(t===Ua.$U.disabled)return e;const a=Math.ceil(t/2),s=t%2==0;return 1===a?e=(0,r.sortBy)(e,"text"):2===a?e=(0,r.sortBy)(e,(e=>{if(!e.text)return-1;const t=e.text.match(/.*?(\d+).*/);return!t||t.length<2?-1:parseInt(t[1],10)})):3===a&&(e=(0,r.sortBy)(e,(e=>(0,r.toLower)(e.text)))),s&&(e=e.reverse()),e})(n,t)},ds=(0,rs.oM)({name:"templating/query",initialState:ss.sX,reducers:{updateVariableOptions:(e,t)=>{const{results:a,templatedRegex:s}=t.payload.data,n=(0,ss.ir)(e,t.payload.id),{includeAll:r,sort:i}=n,o=cs(s,i,a);r&&o.unshift({text:is.xk,value:is.r2,selected:!1}),o.length||o.push({text:is.BH,value:is.QX,isNone:!0,selected:!1}),n.options=o}}}),us=ds.reducer,{updateVariableOptions:ps}=ds.actions;function hs(){return e=>e.pipe((0,Ne.U)((e=>{const t=e.series;if(!t||!t.length)return[];if(function(e){if(!e)return!1;if(!e.length)return!0;const t=e[0];if((0,d.isDataFrame)(t))return!1;for(const e in t){if(!t.hasOwnProperty(e))continue;if(null!==t[e]&&"string"!=typeof t[e]&&"number"!=typeof t[e])continue;const a=e.toLowerCase();if("text"===a||"value"===a)return!0}return!1}(t))return t;const a=(0,as.F9)(t),s=[];let n=-1,r=-1,i=-1,o=-1;for(const e of a)for(let a=0;a<e.fields.length;a++){const s=e.fields[a],l=(0,d.getFieldDisplayName)(s,e,t).toLowerCase();s.type===d.FieldType.string&&-1===i&&(i=a),"text"===l&&s.type===d.FieldType.string&&-1===r&&(r=a),"value"===l&&s.type===d.FieldType.string&&-1===n&&(n=a),"expandable"!==l||s.type!==d.FieldType.boolean&&s.type!==d.FieldType.number||-1!==o||(o=a)}if(-1===i)throw new Error("Couldn't find any field of type string in the results.");for(const e of t)for(let t=0;t<e.length;t++){const a=-1!==o?e.fields[o].values.get(t):void 0,l=e.fields[i].values.get(t),c=-1!==r?e.fields[r].values.get(t):null,d=-1!==n?e.fields[n].values.get(t):null;-1!==n||-1!==r?-1!==n||-1===r?-1===n||-1!==r?s.push({text:c,value:d,expandable:a}):s.push({text:d,value:d,expandable:a}):s.push({text:c,value:c,expandable:a}):s.push({text:l,value:l,expandable:a})}return s})))}function ms(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class gs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dispatch:Ha.WI,getState:Ha.y0,getVariable:Ba.E0,getTemplatedRegex:qa.gR,getTimeSrv:Ga.$t,queryRunners:new Ka,runRequest:as.v7};ms(this,"updateOptionsRequests",void 0),ms(this,"updateOptionsResults",void 0),ms(this,"cancelRequests",void 0),ms(this,"subscription",void 0),this.dependencies=e,this.updateOptionsRequests=new Aa.x,this.updateOptionsResults=new Aa.x,this.cancelRequests=new Aa.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(e){this.updateOptionsRequests.next(e)}getResponse(e){return this.updateOptionsResults.asObservable().pipe((0,La.h)((t=>t.identifier===e)))}cancelRequest(e){this.cancelRequests.next({identifier:e})}destroy(){this.subscription.unsubscribe()}onNewRequest(e){const{datasource:t,identifier:a,searchFilter:s}=e;try{const{dispatch:n,runRequest:r,getTemplatedRegex:i,getVariable:o,queryRunners:l,getTimeSrv:c,getState:u}=this.dependencies,p=u().templating.transaction.uid;this.updateOptionsResults.next({identifier:a,state:d.LoadingState.Loading});const h=o(a.id,u()),m={variable:h,datasource:t,searchFilter:s,timeSrv:c(),runRequest:r},g=l.getRunnerForDatasource(t),f=g.getTarget({datasource:t,variable:h}),b=this.getRequest(h,e,f);g.runRequest(m,b).pipe((0,La.h)((()=>{const e=u().templating.transaction.uid;return p===e})),(0,La.h)((e=>e.state===d.LoadingState.Done||e.state===d.LoadingState.Error)),(0,Ra.q)(1),(0,Et.z)((e=>e.state===d.LoadingState.Error?(0,Da._)((()=>e.error)):(0,_e.of)(e))),hs(),function(e){return t=>t.pipe((0,Ne.U)((t=>{const{variable:a,dispatch:s,getTemplatedRegexFunc:n}=e,r=n(a),i=(0,ss.Y6)(a,{results:t,templatedRegex:r});s(ps(i))})))}({variable:h,dispatch:n,getTemplatedRegexFunc:i}),function(e){return t=>t.pipe((0,Et.z)((()=>{const{dispatch:t,variable:a,searchFilter:s}=e;return s?(0,_e.of)():(0,zt.D)(t((0,ns.xQ)((0,ss.GT)(a))))})))}({variable:h,dispatch:n,searchFilter:s}),(0,Ea.R)((0,$a.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,La.h)((e=>{let t=!1;return e.identifier.id===a.id&&(t=!0,this.updateOptionsResults.next({identifier:a,state:d.LoadingState.Loading,cancelled:t})),t})))),(0,za.K)((e=>e.cancelled?(0,_e.of)({}):(this.updateOptionsResults.next({identifier:a,state:d.LoadingState.Error,error:e}),(0,Da._)((()=>e))))),(0,Va.x)((()=>{this.updateOptionsResults.next({identifier:a,state:d.LoadingState.Done})}))).subscribe()}catch(e){this.updateOptionsResults.next({identifier:a,state:d.LoadingState.Error,error:e})}}getRequest(e,t,a){const{searchFilter:s}=t,n={variable:{text:e.current.text,value:e.current.value}},r=s?{searchFilter:{text:s,value:s}}:{},i=Object.assign({},r,n),o=e.refresh===Ua.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,d.getDefaultTimeRange)();return{app:d.CoreApp.Dashboard,requestId:(0,Wa.Z)(),timezone:"",range:o,interval:"",intervalMs:0,targets:[a],scopedVars:i,startTime:Date.now()}}}let fs;function bs(){return fs}var vs=a("../../opt/drone/yarncache/redux-npm-4.1.2-04cdbe7a08-6a839cee5b.zip/node_modules/redux/es/redux.js"),xs=a("./public/app/core/actions/cleanUp.ts"),ys=a("./public/app/core/reducers/navModel.ts");const ws=c.ZP.bootData.navTree,js=(0,rs.oM)({name:"navBarTree",initialState:ws,reducers:{}}),{}=js.actions,Cs=js.reducer;var ks=a("./public/app/core/reducers/appNotification.ts");const Ss={navBarTree:Cs,navIndex:ys.G4,appNotifications:ks.VW};var Ts=a("./public/app/features/alerting/state/reducers.ts"),Os=a("./public/app/features/teams/state/reducers.ts"),_s=a("./public/app/features/api-keys/state/reducers.ts"),Ns=a("./public/app/features/folders/state/reducers.ts"),Is=a("./public/app/features/dashboard/state/reducers.ts"),Ps=a("./public/app/features/explore/state/main.ts"),Ms=a("./public/app/features/plugins/admin/state/reducer.ts"),Fs=a("./public/app/features/datasources/state/reducers.ts"),As=a("./public/app/features/users/state/reducers.ts"),Ds=a("./public/app/features/profile/state/reducers.ts"),$s=a("./public/app/features/org/state/reducers.ts"),Ls=a("./public/app/features/admin/state/reducers.ts"),Rs=a("./public/app/features/variables/pickers/OptionsPicker/reducer.ts"),Es=a("./public/app/features/variables/editor/reducer.ts"),zs=a("./public/app/features/variables/state/variablesReducer.ts"),Vs=a("./public/app/features/variables/state/transactionReducer.ts"),Bs=a("./public/app/features/variables/inspect/reducer.ts");const Us={templating:(0,vs.combineReducers)({editor:Es.gl,variables:zs.L,optionsPicker:Rs.cv,transaction:Vs.vw,inspect:Bs.iV})};var Hs=a("./public/app/features/manage-dashboards/state/reducers.ts"),qs=a("./public/app/features/dashboard/components/PanelEditor/state/reducers.ts"),Ws=a("./public/app/features/panel/state/reducers.ts"),Gs=a("./public/app/features/serviceaccounts/state/reducers.ts");const Zs=Object.assign({},Ss,Ts.ZP,Os.ZP,_s.ZP,Ns.ZP,Is.ZP,Ps.ZP,Fs.ZP,As.ZP,Gs.ZP,Ds.ZP,$s.ZP,Ls.ZP,Us,Hs.ZP,qs.ZP,Ws.ZP,{plugins:Ms.I6}),Qs={},Ks=()=>{const e=(0,vs.combineReducers)(Object.assign({},Zs,Qs));return(t,a)=>{if(a.type!==xs.e.type)return e(t,a);const{stateSelector:s}=a.payload,n=s(t);return Ys(t,n),e(t,a)}},Ys=(e,t)=>{for(const a in e){if(!e.hasOwnProperty(a))continue;const s=e[a];if(s===t)return e[a]=void 0,!0;if("object"==typeof s){if(Ys(s,t))return!0}}return!1};var Js,Xs,en,tn,an,sn,nn,rn=a("./.yarn/__virtual__/react-router-virtual-31642fe47a/3/opt/drone/yarncache/react-router-npm-5.2.1-ea754d7473-7daae084bf.zip/node_modules/react-router/esm/react-router.js"),on=a("./.yarn/__virtual__/react-redux-virtual-7ad20a440e/3/opt/drone/yarncache/react-redux-npm-7.2.6-134f5ed64d-0bf142ce0d.zip/node_modules/react-redux/es/index.js"),ln=a("./public/app/core/selectors/navModel.ts"),cn=a("./public/app/core/components/Page/Page.tsx"),dn=a("./public/app/types/index.ts");const un=e=>{let{ldapConnectionInfo:t}=e;return(0,P.jsxs)(P.Fragment,{children:[Js||(Js=(0,P.jsx)("h3",{className:"page-heading",children:"LDAP Connection"})),(0,P.jsxs)("div",{className:"gf-form-group",children:[(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsxs)("table",{className:"filter-table form-inline",children:[Xs||(Xs=(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{children:"Host"}),(0,P.jsx)("th",{colSpan:2,children:"Port"})]})})),(0,P.jsx)("tbody",{children:t&&t.map(((e,t)=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:e.host}),(0,P.jsx)("td",{children:e.port}),(0,P.jsx)("td",{children:e.available?en||(en=(0,P.jsx)(f.Icon,{name:"check",className:"pull-right"})):tn||(tn=(0,P.jsx)(f.Icon,{name:"exclamation-triangle",className:"pull-right"}))})]},t)))})]})}),(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsx)(pn,{ldapConnectionInfo:t})})]})]})},pn=e=>{let{ldapConnectionInfo:t}=e;if(!t.some((e=>e.error)))return null;const a=[];t.forEach((e=>{e.error&&a.push(e)}));const s=a.map(((e,t)=>(0,P.jsxs)("div",{children:[(0,P.jsxs)("span",{style:{fontWeight:500},children:[e.host,":",e.port,an||(an=(0,P.jsx)("br",{}))]}),(0,P.jsx)("span",{children:e.error}),t!==a.length-1&&(0,P.jsxs)(P.Fragment,{children:[sn||(sn=(0,P.jsx)("br",{})),nn||(nn=(0,P.jsx)("br",{}))]})]},t)));return(0,P.jsx)(f.Alert,{title:"Connection error",severity:dn.F1.Error,children:s})};var hn,mn,gn,fn,bn;function vn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class xn extends l.PureComponent{constructor(){super(...arguments),vn(this,"state",{isSyncing:!1}),vn(this,"handleSyncClick",(()=>{this.setState({isSyncing:!this.state.isSyncing})}))}render(){const{ldapSyncInfo:e}=this.props,{isSyncing:t}=this.state,a=(0,d.dateTimeFormat)(e.nextSync,{format:"dddd YYYY-MM-DD HH:mm zz"});return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("h3",{className:"page-heading",children:["LDAP Synchronisation",(0,P.jsxs)(f.Button,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0,children:[hn||(hn=(0,P.jsx)("span",{className:"btn-title",children:"Bulk-sync now"})),t&&(mn||(mn=(0,P.jsx)(f.Spinner,{inline:!0})))]})]}),(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)("table",{className:"filter-table form-inline",children:(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{children:[gn||(gn=(0,P.jsx)("td",{children:"Active synchronisation"})),(0,P.jsx)("td",{colSpan:2,children:e.enabled?"Enabled":"Disabled"})]}),(0,P.jsxs)("tr",{children:[fn||(fn=(0,P.jsx)("td",{children:"Scheduled"})),(0,P.jsx)("td",{children:e.schedule})]}),(0,P.jsxs)("tr",{children:[bn||(bn=(0,P.jsx)("td",{children:"Next scheduled synchronisation"})),(0,P.jsx)("td",{children:a})]})]})})})})]})}}var yn,wn,jn,Cn,kn,Sn;const Tn=e=>{let{info:t,showAttributeMapping:a}=e;return(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsxs)("table",{className:"filter-table form-inline",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[yn||(yn=(0,P.jsx)("th",{colSpan:2,children:"User information"})),a&&(wn||(wn=(0,P.jsx)("th",{children:"LDAP attribute"})))]})}),(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{children:[jn||(jn=(0,P.jsx)("td",{className:"width-16",children:"First name"})),(0,P.jsx)("td",{children:t.name.ldapValue}),a&&(0,P.jsx)("td",{children:t.name.cfgAttrValue})]}),(0,P.jsxs)("tr",{children:[Cn||(Cn=(0,P.jsx)("td",{className:"width-16",children:"Surname"})),(0,P.jsx)("td",{children:t.surname.ldapValue}),a&&(0,P.jsx)("td",{children:t.surname.cfgAttrValue})]}),(0,P.jsxs)("tr",{children:[kn||(kn=(0,P.jsx)("td",{className:"width-16",children:"Username"})),(0,P.jsx)("td",{children:t.login.ldapValue}),a&&(0,P.jsx)("td",{children:t.login.cfgAttrValue})]}),(0,P.jsxs)("tr",{children:[Sn||(Sn=(0,P.jsx)("td",{className:"width-16",children:"Email"})),(0,P.jsx)("td",{children:t.email.ldapValue}),a&&(0,P.jsx)("td",{children:t.email.cfgAttrValue})]})]})]})})})};var On,_n,Nn,In,Pn,Mn;const Fn=e=>{let{permissions:t}=e;return(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsxs)("table",{className:"filter-table form-inline",children:[On||(On=(0,P.jsx)("thead",{children:(0,P.jsx)("tr",{children:(0,P.jsx)("th",{colSpan:1,children:"Permissions"})})})),(0,P.jsxs)("tbody",{children:[(0,P.jsxs)("tr",{children:[_n||(_n=(0,P.jsx)("td",{className:"width-16",children:" Grafana admin"})),(0,P.jsx)("td",{children:t.isGrafanaAdmin?(0,P.jsxs)(P.Fragment,{children:[Nn||(Nn=(0,P.jsx)(f.Icon,{name:"shield"}))," Yes"]}):"No"})]}),(0,P.jsxs)("tr",{children:[In||(In=(0,P.jsx)("td",{className:"width-16",children:"Status"})),(0,P.jsx)("td",{children:t.isDisabled?(0,P.jsxs)(P.Fragment,{children:[Pn||(Pn=(0,P.jsx)(f.Icon,{name:"times"}))," Inactive"]}):(0,P.jsxs)(P.Fragment,{children:[Mn||(Mn=(0,P.jsx)(f.Icon,{name:"check"}))," Active"]})})]})]})]})})})};var An,Dn,$n,Ln,Rn;const En=e=>{let{groups:t,showAttributeMapping:a}=e;const s=a?t:t.filter((e=>e.orgRole));return(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsxs)("table",{className:"filter-table form-inline",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[a&&(An||(An=(0,P.jsx)("th",{children:"LDAP Group"}))),Dn||(Dn=(0,P.jsxs)("th",{children:["Organization",(0,P.jsx)(f.Tooltip,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info",children:(0,P.jsx)("span",{className:"gf-form-help-icon",children:(0,P.jsx)(f.Icon,{name:"info-circle"})})})]})),$n||($n=(0,P.jsx)("th",{children:"Role"}))]})}),(0,P.jsx)("tbody",{children:s.map(((e,t)=>(0,P.jsxs)("tr",{children:[a&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("td",{children:e.groupDN}),!e.orgRole&&(0,P.jsxs)(P.Fragment,{children:[Ln||(Ln=(0,P.jsx)("td",{})),Rn||(Rn=(0,P.jsx)("td",{children:(0,P.jsxs)("span",{className:"text-warning",children:["No match",(0,P.jsx)(f.Tooltip,{placement:"top",content:"No matching groups found",theme:"info",children:(0,P.jsx)("span",{className:"gf-form-help-icon",children:(0,P.jsx)(f.Icon,{name:"info-circle"})})})]})}))]})]}),e.orgName&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("td",{children:e.orgName}),(0,P.jsx)("td",{children:e.orgRole})]})]},`${e.orgId}-${t}`)))})]})})})};var zn,Vn,Bn,Un,Hn;const qn=e=>{let{teams:t,showAttributeMapping:a}=e;const s=a?t:t.filter((e=>e.teamName));return(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsxs)("table",{className:"filter-table form-inline",children:[(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[a&&(zn||(zn=(0,P.jsx)("th",{children:"LDAP Group"}))),Vn||(Vn=(0,P.jsx)("th",{children:"Organisation"})),Bn||(Bn=(0,P.jsx)("th",{children:"Team"}))]})}),(0,P.jsx)("tbody",{children:s.map(((e,t)=>(0,P.jsxs)("tr",{children:[a&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("td",{children:e.groupDN}),!e.orgName&&(0,P.jsxs)(P.Fragment,{children:[Un||(Un=(0,P.jsx)("td",{})),Hn||(Hn=(0,P.jsx)("td",{children:(0,P.jsxs)("div",{className:"text-warning",children:["No match",(0,P.jsx)(f.Tooltip,{placement:"top",content:"No matching teams found",theme:"info",children:(0,P.jsx)("span",{className:"gf-form-help-icon",children:(0,P.jsx)(f.Icon,{name:"info-circle"})})})]})}))]})]}),e.orgName&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("td",{children:e.orgName}),(0,P.jsx)("td",{children:e.teamName})]})]},`${e.teamName}-${t}`)))})]})})})};var Wn;const Gn=e=>{let{ldapUser:t,showAttributeMapping:a}=e;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Tn,{info:t.info,showAttributeMapping:a}),(0,P.jsx)(Fn,{permissions:t.permissions}),t.roles&&t.roles.length>0&&(0,P.jsx)(En,{groups:t.roles,showAttributeMapping:a}),t.teams&&t.teams.length>0?(0,P.jsx)(qn,{teams:t.teams,showAttributeMapping:a}):Wn||(Wn=(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)("table",{className:"filter-table form-inline",children:(0,P.jsx)("tbody",{children:(0,P.jsx)("tr",{children:(0,P.jsx)("td",{children:"No teams found via LDAP"})})})})})}))]})};var Zn,Qn,Kn=a("./public/app/features/admin/state/actions.ts"),Yn=a("./public/app/core/core.ts");function Jn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{FormField:Xn}=f.LegacyForms;class er extends l.PureComponent{constructor(){super(...arguments),Jn(this,"state",{isLoading:!0}),Jn(this,"search",(e=>{e.preventDefault();const t=e.target.elements.username.value;t&&this.fetchUserMapping(t)})),Jn(this,"onClearUserError",(()=>{this.props.clearUserError()}))}async componentDidMount(){const{clearUserMappingInfo:e,queryParams:t}=this.props;await e(),await this.fetchLDAPStatus(),t.username&&await this.fetchUserMapping(t.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:e,loadLdapSyncStatus:t}=this.props;return Promise.all([e(),t()])}async fetchUserMapping(e){const{loadUserMapping:t}=this.props;return await t(e)}render(){const{ldapUser:e,userError:t,ldapError:a,ldapSyncInfo:s,ldapConnectionInfo:n,navModel:r,queryParams:i}=this.props,{isLoading:o}=this.state,l=Yn.Vt.hasPermission(dn.bW.LDAPUsersRead);return(0,P.jsx)(cn.Z,{navModel:r,children:(0,P.jsx)(cn.Z.Contents,{isLoading:o,children:(0,P.jsxs)(P.Fragment,{children:[a&&a.title&&(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsx)(f.Alert,{title:a.title,severity:dn.F1.Error,children:a.body})}),(0,P.jsx)(un,{ldapConnectionInfo:n}),(0,m.featureEnabled)("ldapsync")&&s&&(0,P.jsx)(xn,{ldapSyncInfo:s}),l&&(0,P.jsxs)(P.Fragment,{children:[Zn||(Zn=(0,P.jsx)("h3",{className:"page-heading",children:"Test user mapping"})),(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsxs)("form",{onSubmit:this.search,className:"gf-form-inline",children:[(0,P.jsx)(Xn,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:i.username}),Qn||(Qn=(0,P.jsx)(f.Button,{type:"submit",children:"Run"}))]})}),t&&t.title&&(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsx)(f.Alert,{title:t.title,severity:dn.F1.Error,onRemove:this.onClearUserError,children:t.body})}),e&&(0,P.jsx)(Gn,{ldapUser:e,showAttributeMapping:!0})]})]})})})}}const tr={loadLdapState:Kn.Y3,loadLdapSyncStatus:Kn.j4,loadUserMapping:Kn.b_,clearUserError:Kn.V0,clearUserMappingInfo:Kn.IS},ar=(0,on.connect)((e=>({navModel:(0,ln.h)(e.navIndex,"ldap"),ldapConnectionInfo:e.ldap.connectionInfo,ldapUser:e.ldap.user,ldapSyncInfo:e.ldap.syncInfo,userError:e.ldap.userError,ldapError:e.ldap.ldapError})),tr)(er);var sr;function nr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function rr(e){var t;let{user:a,onUserUpdate:s,onUserDelete:n,onUserDisable:r,onUserEnable:i,onPasswordChange:o}=e;const[d,u]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!1),m=(0,l.useRef)(null),g=e=>()=>{u(e),!e&&m.current&&m.current.focus()},b=(0,l.useRef)(null),v=e=>()=>{h(e),!e&&b.current&&b.current.focus()},x=(null===(t=a.authLabels)||void 0===t?void 0:t.length)&&a.authLabels[0],y=x?`Synced via ${x}`:"",w=ir(c.vc.theme),j=a.isExternal||!Yn.Vt.hasPermissionInMetadata(dn.bW.UsersWrite,a),C=a.isExternal||!Yn.Vt.hasPermissionInMetadata(dn.bW.UsersPasswordUpdate,a),k=Yn.Vt.hasPermissionInMetadata(dn.bW.UsersDelete,a),S=Yn.Vt.hasPermissionInMetadata(dn.bW.UsersDisable,a),T=Yn.Vt.hasPermissionInMetadata(dn.bW.UsersEnable,a);return(0,P.jsxs)(P.Fragment,{children:[sr||(sr=(0,P.jsx)("h3",{className:"page-heading",children:"User information"})),(0,P.jsxs)("div",{className:"gf-form-group",children:[(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)("table",{className:"filter-table form-inline",children:(0,P.jsxs)("tbody",{children:[(0,P.jsx)(or,{label:"Name",value:a.name,locked:j,lockMessage:y,onChange:e=>{s(Object.assign({},a,{name:e}))}}),(0,P.jsx)(or,{label:"Email",value:a.email,locked:j,lockMessage:y,onChange:e=>{s(Object.assign({},a,{email:e}))}}),(0,P.jsx)(or,{label:"Username",value:a.login,locked:j,lockMessage:y,onChange:e=>{s(Object.assign({},a,{login:e}))}}),(0,P.jsx)(or,{label:"Password",value:"********",inputType:"password",locked:C,lockMessage:y,onChange:o})]})})}),(0,P.jsxs)("div",{className:w.buttonRow,children:[k&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(f.Button,{variant:"destructive",onClick:g(!0),ref:m,children:"Delete user"}),(0,P.jsx)(f.ConfirmModal,{isOpen:d,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:()=>n(a.id),onDismiss:g(!1)})]}),a.isDisabled&&T&&(0,P.jsx)(f.Button,{variant:"secondary",onClick:()=>i(a.id),children:"Enable user"}),!a.isDisabled&&S&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(f.Button,{variant:"secondary",onClick:v(!0),ref:b,children:"Disable user"}),(0,P.jsx)(f.ConfirmModal,{isOpen:p,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:()=>r(a.id),onDismiss:v(!1)})]})]})]})]})}const ir=(0,f.stylesFactory)((e=>({buttonRow:A.css`
      margin-top: 0.8rem;
      > * {
        margin-right: 16px;
      }
    `})));class or extends l.PureComponent{constructor(){super(...arguments),nr(this,"inputElem",void 0),nr(this,"state",{editing:!1,value:this.props.value||""}),nr(this,"setInputElem",(e=>{this.inputElem=e})),nr(this,"onEditClick",(()=>{"password"===this.props.inputType?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)})),nr(this,"onCancelClick",(()=>{this.setState({editing:!1,value:this.props.value||""})})),nr(this,"onInputChange",((e,t)=>{t!==f.LegacyInputStatus.Invalid&&this.setState({value:e.target.value})})),nr(this,"onInputBlur",((e,t)=>{t!==f.LegacyInputStatus.Invalid&&this.setState({value:e.target.value})})),nr(this,"focusInput",(()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()})),nr(this,"onSave",(()=>{this.props.onChange&&this.props.onChange(this.state.value)}))}render(){const{label:e,locked:t,lockMessage:a,inputType:s}=this.props,{value:n}=this.state,r=(0,A.cx)("width-16",A.css`
        font-weight: 500;
      `);if(t)return(0,P.jsx)(lr,{label:e,value:n,lockMessage:a});const i=`${e}-input`;return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:r,children:(0,P.jsx)("label",{htmlFor:i,children:e})}),(0,P.jsx)("td",{className:"width-25",colSpan:2,children:this.state.editing?(0,P.jsx)(f.Input,{id:i,type:s,defaultValue:n,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):(0,P.jsx)("span",{children:this.props.value})}),(0,P.jsx)("td",{children:(0,P.jsx)(f.ConfirmButton,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick,children:"Edit"})})]})}}nr(or,"defaultProps",{value:"",locked:!1,lockMessage:"",inputType:"text"});const lr=e=>{let{label:t,value:a,lockMessage:s}=e;const n=A.css`
    font-style: italic;
    margin-right: 0.6rem;
  `,r=(0,A.cx)("width-16",A.css`
      font-weight: 500;
    `);return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:r,children:t}),(0,P.jsx)("td",{className:"width-25",colSpan:2,children:a}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:n,children:s})})]})};var cr,dr,ur;const pr=[{label:"Yes",value:!0},{label:"No",value:!1}];function hr(e){let{isGrafanaAdmin:t,onGrafanaAdminChange:a}=e;const[s,n]=(0,l.useState)(!1),[r,i]=(0,l.useState)(t),o=Yn.Vt.hasPermission(dn.bW.UsersPermissionsUpdate);return(0,P.jsxs)(P.Fragment,{children:[cr||(cr=(0,P.jsx)("h3",{className:"page-heading",children:"Permissions"})),(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)("table",{className:"filter-table form-inline",children:(0,P.jsx)("tbody",{children:(0,P.jsxs)("tr",{children:[dr||(dr=(0,P.jsx)("td",{className:"width-16",children:"Grafana Admin"})),s?(0,P.jsx)("td",{colSpan:2,children:(0,P.jsx)(f.RadioButtonGroup,{options:pr,value:r,onChange:i,autoFocus:!0})}):(0,P.jsx)("td",{colSpan:2,children:t?(0,P.jsxs)(P.Fragment,{children:[ur||(ur=(0,P.jsx)(f.Icon,{name:"shield"}))," Yes"]}):(0,P.jsx)(P.Fragment,{children:"No"})}),(0,P.jsx)("td",{children:o&&(0,P.jsx)(f.ConfirmButton,{onClick:()=>n(!0),onConfirm:()=>a(r),onCancel:()=>{n(!1),i(t)},confirmText:"Change",children:"Change"})})]})})})})})]})}var mr,gr,fr=a("./.yarn/__virtual__/@lingui-react-virtual-edf7967b4d/3/opt/drone/yarncache/@lingui-react-npm-3.13.0-279ef69307-ca97bd3e80.zip/node_modules/@lingui/react/esm/index.js");function br(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class vr extends l.PureComponent{constructor(){super(...arguments),br(this,"forceAllLogoutButton",l.createRef()),br(this,"state",{showLogoutModal:!1}),br(this,"showLogoutConfirmationModal",(()=>{this.setState({showLogoutModal:!0})})),br(this,"dismissLogoutConfirmationModal",(()=>{this.setState({showLogoutModal:!1},(()=>{var e;null===(e=this.forceAllLogoutButton.current)||void 0===e||e.focus()}))})),br(this,"onSessionRevoke",(e=>()=>{this.props.onSessionRevoke(e)})),br(this,"onAllSessionsRevoke",(()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}))}render(){const{sessions:e,i18n:t}=this.props,{showLogoutModal:a}=this.state,s=A.css`
      margin-top: 0.8rem;
    `,n=Yn.Vt.hasPermission(dn.bW.UsersLogout);return(0,P.jsxs)(P.Fragment,{children:[mr||(mr=(0,P.jsx)("h3",{className:"page-heading",children:"Sessions"})),(0,P.jsxs)("div",{className:"gf-form-group",children:[(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsxs)("table",{className:"filter-table form-inline",children:[gr||(gr=(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{children:"Last seen"}),(0,P.jsx)("th",{children:"Logged on"}),(0,P.jsx)("th",{children:"IP address"}),(0,P.jsx)("th",{colSpan:2,children:"Browser and OS"})]})})),(0,P.jsx)("tbody",{children:e&&e.map(((e,a)=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:e.isActive?"Now":e.seenAt}),(0,P.jsx)("td",{children:t.date(e.createdAt,{dateStyle:"long"})}),(0,P.jsx)("td",{children:e.clientIp}),(0,P.jsx)("td",{children:`${e.browser} on ${e.os} ${e.osVersion}`}),(0,P.jsx)("td",{children:(0,P.jsx)("div",{className:"pull-right",children:n&&(0,P.jsx)(f.ConfirmButton,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(e.id),autoFocus:!0,children:"Force logout"})})})]},`${e.id}-${a}`)))})]})}),(0,P.jsxs)("div",{className:s,children:[n&&e.length>0&&(0,P.jsx)(f.Button,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton,children:"Force logout from all devices"}),(0,P.jsx)(f.ConfirmModal,{isOpen:a,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal})]})]})]})}}const xr=(0,fr.GV)()(vr);var yr,wr,jr,Cr,kr;class Sr extends l.PureComponent{constructor(){var e,t,a;super(...arguments),a=()=>{this.props.onUserSync()},(t="onUserSync")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}render(){const{ldapSyncInfo:e,user:t}=this.props,a=e&&e.nextSync?(0,d.dateTimeFormat)(e.nextSync,{format:"dddd YYYY-MM-DD HH:mm zz"}):"",s=`/admin/ldap?user=${t&&t.login}`,n=Yn.Vt.hasPermission(dn.bW.LDAPUsersRead),r=Yn.Vt.hasPermission(dn.bW.LDAPUsersSync);return(0,P.jsxs)(P.Fragment,{children:[yr||(yr=(0,P.jsx)("h3",{className:"page-heading",children:"LDAP Synchronisation"})),(0,P.jsxs)("div",{className:"gf-form-group",children:[(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)("table",{className:"filter-table form-inline",children:(0,P.jsxs)("tbody",{children:[wr||(wr=(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:"External sync"}),(0,P.jsx)("td",{children:"User synced via LDAP. Some changes must be done in LDAP or mappings."}),(0,P.jsx)("td",{children:(0,P.jsx)("span",{className:"label label-tag",children:"LDAP"})})]})),(0,P.jsx)("tr",{children:e.enabled?(0,P.jsxs)(P.Fragment,{children:[jr||(jr=(0,P.jsx)("td",{children:"Next scheduled synchronization"})),(0,P.jsx)("td",{colSpan:2,children:a})]}):(0,P.jsxs)(P.Fragment,{children:[Cr||(Cr=(0,P.jsx)("td",{children:"Next scheduled synchronization"})),kr||(kr=(0,P.jsx)("td",{colSpan:2,children:"Not enabled"}))]})})]})})}),(0,P.jsxs)("div",{className:"gf-form-button-row",children:[r&&(0,P.jsx)(f.Button,{variant:"secondary",onClick:this.onUserSync,children:"Sync user"}),n&&(0,P.jsx)(f.LinkButton,{variant:"secondary",href:s,children:"Debug LDAP Mapping"})]})]})]})}}var Tr=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsyncFn.js");function Or(e){let{onSelected:t,className:a,inputId:s,autoFocus:n}=e;(0,l.useEffect)((()=>{var e;n&&s&&(null===(e=document.getElementById(s))||void 0===e||e.focus())}),[n,s]);const[r,i]=(0,Tr.Z)((async()=>(await(0,j.i)().get("/api/orgs")).map((e=>({value:{id:e.id,name:e.name},label:e.name})))));return(0,P.jsx)(f.AsyncSelect,{menuShouldPortal:!0,inputId:s,className:a,isLoading:r.loading,defaultOptions:!0,isSearchable:!1,loadOptions:i,onChange:t,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var _r,Nr,Ir,Pr,Mr=a("./public/app/features/admin/OrgRolePicker.tsx"),Fr=a("./public/app/core/components/RolePicker/UserRolePicker.tsx"),Ar=a("./public/app/core/components/RolePicker/api.ts");function Dr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class $r extends l.PureComponent{constructor(){super(...arguments),Dr(this,"addToOrgButtonRef",l.createRef()),Dr(this,"state",{showAddOrgModal:!1}),Dr(this,"showOrgAddModal",(()=>{this.setState({showAddOrgModal:!0})})),Dr(this,"dismissOrgAddModal",(()=>{this.setState({showAddOrgModal:!1},(()=>{var e;null===(e=this.addToOrgButtonRef.current)||void 0===e||e.focus()}))}))}render(){const{user:e,orgs:t,isExternalUser:a,onOrgRoleChange:s,onOrgRemove:n,onOrgAdd:r}=this.props,{showAddOrgModal:i}=this.state,o=A.css`
      margin-top: 0.8rem;
    `,l=Yn.Vt.hasPermission(dn.bW.OrgUsersAdd);return(0,P.jsxs)(P.Fragment,{children:[_r||(_r=(0,P.jsx)("h3",{className:"page-heading",children:"Organizations"})),(0,P.jsxs)("div",{className:"gf-form-group",children:[(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)("table",{className:"filter-table form-inline",children:(0,P.jsx)("tbody",{children:t.map(((t,r)=>(0,P.jsx)(Er,{isExternalUser:a,user:e,org:t,onOrgRoleChange:s,onOrgRemove:n},`${t.orgId}-${r}`)))})})}),(0,P.jsx)("div",{className:o,children:l&&(0,P.jsx)(f.Button,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef,children:"Add user to organization"})}),(0,P.jsx)(Vr,{isOpen:i,onOrgAdd:r,onDismiss:this.dismissOrgAddModal})]})]})}}const Lr=(0,f.stylesFactory)((e=>({removeButton:A.css`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${e.palette.blue95};
    `,label:A.css`
      font-weight: 500;
    `,disabledTooltip:A.css`
      display: flex;
    `,tooltipItem:A.css`
      margin-left: 5px;
    `,tooltipItemLink:A.css`
      color: ${e.palette.blue95};
    `,rolePickerWrapper:A.css`
      display: flex;
    `,rolePicker:A.css`
      flex: auto;
      margin-right: ${e.spacing.sm};
    `})));class Rr extends l.PureComponent{constructor(){super(...arguments),Dr(this,"state",{currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[],builtInRoles:{}}),Dr(this,"onOrgRemove",(()=>{const{org:e}=this.props;this.props.onOrgRemove(e.orgId)})),Dr(this,"onChangeRoleClick",(()=>{const{org:e}=this.props;this.setState({isChangingRole:!0,currentRole:e.role})})),Dr(this,"onOrgRoleChange",(e=>{this.setState({currentRole:e})})),Dr(this,"onOrgRoleSave",(()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)})),Dr(this,"onCancelClick",(()=>{this.setState({isChangingRole:!1})})),Dr(this,"onBuiltinRoleChange",(e=>{this.props.onOrgRoleChange(this.props.org.orgId,e)}))}componentDidMount(){Yn.Vt.licensedAccessControlEnabled()&&(Yn.Vt.hasPermission(dn.bW.ActionRolesList)&&(0,Ar.ul)(this.props.org.orgId).then((e=>this.setState({roleOptions:e}))).catch((e=>console.error(e))),Yn.Vt.hasPermission(dn.bW.ActionBuiltinRolesList)&&(0,Ar.ul)(this.props.org.orgId).then((e=>this.setState({builtInRoles:e}))).catch((e=>console.error(e))))}render(){const{user:e,org:t,isExternalUser:a,theme:s}=this.props,{currentRole:n,isChangingRole:r}=this.state,i=Lr(s),o=(0,A.cx)("width-16",i.label),l=Yn.Vt.hasPermission(dn.bW.OrgUsersRoleUpdate),c=Yn.Vt.hasPermission(dn.bW.OrgUsersRemove),d=a||!l,u=`${t.name}-input`;return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:o,children:(0,P.jsx)("label",{htmlFor:u,children:t.name})}),Yn.Vt.licensedAccessControlEnabled()?(0,P.jsx)("td",{children:(0,P.jsxs)("div",{className:i.rolePickerWrapper,children:[(0,P.jsx)("div",{className:i.rolePicker,children:(0,P.jsx)(Fr.R,{userId:(null==e?void 0:e.id)||0,orgId:t.orgId,builtInRole:t.role,roleOptions:this.state.roleOptions,builtInRoles:this.state.builtInRoles,onBuiltinRoleChange:this.onBuiltinRoleChange,builtinRolesDisabled:d})}),a&&(Nr||(Nr=(0,P.jsx)(Hr,{})))]})}):(0,P.jsxs)(P.Fragment,{children:[r?(0,P.jsx)("td",{children:(0,P.jsx)(Mr.A,{inputId:u,value:n,onChange:this.onOrgRoleChange,autoFocus:!0})}):(0,P.jsx)("td",{className:"width-25",children:t.role}),(0,P.jsx)("td",{colSpan:1,children:(0,P.jsx)("div",{className:"pull-right",children:l&&(0,P.jsx)(Ur,{isExternalUser:a,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})})})]}),(0,P.jsx)("td",{colSpan:1,children:(0,P.jsx)("div",{className:"pull-right",children:c&&(0,P.jsx)(f.ConfirmButton,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0,children:"Remove from organization"})})})]})}}const Er=(0,f.withTheme)(Rr),zr=(0,f.stylesFactory)((()=>({modal:A.css`
    width: 500px;
  `,buttonRow:A.css`
    text-align: center;
  `,modalContent:A.css`
    overflow: visible;
  `})));class Vr extends l.PureComponent{constructor(){super(...arguments),Dr(this,"state",{selectedOrg:null,role:dn.B5.Admin}),Dr(this,"onOrgSelect",(e=>{this.setState({selectedOrg:e.value})})),Dr(this,"onOrgRoleChange",(e=>{this.setState({role:e})})),Dr(this,"onAddUserToOrg",(()=>{const{selectedOrg:e,role:t}=this.state;this.props.onOrgAdd(e.id,t)})),Dr(this,"onCancel",(()=>{this.props.onDismiss&&this.props.onDismiss()}))}render(){const{isOpen:e}=this.props,{role:t}=this.state,a=zr();return(0,P.jsxs)(f.Modal,{className:a.modal,contentClassName:a.modalContent,title:"Add to an organization",isOpen:e,onDismiss:this.onCancel,children:[(0,P.jsx)(f.Field,{label:"Organization",children:(0,P.jsx)(Or,{inputId:"new-org-input",onSelected:this.onOrgSelect,autoFocus:!0})}),(0,P.jsx)(f.Field,{label:"Role",children:(0,P.jsx)(Mr.A,{inputId:"new-org-role-input",value:t,onChange:this.onOrgRoleChange})}),(0,P.jsx)(f.Modal.ButtonRow,{children:(0,P.jsxs)(f.HorizontalGroup,{spacing:"md",justify:"center",children:[(0,P.jsx)(f.Button,{variant:"secondary",fill:"outline",onClick:this.onCancel,children:"Cancel"}),(0,P.jsx)(f.Button,{variant:"primary",onClick:this.onAddUserToOrg,children:"Add to organization"})]})})]})}}const Br=e=>({disabledTooltip:A.css`
    display: flex;
  `,tooltipItemLink:A.css`
    color: ${e.v1.palette.blue95};
  `});function Ur(e){let{onChangeRoleClick:t,isExternalUser:a,onOrgRoleSave:s,onCancelClick:n}=e;const r=(0,f.useStyles2)(Br);return(0,P.jsxs)("div",{className:r.disabledTooltip,children:[(0,P.jsx)(f.ConfirmButton,{confirmText:"Save",onClick:t,onCancel:n,onConfirm:s,disabled:a,children:"Change role"}),a&&(0,P.jsx)(f.Tooltip,{placement:"right-end",content:(0,P.jsxs)("div",{children:["This user's role is not editable because it is synchronized from your auth provider. Refer to the ",(0,P.jsx)("a",{className:r.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank",children:"Grafana authentication docs"})," for details."]}),children:Ir||(Ir=(0,P.jsx)(f.Icon,{name:"question-circle"}))})]})}const Hr=()=>{const e=(0,f.useTheme)(),t=qr(e);return(0,P.jsx)("div",{className:t.disabledTooltip,children:(0,P.jsx)(f.Tooltip,{placement:"right-end",content:(0,P.jsxs)("div",{children:["This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the ",(0,P.jsx)("a",{className:t.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank",children:"Grafana authentication docs"})," for details."]}),children:Pr||(Pr=(0,P.jsx)(f.Icon,{name:"question-circle"}))})})},qr=(0,f.stylesFactory)((e=>({disabledTooltip:A.css`
    display: flex;
  `,tooltipItemLink:A.css`
    color: ${e.palette.blue95};
  `})));function Wr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Gr extends l.PureComponent{constructor(){super(...arguments),Wr(this,"onUserUpdate",(e=>{this.props.updateUser(e)})),Wr(this,"onPasswordChange",(e=>{const{user:t,setUserPassword:a}=this.props;t&&a(t.id,e)})),Wr(this,"onUserDelete",(e=>{this.props.deleteUser(e)})),Wr(this,"onUserDisable",(e=>{this.props.disableUser(e)})),Wr(this,"onUserEnable",(e=>{this.props.enableUser(e)})),Wr(this,"onGrafanaAdminChange",(e=>{const{user:t,updateUserPermissions:a}=this.props;t&&a(t.id,e)})),Wr(this,"onOrgRemove",(e=>{const{user:t,deleteOrgUser:a}=this.props;t&&a(t.id,e)})),Wr(this,"onOrgRoleChange",((e,t)=>{const{user:a,updateOrgUserRole:s}=this.props;a&&s(a.id,e,t)})),Wr(this,"onOrgAdd",((e,t)=>{const{user:a,addOrgUser:s}=this.props;a&&s(a,e,t)})),Wr(this,"onSessionRevoke",(e=>{const{user:t,revokeSession:a}=this.props;t&&a(e,t.id)})),Wr(this,"onAllSessionsRevoke",(()=>{const{user:e,revokeAllSessions:t}=this.props;e&&t(e.id)})),Wr(this,"onUserSync",(()=>{const{user:e,syncLdapUser:t}=this.props;e&&t(e.id)}))}async componentDidMount(){const{match:e,loadAdminUserPage:t}=this.props;t(parseInt(e.params.id,10))}render(){const{navModel:e,user:t,orgs:a,sessions:s,ldapSyncInfo:n,isLoading:r}=this.props,i=t&&t.isExternal&&t.authLabels&&t.authLabels.includes("LDAP"),o=Yn.Vt.hasPermission(dn.bW.UsersAuthTokenList),l=Yn.Vt.hasPermission(dn.bW.LDAPStatusRead);return(0,P.jsx)(cn.Z,{navModel:e,children:(0,P.jsxs)(cn.Z.Contents,{isLoading:r,children:[t&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(rr,{user:t,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),i&&(0,m.featureEnabled)("ldapsync")&&n&&l&&(0,P.jsx)(Sr,{ldapSyncInfo:n,user:t,onUserSync:this.onUserSync}),(0,P.jsx)(hr,{isGrafanaAdmin:t.isGrafanaAdmin,onGrafanaAdminChange:this.onGrafanaAdminChange})]}),a&&(0,P.jsx)($r,{user:t,orgs:a,isExternalUser:null==t?void 0:t.isExternal,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),s&&o&&(0,P.jsx)(xr,{sessions:s,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})]})})}}const Zr={loadAdminUserPage:Kn.PK,updateUser:Kn.Nq,setUserPassword:Kn.tQ,disableUser:Kn.B9,enableUser:Kn.Dx,deleteUser:Kn.h8,updateUserPermissions:Kn.Xx,addOrgUser:Kn.bN,updateOrgUserRole:Kn.Jk,deleteOrgUser:Kn.uV,revokeSession:Kn._1,revokeAllSessions:Kn.Fm,syncLdapUser:Kn.CP},Qr=(0,on.connect)((e=>({navModel:(0,ln.h)(e.navIndex,"global-users"),user:e.userAdmin.user,sessions:e.userAdmin.sessions,orgs:e.userAdmin.orgs,ldapSyncInfo:e.ldap.syncInfo,isLoading:e.userAdmin.isLoading,error:e.userAdmin.error})),Zr)(Gr),Kr=()=>{const e=(0,c.iE)().verifyEmailEnabled?`${(0,c.iE)().appSubUrl}/verify`:`${(0,c.iE)().appSubUrl}/signup`,t=(0,A.css)({paddingTop:"16px"});return(0,P.jsxs)(f.VerticalGroup,{children:[(0,P.jsx)("div",{className:t,children:"New to Grafana?"}),(0,P.jsx)(f.LinkButton,{className:A.css`
          width: 100%;
          justify-content: center;
        `,href:e,variant:"secondary",fill:"outline",children:"Sign up"})]})};var Yr,Jr,Xr;const ei=e=>({button:A.css`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:A.css`
      position: absolute;
      left: ${e.spacing.sm};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:A.css`
        color: ${e.colors.text};
        display: flex;
        margin-bottom: ${e.spacing.sm};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:A.css`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${e.colors.text};
      `}}),ti=()=>{const e=(0,f.useStyles)(ei);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)("div",{className:e.divider.base,children:[(0,P.jsx)("div",{children:(0,P.jsx)("div",{className:e.divider.line})}),(0,P.jsx)("div",{children:(0,P.jsx)("span",{children:!c.ZP.disableLoginForm&&(Yr||(Yr=(0,P.jsx)("span",{children:"or"})))})}),(0,P.jsx)("div",{children:(0,P.jsx)("div",{className:e.divider.line})})]}),Jr||(Jr=(0,P.jsx)("div",{className:"clearfix"}))]})};function ai(e,t,a){return(0,A.cx)(t.button,A.css`
      background-color: ${e.bgColor};
      color: ${a.colors.getContrastText(e.bgColor)};

      &:hover {
        background-color: ${a.colors.emphasize(e.bgColor,.15)};
        box-shadow: ${a.shadows.z1};
      }
    `)}const si=()=>{const e=(0,r.pickBy)((()=>{var e,t,a,s,n,r,i,o;const l=!!c.ZP.oauth;return{saml:{bgColor:"#464646",enabled:c.ZP.samlEnabled,name:c.ZP.samlName||d.DEFAULT_SAML_NAME,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:l&&Boolean(c.ZP.oauth.google),name:"Google",icon:"google"},azuread:{bgColor:"#2f2f2f",enabled:l&&Boolean(c.ZP.oauth.azuread),name:"Microsoft",icon:"microsoft"},github:{bgColor:"#464646",enabled:l&&Boolean(c.ZP.oauth.github),name:"GitHub",icon:"github"},gitlab:{bgColor:"#fc6d26",enabled:l&&Boolean(c.ZP.oauth.gitlab),name:"GitLab",icon:"gitlab"},grafanacom:{bgColor:"#262628",enabled:l&&Boolean(c.ZP.oauth.grafana_com),name:"Grafana.com",icon:"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:l&&Boolean(c.ZP.oauth.okta),name:(null===(e=c.ZP.oauth)||void 0===e||null===(t=e.okta)||void 0===t?void 0:t.name)||"Okta",icon:(null===(a=c.ZP.oauth)||void 0===a||null===(s=a.okta)||void 0===s?void 0:s.icon)||"okta"},oauth:{bgColor:"#262628",enabled:l&&Boolean(c.ZP.oauth.generic_oauth),name:(null===(n=c.ZP.oauth)||void 0===n||null===(r=n.generic_oauth)||void 0===r?void 0:r.name)||"OAuth",icon:(null===(i=c.ZP.oauth)||void 0===i||null===(o=i.generic_oauth)||void 0===o?void 0:o.icon)||"signin",hrefName:"generic_oauth"}}})(),(e=>e.enabled)),t=Object.keys(e).length>0,a=(0,f.useTheme2)(),s=(0,f.useStyles)(ei);return t?(0,P.jsxs)(f.VerticalGroup,{children:[Xr||(Xr=(0,P.jsx)(ti,{})),Object.entries(e).map((e=>{let[t,n]=e;return(0,P.jsxs)(f.LinkButton,{className:ai(n,s,a),href:`login/${n.hrefName?n.hrefName:t}`,target:"_self",fullWidth:!0,children:[(0,P.jsx)(f.Icon,{className:s.buttonIcon,name:n.icon}),"Sign in with ",n.name]},t)}))]}):null};var ni,ri,ii=a("./public/app/core/components/Login/LoginCtrl.tsx"),oi=a("./public/app/core/components/Login/LoginForm.tsx"),li=a("./public/app/core/components/ForgottenPassword/ChangePassword.tsx"),ci=a("./public/app/core/components/Branding/Branding.tsx"),di=a("./public/app/core/components/Login/LoginLayout.tsx");const ui=A.css`
  padding: 0;
  margin-top: 4px;
`,pi=()=>(document.title=ci.c.AppTitle,(0,P.jsx)(di.dd,{children:(0,P.jsx)(ii.Z,{children:e=>{let{loginHint:t,passwordHint:a,ldapEnabled:s,authProxyEnabled:n,disableLoginForm:r,disableUserSignUp:i,login:o,isLoggingIn:l,changePassword:d,skipPasswordChange:u,isChangingPassword:p}=e;return(0,P.jsxs)(P.Fragment,{children:[!p&&(0,P.jsxs)(di.$s,{children:[!r&&(0,P.jsx)(oi.U,{onSubmit:o,loginHint:t,passwordHint:a,isLoggingIn:l,children:s||n?(0,P.jsx)(P.Fragment,{}):(0,P.jsx)(f.HorizontalGroup,{justify:"flex-end",children:(0,P.jsx)(f.LinkButton,{className:ui,fill:"text",href:`${c.ZP.appSubUrl}/user/password/send-reset-email`,children:"Forgot your password?"})})}),ni||(ni=(0,P.jsx)(si,{})),!i&&(ri||(ri=(0,P.jsx)(Kr,{})))]}),p&&(0,P.jsx)(di.$s,{children:(0,P.jsx)(li.G,{onSubmit:d,onSkip:()=>u()})})]})}})}));var hi,mi=a("./.yarn/__virtual__/react-loadable-virtual-72353a466e/3/opt/drone/yarncache/react-loadable-npm-5.5.0-92ce66d22b-72329cfd2f.zip/node_modules/react-loadable/lib/index.js"),gi=a.n(mi);const fi=l.memo((()=>hi||(hi=(0,P.jsx)("div",{className:"preloader",children:(0,P.jsx)(f.LoadingPlaceholder,{text:"Loading..."})}))));function bi(){const e=(0,rn.TH)();return[new URLSearchParams(e.search),(e,t)=>{m.locationService.partial(e,t)}]}var vi,xi,yi,wi,ji;fi.displayName="LoadingChunkPlaceHolder";const Ci=(0,f.stylesFactory)((()=>A.css`
    width: 508px;
    margin: 128px auto;
  `)),ki=e=>{let{error:t}=e;const[a,s]=bi();return a.get("chunkNotFound")||(s({chunkNotFound:!0},!0),window.location.reload()),(0,P.jsxs)("div",{className:Ci(),children:[vi||(vi=(0,P.jsx)("h2",{children:"Unable to find application file"})),xi||(xi=(0,P.jsx)("br",{})),yi||(yi=(0,P.jsx)("h2",{className:"page-heading",children:"Grafana has likely been updated. Please try reloading the page."})),wi||(wi=(0,P.jsx)("br",{})),(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsx)(f.Button,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload(),children:"Reload"})}),(0,P.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[t&&t.message?t.message:"Unexpected error occurred",ji||(ji=(0,P.jsx)("br",{})),t&&t.stack?t.stack:null]})]})};var Si;ki.displayName="ErrorLoadingChunk";const Ti=e=>{const{error:t,pastDelay:a}=e;return t?(0,P.jsx)(ki,{error:t}):a?Si||(Si=(0,P.jsx)(fi,{})):null},Oi=e=>gi()({loader:e,loading:Ti});var _i,Ni,Ii,Pi,Mi,Fi;class Ai extends l.PureComponent{render(){const{navModel:e}=this.props;return(0,P.jsx)(cn.Z,{navModel:e,children:(0,P.jsx)(cn.Z.Contents,{children:(0,P.jsx)("div",{className:"page-container page-body",children:(0,P.jsxs)("div",{className:"panel-container error-container",children:[_i||(_i=(0,P.jsx)("div",{className:"error-column graph-box",children:(0,P.jsxs)("div",{className:"error-row",children:[(0,P.jsxs)("div",{className:"error-column error-space-between graph-percentage",children:[(0,P.jsx)("p",{children:"100%"}),(0,P.jsx)("p",{children:"80%"}),(0,P.jsx)("p",{children:"60%"}),(0,P.jsx)("p",{children:"40%"}),(0,P.jsx)("p",{children:"20%"}),(0,P.jsx)("p",{children:"0%"})]}),(0,P.jsxs)("div",{className:"error-column image-box",children:[(0,P.jsx)("img",{src:"public/img/graph404.svg",width:"100%",alt:"graph"}),(0,P.jsxs)("div",{className:"error-row error-space-between",children:[(0,P.jsx)("p",{className:"graph-text",children:"Then"}),(0,P.jsx)("p",{className:"graph-text",children:"Now"})]})]})]})})),(0,P.jsxs)("div",{className:"error-column info-box",children:[Ni||(Ni=(0,P.jsx)("div",{className:"error-row current-box",children:(0,P.jsx)("p",{className:"current-text",children:"current"})})),(0,P.jsxs)("div",{className:"error-row",style:{flex:1},children:[Ii||(Ii=(0,P.jsx)(f.Icon,{name:"minus-circle",className:"error-minus"})),(0,P.jsxs)("div",{className:"error-column error-space-between error-full-width",children:[Pi||(Pi=(0,P.jsxs)("div",{className:"error-row error-space-between",children:[(0,P.jsx)("p",{children:"Chances you are on the page you are looking for."}),(0,P.jsx)("p",{className:"left-margin",children:"0%"})]})),(0,P.jsxs)("div",{children:[Mi||(Mi=(0,P.jsx)("h3",{children:"Sorry for the inconvenience"})),(0,P.jsxs)("p",{children:["Please go back to your"," ",(0,P.jsx)("a",{href:m.config.appSubUrl,className:"error-link",children:"home dashboard"})," ","and try again."]}),Fi||(Fi=(0,P.jsxs)("p",{children:["If the error persists, seek help on the"," ",(0,P.jsx)("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"error-link",children:"community site"}),"."]}))]})]})]})]})]})})})})}}const Di=(0,on.connect)((e=>({navModel:(0,ln.h)(e.navIndex,"not-found")})))(Ai);var $i=a("./public/app/features/plugins/admin/permissions.ts"),Li=a("./public/app/features/plugins/admin/types.ts");const Ri=[{path:"/plugins",routeName:Li.cd.Home,component:Oi((()=>a.e(94).then(a.bind(a,"./public/app/features/plugins/admin/pages/Browse.tsx"))))},{path:"/plugins/browse",routeName:Li.cd.Browse,component:Oi((()=>a.e(94).then(a.bind(a,"./public/app/features/plugins/admin/pages/Browse.tsx"))))},{path:"/plugins/:pluginId/",routeName:Li.cd.Details,component:Oi((()=>Promise.all([a.e(8917),a.e(2417)]).then(a.bind(a,"./public/app/features/plugins/admin/pages/PluginDetails.tsx"))))}],Ei=[{path:"/admin/plugins",routeName:Li.cd.HomeAdmin,component:Oi((()=>a.e(94).then(a.bind(a,"./public/app/features/plugins/admin/pages/Browse.tsx"))))},{path:"/admin/plugins/browse",routeName:Li.cd.BrowseAdmin,component:Oi((()=>a.e(94).then(a.bind(a,"./public/app/features/plugins/admin/pages/Browse.tsx"))))},{path:"/admin/plugins/:pluginId/",routeName:Li.cd.DetailsAdmin,component:Oi((()=>Promise.all([a.e(8917),a.e(2417)]).then(a.bind(a,"./public/app/features/plugins/admin/pages/PluginDetails.tsx"))))}];const zi=[{path:"/live",component:Oi((()=>a.e(2120).then(a.bind(a,"./public/app/features/live/pages/LiveStatusPage.tsx"))))},{path:"/live/pipeline",component:Oi((()=>a.e(2651).then(a.bind(a,"./public/app/features/live/pages/PipelineAdminPage.tsx"))))},{path:"/live/cloud",component:Oi((()=>a.e(5310).then(a.bind(a,"./public/app/features/live/pages/CloudAdminPage.tsx"))))}];function Vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.vc;return(0,$i.bO)()?e.featureToggles["live-pipeline"]?zi:zi.map((e=>Object.assign({},e,{component:Oi((()=>a.e(7586).then(a.bind(a,"./public/app/features/live/pages/FeatureTogglePage.tsx"))))}))):[]}var Bi;const Ui=[{path:"/alerting",component:()=>Bi||(Bi=(0,P.jsx)(rn.l_,{to:"/alerting/list"}))}],Hi=[...Ui,{path:"/alerting/list",component:Oi((()=>Promise.all([a.e(3706),a.e(4282),a.e(2461)]).then(a.bind(a,"./public/app/features/alerting/AlertRuleList.tsx"))))},{path:"/alerting/ng/list",component:Oi((()=>a.e(4286).then(a.bind(a,"./public/app/features/alerting/AlertRuleList.tsx"))))},{path:"/alerting/notifications",roles:c.vc.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:Oi((()=>a.e(6618).then(a.bind(a,"./public/app/features/alerting/NotificationsListPage.tsx"))))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:Oi((()=>a.e(6618).then(a.bind(a,"./public/app/features/alerting/NotificationsListPage.tsx"))))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:Oi((()=>a.e(6618).then(a.bind(a,"./public/app/features/alerting/NotificationsListPage.tsx"))))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:Oi((()=>a.e(6618).then(a.bind(a,"./public/app/features/alerting/NotificationsListPage.tsx"))))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:Oi((()=>a.e(6618).then(a.bind(a,"./public/app/features/alerting/NotificationsListPage.tsx"))))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:Oi((()=>a.e(6618).then(a.bind(a,"./public/app/features/alerting/NotificationsListPage.tsx"))))},{path:"/alerting/notification/new",component:Oi((()=>a.e(476).then(a.bind(a,"./public/app/features/alerting/NewNotificationChannelPage.tsx"))))},{path:"/alerting/notification/:id/edit",component:Oi((()=>a.e(7384).then(a.bind(a,"./public/app/features/alerting/EditNotificationChannelPage.tsx"))))}],qi=[...Ui,{path:"/alerting/list",component:Oi((()=>Promise.all([a.e(3706),a.e(4282),a.e(2461)]).then(a.bind(a,"./public/app/features/alerting/unified/RuleList.tsx"))))},{path:"/alerting/routes",roles:()=>["Admin","Editor"],component:Oi((()=>a.e(8648).then(a.bind(a,"./public/app/features/alerting/unified/AmRoutes.tsx"))))},{path:"/alerting/routes/mute-timing/new",roles:()=>["Admin","Editor"],component:Oi((()=>a.e(9355).then(a.bind(a,"./public/app/features/alerting/unified/MuteTimings.tsx"))))},{path:"/alerting/routes/mute-timing/edit",roles:()=>["Admin","Editor"],component:Oi((()=>a.e(9355).then(a.bind(a,"./public/app/features/alerting/unified/MuteTimings.tsx"))))},{path:"/alerting/silences",component:Oi((()=>a.e(1783).then(a.bind(a,"./public/app/features/alerting/unified/Silences.tsx"))))},{path:"/alerting/silence/new",roles:()=>["Editor","Admin"],component:Oi((()=>a.e(1783).then(a.bind(a,"./public/app/features/alerting/unified/Silences.tsx"))))},{path:"/alerting/silence/:id/edit",roles:()=>["Editor","Admin"],component:Oi((()=>a.e(1783).then(a.bind(a,"./public/app/features/alerting/unified/Silences.tsx"))))},{path:"/alerting/notifications",roles:c.vc.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:Oi((()=>a.e(6618).then(a.bind(a,"./public/app/features/alerting/unified/Receivers.tsx"))))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:Oi((()=>a.e(6618).then(a.bind(a,"./public/app/features/alerting/unified/Receivers.tsx"))))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:Oi((()=>a.e(6618).then(a.bind(a,"./public/app/features/alerting/unified/Receivers.tsx"))))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:Oi((()=>a.e(6618).then(a.bind(a,"./public/app/features/alerting/unified/Receivers.tsx"))))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:Oi((()=>a.e(6618).then(a.bind(a,"./public/app/features/alerting/unified/Receivers.tsx"))))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:Oi((()=>a.e(6618).then(a.bind(a,"./public/app/features/alerting/unified/Receivers.tsx"))))},{path:"/alerting/groups/",component:Oi((()=>a.e(2415).then(a.bind(a,"./public/app/features/alerting/unified/AlertGroups.tsx"))))},{path:"/alerting/new",pageClass:"page-alerting",component:Oi((()=>a.e(5372).then(a.bind(a,"./public/app/features/alerting/unified/RuleEditor.tsx"))))},{path:"/alerting/:id/edit",pageClass:"page-alerting",component:Oi((()=>a.e(5372).then(a.bind(a,"./public/app/features/alerting/unified/RuleEditor.tsx"))))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",component:Oi((()=>Promise.all([a.e(3706),a.e(4282),a.e(4679)]).then(a.bind(a,"./public/app/features/alerting/unified/RuleViewer.tsx"))))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",component:Oi((()=>a.e(7918).then(a.bind(a,"./public/app/features/alerting/unified/RedirectToRuleViewer.tsx"))))},{path:"/alerting/admin",roles:()=>["Admin"],component:Oi((()=>a.e(7680).then(a.bind(a,"./public/app/features/alerting/unified/Admin.tsx"))))}];function Wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.vc;if(e.unifiedAlertingEnabled)return qi;if(e.alertingEnabled)return Hi;const t=(0,r.uniq)([...Hi,...qi].map((e=>e.path)));return t.map((e=>({path:e,component:Oi((()=>a.e(1450).then(a.bind(a,"./public/app/features/alerting/FeatureTogglePage.tsx"))))})))}var Gi,Zi,Qi,Ki,Yi;function Ji(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Xi(e){let{serviceaccount:t,onServiceAccountUpdate:a,onServiceAccountDelete:s,onServiceAccountDisable:n,onServiceAccountEnable:r}=e;const[i,o]=(0,l.useState)(!1),[d,u]=(0,l.useState)(!1),p=(0,l.useRef)(null),h=e=>()=>{o(e),!e&&p.current&&p.current.focus()},m=(0,l.useRef)(null),g=e=>()=>{u(e),!e&&m.current&&m.current.focus()},b=eo(c.vc.theme);return(0,P.jsxs)(P.Fragment,{children:[Gi||(Gi=(0,P.jsx)("h3",{className:"page-heading",children:"Service account information"})),(0,P.jsxs)("div",{className:"gf-form-group",children:[(0,P.jsx)("div",{className:"gf-form",children:(0,P.jsx)("table",{className:"filter-table form-inline",children:(0,P.jsxs)("tbody",{children:[(0,P.jsx)(to,{label:"Display Name",value:t.name,onChange:e=>{a(Object.assign({},t,{name:e}))}}),(0,P.jsx)(to,{label:"ID",value:t.login}),Zi||(Zi=(0,P.jsx)(to,{label:"Roles",value:"WIP"})),Qi||(Qi=(0,P.jsx)(to,{label:"Teams",value:"WIP"})),Ki||(Ki=(0,P.jsx)(to,{label:"Created by",value:"WIP"})),Yi||(Yi=(0,P.jsx)(to,{label:"Creation date",value:"WIP"}))]})})}),(0,P.jsxs)("div",{className:b.buttonRow,children:[(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(f.Button,{variant:"destructive",onClick:h(!0),ref:p,children:"Delete service account"}),(0,P.jsx)(f.ConfirmModal,{isOpen:i,title:"Delete serviceaccount",body:"Are you sure you want to delete this serviceaccount?",confirmText:"Delete serviceaccount",onConfirm:()=>s(t.userId),onDismiss:h(!1)})]}),(0,P.jsx)(f.Button,{variant:"secondary",onClick:()=>r(t.userId),children:"Enable service account"}),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(f.Button,{variant:"secondary",onClick:g(!0),ref:m,children:"Disable service account"}),(0,P.jsx)(f.ConfirmModal,{isOpen:d,title:"Disable serviceaccount",body:"Are you sure you want to disable this serviceaccount?",confirmText:"Disable serviceaccount",onConfirm:()=>n(t.userId),onDismiss:g(!1)})]})]})]})]})}const eo=(0,f.stylesFactory)((e=>({buttonRow:A.css`
      margin-top: 0.8rem;
      > * {
        margin-right: 16px;
      }
    `})));class to extends l.PureComponent{constructor(){super(...arguments),Ji(this,"inputElem",void 0),Ji(this,"state",{editing:!1,value:this.props.value||""}),Ji(this,"setInputElem",(e=>{this.inputElem=e})),Ji(this,"onEditClick",(()=>{this.setState({editing:!0},this.focusInput)})),Ji(this,"onCancelClick",(()=>{this.setState({editing:!1,value:this.props.value||""})})),Ji(this,"onInputChange",((e,t)=>{t!==f.LegacyInputStatus.Invalid&&this.setState({value:e.target.value})})),Ji(this,"onInputBlur",((e,t)=>{t!==f.LegacyInputStatus.Invalid&&this.setState({value:e.target.value})})),Ji(this,"focusInput",(()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()})),Ji(this,"onSave",(()=>{this.props.onChange&&this.props.onChange(this.state.value)}))}render(){const{label:e,inputType:t}=this.props,{value:a}=this.state,s=(0,A.cx)("width-16",A.css`
        font-weight: 500;
      `),n=`${e}-input`;return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{className:s,children:(0,P.jsx)("label",{htmlFor:n,children:e})}),(0,P.jsx)("td",{className:"width-25",colSpan:2,children:this.state.editing?(0,P.jsx)(f.Input,{id:n,type:t,defaultValue:a,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):(0,P.jsx)("span",{children:this.props.value})}),(0,P.jsx)("td",{children:(0,P.jsx)(f.ConfirmButton,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick,children:"Edit"})})]})}}Ji(to,"defaultProps",{value:"",inputType:"text"});var ao=a("./public/app/features/serviceaccounts/state/actions.ts");class so extends l.PureComponent{async componentDidMount(){const{match:e}=this.props;this.props.loadServiceAccount(parseInt(e.params.id,10))}render(){const{navModel:e,serviceAccount:t,isLoading:a}=this.props;return(0,P.jsx)(cn.Z,{navModel:e,children:(0,P.jsx)(cn.Z.Contents,{isLoading:a,children:t&&(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(Xi,{serviceaccount:t,onServiceAccountDelete:()=>{console.log("not implemented")},onServiceAccountUpdate:()=>{console.log("not implemented")},onServiceAccountDisable:()=>{console.log("not implemented")},onServiceAccountEnable:()=>{console.log("not implemented")}})})})})}}const no={loadServiceAccount:ao.q$},ro=(0,on.connect)((function(e){return{navModel:(0,ln.h)(e.navIndex,"serviceaccounts"),serviceAccount:e.serviceAccountProfile.serviceAccount,isLoading:e.serviceAccountProfile.isLoading}}),no)(so);var io,oo,lo;const co=[];var uo=a("./public/app/core/utils/ConfigProvider.tsx"),po=a("./public/app/types/events.ts"),ho=a("./public/app/core/app_events.ts"),mo=a("./public/app/core/components/Footer/Footer.tsx"),go=a("./public/app/core/components/help/HelpModal.tsx");const fo="search",bo=(e,t,a)=>{const{isSignedIn:s,user:n}=g.Vt,r=()=>{ho.Z.publish(new po.Dn({component:go.B}))};if(n&&n.orgCount>1){const t=e.find((e=>"profile"===e.id));t&&(t.showOrgSwitcher=!0,t.subTitle=`Current Org.: ${null==n?void 0:n.orgName}`)}if(!s){const a=(e=>{const t=new URLSearchParams(e.split("?")[1]);return t.append("forceLogin","true"),`${(0,c.iE)().appSubUrl}${e.split("?")[0]}?${t.toString()}`})(t.pathname+t.search);e.unshift({icon:"signout",id:"signin",section:d.NavSection.Config,target:"_self",text:"Sign in",url:a})}return e.forEach(((e,t)=>{let s=e.children||[];"help"===e.id&&(e.children=[...(0,mo.dP)(),{text:"Keyboard shortcuts",icon:"keyboard",onClick:r}]),e.showOrgSwitcher&&(e.children=[...s,{text:"Switch organization",icon:"arrow-random",onClick:a}])})),e},vo=(e,t)=>{var a;return Boolean(e===t||(null===(a=e.children)||void 0===a?void 0:a.some((e=>e===t))))},xo=e=>{var t;return null!==(t=null==e?void 0:e.split("?")[0])&&void 0!==t?t:""},yo=(e,t)=>{const a=xo(null==t?void 0:t.url),s=xo(e.url);return s&&s.length>(null==a?void 0:a.length)},wo=(e,t,a)=>{const s=(0,c.iE)().featureToggles.newNavigation?"/dashboards":"/";for(const r of e){var n;const e=xo(r.url);if(e){if(e===t){a=r;break}if("/"!==e&&t.startsWith(e))yo(r,a)&&(a=r);else{if("/alerting/list"===e&&t.startsWith("/alerting/notification/")){a=r;break}e===s&&t.startsWith("/d/")&&yo(r,a)&&(a=r)}}if(r.children&&(a=wo(r.children,t,a)),xo(null===(n=a)||void 0===n?void 0:n.url)===t)return a}return a},jo=e=>"open"===new URLSearchParams(e.search).get("search");function Co(e){var t;return null!==(t=e.id)&&void 0!==t?t:e.text}var ko,So;function To(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Oo extends l.PureComponent{constructor(){super(...arguments),To(this,"state",{orgs:[]}),To(this,"getUserOrgs",(async()=>{const e=await(0,m.getBackendSrv)().get("/api/user/orgs");this.setState({orgs:e})})),To(this,"setCurrentOrg",(async e=>{await(0,m.getBackendSrv)().post(`/api/user/using/${e.orgId}`),this.setWindowLocation(`${c.ZP.appSubUrl}${c.ZP.appSubUrl.endsWith("/")?"":"/"}?orgId=${e.orgId}`)}))}componentDidMount(){this.getUserOrgs()}setWindowLocation(e){window.location.href=e}render(){const{onDismiss:e}=this.props,{orgs:t}=this.state,a=g.Vt.user.orgId,s=(0,A.css)({display:"flex",maxHeight:"calc(85vh - 42px)"});return(0,P.jsx)(f.Modal,{title:"Switch Organization",icon:"arrow-random",onDismiss:e,isOpen:!0,contentClassName:s,children:(0,P.jsx)(f.CustomScrollbar,{autoHeightMin:"100%",children:(0,P.jsxs)("table",{className:"filter-table form-inline",children:[ko||(ko=(0,P.jsx)("thead",{children:(0,P.jsxs)("tr",{children:[(0,P.jsx)("th",{children:"Name"}),(0,P.jsx)("th",{children:"Role"}),(0,P.jsx)("th",{})]})})),(0,P.jsx)("tbody",{children:t.map((e=>(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:e.name}),(0,P.jsx)("td",{children:e.role}),(0,P.jsx)("td",{className:"text-right",children:e.orgId===a?So||(So=(0,P.jsx)(f.Button,{size:"sm",children:"Current"})):(0,P.jsx)(f.Button,{variant:"secondary",size:"sm",onClick:()=>this.setCurrentOrg(e),children:"Switch to"})})]},e.orgId)))})]})})})}}var _o=a("./.yarn/__virtual__/@react-stately-collections-virtual-abf2d9bca4/3/opt/drone/yarncache/@react-stately-collections-npm-3.3.4-b53f8215ae-6bb6af113c.zip/node_modules/@react-stately/collections/dist/module.js");function No(e){let{icon:t,isActive:a,isDivider:s,onClick:n,styleOverrides:r,target:i,text:o,url:l,isMobile:c=!1}=e;const d=(0,f.useTheme2)(),u=Io(d,a,r),p=(0,P.jsxs)("div",{className:u.linkContent,children:[(0,P.jsxs)("div",{children:[t&&(0,P.jsx)(f.Icon,{"data-testid":"dropdown-child-icon",name:t,className:u.icon}),o]}),"_blank"===i&&(0,P.jsx)(f.Icon,{"data-testid":"external-link-icon",name:"external-link-alt",className:u.externalLinkIcon})]});let h=(0,P.jsx)("button",{className:u.element,onClick:n,tabIndex:-1,children:p});return l&&(h=!i&&l.startsWith("/")?(0,P.jsx)(f.Link,{className:u.element,href:l,target:i,onClick:n,tabIndex:c?0:-1,children:p}):(0,P.jsx)("a",{href:l,target:i,className:u.element,onClick:n,tabIndex:c?0:-1,children:p})),c?s?(0,P.jsx)("li",{"data-testid":"dropdown-child-divider",className:u.divider,tabIndex:-1,"aria-disabled":!0}):(0,P.jsx)("li",{children:h}):s?(0,P.jsx)("div",{"data-testid":"dropdown-child-divider",className:u.divider,tabIndex:-1,"aria-disabled":!0}):(0,P.jsx)(P.Fragment,{children:h})}No.displayName="NavBarMenuItem";const Io=(e,t,a)=>({divider:A.css`
    border-bottom: 1px solid ${e.colors.border.weak};
    height: 1px;
    margin: ${e.spacing(1)} 0;
    overflow: hidden;
  `,element:A.css`
    align-items: center;
    background: none;
    border: none;
    color: ${t?e.colors.text.primary:e.colors.text.secondary};
    display: flex;
    font-size: inherit;
    height: 100%;
    padding: 5px 12px 5px 10px;
    position: relative;
    text-align: left;
    white-space: nowrap;
    width: 100%;

    &:hover,
    &:focus-visible {
      background-color: ${e.colors.action.hover};
      color: ${e.colors.text.primary};
    }

    &:focus-visible {
      box-shadow: none;
      outline: 2px solid ${e.colors.primary.main};
      outline-offset: -2px;
      transition: none;
    }

    &::before {
      display: ${t?"block":"none"};
      content: ' ';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      border-radius: 2px;
      background-image: ${e.colors.gradients.brandVertical};
    }

    ${a};
  `,externalLinkIcon:A.css`
    color: ${e.colors.text.secondary};
    margin-left: ${e.spacing(1)};
  `,icon:A.css`
    margin-right: ${e.spacing(1)};
  `,linkContent:A.css`
    display: flex;
    flex: 1;
    flex-direction: row;
    justify-content: space-between;
  `}),Po=e=>{let{children:t}=e;const a=(0,f.useStyles2)(Mo);return(0,P.jsxs)("div",{children:[t,(0,P.jsx)("span",{className:a.highlight})]})},Mo=e=>({highlight:A.css`
      background-color: ${e.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function Fo(e){let{label:t,children:a,className:s,url:n,target:r,isActive:i=!1,onClick:o,highlightText:l}=e;const c=Ao((0,f.useTheme2)(),i),d=l?(0,P.jsx)(Po,{children:(0,P.jsx)("span",{className:c.icon,children:a})}):(0,P.jsx)("span",{className:c.icon,children:a});return(0,P.jsxs)("li",{className:(0,A.cx)(c.container,s),children:[!n&&(0,P.jsx)("button",{className:c.element,onClick:o,"aria-label":t,children:d}),n&&(0,P.jsx)(P.Fragment,{children:!r&&n.startsWith("/")?(0,P.jsx)(f.Link,{className:c.element,href:n,target:r,"aria-label":t,onClick:o,"aria-haspopup":"true",children:d}):(0,P.jsx)("a",{href:n,target:r,className:c.element,onClick:o,"aria-label":t,children:d})})]})}function Ao(e,t){return{container:A.css`
      position: relative;
      color: ${t?e.colors.text.primary:e.colors.text.secondary};

      &:hover {
        background-color: ${e.colors.action.hover};
        color: ${e.colors.text.primary};

        // TODO don't use a hardcoded class here, use isVisible in NavBarDropdown
        .navbar-dropdown {
          opacity: 1;
          visibility: visible;
        }
      }
    `,element:A.css`
      background-color: transparent;
      border: none;
      color: inherit;
      display: block;
      line-height: ${e.components.sidemenu.width}px;
      padding: 0;
      text-align: center;
      width: ${e.components.sidemenu.width}px;

      &::before {
        display: ${t?"block":"none"};
        content: ' ';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 4px;
        border-radius: 2px;
        background-image: ${e.colors.gradients.brandVertical};
      }

      &:focus-visible {
        background-color: ${e.colors.action.hover};
        box-shadow: none;
        color: ${e.colors.text.primary};
        outline: 2px solid ${e.colors.primary.main};
        outline-offset: -2px;
        transition: none;
      }
    `,icon:A.css`
      height: 100%;
      width: 100%;

      img {
        border-radius: 50%;
        height: ${e.spacing(3)};
        width: ${e.spacing(3)};
      }
    `}}var Do=a("./.yarn/__virtual__/@react-stately-menu-virtual-620edadc79/3/opt/drone/yarncache/@react-stately-menu-npm-3.2.3-01bbc6859e-4950f40881.zip/node_modules/@react-stately/menu/dist/module.js"),$o=a("./.yarn/__virtual__/@react-aria-menu-virtual-ef252193f9/3/opt/drone/yarncache/@react-aria-menu-npm-3.3.0-483609e77b-f4ff3fd23f.zip/node_modules/@react-aria/menu/dist/module.js"),Lo=a("./.yarn/__virtual__/@react-aria-interactions-virtual-dc1f2ea02b/3/opt/drone/yarncache/@react-aria-interactions-npm-3.7.0-1cda1c0b9a-d1f5d07b78.zip/node_modules/@react-aria/interactions/dist/module.js"),Ro=a("./.yarn/__virtual__/@react-aria-button-virtual-45cb941004/3/opt/drone/yarncache/@react-aria-button-npm-3.3.4-1ae267b236-c67f2097bb.zip/node_modules/@react-aria/button/dist/module.js"),Eo=a("./.yarn/__virtual__/@react-aria-dialog-virtual-7978b78bbe/3/opt/drone/yarncache/@react-aria-dialog-npm-3.1.4-2a0ffc453b-968328a9b2.zip/node_modules/@react-aria/dialog/dist/module.js"),zo=a("./.yarn/__virtual__/@react-aria-overlays-virtual-66213eeb57/3/opt/drone/yarncache/@react-aria-overlays-npm-3.7.3-408f244e82-3fffe82df9.zip/node_modules/@react-aria/overlays/dist/module.js"),Vo=a("./.yarn/__virtual__/@react-aria-focus-virtual-d5af2f4276/3/opt/drone/yarncache/@react-aria-focus-npm-3.5.0-e819dae779-c03d4433bd.zip/node_modules/@react-aria/focus/dist/module.js");const Bo=(0,l.createContext)({menuHasFocus:!1,onClose:()=>{},onLeft:()=>{}});function Uo(){return(0,l.useContext)(Bo)}const Ho=["item","isActive","label","children"];function qo(e){const{item:t,isActive:a,label:s,children:n}=e,r=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Ho),[i,o]=(0,l.useState)(!1),c=(0,f.useTheme2)(),d=Wo(c,a),u=(0,Do.W)(Object.assign({},r)),p=l.useRef(null),{menuTriggerProps:h,menuProps:g}=(0,$o.u4)({},u,p);(0,l.useEffect)((()=>{t.highlightId&&(0,m.reportExperimentView)(`feature-highlights-${t.highlightId}-nav`,"test","")}),[t.highlightId]);const{hoverProps:b}=(0,Lo.XI)({onHoverChange:e=>{e?u.open():u.close()}}),{focusWithinProps:v}=(0,Lo.L_)({onFocusWithinChange:e=>{e&&u.open(),e||(u.close(),o(!1))}}),{keyboardProps:x}=(0,Lo.v5)({onKeyDown:e=>{if("ArrowRight"===e.key)u.isOpen||u.open(),o(!0)}}),{buttonProps:y}=(0,Ro.U)(h,p),w=t.highlightText?Po:l.Fragment,j=(0,P.jsx)(w,{children:(0,P.jsxs)("span",{className:d.icon,children:[(null==t?void 0:t.icon)&&(0,P.jsx)(f.Icon,{name:t.icon,size:"xl"}),(null==t?void 0:t.img)&&(0,P.jsx)("img",{src:t.img,alt:`${t.text} logo`})]})});let C=(0,P.jsx)("button",Object.assign({className:d.element},y,x,{ref:p,onClick:null==t?void 0:t.onClick,"aria-label":s,children:j}));null!=t&&t.url&&(C=!t.target&&t.url.startsWith("/")?(0,P.jsx)(f.Link,Object.assign({},y,x,{ref:p,href:t.url,target:t.target,onClick:null==t?void 0:t.onClick,className:d.element,"aria-label":s,children:j})):(0,P.jsx)("a",Object.assign({href:t.url,target:t.target,onClick:null==t?void 0:t.onClick},y,x,{ref:p,className:d.element,"aria-label":s,children:j})));const k=l.useRef(null),{dialogProps:S}=(0,Eo.R)({},k),{overlayProps:T}=(0,zo.Ir)({onClose:()=>u.close(),isOpen:u.isOpen,isDismissable:!0},k);return(0,P.jsxs)("div",Object.assign({className:(0,A.cx)(d.element,"dropdown")},v,b,{children:[C,u.isOpen&&(0,P.jsx)(Bo.Provider,{value:{menuProps:g,menuHasFocus:i,onClose:()=>u.close(),onLeft:()=>{var e;o(!1),null===(e=p.current)||void 0===e||e.focus()}},children:(0,P.jsx)(Vo.MT,{restoreFocus:!0,children:(0,P.jsxs)("div",Object.assign({},T,S,{ref:k,children:[(0,P.jsx)(zo.U4,{onDismiss:()=>u.close()}),n,(0,P.jsx)(zo.U4,{onDismiss:()=>u.close()})]}))})})]}))}const Wo=(e,t)=>({element:A.css`
    background-color: transparent;
    border: none;
    color: inherit;
    display: block;
    line-height: ${e.components.sidemenu.width}px;
    padding: 0;
    text-align: center;
    width: ${e.components.sidemenu.width}px;

    &::before {
      display: ${t?"block":"none"};
      content: ' ';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      border-radius: 2px;
      background-image: ${e.colors.gradients.brandVertical};
    }

    &:focus-visible {
      background-color: ${e.colors.action.hover};
      box-shadow: none;
      color: ${e.colors.text.primary};
      outline: 2px solid ${e.colors.primary.main};
      outline-offset: -2px;
      transition: none;
    }
  `,icon:A.css`
    height: 100%;
    width: 100%;

    img {
      border-radius: 50%;
      height: ${e.spacing(3)};
      width: ${e.spacing(3)};
    }
  `});var Go=a("./.yarn/__virtual__/@react-stately-tree-virtual-ece8293714/3/opt/drone/yarncache/@react-stately-tree-npm-3.2.0-275a245c7f-1cb26e4a6d.zip/node_modules/@react-stately/tree/dist/module.js"),Zo=a("./.yarn/__virtual__/@react-aria-utils-virtual-9e8b8a1554/3/opt/drone/yarncache/@react-aria-utils-npm-3.11.0-5084843b99-9ae1d8fdc0.zip/node_modules/@react-aria/utils/dist/module.js");function Qo(e){let{item:t,state:a,onNavigate:s}=e;const{onClose:n,onLeft:r}=Uo(),{key:i,rendered:o}=t,c=(0,l.useRef)(null),d=a.disabledKeys.has(i),[u,p]=(0,l.useState)(!1),{focusProps:h}=(0,Lo.KK)({onFocusChange:p,isDisabled:d}),m=function(e,t,a){let s="transparent";t?s=e.colors.action.hover:a&&(s=e.colors.background.secondary);return{menuItem:A.css`
      background-color: ${s};
      color: ${e.colors.text.primary};

      &:focus-visible {
        background-color: ${e.colors.action.hover};
        box-shadow: none;
        color: ${e.colors.text.primary};
        outline: 2px solid ${e.colors.primary.main};
        outline-offset: -2px;
        transition: none;
      }
    `,upgradeBoxContainer:A.css`
      padding: ${e.spacing(1)};
    `,upgradeBox:A.css`
      width: 300px;
    `}}((0,f.useTheme2)(),u,"section"===t.value.menuItemType);let{menuItemProps:g}=(0,$o.iX)({isDisabled:d,"aria-label":t["aria-label"],key:i,closeOnSelect:!0,onClose:n,onAction:()=>{s(t.value),n()}},a,c);const{keyboardProps:b}=(0,Lo.v5)({onKeyDown:e=>{"ArrowLeft"===e.key&&r(),e.continuePropagation()}});return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("li",Object.assign({},(0,Zo.dG)(g,h,b),{ref:c,className:m.menuItem,children:o}))})}const Ko=["reverseMenuDirection","adjustHeightForBorder","disabledKeys","onNavigate"];function Yo(e){const{reverseMenuDirection:t,disabledKeys:a,onNavigate:s}=e,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Ko),r=Uo(),i=Object.assign({},(0,Zo.dG)(r,n)),{menuHasFocus:o,menuProps:c={}}=r,u=function(e,t){return{menu:A.css`
      background-color: ${e.colors.background.primary};
      border: 1px solid ${e.components.panel.borderColor};
      bottom: ${t?0:"auto"};
      box-shadow: ${e.shadows.z3};
      display: flex;
      flex-direction: column;
      left: 100%;
      list-style: none;
      min-width: 140px;
      position: absolute;
      top: ${t?"auto":0};
      transition: ${e.transitions.create("opacity")};
      z-index: ${e.zIndex.sidemenu};
    `,subtitle:A.css`
      background-color: transparent;
      border-${t?"bottom":"top"}: 1px solid ${e.colors.border.weak};
      color: ${e.colors.text.secondary};
      font-size: ${e.typography.bodySmall.fontSize};
      font-weight: ${e.typography.bodySmall.fontWeight};
      padding: ${e.spacing(1)} ${e.spacing(2)} ${e.spacing(1)};
      text-align: left;
      white-space: nowrap;
    `}}((0,f.useTheme2)(),t),p=(0,Go.D)(Object.assign({},n,{disabledKeys:a})),h=(0,l.useRef)(null),{menuProps:m}=(0,$o.H9)(i,Object.assign({},p),h),g=[...p.collection],b=g.filter((e=>e.value.menuItemType===d.NavMenuItemType.Item)),v=g.find((e=>e.value.menuItemType===d.NavMenuItemType.Section));if((0,l.useEffect)((()=>{var e;o&&!p.selectionManager.isFocused?(p.selectionManager.setFocusedKey(null!==(e=null==v?void 0:v.key)&&void 0!==e?e:""),p.selectionManager.setFocused(!0)):o||(p.selectionManager.setFocused(!1),p.selectionManager.setFocusedKey(""),p.selectionManager.clearSelection())}),[o,p.selectionManager,t,null==v?void 0:v.key]),!v)return null;const x=v.value.subTitle,y=[(0,P.jsx)(Qo,{item:v,state:p,onNavigate:s},v.key),b.map((e=>(0,P.jsx)(Qo,{item:e,state:p,onNavigate:s},Co(e.value)))),x&&(0,P.jsx)("li",{className:u.subtitle,children:x},x)];return(0,P.jsx)("ul",Object.assign({className:u.menu,ref:h},(0,Zo.dG)(m,c),{tabIndex:o?0:-1,children:t?y.reverse():y}))}const Jo={home:{id:"nav.home",message:"Home"},create:{id:"nav.create",message:"Create"},"create-dashboard":{id:"nav.create-dashboard",message:"Dashboard"},folder:{id:"nav.create-folder",message:"Folder"},import:{id:"nav.create-import",message:"Import"},alert:{id:"nav.create-alert",message:"Alert rule"},dashboards:{id:"nav.dashboards",message:"Dashboards"},"manage-dashboards":{id:"nav.manage-dashboards",message:"Browse"},playlists:{id:"nav.playlists",message:"Playlists"},snapshots:{id:"nav.snapshots",message:"Snapshots"},"library-panels":{id:"nav.library-panels",message:"Library panels"},"new-dashboard":{id:"nav.new-dashboard",message:"New dashboard"},"new-folder":{id:"nav.new-folder",message:"New folder"},explore:{id:"nav.explore",message:"Explore"},alerting:{id:"nav.alerting",message:"Alerting"},"alert-list":{id:"nav.alerting-list",message:"Alert rules"},receivers:{id:"nav.alerting-receivers",message:"Contact points"},"am-routes":{id:"nav.alerting-am-routes",message:"Notification policies"},channels:{id:"nav.alerting-channels",message:"Notification channels"},silences:{id:"nav.alerting-silences",message:"Silences"},groups:{id:"nav.alerting-groups",message:"Groups"},"alerting-admin":{id:"nav.alerting-admin",message:"Admin"},cfg:{id:"nav.config",message:"Configuration"},datasources:{id:"nav.datasources",message:"Data sources"},users:{id:"nav.users",message:"Users"},teams:{id:"nav.teams",message:"Teams"},plugins:{id:"nav.plugins",message:"Plugins"},"org-settings":{id:"nav.org-settings",message:"Preferences"},apikeys:{id:"nav.api-keys",message:"API keys"},serviceaccounts:{id:"nav.service-accounts",message:"Service accounts"},live:{id:"nav.live",message:"Event streaming"},"live-status":{id:"nav.live-status",message:"Status"},"live-pipeline":{id:"nav.live-pipeline",message:"Pipeline"},"live-cloud":{id:"nav.live-cloud",message:"Cloud"},help:{id:"nav.help",message:"Help"},"profile-settings":{id:"nav.profile-settings",message:"Preferences"},"change-password":{id:"nav.change-password",message:"Change password"},"sign-out":{id:"nav.sign-out",message:"Sign out"}},Xo=e=>{var t;let{isActive:a=!1,children:s,className:n,reverseMenuDirection:r=!1,showMenu:i=!0,link:o}=e;const{i18n:l}=(0,fr.mV)(),c=(0,f.useTheme2)(),u=null!==(t=o.children)&&void 0!==t?t:[],p=(r?u.reverse():u).filter((e=>!e.hideFromMenu)).map((e=>Object.assign({},e,{menuItemType:d.NavMenuItemType.Item}))),h=0===p.length,g=el(c,h,a),b=Object.assign({},o,{children:p,menuItemType:d.NavMenuItemType.Section}),v=[b].concat(p),x=o.id&&Jo[o.id],y=x?l._(x):o.text;return i?(0,P.jsx)("li",{className:(0,A.cx)(g.container,n),children:(0,P.jsx)(qo,{item:b,isActive:a,label:y,children:(0,P.jsx)(Yo,{items:v,reverseMenuDirection:r,adjustHeightForBorder:h,disabledKeys:["divider","subtitle"],"aria-label":b.text,onNavigate:e=>{const{url:t,target:a,onClick:s}=e;t?!a&&t.startsWith("/")?m.locationService.push(d.locationUtil.stripBaseFromUrl(t)):window.open(t,a):null==s||s()},children:e=>{const t=e.id&&Jo[e.id],a=t?l._(t):e.text;return e.menuItemType===d.NavMenuItemType.Section?(0,P.jsx)(_o.ck,{textValue:e.text,children:(0,P.jsx)(No,{target:e.target,text:a,url:e.url,onClick:e.onClick,styleOverrides:g.header})},Co(e)):(0,P.jsx)(_o.ck,{textValue:e.text,children:(0,P.jsx)(No,{isDivider:e.divider,icon:e.icon,onClick:e.onClick,target:e.target,text:a,url:e.url,styleOverrides:g.item})},Co(e))}})})}):(0,P.jsx)(Fo,{label:o.text,className:n,isActive:a,url:o.url,onClick:o.onClick,target:o.target,highlightText:o.highlightText,children:s})},el=(e,t,a)=>Object.assign({},Ao(e,a),{header:A.css`
    color: ${e.colors.text.primary};
    height: ${e.components.sidemenu.width-(t?2:1)}px;
    font-size: ${e.typography.h4.fontSize};
    font-weight: ${e.typography.h4.fontWeight};
    padding: ${e.spacing(1)} ${e.spacing(2)};
    white-space: nowrap;
    width: 100%;
  `,item:A.css`
    color: ${e.colors.text.primary};
  `});function tl(e){let{children:t,className:a}=e;const s=Boolean(m.config.featureToggles.newNavigation),n=(0,f.useTheme2)(),r=al(n,s);return(0,P.jsx)("ul",{"data-testid":"navbar-section",className:(0,A.cx)(r.container,a),children:t})}const al=(e,t)=>({container:A.css`
    display: none;
    list-style: none;

    ${e.breakpoints.up("md")} {
      background-color: ${t?e.colors.background.primary:"inherit"};
      border: ${t?`1px solid ${e.components.panel.borderColor}`:"none"};
      border-radius: 2px;
      display: flex;
      flex-direction: inherit;
    }
  `});var sl;function nl(e){let{activeItem:t,navItems:a,onClose:s}=e;const n=(0,f.useTheme2)(),r=rl(n),i=(0,l.useRef)(null),{dialogProps:o}=(0,Eo.R)({},i),{overlayProps:c}=(0,zo.Ir)({isDismissable:!0,isOpen:!0,onClose:s},i);return(0,P.jsx)(Vo.MT,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,P.jsxs)("div",Object.assign({"data-testid":"navbarmenu",className:r.container,ref:i},c,o,{children:[(0,P.jsxs)("div",{className:r.header,children:[sl||(sl=(0,P.jsx)(f.Icon,{name:"bars",size:"xl"})),(0,P.jsx)(f.IconButton,{"aria-label":"Close navigation menu",name:"times",onClick:s,size:"xl",variant:"secondary"})]}),(0,P.jsx)("nav",{className:r.content,children:(0,P.jsx)(f.CustomScrollbar,{children:(0,P.jsx)("ul",{children:a.map(((e,a)=>{var n;return(0,P.jsxs)("div",{className:r.section,children:[(0,P.jsx)(No,{isActive:t===e,onClick:()=>{var t;null===(t=e.onClick)||void 0===t||t.call(e),s()},styleOverrides:r.sectionHeader,target:e.target,text:e.text,url:e.url,isMobile:!0}),null===(n=e.children)||void 0===n?void 0:n.map(((e,a)=>!e.divider&&(0,P.jsx)(No,{icon:e.icon,isActive:t===e,isDivider:e.divider,onClick:()=>{var t;null===(t=e.onClick)||void 0===t||t.call(e),s()},styleOverrides:r.item,target:e.target,text:e.text,url:e.url,isMobile:!0},a)))]},a)}))})})})]}))})}nl.displayName="NavBarMenu";const rl=e=>({container:A.css`
    background-color: ${e.colors.background.canvas};
    bottom: 0;
    display: flex;
    flex-direction: column;
    left: 0;
    min-width: 300px;
    position: fixed;
    right: 0;
    top: 0;

    ${e.breakpoints.up("md")} {
      border-right: 1px solid ${e.colors.border.weak};
      right: unset;
    }
  `,content:A.css`
    display: flex;
    flex-direction: column;
    overflow: auto;
  `,header:A.css`
    border-bottom: 1px solid ${e.colors.border.weak};
    display: flex;
    justify-content: space-between;
    padding: ${e.spacing(2)};
  `,item:A.css`
    padding: ${e.spacing(1)} ${e.spacing(2)};
  `,section:A.css`
    border-bottom: 1px solid ${e.colors.border.weak};
  `,sectionHeader:A.css`
    color: ${e.colors.text.primary};
    font-size: ${e.typography.h5.fontSize};
    padding: ${e.spacing(1)} ${e.spacing(2)};
  `});var il,ol,ll;const cl=c.ZP.appSubUrl||"/",dl={id:fo,onClick:()=>{m.locationService.partial({search:"open"})},text:"Search dashboards",icon:"search"},ul=(0,on.connect)((e=>({navBarTree:e.navBarTree})),{}),pl=l.memo((e=>{let{navBarTree:t}=e;const a=(0,f.useTheme2)(),s=ml(a),n=(0,rn.TH)(),i=new URLSearchParams(n.search).get("kiosk"),[o,c]=(0,l.useState)(!1),u=()=>{c(!o)},p=(0,r.cloneDeep)(t),h=p.filter((e=>e.section===d.NavSection.Core)),m=bo(p.filter((e=>e.section===d.NavSection.Config)),n,u),g=jo(n)?dl:wo(p,n.pathname),[b,v]=(0,l.useState)(!1);return null!==i?null:(0,P.jsxs)("nav",{className:(0,A.cx)(s.sidemenu,"sidemenu"),"data-testid":"sidemenu","aria-label":"Main menu",children:[(0,P.jsx)("div",{className:s.mobileSidemenuLogo,onClick:()=>v(!b),children:il||(il=(0,P.jsx)(f.Icon,{name:"bars",size:"xl"}))},"hamburger"),(0,P.jsxs)(tl,{children:[(0,P.jsx)(Fo,{label:"Home",className:s.grafanaLogo,url:cl,children:ol||(ol=(0,P.jsx)(ci.c.MenuLogo,{}))}),(0,P.jsx)(Xo,{className:s.search,isActive:g===dl,link:dl,children:ll||(ll=(0,P.jsx)(f.Icon,{name:"search",size:"xl"}))})]}),(0,P.jsx)(tl,{children:h.map(((e,t)=>(0,P.jsxs)(Xo,{isActive:vo(e,g),link:Object.assign({},e,{subTitle:void 0,onClick:void 0}),children:[e.icon&&(0,P.jsx)(f.Icon,{name:e.icon,size:"xl"}),e.img&&(0,P.jsx)("img",{src:e.img,alt:`${e.text} logo`})]},`${e.id}-${t}`)))}),(0,P.jsx)("div",{className:s.spacer}),(0,P.jsx)(tl,{children:m.map(((e,t)=>(0,P.jsxs)(Xo,{isActive:vo(e,g),reverseMenuDirection:!0,link:e,children:[e.icon&&(0,P.jsx)(f.Icon,{name:e.icon,size:"xl"}),e.img&&(0,P.jsx)("img",{src:e.img,alt:`${e.text} logo`})]},`${e.id}-${t}`)))}),o&&(0,P.jsx)(Oo,{onDismiss:u}),b&&(0,P.jsx)(nl,{activeItem:g,navItems:[dl,...h,...m],onClose:()=>v(!1)})]})}));pl.displayName="NavBar";const hl=ul(pl),ml=e=>({search:A.css`
    display: none;
    margin-top: ${e.spacing(5)};

    ${e.breakpoints.up("md")} {
      display: block;
    }
  `,sidemenu:A.css`
    display: flex;
    flex-direction: column;
    position: fixed;
    z-index: ${e.zIndex.sidemenu};

    ${e.breakpoints.up("md")} {
      background: ${e.colors.background.primary};
      border-right: 1px solid ${e.components.panel.borderColor};
      padding: 0 0 ${e.spacing(1)} 0;
      position: relative;
      width: ${e.components.sidemenu.width}px;
    }

    .sidemenu-hidden & {
      display: none;
    }
  `,grafanaLogo:A.css`
    display: none;
    img {
      height: ${e.spacing(3.5)};
      width: ${e.spacing(3.5)};
    }

    ${e.breakpoints.up("md")} {
      align-items: center;
      display: flex;
      justify-content: center;
    }
  `,mobileSidemenuLogo:A.css`
    align-items: center;
    cursor: pointer;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    padding: ${e.spacing(2)};

    ${e.breakpoints.up("md")} {
      display: none;
    }
  `,spacer:A.css`
    flex: 1;
  `});var gl,fl,bl;const vl={id:fo,onClick:()=>{m.locationService.partial({search:"open"})},text:"Search dashboards",icon:"search"},xl=(0,on.connect)((e=>({navBarTree:e.navBarTree})),{}),yl=l.memo((e=>{let{navBarTree:t}=e;const a=(0,f.useTheme2)(),s=jl(a),n=(0,rn.TH)(),i=new URLSearchParams(n.search).get("kiosk"),[o,c]=(0,l.useState)(!1),u=()=>{c(!o)},p=(0,r.cloneDeep)(t),h=p.filter((e=>e.section===d.NavSection.Core)),m=p.filter((e=>e.section===d.NavSection.Plugin)),g=bo(p.filter((e=>e.section===d.NavSection.Config)),n,u),b=jo(n)?vl:wo(p,n.pathname),[v,x]=(0,l.useState)(!1);return null!==i?null:(0,P.jsxs)("nav",{className:(0,A.cx)(s.sidemenu,"sidemenu"),"data-testid":"sidemenu","aria-label":"Main menu",children:[(0,P.jsx)("div",{className:s.mobileSidemenuLogo,onClick:()=>x(!v),children:gl||(gl=(0,P.jsx)(f.Icon,{name:"bars",size:"xl"}))},"hamburger"),(0,P.jsxs)(tl,{children:[(0,P.jsx)(Fo,{label:"Main menu",className:s.grafanaLogo,onClick:()=>x(!v),children:fl||(fl=(0,P.jsx)(ci.c.MenuLogo,{}))}),(0,P.jsx)(Xo,{className:s.search,isActive:b===vl,link:vl,children:bl||(bl=(0,P.jsx)(f.Icon,{name:"search",size:"xl"}))})]}),(0,P.jsx)(tl,{children:h.map(((e,t)=>(0,P.jsxs)(Xo,{isActive:vo(e,b),link:Object.assign({},e,{subTitle:void 0,onClick:void 0}),children:[e.icon&&(0,P.jsx)(f.Icon,{name:e.icon,size:"xl"}),e.img&&(0,P.jsx)("img",{src:e.img,alt:`${e.text} logo`})]},`${e.id}-${t}`)))}),m.length>0&&(0,P.jsx)(tl,{children:m.map(((e,t)=>(0,P.jsxs)(Xo,{isActive:vo(e,b),link:e,children:[e.icon&&(0,P.jsx)(f.Icon,{name:e.icon,size:"xl"}),e.img&&(0,P.jsx)("img",{src:e.img,alt:`${e.text} logo`})]},`${e.id}-${t}`)))}),(0,P.jsx)("div",{className:s.spacer}),(0,P.jsx)(tl,{children:g.map(((e,t)=>(0,P.jsxs)(Xo,{isActive:vo(e,b),reverseMenuDirection:!0,link:e,children:[e.icon&&(0,P.jsx)(f.Icon,{name:e.icon,size:"xl"}),e.img&&(0,P.jsx)("img",{src:e.img,alt:`${e.text} logo`})]},`${e.id}-${t}`)))}),o&&(0,P.jsx)(Oo,{onDismiss:u}),v&&(0,P.jsx)(nl,{activeItem:b,navItems:[vl,...h,...m,...g],onClose:()=>x(!1)})]})}));yl.displayName="NavBarNext";const wl=xl(yl),jl=e=>({search:A.css`
    display: none;
    margin-top: 0;

    ${e.breakpoints.up("md")} {
      display: block;
    }
  `,sidemenu:A.css`
    display: flex;
    flex-direction: column;
    position: fixed;
    z-index: ${e.zIndex.sidemenu};

    ${e.breakpoints.up("md")} {
      gap: ${e.spacing(1)};
      margin-left: ${e.spacing(1)};
      padding: ${e.spacing(1)} 0;
      position: relative;
      width: ${e.components.sidemenu.width}px;
    }

    .sidemenu-hidden & {
      display: none;
    }
  `,grafanaLogo:A.css`
    align-items: center;
    display: flex;
    img {
      height: ${e.spacing(3)};
      width: ${e.spacing(3)};
    }
    justify-content: center;
  `,mobileSidemenuLogo:A.css`
    align-items: center;
    cursor: pointer;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    padding: ${e.spacing(2)};

    ${e.breakpoints.up("md")} {
      display: none;
    }
  `,spacer:A.css`
    flex: 1;
  `});var Cl=a("../../opt/drone/yarncache/tether-drop-https-3382d2649f-a10a7337d5.zip/node_modules/tether-drop/dist/js/drop.js"),kl=a.n(Cl),Sl=a("./public/app/core/services/keybindingSrv.ts");class Tl extends l.Component{componentDidMount(){this.updateBodyClassNames(),this.cleanupDOM(),Sl.K.reset(),Sl.K.initGlobals(),(0,m.reportPageview)(),(0,m.navigationLogger)("GrafanaRoute",!1,"Mounted",this.props.match)}componentDidUpdate(e){this.cleanupDOM(),(0,m.reportPageview)(),(0,m.navigationLogger)("GrafanaRoute",!1,"Updated",this.props,e)}componentWillUnmount(){this.updateBodyClassNames(!0),(0,m.navigationLogger)("GrafanaRoute",!1,"Unmounted",this.props.route)}getPageClasses(){return this.props.route.pageClass?this.props.route.pageClass.split(" "):[]}updateBodyClassNames(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(const t of this.getPageClasses())e?document.body.classList.remove(t):document.body.classList.add(t)}cleanupDOM(){var e;document.body.classList.remove("sidemenu-open--xs");const t=document.getElementById("tooltip");null==t||null===(e=t.parentElement)||void 0===e||e.removeChild(t);const a=document.querySelectorAll(".tooltip");for(let e=0;e<a.length;e++){var s;const t=a[e];null===(s=t.parentElement)||void 0===s||s.removeChild(t)}for(const e of kl().drops)e.destroy()}render(){const{props:e}=this;(0,m.navigationLogger)("GrafanaRoute",!1,"Rendered",e.route);const t=e.route.component;return(0,P.jsx)(t,Object.assign({},e,{queryParams:(0,m.locationSearchToObject)(e.location.search)}))}}class Ol extends l.Component{shouldComponentUpdate(e){return this.props.appNotification.id!==e.appNotification.id}componentDidMount(){const{appNotification:e,onClearNotification:t}=this.props;setTimeout((()=>{t(e.id)}),e.timeout)}render(){const{appNotification:e,onClearNotification:t}=this.props;return(0,P.jsx)(f.Alert,{severity:e.severity,title:e.title,onRemove:()=>t(e.id),elevated:!0,children:e.component||e.text})}}var _l=a("./public/app/core/actions/index.ts"),Nl=a("./public/app/core/copy/appNotification.ts");const Il={notifyApp:_l.$l,clearAppNotification:_l.uY},Pl=(0,on.connect)(((e,t)=>({appNotifications:e.appNotifications.appNotifications})),Il);class Ml extends l.PureComponent{constructor(){var e,t,a;super(...arguments),a=e=>{this.props.clearAppNotification(e)},(t="onClearAppNotification")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}componentDidMount(){const{notifyApp:e}=this.props;ho.Z.on(d.AppEvents.alertWarning,(t=>e((0,Nl.ZR)(...t)))),ho.Z.on(d.AppEvents.alertSuccess,(t=>e((0,Nl.AT)(...t)))),ho.Z.on(d.AppEvents.alertError,(t=>e((0,Nl.t_)(...t))))}render(){const{appNotifications:e}=this.props;return(0,P.jsx)("div",{className:"page-alert-list",children:(0,P.jsx)(f.VerticalGroup,{children:e.map(((e,t)=>(0,P.jsx)(Ol,{appNotification:e,onClearNotification:e=>this.onClearAppNotification(e)},`${e.id}-${t}`)))})})}}const Fl=Pl(Ml);var Al=a("./public/app/features/search/components/SearchResults.tsx");const Dl=["query","onChange","size","clearable","className"];const $l=e=>({wrapper:A.css`
    width: 100%;
    display: flex;
    position: relative;
    align-items: center;
  `,input:A.css`
    box-sizing: border-box;
    outline: none;
    background-color: transparent;
    background: transparent;
    border-bottom: 2px solid ${e.colors.border1};
    font-size: 20px;
    line-height: 38px;
    width: 100%;

    &::placeholder {
      color: ${e.colors.textWeak};
    }
  `,spacer:A.css`
    flex-grow: 1;
  `,icon:(0,A.cx)(A.css`
      color: ${e.colors.textWeak};
      padding: 0 ${e.spacing.md};
    `),clearButton:A.css`
    font-size: ${e.typography.size.sm};
    color: ${e.colors.textWeak};
    text-decoration: underline;

    &:hover {
      cursor: pointer;
      color: ${e.colors.textStrong};
    }
  `}),Ll=e=>{let{query:t,onChange:a,className:s}=e,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,Dl);const r=(0,f.useStyles)($l);return(0,P.jsxs)("div",{className:(0,A.cx)(r.wrapper,s),children:[(0,P.jsx)("input",Object.assign({type:"text",placeholder:"Search dashboards by name",value:t.query,onChange:e=>{a(e.currentTarget.value)},tabIndex:0,spellCheck:!1,className:r.input},n)),(0,P.jsx)("div",{className:r.spacer})]})};a("./public/app/features/search/components/SearchItem.tsx"),a("./public/app/features/search/components/SearchCheckbox.tsx");var Rl=a("./public/app/features/search/hooks/useSearchQuery.ts"),El=a("./public/app/features/search/types.ts"),zl=a("./public/app/features/search/reducers/actionTypes.ts"),Vl=a("./public/app/features/search/reducers/dashboardSearch.ts"),Bl=a("./public/app/features/search/utils.ts"),Ul=a("./public/app/features/search/hooks/useSearch.ts"),Hl=a("./public/app/features/search/hooks/useShowDashboardPreviews.ts"),ql=a("./public/app/features/search/hooks/useManageDashboards.ts"),Wl=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useDebounce.js");var Gl=a("./public/app/features/search/components/ActionRow.tsx");const Zl=(0,l.memo)((e=>{let{onCloseSearch:t}=e;const{query:a,onQueryChange:s,onTagFilterChange:n,onTagAdd:r,onSortChange:i,onLayoutChange:o}=(0,Rl.A)({}),{results:c,loading:u,onToggleSection:p,onKeyDown:h,showPreviews:g,onShowPreviewsChange:b}=((e,t)=>{var a,s,n;const r=(0,l.useReducer)(Vl.f,Vl.o),{showPreviews:i,onShowPreviewsChange:o,previewFeatureEnabled:c}=(0,Hl.B)(),{state:{results:u,loading:p},onToggleSection:h,dispatch:g}=(0,Ul.R)(e,r,{queryParsing:!0});return(0,Wl.Z)((()=>{var t,a;(0,ql.Q)("dashboard_search",i,c,{layout:e.layout,starred:e.starred,sortValue:null===(t=e.sort)||void 0===t?void 0:t.value,query:e.query,tagCount:null===(a=e.tag)||void 0===a?void 0:a.length})}),1e3,[i,c,e.layout,e.starred,null===(a=e.sort)||void 0===a?void 0:a.value,null===(s=e.query)||void 0===s?void 0:s.length,null===(n=e.tag)||void 0===n?void 0:n.length]),{results:u,loading:p,onToggleSection:h,onKeyDown:e=>{switch(e.key){case"Escape":t();break;case"ArrowUp":g({type:zl.Nj});break;case"ArrowDown":g({type:zl.oe});break;case"Enter":const e=(0,Bl.xy)(u);e&&(e.type===El.o.DashFolder?h(e):(m.locationService.push(d.locationUtil.stripBaseFromUrl(e.url)),setTimeout(t,0)))}},showPreviews:i,onShowPreviewsChange:o}})(a,t),v=(0,f.useTheme2)(),x=Kl(v);return(0,P.jsx)("div",{tabIndex:0,className:x.overlay,children:(0,P.jsxs)("div",{className:x.container,children:[(0,P.jsxs)("div",{className:x.searchField,children:[(0,P.jsx)(Ll,{query:a,onChange:s,onKeyDown:h,autoFocus:!0,clearable:!0}),(0,P.jsx)("div",{className:x.closeBtn,children:(0,P.jsx)(f.IconButton,{name:"times",surface:"panel",onClick:t,size:"xxl",tooltip:"Close search"})})]}),(0,P.jsxs)("div",{className:x.search,children:[(0,P.jsx)(Gl.B,{onLayoutChange:o,onShowPreviewsChange:e=>b(e.target.checked),onSortChange:i,onTagFilterChange:n,query:a,showPreviews:g}),(0,P.jsx)(f.CustomScrollbar,{children:(0,P.jsx)(Al.s,{results:c,loading:u,onTagSelected:r,editable:!1,onToggleSection:p,layout:a.layout,showPreviews:g})})]})]})})}));Zl.displayName="DashboardSearch";const Ql=Zl,Kl=(0,f.stylesFactory)((e=>({overlay:A.css`
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      z-index: ${e.zIndex.sidemenu};
      position: fixed;
      background: ${e.colors.background.canvas};

      ${e.breakpoints.up("md")} {
        left: ${e.components.sidemenu.width}px;
        z-index: ${e.zIndex.navbarFixed+1};
      }
    `,container:A.css`
      max-width: 1400px;
      margin: 0 auto;
      padding: ${e.spacing(2)};

      height: 100%;

      ${e.breakpoints.up("md")} {
        padding: ${e.spacing(4)};
      }
    `,closeBtn:A.css`
      right: -5px;
      top: 2px;
      z-index: 1;
      position: absolute;
    `,searchField:A.css`
      position: relative;
    `,search:A.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      padding-bottom: ${e.spacing(3)};
    `})));var Yl=a("./public/app/features/search/reducers/searchQueryReducer.ts");const Jl=(0,l.memo)((()=>{const[e,t]=bi(),a="open"===e.get("search");return a?(0,P.jsx)(Ql,{onCloseSearch:()=>{a&&t(Object.assign({search:null,folder:null},Yl.xi))}}):null}));Jl.displayName="SearchWrapper";var Xl=a("./public/app/features/search/components/SearchResultsFilter.tsx");a("./public/app/features/search/components/ManageDashboards.tsx"),a("./public/app/features/search/components/ConfirmDeleteModal.tsx"),a("./public/app/features/search/components/MoveToFolderModal.tsx");function ec(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class tc extends l.PureComponent{constructor(){super(...arguments),ec(this,"subscription",void 0),ec(this,"styles",ac(m.config.theme2)),ec(this,"state",{}),ec(this,"initListener",(()=>{const e=(0,m.getGrafanaLiveSrv)();e&&(this.subscription=e.getConnectionState().subscribe({next:e=>{this.setState({show:!e})}}))}))}componentDidMount(){0}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:e}=this.state;return e&&g.Vt.isSignedIn&&m.config.liveEnabled&&""!==g.Vt.user.orgRole?(0,P.jsx)("div",{className:this.styles.foot,children:(0,P.jsx)(f.Alert,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})}):null}}const ac=(0,f.stylesFactory)((e=>({foot:A.css`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:A.css`
      border: 2px solid ${e.colors.warning.main};
      max-width: 400px;
      margin: auto;
      height: 3em;
    `}))),sc=l.forwardRef(((e,t)=>(0,P.jsx)("div",{id:"ngRoot",ref:t,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}})));sc.displayName="AngularRoot";var nc=a("../../opt/drone/yarncache/@lingui-core-npm-3.13.0-aa863e2651-6108eb43fa.zip/node_modules/@lingui/core/esm/index.js"),rc=a("./public/locales/en/messages.js");let ic;function oc(e){let{children:t}=e;const[a]=(0,l.useState)((()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";if(ic)return ic;nc.ag.load(e,rc.messages);if("Intl"in window&&"PluralRules"in Intl){const t=new Intl.PluralRules(e,{type:"ordinal"}),a=new Intl.PluralRules(e,{type:"cardinal"});nc.ag.loadLocaleData(e,{plurals:(e,s)=>(s?t:a).select(e)})}return nc.ag.activate(e),ic=nc.ag,ic}()));return(0,P.jsx)(fr.bd,{i18n:a,children:t})}var lc,cc,dc,uc,pc,hc,mc,gc;function fc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let bc=[],vc=[];class xc extends l.Component{constructor(e){super(e),fc(this,"container",l.createRef()),fc(this,"renderRoute",(e=>{const t=e.roles?e.roles():[];return(0,P.jsx)(rn.AW,{exact:void 0===e.exact||e.exact,path:e.path,render:a=>((0,m.navigationLogger)("AppWrapper",!1,"Rendering route",e,"with match",a.location),null!=t&&t.length&&!t.some((e=>g.Vt.hasRole(e)))?lc||(lc=(0,P.jsx)(rn.l_,{to:"/"})):(0,P.jsx)(Tl,Object.assign({},a,{route:e})))},e.path)})),this.state={ngInjector:null}}componentDidMount(){if(!this.container)throw new Error("Failed to boot angular app, no container to attach to");this.bootstrapNgApp()}bootstrapNgApp(){const e=this.props.app.angularApp.bootstrap();this.setState({ngInjector:e}),$(".preloader").remove()}renderRoutes(){return(0,P.jsx)(rn.rs,{children:[{path:"/",pageClass:"page-dashboard",routeName:dn.vq.Home,component:Oi((()=>Promise.all([a.e(3706),a.e(7849),a.e(4076),a.e(4282),a.e(69),a.e(8962),a.e(9718),a.e(1918),a.e(5296)]).then(a.bind(a,"./public/app/features/dashboard/containers/DashboardPage.tsx"))))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:dn.vq.Normal,component:Oi((()=>Promise.all([a.e(3706),a.e(7849),a.e(4076),a.e(4282),a.e(69),a.e(8962),a.e(9718),a.e(1918),a.e(5296)]).then(a.bind(a,"./public/app/features/dashboard/containers/DashboardPage.tsx"))))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:dn.vq.Normal,component:Oi((()=>Promise.all([a.e(3706),a.e(7849),a.e(4076),a.e(4282),a.e(69),a.e(8962),a.e(9718),a.e(1918),a.e(5296)]).then(a.bind(a,"./public/app/features/dashboard/containers/DashboardPage.tsx"))))},{path:"/dashboard/new",pageClass:"page-dashboard",routeName:dn.vq.New,component:Oi((()=>Promise.all([a.e(3706),a.e(7849),a.e(4076),a.e(4282),a.e(69),a.e(8962),a.e(9718),a.e(1918),a.e(5296)]).then(a.bind(a,"./public/app/features/dashboard/containers/DashboardPage.tsx"))))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:dn.vq.Normal,component:Oi((()=>Promise.all([a.e(8962),a.e(1034)]).then(a.bind(a,"./public/app/features/dashboard/containers/SoloPanelPage.tsx"))))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:dn.vq.Normal,component:Oi((()=>Promise.all([a.e(8962),a.e(1034)]).then(a.bind(a,"./public/app/features/dashboard/containers/SoloPanelPage.tsx"))))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:dn.vq.Normal,component:Oi((()=>Promise.all([a.e(8962),a.e(1034)]).then(a.bind(a,"./public/app/features/dashboard/containers/SoloPanelPage.tsx"))))},{path:"/dashboard/import",component:Oi((()=>a.e(8808).then(a.bind(a,"./public/app/features/manage-dashboards/DashboardImportPage.tsx"))))},{path:"/datasources",component:Oi((()=>Promise.all([a.e(8917),a.e(4620)]).then(a.bind(a,"./public/app/features/datasources/DataSourcesListPage.tsx"))))},{path:"/datasources/edit/:uid/",component:Oi((()=>Promise.all([a.e(8917),a.e(3959)]).then(a.bind(a,"./public/app/features/datasources/settings/DataSourceSettingsPage.tsx"))))},{path:"/datasources/edit/:uid/dashboards",component:Oi((()=>Promise.all([a.e(8917),a.e(2929)]).then(a.bind(a,"./public/app/features/datasources/DataSourceDashboards.tsx"))))},{path:"/datasources/new",component:Oi((()=>Promise.all([a.e(8917),a.e(4253)]).then(a.bind(a,"./public/app/features/datasources/NewDataSourcePage.tsx"))))},{path:"/dashboards",component:Oi((()=>a.e(4074).then(a.bind(a,"./public/app/features/search/components/DashboardListPage.tsx"))))},{path:"/dashboards/folder/new",component:Oi((()=>a.e(8932).then(a.bind(a,"./public/app/features/folders/components/NewDashboardsFolder.tsx"))))},{path:"/dashboards/f/:uid/:slug/permissions",component:Oi((()=>a.e(8431).then(a.bind(a,"./public/app/features/folders/FolderPermissions.tsx"))))},{path:"/dashboards/f/:uid/:slug/settings",component:Oi((()=>a.e(4827).then(a.bind(a,"./public/app/features/folders/FolderSettingsPage.tsx"))))},{path:"/dashboards/f/:uid/:slug",component:Oi((()=>a.e(4074).then(a.bind(a,"./public/app/features/search/components/DashboardListPage.tsx"))))},{path:"/dashboards/f/:uid",component:Oi((()=>a.e(4074).then(a.bind(a,"./public/app/features/search/components/DashboardListPage.tsx"))))},{path:"/explore",pageClass:"page-explore",roles:()=>g.Vt.evaluatePermission((()=>c.ZP.viewersCanEdit?[]:["Editor","Admin"]),[dn.bW.DataSourcesExplore]),component:Oi((()=>Promise.all([a.e(7849),a.e(4076),a.e(9718),a.e(9782)]).then(a.bind(a,"./public/app/features/explore/Wrapper.tsx"))))},{path:"/a/:pluginId/",exact:!1,component:Oi((()=>a.e(295).then(a.bind(a,"./public/app/features/plugins/components/AppRootPage.tsx"))))},{path:"/org",component:Oi((()=>a.e(529).then(a.bind(a,"./public/app/features/org/OrgDetailsPage.tsx"))))},{path:"/org/new",component:Oi((()=>a.e(950).then(a.bind(a,"./public/app/features/org/NewOrgPage.tsx"))))},{path:"/org/users",component:Oi((()=>a.e(8039).then(a.bind(a,"./public/app/features/users/UsersListPage.tsx"))))},{path:"/org/users/invite",component:Oi((()=>a.e(7707).then(a.bind(a,"./public/app/features/org/UserInvitePage.tsx"))))},{path:"/org/apikeys",roles:()=>["Editor","Admin"],component:Oi((()=>a.e(3082).then(a.bind(a,"./public/app/features/api-keys/ApiKeysPage.tsx"))))},{path:"/org/serviceaccounts",roles:()=>["Editor","Admin"],component:Oi((()=>a.e(1337).then(a.bind(a,"./public/app/features/serviceaccounts/ServiceAccountsListPage.tsx"))))},{path:"/org/serviceaccounts/:id",component:ro},{path:"/org/teams",roles:()=>g.Vt.evaluatePermission((()=>c.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"]),[dn.bW.ActionTeamsRead,dn.bW.ActionTeamsCreate]),component:Oi((()=>a.e(9671).then(a.bind(a,"./public/app/features/teams/TeamList.tsx"))))},{path:"/org/teams/new",roles:()=>g.Vt.evaluatePermission((()=>c.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"]),[dn.bW.ActionTeamsCreate]),component:Oi((()=>a.e(8715).then(a.bind(a,"./public/app/features/teams/CreateTeam.tsx"))))},{path:"/org/teams/edit/:id/:page?",roles:()=>g.Vt.evaluatePermission((()=>c.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"]),[dn.bW.ActionTeamsRead,dn.bW.ActionTeamsCreate]),component:Oi((()=>a.e(8612).then(a.bind(a,"./public/app/features/teams/TeamPages.tsx"))))},{path:"/profile",component:Oi((()=>a.e(7323).then(a.bind(a,"./public/app/features/profile/UserProfileEditPage.tsx"))))},{path:"/profile/password",component:Oi((()=>a.e(5982).then(a.bind(a,"./public/app/features/profile/ChangePasswordPage.tsx"))))},{path:"/profile/select-org",component:Oi((()=>a.e(1456).then(a.bind(a,"./public/app/features/org/SelectOrgPage.tsx"))))},{path:"/admin",component:()=>io||(io=(0,P.jsx)(rn.l_,{to:"/admin/users"}))},{path:"/admin/settings",component:Oi((()=>a.e(9603).then(a.bind(a,"./public/app/features/admin/AdminSettings.tsx"))))},{path:"/admin/upgrading",component:Oi((()=>a.e(15).then(a.bind(a,"./public/app/features/admin/UpgradePage.tsx"))))},{path:"/admin/users",component:Oi((()=>a.e(8580).then(a.bind(a,"./public/app/features/admin/UserListAdminPage.tsx"))))},{path:"/admin/users/create",component:Oi((()=>a.e(2508).then(a.bind(a,"./public/app/features/admin/UserCreatePage.tsx"))))},{path:"/admin/users/edit/:id",component:Qr},{path:"/admin/orgs",component:Oi((()=>a.e(3798).then(a.bind(a,"./public/app/features/admin/AdminListOrgsPage.tsx"))))},{path:"/admin/orgs/edit/:id",component:Oi((()=>a.e(2721).then(a.bind(a,"./public/app/features/admin/AdminEditOrgPage.tsx"))))},{path:"/admin/stats",component:Oi((()=>a.e(7641).then(a.bind(a,"./public/app/features/admin/ServerStats.tsx"))))},{path:"/admin/ldap",component:ar},{path:"/login",component:pi,pageClass:"login-page sidemenu-hidden"},{path:"/invite/:code",component:Oi((()=>a.e(7429).then(a.bind(a,"./public/app/features/users/SignupInvited.tsx")))),pageClass:"sidemenu-hidden"},{path:"/verify",component:c.ZP.verifyEmailEnabled?Oi((()=>a.e(2665).then(a.bind(a,"./public/app/core/components/Signup/VerifyEmailPage.tsx")))):()=>oo||(oo=(0,P.jsx)(rn.l_,{to:"/signup"})),pageClass:"login-page sidemenu-hidden"},{path:"/signup",component:c.ZP.disableUserSignUp?()=>lo||(lo=(0,P.jsx)(rn.l_,{to:"/login"})):Oi((()=>a.e(9581).then(a.bind(a,"./public/app/core/components/Signup/SignupPage.tsx")))),pageClass:"sidemenu-hidden login-page"},{path:"/user/password/send-reset-email",pageClass:"sidemenu-hidden",component:Oi((()=>a.e(133).then(a.bind(a,"./public/app/core/components/ForgottenPassword/SendResetMailPage.tsx"))))},{path:"/user/password/reset",component:Oi((()=>a.e(6848).then(a.bind(a,"./public/app/core/components/ForgottenPassword/ChangePasswordPage.tsx")))),pageClass:"sidemenu-hidden login-page"},{path:"/dashboard/snapshots",component:Oi((()=>a.e(5295).then(a.bind(a,"./public/app/features/manage-dashboards/SnapshotListPage.tsx"))))},{path:"/playlists",component:Oi((()=>a.e(9218).then(a.bind(a,"./public/app/features/playlist/PlaylistPage.tsx"))))},{path:"/playlists/play/:id",component:Oi((()=>a.e(3090).then(a.bind(a,"./public/app/features/playlist/PlaylistStartPage.tsx"))))},{path:"/playlists/new",component:Oi((()=>a.e(9975).then(a.bind(a,"./public/app/features/playlist/PlaylistNewPage.tsx"))))},{path:"/playlists/edit/:id",component:Oi((()=>a.e(2341).then(a.bind(a,"./public/app/features/playlist/PlaylistEditPage.tsx"))))},{path:"/sandbox/benchmarks",component:Oi((()=>a.e(4908).then(a.bind(a,"./public/app/features/sandbox/BenchmarksPage.tsx"))))},{path:"/sandbox/test",component:Oi((()=>Promise.all([a.e(1918),a.e(8595)]).then(a.bind(a,"./public/app/features/sandbox/TestStuffPage.tsx"))))},{path:"/dashboards/f/:uid/:slug/library-panels",component:Oi((()=>Promise.all([a.e(69),a.e(3778)]).then(a.bind(a,"./public/app/features/folders/FolderLibraryPanelsPage.tsx"))))},{path:"/library-panels",component:Oi((()=>Promise.all([a.e(69),a.e(7878)]).then(a.bind(a,"./public/app/features/library-panels/LibraryPanelsPage.tsx"))))},...(0,$i.bO)()?[...Ri,...Ei]:Ri,...Vi(),...Wi(),...co,{path:"/*",component:Di}].map((e=>this.renderRoute(e)))})}render(){(0,m.navigationLogger)("AppWrapper",!1,"rendering");const e=Boolean(m.config.featureToggles.newNavigation);return(0,P.jsx)(on.Provider,{store:Ha.h,children:(0,P.jsx)(oc,{children:(0,P.jsx)(f.ErrorBoundaryAlert,{style:"page",children:(0,P.jsx)(uo.E_.Provider,{value:m.config,children:(0,P.jsx)(uo.f6,{children:(0,P.jsxs)(f.ModalsProvider,{children:[cc||(cc=(0,P.jsx)(f.GlobalStyles,{})),(0,P.jsx)("div",{className:"grafana-app",children:(0,P.jsxs)(rn.F0,{history:m.locationService.getHistory(),children:[e?dc||(dc=(0,P.jsx)(wl,{})):uc||(uc=(0,P.jsx)(hl,{})),(0,P.jsxs)("main",{className:"main-view",children:[vc.map(((e,t)=>(0,P.jsx)(e,{},t.toString()))),(0,P.jsx)(sc,{ref:this.container}),pc||(pc=(0,P.jsx)(Fl,{})),hc||(hc=(0,P.jsx)(Jl,{})),this.state.ngInjector&&this.renderRoutes(),bc.map(((e,t)=>(0,P.jsx)(e,{},t.toString())))]})]})}),mc||(mc=(0,P.jsx)(tc,{})),gc||(gc=(0,P.jsx)(f.ModalRoot,{}))]})})})})})})}}function yc(e){const t=function(e){for(;null!==e&&e.tagName;){if("A"===e.tagName.toUpperCase())return e;e=e.parentNode}return null}(e.target);if(!(e.ctrlKey||e.metaKey||e.defaultPrevented)&&t){let a=t.getAttribute("href");const s=t.getAttribute("target");if(a&&!s){if((0,m.navigationLogger)("utils",!1,"intercepting link click",e),e.preventDefault(),a=d.locationUtil.stripBaseFromUrl(a),"/"!==a[0]){if(a.indexOf("://")>0||0===a.indexOf("mailto:"))return void(window.location.href=a);a=`/${a}`}m.locationService.push(a)}}}var wc=a("./public/app/features/panel/components/PanelRenderer.tsx"),jc=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),Cc=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/operators/first.js"),kc=a("./public/app/features/query/state/PanelQueryRunner.ts"),Sc=a("./public/app/features/query/state/processing/revision.ts");function Tc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Oc{constructor(){Tc(this,"subject",void 0),Tc(this,"subscription",void 0),Tc(this,"lastResult",void 0),this.subject=new jc.t(1)}get(){return this.subject.asObservable()}run(e){const{queries:t,timezone:a,datasource:s,panelId:n,app:i,dashboardId:o,timeRange:l,timeInfo:c,cacheTimeout:u,maxDataPoints:p,scopedVars:h,minInterval:g}=e;this.subscription&&this.subscription.unsubscribe();const f={app:null!=i?i:d.CoreApp.Unknown,requestId:(0,kc.t)(),timezone:a,panelId:n,dashboardId:o,range:l,timeInfo:c,interval:"",intervalMs:0,targets:(0,r.cloneDeep)(t),maxDataPoints:p,scopedVars:h||{},cacheTimeout:u,startTime:Date.now()};f.rangeRaw=l.raw,(0,zt.D)(async function(e,t){if(e&&"query"in e)return e;return(0,S.ak)().get(e,t)}(s,f.scopedVars)).pipe((0,Cc.P)()).subscribe({next:e=>{f.targets=f.targets.map((t=>(t.datasource||(t.datasource=e.getRef()),t)));const t=g?(0,m.getTemplateSrv)().replace(g,f.scopedVars):e.interval,a=d.rangeUtil.calculateInterval(l,p,t);f.scopedVars=Object.assign({},f.scopedVars,{__interval:{text:a.interval,value:a.interval},__interval_ms:{text:a.intervalMs.toString(),value:a.intervalMs}}),f.interval=a.interval,f.intervalMs=a.intervalMs,this.subscription=(0,as.v7)(e,f).subscribe({next:e=>{const t=(0,as.zR)(e,this.lastResult);this.lastResult=(0,Sc.C)(t,this.lastResult),this.subject.next(this.lastResult)}})},error:e=>console.error("PanelQueryRunner Error",e)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===d.LoadingState.Loading&&this.subject.next(Object.assign({},this.lastResult,{state:d.LoadingState.Done})))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}var _c,Nc=a("./public/app/features/variables/getAllVariableValuesForUrl.ts");const Ic=(null!==(_c=window.__grafana_public_path__)&&void 0!==_c?_c:"public/")+"lib/monaco/min/vs",Pc=[[`${Ic}/language/kusto/bridge.min.js`],[`${Ic}/language/kusto/kusto.javascript.client.min.js`,`${Ic}/language/kusto/newtonsoft.json.min.js`,`${Ic}/language/kusto/Kusto.Language.Bridge.min.js`]];async function Mc(){let e=Promise.resolve();for(const t of Pc){await e;const a=t.filter((e=>!document.querySelector(`script[src="${e}"]`))).map((e=>{return t=e,new Promise(((e,a)=>{let s;"string"==typeof t?(s=document.createElement("script"),s.src=t):s=t,s.onload=()=>e(),s.onerror=e=>a(e),document.body.appendChild(s)}));var t}));await Promise.all(a)}await new Promise((e=>{window.__monacoKustoResolvePromise=e;const t=document.createElement("script");return t.innerHTML="require(['vs/language/kusto/monaco.contribution'], function() {\n      window.__monacoKustoResolvePromise();\n    });",document.body.appendChild(t)}))}function Fc(){return[{id:"kusto",name:"kusto",init:Mc}]}function Ac(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Dc{constructor(e){Ac(this,"supportedEvents",[m.EchoEventType.Pageview]),Ac(this,"trackedUserId",null),Ac(this,"addEvent",(e=>{if(!window.ga)return;window.ga("set",{page:e.payload.page}),window.ga("send","pageview");const{userSignedIn:t,userId:a}=e.meta;t&&a!==this.trackedUserId&&(this.trackedUserId=a,window.ga("set","userId",a))})),Ac(this,"flush",(()=>{})),this.options=e;const t=`https://www.google-analytics.com/analytics${e.debug?"_debug":""}.js`;n().ajax({url:t,dataType:"script",cache:!0});const a=window.ga=window.ga||function(){(a.q=a.q||[]).push(arguments)};a.l=+new Date,a("create",e.googleAnalyticsId,"auto"),a("set","anonymizeIp",!0)}}function $c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Lc{constructor(e){$c(this,"supportedEvents",[m.EchoEventType.Pageview,m.EchoEventType.Interaction]),$c(this,"addEvent",(e=>{window.applicationInsights&&((0,m.isPageviewEvent)(e)&&window.applicationInsights.trackPageView(),(0,m.isInteractionEvent)(e)&&window.applicationInsights.trackEvent({name:e.payload.interactionName,properties:e.payload.properties}))})),$c(this,"flush",(()=>{})),this.options=e,n().ajax({url:"https://js.monitor.azure.com/scripts/b/ai.2.min.js",dataType:"script",cache:!0}).done((function(){var t={config:{connectionString:e.connectionString,endpointUrl:e.endpointUrl}},a=new window.Microsoft.ApplicationInsights.ApplicationInsights(t);window.applicationInsights=a.loadAppInsights()}))}}function Rc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ec{constructor(e){Rc(this,"supportedEvents",[m.EchoEventType.Pageview,m.EchoEventType.Interaction,m.EchoEventType.ExperimentView]),Rc(this,"addEvent",(e=>{window.rudderanalytics&&((0,m.isPageviewEvent)(e)&&window.rudderanalytics.page(),(0,m.isInteractionEvent)(e)&&window.rudderanalytics.track(e.payload.interactionName,e.payload.properties),(0,m.isExperimentViewEvent)(e)&&window.rudderanalytics.track("experiment_viewed",{experiment_id:e.payload.experimentId,experiment_group:e.payload.experimentGroup,experiment_variant:e.payload.experimentVariant}))})),Rc(this,"flush",(()=>{})),this.options=e;const t=e.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";n().ajax({url:t,dataType:"script",cache:!0});const a=window.rudderanalytics=[];var s=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let e=0;e<s.length;e++){const t=s[e];a[t]=function(e){return function(){a.push([e].concat(Array.prototype.slice.call(arguments)))}}(t)}a.load(e.writeKey,e.dataPlaneUrl,{configUrl:e.configUrl}),e.user&&a.identify(e.user.email,{email:e.user.email,orgId:e.user.orgId})}}var zc=a("./public/app/core/components/editors/registry.tsx"),Vc=a("./packages/grafana-runtime/src/components/PanelRenderer.tsx"),Bc=a("./public/app/features/panel/components/PanelDataErrorView.tsx"),Uc=a("./packages/grafana-runtime/src/components/PanelDataErrorView.tsx"),Hc=a("../../opt/drone/yarncache/baron-npm-3.0.3-255b365962-5fd57232e2.zip/node_modules/baron/src/core.js"),qc=a.n(Hc),Wc=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Subscription.js"),Gc=a("./public/app/angular/core_module.ts");Gc.hF.directive("grafanaPanel",["$rootScope","$document","$timeout",(e,t,a)=>({restrict:"E",template:'\n  <ng-transclude class="panel-height-helper"></ng-transclude>\n',transclude:!0,scope:{ctrl:"="},link:(e,t)=>{const s=e.ctrl,n=e.ctrl.panel,r=new Wc.w0;let i;function o(){s.height=e.$parent.$parent.size.height,s.width=e.$parent.$parent.size.width}s.events.on(d.PanelEvents.componentDidMount,(()=>{if(s.__proto__.constructor.scrollable){const e="baron baron__root baron__clipper panel-content--scrollable",a="baron__scroller",s='\n            <div class="baron__track">\n              <div class="baron__bar"></div>\n            </div>\n          ',n=t,r=t.find(":first").find(":first");n.addClass(e),$(s).appendTo(n),r.addClass(a),i=qc()({root:n[0],scroller:r[0],bar:".baron__bar",barOnCls:"_scrollbar",scrollingCls:"_scrolling"}),i.scroll()}})),o(),r.add(n.events.subscribe(m.RefreshEvent,(()=>{o(),s.events.emit("refresh")}))),r.add(n.events.subscribe(po._z,(e=>{var t;null!==(t=e.payload)&&void 0!==t&&t.fromAngular||(o(),a((()=>{i&&i.update(),s.events.emit("render")})))}))),r.add(s.events.subscribe(po._z,(e=>{e.payload&&(e.payload.fromAngular=!0,n.events.publish(e))}))),e.$on("$destroy",(()=>{t.off(),r.unsubscribe(),s.events.emit(d.PanelEvents.panelTeardown),s.events.removeAllListeners(),i&&i.dispose()})),n.events.publish(po.GT)}})]);a("./public/app/angular/panel/query_ctrl.ts");var Zc=a("../../opt/drone/yarncache/angular-npm-1.8.2-307000482b-35ea81a23b.zip/node_modules/angular/index.js"),Qc=a.n(Zc);Jc.$inject=["dynamicDirectiveSrv"];const Kc=Qc().module("grafana.directives"),Yc={};function Jc(e){return e.create({scope:{ctrl:"=",editorTab:"="},directive:e=>{const t=e.ctrl.pluginId,a=e.editorTab.title.toLowerCase().replace(" ","-").replace("&","").replace(" ","").replace(" ","-");if(Yc[t]){if(Yc[t][a])return Yc[t][a]}else Yc[t]=[];const s={fn:()=>e.editorTab.directiveFn(),name:`panel-editor-tab-${t}${a}`};return Yc[t][a]=s,s}})}function Xc(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Kc.directive("panelEditorTab",Jc);class ed{constructor(){Xc(this,"target",void 0),Xc(this,"queryCtrl",void 0),Xc(this,"panelCtrl",void 0),Xc(this,"panel",void 0),Xc(this,"hasTextEditMode",!1)}$onInit(){this.panelCtrl=this.queryCtrl.panelCtrl,this.target=this.queryCtrl.target,this.panel=this.panelCtrl.panel,this.hasTextEditMode&&this.queryCtrl.toggleEditorMode&&(this.panelCtrl.toggleEditorMode=this.queryCtrl.toggleEditorMode.bind(this.queryCtrl)),this.queryCtrl.getCollapsedText&&(this.panelCtrl.getCollapsedText=this.queryCtrl.getCollapsedText.bind(this.queryCtrl))}}ed.$inject=[],Gc.hF.directive("queryEditorRow",(function(){return{restrict:"E",controller:ed,bindToController:!0,controllerAs:"ctrl",templateUrl:"public/app/angular/panel/partials/query_editor_row.html",transclude:!0,scope:{queryCtrl:"=",canCollapse:"=",hasTextEditMode:"="}}}));a("./public/app/angular/partials.ts");var td=a("./public/app/features/templating/template_srv.ts");Gc.ZP.filter("stringSort",(()=>e=>e.sort())),Gc.ZP.filter("slice",(()=>(e,t,a)=>(0,r.isUndefined)(e)?e:e.slice(t,a))),Gc.ZP.filter("stringify",(()=>e=>(0,r.isObject)(e)&&!(0,r.isArray)(e)?Qc().toJson(e):(0,r.isNull)(e)?null:e.toString())),Gc.ZP.filter("moment",(()=>(e,t)=>(0,d.dateTime)(e).fromNow())),Gc.ZP.filter("interpolateTemplateVars",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,td.J)();const t=(t,a)=>{let s;return s=a.ctrl?(a.ctrl.panel||a.ctrl.row).scopedVars:a.row.scopedVars,e.replaceWithText(t,s)};return t.$stateful=!0,t}));class ad{constructor(){}set(){console.warn("old deprecated alert srv being used")}}ad.$inject=[],Gc.ZP.service("alertSrv",ad);class sd{constructor(e){this.$compile=e}addDirective(e,t,a){const s=Qc().element(document.createElement(t));this.$compile(s)(a),e.empty(),e.append(s)}link(e,t,a,s){const n=s.directive(e);n&&n.fn?(n.fn.registered||(Gc.ZP.directive(a.$normalize(n.name),n.fn),n.fn.registered=!0),this.addDirective(t,n.name,e)):t.empty()}create(e){return{restrict:"E",scope:e.scope,link:(t,a,s)=>{if(e.watchPath){let n=null;t.$watch(e.watchPath,(()=>{n&&n.$destroy(),n=t.$new(),this.link(n,a,s,e)}))}else this.link(t,a,s,e)}}}}function nd(e,t){if(Qc().isFunction(e))return e;if(!e)throw new Error("ReactComponent name attribute must be specified");let a;try{a=t.get(e)}catch(e){}if(!a)try{a=e.split(".").reduce(((e,t)=>e[t]),window)}catch(e){}if(!a)throw Error("Cannot find react component "+e);return a}function rd(e,t,a){return Object.keys(e||{}).reduce(((s,n)=>{const r=e[n],i=(a||{})[n]||{};return s[n]=Qc().isFunction(r)&&!1!==i.wrapApply?function(e,t){if(e.wrappedInApply)return e;const a=function(){const a=arguments,s=t.$root.$$phase;return"$apply"===s||"$digest"===s?e.apply(null,a):t.$apply((()=>e.apply(null,a)))};return a.wrappedInApply=!0,a}(r,t):r,s}),{})}function id(e,t,a,s){const n=Qc().isFunction(t.$watchCollection),r=Qc().isFunction(t.$watchGroup),i=[];for(const l of a){const a=(o=l,Array.isArray(o)?o[0]:o),c=dd(e,l);a&&!a.match(/\(.*\)/)&&"one-time"!==c&&("collection"===c&&n?t.$watchCollection(a,s):"reference"===c&&r?i.push(a):t.$watch(a,s,"reference"!==c))}var o;"one-time"===e&&s(),i.length&&t.$watchGroup(i,s)}function od(e,t,a,s){a.$evalAsync((()=>{o.render(l.createElement(e,t),s[0])}))}function ld(e){return Array.isArray(e)?e[1]:{}}function cd(e,t){return e[Object.keys(e).find((e=>e.toLowerCase()===t.toLowerCase()||(0,r.kebabCase)(e)===(0,r.kebabCase)(t)))]}function dd(e,t){return Array.isArray(t)&&Qc().isObject(t[1])&&t[1].watchDepth||e}sd.$inject=["$compile"],Gc.ZP.service("dynamicDirectiveSrv",sd);const ud=Qc().module("react",[]);function pd(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function hd(e,t){const a=this;class s{constructor(a){return pd(this,"value",void 0),pd(this,"html",void 0),pd(this,"type",void 0),pd(this,"expandable",void 0),pd(this,"text",void 0),pd(this,"cssClass",void 0),pd(this,"fake",void 0),pd(this,"custom",void 0),pd(this,"selectMode",void 0),"*"===a||"*"===a.value?(this.value="*",this.html=e.trustAsHtml('<i class="fa fa-asterisk"><i>'),this.type=a.type,void(this.expandable=!0)):(0,r.isString)(a)?(this.value=a,void(this.html=e.trustAsHtml(t.highlightVariablesAsHtml(this.value)))):(this.text=a.value,this.cssClass=a.cssClass,this.custom=a.custom,this.type=a.type,this.fake=a.fake,this.value=a.value,this.selectMode=a.selectMode,this.expandable=a.expandable,void(this.html=a.html||e.trustAsHtml(t.highlightVariablesAsHtml(this.value))))}}this.getSegmentForValue=function(e,t){return e?this.newSegment(e):this.newSegment({value:t,fake:!0})},this.newSelectMeasurement=()=>new s({value:"select measurement",fake:!0}),this.newFake=(e,t,a)=>new s({value:e,fake:!0,type:t,cssClass:a}),this.newSegment=e=>new s(e),this.newKey=e=>new s({value:e,type:"key",cssClass:"query-segment-key"}),this.newKeyValue=e=>new s({value:e,type:"value",cssClass:"query-segment-value"}),this.newCondition=e=>new s({value:e,type:"condition",cssClass:"query-keyword"}),this.newOperator=e=>new s({value:e,type:"operator",cssClass:"query-segment-operator"}),this.newOperators=e=>(0,r.map)(e,(e=>new s({value:e,type:"operator",cssClass:"query-segment-operator"}))),this.transformToSegments=(e,s)=>n=>{const i=(0,r.map)(n,(e=>a.newSegment({value:e.text,expandable:e.expandable})));return e&&(0,r.each)(t.getVariables(),(e=>{void 0!==s&&s!==e.type||i.unshift(a.newSegment({type:"value",value:"$"+e.name,expandable:!0}))})),i},this.newSelectMetric=()=>new s({value:"select metric",fake:!0}),this.newPlusButton=()=>new s({fake:!0,html:'<i class="fa fa-plus "></i>',type:"plus-button",cssClass:"query-part"})}function md(e,t,a){let s=null;this.close=()=>{s&&s.close()},this.show=n=>{s&&(s.close(),s=null);const i=(0,r.extend)(t.$new(!0),n.model);let o;i.dismiss=()=>{o.close()};const l=document.createElement("div");return l.innerHTML=n.template,e(l)(i),a((()=>{o=new(kl())({target:n.element,content:l,position:n.position,classes:n.classNames||"drop-popover",openOn:n.openOn,hoverCloseDelay:200,tetherOptions:{constraints:[{to:"scrollParent",attachment:"together"}]}}),o.on("close",(()=>{setTimeout((()=>{i.$destroy(),o.tether&&o.destroy(),n.onClose&&n.onClose()})),s=null})),s=o,s.open()}),100),()=>{o&&o.close()}}}ud.directive("reactComponent",["$injector",e=>({restrict:"E",replace:!0,link:function(t,a,s){const n=nd(s.name,e),r=()=>{const e=rd(t.$eval(s.props),t);od(n,e,t,a)};s.props?id(s.watchDepth,t,[s.props],r):r(),t.$on("$destroy",(()=>{s.onScopeDestroy?t.$eval(s.onScopeDestroy,{unmountComponent:o.unmountComponentAtNode.bind(this,a[0])}):o.unmountComponentAtNode(a[0])}))}})]),ud.factory("reactDirective",["$injector",e=>(t,a,s,n)=>{const r={restrict:"E",replace:!0,link:function(s,r,i){const l=nd(t,e),c=()=>{let e={};const t={};a.forEach((a=>{const n=function(e){return Array.isArray(e)?e[0]:e}(a);e[n]=s.$eval(cd(i,n)),t[n]=ld(a)})),e=rd(e,s,t),e=Qc().extend({},e,n),od(l,e,s,r)},d=(a=a||Object.keys(l.propTypes||{})).map((e=>Array.isArray(e)?[cd(i,e[0]),ld(e)]:cd(i,e)));a.length?id(i.watchDepth,s,d,c):c(),s.$on("$destroy",(()=>{i.onScopeDestroy?s.$eval(i.onScopeDestroy,{unmountComponent:o.unmountComponentAtNode.bind(this,r[0])}):o.unmountComponentAtNode(r[0])}))}};return Qc().extend(r,s)}]),hd.$inject=["$sce","templateSrv"],Gc.ZP.service("uiSegmentSrv",hd),md.$inject=["$compile","$rootScope","$timeout"],Gc.ZP.service("popoverSrv",md);class gd{constructor(e){var t,a,s;s=[],(a="timers")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,this.$timeout=e}register(e){return this.timers.push(e),e}cancel(e){this.timers=(0,r.without)(this.timers,e),this.$timeout.cancel(e)}cancelAll(){(0,r.each)(this.timers,(e=>{this.$timeout.cancel(e)})),this.timers=[]}}gd.$inject=["$timeout"],Gc.ZP.service("timer",gd);class fd{constructor(e,t){this.$compile=e,this.$rootScope=t}load(e,t,a){const s=this.$rootScope.$new();(0,r.assign)(s,t);const n=this.$compile(a)(s);return Qc().element(e).append(n),{destroy:()=>{s.$destroy(),n.remove()},digest:()=>{s.$$phase||s.$digest()},getScope:()=>s}}}function bd(e){return{scope:{menuItems:"=dropdownTypeahead",dropdownTypeaheadOnSelect:"&dropdownTypeaheadOnSelect",model:"=ngModel"},link:(t,a,s)=>{const i=n()('<input type="text" class="gf-form-input input-medium tight-form-input" spellcheck="false" style="display:none"></input>'),o=n()('<a class="gf-form-label tight-form-func dropdown-toggle" tabindex="1" gf-dropdown="menuItems" data-toggle="dropdown" ><i class="fa fa-plus"></i></a>');i.appendTo(a),o.appendTo(a),s.linkText&&o.html(s.linkText),s.ngModel&&t.$watch("model",(e=>{(0,r.each)(t.menuItems,(t=>{(0,r.each)(t.submenu,(t=>{t.value===e&&o.html(t.text)}))}))}));const l=(0,r.reduce)(t.menuItems,((e,t,a)=>(t.submenu?(0,r.each)(t.submenu,((s,n)=>{s.click="menuItemSelected("+a+","+n+")",e.push(t.text+" "+s.text)})):(t.click="menuItemSelected("+a+")",e.push(t.text)),e)),[]);t.menuItemSelected=(e,s)=>{const n=t.menuItems[e],r={$item:n};n.submenu&&void 0!==s&&(r.$subItem=n.submenu[s]),t.dropdownTypeaheadOnSelect(r),i.hide(),i.val(""),o.show(),o.focus(),a.removeClass("open")},i.attr("data-provide","typeahead"),i.typeahead({source:l,minLength:1,items:10,updater:e=>{const a={};return(0,r.each)(t.menuItems,(t=>{(0,r.each)(t.submenu,(s=>{e===t.text+" "+s.text&&(a.$subItem=s,a.$item=t)}))})),a.$item&&t.$apply((()=>{t.dropdownTypeaheadOnSelect(a)})),i.trigger("blur"),""}}),o.click((()=>{o.hide(),i.show(),i.focus()})),i.keyup((()=>{a.toggleClass("open",""===i.val())})),a.mousedown((e=>{e.preventDefault()})),i.blur((()=>{i.hide(),i.val(""),o.show(),o.focus(),setTimeout((()=>{a.removeClass("open")}),200)})),e(a.contents())(t)}}}function vd(e){return{scope:{menuItems:"=dropdownTypeahead2",dropdownTypeaheadOnSelect:"&dropdownTypeaheadOnSelect",model:"=ngModel",buttonTemplateClass:"@"},link:(t,a,s)=>{const i=n()('<input type="text" class="gf-form-input" spellcheck="false" style="display:none"></input>');t.buttonTemplateClass||(t.buttonTemplateClass="gf-form-input");const o=n()('<a class="{{buttonTemplateClass}} dropdown-toggle" tabindex="1" gf-dropdown="menuItems" data-toggle="dropdown" ><i class="fa fa-plus"></i></a>'),l={blur:null};i.appendTo(a),o.appendTo(a),s.linkText&&o.html(s.linkText),s.ngModel&&t.$watch("model",(e=>{(0,r.each)(t.menuItems,(t=>{(0,r.each)(t.submenu,(t=>{t.value===e&&o.html(t.text)}))}))}));const c=(0,r.reduce)(t.menuItems,((e,t,a)=>(t.submenu?(0,r.each)(t.submenu,((s,n)=>{s.click="menuItemSelected("+a+","+n+")",e.push(t.text+" "+s.text)})):(t.click="menuItemSelected("+a+")",e.push(t.text)),e)),[]),d=()=>{i.hide(),i.val(""),o.show(),o.focus(),a.removeClass("open")};t.menuItemSelected=(e,a)=>{const s=t.menuItems[e],n={$item:s};s.submenu&&void 0!==a&&(n.$subItem=s.submenu[a]),t.dropdownTypeaheadOnSelect(n),d()},i.attr("data-provide","typeahead"),i.typeahead({source:c,minLength:1,items:10,updater:e=>{const a={};return(0,r.each)(t.menuItems,(t=>{(0,r.each)(t.submenu,(s=>{e===t.text+" "+s.text&&(a.$subItem=s,a.$item=t)}))})),a.$item&&t.$apply((()=>{t.dropdownTypeaheadOnSelect(a)})),i.trigger("blur"),""}}),o.click((()=>{o.hide(),i.show(),i.focus()})),i.keyup((()=>{a.toggleClass("open",""===i.val())})),a.mousedown((e=>{e.preventDefault(),l.blur=null})),i.blur((()=>{l.blur=setTimeout((()=>{d()}),1)})),e(a.contents())(t)}}}function xd(e){return{link:(e,t)=>{const a=t[0],s=()=>{const e=new Event("change");return a.dispatchEvent(e)},n=e=>{let{animationName:t}=e;switch(t){case"onAutoFillStart":case"onAutoFillCancel":return s()}return null};a.addEventListener("animationstart",n),e.$on("$destroy",(()=>{a.removeEventListener("animationstart",n)}))}}}function yd(e,t,a){return{scope:{segment:"=",getOptions:"&",onChange:"&",debounce:"@"},link:(s,i)=>{const o=n()('<input type="text" data-provide="typeahead"  class="gf-form-input input-medium" spellcheck="false" style="display:none"></input>'),l=s.segment,c=n()(l.selectMode?'<a class="gf-form-input gf-form-input--dropdown" ng-class="segment.cssClass" tabindex="1" give-focus="segment.focus" ng-bind-html="segment.html"></a>':'<a class="gf-form-label" ng-class="segment.cssClass" tabindex="1" give-focus="segment.focus" ng-bind-html="segment.html"></a>');let d=null,u=null,p=!0;const h=s.debounce;o.appendTo(i),c.appendTo(i),s.updateVariableValue=e=>{""!==e&&l.value!==e&&s.$apply((()=>{const n=(0,r.find)(s.altSegments,{value:e});n?(l.value=n.value,l.html=n.html||t.trustAsHtml(a.highlightVariablesAsHtml(n.value)),l.fake=!1,l.expandable=n.expandable,n.type&&(l.type=n.type)):"false"!==l.custom&&(l.value=e,l.html=t.trustAsHtml(a.highlightVariablesAsHtml(e)),l.expandable=!0,l.fake=!1),s.onChange()}))},s.switchToLink=e=>{p&&!e||(clearTimeout(u),u=null,p=!0,o.hide(),c.show(),s.updateVariableValue(o.val()))},s.inputBlur=()=>{u=setTimeout(s.switchToLink,200)},s.source=(e,t)=>{s.$apply((()=>{s.getOptions({$query:e}).then((e=>{s.altSegments=e,d=(0,r.map)(s.altSegments,(e=>(0,r.escape)(e.value))),"false"!==l.custom&&(l.fake||-1!==(0,r.indexOf)(d,l.value)||d.unshift((0,r.escape)(l.value))),t(d)}))}))},s.updater=e=>(e=(0,r.unescape)(e))===l.value?(clearTimeout(u),o.focus(),e):(o.val(e),s.switchToLink(!0),e),s.matcher=function(e){if(p)return!1;let t=this.query;"/"===t[0]&&(t=t.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1));try{return e.toLowerCase().match(t.toLowerCase())}catch(e){return!1}},o.attr("data-provide","typeahead"),o.typeahead({source:s.source,minLength:0,items:1e4,updater:s.updater,matcher:s.matcher});const m=o.data("typeahead");m.lookup=function(){this.query=this.$element.val()||"";const e=this.source(this.query,n().proxy(this.process,this));return e?this.process(e):e},h&&(m.lookup=(0,r.debounce)(m.lookup,500,{leading:!0})),c.keydown((e=>{40!==e.keyCode&&13!==e.keyCode||c.click()})),c.click((()=>{d=null,o.css("width",Math.max(c.width(),80)+16+"px"),c.hide(),o.show(),o.focus(),p=!1;const e=o.data("typeahead");e&&(o.val(""),e.lookup())})),o.blur(s.inputBlur),e(i.contents())(s)}}}function wd(e){return{template:'<metric-segment segment="segment" get-options="getOptionsInternal()" on-change="onSegmentChange()"></metric-segment>',restrict:"E",scope:{property:"=",options:"=",getOptions:"&",onChange:"&"},link:{pre:function(t,a,s){let n;t.valueToSegment=a=>{const n=(0,r.find)(t.options,{value:a}),i={cssClass:s.cssClass,custom:s.custom,value:n?n.text:a,selectMode:s.selectMode};return e.newSegment(i)},t.getOptionsInternal=()=>t.options?(n=t.options,Promise.resolve((0,r.map)(t.options,(e=>({value:e.text}))))):t.getOptions().then((e=>(n=e,(0,r.map)(e,(e=>e.html?e:{value:e.text}))))),t.onSegmentChange=()=>{if(n){const e=(0,r.find)(n,{text:t.segment.value});e&&e.value!==t.property?t.property=e.value:"false"!==s.custom&&(t.property=t.segment.value)}else t.property=t.segment.value;t.$$postDigest((()=>{t.$apply((()=>{t.onChange()}))}))},t.segment=t.valueToSegment(t.property)}}}}function jd(e){return{restrict:"E",link:(t,a,s)=>{let n='<i class="grafana-tip fa fa-'+(s.icon||"question-circle")+'" bs-tooltip="\''+a.text().replace(/[\'\"\\{}<>&]/g,(e=>"&amp;#"+e.charCodeAt(0)+";"))+"'\"></i>";a.replaceWith(e(Qc().element(n))(t))}}}function Cd(e){return{restrict:"A",link:(t,a,s)=>{t.$watch((e=>e.$eval(s.compile)),(s=>{a.html(s),e(a.contents())(t)}))}}}function kd(e){return{restrict:"E",link:(t,a,s)=>{const n=s.change?' ng-change="'+s.change+'"':"",r=s.tip?" <tip>"+s.tip+"</tip>":"",i='<div class="editor-option gf-form-checkbox text-center"'+(s.showIf?' ng-show="'+s.showIf+'" ':"")+'> <label for="'+s.model+'" class="small">'+s.text+r+'</label><input class="cr1" id="'+s.model+'" type="checkbox"        ng-model="'+s.model+'"'+n+'       ng-checked="'+s.model+'"></input> <label for="'+s.model+'" class="cr1"></label>';a.replaceWith(e(Qc().element(i))(t))}}}function Sd(e,t){return{restrict:"E",link:(a,s,n)=>{const r=t(n.text)(a),i=t(n.model)(a),o=n.change?' ng-change="'+n.change+'"':"",l=n.tip?" <tip>"+n.tip+"</tip>":"",c='<label for="'+a.$id+i+'" class="checkbox-label">'+r+l+"</label>";let d='<input class="cr1" id="'+a.$id+i+'" type="checkbox"        ng-model="'+i+'"'+o+'       ng-checked="'+i+'"></input> <label for="'+a.$id+i+'" class="cr1"></label>';d+=c,s.addClass("gf-form-checkbox"),s.html(e(Qc().element(d))(a))}}}function Td(e,t,a){function s(e,t){const a=['<ul class="dropdown-menu '+("top"===t?"dropup":"")+'" role="menu" aria-labelledby="drop1">',"</ul>"];for(let t=0;t<e.length;t++){const n=e[t];if(n.divider){a.splice(t+1,0,'<li class="divider"></li>');continue}let r="<li"+(n.submenu&&n.submenu.length?' class="dropdown-submenu"':"")+'><a tabindex="-1" ng-href="'+(n.href||"")+'"'+(n.click?' ng-click="'+n.click+'"':"")+(n.target?' target="'+n.target+'"':"")+(n.method?' data-method="'+n.method+'"':"")+">"+(n.text||"")+"</a>";n.submenu&&n.submenu.length&&(r+=s(n.submenu).join("\n")),r+="</li>",a.splice(t+1,0,r)}return a}return{restrict:"EA",scope:!0,link:function(n,r,i){const o=e(i.gfDropdown)(n);a((()=>{const e=r.data("placement");Qc().element(s(o,e).join("")).insertAfter(r),t(r.next("ul.dropdown-menu"))(n)})),r.addClass("dropdown-toggle").attr("data-toggle","dropdown")}}}fd.$inject=["$compile","$rootScope"],Gc.ZP.service("angularLoader",fd),vd.$inject=["$compile"],bd.$inject=["$compile"],Gc.ZP.directive("dropdownTypeahead",bd),Gc.ZP.directive("dropdownTypeahead2",vd),xd.$inject=["$compile"],Gc.ZP.directive("autofillEventFix",xd),wd.$inject=["uiSegmentSrv"],yd.$inject=["$compile","$sce","templateSrv"],Gc.ZP.directive("metricSegment",yd),Gc.ZP.directive("metricSegmentModel",wd),Td.$inject=["$parse","$compile","$timeout"],Sd.$inject=["$compile","$interpolate"],kd.$inject=["$compile"],Cd.$inject=["$compile"],jd.$inject=["$compile"],Gc.ZP.directive("tip",jd),Gc.ZP.directive("compile",Cd),Gc.ZP.directive("watchChange",(function(){return{scope:{onchange:"&watchChange"},link:(e,t)=>{t.on("input",(()=>{e.$apply((()=>{e.onchange({inputValue:t.val()})}))}))}}})),Gc.ZP.directive("editorOptBool",kd),Gc.ZP.directive("editorCheckbox",Sd),Gc.ZP.directive("gfDropdown",Td),Gc.ZP.directive("ngModelOnblur",(function(){return{restrict:"A",priority:1,require:"ngModel",link:(e,t,a,s)=>{"radio"!==a.type&&"checkbox"!==a.type&&(t.off("input keydown change"),t.bind("blur",(()=>{e.$apply((()=>{s.$setViewValue(t.val())}))})))}}})),Gc.ZP.directive("emptyToNull",(function(){return{restrict:"A",require:"ngModel",link:(e,t,a,s)=>{s.$parsers.push((e=>""===e?null:e))}}})),Gc.ZP.directive("validTimeSpan",(function(){return{require:"ngModel",link:(e,t,a,s)=>{s.$validators.integer=(e,t)=>{if(s.$isEmpty(e))return!0;if(0===t.indexOf("$")||0===t.indexOf("+$"))return!0;return!0!==d.rangeUtil.describeTextRange(t).invalid}}}}));a("./public/vendor/tagsinput/bootstrap-tagsinput.js");function Od(e,t){const{color:a,borderColor:s}=(0,f.getTagColorsFromName)(e);t.css("background-color",a),t.css("border-color",s)}function _d(e){return{multiElement:!0,terminal:!0,transclude:!0,priority:600,restrict:"E",link:(t,a,s,r,i)=>{let o,l,c;function d(){c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),o&&(c=function(e){let t=e[0];const a=e[e.length-1];let s;t=t.nextSibling;for(let r=1;t!==a&&t;r++)(s||e[r]!==t)&&(s||(s=n()([].slice.call(e,0,r))),s.push(t)),t=t.nextSibling;return s||e}(o.clone),e.leave(c).then((()=>{c=null})),o=null)}t.$watch(s.property,(function(t,n){l&&t!==n&&d(),l||!t&&!s.showNull?d():i(((t,s)=>{l=s,t[t.length++]=document.createComment(" end rebuild on change "),o={clone:t},e.enter(t,a.parent(),a)}))}))}}}Gc.ZP.directive("tagColorFromName",(function(){return{scope:{tagColorFromName:"="},link:(e,t)=>{Od(e.tagColorFromName,t)}}})),Gc.ZP.directive("bootstrapTagsinput",(function(){function e(e,t){if(t)return Qc().isFunction(e.$parent[t])?e.$parent[t]:e=>e[t]}return{restrict:"EA",scope:{model:"=ngModel",onTagsUpdated:"&"},template:"<select multiple></select>",replace:!1,link:function(t,a,s){Qc().isArray(t.model)||(t.model=[]);const r=n()("select",a);s.placeholder&&r.attr("placeholder",s.placeholder),r.tagsinput({typeahead:{source:Qc().isFunction(t.$parent[s.typeaheadSource])?t.$parent[s.typeaheadSource]:null},widthClass:s.widthClass,itemValue:e(t,s.itemvalue),itemText:e(t,s.itemtext),tagClass:Qc().isFunction(t.$parent[s.tagclass])?t.$parent[s.tagclass]:()=>s.tagclass}),r.on("itemAdded",(e=>{-1===t.model.indexOf(e.item)&&(t.model.push(e.item),t.onTagsUpdated&&t.onTagsUpdated());const a=r.next().children("span").filter((()=>n()(this).text()===e.item));Od(e.item,a)})),r.on("itemRemoved",(e=>{const a=t.model.indexOf(e.item);-1!==a&&(t.model.splice(a,1),t.onTagsUpdated&&t.onTagsUpdated())})),t.$watch("model",(()=>{Qc().isArray(t.model)||(t.model=[]),r.tagsinput("removeAll");for(let e=0;e<t.model.length;e++)r.tagsinput("add",t.model[e])}),!0)}}})),_d.$inject=["$animate"],Gc.ZP.directive("rebuildOnChange",_d),Gc.ZP.directive("giveFocus",(()=>(e,t,a)=>{t.click((e=>{e.stopPropagation()})),e.$watch(a.giveFocus,(e=>{e&&setTimeout((()=>{t.focus();const e=t[0];if(e.setSelectionRange){const a=2*t.val().length;e.setSelectionRange(a,a)}}),200)}),!0)}));class Nd{constructor(){var e,t,a;a=void 0,(t="observer")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a;this.observer=new MutationObserver((()=>{}));this.observer.observe(Qc().element(".delta-html")[0],{attributes:!0,attributeFilter:["class"],characterData:!1,childList:!0,subtree:!1})}$onDestroy(){this.observer.disconnect()}}Nd.$inject=[],Gc.ZP.directive("diffDelta",(function(){return{controller:Nd,replace:!1,restrict:"A"}}));class Id{constructor(e,t,a){this.$scope=e,this.$rootScope=t,this.$anchorScroll=a}goToLine(e){let t;const a=()=>{this.$anchorScroll(`l${e}`),t()};this.$scope.switchView().then((()=>{t=this.$rootScope.$on("json-diff-ready",a.bind(this))}))}}function Pd(e,t,a){Gc.ZP.directive(e,["reactDirective",e=>e((0,uo.ER)(t),a)])}Id.$inject=["$scope","$rootScope","$anchorScroll"],Gc.ZP.directive("diffLinkJson",(function(){return{controller:Id,controllerAs:"ctrl",replace:!0,restrict:"E",scope:{line:"@lineDisplay",link:"@lineLink",switchView:"&"},template:'<a class="diff-linenum btn btn-inverse btn-small" ng-click="ctrl.goToLine(link)">Line {{ line }}</a>'}})),Gc.ZP.directive("arrayJoin",(function(){return{restrict:"A",require:"ngModel",link:(e,t,a,s)=>{s.$parsers.push((function(e){return(e||"").split(",")})),s.$formatters.push((function(e){return(0,r.isArray)(e)?(e||"").join(","):e}))}}}));var Md,Fd=a("./public/app/plugins/datasource/cloud-monitoring/components/QueryEditor.tsx"),Ad=a("./public/app/plugins/datasource/cloud-monitoring/types.ts"),Dd=a("./public/app/plugins/datasource/cloud-monitoring/components/index.ts");function $d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{Input:Ld}=f.LegacyForms,Rd={editorMode:Ad.je.Visual,projectName:"",projects:[],metricType:"",filters:[],metricKind:Ad.lH.GAUGE,valueType:"",refId:"annotationQuery",title:"",text:"",labels:{},variableOptionGroup:{},variableOptions:[]};class Ed extends l.Component{constructor(){super(...arguments),$d(this,"state",Rd),$d(this,"onMetricTypeChange",(e=>{let{valueType:t,metricKind:a,type:s,unit:n}=e;const{onQueryChange:r,datasource:i}=this.props;this.setState({metricType:s,unit:n,valueType:t,metricKind:a},(()=>{r(this.state)})),i.getLabels(s,this.state.refId,this.state.projectName).then((e=>this.setState({labels:e})))}))}async UNSAFE_componentWillMount(){const{target:e,datasource:t}=this.props;e.projectName||(e.projectName=t.getDefaultProject());const a={label:"Template Variables",options:t.getVariables().map(d.toOption)},s=await t.getProjects();this.setState(Object.assign({variableOptionGroup:a,variableOptions:a.options},e,{projects:s})),t.getLabels(e.metricType,e.projectName,e.refId).then((e=>this.setState({labels:e})))}onChange(e,t){this.setState({[e]:t},(()=>{this.props.onQueryChange(this.state)}))}render(){const{metricType:e,projectName:t,filters:a,title:s,text:n,variableOptionGroup:r,labels:i,variableOptions:o}=this.state,{datasource:l}=this.props;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Dd.IK,{refId:this.props.refId,templateVariableOptions:o,datasource:l,projectName:t||l.getDefaultProject(),onChange:e=>this.onChange("projectName",e)}),(0,P.jsx)(Dd.C3,{refId:this.props.refId,projectName:t,metricType:e,templateSrv:l.templateSrv,datasource:l,templateVariableOptions:o,onChange:e=>this.onMetricTypeChange(e),children:e=>(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(Dd.pj,{labels:i,filters:a,onChange:e=>this.onChange("filters",e),variableOptionGroup:r})})}),(0,P.jsx)(Dd.x5,{label:"Title",children:(0,P.jsx)(Ld,{type:"text",className:"gf-form-input width-20",value:s,onChange:e=>this.onChange("title",e.target.value)})}),(0,P.jsx)(Dd.x5,{label:"Text",children:(0,P.jsx)(Ld,{type:"text",className:"gf-form-input width-20",value:n,onChange:e=>this.onChange("text",e.target.value)})}),Md||(Md=(0,P.jsx)(Dd.zI,{}))]})}}var zd,Vd,Bd=a("./.yarn/__virtual__/@grafana-experimental-virtual-044b968173/3/opt/drone/yarncache/@grafana-experimental-npm-0.0.2-canary.11-3ed391aeb7-6e8fa4bbdf.zip/node_modules/@grafana/experimental/index.js"),Ud=a("./public/app/plugins/datasource/cloudwatch/hooks.ts"),Hd=a("./public/app/plugins/datasource/cloudwatch/components/MetricStatEditor/index.ts");function qd(e){const{query:t,onChange:a,datasource:s}=e,[n,r]=(0,Ud.eH)(s);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Bd.EditorHeader,{children:(0,P.jsx)(Bd.InlineSelect,{label:"Region",value:n.find((e=>e.value===t.region)),placeholder:"Select region",allowCustomValue:!0,onChange:e=>{let{value:s}=e;return s&&a(Object.assign({},t,{region:s}))},options:n,isLoading:r})}),zd||(zd=(0,P.jsx)(Bd.Space,{v:.5})),(0,P.jsx)(Hd.e,Object.assign({},e,{disableExpressions:!0,onChange:e=>a(Object.assign({},t,e)),onRunQuery:()=>{}})),Vd||(Vd=(0,P.jsx)(Bd.Space,{v:.5})),(0,P.jsxs)(Bd.EditorRow,{children:[(0,P.jsx)(Bd.EditorField,{label:"Period",width:26,tooltip:"Minimum interval between points in seconds.",children:(0,P.jsx)(f.Input,{value:t.period||"",placeholder:"auto",onChange:e=>a(Object.assign({},t,{period:e.target.value}))})}),(0,P.jsx)(Bd.EditorField,{label:"Enable Prefix Matching",optional:!0,children:(0,P.jsx)(f.Switch,{value:t.prefixMatching,onChange:e=>{a(Object.assign({},t,{prefixMatching:e.currentTarget.checked}))}})}),(0,P.jsx)(Bd.EditorField,{label:"Action",optional:!0,children:(0,P.jsx)(f.Input,{disabled:!t.prefixMatching,value:t.actionPrefix||"",onChange:e=>a(Object.assign({},t,{actionPrefix:e.target.value}))})}),(0,P.jsx)(Bd.EditorField,{label:"Alarm Name",optional:!0,children:(0,P.jsx)(f.Input,{disabled:!t.prefixMatching,value:t.alarmNamePrefix||"",onChange:e=>a(Object.assign({},t,{alarmNamePrefix:e.target.value}))})})]})]})}var Wd=a("./public/app/core/components/PageHeader/PageHeader.tsx"),Gd=a("./public/app/core/components/EmptyListCTA/EmptyListCTA.tsx"),Zd=a("./public/app/core/components/TagFilter/TagFilter.tsx");const{Select:Qd}=f.LegacyForms,Kd=e=>{const{value:t,placeholder:a,className:s,isSearchable:n,onChange:r}=e,i=Yd(e),o=Jd(i,t),c=(0,l.useCallback)((e=>r(e.value)),[r]);return(0,P.jsx)(Qd,{menuShouldPortal:!0,className:s,isMulti:!1,isClearable:!1,backspaceRemovesValue:!1,onChange:c,options:i,isSearchable:n,maxMenuHeight:500,placeholder:a,noOptionsMessage:()=>"No options found",value:o})},Yd=e=>{let{variables:t=[],options:a}=e;return(0,l.useMemo)((()=>Array.isArray(t)&&0!==t.length?[{label:"Template Variables",options:t.map((e=>{let{name:t}=e;return{label:`$${t}`,value:`$${t}`}}))},...a]:a),[t,a])},Jd=(e,t)=>(0,l.useMemo)((()=>(e.every((e=>e.options))?(0,r.flatten)(e.map((e=>e.options))):e).find((e=>e.value===t))),[e,t]);var Xd=a("./public/app/plugins/datasource/loki/components/LokiQueryField.tsx"),eu=a("./public/app/plugins/datasource/loki/components/LokiOptionFields.tsx");const tu=(0,l.memo)((function(e){var t;const{expr:a,maxLines:s,instant:n,datasource:r,onChange:i}=e,o={refId:"",expr:a,maxLines:s,instant:n};return(0,P.jsx)("div",{className:"gf-form-group",children:(0,P.jsx)(Xd.n,{datasource:r,query:o,onChange:i,onRunQuery:()=>{},onBlur:()=>{},history:[],ExtraFieldElement:(0,P.jsx)(eu.JX,{lineLimitValue:(null==o||null===(t=o.maxLines)||void 0===t?void 0:t.toString())||"",resolution:o.resolution||1,query:o,onRunQuery:()=>{},onChange:i})})})}));var au=a("./public/app/core/components/Select/FolderPicker.tsx"),su=a("./public/app/features/dashboard/components/DashboardSettings/TimePickerSettings.tsx"),nu=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/QueryEditor/QueryEditor.tsx");const{SecretFormField:ru}=f.LegacyForms;var iu=a("./public/app/angular/promiseToDigest.ts");ou.$inject=["templateSrv"];function ou(e){return{restrict:"E",template:'\n<div class="dropdown cascade-open">\n<a ng-click="showActionsMenu()" class="query-part-name pointer dropdown-toggle" data-toggle="dropdown">{{part.def.type}}</a>\n<span>(</span><span class="query-part-parameters"></span><span>)</span>\n<ul class="dropdown-menu">\n  <li ng-repeat="action in partActions">\n    <a ng-click="triggerPartAction(action)">{{action.text}}</a>\n  </li>\n</ul>\n',scope:{part:"=",handleEvent:"&",debounce:"@"},link:function(t,a){const s=t.part,i=s.def,o=a.find(".query-part-parameters"),l=t.debounce;function c(e){const t=n()(this),a=t.next();a.val(s.params[e]),a.css("width",t.width()+16+"px"),t.hide(),a.show(),a.focus(),a.select();const r=a.data("typeahead");r&&(a.val(""),r.lookup())}function d(a){const r=n()(this),i=r.prev(),o=r.val();(""!==o||s.def.params[a].optional)&&(i.html(e.highlightVariablesAsHtml(o)),s.updateParam(r.val(),a),t.$apply((()=>{t.handleEvent({$event:{name:"part-param-changed"}})}))),r.hide(),i.show()}function u(e,t){13===t.which&&d.call(this,e)}function p(){this.style.width=8*(3+this.value.length)+"px"}function h(){(0,r.each)(i.params,((a,i)=>{if(a.optional&&s.params.length<=i)return;i>0&&n()("<span>, </span>").appendTo(o);const h=e.highlightVariablesAsHtml(s.params[i]),m=n()('<a class="graphite-func-param-link pointer">'+h+"</a>"),g=n()('<input type="text" class="hide input-mini tight-form-func-param"></input>');m.appendTo(o),g.appendTo(o),g.blur((0,r.partial)(d,i)),g.keyup(p),g.keypress((0,r.partial)(u,i)),m.click((0,r.partial)(c,i)),function(e,a,s){if(!a.options&&!a.dynamicLookup)return;e.attr("data-provide","typeahead"),e.typeahead({source:(e,s)=>{if(a.options){let e=a.options;return"int"===a.type&&(e=(0,r.map)(e,(e=>e.toString()))),e}t.$apply((()=>{t.handleEvent({$event:{name:"get-param-options"}}).then((e=>{const t=(0,r.map)(e,(e=>(0,r.escape)(e.value)));s(t)}))}))},minLength:0,items:1e3,updater:t=>(t=(0,r.unescape)(t),setTimeout((()=>{d.call(e[0],s)}),0),t)});const i=e.data("typeahead");i.lookup=function(){this.query=this.$element.val()||"";const e=this.source(this.query,n().proxy(this.process,this));return e?this.process(e):e},l&&(i.lookup=(0,r.debounce)(i.lookup,500,{leading:!0}))}(g,a,i)}))}t.partActions=[],t.showActionsMenu=()=>{(0,iu.E)(t)(t.handleEvent({$event:{name:"get-part-actions"}}).then((e=>{t.partActions=e})))},t.triggerPartAction=e=>{t.handleEvent({$event:{name:"action",action:e}})},o.empty(),h()}}}function lu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function cu(e){let t=this.query;return""===t||("/"===t[0]&&(t=t.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),e.toLowerCase().match(t.toLowerCase()))}Gc.ZP.directive("queryPartEditor",ou);class du{constructor(e,t,a,s){lu(this,"inputElement",void 0),lu(this,"linkElement",void 0),lu(this,"model",void 0),lu(this,"display",void 0),lu(this,"text",void 0),lu(this,"options",void 0),lu(this,"cssClass",void 0),lu(this,"cssClasses",void 0),lu(this,"allowCustom",void 0),lu(this,"labelMode",void 0),lu(this,"linkMode",void 0),lu(this,"cancelBlur",void 0),lu(this,"onChange",void 0),lu(this,"getOptions",void 0),lu(this,"optionCache",void 0),lu(this,"lookupText",void 0),lu(this,"placeholder",void 0),lu(this,"startOpen",void 0),lu(this,"debounce",void 0),this.$scope=e,this.$sce=a,this.templateSrv=s,this.inputElement=t.find("input").first(),this.linkElement=t.find("a").first(),this.linkMode=!0,this.cancelBlur=null,this.labelMode=!1,this.lookupText=!1,this.debounce=!1,e.$watch("ctrl.model",this.modelChanged.bind(this))}$onInit(){this.labelMode?this.cssClasses="gf-form-label "+this.cssClass:this.cssClasses="gf-form-input gf-form-input--dropdown "+this.cssClass,this.placeholder&&this.inputElement.attr("placeholder",this.placeholder),this.inputElement.attr("data-provide","typeahead"),this.inputElement.typeahead({source:this.typeaheadSource.bind(this),minLength:0,items:1e4,updater:this.typeaheadUpdater.bind(this),matcher:cu});const e=this.inputElement.data("typeahead");e.lookup=function(){this.query=this.$element.val()||"",this.source(this.query,this.process.bind(this))},this.debounce&&(e.lookup=(0,r.debounce)(e.lookup,500,{leading:!0})),this.linkElement.keydown((e=>{40!==e.keyCode&&13!==e.keyCode||this.linkElement.click()})),this.inputElement.keydown((e=>{13===e.keyCode&&setTimeout((()=>{this.inputElement.blur()}),300)})),this.inputElement.blur(this.inputBlur.bind(this)),this.startOpen&&setTimeout(this.open.bind(this),0)}getOptionsInternal(e){return(0,iu.E)(this.$scope)(Promise.resolve(this.getOptions({$query:e})))}isPromiseLike(e){return e&&"function"==typeof e.then}modelChanged(){(0,r.isObject)(this.model)?this.updateDisplay(this.model.text):this.lookupText?this.getOptionsInternal("").then((e=>{const t=(0,r.find)(e,{value:this.model});this.updateDisplay(t?t.text:this.model)})):this.updateDisplay(this.model)}typeaheadSource(e,t){this.getOptionsInternal(e).then((e=>{this.optionCache=e;const a=(0,r.map)(e,(e=>(0,r.escape)(e.text)));this.allowCustom&&""!==this.text&&-1===(0,r.indexOf)(a,this.text)&&a.unshift(this.text),t(a)}))}typeaheadUpdater(e){return e===this.text?(clearTimeout(this.cancelBlur),this.inputElement.focus(),e):(this.inputElement.val(e),this.switchToLink(!0),e)}switchToLink(e){this.linkMode&&!e||(clearTimeout(this.cancelBlur),this.cancelBlur=null,this.linkMode=!0,this.inputElement.hide(),this.linkElement.show(),this.updateValue(this.inputElement.val()))}inputBlur(){this.cancelBlur=setTimeout(this.switchToLink.bind(this),200)}updateValue(e){""!==(e=(0,r.unescape)(e))&&this.text!==e&&this.$scope.$apply((()=>{const t=(0,r.find)(this.optionCache,{text:e});t?((0,r.isObject)(this.model)?this.model=t:this.model=t.value,this.text=t.text):this.allowCustom&&((0,r.isObject)(this.model)?this.model.text=this.model.value=e:this.model=e,this.text=e),this.$scope.$$postDigest((()=>{this.$scope.$apply((()=>{this.onChange({$option:t})}))}))}))}updateDisplay(e){this.text=e,this.display=this.$sce.trustAsHtml(this.templateSrv.highlightVariablesAsHtml(e))}open(){this.inputElement.css("width",Math.max(this.linkElement.width(),80)+16+"px"),this.inputElement.show(),this.inputElement.focus(),this.linkElement.hide(),this.linkMode=!1;const e=this.inputElement.data("typeahead");e&&(this.inputElement.val(""),e.lookup())}}du.$inject=["$scope","$element","$sce","templateSrv"];Gc.ZP.directive("gfFormDropdown",(function(){return{restrict:"E",template:'\n<input type="text"\n  data-provide="typeahead"\n  class="gf-form-input"\n  spellcheck="false"\n  style="display:none">\n</input>\n<a ng-class="ctrl.cssClasses"\n   tabindex="1"\n   ng-click="ctrl.open()"\n   give-focus="ctrl.focus"\n   ng-bind-html="ctrl.display || \'&nbsp;\'">\n</a>\n',controller:du,bindToController:!0,controllerAs:"ctrl",scope:{model:"=",getOptions:"&",onChange:"&",cssClass:"@",allowCustom:"@",labelMode:"@",lookupText:"@",placeholder:"@",startOpen:"@",debounce:"@"}}}));function uu(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Gc.ZP.directive("grafanaScrollbar",(function(){return{restrict:"A",link:(e,t,a)=>{let s=t.parent();const r=t;a.grafanaScrollbar&&"scrollonroot"===a.grafanaScrollbar&&(s=r),s.addClass("baron baron__root"),n()('\n<div class="baron__track">\n  <div class="baron__bar"></div>\n</div>\n').appendTo(s),t.addClass("baron__scroller");const i={root:s[0],scroller:r[0],bar:".baron__bar",barOnCls:"_scrollbar",scrollingCls:"_scrolling",track:".baron__track",direction:"v"},o=qc()(i);e.$on("$destroy",(()=>{o.dispose()}))}}})),Gc.ZP.directive("jsonTree",[function(){return{restrict:"E",scope:{object:"=",startExpanded:"@",rootName:"@"},link:(e,t)=>{let a=e.startExpanded;"true"===e.startExpanded?a=2:"false"===e.startExpanded&&(a=1);const s={[e.rootName]:e.object},n=new f.JsonExplorer(s,a,{animateOpen:!0}).render(!0);t.append(n)}}}]);class pu{constructor(e,t){uu(this,"onChange",void 0),uu(this,"checked",void 0),uu(this,"show",void 0),uu(this,"id",void 0),uu(this,"label",void 0),this.$timeout=t,this.show=!0,this.id=e.$id}internalOnChange(){return this.$timeout((()=>this.onChange()))}}pu.$inject=["$scope","$timeout"],Gc.ZP.directive("gfFormSwitch",(function(){return{restrict:"E",controller:pu,controllerAs:"ctrl",bindToController:!0,scope:{checked:"=",label:"@",labelClass:"@",tooltip:"@",switchClass:"@",onChange:"&"},template:'\n<label for="check-{{ctrl.id}}" class="gf-form-switch-container">\n  <div class="gf-form-label {{ctrl.labelClass}}" ng-show="ctrl.label">\n    {{ctrl.label}}\n    <info-popover mode="right-normal" ng-if="ctrl.tooltip" position="top center">\n      {{ctrl.tooltip}}\n    </info-popover>\n  </div>\n  <div class="gf-form-switch {{ctrl.switchClass}}" ng-if="ctrl.show">\n    <input id="check-{{ctrl.id}}" type="checkbox" ng-model="ctrl.checked" ng-change="ctrl.internalOnChange()">\n    <span class="gf-form-switch__slider"></span>\n  </div>\n</label>\n'}})),Gc.ZP.directive("gfFormCheckbox",(function(){return{restrict:"E",controller:pu,controllerAs:"ctrl",bindToController:!0,scope:{checked:"=",label:"@",labelClass:"@",tooltip:"@",switchClass:"@",onChange:"&"},template:'\n<label for="check-{{ctrl.id}}" class="gf-form-switch-container">\n   <div class="gf-form-label {{ctrl.labelClass}}" ng-show="ctrl.label">\n    {{ctrl.label}}\n    <info-popover mode="right-normal" ng-if="ctrl.tooltip" position="top center">\n      {{ctrl.tooltip}}\n    </info-popover>\n  </div>\n  <div class="gf-form-checkbox {{ctrl.switchClass}}" ng-if="ctrl.show">\n    <input id="check-{{ctrl.id}}" type="checkbox" ng-model="ctrl.checked" ng-change="ctrl.internalOnChange()">\n    <span class="gf-form-switch__checkbox"></span>\n  </div>\n</label>\n'}})),Gc.ZP.directive("infoPopover",(function(){return{restrict:"E",template:'<icon name="\'info-circle\'" style="margin-left: 10px;" size="\'xs\'"></icon>',transclude:!0,link:(e,t,a,s,n)=>{const i=a.offset||"0 -10px",o=a.position||"right middle";let l="drop-help drop-hide-out-of-bounds";t.addClass("gf-form-help-icon"),a.wide&&(l+=" drop-wide"),a.mode&&t.addClass("gf-form-help-icon--"+a.mode),n(((a,s)=>{const n=document.createElement("div");n.className="markdown-html",(0,r.each)(a,(e=>{n.appendChild(e)}));const c={target:t[0],content:n,position:o,classes:l,openOn:"hover",hoverOpenDelay:400,tetherOptions:{offset:i,constraints:[{to:"window",attachment:"together",pin:!0}]}};e.$applyAsync((()=>{const t=new(kl())(c),a=e.$on("$destroy",(()=>{t.destroy(),a()}))}))}))}}})),Gc.ZP.directive("spectrumPicker",(function(){return{restrict:"E",require:"ngModel",scope:!0,replace:!0,template:'<color-picker color="ngModel.$viewValue" on-change="onColorChange"></color-picker>',link:(e,t,a,s)=>{e.ngModel=s,e.onColorChange=e=>{s.$setViewValue(e)}}}}));async function hu(e,t,s){const n=s.mode||"text",r=s.maxLines||10,i=void 0!==s.showGutter,o=s.tabSize||2,l=!s.behavioursEnabled||"true"===s.behavioursEnabled,d=!s.snippetsEnabled||"true"===s.snippetsEnabled,u=t.get(0),{default:p}=await a.e(5673).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/index.js",23));await a.e(3409).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/ext/language_tools.js",23)),await a.e(957).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/theme/textmate.js",23)),await a.e(1523).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/mode/text.js",23)),await a.e(6899).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/snippets/text.js",23)),await a.e(3711).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/mode/sql.js",23)),await a.e(6847).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/snippets/sql.js",23)),await a.e(2795).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/mode/sqlserver.js",23)),await a.e(1716).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/snippets/sqlserver.js",23)),await a.e(4079).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/mode/markdown.js",23)),await a.e(9705).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/snippets/markdown.js",23)),await a.e(718).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/mode/json.js",23)),await a.e(9064).then(a.t.bind(a,"../../opt/drone/yarncache/brace-npm-0.11.1-a66ecae2b2-def78159ab.zip/node_modules/brace/snippets/json.js",23)),await a.e(7428).then(a.t.bind(a,"./public/app/angular/components/code_editor/theme-grafana-dark.js",23));const h=p.edit(u),m=h.getSession(),g={maxLines:r,showGutter:i,tabSize:o,behavioursEnabled:l,highlightActiveLine:!1,showPrintMargin:!1,autoScrollEditorIntoView:!0};h.setOptions(g),h.$blockScrolling=1/0,h.renderer.setScrollMargin(10,10),h.renderer.setPadding(10),function(){let e="ace/theme/grafana-dark";c.ZP.bootData.user.lightTheme&&(e="ace/theme/textmate");h.setTheme(e)}(),function(t){if(p.acequire("ace/ext/language_tools"),h.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:d}),e.getCompleter()){const t=h;t.completers=t.completers.slice(),t.completers.push(e.getCompleter())}const a=`ace/mode/${t}`;m.setMode(a)}(n),b(e.content),t.addClass("gf-code-editor");const f=t.find("textarea");function b(e){h.setValue(e),h.clearSelection()}f.addClass("gf-form-input"),f.attr("aria-label",s.textareaLabel),e.codeEditorFocus&&setTimeout((()=>{f.focus();const e=f[0];if(e.setSelectionRange){const t=2*f.val().length;e.setSelectionRange(t,t)}}),100),m.on("change",(t=>{e.$apply((()=>{const t=h.getValue();e.content=t}))})),e.$watch("content",((t,a)=>{const s=h.getValue();t!==s&&t!==a&&e.$$postDigest((()=>{b(t)}))})),h.on("blur",(()=>{e.onChange()})),e.$on("$destroy",(()=>{h.destroy()})),h.commands.addCommand({name:"executeQuery",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:()=>{e.onChange()}})}Gc.ZP.directive("codeEditor",(function(){return{restrict:"E",template:"<div></div>",scope:{content:"=",datasource:"=",codeEditorFocus:"<",onChange:"&",getCompleter:"&"},link:hu}})),mu.$inject=["templateSrv"];function mu(e){return{restrict:"E",template:'\n<div class="dropdown cascade-open">\n<a ng-click="showActionsMenu()" class="query-part-name pointer dropdown-toggle" data-toggle="dropdown">{{part.label}}</a>\n<span>{{part.def.wrapOpen}}</span><span class="query-part-parameters"></span><span>{{part.def.wrapClose}}</span>\n<ul class="dropdown-menu">\n  <li ng-repeat="action in partActions">\n    <a ng-click="triggerPartAction(action)">{{action.text}}</a>\n  </li>\n</ul>\n',scope:{part:"=",handleEvent:"&",debounce:"@"},link:function(t,a){const s=t.part,i=s.def,o=a.find(".query-part-parameters"),l=t.debounce;let c=null;function d(e){const t=n()(this),a=t.next();a.val(s.params[e]),a.css("width",t.width()+16+"px"),t.hide(),a.show(),a.focus(),a.select();const r=a.data("typeahead");r&&(a.val(""),r.lookup())}function u(e,t){c=setTimeout((()=>{p(e,t)}),200)}function p(a,n){const r=a.prev(),i=a.val();(""!==i||s.def.params[n].optional)&&(r.html(e.highlightVariablesAsHtml(i)),s.updateParam(a.val(),n),t.$apply((()=>{t.handleEvent({$event:{name:"part-param-changed"}})}))),a.hide(),r.show()}function h(e,t){13===t.which&&p(n()(this),e)}function m(){this.style.width=8*(3+this.value.length)+"px"}function g(){(0,r.each)(i.params,((a,p)=>{if(a.optional&&s.params.length<=p)return;p>0&&n()("<span>"+i.separator+"</span>").appendTo(o);const g=e.highlightVariablesAsHtml(s.params[p]),f=n()('<a class="query-part__link">'+g+"</a>"),b=n()('<input type="text" class="hide input-mini"></input>');f.appendTo(o),b.appendTo(o),b.blur((0,r.partial)(u,b,p)),b.keyup(m),b.keypress((0,r.partial)(h,p)),f.click((0,r.partial)(d,p)),function(e,a,i){if(!a.options&&!a.dynamicLookup)return;e.attr("data-provide","typeahead"),e.typeahead({source:(e,n)=>{if(a.options){let e=a.options;return"int"===a.type&&(e=(0,r.map)(e,(e=>e.toString()))),e}t.$apply((()=>{t.handleEvent({$event:{name:"get-param-options",param:a}}).then((e=>{const t=(0,r.map)(e,(e=>(0,r.escape)(e.value)));-1===(0,r.indexOf)(t,s.params[i])&&t.unshift((0,r.escape)(s.params[i])),n(t)}))}))},minLength:0,items:1e3,updater:t=>(t=(0,r.unescape)(t))===s.params[i]?(clearTimeout(c),e.focus(),t):t});const o=e.data("typeahead");o.lookup=function(){this.query=this.$element.val()||"";const e=this.source(this.query,n().proxy(this.process,this));return e?this.process(e):e},l&&(o.lookup=(0,r.debounce)(o.lookup,500,{leading:!0}))}(b,a,p)}))}t.partActions=[],t.showActionsMenu=()=>{t.handleEvent({$event:{name:"get-part-actions"}}).then((e=>{t.partActions=e}))},t.triggerPartAction=e=>{t.handleEvent({$event:{name:"action",action:e}})},o.empty(),g()}}}Gc.ZP.directive("sqlPartEditor",mu),Gc.hF.directive("datasourceHttpSettings",(()=>({scope:{current:"=",suggestUrl:"@",noDirectAccess:"@",showForwardOAuthIdentityOption:"@"},templateUrl:"public/app/angular/partials/http_settings_next.html",link:{pre:e=>{e.showAccessOption="true"!==e.noDirectAccess,e.onChange=t=>{e.current=t}}}}))),Gc.hF.directive("datasourceTlsAuthSettings",(()=>({scope:{current:"="},templateUrl:"public/app/angular/partials/tls_auth_settings.html"})));var gu=a("./public/app/features/plugins/importPanelPlugin.ts");function fu(e,t,a,s){function n(e,t){if(e)return 0===e.indexOf("public")?e:t+"/"+e}function i(e,s){const r={name:"panel-plugin-"+e.panel.type,bindings:{dashboard:"=",panel:"=",row:"="},attrs:{dashboard:"dashboard",panel:"panel",class:"panel-height-helper"}},i=c.ZP.panels[e.panel.type];return(0,gu.U)(i.id).then((e=>{const s=e.angularPanelCtrl;return r.Component=s,!s||s.registered?r:s.templatePromise?s.templatePromise.then((e=>r)):(i&&(s.templateUrl=n(s.templateUrl,i.baseUrl)),s.templatePromise=function(e){if(e.template)return Promise.resolve(e.template);const s=a.get(e.templateUrl);return s?Promise.resolve(s):t.get(e.templateUrl).then((e=>e.data))}(s).then((e=>(s.templateUrl=null,s.template=`<grafana-panel ctrl="ctrl" class="panel-height-helper">${e}</grafana-panel>`,r))),s.templatePromise)}))}function o(t,a,s,i){if(i.notFound)a.empty();else{if(!i.Component)throw{message:"Failed to find exported plugin component for "+i.name};if(!i.Component.registered){const e=s.$normalize(i.name),t=function(e){return e.Component.templateUrl=n(e.Component.templateUrl,e.baseUrl),()=>({templateUrl:e.Component.templateUrl,template:e.Component.template,restrict:"E",controller:e.Component,controllerAs:"ctrl",bindToController:!0,scope:e.bindings,link:(e,t,a,s)=>{s.link&&s.link(e,t,a,s),s.init&&s.init()}})}(i);Gc.ZP.directive(e,t),i.Component.registered=!0}!function(t,a,s){const n=Qc().element(document.createElement(s.name));(0,r.each)(s.attrs,((e,t)=>{n.attr(t,e)})),e(n)(t),a.empty(),setTimeout((()=>{t.$applyAsync((()=>{a.append(n),setTimeout((()=>{t.$applyAsync((()=>{t.$broadcast(d.PanelEvents.componentDidMount.name)}))}))}))}))}(t,a,i)}}return{restrict:"E",link:(e,t,a)=>{(function(e,t){switch(t.type){case"query-ctrl":{const t=e.ctrl.datasource;return Promise.resolve({baseUrl:t.meta.baseUrl,name:"query-ctrl-"+t.meta.id,bindings:{target:"=",panelCtrl:"=",datasource:"="},attrs:{target:"ctrl.target","panel-ctrl":"ctrl",datasource:"ctrl.datasource"},Component:t.components.QueryCtrl})}case"annotations-query-ctrl":{const t=e.ctrl.currentDatasource.meta.baseUrl,a=e.ctrl.currentDatasource.meta.id;return(0,p.nL)(e.ctrl.currentDatasource.meta).then((e=>({baseUrl:t,name:"annotations-query-ctrl-"+a,bindings:{annotation:"=",datasource:"="},attrs:{annotation:"ctrl.currentAnnotation",datasource:"ctrl.currentDatasource"},Component:e.components.AnnotationsQueryCtrl})))}case"datasource-config-ctrl":{const t=e.ctrl.datasourceMeta,a=s.url();return(0,p.nL)(t).then((n=>(e.$watch("ctrl.current",(()=>{a===s.url()&&e.onModelChanged(e.ctrl.current)}),!0),{baseUrl:t.baseUrl,name:"ds-config-"+t.id,bindings:{meta:"=",current:"="},attrs:{meta:"ctrl.datasourceMeta",current:"ctrl.current"},Component:n.angularConfigCtrl})))}case"app-config-ctrl":{const t=e.ctrl.model;return(0,p.Av)(t).then((e=>({baseUrl:t.baseUrl,name:"app-config-"+t.id,bindings:{appModel:"=",appEditCtrl:"="},attrs:{"app-model":"ctrl.model","app-edit-ctrl":"ctrl"},Component:e.angularConfigCtrl})))}case"panel":return i(e);default:return Promise.reject({message:"Could not find component type: "+t.type})}})(e,a).then((s=>{o(e,t,a,s)})).catch((e=>{console.error("Plugin component error",e)}))}}}fu.$inject=["$compile","$http","$templateCache","$location"],Gc.ZP.directive("pluginComponent",fu);var bu=a("./public/app/features/live/index.ts");class vu{constructor(e,t,a,s,n,r){(0,m.setAngularLoader)(n),(0,m.setLegacyAngularInjector)(r),(0,m.setAppEvents)(ho.Z),(0,bu.Bp)(),e.init=()=>{e.contextSrv=s,e.appSubUrl=c.ZP.appSubUrl,e._=i(),t.init()},a.colors=f.colors,a.onAppEvent=function(e,t,s){let n;n="string"==typeof e?a.$on(e,t):a.$on(e.name,t);let r=this;1!==r.$id||s||console.warn("warning rootScope onAppEvent called without localscope"),s&&(r=s),r.$on("$destroy",n)},a.appEvent=(e,t)=>{"string"==typeof e?(a.$emit(e,t),ho.Z.emit(e,t)):(a.$emit(e.name,t),ho.Z.emit(e,t))},e.init()}}vu.$inject=["$scope","utilSrv","$rootScope","contextSrv","angularLoader","$injector"],Gc.ZP.directive("grafanaApp",(function(){return{restrict:"E",controller:vu,link:(e,t)=>{const a=n()("body");n().fn.modal.Constructor.prototype.enforceFocus=()=>{},ho.Z.on(dn.RW.Ai,(()=>{a.toggleClass("sidemenu-hidden")}));let s=(new Date).getTime(),r=!0;function i(){s=(new Date).getTime(),r||(r=!0,a.removeClass("view-mode--inactive"))}a.mousemove(i),a.keydown(i),document.addEventListener("wheel",i,{capture:!0,passive:!0}),document.addEventListener("visibilitychange",i),setInterval((function(){r&&a.hasClass("page-dashboard")&&(new Date).getTime()-s>3e5&&(r=!1,a.addClass("view-mode--inactive"))}),2e3),a.click((e=>{const s=n()(e.target);if(0===s.parents().length)return;a.find(".dropdown-menu-open").removeClass("dropdown-menu-open");const r=s.closest("[data-click-hide]");if(r.length){const e=r.parent();r.detach(),setTimeout((()=>{e.append(r)}),100)}const i=t.find(".popover");i.length>0&&0===s.parents(".graph-legend").length&&i.hide()}))}}}));a("../../opt/drone/yarncache/angular-route-npm-1.8.2-11a799fee9-08d84d6a35.zip/node_modules/angular-route/index.js"),a("../../opt/drone/yarncache/angular-sanitize-npm-1.8.2-378e7cdaed-df06ddee2a.zip/node_modules/angular-sanitize/index.js"),a("../../opt/drone/yarncache/angular-bindonce-npm-0.3.1-63597abd34-6a9adeb527.zip/node_modules/angular-bindonce/bindonce.js"),a("./public/vendor/bootstrap/bootstrap.js"),a("./public/vendor/angular-other/angular-strap.js");class xu{constructor(){(0,m.navigationLogger)("Patch angular",!1,"RouteProvider")}$get(){return this}}class yu{constructor(){var e,t,a;a=()=>{},(t="$get")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,(0,m.navigationLogger)("Patch angular",!1,"RouteParamsProvider")}}var wu=a("./public/app/angular/AngularLocationWrapper.ts");function ju(){Gc.hF.config(["$provide",e=>{e.decorator("$browser",["$delegate",e=>(e.onUrlChange=()=>{},e.url=()=>"",e)])}]),Gc.hF.config(["$provide",e=>{e.decorator("$location",["$delegate",e=>new wu.O])}]),Gc.hF.provider("$route",xu),Gc.hF.provider("$routeParams",yu)}var Cu=a("./public/app/features/manage-dashboards/services/ValidationSrv.ts"),ku=a("./public/app/features/panel/panellinks/link_srv.ts"),Su=a("./public/app/features/annotations/api.ts");class Tu{clearPromiseCaches(){(0,d.deprecationWarning)("annotations_srv.ts","clearPromiseCaches","DashboardQueryRunner")}getAnnotations(e){return(0,d.deprecationWarning)("annotations_srv.ts","getAnnotations","DashboardQueryRunner.getResult"),Promise.resolve({annotations:[],alertState:void 0})}getAlertStates(e){return(0,d.deprecationWarning)("annotations_srv.ts","getAlertStates","DashboardQueryRunner.getResult"),Promise.resolve(void 0)}getGlobalAnnotations(e){return(0,d.deprecationWarning)("annotations_srv.ts","getGlobalAnnotations","DashboardQueryRunner.getResult"),Promise.resolve([])}saveAnnotationEvent(e){return(0,d.deprecationWarning)("annotations_srv.ts","saveAnnotationEvent","api/saveAnnotation"),(0,Su.xD)(e)}updateAnnotationEvent(e){return(0,d.deprecationWarning)("annotations_srv.ts","updateAnnotationEvent","api/updateAnnotation"),(0,Su._E)(e)}deleteAnnotationEvent(e){return(0,d.deprecationWarning)("annotations_srv.ts","deleteAnnotationEvent","api/deleteAnnotation"),(0,Su.Dl)(e)}translateQueryResult(e,t){(0,d.deprecationWarning)("annotations_srv.ts","translateQueryResult","DashboardQueryRunner/utils/translateQueryResult"),e.snapshotData&&delete(e=(0,r.cloneDeep)(e)).snapshotData;for(const a of t)a.source=e,a.color=e.iconColor,a.type=e.name,a.isRegion=a.timeEnd&&a.time!==a.timeEnd;return t}}class Ou{constructor(e,t){var a,s,n;n=void 0,(s="modalScope")in(a=this)?Object.defineProperty(a,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[s]=n,this.$rootScope=e,this.$modal=t}init(){ho.h.subscribe(po.le,(e=>this.showModal(e.payload))),ho.h.subscribe(po.OW,this.hideModal.bind(this))}hideModal(){(0,d.deprecationWarning)("UtilSrv","hideModal","showModalReact"),this.modalScope&&this.modalScope.dismiss&&this.modalScope.dismiss()}showModal(e){(0,d.deprecationWarning)("UtilSrv","showModal","showModalReact"),this.modalScope&&this.modalScope.dismiss&&this.modalScope.dismiss(),this.modalScope=e.scope,e.model?(this.modalScope=this.$rootScope.$new(),this.modalScope.model=e.model):this.modalScope||(this.modalScope=this.$rootScope.$new());const t=this.$modal({modalClass:e.modalClass,template:e.src,templateHtml:e.templateHtml,persist:!1,show:!1,scope:this.modalScope,keyboard:!1,backdrop:e.backdrop});Promise.resolve(t).then((e=>{e.modal("show")}))}}function _u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ou.$inject=["$rootScope","$modal"];class Nu{constructor(){_u(this,"ngModuleDependencies",void 0),_u(this,"preBootModules",void 0),_u(this,"registerFunctions",void 0),this.preBootModules=[],this.ngModuleDependencies=[],this.registerFunctions={}}init(){Qc().module("grafana",[]).config(["$controllerProvider","$compileProvider","$filterProvider","$httpProvider","$provide",(e,t,a,s,n)=>{"development"!==c.vc.buildInfo.env&&t.debugInfoEnabled(!1),s.useApplyAsync(!0),this.registerFunctions.controller=e.register,this.registerFunctions.directive=t.directive,this.registerFunctions.factory=n.factory,this.registerFunctions.service=n.service,this.registerFunctions.filter=a.register,n.decorator("$http",["$delegate","$templateCache",(e,t)=>{const a=e.get;return e.get=(e,s)=>(e.match(/\.html$/)&&(t.get(e)||(e+="?v="+(new Date).getTime())),a(e,s)),e}])}]),this.ngModuleDependencies=["grafana.core","ngSanitize","$strap.directives","grafana","pasvaz.bindonce","react"],Gc.rb.forEach((e=>{this.useModule(e)})),Qc().module("grafana.services").service("dashboardLoaderSrv",T.Bg),Gc.ZP.factory("timeSrv",(()=>(0,Ga.$t)())),Gc.ZP.factory("templateSrv",(()=>(0,m.getTemplateSrv)())),Pd("footer",mo.$_,[]),Pd("icon",f.Icon,["name","size","type",["onClick",{watchDepth:"reference",wrapApply:!0}]]),Pd("spinner",f.Spinner,["inline"]),Pd("helpModal",go.B,[]),Pd("pageHeader",Wd.Z,["model","noTabs"]),Pd("emptyListCta",Gd.Z,["title","buttonIcon","buttonLink","buttonTitle",["onClick",{watchDepth:"reference",wrapApply:!0}],"proTip","proTipLink","proTipLinkTitle","proTipTarget","infoBox","infoBoxTitle"]),Pd("searchField",Ll,["query","autoFocus",["onChange",{watchDepth:"reference"}],["onKeyDown",{watchDepth:"reference"}]]),Pd("searchResults",Al.s,["results","editable","selectors",["onSelectionChanged",{watchDepth:"reference"}],["onTagSelected",{watchDepth:"reference"}],["onFolderExpanding",{watchDepth:"reference"}],["onToggleSelection",{watchDepth:"reference"}]]),Pd("searchFilters",Xl.f,["allChecked","canMove","canDelete","tagFilterOptions","selectedStarredFilter","selectedTagFilter",["onSelectAllChanged",{watchDepth:"reference"}],["deleteItem",{watchDepth:"reference"}],["moveTo",{watchDepth:"reference"}],["onStarredFilterChange",{watchDepth:"reference"}],["onTagFilterChange",{watchDepth:"reference"}]]),Pd("tagFilter",Zd.D,["tags",["onChange",{watchDepth:"reference"}],["tagOptions",{watchDepth:"reference"}]]),Pd("colorPicker",f.ColorPicker,["color",["onChange",{watchDepth:"reference",wrapApply:!0}]]),Pd("seriesColorPickerPopover",f.SeriesColorPickerPopoverWithTheme,["color","series","onColorChange","onToggleAxis"]),Pd("unitPicker",f.UnitPicker,["value","width",["onChange",{watchDepth:"reference",wrapApply:!0}]]),Pd("metricSelect",Kd,["options","onChange","value","isSearchable","className","placeholder",["variables",{watchDepth:"reference"}]]),Pd("cloudMonitoringQueryEditor",Fd.W,["target","onQueryChange","onExecuteQuery",["events",{watchDepth:"reference"}],["datasource",{watchDepth:"reference"}],["templateSrv",{watchDepth:"reference"}]]),Pd("cloudMonitoringAnnotationQueryEditor",Ed,["target","onQueryChange",["datasource",{watchDepth:"reference"}],["templateSrv",{watchDepth:"reference"}]]),Pd("cloudwatchAnnotationQueryEditor",qd,["query","onChange",["datasource",{watchDepth:"reference"}]]),Pd("secretFormField",ru,["value","isConfigured","inputWidth","labelWidth","aria-label",["onReset",{watchDepth:"reference",wrapApply:!0}],["onChange",{watchDepth:"reference",wrapApply:!0}]]),Pd("graphContextMenu",f.GraphContextMenu,["x","y","itemsGroup",["onClose",{watchDepth:"reference",wrapApply:!0}],["getContextMenuSource",{watchDepth:"reference",wrapApply:!0}],["timeZone",{watchDepth:"reference",wrapApply:!0}]]),Pd("drilldownLinksEditor",f.DataLinksInlineEditor,["value","links","suggestions",["onChange",{watchDepth:"reference",wrapApply:!0}]]),Pd("lokiAnnotationsQueryEditor",tu,["expr","maxLines","instant","onChange",["datasource",{watchDepth:"reference"}]]),Pd("datasourceHttpSettingsNext",f.DataSourceHttpSettings,["defaultUrl","showAccessOptions","dataSourceConfig","showForwardOAuthIdentityOption",["onChange",{watchDepth:"reference",wrapApply:!0}]]),Pd("folderPicker",au.E,["labelClass","rootName","enableCreateNew","enableReset","initialTitle","initialFolderId","dashboardId","onCreateFolder",["enterFolderCreation",{watchDepth:"reference",wrapApply:!0}],["exitFolderCreation",{watchDepth:"reference",wrapApply:!0}],["onLoad",{watchDepth:"reference",wrapApply:!0}],["onChange",{watchDepth:"reference",wrapApply:!0}]]),Pd("timePickerSettings",su.P,["renderCount","refreshIntervals","timePickerHidden","nowDelay","timezone",["onTimeZoneChange",{watchDepth:"reference",wrapApply:!0}],["onRefreshIntervalChange",{watchDepth:"reference",wrapApply:!0}],["onNowDelayChange",{watchDepth:"reference",wrapApply:!0}],["onHideTimePickerChange",{watchDepth:"reference",wrapApply:!0}]]),Pd("azureMonitorQueryEditor",nu.Z,["query",["datasource",{watchDepth:"reference"}],"onChange"]),Pd("clipboardButton",f.ClipboardButton,[["getText",{watchDepth:"reference",wrapApply:!0}]]),Gc.ZP.factory("backendSrv",(()=>(0,m.getBackendSrv)())),Gc.ZP.factory("contextSrv",(()=>Yn.Vt)),Gc.ZP.factory("dashboardSrv",(()=>(0,O.h4)())),Gc.ZP.factory("datasourceSrv",(()=>(0,m.getDataSourceSrv)())),Gc.ZP.factory("linkSrv",(()=>(0,ku.Bq)())),Gc.ZP.factory("validationSrv",(()=>Cu.t)),Gc.ZP.service("annotationsSrv",Tu),Gc.ZP.service("utilSrv",Ou),ju(),$.fn.tooltip.defaults.animation=!1}useModule(e){return this.preBootModules?this.preBootModules.push(e):(0,r.extend)(e,this.registerFunctions),this.ngModuleDependencies.push(e.name),e}bootstrap(){const e=Qc().bootstrap(document.getElementById("ngRoot"),this.ngModuleDependencies);return function(e){e.oldInvoke=e.invoke,e.invoke=(t,a,s,n)=>{var r;const i=null==s||null===(r=s.$scope)||void 0===r?void 0:r.$parent;var o,l,c,d,u,p,h,m,g;return i&&(i.panel&&(a.panel=i.panel),i.dashboard&&(a.dashboard=i.dashboard),null!==(o=i.ctrl)&&void 0!==o&&o.target&&(a.panelCtrl=i.ctrl,a.datasource=i.ctrl.datasource,a.target=i.ctrl.target),null!==(l=i.ctrl)&&void 0!==l&&l.datasourceMeta&&(a.meta=i.ctrl.datasourceMeta,a.current=i.ctrl.current),null!==(c=i.ctrl)&&void 0!==c&&c.currentAnnotation&&(a.annotation=i.ctrl.currentAnnotation,a.datasource=i.ctrl.currentDatasource),i.isAppConfigCtrl&&(a.appEditCtrl=i.ctrl,a.appModel=i.ctrl.model),null!==(d=i.$parent)&&void 0!==d&&null!==(u=d.$parent)&&void 0!==u&&null!==(p=u.ctrl)&&void 0!==p&&p.appModel&&(a.appModel=null===(h=i.$parent)||void 0===h||null===(m=h.$parent)||void 0===m||null===(g=m.ctrl)||void 0===g?void 0:g.appModel)),e.oldInvoke(t,a,s,n)}}(e),e.invoke((()=>(this.preBootModules.forEach((e=>{(0,r.extend)(e,this.registerFunctions)})),()=>{}))),e}}var Iu,Pu=a("./public/app/core/utils/connectWithReduxStore.tsx");const Mu=(0,Pu.k)((e=>(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(f.ModalsProvider,Object.assign({},e,{children:Iu||(Iu=(0,P.jsx)(f.ModalRoot,{}))}))})));var Fu=a("./public/app/features/dashboard/utils/panel.ts");function Au(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Du{constructor(){Au(this,"reactModalRoot",document.body),Au(this,"reactModalNode",document.createElement("div")),Au(this,"onReactModalDismiss",(()=>{o.unmountComponentAtNode(this.reactModalNode),this.reactModalRoot.removeChild(this.reactModalNode)}))}init(){ho.Z.subscribe(po.VJ,(e=>this.showConfirmModal(e.payload))),ho.Z.subscribe(po.Dn,(e=>this.showModalReact(e.payload))),ho.Z.subscribe(m.CopyPanelEvent,(e=>(0,Fu.bY)(e.payload)))}showModalReact(e){const{component:t,props:a}=e,s={component:t,props:Object.assign({},a,{isOpen:!0,onDismiss:this.onReactModalDismiss})},n=l.createElement((0,uo.ER)(Mu),s);this.reactModalRoot.appendChild(this.reactModalNode),o.render(n,this.reactModalNode)}showConfirmModal(e){const{confirmText:t,onConfirm:a=(()=>{}),text2:s,altActionText:n,onAltAction:r,noText:i,text:c,text2htmlBind:u,yesText:p="Yes",icon:h,title:m="Confirm"}=e,g={confirmText:p,confirmationText:t,icon:h,title:m,body:c,description:s&&u?d.textUtil.sanitize(s):s,isOpen:!0,dismissText:i,onConfirm:()=>{a(),this.onReactModalDismiss()},onDismiss:this.onReactModalDismiss,onAlternative:r?()=>{r(),this.onReactModalDismiss()}:void 0,alternativeText:n},b={component:f.ConfirmModal,props:g},v=l.createElement((0,uo.ER)(Mu),b);this.reactModalRoot.appendChild(this.reactModalNode),o.render(v,this.reactModalNode)}}var $u=a("./public/app/features/variables/editor/VariableSectionHeader.tsx"),Lu=a("./public/app/plugins/datasource/influxdb/components/useUniqueId.ts");function Ru(e){let{value:t,name:a,tooltip:s,onChange:n,ariaLabel:r}=e;const i=(0,Lu.L)();return(0,P.jsx)(f.InlineField,{label:a,labelWidth:20,tooltip:s,children:(0,P.jsx)(f.InlineSwitch,{id:`var-switch-${i}`,label:a,value:t,onChange:n,"aria-label":r})})}var Eu,zu=a("./public/app/features/variables/editor/VariableTextField.tsx");const Vu=e=>{var t;let{onMultiChanged:a,onPropChange:s,variable:n}=e;const r=(0,l.useCallback)((e=>{a((0,ss.GT)(n),e.target.checked)}),[a,n]),i=(0,l.useCallback)((e=>{s({propName:"includeAll",propValue:e.target.checked})}),[s]),o=(0,l.useCallback)((e=>{s({propName:"allValue",propValue:e.currentTarget.value})}),[s]);return(0,P.jsxs)(f.VerticalGroup,{spacing:"none",children:[Eu||(Eu=(0,P.jsx)($u.e,{name:"Selection options"})),(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(Ru,{value:n.multi,name:"Multi-value",tooltip:"Enables multiple values to be selected at the same time",onChange:r,ariaLabel:I.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsMultiSwitch})}),(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(Ru,{value:n.includeAll,name:"Include All option",tooltip:"Enables an option to include all variables",onChange:i,ariaLabel:I.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsIncludeAllSwitch})}),n.includeAll&&(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(zu.V,{value:null!==(t=n.allValue)&&void 0!==t?t:"",onChange:o,name:"Custom all value",placeholder:"blank = auto",ariaLabel:I.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInput,labelWidth:20})})]})};Vu.displayName="SelectionOptionsEditor";var Bu=a("./public/app/features/variables/state/sharedReducer.ts"),Uu=a("./public/app/features/variables/editor/LegacyVariableQueryEditor.tsx");function Hu(e){let{datasource:t,query:a,onChange:s}=e;const n=(0,l.useCallback)((e=>{s({refId:"StandardVariableQuery",query:e})}),[s]);return(0,P.jsx)(Uu.R,{query:a.query,onChange:n,datasource:t,templateSrv:(0,m.getTemplateSrv)()})}const qu=(e,t)=>async(a,s)=>{try{var n;if(!(0,qa.A3)(s()))return;const r=(0,Ba.E0)(e.id,s());s().templating.editor.id===r.id&&a((0,Es.PV)({errorProp:"update"}));const i=await(0,m.getDataSourceSrv)().get(null!==(n=r.datasource)&&void 0!==n?n:"");await new Promise(((a,s)=>{const n=new Wc.w0,r=function(e,t,a){return{next:s=>s.state===d.LoadingState.Error?(a.unsubscribe(),void t(s.error)):s.state===d.LoadingState.Done?(a.unsubscribe(),void e()):void 0,error:e=>{a.unsubscribe(),t(e)},complete:()=>{a.unsubscribe(),e()}}}(a,s,n),o=bs().getResponse(e).subscribe(r);n.add(o),bs().queueRequest({identifier:e,datasource:i,searchFilter:t})}))}catch(t){const n=(0,m.toDataQueryError)(t);throw s().templating.editor.id===e.id&&a((0,Es.Sg)({errorProp:"update",errorText:n.message})),n}},Wu=(e,t)=>async(a,s)=>{try{var n;const r=null===(n=s().templating.editor.extended)||void 0===n?void 0:n.dataSource,i=await(0,m.getDataSourceSrv)().get(null!=t?t:"");r&&r.type!==(null==i?void 0:i.type)&&a((0,Bu.Pl)((0,ss.Y6)(e,{propName:"query",propValue:""}))),a((0,Es.z7)({propName:"dataSource",propValue:i}));const o=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.nL;if((0,Za.d7)(e))return e.variables.editor;if((0,Za.X7)(e)){var a;const s=await t(e.meta);if(!s.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return null!==(a=s.components.QueryEditor)&&void 0!==a?a:null}return(0,Za.Ju)(e)?Hu:(0,Za.R)(e)?null!==(s=(await t(e.meta)).components.VariableQueryEditor)&&void 0!==s?s:Uu.R:null;var s}(i);a((0,Es.z7)({propName:"VariableQueryEditor",propValue:o}))}catch(e){console.error(e)}};function Gu(e){if("object"!=typeof e)return{query:e};return Object.keys(e).reduce(((t,a)=>{const s=e[a];if("object"!=typeof s)return t[a]=s,t;const n=Gu(s);for(let e in n)n.hasOwnProperty(e)&&(t[`${a}_${e}`]=n[e]);return t}),{})}var Zu=a("./public/app/features/variables/editor/VariableSelectField.tsx");const Qu=[{label:"On dashboard load",value:Ua.Bd.onDashboardLoad},{label:"On time range change",value:Ua.Bd.onTimeRangeChanged}];function Ku(e){let{onChange:t,refresh:a}=e;const s=(0,l.useMemo)((()=>{var e;return null!==(e=Qu.find((e=>e.value===a)))&&void 0!==e?e:Qu[0]}),[a]);return(0,P.jsx)(Zu.u,{name:"Refresh",value:s,options:Qu,onChange:t,labelWidth:10,ariaLabel:I.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRefreshSelect,tooltip:"When to update the values of this variable."})}const Yu=[{label:"Disabled",value:Ua.$U.disabled},{label:"Alphabetical (asc)",value:Ua.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:Ua.$U.alphabeticalDesc},{label:"Numerical (asc)",value:Ua.$U.numericalAsc},{label:"Numerical (desc)",value:Ua.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:Ua.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:Ua.$U.alphabeticalCaseInsensitiveDesc}];function Ju(e){let{onChange:t,sort:a}=e;const s=(0,l.useMemo)((()=>{var e;return null!==(e=Yu.find((e=>e.value===a)))&&void 0!==e?e:Yu[0]}),[a]);return(0,P.jsx)(Zu.u,{name:"Sort",value:s,options:Yu,onChange:t,labelWidth:10,ariaLabel:I.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelect,tooltip:"How to sort the values of this variable."})}var Xu,ep;function tp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ap={initQueryVariableEditor:e=>async(t,a)=>{const s=(0,Ba.E0)(e.id,a());await t(Wu((0,ss.GT)(s),s.datasource))},changeQueryVariableDataSource:Wu,changeQueryVariableQuery:(e,t,a)=>async(s,n)=>{const r=(0,Ba.E0)(e.id,n());if(function(e,t){if("string"==typeof t&&t.match(new RegExp("\\$"+e+"(/| |$)")))return!0;const a=Gu(t);for(let t in a)if(a.hasOwnProperty(t)){const s=a[t];if("string"==typeof s&&s.match(new RegExp("\\$"+e+"(/| |$)")))return!0}return!1}(r.name,t)){const e="Query cannot contain a reference to itself. Variable: $"+r.name;s((0,Es.Sg)({errorProp:"query",errorText:e}))}else s((0,Es.PV)({errorProp:"query"})),s((0,Bu.Pl)((0,ss.Y6)(e,{propName:"query",propValue:t}))),a?s((0,Bu.Pl)((0,ss.Y6)(e,{propName:"definition",propValue:a}))):"string"==typeof t&&s((0,Bu.Pl)((0,ss.Y6)(e,{propName:"definition",propValue:t}))),await s((0,ns.Rk)(e))},changeVariableMultiValue:ns.Z7},sp=(0,on.connect)((e=>({editor:e.templating.editor})),ap);class np extends l.PureComponent{constructor(){super(...arguments),tp(this,"state",{regex:null,tagsQuery:null,tagValuesQuery:null}),tp(this,"onDataSourceChange",(e=>{this.props.onPropChange({propName:"datasource",propValue:e.isDefault?null:(0,d.getDataSourceRef)(e)})})),tp(this,"onLegacyQueryChange",(async(e,t)=>{this.props.variable.query!==e&&this.props.changeQueryVariableQuery((0,ss.GT)(this.props.variable),e,t)})),tp(this,"onQueryChange",(async e=>{if(this.props.variable.query!==e){let t="";e&&e.hasOwnProperty("query")&&"string"==typeof e.query&&(t=e.query),this.props.changeQueryVariableQuery((0,ss.GT)(this.props.variable),e,t)}})),tp(this,"onRegExChange",(e=>{this.setState({regex:e.currentTarget.value})})),tp(this,"onRegExBlur",(async e=>{const t=e.currentTarget.value;this.props.variable.regex!==t&&this.props.onPropChange({propName:"regex",propValue:t,updateOptions:!0})})),tp(this,"onRefreshChange",(e=>{this.props.onPropChange({propName:"refresh",propValue:e.value})})),tp(this,"onSortChange",(async e=>{this.props.onPropChange({propName:"sort",propValue:e.value,updateOptions:!0})})),tp(this,"onSelectionOptionsChange",(async e=>{let{propValue:t,propName:a}=e;this.props.onPropChange({propName:a,propValue:t,updateOptions:!0})})),tp(this,"renderQueryEditor",(()=>{const{editor:e,variable:t}=this.props;if(!e.extended||!e.extended.dataSource||!e.extended.VariableQueryEditor)return null;const a=t.query,s=e.extended.dataSource,n=e.extended.VariableQueryEditor;if((0,Za.NX)(n,s))return(0,P.jsx)(n,{datasource:s,query:a,templateSrv:(0,m.getTemplateSrv)(),onChange:this.onLegacyQueryChange});const r=(0,Ga.$t)().timeRange();return(0,Za.$7)(n,s)?(0,P.jsx)(n,{datasource:s,query:a,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:d.LoadingState.Done,timeRange:r},range:r,onBlur:()=>{},history:[]}):null}))}async componentDidMount(){await this.props.initQueryVariableEditor((0,ss.GT)(this.props.variable))}componentDidUpdate(e){e.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,ss.GT)(this.props.variable),this.props.variable.datasource)}render(){var e;return(0,P.jsxs)(f.VerticalGroup,{spacing:"xs",children:[Xu||(Xu=(0,P.jsx)($u.e,{name:"Query Options"})),(0,P.jsxs)(f.VerticalGroup,{spacing:"lg",children:[(0,P.jsxs)(f.VerticalGroup,{spacing:"none",children:[(0,P.jsxs)(f.InlineFieldRow,{children:[(0,P.jsx)(f.InlineField,{label:"Data source",labelWidth:20,htmlFor:"data-source-picker",children:(0,P.jsx)(m.DataSourcePicker,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0})}),(0,P.jsx)(Ku,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh})]}),(0,P.jsx)("div",{className:A.css`
                flex-direction: column;
                width: 100%;
              `,children:this.renderQueryEditor()}),(0,P.jsx)(zu.V,{value:null!==(e=this.state.regex)&&void 0!==e?e:this.props.variable.regex,name:"Regex",placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,labelWidth:20,tooltip:ep||(ep=(0,P.jsxs)("div",{children:["Optional, if you want to extract part of a series name or metric node segment. Named capture groups can be used to separate the display text and value (",(0,P.jsx)("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank",children:"see examples"}),")."]})),ariaLabel:I.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInput,grow:!0}),(0,P.jsx)(Ju,{onChange:this.onSortChange,sort:this.props.variable.sort})]}),(0,P.jsx)(Vu,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue})]})]})}}const rp=sp(np);let ip;!function(e){e[e.moveUp=38]="moveUp",e[e.moveDown=40]="moveDown",e[e.select=32]="select",e[e.cancel=27]="cancel",e[e.selectAndClose=13]="selectAndClose"}(ip||(ip={}));const op=["value","id","onNavigate"];function lp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class cp extends l.PureComponent{constructor(){super(...arguments),lp(this,"onKeyDown",(e=>{if(ip[e.keyCode]){const t=e.ctrlKey||e.metaKey||e.shiftKey;this.props.onNavigate(e.keyCode,t),e.preventDefault()}})),lp(this,"onChange",(e=>{this.props.onChange(e.target.value)}))}render(){const e=this.props,{value:t}=e,a=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,op);return(0,P.jsx)("input",Object.assign({},a,{ref:e=>{e&&(e.focus(),e.setAttribute("style",`width:${Math.max(e.width,150)}px`))},type:"text",className:"gf-form-input",value:null!=t?t:"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:"Enter variable value"}))}}const dp=(e,t)=>async(a,s)=>e===ip.cancel?await a(pp()):e===ip.select?a(mp(t)):e===ip.selectAndClose?(a(mp(t,!0)),await a(pp())):e===ip.moveDown?a((0,Rs.Ew)(1)):e===ip.moveUp?a((0,Rs.Ew)(-1)):void 0,up=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return async(t,a)=>{const{id:s,queryValue:n}=a().templating.optionsPicker,{query:i,options:o}=(0,Ba.E0)(s,a());if(t((0,Rs.Ug)(e)),(0,r.trim)(n)!==(0,r.trim)(e))return(0,qa.bf)(i)?gp(t,a,e):t((0,Rs.ss)(o))}},pp=e=>async(t,a)=>{const s=a().templating.optionsPicker,n=(0,Ba.E0)(s.id,a()),r={option:fp(s)},i={propName:"queryValue",propValue:s.queryValue};t((0,Bu.Q8)((0,ss.Y6)(n,r))),t((0,Bu.Pl)((0,ss.Y6)(n,i)));const o=(0,Ba.E0)(s.id,a());if(t((0,Rs.nn)()),(0,qa.Tt)(n)!==(0,qa.Tt)(o))return e?e(o):await(async e=>{const t=_.z.get(e.type);await t.setValue(e,e.current,!0)})(o)},hp=(e,t)=>{let{id:a}=e;return async(e,s)=>{const n=s().templating.optionsPicker;n.id&&n.id!==a&&await e(pp(t));const r=(0,Ba.E0)(a,s());e((0,Rs.aN)(r))}},mp=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(a,s)=>{const{highlightIndex:n,options:r}=s().templating.optionsPicker,i=r[n];a((0,Rs._M)({option:i,forceSelect:t,clearOthers:e}))}},gp=(0,r.debounce)((async(e,t,a)=>{try{const{id:s}=t().templating.optionsPicker,n=(0,Ba.E0)(s,t()),r=_.z.get(n.type);await r.updateOptions(n,a);const i=(0,Ba.E0)(s,t());e((0,Rs.wF)(i.options))}catch(e){console.error(e)}}),500);function fp(e){const{options:t,selectedValues:a,queryValue:s,multi:n}=e;if(0===t.length&&s&&s.length>0)return{text:s,value:s,selected:!1};if(!n)return a.find((e=>e.selected));const r=[],i=[];for(const e of a)e.selected&&(r.push(e.text.toString()),i.push(e.value.toString()));return{value:i,text:r,selected:!0}}var bp,vp;const xp=["multi","values","highlightIndex","selectedValues","onToggle","onToggleAll"];function yp(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class wp extends l.PureComponent{constructor(){super(...arguments),yp(this,"onToggle",(e=>t=>{const a=t.shiftKey||t.ctrlKey||t.metaKey;this.handleEvent(t),this.props.onToggle(e,a)})),yp(this,"onToggleAll",(e=>{this.handleEvent(e),this.props.onToggleAll()}))}handleEvent(e){e.preventDefault(),e.stopPropagation()}render(){const e=this.props,{multi:t,values:a}=e,s=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,xp);return(0,P.jsx)("div",{className:""+(t?"variable-value-dropdown multi":"variable-value-dropdown single"),children:(0,P.jsx)("div",{className:"variable-options-wrapper",children:(0,P.jsxs)("ul",Object.assign({className:jp,"aria-label":I.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown},s,{children:[this.renderMultiToggle(),a.map(((e,t)=>this.renderOption(e,t)))]}))})})}renderOption(e,t){const{highlightIndex:a}=this.props,s=e.selected?"variable-option pointer selected":"variable-option pointer",n=t===a?`${s} highlighted`:s;return(0,P.jsx)("li",{children:(0,P.jsxs)("a",{role:"checkbox","aria-checked":e.selected,className:n,onClick:this.onToggle(e),children:[bp||(bp=(0,P.jsx)("span",{className:"variable-option-icon"})),(0,P.jsx)("span",{"data-testid":I.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${e.text}`),children:e.text})]})},`${e.value}`)}renderMultiToggle(){const{multi:e,selectedValues:t}=this.props;return e?(0,P.jsx)(f.Tooltip,{content:"Clear selections",placement:"top",children:(0,P.jsxs)("a",{className:""+(t.length>1?"variable-options-column-header many-selected":"variable-options-column-header"),role:"checkbox","aria-checked":t.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top",children:[vp||(vp=(0,P.jsx)("span",{className:"variable-option-icon"})),"Selected (",t.length,")"]})}):null}}const jp=(0,A.cx)("variable-options-column",A.css`
    list-style-type: none;
  `);var Cp,kp=a("./public/app/features/variables/shared/formatVariable.ts");const Sp=e=>{var t,a;let{loading:s,onClick:n,text:r,onCancel:i,id:o}=e;const c=(0,f.useStyles)(_p),d=(0,l.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),n()}),[n]);return s?(0,P.jsxs)("div",{className:c.container,"data-testid":I.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${r}`),title:r,id:o,children:[t||(t=(0,P.jsx)(Tp,{text:r})),a||(a=(0,P.jsx)(Op,{onCancel:i}))]}):(0,P.jsxs)("button",{onClick:d,className:c.container,"data-testid":I.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${r}`),"aria-expanded":!1,"aria-controls":`options-${o}`,id:o,title:r,children:[(0,P.jsx)(Tp,{text:r}),Cp||(Cp=(0,P.jsx)(f.Icon,{"aria-hidden":!0,name:"angle-down",size:"sm"}))]})},Tp=e=>{let{text:t}=e;const a=(0,f.useStyles)(_p);return(0,P.jsx)("span",{className:a.textAndTags,children:t})},Op=e=>{let{onCancel:t}=e;const a=(0,l.useCallback)((e=>{e.preventDefault(),t()}),[t]);return(0,P.jsx)(f.Tooltip,{content:"Cancel query",children:(0,P.jsx)(f.Icon,{className:"spin-clockwise",name:"sync",size:"xs",onClick:a,"aria-label":I.wl.components.LoadingIndicator.icon})})},_p=e=>({container:A.css`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${e.spacing.sm};
    background-color: ${e.colors.formInputBg};
    border: 1px solid ${e.colors.formInputBorder};
    border-radius: ${e.border.radius.sm};
    display: flex;
    align-items: center;
    color: ${e.colors.text};
    height: ${e.height.md}px;

    .label-tag {
      margin: 0 5px;
    }
  `,textAndTags:A.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${e.spacing.xxs};
    user-select: none;
  `});function Np(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ip=()=>{const e={openOptions:hp,commitChangesToVariable:pp,filterOrSearchOptions:up,toggleAllOptions:Rs.iQ,toggleOption:Rs._M,navigateOptions:dp},t=(0,on.connect)((e=>({picker:e.templating.optionsPicker})),e);class a extends l.PureComponent{constructor(){super(...arguments),Np(this,"onShowOptions",(()=>this.props.openOptions((0,ss.GT)(this.props.variable),this.props.onVariableChange))),Np(this,"onHideOptions",(()=>this.props.commitChangesToVariable(this.props.onVariableChange))),Np(this,"onToggleOption",((e,t)=>{((0,Za.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(e,t)})),Np(this,"onToggleSingleValueVariable",((e,t)=>{this.props.toggleOption({option:e,clearOthers:t,forceSelect:!1}),this.onHideOptions()})),Np(this,"onToggleMultiValueVariable",((e,t)=>{this.props.toggleOption({option:e,clearOthers:t,forceSelect:!1})})),Np(this,"onCancel",(()=>{bs().cancelRequest((0,ss.GT)(this.props.variable))}))}render(){const{variable:e,picker:t}=this.props,a=t.id===e.id;return(0,P.jsx)("div",{className:"variable-link-wrapper",children:a?this.renderOptions(t):this.renderLink(e)})}renderLink(e){const t=(0,kp.y)(e),a=e.state===d.LoadingState.Loading;return(0,P.jsx)(Sp,{id:e.id,text:t,onClick:this.onShowOptions,loading:a,onCancel:this.onCancel})}renderOptions(e){const{id:t}=this.props.variable;return(0,P.jsxs)(f.ClickOutsideWrapper,{onClick:this.onHideOptions,children:[(0,P.jsx)(cp,{id:t,value:e.queryValue,onChange:this.props.filterOrSearchOptions,onNavigate:this.props.navigateOptions,"aria-expanded":!0,"aria-controls":`options-${t}`}),(0,P.jsx)(wp,{values:e.options,onToggle:this.onToggleOption,onToggleAll:this.props.toggleAllOptions,highlightIndex:e.highlightIndex,multi:e.multi,selectedValues:e.selectedValues,id:`options-${t}`})]})}}const s=t(a);return s.displayName="OptionsPicker",s},Pp=["index","id","state","global","queryValue"];const Mp=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:os,reducer:us,picker:Ip(),editor:rp,dependsOn:(e,t)=>{var a;return(0,qa.QI)(e.query,null===(a=e.datasource)||void 0===a?void 0:a.uid,e.regex,t.name)},setValue:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,Ha.WI)((0,ns.Fz)((0,ss.GT)(e),t,a))},setValueFromUrl:async(e,t)=>{await(0,Ha.WI)((0,ns.Ci)((0,ss.GT)(e),t))},updateOptions:async(e,t)=>{await(0,Ha.WI)(qu((0,ss.GT)(e),t))},getSaveModel:e=>{const t=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}((0,r.cloneDeep)(e),Pp);return e.refresh!==Ua.Bd.never?Object.assign({},t,{options:[]}):t},getValueForUrl:e=>(0,qa.HY)(e)?is.xk:e.current.value}),Fp=Object.assign({},Ua.Eg,{type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}}),Ap=(0,rs.oM)({name:"templating/custom",initialState:ss.sX,reducers:{createCustomOptionsFromQuery:(e,t)=>{var a;const s=(0,ss.ir)(e,t.payload.id),{includeAll:n,query:r}=s,i=(null!==(a=r.match(/(?:\\,|[^,])+/g))&&void 0!==a?a:[]).map((e=>{var t;e=e.replace(/\\,/g,",");const a=null!==(t=/^(.+)\s:\s(.+)$/g.exec(e))&&void 0!==t?t:[];if(3===a.length){const[,e,t]=a;return{text:e.trim(),value:t.trim(),selected:!1}}return{text:e.trim(),value:e.trim(),selected:!1}}));n&&i.unshift({text:is.xk,value:is.r2,selected:!1}),s.options=i}}}),Dp=Ap.reducer,{createCustomOptionsFromQuery:$p}=Ap.actions;var Lp,Rp=a("./public/app/features/variables/editor/VariableTextAreaField.tsx");function Ep(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class zp extends l.PureComponent{constructor(){super(...arguments),Ep(this,"onChange",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value})})),Ep(this,"onSelectionOptionsChange",(async e=>{let{propName:t,propValue:a}=e;this.props.onPropChange({propName:t,propValue:a,updateOptions:!0})})),Ep(this,"onBlur",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value,updateOptions:!0})}))}render(){return(0,P.jsxs)(f.VerticalGroup,{spacing:"xs",children:[Lp||(Lp=(0,P.jsx)($u.e,{name:"Custom options"})),(0,P.jsxs)(f.VerticalGroup,{spacing:"md",children:[(0,P.jsx)(f.VerticalGroup,{spacing:"none",children:(0,P.jsx)(Rp.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:50,labelWidth:27})}),(0,P.jsx)(Vu,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue})," "]})]})}}const Vp={changeVariableMultiValue:ns.Z7},Bp=(0,Pu.R)(zp,((e,t)=>({})),Vp),Up=["index","id","state","global"];const Hp=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:Fp,reducer:Dp,picker:Ip(),editor:Bp,dependsOn:()=>!1,setValue:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,Ha.WI)((0,ns.Fz)((0,ss.GT)(e),t,a))},setValueFromUrl:async(e,t)=>{await(0,Ha.WI)((0,ns.Ci)((0,ss.GT)(e),t))},updateOptions:async e=>{var t;await(0,Ha.WI)((t=(0,ss.GT)(e),async e=>{await e($p((0,ss.Y6)(t))),await e((0,ns.xQ)(t))}))},getSaveModel:e=>function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}((0,r.cloneDeep)(e),Up),getValueForUrl:e=>(0,qa.HY)(e)?is.xk:e.current.value}),qp=Object.assign({},Ua.Eg,{type:"textbox",query:"",current:{},options:[],originalQuery:null}),Wp=(0,rs.oM)({name:"templating/textbox",initialState:ss.sX,reducers:{createTextBoxOptions:(e,t)=>{const a=(0,ss.ir)(e,t.payload.id),s={text:a.query.trim(),value:a.query.trim(),selected:!1};a.options=[s],a.current=s}}}),Gp=Wp.reducer,{createTextBoxOptions:Zp}=Wp.actions;function Qp(e){let{variable:t,onVariableChange:a}=e;const s=(0,on.useDispatch)(),[n,r]=(0,l.useState)(t.current.value);(0,l.useEffect)((()=>{r(t.current.value)}),[t]);const i=(0,l.useCallback)((()=>{t.current.value!==n&&(s((0,Bu.Pl)((0,ss.Y6)({id:t.id,type:t.type},{propName:"query",propValue:n}))),a?a(Object.assign({},t,{current:Object.assign({},t.current,{value:n})})):_.z.get(t.type).updateOptions(t))}),[t,n,s,a]),o=(0,l.useCallback)((e=>r(e.target.value)),[r]);return(0,P.jsx)(f.Input,{type:"text",value:n,onChange:o,onBlur:e=>i(),onKeyDown:e=>{13===e.keyCode&&(e.preventDefault(),i())},placeholder:"Enter variable value",id:t.id})}var Kp;function Yp(e){let{onPropChange:t,variable:{query:a}}=e;const s=(0,l.useCallback)(((e,a)=>{e.preventDefault(),t({propName:"originalQuery",propValue:e.currentTarget.value,updateOptions:!1}),t({propName:"query",propValue:e.currentTarget.value,updateOptions:a})}),[t]),n=(0,l.useCallback)((e=>s(e,!1)),[s]),r=(0,l.useCallback)((e=>s(e,!0)),[s]);return(0,P.jsxs)(f.VerticalGroup,{spacing:"xs",children:[Kp||(Kp=(0,P.jsx)($u.e,{name:"Text options"})),(0,P.jsx)(zu.V,{value:a,name:"Default value",placeholder:"default value, if any",onChange:n,onBlur:r,labelWidth:20,grow:!0,ariaLabel:I.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInput})]})}const Jp=["index","id","state","global","originalQuery"];const Xp=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:qp,reducer:Gp,picker:Qp,editor:Yp,dependsOn:(e,t)=>!1,setValue:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,Ha.WI)((0,ns.Fz)((0,ss.GT)(e),t,a))},setValueFromUrl:async(e,t)=>{await(0,Ha.WI)(((e,t)=>async(a,s)=>{const n=(0,Ba.E0)(e.id,s()),r=(0,qa.Hi)(t);a((0,Bu.Pl)((0,ss.Y6)(n,{propName:"query",propValue:r}))),await a((0,ns.Ci)((0,ss.GT)(n),r))})((0,ss.GT)(e),t))},updateOptions:async e=>{var t;await(0,Ha.WI)((t=(0,ss.GT)(e),async(e,a)=>{await e(Zp((0,ss.Y6)(t)));const s=(0,Ba.E0)(t.id,a());await _.z.get(t.type).setValue(s,s.options[0],!0)}))},getSaveModel:(e,t)=>{const a=(0,r.cloneDeep)(e),{originalQuery:s}=a,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(a,Jp);if(e.query!==s&&!t){const e=null!=s?s:"",t={selected:!1,text:e,value:e};return Object.assign({},n,{query:e,current:t,options:[t]})}return n},getValueForUrl:e=>e.current.value,beforeAdding:e=>Object.assign({},(0,r.cloneDeep)(e),{originalQuery:e.query})}),eh=Object.assign({},Ua.Eg,{type:"constant",hide:Ua.bU.hideVariable,query:"",current:{},options:[]}),th=(0,rs.oM)({name:"templating/constant",initialState:ss.sX,reducers:{createConstantOptionsFromQuery:(e,t)=>{const a=(0,ss.ir)(e,t.payload.id);a.options=[{text:a.query.trim(),value:a.query.trim(),selected:!1}]}}}),ah=th.reducer,{createConstantOptionsFromQuery:sh}=th.actions;var nh;function rh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ih extends l.PureComponent{constructor(){super(...arguments),rh(this,"onChange",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value})})),rh(this,"onBlur",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value,updateOptions:!0})}))}render(){return(0,P.jsxs)(f.VerticalGroup,{spacing:"xs",children:[nh||(nh=(0,P.jsx)($u.e,{name:"Constant options"})),(0,P.jsx)(zu.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,labelWidth:20,ariaLabel:I.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInput,grow:!0})]})}}const oh=["index","id","state","global","current","options"],lh=["current","options","query"];function ch(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}const dh=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:eh,reducer:ah,picker:Ip(),editor:ih,dependsOn:()=>!1,setValue:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,Ha.WI)((0,ns.Fz)((0,ss.GT)(e),t,a))},setValueFromUrl:async(e,t)=>{await(0,Ha.WI)((0,ns.Ci)((0,ss.GT)(e),t))},updateOptions:async e=>{var t;await(0,Ha.WI)((t=(0,ss.GT)(e),async e=>{await e(sh((0,ss.Y6)(t))),await e((0,ns.xQ)(t))}))},getSaveModel:e=>ch((0,r.cloneDeep)(e),oh),getValueForUrl:e=>e.current.value,beforeAdding:e=>{const t=(0,r.cloneDeep)(e),{query:a}=t,s=ch(t,lh),n={selected:!0,text:a,value:a};return Object.assign({},s,{current:n,options:[n],query:a})}}),uh=Object.assign({},Ua.Eg,{type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:Ua.Bd.onDashboardLoad}),ph=(0,rs.oM)({name:"templating/datasource",initialState:ss.sX,reducers:{createDataSourceOptions:(e,t)=>{const{sources:a,regex:s}=t.payload.data,n=[],r=(0,ss.ir)(e,t.payload.id);for(let e=0;e<a.length;e++){const t=a[e];t.meta.id===r.query&&(hh(t,s)&&n.push({text:t.name,value:t.name,selected:!1}),mh(t,s)&&n.push({text:"default",value:"default",selected:!1}))}0===n.length&&n.push({text:"No data sources found",value:"",selected:!1}),r.includeAll&&n.unshift({text:is.xk,value:is.r2,selected:!1}),r.options=n}}});function hh(e,t){return!t||t.exec(e.name)}function mh(e,t){return!!e.isDefault&&(!t||t.exec("default"))}const gh=ph.reducer,{createDataSourceOptions:fh}=ph.actions;var bh,vh;function xh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class yh extends l.PureComponent{constructor(){super(...arguments),xh(this,"onRegExChange",(e=>{this.props.onPropChange({propName:"regex",propValue:e.currentTarget.value})})),xh(this,"onRegExBlur",(e=>{this.props.onPropChange({propName:"regex",propValue:e.currentTarget.value,updateOptions:!0})})),xh(this,"onSelectionOptionsChange",(async e=>{let{propValue:t,propName:a}=e;this.props.onPropChange({propName:a,propValue:t,updateOptions:!0})})),xh(this,"getSelectedDataSourceTypeValue",(()=>{var e,t,a,s;if(null===(e=this.props.editor.extended)||void 0===e||null===(t=e.dataSourceTypes)||void 0===t||!t.length)return"";const n=null===(a=this.props.editor.extended)||void 0===a?void 0:a.dataSourceTypes.find((e=>e.value===this.props.variable.query)),r=n?n.value:null===(s=this.props.editor.extended)||void 0===s?void 0:s.dataSourceTypes[0].value;return null!=r?r:""})),xh(this,"onDataSourceTypeChanged",(e=>{this.props.onPropChange({propName:"query",propValue:e.value,updateOptions:!0})}))}componentDidMount(){this.props.initDataSourceVariableEditor()}render(){var e,t,a,s,n;const r=null!==(e=this.props.editor.extended)&&void 0!==e&&null!==(t=e.dataSourceTypes)&&void 0!==t&&t.length?null===(a=this.props.editor.extended)||void 0===a||null===(s=a.dataSourceTypes)||void 0===s?void 0:s.map((e=>{var t;return{value:null!==(t=e.value)&&void 0!==t?t:"",label:e.text}})):[],i=null!==(n=r.find((e=>e.value===this.props.variable.query)))&&void 0!==n?n:r[0];return(0,P.jsxs)(f.VerticalGroup,{spacing:"xs",children:[bh||(bh=(0,P.jsx)($u.e,{name:"Data source options"})),(0,P.jsxs)(f.VerticalGroup,{spacing:"md",children:[(0,P.jsxs)(f.VerticalGroup,{spacing:"xs",children:[(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(Zu.u,{name:"Type",value:i,options:r,onChange:this.onDataSourceTypeChanged,labelWidth:10})}),(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(zu.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,labelWidth:20,tooltip:vh||(vh=(0,P.jsxs)("div",{children:["Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",(0,P.jsx)("br",{}),(0,P.jsx)("br",{}),"Example: ",(0,P.jsx)("code",{children:"/^prod/"})]}))})})]}),(0,P.jsx)(Vu,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue})]})]})}}const wh={initDataSourceVariableEditor:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{getDatasourceSrv:S.ak};return t=>{const a=e.getDatasourceSrv().getList({metrics:!0,variables:!0}),s=(0,r.chain)(a).uniqBy("meta.id").map((e=>({text:e.meta.name,value:e.meta.id}))).value();s.unshift({text:"",value:""}),t((0,Es.z7)({propName:"dataSourceTypes",propValue:s}))}},changeVariableMultiValue:ns.Z7},jh=(0,Pu.R)(yh,((e,t)=>({editor:e.templating.editor})),wh),Ch=["index","id","state","global"];const kh=()=>({id:"datasource",description:"Enabled you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:uh,reducer:gh,picker:Ip(),editor:jh,dependsOn:(e,t)=>!!e.regex&&(0,qa.QI)(e.regex,t.name),setValue:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,Ha.WI)((0,ns.Fz)((0,ss.GT)(e),t,a))},setValueFromUrl:async(e,t)=>{await(0,Ha.WI)((0,ns.Ci)((0,ss.GT)(e),t))},updateOptions:async e=>{await(0,Ha.WI)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{getDatasourceSrv:S.ak};return async(a,s)=>{const n=t.getDatasourceSrv().getList({metrics:!0,variables:!1}),r=(0,Ba.E0)(e.id,s());let i;r.regex&&(i=(0,m.getTemplateSrv)().replace(r.regex,void 0,"regex"),i=(0,d.stringToJsRegex)(i)),a(fh((0,ss.Y6)(e,{sources:n,regex:i}))),await a((0,ns.xQ)(e))}}((0,ss.GT)(e)))},getSaveModel:e=>{const t=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}((0,r.cloneDeep)(e),Ch);return Object.assign({},t,{options:[]})},getValueForUrl:e=>(0,qa.HY)(e)?is.xk:e.current.value}),Sh=Object.assign({},Ua.Eg,{type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:Ua.Bd.onTimeRangeChanged,current:{}}),Th=(0,rs.oM)({name:"templating/interval",initialState:ss.sX,reducers:{createIntervalOptions:(e,t)=>{const a=(0,ss.ir)(e,t.payload.id),s=(0,r.map)(a.query.match(/(["'])(.*?)\1|\w+/g),(e=>({text:(e=e.replace(/["']+/g,"")).trim(),value:e.trim(),selected:!1})));a.auto&&s.length&&"auto"!==s[0].text&&s.unshift({text:"auto",value:"$__auto_interval_"+a.name,selected:!1}),a.options=s}}}),Oh=Th.reducer,{createIntervalOptions:_h}=Th.actions;var Nh;function Ih(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ph extends l.PureComponent{constructor(){super(...arguments),Ih(this,"onAutoChange",(e=>{this.props.onPropChange({propName:"auto",propValue:e.target.checked,updateOptions:!0})})),Ih(this,"onQueryChanged",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value})})),Ih(this,"onQueryBlur",(e=>{this.props.onPropChange({propName:"query",propValue:e.currentTarget.value,updateOptions:!0})})),Ih(this,"onAutoCountChanged",(e=>{this.props.onPropChange({propName:"auto_count",propValue:e.value,updateOptions:!0})})),Ih(this,"onAutoMinChanged",(e=>{this.props.onPropChange({propName:"auto_min",propValue:e.currentTarget.value,updateOptions:!0})}))}render(){var e;const{variable:t}=this.props,a=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map((e=>({label:`${e}`,value:e}))),s=null!==(e=a.find((e=>e.value===t.auto_count)))&&void 0!==e?e:a[0];return(0,P.jsxs)(f.VerticalGroup,{spacing:"xs",children:[Nh||(Nh=(0,P.jsx)($u.e,{name:"Interval options"})),(0,P.jsxs)(f.VerticalGroup,{spacing:"none",children:[(0,P.jsx)(zu.V,{value:this.props.variable.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:this.onQueryChanged,onBlur:this.onQueryBlur,labelWidth:20,grow:!0,required:!0}),(0,P.jsxs)(f.InlineFieldRow,{children:[(0,P.jsx)(Ru,{value:this.props.variable.auto,name:"Auto option",tooltip:"Dynamically calculates interval by dividing time range by the count specified.",onChange:this.onAutoChange}),this.props.variable.auto?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Zu.u,{name:"Step count",value:s,options:a,onChange:this.onAutoCountChanged,tooltip:"How many times the current time range should be divided to calculate the value.",labelWidth:7,width:9}),(0,P.jsx)(zu.V,{value:this.props.variable.auto_min,name:"Min interval",placeholder:"10s",onChange:this.onAutoMinChanged,tooltip:"The calculated value will not go below this threshold.",labelWidth:13,width:11})]}):null]})]})]})}}const Mh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{calculateInterval:d.rangeUtil.calculateInterval,getTimeSrv:Ga.$t,templateSrv:(0,td.J)()};return(a,s)=>{const n=(0,Ba.E0)(e.id,s());if(n.auto){const e=t.calculateInterval(t.getTimeSrv().timeRange(),n.auto_count,n.auto_min);t.templateSrv.setGrafanaVariable("$__auto_interval_"+n.name,e.interval),t.templateSrv.setGrafanaVariable("$__auto_interval",e.interval)}}},Fh=["index","id","state","global"];const Ah=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:Sh,reducer:Oh,picker:Ip(),editor:Ph,dependsOn:()=>!1,setValue:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await(0,Ha.WI)(Mh((0,ss.GT)(e))),await(0,Ha.WI)((0,ns.Fz)((0,ss.GT)(e),t,a))},setValueFromUrl:async(e,t)=>{await(0,Ha.WI)(Mh((0,ss.GT)(e))),await(0,Ha.WI)((0,ns.Ci)((0,ss.GT)(e),t))},updateOptions:async e=>{var t;await(0,Ha.WI)((t=(0,ss.GT)(e),async e=>{await e(_h((0,ss.Y6)(t))),await e(Mh(t)),await e((0,ns.xQ)(t))}))},getSaveModel:e=>function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}((0,r.cloneDeep)(e),Fh),getValueForUrl:e=>e.current.value});var Dh=a("./public/app/features/variables/adhoc/actions.ts"),$h=a("./public/app/features/variables/adhoc/picker/AdHocFilter.tsx");function Lh(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Rh={addFilter:Dh.KJ,removeFilter:Dh.ku,changeFilter:Dh.M6},Eh=(0,on.connect)(null,Rh);class zh extends l.PureComponent{constructor(){super(...arguments),Lh(this,"addFilter",(e=>{this.props.addFilter(this.props.variable.id,e)})),Lh(this,"removeFilter",(e=>{this.props.removeFilter(this.props.variable.id,e)})),Lh(this,"changeFilter",((e,t)=>{this.props.changeFilter(this.props.variable.id,{index:e,filter:t})}))}render(){const{filters:e,datasource:t}=this.props.variable;return(0,P.jsx)($h.F,{datasource:t,filters:e,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Vh=Eh(zh);Vh.displayName="AdHocPicker";var Bh,Uh=a("./public/app/features/variables/adhoc/reducer.ts");const Hh={initAdHocVariableEditor:Dh.Ah,changeVariableDatasource:Dh.Z$},qh=(0,on.connect)((e=>({editor:e.templating.editor})),Hh);class Wh extends l.PureComponent{constructor(){var e,t,a;super(...arguments),a=e=>{this.props.changeVariableDatasource(e.value)},(t="onDatasourceChanged")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}componentDidMount(){this.props.initAdHocVariableEditor()}render(){var e,t,a,s,n;const{variable:r,editor:i}=this.props,o=null!==(e=null===(t=i.extended)||void 0===t?void 0:t.dataSources)&&void 0!==e?e:[],l=null!==(a=null===(s=i.extended)||void 0===s?void 0:s.infoText)&&void 0!==a?a:null,c=o.map((e=>({label:e.text,value:e.value}))),d=null!==(n=c.find((e=>{var t,a;return(null===(t=e.value)||void 0===t?void 0:t.uid)===(null===(a=r.datasource)||void 0===a?void 0:a.uid)})))&&void 0!==n?n:c[0];return(0,P.jsxs)(f.VerticalGroup,{spacing:"xs",children:[Bh||(Bh=(0,P.jsx)($u.e,{name:"Options"})),(0,P.jsxs)(f.VerticalGroup,{spacing:"sm",children:[(0,P.jsx)(f.InlineFieldRow,{children:(0,P.jsx)(Zu.u,{name:"Data source",value:d,options:c,onChange:this.onDatasourceChanged,labelWidth:10})}),l?(0,P.jsx)(f.Alert,{title:l,severity:"info"}):null]})]})}}const Gh=qh(Wh);function Zh(e){return null==e?"":/\|/g[Symbol.replace](e,"__gfp__")}function Qh(e){return null==e?"":/__gfp__/g[Symbol.replace](e,"|")}function Kh(e){if(!(0,r.isString)(e)||0===e.length)return null;const t=e.split("|").map(Qh);return{key:t[0],operator:t[1],value:t[2],condition:""}}function Yh(e){return null!==e&&(0,r.isString)(e.value)}const Jh=["index","id","state","global"];const Xh=async()=>{},em=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:Uh.Js,reducer:Uh.jo,picker:Vh,editor:Gh,dependsOn:()=>!1,setValue:Xh,setValueFromUrl:async(e,t)=>{const a=(e=>{if((0,r.isArray)(e))return e.map(Kh).filter(Yh);const t=Kh(e);return null===t?[]:[t]})(t);await(0,Ha.WI)((0,Dh.Ue)(e.id,a))},updateOptions:Xh,getSaveModel:e=>function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}((0,r.cloneDeep)(e),Jh),getValueForUrl:e=>{var t;return(e=>e.map((e=>function(e){return[e.key,e.operator,e.value]}(e).map(Zh).join("|"))))(null!==(t=null==e?void 0:e.filters)&&void 0!==t?t:[])}});i().move=u.R;const tm=a("./public/app sync recursive extensions\\/index.ts"),am=tm.keys().map((e=>tm(e)));function sm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const s=i().first(performance.getEntriesByName(e));if(s){const e=s.name.replace(/-/g,"_");w(`${t}${e}${a}`,Math.round(s.startTime)/1e3)}}const nm=new class{constructor(){var e,t,a;a=void 0,(t="angularApp")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,this.angularApp=new Nu}async init(){try{(0,m.setBackendSrv)(j.ae),function(){(0,m.setEchoSrv)(new y({debug:!1})),window.addEventListener("load",(e=>{const t="frontend_boot_load_time_seconds",a="frontend_boot_js_done_time_seconds",s="frontend_boot_css_time_seconds";performance&&(performance.mark(t),sm("first-paint","frontend_boot_","_time_seconds"),sm("first-contentful-paint","frontend_boot_","_time_seconds"),sm(t),sm(a),sm(s))})),""!==g.Vt.user.orgRole&&(0,m.registerEchoBackend)(new k({}));c.ZP.sentry.enabled&&(0,m.registerEchoBackend)(new Fa(Object.assign({},c.ZP.sentry,{user:c.ZP.bootData.user,buildInfo:c.ZP.buildInfo})));c.ZP.googleAnalyticsId&&(0,m.registerEchoBackend)(new Dc({googleAnalyticsId:c.ZP.googleAnalyticsId}));c.ZP.rudderstackWriteKey&&c.ZP.rudderstackDataPlaneUrl&&(0,m.registerEchoBackend)(new Ec({writeKey:c.ZP.rudderstackWriteKey,dataPlaneUrl:c.ZP.rudderstackDataPlaneUrl,user:c.ZP.bootData.user,sdkUrl:c.ZP.rudderstackSdkUrl,configUrl:c.ZP.rudderstackConfigUrl}));c.ZP.applicationInsightsConnectionString&&(0,m.registerEchoBackend)(new Lc({connectionString:c.ZP.applicationInsightsConnectionString,endpointUrl:c.ZP.applicationInsightsEndpointUrl}))}(),(0,f.getScrollbarWidth)()>0&&document.body.classList.add("no-overlay-scrollbar"),(0,d.setLocale)(c.ZP.bootData.user.locale),(0,d.setWeekStart)(c.ZP.bootData.user.weekStart),(0,Vc.L)(wc.$),(0,Uc.$)(Bc.Z),(0,m.setLocationSrv)(m.locationService),(0,d.setTimeZoneResolver)((()=>c.ZP.bootData.user.timezone)),am.length>0&&am[0].addExtensionReducers(),function(e){const t=(0,rs.xC)({reducer:Ks(),middleware:e=>e({thunk:!0,serializableCheck:!1,immutableCheck:!1}),devTools:!1,preloadedState:Object.assign({navIndex:(0,ys.Cu)()},e)});(0,Ha.PQ)(t)}(),am.length>0&&am[0].init(),d.standardEditorsRegistry.setInit(zc.u),d.standardFieldConfigEditorRegistry.setInit(zc.l),d.standardTransformersRegistry.setInit(ba),_.z.setInit((()=>[Mp(),Hp(),Xp(),dh(),kh(),Ah(),em(),{id:"system",description:"",name:"system",initialState:Object.assign({},Ua.Eg,{type:"system",hide:Ua.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:d.LoadingState.Done}),reducer:(e,t)=>e,picker:null,editor:null,dependsOn:()=>!1,setValue:async function(e,t){},setValueFromUrl:async(e,t)=>{},updateOptions:async e=>{},getSaveModel:e=>({}),getValueForUrl:e=>""}])),d.monacoLanguageRegistry.setInit(Fc),(0,m.setQueryRunnerFactory)((()=>new Oc)),e=new gs,fs=e,d.locationUtil.initialize({config:c.ZP,getTimeRangeForUrl:(0,Ga.$t)().timeRangeForUrl,getVariablesUrlParams:Nc.c}),document.addEventListener("click",yc);const t=new S.ND;t.init(c.ZP.datasources,c.ZP.defaultDatasource),(0,m.setDataSourceSrv)(t),window.grafanaRuntime={getDashboardSaveModel:()=>{const e=(0,O.h4)().getCurrent();if(e)return e.getSaveModelClone()},getDashboardTimeRange:()=>{const e=(0,Ga.$t)().timeRange();return{from:e.from.valueOf(),to:e.to.valueOf(),raw:e.raw}},getPanelData:()=>{const e=(0,O.h4)().getCurrent();if(e)return e.panels.reduce(((e,t)=>(e[t.id]=t.getQueryRunner().getLastResult(),e)),{})}};(new Du).init(),this.angularApp.init(),await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];await Promise.all(e.map(h))}(c.ZP.pluginsToPreload),o.render(l.createElement(xc,{app:this}),document.getElementById("reactRoot"))}catch(e){console.error("Failed to start Grafana",e),window.__grafana_load_failed()}var e}};window.public_cdn_path&&(a.p=window.public_cdn_path),window.__grafana_public_path__=a.p.substring(0,a.p.lastIndexOf("build/"))||a.p,window.nonce&&(a.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,nm.init()},"./public/app/plugins/datasource/alertmanager/types.ts":(e,t,a)=>{"use strict";let s,n,r,i;a.d(t,{As:()=>s,Z9:()=>n,_M:()=>r,sK:()=>i}),function(e){e.Active="active",e.Expired="expired",e.Pending="pending"}(s||(s={})),function(e){e.Unprocessed="unprocessed",e.Active="active",e.Suppressed="suppressed"}(n||(n={})),function(e){e.equal="=",e.notEqual="!=",e.regex="=~",e.notRegex="!~"}(r||(r={})),function(e){e.cortex="cortex",e.prometheus="prometheus"}(i||(i={}))},"./public/app/plugins/datasource/cloud-monitoring/components/MQLQueryEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{a:()=>r});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/index.ts"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function r(e){let{query:t,onChange:a,onRunQuery:r}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.TextArea,{name:"Query",className:"slate-query-field",value:t,rows:10,placeholder:"Enter a Cloud Monitoring MQL query (Run with Shift+Enter)",onBlur:r,onChange:e=>a(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&(e.shiftKey||e.ctrlKey)&&(e.preventDefault(),r())}})})}},"./public/app/plugins/datasource/cloud-monitoring/components/MetricQueryEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{wi:()=>d,a1:()=>p});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./public/app/plugins/datasource/cloud-monitoring/components/index.ts"),r=a("./public/app/plugins/datasource/cloud-monitoring/functions.ts"),i=a("./public/app/plugins/datasource/cloud-monitoring/types.ts"),o=a("./public/app/plugins/datasource/cloud-monitoring/components/MQLQueryEditor.tsx"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c={labels:{}},d=e=>({editorMode:i.je.Visual,projectName:e.getDefaultProject(),metricType:"",metricKind:i.lH.GAUGE,valueType:"",crossSeriesReducer:"REDUCE_MEAN",alignmentPeriod:"cloud-monitoring-auto",perSeriesAligner:i.CS.ALIGN_MEAN,groupBys:[],filters:[],aliasBy:"",query:"",preprocessor:i.mG.None});function u(e){let{refId:t,query:a,datasource:d,onChange:u,onRunQuery:p,customMetaData:h,variableOptionGroup:m}=e;const[g,f]=(0,s.useState)(c),{projectName:b,metricType:v,groupBys:x,editorMode:y,crossSeriesReducer:w}=a;(0,s.useEffect)((()=>{b&&v&&d.getLabels(v,t,b).then((e=>f((t=>Object.assign({},t,{labels:e})))))}),[d,x,v,b,t,w]);const j=(0,s.useCallback)((e=>{u(Object.assign({},a,e)),p()}),[u,p,a]),C=(0,s.useCallback)((e=>{let{valueType:t,metricKind:s,type:n}=e;const o=s===i.lH.GAUGE||t===i.$h.DISTRIBUTION?i.mG.None:i.mG.Rate,{perSeriesAligner:l}=(0,r.ID)(t,s,g.perSeriesAligner,o);j(Object.assign({},a,{perSeriesAligner:l,metricType:n,valueType:t,metricKind:s,preprocessor:o}))}),[j,a,g]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.IK,{refId:t,templateVariableOptions:m.options,projectName:b,datasource:d,onChange:e=>{j(Object.assign({},a,{projectName:e}))}}),y===i.je.Visual&&(0,l.jsx)(n.sL,{refId:t,labels:g.labels,variableOptionGroup:m,customMetaData:h,onMetricTypeChange:C,onChange:j,datasource:d,query:a}),y===i.je.MQL&&(0,l.jsx)(o.a,{onChange:e=>u(Object.assign({},a,{query:e})),onRunQuery:p,query:a.query}),(0,l.jsx)(n.BQ,{refId:t,value:a.aliasBy,onChange:e=>{j(Object.assign({},a,{aliasBy:e}))}})]})}const p=s.memo(u)},"./public/app/plugins/datasource/cloud-monitoring/components/QueryEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{W:()=>m});var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./packages/grafana-ui/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),o=a("./public/app/plugins/datasource/cloud-monitoring/constants.ts"),l=a("./public/app/plugins/datasource/cloud-monitoring/types.ts"),c=a("./public/app/plugins/datasource/cloud-monitoring/components/index.ts"),d=a("./public/app/plugins/datasource/cloud-monitoring/components/MetricQueryEditor.tsx"),u=a("./public/app/plugins/datasource/cloud-monitoring/components/SLO/SLOQueryEditor.tsx"),p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const h=["hide","refId","datasource","key","queryType","maxLines","metric"];class m extends i.PureComponent{async UNSAFE_componentWillMount(){const{datasource:e,query:t}=this.props;if(!this.props.query.hasOwnProperty("metricQuery")){const e=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(this.props.query,h);this.props.query.metricQuery=e}this.props.query.hasOwnProperty("queryType")||(this.props.query.queryType=l.xL.METRICS),await e.ensureGCEDefaultProject(),t.metricQuery.projectName||(this.props.query.metricQuery.projectName=e.getDefaultProject())}onQueryChange(e,t){this.props.onChange(Object.assign({},this.props.query,{[e]:t})),this.props.onRunQuery()}render(){var e,t,a;const{datasource:i,query:h,onRunQuery:m,onChange:g}=this.props,f=Object.assign({},(0,d.wi)(i),h.metricQuery),b=Object.assign({},(0,u.w)(i),h.sloQuery),v=h.queryType||l.xL.METRICS,x=null!==(e=this.props.data)&&void 0!==e&&e.series.length?null===(t=this.props.data)||void 0===t?void 0:t.series[0].meta:{},y=null!==(a=null==x?void 0:x.custom)&&void 0!==a?a:{},w={label:"Template Variables",expanded:!1,options:i.getVariables().map(n.toOption)};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.x5,{label:"Query type",fillComponent:h.queryType!==l.xL.SLO&&(0,p.jsx)(r.Button,{variant:"secondary",className:s.css`
                  margin-left: auto;
                `,icon:"edit",onClick:()=>this.onQueryChange("metricQuery",Object.assign({},f,{editorMode:f.editorMode===l.je.MQL?l.je.Visual:l.je.MQL})),children:f.editorMode===l.je.MQL?"Switch to builder":"Edit MQL"}),htmlFor:`${h.refId}-query-type`,children:(0,p.jsx)(r.Select,{menuShouldPortal:!0,width:o.Lh,value:v,options:o.XI,onChange:e=>{let{value:t}=e;g(Object.assign({},h,{sloQuery:b,queryType:t})),m()},inputId:`${h.refId}-query-type`})}),v===l.xL.METRICS&&(0,p.jsx)(c.a1,{refId:h.refId,variableOptionGroup:w,customMetaData:y,onChange:e=>{this.props.onChange(Object.assign({},this.props.query,{metricQuery:e}))},onRunQuery:m,datasource:i,query:f}),v===l.xL.SLO&&(0,p.jsx)(c.D6,{refId:h.refId,variableOptionGroup:w,customMetaData:y,onChange:e=>this.onQueryChange("sloQuery",e),onRunQuery:m,datasource:i,query:b})]})}}},"./public/app/plugins/datasource/cloud-monitoring/components/SLO/SLOQueryEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{D:()=>h,w:()=>p});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/plugins/datasource/cloud-monitoring/components/index.ts"),i=a("./public/app/plugins/datasource/cloud-monitoring/constants.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=e=>{let{refId:t,query:a,templateVariableOptions:l,onChange:c,datasource:d}=e;const[u,p]=(0,s.useState)([]),{projectName:h}=a;return(0,s.useEffect)((()=>{h&&d.getSLOServices(h).then((e=>{p([{label:"Template Variables",options:l},...e])}))}),[d,h,l]),(0,o.jsx)(r.x5,{label:"Service",htmlFor:`${t}-slo-service`,children:(0,o.jsx)(n.Select,{menuShouldPortal:!0,inputId:`${t}-slo-service`,width:i.Lh,allowCustomValue:!0,value:(null==a?void 0:a.serviceId)&&{value:null==a?void 0:a.serviceId,label:(null==a?void 0:a.serviceName)||(null==a?void 0:a.serviceId)},placeholder:"Select service",options:u,onChange:e=>{let{value:t="",label:s=""}=e;return c(Object.assign({},a,{serviceId:t,serviceName:s,sloId:""}))}})})},c=e=>{let{refId:t,query:a,templateVariableOptions:l,onChange:c,datasource:d}=e;const[u,p]=(0,s.useState)([]),{projectName:h,serviceId:m}=a;return(0,s.useEffect)((()=>{h&&m&&d.getServiceLevelObjectives(h,m).then((e=>{p([{label:"Template Variables",options:l},...e])}))}),[d,h,m,l]),(0,o.jsx)(r.x5,{label:"SLO",htmlFor:`${t}-slo`,children:(0,o.jsx)(n.Select,{menuShouldPortal:!0,inputId:`${t}-slo`,width:i.Lh,allowCustomValue:!0,value:(null==a?void 0:a.sloId)&&{value:null==a?void 0:a.sloId,label:(null==a?void 0:a.sloName)||(null==a?void 0:a.sloId)},placeholder:"Select SLO",options:u,onChange:async e=>{let{value:t="",label:s=""}=e;const n=(await d.getServiceLevelObjectives(h,m)).find((e=>{let{value:a}=e;return a===d.templateSrv.replace(t)}));c(Object.assign({},a,{sloId:t,sloName:s,goal:null==n?void 0:n.goal}))}})})},d=e=>{let{refId:t,query:a,templateVariableOptions:s,onChange:l,datasource:c}=e;return(0,o.jsx)(r.x5,{label:"Selector",htmlFor:`${t}-slo-selector`,children:(0,o.jsx)(n.Select,{menuShouldPortal:!0,inputId:`${t}-slo-selector`,width:i.Lh,allowCustomValue:!0,value:[...i.IR,...s].find((e=>{var t;return null!==(t=e.value===(null==a?void 0:a.selectorName))&&void 0!==t?t:""})),options:[{label:"Template Variables",options:s},...i.IR],onChange:e=>{let{value:t}=e;return l(Object.assign({},a,{selectorName:null!=t?t:""}))}})})};var u=a("./public/app/plugins/datasource/cloud-monitoring/types.ts");const p=e=>({projectName:e.getDefaultProject(),alignmentPeriod:"cloud-monitoring-auto",perSeriesAligner:u.CS.ALIGN_MEAN,aliasBy:"",selectorName:"select_slo_health",serviceId:"",serviceName:"",sloId:"",sloName:""});function h(e){let{refId:t,query:a,datasource:s,onChange:n,variableOptionGroup:u,customMetaData:p}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.IK,{refId:t,templateVariableOptions:u.options,projectName:a.projectName,datasource:s,onChange:e=>n(Object.assign({},a,{projectName:e}))}),(0,o.jsx)(l,{refId:t,datasource:s,templateVariableOptions:u.options,query:a,onChange:n}),(0,o.jsx)(c,{refId:t,datasource:s,templateVariableOptions:u.options,query:a,onChange:n}),(0,o.jsx)(d,{refId:t,datasource:s,templateVariableOptions:u.options,query:a,onChange:n}),(0,o.jsxs)(r.x5,{label:"Alignment period",htmlFor:`${t}-alignment-period`,children:[(0,o.jsx)(r.y3,{inputId:`${t}-alignment-period`,templateVariableOptions:u.options,query:Object.assign({},a,{perSeriesAligner:"select_slo_health"===a.selectorName?"ALIGN_MEAN":"ALIGN_NEXT_OLDER"}),onChange:n,selectWidth:i.Lh}),(0,o.jsx)(r.nS,{datasource:s,customMetaData:p})]}),(0,o.jsx)(r.BQ,{refId:t,value:a.aliasBy,onChange:e=>n(Object.assign({},a,{aliasBy:e}))})]})}},"./public/app/plugins/datasource/cloud-monitoring/components/index.ts":(e,t,a)=>{"use strict";a.d(t,{Pe:()=>N,BQ:()=>_,v2:()=>m,XY:()=>S,y3:()=>T,nS:()=>O,zI:()=>k,X9:()=>h,pj:()=>j,a1:()=>M.a1,C3:()=>d,Av:()=>H,IK:()=>o,EC:()=>E,x5:()=>R,D6:()=>F.D,Th:()=>L,sL:()=>V});var s=a("./packages/grafana-ui/src/index.ts"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./public/app/plugins/datasource/cloud-monitoring/constants.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function o(e){let{refId:t,projectName:a,datasource:o,onChange:l,templateVariableOptions:c}=e;const[d,u]=(0,n.useState)([]);(0,n.useEffect)((()=>{o.getProjects().then((e=>u(e)))}),[o]);const p=(0,n.useMemo)((()=>[d,{label:"Template Variables",options:c},...d]),[d,c]);return(0,i.jsx)(R,{label:"Project",htmlFor:`${t}-project`,children:(0,i.jsx)(s.Select,{menuShouldPortal:!0,width:r.Lh,allowCustomValue:!0,formatCreateLabel:e=>`Use project: ${e}`,onChange:e=>{let{value:t}=e;return l(t)},options:p,value:{value:a,label:a},placeholder:"Select Project",inputId:`${t}-project`})})}var l=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),c=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function d(e){const[t,a]=(0,n.useState)({metricDescriptors:[],metrics:[],services:[],service:"",metric:"",projectName:null}),o=(0,s.useTheme2)(),l=(0,s.getSelectStyles)(o),d=(0,s.useStyles2)(u),{services:p,service:h,metrics:m,metricDescriptors:g}=t,{metricType:f,templateVariableOptions:b,projectName:v,templateSrv:x,datasource:y,onChange:w,children:j}=e,C=(0,n.useCallback)(((e,t)=>e.find((e=>e.type===x.replace(t)))),[x]);(0,n.useEffect)((()=>{(async()=>{if(v){const e=await y.getMetricTypes(v),t=S(e),s=(e=>{const t=C(e,f);return t?e.filter((e=>e.service===t.service)).map((e=>({service:e.service,value:e.type,label:e.displayName,component:function(){return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:d,children:e.type}),(0,i.jsx)("div",{className:l.optionDescription,children:e.description})]})}}))):[]})(e),n=s.length>0?s[0].service:"",r=C(e,f);a((a=>Object.assign({},a,{metricDescriptors:e,services:t,metrics:s,service:n,metricDescriptor:r})))}})()}),[y,C,f,v,d,l.optionDescription]);const k=function(e){let{value:s}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=C(t.metricDescriptors,s);a(Object.assign({},t,{metricDescriptor:r},n)),w(Object.assign({},r,{type:s}))},S=e=>{const t=e.map((e=>({value:e.service,label:(0,c.startCase)(e.serviceShortName)})));return t.length>0?(0,c.uniqBy)(t,(e=>e.value)):[]};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(R,{children:[(0,i.jsx)(E,{labelWidth:r.XC,label:"Service",htmlFor:`${e.refId}-service`,children:(0,i.jsx)(s.Select,{menuShouldPortal:!0,width:r.Lh,onChange:e=>{let{value:s}=e;const n=g.filter((e=>e.service===x.replace(s))).map((e=>({service:e.service,value:e.type,label:e.displayName,description:e.description})));n.length>0&&!n.some((e=>e.value===x.replace(f)))?k(n[0],{service:s,metrics:n}):a(Object.assign({},t,{service:s,metrics:n}))},value:[...p,...b].find((e=>e.value===h)),options:[{label:"Template Variables",options:b},...p],placeholder:"Select Services",inputId:`${e.refId}-service`})}),(0,i.jsx)(E,{label:"Metric name",labelWidth:r.qN,htmlFor:`${e.refId}-select-metric`,children:(0,i.jsx)(s.Select,{menuShouldPortal:!0,width:r.Lh,onChange:k,value:[...m,...b].find((e=>e.value===f)),options:[{label:"Template Variables",options:b},...m],placeholder:"Select Metric",inputId:`${e.refId}-select-metric`})})]}),j(t.metricDescriptor)]})}const u=e=>l.css`
  label: grafana-select-option-description;
  font-weight: normal;
  font-style: italic;
  color: ${e.colors.text.secondary};
`;var p=a("./public/app/plugins/datasource/cloud-monitoring/functions.ts");const h=e=>{var t,a;let{refId:o,labels:l=[],query:c,onChange:d,variableOptionGroup:u,metricDescriptor:h}=e;const m=(0,n.useMemo)((()=>[u,...(0,p.gY)([...l,...r.$e])]),[l,u]);return(0,i.jsxs)(R,{label:"Group by",tooltip:"You can reduce the amount of data returned for a metric by combining different time series. To combine multiple time series, you can specify a grouping and a function. Grouping is done on the basis of labels. The grouping function is used to combine the time series in the group into a single time series.",htmlFor:`${o}-group-by`,children:[(0,i.jsx)(s.MultiSelect,{menuShouldPortal:!0,inputId:`${o}-group-by`,width:r.d7,placeholder:"Choose label",options:m,value:null!==(t=c.groupBys)&&void 0!==t?t:[],onChange:e=>{d(Object.assign({},c,{groupBys:e.map((e=>e.value))}))}}),(0,i.jsx)(N,{metricDescriptor:h,templateVariableOptions:u.options,crossSeriesReducer:c.crossSeriesReducer,groupBys:null!==(a=c.groupBys)&&void 0!==a?a:[],onChange:e=>d(Object.assign({},c,{crossSeriesReducer:e})),refId:o})]})},m=e=>{let{refId:t,templateVariableOptions:a,onChange:s,query:n,customMetaData:o,datasource:l}=e;return(0,i.jsxs)(R,{label:"Alignment function",tooltip:"The process of alignment consists of collecting all data points received in a fixed length of time, applying a function to combine those data points, and assigning a timestamp to the result.",fillComponent:(0,i.jsx)(O,{datasource:l,customMetaData:o}),htmlFor:`${t}-alignment-function`,children:[(0,i.jsx)(S,{inputId:`${t}-alignment-function`,templateVariableOptions:a,query:n,onChange:s}),(0,i.jsx)(E,{label:"Alignment period",htmlFor:`${t}-alignment-period`,children:(0,i.jsx)(T,{inputId:`${t}-alignment-period`,selectWidth:r.Lh,templateVariableOptions:a,query:n,onChange:s})})]})};var g=a("./packages/grafana-data/src/index.ts");const f=["value","isOpen","invalid"],b=["value"];function v(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}const x=["=","!=","=~","!=~"],y=n.forwardRef(((e,t)=>{let a=v(e,f);return(0,i.jsx)(s.Button,Object.assign({},a,{ref:t,variant:"secondary",icon:"plus","aria-label":"Add filter"}))}));y.displayName="FilterButton";const w=n.forwardRef(((e,t)=>{let{value:a}=e,n=v(e,b);return(0,i.jsx)(s.Button,Object.assign({},n,{ref:t,variant:"secondary",children:(0,i.jsx)("span",{className:"query-segment-operator",children:null==a?void 0:a.label})}))}));w.displayName="OperatorButton";const j=e=>{var t;let{labels:a={},filters:o,onChange:l,variableOptionGroup:d}=e;const u=(0,n.useMemo)((()=>(0,p.mi)(o)),[o]),h=(0,n.useMemo)((()=>[d,...(0,p.gY)(Object.keys(a))]),[a,d]),m=(0,n.useCallback)((e=>{const t=(0,c.flatten)(e.map((e=>{let{key:t,operator:a,value:s,condition:n}=e;return[t,a,s,n]})));return t.slice(0,t.length-1)}),[]),f=()=>(0,i.jsx)(s.Select,{menuShouldPortal:!0,allowCustomValue:!0,options:[d,...(0,p.gY)(Object.keys(a))],onChange:e=>{let{value:t=""}=e;return l(m([...u,{key:t,operator:"=",condition:"AND",value:""}]))},menuPlacement:"bottom",renderControl:y});return(0,i.jsx)(R,{label:"Filter",tooltip:"To reduce the amount of data charted, apply a filter. A filter has three components: a label, a comparison, and a value. The comparison can be an equality, inequality, or regular expression.",noFillEnd:u.length>1,children:(0,i.jsxs)(s.VerticalGroup,{spacing:"xs",width:"auto",children:[u.map(((e,n)=>{let{key:o,operator:c,value:p,condition:b}=e;h.some((e=>e.options?h.some((e=>e.label===o)):e.label===o))||h.push({label:o,value:o});const v=a.hasOwnProperty(o)?[d,...a[o].map(g.toOption)]:[d];return v.some((e=>e.label===p))||v.push({label:p,value:p}),(0,i.jsxs)(s.HorizontalGroup,{spacing:"xs",width:"auto",children:[(0,i.jsx)(s.Select,{menuShouldPortal:!0,"aria-label":"Filter label key",width:r.Lh,allowCustomValue:!0,formatCreateLabel:e=>`Use label key: ${e}`,value:o,options:h,onChange:e=>{let{value:t=""}=e;l(m(u.map(((e,a)=>a===n?{key:t,operator:c,condition:b,value:""}:e))))}}),(0,i.jsx)(s.Select,{menuShouldPortal:!0,value:c,options:x.map(g.toOption),onChange:e=>{let{value:t="="}=e;return l(m(u.map(((e,a)=>a===n?Object.assign({},e,{operator:t}):e))))},menuPlacement:"bottom",renderControl:w}),(0,i.jsx)(s.Select,{menuShouldPortal:!0,"aria-label":"Filter label value",width:r.Lh,formatCreateLabel:e=>`Use label value: ${e}`,allowCustomValue:!0,value:p,placeholder:"add filter value",options:v,onChange:e=>{let{value:t=""}=e;return l(m(u.map(((e,a)=>a===n?Object.assign({},e,{value:t}):e))))}}),(0,i.jsx)(s.Button,{variant:"secondary",size:"md",icon:"trash-alt","aria-label":"Remove",onClick:()=>l(m(u.filter(((e,t)=>t!==n))))}),n+1===u.length&&Object.values(u).every((e=>{let{value:t}=e;return t}))&&(t||(t=(0,i.jsx)(f,{})))]},n)})),!u.length&&(0,i.jsx)(f,{})]})})};var C;const k=()=>C||(C=(0,i.jsx)("div",{className:"gf-form grafana-info-box alert-info",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h5",{children:"Annotation Query Format"}),(0,i.jsxs)("p",{children:["An annotation is an event that is overlaid on top of graphs. Annotation rendering is expensive so it is important to limit the number of rows returned."," "]}),(0,i.jsx)("p",{children:"The Title and Text fields support templating and can use data returned from the query. For example, the Title field could have the following text:"}),(0,i.jsxs)("code",{children:["{{metric.type}}"," has value: ","{{metric.value}}"]}),(0,i.jsxs)("p",{children:["Example Result: ",(0,i.jsx)("code",{children:"monitoring.googleapis.com/uptime_check/http_status has this value: 502"})]}),(0,i.jsx)("label",{children:"Patterns:"}),(0,i.jsxs)("p",{children:[(0,i.jsx)("code",{children:"{{metric.value}}"})," = value of the metric/point"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("code",{children:"{{metric.type}}"})," = metric type e.g. compute.googleapis.com/instance/cpu/usage_time"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("code",{children:"{{metric.name}}"})," = name part of metric e.g. instance/cpu/usage_time"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("code",{children:"{{metric.service}}"})," = service part of metric e.g. compute"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("code",{children:"{{metric.label.label_name}}"})," = Metric label metadata e.g. metric.label.instance_name"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("code",{children:"{{resource.label.label_name}}"})," = Resource label metadata e.g. resource.label.zone"]})]})})),S=e=>{let{inputId:t,query:a,templateVariableOptions:o,onChange:l}=e;const{valueType:c,metricKind:d,perSeriesAligner:u,preprocessor:h}=a,{perSeriesAligner:m,alignOptions:g}=(0,n.useMemo)((()=>(0,p.ID)(c,d,u,h)),[c,d,u,h]);return(0,i.jsx)(s.Select,{menuShouldPortal:!0,width:r.Lh,onChange:e=>{let{value:t}=e;return l(Object.assign({},a,{perSeriesAligner:t}))},value:[...g,...o].find((e=>e.value===m)),options:[{label:"Template Variables",options:o},{label:"Alignment options",expanded:!0,options:g}],placeholder:"Select Alignment",inputId:t})};function T(e){let{inputId:t,templateVariableOptions:a,onChange:o,query:l,selectWidth:c}=e;const d=(0,n.useMemo)((()=>r.dD.map((e=>Object.assign({},e,{label:e.text})))),[]),u=(0,n.useMemo)((()=>d.filter((e=>!e.hidden))),[d]);return(0,i.jsx)(s.Select,{menuShouldPortal:!0,width:c,onChange:e=>{let{value:t}=e;return o(Object.assign({},l,{alignmentPeriod:t}))},value:[...d,...a].find((e=>e.value===l.alignmentPeriod)),options:[{label:"Template Variables",options:a},{label:"Aggregations",expanded:!0,options:u}],placeholder:"Select Alignment",inputId:t})}const O=e=>{let{customMetaData:t,datasource:a}=e;const{perSeriesAligner:s,alignmentPeriod:o}=t,l=(0,n.useMemo)((()=>{var e;if(!o||!s)return"";const t=r.Eu.find((e=>e.value===a.templateSrv.replace(s))),n=parseInt(null!=o?o:"".replace(/[^0-9]/g,""),10);return`${g.rangeUtil.secondsToHms(n)} interval (${null!==(e=null==t?void 0:t.text)&&void 0!==e?e:""})`}),[a,s,o]);return(0,i.jsx)("label",{children:l})},_=e=>{let{refId:t,value:a="",onChange:o}=e;const[l,d]=(0,n.useState)(null!=a?a:""),u=(0,c.debounce)(o,1e3);return o=e=>{d(e.target.value),u(e.target.value)},(0,i.jsx)(R,{label:"Alias by",htmlFor:`${t}-alias-by`,children:(0,i.jsx)(s.Input,{id:`${t}-alias-by`,width:r.d7,value:l,onChange:o})})},N=e=>{const t=I(e),a=P(t,e);return(0,i.jsx)(E,{labelWidth:18,label:"Group by function","data-testid":"cloud-monitoring-aggregation",htmlFor:`${e.refId}-group-by-function`,children:(0,i.jsx)(s.Select,{menuShouldPortal:!0,width:16,onChange:t=>{let{value:a}=t;return e.onChange(a)},value:a,options:[{label:"Template Variables",options:e.templateVariableOptions},{label:"Aggregations",expanded:!0,options:t}],placeholder:"Select Reducer",inputId:`${e.refId}-group-by-function`})})},I=e=>{let{metricDescriptor:t}=e;const a=null==t?void 0:t.valueType,s=null==t?void 0:t.metricKind;return(0,n.useMemo)((()=>a&&s?(0,p.A_)(a,s).map((e=>Object.assign({},e,{label:e.text}))):[]),[a,s])},P=(e,t)=>(0,n.useMemo)((()=>[...e,...t.templateVariableOptions].find((e=>e.value===t.crossSeriesReducer))),[e,t.crossSeriesReducer,t.templateVariableOptions]);var M=a("./public/app/plugins/datasource/cloud-monitoring/components/MetricQueryEditor.tsx"),F=a("./public/app/plugins/datasource/cloud-monitoring/components/SLO/SLOQueryEditor.tsx");a("./public/app/plugins/datasource/cloud-monitoring/components/MQLQueryEditor.tsx");const A=["children","label","tooltip","fillComponent","noFillEnd","labelWidth","htmlFor"],D=["children","label","tooltip","labelWidth"];function $(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}const L=e=>{let{label:t,onChange:a,value:n,options:r,allowCustomValue:o=!1}=e;return(0,i.jsx)(s.InlineField,{label:t,labelWidth:20,children:(0,i.jsx)(s.Select,{menuShouldPortal:!0,width:25,allowCustomValue:o,value:n,onChange:e=>{let{value:t}=e;return a(t)},options:r})})},R=e=>{let{children:t,label:a,tooltip:n,fillComponent:o,noFillEnd:c=!1,labelWidth:d=r.XC,htmlFor:u}=e,p=$(e,A);return(0,i.jsxs)("div",Object.assign({className:"gf-form"},p,{children:[a&&(0,i.jsx)(s.InlineLabel,{width:d,tooltip:n,htmlFor:u,children:a}),(0,i.jsx)("div",{className:l.css`
          margin-right: 4px;
        `,children:(0,i.jsx)(s.HorizontalGroup,{spacing:"xs",width:"auto",children:t})}),(0,i.jsx)("div",{className:"gf-form--grow",children:c||(0,i.jsx)("div",{className:"gf-form-label gf-form-label--grow",children:o})})]}))},E=e=>{let{children:t,label:a,tooltip:n,labelWidth:o=r.qN}=e,l=$(e,D);return(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsx)(s.InlineLabel,Object.assign({width:o,tooltip:n},l,{children:a})),t]})};function z(e){let{refId:t,query:a,labels:s,datasource:n,onChange:r,onMetricTypeChange:o,customMetaData:l,variableOptionGroup:c}=e;return(0,i.jsx)(d,{refId:t,templateSrv:n.templateSrv,projectName:a.projectName,metricType:a.metricType,templateVariableOptions:c.options,datasource:n,onChange:o,children:e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j,{labels:s,filters:a.filters,onChange:e=>r(Object.assign({},a,{filters:e})),variableOptionGroup:c}),(0,i.jsx)(H,{metricDescriptor:e,query:a,onChange:r}),(0,i.jsx)(h,{refId:t,labels:Object.keys(s),query:a,onChange:r,variableOptionGroup:c,metricDescriptor:e}),(0,i.jsx)(m,{refId:t,datasource:n,templateVariableOptions:c.options,query:a,customMetaData:l,onChange:r})]})})}const V=n.memo(z);var B=a("./public/app/plugins/datasource/cloud-monitoring/types.ts");const U={label:"None",value:B.mG.None},H=e=>{var t;let{query:a,metricDescriptor:n,onChange:r}=e;const o=q(n);return(0,i.jsx)(R,{label:"Pre-processing",tooltip:"Preprocessing options are displayed when the selected metric has a metric kind of delta or cumulative. The specific options available are determined by the metic's value type. If you select 'Rate', data points are aligned and converted to a rate per time series. If you select 'Delta', data points are aligned by their delta (difference) per time series",children:(0,i.jsx)(s.RadioButtonGroup,{onChange:e=>{const{valueType:t,metricKind:s,perSeriesAligner:n}=a,{perSeriesAligner:i}=(0,p.ID)(t,s,n,e);r(Object.assign({},a,{preprocessor:e,perSeriesAligner:i}))},value:null!==(t=a.preprocessor)&&void 0!==t?t:B.mG.None,options:o})})},q=e=>{const t=null==e?void 0:e.metricKind,a=null==e?void 0:e.valueType;return(0,n.useMemo)((()=>{if(!t||t===B.lH.GAUGE||a===B.$h.DISTRIBUTION)return[U];const e=[U,{label:"Rate",value:B.mG.Rate,description:"Data points are aligned and converted to a rate per time series"}];return t===B.lH.CUMULATIVE?[...e,{label:"Delta",value:B.mG.Delta,description:"Data points are aligned by their delta (difference) per time series"}]:e}),[t,a])}},"./public/app/plugins/datasource/cloud-monitoring/constants.ts":(e,t,a)=>{"use strict";a.d(t,{d7:()=>r,XC:()=>i,qN:()=>o,Lh:()=>l,Eu:()=>c,lx:()=>d,dD:()=>u,$e:()=>p,IR:()=>h,XI:()=>m});var s=a("./public/app/plugins/datasource/cloud-monitoring/types.ts"),n=a("../../opt/drone/yarncache/@grafana-google-sdk-npm-0.0.2-9c57af4cfa-a4dfe7a31a.zip/node_modules/@grafana/google-sdk/index.js");const r=71,i=19,o=14,l=28,c=(n.GoogleAuthType.JWT,n.GoogleAuthType.GCE,[{text:"delta",value:"ALIGN_DELTA",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.DISTRIBUTION],metricKinds:[s.lH.CUMULATIVE,s.lH.DELTA]},{text:"rate",value:"ALIGN_RATE",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY],metricKinds:[s.lH.CUMULATIVE,s.lH.DELTA]},{text:"interpolate",value:"ALIGN_INTERPOLATE",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY],metricKinds:[s.lH.GAUGE]},{text:"next older",value:"ALIGN_NEXT_OLDER",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.DISTRIBUTION,s.$h.STRING,s.$h.VALUE_TYPE_UNSPECIFIED,s.$h.BOOL],metricKinds:[s.lH.GAUGE]},{text:"min",value:"ALIGN_MIN",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY],metricKinds:[s.lH.GAUGE,s.lH.DELTA]},{text:"max",value:"ALIGN_MAX",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY],metricKinds:[s.lH.GAUGE,s.lH.DELTA]},{text:"mean",value:"ALIGN_MEAN",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY],metricKinds:[s.lH.GAUGE,s.lH.DELTA]},{text:"count",value:"ALIGN_COUNT",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.BOOL],metricKinds:[s.lH.GAUGE,s.lH.DELTA]},{text:"sum",value:"ALIGN_SUM",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.DISTRIBUTION],metricKinds:[s.lH.GAUGE,s.lH.DELTA]},{text:"stddev",value:"ALIGN_STDDEV",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY],metricKinds:[s.lH.GAUGE,s.lH.DELTA]},{text:"count true",value:"ALIGN_COUNT_TRUE",valueTypes:[s.$h.BOOL],metricKinds:[s.lH.GAUGE]},{text:"count false",value:"ALIGN_COUNT_FALSE",valueTypes:[s.$h.BOOL],metricKinds:[s.lH.GAUGE]},{text:"fraction true",value:"ALIGN_FRACTION_TRUE",valueTypes:[s.$h.BOOL],metricKinds:[s.lH.GAUGE]},{text:"percentile 99",value:"ALIGN_PERCENTILE_99",valueTypes:[s.$h.DISTRIBUTION],metricKinds:[s.lH.GAUGE,s.lH.DELTA]},{text:"percentile 95",value:"ALIGN_PERCENTILE_95",valueTypes:[s.$h.DISTRIBUTION],metricKinds:[s.lH.GAUGE,s.lH.DELTA]},{text:"percentile 50",value:"ALIGN_PERCENTILE_50",valueTypes:[s.$h.DISTRIBUTION],metricKinds:[s.lH.GAUGE,s.lH.DELTA]},{text:"percentile 05",value:"ALIGN_PERCENTILE_05",valueTypes:[s.$h.DISTRIBUTION],metricKinds:[s.lH.GAUGE,s.lH.DELTA]},{text:"percent change",value:"ALIGN_PERCENT_CHANGE",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY],metricKinds:[s.lH.GAUGE,s.lH.DELTA]}]),d=[{text:"none",value:"REDUCE_NONE",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.DISTRIBUTION,s.$h.BOOL,s.$h.STRING],metricKinds:[s.lH.GAUGE,s.lH.DELTA,s.lH.CUMULATIVE,s.lH.METRIC_KIND_UNSPECIFIED]},{text:"mean",value:"REDUCE_MEAN",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.DISTRIBUTION],metricKinds:[s.lH.GAUGE,s.lH.DELTA,s.lH.CUMULATIVE]},{text:"min",value:"REDUCE_MIN",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY],metricKinds:[s.lH.GAUGE,s.lH.DELTA,s.lH.CUMULATIVE,s.lH.METRIC_KIND_UNSPECIFIED]},{text:"max",value:"REDUCE_MAX",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY],metricKinds:[s.lH.GAUGE,s.lH.DELTA,s.lH.CUMULATIVE,s.lH.METRIC_KIND_UNSPECIFIED]},{text:"sum",value:"REDUCE_SUM",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.DISTRIBUTION],metricKinds:[s.lH.GAUGE,s.lH.DELTA,s.lH.CUMULATIVE,s.lH.METRIC_KIND_UNSPECIFIED]},{text:"std. dev.",value:"REDUCE_STDDEV",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.DISTRIBUTION],metricKinds:[s.lH.GAUGE,s.lH.DELTA,s.lH.CUMULATIVE,s.lH.METRIC_KIND_UNSPECIFIED]},{text:"count",value:"REDUCE_COUNT",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.DISTRIBUTION,s.$h.BOOL,s.$h.STRING],metricKinds:[s.lH.GAUGE,s.lH.DELTA,s.lH.CUMULATIVE]},{text:"count true",value:"REDUCE_COUNT_TRUE",valueTypes:[s.$h.BOOL],metricKinds:[s.lH.GAUGE,s.lH.DELTA]},{text:"count false",value:"REDUCE_COUNT_FALSE",valueTypes:[s.$h.BOOL],metricKinds:[s.lH.GAUGE,s.lH.DELTA]},{text:"99th percentile",value:"REDUCE_PERCENTILE_99",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.DISTRIBUTION],metricKinds:[s.lH.GAUGE,s.lH.DELTA,s.lH.CUMULATIVE]},{text:"95th percentile",value:"REDUCE_PERCENTILE_95",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.DISTRIBUTION],metricKinds:[s.lH.GAUGE,s.lH.DELTA,s.lH.CUMULATIVE]},{text:"50th percentile",value:"REDUCE_PERCENTILE_50",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.DISTRIBUTION],metricKinds:[s.lH.GAUGE,s.lH.DELTA,s.lH.CUMULATIVE]},{text:"5th percentile",value:"REDUCE_PERCENTILE_05",valueTypes:[s.$h.INT64,s.$h.DOUBLE,s.$h.MONEY,s.$h.DISTRIBUTION],metricKinds:[s.lH.GAUGE,s.lH.DELTA,s.lH.CUMULATIVE]}],u=[{text:"grafana auto",value:"grafana-auto"},{text:"stackdriver auto",value:"stackdriver-auto",hidden:!0},{text:"cloud monitoring auto",value:"cloud-monitoring-auto"},{text:"1m",value:"+60s"},{text:"2m",value:"+120s"},{text:"5m",value:"+300s"},{text:"10m",value:"+600s"},{text:"30m",value:"+1800s"},{text:"1h",value:"+3600s"},{text:"3h",value:"+7200s"},{text:"6h",value:"+21600s"},{text:"1d",value:"+86400s"},{text:"3d",value:"+259200s"},{text:"1w",value:"+604800s"}],p=["metadata.system_labels.cloud_account","metadata.system_labels.name","metadata.system_labels.region","metadata.system_labels.state","metadata.system_labels.instance_group","metadata.system_labels.node_name","metadata.system_labels.service_name","metadata.system_labels.top_level_controller_type","metadata.system_labels.top_level_controller_name","metadata.system_labels.container_image"],h=[{label:"SLI Value",value:"select_slo_health"},{label:"SLO Compliance",value:"select_slo_compliance"},{label:"SLO Error Budget Remaining",value:"select_slo_budget_fraction"}],m=[{label:"Metrics",value:s.xL.METRICS},{label:"Service Level Objectives (SLO)",value:s.xL.SLO}]},"./public/app/plugins/datasource/cloud-monitoring/functions.ts":(e,t,a)=>{"use strict";a.d(t,{qA:()=>l,Qf:()=>c,FL:()=>d,oU:()=>u,A_:()=>p,Qd:()=>h,ID:()=>m,gY:()=>g,mi:()=>f});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./public/app/plugins/datasource/cloud-monitoring/constants.ts"),r=a("./packages/grafana-runtime/src/index.ts"),i=a("./public/app/plugins/datasource/cloud-monitoring/types.ts");const o=(0,r.getTemplateSrv)(),l=e=>(0,s.uniqBy)(e,"service"),c=(e,t)=>e.filter((e=>e.service===t)),d=(e,t,a,s)=>{const n=c(e,s).map((e=>({value:e.type,name:e.displayName}))),r=n.some((e=>e.value===a)),i=n.length?n[0].value:"";return{metricTypes:n,selectedMetricType:r?t:i}},u=(e,t,a)=>(a&&a===i.mG.Rate&&(t=i.lH.GAUGE),e?n.Eu.filter((a=>-1!==a.valueTypes.indexOf(e)&&-1!==a.metricKinds.indexOf(t))):[]),p=(e,t)=>t?n.lx.filter((a=>-1!==a.valueTypes.indexOf(e)&&-1!==a.metricKinds.indexOf(t))):[],h=async(e,t,a)=>{const s=await e.getLabels(t,"handleLabelKeysQuery",a);return[...Object.keys(s),...n.$e]},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.$h.DOUBLE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.lH.GAUGE,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.CS.ALIGN_MEAN,s=arguments.length>3?arguments[3]:void 0;const n=u(e,t,s).map((e=>Object.assign({},e,{label:e.text})));return n.some((e=>e.value===o.replace(a)))||(a=n.length>0?n[0].value:i.CS.ALIGN_MEAN),{alignOptions:n,perSeriesAligner:a}},g=e=>{const t=e.reduce(((e,t)=>{const a=t.split(".").map(s.startCase),n=(2===a.length?a:(0,s.initial)(a)).join(" "),r={value:t,label:t};return e[n]?e[n]=[...e[n],r]:e[n]=[r],e}),{});return Object.entries(t).map((e=>{let[t,a]=e;return{label:t,options:a,expanded:!0}}),[])},f=e=>(0,s.chunk)(e,4).map((e=>{let[t,a,s,n="AND"]=e;return{key:t,operator:a,value:s,condition:n}}))},"./public/app/plugins/datasource/cloud-monitoring/types.ts":(e,t,a)=>{"use strict";a.d(t,{Bp:()=>n,xL:()=>r,je:()=>i,mG:()=>o,lH:()=>l,$h:()=>c,CS:()=>d});var s=a("../../opt/drone/yarncache/@grafana-google-sdk-npm-0.0.2-9c57af4cfa-a4dfe7a31a.zip/node_modules/@grafana/google-sdk/index.js");s.GoogleAuthType.JWT,s.GoogleAuthType.GCE;let n,r,i,o,l,c,d;!function(e){e.Projects="projects",e.Services="services",e.DefaultProject="defaultProject",e.MetricTypes="metricTypes",e.LabelKeys="labelKeys",e.LabelValues="labelValues",e.ResourceTypes="resourceTypes",e.Aggregations="aggregations",e.Aligners="aligners",e.AlignmentPeriods="alignmentPeriods",e.Selectors="selectors",e.SLOServices="sloServices",e.SLO="slo"}(n||(n={})),function(e){e.METRICS="metrics",e.SLO="slo"}(r||(r={})),function(e){e.Visual="visual",e.MQL="mql"}(i||(i={})),function(e){e.None="none",e.Rate="rate",e.Delta="delta"}(o||(o={})),function(e){e.METRIC_KIND_UNSPECIFIED="METRIC_KIND_UNSPECIFIED",e.GAUGE="GAUGE",e.DELTA="DELTA",e.CUMULATIVE="CUMULATIVE"}(l||(l={})),function(e){e.VALUE_TYPE_UNSPECIFIED="VALUE_TYPE_UNSPECIFIED",e.BOOL="BOOL",e.INT64="INT64",e.DOUBLE="DOUBLE",e.STRING="STRING",e.DISTRIBUTION="DISTRIBUTION",e.MONEY="MONEY"}(c||(c={})),function(e){e.ALIGN_DELTA="ALIGN_DELTA",e.ALIGN_RATE="ALIGN_RATE",e.ALIGN_INTERPOLATE="ALIGN_INTERPOLATE",e.ALIGN_NEXT_OLDER="ALIGN_NEXT_OLDER",e.ALIGN_MIN="ALIGN_MIN",e.ALIGN_MAX="ALIGN_MAX",e.ALIGN_MEAN="ALIGN_MEAN",e.ALIGN_COUNT="ALIGN_COUNT",e.ALIGN_SUM="ALIGN_SUM",e.ALIGN_STDDEV="ALIGN_STDDEV",e.ALIGN_COUNT_TRUE="ALIGN_COUNT_TRUE",e.ALIGN_COUNT_FALSE="ALIGN_COUNT_FALSE",e.ALIGN_FRACTION_TRUE="ALIGN_FRACTION_TRUE",e.ALIGN_PERCENTILE_99="ALIGN_PERCENTILE_99",e.ALIGN_PERCENTILE_95="ALIGN_PERCENTILE_95",e.ALIGN_PERCENTILE_50="ALIGN_PERCENTILE_50",e.ALIGN_PERCENTILE_05="ALIGN_PERCENTILE_05",e.ALIGN_PERCENT_CHANGE="ALIGN_PERCENT_CHANGE"}(d||(d={}))},"./public/app/plugins/datasource/cloudwatch/aws_url.ts":(e,t,a)=>{"use strict";a.d(t,{M:()=>n});const s=a("../../opt/drone/yarncache/jsurl-npm-0.1.5-9e17f93783-50b614908d.zip/node_modules/jsurl/index.js");function n(e,t){return`https://${t}.console.aws.amazon.com/cloudwatch/home?region=${t}#logs-insights:queryDetail=${s.stringify(e)}`}},"./public/app/plugins/datasource/cloudwatch/cloudwatch-sql/language.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{SELECT:()=>s,FROM:()=>n,WHERE:()=>r,GROUP:()=>i,ORDER:()=>o,BY:()=>l,DESC:()=>c,ASC:()=>d,LIMIT:()=>u,WITH:()=>p,SCHEMA:()=>h,KEYWORDS:()=>m,STATISTICS:()=>g,AND:()=>f,LOGICAL_OPERATORS:()=>b,EQUALS:()=>v,NOT_EQUALS:()=>x,COMPARISON_OPERATORS:()=>y,language:()=>w,conf:()=>j});const s="SELECT",n="FROM",r="WHERE",i="GROUP",o="ORDER",l="BY",c="DESC",d="ASC",u="LIMIT",p="WITH",h="SCHEMA",m=[s,n,r,i,o,l,c,d,u,p,h],g=["AVG","COUNT","MAX","MIN","SUM"],f="AND",b=[f],v="=",x="!=",y=[v,x],w={defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:m,operators:b,builtinFunctions:g,tokenizer:{root:[[/\$[a-zA-Z0-9-_]+/,"variable"],{include:"@comments"},{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$]+/,{cases:{"@keywords":"keyword","@operators":"operator","@builtinFunctions":"predefined","@default":"identifier"}}],[/[=!%&+\-*/|~^]/,"operator"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"]],comment:[[/[^*/]+/,"comment"],[/./,"comment"]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}],[/"/,{token:"type",next:"@string_double"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],string_double:[[/[^\\"]+/,"type"],[/"/,"type","@pop"]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]]}},j={comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}},"./public/app/plugins/datasource/cloudwatch/components/LogsQueryEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{b:()=>S,Z:()=>T});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),i=a("./public/app/plugins/datasource/cloudwatch/syntax.ts"),o=a("../../opt/drone/yarncache/prismjs-npm-1.26.0-15be1ab06b-6de058930c.zip/node_modules/prismjs/prism.js"),l=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),c=a("./public/app/store/store.ts"),d=a("./public/app/core/actions/index.ts"),u=a("./public/app/core/copy/appNotification.ts");const p=/\s+by\s+/im,h=/([\w$@().]+)(?:(\s+as\s+)([\w$]+))?\s*,?\s*/iy;function m(e){let t,a=[];if(t=e.match(p)){let s;for(h.lastIndex=t.index+t[0].length;s=h.exec(e);)a.push(s[2]?s[3]:s[1]),h.lastIndex=s.index+s[0].length}return a}var g=a("./public/app/plugins/datasource/cloudwatch/components/QueryHeader.tsx"),f=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const v=l.css`
  flex-grow: 1;
  min-height: 35px;
`,x=l.css`
  gap: 3px;
`;class y extends s.PureComponent{constructor(e,t){var a,s;super(e,t),b(this,"state",{selectedLogGroups:null!==(a=null===(s=this.props.query.logGroupNames)||void 0===s?void 0:s.map((e=>({value:e,label:e}))))&&void 0!==a?a:[],availableLogGroups:[],invalidLogGroups:!1,loadingLogGroups:!1,hint:void 0}),b(this,"plugins",void 0),b(this,"fetchLogGroupOptions",(async(e,t)=>{try{return(await this.props.datasource.describeLogGroups({refId:this.props.query.refId,region:e,logGroupNamePrefix:t})).map((e=>({value:e,label:e})))}catch(e){let t="unknown error";if("string"!=typeof e)try{t=JSON.stringify(e)}catch(e){}else t=e;return(0,c.WI)((0,d.$l)((0,u.t_)(t))),[]}})),b(this,"onLogGroupSearch",((e,t,a)=>{if("input-change"!==a.action)return Promise.resolve();return/^[\.\-_/#A-Za-z0-9]+$/.test(e)?(this.setState({loadingLogGroups:!0}),this.fetchLogGroupOptions(t,e).then((e=>{this.setState((t=>({availableLogGroups:(0,r.unionBy)(t.availableLogGroups,e,"value")})))})).finally((()=>{this.setState({loadingLogGroups:!1})}))):Promise.resolve()})),b(this,"onLogGroupSearchDebounced",(0,r.debounce)(this.onLogGroupSearch,300)),b(this,"componentDidMount",(()=>{const{query:e,onChange:t}=this.props;this.setState({loadingLogGroups:!0}),e.region&&this.fetchLogGroupOptions(e.region).then((a=>{this.setState((s=>{const n=s.selectedLogGroups;if(t){const a=Object.assign({},e,{logGroupNames:n.map((e=>e.value))});t(a)}return{loadingLogGroups:!1,availableLogGroups:a,selectedLogGroups:n}}))}))})),b(this,"onChangeQuery",(e=>{const{query:t,onChange:a}=this.props,{selectedLogGroups:s}=this.state;if(a){var n;a(Object.assign({},t,{expression:e,logGroupNames:null!==(n=null==s?void 0:s.map((e=>e.value)))&&void 0!==n?n:[],statsGroups:m(e)}))}})),b(this,"setSelectedLogGroups",(e=>{var t;this.setState({selectedLogGroups:e});const{onChange:a,query:s}=this.props;null==a||a(Object.assign({},s,{logGroupNames:null!==(t=e.map((e=>e.value)))&&void 0!==t?t:[]}))})),b(this,"setCustomLogGroups",(e=>{const t={value:e,label:e},a=[...this.state.selectedLogGroups,t];this.setSelectedLogGroups(a)})),b(this,"onRegionChange",(async e=>{this.setState({loadingLogGroups:!0});const t=await this.fetchLogGroupOptions(e);this.setState((e=>{const a=(0,r.intersectionBy)(e.selectedLogGroups,t,"value"),{onChange:s,query:n}=this.props;if(s){s(Object.assign({},n,{logGroupNames:a.map((e=>e.value))}))}return{availableLogGroups:t,selectedLogGroups:a,loadingLogGroups:!1}}))})),b(this,"onTypeahead",(async e=>{const{datasource:t,query:a}=this.props,{selectedLogGroups:s}=this.state;if(!t.languageProvider)return{suggestions:[]};const n=t.languageProvider,{history:r,absoluteRange:i}=this.props,{prefix:o,text:l,value:c,wrapperClasses:d,labelKey:u,editor:p}=e;return await n.provideCompletionItems({text:l,value:c,prefix:o,wrapperClasses:d,labelKey:u,editor:p},{history:r,absoluteRange:i,logGroupNames:s.map((e=>e.value)),region:a.region})})),b(this,"onQueryFieldClick",((e,t,a)=>{const{selectedLogGroups:s,loadingLogGroups:n}=this.state;(n||0===s.length)&&this.setState({invalidLogGroups:!0}),a()})),b(this,"onOpenLogGroupMenu",(()=>{this.setState({invalidLogGroups:!1})})),this.plugins=[(0,n.BracesPlugin)(),(0,n.SlatePrism)({onlyIn:e=>"block"===e.object&&"code_block"===e.type,getSyntax:e=>"cloudwatch"},Object.assign({},o.languages,{cloudwatch:i.ZP}))]}render(){var e,t;const{onRunQuery:a,onChange:s,ExtraFieldElement:i,data:o,query:l,datasource:c,allowCustomValue:d}=this.props,{selectedLogGroups:u,availableLogGroups:p,loadingLogGroups:h,hint:m,invalidLogGroups:b}=this.state,y=o&&o.error&&o.error.refId===l.refId,w=c.languageProvider?c.languageProvider.cleanText:void 0;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g.Z,{query:l,onRunQuery:a,datasource:c,onChange:s,sqlCodeEditorIsDirty:!1,onRegionChange:this.onRegionChange}),(0,f.jsx)("div",{className:`gf-form gf-form--grow flex-grow-1 ${x}`,children:(0,f.jsx)(n.LegacyForms.FormField,{label:"Log Groups",labelWidth:6,className:"flex-grow-1",inputEl:(0,f.jsx)(n.MultiSelect,{"aria-label":"Log Groups",menuShouldPortal:!0,allowCustomValue:d,options:(0,r.unionBy)(p,u,"value"),value:u,onChange:e=>{this.setSelectedLogGroups(e)},onCreateOption:e=>{this.setCustomLogGroups(e)},className:v,closeMenuOnSelect:!1,isClearable:!0,invalid:b,isOptionDisabled:()=>u.length>=20,placeholder:"Choose Log Groups",maxVisibleValues:4,noOptionsMessage:"No log groups available",isLoading:h,onOpenMenu:this.onOpenLogGroupMenu,onInputChange:(e,t)=>{this.onLogGroupSearchDebounced(e,l.region,t)}})})}),(0,f.jsxs)("div",{className:"gf-form-inline gf-form-inline--nowrap flex-grow-1",children:[(0,f.jsx)("div",{className:"gf-form gf-form--grow flex-shrink-1",children:(0,f.jsx)(n.QueryField,{additionalPlugins:this.plugins,query:null!==(e=l.expression)&&void 0!==e?e:"",onChange:this.onChangeQuery,onBlur:this.props.onBlur,onClick:this.onQueryFieldClick,onRunQuery:this.props.onRunQuery,onTypeahead:this.onTypeahead,cleanText:w,placeholder:"Enter a CloudWatch Logs Insights query (run with Shift+Enter)",portalOrigin:"cloudwatch",disabled:h||0===u.length})}),i]}),m&&(0,f.jsx)("div",{className:"query-row-break",children:(0,f.jsxs)("div",{className:"text-warning",children:[m.message,(0,f.jsx)("a",{className:"text-link muted",onClick:m.fix.action,children:m.fix.label})]})}),y?(0,f.jsx)("div",{className:"query-row-break",children:(0,f.jsx)("div",{className:"prom-query-field-info text-error",children:null==o||null===(t=o.error)||void 0===t?void 0:t.message})}):null]})}}var w,j=a("./public/app/plugins/datasource/cloudwatch/aws_url.ts");class C extends s.Component{constructor(){var e,t,a;super(...arguments),a={href:""},(t="state")in(e=this)?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}async componentDidUpdate(e){const{panelData:t}=this.props,{panelData:a}=e;if(a!==t&&null!=t&&t.request){const e=this.getExternalLink();this.setState({href:e})}}getExternalLink(){var e,t,a;const{query:s,panelData:n,datasource:r}=this.props,i=null==n||null===(e=n.request)||void 0===e?void 0:e.range;if(!i)return"";const o=i.from.toISOString(),l={end:i.to.toISOString(),start:o,timeType:"ABSOLUTE",tz:"UTC",editorString:null!==(t=s.expression)&&void 0!==t?t:"",isLiveTail:!1,source:null!==(a=s.logGroupNames)&&void 0!==a?a:[]};return(0,j.M)(l,r.getActualRegion(s.region))}render(){const{href:e}=this.state;return(0,f.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:[w||(w=(0,f.jsx)(n.Icon,{name:"share-alt"}))," CloudWatch Logs Insights"]})}}const k=l.css`
  margin-left: 3px;
  flex-grow: 0;
`,S=(0,s.memo)((function(e){var t,a;const{query:s,data:r,datasource:i,onRunQuery:o,onChange:l,exploreId:c,allowCustomValue:d=!1}=e;let u;if(null!=r&&null!==(t=r.request)&&void 0!==t&&null!==(a=t.range)&&void 0!==a&&a.from){const{range:e}=r.request;u={from:e.from.valueOf(),to:e.to.valueOf()}}else u={from:Date.now()-1e4,to:Date.now()};return(0,f.jsx)(y,{exploreId:c,datasource:i,query:s,onBlur:()=>{},onChange:l,onRunQuery:o,history:[],data:r,absoluteRange:u,allowCustomValue:d,ExtraFieldElement:(0,f.jsx)(n.InlineFormLabel,{className:`gf-form-label--btn ${k}`,width:"auto",tooltip:"Link to Graph in AWS",children:(0,f.jsx)(C,{query:s,panelData:r,datasource:i})})})})),T=S},"./public/app/plugins/datasource/cloudwatch/components/MetricStatEditor/index.ts":(e,t,a)=>{"use strict";a.d(t,{e:()=>c});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@grafana-experimental-virtual-044b968173/3/opt/drone/yarncache/@grafana-experimental-npm-0.0.2-canary.11-3ed391aeb7-6e8fa4bbdf.zip/node_modules/@grafana/experimental/index.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("./public/app/plugins/datasource/cloudwatch/components/index.ts"),i=a("./public/app/plugins/datasource/cloudwatch/hooks.ts"),o=a("./public/app/plugins/datasource/cloudwatch/utils/utils.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function c(e){var t;let{query:a,datasource:c,disableExpressions:d=!1,onChange:u,onRunQuery:p}=e;const{region:h,namespace:m,metricName:g,dimensions:f}=a,b=(0,i.JR)(c),v=(0,i.Bf)(c,h,m),x=(0,i.$K)(c,h,m,g,null!=f?f:{}),y=e=>{u(e),p()},w=async e=>{let{metricName:t,namespace:a,region:s}=e;return t?(await c.getMetrics(a,s).then((e=>{e.find((e=>e.value===t))||(t="")})),Object.assign({},e,{metricName:t})):e};return(0,l.jsxs)(s.EditorRows,{children:[(0,l.jsx)(s.EditorRow,{children:(0,l.jsxs)(s.EditorFieldGroup,{children:[(0,l.jsx)(s.EditorField,{label:"Namespace",width:26,children:(0,l.jsx)(n.Select,{"aria-label":"Namespace",value:a.namespace,allowCustomValue:!0,options:b,onChange:e=>{let{value:t}=e;t&&(async e=>{const t=await w(e);y(t)})(Object.assign({},a,{namespace:t}))}})}),(0,l.jsx)(s.EditorField,{label:"Metric name",width:16,children:(0,l.jsx)(n.Select,{"aria-label":"Metric name",value:a.metricName||null,allowCustomValue:!0,options:v,onChange:e=>{let{value:t}=e;t&&y(Object.assign({},a,{metricName:t}))}})}),(0,l.jsx)(s.EditorField,{label:"Statistic",width:16,children:(0,l.jsx)(n.Select,{inputId:`${a.refId}-metric-stat-editor-select-statistic`,allowCustomValue:!0,value:(0,o.E)(null!==(t=a.statistic)&&void 0!==t?t:c.standardStatistics[0]),options:(0,o._)(c,c.standardStatistics.filter((e=>e!==a.statistic)).map(o.E)),onChange:e=>{let{value:t}=e;t&&(c.standardStatistics.includes(t)||/^p\d{2}(?:\.\d{1,2})?$/.test(t)||t.startsWith("$"))&&y(Object.assign({},a,{statistic:t}))}})})]})}),(0,l.jsx)(s.EditorRow,{children:(0,l.jsx)(s.EditorField,{label:"Dimensions",children:(0,l.jsx)(r.Db,{query:a,onChange:e=>y(Object.assign({},a,{dimensions:e})),dimensionKeys:x,disableExpressions:d,datasource:c})})}),!d&&(0,l.jsx)(s.EditorRow,{children:(0,l.jsx)(s.EditorField,{label:"Match exact",optional:!0,tooltip:"Only show metrics that exactly match all defined dimension names.",children:(0,l.jsx)(n.Switch,{id:`${a.refId}-cloudwatch-match-exact`,value:!!a.matchExact,onChange:e=>{y(Object.assign({},a,{matchExact:e.currentTarget.checked}))}})})})]})}},"./public/app/plugins/datasource/cloudwatch/components/PanelQueryEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{S:()=>v});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./.yarn/__virtual__/@grafana-experimental-virtual-044b968173/3/opt/drone/yarncache/@grafana-experimental-npm-0.0.2-canary.11-3ed391aeb7-6e8fa4bbdf.zip/node_modules/@grafana/experimental/index.js"),i=a("./packages/grafana-ui/src/index.ts");var o,l,c=a("./public/app/plugins/datasource/cloudwatch/types.ts"),d=a("./public/app/plugins/datasource/cloudwatch/components/index.ts"),u=a("./public/app/plugins/datasource/cloudwatch/components/QueryHeader.tsx"),p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const h=["namespace","metricName","expression","dimensions","region","id","alias","statistic","period","sqlExpression","metricQueryType","metricEditorMode"];function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g=e=>{let{namespace:t,metricName:a,expression:s,dimensions:n,region:r,id:i,alias:o,statistic:l,period:d,sqlExpression:u,metricQueryType:p,metricEditorMode:m}=e,g=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,h);const f=Object.assign({queryMode:"Metrics",namespace:null!=t?t:"",metricName:null!=a?a:"",expression:null!=s?s:"",dimensions:null!=n?n:{},region:null!=r?r:"default",id:null!=i?i:"",alias:null!=o?o:"",statistic:null!=l?l:"Average",period:null!=d?d:"",metricQueryType:null!=p?p:c.$5.Search,metricEditorMode:null!=m?m:c.MQ.Builder,sqlExpression:null!=u?u:""},g);return g.hasOwnProperty("matchExact")?f:Object.assign({},f,{matchExact:!0})};class f extends s.PureComponent{constructor(){super(...arguments),m(this,"state",{sqlCodeEditorIsDirty:!1}),m(this,"componentDidMount",(()=>{const e=this.props.query,t=g(e);this.props.onChange(t)})),m(this,"onChange",(e=>{const{onChange:t,onRunQuery:a}=this.props;t(e),a()}))}render(){var e,t,a;const{onRunQuery:s,datasource:n}=this.props,h=this.props.query,m=g(h);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.Z,{query:m,onRunQuery:s,datasource:n,onChange:e=>{(e=>"Metrics"===e.queryMode)(e)&&e.metricEditorMode!==m.metricEditorMode&&this.setState({sqlCodeEditorIsDirty:!1}),this.onChange(e)},sqlCodeEditorIsDirty:this.state.sqlCodeEditorIsDirty}),o||(o=(0,p.jsx)(r.Space,{v:.5})),m.metricQueryType===c.$5.Search&&(0,p.jsxs)(p.Fragment,{children:[m.metricEditorMode===c.MQ.Builder&&(0,p.jsx)(d.eL,Object.assign({},Object.assign({},this.props,{query:m}))),m.metricEditorMode===c.MQ.Code&&(0,p.jsx)(d.M_,{onRunQuery:s,expression:null!==(e=m.expression)&&void 0!==e?e:"",onChange:e=>this.props.onChange(Object.assign({},m,{expression:e})),datasource:n})]}),m.metricQueryType===c.$5.Query&&(0,p.jsxs)(p.Fragment,{children:[m.metricEditorMode===c.MQ.Code&&(0,p.jsx)(d.tJ,{region:m.region,sql:null!==(t=m.sqlExpression)&&void 0!==t?t:"",onChange:e=>{this.state.sqlCodeEditorIsDirty||this.setState({sqlCodeEditorIsDirty:!0}),this.props.onChange(Object.assign({},h,{sqlExpression:e}))},onRunQuery:s,datasource:n}),m.metricEditorMode===c.MQ.Builder&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(d.Ex,{query:m,onChange:this.props.onChange,onRunQuery:s,datasource:n})})]}),l||(l=(0,p.jsx)(r.Space,{v:.5})),(0,p.jsxs)(r.EditorRow,{children:[(0,p.jsx)(r.EditorField,{label:"ID",width:26,optional:!0,tooltip:"ID can be used to reference other queries in math expressions. The ID can include numbers, letters, and underscore, and must start with a lowercase letter.",children:(0,p.jsx)(i.Input,{id:`${m.refId}-cloudwatch-metric-query-editor-id`,onBlur:s,onChange:e=>this.onChange(Object.assign({},h,{id:e.target.value})),type:"text",invalid:!!m.id&&!/^$|^[a-z][a-zA-Z0-9_]*$/.test(m.id),value:m.id})}),(0,p.jsx)(r.EditorField,{label:"Period",width:26,tooltip:"Minimum interval between points in seconds.",children:(0,p.jsx)(i.Input,{id:`${m.refId}-cloudwatch-metric-query-editor-period`,value:m.period||"",placeholder:"auto",onBlur:s,onChange:e=>this.onChange(Object.assign({},h,{period:e.target.value}))})}),(0,p.jsx)(r.EditorField,{label:"Alias",width:26,optional:!0,tooltip:"Change time series legend name using this field. See documentation for replacement variable formats.",children:(0,p.jsx)(d.V8,{value:null!==(a=h.alias)&&void 0!==a?a:"",onChange:e=>this.onChange(Object.assign({},h,{alias:e}))})})]})]})}}var b=a("./public/app/plugins/datasource/cloudwatch/components/LogsQueryEditor.tsx");class v extends s.PureComponent{render(){var e;const{query:t}=this.props,a=null!==(e=t.queryMode)&&void 0!==e?e:"Metrics";return(0,p.jsx)(p.Fragment,{children:a===n.ExploreMode.Logs?(0,p.jsx)(b.Z,Object.assign({},this.props,{allowCustomValue:!0})):(0,p.jsx)(f,Object.assign({},this.props))})}}},"./public/app/plugins/datasource/cloudwatch/components/QueryHeader.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var s,n=a("./packages/grafana-data/src/index.ts"),r=a("./.yarn/__virtual__/@grafana-experimental-virtual-044b968173/3/opt/drone/yarncache/@grafana-experimental-npm-0.0.2-canary.11-3ed391aeb7-6e8fa4bbdf.zip/node_modules/@grafana/experimental/index.js"),i=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),l=a("./public/app/plugins/datasource/cloudwatch/hooks.ts"),c=a("./packages/grafana-ui/src/index.ts"),d=a("./public/app/plugins/datasource/cloudwatch/types.ts"),u=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const p=[{label:"Metric Search",value:d.$5.Search},{label:"Metric Query",value:d.$5.Query}],h=[{label:"Builder",value:d.MQ.Builder},{label:"Code",value:d.MQ.Code}],m=e=>{let{query:t,sqlCodeEditorIsDirty:a,onChange:n,onRunQuery:i}=e;const{metricEditorMode:l,metricQueryType:m}=t,[g,f]=(0,o.useState)(!1),b=(0,o.useCallback)((e=>{a&&m===d.$5.Query&&l===d.MQ.Code?f(!0):n(Object.assign({},t,{metricEditorMode:e}))}),[f,n,a,t,l,m]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(r.InlineSelect,{"aria-label":"Metric editor mode",value:p.find((e=>e.value===m)),options:p,onChange:e=>{let{value:a}=e;n(Object.assign({},t,{metricQueryType:a}))}}),s||(s=(0,u.jsx)(r.FlexItem,{grow:1})),(0,u.jsx)(c.RadioButtonGroup,{options:h,size:"sm",value:l,onChange:b}),t.metricQueryType===d.$5.Query&&t.metricEditorMode===d.MQ.Code&&(0,u.jsx)(c.Button,{variant:"secondary",size:"sm",onClick:()=>i(),children:"Run query"}),(0,u.jsx)(c.ConfirmModal,{isOpen:g,title:"Are you sure?",body:"You will lose manual changes done to the query if you go back to the visual builder.",confirmText:"Yes, I am sure.",dismissText:"No, continue editing the query manually.",icon:"exclamation-triangle",onConfirm:()=>{f(!1),n(Object.assign({},t,{metricEditorMode:d.MQ.Builder}))},onDismiss:()=>f(!1)})]})},g=[{label:"CloudWatch Metrics",value:"Metrics"},{label:"CloudWatch Logs",value:"Logs"}],f=e=>{let{query:t,sqlCodeEditorIsDirty:a,datasource:s,onChange:o,onRunQuery:c,onRegionChange:d}=e;const{queryMode:p,region:h}=t,[f,b]=(0,l.eH)(s);return(0,u.jsxs)(r.EditorHeader,{children:[(0,u.jsx)(r.InlineSelect,{label:"Region",value:h,placeholder:"Select region",allowCustomValue:!0,onChange:e=>{let{value:a}=e;return a&&(async e=>{let{value:a}=e;d&&await d(null!=a?a:"default"),o(Object.assign({},t,{region:a}))})({value:a})},options:f,isLoading:b}),(0,u.jsx)(r.InlineSelect,{"aria-label":"Query mode",value:p,options:g,onChange:e=>{let{value:a}=e;if(a!==p){const e=(0,i.pick)(t,"id","region","namespace","refId","hide","key","queryType","datasource");o(Object.assign({},e,{queryMode:a}))}}}),p!==n.ExploreMode.Logs&&(0,u.jsx)(m,{query:t,datasource:s,onChange:o,onRunQuery:c,sqlCodeEditorIsDirty:a})]})}},"./public/app/plugins/datasource/cloudwatch/components/index.ts":(e,t,a)=>{"use strict";a.d(t,{V8:()=>b,Db:()=>g,M_:()=>Z,eL:()=>v.e,Ex:()=>H,tJ:()=>K});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./.yarn/__virtual__/@grafana-experimental-virtual-044b968173/3/opt/drone/yarncache/@grafana-experimental-npm-0.0.2-canary.11-3ed391aeb7-6e8fa4bbdf.zip/node_modules/@grafana/experimental/index.js"),i=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),o=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsyncFn.js"),l=a("./packages/grafana-data/src/index.ts"),c=a("./packages/grafana-ui/src/index.ts"),d=a("./public/app/plugins/datasource/cloudwatch/utils/utils.ts"),u=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const p={value:"*",label:"*"},h=e=>{let{filter:t,query:{region:a,namespace:s,metricName:h,dimensions:g},datasource:f,dimensionKeys:b,disableExpressions:v,onChange:x,onDelete:y}=e;const w=(0,n.useMemo)((()=>((e,t)=>Object.entries(null!=e?e:{}).reduce(((e,a)=>{let[s,n]=a;return s!==t?Object.assign({},e,{[s]:n}):e}),{}))(null!=g?g:{},t.key)),[g,t]),[j,C]=(0,o.Z)((async()=>t.key?f.getDimensionValues(a,s,h,t.key,w).then((e=>(e.length&&!v&&e.unshift(p),(0,d._)(f,e)))):[]),[t.key,g]),k=(0,c.useTheme2)(),S=m(k);return(0,u.jsx)("div",{"data-testid":"cloudwatch-dimensions-filter-item",children:(0,u.jsxs)(r.InputGroup,{children:[(0,u.jsx)(c.Select,{"aria-label":"Dimensions filter key",inputId:"cloudwatch-dimensions-filter-item-key",width:"auto",value:t.key?(0,l.toOption)(t.key):null,allowCustomValue:!0,options:b,onChange:e=>{e.label&&x({key:e.label,value:void 0})}}),(0,u.jsx)("span",{className:(0,i.cx)(S.root),children:"="}),(0,u.jsx)(c.Select,{"aria-label":"Dimensions filter value",inputId:"cloudwatch-dimensions-filter-item-value",onOpenMenu:C,width:"auto",value:t.value?(0,l.toOption)(t.value):null,allowCustomValue:!0,isLoading:j.loading,options:j.value,onChange:e=>{e.value&&x(Object.assign({},t,{value:e.value}))}}),(0,u.jsx)(r.AccessoryButton,{"aria-label":"remove",icon:"times",variant:"secondary",onClick:y})]})})},m=(0,c.stylesFactory)((e=>({root:(0,i.css)({padding:e.spacing(0,1),alignSelf:"center"})}))),g=e=>{let{query:t,datasource:a,dimensionKeys:i,disableExpressions:o,onChange:l}=e;const c=(0,n.useMemo)((()=>{return e=t.dimensions,Object.entries(null!=e?e:{}).reduce(((e,t)=>{let[a,s]=t;if(s&&"string"==typeof s){const t={key:a,value:s,operator:"="};return[...e,t]}return e}),[]);var e}),[t.dimensions]),[d,p]=(0,n.useState)(c);return(0,u.jsx)(r.EditorList,{items:d,onChange:e=>{p(e);const a=e.reduce(((e,t)=>{let{key:a,value:s}=t;return a&&s?Object.assign({},e,{[a]:s}):e}),{});(0,s.isEqual)(a,t.dimensions)||l(a)},renderItem:f(a,t,i,o)})};function f(e,t,a,s){return function(n,r,i){return(0,u.jsx)(h,{filter:n,onChange:e=>r(e),datasource:e,query:t,disableExpressions:s,dimensionKeys:a,onDelete:i})}}const b=e=>{let{value:t="",onChange:a}=e;const[r,i]=(0,n.useState)(t),o=(0,s.debounce)(a,1500);return a=e=>{i(e.target.value),o(e.target.value)},(0,u.jsx)(c.Input,{type:"text",value:r,onChange:a,"aria-label":"Optional alias"})};a("./public/app/plugins/datasource/cloudwatch/components/PanelQueryEditor.tsx"),a("./public/app/plugins/datasource/cloudwatch/components/LogsQueryEditor.tsx");var v=a("./public/app/plugins/datasource/cloudwatch/components/MetricStatEditor/index.ts"),x=a("./public/app/features/templating/template_srv.ts");let y,w;!function(e){e.String="string"}(y||(y={})),function(e){e.Property="property",e.Operator="operator",e.Or="or",e.And="and",e.GroupBy="groupBy",e.Function="function",e.FunctionParameter="functionParameter"}(w||(w={}));class j{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,x.J)();this.templateSrv=e}expressionToSqlQuery(e){var t,a,s;let{select:n,from:r,where:i,groupBy:o,orderBy:l,orderByDirection:c,limit:d}=e;if(!r||null==n||!n.name||null==n||null===(t=n.parameters)||void 0===t||!t.length)return;let u=[];return this.appendSelect(n,u),this.appendFrom(r,u),this.appendWhere(i,u,!0,null!==(a=null==i||null===(s=i.expressions)||void 0===s?void 0:s.length)&&void 0!==a?a:0),this.appendGroupBy(o,u),this.appendOrderBy(l,c,u),this.appendLimit(d,u),u.join(" ")}appendSelect(e,t){t.push("SELECT"),this.appendFunction(e,t)}appendFrom(e,t){var a,s;t.push("FROM"),(null==e?void 0:e.type)===w.Function?this.appendFunction(e,t):t.push(this.formatValue(null!==(a=null==e||null===(s=e.property)||void 0===s?void 0:s.name)&&void 0!==a?a:""))}appendWhere(e,t,a,s){if(!e)return;const n="expressions"in e&&e.expressions.length>0;if(a&&n&&t.push("WHERE"),e.type===w.And){const n=[];if(e.expressions.map((e=>this.appendWhere(e,n,!1,s))),0===n.length)return;const r=n.join(" AND "),i=!a&&s>1&&n.length>1;return t.push(i?`(${r})`:r)}if(e.type!==w.Or)return e.type===w.Operator?this.appendOperator(e,t):void 0;{const n=[];if(e.expressions.map((e=>this.appendWhere(e,n,!1,s))),0===n.length)return;const r=n.join(" OR "),i=!a&&s>1&&n.length>1;t.push(i?`(${r})`:r)}}appendGroupBy(e,t){const a=[];for(const t of null!==(s=null==e?void 0:e.expressions)&&void 0!==s?s:[]){var s;(null==t?void 0:t.type)===w.GroupBy&&t.property.name&&a.push(this.formatValue(t.property.name))}a.length>0&&t.push(`GROUP BY ${a.join(", ")}`)}appendOrderBy(e,t,a){e&&(a.push("ORDER BY"),this.appendFunction(e,a),a.push(null!=t?t:"ASC"))}appendLimit(e,t){e&&t.push(`LIMIT ${e}`)}appendOperator(e,t,a){const{property:s,operator:n}=e;s.name&&n.name&&n.value&&t.push(`${this.formatValue(s.name)} ${n.name} '${n.value}'`)}appendFunction(e,t){var a;if(null==e||!e.name)return;const s=(null!==(a=e.parameters)&&void 0!==a?a:[]).map((e=>e.name&&this.formatValue(e.name))).filter(Boolean).join(", ");t.push(`${e.name}(${s})`)}formatValue(e){const t=this.templateSrv.replace(e,{},"raw");return/[/\s\.-]/.test(t)?`"${e}"`:e}}var C=a("./public/app/plugins/datasource/cloudwatch/cloudwatch-sql/language.ts"),k=a("./public/app/plugins/datasource/cloudwatch/hooks.ts");function S(e){var t;return null==e||null===(t=e.parameters)||void 0===t?void 0:t[0].name}function T(e){return(null==e?void 0:e.type)===w.Property?e.property.name:(null==e?void 0:e.type)===w.Function?null===(t=e.parameters)||void 0===t?void 0:t[0].name:void 0;var t}function O(e){var t,a,s;const n=null===(t=e.property)||void 0===t?void 0:t.name,r=null===(a=e.operator)||void 0===a?void 0:a.value,i=null===(s=e.operator)||void 0===s?void 0:s.name;if(n&&r&&i)return{type:w.Operator,property:{type:y.String,name:n},operator:{value:r,name:i}}}function _(e){return e.flatMap((e=>e.type===w.Operator?e:e.type===w.And||e.type===w.Or?_(e.expressions):[]))}function N(e){var t;const a=e.where;return _(null!==(t=null==a?void 0:a.expressions)&&void 0!==t?t:[])}function I(e){var t;const a=e.groupBy;return(null!==(t=null==a?void 0:a.expressions)&&void 0!==t?t:[]).flatMap((e=>e.type===w.GroupBy?e:[]))}function P(e,t){var a;return Object.assign({},e,{sql:Object.assign({},null!==(a=e.sql)&&void 0!==a?a:{},t)})}function M(e,t){var a,s;return P(e,{select:Object.assign({type:w.Function},null!==(a=null===(s=e.sql)||void 0===s?void 0:s.select)&&void 0!==a?a:{},{name:t})})}const F=C.STATISTICS.map(l.toOption),A=e=>{var t,a;let{datasource:s,query:i,onQueryChange:o}=e;const p=null!==(t=i.sql)&&void 0!==t?t:{},h=null===(a=p.select)||void 0===a?void 0:a.name;(0,n.useEffect)((()=>{h||o(M(i,C.STATISTICS[0]))}),[h,o,i]);const m=S(p.select),g=T(p.from),f=function(e){var t;if((null==e?void 0:e.type)===w.Function&&null!=e&&null!==(t=e.parameters)&&void 0!==t&&t.length){var a;return(null==e||null===(a=e.parameters)||void 0===a?void 0:a.length)<=1?[]:(null==e?void 0:e.parameters.slice(1)).reduce(((e,t)=>t.name?[...e,t.name]:e),[])}}(p.from),b=(null==(v=p.from)?void 0:v.type)===w.Function&&v.name===C.SCHEMA;var v;const x=(0,k.JR)(s),j=(0,k.Bf)(s,i.region,g),O=(0,n.useMemo)((()=>(null!=f?f:[]).reduce(((e,t)=>t?Object.assign({},e,{[t]:null}):e),{})),[f]),_=(0,k.$K)(s,i.region,g,m,O),N=(0,n.useMemo)((()=>null!=f&&f.length?[..._,...f.map(l.toOption)]:_),[_,f]),I=async e=>{let{region:t,sql:a}=e;return await s.getMetrics(e.namespace,t).then((t=>{t.some((e=>e.value===m))||(a=function(e){var t,a;const s=Object.assign({},e);return null===(t=s.sql)||void 0===t||null===(a=t.select)||void 0===a||delete a.parameters,s}(e).sql)})),Object.assign({},e,{sql:a})};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(r.EditorFieldGroup,{children:[(0,u.jsx)(r.EditorField,{label:"Namespace",width:16,children:(0,u.jsx)(c.Select,{"aria-label":"Namespace",value:g?(0,l.toOption)(g):null,inputId:`${i.refId}-cloudwatch-sql-namespace`,options:x,allowCustomValue:!0,onChange:e=>{let{value:t}=e;return t&&(async e=>{const t=await I(e);o(t)})(function(e,t){var a;const s=null!==(a=e.sql)&&void 0!==a?a:{};if(e.namespace=t||"",void 0===t)return P(e,{from:void 0});if(!s.from||s.from.type===w.Property)return P(e,{from:{type:w.Property,property:{type:y.String,name:t}}});if(s.from.type===w.Function){var n;const a={type:w.FunctionParameter,name:t},r=(null!==(n=s.from.parameters)&&void 0!==n?n:[]).slice(1);return P(e,{from:{type:w.Function,name:C.SCHEMA,parameters:[a,...r]}})}return e}(i,t))},menuShouldPortal:!0})}),(0,u.jsx)(r.EditorField,{label:"With schema",children:(0,u.jsx)(c.Switch,{id:`${i.refId}-cloudwatch-sql-withSchema`,value:b,onChange:e=>e.target instanceof HTMLInputElement&&o(function(e,t){var a;const s=T((null!==(a=e.sql)&&void 0!==a?a:{}).from);if(t){const t={type:w.FunctionParameter,name:s};return P(e,{from:{type:w.Function,name:C.SCHEMA,parameters:[t]}})}return P(e,{from:{type:w.Property,property:{type:y.String,name:s}}})}(i,e.target.checked))})}),b&&(0,u.jsx)(r.EditorField,{label:"Schema labels",children:(0,u.jsx)(c.Select,{id:`${i.refId}-cloudwatch-sql-schema-label-keys`,width:"auto",isMulti:!0,disabled:!g,value:f?f.map(l.toOption):null,options:N,allowCustomValue:!0,onChange:e=>e&&o(function(e,t){var a,s,n;const r=null!==(a=e.sql)&&void 0!==a?a:{};if(t=Array.isArray(t)?t.map((e=>e.value)):[t.value],(null===(s=r.from)||void 0===s?void 0:s.type)===w.Function&&null!==(n=r.from.parameters)&&void 0!==n&&n.length){var i,o;const a=(null!==(i=t)&&void 0!==i?i:[]).map((e=>({type:w.FunctionParameter,name:e}))),s=(null!==(o=r.from.parameters)&&void 0!==o?o:[])[0];return P(e,{from:{type:w.Function,name:C.SCHEMA,parameters:[s,...a]}})}return e}(i,e)),menuShouldPortal:!0})})]}),(0,u.jsxs)(r.EditorFieldGroup,{children:[(0,u.jsx)(r.EditorField,{label:"Metric name",width:16,children:(0,u.jsx)(c.Select,{"aria-label":"Metric name",value:m?(0,l.toOption)(m):null,options:j,allowCustomValue:!0,onChange:e=>{let{value:t}=e;return t&&o(function(e,t){var a,s;const n={type:w.FunctionParameter,name:t};return P(e,{select:Object.assign({type:w.Function},null!==(a=null===(s=e.sql)||void 0===s?void 0:s.select)&&void 0!==a?a:{},{parameters:[n]})})}(i,t))},menuShouldPortal:!0})}),(0,u.jsx)(r.EditorField,{label:"Aggregation",width:16,children:(0,u.jsx)(c.Select,{"aria-label":"Aggregation",value:h?(0,l.toOption)(h):null,options:(0,d._)(s,F),onChange:e=>{let{value:t}=e;return t&&o(M(i,t))},menuShouldPortal:!0})})]})]})},D=C.COMPARISON_OPERATORS.map(l.toOption);function $(e,t){return function(a,s,n){return(0,u.jsx)(R,{datasource:e,query:t,filter:a,onChange:s,onDelete:n})}}const L=e=>{let{query:t,onQueryChange:a,datasource:s}=e;const i=(0,n.useMemo)((()=>{var e;return N(null!==(e=t.sql)&&void 0!==e?e:{})}),[t.sql]),[o,l]=(0,n.useState)(i);return(0,u.jsx)(r.EditorList,{items:o,onChange:e=>{const s=e.map((e=>{var t,a;return{type:w.Operator,property:null!==(t=e.property)&&void 0!==t?t:{type:y.String},operator:null!==(a=e.operator)&&void 0!==a?a:{name:C.EQUALS}}}));l(s);const n=[];for(const e of s){const t=O(e);t&&n.push(t)}const r=n.length?{type:w.And,expressions:n}:void 0;a(P(t,{where:r}))},renderItem:$(s,t)})},R=e=>{var t,a,s,n,i,p,h,m;const{datasource:g,query:f,filter:b,onChange:v,onDelete:x}=e,j=null!==(t=f.sql)&&void 0!==t?t:{},C=T(j.from),O=S(j.select),_=(0,k.$K)(g,f.region,C,O),[N,I]=(0,o.Z)((async()=>{var e;return null!==(e=b.property)&&void 0!==e&&e.name?g.getDimensionValues(f.region,C,O,b.property.name,{}).then((e=>(0,d._)(g,e))):[]}),[f.region,C,O,null===(a=b.property)||void 0===a?void 0:a.name]);return(0,u.jsxs)(r.InputGroup,{children:[(0,u.jsx)(c.Select,{width:"auto",value:null!==(s=b.property)&&void 0!==s&&s.name?(0,l.toOption)(null===(n=b.property)||void 0===n?void 0:n.name):null,options:_,allowCustomValue:!0,onChange:e=>{let{value:t}=e;return t&&v((a=b,s=t,{type:w.Operator,property:{type:y.String,name:s},operator:null!==(n=a.operator)&&void 0!==n?n:{}}));var a,s,n},menuShouldPortal:!0}),(0,u.jsx)(c.Select,{width:"auto",value:(null===(i=b.operator)||void 0===i?void 0:i.name)&&(0,l.toOption)(b.operator.name),options:D,onChange:e=>{let{value:t}=e;return t&&v((a=b,s=t,{type:w.Operator,property:null!==(n=a.property)&&void 0!==n?n:{type:y.String},operator:Object.assign({},a.operator,{name:s})}));var a,s,n},menuShouldPortal:!0}),(0,u.jsx)(c.Select,{width:"auto",isLoading:N.loading,value:null!==(p=b.operator)&&void 0!==p&&p.value&&"string"==typeof(null===(h=b.operator)||void 0===h?void 0:h.value)?(0,l.toOption)(null===(m=b.operator)||void 0===m?void 0:m.value):null,options:N.value,allowCustomValue:!0,onOpenMenu:I,onChange:e=>{let{value:t}=e;return t&&v(function(e,t){var a;return{type:w.Operator,property:null!==(a=e.property)&&void 0!==a?a:{type:y.String},operator:Object.assign({},e.operator,{value:t})}}(b,t))},menuShouldPortal:!0}),(0,u.jsx)(r.AccessoryButton,{"aria-label":"remove",icon:"times",variant:"secondary",onClick:x})]})};function E(e){return function(t,a,s){return(0,u.jsx)(z,{options:e,item:t,onChange:a,onDelete:s})}}const z=e=>{var t;const{options:a,item:s,onChange:n,onDelete:i}=e,o=null===(t=s.property)||void 0===t?void 0:t.name;return(0,u.jsxs)(r.InputGroup,{children:[(0,u.jsx)(c.Select,{width:"auto",value:o?(0,l.toOption)(o):null,options:a,allowCustomValue:!0,onChange:e=>{let{value:t}=e;return t&&n((a=t,{type:w.GroupBy,property:{type:y.String,name:a}}));var a},menuShouldPortal:!0}),(0,u.jsx)(r.AccessoryButton,{"aria-label":"remove",icon:"times",variant:"secondary",onClick:i})]})},V=e=>{var t;let{query:a,datasource:s,onQueryChange:i}=e;const o=null!==(t=a.sql)&&void 0!==t?t:{},l=(0,n.useMemo)((()=>{var e;return I(null!==(e=a.sql)&&void 0!==e?e:{})}),[a.sql]),[c,d]=(0,n.useState)(l),p=T(o.from),h=S(o.select),m=(0,k.$K)(s,a.region,p,h),g=(0,n.useMemo)((()=>m.filter((e=>!l.some((t=>t.property.name===e.value))))),[m,l]);return(0,u.jsx)(r.EditorList,{items:c,onChange:e=>{const t=e.map((e=>{var t;return{type:w.GroupBy,property:{type:y.String,name:null===(t=e.property)||void 0===t?void 0:t.name}}}));d(t);const s=t.filter((e=>{var t;return null===(t=e.property)||void 0===t?void 0:t.name})),n=s.length?{type:w.And,expressions:s}:void 0;i(P(a,{groupBy:n}))},renderItem:E(g)})},B=[{label:C.ASC,value:C.ASC},{label:C.DESC,value:C.DESC}],U=e=>{var t,a;let{query:s,onQueryChange:n,datasource:i}=e;const o=null!==(t=s.sql)&&void 0!==t?t:{},p=null===(a=o.orderBy)||void 0===a?void 0:a.name,h=o.orderByDirection;return(0,u.jsxs)(r.EditorFieldGroup,{children:[(0,u.jsx)(r.EditorField,{label:"Order by",optional:!0,width:16,children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.Select,{"aria-label":"Order by",onChange:e=>{let{value:t}=e;return t&&n(function(e,t){return P(e,{orderBy:{type:w.Function,name:t}})}(s,t))},options:(0,d._)(i,C.STATISTICS.map(l.toOption)),value:p?(0,l.toOption)(p):null,menuShouldPortal:!0}),p&&(0,u.jsx)(r.AccessoryButton,{"aria-label":"remove",icon:"times",variant:"secondary",onClick:()=>n(P(s,{orderBy:void 0}))})]})}),(0,u.jsx)(r.EditorField,{label:"Direction",width:16,children:(0,u.jsx)(c.Select,{"aria-label":"Direction",inputId:"cloudwatch-sql-order-by-direction",disabled:!p,value:h?(0,l.toOption)(h):B[0],options:(0,d._)(i,B),onChange:e=>e&&n(P(s,{orderByDirection:e.value})),menuShouldPortal:!0})})]})};function H(e){var t;let{query:a,datasource:s,onChange:i,onRunQuery:o}=e;const l=null!==(t=a.sql)&&void 0!==t?t:{},d=(0,n.useCallback)((e=>{var t;const a=(new j).expressionToSqlQuery(null!==(t=e.sql)&&void 0!==t?t:{}),s=Object.assign({},e,{sqlExpression:a});i(s),o()}),[i,o]),[p,h]=(0,n.useState)();return(0,n.useEffect)((()=>{var e;const t=(new j).expressionToSqlQuery(null!==(e=a.sql)&&void 0!==e?e:{});p!==t&&h(t)}),[a,p,h]),(0,u.jsxs)(r.EditorRows,{children:[(0,u.jsx)(r.EditorRow,{children:(0,u.jsx)(A,{query:a,onQueryChange:d,datasource:s})}),(0,u.jsx)(r.EditorRow,{children:(0,u.jsx)(r.EditorField,{label:"Filter",optional:!0,children:(0,u.jsx)(L,{query:a,onQueryChange:d,datasource:s})})}),(0,u.jsxs)(r.EditorRow,{children:[(0,u.jsx)(r.EditorField,{label:"Group by",optional:!0,children:(0,u.jsx)(V,{query:a,onQueryChange:d,datasource:s})}),(0,u.jsx)(U,{query:a,onQueryChange:d,datasource:s}),(0,u.jsx)(r.EditorField,{label:"Limit",optional:!0,children:(0,u.jsx)(c.Input,{id:`${a.refId}-cloudwatch-sql-builder-editor-limit`,value:l.limit,onChange:e=>{const t=e.currentTarget.valueAsNumber;d(P(a,{limit:isNaN(t)?void 0:t}))},type:"number",min:1})})]}),p&&(0,u.jsxs)(r.EditorRow,{children:[!1,(0,u.jsx)("pre",{children:null!=p?p:""})]})]})}const q={id:"cloudwatch-MetricMath",extensions:[],aliases:[],mimetypes:[],loader:()=>a.e(2570).then(a.bind(a,"./public/app/plugins/datasource/cloudwatch/metric-math/language.ts"))},W=(e,t,a)=>{const{id:s,loader:n}=t;e.languages.getLanguages().find((e=>e.id===s))||(e.languages.register({id:s}),n().then((n=>{e.languages.setMonarchTokensProvider(s,n.language),e.languages.setLanguageConfiguration(s,n.conf),e.languages.registerCompletionItemProvider(s,a.getCompletionProvider(e,t))})))};var G=a("./public/app/plugins/datasource/cloudwatch/monarch/commands.ts");function Z(e){let{expression:t,onChange:a,onRunQuery:s,datasource:r}=e;const i=(0,n.useRef)(null),o=(0,n.useCallback)(((e,t)=>{e.onDidFocusEditorText((()=>e.trigger(G.w.id,G.w.id,{}))),e.addCommand(t.KeyMod.Shift|t.KeyCode.Enter,(()=>{const t=e.getValue();a(t),s()}));const n=()=>{const t=i.current;if(null!==t&&e.getContentHeight()<200){const a=e.getContentHeight();t.style.height=`${a}px`,t.style.width="100%";const s=t.clientWidth;e.layout({width:s,height:a})}};e.onDidContentSizeChange(n),n()}),[a,s]);return(0,u.jsx)("div",{ref:i,children:(0,u.jsx)(c.CodeEditor,{monacoOptions:{scrollBeyondLastLine:!1,fontSize:14,lineNumbers:"off",renderLineHighlight:"none",scrollbar:{vertical:"hidden",horizontal:"hidden"},suggestFontSize:12,wordWrap:"on"},language:q.id,value:t,onBlur:e=>{e!==t&&(a(e),s())},onBeforeEditorMount:e=>W(e,q,r.metricMathCompletionItemProvider),onEditorDidMount:o})})}const Q={id:"cloudwatch-sql",extensions:[".cloudwatchSql"],aliases:["CloudWatch","cloudwatch","CloudWatchSQL"],mimetypes:[],loader:()=>Promise.resolve().then(a.bind(a,"./public/app/plugins/datasource/cloudwatch/cloudwatch-sql/language.ts"))},K=e=>{let{region:t,sql:a,onChange:s,onRunQuery:r,datasource:i}=e;(0,n.useEffect)((()=>{i.sqlCompletionItemProvider.setRegion(t)}),[t,i]);const o=(0,n.useCallback)(((e,t)=>{e.onDidFocusEditorText((()=>e.trigger(G.w.id,G.w.id,{}))),e.addCommand(t.KeyMod.Shift|t.KeyCode.Enter,(()=>{const t=e.getValue();s(t),r()}))}),[s,r]);return(0,u.jsx)(c.CodeEditor,{height:"150px",language:Q.id,value:a,onBlur:e=>{e!==a&&s(e)},showMiniMap:!1,showLineNumbers:!0,onBeforeEditorMount:e=>W(e,Q,i.sqlCompletionItemProvider),onEditorDidMount:o})}},"./public/app/plugins/datasource/cloudwatch/hooks.ts":(e,t,a)=>{"use strict";a.d(t,{eH:()=>o,JR:()=>l,Bf:()=>c,$K:()=>d});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/plugins/datasource/cloudwatch/utils/utils.ts"),i=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useDeepCompareEffect.js");const o=e=>{const[t,a]=(0,s.useState)(!1),[r,i]=(0,s.useState)([{label:"default",value:"default"}]);return(0,s.useEffect)((()=>{a(!0);const t={label:"Template Variables",options:e.getVariables().map(n.toOption)};e.getRegions().then((e=>i([...e,t]))).finally((()=>a(!1)))}),[e]),[r,t]},l=e=>{const[t,a]=(0,s.useState)([]);return(0,s.useEffect)((()=>{e.getNamespaces().then((t=>{a((0,r._)(e,t))}))}),[e]),t},c=(e,t,a)=>{const[n,i]=(0,s.useState)([]);return(0,s.useEffect)((()=>{e.getMetrics(a,t).then((t=>{i((0,r._)(e,t))}))}),[e,t,a]),n},d=(e,t,a,n,o)=>{const[l,c]=(0,s.useState)([]);return(0,i.Z)((()=>{e.getDimensionKeys(a,t,o,n).then((t=>{c((0,r._)(e,t))}))}),[e,t,a,n,o]),l}},"./public/app/plugins/datasource/cloudwatch/monarch/commands.ts":(e,t,a)=>{"use strict";a.d(t,{w:()=>s});const s={id:"editor.action.triggerSuggest",title:""}},"./public/app/plugins/datasource/cloudwatch/syntax.ts":(e,t,a)=>{"use strict";a.d(t,{lD:()=>s,OV:()=>n,Bn:()=>r,ae:()=>i,Ie:()=>o,aH:()=>l,QZ:()=>c,Ak:()=>u,ZP:()=>h});const s=[{label:"fields",documentation:"Retrieves the specified fields from log events"},{label:"display",documentation:"Specifies which fields to display in the query results"},{label:"filter",documentation:"Filters the results of a query based on one or more conditions"},{label:"stats",documentation:"Calculates aggregate statistics based on the values of log fields"},{label:"sort",documentation:"Sorts the retrieved log events"},{label:"limit",documentation:"Specifies the number of log events returned by the query"},{label:"parse",documentation:"Extracts data from a log field, creating one or more ephemeral fields that you can process further in the query"}],n=[{label:"abs",detail:"abs(a)",documentation:"Absolute value."},{label:"ceil",detail:"ceil(a)",documentation:"Round to ceiling (the smallest integer that is greater than the value of a)."},{label:"floor",detail:"floor(a)",documentation:"Round to floor (the largest integer that is smaller than the value of a)."},{label:"greatest",detail:"greatest(a,b, ... z)",documentation:"Returns the largest value."},{label:"least",detail:"least(a, b, ... z)",documentation:"Returns the smallest value."},{label:"log",detail:"log(a)",documentation:"Natural logarithm."},{label:"sqrt",detail:"sqrt(a)",documentation:"Square root."}],r=[{label:"isempty",detail:"isempty(fieldname)",documentation:"Returns true if the field is missing or is an empty string."},{label:"isblank",detail:"isblank(fieldname)",documentation:"Returns true if the field is missing, an empty string, or contains only white space."},{label:"concat",detail:"concat(string1, string2, ... stringz)",documentation:"Concatenates the strings."},{label:"ltrim",detail:"ltrim(string) or ltrim(string1, string2)",documentation:"Remove white space from the left of the string. If the function has a second string argument, it removes the characters of string2 from the left of string1."},{label:"rtrim",detail:"rtrim(string) or rtrim(string1, string2)",documentation:"Remove white space from the right of the string. If the function has a second string argument, it removes the characters of string2 from the right of string1."},{label:"trim",detail:"trim(string) or trim(string1, string2)",documentation:"Remove white space from both ends of the string. If the function has a second string argument, it removes the characters of string2 from both sides of string1."},{label:"strlen",detail:"strlen(string)",documentation:"Returns the length of the string in Unicode code points."},{label:"toupper",detail:"toupper(string)",documentation:"Converts the string to uppercase."},{label:"tolower",detail:"tolower(string)",documentation:"Converts the string to lowercase."},{label:"substr",detail:"substr(string1, x), or substr(string1, x, y)",documentation:"Returns a substring from the index specified by the number argument to the end of the string. If the function has a second number argument, it contains the length of the substring to be retrieved."},{label:"replace",detail:"replace(string1, string2, string3)",documentation:"Replaces all instances of string2 in string1 with string3."},{label:"strcontains",detail:"strcontains(string1, string2)",documentation:"Returns 1 if string1 contains string2 and 0 otherwise."}],i=[{label:"bin",detail:"bin(period)",documentation:"Rounds the value of @timestamp to the given period and then truncates."},{label:"datefloor",detail:"datefloor(a, period)",documentation:"Truncates the timestamp to the given period."},{label:"dateceil",detail:"dateceil(a, period)",documentation:"Rounds up the timestamp to the given period and then truncates."},{label:"fromMillis",detail:"fromMillis(fieldname)",documentation:"Interprets the input field as the number of milliseconds since the Unix epoch and converts it to a timestamp."},{label:"toMillis",detail:"toMillis(fieldname)",documentation:"Converts the timestamp found in the named field into a number representing the milliseconds since the Unix epoch."}],o=[{label:"isValidIp",detail:"isValidIp(fieldname)",documentation:"Returns true if the field is a valid v4 or v6 IP address."},{label:"isValidIpV4",detail:"isValidIpV4(fieldname)",documentation:"Returns true if the field is a valid v4 IP address."},{label:"isValidIpV6",detail:"isValidIpV6(fieldname)",documentation:"Returns true if the field is a valid v6 IP address."},{label:"isIpInSubnet",detail:"isIpInSubnet(fieldname, string)",documentation:"Returns true if the field is a valid v4 or v6 IP address within the specified v4 or v6 subnet."},{label:"isIpv4InSubnet",detail:"isIpv4InSubnet(fieldname, string)",documentation:"Returns true if the field is a valid v4 IP address within the specified v4 subnet."},{label:"isIpv6InSubnet",detail:"isIpv6InSubnet(fieldname, string)",documentation:"Returns true if the field is a valid v6 IP address within the specified v6 subnet."}],l=[{label:"ispresent",detail:"ispresent(fieldname)",documentation:"Returns true if the field exists."},{label:"isempty",detail:"isempty(fieldname)",documentation:"Returns true if the field is missing or is an empty string."},{label:"isblank",detail:"isblank(fieldname)",documentation:"Returns true if the field is missing, an empty string, or contains only white space."},{label:"strcontains",detail:"strcontains(string1, string2)",documentation:"Returns 1 if string1 contains string2 and 0 otherwise."},...o],c=[{label:"avg",detail:"avg(NumericFieldname)",documentation:"The average of the values in the specified field."},{label:"count",detail:"count(fieldname) or count(*)",documentation:"Counts the log records."},{label:"count_distinct",detail:"count_distinct(fieldname)",documentation:"Returns the number of unique values for the field."},{label:"max",detail:"max(fieldname)",documentation:"The maximum of the values for this log field in the queried logs."},{label:"min",detail:"min(fieldname)",documentation:"The minimum of the values for this log field in the queried logs."},{label:"pct",detail:"pct(fieldname, value)",documentation:"A percentile indicates the relative standing of a value in a datas."},{label:"stddev",detail:"stddev(NumericFieldname)",documentation:"The standard deviation of the values in the specified field."},{label:"sum",detail:"sum(NumericFieldname)",documentation:"The sum of the values in the specified field."}],d=[...c,{label:"earliest",detail:"earliest(fieldname)",documentation:"Returns the value of fieldName from the log event that has the earliest time stamp in the queried logs."},{label:"latest",detail:"latest(fieldname)",documentation:"Returns the value of fieldName from the log event that has the latest time stamp in the queried logs."},{label:"sortsFirst",detail:"sortsFirst(fieldname)",documentation:"Returns the value of fieldName that sorts first in the queried logs."},{label:"sortsLast",detail:"sortsLast(fieldname)",documentation:"Returns the value of fieldName that sorts last in the queried logs."}],u=[...n,{label:"ispresent",detail:"ispresent(fieldname)",documentation:"Returns true if the field exists."},{label:"coalesce",detail:"coalesce(fieldname1, fieldname2, ... fieldnamex)",documentation:"Returns the first non-null value from the list."},...r,...i,...o],p=[...u,...d],h={comment:{pattern:/^#.*/,greedy:!0},backticks:{pattern:/`.*?`/,alias:"string",greedy:!0},quote:{pattern:/".*?"/,alias:"string",greedy:!0},regex:{pattern:/\/.*?\/(?=\||\s*$|,)/,greedy:!0},"query-command":{pattern:new RegExp(`\\b(?:${s.map((e=>e.label)).join("|")})\\b`,"i"),alias:"function"},function:{pattern:new RegExp(`\\b(?:${p.map((e=>e.label)).join("|")})\\b`,"i")},keyword:{pattern:new RegExp(`(\\s+)(${["as","like","by","in","desc","asc"].join("|")})(?=\\s+)`,"i"),lookbehind:!0},"field-name":{pattern:/(@?[_a-zA-Z]+[_.0-9a-zA-Z]*)|(`((\\`)|([^`]))*?`)/,greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,"command-separator":{pattern:/\|/,alias:"punctuation"},"comparison-operator":{pattern:/([<>]=?)|(!?=)/},punctuation:/[{}()`,.]/,whitespace:/\s+/}},"./public/app/plugins/datasource/cloudwatch/types.ts":(e,t,a)=>{"use strict";let s,n,r;a.d(t,{$5:()=>s,MQ:()=>n,KB:()=>r,iZ:()=>i}),function(e){e[e.Search=0]="Search",e[e.Query=1]="Query"}(s||(s={})),function(e){e[e.Builder=0]="Builder",e[e.Code=1]="Code"}(n||(n={})),function(e){e.Scheduled="Scheduled",e.Running="Running",e.Complete="Complete",e.Failed="Failed",e.Cancelled="Cancelled",e.Timeout="Timeout"}(r||(r={}));const i=e=>"Logs"===e.queryMode},"./public/app/plugins/datasource/cloudwatch/utils/utils.ts":(e,t,a)=>{"use strict";a.d(t,{E:()=>s,_:()=>n});const s=e=>({label:e,value:e}),n=(e,t)=>[...t,{label:"Template Variables",options:e.getVariables().map(s)}]},"./public/app/plugins/datasource/dashboard/index.ts":(e,t,a)=>{"use strict";a.d(t,{hD:()=>k,yl:()=>o,AK:()=>l});var s=a("../../opt/drone/yarncache/rxjs-npm-7.5.1-ce59cbb6a3-78e3eecb16.zip/node_modules/rxjs/dist/esm5/internal/Observable.js");const n="-- Dashboard --";var r=a("./public/app/features/dashboard/services/DashboardSrv.ts"),i=a("./packages/grafana-data/src/index.ts");function o(e){return!!e&&("string"==typeof e?e===n:"meta"in e&&e.meta.name===n||e.uid===n)}function l(e){return new s.y((t=>{const a=(0,r.h4)().getCurrent(),s=function(e){if(!e||!e.length)return;return e[0].panelId}(e.queries);if(!s)return void t.next(c("Missing panel reference ID"));const n=null==a?void 0:a.getPanelById(s);if(!n)return void t.next(c("Unknown Panel: "+s));const i=n.getQueryRunner(),o=i.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:e=>{t.next(e)}});if(!n.isInView){const{datasource:t,targets:a}=n,r=Object.assign({},e,{datasource:t,panelId:s,queries:a});i.run(r)}return()=>{o.unsubscribe()}}))}function c(e){return{state:i.LoadingState.Error,series:[],request:{},error:{message:e},timeRange:(0,i.getDefaultTimeRange)()}}var d,u,p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),h=a("./packages/grafana-ui/src/index.ts"),m=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),g=a("./public/app/core/config.ts"),f=a("./public/app/features/plugins/datasource_srv.ts"),b=a("./public/app/features/query/components/QueryEditorRow.tsx"),v=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function x(e){let{editURL:t,target:a}=e;const s=(0,h.useStyles)(y);return(0,v.jsxs)("div",{className:s.queryEditorRowHeader,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("img",{src:a.img,width:16,className:s.logo}),(0,v.jsx)("span",{children:`${a.refId}:`})]}),(0,v.jsx)("div",{children:(0,v.jsxs)("a",{href:t,children:[a.query," ",d||(d=(0,v.jsx)(h.Icon,{name:"external-link-alt"}))]})})]})}function y(e){return{logo:m.css`
      label: logo;
      margin-right: ${e.spacing.sm};
    `,queryEditorRowHeader:m.css`
      label: queryEditorRowHeader;
      display: flex;
      padding: 4px 8px;
      flex-flow: row wrap;
      background: ${e.colors.bg2};
      align-items: center;
    `}}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const{Select:j}=h.LegacyForms;function C(e){return JSON.stringify(e)}class k extends p.PureComponent{constructor(e){super(e),w(this,"onPanelChanged",(e=>{const t=this.getQuery();this.props.onChange([Object.assign({},t,{panelId:e})]),this.props.onRunQueries()})),w(this,"getPanelDescription",(e=>{var t;const{defaultDatasource:a}=this.state,s=e.datasource?e.datasource:a,n=null===(t=(0,f.ak)().getInstanceSettings(s))||void 0===t?void 0:t.name;return 1===e.targets.length?"1 query to "+n:e.targets.length+" queries to "+n})),this.state={defaultDatasource:"",results:[]}}getQuery(){return this.props.queries[0]}async componentDidMount(){await this.updateState()}async componentDidUpdate(e){const{panelData:t,queries:a}=this.props;e.panelData===t&&e.queries===a||await this.updateState()}async updateState(){var e;const{panelData:t,queries:a}=this.props,s=a[0],n=await(0,f.ak)().get(),i=(0,r.h4)().getCurrent(),o=null==i?void 0:i.getPanelById(null!==(e=s.panelId)&&void 0!==e?e:-124134);if(!o)return void this.setState({defaultDatasource:n.name});const l=await(0,f.ak)().get(o.datasource),c=[];for(const e of o.targets){const a=e.datasource?await(0,f.ak)().get(e.datasource):l,s=a.getQueryDisplayText?a.getQueryDisplayText:C,n=(0,b.t)(t,e.refId),r=n||t;c.push({refId:e.refId,query:s(e),img:a.meta.info.logos.small,data:r.series,error:r.error})}this.setState({defaultDatasource:n.name,results:c})}renderQueryData(e){const{results:t}=this.state;return(0,v.jsx)(h.VerticalGroup,{spacing:"sm",children:t.map(((t,a)=>(0,v.jsx)(x,{editURL:e,target:t},`DashboardQueryRow-${a}`)))})}render(){const e=(0,r.h4)().getCurrent();if(!e)return null;const t=this.getQuery();let a;const s=[];for(const r of e.panels){var i,o;const l=g.ZP.panels[r.type];if(l&&(r.targets&&r.id!==(null===(i=e.panelInEdit)||void 0===i?void 0:i.id)&&(null===(o=r.datasource)||void 0===o?void 0:o.uid)!==n)){const e={value:r.id,label:r.title?r.title:"Panel "+r.id,description:this.getPanelDescription(r),imgUrl:l.info.logos.small};s.push(e),t.panelId===r.id&&(a=e)}}if(s.length<1)return(0,v.jsx)("div",{className:(0,m.css)({padding:"10px"}),children:"This dashboard does not have other panels. Add queries to other panels and try again"});const l=`d/${e.uid}/${e.title}?&editPanel=${t.panelId}`;return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"gf-form",children:[u||(u=(0,v.jsx)("div",{className:"gf-form-label",children:"Use results from panel"})),(0,v.jsx)(j,{menuShouldPortal:!0,placeholder:"Choose panel",isSearchable:!0,options:s,value:a,onChange:e=>this.onPanelChanged(e.value)})]}),(0,v.jsx)("div",{className:(0,m.css)({padding:"16px"}),children:t.panelId&&this.renderQueryData(l)})]})}}},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/Field.tsx":(e,t,a)=>{"use strict";a.d(t,{g:()=>r});var s=a("./packages/grafana-ui/src/index.ts"),n=(a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js"));const r=e=>(0,n.jsx)(s.InlineField,Object.assign({labelWidth:18},e))},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/LogsQueryEditor/index.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>se});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-ui/src/index.ts");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class i{constructor(){r(this,"resolve",void 0),r(this,"reject",void 0),r(this,"promise",void 0),this.resolve=void 0,this.reject=void 0,this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),Object.freeze(this)}}var o=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/LogsQueryEditor/setQueryValue.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=e=>{var t,a,r;let{query:c,datasource:d,onQueryChange:u}=e;const p=(0,s.useRef)();(0,s.useEffect)((()=>{var e;if(null===(e=c.azureLogAnalytics)||void 0===e||!e.resource)return;const t=[d.azureLogAnalyticsDatasource.getKustoSchema(c.azureLogAnalytics.resource),(p.current||(p.current=new i),p.current.promise)];Promise.all(t).then((e=>{let[t,{monaco:a,editor:s}]=e;a.languages.kusto.getKustoWorker().then((e=>{const t=s.getModel();return t&&e(t.uri)})).then((e=>{null==e||e.setSchema(t,"https://help.kusto.windows.net","Samples")}))}))}),[d.azureLogAnalyticsDatasource,null===(t=c.azureLogAnalytics)||void 0===t?void 0:t.resource]);const h=(0,s.useCallback)(((e,t)=>{var a,s;null===(a=p.current)||void 0===a||null===(s=a.resolve)||void 0===s||s.call(a,{editor:e,monaco:t})}),[]),m=(0,s.useCallback)((e=>{u((0,o.J3)(c,e))}),[u,c]);return(0,l.jsx)(n.CodeEditor,{value:null!==(a=null===(r=c.azureLogAnalytics)||void 0===r?void 0:r.query)&&void 0!==a?a:"",language:"kusto",height:200,width:"100%",showMiniMap:!1,onBlur:m,onSave:m,onEditorDidMount:h})};var d=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/Field.tsx");const u=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],p=e=>{var t;let{query:a,variableOptionGroup:r,onQueryChange:i}=e;const c=(0,s.useMemo)((()=>[...u,r]),[r]),p=(0,s.useCallback)((e=>{const{value:t}=e;if(!t)return;const s=(0,o.d5)(a,t);i(s)}),[i,a]);return(0,l.jsx)(d.g,{label:"Format as",children:(0,l.jsx)(n.Select,{menuShouldPortal:!0,inputId:"azure-monitor-logs-workspaces-field",value:null===(t=a.azureLogAnalytics)||void 0===t?void 0:t.resultFormat,onChange:p,options:c,width:38})})};var h=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),m=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/messageFromError.ts"),g=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/Space.tsx");const f=e=>({table:(0,h.css)({width:"100%",tableLayout:"fixed"}),tableScroller:(0,h.css)({maxHeight:"50vh",overflow:"auto"}),header:(0,h.css)({background:e.colors.background.secondary}),row:(0,h.css)({borderBottom:`1px solid ${e.colors.border.weak}`,"&:last-of-type":{borderBottomColor:e.colors.border.medium}}),disabledRow:(0,h.css)({opacity:.5}),cell:(0,h.css)({padding:e.spacing(1,1,1,0),width:"25%",overflow:"hidden",textOverflow:"ellipsis","&:first-of-type":{width:"50%",padding:e.spacing(1,1,1,2)}}),collapseButton:(0,h.css)({margin:0}),loadingCell:(0,h.css)({textAlign:"center"}),spinner:(0,h.css)({marginBottom:0}),nestedEntry:(0,h.css)({display:"flex",alignItems:"center"}),entryContentItem:(0,h.css)({margin:e.spacing(0,1,0,0)}),truncated:(0,h.css)({minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),nestedRowCheckbox:(0,h.css)({zIndex:0})});var b,v,x,y,w,j,C,k,S=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/ResourcePicker/types.ts"),T=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/ResourcePicker/utils.ts");const O=e=>{let{rows:t,selectedRows:a,level:s,requestNestedRows:n,onRowSelectedChange:r}=e;return(0,l.jsx)(l.Fragment,{children:t.map((e=>(0,l.jsx)(_,{row:e,selectedRows:a,level:s,requestNestedRows:n,onRowSelectedChange:r},e.id)))})},_=e=>{var t;let{row:a,selectedRows:r,level:i,requestNestedRows:o,onRowSelectedChange:c}=e;const d=(0,n.useStyles2)(f),[u,p]=(0,s.useState)("closed"),m=!!r.find((e=>e.id===a.id)),g=r.length>0&&!m,b="open"===u;return(0,s.useEffect)((()=>{var e;const t=r[0];t&&!!(0,T.K5)(null!==(e=a.children)&&void 0!==e?e:[],t.uri)&&p("open")}),[r,a]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("tr",{className:(0,h.cx)(d.row,g&&d.disabledRow),children:[(0,l.jsx)("td",{className:d.cell,children:(0,l.jsx)(I,{level:i,isSelected:m,isDisabled:g,isOpen:b,entry:a,onToggleCollapse:async()=>{"open"!==u?(p("loading"),o(a).then((()=>p("open"))).catch((()=>p("closed")))):p("closed")},onSelectedChange:c})}),(0,l.jsx)("td",{className:d.cell,children:a.typeLabel}),(0,l.jsx)("td",{className:d.cell,children:null!==(t=a.location)&&void 0!==t?t:"-"})]},a.id),b&&a.children&&Object.keys(a.children).length>0&&(0,l.jsx)(O,{rows:a.children,selectedRows:r,level:i+1,requestNestedRows:o,onRowSelectedChange:c}),(0,l.jsx)(n.FadeTransition,{visible:"loading"===u,children:(0,l.jsx)("tr",{children:(0,l.jsx)("td",{className:(0,h.cx)(d.cell,d.loadingCell),colSpan:3,children:(0,l.jsx)(n.LoadingPlaceholder,{text:"Loading...",className:d.spinner})})})})]})},N=e=>{let{isOpen:t,entry:{type:a}}=e;switch(a){case S.J.Subscription:return b||(b=(0,l.jsx)(n.Icon,{name:"layer-group"}));case S.J.ResourceGroup:return(0,l.jsx)(n.Icon,{name:t?"folder-open":"folder"});case S.J.Resource:return v||(v=(0,l.jsx)(n.Icon,{name:"cube"}));case S.J.VariableGroup:return x||(x=(0,l.jsx)(n.Icon,{name:"x"}));case S.J.Variable:return y||(y=(0,l.jsx)(n.Icon,{name:"x"}));default:return null}},I=e=>{let{entry:t,isSelected:a,isDisabled:r,isOpen:i,level:o,onToggleCollapse:c,onSelectedChange:d}=e;const u=(0,n.useTheme2)(),p=(0,n.useStyles2)(f),m=!!t.children,b=t.type!==S.J.VariableGroup,v=(0,s.useCallback)((()=>{c(t)}),[c,t]),x=(0,s.useCallback)((e=>{const a=e.target.checked;d(t,a)}),[t,d]),y=`checkbox_${t.id}`;return(0,s.useEffect)((()=>{var e;a&&(null===(e=document.getElementById(y))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"}))}),[]),(0,l.jsxs)("div",{className:p.nestedEntry,style:{marginLeft:o*(3*u.spacing.gridSize)},children:[m?(0,l.jsx)(n.IconButton,{className:p.collapseButton,name:i?"angle-down":"angle-right","aria-label":i?`Collapse ${t.name}`:`Expand ${t.name}`,onClick:v,id:t.id}):w||(w=(0,l.jsx)(g.T,{layout:"inline",h:2})),j||(j=(0,l.jsx)(g.T,{layout:"inline",h:2})),b&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Checkbox,{id:y,onChange:x,disabled:r,value:a,className:p.nestedRowCheckbox}),C||(C=(0,l.jsx)(g.T,{layout:"inline",h:2}))]}),(0,l.jsx)(N,{entry:t,isOpen:i}),k||(k=(0,l.jsx)(g.T,{layout:"inline",h:1})),(0,l.jsx)("label",{htmlFor:y,className:(0,h.cx)(p.entryContentItem,p.truncated),children:t.name})]})},P=O,M=e=>{let{rows:t,selectedRows:a,noHeader:s,requestNestedRows:r,onRowSelectedChange:i}=e;const o=(0,n.useStyles2)(f);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("table",{className:o.table,children:!s&&(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:(0,h.cx)(o.row,o.header),children:[(0,l.jsx)("td",{className:o.cell,children:"Scope"}),(0,l.jsx)("td",{className:o.cell,children:"Type"}),(0,l.jsx)("td",{className:o.cell,children:"Location"})]})})}),(0,l.jsx)("div",{className:o.tableScroller,children:(0,l.jsx)("table",{className:o.table,children:(0,l.jsx)("tbody",{children:(0,l.jsx)(P,{rows:t,selectedRows:a,level:0,requestNestedRows:r,onRowSelectedChange:i})})})})]})};var F,A,D,$,L,R;const E="$$grafana-templateVariables$$",z=e=>{let{resourcePickerData:t,resourceURI:a,templateVariables:r,onApply:i,onCancel:o}=e;const c=(0,n.useStyles2)(V),[d,u]=(0,s.useState)("NotStarted"),[p,h]=(0,s.useState)([]),[f,b]=(0,s.useState)(a),[v,x]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{b(a)}),[a]),(0,s.useEffect)((()=>{if("NotStarted"===d){(async()=>{try{u("Started");let a=await t.getSubscriptions();if(!f)return h(a),void u("Done");const s=(0,T._E)(null!=f?f:"");if(s){var e;const n=`/subscriptions/${s.subscriptionID}/resourceGroups/${s.resourceGroup}`;if(s.resourceGroup&&!(0,T.K5)(a,n)){const e=await t.getResourceGroupsBySubscriptionId(s.subscriptionID);a=(0,T.E4)(a,`/subscriptions/${s.subscriptionID}`,e)}if(s.resource&&!(0,T.K5)(p,null!==(e=s.resource)&&void 0!==e?e:"")){const e=await t.getResourcesForResourceGroup(n);a=(0,T.E4)(a,n,e)}}h(a),u("Done")}catch(e){u("Done"),x((0,m.Z)(e))}})()}}),[t,f,p,d]);const y=(0,s.useMemo)((()=>{const e=function(e){return{id:E,uri:E,name:"Template variables",type:S.J.VariableGroup,typeLabel:"Variables",children:e.map((e=>({id:e,uri:e,name:e,type:S.J.Variable,typeLabel:"Variable"})))}}(r);return r.length?[...p,e]:p}),[p,r]),w=(0,s.useMemo)((()=>{const e=f&&(0,T.K5)(y,f);return e?[Object.assign({},e,{children:void 0})]:[]}),[f,y]),j=(0,s.useCallback)((async e=>{var a;if(x(void 0),!(null!==(a=e.children)&&void 0!==a&&a.length||e.uri===E))try{const a=e.type===S.J.Subscription?await t.getResourceGroupsBySubscriptionId(e.id):await t.getResourcesForResourceGroup(e.id),s=(0,T.E4)(p,e.uri,a);h(s)}catch(e){throw x((0,m.Z)(e)),e}}),[t,p]),C=(0,s.useCallback)(((e,t)=>{b(t?e.uri:void 0)}),[]),k=(0,s.useCallback)((()=>{i(f)}),[f,i]);return(0,l.jsxs)("div",{children:["Started"===d?(0,l.jsx)("div",{className:c.loadingWrapper,children:F||(F=(0,l.jsx)(n.LoadingPlaceholder,{text:"Loading..."}))}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M,{rows:y,requestNestedRows:j,onRowSelectedChange:C,selectedRows:w}),(0,l.jsxs)("div",{className:c.selectionFooter,children:[w.length>0&&(0,l.jsxs)(l.Fragment,{children:[A||(A=(0,l.jsx)(g.T,{v:2})),D||(D=(0,l.jsx)("h5",{children:"Selection"})),(0,l.jsx)(M,{rows:w,requestNestedRows:j,onRowSelectedChange:C,selectedRows:w,noHeader:!0})]}),$||($=(0,l.jsx)(g.T,{v:2})),(0,l.jsx)(n.Button,{disabled:!!v,onClick:k,children:"Apply"}),L||(L=(0,l.jsx)(g.T,{layout:"inline",h:1})),(0,l.jsx)(n.Button,{onClick:o,variant:"secondary",children:"Cancel"})]})]}),v&&(0,l.jsxs)(l.Fragment,{children:[R||(R=(0,l.jsx)(g.T,{v:2})),(0,l.jsx)(n.Alert,{severity:"error",title:"An error occurred while requesting resources from Azure Monitor",children:v})]})]})},V=e=>({selectionFooter:(0,h.css)({position:"sticky",bottom:0,background:e.colors.background.primary,paddingTop:e.spacing(2)}),loadingWrapper:(0,h.css)({textAlign:"center",paddingTop:e.spacing(2),paddingBottom:e.spacing(2),color:e.colors.text.secondary})});var B,U,H,q,W,G,Z,Q;function K(e){const t=(0,T._E)(e);if(t)return{subscriptionName:t.subscriptionID,resourceGroupName:t.resourceGroup,resourceName:t.resource}}const Y=e=>{let{resource:t,datasource:a}=e;const[r,i]=(0,s.useState)(K(null!=t?t:""));return(0,s.useEffect)((()=>{t&&K(t)?a.resourcePickerData.getResourceURIDisplayProperties(t).then(i):i(void 0)}),[a.resourcePickerData,t]),t?r?(0,l.jsx)(J,{resource:r}):t.startsWith("$")?(0,l.jsxs)("span",{children:[B||(B=(0,l.jsx)(n.Icon,{name:"x"}))," ",t]}):(0,l.jsx)(l.Fragment,{children:t}):(0,l.jsx)(l.Fragment,{children:"Select a resource"})},J=e=>{let{resource:t}=e;return(0,l.jsxs)("span",{children:[U||(U=(0,l.jsx)(n.Icon,{name:"layer-group"}))," ",t.subscriptionName,t.resourceGroupName&&(0,l.jsxs)(l.Fragment,{children:[H||(H=(0,l.jsx)(X,{})),q||(q=(0,l.jsx)(n.Icon,{name:"folder"}))," ",t.resourceGroupName]}),t.resourceName&&(0,l.jsxs)(l.Fragment,{children:[W||(W=(0,l.jsx)(X,{})),G||(G=(0,l.jsx)(n.Icon,{name:"cube"}))," ",t.resourceName]})]})},X=()=>(0,l.jsxs)(l.Fragment,{children:[Z||(Z=(0,l.jsx)(g.T,{layout:"inline",h:2})),"/",Q||(Q=(0,l.jsx)(g.T,{layout:"inline",h:2}))]}),ee=e=>{var t;let{query:a,datasource:r,onQueryChange:i}=e;const c=(0,n.useStyles2)(te),{resource:u}=null!==(t=a.azureLogAnalytics)&&void 0!==t?t:{},[p,h]=(0,s.useState)(!1),m=(0,s.useCallback)((()=>{h(!0)}),[]),g=(0,s.useCallback)((()=>{h(!1)}),[]),f=(0,s.useCallback)((e=>{i((0,o.DF)(a,e)),g()}),[g,i,a]),b=r.getVariables();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.Modal,{className:c.modal,title:"Select a resource",isOpen:p,onDismiss:g,trapFocus:!1,children:(0,l.jsx)(z,{resourcePickerData:r.resourcePickerData,resourceURI:u,templateVariables:b,onApply:f,onCancel:g})}),(0,l.jsx)(d.g,{label:"Resource",children:(0,l.jsx)(n.Button,{variant:"secondary",onClick:m,type:"button",children:(0,l.jsx)(Y,{resource:u,datasource:r})})})]})},te=e=>({modal:(0,h.css)({width:e.breakpoints.values.lg})});function ae(e,t,a){const[n,r]=(0,s.useState)();return(0,s.useEffect)((()=>{(async function(e,t,a){var s;if(void 0!==(null===(s=t.azureLogAnalytics)||void 0===s?void 0:s.workspace)&&!t.azureLogAnalytics.resource){let s;s=(0,T.uD)(t.azureLogAnalytics.workspace)?await e.resourcePickerData.getResourceURIFromWorkspace(t.azureLogAnalytics.workspace):t.azureLogAnalytics.workspace;const n=Object.assign({},t,{azureLogAnalytics:Object.assign({},t.azureLogAnalytics,{resource:s,workspace:void 0})});delete n.azureLogAnalytics.workspace,a(n)}})(e,t,a).catch((e=>r({title:"Unable to migrate workspace as a resource",message:e.message})))}),[e,t,a]),n}const se=e=>{let{query:t,datasource:a,subscriptionId:s,variableOptionGroup:r,onChange:i,setError:o,hideFormatAs:d}=e;const u=ae(a,t,i);return(0,l.jsxs)("div",{"data-testid":"azure-monitor-logs-query-editor",children:[(0,l.jsx)(n.InlineFieldRow,{children:(0,l.jsx)(ee,{query:t,datasource:a,subscriptionId:s,variableOptionGroup:r,onQueryChange:i,setError:o})}),(0,l.jsx)(c,{query:t,datasource:a,subscriptionId:s,variableOptionGroup:r,onQueryChange:i,setError:o}),!d&&(0,l.jsx)(p,{query:t,datasource:a,subscriptionId:s,variableOptionGroup:r,onQueryChange:i,setError:o}),u&&(0,l.jsx)(n.Alert,{title:u.title,children:u.message})]})}},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/LogsQueryEditor/setQueryValue.ts":(e,t,a)=>{"use strict";function s(e,t){return Object.assign({},e,{azureLogAnalytics:Object.assign({},e.azureLogAnalytics,{query:t})})}function n(e,t){return Object.assign({},e,{azureLogAnalytics:Object.assign({},e.azureLogAnalytics,{resultFormat:t})})}function r(e,t){return Object.assign({},e,{azureLogAnalytics:Object.assign({},e.azureLogAnalytics,{resource:t})})}a.d(t,{J3:()=>s,d5:()=>n,DF:()=>r})},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/MetricsQueryEditor/setQueryValue.ts":(e,t,a)=>{"use strict";function s(e,t){return e.subscription===t?e:Object.assign({},e,{subscription:t,azureMonitor:Object.assign({},e.azureMonitor,{resourceGroup:void 0,metricDefinition:void 0,metricNamespace:void 0,resourceName:void 0,metricName:void 0,aggregation:void 0,timeGrain:"",dimensionFilters:[]})})}function n(e,t){var a;return(null===(a=e.azureMonitor)||void 0===a?void 0:a.resourceGroup)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{resourceGroup:t,metricDefinition:void 0,metricNamespace:void 0,resourceName:void 0,metricName:void 0,aggregation:void 0,timeGrain:"",dimensionFilters:[]})})}function r(e,t){var a;if((null===(a=e.azureMonitor)||void 0===a?void 0:a.metricDefinition)===t)return e;return Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{metricDefinition:t,resourceName:void 0,metricNamespace:void 0,metricName:void 0,aggregation:void 0,timeGrain:"",dimensionFilters:[]})})}function i(e,t){var a;return(null===(a=e.azureMonitor)||void 0===a?void 0:a.resourceName)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{resourceName:t,metricNamespace:void 0,metricName:void 0,aggregation:void 0,timeGrain:"",dimensionFilters:[]})})}function o(e,t){var a;return(null===(a=e.azureMonitor)||void 0===a?void 0:a.metricNamespace)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{metricNamespace:t,metricName:void 0,aggregation:void 0,timeGrain:"",dimensionFilters:[]})})}function l(e,t){var a;return(null===(a=e.azureMonitor)||void 0===a?void 0:a.metricName)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{metricName:t,aggregation:void 0,timeGrain:"",dimensionFilters:[]})})}function c(e,t){var a;return(null===(a=e.azureMonitor)||void 0===a?void 0:a.aggregation)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{aggregation:t})})}function d(e,t){var a;return(null===(a=e.azureMonitor)||void 0===a?void 0:a.timeGrain)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{timeGrain:t})})}function u(e,t){var a;return(null===(a=e.azureMonitor)||void 0===a?void 0:a.dimensionFilters)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{dimensionFilters:t})})}function p(e){var t,a;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"eq",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const i=null!==(t=null===(a=e.azureMonitor)||void 0===a?void 0:a.dimensionFilters)&&void 0!==t?t:[];return u(e,[...i,{dimension:s,operator:n,filter:r}])}function h(e,t){var a,s;const n=[...null!==(a=null===(s=e.azureMonitor)||void 0===s?void 0:s.dimensionFilters)&&void 0!==a?a:[]];return n.splice(t,1),u(e,n)}function m(e,t,a,s){var n,r;const i=[...null!==(n=null===(r=e.azureMonitor)||void 0===r?void 0:r.dimensionFilters)&&void 0!==n?n:[]];return i[t][a]=s,u(e,i)}function g(e,t){var a;return(null===(a=e.azureMonitor)||void 0===a?void 0:a.top)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{top:t})})}function f(e,t){var a;return(null===(a=e.azureMonitor)||void 0===a?void 0:a.alias)===t?e:Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{alias:t})})}a.d(t,{Ad:()=>s,b2:()=>n,b3:()=>r,R3:()=>i,In:()=>o,Wp:()=>l,pt:()=>c,zB:()=>d,d2:()=>p,do:()=>h,QC:()=>m,y1:()=>g,hd:()=>f})},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/QueryEditor/QueryEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>K});var s=a("./packages/grafana-ui/src/index.ts"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/types/index.ts"),i=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/common.ts"),o=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/Field.tsx"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=e=>{let{query:t,subscriptions:a,variableOptionGroup:c,onQueryChange:d,multiSelect:u=!1}=e;const p=(0,n.useCallback)((e=>{if(!e.value)return;let a=Object.assign({},t,{subscription:e.value});t.queryType===r.B.AzureMonitor&&(a.azureMonitor=Object.assign({},a.azureMonitor,{resourceGroup:void 0,metricDefinition:void 0,metricNamespace:void 0,resourceName:void 0,metricName:void 0,aggregation:void 0,timeGrain:"",dimensionFilters:[]})),d(a)}),[t,d]),h=(0,n.useCallback)((e=>{e&&(t.subscriptions=e.map((e=>{var t;return null!==(t=e.value)&&void 0!==t?t:""})),d(t))}),[t,d]),m=(0,n.useMemo)((()=>[...a,c]),[a,c]);return u?(0,l.jsx)(o.g,{label:"Subscriptions",children:(0,l.jsx)(s.MultiSelect,{menuShouldPortal:!0,isClearable:!0,value:(0,i.b9)([...a,...c.options],t.subscriptions),inputId:"azure-monitor-subscriptions-field",onChange:h,options:m,width:38})}):(0,l.jsx)(o.g,{label:"Subscription",children:(0,l.jsx)(s.Select,{menuShouldPortal:!0,value:t.subscription,inputId:"azure-monitor-subscriptions-field",onChange:p,options:m,width:38,allowCustomValue:!0})})};var d=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/MetricsQueryEditor/setQueryValue.ts");const u=e=>{var t,a;let{metricNamespaces:r,query:i,variableOptionGroup:c,onQueryChange:u}=e;const p=(0,n.useCallback)((e=>{if(!e.value)return;const t=(0,d.In)(i,e.value);u(t)}),[u,i]),h=(0,n.useMemo)((()=>[...r,c]),[r,c]),m=r.map((e=>e.value)).concat(c.options.map((e=>e.value))),g=null===(t=i.azureMonitor)||void 0===t?void 0:t.metricNamespace;return g&&!m.includes(g)&&h.push({label:g,value:g}),(0,l.jsx)(o.g,{label:"Metric namespace",children:(0,l.jsx)(s.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-metric-namespace-field",value:null===(a=i.azureMonitor)||void 0===a?void 0:a.metricNamespace,onChange:p,options:h,width:38,allowCustomValue:!0})})},p=e=>{var t;let{resourceTypes:a,query:r,variableOptionGroup:i,onQueryChange:c}=e;const u=(0,n.useCallback)((e=>{if(!e.value)return;const t=(0,d.b3)(r,e.value);c(t)}),[c,r]),p=(0,n.useMemo)((()=>[...a,i]),[a,i]);return(0,l.jsx)(o.g,{label:"Resource type",children:(0,l.jsx)(s.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-resource-type-field",value:null===(t=r.azureMonitor)||void 0===t?void 0:t.metricDefinition,onChange:u,options:p,width:38,allowCustomValue:!0})})},h=e=>{var t;let{query:a,resourceGroups:r,variableOptionGroup:i,onQueryChange:c,setError:u}=e;const p=(0,n.useCallback)((e=>{const t=(0,d.b2)(a,e.value);c(t)}),[c,a]),h=(0,n.useMemo)((()=>[...r,i]),[r,i]);return(0,l.jsx)(o.g,{label:"Resource group",children:(0,l.jsx)(s.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-resource-group-field",value:null===(t=a.azureMonitor)||void 0===t?void 0:t.resourceGroup,onChange:p,options:h,width:38,allowCustomValue:!0})})},m=e=>{var t,a;let{resourceNames:r,query:i,variableOptionGroup:c,onQueryChange:u}=e;const p=(0,n.useCallback)((e=>{const t=(0,d.R3)(i,e.value);u(t)}),[u,i]),h=(0,n.useMemo)((()=>[...r,c]),[r,c]),m=null!==(t=null===(a=i.azureMonitor)||void 0===a?void 0:a.resourceName)&&void 0!==t?t:null;return(0,l.jsx)(o.g,{label:"Resource name",children:(0,l.jsx)(s.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-resource-name-field",value:m,onChange:p,options:h,width:38,allowCustomValue:!0})})},g=e=>{var t,a;let{metricNames:r,query:i,variableOptionGroup:c,onQueryChange:u}=e;const p=(0,n.useCallback)((e=>{if(!e.value)return;const t=(0,d.Wp)(i,e.value);u(t)}),[u,i]),h=(0,n.useMemo)((()=>[...r,c]),[r,c]);return(0,l.jsx)(o.g,{label:"Metric",children:(0,l.jsx)(s.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-metric-field",value:null!==(t=null===(a=i.azureMonitor)||void 0===a?void 0:a.metricName)&&void 0!==t?t:null,onChange:p,options:h,width:38,allowCustomValue:!0})})},f=e=>{var t;let{query:a,variableOptionGroup:r,onQueryChange:i,aggregationOptions:c,isLoading:u}=e;const p=(0,n.useCallback)((e=>{if(!e.value)return;const t=(0,d.pt)(a,e.value);i(t)}),[i,a]),h=(0,n.useMemo)((()=>[...c,r]),[c,r]);return(0,l.jsx)(o.g,{label:"Aggregation",children:(0,l.jsx)(s.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-aggregation-field",value:null===(t=a.azureMonitor)||void 0===t?void 0:t.aggregation,onChange:p,options:h,width:38,isLoading:u})})};var b=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/time_grain_converter.ts");const v=e=>{var t;let{query:a,timeGrainOptions:r,variableOptionGroup:i,onQueryChange:c}=e;const u=(0,n.useCallback)((e=>{if(!e.value)return;const t=(0,d.zB)(a,e.value);c(t)}),[c,a]),p=(0,n.useMemo)((()=>{const e=b.Z.findClosestTimeGrain("1m",r.map((e=>b.Z.createKbnUnitFromISO8601Duration(e.value)))||["1m","5m","15m","30m","1h","6h","12h","1d"]);return[...r.map((t=>"auto"===t.value?Object.assign({},t,{description:e}):t)),i]}),[r,i]);return(0,l.jsx)(o.g,{label:"Time grain",children:(0,l.jsx)(s.Select,{menuShouldPortal:!0,inputId:"azure-monitor-metrics-time-grain-field",value:null===(t=a.azureMonitor)||void 0===t?void 0:t.timeGrain,onChange:u,options:p,width:38})})};var x;const y=e=>{var t;let{query:a,dimensionOptions:r,onQueryChange:i}=e;const c=(0,n.useMemo)((()=>{var e,t;return null!==(e=null===(t=a.azureMonitor)||void 0===t?void 0:t.dimensionFilters)&&void 0!==e?e:[]}),[null===(t=a.azureMonitor)||void 0===t?void 0:t.dimensionFilters]),u=(e,t,s)=>{i((0,d.QC)(a,e,t,s))};return(0,l.jsx)(o.g,{label:"Dimension",children:(0,l.jsxs)(s.VerticalGroup,{spacing:"xs",children:[c.map(((e,t)=>(0,l.jsxs)(s.HorizontalGroup,{spacing:"xs",children:[(0,l.jsx)(s.Select,{menuShouldPortal:!0,placeholder:"Field",value:e.dimension,options:r,onChange:e=>{var a;return u(t,"dimension",null!==(a=e.value)&&void 0!==a?a:"")},width:38}),x||(x=(0,l.jsx)(s.InlineLabel,{"aria-label":"equals",children:"=="})),(0,l.jsx)(s.Input,{placeholder:"",value:e.filter,onChange:e=>((e,t)=>{t.target instanceof HTMLInputElement&&u(e,"filter",t.target.value)})(t,e)}),(0,l.jsx)(s.Button,{variant:"secondary",size:"md",icon:"trash-alt","aria-label":"Remove",onClick:()=>(e=>{i((0,d.do)(a,e))})(t)})]},t))),(0,l.jsx)(s.Button,{variant:"secondary",size:"md",onClick:()=>{i((0,d.d2)(a))},children:"Add new dimension"})]})})},w=e=>{var t,a;let{onQueryChange:r,query:i}=e;const[c,u]=(0,n.useState)(null!==(t=null===(a=i.azureMonitor)||void 0===a?void 0:a.top)&&void 0!==t?t:""),p=(0,n.useCallback)((e=>{e.target instanceof HTMLInputElement&&u(e.target.value)}),[]),h=(0,n.useCallback)((()=>{const e=(0,d.y1)(i,c);r(e)}),[r,i,c]);return(0,l.jsx)(o.g,{label:"Top",children:(0,l.jsx)(s.Input,{id:"azure-monitor-metrics-top-field",value:c,onChange:p,onBlur:h,width:16})})},j=e=>{var t,a;let{onQueryChange:r,query:i}=e;const[c,u]=(0,n.useState)(null!==(t=null===(a=i.azureMonitor)||void 0===a?void 0:a.alias)&&void 0!==t?t:""),p=(0,n.useCallback)((e=>{e.target instanceof HTMLInputElement&&u(e.target.value)}),[]),h=(0,n.useCallback)((()=>{const e=(0,d.hd)(i,c);r(e)}),[r,i,c]);return(0,l.jsx)(o.g,{label:"Legend format",children:(0,l.jsx)(s.Input,{id:"azure-monitor-metrics-legend-field",placeholder:"Alias patterns",value:c,onChange:p,onBlur:h,width:38})})};function C(e,t,a){const[s]=(0,n.useState)((()=>Math.random())),[r,i]=(0,n.useState)(),o=(0,n.useMemo)((()=>null!=r?r:[]),[r]);return(0,n.useEffect)((()=>{e().then((e=>{i(e),t(s,void 0)})).catch((e=>{t(s,e)}))}),a),o}const k=(e,t,a,s)=>{const r=t.azureMonitorDatasource.defaultSubscriptionId,{subscription:o}=e,l=C((async()=>S(await t.azureMonitorDatasource.getSubscriptions(),o)),s,[]);return(0,n.useEffect)((()=>{((e,t,a,s)=>{const{subscription:n}=e;if(!t.length||n&&((0,i.Gq)(t,n)||n.includes("$")))return;const r=s||t[0].value;!n&&r&&(0,i.Gq)(t,r)&&a((0,d.Ad)(e,r)),n&&!(0,i.Gq)(t,n)&&((0,i.Gq)(t,r)?a((0,d.Ad)(e,r)):a((0,d.Ad)(e,"")))})(e,l,a,r)}),[l,e,r,a]),l};function S(e,t){const a=e.map(i.Er);return t&&!a.find((e=>e.value===t))&&a.push({label:t,value:t}),a}const T=e=>{var t,a,r;let{query:i,datasource:o,subscriptionId:b,variableOptionGroup:x,onChange:T,setError:O}=e;const _=((e,t,a)=>{var s;const[r,i]=(0,n.useState)({aggOptions:[],timeGrains:[],dimensions:[],isLoading:!1,supportedAggTypes:[],primaryAggType:void 0}),{subscription:o}=e,{resourceGroup:l,metricDefinition:c,resourceName:d,metricNamespace:u,metricName:p,aggregation:h,timeGrain:m}=null!==(s=e.azureMonitor)&&void 0!==s?s:{};return(0,n.useEffect)((()=>{o&&l&&c&&d&&u&&p&&t.getMetricMetadata(o,l,c,d,u,p).then((e=>{var t;const a=(e.supportedAggTypes||[e.primaryAggType]).map((e=>({label:e,value:e})));i({aggOptions:a,timeGrains:e.supportedTimeGrains,dimensions:e.dimensions,isLoading:!1,supportedAggTypes:null!==(t=e.supportedAggTypes)&&void 0!==t?t:[],primaryAggType:e.primaryAggType})}))}),[t,o,l,c,d,u,p]),(0,n.useEffect)((()=>{const t=h||r.primaryAggType,s=m||"auto";t===h&&s===m||a(Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{aggregation:t,timeGrain:s})}))}),[a,r,h,m,e]),r})(i,o,T),N=k(i,o,T,O),I=((e,t,a,s)=>{var n;const{subscription:r}=e,{resourceGroup:i}=null!==(n=e.azureMonitor)&&void 0!==n?n:{};return C((async()=>{if(r)return S(await t.getResourceGroups(r),i)}),s,[r])})(i,o,0,O),P=((e,t,a,s)=>{var n;const{subscription:r}=e,{resourceGroup:i,metricDefinition:o}=null!==(n=e.azureMonitor)&&void 0!==n?n:{};return C((async()=>{if(r&&i)return S(await t.getMetricDefinitions(r,i),o)}),s,[r,i])})(i,o,0,O),M=((e,t,a,s)=>{var n;const{subscription:r}=e,{resourceGroup:i,metricDefinition:o,resourceName:l}=null!==(n=e.azureMonitor)&&void 0!==n?n:{};return C((async()=>{if(r&&i&&o)return S(await t.getResourceNames(r,i,o),l)}),s,[r,i,o])})(i,o,0,O),F=((e,t,a,s)=>{var n;const{subscription:r}=e,{resourceGroup:i,metricDefinition:o,resourceName:l,metricNamespace:c,metricName:d}=null!==(n=e.azureMonitor)&&void 0!==n?n:{};return C((async()=>{if(r&&i&&o&&l&&c)return S(await t.getMetricNames(r,i,o,l,c),d)}),s,[r,i,o,l,c])})(i,o,0,O),A=((e,t,a,s)=>{var n;const{subscription:r}=e,{resourceGroup:i,metricDefinition:o,resourceName:l,metricNamespace:c}=null!==(n=e.azureMonitor)&&void 0!==n?n:{};return C((async()=>{if(!(r&&i&&o&&l))return;const s=S(await t.getMetricNamespaces(r,i,o,l),c);return!c&&s.length&&a((0,d.In)(e,s[0].value)),s}),s,[r,i,o,l])})(i,o,T,O);return(0,l.jsxs)("div",{"data-testid":"azure-monitor-metrics-query-editor",children:[(0,l.jsxs)(s.InlineFieldRow,{children:[(0,l.jsx)(c,{subscriptions:N,query:i,datasource:o,subscriptionId:b,variableOptionGroup:x,onQueryChange:T,setError:O}),(0,l.jsx)(h,{resourceGroups:I,query:i,datasource:o,subscriptionId:b,variableOptionGroup:x,onQueryChange:T,setError:O})]}),(0,l.jsxs)(s.InlineFieldRow,{children:[(0,l.jsx)(p,{resourceTypes:P,query:i,datasource:o,subscriptionId:b,variableOptionGroup:x,onQueryChange:T,setError:O}),(0,l.jsx)(m,{resourceNames:M,query:i,datasource:o,subscriptionId:b,variableOptionGroup:x,onQueryChange:T,setError:O})]}),(0,l.jsxs)(s.InlineFieldRow,{children:[(0,l.jsx)(u,{metricNamespaces:A,query:i,datasource:o,subscriptionId:b,variableOptionGroup:x,onQueryChange:T,setError:O}),(0,l.jsx)(g,{metricNames:F,query:i,datasource:o,subscriptionId:b,variableOptionGroup:x,onQueryChange:T,setError:O})]}),(0,l.jsxs)(s.InlineFieldRow,{children:[(0,l.jsx)(f,{query:i,datasource:o,subscriptionId:b,variableOptionGroup:x,onQueryChange:T,setError:O,aggregationOptions:null!==(t=null==_?void 0:_.aggOptions)&&void 0!==t?t:[],isLoading:_.isLoading}),(0,l.jsx)(v,{query:i,datasource:o,subscriptionId:b,variableOptionGroup:x,onQueryChange:T,setError:O,timeGrainOptions:null!==(a=null==_?void 0:_.timeGrains)&&void 0!==a?a:[]})]}),(0,l.jsx)(y,{query:i,datasource:o,subscriptionId:b,variableOptionGroup:x,onQueryChange:T,setError:O,dimensionOptions:null!==(r=null==_?void 0:_.dimensions)&&void 0!==r?r:[]}),(0,l.jsx)(w,{query:i,datasource:o,subscriptionId:b,variableOptionGroup:x,onQueryChange:T,setError:O}),(0,l.jsx)(j,{query:i,datasource:o,subscriptionId:b,variableOptionGroup:x,onQueryChange:T,setError:O})]})},O=e=>{let{query:t,onQueryChange:a}=e;const[i]=(0,n.useState)(t.queryType),c=i===r.B.ApplicationInsights||i===r.B.InsightsAnalytics,d=[{value:r.B.AzureMonitor,label:"Metrics"},{value:r.B.LogAnalytics,label:"Logs"},{value:r.B.AzureResourceGraph,label:"Azure Resource Graph"}];c&&d.push({value:r.B.ApplicationInsights,label:"Application Insights"},{value:r.B.InsightsAnalytics,label:"Insights Analytics"});const u=(0,n.useCallback)((e=>{e.value&&a(Object.assign({},t,{queryType:e.value}))}),[a,t]);return(0,l.jsx)(o.g,{label:"Service",children:(0,l.jsx)(s.Select,{menuShouldPortal:!0,inputId:"azure-monitor-query-type-field",value:t.queryType,options:d,onChange:u,width:38})})};var _=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/useLastError.ts"),N=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/LogsQueryEditor/index.tsx");const I=e=>{var t,a;let{query:r,onQueryChange:i}=e;const o=(0,n.useCallback)((e=>{i(Object.assign({},r,{azureResourceGraph:Object.assign({},r.azureResourceGraph,{query:e})}))}),[i,r]);return(0,l.jsx)(s.CodeEditor,{value:null!==(t=null===(a=r.azureResourceGraph)||void 0===a?void 0:a.query)&&void 0!==t?t:"",language:"kusto",height:200,width:1e3,showMiniMap:!1,onBlur:o,onSave:o})},P="arg-subscriptions",M=e=>{let{query:t,datasource:a,subscriptionId:r,variableOptionGroup:i,onChange:o,setError:d}=e;const u=(0,n.useRef)(!1),[p,h]=(0,n.useState)([]);return(0,n.useEffect)((()=>{u.current||(u.current=!0,a.azureMonitorDatasource.getSubscriptions().then((e=>{var a;const s=e.map((e=>({label:e.text,value:e.value,description:e.value})));var n;(h(s),d(P,void 0),null!==(a=t.subscriptions)&&void 0!==a&&a.length||null==s||!s.length)||o(Object.assign({},t,{subscriptions:[null!==(n=t.subscription)&&void 0!==n?n:s[0].value]}))})).catch((e=>d(P,e))))}),[a,o,t,d]),(0,l.jsxs)("div",{"data-testid":"azure-monitor-logs-query-editor",children:[(0,l.jsx)(s.InlineFieldRow,{children:(0,l.jsx)(c,{multiSelect:!0,subscriptions:p,query:t,datasource:a,subscriptionId:r,variableOptionGroup:i,onQueryChange:o,setError:d})}),(0,l.jsx)(I,{query:t,datasource:a,subscriptionId:r,variableOptionGroup:i,onQueryChange:o,setError:d})]})};var F;const A=e=>{let{timeGrainCount:t,timeGrainType:a,timeGrainUnit:n}=e;const r="specific"===a?["specific",t,n]:[a];return(0,l.jsx)(o.g,{label:"Timegrain",children:(0,l.jsx)(l.Fragment,{children:r.map((e=>(0,l.jsx)(s.Input,{value:e,disabled:!0,onChange:()=>{},width:10},e)))})})},D=e=>{var t,a,n,r,i,c,d,u;let{query:p}=e;const h=(null===(t=p.appInsights)||void 0===t?void 0:t.dimension)||[];return(0,l.jsxs)("div",{"data-testid":"azure-monitor-application-insights-query-editor",children:[(0,l.jsx)(o.g,{label:"Metric",disabled:!0,children:(0,l.jsx)(s.Input,{value:null===(a=p.appInsights)||void 0===a?void 0:a.metricName,disabled:!0,onChange:()=>{},id:"azure-monitor-application-insights-metric"})}),(0,l.jsx)(o.g,{label:"Aggregation",disabled:!0,children:(0,l.jsx)(s.Input,{value:null===(n=p.appInsights)||void 0===n?void 0:n.aggregation,disabled:!0,onChange:()=>{}})}),h.length>0&&(0,l.jsx)(o.g,{label:"Group by",children:(0,l.jsx)(l.Fragment,{children:h.map((e=>(0,l.jsx)(s.Input,{value:e,disabled:!0,onChange:()=>{}},e)))})}),(0,l.jsx)(o.g,{label:"Filter",disabled:!0,children:(0,l.jsx)(s.Input,{value:null===(r=p.appInsights)||void 0===r?void 0:r.dimensionFilter,disabled:!0,onChange:()=>{}})}),(0,l.jsx)(A,{timeGrainCount:(null===(i=p.appInsights)||void 0===i?void 0:i.timeGrainCount)||"",timeGrainType:(null===(c=p.appInsights)||void 0===c?void 0:c.timeGrainType)||"auto",timeGrainUnit:(null===(d=p.appInsights)||void 0===d?void 0:d.timeGrainUnit)||"minute"}),(0,l.jsx)(o.g,{label:"Legend format",disabled:!0,children:(0,l.jsx)(s.Input,{placeholder:"Alias patterns",value:null===(u=p.appInsights)||void 0===u?void 0:u.alias,onChange:()=>{},disabled:!0})}),F||(F=(0,l.jsx)(s.Alert,{severity:"info",title:"Deprecated",children:"Application Insights is deprecated and is now read only. Migrate your queries to Metrics to make changes."}))]})};var $,L,R=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/Space.tsx");const E=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],z=e=>{var t,a,n;let{query:r}=e;return(0,l.jsxs)("div",{"data-testid":"azure-monitor-insights-analytics-query-editor",children:[(0,l.jsx)(s.CodeEditor,{language:"kusto",value:null!==(t=null===(a=r.insightsAnalytics)||void 0===a?void 0:a.query)&&void 0!==t?t:"",height:200,width:"100%",readOnly:!0,showMiniMap:!1}),(0,l.jsx)(o.g,{label:"Format as",children:(0,l.jsx)(s.Select,{menuShouldPortal:!0,inputId:"azure-monitor-logs-workspaces-field",value:null===(n=r.insightsAnalytics)||void 0===n?void 0:n.resultFormat,disabled:!0,options:E,onChange:()=>{},width:38})}),$||($=(0,l.jsx)(R.T,{v:2})),L||(L=(0,l.jsx)(s.Alert,{severity:"info",title:"Deprecated",children:"Insights Analytics is deprecated and is now read only. Migrate your queries to Logs to make changes."}))]})};var V=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),B=a("../../opt/drone/yarncache/fast-deep-equal-npm-3.1.3-790edcfcf5-e21a9d8d84.zip/node_modules/fast-deep-equal/index.js"),U=a.n(B),H=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/migrateQuery.ts");const q={queryType:r.B.AzureMonitor},W=(e,t)=>{const a=(0,n.useMemo)((()=>(e=>{const t=(0,V.defaults)({},e,q),a=(0,H.Z)(t);return U()(a,e)?e:a})(e)),[e]);return(0,n.useEffect)((()=>{a!==e&&t(a)}),[a,e,t]),a};var G,Z;const Q=e=>{let{subscriptionId:t,query:a,datasource:n,variableOptionGroup:i,onChange:o,setError:c}=e;switch(a.queryType){case r.B.AzureMonitor:return(0,l.jsx)(T,{subscriptionId:t,query:a,datasource:n,onChange:o,variableOptionGroup:i,setError:c});case r.B.LogAnalytics:return(0,l.jsx)(N.Z,{subscriptionId:t,query:a,datasource:n,onChange:o,variableOptionGroup:i,setError:c});case r.B.ApplicationInsights:return(0,l.jsx)(D,{query:a});case r.B.InsightsAnalytics:return(0,l.jsx)(z,{query:a});case r.B.AzureResourceGraph:return(0,l.jsx)(M,{subscriptionId:t,query:a,datasource:n,onChange:o,variableOptionGroup:i,setError:c});default:return Z||(Z=(0,l.jsx)(s.Alert,{title:"Unknown query type"}))}return null},K=e=>{let{query:t,datasource:a,onChange:r,onRunQuery:i}=e;const[o,c]=(0,_.Z)(),d=(0,n.useMemo)((()=>(0,V.debounce)(i,500)),[i]),u=(0,n.useCallback)((e=>{r(e),d()}),[r,d]),p=W(t,u),h=p.subscription||a.azureMonitorDatasource.defaultSubscriptionId,m={label:"Template Variables",options:a.getVariables().map((e=>({label:e,value:e})))};return(0,l.jsxs)("div",{"data-testid":"azure-monitor-query-editor",children:[(0,l.jsx)(O,{query:p,onQueryChange:u}),(0,l.jsx)(Q,{subscriptionId:h,query:p,datasource:a,onChange:u,variableOptionGroup:m,setError:c}),o&&(0,l.jsxs)(l.Fragment,{children:[G||(G=(0,l.jsx)(R.T,{v:2})),(0,l.jsx)(s.Alert,{severity:"error",title:"An error occurred while requesting metadata from Azure Monitor",children:o})]})]})}},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/ResourcePicker/types.ts":(e,t,a)=>{"use strict";let s;a.d(t,{J:()=>s}),function(e){e.Subscription="Subscription",e.ResourceGroup="ResourceGroup",e.Resource="Resource",e.VariableGroup="TemplateVariableGroup",e.Variable="TemplateVariable"}(s||(s={}))},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/ResourcePicker/utils.ts":(e,t,a)=>{"use strict";a.d(t,{_E:()=>r,uD:()=>i,K5:()=>o,E4:()=>l});var s=a("../../opt/drone/yarncache/immer-npm-9.0.7-27041ef228-3655ad64bf.zip/node_modules/immer/dist/immer.esm.js");const n=/\/subscriptions\/(?<subscriptionID>[^/]+)(?:\/resourceGroups\/(?<resourceGroup>[^/]+)(?:\/providers.+\/(?<resource>[^/]+))?)?/;function r(e){var t;const a=n.exec(e),s=null!==(t=null==a?void 0:a.groups)&&void 0!==t?t:{},{subscriptionID:r,resourceGroup:i,resource:o}=s;if(r)return{subscriptionID:r,resourceGroup:i,resource:o}}function i(e){return!!e.match(/^[A-Z0-9]+/i)}function o(e,t){for(const a of e){if(a.uri.toLowerCase()===t.toLowerCase())return a;if(a.children){const e=o(a.children,t);if(e)return e}}}function l(e,t,a){return(0,s.ZP)(e,(e=>{const s=o(e,t);if(!s)throw new Error("Unable to find resource");s.children=a}))}},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/Space.tsx":(e,t,a)=>{"use strict";a.d(t,{T:()=>i});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),n=a("./packages/grafana-ui/src/index.ts"),r=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const i=e=>{const t=(0,n.useTheme2)(),a=o(t,e);return(0,r.jsx)("span",{className:(0,s.cx)(a.wrapper)})};i.defaultProps={v:0,h:0,layout:"block"};const o=(0,n.stylesFactory)(((e,t)=>{var a,n;return{wrapper:(0,s.css)([{paddingRight:e.spacing(null!==(a=t.h)&&void 0!==a?a:0),paddingBottom:e.spacing(null!==(n=t.v)&&void 0!==n?n:0)},"inline"===t.layout&&{display:"inline-block"},"block"===t.layout&&{display:"block"}])}}))},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/time_grain_converter.ts":(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),n=a("./packages/grafana-data/src/index.ts");class r{static createISO8601Duration(e,t){return(0,s.includes)(["hour","minute","h","m"],t)?`PT${e}${t[0].toUpperCase()}`:`P${e}${t[0].toUpperCase()}`}static createISO8601DurationFromInterval(e){const t=+e.slice(0,e.length-1),a=e[e.length-1];if(e.indexOf("ms")>-1)return r.createISO8601Duration(1,"m");if("s"===e[e.length-1]){let e=60*t%60;return e<1&&(e=1),r.createISO8601Duration(e,"m")}return r.createISO8601Duration(t,a)}static findClosestTimeGrain(e,t){const a=(0,s.filter)(t,(e=>"auto"!==e));let r=a[0];const i=n.rangeUtil.intervalToMs(e);for(let e=0;e<a.length;e++)i>n.rangeUtil.intervalToMs(a[e])&&(r=e+1<a.length?a[e+1]:a[e]);return r}static createTimeGrainFromISO8601Duration(e){let t=1;"PT"===e.substring(0,2)&&(t=2);const a=e.substring(t,e.length-1),s=e.substring(e.length-1);return a+" "+r.timeUnitToText(+a,s)}static timeUnitToText(e,t){let a="";return"S"===t&&(a="second"),"M"===t&&(a="minute"),"H"===t&&(a="hour"),"D"===t&&(a="day"),e>1?a+"s":a}static createKbnUnitFromISO8601Duration(e){if("auto"===e)return"auto";let t=1;"PT"===e.substring(0,2)&&(t=2);const a=e.substring(t,e.length-1),s=e.substring(e.length-1);return a+r.timeUnitToKbn(+a,s)}static timeUnitToKbn(e,t){return"S"===t?"s":"M"===t?"m":"H"===t?"h":"D"===t?"d":""}}},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/types/index.ts":(e,t,a)=>{"use strict";let s,n;a.d(t,{_:()=>n,B:()=>s}),function(e){e.AzureMonitor="Azure Monitor",e.ApplicationInsights="Application Insights",e.InsightsAnalytics="Insights Analytics",e.LogAnalytics="Azure Log Analytics",e.AzureResourceGraph="Azure Resource Graph",e.GrafanaTemplateVariableFn="Grafana Template Variable Function"}(s||(s={})),function(e){e.Public="AzureCloud",e.China="AzureChinaCloud",e.USGovernment="AzureUSGovernment",e.Germany="AzureGermanCloud",e.None=""}(n||(n={}))},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/common.ts":(e,t,a)=>{"use strict";a.d(t,{Gq:()=>n,b9:()=>r,Er:()=>i,kr:()=>o,Ll:()=>l});var s=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");a("./packages/grafana-data/src/index.ts"),a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/time_grain_converter.ts");const n=(e,t)=>e.some((e=>e.options?n(e.options,t):e.value===t)),r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return[];const a=t.reduce(((e,t)=>(e.add(t),e)),new Set);return e.filter((e=>a.has(e.value)))},i=e=>({value:e.value,label:e.text});const o={azureMonitor:"azuremonitor",logAnalytics:"loganalytics",appInsights:"appinsights",resourceGraph:"resourcegraph"};function l(e,t){if("string"==typeof e)return t.multi||t.includeAll?"'"+e+"'":e;if("number"==typeof e)return e;return(0,s.map)(e,(t=>"number"==typeof e?e:"'"+t+"'")).join(",")}},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/messageFromError.ts":(e,t,a)=>{"use strict";function s(e){var t,a,s,n,r,i,o,l,c,d,u,p,h,m,g,f,b;if(!e||"object"!=typeof e)return;if("string"==typeof e.message)return e.message;if("string"==typeof(null===(t=e.data)||void 0===t||null===(a=t.error)||void 0===a?void 0:a.message))return e.data.error.message;const v=(null===(s=e.error)||void 0===s||null===(n=s.data)||void 0===n||null===(r=n.error)||void 0===r||null===(i=r.innererror)||void 0===i||null===(o=i.innererror)||void 0===o?void 0:o.message)||(null===(l=e.error)||void 0===l||null===(c=l.data)||void 0===c||null===(d=c.error)||void 0===d||null===(u=d.innererror)||void 0===u?void 0:u.message)||(null===(p=e.error)||void 0===p||null===(h=p.data)||void 0===h||null===(m=h.error)||void 0===m?void 0:m.message)||(null===(g=e.error)||void 0===g||null===(f=g.data)||void 0===f?void 0:f.message)||(null===(b=e.data)||void 0===b?void 0:b.message)||e;return"string"==typeof v?v:v&&v.toString?v.toString():void 0}a.d(t,{Z:()=>s})},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/migrateQuery.ts":(e,t,a)=>{"use strict";a.d(t,{Z:()=>l,N:()=>d});var s=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/types/index.ts"),n=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/time_grain_converter.ts"),r=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/MetricsQueryEditor/setQueryValue.ts"),i=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/components/LogsQueryEditor/setQueryValue.ts");const o="select";function l(e){let t=e;return t=function(e){var t,a;let s=e;if(null!==(t=s.azureMonitor)&&void 0!==t&&t.timeGrainUnit&&"auto"!==s.azureMonitor.timeGrain){var i,o;const e=n.Z.createISO8601Duration(null!==(i=s.azureMonitor.timeGrain)&&void 0!==i?i:"auto",s.azureMonitor.timeGrainUnit);s=(0,r.zB)(s,e),null===(o=s.azureMonitor)||void 0===o||delete o.timeGrainUnit}if(null!==(a=s.appInsights)&&void 0!==a&&a.timeGrainUnit&&"auto"!==s.appInsights.timeGrain){const e=Object.assign({},s.appInsights);s.appInsights.timeGrainCount?e.timeGrain=n.Z.createISO8601Duration(s.appInsights.timeGrainCount,s.appInsights.timeGrainUnit):(e.timeGrainCount=s.appInsights.timeGrain,s.appInsights.timeGrain&&(e.timeGrain=n.Z.createISO8601Duration(s.appInsights.timeGrain,s.appInsights.timeGrainUnit))),s=Object.assign({},s,{appInsights:e})}return s}(t),t=function(e){var t,a,s,n;let r=e;null!==(t=r.azureLogAnalytics)&&void 0!==t&&null!==(a=t.query)&&void 0!==a&&a.match(/\$__from\s/gi)&&(r=(0,i.J3)(r,r.azureLogAnalytics.query.replace(/\$__from\s/gi,"$__timeFrom() ")));null!==(s=r.azureLogAnalytics)&&void 0!==s&&null!==(n=s.query)&&void 0!==n&&n.match(/\$__to\s/gi)&&(r=(0,i.J3)(r,r.azureLogAnalytics.query.replace(/\$__to\s/gi,"$__timeTo() ")));return r}(t),t=function(e){var t,a;if((!(null===(t=e.azureMonitor)||void 0===t?void 0:t.metricNamespace)||e.azureMonitor.metricNamespace===o)&&null!==(a=e.azureMonitor)&&void 0!==a&&a.metricDefinition)return Object.assign({},e,{azureMonitor:Object.assign({},e.azureMonitor,{metricNamespace:e.azureMonitor.metricDefinition})});return e}(t),t=function(e){var t;const a=null==e||null===(t=e.appInsights)||void 0===t?void 0:t.dimension;if(a&&"string"==typeof a)return Object.assign({},e,{appInsights:Object.assign({},e.appInsights,{dimension:[a]})});return e}(t),t=c(t),t}function c(e){var t;let a=e;const s=null===(t=a.azureMonitor)||void 0===t?void 0:t.dimension;var n;s&&"None"!==s&&(a=(0,r.d2)(a,s,"eq",null===(n=a.azureMonitor)||void 0===n?void 0:n.dimensionFilter));return a}function d(e){var t;let a=e;return a.queryType===s.B.ApplicationInsights&&null!==(t=a.appInsights)&&void 0!==t&&t.rawQuery&&(a=Object.assign({},a,{queryType:s.B.InsightsAnalytics,appInsights:void 0,insightsAnalytics:{query:a.appInsights.rawQuery,resultFormat:"time_series"}})),a.queryType||(a=Object.assign({},a,{queryType:s.B.AzureMonitor})),a.queryType===s.B.AzureMonitor&&a.azureMonitor&&(a=c(a)),a}},"./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/useLastError.ts":(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./public/app/plugins/datasource/grafana-azure-monitor-datasource/utils/messageFromError.ts");function r(){const[e,t]=(0,s.useState)([]),a=(0,s.useCallback)(((e,a)=>{t((t=>{const s=[...t],n=t.findIndex((t=>{let[a]=t;return a===e}));return n>-1&&s.splice(n,1),a&&s.unshift([e,a]),s}))}),[]);return[(0,s.useMemo)((()=>{const t=e[0];return t&&(0,n.Z)(t[1])}),[e]),a]}},"./public/app/plugins/datasource/influxdb/components/useUniqueId.ts":(e,t,a)=>{"use strict";a.d(t,{L:()=>r});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function r(){const e=(0,s.useRef)(null);return null==e.current&&(e.current=(0,n.uniqueId)()),e.current}},"./public/app/plugins/datasource/loki/components/LokiOptionFields.tsx":(e,t,a)=>{"use strict";a.d(t,{TQ:()=>u,JX:()=>h});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s,n=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),i=a("./packages/grafana-ui/src/index.ts"),o=a("./public/app/plugins/datasource/loki/types.ts"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=["instant","range"];const d=[{value:o.E.Range,label:"Range",description:"Run query over a range of time."},{value:o.E.Instant,label:"Instant",description:'Run query against a single point in time. For this query, the "To" time is used.'}],u={value:1,label:"1/1"},p=[u].concat((0,r.map)([2,3,4,5,10],(e=>({value:e,label:"1/"+e}))));function h(e){var t,a;const{lineLimitValue:r,resolution:u,onRunQuery:h,runOnBlur:m,onChange:g}=e,f=null!==(t=e.query)&&void 0!==t?t:{};let b=null!==(a=f.queryType)&&void 0!==a?a:f.instant?o.E.Instant:o.E.Range;function v(e){const t=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(f,c);g(Object.assign({},t,{queryType:e}))}function x(e){return 0===e.length?NaN:e.length>0&&(isNaN(+e)||+e<0)?0:+e}return(0,l.jsxs)("div",{"aria-label":"Loki extra field",className:"gf-form-inline",children:[(0,l.jsxs)("div",{"data-testid":"queryTypeField",className:(0,n.cx)("gf-form explore-input-margin",n.css`
            flex-wrap: nowrap;
          `),"aria-label":"Query type field",children:[s||(s=(0,l.jsx)(i.InlineFormLabel,{width:"auto",children:"Query type"})),(0,l.jsx)(i.RadioButtonGroup,{options:d,value:b,onChange:e=>{v(e),m&&h()}})]}),(0,l.jsxs)("div",{"data-testid":"lineLimitField",className:(0,n.cx)("gf-form",n.css`
            flex-wrap: nowrap;
          `),"aria-label":"Line limit field",children:[(0,l.jsx)(i.InlineField,{label:"Line limit",tooltip:"Upper limit for number of log lines returned by query.",children:(0,l.jsx)(i.Input,{className:"width-4",placeholder:"auto",type:"number",min:0,onChange:function(e){f.maxLines!==x(e.currentTarget.value)&&function(e){const t=Object.assign({},f,{maxLines:x(e)});g(t)}(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&h()},value:r,onBlur:()=>{m&&h()}})}),(0,l.jsx)(i.InlineField,{label:"Resolution",tooltip:"Resolution 1/1 sets step parameter of Loki metrics range queries such that each pixel corresponds to one data point. For better performance, lower resolutions can be picked. 1/2 only retrieves a data point for every other pixel, and 1/10 retrieves one data point per 10 pixels.",children:(0,l.jsx)(i.Select,{isSearchable:!1,onChange:function(e){const t=Object.assign({},f,{resolution:e.value});g(t)},options:p,value:u,"aria-label":"Select resolution",menuShouldPortal:!0})})]})]})}},"./public/app/plugins/datasource/loki/components/LokiQueryField.tsx":(e,t,a)=>{"use strict";a.d(t,{n:()=>T});var s,n,r,i,o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),l=a("./packages/grafana-ui/src/index.ts"),c=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),d=a("./.yarn/__virtual__/react-window-virtual-0f9a8c6a67/3/opt/drone/yarncache/react-window-npm-1.8.6-4f5a230226-54ccf2b16c.zip/node_modules/react-window/dist/index.esm.js"),u=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),p=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m=1e3,g=1e4,f=4,b="{}";function v(e){const t=[];for(const a of e)if(a.selected&&a.values&&a.values.length>0){const e=a.values.filter((e=>e.selected)).map((e=>e.name));e.length>1?t.push(`${a.name}=~"${e.join("|")}"`):1===e.length&&t.push(`${a.name}="${e[0]}"`)}return["{",t.join(","),"}"].join("")}class x extends o.Component{constructor(){super(...arguments),h(this,"state",{labels:[],searchTerm:"",status:"Ready",error:"",validationStatus:""}),h(this,"onChangeSearch",(e=>{this.setState({searchTerm:e.target.value})})),h(this,"onClickRunLogsQuery",(()=>{const e=v(this.state.labels);this.props.onChange(e)})),h(this,"onClickRunMetricsQuery",(()=>{const e=`rate(${v(this.state.labels)}[$__interval])`;this.props.onChange(e)})),h(this,"onClickClear",(()=>{this.setState((e=>({labels:e.labels.map((e=>Object.assign({},e,{values:void 0,selected:!1,loading:!1,hidden:!1,facets:void 0}))),searchTerm:"",status:"",error:"",validationStatus:""}))),this.props.deleteLastUsedLabels()})),h(this,"onClickLabel",((e,t,a)=>{const s=this.state.labels.find((t=>t.name===e));if(!s)return;const n=!s.selected;let r={selected:n};if(s.values&&!n){const e=s.values.map((e=>Object.assign({},e,{selected:!1})));r=Object.assign({},r,{facets:0,values:e})}this.setState({searchTerm:""}),this.updateLabelState(e,r,"",(()=>this.doFacettingForLabel(e)))})),h(this,"onClickValue",((e,t,a)=>{const s=this.state.labels.find((t=>t.name===e));if(!s||!s.values)return;this.setState({searchTerm:""});const n=s.values.map((e=>Object.assign({},e,{selected:e.name===t?!e.selected:e.selected})));this.updateLabelState(e,{values:n},"",(()=>this.doFacetting(e)))})),h(this,"onClickValidate",(()=>{const e=v(this.state.labels);this.validateSelector(e)})),h(this,"doFacetting",(e=>{const t=v(this.state.labels);if(t===b){const e=this.state.labels.map((e=>Object.assign({},e,{facets:0,values:void 0,hidden:!1})));this.setState({labels:e},(()=>{this.state.labels.forEach((e=>e.selected&&this.fetchValues(e.name,t)))}))}else this.fetchSeries(t,e)}))}updateLabelState(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3?arguments[3]:void 0;this.setState((s=>{const n=s.labels.map((a=>a.name===e?Object.assign({},a,t):a)),r=a?"":s.error;return{labels:n,status:a,error:r,validationStatus:""}}),s)}componentDidMount(){const{languageProvider:e,autoSelect:t=f,lastUsedLabels:a}=this.props;if(e){const s=a;e.start().then((()=>{let a=e.getLabelKeys();if(a.length>m){const e=`Too many labels found (showing only 1000 of ${a.length})`;a=a.slice(0,m),this.setState({error:e})}const n=a.map(((e,a,n)=>({name:e,selected:n.length<=t&&0===s.length||s.includes(e),loading:!1})));this.setState({labels:n},(()=>{this.state.labels.forEach((e=>{e.selected&&this.fetchValues(e.name,b)}))}))}))}}doFacettingForLabel(e){const t=this.state.labels.find((t=>t.name===e));if(!t)return;const a=this.state.labels.filter((e=>e.selected)).map((e=>e.name));this.props.storeLastUsedLabels(a),t.selected?t.values||this.fetchValues(e,v(this.state.labels)):this.doFacetting()}async fetchValues(e,t){const{languageProvider:a}=this.props;this.updateLabelState(e,{loading:!0},`Fetching values for ${e}`);try{let s=await a.getLabelValues(e);if(t!==v(this.state.labels))return void this.updateLabelState(e,{loading:!1},"");if(s.length>g){const t=`Too many values for ${e} (showing only 10000 of ${s.length})`;s=s.slice(0,g),this.setState({error:t})}const n=s.map((e=>({name:e})));this.updateLabelState(e,{values:n,loading:!1})}catch(e){console.error(e)}}async fetchSeries(e,t){const{languageProvider:a}=this.props;t&&this.updateLabelState(t,{loading:!0},`Facetting labels for ${e}`);try{const s=await a.fetchSeriesLabels(e,!0);if(e!==v(this.state.labels))return void(t&&this.updateLabelState(t,{loading:!1}));if(0===Object.keys(s).length)return void this.setState({error:`Empty results, no matching label for ${e}`});const n=function(e,t,a){return e.map((e=>{const s=t[e.name];if(s){let t;if(e.name===a&&e.values)t=e.values;else{var n;const a=new Set((null===(n=e.values)||void 0===n?void 0:n.filter((e=>e.selected)).map((e=>e.name)))||[]);t=s.map((e=>({name:e,selected:a.has(e)})))}return Object.assign({},e,{loading:!1,values:t,facets:t.length})}return Object.assign({},e,{loading:!1,hidden:!s,values:void 0,facets:0})}))}(this.state.labels,s,t);this.setState({labels:n,error:""}),t&&this.updateLabelState(t,{loading:!1})}catch(e){console.error(e)}}async validateSelector(e){const{languageProvider:t}=this.props;this.setState({validationStatus:`Validating selector ${e}`,error:""});const a=await t.fetchSeries(e);this.setState({validationStatus:`Selector is valid (${a.length} streams found)`})}render(){const{theme:e}=this.props,{labels:t,searchTerm:a,status:o,error:h,validationStatus:m}=this.state;if(0===t.length)return s||(s=(0,p.jsx)(l.LoadingPlaceholder,{text:"Loading labels..."}));const g=(e=>({wrapper:c.css`
    background-color: ${e.colors.background.secondary};
    padding: ${e.spacing(2)};
    width: 100%;
  `,list:c.css`
    margin-top: ${e.spacing(1)};
    display: flex;
    flex-wrap: wrap;
    max-height: 200px;
    overflow: auto;
  `,section:c.css`
    & + & {
      margin: ${e.spacing(2,0)};
    }
    position: relative;
  `,selector:c.css`
    font-family: ${e.typography.fontFamilyMonospace};
    margin-bottom: ${e.spacing(1)};
  `,status:c.css`
    padding: ${e.spacing(.5)};
    color: ${e.colors.text.secondary};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    /* using absolute positioning because flex interferes with ellipsis */
    position: absolute;
    width: 50%;
    right: 0;
    text-align: right;
    transition: opacity 100ms linear;
    opacity: 0;
  `,statusShowing:c.css`
    opacity: 1;
  `,error:c.css`
    color: ${e.colors.error.main};
  `,valueList:c.css`
    margin-right: ${e.spacing(1)};
  `,valueListWrapper:c.css`
    border-left: 1px solid ${e.colors.border.medium};
    margin: ${e.spacing(1,0)};
    padding: ${e.spacing(1,0,1,1)};
  `,valueListArea:c.css`
    display: flex;
    flex-wrap: wrap;
    margin-top: ${e.spacing(1)};
  `,valueTitle:c.css`
    margin-left: -${e.spacing(.5)};
    margin-bottom: ${e.spacing(1)};
  `,validationStatus:c.css`
    padding: ${e.spacing(.5)};
    margin-bottom: ${e.spacing(1)};
    color: ${e.colors.text.maxContrast};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `}))(e),f=v(this.state.labels),x=f===b;let y=t.filter((e=>e.selected&&e.values));return y=a?y.map((e=>{const t=e.values.filter((e=>{if(e.selected)return e.highlightParts=void 0,!0;const t=(0,l.fuzzyMatch)(e.name.toLowerCase(),a.toLowerCase());return!!t.found&&(e.highlightParts=t.ranges,e.order=t.distance,!0)}));return Object.assign({},e,{values:(0,u.sortBy)(t,(e=>e.selected?-1/0:e.order))})})):this.state.labels.filter((e=>e.selected&&e.values)).map((e=>Object.assign({},e,{values:null!=e&&e.values?e.values.map((e=>Object.assign({},e,{highlightParts:void 0}))):[]}))),(0,p.jsxs)("div",{className:g.wrapper,children:[(0,p.jsxs)("div",{className:g.section,children:[n||(n=(0,p.jsx)(l.Label,{description:"Which labels would you like to consider for your search?",children:"1. Select labels to search in"})),(0,p.jsx)("div",{className:g.list,children:t.map((e=>(0,p.jsx)(l.BrowserLabel,{name:e.name,loading:e.loading,active:e.selected,hidden:e.hidden,facets:e.facets,onClick:this.onClickLabel},e.name)))})]}),(0,p.jsxs)("div",{className:g.section,children:[r||(r=(0,p.jsx)(l.Label,{description:"Choose the label values that you would like to use for the query. Use the search field to find values across selected labels.",children:"2. Find values for the selected labels"})),(0,p.jsx)("div",{children:(0,p.jsx)(l.Input,{onChange:this.onChangeSearch,"aria-label":"Filter expression for values",value:a})}),(0,p.jsx)("div",{className:g.valueListArea,children:y.map((e=>{var t,s;return(0,p.jsxs)("div",{role:"list",className:g.valueListWrapper,children:[(0,p.jsx)("div",{className:g.valueTitle,"aria-label":`Values for ${e.name}`,children:(0,p.jsx)(l.BrowserLabel,{name:e.name,loading:e.loading,active:e.selected,hidden:e.hidden,facets:e.facets||(null===(t=e.values)||void 0===t?void 0:t.length),onClick:this.onClickLabel})}),(0,p.jsx)(d.t7,{height:200,itemCount:(null===(s=e.values)||void 0===s?void 0:s.length)||0,itemSize:28,itemKey:t=>e.values[t].name,width:200,className:g.valueList,children:t=>{var s;let{index:n,style:r}=t;const i=null===(s=e.values)||void 0===s?void 0:s[n];return i?(0,p.jsx)("div",{style:r,children:(0,p.jsx)(l.BrowserLabel,{name:e.name,value:null==i?void 0:i.name,active:null==i?void 0:i.selected,highlightParts:null==i?void 0:i.highlightParts,onClick:this.onClickValue,searchTerm:a})}):null}})]},e.name)}))})]}),(0,p.jsxs)("div",{className:g.section,children:[i||(i=(0,p.jsx)(l.Label,{children:"3. Resulting selector"})),(0,p.jsx)("div",{"aria-label":"selector",className:g.selector,children:f}),m&&(0,p.jsx)("div",{className:g.validationStatus,children:m}),(0,p.jsxs)(l.HorizontalGroup,{children:[(0,p.jsx)(l.Button,{"aria-label":"Use selector as logs button",disabled:x,onClick:this.onClickRunLogsQuery,children:"Show logs"}),(0,p.jsx)(l.Button,{"aria-label":"Use selector as metrics button",variant:"secondary",disabled:x,onClick:this.onClickRunMetricsQuery,children:"Show logs rate"}),(0,p.jsx)(l.Button,{"aria-label":"Validate submit button",variant:"secondary",disabled:x,onClick:this.onClickValidate,children:"Validate selector"}),(0,p.jsx)(l.Button,{"aria-label":"Selector clear button",variant:"secondary",onClick:this.onClickClear,children:"Clear"}),(0,p.jsx)("div",{className:(0,c.cx)(g.status,(o||h)&&g.statusShowing),children:(0,p.jsx)("span",{className:h?g.error:"",children:h||o})})]})]})]})}}const y=(0,l.withTheme2)(x);var w=a("../../opt/drone/yarncache/prismjs-npm-1.26.0-15be1ab06b-6de058930c.zip/node_modules/prismjs/prism.js");function j(e){return t=e/1e3,Math.floor(t/60);var t}var C=a("./public/app/core/components/LocalStorageValueProvider/index.tsx");function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e,t){let{typeaheadContext:a,typeaheadText:s}=t;switch(a){case"context-labels":{const t=l.DOMUtil.getNextCharacter();t&&"}"!==t&&","!==t||(e+="=");break}case"context-label-values":s.match(/^(!?=~?"|")/)||(e=`"${e}`),'"'!==l.DOMUtil.getNextCharacter()&&(e=`${e}"`)}return e}class T extends o.PureComponent{constructor(e){super(e),k(this,"plugins",void 0),k(this,"onChangeLabelBrowser",(e=>{this.onChangeQuery(e,!0),this.setState({labelBrowserVisible:!1})})),k(this,"onChangeQuery",((e,t)=>{const{query:a,onChange:s,onRunQuery:n}=this.props;if(s){s(Object.assign({},a,{expr:e})),t&&n&&n()}})),k(this,"onClickChooserButton",(()=>{this.setState((e=>({labelBrowserVisible:!e.labelBrowserVisible})))})),k(this,"onTypeahead",(async e=>{const{datasource:t}=this.props;if(!t.languageProvider)return{suggestions:[]};const a=t.languageProvider,{history:s}=this.props,{prefix:n,text:r,value:i,wrapperClasses:o,labelKey:l}=e;return await a.provideCompletionItems({text:r,value:i,prefix:n,wrapperClasses:o,labelKey:l},{history:s})})),this.state={labelsLoaded:!1,labelBrowserVisible:!1},this.plugins=[(0,l.BracesPlugin)(),(0,l.SlatePrism)({onlyIn:e=>"block"===e.object&&"code_block"===e.type,getSyntax:e=>"logql"},Object.assign({},w.languages,{logql:this.props.datasource.languageProvider.getSyntax()}))]}async componentDidMount(){await this.props.datasource.languageProvider.start(),this.setState({labelsLoaded:!0})}componentDidUpdate(e){const{range:t,datasource:{languageProvider:a}}=this.props,s=function(e,t){if(e&&t){const a=j(e.from.valueOf())===j(t.from.valueOf()),s=j(e.to.valueOf())===j(t.to.valueOf());return!(a&&s)}return!1}(t,e.range);s&&a.fetchLabels()}render(){const{ExtraFieldElement:e,query:t,datasource:a,placeholder:s="Enter a Loki query (run with Shift+Enter)"}=this.props,{labelsLoaded:n,labelBrowserVisible:r}=this.state,i=a.languageProvider,o=a.languageProvider?i.cleanText:void 0,c=i.getLabelKeys().length>0,d=function(e,t){return e?t?"Log browser":"(No logs found)":"Loading labels..."}(n,c),u=!(n&&c);return(0,p.jsx)(C.G,{storageKey:"grafana.datasources.loki.browser.labels",defaultValue:[],children:(a,n,c)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":this.props["data-testid"],children:[(0,p.jsxs)("button",{className:"gf-form-label query-keyword pointer",onClick:this.onClickChooserButton,disabled:u,children:[d,(0,p.jsx)(l.Icon,{name:r?"angle-down":"angle-right"})]}),(0,p.jsx)("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15",children:(0,p.jsx)(l.QueryField,{additionalPlugins:this.plugins,cleanText:o,query:t.expr,onTypeahead:this.onTypeahead,onWillApplySuggestion:S,onChange:this.onChangeQuery,onBlur:this.props.onBlur,onRunQuery:this.props.onRunQuery,placeholder:s,portalOrigin:"loki"})})]}),r&&(0,p.jsx)("div",{className:"gf-form",children:(0,p.jsx)(y,{languageProvider:i,onChange:this.onChangeLabelBrowser,lastUsedLabels:a||[],storeLastUsedLabels:n,deleteLastUsedLabels:c})}),e]})})}}},"./public/app/plugins/datasource/loki/types.ts":(e,t,a)=>{"use strict";let s,n;a.d(t,{o:()=>s,E:()=>n}),function(e){e.Stream="streams",e.Vector="vector",e.Matrix="matrix"}(s||(s={})),function(e){e.Range="range",e.Instant="instant"}(n||(n={}))},"./public/app/plugins/panel/alertlist/types.ts":(e,t,a)=>{"use strict";let s,n,r;a.d(t,{As:()=>s,kx:()=>n,LM:()=>r}),function(e){e[e.AlphaAsc=1]="AlphaAsc",e[e.AlphaDesc=2]="AlphaDesc",e[e.Importance=3]="Importance",e[e.TimeAsc=4]="TimeAsc",e[e.TimeDesc=5]="TimeDesc"}(s||(s={})),function(e){e.Current="current",e.RecentChanges="changes"}(n||(n={})),function(e){e.Default="default",e.Custom="custom"}(r||(r={}))},"./public/app/plugins/panel/barchart/distribute.ts":(e,t,a)=>{"use strict";function s(e,t){return Math.round(e*(t=10**t))/t}a.d(t,{Gj:()=>n,Qm:()=>i});const n=1,r=(e,t,a,n)=>s(t+e*(a+n),6);function i(e,t,a,i,o){let l=1-t,c=a===n?l/(e-1):2===a?l/e:3===a?l/(e+1):0;(isNaN(c)||c===1/0)&&(c=0);let d=a===n?0:2===a?c/2:3===a?c:0,u=t/e,p=s(u,6);if(null==i)for(let t=0;t<e;t++)o(t,r(t,d,u,c),p);else o(i,r(i,d,u,c),p)}},"./public/app/plugins/panel/barchart/quadtree.ts":(e,t,a)=>{"use strict";function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{P:()=>n,l:()=>r});function n(e,t,a,s,n,r){return e>=a&&e<=n&&t>=s&&t<=r}class r{constructor(e,t,a,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;s(this,"o",void 0),s(this,"q",void 0),this.x=e,this.y=t,this.w=a,this.h=n,this.l=r,this.o=[],this.q=null}split(){let e=this,t=e.x,a=e.y,s=e.w/2,n=e.h/2,i=e.l+1;e.q=[new r(t+s,a,s,n,i),new r(t,a,s,n,i),new r(t,a+n,s,n,i),new r(t+s,a+n,s,n,i)]}quads(e,t,a,s,n){let r=this,i=r.q,o=r.x+r.w/2,l=r.y+r.h/2,c=t<l,d=e<o,u=e+a>o,p=t+s>l;c&&u&&n(i[0]),d&&c&&n(i[1]),d&&p&&n(i[2]),u&&p&&n(i[3])}add(e){let t=this;if(null!=t.q)t.quads(e.x,e.y,e.w,e.h,(t=>{t.add(e)}));else{let a=t.o;if(a.push(e),a.length>10&&t.l<4){t.split();for(let e=0;e<a.length;e++){let s=a[e];t.quads(s.x,s.y,s.w,s.h,(e=>{e.add(s)}))}t.o.length=0}}}get(e,t,a,s,n){let r=this,i=r.o;for(let e=0;e<i.length;e++)n(i[e]);null!=r.q&&r.quads(e,t,a,s,(r=>{r.get(e,t,a,s,n)}))}clear(){this.o.length=0,this.q=null}}},"./public/app/plugins/panel/bargauge/BarGaugePanel.tsx":(e,t,a)=>{"use strict";a.d(t,{M:()=>d,l:()=>u});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("./packages/grafana-data/src/index.ts"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./public/app/core/config.ts"),o=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends s.PureComponent{constructor(){super(...arguments),c(this,"renderComponent",((e,t)=>{const{options:a,fieldConfig:s}=this.props,{value:n,alignmentFactors:c,orientation:d,width:p,height:h,count:m}=e,{field:g,display:f,view:b,colIndex:v}=n,{openMenu:x,targetClassName:y}=t;let w;return b&&(0,o.isNumber)(v)&&(w=b.getFieldDisplayProcessor(v)),(0,l.jsx)(r.BarGauge,{value:u(m,s.defaults,f),width:p,height:h,orientation:d,field:g,text:a.text,display:w,theme:i.vc.theme2,itemSpacing:this.getItemSpacing(),displayMode:a.displayMode,onClick:x,className:y,alignmentFactors:m>1?c:void 0,showUnfilled:a.showUnfilled})})),c(this,"renderValue",(e=>{const{value:t,orientation:a}=e,{hasLinks:s,getLinks:i}=t;return s&&i?(0,l.jsx)("div",{style:{width:"100%",display:a===n.VizOrientation.Vertical?"flex":"initial"},children:(0,l.jsx)(r.DataLinksContextMenu,{links:i,config:t.field,children:t=>this.renderComponent(e,t)})}):this.renderComponent(e,{})})),c(this,"getValues",(()=>{const{data:e,options:t,replaceVariables:a,fieldConfig:s,timeZone:r}=this.props;return(0,n.getFieldDisplayValues)({fieldConfig:s,reduceOptions:t.reduceOptions,replaceVariables:a,theme:i.vc.theme2,data:e.series,timeZone:r})}))}getItemSpacing(){return"lcd"===this.props.options.displayMode?2:10}render(){const{height:e,width:t,options:a,data:s,renderCounter:i}=this.props;return(0,l.jsx)(r.VizRepeater,{source:s,getAlignmentFactors:n.getDisplayValueAlignmentFactors,getValues:this.getValues,renderValue:this.renderValue,renderCounter:i,width:t,height:e,minVizHeight:10,itemSpacing:this.getItemSpacing(),orientation:a.orientation})}}function u(e,t,a){return 1!==e||t.displayName?a:Object.assign({},a,{title:void 0})}},"./public/app/plugins/panel/gauge/module.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{plugin:()=>h});var s=a("./packages/grafana-data/src/index.ts"),n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./public/app/core/config.ts"),o=a("./public/app/plugins/panel/bargauge/BarGaugePanel.tsx"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d extends n.PureComponent{constructor(){super(...arguments),c(this,"renderComponent",((e,t)=>{const{options:a,fieldConfig:s}=this.props,{width:n,height:c,count:d,value:u}=e,{field:p,display:h}=u,{openMenu:m,targetClassName:g}=t;return(0,l.jsx)(r.Gauge,{value:(0,o.l)(d,s.defaults,h),width:n,height:c,field:p,text:a.text,showThresholdLabels:a.showThresholdLabels,showThresholdMarkers:a.showThresholdMarkers,theme:i.vc.theme,onClick:m,className:g})})),c(this,"renderValue",(e=>{const{value:t}=e,{getLinks:a,hasLinks:s}=t;return s&&a?(0,l.jsx)(r.DataLinksContextMenu,{links:a,config:t.field,children:t=>this.renderComponent(e,t)}):this.renderComponent(e,{})})),c(this,"getValues",(()=>{const{data:e,options:t,replaceVariables:a,fieldConfig:n,timeZone:r}=this.props;return(0,s.getFieldDisplayValues)({fieldConfig:n,reduceOptions:t.reduceOptions,replaceVariables:a,theme:i.vc.theme2,data:e.series,timeZone:r})}))}render(){const{height:e,width:t,data:a,renderCounter:s,options:n}=this.props;return(0,l.jsx)(r.VizRepeater,{getValues:this.getValues,renderValue:this.renderValue,width:t,height:e,source:a,autoGrid:!0,renderCounter:s,orientation:n.orientation})}}var u=a("./public/app/plugins/panel/stat/types.ts");var p=a("./public/app/types/suggestions.ts");const h=new s.PanelPlugin(d).useFieldConfig().setPanelOptions((e=>{(0,u.j)(e),(0,u.h)(e),e.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:!1}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:!0}),r.commonOptionsBuilder.addTextSizeOptions(e)})).setPanelChangeHandler(((e,t,a)=>{const s=(0,r.sharedSingleStatPanelChangedHandler)(e,t,a);if("singlestat"===t&&a.angular){const e=a.angular.gauge;e&&(s.showThresholdMarkers=e.thresholdMarkers,s.showThresholdLabels=e.thresholdLabels)}return s})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData||!t.hasNumberField)return;if(t.numberFieldCount>=50)return;const a=e.getListAppender({name:p.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:s.ThresholdsMode.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.options.reduceOptions.values&&(e.options.reduceOptions.limit=2)}}});t.hasStringField&&1===t.frameCount&&t.rowCountTotal<10?(a.append({name:p.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),a.append({name:p.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(a.append({name:p.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),a.append({name:p.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}).setMigrationHandler((e=>(0,r.sharedSingleStatMigrationHandler)(e)))},"./public/app/plugins/panel/geomap/components/DataHoverView.tsx":(e,t,a)=>{"use strict";a.d(t,{H:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s=a("./packages/grafana-ui/src/index.ts"),n=a("./packages/grafana-data/src/index.ts"),r=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),i=a("./packages/grafana-schema/src/index.ts"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const l=e=>{let{data:t,rowIndex:a,columnIndex:r,sortOrder:l}=e;const d=(0,s.useStyles2)(c);if(!t||null==a)return null;const u=t.fields.filter((e=>{var t,a;return!Boolean(null===(t=e.config.custom)||void 0===t||null===(a=t.hideFrom)||void 0===a?void 0:a.tooltip)}));if(0===u.length)return null;const p=[],h=[],m=new Set;for(const e of u){const s=e.values.get(a),r=e.display?e.display(s):{text:`${s}`,numeric:+s};e.getLinks&&e.getLinks({calculatedValue:r,valueRowIndex:a}).forEach((e=>{const t=`${e.title}/${e.href}`;m.has(t)||(h.push(e),m.add(t))})),p.push([(0,n.getFieldDisplayName)(e,t),s,(0,n.formattedValueToString)(r)])}return l&&l!==i.As.None&&p.sort(((e,t)=>n.arrayUtils.sortValues(l)(e[1],t[1]))),(0,o.jsx)("table",{className:d.infoWrap,children:(0,o.jsxs)("tbody",{children:[p.map(((e,t)=>(0,o.jsxs)("tr",{className:t===r?d.highlight:"",children:[(0,o.jsxs)("th",{children:[e[0],":"]}),(0,o.jsx)("td",{children:e[2]})]},`${t}/${a}`))),h.length>0&&(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:2,children:(0,o.jsx)(s.VerticalGroup,{children:h.map(((e,t)=>(0,o.jsx)(s.LinkButton,{icon:"external-link-alt",target:e.target,href:e.href,onClick:e.onClick,fill:"text",style:{width:"100%"},children:e.title},t)))})})})]})})},c=e=>({infoWrap:r.css`
    padding: 8px;
    th {
      font-weight: ${e.typography.fontWeightMedium};
      padding: ${e.spacing(.25,2)};
    }
  `,highlight:r.css`
    background: ${e.colors.action.hover};
  `})},"./public/app/plugins/panel/nodeGraph/NodeGraph.tsx":(e,t,a)=>{"use strict";a.d(t,{E:()=>ne});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),n=a("../../opt/drone/yarncache/classnames-npm-2.3.1-f2ae0a8d3c-14db8889d5.zip/node_modules/classnames/index.js"),r=a.n(n),i=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useMeasure.js"),o=a("./packages/grafana-ui/src/index.ts"),l=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/useMountedState.js"),c=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/lib/usePrevious.js");function d(){let{scale:e=1,bounds:t,focus:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,l.default)(),r=(0,s.useRef)(!1),i=(0,s.useRef)(0),o=(0,s.useRef)(null),d={x:0,y:0},h=(0,s.useMemo)((()=>({right:t?-t.left:1/0,left:t?-t.right:-1/0,bottom:t?-t.top:-1/0,top:t?-t.bottom:1/0})),[t]),m=(0,s.useRef)(d),g=(0,s.useRef)(d),f=(0,s.useRef)(d),[b,v]=(0,s.useState)({isPanning:!1,position:d});(0,s.useEffect)((()=>{const t=()=>{r.current&&n()&&(r.current=!1,v((e=>Object.assign({},e,{isPanning:!1}))),l())},a=e=>{(e=>{!r.current&&n()&&(r.current=!0,m.current=p(e),g.current=Object.assign({},f.current),v((e=>Object.assign({},e,{isPanning:!0}))),s())})(e),c(e)},s=()=>{document.addEventListener("mousemove",c),document.addEventListener("mouseup",t),document.addEventListener("touchmove",c),document.addEventListener("touchend",t)},l=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",t)},c=t=>{cancelAnimationFrame(i.current);const a=p(t);i.current=requestAnimationFrame((()=>{if(n()&&o.current){let t=a.x-m.current.x,s=a.y-m.current.y;f.current={x:u(g.current.x+t/e,h.left,h.right),y:u(g.current.y+s/e,h.top,h.bottom)},v((e=>Object.assign({},e,{position:Object.assign({},f.current)})))}}))},d=o.current;return d&&(d.addEventListener("mousedown",a),d.addEventListener("touchstart",a)),()=>{d&&(d.removeEventListener("mousedown",a),d.removeEventListener("touchstart",a))}}),[e,h,n]);const x=(0,c.Z)(a);(0,s.useEffect)((()=>{if(a&&(null==x?void 0:x.x)!==a.x&&(null==x?void 0:x.y)!==a.y){const e={x:u(a.x,h.left,h.right),y:u(a.y,h.top,h.bottom)};v({position:e,isPanning:!1}),f.current=e,g.current=e}}),[a,x,h,f,g]);let y=b.position;return a&&(null==x?void 0:x.x)!==a.x&&(null==x?void 0:x.y)!==a.y&&(y=a),{state:Object.assign({},b,{position:{x:u(y.x,h.left,h.right),y:u(y.y,h.top,h.bottom)}}),ref:o}}function u(e,t,a){return Math.min(Math.max(e,null!=t?t:-1/0),null!=a?a:1/0)}function p(e){if(e.changedTouches){const t=e;return{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}}{const t=e;return{x:t.clientX,y:t.clientY}}}var h,m,g=a("./packages/grafana-data/src/index.ts"),f=a("./.yarn/__virtual__/@emotion-css-virtual-72c314ddb1/3/opt/drone/yarncache/@emotion-css-npm-11.7.1-25ff8755a7-ac1f56656f.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),b=a("../../opt/drone/yarncache/tinycolor2-npm-1.4.2-462ba30c26-57ed262e08.zip/node_modules/tinycolor2/tinycolor.js"),v=a.n(b),x=a("./public/app/plugins/panel/nodeGraph/utils.ts"),y=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const w=40,j=e=>({mainGroup:f.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:f.css`
    fill: ${e.components.panel.background};
  `,hoverCircle:f.css`
    opacity: 0.5;
    fill: transparent;
    stroke: ${e.colors.primary.text};
  `,text:f.css`
    fill: ${e.colors.text.primary};
  `,titleText:f.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${v()(e.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 100px;
  `,statsText:f.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:f.css`
    width: 200px;
    & span {
      background-color: ${v()(e.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `}),C=(0,s.memo)((function(e){const{node:t,onMouseEnter:a,onMouseLeave:s,onClick:n,hovering:i}=e,l=(0,o.useStyles2)(j);return void 0===t.x||void 0===t.y?null:(0,y.jsxs)("g",{"data-node-id":t.id,className:l.mainGroup,onMouseEnter:()=>{a(t.id)},onMouseLeave:()=>{s(t.id)},onClick:e=>{n(e,t)},"aria-label":`Node: ${t.title}`,children:[(0,y.jsx)("circle",{className:l.mainCircle,r:w,cx:t.x,cy:t.y}),i&&(0,y.jsx)("circle",{className:l.hoverCircle,r:37,cx:t.x,cy:t.y,strokeWidth:2}),(0,y.jsx)(k,{node:t}),(0,y.jsxs)("g",{className:l.text,children:[(0,y.jsx)("foreignObject",{x:t.x-(i?100:35),y:t.y-15,width:i?"200":"70",height:"40",children:(0,y.jsxs)("div",{className:r()(l.statsText,i&&l.textHovering),children:[(0,y.jsx)("span",{children:t.mainStat&&(0,x.Ew)(t.mainStat,t.dataFrameRowIndex)}),h||(h=(0,y.jsx)("br",{})),(0,y.jsx)("span",{children:t.secondaryStat&&(0,x.Ew)(t.secondaryStat,t.dataFrameRowIndex)})]})}),(0,y.jsx)("foreignObject",{x:t.x-(i?100:50),y:t.y+w+5,width:i?"200":"100",height:"40",children:(0,y.jsxs)("div",{className:r()(l.titleText,i&&l.textHovering),children:[(0,y.jsx)("span",{children:t.title}),m||(m=(0,y.jsx)("br",{})),(0,y.jsx)("span",{children:t.subTitle})]})})]})]})}));function k(e){const{node:t}=e,a=t.arcSections.find((e=>1===e.values.get(t.dataFrameRowIndex))),s=(0,o.useTheme2)();var n;if(a)return(0,y.jsx)("circle",{fill:"none",stroke:s.visualization.getColorByName((null===(n=a.config.color)||void 0===n?void 0:n.fixedColor)||""),strokeWidth:2,r:w,cx:t.x,cy:t.y});const r=t.arcSections.filter((e=>0!==e.values.get(t.dataFrameRowIndex)));if(0===r.length)return(0,y.jsx)("circle",{fill:"none",stroke:t.color?T(t.color,t.dataFrameRowIndex,s):"gray",strokeWidth:2,r:w,cx:t.x,cy:t.y});const{elements:i}=r.reduce(((e,a)=>{var n;const r=(null===(n=a.config.color)||void 0===n?void 0:n.fixedColor)||"",i=a.values.get(t.dataFrameRowIndex),o=(0,y.jsx)(S,{r:w,x:t.x,y:t.y,startPercent:e.percent,percent:i,color:s.visualization.getColorByName(r),strokeWidth:2},r);return e.elements.push(o),e.percent=e.percent+i,e}),{elements:[],percent:0});return(0,y.jsx)(y.Fragment,{children:i})}function S(e){let{r:t,x:a,y:s,startPercent:n,percent:r,color:i,strokeWidth:o=2}=e;const l=n+r,c=a+Math.sin(2*Math.PI*n)*t,d=s-Math.cos(2*Math.PI*n)*t,u=a+Math.sin(2*Math.PI*l)*t,p=s-Math.cos(2*Math.PI*l)*t,h=r>.5?"1":"0";return(0,y.jsx)("path",{fill:"none",d:`M ${c} ${d} A ${t} ${t} 0 ${h} 1 ${u} ${p}`,stroke:i,strokeWidth:o})}function T(e,t,a){return e.config.color?(0,g.getFieldColorModeForField)(e).getCalculator(e,a)(0,e.values.get(t)):e.values.get(t)}const O=(0,s.memo)((function(e){const{edge:t,onClick:a,onMouseEnter:s,onMouseLeave:n,hovering:r}=e,{source:i,target:o}=t,l=(0,x.dM)({x1:i.x,y1:i.y,x2:o.x,y2:o.y},90);return(0,y.jsxs)("g",{onClick:e=>a(e,t),style:{cursor:"pointer"},"aria-label":`Edge from: ${t.source.id} to: ${t.target.id}`,children:[(0,y.jsx)("line",{strokeWidth:r?2:1,stroke:"#999",x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,markerEnd:"url(#triangle)"}),(0,y.jsx)("line",{stroke:"transparent",x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,strokeWidth:20,onMouseEnter:()=>{s(t.id)},onMouseLeave:()=>{n(t.id)}})]})}));function _(){return{wrapper:f.css`
      label: wrapper;
      pointer-events: all;
    `}}function N(e){const{config:t,onConfigChange:a,onPlus:n,onMinus:r,disableZoomOut:i,disableZoomIn:l}=e,[c,d]=(0,s.useState)(!1),u=(0,o.useStyles)(_);return(0,y.jsxs)("div",{className:u.wrapper,children:[(0,y.jsxs)(o.VerticalGroup,{spacing:"sm",children:[(0,y.jsxs)(o.HorizontalGroup,{spacing:"xs",children:[(0,y.jsx)(o.Button,{icon:"plus-circle",onClick:n,size:"md",title:"Zoom in",variant:"secondary",disabled:l}),(0,y.jsx)(o.Button,{icon:"minus-circle",onClick:r,size:"md",title:"Zoom out",variant:"secondary",disabled:i})]}),(0,y.jsxs)(o.HorizontalGroup,{spacing:"xs",children:[(0,y.jsx)(o.Button,{icon:"code-branch",onClick:()=>a(Object.assign({},t,{gridLayout:!1})),size:"md",title:"Default layout",variant:"secondary",disabled:!t.gridLayout}),(0,y.jsx)(o.Button,{icon:"apps",onClick:()=>a(Object.assign({},t,{gridLayout:!0})),size:"md",title:"Grid layout",variant:"secondary",disabled:t.gridLayout})]})]}),false,false]})}const I={stepDown:e=>e/1.5,stepUp:e=>1.5*e,min:.13,max:2.25};var P=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js");function M(e,t,a,n,r){const[i,o]=(0,s.useMemo)((()=>{if(!e.length||!t.length)return[{},{}];return[t.reduce(((e,t)=>{var a,s;return e[t.source.id]=[...null!==(a=e[t.source.id])&&void 0!==a?a:[],t],e[t.target.id]=[...null!==(s=e[t.target.id])&&void 0!==s?s:[],t],e}),{}),e.reduce(((e,t)=>(e[t.id]=t,e)),{})]}),[t,e]);return(0,s.useMemo)((()=>e.length<=a?{nodes:e,edges:t}:n.gridLayout?function(e,t,a){let s=0,n=t,r=[];if(a){const i=e.findIndex((e=>e.id===a)),o=Math.floor(t/2);let l=o;s=i-o,s<0&&(l+=Math.abs(s),s=0),n=i+l+1,n>e.length&&(s>0&&(s=Math.max(0,s-(n-e.length))),n=e.length),s>1&&r.push({node:e[s-1],count:s}),e.length-n>1&&r.push({node:e[n],count:e.length-n})}else e.length-t>1&&(r=[{node:e[t],count:e.length-t}]);return{nodes:e.slice(s,n),edges:[],markers:r}}(e,a,r):function(e,t,a,s,n,r){let i;r?i=[a[r]]:(i=e.filter((e=>0===e.incoming)),i.length||(i=[e[0]]));const{visibleNodes:o,markers:l}=function(e,t,a,s){const n={};let r=[...t];for(;Object.keys(n).length<e&&r.length>0;){let e=r.shift();if(n[e.id])continue;n[e.id]=e;const t=(s[e.id]||[]).map((t=>{const s=t.source.id===e.id?t.target.id:t.source.id;return a[s]}));r=r.concat(t)}const i=(0,P.uniq)(r.filter((e=>!n[e.id])));return{visibleNodes:n,markers:i}}(n,i,a,s),c=function(e,t,a,s){return e.map((e=>{const n={};let r=0,i=[e];for(;i.length>0&&r<=101;){let e=i.shift();if(t[e.id]||n[e.id])continue;n[e.id]||r++,n[e.id]=e;const o=(s[e.id]||[]).map((t=>{const s=t.source.id===e.id?t.target.id:t.source.id;return a[s]}));i=i.concat(o)}return{node:e,count:r}}))}(l,o,a,s),d=(0,P.fromPairs)(c.map((e=>[e.node.id,e])));for(const e of c)1===e.count&&(delete d[e.node.id],o[e.node.id]=e.node);const u=t.filter((e=>(o[e.source.id]||d[e.source.id])&&(o[e.target.id]||d[e.target.id])));return{nodes:Object.values(o),edges:u,markers:Object.values(d)}}(e,t,o,i,a,r)),[t,i,a,e,o,r,n.gridLayout])}var F=a("./public/app/core/utils/CorsWorker.ts");var A=a("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useUnmount.js");const D={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function $(e,t,s){const n=new F.q(new URL(a.p+a.u(7190),a.b));return n.onmessage=t=>{for(let a=0;a<e.length;a++)t.data.nodes[a]=Object.assign({},e[a],t.data.nodes[a]);s(t.data)},n.postMessage({nodes:e.map((e=>({id:e.id,incoming:e.incoming}))),edges:t,config:D}),()=>{n.terminate()}}function L(e,t,a){const s=Math.min(Math.floor((t-120)/140),e.length),n=Math.floor(120*(s-1)/2);a&&e.sort(((e,t)=>{const s=a.field.values.get(e.dataFrameRowIndex),n=a.field.values.get(t.dataFrameRowIndex);return a.ascending?s-n:n-s}));for(const[t,a]of e.entries()){const e=Math.floor(t/s),r=t%s;a.x=120*r-n,a.y=140*e-60}}var R;function E(){return R||(R=(0,y.jsx)("defs",{children:(0,y.jsx)("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",orient:"auto",children:(0,y.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})})}))}var z=a("./public/app/plugins/panel/nodeGraph/useCategorizeFrames.ts");const V=e=>({mainGroup:f.css`
      pointer-events: none;
      font-size: 8px;
    `,background:f.css`
      fill: ${e.components.tooltip.background};
    `,text:f.css`
      fill: ${e.components.tooltip.text};
    `}),B=(0,s.memo)((function(e){const{edge:t}=e,{source:a,target:s}=t,n=(0,x.dM)({x1:a.x,y1:a.y,x2:s.x,y2:s.y},90),r={x:n.x1+(n.x2-n.x1)/2,y:n.y1+(n.y2-n.y1)/2},i=(0,o.useStyles2)(V);return(0,y.jsxs)("g",{className:i.mainGroup,children:[(0,y.jsx)("rect",{className:i.background,x:r.x-40,y:r.y-15,width:"80",height:"30",rx:"5"}),(0,y.jsx)("text",{className:i.text,x:r.x,y:r.y-5,textAnchor:"middle",children:t.mainStat}),(0,y.jsx)("text",{className:i.text,x:r.x,y:r.y+10,textAnchor:"middle",children:t.secondaryStat})]})}));function U(e,t,a){if(!(e.length||null!=a&&a.length))return;const s=function(e){const t="Open in Explore",a=e.reduce(((e,a)=>{let s,n;return-1!==a.title.indexOf("/")?(s=a.title.split("/")[0],n=a.title.split("/")[1],e[s]=e[s]||[],e[s].push({l:a,newTitle:n})):(e[t]=e[t]||[],e[t].push({l:a})),e}),{});return Object.keys(a).map((e=>({label:e,ariaLabel:e,items:a[e].map((e=>({label:e.newTitle||e.l.title,ariaLabel:e.newTitle||e.l.title,url:e.l.href,onClick:e.l.onClick})))})))}(e);return()=>{let e=null==s?void 0:s.map(((e,a)=>(0,y.jsx)(o.MenuGroup,{label:e.label,children:(e.items||[]).map(H(t))},`${e.label}${a}`)));return a&&(e=[...a.map(H(t)),...e]),e}}function H(e){return function(t){return(0,y.jsx)(o.MenuItem,{url:t.url,label:t.label,ariaLabel:t.ariaLabel,onClick:t.onClick?()=>{var a;return null===(a=t.onClick)||void 0===a?void 0:a.call(t,e)}:void 0,target:"_self"},t.label)}}function q(e){const t=e.node.dataFrameRowIndex,a=(0,x.F)(e.nodes);return(0,y.jsxs)("div",{children:[a.title&&(0,y.jsx)(Z,{field:a.title,index:t}),a.subTitle&&(0,y.jsx)(Z,{field:a.subTitle,index:t}),a.details.map((e=>(0,y.jsx)(Z,{field:e,index:t},e.name)))]})}function W(e){const t=e.edge.dataFrameRowIndex,a=(0,x.lr)(e.edges);return(0,y.jsx)("div",{children:a.details.map((e=>(0,y.jsx)(Z,{field:e,index:t},e.name)))})}const G=(0,o.stylesFactory)((e=>({label:f.css`
      label: Label;
      line-height: 1.25;
      margin: ${e.spacing.formLabelMargin};
      padding: ${e.spacing.formLabelPadding};
      color: ${e.colors.textFaint};
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.weight.semibold};
    `,value:f.css`
      label: Value;
      font-size: ${e.typography.size.sm};
      font-weight: ${e.typography.weight.semibold};
      color: ${e.colors.formLabel};
      margin-top: ${e.spacing.xxs};
      display: block;
    `})));function Z(e){const{field:t,index:a}=e,s=t.values.get(a)||"",n=G((0,o.useTheme)());return(0,y.jsxs)("div",{className:n.label,children:[(0,y.jsx)("div",{children:t.config.displayName||t.name}),(0,y.jsx)("span",{className:n.value,children:s})]})}const Q=(0,o.stylesFactory)((e=>({mainGroup:f.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:f.css`
    fill: ${e.colors.panelBg};
    stroke: ${e.colors.border3};
  `,text:f.css`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}))),K=(0,s.memo)((function(e){const{marker:t,onClick:a}=e,{node:s}=t,n=Q((0,o.useTheme)());return void 0===s.x||void 0===s.y?null:(0,y.jsxs)("g",{"data-node-id":s.id,className:n.mainGroup,onClick:e=>{null==a||a(e,t)},"aria-label":`Hidden nodes marker: ${s.id}`,children:[(0,y.jsx)("circle",{className:n.mainCircle,r:40,cx:s.x,cy:s.y}),(0,y.jsx)("g",{children:(0,y.jsx)("foreignObject",{x:s.x-25,y:s.y-25,width:"50",height:"50",children:(0,y.jsx)("div",{className:n.text,children:(0,y.jsxs)("span",{children:[t.count>100?">100":t.count," nodes"]})})})})]})}));var Y=a("./packages/grafana-schema/src/index.ts");function J(){return{item:f.css`
      label: LegendItem;
      flex-grow: 0;
    `,legend:f.css`
      label: Legend;
      pointer-events: all;
    `}}const X=function(e){const{nodes:t,onSort:a,sort:n,sortable:r}=e,i=(0,o.useTheme)(),l=(0,o.useStyles)(J),c=function(e,t){if(!e.length)return[];const a=[e[0].mainStat,e[0].secondaryStat].filter(P.identity),s=e.find((e=>e.arcSections.length>0));var n,r;s&&(null===(n=s.arcSections[0].config)||void 0===n||null===(r=n.color)||void 0===r?void 0:r.mode)===g.FieldColorModeId.Fixed&&a.push(...new Set(e.map((e=>e.arcSections)).flat()));e[0].color&&a.push(e[0].color);return a.map((e=>{var a,s,n;const r={label:e.config.displayName||e.name,yAxis:0,data:{field:e}};var i;if((null===(a=e.config.color)||void 0===a?void 0:a.mode)===g.FieldColorModeId.Fixed&&null!==(s=e.config.color)&&void 0!==s&&s.fixedColor)r.color=(0,g.getColorForTheme)((null===(i=e.config.color)||void 0===i?void 0:i.fixedColor)||"",t);else if(null!==(n=e.config.color)&&void 0!==n&&n.mode){var o;r.gradient=null===(o=e.config.color)||void 0===o?void 0:o.mode}return r.color||r.gradient||(r.color=(0,g.getColorForTheme)("",t)),r}))}(t,i),d=(0,s.useCallback)((e=>{a({field:e.data.field,ascending:e.data.field===(null==n?void 0:n.field)&&!(null!=n&&n.ascending)})}),[n,a]);return(0,y.jsx)(o.VizLegend,{className:l.legend,displayMode:Y.jK.List,placement:"bottom",items:c,itemRenderer:e=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(o.VizLegendListItem,{item:e,className:l.item,onLabelClick:r?d:void 0}),r&&((null==n?void 0:n.field)===e.data.field?(0,y.jsx)(o.Icon,{name:n.ascending?"arrow-up":"arrow-down"}):"")]})})};var ee,te,ae;const se=e=>({wrapper:f.css`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:f.css`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:f.css`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:f.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${e.typography.h4.fontSize};
    color: ${e.colors.text.secondary};
  `,mainGroup:f.css`
    label: mainGroup;
    will-change: transform;
  `,viewControls:f.css`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:f.css`
    label: legend;
    background: ${e.colors.background.secondary};
    box-shadow: ${e.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:f.css`
    margin-left: auto;
  `,alert:f.css`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${e.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${e.colors.warning.main};
    color: ${e.colors.warning.contrastText};
  `,loadingWrapper:f.css`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `});function ne(e){let{getLinks:t,dataFrames:a,nodeLimit:n}=e;const u=n||200,{edges:p,nodes:h}=(0,z.Y)(a),[m,{width:g,height:f}]=(0,i.Z)(),[b,v]=(0,s.useState)(D),{nodeHover:w,setNodeHover:j,clearNodeHover:C,edgeHover:k,setEdgeHover:S,clearEdgeHover:T}=function(){const[e,t]=(0,s.useState)(void 0),a=(0,s.useCallback)((()=>t(void 0)),[t]),[n,r]=(0,s.useState)(void 0),i=(0,s.useCallback)((()=>r(void 0)),[r]);return{nodeHover:e,setNodeHover:t,clearNodeHover:a,edgeHover:n,setEdgeHover:r,clearEdgeHover:i}}(),O=h[0],_=p[0],P=(0,o.useTheme2)(),F=(0,s.useMemo)((()=>(0,x.HB)(O,_,P)),[_,O,P]),[R,V]=(0,s.useState)(),B=(0,s.useCallback)(((e,t)=>V(t.node.id)),[V]),{nodes:H,edges:G,markers:Z,bounds:Q,hiddenNodesCount:K,loading:Y}=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;const[o,c]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[p,h]=(0,s.useState)(!1),m=(0,l.default)(),g=(0,s.useRef)();(0,A.Z)((()=>{g.current&&g.current()})),(0,s.useEffect)((()=>{if(0===e.length)return c([]),u([]),void h(!1);h(!0);const a=$(e,t,(e=>{let{nodes:t,edges:a}=e;m()&&(c(t),u(a),h(!1))}));return g.current=a,a}),[e,t,m]);const[f,b]=(0,s.useMemo)((()=>{if(0===e.length)return[[],[]];const s=e.map((e=>Object.assign({},e))),n=t.map((e=>Object.assign({},e)));return L(s,r,a.sort),[s,n]}),[a.sort,e,t,r]),{nodes:v,edges:y,markers:w}=M(a.gridLayout?f:o,a.gridLayout?b:d,n,a,i),j=(0,s.useMemo)((()=>(0,x.Tz)([...v,...(w||[]).map((e=>e.node))])),[v,w]);return{nodes:v,edges:y,markers:w,bounds:j,hiddenNodesCount:e.length-v.length,loading:p}}(F.nodes,F.edges,b,u,g,R),J=function(e,t,a){let s;if(!0===(0,c.Z)(e.gridLayout)&&!e.gridLayout&&a){const e=t.find((e=>e.id===a));e&&(s={x:-e.x,y:-e.y})}return s}(b,H,R),{panRef:ne,zoomRef:ce,onStepUp:de,onStepDown:ue,isPanning:pe,position:he,scale:me,isMaxZoom:ge,isMinZoom:fe}=function(e,t){const{scale:a,onStepDown:n,onStepUp:r,ref:i,isMax:o,isMin:l}=function(){let{stepUp:e,stepDown:t,min:a,max:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;const r=(0,s.useRef)(null),[i,o]=(0,s.useState)(1),l=(0,s.useCallback)((()=>{i<(null!=n?n:1/0)&&o(e(i))}),[i,e,n]),c=(0,s.useCallback)((()=>{i>(null!=a?a:-1/0)&&o(t(i))}),[i,t,a]),d=(0,s.useCallback)((function(e){const t=e;if(t.ctrlKey||t.metaKey)if(e.preventDefault(),o(Math.min(Math.max(null!=a?a:-1/0,i+-.01*Math.min(t.deltaY,2)),null!=n?n:1/0)),t.deltaY<0){const e=i+-.015*Math.max(t.deltaY,-4);o(Math.max(null!=a?a:-1/0,e))}else if(t.deltaY>0){const e=i+-.015*Math.min(t.deltaY,4);o(Math.min(null!=n?n:1/0,e))}}),[a,n,i]);return(0,s.useEffect)((()=>{if(!r.current)return;const e=r.current;return e.addEventListener("wheel",d,{passive:!1}),()=>{e&&e.removeEventListener("wheel",d)}}),[d]),{onStepUp:l,onStepDown:c,scale:Math.max(Math.min(i,null!=n?n:1/0),null!=a?a:-1/0),isMax:i>=(null!=n?n:1/0),isMin:i<=(null!=a?a:-1/0),ref:r}}(),{state:c,ref:u}=d({scale:a,bounds:e,focus:t}),{position:p,isPanning:h}=c;return{zoomRef:i,panRef:u,position:p,isPanning:h,scale:a,onStepDown:n,onStepUp:r,isMaxZoom:o,isMinZoom:l}}(Q,J),{onEdgeOpen:be,onNodeOpen:ve,MenuComponent:xe}=function(e,t,a,n,r,i){const[l,c]=(0,s.useState)(void 0),d=(0,s.useCallback)(((a,s)=>{var l;const d=n.gridLayout?[{label:"Show in Graph layout",onClick:e=>{i(e.id),r(Object.assign({},n,{gridLayout:!1}))}}]:void 0,u=U(e(t,s.dataFrameRowIndex),s,d);u&&c((0,y.jsx)(o.ContextMenu,{renderHeader:()=>l||(l=(0,y.jsx)(q,{node:s,nodes:t})),renderMenuItems:u,onClose:()=>c(void 0),x:a.pageX,y:a.pageY}))}),[n,t,e,c,r,i]);return{onEdgeOpen:(0,s.useCallback)(((t,s)=>{var n;const r=U(e(a,s.dataFrameRowIndex),s);r&&c((0,y.jsx)(o.ContextMenu,{renderHeader:()=>n||(n=(0,y.jsx)(W,{edge:s,edges:a})),renderMenuItems:r,onClose:()=>c(void 0),x:t.pageX,y:t.pageY}))}),[a,e,c]),onNodeOpen:d,MenuComponent:l}}(t,O,_,b,v,V),ye=(0,o.useStyles2)(se),we=(0,s.useCallback)((e=>{m(e),ce.current=e}),[m,ce]),je=function(e){const[t,a]=(0,s.useState)(),n=(0,l.default)();return(0,s.useEffect)((()=>{e&&(a(e),setTimeout((()=>{n()&&a(void 0)}),500))}),[e,n]),t}(R);return(0,y.jsxs)("div",{ref:we,className:ye.wrapper,children:[Y?(0,y.jsxs)("div",{className:ye.loadingWrapper,children:["Computing layout ",ee||(ee=(0,y.jsx)(o.Spinner,{}))]}):null,a.length&&F.nodes.length?(0,y.jsx)("svg",{ref:ne,viewBox:`${-g/2} ${-f/2} ${g} ${f}`,className:r()(ye.svg,pe&&ye.svgPanning),children:(0,y.jsxs)("g",{className:ye.mainGroup,style:{transform:`scale(${me}) translate(${Math.floor(he.x)}px, ${Math.floor(he.y)}px)`},children:[te||(te=(0,y.jsx)(E,{})),!b.gridLayout&&(0,y.jsx)(oe,{edges:G,nodeHoveringId:w,edgeHoveringId:k,onClick:be,onMouseEnter:S,onMouseLeave:T}),(0,y.jsx)(re,{nodes:H,onMouseEnter:j,onMouseLeave:C,onClick:ve,hoveringId:w||je}),(0,y.jsx)(ie,{markers:Z||[],onClick:B}),!b.gridLayout&&(0,y.jsx)(le,{edges:G,nodeHoveringId:w,edgeHoveringId:k})]})}):(0,y.jsx)("div",{className:ye.noDataMsg,children:"No data"}),(0,y.jsxs)("div",{className:ye.viewControls,children:[H.length?(0,y.jsx)("div",{className:ye.legend,children:(0,y.jsx)(X,{sortable:b.gridLayout,nodes:H,sort:b.sort,onSort:e=>{v(Object.assign({},b,{sort:e}))}})}):null,(0,y.jsx)("div",{className:ye.viewControlsWrapper,children:(0,y.jsx)(N,{config:b,onConfigChange:e=>{e.gridLayout!==b.gridLayout&&V(void 0),v(e)},onMinus:ue,onPlus:de,scale:me,disableZoomIn:ge,disableZoomOut:fe})})]}),K>0&&(0,y.jsxs)("div",{className:ye.alert,"aria-label":"Nodes hidden warning",children:[ae||(ae=(0,y.jsx)(o.Icon,{size:"sm",name:"info-circle"}))," ",K," nodes are hidden for performance reasons."]}),xe]})}const re=(0,s.memo)((function(e){return(0,y.jsx)(y.Fragment,{children:e.nodes.map((t=>(0,y.jsx)(C,{node:t,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,hovering:e.hoveringId===t.id},t.id)))})})),ie=(0,s.memo)((function(e){return(0,y.jsx)(y.Fragment,{children:e.markers.map((t=>(0,y.jsx)(K,{marker:t,onClick:e.onClick},"marker-"+t.node.id)))})})),oe=(0,s.memo)((function(e){return(0,y.jsx)(y.Fragment,{children:e.edges.map((t=>(0,y.jsx)(O,{edge:t,hovering:t.source.id===e.nodeHoveringId||t.target.id===e.nodeHoveringId||e.edgeHoveringId===t.id,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},t.id)))})})),le=(0,s.memo)((function(e){return(0,y.jsx)(y.Fragment,{children:e.edges.map(((t,a)=>{const s=t.source.id===e.nodeHoveringId||t.target.id===e.nodeHoveringId||e.edgeHoveringId===t.id,n=t.mainStat||t.secondaryStat;return s&&n&&(0,y.jsx)(B,{edge:t},t.id)}))})}))},"./public/app/plugins/panel/nodeGraph/useCategorizeFrames.ts":(e,t,a)=>{"use strict";a.d(t,{Y:()=>n});var s=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");function n(e){return(0,s.useMemo)((()=>e.reduce(((e,t)=>(t.fields.filter((e=>"source"===e.name)).length?e.edges.push(t):e.nodes.push(t),e)),{edges:[],nodes:[]})),[e])}},"./public/app/plugins/panel/nodeGraph/utils.ts":(e,t,a)=>{"use strict";a.d(t,{dM:()=>n,F:()=>r,lr:()=>i,HB:()=>l,Ew:()=>c,Tz:()=>d,Ee:()=>u});var s=a("./packages/grafana-data/src/index.ts");function n(e,t){const a=e.x2-e.x1,s=e.y2-e.y1,n=Math.sqrt(a*a+s*s),r=Math.max((n-t)/n,0),i=a*r,o=s*r,l=a-i,c=s-o,d=e.x1+l/2,u=e.y1+c/2;return{x1:d,y1:u,x2:d+i,y2:u+o}}function r(e){const t=new s.FieldCache(e);return{id:t.getFieldByName(s.NodeGraphDataFrameFieldNames.id),title:t.getFieldByName(s.NodeGraphDataFrameFieldNames.title),subTitle:t.getFieldByName(s.NodeGraphDataFrameFieldNames.subTitle),mainStat:t.getFieldByName(s.NodeGraphDataFrameFieldNames.mainStat),secondaryStat:t.getFieldByName(s.NodeGraphDataFrameFieldNames.secondaryStat),arc:o(e,s.NodeGraphDataFrameFieldNames.arc),details:o(e,s.NodeGraphDataFrameFieldNames.detail),color:t.getFieldByName(s.NodeGraphDataFrameFieldNames.color)}}function i(e){const t=new s.FieldCache(e);return{id:t.getFieldByName(s.NodeGraphDataFrameFieldNames.id),source:t.getFieldByName(s.NodeGraphDataFrameFieldNames.source),target:t.getFieldByName(s.NodeGraphDataFrameFieldNames.target),mainStat:t.getFieldByName(s.NodeGraphDataFrameFieldNames.mainStat),secondaryStat:t.getFieldByName(s.NodeGraphDataFrameFieldNames.secondaryStat),details:o(e,s.NodeGraphDataFrameFieldNames.detail)}}function o(e,t){return e.fields.filter((e=>e.name.match(new RegExp("^"+t))))}function l(e,t,a){if(!e)return{nodes:[],edges:[]};const s=r(e);if(!s.id)throw new Error("id field is required for nodes data frame.");const n=s.id.values.toArray().reduce(((e,t,a)=>{var n;return e[t]={id:t,title:(null===(n=s.title)||void 0===n?void 0:n.values.get(a))||"",subTitle:s.subTitle?s.subTitle.values.get(a):"",dataFrameRowIndex:a,incoming:0,mainStat:s.mainStat,secondaryStat:s.secondaryStat,arcSections:s.arc,color:s.color},e}),{})||{};let o=[];if(t){const e=i(t);if(!e.id)throw new Error("id field is required for edges data frame.");o=e.id.values.toArray().map(((t,a)=>{var s,r;const i=null===(s=e.target)||void 0===s?void 0:s.values.get(a),o=null===(r=e.source)||void 0===r?void 0:r.values.get(a);return n[i].incoming++,{id:t,dataFrameRowIndex:a,source:o,target:i,mainStat:e.mainStat?c(e.mainStat,a):"",secondaryStat:e.secondaryStat?c(e.secondaryStat,a):""}}))}return{nodes:Object.values(n),edges:o||[],legend:s.arc.map((e=>{var t,a;return{color:null!==(t=null===(a=e.config.color)||void 0===a?void 0:a.fixedColor)&&void 0!==t?t:"",name:e.config.displayName||e.name}}))}}function c(e,t){if(e.type===s.FieldType.string)return e.values.get(t);{const a=e.config.decimals||2,s=e.values.get(t);return Number.isFinite(s)?e.values.get(t).toFixed(a)+(e.config.unit?" "+e.config.unit:""):""}}function d(e){if(0===e.length)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const t=e.reduce(((e,t)=>(t.x>e.right&&(e.right=t.x),t.x<e.left&&(e.left=t.x),t.y>e.bottom&&(e.bottom=t.y),t.y<e.top&&(e.top=t.y),e)),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),a=t.top+(t.bottom-t.top)/2,s=t.left+(t.right-t.left)/2;return Object.assign({},t,{center:{x:s,y:a}})}function u(e){return e.filter((e=>{var t;return"nodeGraph"===(null===(t=e.meta)||void 0===t?void 0:t.preferredVisualisationType)||("nodes"===e.name||"edges"===e.name)}))}},"./public/app/plugins/panel/stat/module.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{plugin:()=>g});var s=a("./packages/grafana-ui/src/index.ts"),n=a("./packages/grafana-data/src/index.ts"),r=a("./public/app/plugins/panel/stat/types.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),o=a("./public/app/core/config.ts"),l=a("./packages/grafana-data/src/field/fieldOverrides.ts"),c=a("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),d=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class p extends i.PureComponent{constructor(){super(...arguments),u(this,"renderComponent",((e,t)=>{const{timeRange:a,options:n}=this.props,{value:r,alignmentFactors:i,width:l,height:c,count:u}=e,{openMenu:p,targetClassName:h}=t;let m=r.sparkline;return m&&(m.timeRange=a),(0,d.jsx)(s.BigValue,{value:r.display,count:u,sparkline:m,colorMode:n.colorMode,graphMode:n.graphMode,justifyMode:n.justifyMode,textMode:this.getTextMode(),alignmentFactors:i,text:n.text,width:l,height:c,theme:o.vc.theme2,onClick:p,className:h})})),u(this,"renderValue",(e=>{const{value:t}=e,{getLinks:a,hasLinks:n}=t;return n&&a?(0,d.jsx)(s.DataLinksContextMenu,{links:a,config:t.field,children:t=>this.renderComponent(e,t)}):this.renderComponent(e,{})})),u(this,"getValues",(()=>{const{data:e,options:t,replaceVariables:a,fieldConfig:r,timeZone:i}=this.props;let d;for(let t of e.series)for(let a of t.fields){let{config:t}=a;if(a.type===n.FieldType.number){var u,p,h,m;if(null!==(u=a.state)&&void 0!==u&&u.range)continue;d||(0,c.isNumber)(t.min)&&(0,c.isNumber)(t.max)||(d=(0,l.Xu)(e.series));const s=null!==(p=t.min)&&void 0!==p?p:d.min,n=null!==(h=t.max)&&void 0!==h?h:d.max;a.state=null!==(m=a.state)&&void 0!==m?m:{},a.state.range={min:s,max:n,delta:n-s}}}return(0,n.getFieldDisplayValues)({fieldConfig:r,reduceOptions:t.reduceOptions,replaceVariables:a,theme:o.vc.theme2,data:e.series,sparkline:t.graphMode!==s.BigValueGraphMode.None,timeZone:i})}))}getTextMode(){const{options:e,fieldConfig:t,title:a}=this.props;return e.textMode!==s.BigValueTextMode.Auto||!t.defaults.displayName&&a?e.textMode:s.BigValueTextMode.ValueAndName}render(){const{height:e,options:t,width:a,data:r,renderCounter:i}=this.props;return(0,d.jsx)(s.VizRepeater,{getValues:this.getValues,getAlignmentFactors:n.getDisplayValueAlignmentFactors,renderValue:this.renderValue,width:a,height:e,source:r,itemSpacing:3,renderCounter:i,autoGrid:!0,orientation:t.orientation})}}var h=a("./packages/grafana-ui/src/components/BigValue/BigValue.tsx");var m=a("./public/app/types/suggestions.ts");const g=new n.PanelPlugin(p).useFieldConfig().setPanelOptions((e=>{const t=["Stat styles"];(0,r.j)(e),(0,r.h)(e,t),s.commonOptionsBuilder.addTextSizeOptions(e),e.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:t,settings:{options:[{value:s.BigValueTextMode.Auto,label:"Auto"},{value:s.BigValueTextMode.Value,label:"Value"},{value:s.BigValueTextMode.ValueAndName,label:"Value and name"},{value:s.BigValueTextMode.Name,label:"Name"},{value:s.BigValueTextMode.None,label:"None"}]},defaultValue:"auto"}),e.addRadio({path:"colorMode",name:"Color mode",defaultValue:s.BigValueColorMode.Value,category:t,settings:{options:[{value:s.BigValueColorMode.None,label:"None"},{value:s.BigValueColorMode.Value,label:"Value"},{value:s.BigValueColorMode.Background,label:"Background"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:t,defaultValue:"area",settings:{options:[{value:"none",label:"None"},{value:"area",label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:"auto",category:t,settings:{options:[{value:"auto",label:"Auto"},{value:"center",label:"Center"}]}})})).setNoPadding().setPanelChangeHandler(((e,t,a)=>{const r=(0,s.sharedSingleStatPanelChangedHandler)(e,t,a);if(a.angular&&("singlestat"===t||"grafana-singlestat-panel"===t)){const t=a.angular;if(r.graphMode=s.BigValueGraphMode.None,t.sparkline&&t.sparkline.show&&(r.graphMode=s.BigValueGraphMode.Area),t.colorBackground)r.colorMode=s.BigValueColorMode.Background;else if(t.colorValue)r.colorMode=s.BigValueColorMode.Value;else{var i;if(r.colorMode=s.BigValueColorMode.None,null!==(i=t.sparkline)&&void 0!==i&&i.lineColor&&r.graphMode===s.BigValueGraphMode.Area){var o;const a=null!==(o=e.fieldConfig)&&void 0!==o?o:{};a.defaults.color={mode:n.FieldColorModeId.Fixed,fixedColor:t.sparkline.lineColor},e.fieldConfig=a}}"name"===t.valueName&&(r.textMode=h.jG.Name)}return r})).setSuggestionsSupplier(new class{getSuggestionsForData(e){const{dataSummary:t}=e;if(!t.hasData)return;const a=e.getListAppender({name:m.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:e=>{e.options.reduceOptions.values&&(e.options.reduceOptions.limit=1)}}});t.hasStringField&&t.hasNumberField&&1===t.frameCount&&t.rowCountTotal<10&&(a.append({name:m.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),a.append({name:m.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:s.BigValueColorMode.Background}})),1===t.stringFieldCount&&1===t.frameCount&&t.rowCountTotal<10&&1===t.fieldCount&&a.append({name:m.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:s.BigValueColorMode.None}}),t.hasNumberField&&t.hasTimeField&&(a.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),a.append({name:m.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:s.BigValueGraphMode.None,colorMode:s.BigValueColorMode.Background}}))}}).setMigrationHandler(s.sharedSingleStatMigrationHandler)},"./public/app/plugins/panel/stat/types.ts":(e,t,a)=>{"use strict";a.d(t,{j:()=>n,h:()=>r});var s=a("./packages/grafana-data/src/index.ts");function n(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=["Value options"];e.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:a,defaultValue:!1}),e.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:a,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:e=>!0===e.reduceOptions.values}),e.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:a,editor:s.standardEditorsRegistry.get("stats-picker").editor,defaultValue:[s.ReducerID.lastNotNull],showIf:e=>!1===e.reduceOptions.values}),t&&e.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:a,settings:{allowCustomValue:!0,options:[],getOptions:async e=>{const t=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(e&&e.data)for(const a of e.data)for(const n of a.fields){const r=(0,s.getFieldDisplayName)(n,a,e.data),i=`/^${(0,s.escapeStringForRegex)(r)}$/`;t.push({value:i,label:r})}return Promise.resolve(t)}},defaultValue:""})}function r(e,t){e.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:t,settings:{options:[{value:s.VizOrientation.Auto,label:"Auto"},{value:s.VizOrientation.Horizontal,label:"Horizontal"},{value:s.VizOrientation.Vertical,label:"Vertical"}]},defaultValue:s.VizOrientation.Auto})}},"./public/app/plugins/panel/state-timeline/types.ts":(e,t,a)=>{"use strict";a.d(t,{mP:()=>s,Uv:()=>n,KN:()=>r});const s={showValue:a("./packages/grafana-schema/src/index.ts").Jp.Auto,alignValue:"left",mergeValues:!0,rowHeight:.9},n={lineWidth:0,fillOpacity:70};let r;!function(e){e.Changes="changes",e.Samples="samples"}(r||(r={}))},"./public/app/plugins/panel/state-timeline/utils.ts":(e,t,a)=>{"use strict";a.d(t,{iK:()=>_,Y:()=>N,$m:()=>O,Ur:()=>S,Nj:()=>w,AR:()=>k,SA:()=>T});var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-ui/src/index.ts"),r=a("../../opt/drone/yarncache/uplot-npm-1.6.19-4a770d685e-181cb158e9.zip/node_modules/uplot/dist/uPlot.esm.js"),i=a("./packages/grafana-ui/src/components/GraphNG/GraphNG.tsx"),o=a("./public/app/plugins/panel/barchart/quadtree.ts"),l=a("./public/app/plugins/panel/barchart/distribute.ts"),c=a("./public/app/plugins/panel/state-timeline/types.ts"),d=a("./packages/grafana-schema/src/index.ts"),u=a("./packages/grafana-data/src/themes/colorManipulator.ts");const{round:p,min:h,ceil:m}=Math,g=devicePixelRatio,f=l.Gj;function b(e,t,a,s,n){(0,l.Qm)(a,e,f,t,((e,t,a)=>{n(e,s*t,s*a)}))}function v(e){var t;const{mode:a,numSeries:s,isDiscrete:n,rowHeight:l=0,colWidth:f=0,showValue:v,mergeValues:x=!1,theme:y,label:w,formatValue:j,alignValue:C="left",getTimeRange:k,getValueColor:S,getFieldConfig:T,onHover:O,onLeave:_}=e;let N;const I=Array(s).fill(null).map((()=>{let e=document.createElement("div");return e.classList.add("bar-mark"),e.style.position="absolute",e.style.background="rgba(255,255,255,0.2)",e}));let P;const M=`500 ${Math.round(12*devicePixelRatio)}px ${y.typography.fontFamily}`,F=Array(s).fill(null),A=[f,1/0],D=1-A[0],$=(null!==(t=A[1])&&void 0!==t?t:1/0)*g,L=new Map,R=new Map;function E(e,t,a,s,n,r,i,o,l,c,d,h,m){if(i<1)return;const g=S(c+1,h),f=function(e,t){var a;if("#"===t[0]&&9===t.length)return t;const s=(null!==(a=e.fillOpacity)&&void 0!==a?a:100)/100;return(0,u.alpha)(t,s)}(T(c),g);if(P[c][d]={x:p(n-a),y:p(r-s),w:i,h:o,sidx:c+1,didx:d,fillColor:f},m){let e=f,a=L.get(e);if(null==a&&L.set(e,a=new Path2D),t(a,n,r,i,o),l){let e=g,a=R.get(e);null==a&&R.set(e,a=new Path2D),t(a,n+l/2,r+l/2,i-l,o-l)}}else e.beginPath(),t(e,n,r,i,o),e.fillStyle=f,e.fill(),l&&(e.beginPath(),t(e,n+l/2,r+l/2,i-l,o-l),e.strokeStyle=g,e.lineWidth=l,e.stroke())}const z=null!=j&&v!==d.Jp.Never&&((e,t,s,n)=>(e.ctx.save(),e.ctx.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),e.ctx.clip(),e.ctx.font=M,e.ctx.textAlign=a===c.KN.Changes?C:"center",e.ctx.textBaseline="middle",r.Z.orient(e,t,((s,n,r,i,o,l,u,h,m,f,b)=>{let x=p((s.width||0)*g),w=p(m+q[t-1]);for(let s=0;s<r.length;s++)if(null!=r[s]){const n=P[t-1][s];if(!n||v===d.Jp.Auto&&n.w<25)continue;if(n.x>=f)continue;let i=p(n.x+h+n.w/2);const o=j(t,r[s]);a===c.KN.Changes&&("left"===C?i=p(n.x+h+x+2):"right"===C&&(i=p(n.x+h+n.w-x-2))),e.ctx.fillStyle=y.colors.getContrastText(n.fillColor,3),e.ctx.fillText(o,i,w)}})),e.ctx.restore(),!1));function V(e,t){let a=I[e];t?(a.style.display="",a.style.left=p(t.x/g)+"px",a.style.top=p(t.y/g)+"px",a.style.width=p(t.w/g)+"px",a.style.height=p(t.h/g)+"px"):a.style.display="none",F[e]=t}let B;const U=a===c.KN.Changes?function(e,t){let a;for(let n=0;n<s;n++){let s;if(e>=0){let r=q[n];N.get(e,r,1,1,(n=>{(0,o.P)(e,r,n.x,n.y,n.x+n.w,n.y+n.h)&&(s=n,Math.abs(t-r)<=n.h/2&&(a=n))}))}s?s!==F[n]&&V(n,s):null!=F[n]&&V(n,null)}a?a!==B&&(B=a,O(a.sidx,a.didx,a)):B&&(B=void 0,_())}:function(e,t){let a;N.get(e,t,1,1,(s=>{(0,o.P)(e,t,s.x,s.y,s.x+s.w,s.y+s.h)&&(a=s)})),a?(V(0,a),a!==B&&(B=a,O(a.sidx,a.didx,a))):B&&(V(0,null),B=void 0,_())},H={y:!1,x:a===c.KN.Changes,points:{show:!1}},q=Array(s).fill(0),W=Array(s).fill(0);return{cursor:H,xSplits:a===c.KN.Samples?(e,t,a,s,n,r)=>{let i=[],o=e.data[0][1]-e.data[0][0],l=m(n/o);for(let t=0;t<e.data[0].length;t+=l){let n=e.data[0][t];n>=a&&n<=s&&i.push(n)}return i}:null,xRange:e=>{const t=k();let s=t.from.valueOf(),n=t.to.valueOf();if(a===c.KN.Samples){let t=(e.data[0][1]-e.data[0][0])/2;s<=e.data[0][0]&&(s=e.data[0][0]-t);let a=e.data[0].length-1;n>=e.data[0][a]&&(n=e.data[0][a]+t)}return[s,n]},ySplits:e=>(b(l,null,s,e.bbox.height,((t,a,s)=>{q[t]=p(a+s/2),W[t]=e.posToVal(q[t]/g,i.j)})),W),yValues:(e,t)=>t.map(((e,t)=>w(t+1))),yRange:[0,1],drawPaths:(e,t,i,o)=>(r.Z.orient(e,t,((r,d,u,m,f,v,y,w,j,C,k,S,T,O)=>{let _=p((r.width||0)*g),N=n(t);var I;e.ctx.save(),O(e.ctx,e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),e.ctx.clip(),b(l,t-1,s,k,((t,s,n)=>{if(a===c.KN.Changes)for(let a=0;a<u.length;a++){let r=u[a];if(null!=r){let i=Math.round(v(d[a],m,C,w)),o=a;for(;++o<u.length&&(void 0===u[o]||x&&u[o]===r););let l=o===u.length?w+C+_:Math.round(v(d[o],m,C,w));E(e.ctx,O,w,j,i,p(j+s),l-i,p(n),_,t,a,r,N),a=o-1}}else if(a===c.KN.Samples){let a=v(d[1],m,C,w)-v(d[0],m,C,w),r=p(h($,a-a*D)-_),l=r/2;for(let a=i;a<=o;a++)if(null!=u[a]){let i=v(d[a],m,C,w);E(e.ctx,O,w,j,p(i-l),p(j+s),r,p(n),_,t,a,u[a],N)}}})),N&&(e.ctx.lineWidth=_,I=e.ctx,L.forEach(((e,t)=>{I.fillStyle=t,I.fill(e)})),R.forEach(((e,t)=>{I.strokeStyle=t,I.stroke(e)})),L.clear(),R.clear()),e.ctx.restore()})),null),drawPoints:z,init:e=>{let t=e.over;t.style.overflow="hidden",I.forEach((e=>{t.appendChild(e)}))},drawClear:e=>{var t;N=N||new o.l(0,0,e.bbox.width,e.bbox.height),N.clear(),t=e.data[0].length,P=Array(s).fill(null).map((e=>Array(t).fill(null))),e.series.forEach((e=>{e._paths=null}))},setCursor:e=>{let t=p(e.cursor.left*g),a=p(e.cursor.top*g);if(!N.o.length&&null==N.q)for(const e of P)for(const t of e)t&&N.add(t);U(t,a)}}}var x=a("./packages/grafana-ui/src/components/uPlot/utils.ts");const y={lineWidth:0,fillOpacity:80};const w=e=>{let{frame:t,theme:a,timeZone:r,getTimeRange:i,mode:o,eventBus:l,sync:c,rowHeight:u,colWidth:p,showValue:h,alignValue:m,mergeValues:g}=e;const f=new n.UPlotConfigBuilder(r),b="time",w="x",j={mode:o,numSeries:t.fields.length-1,isDiscrete:e=>(e=>{var t,a;const s=null===(t=e.config)||void 0===t||null===(a=t.color)||void 0===a?void 0:a.mode;return!(s&&e.display&&s.startsWith("continuous-"))})(t.fields[e]),mergeValues:g,rowHeight:u,colWidth:p,showValue:h,alignValue:m,theme:a,label:e=>(0,s.getFieldDisplayName)(t.fields[e],t),getFieldConfig:e=>t.fields[e].config.custom,getValueColor:(e,a)=>{const n=t.fields[e];if(n.display){const e=n.display(a);if(e.color)return e.color}return s.FALLBACK_COLOR},getTimeRange:i,formatValue:(e,a)=>(0,s.formattedValueToString)(t.fields[e].display(a)),onHover:(e,t)=>{k=e,S=t,C=!0},onLeave:()=>{k=null,S=null,C=!0}};let C=!1,k=null,S=null;const T=v(j),O={point:{[b]:null,[n.FIXED_UNIT]:null},data:t};f.addHook("init",T.init),f.addHook("drawClear",T.drawClear),f.addHook("setCursor",T.setCursor);f.setTooltipInterpolator(((e,t,a)=>{C&&(null!=k&&(e(k),t(S)),C=!1),a(null==k)})),f.setPrepData(x.k6),f.setCursor(T.cursor),f.addScale({scaleKey:w,isTime:!0,orientation:d.wN.Horizontal,direction:d.bQ.Right,range:T.xRange}),f.addScale({scaleKey:n.FIXED_UNIT,isTime:!1,orientation:d.wN.Vertical,direction:d.bQ.Up,range:T.yRange}),f.addAxis({scaleKey:w,isTime:!0,splits:T.xSplits,placement:d.LB.Bottom,timeZone:r,theme:a,grid:{show:!0}}),f.addAxis({scaleKey:n.FIXED_UNIT,isTime:!1,placement:d.LB.Left,splits:T.ySplits,values:T.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:a});let _=0;for(let e=0;e<t.fields.length;e++){var N,I;if(0===e)continue;const s=t.fields[e],r=s.config,i=Object.assign({},y,r.custom);s.state.seriesIndex=_++,f.addSeries({scaleKey:n.FIXED_UNIT,pathBuilder:T.drawPaths,pointsBuilder:T.drawPoints,lineWidth:i.lineWidth,fillOpacity:i.fillOpacity,theme:a,show:!(null!==(N=i.hideFrom)&&void 0!==N&&N.viz),thresholds:r.thresholds,dataFrameFieldIndex:null===(I=s.state)||void 0===I?void 0:I.origin})}if(c&&c()!==s.DashboardCursorSync.Off){let e={};e.sync={key:"__global_",filters:{pub:(e,t,a,r,i,o,d)=>(!c||c()!==s.DashboardCursorSync.Off)&&(O.rowIndex=d,a<0&&r<0?(O.point.time=null,O.point[n.FIXED_UNIT]=null,l.publish(new s.DataHoverClearEvent)):(O.point.time=t.posToVal(a,w),O.point.panelRelY=r>0?r/o:1,O.down=void 0,l.publish(new s.DataHoverEvent(O))),!0)},scales:[w,null]},f.setSync(),f.setCursor(e)}return f};function j(e){var t;let a=null===(t=e.config.custom)||void 0===t?void 0:t.spanNulls;return a?!0===a?1/0:a:-1}function C(e,t){const a=e.config.thresholds;if(e.type!==s.FieldType.number||!a||!a.steps.length)return;const n=S(e.config,t);if(n.length!==a.steps.length)return;const r=new Map,i=new Map;for(let e=0;e<n.length;e++)r.set(a.steps[e],n[e].label),i.set(n[e].label,n[e].color);let o=e.values.toArray();const l=new Array(e.values.length);if(a.mode===s.ThresholdsMode.Percentage){const{min:t,max:a}=(0,s.getFieldConfigWithMinMax)(e),n=a-t;o=o.map((e=>null==e?e:(e-t)/n*100))}for(let e=0;e<l.length;e++){const t=o[e];l[e]=null==t?t:r.get((0,s.getActiveThreshold)(t,a.steps))}return Object.assign({},e,{config:Object.assign({},e.config,{custom:Object.assign({},e.config.custom,{spanNulls:j(e)})}),type:s.FieldType.string,values:new s.ArrayVector(l),display:e=>({text:e,color:i.get(e),numeric:NaN})})}function k(e,t,a){var n;if(null==e||!e.length)return{warn:"No data in response"};let r=!1;const i=[];for(let o of e){let e=!1,l=!1;const c=[];for(let i of o.fields)switch(i.type){case s.FieldType.time:e=!0,r=!0,c.push(i);break;case s.FieldType.number:if(t&&(null===(n=i.config.color)||void 0===n?void 0:n.mode)===s.FieldColorModeId.Thresholds){const e=C(i,a);if(e){c.push(e),l=!0;continue}}case s.FieldType.boolean:case s.FieldType.string:i=Object.assign({},i,{config:Object.assign({},i.config,{custom:Object.assign({},i.config.custom,{spanNulls:j(i)})})}),c.push(i);break;default:l=!0}e&&c.length>1&&(r=!0,l?i.push(Object.assign({},o,{fields:c})):i.push(o))}return r?i.length?{frames:i}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function S(e,t){var a;const n=[],r=e.thresholds;if(!r||!r.steps.length)return n;const i=r.steps,o=(0,s.getValueFormat)(r.mode===s.ThresholdsMode.Percentage?"percent":null!==(a=e.unit)&&void 0!==a?a:""),l=e=>(0,s.formattedValueToString)(o(e));for(let e=1;e<=i.length;e++){const a=i[e-1];n.push({label:1===e?`< ${l(a.value)}`:`${l(a.value)}+`,color:t.visualization.getColorByName(a.color),yAxis:1})}return n}function T(e,t,a){if(e&&"hidden"!==t.displayMode)return O(function(e){const t=[];for(const a of e)for(const e of a.fields)e.type!==s.FieldType.time&&t.push(e);return t}(e),a)}function O(e,t){var a,n;if(!e.length)return;const r=[],i=e[0].config,o=null!==(a=null===(n=i.color)||void 0===n?void 0:n.mode)&&void 0!==a?a:s.FieldColorModeId.Fixed,l=i.thresholds;if(o===s.FieldColorModeId.Thresholds&&null!=l&&l.steps&&l.steps.length>1)return S(i,t);if(o.startsWith("continuous"))return;let c=new Map;return e.forEach((e=>{e.values.toArray().forEach((t=>{let a=e.display(t);a.color&&c.set(a.text,a.color)}))})),c.forEach(((e,a)=>{a.length>0&&r.push({label:a,color:t.visualization.getColorByName(null!=e?e:s.FALLBACK_COLOR),yAxis:1})})),r}function _(e,t){let a,s=t+1;if(s>=e.values.length)return null;const n=e.values.get(t);for(;void 0===a;){if(s>=e.values.length)return null;const t=e.values.get(s);void 0===t||t===n?s++:a=s}return a}function N(e){if(e<0||Number.isNaN(e))return"";let t,a,s,n,r,i,o,l;return o=Math.floor(e/1e3),i=Math.floor(o/60),o%=60,r=Math.floor(i/60),i%=60,n=Math.floor(r/24),r%=24,t=Math.floor(n/365),t>0&&(n%=365),a=Math.floor(n/30),a>0&&(n%=30),s=Math.floor(n/7),s>0&&(n%=7),l=Math.round(e%1e3*1e3)/1e3,(t>0?t+"y "+(a>0?a+"mo ":"")+(s>0?s+"w ":"")+(n>0?n+"d ":""):a>0?a+"mo "+(s>0?s+"w ":"")+(n>0?n+"d ":""):s>0?s+"w "+(n>0?n+"d ":""):n>0?n+"d "+(r>0?r+"h ":""):r>0?r+"h "+(i>0?i+"m ":""):i>0?i+"m "+(o>0?o+"s ":""):o>0?o+"s "+(l>0?l+"ms ":""):l>0?l+"ms ":"0").trim()}},"./public/app/plugins/panel/timeseries/LineStyleEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{j:()=>d});var s,n=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),r=a("./packages/grafana-ui/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],l=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map((e=>({label:e,value:e}))),c=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map((e=>({label:e,value:e}))),d=e=>{let{value:t,onChange:a}=e;const d=(0,n.useMemo)((()=>"dash"===(null==t?void 0:t.fill)?l:c),[t]),p=(0,n.useMemo)((()=>{var e,a;if(null==t||null===(e=t.dash)||void 0===e||!e.length)return d[0];const s=null===(a=t.dash)||void 0===a?void 0:a.join(", "),n=d.find((e=>e.value===s));return n||{label:s,value:s}}),[t,d]);return(0,i.jsxs)(r.HorizontalGroup,{children:[(0,i.jsx)(r.RadioButtonGroup,{value:(null==t?void 0:t.fill)||"solid",options:o,onChange:e=>{let s;"dot"===e?s=u(c[0].value):"dash"===e&&(s=u(l[0].value)),a(Object.assign({},t,{fill:e,dash:s}))}}),(null==t?void 0:t.fill)&&"solid"!==(null==t?void 0:t.fill)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Select,{menuShouldPortal:!0,allowCustomValue:!0,options:d,value:p,width:20,onChange:e=>{var s;a(Object.assign({},t,{dash:u(null!==(s=e.value)&&void 0!==s?s:"")}))},formatCreateLabel:e=>`Segments: ${u(e).join(", ")}`}),s||(s=(0,i.jsxs)("div",{children:[" ",(0,i.jsx)("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer",children:(0,i.jsx)(r.IconButton,{name:"question-circle"})})]}))]})]})};function u(e){const t=[];for(const a of e.split(/(?:,| )+/)){const e=Number.parseInt(a,10);isNaN(e)||t.push(e)}return t}},"./public/app/plugins/panel/timeseries/SpanNullsEditor.tsx":(e,t,a)=>{"use strict";a.d(t,{c:()=>l});a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s,n=a("./packages/grafana-data/src/index.ts"),r=a("./packages/grafana-ui/src/index.ts"),i=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const o=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],l=e=>{let{value:t,onChange:a}=e;const l="number"==typeof t,c=l?n.rangeUtil.secondsToHms(t/1e3):void 0;o[2].value=l?t:36e5;const d=e=>{let t=!1;if(e)try{t=1e3*n.rangeUtil.intervalToSeconds(e)}catch(e){console.warn("ERROR",e)}a(t)};return(0,i.jsxs)(r.HorizontalGroup,{children:[(0,i.jsx)(r.RadioButtonGroup,{value:t,options:o,onChange:a}),l&&(0,i.jsx)(r.Input,{autoFocus:!1,placeholder:"never",width:10,defaultValue:c,onKeyDown:e=>{"Enter"===e.key&&d(e.target.value)},onBlur:e=>{d(e.target.value)},prefix:s||(s=(0,i.jsx)("div",{children:"<"})),spellCheck:!1})]})}},"./public/app/plugins/panel/timeseries/config.ts":(e,t,a)=>{"use strict";a.d(t,{r:()=>p,F:()=>m});var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-schema/src/index.ts"),r=a("./packages/grafana-ui/src/index.ts"),i=a("./public/app/plugins/panel/timeseries/LineStyleEditor.tsx"),o=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),l=a("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const c=e=>{let{value:t,context:a,onChange:n}=e;const i=(0,o.useMemo)((()=>{const e=[];if(a.data.length)for(const t of a.data)for(const n of t.fields)if(n.type===s.FieldType.number){const r=(0,s.getFieldDisplayName)(n,t,a.data);e.push({label:r,value:r})}return e}),[a]),c=(0,o.useMemo)((()=>{const e=i.find((e=>e.value===t));return e||(t?{label:t,value:t}:void 0)}),[i,t]);return(0,l.jsx)(r.Select,{menuShouldPortal:!0,options:i,value:c,onChange:e=>{n(e.value)}})};var d=a("./public/app/plugins/panel/timeseries/SpanNullsEditor.tsx");const u=e=>{let{item:t,value:a,onChange:s,id:n}=e;const i=(0,o.useCallback)((e=>{s({mode:e.value})}),[s]);return(0,l.jsx)(r.Select,{inputId:n,menuShouldPortal:!0,value:a.mode,options:t.settings.options,onChange:i})},p={drawStyle:n.l8.Line,lineInterpolation:n.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:n.FI.None,barAlignment:n.pu.Center,stacking:{mode:n.o0.None,group:"A"},axisGridShow:!0},h=["Graph styles"];function m(e){return{standardOptions:{[s.FieldConfigProperty.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:s.FieldColorModeId.PaletteClassic}}},useCustomConfig:t=>{t.addRadio({path:"drawStyle",name:"Style",category:h,defaultValue:e.drawStyle,settings:{options:r.graphFieldOptions.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:h,defaultValue:e.lineInterpolation,settings:{options:r.graphFieldOptions.lineInterpolation},showIf:e=>e.drawStyle===n.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:h,defaultValue:e.barAlignment,settings:{options:r.graphFieldOptions.barAlignment},showIf:e=>e.drawStyle===n.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:h,defaultValue:e.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:e=>e.drawStyle!==n.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:h,defaultValue:e.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:e=>e.drawStyle!==n.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:h,defaultValue:r.graphFieldOptions.fillGradient[0].value,settings:{options:r.graphFieldOptions.fillGradient},showIf:e=>e.drawStyle!==n.l8.Points}).addCustomEditor({id:"fillBelowTo",path:"fillBelowTo",name:"Fill below to",category:h,editor:c,override:c,process:s.stringOverrideProcessor,hideFromDefaults:!0,shouldApply:e=>!0}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:h,showIf:e=>e.drawStyle===n.l8.Line,editor:i.j,override:i.j,process:s.identityOverrideProcessor,shouldApply:e=>e.type===s.FieldType.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:h,defaultValue:!1,editor:d.c,override:d.c,showIf:e=>e.drawStyle===n.l8.Line,shouldApply:e=>e.type!==s.FieldType.time,process:s.identityOverrideProcessor}).addRadio({path:"showPoints",name:"Show points",category:h,defaultValue:r.graphFieldOptions.showPoints[0].value,settings:{options:r.graphFieldOptions.showPoints},showIf:e=>e.drawStyle!==n.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:h,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:e=>e.showPoints!==n.Jp.Never||e.drawStyle===n.l8.Points}),r.commonOptionsBuilder.addStackingConfig(t,e.stacking,h),t.addSelect({category:h,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:n.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:n.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),r.commonOptionsBuilder.addAxisConfig(t,e),r.commonOptionsBuilder.addHideFrom(t),t.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:n.i3.Off},settings:{options:r.graphFieldOptions.thresholdsDisplayModes},editor:u,override:u,process:s.identityOverrideProcessor,shouldApply:()=>!0})}}}},"./public/app/plugins/sdk.ts":(e,t,a)=>{"use strict";a.r(t),a.d(t,{PanelCtrl:()=>l,MetricsPanelCtrl:()=>c,QueryCtrl:()=>d,loadPluginCss:()=>n.loadPluginCss});var s=a("./packages/grafana-data/src/index.ts"),n=a("./packages/grafana-runtime/src/index.ts"),r=a("./public/app/angular/panel/panel_ctrl.ts"),i=a("./public/app/angular/panel/metrics_panel_ctrl.ts"),o=a("./public/app/angular/panel/query_ctrl.ts");const l=(0,s.makeClassES5Compatible)(r.q),c=(0,s.makeClassES5Compatible)(i.k),d=(0,s.makeClassES5Compatible)(o.G)},"./public/app/polyfills/old-mediaquerylist.ts":()=>{let e=window.matchMedia;window.matchMedia=t=>{let a=e(t);return a.addEventListener||(a.addEventListener=(e,t)=>{a.addListener(t)},a.removeEventListener=(e,t)=>{a.removeListener(t)}),a}},"./public/app/store/store.ts":(e,t,a)=>{"use strict";let s;function n(e){s=e}function r(){return s&&s.getState?s.getState():{templating:{variables:{}}}}function i(e){if(s&&s.getState)return s.dispatch(e)}a.d(t,{h:()=>s,PQ:()=>n,y0:()=>r,WI:()=>i})},"./public/app/types/acl.ts":(e,t,a)=>{"use strict";let s,n,r,i,o;a.d(t,{B5:()=>s,V5:()=>n,bf:()=>r,pC:()=>o,BL:()=>l,vT:()=>c,hw:()=>d,eL:()=>u}),function(e){e.Viewer="Viewer",e.Editor="Editor",e.Admin="Admin"}(s||(s={})),function(e){e[e.View=1]="View",e[e.Edit=2]="Edit",e[e.Admin=4]="Admin"}(n||(n={})),function(e){e.View="View",e.Edit="Edit",e.Admin="Admin"}(r||(r={})),function(e){e[e.Query=1]="Query",e[e.Admin=2]="Admin"}(i||(i={})),function(e){e.Team="Team",e.User="User",e.Viewer="Viewer",e.Editor="Editor"}(o||(o={}));i.Query;const l=[{value:o.Team,label:"Team"},{value:o.User,label:"User"},{value:o.Viewer,label:"Everyone With Viewer Role"},{value:o.Editor,label:"Everyone With Editor Role"}],c=[{value:n.View,label:r.View,description:"Can view dashboards."},{value:n.Edit,label:r.Edit,description:"Can add, edit and delete dashboards."},{value:n.Admin,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}];let d;!function(e){e[e.Member=0]="Member",e[e.Admin=4]="Admin"}(d||(d={}));const u=[{value:d.Member,label:"Member",description:"Is team member"},{value:d.Admin,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},"./public/app/types/events.ts":(e,t,a)=>{"use strict";a.d(t,{Ai:()=>r,nq:()=>i,xt:()=>o,GL:()=>l,pO:()=>c,Xw:()=>d,Wj:()=>u,_B:()=>p,GT:()=>h,_z:()=>m,p8:()=>g,uV:()=>f,Qt:()=>b,QI:()=>v,Eb:()=>x,le:()=>y,VJ:()=>w,Dn:()=>j,OW:()=>C,Jd:()=>k,z:()=>S,RB:()=>T,xF:()=>O,Yr:()=>_});var s=a("./packages/grafana-data/src/index.ts");function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}(0,s.eventFactory)("ds-request-response"),(0,s.eventFactory)("ds-request-error");const r=(0,s.eventFactory)("toggle-sidemenu-hidden"),i=(0,s.eventFactory)("template-variable-value-updated"),o=(0,s.eventFactory)("graph-click"),l=(0,s.eventFactory)("threshold-changed");class c extends s.BusEventBase{}n(c,"type","panel-queries-changed");class d extends s.BusEventBase{}n(d,"type","panel-transformations-changed");class u extends s.BusEventBase{}n(u,"type","panels-options-changed");class p extends s.BusEventBase{}n(p,"type","dashboard-panels-changed");class h extends s.BusEventBase{}n(h,"type","panel-directive-ready");class m extends s.BusEventBase{}n(m,"type","render");class g extends s.BusEventWithPayload{}let f;n(g,"type","zoom-out"),function(e){e[e.Left=-1]="Left",e[e.Right=1]="Right"}(f||(f={}));class b extends s.BusEventWithPayload{}n(b,"type","shift-time");class v extends s.BusEventBase{}n(v,"type","absolute-time");class x extends s.BusEventWithPayload{}n(x,"type","remove-panel");class y extends s.BusEventWithPayload{}n(y,"type","show-modal");class w extends s.BusEventWithPayload{}n(w,"type","show-confirm-modal");class j extends s.BusEventWithPayload{}n(j,"type","show-react-modal");class C extends s.BusEventBase{}n(C,"type","hide-modal");class k extends s.BusEventBase{}n(k,"type","dashboard-saved");class S extends s.BusEventWithPayload{}n(S,"type","annotation-query-started");class T extends s.BusEventWithPayload{}n(T,"type","annotation-query-finished");class O extends s.BusEventWithPayload{}n(O,"type","panel-edit-started");class _ extends s.BusEventWithPayload{}n(_,"type","panel-edit-finished")},"./public/app/types/explore.ts":(e,t,a)=>{"use strict";let s;a.d(t,{K:()=>s,f:()=>n}),function(e){e.left="left",e.right="right"}(s||(s={}));const n=["lines","bars","points","stacked_lines","stacked_bars"]},"./public/app/types/index.ts":(e,t,a)=>{"use strict";let s,n,r;a.d(t,{bW:()=>d,F1:()=>o,bd:()=>l,RW:()=>u,bG:()=>n,vq:()=>s,f0:()=>c.f,Kd:()=>c.K,UX:()=>r,B5:()=>i.B5,bf:()=>i.bf,hw:()=>i.hw,eL:()=>i.eL}),function(e){e.Home="home-dashboard",e.New="new-dashboard",e.Normal="normal-dashboard",e.Scripted="scripted-dashboard"}(s||(s={})),function(e){e.NotStarted="Not started",e.Fetching="Fetching",e.Services="Services",e.Failed="Failed",e.Completed="Completed"}(n||(n={})),function(e){e.Off="off",e.TV="tv",e.Full="full"}(r||(r={}));var i=a("./public/app/types/acl.ts");let o,l;!function(e){e.Success="success",e.Warning="warning",e.Error="error",e.Info="info"}(o||(o={})),function(e){e[e.Warning=5e3]="Warning",e[e.Success=3e3]="Success",e[e.Error=7e3]="Error"}(l||(l={}));var c=a("./public/app/types/explore.ts");let d;!function(e){e.UsersRead="users:read",e.UsersWrite="users:write",e.UsersTeamRead="users.teams:read",e.UsersAuthTokenList="users.authtoken:list",e.UsersAuthTokenUpdate="users.authtoken:update",e.UsersPasswordUpdate="users.password:update",e.UsersDelete="users:delete",e.UsersCreate="users:create",e.UsersEnable="users:enable",e.UsersDisable="users:disable",e.UsersPermissionsUpdate="users.permissions:update",e.UsersLogout="users:logout",e.UsersQuotasList="users.quotas:list",e.UsersQuotasUpdate="users.quotas:update",e.OrgsRead="orgs:read",e.OrgsPreferencesRead="orgs.preferences:read",e.OrgsWrite="orgs:write",e.OrgsPreferencesWrite="orgs.preferences:write",e.OrgsCreate="orgs:create",e.OrgsDelete="orgs:delete",e.OrgUsersRead="org.users:read",e.OrgUsersAdd="org.users:add",e.OrgUsersRemove="org.users:remove",e.OrgUsersRoleUpdate="org.users.role:update",e.LDAPUsersRead="ldap.user:read",e.LDAPUsersSync="ldap.user:sync",e.LDAPStatusRead="ldap.status:read",e.DataSourcesExplore="datasources:explore",e.DataSourcesRead="datasources:read",e.DataSourcesCreate="datasources:create",e.DataSourcesWrite="datasources:write",e.DataSourcesDelete="datasources:delete",e.DataSourcesPermissionsRead="datasources.permissions:read",e.ActionServerStatsRead="server.stats:read",e.ActionTeamsCreate="teams:create",e.ActionTeamsDelete="teams:delete",e.ActionTeamsRead="teams:read",e.ActionTeamsWrite="teams:write",e.ActionTeamsPermissionsRead="teams.permissions:read",e.ActionTeamsPermissionsWrite="teams.permissions:write",e.ActionRolesList="roles:list",e.ActionBuiltinRolesList="roles.builtin:list",e.ActionTeamsRolesList="teams.roles:list",e.ActionTeamsRolesAdd="teams.roles:add",e.ActionTeamsRolesRemove="teams.roles:remove",e.ActionUserRolesList="users.roles:list"}(d||(d={}));var u=a("./public/app/types/events.ts")},"./public/app/types/suggestions.ts":(e,t,a)=>{"use strict";let s;a.d(t,{y:()=>s}),function(e){e.LineChart="Line chart",e.LineChartSmooth="Line chart smooth",e.LineChartGradientColorScheme="Line chart with gradient color scheme",e.AreaChart="Area chart",e.AreaChartStacked="Area chart stacked",e.AreaChartStackedPercent="Area chart 100% stacked",e.BarChart="Bar chart",e.BarChartGradientColorScheme="Bar chart with gradient color scheme",e.BarChartStacked="Bar chart stacked",e.BarChartStackedPercent="Bar chart 100% stacked",e.BarChartHorizontal="Bar chart horizontal",e.BarChartHorizontalStacked="Bar chart horizontal stacked",e.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",e.Candlestick="Candlestick",e.PieChart="Pie chart",e.PieChartDonut="Pie chart donut",e.Stat="Stat",e.StatColoredBackground="Stat colored background",e.Gauge="Gauge",e.GaugeNoThresholds="Gauge no thresholds",e.BarGaugeBasic="Bar gauge basic",e.BarGaugeLCD="Bar gauge LCD",e.Table="Table",e.StateTimeline="State timeline",e.StatusHistory="Status history",e.TextPanel="Text",e.DashboardList="Dashboard list",e.Logs="Logs"}(s||(s={}))},"./public/app/types/unified-alerting-dto.ts":(e,t,a)=>{"use strict";let s,n,r,i;a.d(t,{x_:()=>s,bj:()=>n,pz:()=>r,g0:()=>i}),function(e){e.Firing="firing",e.Inactive="inactive",e.Pending="pending"}(s||(s={})),function(e){e.Normal="Normal",e.Alerting="Alerting",e.Pending="Pending",e.NoData="NoData",e.Error="Error"}(n||(n={})),function(e){e.Alerting="alerting",e.Recording="recording"}(r||(r={})),function(e){e.Alerting="Alerting",e.NoData="NoData",e.KeepLastState="KeepLastState",e.OK="OK",e.Error="Error"}(i||(i={}))},"./public/locales/en/messages.js":e=>{e.exports={messages:{"common.save":"Save","nav.alerting":"Alerting","nav.alerting-admin":"Admin","nav.alerting-am-routes":"Notification policies","nav.alerting-channels":"Notification channels","nav.alerting-groups":"Groups","nav.alerting-list":"Alert rules","nav.alerting-receivers":"Contact points","nav.alerting-silences":"Silences","nav.api-keys":"API keys","nav.change-password":"Change password","nav.config":"Configuration","nav.create":"Create","nav.create-alert":"Alert rule","nav.create-dashboard":"Dashboard","nav.create-folder":"Folder","nav.create-import":"Import","nav.dashboards":"Dashboards","nav.datasources":"Data sources","nav.explore":"Explore","nav.folder":"New folder","nav.help":"Help","nav.home":"Home","nav.import":"Import","nav.library-panels":"Library panels","nav.live":"Event streaming","nav.live-cloud":"Cloud","nav.live-pipeline":"Pipeline","nav.live-status":"Status","nav.manage-dashboards":"Browse","nav.new-dashboard":"New dashboard","nav.new-folder":"New folder","nav.org-settings":"Preferences","nav.playlists":"Playlists","nav.plugins":"Plugins","nav.profile-settings":"Preferences","nav.service-accounts":"Service accounts","nav.sign-out":"Sign out","nav.snapshots":"Snapshots","nav.teams":"Teams","nav.users":"Users","shared-dashboard.fields.timezone-label":"Timezone","shared-preferences.fields.home-dashboard-label":"Home Dashboard","shared-preferences.fields.home-dashboard-placeholder":"Choose default dashboard","shared-preferences.fields.home-dashboard-tooltip":"Not finding the dashboard you want? Star it first, then it should appear in this select box.","shared-preferences.fields.theme-label":"UI Theme","shared-preferences.fields.week-start-label":"Week start","shared-preferences.theme.dark-label":"Dark","shared-preferences.theme.default-label":"Default","shared-preferences.theme.light-label":"Light","shared-preferences.title":"Preferences","user-orgs.current-org-button":"Current","user-orgs.name-column":"Name","user-orgs.role-column":"Role","user-orgs.select-org-button":"Select","user-orgs.title":"Organizations","user-profile.fields.email-error":"Email is required","user-profile.fields.email-label":"Email","user-profile.fields.name-error":"Name is required","user-profile.fields.name-label":"Name","user-profile.fields.username-label":"Username","user-profile.title":"Edit profile","user-session.browser-column":"Browser & OS","user-session.created-at-column":"Logged on","user-session.ip-column":"IP address","user-session.revoke":"Revoke user session","user-session.seen-at-column":"Last seen","user-sessions.loading":"Loading sessions..."}}},"./public/vendor/angular-other/angular-strap.js":()=>{angular.module("$strap.config",[]).value("$strapConfig",{}),angular.module("$strap.filters",["$strap.config"]),angular.module("$strap.directives",["$strap.config"]),angular.module("$strap",["$strap.filters","$strap.directives","$strap.config"]),angular.module("$strap.directives").factory("$modal",["$rootScope","$compile","$http","$timeout","$q","$templateCache","$strapConfig",function(e,t,a,s,n,r,i){return function(o){return new function(o){var l=angular.extend({show:!0},i.modal,o),c=l.scope?l.scope:e.$new(),d=l.template;return n.when(l.templateHtml||r.get(d)||a.get(d,{cache:!0}).then((function(e){return e.data}))).then((function(e){var a=c.$id;d&&(a+=d.replace(".html","").replace(/[\/|\.|:]/g,"-"));var n=$('<div class="modal hide" tabindex="-1"></div>').attr("id",a).html(e);return l.modalClass&&n.addClass(l.modalClass),$("body").append(n),s((function(){t(n)(c)})),c.$modal=function(e){n.modal(e)},angular.forEach(["show","hide"],(function(e){c[e]=function(){n.modal(e)}})),c.dismiss=c.hide,angular.forEach(["show","shown","hide","hidden"],(function(e){n.on(e,(function(t){c.$emit("modal-"+e,t)}))})),n.on("shown",(function(e){$("input[autofocus], textarea[autofocus]",n).first().trigger("focus")})),n.on("hidden",(function(e){l.persist||c.$destroy()})),c.$on("$destroy",(function(){n.remove()})),n.modal(l),n}))}(o)}}]),angular.module("$strap.directives").directive("bsTooltip",["$parse","$compile",function(e,t){return{restrict:"A",scope:!0,link:function(t,a,s,n){var r=e(s.bsTooltip),i=(r.assign,r(t));t.$watch(s.bsTooltip,(function(e,t){e!==t&&(i=e)})),a.on("show",(function(e){$(".tooltip.in").each((function(){var e=$(this),t=e.data("tooltip");t&&!t.$element.is(a)&&e.tooltip("hide")}))})),a.tooltip({title:function(){return angular.isFunction(i)?i.apply(null,arguments):i},html:!0,container:"body"}),a.data("tooltip").show=function(){var e=$.fn.tooltip.Constructor.prototype.show.apply(this,arguments);return this.tip().data("tooltip",this),e},t._tooltip=function(e){a.tooltip(e)},t.hide=function(){a.tooltip("hide")},t.show=function(){a.tooltip("show")},t.dismiss=t.hide}}}]),angular.module("$strap.directives").directive("bsTypeahead",["$parse",function(e){return{restrict:"A",require:"?ngModel",link:function(t,a,s,n){var r=e(s.bsTypeahead),i=(r.assign,r(t));t.$watch(s.bsTypeahead,(function(e,t){e!==t&&(i=e)})),a.attr("data-provide","typeahead"),a.typeahead({source:function(e){return angular.isFunction(i)?i.apply(null,arguments):i},minLength:s.minLength||1,items:s.items,updater:function(e){return n&&t.$apply((function(){n.$setViewValue(e)})),t.$emit("typeahead-updated",e),e}});var o=a.data("typeahead");o.lookup=function(e){var t;return this.query=this.$element.val()||"",this.query.length<this.options.minLength?this.shown?this.hide():this:(t=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source)?this.process(t):this},s.matchAll&&(o.matcher=function(e){return!0}),"0"===s.minLength&&setTimeout((function(){a.on("focus",(function(){0===a.val().length&&setTimeout(a.typeahead.bind(a,"lookup"),200)}))}))}}}])},"./public/vendor/bootstrap/bootstrap.js":()=>{!function(e){"use strict";e((function(){var t;e.support.transition=(t=function(){var e,t=document.createElement("bootstrap"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in a)if(void 0!==t.style[e])return a[e]}())&&{end:t}}))}(window.jQuery),function(e){"use strict";var t="[data-toggle=dropdown]",a=function(t){var a=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",(function(){a.parent().removeClass("open")}))};function s(){e(".dropdown-backdrop").remove(),e(t).each((function(){n(e(this)).removeClass("open")}))}function n(t){var a,s=t.attr("data-target");return s||(s=(s=t.attr("href"))&&/#[A-Za-z]/.test(s)&&s.replace(/.*(?=#[^\s]*$)/,"")),(a=s&&e(s))&&a.length||(a=t.parent()),a}a.prototype={constructor:a,toggle:function(t){var a,r,i=e(this);if(!i.is(".disabled, :disabled"))return r=(a=n(i)).hasClass("open"),s(),r||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",s),a.toggleClass("open")),i.focus(),!1},keydown:function(a){var s,r,i,o,l;if(/(38|40|27)/.test(a.keyCode)&&(s=e(this),a.preventDefault(),a.stopPropagation(),!s.is(".disabled, :disabled"))){if(!(o=(i=n(s)).hasClass("open"))||o&&27==a.keyCode)return 27==a.which&&i.find(t).focus(),s.click();(r=e("[role=menu] li:not(.divider):visible a",i)).length&&(l=r.index(r.filter(":focus")),38==a.keyCode&&l>0&&l--,40==a.keyCode&&l<r.length-1&&l++,~l||(l=0),r.eq(l).focus())}}};var r=e.fn.dropdown;e.fn.dropdown=function(t){return this.each((function(){var s=e(this),n=s.data("dropdown");n||s.data("dropdown",n=new a(this)),"string"==typeof t&&n[t].call(s)}))},e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=r,this},e(document).on("click.dropdown.data-api",s).on("click.dropdown.data-api",".dropdown form",(function(e){e.stopPropagation()})).on("click.dropdown.data-api",t,a.prototype.toggle).on("keydown.dropdown.data-api",t+", [role=menu]",a.prototype.keydown)}(window.jQuery),function(e){"use strict";var t=function(t,a){this.options=a,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,a=e.Event("show");this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop((function(){var a=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),a&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),a?t.$element.one(e.support.transition.end,(function(){t.$element.focus().trigger("shown")})):t.$element.focus().trigger("shown")})))},hide:function(t){t&&t.preventDefault();t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",(function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()}))},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",(function(t){27==t.which&&e.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,a=setTimeout((function(){t.$element.off(e.support.transition.end),t.hideModal()}),500);this.$element.one(e.support.transition.end,(function(){clearTimeout(a),t.hideModal()}))},hideModal:function(){var e=this;this.$element.hide(),this.backdrop((function(){e.removeBackdrop(),e.$element.trigger("hidden")}))},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&a;if(this.$backdrop=e('<div class="modal-backdrop '+a+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var a=e.fn.modal;e.fn.modal=function(a){return this.each((function(){var s=e(this),n=s.data("modal"),r=e.extend({},e.fn.modal.defaults,s.data(),"object"==typeof a&&a);n||s.data("modal",n=new t(this,r)),"string"==typeof a?n[a]():r.show&&n.show()}))},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=a,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',(function(t){var a=e(this),s=a.attr("href"),n=e(a.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),r=n.data("modal")?"toggle":e.extend({remote:!/#/.test(s)&&s},n.data(),a.data());t.preventDefault(),n.modal(r).one("hide",(function(){a.focus()}))}))}(window.jQuery),function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,a,s){var n,r,i,o,l;for(this.type=t,this.$element=e(a),this.options=this.getOptions(s),this.enabled=!0,l=(i=this.options.trigger.split(" ")).length;l--;)"click"==(o=i[l])?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=o&&(n="hover"==o?"mouseenter":"focus",r="hover"==o?"mouseleave":"blur",this.$element.on(n+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return(t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var a,s=e.fn[this.type].defaults,n={};if(this._options&&e.each(this._options,(function(e,t){s[e]!=t&&(n[e]=t)}),this),!(a=e(t.currentTarget)[this.type](n).data(this.type)).options.delay||!a.options.delay.show)return a.show();clearTimeout(this.timeout),a.hoverState="in",this.timeout=setTimeout((function(){"in"==a.hoverState&&a.show()}),a.options.delay.show)},leave:function(t){var a=e(t.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!a.options.delay||!a.options.delay.hide)return a.hide();a.hoverState="out",this.timeout=setTimeout((function(){"out"==a.hoverState&&a.hide()}),a.options.delay.hide)},show:function(){var t,a,s,n,r,i,o=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(o),o.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),a=this.getPosition(),s=t[0].offsetWidth,n=t[0].offsetHeight,r){case"bottom":i={top:a.top+a.height,left:a.left+a.width/2-s/2};break;case"top":i={top:a.top-n,left:a.left+a.width/2-s/2};break;case"left":i={top:a.top+a.height/2-n/2,left:a.left-s};break;case"right":i={top:a.top+a.height/2-n/2,left:a.left+a.width};break;case"topLeft":i={top:a.top-n,left:a.left+a.width/2-.1*s};break;case"topRight":i={top:a.top-n,left:a.left+a.width/2-.9*s};break;case"rightTop":i={top:a.top+a.height/2-.1*n,left:a.left+a.width};break;case"rightBottom":i={top:a.top+a.height/2-.9*n,left:a.left+a.width};break;case"bottomLeft":i={top:a.top+a.height,left:a.left+a.width/2-.1*s};break;case"bottomRight":i={top:a.top+a.height,left:a.left+a.width/2-.9*s};break;case"leftTop":i={top:a.top+a.height/2-.1*n,left:a.left-s};break;case"leftBottom":i={top:a.top+a.height/2-.9*n,left:a.left-s}}this.applyPlacement(i,r),this.$element.trigger("shown")}},applyPlacement:function(e,t){var a,s,n,r,i=this.tip(),o=i[0].offsetWidth,l=i[0].offsetHeight;i.offset(e).addClass(t).addClass("in"),a=i[0].offsetWidth,s=i[0].offsetHeight,"top"==t&&s!=l&&(e.top=e.top+l-s,r=!0),"bottom"==t||"top"==t?(n=0,e.left<0&&(n=-2*e.left,e.left=0,i.offset(e),a=i[0].offsetWidth,s=i[0].offsetHeight),this.replaceArrow(n-o+a,a,"left")):this.replaceArrow(s-l,s,"top"),r&&i.offset(e)},replaceArrow:function(e,t,a){this.arrow().css(a,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){var t,a=this.tip(),s=e.Event("hide");if(this.$element.trigger(s),!s.isDefaultPrevented())return a.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?(t=setTimeout((function(){a.off(e.support.transition.end).detach()}),500),a.one(e.support.transition.end,(function(){clearTimeout(t),a.detach()}))):a.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var a=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;a.tip().hasClass("in")?a.hide():a.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var a=e.fn.tooltip;e.fn.tooltip=function(a){return this.each((function(){var s=e(this),n=s.data("tooltip"),r="object"==typeof a&&a;n||s.data("tooltip",n=new t(this,r)),"string"==typeof a&&n[a]()}))},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=a,this}}(window.jQuery),function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,a,s,n=this.element,r=n.closest("ul:not(.dropdown-menu)"),i=n.attr("data-target");i||(i=(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),n.parent("li").hasClass("active")||(t=r.find(".active:last a")[0],s=e.Event("show",{relatedTarget:t}),n.trigger(s),s.isDefaultPrevented()||(a=e(i),this.activate(n.parent("li"),r),this.activate(a,a.parent(),(function(){n.trigger({type:"shown",relatedTarget:t})}))))},activate:function(t,a,s){var n=a.find("> .active"),r=s&&e.support.transition&&n.hasClass("fade");function i(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),s&&s()}r?n.one(e.support.transition.end,i):i(),n.removeClass("in")}};var a=e.fn.tab;e.fn.tab=function(a){return this.each((function(){var s=e(this),n=s.data("tab");n||s.data("tab",n=new t(this)),"string"==typeof a&&n[a]()}))},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=a,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',(function(t){t.preventDefault(),e(this).tab("show")}))}(window.jQuery),function(e){"use strict";var t=function(t,a){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,a),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value")||this.$element.val();return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var a;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(a=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source)?this.process(a):this},process:function(t){var a=this;return t=e.grep(t,(function(e){return a.matcher(e)})),(t=this.sorter(t)).length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,a=[],s=[],n=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?s.push(t):n.push(t):a.push(t);return a.concat(s,n)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t?e.replace(new RegExp("("+t+")","ig"),(function(e,t){return"<strong>"+t+"</strong>"})):e},render:function(t){var a=this;return t=e(t).map((function(t,s){return(t=e(a.options.item).attr("data-value",s)).find("a").html(a.highlighter(s)),t[0]})),this.$menu.html(t),this},next:function(t){var a=this.$menu.find(".active").removeClass("active").next();a.length||(a=e(this.$menu.find("li")[0])),a.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active").prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},destroy:function(){this.$element.off().removeData("typeahead"),this.$menu.off()},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown&&(!e.shiftKey||40!==e.keyCode)){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27,57]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}13===e.keyCode&&void 0===this.$menu.find(".active").attr("data-value")?this.$element.submit():(e.stopPropagation(),e.preventDefault())},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var a=e.fn.typeahead;e.fn.typeahead=function(a){return this.each((function(){var s=e(this),n=s.data("typeahead"),r="object"==typeof a&&a;n||s.data("typeahead",n=new t(this,r)),"string"==typeof a&&n[a]()}))},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=a,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',(function(t){var a=e(this);a.data("typeahead")||a.typeahead(a.data())}))}(window.jQuery),function(e){"use strict";var t=function(t,a){this.options=e.extend({},e.fn.affix.defaults,a),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy((function(){setTimeout(e.proxy(this.checkPosition,this),1)}),this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,a=e(document).height(),s=this.$window.scrollTop(),n=this.$element.offset(),r=this.options.offset,i=r.bottom,o=r.top;"object"!=typeof r&&(i=o=r),"function"==typeof o&&(o=r.top()),"function"==typeof i&&(i=r.bottom()),t=!(null!=this.unpin&&s+this.unpin<=n.top)&&(null!=i&&n.top+this.$element.height()>=a-i?"bottom":null!=o&&s<=o&&"top"),this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?n.top-s:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(t?"-"+t:"")))}};var a=e.fn.affix;e.fn.affix=function(a){return this.each((function(){var s=e(this),n=s.data("affix"),r="object"==typeof a&&a;n||s.data("affix",n=new t(this,r)),"string"==typeof a&&n[a]()}))},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=a,this},e(window).on("load",(function(){e('[data-spy="affix"]').each((function(){var t=e(this),a=t.data();a.offset=a.offset||{},a.offsetBottom&&(a.offset.bottom=a.offsetBottom),a.offsetTop&&(a.offset.top=a.offsetTop),t.affix(a)}))}))}(window.jQuery)},"./public/vendor/flot/jquery.flot.crosshair.js":()=>{jQuery.plot.plugins.push({init:function(e){var t={x:-1,y:-1,locked:!1};function a(a){t.locked||-1!=t.x&&(t.x=-1,e.triggerRedrawOverlay())}function s(a){if(!t.locked)if(e.getSelection&&e.getSelection())t.x=-1;else{var s=e.offset();t.x=Math.max(0,Math.min(a.pageX-s.left,e.width())),t.y=Math.max(0,Math.min(a.pageY-s.top,e.height())),e.triggerRedrawOverlay()}}e.setCrosshair=function(a){if(a){var s=e.p2c(a);t.x=Math.max(0,Math.min(s.left,e.width())),t.y=Math.max(0,Math.min(s.top,e.height()))}else t.x=-1;e.triggerRedrawOverlay()},e.clearCrosshair=e.setCrosshair,e.lockCrosshair=function(a){a&&e.setCrosshair(a),t.locked=!0},e.unlockCrosshair=function(){t.locked=!1},e.hooks.bindEvents.push((function(e,t){e.getOptions().crosshair.mode&&(t.mouseout(a),t.mousemove(s))})),e.hooks.drawOverlay.push((function(e,a){var s=e.getOptions().crosshair;if(s.mode){var n=e.getPlotOffset();if(a.save(),a.translate(n.left,n.top),-1!=t.x){var r=e.getOptions().crosshair.lineWidth%2?.5:0;if(a.strokeStyle=s.color,a.lineWidth=s.lineWidth,a.lineJoin="round",a.beginPath(),-1!=s.mode.indexOf("x")){var i=Math.floor(t.x)+r;a.moveTo(i,0),a.lineTo(i,e.height())}if(-1!=s.mode.indexOf("y")){var o=Math.floor(t.y)+r;a.moveTo(0,o),a.lineTo(e.width(),o)}a.stroke()}a.restore()}})),e.hooks.shutdown.push((function(e,t){t.unbind("mouseout",a),t.unbind("mousemove",s)}))},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"})},"./public/vendor/flot/jquery.flot.dashes.js":()=>{jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,a){t.dashes.show&&e.hooks.draw.push((function(e,s){var n=e.getPlotOffset(),r=t.xaxis,i=t.yaxis;function o(e,n){var o,l,c=a.points,d=a.pointsize,u=null,p=null,h=0,m=!0;t.dashes.dashLength[0]?(o=t.dashes.dashLength[0],l=t.dashes.dashLength[1]?t.dashes.dashLength[1]:o):l=o=t.dashes.dashLength,s.beginPath();for(var g=d;g<c.length;g+=d){var f=c[g-d],b=c[g-d+1],v=c[g],x=c[g+1];if(null!=f&&null!=v){if(b<=x&&b<i.min){if(x<i.min)continue;f=(i.min-b)/(x-b)*(v-f)+f,b=i.min}else if(x<=b&&x<i.min){if(b<i.min)continue;v=(i.min-b)/(x-b)*(v-f)+f,x=i.min}if(b>=x&&b>i.max){if(x>i.max)continue;f=(i.max-b)/(x-b)*(v-f)+f,b=i.max}else if(x>=b&&x>i.max){if(b>i.max)continue;v=(i.max-b)/(x-b)*(v-f)+f,x=i.max}if(f<=v&&f<r.min){if(v<r.min)continue;b=(r.min-f)/(v-f)*(x-b)+b,f=r.min}else if(v<=f&&v<r.min){if(f<r.min)continue;x=(r.min-f)/(v-f)*(x-b)+b,v=r.min}if(f>=v&&f>r.max){if(v>r.max)continue;b=(r.max-f)/(v-f)*(x-b)+b,f=r.max}else if(v>=f&&v>r.max){if(f>r.max)continue;x=(r.max-f)/(v-f)*(x-b)+b,v=r.max}f==u&&b==p||s.moveTo(r.p2c(f)+e,i.p2c(b)+n);var y,w=r.p2c(f)+e,j=i.p2c(b)+n,C=r.p2c(v)+e,k=i.p2c(x)+n;do{0==(y=S(h>0?h:m?o:l)).deltaX&&0==y.deltaY||(m?s.lineTo(w+y.deltaX,j+y.deltaY):s.moveTo(w+y.deltaX,j+y.deltaY)),m=!m,h=y.remainder,w+=y.deltaX,j+=y.deltaY}while(y.distance>0);u=v,p=x}function S(e){var t=Math.sqrt(Math.pow(C-w,2)+Math.pow(k-j,2));if(t<=e)return{deltaX:C-w,deltaY:k-j,distance:t,remainder:e-t};var a=k>j?1:-1;return{deltaX:(C>w?1:-1)*Math.sqrt(Math.pow(e,2)/(1+Math.pow((k-j)/(C-w),2))),deltaY:a*Math.sqrt(Math.pow(e,2)-Math.pow(e,2)/(1+Math.pow((k-j)/(C-w),2))),distance:e,remainder:0}}}s.stroke()}s.save(),s.translate(n.left,n.top),s.lineJoin="round";var l=t.dashes.lineWidth,c=t.shadowSize;if(l>0&&c>0){s.lineWidth=c,s.strokeStyle="rgba(0,0,0,0.1)";var d=Math.PI/18;o(Math.sin(d)*(l/2+c/2),Math.cos(d)*(l/2+c/2)),s.lineWidth=c/2,o(Math.sin(d)*(l/2+c/4),Math.cos(d)*(l/2+c/4))}s.lineWidth=l,s.strokeStyle=t.color,l>0&&o(0,0),s.restore()}))}))},options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})},"./public/vendor/flot/jquery.flot.fillbelow.js":()=>{!function(e){"use strict";e.plot.plugins.push({init:function(t){t.hooks.drawSeries.push((function(t,a,s){var n,r,i,o,l,c,d;function u(e,t){a.beginPath(),a.moveTo(s.xaxis.p2c(e)+c.left,s.yaxis.p2c(t)+c.top)}function p(e,t){console.assert(t>e,"expects the end index to be greater than the start index");var a,s,n=0===e||null===i[e-1]||null===l[e-1],c=!1;for(a=e;a<t;a++)if(null===i[a*r+1]||null===l[a*r+1])c=!1,n=!0;else if(i[a*r+1]===l[a*o+1])c=!0,n=!1;else{if(i[a*r+1]>l[a*o+1])return n?u(i[a*r],i[a*r+1]):c?u(i[(a-1)*r],i[(a-1)*r+1]):u((s=h(a))[0],s[1]),void g(a,t);n=!1,c=!1}}function h(e){var t,a,s,n,c,d,u,p,h,m,g,f,b,v,x,y;for(console.assert(e>0,"expects the second point in the series line segment"),t=1;t<l.length/o;t++)if(s=i[(e-1)*r],n=i[(e-1)*r+1],c=i[e*r],d=i[e*r+1],u=l[(t-1)*o],p=l[(t-1)*o+1],h=l[t*o],m=l[t*o+1],g=void 0,f=void 0,b=void 0,v=void 0,x=void 0,y=void 0,y=((b=h-u)*(n-p)-(v=m-p)*(s-u))/(-b*(f=d-n)+(g=c-s)*v),null!==(a=(x=(-f*(s-u)+g*(n-p))/(-b*f+g*v))>=0&&x<=1&&y>=0&&y<=1?[s+y*g,n+y*f]:null))return a;console.error("intersectionPoint() should only be called when an intersection happens")}function m(e,t){var s;for(console.assert(e>=t,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)"),s=e;s>=t;s--)a.lineTo(n.xaxis.p2c(l[s*o])+c.left,n.yaxis.p2c(l[s*o+1])+c.top);a.closePath(),a.fill()}function g(e,t){var n,d;for(console.assert(e<=t,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)"),n=e;n<t;n++){if(null===i[n*r+1]&&n>e)return m(n-1,e),void p(n,t);if(i[n*r+1]===l[n*o+1])return m(n,e),void p(n,t);if(i[n*r+1]<l[n*o+1])return d=h(n),a.lineTo(s.xaxis.p2c(d[0])+c.left,s.yaxis.p2c(d[1])+c.top),m(n,e),void p(n,t);a.lineTo(s.xaxis.p2c(i[n*r])+c.left,s.yaxis.p2c(i[n*r+1])+c.top)}m(t,e)}null!==s.fillBelowTo&&(n=function(e,t){var a;for(a=0;a<t.length;++a)if(t[a].id===e.fillBelowTo)return t[a];return null}(s,t.getData()),n&&(r=s.datapoints.pointsize,i=s.datapoints.points,o=n.datapoints.pointsize,l=n.datapoints.points,c=t.getPlotOffset(),function(){if(i.length/r!=l.length/o)return console.error("Refusing to graph inconsistent number of points"),!1;var e;for(e=0;e<i.length/r;e++)if(null!==i[e*r]&&null!==l[e*o]&&i[e*r]!==l[e*o])return console.error("Refusing to graph points without matching value"),!1;return!0}()&&((d=e.color.parse(s.color)).a=.4,d.normalize(),a.fillStyle=d.toString(),p(0,i.length/r))))}))},options:{series:{fillBelowTo:null}},name:"fillbelow",version:"0.1.0"})}(jQuery)},"./public/vendor/flot/jquery.flot.gauge.js":()=>{!function(e){var t=function(){var t,r,i,o,l,c=function(e,s){t=s,r=e.getPlaceholder(),i=e.getOptions(),o=i.series.gauges,l=e.getData(),a(o.debug)};function d(e,t){"auto"===e.gauge.width&&(e.gauge.width=Math.max(5,t/8)),"auto"===e.label.margin&&(e.label.margin=Math.max(1,t/20)),"auto"===e.label.font.size&&(e.label.font.size=Math.max(5,t/8)),"auto"===e.value.margin&&(e.value.margin=Math.max(1,t/30)),"auto"===e.value.font.size&&(e.value.font.size=Math.max(5,t/9)),"auto"===e.threshold.width&&(e.threshold.width=Math.max(3,t/100)),"auto"===e.threshold.label.margin&&(e.threshold.label.margin=Math.max(3,t/40)),"auto"===e.threshold.label.font.size&&(e.threshold.label.font.size=Math.max(5,t/15))}function u(e,t,a){var s=e.gauge.startAngle+(e.gauge.endAngle-e.gauge.startAngle)*((a-e.gauge.min)/(e.gauge.max-e.gauge.min));return s<e.gauge.startAngle?s=e.gauge.startAngle:s>e.gauge.endAngle&&(s=e.gauge.endAngle),s}function p(e,a,s,r,i,o,l,c,d,u){i!==o&&(t.save(),n(t,e,a,s,r,i,o,l,c,d),u&&(n(t,e,a,s,r,i,o),t.clip(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=10,t.shadowColor="gray",n(t,e,a,s+1,r+2,i,o,l,1)),t.restore())}function h(e,t,a,n,r,i){m(a.cx+(t.thresholdLabelMargin+t.thresholdLabelFontSize/2+t.radius)*Math.cos(s(i)),a.cy+(t.thresholdLabelMargin+t.thresholdLabelFontSize/2+t.radius)*Math.sin(s(i)),"flotGaugeThresholdValue"+n,e.threshold.label.formatter?e.threshold.label.formatter(r):r,e.threshold.label,i)}function m(t,a,s,n,i,o){var l=e(r).find("#"+s),c=l.length;c||((l=e("<span></span>")).attr("id",s),l.attr("class","flot-temp-elem"),r.append(l)),l.css("position","absolute"),l.css("top",a+"px"),l.css("white-space","nowrap"),i.font.size&&l.css("font-size",i.font.size+"px"),i.font.family&&l.css("font-family",i.font.family),i.color&&l.css("color",i.color),i.background.color&&l.css("background-color",i.background.color),i.background.opacity&&l.css("opacity",i.background.opacity),l.text(n),l.css("left",t+"px"),l.css("left",parseInt(l.css("left"))-l.width()/2+"px"),!c&&o&&(l.css("top",parseInt(l.css("top"))-l.height()/2+"px"),l.css("transform","rotate("+(180*o+90)+"deg)"))}return c.prototype.calculateLayout=function(){var e=r.width(),t=r.height(),a=Math.min(l.length,o.layout.columns),n=Math.ceil(l.length/a),i=o.layout.margin,c=o.layout.hMargin,u=o.layout.vMargin,p=(e-2*i-c*(a-1))/a,h=(t-2*i-u*(n-1))/n;if(o.layout.square){var m=Math.min(p,h);p=m,h=m}d(o,p);var g=o.cell.margin,f=0,b=0;o.label.show&&(f=o.label.margin,b=o.label.font.size);var v=0,x=0;o.value.show&&(v=o.value.margin,x=o.value.font.size);var y=0;o.threshold.show&&(y=o.threshold.width);var w=0,j=0;o.threshold.label.show&&(w=o.threshold.label.margin,j=o.threshold.label.font.size);for(var C=p/2-g-y-2*w-j,k=o.gauge.startAngle,S=o.gauge.endAngle,T=(S-k)/100,O=-1,_=k;_<S;_+=T)O=Math.max(O,Math.sin(s(_)));var N=(h-2*g-2*f-b)/(1+(O=Math.max(O,Math.sin(s(S)))));N*O<v+x/2&&(N=h-2*g-2*f-b-v-x/2);var I=N-2*w-j-y,P=Math.min(C,I),M=o.gauge.width;M>=P&&(M=Math.max(3,P/3));var F=2*w+j+y+P;return{canvasWidth:e,canvasHeight:t,margin:i,hMargin:c,vMargin:u,columns:a,rows:n,cellWidth:p,cellHeight:h,cellMargin:g,labelMargin:f,labelFontSize:b,valueMargin:v,valueFontSize:x,width:M,radius:P,thresholdWidth:y,thresholdLabelMargin:w,thresholdLabelFontSize:j,gaugeOuterHeight:Math.max(F*(1+O),F+v+x/2)}},c.prototype.calculateAutoValues=d,c.prototype.calculateCellLayout=function(e,t,a){var s=function(e,t){return t%e}(t.columns,a),n=function(e,t){return Math.floor(t/e)}(t.columns,a),r=t.margin+(t.cellWidth+t.hMargin)*s,i=t.margin+(t.cellHeight+t.vMargin)*n,o=r+t.cellWidth/2,l=i+t.cellMargin+2*t.labelMargin+t.labelFontSize+t.thresholdWidth+t.thresholdLabelFontSize+2*t.thresholdLabelMargin+t.radius,c=t.cellHeight-2*t.cellMargin-2*t.labelMargin-t.labelFontSize-t.gaugeOuterHeight,d=0;return"middle"===e.cell.vAlign?d=c/2:"bottom"===e.cell.vAlign&&(d=c),l+=d,{col:s,row:n,x:r,y:i,offsetY:d,cellWidth:t.cellWidth,cellHeight:t.cellHeight,cellMargin:t.cellMargin,cx:o,cy:l}},c.prototype.drawBackground=function(e){o.frame.show&&(t.save(),t.strokeStyle=i.grid.borderColor,t.lineWidth=i.grid.borderWidth,t.strokeRect(0,0,e.canvasWidth,e.canvasHeight),i.grid.backgroundColor&&(t.fillStyle=i.grid.backgroundColor,t.fillRect(0,0,e.canvasWidth,e.canvasHeight)),t.restore())},c.prototype.drawCellBackground=function(e,a){t.save(),e.cell.border&&e.cell.border.show&&e.cell.border.color&&e.cell.border.width&&(t.strokeStyle=e.cell.border.color,t.lineWidth=e.cell.border.width,t.strokeRect(a.x,a.y,a.cellWidth,a.cellHeight)),e.cell.background&&e.cell.background.color&&(t.fillStyle=e.cell.background.color,t.fillRect(a.x,a.y,a.cellWidth,a.cellHeight)),t.restore()},c.prototype.drawGauge=function(e,t,a,n,r){var i=e.gauge.shadow.show?e.gauge.shadow.blur:0;p(a.cx,a.cy,t.radius,t.width,s(e.gauge.startAngle),s(e.gauge.endAngle),e.gauge.border.color,e.gauge.border.width,e.gauge.background.color,i);var o=function(e,t){for(var a,s=0;s<e.threshold.values.length;s++){var n=e.threshold.values[s];if(a=n.color,t<n.value)break}return a}(e,r),l=u(e,t,r);p(a.cx,a.cy,t.radius-1,t.width-2,s(e.gauge.startAngle),s(l),o,1,o,i)},c.prototype.drawThreshold=function(e,a,r){for(var i=e.gauge.startAngle,o=0;o<e.threshold.values.length;o++){var l=e.threshold.values[o];c1=l.color,a2=u(e,0,l.value),n(t,r.cx,r.cy,a.radius+a.thresholdWidth,a.thresholdWidth-2,s(i),s(a2),c1,1,c1),i=a2}},c.prototype.drawLable=function(e,t,a,s,n){m(a.cx,a.y+a.cellMargin+t.labelMargin+a.offsetY,"flotGaugeLabel"+s,e.label.formatter?e.label.formatter(n.label,n.data[0][1]):text,e.label)},c.prototype.drawValue=function(e,t,a,s,n){m(a.cx,a.cy-e.value.font.size/2,"flotGaugeValue"+s,e.value.formatter?e.value.formatter(n.label,n.data[0][1]):text,e.value)},c.prototype.drawThresholdValues=function(e,t,a,s){h(e,t,a,"Min"+s,e.gauge.min,e.gauge.startAngle),h(e,t,a,"Max"+s,e.gauge.max,e.gauge.endAngle);for(var n=0;n<e.threshold.values.length;n++){var r=e.threshold.values[n];if(r.value>e.gauge.min&&r.value<e.gauge.max){var i=u(e,0,r.value);h(e,t,a,s+"_"+n,r.value,i)}}},c}();function a(e){return"undefined"!=typeof Logger?new Logger(e):null}function s(e){return e*Math.PI}function n(e,t,a,s,n,r,i,o,l,c){if(r!==i){e.save(),e.beginPath(),e.arc(t,a,s,r,i,false),e.lineTo(t+(s-n)*Math.cos(i),a+(s-n)*Math.sin(i)),e.arc(t,a,s-n,i,r,!0),e.closePath(),l&&(e.lineWidth=l),o&&(e.strokeStyle=o,e.stroke()),c&&(e.fillStyle=c,e.fill()),e.restore()}}var r={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(e,t){return e}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(e,t){return parseInt(t)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(e){return e}},values:[]}}}};e.plot.plugins.push({init:function(s){s.hooks.processOptions.push((function(e,t){a(t.series.gauges.debug);t.series.gauges.show&&(t.grid.show=!1,t.legend.show=!1),t.series.gauges.threshold.values.sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}))})),s.hooks.draw.push((function(s,n){var r=s.getOptions().series.gauges;a(r.debug);if(r.show){var i=s.getData();if(i&&i.length){var o=new t(s,n),l=o.calculateLayout();r.debug.layout,o.drawBackground(l);for(var c=0;c<i.length;c++){var d=i[c],u=e.extend({},r,d.gauges);d.gauges&&o.calculateAutoValues(u,l.cellWidth);var p=o.calculateCellLayout(u,l,c);o.drawCellBackground(u,p),u.debug.layout,u.label.show&&o.drawLable(u,l,p,c,d),o.drawGauge(u,l,p,d.label,d.data[0][1]),u.threshold.show&&o.drawThreshold(u,l,p),u.threshold.label.show&&o.drawThresholdValues(u,l,p,c),u.value.show&&o.drawValue(u,l,p,c,d)}}}}))},options:r,name:"gauge",version:"1.1.0"})}(jQuery)},"./public/vendor/flot/jquery.flot.js":()=>{!function(e){e.color={},e.color.make=function(t,a,s,n){var r={};return r.r=t||0,r.g=a||0,r.b=s||0,r.a=null!=n?n:1,r.add=function(e,t){for(var a=0;a<e.length;++a)r[e.charAt(a)]+=t;return r.normalize()},r.scale=function(e,t){for(var a=0;a<e.length;++a)r[e.charAt(a)]*=t;return r.normalize()},r.toString=function(){return r.a>=1?"rgb("+[r.r,r.g,r.b].join(",")+")":"rgba("+[r.r,r.g,r.b,r.a].join(",")+")"},r.normalize=function(){function e(e,t,a){return t<e?e:t>a?a:t}return r.r=e(0,parseInt(r.r),255),r.g=e(0,parseInt(r.g),255),r.b=e(0,parseInt(r.b),255),r.a=e(0,r.a,1),r},r.clone=function(){return e.color.make(r.r,r.b,r.g,r.a)},r.normalize()},e.color.extract=function(t,a){var s;do{if(""!=(s=t.css(a).toLowerCase())&&"transparent"!=s)break;t=t.parent()}while(t.length&&!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==s&&(s="transparent"),e.color.parse(s)},e.color.parse=function(a){var s,n=e.color.make;if(s=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))return n(parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10));if(s=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return n(parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10),parseFloat(s[4]));if(s=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))return n(2.55*parseFloat(s[1]),2.55*parseFloat(s[2]),2.55*parseFloat(s[3]));if(s=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return n(2.55*parseFloat(s[1]),2.55*parseFloat(s[2]),2.55*parseFloat(s[3]),parseFloat(s[4]));if(s=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))return n(parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16));if(s=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))return n(parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16));var r=e.trim(a).toLowerCase();return"transparent"==r?n(255,255,255,0):n((s=t[r]||[0,0,0])[0],s[1],s[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){var t=Object.prototype.hasOwnProperty;function a(t,a){var s=a.children("."+t)[0];if(null==s&&((s=document.createElement("canvas")).className=t,e(s).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(a),!s.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");s=window.G_vmlCanvasManager.initElement(s)}this.element=s;var n=this.context=s.getContext("2d"),r=window.devicePixelRatio||1,i=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;this.pixelRatio=r/i,this.resize(a.width(),a.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}function s(t,s,n,r){var i=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},l=null,c=null,d=null,u=null,p=null,h=[],m=[],g={left:0,right:0,top:0,bottom:0},f=0,b=0,v={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},x=this;function y(e,t){t=[x].concat(t);for(var a=0;a<e.length;++a)e[a].apply(this,t)}function w(t){i=function(t){for(var a=[],s=0;s<t.length;++s){var n=e.extend(!0,{},o.series);null!=t[s].data?(n.data=t[s].data,delete t[s].data,e.extend(!0,n,t[s]),t[s].data=n.data):n.data=t[s],a.push(n)}return a}(t),function(){var t,a=i.length,s=-1;for(t=0;t<i.length;++t){var n=i[t].color;null!=n&&(a--,"number"==typeof n&&n>s&&(s=n))}a<=s&&(a=s+1);var r,l=[],c=o.colors,d=c.length,u=0;for(t=0;t<a;t++)r=e.color.parse(c[t%d]||"#666"),t%d==0&&t&&(u=u>=0?u<.5?-u-.2:0:-u),l[t]=r.scale("rgb",1+u);var p,g=0;for(t=0;t<i.length;++t){if(null==(p=i[t]).color?(p.color=l[g].toString(),++g):"number"==typeof p.color&&(p.color=l[p.color].toString()),null==p.lines.show){var f,b=!0;for(f in p)if(p[f]&&p[f].show){b=!1;break}b&&(p.lines.show=!0)}null==p.lines.zero&&(p.lines.zero=!!p.lines.fill),p.xaxis=S(h,j(p,"x")),p.yaxis=S(m,j(p,"y"))}}(),function(){var t,a,s,n,r,o,l,c,d,u,p,h,m=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,f=Number.MAX_VALUE;function b(e,t,a){t<e.datamin&&t!=-f&&(e.datamin=t),a>e.datamax&&a!=f&&(e.datamax=a)}for(e.each(C(),(function(e,t){t.datamin=m,t.datamax=g,t.used=!1})),t=0;t<i.length;++t)(r=i[t]).datapoints={points:[]},y(v.processRawData,[r,r.data,r.datapoints]);for(t=0;t<i.length;++t){if(p=(r=i[t]).data,!(h=r.datapoints.format)){if((h=[]).push({x:!0,number:!0,required:!0}),h.push({y:!0,number:!0,required:!0}),r.stack||r.bars.show||r.lines.show&&r.lines.fill){var x=!!(r.bars.show&&r.bars.zero||r.lines.show&&r.lines.zero);h.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:x}),r.bars.horizontal&&(delete h[h.length-1].y,h[h.length-1].x=!0)}r.datapoints.format=h}if(null==r.datapoints.pointsize){r.datapoints.pointsize=h.length,l=r.datapoints.pointsize,o=r.datapoints.points;var w=r.lines.show&&r.lines.steps;for(r.xaxis.used=r.yaxis.used=!0,a=s=0;a<p.length;++a,s+=l){var j=null==(u=p[a]);if(!j)for(n=0;n<l;++n)c=u[n],(d=h[n])&&(d.number&&null!=c&&(c=+c,isNaN(c)?c=null:c==1/0?c=f:c==-1/0&&(c=-f)),null==c&&(d.required&&(j=!0),null!=d.defaultValue&&(c=d.defaultValue))),o[s+n]=c;if(j)for(n=0;n<l;++n)null!=(c=o[s+n])&&!1!==(d=h[n]).autoscale&&(d.x&&b(r.xaxis,c,c),d.y&&b(r.yaxis,c,c)),o[s+n]=null;if(w&&s>0&&(!j||null!=o[s-l])){for(n=0;n<l;++n)o[s+l+n]=o[s+n];o[s+1]=o[s-l+1]||0,j&&(o[s]=u[0]),s+=l}}}}for(t=0;t<i.length;++t){if(o=(r=i[t]).datapoints.points,l=r.datapoints.pointsize,"negative-Y"===r.transform)for(a=0;a<o.length;a+=l)null!=o[a]&&(c=o[a+1],o[a+1]=-c);y(v.processDatapoints,[r,r.datapoints])}for(t=0;t<i.length;++t){o=(r=i[t]).datapoints.points,l=r.datapoints.pointsize,h=r.datapoints.format;var k=m,S=m,T=g,O=g;for(a=0;a<o.length;a+=l)if(null!=o[a])for(n=0;n<l;++n)c=o[a+n],(d=h[n])&&!1!==d.autoscale&&c!=f&&c!=-f&&(d.x&&(c<k&&(k=c),c>T&&(T=c)),d.y&&(c<S&&(S=c),c>O&&(O=c)));if(r.bars.show){var _;switch(r.bars.align){case"left":_=0;break;case"right":_=-r.bars.barWidth;break;default:_=-r.bars.barWidth/2}r.bars.horizontal?(S+=_,O+=_+r.bars.barWidth):(k+=_,T+=_+r.bars.barWidth)}b(r.xaxis,k,T),b(r.yaxis,S,O)}e.each(C(),(function(e,t){t.datamin==m&&(t.datamin=null),t.datamax==g&&(t.datamax=null)}))}()}function j(e,t){var a=e[t+"axis"];return"object"==typeof a&&(a=a.n),"number"!=typeof a&&(a=1),a}function C(){return e.grep(h.concat(m),(function(e){return e}))}function k(e){var t,a,s={};for(t=0;t<h.length;++t)(a=h[t])&&(s["x"+a.n]=a.c2p(e.left));for(t=0;t<m.length;++t)(a=m[t])&&(s["y"+a.n]=a.c2p(e.top));return void 0!==s.x1&&(s.x=s.x1),void 0!==s.y1&&(s.y=s.y1),s}function S(t,a){return t[a-1]||(t[a-1]={n:a,direction:t==h?"x":"y",options:e.extend(!0,{},t==h?o.xaxis:o.yaxis)}),t[a-1]}function T(){V&&clearTimeout(V),d.unbind("mousemove",B),d.unbind("mouseleave",U),d.unbind("click",H),e(document).unbind("touchend",q),y(v.shutdown,[d])}function O(e){for(var t=e.options,a=e.ticks||[],s=t.labelWidth||0,n=t.labelHeight||0,r=s||("x"==e.direction?Math.floor(l.width/(a.length||1)):null),i=e.direction+"Axis "+e.direction+e.n+"Axis",o="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+i,c=t.font||"flot-tick-label tickLabel",d=0;d<a.length;++d){var u=a[d];if(u.label){var p=l.getTextInfo(o,u.label,c,null,r);s=Math.max(s,p.width+1),n=Math.max(n,p.height)}}e.labelWidth=t.labelWidth||s,e.labelHeight=t.labelHeight||n}function _(t){var a=t.labelWidth,s=t.labelHeight,n=t.options.position,r="x"===t.direction,i=t.options.tickLength,c=o.grid.axisMargin,d=o.grid.labelMargin,u=o.grid.eventSectionHeight,p=!0,f=!0,b=!0,v=!1;e.each(r?h:m,(function(e,a){a&&(a.show||a.reserveSpace)&&(a===t?v=!0:a.options.position===n&&(v?f=!1:p=!1),v||(b=!1))})),f&&(c=0),null==i&&(i=b?"full":5),isNaN(+i)||(d+=+i),r?(s+=d,s+=u,"bottom"==n?(g.bottom+=s+c,t.box={top:l.height-g.bottom,height:s}):(t.box={top:g.top+c,height:s},g.top+=s+c)):(a+=d,"left"==n?(t.box={left:g.left+c,width:a},g.left+=a+c):(g.right+=a+c,t.box={left:l.width-g.right,width:a})),t.position=n,t.tickLength=i,t.box.padding=d,t.box.eventSectionPadding=u,t.innermost=p}function N(){var a=C(),s=o.grid.show;for(var n in g){var r=o.grid.margin||0;g[n]="number"==typeof r?r:r[n]||0}for(var n in y(v.processOffset,[g]),g)"object"==typeof o.grid.borderWidth?g[n]+=s?o.grid.borderWidth[n]:0:g[n]+=s?o.grid.borderWidth:0;if(e.each(a,(function(e,t){var a=t.options;t.show=null==a.show?t.used:a.show,t.reserveSpace=null==a.reserveSpace?t.show:a.reserveSpace,function(e){var t=e.options,a=+(null!=t.min?t.min:e.datamin),s=+(null!=t.max?t.max:e.datamax),n=s-a;if(0==n){var r=.25,i=Math.abs(0==s?1:s*r);null==t.min&&(a-=i),null!=t.max&&null==t.min||(s+=i)}else{var o=t.autoscaleMargin;null!=o&&(null==t.min&&(a-=n*o)<0&&null!=e.datamin&&e.datamin>=0&&(a=0),null==t.max&&(s+=n*o)>0&&null!=e.datamax&&e.datamax<=0&&(s=0))}e.min=a,e.max=s}(t)})),y(v.processRange,[]),s){for(var c=e.grep(a,(function(e){return e.show||e.reserveSpace})),d=!1,u=0;u<2&&(e.each(c,(function(e,t){I(t),P(t),d=M(t,t.ticks)||d,O(t)})),d&&v.processRange.length>0);u++)y(v.processRange,[]),d=!1;for(u=c.length-1;u>=0;--u)_(c[u]);!function(){var t,a=o.grid.minBorderMargin;if(null==a)for(a=0,t=0;t<i.length;++t)a=Math.max(a,2*(i[t].points.radius+i[t].points.lineWidth/2));var s={left:a,right:a,top:a,bottom:a};e.each(C(),(function(e,t){t.reserveSpace&&t.ticks&&t.ticks.length&&("x"===t.direction?(s.left=Math.max(s.left,t.labelWidth/2),s.right=Math.max(s.right,t.labelWidth/2)):(s.bottom=Math.max(s.bottom,t.labelHeight/2),s.top=Math.max(s.top,t.labelHeight/2)))})),g.left=Math.ceil(Math.max(s.left,g.left)),g.right=Math.ceil(Math.max(s.right,g.right)),g.top=Math.ceil(Math.max(s.top,g.top)),g.bottom=Math.ceil(Math.max(s.bottom,g.bottom))}(),e.each(c,(function(e,t){!function(e){"x"==e.direction?(e.box.left=g.left-e.labelWidth/2,e.box.width=l.width-g.left-g.right+e.labelWidth):(e.box.top=g.top-e.labelHeight/2,e.box.height=l.height-g.bottom-g.top+e.labelHeight)}(t)}))}f=l.width-g.left-g.right,b=l.height-g.bottom-g.top,e.each(a,(function(e,t){!function(e){function t(e){return e}var a,s,n=e.options.transform||t,r=e.options.inverseTransform;"x"==e.direction?(a=e.scale=f/Math.abs(n(e.max)-n(e.min)),s=Math.min(n(e.max),n(e.min))):(a=-(a=e.scale=b/Math.abs(n(e.max)-n(e.min))),s=Math.max(n(e.max),n(e.min))),e.p2c=n==t?function(e){return(e-s)*a}:function(e){return(n(e)-s)*a},e.c2p=r?function(e){return r(s+e/a)}:function(e){return s+e/a}}(t)})),s&&e.each(C(),(function(e,t){var a,s,n,r,i,o=t.box,c=t.direction+"Axis "+t.direction+t.n+"Axis",d="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+c,u=t.options.font||"flot-tick-label tickLabel";if(l.removeText(d),t.show&&0!=t.ticks.length)for(var p=0;p<t.ticks.length;++p)!(a=t.ticks[p]).label||a.v<t.min||a.v>t.max||("x"==t.direction?(r="center",s=g.left+t.p2c(a.v),"bottom"==t.position?n=o.top+o.padding+o.eventSectionPadding:(n=o.top+o.height-o.padding,i="bottom")):(i="middle",n=g.top+t.p2c(a.v),"left"==t.position?(s=o.left+o.width-o.padding,r="right"):s=o.left+o.padding),l.addText(d,s,n,a.label,u,null,null,r,i))})),function(){null!=o.legend.container?e(o.legend.container).html(""):t.find(".legend").remove();if(!o.legend.show)return;for(var a,s,n=[],r=[],l=!1,c=o.legend.labelFormatter,d=0;d<i.length;++d)(a=i[d]).label&&(s=c?c(a.label,a):a.label)&&r.push({label:s,color:a.color});if(o.legend.sorted)if(e.isFunction(o.legend.sorted))r.sort(o.legend.sorted);else if("reverse"==o.legend.sorted)r.reverse();else{var u="descending"!=o.legend.sorted;r.sort((function(e,t){return e.label==t.label?0:e.label<t.label!=u?1:-1}))}for(d=0;d<r.length;++d){var p=r[d];d%o.legend.noColumns==0&&(l&&n.push("</tr>"),n.push("<tr>"),l=!0),n.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+p.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+p.label+"</td>")}l&&n.push("</tr>");if(0==n.length)return;var h='<table style="font-size:smaller;color:'+o.grid.color+'">'+n.join("")+"</table>";if(null!=o.legend.container)e(o.legend.container).html(h);else{var m="",f=o.legend.position,b=o.legend.margin;null==b[0]&&(b=[b,b]),"n"==f.charAt(0)?m+="top:"+(b[1]+g.top)+"px;":"s"==f.charAt(0)&&(m+="bottom:"+(b[1]+g.bottom)+"px;"),"e"==f.charAt(1)?m+="right:"+(b[0]+g.right)+"px;":"w"==f.charAt(1)&&(m+="left:"+(b[0]+g.left)+"px;");var v=e('<div class="legend">'+h.replace('style="','style="position:absolute;'+m+";")+"</div>").appendTo(t);if(0!=o.legend.backgroundOpacity){var x=o.legend.backgroundColor;null==x&&((x=(x=o.grid.backgroundColor)&&"string"==typeof x?e.color.parse(x):e.color.extract(v,"background-color")).a=1,x=x.toString());var y=v.children();e('<div style="position:absolute;width:'+y.width()+"px;height:"+y.height()+"px;"+m+"background-color:"+x+';"> </div>').prependTo(v).css("opacity",o.legend.backgroundOpacity)}}}()}function I(t){var a,s=t.options;a="number"==typeof s.ticks&&s.ticks>0?s.ticks:.3*Math.sqrt("x"==t.direction?l.width:l.height);var n=(t.max-t.min)/a,r=-Math.floor(Math.log(n)/Math.LN10),i=s.tickDecimals;null!=i&&r>i&&(r=i);var o,c=Math.pow(10,-r),d=n/c;if(d<1.5?o=1:d<3?(o=2,d>2.25&&(null==i||r+1<=i)&&(o=2.5,++r)):o=d<7.5?5:10,o*=c,null!=s.minTickSize&&o<s.minTickSize&&(o=s.minTickSize),t.delta=n,t.tickDecimals=Math.max(0,null!=i?i:r),t.tickSize=s.tickSize||o,"time"==s.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,a,s,n=[],r=(a=e.min,(s=e.tickSize)*Math.floor(a/s)),i=0,o=Number.NaN;do{t=o,o=r+i*e.tickSize,n.push(o),++i}while(o<e.max&&o!=t);return n},t.tickFormatter=function(e,t){var a=t.tickDecimals?Math.pow(10,t.tickDecimals):1,s=""+Math.round(e*a)/a;if(null!=t.tickDecimals){var n=s.indexOf("."),r=-1==n?0:s.length-n-1;if(r<t.tickDecimals)return(r?s:s+".")+(""+a).substr(1,t.tickDecimals-r)}return s}),e.isFunction(s.tickFormatter)&&(t.tickFormatter=function(e,t){return""+s.tickFormatter(e,t)}),null!=s.alignTicksWithAxis){var u=("x"==t.direction?h:m)[s.alignTicksWithAxis-1];if(u&&u.used&&u!=t){var p=t.tickGenerator(t);if(p.length>0&&(null==s.min&&(t.min=Math.min(t.min,p[0])),null==s.max&&p.length>1&&(t.max=Math.max(t.max,p[p.length-1]))),t.tickGenerator=function(e){var t,a,s=[];for(a=0;a<u.ticks.length;++a)t=(u.ticks[a].v-u.min)/(u.max-u.min),t=e.min+t*(e.max-e.min),s.push(t);return s},!t.mode&&null==s.tickDecimals){var g=Math.max(0,1-Math.floor(Math.log(t.delta)/Math.LN10)),f=t.tickGenerator(t);f.length>1&&/\..*0$/.test((f[1]-f[0]).toFixed(g))||(t.tickDecimals=g)}}}}function P(t){var a,s,n=t.options.ticks,r=[];for(null==n||"number"==typeof n&&n>0?r=t.tickGenerator(t):n&&(r=e.isFunction(n)?n(t):n),t.ticks=[],a=0;a<r.length;++a){var i=null,o=r[a];"object"==typeof o?(s=+o[0],o.length>1&&(i=o[1])):s=+o,null==i&&(i=t.tickFormatter(s,t)),isNaN(s)||t.ticks.push({v:s,label:i})}}function M(e,t){var a=!1;return e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v),a=!0),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v),a=!0)),a}function F(){l.clear(),y(v.drawBackground,[u]);var e=o.grid;e.show&&e.backgroundColor&&(u.save(),u.translate(g.left,g.top),u.fillStyle=ee(o.grid.backgroundColor,b,0,"rgba(255, 255, 255, 0)"),u.fillRect(0,0,f,b),u.restore()),e.show&&!e.aboveData&&D();for(var t=0;t<i.length;++t)y(v.drawSeries,[u,i[t]]),$(i[t]);y(v.draw,[u]),e.show&&e.aboveData&&D(),l.render(),G()}function A(e,t){for(var a,s,n,r,i=C(),o=0;o<i.length;++o)if((a=i[o]).direction==t&&(e[r=t+a.n+"axis"]||1!=a.n||(r=t+"axis"),e[r])){s=e[r].from,n=e[r].to;break}if(e[r]||(a="x"==t?h[0]:m[0],s=e[t+"1"],n=e[t+"2"]),null!=s&&null!=n&&s>n){var l=s;s=n,n=l}return{from:s,to:n,axis:a}}function D(){var t,a,s,n;u.save(),u.translate(g.left,g.top);var r=o.grid.markings;if(r)for(e.isFunction(r)&&((a=x.getAxes()).xmin=a.xaxis.min,a.xmax=a.xaxis.max,a.ymin=a.yaxis.min,a.ymax=a.yaxis.max,r=r(a)),t=0;t<r.length;++t){var i=r[t],l=A(i,"x"),c=A(i,"y");if(null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),null==c.from&&(c.from=c.axis.min),null==c.to&&(c.to=c.axis.max),!(l.to<l.axis.min||l.from>l.axis.max||c.to<c.axis.min||c.from>c.axis.max)){l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max),c.from=Math.max(c.from,c.axis.min),c.to=Math.min(c.to,c.axis.max);var d=l.from===l.to,p=c.from===c.to;if(!d||!p)if(l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),c.from=Math.floor(c.axis.p2c(c.from)),c.to=Math.floor(c.axis.p2c(c.to)),d||p){var h=i.lineWidth||o.grid.markingsLineWidth,m=h%2?.5:0;u.beginPath(),u.strokeStyle=i.color||o.grid.markingsColor,u.lineWidth=h,d?(u.moveTo(l.to+m,c.from),u.lineTo(l.to+m,c.to)):(u.moveTo(l.from,c.to+m),u.lineTo(l.to,c.to+m)),u.stroke()}else u.fillStyle=i.color||o.grid.markingsColor,u.fillRect(l.from,c.to,l.to-l.from,c.from-c.to)}}a=C(),s=o.grid.borderWidth;for(var v=0;v<a.length;++v){var y,w,j,k,S=a[v],T=S.box,O=S.tickLength;if(S.show&&0!=S.ticks.length){for(u.lineWidth=1,"x"==S.direction?(y=0,w="full"==O?"top"==S.position?0:b:T.top-g.top+("top"==S.position?T.height:0)):(w=0,y="full"==O?"left"==S.position?0:f:T.left-g.left+("left"==S.position?T.width:0)),S.innermost||(u.strokeStyle=S.options.color,u.beginPath(),j=k=0,"x"==S.direction?j=f+1:k=b+1,1==u.lineWidth&&("x"==S.direction?w=Math.floor(w)+.5:y=Math.floor(y)+.5),u.moveTo(y,w),u.lineTo(y+j,w+k),u.stroke()),u.strokeStyle=S.options.tickColor,u.beginPath(),t=0;t<S.ticks.length;++t){var _=S.ticks[t].v;j=k=0,isNaN(_)||_<S.min||_>S.max||"full"==O&&("object"==typeof s&&s[S.position]>0||s>0)&&(_==S.min||_==S.max)||("x"==S.direction?(y=S.p2c(_),k="full"==O?-b:O,"top"==S.position&&(k=-k)):(w=S.p2c(_),j="full"==O?-f:O,"left"==S.position&&(j=-j)),1==u.lineWidth&&("x"==S.direction?y=Math.floor(y)+.5:w=Math.floor(w)+.5),u.moveTo(y,w),u.lineTo(y+j,w+k))}u.stroke()}}s&&(n=o.grid.borderColor,"object"==typeof s||"object"==typeof n?("object"!=typeof s&&(s={top:s,right:s,bottom:s,left:s}),"object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),s.top>0&&(u.strokeStyle=n.top,u.lineWidth=s.top,u.beginPath(),u.moveTo(0-s.left,0-s.top/2),u.lineTo(f,0-s.top/2),u.stroke()),s.right>0&&(u.strokeStyle=n.right,u.lineWidth=s.right,u.beginPath(),u.moveTo(f+s.right/2,0-s.top),u.lineTo(f+s.right/2,b),u.stroke()),s.bottom>0&&(u.strokeStyle=n.bottom,u.lineWidth=s.bottom,u.beginPath(),u.moveTo(f+s.right,b+s.bottom/2),u.lineTo(0,b+s.bottom/2),u.stroke()),s.left>0&&(u.strokeStyle=n.left,u.lineWidth=s.left,u.beginPath(),u.moveTo(0-s.left/2,b+s.bottom),u.lineTo(0-s.left/2,0),u.stroke())):(u.lineWidth=s,u.strokeStyle=o.grid.borderColor,u.strokeRect(-s/2,-s/2,f+s,b+s))),u.restore()}function $(e){e.lines.show&&(function(e){function t(e,t,a,s,n){var r=e.points,i=e.pointsize,o=null,l=null;u.beginPath();for(var c=i;c<r.length;c+=i){var d=r[c-i],p=r[c-i+1],h=r[c],m=r[c+1];if(null!=d&&null!=h){if(p<=m&&p<n.min){if(m<n.min)continue;d=(n.min-p)/(m-p)*(h-d)+d,p=n.min}else if(m<=p&&m<n.min){if(p<n.min)continue;h=(n.min-p)/(m-p)*(h-d)+d,m=n.min}if(p>=m&&p>n.max){if(m>n.max)continue;d=(n.max-p)/(m-p)*(h-d)+d,p=n.max}else if(m>=p&&m>n.max){if(p>n.max)continue;h=(n.max-p)/(m-p)*(h-d)+d,m=n.max}if(d<=h&&d<s.min){if(h<s.min)continue;p=(s.min-d)/(h-d)*(m-p)+p,d=s.min}else if(h<=d&&h<s.min){if(d<s.min)continue;m=(s.min-d)/(h-d)*(m-p)+p,h=s.min}if(d>=h&&d>s.max){if(h>s.max)continue;p=(s.max-d)/(h-d)*(m-p)+p,d=s.max}else if(h>=d&&h>s.max){if(d>s.max)continue;m=(s.max-d)/(h-d)*(m-p)+p,h=s.max}d==o&&p==l||u.moveTo(s.p2c(d)+t,n.p2c(p)+a),o=h,l=m,u.lineTo(s.p2c(h)+t,n.p2c(m)+a)}}u.stroke()}function a(e,t,a){for(var s=e.points,n=e.pointsize,r=Math.min(Math.max(0,a.min),a.max),i=0,o=!1,l=1,c=0,d=0;!(n>0&&i>s.length+n);){var p=s[(i+=n)-n],h=s[i-n+l],m=s[i],g=s[i+l];if(o){if(n>0&&null!=p&&null==m){d=i,n=-n,l=2;continue}if(n<0&&i==c+n){u.fill(),o=!1,l=1,i=c=d+(n=-n);continue}}if(null!=p&&null!=m){if(p<=m&&p<t.min){if(m<t.min)continue;h=(t.min-p)/(m-p)*(g-h)+h,p=t.min}else if(m<=p&&m<t.min){if(p<t.min)continue;g=(t.min-p)/(m-p)*(g-h)+h,m=t.min}if(p>=m&&p>t.max){if(m>t.max)continue;h=(t.max-p)/(m-p)*(g-h)+h,p=t.max}else if(m>=p&&m>t.max){if(p>t.max)continue;g=(t.max-p)/(m-p)*(g-h)+h,m=t.max}if(o||(u.beginPath(),u.moveTo(t.p2c(p),a.p2c(r)),o=!0),h>=a.max&&g>=a.max)u.lineTo(t.p2c(p),a.p2c(a.max)),u.lineTo(t.p2c(m),a.p2c(a.max));else if(h<=a.min&&g<=a.min)u.lineTo(t.p2c(p),a.p2c(a.min)),u.lineTo(t.p2c(m),a.p2c(a.min));else{var f=p,b=m;h<=g&&h<a.min&&g>=a.min?(p=(a.min-h)/(g-h)*(m-p)+p,h=a.min):g<=h&&g<a.min&&h>=a.min&&(m=(a.min-h)/(g-h)*(m-p)+p,g=a.min),h>=g&&h>a.max&&g<=a.max?(p=(a.max-h)/(g-h)*(m-p)+p,h=a.max):g>=h&&g>a.max&&h<=a.max&&(m=(a.max-h)/(g-h)*(m-p)+p,g=a.max),p!=f&&u.lineTo(t.p2c(f),a.p2c(h)),u.lineTo(t.p2c(p),a.p2c(h)),u.lineTo(t.p2c(m),a.p2c(g)),m!=b&&(u.lineTo(t.p2c(m),a.p2c(g)),u.lineTo(t.p2c(b),a.p2c(g)))}}}}u.save(),u.translate(g.left,g.top),u.lineJoin="round";var s=e.lines.lineWidth,n=e.shadowSize;if(s>0&&n>0){u.lineWidth=n,u.strokeStyle="rgba(0,0,0,0.1)";var r=Math.PI/18;t(e.datapoints,Math.sin(r)*(s/2+n/2),Math.cos(r)*(s/2+n/2),e.xaxis,e.yaxis),u.lineWidth=n/2,t(e.datapoints,Math.sin(r)*(s/2+n/4),Math.cos(r)*(s/2+n/4),e.xaxis,e.yaxis)}u.lineWidth=s,u.strokeStyle=e.color;var i=E(e.lines,e.color,0,b);i&&(u.fillStyle=i,a(e.datapoints,e.xaxis,e.yaxis));s>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis);u.restore()}(e),e.points.show||e.bars.show||function(e){for(var t=[],a=null,s=null,n=e.datapoints,r=[],i=0;i<n.pointsize-2;i++)r.push(0);for(var o=0;o<n.points.length;o+=n.pointsize){var l=n.points[o],c=n.points[o+1];s=o===n.points.length-n.pointsize?null:n.points[o+n.pointsize],null!==l&&null!==c&&null===a&&null===s&&(t.push(l),t.push(c),t.push.apply(t,r)),a=l}var d=n.points;n.points=t,e.points.radius=e.lines.lineWidth/2,L(e),n.points=d}(e)),e.bars.show&&function(e){function t(t,a,s,n,r,i){for(var o=t.points,l=t.pointsize,c=0;c<o.length;c+=l)null!=o[c]&&R(o[c],o[c+1],o[c+2],a,s,n,r,i,u,e.bars.horizontal,e.bars.lineWidth)}var a;switch(u.save(),u.translate(g.left,g.top),u.lineWidth=e.bars.lineWidth,u.strokeStyle=e.color,e.bars.align){case"left":a=0;break;case"right":a=-e.bars.barWidth;break;default:a=-e.bars.barWidth/2}var s=e.bars.fill?function(t,a){return E(e.bars,e.color,t,a)}:null;t(e.datapoints,a,a+e.bars.barWidth,s,e.xaxis,e.yaxis),u.restore()}(e),e.points.show&&L(e)}function L(e){function t(e,t,a,s,n,r,i,o){for(var l=e.points,c=e.pointsize,d=0;d<l.length;d+=c){var p=l[d],h=l[d+1];null==p||p<r.min||p>r.max||h<i.min||h>i.max||(u.beginPath(),p=r.p2c(p),h=i.p2c(h)+s,"circle"==o?u.arc(p,h,t,0,n?Math.PI:2*Math.PI,!1):o(u,p,h,t,n),u.closePath(),a&&(u.fillStyle=a,u.fill()),u.stroke())}}u.save(),u.translate(g.left,g.top);var a=e.points.lineWidth,s=e.shadowSize,n=e.points.radius,r=e.points.symbol;if(0==a&&(a=1e-4),a>0&&s>0){var i=s/2;u.lineWidth=i,u.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,n,null,i+i/2,!0,e.xaxis,e.yaxis,r),u.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,n,null,i/2,!0,e.xaxis,e.yaxis,r)}u.lineWidth=a,u.strokeStyle=e.color,t(e.datapoints,n,E(e.points,e.color),0,!1,e.xaxis,e.yaxis,r),u.restore()}function R(e,t,a,s,n,r,i,o,l,c,d){var u,p,h,m,g,f,b,v,x;c?(v=f=b=!0,g=!1,m=t+s,h=t+n,(p=e)<(u=a)&&(x=p,p=u,u=x,g=!0,f=!1)):(g=f=b=!0,v=!1,u=e+s,p=e+n,(m=t)<(h=a)&&(x=m,m=h,h=x,v=!0,b=!1)),p<i.min||u>i.max||m<o.min||h>o.max||(u<i.min&&(u=i.min,g=!1),p>i.max&&(p=i.max,f=!1),h<o.min&&(h=o.min,v=!1),m>o.max&&(m=o.max,b=!1),u=i.p2c(u),h=o.p2c(h),p=i.p2c(p),m=o.p2c(m),r&&(l.fillStyle=r(h,m),l.fillRect(u,m,p-u,h-m)),d>0&&(g||f||b||v)&&(l.beginPath(),l.moveTo(u,h),g?l.lineTo(u,m):l.moveTo(u,m),b?l.lineTo(p,m):l.moveTo(p,m),f?l.lineTo(p,h):l.moveTo(p,h),v?l.lineTo(u,h):l.moveTo(u,h),l.stroke()))}function E(t,a,s,n){var r=t.fill;if(!r)return null;if(t.fillColor)return ee(t.fillColor,s,n,a);var i=e.color.parse(a);return i.a="number"==typeof r?r:.4,i.normalize(),i.toString()}x.setData=w,x.setupGrid=N,x.draw=F,x.getPlaceholder=function(){return t},x.getCanvas=function(){return l.element},x.getPlotOffset=function(){return g},x.width=function(){return f},x.height=function(){return b},x.offset=function(){var e=d.offset();return e.left+=g.left,e.top+=g.top,e},x.getData=function(){return i},x.getAxes=function(){var t={};return e.each(h.concat(m),(function(e,a){a&&(t[a.direction+(1!=a.n?a.n:"")+"axis"]=a)})),t},x.getXAxes=function(){return h},x.getYAxes=function(){return m},x.c2p=k,x.p2c=function(e){var t,a,s,n={};for(t=0;t<h.length;++t)if((a=h[t])&&a.used&&(s="x"+a.n,null==e[s]&&1==a.n&&(s="x"),null!=e[s])){n.left=a.p2c(e[s]);break}for(t=0;t<m.length;++t)if((a=m[t])&&a.used&&(s="y"+a.n,null==e[s]&&1==a.n&&(s="y"),null!=e[s])){n.top=a.p2c(e[s]);break}return n},x.getOptions=function(){return o},x.highlight=Q,x.unhighlight=K,x.triggerRedrawOverlay=G,x.pointOffset=function(e){return{left:parseInt(h[j(e,"x")-1].p2c(+e.x)+g.left,10),top:parseInt(m[j(e,"y")-1].p2c(+e.y)+g.top,10)}},x.shutdown=T,x.destroy=function(){T(),t.removeData("plot").empty(),i=[],o=null,l=null,c=null,d=null,u=null,p=null,h=[],m=[],v=null,z=[],x=null},x.resize=function(){var e=t.width(),a=t.height();l.resize(e,a),c.resize(e,a)},x.hooks=v,function(){for(var t={Canvas:a},s=0;s<r.length;++s){var n=r[s];n.init(x,t),n.options&&e.extend(!0,o,n.options)}}(),function(a){e.extend(!0,o,a),a&&a.colors&&(o.colors=a.colors);null==o.xaxis.color&&(o.xaxis.color=e.color.parse(o.grid.color).scale("a",.22).toString());null==o.yaxis.color&&(o.yaxis.color=e.color.parse(o.grid.color).scale("a",.22).toString());null==o.xaxis.tickColor&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color);null==o.yaxis.tickColor&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color);null==o.grid.borderColor&&(o.grid.borderColor=o.grid.color);null==o.grid.tickColor&&(o.grid.tickColor=e.color.parse(o.grid.color).scale("a",.22).toString());var s,n,r,i=t.css("font-size"),l=i?+i.replace("px",""):13,c={style:t.css("font-style"),size:Math.round(.8*l),variant:t.css("font-variant"),weight:t.css("font-weight"),family:t.css("font-family")};for(r=o.xaxes.length||1,s=0;s<r;++s)(n=o.xaxes[s])&&!n.tickColor&&(n.tickColor=n.color),n=e.extend(!0,{},o.xaxis,n),o.xaxes[s]=n,n.font&&(n.font=e.extend({},c,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));for(r=o.yaxes.length||1,s=0;s<r;++s)(n=o.yaxes[s])&&!n.tickColor&&(n.tickColor=n.color),n=e.extend(!0,{},o.yaxis,n),o.yaxes[s]=n,n.font&&(n.font=e.extend({},c,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));o.xaxis.noTicks&&null==o.xaxis.ticks&&(o.xaxis.ticks=o.xaxis.noTicks);o.yaxis.noTicks&&null==o.yaxis.ticks&&(o.yaxis.ticks=o.yaxis.noTicks);o.x2axis&&(o.xaxes[1]=e.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",null==o.x2axis.min&&(o.xaxes[1].min=null),null==o.x2axis.max&&(o.xaxes[1].max=null));o.y2axis&&(o.yaxes[1]=e.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",null==o.y2axis.min&&(o.yaxes[1].min=null),null==o.y2axis.max&&(o.yaxes[1].max=null));o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas);o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor);o.lines&&e.extend(!0,o.series.lines,o.lines);o.points&&e.extend(!0,o.series.points,o.points);o.bars&&e.extend(!0,o.series.bars,o.bars);null!=o.shadowSize&&(o.series.shadowSize=o.shadowSize);null!=o.highlightColor&&(o.series.highlightColor=o.highlightColor);for(s=0;s<o.xaxes.length;++s)S(h,s+1).options=o.xaxes[s];for(s=0;s<o.yaxes.length;++s)S(m,s+1).options=o.yaxes[s];for(var d in v)o.hooks[d]&&o.hooks[d].length&&(v[d]=v[d].concat(o.hooks[d]));y(v.processOptions,[o])}(n),function(){t.find(".flot-temp-elem").remove(),"static"==t.css("position")&&t.css("position","relative");l=new a("flot-base",t),c=new a("flot-overlay",t),u=l.context,p=c.context,d=e(c.element).unbind();var s=t.data("plot");s&&(s.shutdown(),c.clear());t.data("plot",x)}(),w(s),N(),F(),function(){o.grid.hoverable&&(d.mousemove(B),d.bind("mouseleave",U),e(document).bind("touchend",q));o.grid.clickable&&d.click(H);y(v.bindEvents,[d])}();var z=[],V=null;function B(e){o.grid.hoverable&&W("plothover",e,(function(e){return 0!=e.hoverable}))}function U(e){o.grid.hoverable&&W("plothover",e,(function(e){return!1}))}function H(e){x.isSelecting||W("plotclick",e,(function(e){return 0!=e.clickable}))}function q(e){e.cancelable&&(d.is(e.target)||0!==d.has(e.target).length?(B(function(e){if(!e||!e.originalEvent)return e;if(e.pageX&&e.pageY)return e;var t=e.originalEvent;if(0===t.changedTouches.length)return e;var a=t.changedTouches[0];return e.pageX=a.pageX,e.pageY=a.pageY,e}(e)),e.preventDefault()):W("plotleave",e,(function(e){})))}function W(e,a,s){var n=d.offset(),r=a.pageX-n.left-g.left,l=a.pageY-n.top-g.top,c=k({left:r,top:l});c.pageX=a.pageX,c.pageY=a.pageY,c.ctrlKey=a.ctrlKey,c.metaKey=a.metaKey;var u=function(e,t,a){var s,n,r,l=o.grid.mouseActiveRadius,c=l*l+1,d=null;for(s=i.length-1;s>=0;--s)if(a(i[s])){var u=i[s],p=u.xaxis,h=u.yaxis,m=u.datapoints.points,g=p.c2p(e),f=h.c2p(t),b=l/p.scale,v=l/h.scale;if(r=u.datapoints.pointsize,p.options.inverseTransform&&(b=Number.MAX_VALUE),h.options.inverseTransform&&(v=Number.MAX_VALUE),u.lines.show||u.points.show)for(n=0;n<m.length;n+=r){var x=m[n],y=m[n+1];if(null!=x&&!(x-g>b||x-g<-b||y-f>v||y-f<-v)){var w=Math.abs(p.p2c(x)-e),j=Math.abs(h.p2c(y)-t),C=w*w+j*j;C<c&&(c=C,d=[s,n/r])}}if(u.bars.show&&!d){var k,S;switch(u.bars.align){case"left":k=0;break;case"right":k=-u.bars.barWidth;break;default:k=-u.bars.barWidth/2}for(S=k+u.bars.barWidth,n=0;n<m.length;n+=r){x=m[n],y=m[n+1];var T=m[n+2];null!=x&&(i[s].bars.horizontal?g<=Math.max(T,x)&&g>=Math.min(T,x)&&f>=y+k&&f<=y+S:g>=x+k&&g<=x+S&&f>=Math.min(T,y)&&f<=Math.max(T,y))&&(d=[s,n/r])}}}return d?(s=d[0],n=d[1],r=i[s].datapoints.pointsize,{datapoint:i[s].datapoints.points.slice(n*r,(n+1)*r),dataIndex:n,series:i[s],seriesIndex:s}):null}(r,l,s);if(u&&(u.pageX=parseInt(u.series.xaxis.p2c(u.datapoint[0])+n.left+g.left,10),u.pageY=parseInt(u.series.yaxis.p2c(u.datapoint[1])+n.top+g.top,10)),o.grid.autoHighlight){for(var p=0;p<z.length;++p){var h=z[p];h.auto!=e||u&&h.series==u.series&&h.point[0]==u.datapoint[0]&&h.point[1]==u.datapoint[1]||K(h.series,h.point)}u&&Q(u.series,u.datapoint,e)}t.trigger(e,[c,u])}function G(){var e=o.interaction.redrawOverlayInterval;-1!=e?V||(V=setTimeout(Z,e)):Z()}function Z(){var e,t;for(V=null,p.save(),c.clear(),p.translate(g.left,g.top),e=0;e<z.length;++e)(t=z[e]).series.bars.show?X(t.series,t.point):J(t.series,t.point);p.restore(),y(v.drawOverlay,[p])}function Q(e,t,a){if("number"==typeof e&&(e=i[e]),"number"==typeof t){var s=e.datapoints.pointsize;t=e.datapoints.points.slice(s*t,s*(t+1))}var n=Y(e,t);-1==n?(z.push({series:e,point:t,auto:a}),G()):a||(z[n].auto=!1)}function K(e,t){if(null==e&&null==t)return z=[],void G();if("number"==typeof e&&(e=i[e]),"number"==typeof t){var a=e.datapoints.pointsize;t=e.datapoints.points.slice(a*t,a*(t+1))}var s=Y(e,t);-1!=s&&(z.splice(s,1),G())}function Y(e,t){for(var a=0;a<z.length;++a){var s=z[a];if(s.series==e&&s.point[0]==t[0]&&s.point[1]==t[1])return a}return-1}function J(t,a){var s=a[0],n=a[1],r=t.xaxis,i=t.yaxis,o="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(s<r.min||s>r.max||n<i.min||n>i.max)){var l=t.points.radius+t.points.lineWidth/2;p.lineWidth=l,p.strokeStyle=o;var c=1.5*l;s=r.p2c(s),n=i.p2c(n),p.beginPath(),"circle"==t.points.symbol?p.arc(s,n,c,0,2*Math.PI,!1):t.points.symbol(p,s,n,c,!1),p.closePath(),p.stroke()}}function X(t,a){var s,n="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),r=n;switch(t.bars.align){case"left":s=0;break;case"right":s=-t.bars.barWidth;break;default:s=-t.bars.barWidth/2}p.lineWidth=t.bars.lineWidth,p.strokeStyle=n,R(a[0],a[1],a[2]||0,s,s+t.bars.barWidth,(function(){return r}),t.xaxis,t.yaxis,p,t.bars.horizontal,t.bars.lineWidth)}function ee(t,a,s,n){if("string"==typeof t)return t;for(var r=u.createLinearGradient(0,s,0,a),i=0,o=t.colors.length;i<o;++i){var l=t.colors[i];if("string"!=typeof l){var c=e.color.parse(n);null!=l.brightness&&(c=c.scale("rgb",l.brightness)),null!=l.opacity&&(c.a*=l.opacity),l=c.toString()}r.addColorStop(i/(o-1),l)}return r}}e.fn.detach||(e.fn.detach=function(){return this.each((function(){this.parentNode&&this.parentNode.removeChild(this)}))}),a.prototype.resize=function(e,t){if(e<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var a=this.element,s=this.context,n=this.pixelRatio;this.width!=e&&(a.width=e*n,a.style.width=e+"px",this.width=e),this.height!=t&&(a.height=t*n,a.style.height=t+"px",this.height=t),s.restore(),s.save(),s.scale(n,n)},a.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},a.prototype.render=function(){var e=this._textCache;for(var a in e)if(t.call(e,a)){var s=this.getTextLayer(a),n=e[a];for(var r in s.hide(),n)if(t.call(n,r)){var i=n[r];for(var o in i)if(t.call(i,o)){for(var l,c=i[o].positions,d=0;l=c[d];d++)l.active?l.rendered||(s.append(l.element),l.rendered=!0):(c.splice(d--,1),l.rendered&&l.element.detach());0==c.length&&delete i[o]}}s.show()}},a.prototype.getTextLayer=function(t){var a=this.text[t];return null==a&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),a=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),a},a.prototype.getTextInfo=function(t,a,s,n,r){var i,o,l,c;if(a=""+a,i="object"==typeof s?s.style+" "+s.variant+" "+s.weight+" "+s.size+"px/"+s.lineHeight+"px "+s.family:s,null==(o=this._textCache[t])&&(o=this._textCache[t]={}),null==(l=o[i])&&(l=o[i]={}),null==(c=l[a])){var d=e("<div></div>").html(a).css({position:"absolute","max-width":r,top:-9999}).appendTo(this.getTextLayer(t));"object"==typeof s?d.css({font:i,color:s.color}):"string"==typeof s&&d.addClass(s),c=l[a]={element:d,positions:[]};var u=this._textSizeCache[a];u?(c.width=u.width,c.height=u.height):(c.width=d.outerWidth(!0),c.height=d.outerHeight(!0),this._textSizeCache[a]={width:c.width,height:c.height}),d.detach()}return c},a.prototype.addText=function(e,t,a,s,n,r,i,o,l){var c=this.getTextInfo(e,s,n,r,i),d=c.positions;"center"==o?t-=c.width/2:"right"==o&&(t-=c.width),"middle"==l?a-=c.height/2:"bottom"==l&&(a-=c.height);for(var u,p=0;u=d[p];p++)if(u.x==t&&u.y==a)return void(u.active=!0);u={active:!0,rendered:!1,element:d.length?c.element.clone():c.element,x:t,y:a},d.push(u),u.element.css({top:Math.round(a),left:Math.round(t),"text-align":o})},a.prototype.removeText=function(e,a,s,n,r,i){if(null==n){var o=this._textCache[e];if(null!=o)for(var l in o)if(t.call(o,l)){var c=o[l];for(var d in c)if(t.call(c,d))for(var u=c[d].positions,p=0;h=u[p];p++)h.active=!1}}else{var h;for(u=this.getTextInfo(e,n,r,i).positions,p=0;h=u[p];p++)h.x==a&&h.y==s&&(h.active=!1)}},e.plot=function(t,a,n){return new s(e(t),a,n,e.plot.plugins)},e.plot.version="0.8.3",e.plot.plugins=[],e.fn.plot=function(t,a){return this.each((function(){e.plot(this,t,a)}))}}(jQuery)},"./public/vendor/flot/jquery.flot.selection.js":()=>{!function(e){e.plot.plugins.push({init:function(t){var a={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},s={},n=null;function r(e){a.active&&(u(e),t.getPlaceholder().trigger("plotselecting",[o()]))}function i(r){1==r.which&&(document.body.focus(),void 0!==document.onselectstart&&null==s.onselectstart&&(s.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==s.ondrag&&(s.ondrag=document.ondrag,document.ondrag=function(){return!1}),d(a.first,r),a.active=!0,n=function(e){!function(e){n=null,void 0!==document.onselectstart&&(document.onselectstart=s.onselectstart);void 0!==document.ondrag&&(document.ondrag=s.ondrag);a.active=!1,u(e),m()?l(e):(t.getPlaceholder().trigger("plotunselected",[]),t.getPlaceholder().trigger("plotselecting",[null]));setTimeout((function(){t.isSelecting=!1}),10)}(e)},e(document).one("mouseup",n))}function o(){if(!m())return null;if(!a.show)return null;var s={},n=a.first,r=a.second,i=t.getAxes();return e.each(i,(function(e,t){t.used&&(anyUsed=!1)})),e.each(i,(function(e,t){t.used;var a=t.c2p(n[t.direction]),i=t.c2p(r[t.direction]);s[e]={from:Math.min(a,i),to:Math.max(a,i)}})),s}function l(e){var a=o();a.ctrlKey=e.ctrlKey,a.metaKey=e.metaKey,t.getPlaceholder().trigger("plotselected",[a]),a.xaxis&&a.yaxis&&t.getPlaceholder().trigger("selected",[{x1:a.xaxis.from,y1:a.yaxis.from,x2:a.xaxis.to,y2:a.yaxis.to}])}function c(e,t,a){return t<e?e:t>a?a:t}function d(e,s){var n=t.getOptions(),r=t.getPlaceholder().offset(),i=t.getPlotOffset();e.x=c(0,s.pageX-r.left-i.left,t.width()),e.y=c(0,s.pageY-r.top-i.top,t.height()),"y"==n.selection.mode&&(e.x=e==a.first?0:t.width()),"x"==n.selection.mode&&(e.y=e==a.first?0:t.height())}function u(e){null!=e.pageX&&(d(a.second,e),m()?(t.isSelecting=!0,a.show=!0,t.triggerRedrawOverlay()):p(!0))}function p(e){a.show&&(a.show=!1,t.triggerRedrawOverlay(),e||t.getPlaceholder().trigger("plotunselected",[]))}function h(e,a){var s,n,r,i,o=t.getAxes();for(var l in o)if((s=o[l]).direction==a&&(e[i=a+s.n+"axis"]||1!=s.n||(i=a+"axis"),e[i])){n=e[i].from,r=e[i].to;break}if(e[i]||(s="x"==a?t.getXAxes()[0]:t.getYAxes()[0],n=e[a+"1"],r=e[a+"2"]),null!=n&&null!=r&&n>r){var c=n;n=r,r=c}return{from:n,to:r,axis:s}}function m(){var e=t.getOptions().selection.minSize;return Math.abs(a.second.x-a.first.x)>=e&&Math.abs(a.second.y-a.first.y)>=e}t.clearSelection=p,t.setSelection=function(e,s){var n,r=t.getOptions();"y"==r.selection.mode?(a.first.x=0,a.second.x=t.width()):(n=h(e,"x"),a.first.x=n.axis.p2c(n.from),a.second.x=n.axis.p2c(n.to)),"x"==r.selection.mode?(a.first.y=0,a.second.y=t.height()):(n=h(e,"y"),a.first.y=n.axis.p2c(n.from),a.second.y=n.axis.p2c(n.to)),a.show=!0,t.triggerRedrawOverlay(),!s&&m()&&l()},t.getSelection=o,t.hooks.bindEvents.push((function(e,t){null!=e.getOptions().selection.mode&&(t.mousemove(r),t.mousedown(i))})),t.hooks.drawOverlay.push((function(t,s){if(a.show&&m()){var n=t.getPlotOffset(),r=t.getOptions();s.save(),s.translate(n.left,n.top);var i=e.color.parse(r.selection.color);s.strokeStyle=i.scale("a",.8).toString(),s.lineWidth=1,s.lineJoin=r.selection.shape,s.fillStyle=i.scale("a",.4).toString();var o=Math.min(a.first.x,a.second.x)+.5,l=Math.min(a.first.y,a.second.y)+.5,c=Math.abs(a.second.x-a.first.x)-1,d=Math.abs(a.second.y-a.first.y)-1;s.fillRect(o,l,c,d),s.strokeRect(o,l,c,d),s.restore()}})),t.hooks.shutdown.push((function(t,a){a.unbind("mousemove",r),a.unbind("mousedown",i),n&&(e(document).unbind("mouseup",n),void 0!==document.onselectstart&&(document.onselectstart=s.onselectstart),void 0!==document.ondrag&&(document.ondrag=s.ondrag))}))},options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})}(jQuery)},"./public/vendor/flot/jquery.flot.stack.js":()=>{jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,a){if(null!=t.stack&&!1!==t.stack){var s=function(e,t){for(var a=null,s=0;s<t.length&&e!=t[s];++s)t[s].stack==e.stack&&(a=t[s]);return a}(t,e.getData());if(s){for(var n,r,i,o,l,c,d=a.pointsize,u=a.points,p=s.datapoints.pointsize,h=s.datapoints.points,m=[],g=t.lines.show,f=t.bars.horizontal,b=d>2&&(f?a.format[2].x:a.format[2].y),v=g&&t.lines.steps,x=f?1:0,y=f?0:1,w=0,j=0;!(w>=u.length&&j>=h.length);){if(l=m.length,w<u.length&&null==u[w]){for(c=0;c<d;++c)m.push(u[w+c]);w+=d}else if(w>=u.length){for(c=0;c<d;++c)m.push(h[j+c]);b&&(m[l+2]=h[j+y]),j+=p}else if(j>=h.length){for(c=0;c<d;++c)m.push(u[w+c]);w+=d}else if(j<h.length&&null==h[j])j+=p;else{if(n=u[w+x],u[w+y],r=h[j+x],i=h[j+y],o=0,n==r){for(c=0;c<d;++c)m.push(u[w+c]);m[l+y]+=i,o=i,w+=d,j+=p}else if(n>r){if(0==w){for(c=0;c<d;++c)m.push(h[j+c]);o=i}if(w>0&&null!=u[w-d]){for(m.push(r),m.push(0+i),c=2;c<d;++c)m.push(u[w+c]);o=i}j+=p}else{for(c=0;c<d;++c)m.push(u[w+c]);j>0&&null!=h[j-p]&&(o=0),m[l+y]+=o,w+=d}fromgap=!1,l!=m.length&&b&&(m[l+2]=o)}if(v&&l!=m.length&&l>0&&null!=m[l]&&m[l]!=m[l-d]&&m[l+1]!=m[l-d+1]){for(c=0;c<d;++c)m[l+d+c]=m[l+c];m[l+1]=m[l-d+1]}}a.points=m}}}))},options:{series:{stack:null}},name:"stack",version:"1.2"})},"./public/vendor/flot/jquery.flot.stackpercent.js":()=>{jQuery.plot.plugins.push({init:function(e){var t={},a=!1,s={};function n(e){var t=e.length,a={};if(t>0)for(var s=0;s<t;s++)if(e[s].stackpercent){var n=0,r=1;e[s].bars&&e[s].bars.horizontal&&!0===e[s].bars.horizontal&&(n=1,r=0);for(var i=e[s].data.length,o=0;o<i;o++){var l=0;null!=e[s].data[o][1]&&(l=e[s].data[o][r]),a[e[s].data[o][n]+""]?a[e[s].data[o][n]+""]+=l:a[e[s].data[o][n]+""]=l}}return a}e.hooks.processRawData.push((function(e,t,r,i){if(a||(a=!0,s=n(e.getData())),1==t.stackpercent){var o=r.length;t.percents=[];var l=0,c=1;t.bars&&t.bars.horizontal&&!0===t.bars.horizontal&&(l=1,c=0);for(var d=0;d<o;d++){var u=s[r[d][l]+""];u>0?t.percents.push(100*r[d][c]/u):t.percents.push(0)}}})),e.hooks.processDatapoints.push((function(e,r,i){if(r.stackpercent){a||(s=n(e.getData()));var o=[],l=0,c=1;r.bars&&r.bars.horizontal&&!0===r.bars.horizontal&&(l=1,c=0);for(var d=0;d<i.points.length;d+=3)t[i.points[d+l]]||(t[i.points[d+l]]=0),o[d+l]=i.points[d+l],o[d+c]=i.points[d+c]+t[i.points[d+l]],o[d+2]=t[i.points[d+l]],t[i.points[d+l]]+=i.points[d+c],s[o[d+l]+""]>0?(o[d+c]=100*o[d+c]/s[o[d+l]+""],o[d+2]=100*o[d+2]/s[o[d+l]+""]):(o[d+c]=0,o[d+2]=0);i.points=o}}))},options:{series:{stackpercent:null}},name:"stackpercent",version:"0.1"})},"./public/vendor/flot/jquery.flot.time.js":()=>{!function(e){function t(e,t){return t*Math.floor(e/t)}function a(e,t,a,s){if("function"==typeof e.strftime)return e.strftime(t);var n,r=function(e,t){return t=""+(null==t?"0":t),1==(e=""+e).length?t+e:e},i=[],o=!1,l=e.getHours(),c=l<12;null==a&&(a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==s&&(s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),n=l>12?l-12:0==l?12:l;for(var d=0;d<t.length;++d){var u=t.charAt(d);if(o){switch(u){case"a":u=""+s[e.getDay()];break;case"b":u=""+a[e.getMonth()];break;case"d":u=r(e.getDate(),"");break;case"e":u=r(e.getDate()," ");break;case"h":case"H":u=r(l);break;case"I":u=r(n);break;case"l":u=r(n," ");break;case"m":u=r(e.getMonth()+1,"");break;case"M":u=r(e.getMinutes());break;case"q":u=""+(Math.floor(e.getMonth()/3)+1);break;case"S":u=r(e.getSeconds());break;case"y":u=r(e.getFullYear()%100);break;case"Y":u=""+e.getFullYear();break;case"p":u=c?"am":"pm";break;case"P":u=c?"AM":"PM";break;case"w":u=""+e.getDay()}i.push(u),o=!1}else"%"==u?o=!0:i.push(u)}return i.join("")}function s(e){function t(e,t,a,s){e[t]=function(){return a[s].apply(a,arguments)}}var a={date:e};null!=e.strftime&&t(a,"strftime",e,"strftime"),t(a,"getTime",e,"getTime"),t(a,"setTime",e,"setTime");for(var s=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],n=0;n<s.length;n++)t(a,"get"+s[n],e,"getUTC"+s[n]),t(a,"set"+s[n],e,"setUTC"+s[n]);return a}function n(e,t){if("browser"==t.timezone)return new Date(e);if(t.timezone&&"utc"!=t.timezone){if("undefined"!=typeof timezoneJS&&void 0!==timezoneJS.Date){var a=new timezoneJS.Date;return a.setTimezone(t.timezone),a.setTime(e),a}return s(new Date(e))}return s(new Date(e))}var r={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},i=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],o=i.concat([[3,"month"],[6,"month"],[1,"year"]]),l=i.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:function(s){s.hooks.processOptions.push((function(s,i){e.each(s.getAxes(),(function(e,s){var i=s.options;"time"==i.mode&&(s.tickGenerator=function(e){var a=[],s=n(e.min,i),c=0,d=i.tickSize&&"quarter"===i.tickSize[1]||i.minTickSize&&"quarter"===i.minTickSize[1]?l:o;null!=i.minTickSize&&(c="number"==typeof i.tickSize?i.tickSize:i.minTickSize[0]*r[i.minTickSize[1]]);for(var u=0;u<d.length-1&&!(e.delta<(d[u][0]*r[d[u][1]]+d[u+1][0]*r[d[u+1][1]])/2&&d[u][0]*r[d[u][1]]>=c);++u);var p=d[u][0],h=d[u][1];if("year"==h){if(null!=i.minTickSize&&"year"==i.minTickSize[1])p=Math.floor(i.minTickSize[0]);else{var m=Math.pow(10,Math.floor(Math.log(e.delta/r.year)/Math.LN10)),g=e.delta/r.year/m;p=g<1.5?1:g<3?2:g<7.5?5:10,p*=m}p<1&&(p=1)}e.tickSize=i.tickSize||[p,h];var f=e.tickSize[0];h=e.tickSize[1];var b=f*r[h];"second"==h?s.setSeconds(t(s.getSeconds(),f)):"minute"==h?s.setMinutes(t(s.getMinutes(),f)):"hour"==h?s.setHours(t(s.getHours(),f)):"month"==h?s.setMonth(t(s.getMonth(),f)):"quarter"==h?s.setMonth(3*t(s.getMonth()/3,f)):"year"==h&&s.setFullYear(t(s.getFullYear(),f)),s.setMilliseconds(0),b>=r.minute&&s.setSeconds(0),b>=r.hour&&s.setMinutes(0),b>=r.day&&s.setHours(0),b>=4*r.day&&s.setDate(1),b>=2*r.month&&s.setMonth(t(s.getMonth(),3)),b>=2*r.quarter&&s.setMonth(t(s.getMonth(),6)),b>=r.year&&s.setMonth(0);var v,x=0,y=Number.NaN;do{if(v=y,y=s.getTime(),a.push(y),"month"==h||"quarter"==h)if(f<1){s.setDate(1);var w=s.getTime();s.setMonth(s.getMonth()+("quarter"==h?3:1));var j=s.getTime();s.setTime(y+x*r.hour+(j-w)*f),x=s.getHours(),s.setHours(0)}else s.setMonth(s.getMonth()+f*("quarter"==h?3:1));else"year"==h?s.setFullYear(s.getFullYear()+f):s.setTime(y+b)}while(y<e.max&&y!=v);return a},s.tickFormatter=function(e,t){var s=n(e,t.options);if(null!=i.timeformat)return a(s,i.timeformat,i.monthNames,i.dayNames);var o=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],l=t.tickSize[0]*r[t.tickSize[1]],c=t.max-t.min,d=i.twelveHourClock?" %p":"",u=i.twelveHourClock?"%I":"%H";return a(s,l<r.minute?u+":%M:%S"+d:l<r.day?c<2*r.day?u+":%M"+d:"%b %d "+u+":%M"+d:l<r.month?"%b %d":o&&l<r.quarter||!o&&l<r.year?c<r.year?"%b":"%b %Y":o&&l<r.year?c<r.year?"Q%q":"Q%q %Y":"%Y",i.monthNames,i.dayNames)})}))}))},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"}),e.plot.formatDate=a}(jQuery)},"./public/vendor/tagsinput/bootstrap-tagsinput.js":()=>{!function(e){"use strict";var t={tagClass:function(e){return"label label-info"},itemValue:function(e){return e?e.toString():e},itemText:function(e){return this.itemValue(e)},freeInput:!0,maxTags:void 0,confirmKeys:[13],onTagExists:function(e,t){t.hide().fadeIn()}};function a(t,a){this.itemsArray=[],this.$element=e(t),this.$element.hide(),this.widthClass=a.widthClass||"width-9",this.isSelect="SELECT"===t.tagName,this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=a&&a.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.$container=e('<div class="bootstrap-tagsinput"></div>'),this.$input=e('<input class="gf-form-input '+this.widthClass+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(a)}function s(e,t){if("function"!=typeof e[t]){var a=e[t];e[t]=function(e){return e[a]}}}a.prototype={constructor:a,add:function(t,a){var s=this;if(!(s.options.maxTags&&s.itemsArray.length>=s.options.maxTags)&&(!1===t||t)){if("object"==typeof t&&!s.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(s.isSelect&&!s.multiple&&s.itemsArray.length>0&&s.remove(s.itemsArray[0]),"string"==typeof t&&"INPUT"===this.$element[0].tagName){var n=t.split(",");if(n.length>1){for(var i=0;i<n.length;i++)this.add(n[i],!0);return void(a||s.pushVal())}}var o=s.options.itemValue(t),l=s.options.itemText(t),c=s.options.tagClass(t),d=e.grep(s.itemsArray,(function(e){return s.options.itemValue(e)===o}))[0];if(d){if(s.options.onTagExists){var u=e(".tag",s.$container).filter((function(){return e(this).data("item")===d}));s.options.onTagExists(t,u)}}else{s.itemsArray.push(t);var p=e('<span class="tag '+r(c)+'">'+r(l)+'<span data-role="remove"></span></span>');if(p.data("item",t),s.findInputWrapper().before(p),p.after(" "),s.isSelect&&!e('option[value="'+escape(o)+'"]',s.$element)[0]){var h=e("<option selected>"+r(l)+"</option>");h.data("item",t),h.attr("value",o),s.$element.append(h)}a||s.pushVal(),s.options.maxTags===s.itemsArray.length&&s.$container.addClass("bootstrap-tagsinput-max"),s.$element.trigger(e.Event("itemAdded",{item:t}))}}}},remove:function(t,a){var s=this;s.objectItems&&(t="object"==typeof t?e.grep(s.itemsArray,(function(e){return s.options.itemValue(e)==s.options.itemValue(t)}))[0]:e.grep(s.itemsArray,(function(e){return s.options.itemValue(e)==t}))[0]),t&&(e(".tag",s.$container).filter((function(){return e(this).data("item")===t})).remove(),e("option",s.$element).filter((function(){return e(this).data("item")===t})).remove(),s.itemsArray.splice(e.inArray(t,s.itemsArray),1)),a||s.pushVal(),s.options.maxTags>s.itemsArray.length&&s.$container.removeClass("bootstrap-tagsinput-max"),s.$element.trigger(e.Event("itemRemoved",{item:t}))},removeAll:function(){var t=this;for(e(".tag",t.$container).remove(),e("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal(),t.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var t=this;e(".tag",t.$container).each((function(){var a=e(this),s=a.data("item"),n=t.options.itemValue(s),i=t.options.itemText(s),o=t.options.tagClass(s);(a.attr("class",null),a.addClass("tag "+r(o)),a.contents().filter((function(){return 3==this.nodeType}))[0].nodeValue=r(i),t.isSelect)&&e("option",t.$element).filter((function(){return e(this).data("item")===s})).attr("value",n)}))},items:function(){return this.itemsArray},pushVal:function(){var t=this,a=e.map(t.items(),(function(e){return t.options.itemValue(e).toString()}));t.$element.val(a,!0).trigger("change")},build:function(a){var n=this;n.options=e.extend({},t,a);var r=n.options.typeahead||{};n.objectItems&&(n.options.freeInput=!1),s(n.options,"itemValue"),s(n.options,"itemText"),s(n.options,"tagClass"),n.options.source&&(r.source=n.options.source),r.source&&e.fn.typeahead&&(!function(e,t){if("function"!=typeof e[t]){var a=e[t];e[t]=function(){return a}}}(r,"source"),n.$input.typeahead({source:function(t,a){function s(e){for(var t=[],s=0;s<e.length;s++){var r=n.options.itemText(e[s]);i[r]=e[s],t.push(r)}a(t)}this.map={};var i=this.map,o=r.source(t);e.isFunction(o.success)?o.success(s):e.when(o).then(s)},updater:function(e){n.add(this.map[e])},matcher:function(e){return-1!==e.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(e){return e.sort()},highlighter:function(e){var t=new RegExp("("+this.query+")","gi");return e.replace(t,"<strong>$1</strong>")}})),n.$container.on("click",e.proxy((function(e){n.$input.focus()}),n)),n.$container.on("blur","input",e.proxy((function(t){var a=e(t.target);n.add(a.val()),a.val(""),t.preventDefault()}),n)),n.$container.on("keydown","input",e.proxy((function(t){var a=e(t.target),s=n.findInputWrapper();switch(t.which){case 8:if(0===i(a[0])){var r=s.prev();r&&n.remove(r.data("item"))}break;case 46:if(0===i(a[0])){var o=s.next();o&&n.remove(o.data("item"))}break;case 37:var l=s.prev();0===a.val().length&&l[0]&&(l.before(s),a.focus());break;case 39:var c=s.next();0===a.val().length&&c[0]&&(c.after(s),a.focus());break;default:n.options.freeInput&&e.inArray(t.which,n.options.confirmKeys)>=0&&(n.add(a.val()),a.val(""),t.preventDefault())}a.attr("size",Math.max(this.inputSize,a.val().length))}),n)),n.$container.on("click","[data-role=remove]",e.proxy((function(t){n.remove(e(t.target).closest(".tag").data("item")),t.stopPropagation()}),n)),n.options.itemValue===t.itemValue&&("INPUT"===n.$element[0].tagName?n.add(n.$element.val()):e("option",n.$element).each((function(){n.add(e(this).attr("value"),!0)})))},destroy:function(){var e=this;e.$container.off("keypress","input"),e.$container.off("click","[role=remove]"),e.$container.remove(),e.$element.removeData("tagsinput"),e.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],a=this.$container[0];t&&t.parentNode!==a;)t=t.parentNode;return e(t)}},e.fn.tagsinput=function(t,s){var n=[];return this.each((function(){var r=e(this).data("tagsinput");if(r){var i=r[t](s);void 0!==i&&n.push(i)}else r=new a(this,t),e(this).data("tagsinput",r),n.push(r),"SELECT"===this.tagName&&e("option",e(this)).attr("selected","selected"),e(this).val(e(this).val())})),"string"==typeof t?n.length>1?n:n[0]:n},e.fn.tagsinput.Constructor=a;var n=e("<div />");function r(e){return e?n.text(e).html():""}function i(e){var t=0;if(document.selection){e.focus();var a=document.selection.createRange();a.moveStart("character",-e.value.length),t=a.text.length}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t}e((function(){e("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()}))}(window.jQuery)}}]);
//# sourceMappingURL=5893.109a2a405cf7c8a04a9d.js.map