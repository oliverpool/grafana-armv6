"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4620],{78014:(S,E,t)=>{t.d(E,{Z:()=>l});var n=t(68404),a=t(79230),o=t(90723),v=t(79979);class l extends n.PureComponent{render(){const{searchQuery:P,linkButton:D,setSearchQuery:d,target:h,placeholder:r="Search by name or type",sortPicker:u}=this.props,p={href:D?.href,disabled:D?.disabled};return h&&(p.target=h),n.createElement("div",{className:"page-action-bar"},n.createElement("div",{className:"gf-form gf-form--grow"},n.createElement(a.H,{value:P,onChange:d,placeholder:r})),u&&n.createElement(v.P,{onChange:u.onChange,value:u.value,getSortOptions:u.getSortOptions}),D&&n.createElement(o.Qj,{...p},D.title))}}},43137:(S,E,t)=>{t.d(E,{l:()=>h,S:()=>D});var n=t(52423),a=t(68404),o=t(29516),v=t(2323),l=t(90723),c=t(86475);const P=r=>({alertContent:n.css`
    display: flex;
    flex-direction: row;
    padding: 0;
    justify-content: space-between;
    align-items: center;
  `,alertParagraph:n.css`
    margin: 0 ${r.spacing(1)} 0 0;
    line-height: ${r.spacing(r.components.height.sm)};
    color: ${r.colors.text.primary};
  `});var D=(r=>(r.dataSources="dataSources",r.connectData="connectData",r))(D||{});const d={dataSources:c.Z.DataSources,connectData:c.Z.ConnectData};function h({destinationPage:r}){const u=(0,o.wW)(P);return a.createElement(v.b,{severity:"warning",title:""},a.createElement("div",{className:u.alertContent},a.createElement("p",{className:u.alertParagraph},"Data sources have a new home! You can discover new data sources or manage existing ones in the new Connections page, accessible from the lefthand nav."),a.createElement(l.Qj,{"aria-label":"Link to Connections",icon:"adjust-circle",href:d[r]},"See data sources in Connections")))}},19703:(S,E,t)=>{t.d(E,{G:()=>P});var n=t(68404),a=t(93003),o=t(90723),v=t(77582),l=t(81168),c=t(25e3);function P(){const D=v.Vt.hasPermission(l.AccessControlAction.DataSourcesCreate),d=(0,c.d7)();return D?n.createElement(o.Qj,{icon:"plus",href:a.v.appSubUrl+d.New},"Add new data source"):null}},81955:(S,E,t)=>{t.d(E,{c:()=>y});var n=t(52423),a=t(68404),o=t(93003),v=t(29516),l=t(66208),c=t(3349),P=t(90723),D=t(69142),d=t(2555),h=t(77582),r=t(81168),u=t(25e3),p=t(85597),B=t(78014);const L="alpha-asc",I="alpha-desc",U=[{label:"Sort by A\u2013Z",value:L},{label:"Sort by Z\u2013A",value:I}];function W(){const m=(0,r.useDispatch)(),C=(0,a.useCallback)(g=>m((0,u.zT)(g)),[m]),M=(0,r.useSelector)(({dataSources:g})=>(0,u.IO)(g)),A=h.Vt.hasPermission(r.AccessControlAction.DataSourcesCreate),_=(0,u.d7)(),e=!o.v.featureToggles.topnav&&A?{href:_.New,title:"Add new data source"}:void 0,s=(0,a.useCallback)(g=>m((0,u.Nu)(g.value===L)),[m]),i=(0,r.useSelector)(({dataSources:g})=>(0,u.IA)(g)),O={onChange:s,value:i?L:I,getSortOptions:()=>Promise.resolve(U)};return a.createElement(B.Z,{searchQuery:M,setSearchQuery:C,key:"action-bar",sortPicker:O,linkButton:e})}function y(){(0,u.zJ)();const m=(0,r.useSelector)(e=>(0,u.mt)(e.dataSources)),C=(0,r.useSelector)(({dataSources:e})=>(0,u.r7)(e)),M=(0,r.useSelector)(({dataSources:e})=>e.hasFetched),A=h.Vt.hasPermission(r.AccessControlAction.DataSourcesCreate),_=h.Vt.hasPermission(r.AccessControlAction.DataSourcesWrite),f=h.Vt.hasPermission(r.AccessControlAction.DataSourcesExplore);return a.createElement(K,{dataSources:m,dataSourcesCount:C,isLoading:!M,hasCreateRights:A,hasWriteRights:_,hasExploreRights:f})}function K({dataSources:m,dataSourcesCount:C,isLoading:M,hasCreateRights:A,hasWriteRights:_,hasExploreRights:f}){const e=(0,v.wW)(T),s=(0,u.d7)();return M?a.createElement(d.Z,null):C===0?a.createElement(D.Z,{buttonDisabled:!A,title:"No data sources defined",buttonIcon:"database",buttonLink:s.New,buttonTitle:"Add data source",proTip:"You can also define data sources through configuration files.",proTipLink:"http://docs.grafana.org/administration/provisioning/#datasources?utm_source=grafana_ds_list",proTipLinkTitle:"Learn more",proTipTarget:"_blank"}):a.createElement(a.Fragment,null,a.createElement(W,null),a.createElement("ul",{className:e.list},m.map(i=>{const O=o.v.appSubUrl+s.Edit.replace(/:uid/gi,i.uid);return a.createElement("li",{key:i.uid},a.createElement(l.Z,{href:_?O:void 0},a.createElement(l.Z.Heading,null,i.name),a.createElement(l.Z.Figure,null,a.createElement("img",{src:i.typeLogoUrl,alt:"",height:"40px",width:"40px",className:e.logo})),a.createElement(l.Z.Meta,null,[i.typeName,i.url,i.isDefault&&a.createElement(c.V,{key:"default-tag",name:"default",colorIndex:1})]),a.createElement(l.Z.Tags,null,a.createElement(P.Qj,{icon:"apps",fill:"outline",variant:"secondary",href:`dashboard/new-with-ds/${i.uid}`},"Build a dashboard"),f&&a.createElement(P.Qj,{icon:"compass",fill:"outline",variant:"secondary",className:e.button,href:(0,p.iU)(i)},"Explore"))))})))}const T=m=>({list:(0,n.css)({listStyle:"none",display:"grid"}),logo:(0,n.css)({objectFit:"contain"}),button:(0,n.css)({marginLeft:m.spacing(2)})})},85292:(S,E,t)=>{t.r(E),t.d(E,{DataSourcesListPage:()=>P,default:()=>D});var n=t(68404),a=t(93003),o=t(79396),v=t(43137),l=t(19703),c=t(81955);function P(){const d=a.v.featureToggles.topnav?n.createElement(l.G,null):void 0;return n.createElement(o.T,{navId:"datasources",actions:d},n.createElement(o.T.Contents,null,a.v.featureToggles.dataConnectionsConsole&&n.createElement(v.l,{destinationPage:v.S.dataSources}),n.createElement(c.c,null)))}const D=P},59332:(S,E,t)=>{t.d(E,{V:()=>o});var n=t(68404),a=t(3597);const o=(0,n.createContext)(a.n)},24231:(S,E,t)=>{t.d(E,{E:()=>p,IA:()=>m,MF:()=>A,OU:()=>U,Qs:()=>C,YY:()=>_,_l:()=>M,d7:()=>f,hw:()=>B,nH:()=>W,q6:()=>K,qj:()=>y,wi:()=>I,wl:()=>T,zJ:()=>L});var n=t(68404),a=t(70431),o=t(97063),v=t(77582),l=t(86245),c=t(81168),P=t(45984),D=t(85597),d=t(40897),h=t(59332),r=t(79508),u=t(93769);const p=e=>{const s=(0,c.useDispatch)();(0,n.useEffect)(()=>(s((0,d.M9)(e)),function(){s((0,a.e)({cleanupAction:O=>O.dataSourceSettings}))}),[e,s])},B=e=>{const s=(0,c.useDispatch)();return()=>s((0,d.kY)(e))},L=()=>{const e=(0,c.useDispatch)();(0,n.useEffect)(()=>{e((0,d.bZ)())},[e])},I=e=>{const s=(0,c.useDispatch)();(0,n.useEffect)(()=>{s((0,d.gv)(e))},[s,e])},U=()=>{const e=(0,c.useDispatch)();(0,n.useEffect)(()=>{e((0,d.Kj)())},[e])},W=()=>{const e=(0,c.useDispatch)(),s=f();return i=>{e((0,d.J_)(i,s.Edit))}},y=()=>{const e=(0,c.useDispatch)();return async s=>e((0,d.oe)(s))},K=()=>{const e=(0,c.useDispatch)(),{name:s}=(0,c.useSelector)(i=>i.dataSources.dataSource);return()=>{o.Z.publish(new P.VJ({title:"Delete",text:`Are you sure you want to delete the "${s}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>e((0,d.F5)())}))}},T=e=>(0,c.useSelector)(s=>(0,u.f6)(s.dataSources,e)),m=e=>{const s=T(e);return(0,D.iU)(s)},C=e=>(0,c.useSelector)(s=>(0,u.G4)(s.dataSources,e)),M=()=>(0,c.useSelector)(e=>e.dataSourceSettings),A=(e,s)=>{const i=T(e),{plugin:O,loadError:g,loading:Z}=M(),x=(0,c.useSelector)(R=>R.navIndex),N=s?`datasource-${s}-${e}`:`datasource-settings-${e}`;if(g){const R={text:g,subTitle:"Data Source Error",icon:"exclamation-triangle"};return{node:R,main:R}}return Z||!O?(0,l.ht)(x,N,(0,r.xG)("settings")):(0,l.ht)(x,N,(0,r.nI)((0,r.B1)(i,O),s||"settings"))},_=e=>{const s=T(e),i=s.readOnly===!0,O=v.Vt.hasPermissionInMetadata(c.AccessControlAction.DataSourcesWrite,s),g=v.Vt.hasPermissionInMetadata(c.AccessControlAction.DataSourcesDelete,s);return{readOnly:i,hasWriteRights:O,hasDeleteRights:g}},f=()=>(0,n.useContext)(h.V)},25e3:(S,E,t)=>{t.d(E,{BX:()=>l.BX,E:()=>o.E,Ht:()=>l.Ht,I5:()=>c.I5,IA:()=>c.IA,IO:()=>c.IO,MF:()=>o.MF,Nu:()=>l.Nu,OU:()=>o.OU,Qs:()=>o.Qs,Rz:()=>o.IA,Vj:()=>a.V,YY:()=>o.YY,_l:()=>o._l,bZ:()=>n.bZ,d7:()=>o.d7,hw:()=>o.hw,mt:()=>c.mt,nH:()=>o.nH,q6:()=>o.q6,qj:()=>o.qj,r7:()=>c.r7,rl:()=>l.rl,wi:()=>o.wi,wl:()=>o.wl,yr:()=>l.yr,zJ:()=>o.zJ,zT:()=>l.zT});var n=t(40897),a=t(59332),o=t(24231),v=t(79508),l=t(71128),c=t(93769)}}]);

//# sourceMappingURL=DataSourcesListPage.631d26e8eb6bf2b107e6.js.map